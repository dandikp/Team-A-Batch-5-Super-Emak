!function(t){"use strict";var e={objectMaxDepth:5};function n(t){if(!H(t))return e;U(t.objectMaxDepth)&&(e.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN)}function r(t){return L(t)&&t>0}function i(t,n){return n=n||Error,function(){var r,i,o=arguments[0],a=arguments[1],s="["+(t?t+":":"")+o+"] ",u=pt(arguments,2).map(function(t){return Jt(t,e.objectMaxDepth)});for(s+=a.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<u.length?u[e]:t}),s+="\nhttp://errors.angularjs.org/1.6.8/"+(t?t+"/":"")+o,i=0,r="?";i<u.length;i++,r="&")s+=r+"p"+i+"="+encodeURIComponent(u[i]);return new n(s)}}var o=/^\/(.+)\/([a-z]*)$/,a="validity",s=Object.prototype.hasOwnProperty,u=function(t){return F(t)?t.toLowerCase():t},c=function(t){return F(t)?t.toUpperCase():t};"i"!=="I".toLowerCase()&&(u=function(t){return F(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},c=function(t){return F(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t});var l,f,p,h,d=[].slice,v=[].splice,m=[].push,$=Object.prototype.toString,g=Object.getPrototypeOf,y=i("ng"),w=t.angular||(t.angular={}),b=0;function S(t){if(null==t||K(t))return!1;if(z(t)||F(t)||f&&t instanceof f)return!0;var e="length"in Object(t)&&t.length;return L(e)&&(e>=0&&(e-1 in t||t instanceof Array)||"function"==typeof t.item)}function E(t,e,n){var r,i;if(t)if(G(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(z(t)||S(t)){var o="object"!=typeof t;for(r=0,i=t.length;r<i;r++)(o||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==E)t.forEach(e,n,t);else if(q(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)s.call(t,r)&&e.call(n,t[r],r,t);return t}function x(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function C(t){return function(e,n){t(n,e)}}function _(){return++b}function k(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function T(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var a=e[i];if(H(a)||G(a))for(var s=Object.keys(a),u=0,c=s.length;u<c;u++){var l=s[u],f=a[l];n&&H(f)?B(f)?t[l]=new Date(f.valueOf()):J(f)?t[l]=new RegExp(f):f.nodeName?t[l]=f.cloneNode(!0):nt(f)?t[l]=f.clone():(H(t[l])||(t[l]=z(f)?[]:{}),T(t[l],[f],!0)):t[l]=f}}return k(t,r),t}function A(t){return T(t,d.call(arguments,1),!1)}function O(t){return T(t,d.call(arguments,1),!0)}function R(t){return parseInt(t,10)}l=t.document.documentMode;var P=Number.isNaN||function(t){return t!=t};function V(t,e){return A(Object.create(t),e)}function I(){}function j(t){return t}function M(t){return function(){return t}}function N(t){return G(t.toString)&&t.toString!==$}function D(t){return void 0===t}function U(t){return void 0!==t}function H(t){return null!==t&&"object"==typeof t}function q(t){return null!==t&&"object"==typeof t&&!g(t)}function F(t){return"string"==typeof t}function L(t){return"number"==typeof t}function B(t){return"[object Date]"===$.call(t)}I.$inject=[],j.$inject=[];var z=Array.isArray;function W(t){switch($.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function G(t){return"function"==typeof t}function J(t){return"[object RegExp]"===$.call(t)}function K(t){return t&&t.window===t}function Z(t){return t&&t.$evalAsync&&t.$watch}function Y(t){return"boolean"==typeof t}function Q(t){return t&&G(t.then)}var X=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;var tt=function(t){return F(t)?t.trim():t},et=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function nt(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function rt(t){return u(t.nodeName||t[0]&&t[0].nodeName)}function it(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function ot(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function at(t,e,n){var i,o,a=[],u=[];if(n=r(n)?n:NaN,e){if((o=e)&&L(o.length)&&X.test($.call(o))||(i=e,"[object ArrayBuffer]"===$.call(i)))throw y("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw y("cpi","Can't copy! Source and destination are identical.");return z(e)?e.length=0:E(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),a.push(t),u.push(e),c(t,e,n)}return l(t,n);function c(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(z(t))for(var o=0,a=t.length;o<a;o++)e.push(l(t[o],n));else if(q(t))for(r in t)e[r]=l(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=l(t[r],n));else for(r in t)s.call(t,r)&&(e[r]=l(t[r],n));return k(e,i),e}function l(t,e){if(!H(t))return t;var n=a.indexOf(t);if(-1!==n)return u[n];if(K(t)||Z(t))throw y("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(t){switch($.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(l(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(G(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=z(t)?[]:Object.create(g(t)),r=!0),a.push(t),u.push(i),r?c(t,i,e):i}}function st(t,e){return t===e||t!=t&&e!=e}function ut(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o===typeof e&&"object"===o){if(!z(t)){if(B(t))return!!B(e)&&st(t.getTime(),e.getTime());if(J(t))return!!J(e)&&t.toString()===e.toString();if(Z(t)||Z(e)||K(t)||K(e)||z(e)||B(e)||J(e))return!1;for(r in i=Ht(),t)if("$"!==r.charAt(0)&&!G(t[r])){if(!ut(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&U(e[r])&&!G(e[r]))return!1;return!0}if(!z(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!ut(t[r],e[r]))return!1;return!0}}return!1}var ct=function(){if(!U(ct.rules)){var e=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(e){var n=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");ct.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else ct.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return ct.rules},lt=function(){if(U(lt.name_))return lt.name_;var e,n,r,i,o=_t.length;for(n=0;n<o;++n)if(r=_t[n],e=t.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return lt.name_=i};function ft(t,e,n){return t.concat(d.call(e,n))}function pt(t,e){return d.call(t,e||0)}function ht(t,e){var n=arguments.length>2?pt(arguments,2):[];return!G(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,ft(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:K(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":Z(n)&&(r="$SCOPE"),r}function vt(t,e){if(!D(t))return L(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function mt(t){return F(t)?JSON.parse(t):t}var $t=/:/g;function gt(t,e){t=t.replace($t,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return P(n)?e:n}function yt(t,e,n){n=n?-1:1;var r,i,o=t.getTimezoneOffset(),a=gt(e,o);return r=t,i=n*(a-o),(r=new Date(r.getTime())).setMinutes(r.getMinutes()+i),r}function wt(t){t=f(t).clone().empty();var e=f("<div>").append(t).html();try{return t[0].nodeType===Lt?u(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+u(e)})}catch(t){return u(e)}}function bt(t){try{return decodeURIComponent(t)}catch(t){}}function St(t){var e={};return E((t||"").split("&"),function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),U(r=bt(r))&&(i=!U(i)||bt(i),s.call(e,r)?z(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))}),e}function Et(t){var e=[];return E(t,function(t,n){z(t)?E(t,function(t){e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))}):e.push(Ct(n,!0)+(!0===t?"":"="+Ct(t,!0)))}),e.length?e.join("&"):""}function xt(t){return Ct(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Ct(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var _t=["ng-","data-ng-","ng:","x-ng-"];var kt=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every(function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(t.document);function Tt(e,n){var r,i,o={};if(E(_t,function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))}),E(_t,function(t){var n,o=t+"app";!r&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!kt)return void t.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,r,i=_t.length;for(r=0;r<i;++r)if(n=_t[r]+e,F(n=t.getAttribute(n)))return n;return null}(r,"strict-di"),n(r,i?[i]:[],o)}}function At(e,n,r){H(r)||(r={});r=A({strictDi:!1},r);var i=function(){if((e=f(e)).injector()){var i=e[0]===t.document?"document":wt(e);throw y("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Ze(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!a.test(t.name))return i();t.name=t.name.replace(a,""),w.resumeBootstrap=function(t){return E(t,function(t){n.push(t)}),i()},G(w.resumeDeferredBootstrap)&&w.resumeDeferredBootstrap()}function Ot(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Rt(t){var e=w.element(t).injector();if(!e)throw y("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Pt=/[A-Z]/g;function Vt(t,e){return e=e||"_",t.replace(Pt,function(t,n){return(n?e:"")+t.toLowerCase()})}var It=!1;function jt(t,e,n){if(!t)throw y("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Mt(t,e,n){return n&&z(t)&&(t=t[t.length-1]),jt(G(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Nt(t,e){if("hasOwnProperty"===t)throw y("badname","hasOwnProperty is not a valid {0} name",e)}function Dt(t,e,n){if(!e)return t;for(var r,i=e.split("."),o=t,a=i.length,s=0;s<a;s++)r=i[s],t&&(t=(o=t)[r]);return!n&&G(t)?ht(o,t):t}function Ut(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=f(d.call(t,0,i))),e.push(n));return e||t}function Ht(){return Object.create(null)}function qt(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!N(t)||z(t)||B(t)?vt(t):t.toString()}return t}var Ft=1,Lt=3,Bt=8,zt=9,Wt=11;function Gt(t,e){if(z(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(H(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function Jt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):D(t)?"undefined":"string"!=typeof t?(n=t,o=[],r(i=e)&&(n=w.copy(n,null,i)),JSON.stringify(n,function(t,e){if(H(e=dt(t,e))){if(o.indexOf(e)>=0)return"...";o.push(e)}return e})):t;var n,i,o}var Kt={full:"1.6.8",major:1,minor:6,dot:8,codeName:"beneficial-tincture"};he.expando="ng339";var Zt=he.cache={},Yt=1;he._data=function(t){return this.cache[t[this.expando]]||{}};var Qt=/-([a-z])/g,Xt=/^-ms-/,te={mouseleave:"mouseout",mouseenter:"mouseover"},ee=i("jqLite");function ne(t,e){return e.toUpperCase()}function re(t){return t.replace(Qt,ne)}var ie=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,oe=/<|&#?\w+;/,ae=/<([\w:-]+)/,se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ce(t){return!oe.test(t)}function le(t){var e=t.nodeType;return e===Ft||!e||e===zt}function fe(t,e){var n,r,i,o,a=e.createDocumentFragment(),s=[];if(ce(t))s.push(e.createTextNode(t));else{for(n=a.appendChild(e.createElement("div")),r=(ae.exec(t)||["",""])[1].toLowerCase(),i=ue[r]||ue._default,n.innerHTML=i[1]+t.replace(se,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;s=ft(s,n.childNodes),(n=a.firstChild).textContent=""}return a.textContent="",a.innerHTML="",E(s,function(t){a.appendChild(t)}),a}ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var pe=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function he(e){if(e instanceof he)return e;var n,r,i,o;if(F(e)&&(e=tt(e),n=!0),!(this instanceof he)){if(n&&"<"!==e.charAt(0))throw ee("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new he(e)}n?Ee(this,(r=e,i=i||t.document,(o=ie.exec(r))?[i.createElement(o[1])]:(o=fe(r,i))?o.childNodes:[])):G(e)?Te(e):Ee(this,e)}function de(t){return t.cloneNode(!0)}function ve(t,e){!e&&le(t)&&f.cleanData([t]),t.querySelectorAll&&f.cleanData(t.querySelectorAll("*"))}function me(t,e,n,r){if(U(r))throw ee("offargs","jqLite#off() does not support the `selector` argument");var i=ge(t),o=i&&i.events,a=i&&i.handle;if(a)if(e){var s=function(e){var r=o[e];U(n)&&ot(r||[],n),U(n)&&r&&r.length>0||(t.removeEventListener(e,a),delete o[e])};E(e.split(" "),function(t){s(t),te[t]&&s(te[t])})}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,a),delete o[e]}function $e(t,e){var n=t.ng339,r=n&&Zt[n];if(r){if(e)return void delete r.data[e];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),me(t)),delete Zt[n],t.ng339=void 0}}function ge(t,e){var n=t.ng339,r=n&&Zt[n];return e&&!r&&(t.ng339=n=++Yt,r=Zt[n]={events:{},data:{},handle:void 0}),r}function ye(t,e,n){if(le(t)){var r,i=U(n),o=!i&&e&&!H(e),a=!e,s=ge(t,!o),u=s&&s.data;if(i)u[re(e)]=n;else{if(a)return u;if(o)return u&&u[re(e)];for(r in e)u[re(r)]=e[r]}}}function we(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function be(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;E(e.split(" "),function(t){t=tt(t),r=r.replace(" "+t+" "," ")}),r!==n&&t.setAttribute("class",tt(r))}}function Se(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;E(e.split(" "),function(t){t=tt(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")}),r!==n&&t.setAttribute("class",tt(r))}}function Ee(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function xe(t,e){return Ce(t,"$"+(e||"ngController")+"Controller")}function Ce(t,e,n){t.nodeType===zt&&(t=t.documentElement);for(var r=z(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if(U(n=f.data(t,r[i])))return n;t=t.parentNode||t.nodeType===Wt&&t.host}}function _e(t){for(ve(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function ke(t,e){e||ve(t);var n=t.parentNode;n&&n.removeChild(t)}function Te(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var Ae=he.prototype={ready:Te,toString:function(){var t=[];return E(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return f(t>=0?this[t]:this[this.length+t])},length:0,push:m,sort:[].sort,splice:[].splice},Oe={};E("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Oe[u(t)]=t});var Re={};E("input,select,option,textarea,button,form,details".split(","),function(t){Re[t]=!0});var Pe={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Ve(t,e){var n=Oe[e.toLowerCase()];return n&&Re[rt(t)]&&n}function Ie(t,e,n){n.call(t,e)}function je(t,e,n){var r=e.relatedTarget;r&&(r===t||pe.call(t,r))||n.call(t,e)}function Me(){this.$get=function(){return A(he,{hasClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Se(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),be(t,e)}})}}function Ne(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return n="function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||_)():r+":"+t}E({data:ye,removeData:$e,hasData:function(t){for(var e in Zt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)$e(t[e])}},function(t,e){he[e]=t}),E({data:ye,inheritedData:Ce,scope:function(t){return f.data(t,"$scope")||Ce(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return f.data(t,"$isolateScope")||f.data(t,"$isolateScopeNoTemplate")},controller:xe,injector:function(t){return Ce(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:we,css:function(t,e,n){if(e=re(e.replace(Xt,"ms-")),!U(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==Lt&&2!==i&&i!==Bt&&t.getAttribute){var o=u(e),a=Oe[o];if(!U(n))return r=t.getAttribute(e),a&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&a?t.removeAttribute(e):t.setAttribute(e,a?o:n)}},prop:function(t,e,n){if(!U(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(D(e)){var n=t.nodeType;return n===Ft||n===Lt?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(D(e)){if(t.multiple&&"select"===rt(t)){var n=[];return E(t.options,function(t){t.selected&&n.push(t.value||t.text)}),n}return t.value}t.value=e},html:function(t,e){if(D(e))return t.innerHTML;ve(t,!0),t.innerHTML=e},empty:_e},function(t,e){he.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==_e&&D(2===t.length&&t!==we&&t!==xe?e:n)){if(H(e)){for(r=0;r<o;r++)if(t===ye)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var a=t.$dv,s=D(a)?Math.min(o,1):o,u=0;u<s;u++){var c=t(this[u],e,n);a=a?a+c:c}return a}for(r=0;r<o;r++)t(this[r],e,n);return this}}),E({removeData:$e,on:function(t,e,n,r){if(U(r))throw ee("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(le(t)){var i,o,a,s=ge(t,!0),u=s.events,c=s.handle;c||(c=s.handle=(o=u,(a=function(t,e){t.isDefaultPrevented=function(){return t.defaultPrevented};var n=o[e||t.type],r=n?n.length:0;if(r){if(D(t.immediatePropagationStopped)){var a=t.stopImmediatePropagation;t.stopImmediatePropagation=function(){t.immediatePropagationStopped=!0,t.stopPropagation&&t.stopPropagation(),a&&a.call(t)}}t.isImmediatePropagationStopped=function(){return!0===t.immediatePropagationStopped};var s=n.specialHandlerWrapper||Ie;r>1&&(n=Gt(n));for(var u=0;u<r;u++)t.isImmediatePropagationStopped()||s(i,t,n[u])}}).elem=i=t,a));for(var l=e.indexOf(" ")>=0?e.split(" "):[e],f=l.length,p=function(e,r,i){var o=u[e];o||((o=u[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,c)),o.push(n)};f--;)e=l[f],te[e]?(p(te[e],je),p(e,void 0,!0)):p(e)}},off:me,one:function(t,e,n){(t=f(t)).on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;ve(t),E(new he(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return E(t.childNodes,function(t){t.nodeType===Ft&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Ft||n===Wt)for(var r=0,i=(e=new he(e)).length;r<i;r++){var o=e[r];t.appendChild(o)}},prepend:function(t,e){if(t.nodeType===Ft){var n=t.firstChild;E(new he(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){var n,r,i;n=t,r=f(e).eq(0).clone()[0],(i=n.parentNode)&&i.replaceChild(r,n),r.appendChild(n)},remove:ke,detach:function(t){ke(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new he(e)).length;i<o;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Se,removeClass:be,toggleClass:function(t,e,n){e&&E(e.split(" "),function(e){var r=n;D(r)&&(r=!we(t,e)),(r?Se:be)(t,e)})},parent:function(t){var e=t.parentNode;return e&&e.nodeType!==Wt?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:de,triggerHandler:function(t,e,n){var r,i,o,a=e.type||e,s=ge(t),u=s&&s.events,c=u&&u[a];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:I,type:a,target:t},e.type&&(r=A(r,e)),i=Gt(c),o=n?[r].concat(n):[r],E(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){he.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;o<a;o++)D(i)?U(i=t(this[o],e,n,r))&&(i=f(i)):Ee(i,t(this[o],e,n,r));return U(i)?i:this}}),he.prototype.bind=he.prototype.on,he.prototype.unbind=he.prototype.off;var De=Object.create(null);function Ue(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Ue.prototype={_idx:function(t){return t===this._lastKey?this._lastIndex:(this._lastKey=t,this._lastIndex=this._keys.indexOf(t),this._lastIndex)},_transformKey:function(t){return P(t)?De:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var He=Ue,qe=[function(){this.$get=[function(){return He}]}],Fe=/^([^(]+?)=>/,Le=/^[^(]*\(\s*([^)]*)\)/m,Be=/,/,ze=/^\s*(_?)(\S+?)\1\s*$/,We=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ge=i("$injector");function Je(t){return Function.prototype.toString.call(t)}function Ke(t){var e=Je(t).replace(We,"");return e.match(Fe)||e.match(Le)}function Ze(t,e){e=!0===e;var n={},r="Provider",i=[],o=new He,a={$provide:{provider:d(v),factory:d(m),service:d(function(t,e){return m(t,["$injector",function(t){return t.instantiate(e)}])}),value:d(function(t,e){return m(t,M(e),!1)}),constant:d(function(t,e){Nt(t,"constant"),a[t]=e,u[t]=e}),decorator:function(t,e){var n=s.get(t+r),i=n.$get;n.$get=function(){var t=f.invoke(i,n);return f.invoke(e,null,{$delegate:t})}}}},s=a.$injector=g(a,function(t,e){throw w.isString(e)&&i.push(e),Ge("unpr","Unknown provider: {0}",i.join(" <- "))}),u={},c=g(u,function(t,e){var n=s.get(t+r,e);return f.invoke(n.$get,n,void 0,t)}),f=c;a["$injector"+r]={$get:M(c)},f.modules=s.modules=Ht();var p=$(t);return(f=c.get("$injector")).strictDi=e,E(p,function(t){t&&f.invoke(t)}),f.loadNewModules=function(t){E($(t),function(t){t&&f.invoke(t)})},f;function d(t){return function(e,n){if(!H(e))return t(e,n);E(e,C(t))}}function v(t,e){if(Nt(t,"service"),(G(e)||z(e))&&(e=s.instantiate(e)),!e.$get)throw Ge("pget","Provider '{0}' must define $get factory method.",t);return a[t+r]=e}function m(t,e,n){return v(t,{$get:!1!==n?(r=t,i=e,function(){var t=f.invoke(i,this);if(D(t))throw Ge("undef","Provider '{0}' must return a value from $get factory method.",r);return t}):e});var r,i}function $(t){jt(D(t)||z(t),"modulesToLoad","not an array");var e,n=[];return E(t,function(t){if(!o.get(t)){o.set(t,!0);try{F(t)?(e=h(t),f.modules[t]=e,n=n.concat($(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):G(t)?n.push(s.invoke(t)):z(t)?n.push(s.invoke(t)):Mt(t,"module")}catch(e){throw z(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ge("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=s.get(r[0]);i[r[1]].apply(i,r[2])}}}),n}function g(t,o){function s(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ge("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=o(e,r),t[e]}catch(r){throw t[e]===n&&delete t[e],r}finally{i.shift()}}function u(t,n,r){for(var i=[],o=Ze.$$annotate(t,e,r),a=0,u=o.length;a<u;a++){var c=o[a];if("string"!=typeof c)throw Ge("itkn","Incorrect injection token! Expected service name as string, got {0}",c);i.push(n&&n.hasOwnProperty(c)?n[c]:s(c,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i=u(t,n,r);return z(t)&&(t=t[t.length-1]),function(t){if(l||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return Y(e)||(e=t.$$ngIsClass=/^(?:class\b|constructor\()/.test(Je(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,n){var r=z(t)?t[t.length-1]:t,i=u(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:s,annotate:Ze.$$annotate,has:function(e){return a.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Ye(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var o=n.document;function a(t){if(t){t.scrollIntoView();var e=function(){var t=s.yOffset;if(G(t))t=t();else if(nt(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else L(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function s(t){var e,n,i;(t=F(t)?t:L(t)?t.toString():r.hash())?(e=o.getElementById(t))?a(e):(n=o.getElementsByName(t),i=null,Array.prototype.some.call(n,function(t){if("a"===rt(t))return i=t,!0}),(e=i)?a(e):"top"===t&&a(null)):a(null)}return e&&i.$watch(function(){return r.hash()},function(e,n){var r,o;e===n&&""===e||(r=function(){i.$evalAsync(s)},"complete"===(o=o||t).document.readyState?o.setTimeout(r):f(o).on("load",r))}),s}]}Ze.$$annotate=function(t,e,n){var r,i,o;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw F(n)&&n||(n=t.name||((o=Ke(t))?"function("+(o[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Ge("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);E(Ke(t)[1].split(Be),function(t){t.replace(ze,function(t,e,n){r.push(n)})})}t.$inject=r}}else z(t)?(Mt(t[i=t.length-1],"fn"),r=t.slice(0,i)):Mt(t,"fn",!0);return r};var Qe=i("$animate"),Xe=1,tn="ng-animate";function en(t,e){return t||e?t?e?(z(t)&&(t=t.join(" ")),z(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function nn(t){return H(t)?t:{}}var rn=function(){this.$get=I},on=function(){var t=new He,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:I,on:I,off:I,pin:I,push:function(a,s,u,c){var l,f,p,h,d,v;c&&c(),(u=u||{}).from&&a.css(u.from),u.to&&a.css(u.to),(u.addClass||u.removeClass)&&(l=a,f=u.addClass,p=u.removeClass,h=t.get(l)||{},d=i(h,f,!0),v=i(h,p,!1),(d||v)&&(t.set(l,h),e.push(l),1===e.length&&r.$$postDigest(o)));var m=new n;return m.complete(),m}};function i(t,e,n){var r=!1;return e&&E(e=F(e)?e.split(" "):z(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function o(){E(e,function(e){var n=t.get(e);if(n){var r=function(t){F(t)&&(t=t.split(" "));var e=Ht();return E(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),i="",o="";E(n,function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)}),E(e,function(t){i&&Se(t,i),o&&be(t,o)}),t.delete(e)}}),e.length=0}}]},an=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Qe("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=G(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&((n=t instanceof RegExp?t:null)&&new RegExp("[(\\s|\\/)]"+tn+"[(\\s|\\/)]").test(n.toString())))throw n=null,Qe("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',tn);return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType===Xe)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,i,o){return r=r&&f(r),i=i&&f(i),e(n,r=r||i.parent(),i),t.push(n,"enter",nn(o))},move:function(n,r,i,o){return r=r&&f(r),i=i&&f(i),e(n,r=r||i.parent(),i),t.push(n,"move",nn(o))},leave:function(e,n){return t.push(e,"leave",nn(n),function(){e.remove()})},addClass:function(e,n,r){return(r=nn(r)).addClass=en(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=nn(r)).removeClass=en(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=nn(i)).addClass=en(i.addClass,n),i.removeClass=en(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return(o=nn(o)).from=o.from?A(o.from,n):n,o.to=o.to?A(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=en(o.tempClasses,i),t.push(e,"animate",o)}}}]}],sn=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},un=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?i(t,0,!1):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function r(){if(n===t.length)return void e(!0);t[n](function(t){!1!==t?(n++,r()):e(!1)})}()},o.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}E(t,function(t){t.done(i)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:I,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(E(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},cn=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=at(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var o,a=new n;return{start:s,end:s};function s(){return t(function(){!function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null);i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null);i.to&&(e.css(i.to),i.to=null)}(),o||a.complete(),o=!0}),a}}}]};function ln(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new function(t,e,n,r){var i=this,o=t.location,a=t.history,s=t.setTimeout,u=t.clearTimeout,c={};i.isMock=!1;var l=0,p=[];function h(t){try{t.apply(null,pt(arguments,1))}finally{if(0==--l)for(;p.length;)try{p.pop()()}catch(t){n.error(t)}}}i.$$completeOutstandingRequest=h,i.$$incOutstandingRequestCount=function(){l++},i.notifyWhenNoOutstandingRequests=function(t){0===l?t():p.push(t)};var d,v,m=o.href,$=e.find("base"),g=null,y=r.history?function(){try{return a.state}catch(t){}}:I;C(),i.url=function(e,n,s){if(D(s)&&(s=null),o!==t.location&&(o=t.location),a!==t.history&&(a=t.history),e){var u=v===s;if(m===e&&(!r.history||u))return i;var c=m&&or(m)===or(e);return m=e,v=s,!r.history||c&&u?(c||(g=e),n?o.replace(e):c?o.hash=-1===(f=(l=e).indexOf("#"))?"":l.substr(f):o.href=e,o.href!==e&&(g=e)):(a[n?"replaceState":"pushState"](s,"",e),C()),g&&(g=e),i}return g||o.href.replace(/%27/g,"'");var l,f},i.state=function(){return d};var w=[],b=!1;function S(){g=null,_()}var x=null;function C(){ut(d=D(d=y())?null:d,x)&&(d=x),x=d,v=d}function _(){var t=v;C(),m===i.url()&&t===d||(m=i.url(),v=d,E(w,function(t){t(i.url(),d)}))}i.onUrlChange=function(e){return b||(r.history&&f(t).on("popstate",S),f(t).on("hashchange",S),b=!0),w.push(e),e},i.$$applicationDestroyed=function(){f(t).off("hashchange popstate",S)},i.$$checkUrlChange=_,i.baseHref=function(){var t=$.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},i.defer=function(t,e){var n;return l++,n=s(function(){delete c[n],h(t)},e||0),c[n]=!0,n},i.defer.cancel=function(t){return!!c[t]&&(delete c[t],u(t),h(I),!0)}}(t,r,e,n)}]}function fn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var r=0,o=A({},n,{id:e}),a=Ht(),s=n&&n.capacity||Number.MAX_VALUE,u=Ht(),c=null,l=null;return t[e]={put:function(t,e){if(!D(e)){if(s<Number.MAX_VALUE)f(u[t]||(u[t]={key:t}));return t in a||r++,a[t]=e,r>s&&this.remove(l.key),e}},get:function(t){if(s<Number.MAX_VALUE){var e=u[t];if(!e)return;f(e)}return a[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=u[t];if(!e)return;e===c&&(c=e.p),e===l&&(l=e.n),p(e.n,e.p),delete u[t]}t in a&&(delete a[t],r--)},removeAll:function(){a=Ht(),r=0,u=Ht(),c=l=null},destroy:function(){a=null,o=null,u=null,delete t[e]},info:function(){return A({},o,{size:r})}};function f(t){t!==c&&(l?l===t&&(l=t.n):l=t,p(t.n,t.p),p(t,c),(c=t).n=null)}function p(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return E(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function pn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var hn=i("$compile");var dn=new function(){};function vn(e,n){var r={},i="Directive",o=/^\s*directive:\s*([\w-]+)\s+(.*)$/,a=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,n={},r=t.split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,h=/^(on[a-z]+|formaction)$/,d=Ht();function v(t,e,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,i=Ht();return E(t,function(t,o){if(t in d)i[o]=d[t];else{var a=t.match(r);if(!a)throw hn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(d[t]=i[o])}}),i}function m(t,e){var n={isolateScope:null,bindToController:null};if(H(t.scope)&&(!0===t.bindToController?(n.bindToController=v(t.scope,e,!0),n.isolateScope={}):n.isolateScope=v(t.scope,e,!1)),H(t.bindToController)&&(n.bindToController=v(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw hn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return jt(n,"name"),Nt(n,"directive"),F(n)?(!function(t){var e=t.charAt(0);if(!e||e!==u(e))throw hn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw hn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),jt(o,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+i,["$injector","$exceptionHandler",function(t,e){var i=[];return E(r[n],function(r,o){try{var a=t.invoke(r);G(a)?a={compile:M(a)}:!a.compile&&a.link&&(a.compile=M(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=(u=(s=a).require||s.controller&&s.name,!z(u)&&H(u)&&E(u,function(t,e){var n=t.match(p);t.substring(n[0].length)||(u[e]=n[0]+e)}),u),a.restrict=function(t,e){if(t&&(!F(t)||!/[EACM]/.test(t)))throw hn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=r.$$moduleName,i.push(a)}catch(t){e(t)}var s,u}),i}])),r[n].push(o)):E(n,C(t)),this},this.component=function t(e,n){if(!F(e))return E(e,C(ht(this,t))),this;var r=n.controller||function(){};function i(t){function e(e){return G(e)||z(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=n.template||n.templateUrl?n.template:"",o={controller:r,controllerAs:function(t,e){if(e&&F(e))return e;if(F(t)){var n=En.exec(t);if(n)return n[3]}}(n.controller)||n.controllerAs||"$ctrl",template:e(i),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return E(n,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return E(n,function(t,e){"$"===e.charAt(0)&&(i[e]=t,G(r)&&(r[e]=t))}),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationWhitelist=function(t){return U(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return U(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var g=!0;this.debugInfoEnabled=function(t){return U(t)?(g=t,this):g};var y=!1;this.preAssignBindingsEnabled=function(t){return U(t)?(y=t,this):y};var w=!1;this.strictComponentBindingsEnabled=function(t){return U(t)?(w=t,this):w};var b=10;this.onChangesTtl=function(t){return arguments.length?(b=t,this):b};var S=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(S=t,this):S};var x=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(x=t,this):x},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,n,d,v,C,_,k,T,O,R){var P,M=/^\w/,N=t.document.createElement("div"),q=S,L=x,B=b;function J(){try{if(!--B)throw P=void 0,hn("infchng","{0} $onChanges() iterations reached. Aborting!\n",b);k.$apply(function(){for(var t=[],e=0,n=P.length;e<n;++e)try{P[e]()}catch(e){t.push(e)}if(P=void 0,t.length)throw t})}finally{B++}}function K(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function Q(t,e){try{t.addClass(e)}catch(t){}}K.prototype={$normalize:yn,$addClass:function(t){t&&t.length>0&&O.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&O.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=wn(t,e);n&&n.length&&O.addClass(this.$$element,n);var r=wn(e,t);r&&r.length&&O.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i,o=Ve(this.$$element[0],t),a=Pe[t],s=t;if(o?(this.$$element.prop(t,e),r=o):a&&(this[a]=e,s=a),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Vt(t,"-")),"a"===(i=rt(this.$$element))&&("href"===t||"xlinkHref"===t)||"img"===i&&"src"===t)this[t]=e=R(e,"src"===t);else if("img"===i&&"srcset"===t&&U(e)){for(var u="",c=tt(e),l=/\s/.test(c)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,f=c.split(l),p=Math.floor(f.length/2),h=0;h<p;h++){var v=2*h;u+=R(tt(f[v]),!0),u+=" "+tt(f[v+1])}var m=tt(f[2*h]).split(/\s/);u+=R(tt(m[0]),!0),2===m.length&&(u+=" "+tt(m[1])),this[t]=e=u}!1!==n&&(null===e||D(e)?this.$$element.removeAttr(r):M.test(r)?this.$$element.attr(r,e):function(t,e,n){N.innerHTML="<span "+e+">";var r=N.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var $=this.$$observers;$&&E($[s],function(t){try{t(e)}catch(t){d(t)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=Ht()),i=r[t]||(r[t]=[]);return i.push(e),k.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(t)||D(n[t])||e(n[t])}),function(){ot(i,e)}}};var X=n.startSymbol(),et=n.endSymbol(),nt="{{"===X&&"}}"===et?j:function(t){return t.replace(/\{\{/g,X).replace(/}}/g,et)},it=/^ngAttr[A-Z]/,at=/^(.+)Start$/;return ct.$$addBindingInfo=g?function(t,e){var n=t.data("$binding")||[];z(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:I,ct.$$addBindingClass=g?function(t){Q(t,"ng-binding")}:I,ct.$$addScopeInfo=g?function(t,e,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(i,e)}:I,ct.$$addScopeClass=g?function(t,e){Q(t,e?"ng-isolate-scope":"ng-scope")}:I,ct.$$createComment=function(e,n){var r="";return g&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},ct;function ct(t,e,n,r,i){t instanceof f||(t=f(t));var o=lt(t,e,t,n,r,i);ct.$$addScopeClass(t);var a=null;return function(e,n,r){if(!t)throw hn("multilink","This element has already been linked.");jt(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var s,u,c,l=(r=r||{}).parentBoundTranscludeFn,p=r.transcludeControllers,h=r.futureParentElement;if(l&&l.$$boundTransclude&&(l=l.$$boundTransclude),a||(u=(s=h)&&s[0],a=u&&"foreignobject"!==rt(u)&&$.call(u).match(/SVG/)?"svg":"html"),c="html"!==a?f(At(a,f("<div>").append(t).html())):n?Ae.clone.call(t):t,p)for(var d in p)c.data("$"+d+"Controller",p[d].instance);return ct.$$addScopeInfo(c,e),n&&n(c,e),o&&o(e,c,c,l),n||(t=o=null),c}}function lt(t,e,n,r,i,o){for(var a,s,u,c,p,h,d,v=[],m=z(t)||t instanceof f,$=0;$<t.length;$++)a=new K,11===l&&ft(t,$,m),(u=(s=vt(t[$],[],a,0===$?r:void 0,i)).length?yt(s,t[$],a,e,n,null,[],[],o):null)&&u.scope&&ct.$$addScopeClass(a.$$element),p=u&&u.terminal||!(c=t[$].childNodes)||!c.length?null:lt(c,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:e),(u||p)&&(v.push($,u,p),h=!0,d=d||u),o=null;return h?function(t,n,r,i){var o,a,s,u,c,l,p,h,m;if(d){var $=n.length;for(m=new Array($),c=0;c<v.length;c+=3)p=v[c],m[p]=n[p]}else m=n;for(c=0,l=v.length;c<l;)s=m[v[c++]],o=v[c++],a=v[c++],o?(o.scope?(u=t.$new(),ct.$$addScopeInfo(f(s),u)):u=t,h=o.transcludeOnThisElement?dt(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?dt(t,e):null,o(a,u,s,r,h)):a&&a(t,s.childNodes,void 0,i)}:null}function ft(t,e,n){var r,i=t[e],o=i.parentNode;if(i.nodeType===Lt)for(;(r=o?i.nextSibling:t[e+1])&&r.nodeType===Lt;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function dt(t,e,n){function r(r,i,o,a,s){return r||((r=t.$new(!1,s)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=Ht();for(var o in e.$$slots)e.$$slots[o]?i[o]=dt(t,e.$$slots[o],n):i[o]=null;return r}function vt(t,e,r,i,s){var u,c,l,f,p,h,d=t.nodeType,v=r.$attr;switch(d){case Ft:Et(e,yn(c=rt(t)),"E",i,s);for(var m,$,g,y,w,b,S=t.attributes,E=0,x=S&&S.length;E<x;E++){var C=!1,_=!1;$=(m=S[E]).name,w=m.value,y=yn($),(b=it.test(y))&&($=$.replace($n,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var k=y.match(at);k&&xt(k[1])&&(C=$,_=$.substr(0,$.length-5)+"end",$=$.substr(0,$.length-6)),v[g=yn($.toLowerCase())]=$,!b&&r.hasOwnProperty(g)||(r[g]=w,Ve(t,g)&&(r[g]=!0)),Ot(t,e,w,g,b),Et(e,g,"A",i,s,C,_)}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!L)break;if(H(l=t.className)&&(l=l.animVal),F(l)&&""!==l)for(;u=a.exec(l);)Et(e,g=yn(u[2]),"C",i,s)&&(r[g]=tt(u[3])),l=l.substr(u.index+u[0].length);break;case Lt:f=e,p=t.nodeValue,(h=n(p,!0))&&f.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&ct.$$addBindingClass(e),function(t,e){var r=e.parent();n||ct.$$addBindingClass(r),ct.$$addBindingInfo(r,h.expressions),t.$watch(h,function(t){e[0].nodeValue=t})}}});break;case Bt:if(!q)break;!function(t,e,n,r,i){try{var a=o.exec(t.nodeValue);if(a){var s=yn(a[1]);Et(e,s,"M",r,i)&&(n[s]=tt(a[2]))}}catch(t){}}(t,e,r,i,s)}return e.sort(kt),e}function mt(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw hn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);t.nodeType===Ft&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return f(r)}function $t(t,e,n){return function(r,i,o,a,s){return i=mt(i[0],e,n),t(r,i,o,a,s)}}function gt(t,e,n,r,i,o){var a;return t?ct(e,n,r,i,o):function(){return a||(a=ct(e,n,r,i,o),e=n=o=null),a.apply(this,arguments)}}function yt(t,e,n,r,i,o,a,s,u){u=u||{};for(var c,l,p,h,v,m=-Number.MAX_VALUE,$=u.newScopeDirective,g=u.controllerDirectives,w=u.newIsolateScopeDirective,b=u.templateDirective,S=u.nonTlbTranscludeDirective,x=!1,C=!1,k=u.hasElementTranscludeDirective,T=n.$$element=f(e),O=o,R=r,P=!1,V=!1,I=0,j=t.length;I<j;I++){var M=(c=t[I]).$$start,N=c.$$end;if(M&&(T=mt(e,M,N)),p=void 0,m>c.priority)break;if((v=c.scope)&&(c.templateUrl||(H(v)?(Tt("new/isolated scope",w||$,c,T),w=c):Tt("new/isolated scope",w,c,T)),$=$||c),l=c.name,!P&&(c.replace&&(c.templateUrl||c.template)||c.transclude&&!c.$$tlb)){for(var U,q=I+1;U=t[q++];)if(U.transclude&&!U.$$tlb||U.replace&&(U.templateUrl||U.template)){V=!0;break}P=!0}if(!c.templateUrl&&c.controller&&(g=g||Ht(),Tt("'"+l+"' controller",g[l],c,T),g[l]=c),v=c.transclude)if(x=!0,c.$$tlb||(Tt("transclusion",S,c,T),S=c),"element"===v)k=!0,m=c.priority,p=T,T=n.$$element=f(ct.$$createComment(l,n[l])),e=T[0],Rt(i,pt(p),e),p[0].$$parentNode=p[0].parentNode,R=gt(V,p,r,m,O&&O.name,{nonTlbTranscludeDirective:S});else{var F=Ht();if(H(v)){p=[];var L=Ht(),B=Ht();for(var W in E(v,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,L[t]=e,F[e]=null,B[e]=n}),E(T.contents(),function(t){var e=L[yn(rt(t))];e?(B[e]=!0,F[e]=F[e]||[],F[e].push(t)):p.push(t)}),E(B,function(t,e){if(!t)throw hn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),F)F[W]&&(F[W]=gt(V,F[W],r))}else p=f(de(e)).contents();T.empty(),(R=gt(V,p,r,void 0,void 0,{needsNewScope:c.$$isolateScope||c.$$newScope})).$$slots=F}if(c.template)if(C=!0,Tt("template",b,c,T),b=c,v=G(c.template)?c.template(T,n):c.template,v=nt(v),c.replace){if(O=c,p=ce(v)?[]:bn(At(c.templateNamespace,tt(v))),e=p[0],1!==p.length||e.nodeType!==Ft)throw hn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",l,"");Rt(i,T,e);var J={$attr:{}},Y=vt(e,[],J),Q=t.splice(I+1,t.length-(I+1));(w||$)&&St(Y,w,$),t=t.concat(Y).concat(Q),Ct(n,J),j=t.length}else T.html(v);if(c.templateUrl)C=!0,Tt("template",b,c,T),b=c,c.replace&&(O=c),it=_t(t.splice(I,t.length-I),T,n,i,x&&R,a,s,{controllerDirectives:g,newScopeDirective:$!==c&&$,newIsolateScopeDirective:w,templateDirective:b,nonTlbTranscludeDirective:S}),j=t.length;else if(c.compile)try{h=c.compile(T,n,R);var X=c.$$originalDirective||c;G(h)?et(null,ht(X,h),M,N):h&&et(ht(X,h.pre),ht(X,h.post),M,N)}catch(t){d(t,wt(T))}c.terminal&&(it.terminal=!0,m=Math.max(m,c.priority))}return it.scope=$&&!0===$.scope,it.transcludeOnThisElement=x,it.templateOnThisElement=C,it.transclude=R,u.hasElementTranscludeDirective=k,it;function et(t,e,n,r){t&&(n&&(t=$t(t,n,r)),t.require=c.require,t.directiveName=l,(w===c||c.$$isolateScope)&&(t=Pt(t,{isolateScope:!0})),a.push(t)),e&&(n&&(e=$t(e,n,r)),e.require=c.require,e.directiveName=l,(w===c||c.$$isolateScope)&&(e=Pt(e,{isolateScope:!0})),s.push(e))}function it(t,r,i,o,u){var c,l,p,h,v,m,S,x,C,T;for(var O in e===i?(C=n,x=n.$$element):C=new K(x=f(i),n),v=r,w?h=r.$new(!0):$&&(v=r.$parent),u&&((S=function(t,e,n,r){var i;Z(t)||(r=n,n=e,e=t,t=void 0);k&&(i=m);n||(n=k?x.parent():x);{if(!r)return u(t,e,i,n,j);var o=u.$$slots[r];if(o)return o(t,e,i,n,j);if(D(o))throw hn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,wt(x))}}).$$boundTransclude=u,S.isSlotFilled=function(t){return!!u.$$slots[t]}),g&&(m=function(t,e,n,r,i,o,a){var s=Ht();for(var u in r){var c=r[u],l={$scope:c===a||c.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},f=c.controller;"@"===f&&(f=e[c.name]);var p=_(f,l,!0,c.controllerAs);s[c.name]=p,t.data("$"+c.name+"Controller",p.instance)}return s}(x,C,S,g,h,r,w)),w&&(ct.$$addScopeInfo(x,h,!0,!(b&&(b===w||b===w.$$originalDirective))),ct.$$addScopeClass(x,!0),h.$$isolateBindings=w.$$isolateBindings,(T=Nt(r,C,h,h.$$isolateBindings,w)).removeWatches&&h.$on("$destroy",T.removeWatches)),m){var R=g[O],P=m[O],V=R.$$bindings.bindToController;if(y){P.bindingInfo=V?Nt(v,C,P.instance,V,R):{};var I=P();I!==P.instance&&(P.instance=I,x.data("$"+R.name+"Controller",I),P.bindingInfo.removeWatches&&P.bindingInfo.removeWatches(),P.bindingInfo=Nt(v,C,P.instance,V,R))}else P.instance=P(),x.data("$"+R.name+"Controller",P.instance),P.bindingInfo=Nt(v,C,P.instance,V,R)}for(E(g,function(t,e){var n=t.require;t.bindToController&&!z(n)&&H(n)&&A(m[e].instance,bt(e,n,x,m))}),E(m,function(t){var e=t.instance;if(G(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(t){d(t)}if(G(e.$onInit))try{e.$onInit()}catch(t){d(t)}G(e.$doCheck)&&(v.$watch(function(){e.$doCheck()}),e.$doCheck()),G(e.$onDestroy)&&v.$on("$destroy",function(){e.$onDestroy()})}),c=0,l=a.length;c<l;c++)It(p=a[c],p.isolateScope?h:r,x,C,p.require&&bt(p.directiveName,p.require,x,m),S);var j=r;for(w&&(w.template||null===w.templateUrl)&&(j=h),t&&t(j,i.childNodes,void 0,u),c=s.length-1;c>=0;c--)It(p=s[c],p.isolateScope?h:r,x,C,p.require&&bt(p.directiveName,p.require,x,m),S);E(m,function(t){var e=t.instance;G(e.$postLink)&&e.$postLink()})}}function bt(t,e,n,r){var i;if(F(e)){var o=e.match(p),a=e.substring(o[0].length),s=o[1]||o[3],u="?"===o[2];if("^^"===s?n=n.parent():i=(i=r&&r[a])&&i.instance,!i){var c="$"+a+"Controller";i=s?n.inheritedData(c):n.data(c)}if(!i&&!u)throw hn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(z(e)){i=[];for(var l=0,f=e.length;l<f;l++)i[l]=bt(t,e[l],n,r)}else H(e)&&(i={},E(e,function(e,o){i[o]=bt(t,e,n,r)}));return i||null}function St(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=V(t[r],{$$isolateScope:e,$$newScope:n})}function Et(t,n,o,a,s,u,c){if(n===s)return null;var l=null;if(r.hasOwnProperty(n))for(var f,p=e.get(n+i),h=0,d=p.length;h<d;h++)if(f=p[h],(D(a)||a>f.priority)&&-1!==f.restrict.indexOf(o)){if(u&&(f=V(f,{$$start:u,$$end:c})),!f.$$bindings){var v=f.$$bindings=m(f,f.name);H(v.isolateScope)&&(f.$$isolateBindings=v.isolateScope)}t.push(f),l=f}return l}function xt(t){if(r.hasOwnProperty(t))for(var n=e.get(t+i),o=0,a=n.length;o<a;o++)if(n[o].multiElement)return!0;return!1}function Ct(t,e){var n=e.$attr,r=t.$attr;E(t,function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))}),E(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function _t(t,e,n,r,i,o,a,s){var u,c,l=[],p=e[0],h=t.shift(),m=V(h,{templateUrl:null,transclude:null,replace:null,$$originalDirective:h}),$=G(h.templateUrl)?h.templateUrl(e,n):h.templateUrl,g=h.templateNamespace;return e.empty(),v($).then(function(d){var v,y,w,b;if(d=nt(d),h.replace){if(w=ce(d)?[]:bn(At(g,tt(d))),v=w[0],1!==w.length||v.nodeType!==Ft)throw hn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h.name,$);y={$attr:{}},Rt(r,e,v);var S=vt(v,[],y);H(h.scope)&&St(S,!0),t=S.concat(t),Ct(n,y)}else v=p,e.html(d);for(t.unshift(m),u=yt(t,v,n,i,e,h,o,a,s),E(r,function(t,n){t===v&&(r[n]=e[0])}),c=lt(e[0].childNodes,i);l.length;){var x=l.shift(),C=l.shift(),_=l.shift(),k=l.shift(),T=e[0];if(!x.$$destroyed){if(C!==p){var A=C.className;s.hasElementTranscludeDirective&&h.replace||(T=de(v)),Rt(_,f(C),T),Q(f(T),A)}b=u.transcludeOnThisElement?dt(x,u.transclude,k):k,u(c,x,T,r,b)}}l=null}).catch(function(t){W(t)&&d(t)}),function(t,e,n,r,i){var o=i;e.$$destroyed||(l?l.push(e,n,r,o):(u.transcludeOnThisElement&&(o=dt(e,u.transclude,i)),u(c,e,n,r,o)))}}function kt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function Tt(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw hn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,wt(r))}function At(e,n){switch(e=u(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function Ot(t,e,r,i,o){var a=function(t,e){if("srcdoc"===e)return T.HTML;var n=rt(t);if("src"===e||"ngSrc"===e){if(-1===["img","video","audio","source","track"].indexOf(n))return T.RESOURCE_URL}else if("xlinkHref"===e||"form"===n&&"action"===e||"link"===n&&"href"===e)return T.RESOURCE_URL}(t,i),s=!o,u=c[i]||o,l=n(r,s,a,u);if(l){if("multiple"===i&&"select"===rt(t))throw hn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",wt(t));if(h.test(i))throw hn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var s=o.$$observers||(o.$$observers=Ht()),c=o[i];c!==r&&(l=c&&n(c,!0,a,u),r=c),l&&(o[i]=l(t),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(l,function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)}))}}}})}}function Rt(e,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===a){e[i++]=r;for(var c=i,l=c+s-1,p=e.length;c<p;c++,l++)l<p?e[c]=e[l]:delete e[c];e.length-=s-1,e.context===a&&(e.context=r);break}u&&u.replaceChild(r,a);var h=t.document.createDocumentFragment();for(i=0;i<s;i++)h.appendChild(n[i]);for(f.hasData(a)&&(f.data(r,f.data(a)),f(a).off("$destroy")),f.cleanData(h.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function Pt(t,e){return A(function(){return t.apply(null,arguments)},t,e)}function It(t,e,n,r,i,o){try{t(e,n,r,i,o)}catch(t){d(t,wt(n))}}function Mt(t,e){if(w)throw hn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Nt(t,e,r,i,o){var a,u=[],c={};function l(e,n,i){G(r.$onChanges)&&!st(n,i)&&(P||(t.$$postDigest(J),P=[]),a||(a={},P.push(f)),a[e]&&(i=a[e].previousValue),a[e]=new mn(i,n))}function f(){r.$onChanges(a),a=void 0}return E(i,function(i,a){var f,p,h,d,v,m=i.attrName,$=i.optional;switch(i.mode){case"@":$||s.call(e,m)||(Mt(m,o.name),r[a]=e[m]=void 0),v=e.$observe(m,function(t){if(F(t)||Y(t)){var e=r[a];l(a,t,e),r[a]=t}}),e.$$observers[m].$$scope=t,F(f=e[m])?r[a]=n(f)(t):Y(f)&&(r[a]=f),c[a]=new mn(dn,r[a]),u.push(v);break;case"=":if(!s.call(e,m)){if($)break;Mt(m,o.name),e[m]=void 0}if($&&!e[m])break;p=C(e[m]),d=p.literal?ut:st,h=p.assign||function(){throw f=r[a]=p(t),hn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[m],m,o.name)},f=r[a]=p(t);var g=function(e){return d(e,r[a])||(d(e,f)?h(t,e=r[a]):r[a]=e),f=e};g.$stateful=!0,v=i.collection?t.$watchCollection(e[m],g):t.$watch(C(e[m],g),null,p.literal),u.push(v);break;case"<":if(!s.call(e,m)){if($)break;Mt(m,o.name),e[m]=void 0}if($&&!e[m])break;var y=(p=C(e[m])).literal,w=r[a]=p(t);c[a]=new mn(dn,r[a]),v=t.$watch(p,function(t,e){if(e===t){if(e===w||y&&ut(e,w))return;e=w}l(a,t,e),r[a]=t},y),u.push(v);break;case"&":if($||s.call(e,m)||Mt(m,o.name),(p=e.hasOwnProperty(m)?C(e[m]):I)===I&&$)break;r[a]=function(e){return p(t,e)}}}),{initialChanges:c,removeWatches:u.length&&function(){for(var t=0,e=u.length;t<e;++t)u[t]()}}}}]}function mn(t,e){this.previousValue=t,this.currentValue=e}vn.$inject=["$provide","$$sanitizeUriProvider"],mn.prototype.isFirstChange=function(){return this.previousValue===dn};var $n=/^((?:x|data)[:\-_])/i,gn=/[:\-_]+(.)/g;function yn(t){return t.replace($n,"").replace(gn,function(t,e,n){return n?e.toUpperCase():e})}function wn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue t;n+=(n.length>0?" ":"")+a}return n}function bn(t){var e=(t=f(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(n.nodeType===Bt||n.nodeType===Lt&&""===n.nodeValue.trim())&&v.call(t,e,1)}return t}var Sn=i("$controller"),En=/^(\S+)(\s+as\s+([\w$]+))?$/;function xn(){var t={},e=!1;this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){Nt(e,"controller"),H(e)?A(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(n,r){return function(i,a,s,u){var c,l,f,p;if(s=!0===s,u&&F(u)&&(p=u),F(i)){if(!(l=i.match(En)))throw Sn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);if(f=l[1],p=p||l[3],!(i=t.hasOwnProperty(f)?t[f]:Dt(a.$scope,f,!0)||(e?Dt(r,f,!0):void 0)))throw Sn("ctrlreg","The controller with the name '{0}' is not registered.",f);Mt(i,f,!0)}if(s){var h=(z(i)?i[i.length-1]:i).prototype;return c=Object.create(h||null),p&&o(a,p,c,f||i.name),A(function(){var t=n.invoke(i,c,a,f);return t!==c&&(H(t)||G(t))&&(c=t,p&&o(a,p,c,f||i.name)),c},{instance:c,identifier:p})}return c=n.instantiate(i,a,f),p&&o(a,p,c,f||i.name),c};function o(t,e,n,r){if(!t||!H(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}}]}function Cn(){this.$get=["$window",function(t){return f(t.document)}]}function _n(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],r=n&&n.hidden;function i(){r=n.hidden}return t.on("visibilitychange",i),e.$on("$destroy",function(){t.off("visibilitychange",i)}),function(){return r}}]}function kn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var Tn=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof f&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},An="application/json",On={"Content-Type":An+";charset=utf-8"},Rn=/^\[|^\{(?!\{)/,Pn={"[":/]$/,"{":/}$/},Vn=/^\)]\}',?\n/,In=i("$http");function jn(t){return H(t)?B(t)?t.toISOString():vt(t):t}function Mn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return x(t,function(t,n){null===t||D(t)||G(t)||(z(t)?E(t,function(t){e.push(Ct(n)+"="+Ct(jn(t)))}):e.push(Ct(n)+"="+Ct(jn(t))))}),e.join("&")}}}function Nn(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){if(null===n||D(n))return;z(n)?E(n,function(e,n){t(e,r+"["+(H(e)?n:"")+"]")}):H(n)&&!B(n)?x(n,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):e.push(Ct(r)+"="+Ct(jn(n)))}(t,"",!0),e.join("&")}}}function Dn(t,e){if(F(t)){var n=t.replace(Vn,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf(An);if(i||(a=(o=n).match(Rn))&&Pn[a[0]].test(o))try{t=mt(n)}catch(e){if(!i)return t;throw In("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,e)}}}var o,a;return t}function Un(t){var e,n=Ht();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return F(t)?E(t.split("\n"),function(t){e=t.indexOf(":"),r(u(tt(t.substr(0,e))),tt(t.substr(e+1)))}):H(t)&&E(t,function(t,e){r(u(e),tt(t))}),n}function Hn(t){var e;return function(n){if(e||(e=Un(t)),n){var r=e[u(n)];return void 0===r&&(r=null),r}return e}}function qn(t,e,n,r){return G(r)?r(t,e,n):(E(r,function(r){t=r(t,e,n)}),t)}function Fn(t){return 200<=t&&t<300}function Ln(){var t=this.defaults={transformResponse:[Dn],transformRequest:[function(t){return H(t)&&(r=t,"[object File]"!==$.call(r))&&(n=t,"[object Blob]"!==$.call(n))&&(e=t,"[object FormData]"!==$.call(e))?vt(t):t;var e,n,r}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Gt(On),put:Gt(On),patch:Gt(On)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return U(t)?(e=!!t,this):e};var n=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(r,o,a,s,l,f,p,h){var d=s("$http");t.paramSerializer=F(t.paramSerializer)?p.get(t.paramSerializer):t.paramSerializer;var v=[];function m(n){if(!H(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!F(h.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var s=A({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);s.headers=function(e){var n,r,i,o=t.headers,a=A({},e.headers);o=A({},o.common,o[u(e.method)]);t:for(n in o){for(i in r=u(n),a)if(u(i)===r)continue t;a[n]=o[n]}return s=a,c=Gt(e),f={},E(s,function(t,e){G(t)?null!=(l=t(c))&&(f[e]=l):f[e]=t}),f;var s,c,l,f}(n),s.method=c(s.method),s.paramSerializer=F(s.paramSerializer)?p.get(s.paramSerializer):s.paramSerializer,r.$$incOutstandingRequestCount();var $=[],g=[],y=f.resolve(s);return E(v,function(t){(t.request||t.requestError)&&$.unshift(t.request,t.requestError),(t.response||t.responseError)&&g.push(t.response,t.responseError)}),y=(y=w(y=(y=w(y,$)).then(function(n){var r=n.headers,i=qn(n.data,Hn(r),void 0,n.transformRequest);D(i)&&E(r,function(t,e){"content-type"===u(e)&&delete r[e]});D(n.withCredentials)&&!D(t.withCredentials)&&(n.withCredentials=t.withCredentials);return function(n,r){var i,s,c=f.defer(),p=c.promise,v=n.headers,$="jsonp"===u(n.method),g=n.url;$?g=h.getTrustedResourceUrl(g):F(g)||(g=h.valueOf(g));y=g,w=n.paramSerializer(n.params),w.length>0&&(y+=(-1===y.indexOf("?")?"?":"&")+w),g=y,$&&(g=function(t,e){var n=t.split("?");if(n.length>2)throw In("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return E(St(n[1]),function(n,r){if("JSON_CALLBACK"===n)throw In("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(r===e)throw In("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)}),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(g,n.jsonpCallbackParam));var y,w;m.pendingRequests.push(n),p.then(_,_),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=H(n.cache)?n.cache:H(t.cache)?t.cache:d);i&&(U(s=i.get(g))?Q(s)?s.then(C,C):z(s)?x(s[1],s[0],Gt(s[2]),s[3],s[4]):x(s,200,{},"OK","complete"):i.put(g,p));if(D(s)){var b=oi(n.url)?a()[n.xsrfCookieName||t.xsrfCookieName]:void 0;b&&(v[n.xsrfHeaderName||t.xsrfHeaderName]=b),o(n.method,g,r,function(t,n,r,o,a){i&&(Fn(t)?i.put(g,[t,n,Un(r),o,a]):i.remove(g));function s(){x(n,t,r,o,a)}e?l.$applyAsync(s):(s(),l.$$phase||l.$apply())},v,n.timeout,n.withCredentials,n.responseType,S(n.eventHandlers),S(n.uploadEventHandlers))}return p;function S(t){if(t){var n={};return E(t,function(t,r){n[r]=function(n){function r(){t(n)}e?l.$applyAsync(r):l.$$phase?r():l.$apply(r)}}),n}}function x(t,e,r,i,o){(Fn(e=e>=-1?e:0)?c.resolve:c.reject)({data:t,status:e,headers:Hn(r),config:n,statusText:i,xhrStatus:o})}function C(t){x(t.data,t.status,Gt(t.headers()),t.statusText,t.xhrStatus)}function _(){var t=m.pendingRequests.indexOf(n);-1!==t&&m.pendingRequests.splice(t,1)}}(n,i).then(b,b)}),g)).finally(function(){r.$$completeOutstandingRequest(I)});function w(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function b(t){var e=A({},t);return e.data=qn(t.data,t.headers,t.status,s.transformResponse),Fn(t.status)?e:f.reject(e)}}return E(n,function(t){v.unshift(F(t)?p.get(t):p.invoke(t))}),m.pendingRequests=[],function(t){E(arguments,function(t){m[t]=function(e,n){return m(A({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){E(arguments,function(t){m[t]=function(e,n,r){return m(A({},r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),m.defaults=t,m}]}function Bn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function zn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(o,a,s,c,l,f,p,h,d,v){if(a=a||t.url(),"jsonp"===u(o))var m=r.createCallback(a),$=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var s=-1,u="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),u=t.type,s="error"===t.type?404:200),n&&n(s,u)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}(a,m,function(t,e){var n=200===t&&r.getResponse(m);b(c,t,n,"",e,"complete"),r.removeCallback(m)});else{var g=e(o,a);g.open(o,a,!0),E(l,function(t,e){U(t)&&g.setRequestHeader(e,t)}),g.onload=function(){var t=g.statusText||"",e="response"in g?g.response:g.responseText,n=1223===g.status?204:g.status;0===n&&(n=e?200:"file"===ii(a).protocol?404:0),b(c,n,e,g.getAllResponseHeaders(),t,"complete")};if(g.onerror=function(){b(c,-1,null,null,"","error")},g.onabort=function(){b(c,-1,null,null,"","abort")},g.ontimeout=function(){b(c,-1,null,null,"","timeout")},E(d,function(t,e){g.addEventListener(e,t)}),E(v,function(t,e){g.upload.addEventListener(e,t)}),p&&(g.withCredentials=!0),h)try{g.responseType=h}catch(t){if("json"!==h)throw t}g.send(D(s)?null:s)}if(f>0)var y=n(w,f);else Q(f)&&f.then(w);function w(){$&&$(),g&&g.abort()}function b(t,e,r,i,o,a){U(y)&&n.cancel(y),$=g=null,t(e,r,i,o,a)}}}(t,r,t.defer,e,n[0])}]}var Wn=w.$interpolateMinErr=i("$interpolate");function Gn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var o=t.length,a=e.length,s=new RegExp(t.replace(/./g,c),"g"),u=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function l(n){return n.replace(s,t).replace(u,e)}function f(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function p(s,u,c,p){if(!s.length||-1===s.indexOf(t)){var h;if(!u)(h=M(l(s))).exp=s,h.expressions=[],h.$$watchDelegate=f;return h}p=!!p;for(var d,v,m,$=0,g=[],y=[],w=s.length,b=[],S=[];$<w;){if(-1===(d=s.indexOf(t,$))||-1===(v=s.indexOf(e,d+o))){$!==w&&b.push(l(s.substring($)));break}$!==d&&b.push(l(s.substring($,d))),m=s.substring(d+o,v),g.push(m),y.push(n(m,C)),$=v+a,S.push(b.length),b.push("")}if(c&&b.length>1&&Wn.throwNoconcat(s),!u||g.length){var E=function(t){for(var e=0,n=g.length;e<n;e++){if(p&&D(t[e]))return;b[S[e]]=t[e]}return b.join("")},x=function(t){return c?i.getTrusted(c,t):i.valueOf(t)};return A(function(t){var e=0,n=g.length,i=new Array(n);try{for(;e<n;e++)i[e]=y[e](t);return E(i)}catch(t){r(Wn.interr(s,t))}},{exp:s,expressions:g,$$watchDelegate:function(t,e){var n;return t.$watchGroup(y,function(r,i){var o=E(r);e.call(this,o,r!==i?n:o,t),n=o})}})}function C(t){try{return t=x(t),p&&!U(t)?t:qt(t)}catch(t){r(Wn.interr(s,t))}}}return p.startSymbol=function(){return t},p.endSymbol=function(){return e},p}]}function Jn(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(t,e,n,r,i){var o={};function a(a,s,u,c){var l=arguments.length>4,f=l?pt(arguments,4):[],p=e.setInterval,h=e.clearInterval,d=0,v=U(c)&&!c,m=(v?r:n).defer(),$=m.promise;return u=U(u)?u:0,$.$$intervalId=p(function(){v?i.defer(g):t.$evalAsync(g),m.notify(d++),u>0&&d>=u&&(m.resolve(d),h($.$$intervalId),delete o[$.$$intervalId]),v||t.$apply()},s),o[$.$$intervalId]=m,$;function g(){l?a.apply(null,f):a(d)}}return a.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(Hr(o[t.$$intervalId].promise),o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},a}]}Wn.throwNoconcat=function(t){throw Wn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},Wn.interr=function(t,e){return Wn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Kn=function(){this.$get=function(){var t=w.callbacks,e={};return{createCallback:function(n){var r,i="_"+(t.$$counter++).toString(36),o="angular.callbacks."+i,a=((r=function(t){r.data=t,r.called=!0}).id=i,r);return e[o]=t[i]=a,o},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){var r=e[n];delete t[r.id],delete e[n]}}}},Zn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Yn={http:80,https:443,ftp:21},Qn=i("$location");function Xn(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=xt(e[n].replace(/%2F/g,"/"));return e.join("/")}function tr(t,e){var n=ii(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=R(n.port)||Yn[n.protocol]||null}var er=/^\s*[\\/]{2,}/;function nr(t,e,n){if(er.test(t))throw Qn("badpath",'Invalid url "{0}".',t);var r="/"!==t.charAt(0);r&&(t="/"+t);var i=ii(t),o=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var n=t.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),e&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=St(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function rr(t,e){return t.slice(0,e.length)===e}function ir(t,e){if(rr(e,t))return e.substr(t.length)}function or(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function ar(t){return t.replace(/(#.+)|#$/,"$1")}function sr(t,e,n){this.$$html5=!0,n=n||"",tr(t,this),this.$$parse=function(t){var n=ir(e,t);if(!F(n))throw Qn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);nr(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=Et(this.$$search),n=this.$$hash?"#"+xt(this.$$hash):"";this.$$url=Xn(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(U(o=ir(t,r))?(a=o,s=n&&U(o=ir(n,o))?e+(ir("/",o)||o):t+a):U(o=ir(e,r))?s=e+o:e===r+"/"&&(s=e),s&&this.$$parse(s),!!s);var o,a,s}}function ur(t,e,n){tr(t,this),this.$$parse=function(r){var i,o=ir(t,r)||ir(e,r);D(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",D(o)&&(t=r,this.replace())):D(i=ir(n,o))&&(i=o),nr(i,this,!1),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;rr(e,n)&&(e=e.replace(n,""));if(i.exec(e))return t;return(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$compose=function(){var e=Et(this.$$search),r=this.$$hash?"#"+xt(this.$$hash):"";this.$$url=Xn(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(e,n){return or(t)===or(e)&&(this.$$parse(e),!0)}}function cr(t,e,n){this.$$html5=!0,ur.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===or(r)?o=r:(a=ir(e,r))?o=t+n+a:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$compose=function(){var e=Et(this.$$search),r=this.$$hash?"#"+xt(this.$$hash):"";this.$$url=Xn(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url,this.$$urlUpdatedByLocation=!0}}var lr={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:fr("$$absUrl"),url:function(t){if(D(t))return this.$$url;var e=Zn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:fr("$$protocol"),host:fr("$$host"),port:fr("$$port"),path:pr("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(F(t)||L(t))t=t.toString(),this.$$search=St(t);else{if(!H(t))throw Qn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");E(t=at(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:D(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:pr("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function fr(t){return function(){return this[t]}}function pr(t,e){return function(n){return D(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function hr(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return U(e)?(t=e,this):t},this.html5Mode=function(t){return Y(t)?(e.enabled=t,this):H(t)?(Y(t.enabled)&&(e.enabled=t.enabled),Y(t.requireBase)&&(e.requireBase=t.requireBase),(Y(t.rewriteLinks)||F(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){var s,u,c,l,p=r.baseHref(),h=r.url();if(e.enabled){if(!p&&e.requireBase)throw Qn("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=(l=h).substring(0,l.indexOf("/",l.indexOf("//")+2))+(p||"/"),u=i.history?sr:cr}else c=or(h),u=ur;var d,v=(d=c).substr(0,or(d).lastIndexOf("/")+1);(s=new u(c,v,"#"+t)).$$parseLinkUrl(h,h),s.$$state=r.state();var m=/^\s*(javascript|mailto):/i;function $(t,e,n){var i=s.url(),o=s.$$state;try{r.url(t,e,n),s.$$state=r.state()}catch(t){throw s.url(i),s.$$state=o,t}}o.on("click",function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var u=f(t.target);"a"!==rt(u[0]);)if(u[0]===o[0]||!(u=u.parent())[0])return;if(!F(i)||!D(u.attr(i))){var c=u.prop("href"),l=u.attr("href")||u.attr("xlink:href");H(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=ii(c.animVal).href),m.test(c)||!c||u.attr("target")||t.isDefaultPrevented()||s.$$parseLinkUrl(c,l)&&(t.preventDefault(),s.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),ar(s.absUrl())!==ar(h)&&r.url(s.absUrl(),!0);var g=!0;return r.onUrlChange(function(t,e){rr(t,v)?(n.$evalAsync(function(){var r,i=s.absUrl(),o=s.$$state;t=ar(t),s.$$parse(t),s.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,s.absUrl()===t&&(r?(s.$$parse(i),s.$$state=o,$(i,!1,o)):(g=!1,y(i,o)))}),n.$$phase||n.$digest()):a.location.href=t}),n.$watch(function(){if(g||s.$$urlUpdatedByLocation){s.$$urlUpdatedByLocation=!1;var t=ar(r.url()),e=ar(s.absUrl()),o=r.state(),a=s.$$replace,u=t!==e||s.$$html5&&i.history&&o!==s.$$state;(g||u)&&(g=!1,n.$evalAsync(function(){var e=s.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,s.$$state,o).defaultPrevented;s.absUrl()===e&&(r?(s.$$parse(t),s.$$state=o):(u&&$(e,a,o===s.$$state?null:s.$$state),y(t,o)))}))}s.$$replace=!1}),s;function y(t,e){n.$broadcast("$locationChangeSuccess",s.absUrl(),t,s.$$state,e)}}]}function dr(){var t=!0,e=this;this.debugEnabled=function(e){return U(e)?(t=e,this):t},this.$get=["$window",function(n){var r,i=l||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:(r=o("debug"),function(){t&&r.apply(e,arguments)})};function o(t){var e=n.console||{},r=e[t]||e.log||I;return function(){var t=[];return E(arguments,function(e){var n;t.push((W(n=e)&&(n.stack&&i?n=n.message&&-1===n.stack.indexOf(n.message)?"Error: "+n.message+"\n"+n.stack:n.stack:n.sourceURL&&(n=n.message+"\n"+n.sourceURL+":"+n.line)),n))}),Function.prototype.apply.call(r,e,t)}}}]}E([cr,ur,sr],function(t){t.prototype=Object.create(lr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==sr||!this.$$html5)throw Qn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=D(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var vr=i("$parse"),mr={}.constructor.prototype.valueOf;function $r(t){return t+""}var gr=Ht();E("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){gr[t]=!0});var yr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wr=function(t){this.options=t};wr.prototype={constructor:wr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=gr[e],o=gr[n],a=gr[r];if(i||o||a){var s=a?r:o?n:e;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||""===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=U(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw vr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=u(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=yr[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var br=function(t,e){this.lexer=t,this.options=e};function Sr(t,e){return void 0!==t?t:e}function Er(t,e){return void 0===t?e:void 0===e?t:t+e}br.Program="Program",br.ExpressionStatement="ExpressionStatement",br.AssignmentExpression="AssignmentExpression",br.ConditionalExpression="ConditionalExpression",br.LogicalExpression="LogicalExpression",br.BinaryExpression="BinaryExpression",br.UnaryExpression="UnaryExpression",br.CallExpression="CallExpression",br.MemberExpression="MemberExpression",br.Identifier="Identifier",br.Literal="Literal",br.ArrayExpression="ArrayExpression",br.Property="Property",br.ObjectExpression="ObjectExpression",br.ThisExpression="ThisExpression",br.LocalsExpression="LocalsExpression",br.NGValueParameter="NGValueParameter",br.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:br.Program,body:t}},expressionStatement:function(){return{type:br.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Tr(t))throw vr("lval","Trying to assign a value to a non l-value");t={type:br.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:br.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:br.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:br.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:br.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:br.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:br.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:br.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:br.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=at(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:br.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:br.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:br.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:br.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:br.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:br.Identifier,name:t.text}},constant:function(){return{type:br.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:br.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:br.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:br.ObjectExpression,properties:e}},throwError:function(t,e){throw vr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw vr("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw vr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:br.ThisExpression},$locals:{type:br.LocalsExpression}}};var xr=1,Cr=2;function _r(t,e,n){var r,i,o,a,s,u=t.isPure=function(t,e){switch(t.type){case br.MemberExpression:if(t.computed)return!1;break;case br.UnaryExpression:return xr;case br.BinaryExpression:return"+"!==t.operator&&xr;case br.CallExpression:return!1}return void 0===e?Cr:e}(t,n);switch(t.type){case br.Program:r=!0,E(t.body,function(t){_r(t.expression,e,u),r=r&&t.expression.constant}),t.constant=r;break;case br.Literal:t.constant=!0,t.toWatch=[];break;case br.UnaryExpression:_r(t.argument,e,u),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case br.BinaryExpression:_r(t.left,e,u),_r(t.right,e,u),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case br.LogicalExpression:_r(t.left,e,u),_r(t.right,e,u),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case br.ConditionalExpression:_r(t.test,e,u),_r(t.alternate,e,u),_r(t.consequent,e,u),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case br.Identifier:t.constant=!1,t.toWatch=[t];break;case br.MemberExpression:_r(t.object,e,u),t.computed&&_r(t.property,e,u),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case br.CallExpression:o=!!t.filter&&(a=e,s=t.callee.name,!a(s).$stateful),r=o,i=[],E(t.arguments,function(t){_r(t,e,u),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=o?i:[t];break;case br.AssignmentExpression:_r(t.left,e,u),_r(t.right,e,u),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case br.ArrayExpression:r=!0,i=[],E(t.elements,function(t){_r(t,e,u),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=i;break;case br.ObjectExpression:r=!0,i=[],E(t.properties,function(t){_r(t.value,e,u),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(_r(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))}),t.constant=r,t.toWatch=i;break;case br.ThisExpression:case br.LocalsExpression:t.constant=!1,t.toWatch=[]}}function kr(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length?n:n[0]!==e?n:void 0}}function Tr(t){return t.type===br.Identifier||t.type===br.MemberExpression}function Ar(t){if(1===t.body.length&&Tr(t.body[0].expression))return{type:br.AssignmentExpression,left:t.body[0].expression,right:{type:br.NGValueParameter},operator:"="}}function Or(t){this.$filter=t}function Rr(t){this.$filter=t}function Pr(t,e,n){this.ast=new br(t,n),this.astCompiler=n.csp?new Rr(e):new Or(e)}function Vr(t){return G(t.valueOf)?t.valueOf():mr.call(t)}function Ir(){var t,e,n=Ht(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){var o={csp:ct().noUnsafeEval,literals:at(r),isIdentifierStart:G(t)&&t,isIdentifierContinue:G(e)&&e};return a.$$getAst=function(t){return new Pr(new wr(o),i,o).getAst(t).ast},a;function a(t,e){var r,a;switch(typeof t){case"string":if(t=t.trim(),!(r=n[a=t]))(r=new Pr(new wr(o),i,o).parse(t)).constant?r.$$watchDelegate=f:r.oneTime?r.$$watchDelegate=r.literal?l:c:r.inputs&&(r.$$watchDelegate=u),n[a]=r;return p(r,e);case"function":return p(t,e);default:return p(I,e)}}function s(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Vr(t))&&!n)&&(t===e||t!=t&&e!=e)}function u(t,e,n,r,i){var o,a=r.inputs;if(1===a.length){var u=s;return a=a[0],t.$watch(function(t){var e=a(t);return s(e,u,a.isPure)||(o=r(t,void 0,void 0,[e]),u=e&&Vr(e)),o},e,n,i)}for(var c=[],l=[],f=0,p=a.length;f<p;f++)c[f]=s,l[f]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var u=a[n](t);(e||(e=!s(u,c[n],a[n].isPure)))&&(l[n]=u,c[n]=u&&Vr(u))}return e&&(o=r(t,void 0,void 0,l)),o},e,n,i)}function c(t,e,n,r,i){var o,a;return o=r.inputs?u(t,s,n,r,i):t.$watch(function(t){return r(t)},s,n);function s(t,n,r){a=t,G(e)&&e(t,n,r),U(t)&&r.$$postDigest(function(){U(a)&&o()})}}function l(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,G(e)&&e(t,n,r),a(t)&&r.$$postDigest(function(){a(o)&&i()})},n);function a(t){var e=!0;return E(t,function(t){U(t)||(e=!1)}),e}}function f(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function p(t,e){if(!e)return t;var n=t.$$watchDelegate,r=!1,i=n!==l&&n!==c?function(n,i,o,a){var s=r&&a?a[0]:t(n,i,o,a);return e(s,n,i)}:function(n,r,i,o){var a=t(n,r,i,o),s=e(a,n,r);return U(a)?s:a};return r=!t.inputs,n&&n!==u?(i.$$watchDelegate=n,i.inputs=t.inputs):e.$stateful||(i.$$watchDelegate=u,i.inputs=t.inputs?t.inputs:[t]),i.inputs&&(i.inputs=i.inputs.map(function(t){return t.isPure===Cr?function(e){return t(e)}:t})),i}}]}function jr(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Nr(function(t){e.$evalAsync(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return U(e)?(t=e,this):t}}function Mr(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Nr(function(t){e.defer(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return U(e)?(t=e,this):t}}function Nr(t,e,n){var r=i("$q",TypeError),o=0,a=[];function s(){return new function(){var t=this.promise=new u;this.resolve=function(e){f(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){d(t,e)}}}function u(){this.$$state={status:0}}function c(){for(;!o&&a.length;){var t=a.shift();if(!Dr(t)){Ur(t);var n="Possibly unhandled rejection: "+Jt(t.value);W(t.value)?e(t.value,n):e(n)}}}function l(r){!n||r.pending||2!==r.status||Dr(r)||(0===o&&0===a.length&&t(c),a.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++o,t(function(){!function(r){var i,a,s;s=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var u=0,l=s.length;u<l;++u){Ur(r),a=s[u][0],i=s[u][r.status];try{G(i)?f(a,i(r.value)):1===r.status?f(a,r.value):p(a,r.value)}catch(t){p(a,t),t&&!0===t.$$passToExceptionHandler&&e(t)}}}finally{--o,n&&0===o&&t(c)}}(r)}))}function f(t,e){t.$$state.status||(e===t?h(t,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):function t(e,n){var r;var i=!1;try{(H(n)||G(n))&&(r=n.then),G(r)?(e.$$state.status=-1,r.call(n,function o(t){if(i)return;i=!0,function t(e,n){var r;var i=!1;try{(H(n)||G(n))&&(r=n.then),G(r)?(e.$$state.status=-1,r.call(n,o,a,function(t){d(e,t)})):(e.$$state.value=n,e.$$state.status=1,l(e.$$state))}catch(t){a(t)}function o(n){i||(i=!0,t(e,n))}function a(t){i||(i=!0,h(e,t))}}(e,t)},a,function(t){d(e,t)})):(e.$$state.value=n,e.$$state.status=1,l(e.$$state))}catch(t){a(t)}function o(n){i||(i=!0,t(e,n))}function a(t){i||(i=!0,h(e,t))}}(t,e))}function p(t,e){t.$$state.status||h(t,e)}function h(t,e){t.$$state.value=e,t.$$state.status=2,l(t.$$state)}function d(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t(function(){for(var t,n,o=0,a=i.length;o<a;o++){n=i[o][0],t=i[o][3];try{d(n,G(t)?t(r):r)}catch(t){e(t)}}})}function v(t){var e=new u;return p(e,t),e}function m(t,e,n){var r=null;try{G(n)&&(r=n())}catch(t){return v(t)}return Q(r)?r.then(function(){return e(t)},v):e(t)}function $(t,e,n,r){var i=new u;return f(i,t),i.then(e,n,r)}A(u.prototype,{then:function(t,e,n){if(D(t)&&D(e)&&D(n))return this;var r=new u;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&l(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return m(e,g,t)},function(e){return m(e,v,t)},e)}});var g=$;function y(t){if(!G(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new u;return t(function(t){f(e,t)},function(t){p(e,t)}),e}return y.prototype=u.prototype,y.defer=s,y.reject=v,y.when=$,y.resolve=g,y.all=function(t){var e=new u,n=0,r=z(t)?[]:{};return E(t,function(t,i){n++,$(t).then(function(t){r[i]=t,--n||f(e,r)},function(t){p(e,t)})}),0===n&&f(e,r),e},y.race=function(t){var e=s();return E(t,function(t){$(t).then(e.resolve,e.reject)}),e.promise},y}function Dr(t){return!!t.pur}function Ur(t){t.pur=!0}function Hr(t){Ur(t.$$state)}function qr(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Fr(){var t=10,e=i("$rootScope"),n=null,r=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,o,a){function u(t){t.currentScope.$$destroyed=!0}function c(){this.$id=_(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}c.prototype={constructor:c,$new:function(t,e){var n;return e=e||this,t?(n=new c).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=_(),this.$$ChildScope=null}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",u),n},$watch:function(t,e,r,i){var a=o(t),s=G(e)?e:I;if(a.$$watchDelegate)return a.$$watchDelegate(this,s,r,a,t);var u=this,c=u.$$watchers,l={fn:s,last:w,get:a,exp:i||t,eq:!!r};return n=null,c||((c=u.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,g(this,1),function(){var t=ot(c,l);t>=0&&(g(u,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],o=this,a=!1,s=!0;if(!t.length){var u=!0;return o.$evalAsync(function(){u&&e(r,r,o)}),function(){u=!1}}if(1===t.length)return this.$watch(t[0],function(t,i,o){r[0]=t,n[0]=i,e(r,t===i?r:n,o)});function c(){a=!1,s?(s=!1,e(r,r,o)):e(r,n,o)}return E(t,function(t,e){var s=o.$watch(t,function(t,i){r[e]=t,n[e]=i,a||(a=!0,o.$evalAsync(c))});i.push(s)}),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){v.$stateful=!0;var n,r,i,a=this,u=e.length>1,c=0,l=o(t,v),f=[],p={},h=!0,d=0;function v(t){var e,i,o,a;if(!D(n=t)){if(H(n))if(S(n)){r!==f&&(d=(r=f).length=0,c++),e=n.length,d!==e&&(c++,r.length=d=e);for(var u=0;u<e;u++)a=r[u],o=n[u],a!=a&&o!=o||a===o||(c++,r[u]=o)}else{for(i in r!==p&&(r=p={},d=0,c++),e=0,n)s.call(n,i)&&(e++,o=n[i],a=r[i],i in r?a!=a&&o!=o||a===o||(c++,r[i]=o):(d++,r[i]=o,c++));if(d>e)for(i in c++,r)s.call(n,i)||(d--,delete r[i])}else r!==n&&(r=n,c++);return c}}return this.$watch(l,function(){if(h?(h=!1,e(n,n,a)):e(n,i,a),u)if(H(n))if(S(n)){i=new Array(n.length);for(var t=0;t<n.length;t++)i[t]=n[t]}else for(var r in i={},n)s.call(n,r)&&(i[r]=n[r]);else i=n})},$digest:function(){var o,s,u,c,l,d,g,y,S,E=t,x=[];m("$digest"),a.$$checkUrlChange(),this===f&&null!==r&&(a.defer.cancel(r),b()),n=null;do{l=!1,g=this;for(var C=0;C<p.length;C++){try{(0,(S=p[C]).fn)(S.scope,S.locals)}catch(t){i(t)}n=null}p.length=0;t:do{if(c=g.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(o=c[c.$$digestWatchIndex])if((s=(0,o.get)(g))===(u=o.last)||(o.eq?ut(s,u):P(s)&&P(u))){if(o===n){l=!1;break t}}else l=!0,n=o,o.last=o.eq?at(s,null):s,(0,o.fn)(s,u===w?s:u,g),E<5&&(x[y=4-E]||(x[y]=[]),x[y].push({msg:G(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:s,oldVal:u}))}catch(t){i(t)}if(!(d=g.$$watchersCount&&g.$$childHead||g!==this&&g.$$nextSibling))for(;g!==this&&!(d=g.$$nextSibling);)g=g.$parent}while(g=d);if((l||p.length)&&!E--)throw $(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,x)}while(l||p.length);for($();v<h.length;)try{h[v++]()}catch(t){i(t)}h.length=v=0,a.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===f&&a.$$applicationDestroyed(),g(this,-this.$$watchersCount),this.$$listenerCount)y(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=I,this.$on=this.$watch=this.$watchGroup=function(){return I},this.$$listeners={},this.$$nextSibling=null,function t(e){9===l&&(e.$$childHead&&t(e.$$childHead),e.$$nextSibling&&t(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}(this)}},$eval:function(t,e){return o(t)(this,e)},$evalAsync:function(t,e){f.$$phase||p.length||a.defer(function(){p.length&&f.$digest()}),p.push({scope:this,fn:o(t),locals:e})},$$postDigest:function(t){h.push(t)},$apply:function(t){try{m("$apply");try{return this.$eval(t)}finally{$()}}catch(t){i(t)}finally{try{f.$digest()}catch(t){throw i(t),t}}},$applyAsync:function(t){var e=this;t&&d.push(function(){e.$eval(t)}),t=o(t),null===r&&(r=a.defer(function(){f.$apply(b)}))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],y(i,1,t))}},$emit:function(t,e){var n,r,o,a=[],s=this,u=!1,c={name:t,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=ft([c],arguments,1);do{for(n=s.$$listeners[t]||a,c.currentScope=s,r=0,o=n.length;r<o;r++)if(n[r])try{n[r].apply(null,l)}catch(t){i(t)}else n.splice(r,1),r--,o--;if(u)break;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,r=n,o=n,a={name:t,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return a;for(var s,u,c,l=ft([a],arguments,1);r=o;){for(a.currentScope=r,u=0,c=(s=r.$$listeners[t]||[]).length;u<c;u++)if(s[u])try{s[u].apply(null,l)}catch(t){i(t)}else s.splice(u,1),u--,c--;if(!(o=r.$$listenerCount[t]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(o=r.$$nextSibling);)r=r.$parent}return a.currentScope=null,a}};var f=new c,p=f.$$asyncQueue=[],h=f.$$postDigestQueue=[],d=f.$$applyAsyncQueue=[],v=0;return f;function m(t){if(f.$$phase)throw e("inprog","{0} already in progress",f.$$phase);f.$$phase=t}function $(){f.$$phase=null}function g(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function y(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function w(){}function b(){for(;d.length;)try{d.shift()()}catch(t){i(t)}r=null}}]}function Lr(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return U(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return U(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return""===(i=ii(n&&n.trim()).href)||i.match(o)?n:"unsafe:"+i}}}Or.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},_r(t,e.$filter);var n,r="";if(this.stage="assign",n=Ar(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var o=kr(t.body);e.stage="inputs",E(o,function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,$r,Sr,Er);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return E(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return E(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,o){var a,s,u,c,l,f=this;if(r=r||I,!o&&U(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case br.Program:E(t.body,function(e,n){f.recurse(e.expression,void 0,void 0,function(t){s=t}),n!==t.body.length-1?f.current().body.push(s,";"):f.return_(s)});break;case br.Literal:c=this.escape(t.value),this.assign(e,c),r(e||c);break;case br.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){s=t}),c=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,c),r(c);break;case br.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){s=t}),c="+"===t.operator?this.plus(a,s):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(s,0):"("+a+")"+t.operator+"("+s+")",this.assign(e,c),r(c);break;case br.LogicalExpression:e=e||this.nextId(),f.recurse(t.left,e),f.if_("&&"===t.operator?e:f.not(e),f.lazyRecurse(t.right,e)),r(e);break;case br.ConditionalExpression:e=e||this.nextId(),f.recurse(t.test,e),f.if_(e,f.lazyRecurse(t.alternate,e),f.lazyRecurse(t.consequent,e)),r(e);break;case br.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",t.name)),function(){f.if_("inputs"===f.stage||"s",function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",t.name)),f.lazyAssign(f.nonComputedMember("s",t.name),"{}")),f.assign(e,f.nonComputedMember("s",t.name))})},e&&f.lazyAssign(e,f.nonComputedMember("l",t.name))),r(e);break;case br.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),f.recurse(t.object,a,void 0,function(){f.if_(f.notNull(a),function(){t.computed?(s=f.nextId(),f.recurse(t.property,s),f.getStringValue(s),i&&1!==i&&f.if_(f.not(f.computedMember(a,s)),f.lazyAssign(f.computedMember(a,s),"{}")),c=f.computedMember(a,s),f.assign(e,c),n&&(n.computed=!0,n.name=s)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(a,t.property.name)),f.lazyAssign(f.nonComputedMember(a,t.property.name),"{}")),c=f.nonComputedMember(a,t.property.name),f.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))},function(){f.assign(e,"undefined")}),r(e)},!!i);break;case br.CallExpression:e=e||this.nextId(),t.filter?(s=f.filter(t.callee.name),u=[],E(t.arguments,function(t){var e=f.nextId();f.recurse(t,e),u.push(e)}),c=s+"("+u.join(",")+")",f.assign(e,c),r(e)):(s=f.nextId(),a={},u=[],f.recurse(t.callee,s,a,function(){f.if_(f.notNull(s),function(){E(t.arguments,function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,function(t){u.push(t)})}),c=a.name?f.member(a.context,a.name,a.computed)+"("+u.join(",")+")":s+"("+u.join(",")+")",f.assign(e,c)},function(){f.assign(e,"undefined")}),r(e)}));break;case br.AssignmentExpression:s=this.nextId(),a={},this.recurse(t.left,void 0,a,function(){f.if_(f.notNull(a.context),function(){f.recurse(t.right,s),c=f.member(a.context,a.name,a.computed)+t.operator+s,f.assign(e,c),r(e||c)})},1);break;case br.ArrayExpression:u=[],E(t.elements,function(e){f.recurse(e,t.constant?void 0:f.nextId(),void 0,function(t){u.push(t)})}),c="["+u.join(",")+"]",this.assign(e,c),r(e||c);break;case br.ObjectExpression:u=[],l=!1,E(t.properties,function(t){t.computed&&(l=!0)}),l?(e=e||this.nextId(),this.assign(e,"{}"),E(t.properties,function(t){t.computed?(a=f.nextId(),f.recurse(t.key,a)):a=t.key.type===br.Identifier?t.key.name:""+t.key.value,s=f.nextId(),f.recurse(t.value,s),f.assign(f.member(e,a,t.computed),s)})):(E(t.properties,function(e){f.recurse(e.value,t.constant?void 0:f.nextId(),void 0,function(t){u.push(f.escape(e.key.type===br.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+u.join(",")+"}",this.assign(e,c)),r(e||c);break;case br.ThisExpression:this.assign(e,"s"),r(e||"s");break;case br.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case br.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(F(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(L(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw vr("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Rr.prototype={compile:function(t){var e,n,r=this;_r(t,r.$filter),(e=Ar(t))&&(n=this.recurse(e));var i,o=kr(t.body);o&&(i=[],E(o,function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,i.push(n),t.watchId=e}));var a=[];E(t.body,function(t){a.push(r.recurse(t.expression))});var s=0===t.body.length?I:1===t.body.length?a[0]:function(t,e){var n;return E(a,function(r){n=r(t,e)}),n};return n&&(s.assign=function(t,e,r){return n(t,r,e)}),i&&(s.inputs=i),s},recurse:function(t,e,n){var r,i,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case br.Literal:return this.value(t.value,e);case br.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case br.BinaryExpression:case br.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case br.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case br.Identifier:return a.identifier(t.name,e,n);case br.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case br.CallExpression:return o=[],E(t.arguments,function(t){o.push(a.recurse(t))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,a){for(var s=[],u=0;u<o.length;++u)s.push(o[u](t,n,r,a));var c=i.apply(void 0,s,a);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,r,a){var s,u=i(t,n,r,a);if(null!=u.value){for(var c=[],l=0;l<o.length;++l)c.push(o[l](t,n,r,a));s=u.value.apply(u.context,c)}return e?{value:s}:s};case br.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,a){var s=r(t,n,o,a),u=i(t,n,o,a);return s.context[s.name]=u,e?{value:u}:u};case br.ArrayExpression:return o=[],E(t.elements,function(t){o.push(a.recurse(t))}),function(t,n,r,i){for(var a=[],s=0;s<o.length;++s)a.push(o[s](t,n,r,i));return e?{value:a}:a};case br.ObjectExpression:return o=[],E(t.properties,function(t){t.computed?o.push({key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}):o.push({key:t.key.type===br.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,r,i){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(t,n,r,i)]=o[s].value(t,n,r,i):a[o[s].key]=o[s].value(t,n,r,i);return e?{value:a}:a};case br.ThisExpression:return function(t){return e?{value:t}:t};case br.LocalsExpression:return function(t,n){return e?{value:n}:n};case br.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=U(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=U(a)?-a:-0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var s=Er(t(r,i,o,a),e(r,i,o,a));return n?{value:s}:s}},"binary-":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),u=e(r,i,o,a),c=(U(s)?s:0)-(U(u)?u:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)*e(r,i,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)/e(r,i,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)%e(r,i,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)===e(r,i,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!==e(r,i,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)==e(r,i,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!=e(r,i,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<e(r,i,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>e(r,i,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<=e(r,i,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>=e(r,i,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)&&e(r,i,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)||e(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,o,a,s){var u=t(i,o,a,s)?e(i,o,a,s):n(i,o,a,s);return r?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,o,a){var s=i&&t in i?i:r;n&&1!==n&&s&&null==s[t]&&(s[t]={});var u=s?s[t]:void 0;return e?{context:s,name:t,value:u}:u}},computedMember:function(t,e,n,r){return function(i,o,a,s){var u,c,l=t(i,o,a,s);return null!=l&&(u=$r(u=e(i,o,a,s)),r&&1!==r&&l&&!l[u]&&(l[u]={}),c=l[u]),n?{context:l,name:u,value:c}:c}},nonComputedMember:function(t,e,n,r){return function(i,o,a,s){var u=t(i,o,a,s);r&&1!==r&&u&&null==u[e]&&(u[e]={});var c=null!=u?u[e]:void 0;return n?{context:u,name:e,value:c}:c}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}},Pr.prototype={constructor:Pr,parse:function(t){var e,n=this.getAst(t),r=this.astCompiler.compile(n.ast);return r.literal=0===(e=n.ast).body.length||1===e.body.length&&(e.body[0].expression.type===br.Literal||e.body[0].expression.type===br.ArrayExpression||e.body[0].expression.type===br.ObjectExpression),r.constant=n.ast.constant,r.oneTime=n.oneTime,r},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var Br=i("$sce"),zr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Wr=/_([a-z])/g;function Gr(t){return t.replace(Wr,ne)}function Jr(t){var e=[];return U(t)&&E(t,function(t){e.push(function(t){if("self"===t)return t;if(F(t)){if(t.indexOf("***")>-1)throw Br("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=et(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(J(t))return new RegExp("^"+t.source+"$");throw Br("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Kr(){this.SCE_CONTEXTS=zr;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=Jr(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=Jr(t)),e},this.$get=["$injector",function(n){var r=function(t){throw Br("unsafe","Attempting to use an unsafe value in a safe context.")};function i(t,e){return"self"===t?oi(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}n.has("$sanitize")&&(r=n.get("$sanitize"));var a=o(),s={};return s[zr.HTML]=o(a),s[zr.CSS]=o(a),s[zr.URL]=o(a),s[zr.JS]=o(a),s[zr.RESOURCE_URL]=o(s[zr.URL]),{trustAs:function(t,e){var n=s.hasOwnProperty(t)?s[t]:null;if(!n)throw Br("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||D(e)||""===e)return e;if("string"!=typeof e)throw Br("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(n,o){if(null===o||D(o)||""===o)return o;var a=s.hasOwnProperty(n)?s[n]:null;if(a&&o instanceof a)return o.$$unwrapTrustedValue();if(n===zr.RESOURCE_URL){if(function(n){var r,o,a=ii(n.toString()),s=!1;for(r=0,o=t.length;r<o;r++)if(i(t[r],a)){s=!0;break}if(s)for(r=0,o=e.length;r<o;r++)if(i(e[r],a)){s=!1;break}return s}(o))return o;throw Br("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",o.toString())}if(n===zr.HTML)return r(o);throw Br("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof a?t.$$unwrapTrustedValue():t}}}]}function Zr(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&l<8)throw Br("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Gt(zr);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=j),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,o=r.getTrusted,a=r.trustAs;return E(zr,function(t,e){var n=u(e);r[Gr("parse_as_"+n)]=function(e){return i(t,e)},r[Gr("get_trusted_"+n)]=function(e){return o(t,e)},r[Gr("trust_as_"+n)]=function(e){return a(t,e)}}),r}]}function Yr(){this.$get=["$window","$document",function(t,e){var n={},r=!(!(t.nw&&t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=R((/android (\d+)/.exec(u((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},s=a.body&&a.body.style,c=!1,f=!1;return s&&(c=!!("transition"in s||"webkitTransition"in s),f=!!("animation"in s||"webkitAnimation"in s)),{history:!(!r||i<4||o),hasEvent:function(t){if("input"===t&&l)return!1;if(D(n[t])){var e=a.createElement("div");n[t]="on"+t in e}return n[t]},csp:ct(),transitions:c,animations:f,android:i}}]}var Qr=i("$compile");function Xr(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,o){function a(s,u){a.totalPendingRequests++,F(s)&&!D(n.get(s))||(s=o.getTrustedResourceUrl(s));var c=r.defaults&&r.defaults.transformResponse;return z(c)?c=c.filter(function(t){return t!==Dn}):c===Dn&&(c=null),r.get(s,A({cache:n,transformResponse:c},t)).finally(function(){a.totalPendingRequests--}).then(function(t){return n.put(s,t.data),t.data},function(t){u||(t=Qr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText),e(t));return i.reject(t)})}return a.totalPendingRequests=0,a}]}function ti(){this.$get=["$rootScope","$browser","$location",function(t,e,n){var r={findBindings:function(t,e,n){var r=[];return E(t.getElementsByClassName("ng-binding"),function(t){var i=w.element(t).data("$binding");i&&E(i,function(i){n?new RegExp("(^|\\s)"+et(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!==i.indexOf(e)&&r.push(t)})}),r},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o="["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]',a=t.querySelectorAll(o);if(a.length)return a}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}};return r}]}function ei(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var o={};function a(a,s,u){G(a)||(u=s,s=a,a=I);var c,l=pt(arguments,3),f=U(u)&&!u,p=(f?r:n).defer(),h=p.promise;return c=e.defer(function(){try{p.resolve(a.apply(null,l))}catch(t){p.reject(t),i(t)}finally{delete o[h.$$timeoutId]}f||t.$apply()},s),h.$$timeoutId=c,o[c]=p,h}return a.cancel=function(t){return!!(t&&t.$$timeoutId in o)&&(Hr(o[t.$$timeoutId].promise),o[t.$$timeoutId].reject("canceled"),delete o[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},a}]}var ni=t.document.createElement("a"),ri=ii(t.location.href);function ii(t){var e=t;return l&&(ni.setAttribute("href",e),e=ni.href),ni.setAttribute("href",e),{href:ni.href,protocol:ni.protocol?ni.protocol.replace(/:$/,""):"",host:ni.host,search:ni.search?ni.search.replace(/^\?/,""):"",hash:ni.hash?ni.hash.replace(/^#/,""):"",hostname:ni.hostname,port:ni.port,pathname:"/"===ni.pathname.charAt(0)?ni.pathname:"/"+ni.pathname}}function oi(t){var e=F(t)?ii(t):t;return e.protocol===ri.protocol&&e.host===ri.host}function ai(){this.$get=M(t)}function si(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,s,u,c=function(t){try{return t.cookie||""}catch(t){return""}}(e);if(c!==r)for(t=(r=c).split("; "),n={},a=0;a<t.length;a++)(s=(o=t[a]).indexOf("="))>0&&(u=i(o.substring(0,s)),D(n[u])&&(n[u]=i(o.substring(s+1))));return n}}function ui(){this.$get=si}function ci(t){var e="Filter";function n(r,i){if(H(r)){var o={};return E(r,function(t,e){o[e]=n(e,t)}),o}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",mi),n("date",Ti),n("filter",li),n("json",Ai),n("limitTo",Pi),n("lowercase",Oi),n("number",$i),n("orderBy",Ii),n("uppercase",Ri)}function li(){return function(t,e,n,r){if(!S(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var o,a;switch(r=r||"$",pi(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(t,e,n,r){var i=H(t)&&n in t;!0===e?e=ut:G(e)||(e=function(t,e){return!D(t)&&(null===t||null===e?t===e:!(H(e)||H(t)&&!N(t))&&(t=u(""+t),e=u(""+e),-1!==t.indexOf(e)))});return function(o){return i&&!H(o)?fi(o,t[n],e,n,!1):fi(o,t,e,n,r)}}(e,n,r,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function fi(t,e,n,r,i,o){var a=pi(t),s=pi(e);if("string"===s&&"!"===e.charAt(0))return!fi(t,e.substring(1),n,r,i);if(z(t))return t.some(function(t){return fi(t,e,n,r,i)});switch(a){case"object":var u;if(i){for(u in t)if(u.charAt&&"$"!==u.charAt(0)&&fi(t[u],e,n,r,!0))return!0;return!o&&fi(t,e,n,r,!1)}if("object"===s){for(u in e){var c=e[u];if(!G(c)&&!D(c)){var l=u===r;if(!fi(l?t:t[u],c,n,r,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function pi(t){return null===t?"null":typeof t}si.$inject=["$document"],ci.$inject=["$provide"];var hi=22,di=".",vi="0";function mi(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return D(n)&&(n=e.CURRENCY_SYM),D(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:gi(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function $i(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:gi(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function gi(t,e,n,r,i){if(!F(t)&&!L(t)||isNaN(t))return"";var o,a=!isFinite(t),s=!1,u=Math.abs(t)+"",c="";if(a)c="";else{(function(t,e,n,r){var i=t.d,o=i.length-t.i,a=(e=D(e)?Math.min(Math.max(n,o),r):+e)+t.i,s=i[a];if(a>0){i.splice(Math.max(t.i,a));for(var u=a;u<i.length;u++)i[u]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,a=e+1),i[0]=0;for(var c=1;c<a;c++)i[c]=0}if(s>=5)if(a-1<0){for(var l=0;l>a;l--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[a-1]++;for(;o<Math.max(0,e);o++)i.push(0);var f=i.reduceRight(function(t,e,n,r){return e+=t,r[n]=e%10,Math.floor(e/10)},0);f&&(i.unshift(f),t.i++)})(o=function(t){var e,n,r,i,o,a=0;for((n=t.indexOf(di))>-1&&(t=t.replace(di,"")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charAt(r)===vi;r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;t.charAt(o)===vi;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>hi&&(e=e.splice(0,hi-1),a=n-1,n=1),{d:e,e:a,i:n}}(u),i,e.minFrac,e.maxFrac);var l=o.d,f=o.i,p=o.e,h=[];for(s=l.reduce(function(t,e){return t&&!e},!0);f<0;)l.unshift(0),f++;f>0?h=l.splice(f,l.length):(h=l,l=[0]);var d=[];for(l.length>=e.lgSize&&d.unshift(l.splice(-e.lgSize,l.length).join(""));l.length>e.gSize;)d.unshift(l.splice(-e.gSize,l.length).join(""));l.length&&d.unshift(l.join("")),c=d.join(n),h.length&&(c+=r+h.join("")),p&&(c+="e+"+p)}return t<0&&!s?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function yi(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t=vi+t;return n&&(t=t.substr(t.length-e)),i+t}function wi(t,e,n,r,i){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),yi(a,e,r,i)}}function bi(t,e,n){return function(r,i){var o=r["get"+t]();return i[c((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Si(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function Ei(t){return function(e){var n,r=Si(e.getFullYear()),i=+(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())))-+r;return yi(1+Math.round(i/6048e5),t)}}function xi(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}mi.$inject=["$locale"],$i.$inject=["$locale"];var Ci={yyyy:wi("FullYear",4,0,!1,!0),yy:wi("FullYear",2,0,!0,!0),y:wi("FullYear",1,0,!1,!0),MMMM:bi("Month"),MMM:bi("Month",!0),MM:wi("Month",2,1),M:wi("Month",1,1),LLLL:bi("Month",!1,!0),dd:wi("Date",2),d:wi("Date",1),HH:wi("Hours",2),H:wi("Hours",1),hh:wi("Hours",2,-12),h:wi("Hours",1,-12),mm:wi("Minutes",2),m:wi("Minutes",1),ss:wi("Seconds",2),s:wi("Seconds",1),sss:wi("Milliseconds",3),EEEE:bi("Day"),EEE:bi("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n,i=r>=0?"+":"";return i+=yi(Math[r>0?"floor":"ceil"](r/60),2)+yi(Math.abs(r%60),2)},ww:Ei(2),w:Ei(1),G:xi,GG:xi,GGG:xi,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},_i=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,ki=/^-?\d+$/;function Ti(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,a,s="",u=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,F(n)&&(n=ki.test(n)?R(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,o=0,a=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=R(n[9]+n[10]),o=R(n[9]+n[11])),a.call(r,R(n[1]),R(n[2])-1,R(n[3]));var u=R(n[4]||0)-i,c=R(n[5]||0)-o,l=R(n[6]||0),f=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,u,c,l,f),r}return t}(n)),L(n)&&(n=new Date(n)),!B(n)||!isFinite(n.getTime()))return n;for(;r;)(a=_i.exec(r))?r=(u=ft(u,a,1)).pop():(u.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=gt(i,c),n=yt(n,i,!0)),E(u,function(e){o=Ci[e],s+=o?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function Ai(){return function(t,e){return D(e)&&(e=2),vt(t,e)}}Ti.$inject=["$locale"];var Oi=M(u),Ri=M(c);function Pi(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):R(e),P(e)?t:(L(t)&&(t=t.toString()),S(t)?(n=(n=!n||isNaN(n)?0:R(n))<0?Math.max(0,t.length+n):n,e>=0?Vi(t,n,n+e):0===n?Vi(t,e,t.length):Vi(t,Math.max(0,n+e),n)):t)}}function Vi(t,e,n){return F(t)?t.slice(e,n):d.call(t,e,n)}function Ii(t){return function(r,o,a,s){if(null==r)return r;if(!S(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);z(o)||(o=[o]),0===o.length&&(o=["+"]);var u=o.map(function(e){var n=1,r=j;if(G(e))r=e;else if(F(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}}),c=a?-1:1,l=G(s)?s:n,f=Array.prototype.map.call(r,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:u.map(function(r){return function(t,n){var r=typeof t;null===t?(r="string",t="null"):"object"===r&&(t=function(t){if(G(t.valueOf)&&e(t=t.valueOf()))return t;if(N(t)&&e(t=t.toString()))return t;return t}(t));return{value:t,type:r,index:n}}(r.get(t),n)})}});return f.sort(function(t,e){for(var r=0,i=u.length;r<i;r++){var o=l(t.predicateValues[r],e.predicateValues[r]);if(o)return o*u[r].descending*c}return(l(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*c}),r=f.map(function(t){return t.value})};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,r=t.type,i=e.type;if(r===i){var o=t.value,a=e.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(H(o)&&(o=t.index),H(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n=r<i?-1:1;return n}}function ji(t){return G(t)&&(t={link:t}),t.restrict=t.restrict||"AC",M(t)}Ii.$inject=["$parse"];var Mi=M({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===$.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Ni={};E(Oe,function(t,e){if("multiple"!==t){var n=yn("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),Ni[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}}),E(Pe,function(t,e){Ni[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(o);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),E(["src","srcset","href"],function(t){var e=yn("ng-"+t);Ni[e]=function(){return{priority:99,link:function(n,r,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===$.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(e,function(e){e?(i.$set(a,e),l&&o&&r.prop(o,i[a])):"href"===t&&i.$set(a,null)})}}}});var Di={$addControl:I,$$renameControl:function(t,e){t.$name=e},$removeControl:I,$setValidity:I,$setDirty:I,$setPristine:I,$setSubmitted:I},Ui="ng-pending",Hi="ng-submitted";function qi(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Di,this.$$element=t,this.$$animate=r,zi(this)}qi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],qi.prototype={$rollbackViewValue:function(){E(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){E(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){Nt(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],E(this.$pending,function(e,n){this.$setValidity(n,null,t)},this),E(this.$error,function(e,n){this.$setValidity(n,null,t)},this),E(this.$$success,function(e,n){this.$setValidity(n,null,t)},this),ot(this.$$controls,t),t.$$parentForm=Di},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ho),this.$$animate.addClass(this.$$element,qo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ho,qo+" "+Hi),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,E(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){E(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,Hi),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},Wi({clazz:qi,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(ot(r,n),0===r.length&&delete t[e])}});var Fi=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:qi,compile:function(n,i){n.addClass(Ho).addClass(Do);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,a){var s=a[0];if(!("action"in i)){var u=function(e){t.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),e.preventDefault()};n[0].addEventListener("submit",u),n.on("$destroy",function(){e(function(){n[0].removeEventListener("submit",u)},0,!1)})}(a[1]||s.$$parentForm).$addControl(s);var c=o?r(s.$name):I;o&&(c(t,s),i.$observe(o,function(e){s.$name!==e&&(c(t,void 0),s.$$parentForm.$$renameControl(s,e),(c=r(s.$name))(t,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),c(t,void 0),A(s,Di)})}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||I}}]},Li=Fi(),Bi=Fi(!0);function zi(t){t.$$classCache={},t.$$classCache[Uo]=!(t.$$classCache[Do]=t.$$element.hasClass(Do))}function Wi(t){var e=t.clazz,n=t.set,r=t.unset;function i(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function o(t,e,n){e=e?"-"+Vt(e,"-"):"",i(t,Do+e,!0===n),i(t,Uo+e,!1===n)}e.prototype.$setValidity=function(t,e,a){var s;D(e)?function(t,e,r,i){t[e]||(t[e]={});n(t[e],r,i)}(this,"$pending",t,a):function(t,e,n,i){t[e]&&r(t[e],n,i);Gi(t[e])&&(t[e]=void 0)}(this,"$pending",t,a),Y(e)?e?(r(this.$error,t,a),n(this.$$success,t,a)):(n(this.$error,t,a),r(this.$$success,t,a)):(r(this.$error,t,a),r(this.$$success,t,a)),this.$pending?(i(this,Ui,!0),this.$valid=this.$invalid=void 0,o(this,"",null)):(i(this,Ui,!1),this.$valid=Gi(this.$error),this.$invalid=!this.$valid,o(this,"",this.$valid)),o(this,t,s=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,s,this)}}function Gi(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Ji=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Ki=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Zi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Yi=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Qi=/^(\d{4,})-(\d{2})-(\d{2})$/,Xi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,to=/^(\d{4,})-W(\d\d)$/,eo=/^(\d{4,})-(\d\d)$/,no=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ro="keydown wheel mousedown",io=Ht();E("date,datetime-local,month,time,week".split(","),function(t){io[t]=!0});var oo={text:function(t,e,n,r,i,o){so(t,e,n,r,i,o),ao(r)},date:co("date",Qi,uo(Qi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":co("datetimelocal",Xi,uo(Xi,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:co("time",no,uo(no,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:co("week",to,function(t,e){if(B(t))return t;if(F(t)){to.lastIndex=0;var n=to.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,u=0,c=Si(r),l=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),u=e.getMilliseconds()),new Date(r,0,c.getDate()+l,o,a,s,u)}}return NaN},"yyyy-Www"),month:co("month",eo,uo(eo,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o){var a,s;lo(t,e,n,r),fo(r),so(t,e,n,r,i,o),(U(n.min)||n.ngMin)&&(r.$validators.min=function(t){return r.$isEmpty(t)||D(a)||t>=a},n.$observe("min",function(t){a=po(t),r.$validate()}));(U(n.max)||n.ngMax)&&(r.$validators.max=function(t){return r.$isEmpty(t)||D(s)||t<=s},n.$observe("max",function(t){s=po(t),r.$validate()}));if(U(n.step)||n.ngStep){var u;r.$validators.step=function(t,e){return r.$isEmpty(e)||D(u)||mo(e,a||0,u)},n.$observe("step",function(t){u=po(t),r.$validate()})}},url:function(t,e,n,r,i,o){so(t,e,n,r,i,o),ao(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Ki.test(n)}},email:function(t,e,n,r,i,o){so(t,e,n,r,i,o),ao(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Zi.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==tt(n.ngTrim);D(n.name)&&e.attr("name",_());e.on("click",function(t){var o;e[0].checked&&(o=n.value,i&&(o=tt(o)),r.$setViewValue(o,t&&t.type))}),r.$render=function(){var t=n.value;i&&(t=tt(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){lo(t,e,n,r),fo(r),so(t,e,n,r,i,o);var a=r.$$hasNativeValidators&&"range"===e[0].type,s=a?0:void 0,u=a?100:void 0,c=a?1:void 0,l=e[0].validity,f=U(n.min),p=U(n.max),h=U(n.step),d=r.$render;r.$render=a&&U(l.rangeUnderflow)&&U(l.rangeOverflow)?function(){d(),r.$setViewValue(e.val())}:d,f&&(r.$validators.min=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||D(s)||e>=s},v("min",function(t){if(s=po(t),P(r.$modelValue))return;if(a){var n=e.val();s>n&&(n=s,e.val(n)),r.$setViewValue(n)}else r.$validate()}));p&&(r.$validators.max=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||D(u)||e<=u},v("max",function(t){if(u=po(t),P(r.$modelValue))return;if(a){var n=e.val();u<n&&(e.val(u),n=u<s?s:u),r.$setViewValue(n)}else r.$validate()}));h&&(r.$validators.step=a?function(){return!l.stepMismatch}:function(t,e){return r.$isEmpty(e)||D(c)||mo(e,s||0,c)},v("step",function(t){if(c=po(t),P(r.$modelValue))return;a&&r.$viewValue!==e.val()?r.$setViewValue(e.val()):r.$validate()}));function v(t,r){e.attr(t,n[t]),n.$observe(t,r)}},checkbox:function(t,e,n,r,i,o,a,s){var u=$o(s,t,"ngTrueValue",n.ngTrueValue,!0),c=$o(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return ut(t,u)}),r.$parsers.push(function(t){return t?u:c})},hidden:I,button:I,submit:I,reset:I,file:I};function ao(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function so(t,e,n,r,i,o){var s,c=u(e[0].type);if(!i.android){var l=!1;e.on("compositionstart",function(){l=!0}),e.on("compositionend",function(){l=!1,f()})}var f=function(t){if(s&&(o.defer.cancel(s),s=null),!l){var i=e.val(),a=t&&t.type;"password"===c||n.ngTrim&&"false"===n.ngTrim||(i=tt(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,a)}};if(i.hasEvent("input"))e.on("input",f);else{var p=function(t,e,n){s||(s=o.defer(function(){s=null,e&&e.value===n||f(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||p(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut",p)}e.on("change",f),io[c]&&r.$$hasNativeValidators&&c===n.type&&e.on(ro,function(t){if(!s){var e=this[a],n=e.badInput,r=e.typeMismatch;s=o.defer(function(){s=null,e.badInput===n&&e.typeMismatch===r||f(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function uo(t,e){return function(n,r){var i,o;if(B(n))return n;if(F(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ji.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},E(i,function(t,n){n<e.length&&(o[e[n]]=+t)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function co(t,e,n,r){return function(i,o,a,s,u,c,l){lo(i,o,a,s),so(0,o,a,s,u,c);var f,p,h,d=s&&s.$options.getOption("timezone");(s.$$parserName=t,s.$parsers.push(function(t){if(s.$isEmpty(t))return null;if(e.test(t)){var r=n(t,f);return d&&(r=yt(r,d)),r}}),s.$formatters.push(function(t){if(t&&!B(t))throw Wo("datefmt","Expected `{0}` to be a date",t);return v(t)?((f=t)&&d&&(f=yt(f,d,!0)),l("date")(t,r,d)):(f=null,"")}),U(a.min)||a.ngMin)&&(s.$validators.min=function(t){return!v(t)||D(p)||n(t)>=p},a.$observe("min",function(t){p=m(t),s.$validate()}));(U(a.max)||a.ngMax)&&(s.$validators.max=function(t){return!v(t)||D(h)||n(t)<=h},a.$observe("max",function(t){h=m(t),s.$validate()}));function v(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function m(t){return U(t)&&!B(t)?n(t)||void 0:t}}}function lo(t,e,n,r){var i=e[0];(r.$$hasNativeValidators=H(i.validity))&&r.$parsers.push(function(t){var n=e.prop(a)||{};return n.badInput||n.typeMismatch?void 0:t})}function fo(t){t.$$parserName="number",t.$parsers.push(function(e){return t.$isEmpty(e)?null:Yi.test(e)?parseFloat(e):void 0}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!L(e))throw Wo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function po(t){return U(t)&&!L(t)&&(t=parseFloat(t)),P(t)?void 0:t}function ho(t){return(0|t)===t}function vo(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function mo(t,e,n){var r=Number(t),i=!ho(r),o=!ho(e),a=!ho(n);if(i||o||a){var s=i?vo(r):0,u=o?vo(e):0,c=a?vo(n):0,l=Math.max(s,u,c),f=Math.pow(10,l);r*=f,e*=f,n*=f,i&&(r=Math.round(r)),o&&(e=Math.round(e)),a&&(n=Math.round(n))}return(r-e)%n==0}function $o(t,e,n,r,i){var o;if(U(r)){if(!(o=t(r)).constant)throw Wo("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(e)}return i}var go=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(oo[u(a.type)]||oo.text)(i,o,a,s[0],e,t,n,r)}}}}],yo=/^(true|false|\d+)$/,wo=function(){function t(t,e,n){var r=U(n)?n:9===l?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return yo.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,function(e){t(n,r,e)})}}}},bo=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=qt(t)})}}}}],So=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var o=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(t){r.textContent=D(t)?"":t})}}}}],Eo=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")})}}}}],xo=M({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function Co(t,e){var n;return t="ngClass"+t,["$parse",function(s){return{restrict:"AC",link:function(u,c,l){var f,p=l[t].trim(),h=":"===p.charAt(0)&&":"===p.charAt(1),d=s(p,h?a:o),v=h?function(t){var e=o(t);e!==f&&y(e)}:y,m=c.data("$classCounts"),$=!0;function g(t,e){var n=[];return E(t,function(t){(e>0||m[t])&&(m[t]=(m[t]||0)+e,m[t]===+(e>0)&&n.push(t))}),n.join(" ")}function y(t){var n,o,a,s,u,c,p;$===e&&(n=t,o=i(f),a=i(n),s=r(o,a),u=r(a,o),c=g(s,-1),p=g(u,1),l.$addClass(p),l.$removeClass(c)),f=t}m||(m=Ht(),c.data("$classCounts",m)),"ngClass"!==t&&(n||(n=s("$index",function(t){return 1&t})),u.$watch(n,function(t){t===e?(r=g(i(r=f),1),l.$addClass(r)):(n=g(i(n=f),-1),l.$removeClass(n));var n;var r;$=t})),u.$watch(d,v,h)}}}];function r(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function i(t){return t&&t.split(" ")}function o(t){var e=t;return z(t)?e=t.map(o).join(" "):H(t)&&(e=Object.keys(t).filter(function(e){return t[e]}).join(" ")),e}function a(t){var e=t;if(z(t))e=t.map(a);else if(H(t)){var n=!1;e=Object.keys(t).filter(function(e){var r=t[e];return!n&&D(r)&&(n=!0),r}),n&&e.push(void 0)}return e}}var _o=Co("",!0),ko=Co("Odd",0),To=Co("Even",1),Ao=ji({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Oo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ro={},Po={blur:!0,focus:!0};E("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=yn("ng-"+t);Ro[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e]);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};Po[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Vo=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,c;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),s={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),s&&(c=Ut(s.clone),t.leave(c).done(function(t){!1!==t&&(c=null)}),s=null))})}}}],Io=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:w.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,u,c,l){var f,p,h,d=0,v=function(){p&&(p.remove(),p=null),f&&(f.$destroy(),f=null),h&&(n.leave(h).done(function(t){!1!==t&&(p=null)}),p=h,h=null)};r.$watch(o,function(o){var u=function(t){!1===t||!U(s)||s&&!r.$eval(s)||e()},p=++d;o?(t(o,!0).then(function(t){if(!r.$$destroyed&&p===d){var e=r.$new();c.template=t;var s=l(e,function(t){v(),n.enter(t,null,i).done(u)});h=s,(f=e).$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||p===d&&(v(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(v(),c.template=null)})}}}}],jo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if($.call(r[0]).match(/SVG/))return r.empty(),void e(fe(o.template,t.document).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});r.html(o.template),e(r.contents())(n)}}}],Mo=ji({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),No=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",o="false"!==n.ngTrim,a=o?tt(i):i;r.$parsers.push(function(t){if(!D(t)){var e=[];return t&&E(t.split(a),function(t){t&&e.push(o?tt(t):t)}),e}}),r.$formatters.push(function(t){if(z(t))return t.join(i)}),r.$isEmpty=function(t){return!t||!t.length}}}},Do="ng-valid",Uo="ng-invalid",Ho="ng-pristine",qo="ng-dirty",Fo="ng-untouched",Lo="ng-touched",Bo="ng-empty",zo="ng-not-empty",Wo=i("ngModel");function Go(t,e,n,r,i,o,a,s,u){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(t),this.$$parentForm=Di,this.$options=Jo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:t}),this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=e,zi(this),(c=this).$$scope.$watch(function(t){var e=c.$$ngModelGet(t);return e===c.$modelValue||c.$modelValue!=c.$modelValue&&e!=e||c.$$setModelValue(e),e})}Go.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Go.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return G(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){G(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Wo("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,wt(this.$$element))},$render:I,$isEmpty:function(t){return D(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,zo),this.$$animate.addClass(this.$$element,Bo)):(this.$$animate.removeClass(this.$$element,Bo),this.$$animate.addClass(this.$$element,zo))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,qo),this.$$animate.addClass(this.$$element,Ho)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ho),this.$$animate.addClass(this.$$element,qo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Fo,Lo)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Lo,Fo)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!P(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,function(t){i||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var r,i,o=this.$$currentValidationRunId,a=this;(function(){var t=a.$$parserName||"parse";{if(!D(a.$$parserValid))return a.$$parserValid||(E(a.$validators,function(t,e){s(e,null)}),E(a.$asyncValidators,function(t,e){s(e,null)})),s(t,a.$$parserValid),a.$$parserValid;s(t,null)}return!0})()?!function(){var n=!0;if(E(a.$validators,function(r,i){var o=Boolean(r(t,e));n=n&&o,s(i,o)}),!n)return E(a.$asyncValidators,function(t,e){s(e,null)}),!1;return!0}()?u(!1):(r=[],i=!0,E(a.$asyncValidators,function(n,o){var a=n(t,e);if(!Q(a))throw Wo("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),r.push(a.then(function(){s(o,!0)},function(){i=!1,s(o,!1)}))}),r.length?a.$$q.all(r).then(function(){u(i)},I):u(!0)):u(!1);function s(t,e){o===a.$$currentValidationRunId&&a.$setValidity(t,e)}function u(t){o===a.$$currentValidationRunId&&n(t)}},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!D(t)||void 0,this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(D(t=this.$parsers[n](t))){this.$$parserValid=!1;break}P(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==r&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(n){i||(e.$modelValue=n?t:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),E(this.$viewChangeListeners,function(t){try{t()}catch(t){this.$$exceptionHandler(t)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");L(e[t])?e=e[t]:L(e.default)&&(e=e.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,I))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},Wi({clazz:Go,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Jo,Ko=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Go,priority:1,compile:function(e){return e.addClass(Ho).addClass(Fo).addClass(Do),{pre:function(t,e,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];function a(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(a):e.$apply(a))})}}}}}],Zo=/(\s+|^)default(\s+|$)/;function Yo(t){this.$$options=t}Yo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return E(t=A({},t),function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=tt(n.replace(Zo,function(){return t.updateOnDefault=!0," "})))},this),e&&(delete t["*"],Xo(t,this.$$options)),Xo(t,Jo.$$options),new Yo(t)}},Jo=new Yo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Qo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Jo,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function Xo(t,e){E(e,function(e,n){U(t[n])||(t[n]=e)})}var ta=ji({terminal:!0,priority:1e3}),ea=i("ngOptions"),na=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ra=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=I},post:function(t,a,s,u){for(var c=u[0],l=u[1],p=s.multiple,h=0,d=a.children(),v=d.length;h<v;h++)if(""===d[h].value){c.hasEmptyOption=!0,c.emptyOption=d.eq(h);break}a.empty();var m,$=!!c.emptyOption;f(i.cloneNode(!1)).val("?");var g=function(t,e,n){var i=t.match(na);if(!i)throw ea("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,wt(e));var o=i[5]||i[7],a=i[6],s=/ as /.test(i[0])&&i[1],u=i[9],c=r(i[2]?i[1]:o),l=s&&r(s)||c,f=u&&r(u),p=u?function(t,e){return f(n,e)}:function(t){return Ne(t)},h=function(t,e){return p(t,y(t,e))},d=r(i[2]||i[1]),v=r(i[3]||""),m=r(i[4]||""),$=r(i[8]),g={},y=a?function(t,e){return g[a]=e,g[o]=t,g}:function(t){return g[o]=t,g};function w(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function b(t){var e;if(!a&&S(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:u,getTrackByValue:h,getWatchables:r($,function(t){for(var e=[],r=b(t=t||[]),o=r.length,a=0;a<o;a++){var s=t===r?a:r[a],u=t[s],c=y(u,s),l=p(u,c);if(e.push(l),i[2]||i[1]){var f=d(n,c);e.push(f)}if(i[4]){var h=m(n,c);e.push(h)}}return e}),getOptions:function(){for(var t=[],e={},r=$(n)||[],i=b(r),o=i.length,a=0;a<o;a++){var s=r===i?a:i[a],c=r[s],f=y(c,s),g=l(n,f),S=p(g,f),E=new w(S,g,d(n,f),v(n,f),m(n,f));t.push(E),e[S]=E}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[h(t)]},getViewValueFromOption:function(t){return u?at(t.viewValue):t.viewValue}}}}}(s.ngOptions,a,t),y=n[0].createDocumentFragment();function w(t,e){var n,r,o=i.cloneNode(!1);e.appendChild(o),r=o,(n=t).element=r,r.disabled=n.disabled,n.label!==r.label&&(r.label=n.label,r.textContent=n.label),r.value=n.selectValue}function b(t){var e=m.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}c.generateUnknownOptionValue=function(t){return"?"},p?(c.writeValue=function(t){if(m){var e=t&&t.map(b)||[];m.items.forEach(function(t){t.element.selected&&!it(e,t)&&(t.element.selected=!1)})}},c.readValue=function(){var t=[];return E(a.val()||[],function(e){var n=m.selectValueMap[e];n&&!n.disabled&&t.push(m.getViewValueFromOption(n))}),t},g.trackBy&&t.$watchCollection(function(){if(z(l.$viewValue))return l.$viewValue.map(function(t){return g.getTrackByValue(t)})},function(){l.$render()})):(c.writeValue=function(t){if(m){var e=a[0].options[a[0].selectedIndex],n=m.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(a[0].value!==n.selectValue&&(c.removeUnknownOption(),a[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):c.selectUnknownOrEmptyOption(t)}},c.readValue=function(){var t=m.selectValueMap[a.val()];return t&&!t.disabled?(c.unselectEmptyOption(),c.removeUnknownOption(),m.getViewValueFromOption(t)):null},g.trackBy&&t.$watch(function(){return g.getTrackByValue(l.$viewValue)},function(){l.$render()})),$&&(e(c.emptyOption)(t),a.prepend(c.emptyOption),c.emptyOption[0].nodeType===Bt?(c.hasEmptyOption=!1,c.registerOption=function(t,e){""===e.val()&&(c.hasEmptyOption=!0,c.emptyOption=e,c.emptyOption.removeClass("ng-scope"),l.$render(),e.on("$destroy",function(){var t=c.$isEmptyOptionSelected();c.hasEmptyOption=!1,c.emptyOption=void 0,t&&l.$render()}))}):c.emptyOption.removeClass("ng-scope")),t.$watchCollection(g.getWatchables,function(){var t=m&&c.readValue();if(m)for(var e=m.items.length-1;e>=0;e--){var n=m.items[e];U(n.group)?ke(n.element.parentNode):ke(n.element)}var r={};if((m=g.getOptions()).items.forEach(function(t){var e;U(t.group)?((e=r[t.group])||(e=o.cloneNode(!1),y.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),w(t,e)):w(t,y)}),a[0].appendChild(y),l.$render(),!l.$isEmpty(t)){var i=c.readValue(),s=g.trackBy||p;(s?ut(t,i):t===i)||(l.$setViewValue(i),l.$render())}})}}}}],ia=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,a,s){var c,l=s.count,f=s.$attr.when&&a.attr(s.$attr.when),p=s.offset||0,h=o.$eval(f)||{},d={},v=e.startSymbol(),m=e.endSymbol(),$=v+l+"-"+p+m,g=w.noop;function y(t){a.text(t||"")}E(s,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+u(n[2]);h[r]=a.attr(s.$attr[e])}}),E(h,function(t,n){d[n]=e(t.replace(r,$))}),o.$watch(l,function(e){var r=parseFloat(e),i=P(r);if(i||r in h||(r=t.pluralCat(r-p)),!(r===c||i&&P(c))){g();var a=d[r];D(a)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),g=I,y()):g=o.$watch(a,y),c=r}})}}}],oa=["$parse","$animate","$compile",function(t,e,n){var r="$$NG_REMOVED",o=i("ngRepeat"),a=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,u){var c=u.ngRepeat,l=n.$$createComment("end ngRepeat",c),f=c.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!f)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);var p=f[1],h=f[2],d=f[3],v=f[4];if(!(f=p.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var m,$,g,y,w=f[3]||f[1],b=f[2];if(d&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(d)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(d)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",d);var x={$id:Ne};return v?m=t(v):(g=function(t,e){return Ne(e)},y=function(t){return t}),function(t,n,i,u,f){m&&($=function(e,n,r){return b&&(x[b]=e),x[w]=n,x.$index=r,m(t,x)});var p=Ht();t.$watchCollection(h,function(i){var u,h,v,m,x,C,_,k,T,A,O,R,P,V=n[0],I=Ht();if(d&&(t[d]=i),S(i))T=i,k=$||g;else for(var j in k=$||y,T=[],i)s.call(i,j)&&"$"!==j.charAt(0)&&T.push(j);for(m=T.length,O=new Array(m),u=0;u<m;u++)if(x=i===T?u:T[u],C=i[x],_=k(x,C,u),p[_])A=p[_],delete p[_],I[_]=A,O[u]=A;else{if(I[_])throw E(O,function(t){t&&t.scope&&(p[t.id]=t)}),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",c,_,C);O[u]={id:_,scope:void 0,clone:void 0},I[_]=!0}for(var M in p){if(R=Ut((A=p[M]).clone),e.leave(R),R[0].parentNode)for(u=0,h=R.length;u<h;u++)R[u][r]=!0;A.scope.$destroy()}for(u=0;u<m;u++)if(x=i===T?u:T[u],C=i[x],(A=O[u]).scope){v=V;do{v=v.nextSibling}while(v&&v[r]);A.clone[0]!==v&&e.move(Ut(A.clone),null,V),V=(P=A).clone[P.clone.length-1],a(A.scope,u,w,C,b,x,m)}else f(function(t,n){A.scope=n;var r=l.cloneNode(!1);t[t.length++]=r,e.enter(t,null,V),V=r,A.clone=t,I[A.id]=A,a(A.scope,u,w,C,b,x,m)});p=I})}}}}],aa="ng-hide",sa="ng-hide-animate",ua=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,aa,{tempClasses:sa})})}}}],ca=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,aa,{tempClasses:sa})})}}}],la=ji(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&E(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),fa=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var a=i.ngSwitch||i.on,s=[],u=[],c=[],l=[],f=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(a,function(n){for(var r,i;c.length;)t.cancel(c.pop());for(r=0,i=l.length;r<i;++r){var a=Ut(u[r].clone);l[r].$destroy(),(c[r]=t.leave(a)).done(f(c,r))}u.length=0,l.length=0,(s=o.cases["!"+n]||o.cases["?"])&&E(s,function(n){n.transclude(function(r,i){l.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen");var a={clone:r};u.push(a),t.enter(r,o.parent(),o)})})})}}}],pa=ji({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){E(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})})}}),ha=ji({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),da=i("ngTransclude"),va=["$compile",function(t){return{restrict:"EAC",terminal:!0,compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){if(!o)throw da("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",wt(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var a=r.ngTransclude||r.ngTranscludeSlot;function s(){n(t,function(t){e.append(t)})}o(function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==Lt||r.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&s()}}}}],ma=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"===n.type){var r=n.id,i=e[0].text;t.put(r,i)}}}}],$a={$setViewValue:I,$render:I};function ga(t,e){t.prop("selected",e),t.attr("selected",e)}var ya=["$element","$scope",function(e,n){var r=this,i=new He;r.selectValueMap={},r.ngModelCtrl=$a,r.multiple=!1,r.unknownOption=f(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),ga(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),ga(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(t){return"? "+Ne(t)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),ga(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&ga(r.emptyOption,!1)},n.$on("$destroy",function(){r.renderUnknownOption=I}),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&ga(f(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=Ne(t);e.val(i in r.selectValueMap?i:t);var o=e[0].options[e[0].selectedIndex];ga(f(o),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(t,e){if(e[0].nodeType!==Bt){Nt(t,'"option value"'),""===t&&(r.hasEmptyOption=!0,r.emptyOption=e);var n=i.get(t)||0;i.set(t,n+1),a()}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(t){null==t&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(t):r.renderUnknownOption(t)};var o=!1;function a(){o||(o=!0,n.$$postDigest(function(){o=!1,r.ngModelCtrl.$render()}))}var s=!1;function u(t){s||(s=!0,n.$$postDigest(function(){n.$$destroyed||(s=!1,r.ngModelCtrl.$setViewValue(r.readValue()),t&&r.ngModelCtrl.$render())}))}r.registerOption=function(t,e,n,i,o){if(n.$attr.ngValue){var s,c=NaN;n.$observe("value",function(t){var n,i=e.prop("selected");U(c)&&(r.removeOption(s),delete r.selectValueMap[c],n=!0),c=Ne(t),s=t,r.selectValueMap[c]=t,r.addOption(t,e),e.attr("value",c),n&&i&&u()})}else i?n.$observe("value",function(t){var n;r.readValue();var i=e.prop("selected");U(s)&&(r.removeOption(s),n=!0),s=t,r.addOption(t,e),n&&i&&u()}):o?t.$watch(o,function(t,i){n.$set("value",t);var o=e.prop("selected");i!==t&&r.removeOption(i),r.addOption(t,e),i&&o&&u()}):r.addOption(n.value,e);n.$observe("disabled",function(t){("true"===t||t&&e.prop("selected"))&&(r.multiple?u(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))}),e.on("$destroy",function(){var t=r.readValue(),e=n.value;r.removeOption(e),a(),(r.multiple&&t&&-1!==t.indexOf(e)||t===e)&&u(!0)})}}],wa=function(){return{restrict:"E",require:["select","?ngModel"],controller:ya,priority:1,link:{pre:function(t,e,n,r){var i=r[0],o=r[1];if(!o)return void(i.registerOption=I);if(i.ngModelCtrl=o,e.on("change",function(){i.removeUnknownOption(),t.$apply(function(){o.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return E(e.find("option"),function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),t},i.writeValue=function(t){E(e.find("option"),function(e){var n=!!t&&(it(t,e.value)||it(t,i.selectValueMap[e.value])),r=e.selected;n!==r&&ga(f(e),n)})};var a,s=NaN;t.$watch(function(){s!==o.$viewValue||ut(a,o.$viewValue)||(a=Gt(o.$viewValue),o.$render()),s=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}},post:function(t,e,n,r){var i=r[1];if(!i)return;var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}},ba=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return U(n.ngValue)||(U(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o="$selectController",a=e.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(t,e,n,r,i)}}}}],Sa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},Ea=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var o,a=n.ngPattern||n.pattern;n.$observe("pattern",function(t){if(F(t)&&t.length>0&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,t,wt(e));o=t||void 0,r.$validate()}),r.$validators.pattern=function(t,e){return r.$isEmpty(e)||D(o)||o.test(e)}}}}},xa=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){var e=R(t);i=P(e)?-1:e,r.$validate()}),r.$validators.maxlength=function(t,e){return i<0||r.$isEmpty(e)||e.length<=i}}}}},Ca=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=R(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var e;if(!It){var n=lt();(p=D(n)?t.jQuery:n?t[n]:void 0)&&p.fn.on?(f=p,A(p.fn,{scope:Ae.scope,isolateScope:Ae.isolateScope,controller:Ae.controller,injector:Ae.injector,inheritedData:Ae.inheritedData}),e=p.cleanData,p.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=p._data(r,"events"))&&n.$destroy&&p(r).triggerHandler("$destroy");e(t)}):f=he,w.element=f,It=!0}}(),A(w,{errorHandlingConfig:n,bootstrap:At,copy:at,extend:A,merge:O,equals:ut,element:f,forEach:E,injector:Ze,noop:I,bind:ht,toJson:vt,fromJson:mt,identity:j,isUndefined:D,isDefined:U,isString:F,isFunction:G,isObject:H,isNumber:L,isElement:nt,isArray:z,version:Kt,isDate:B,lowercase:u,uppercase:c,callbacks:{$$counter:0},getTestability:Rt,reloadWithDebugInfo:Ot,$$minErr:i,$$csp:ct,$$encodeUriSegment:xt,$$encodeUriQuery:Ct,$$stringify:qt}),(h=function(t){var e=i("$injector"),n=i("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||i,r(o,"module",function(){var t={};return function(i,o,a){var s={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name",e)}(i,"module"),o&&t.hasOwnProperty(i)&&(t[i]=null),r(t,i,function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],u=[],c=f("$injector","invoke","push",r),l={_invokeQueue:t,_configBlocks:r,_runBlocks:u,info:function(t){if(U(t)){if(!H(t))throw n("aobj","Argument '{0}' must be an object","value");return s=t,this}return s},requires:o,name:i,provider:p("$provide","provider"),factory:p("$provide","factory"),service:p("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),decorator:p("$provide","decorator",r),animation:p("$animateProvider","register"),filter:p("$filterProvider","register"),controller:p("$controllerProvider","register"),directive:p("$compileProvider","directive"),component:p("$compileProvider","component"),config:c,run:function(t){return u.push(t),this}};return a&&c(a),l;function f(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),l}}function p(e,n,r){return r||(r=t),function(t,o){return o&&G(o)&&(o.$$moduleName=i),r.push([e,n,arguments]),l}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Lr}),t.provider("$compile",vn).directive({a:Mi,input:go,textarea:go,form:Li,script:ma,select:wa,option:ba,ngBind:bo,ngBindHtml:Eo,ngBindTemplate:So,ngClass:_o,ngClassEven:To,ngClassOdd:ko,ngCloak:Ao,ngController:Oo,ngForm:Bi,ngHide:ca,ngIf:Vo,ngInclude:Io,ngInit:Mo,ngNonBindable:ta,ngPluralize:ia,ngRepeat:oa,ngShow:ua,ngStyle:la,ngSwitch:fa,ngSwitchWhen:pa,ngSwitchDefault:ha,ngOptions:ra,ngTransclude:va,ngModel:Ko,ngList:No,ngChange:xo,pattern:Ea,ngPattern:Ea,required:Sa,ngRequired:Sa,minlength:Ca,ngMinlength:Ca,maxlength:xa,ngMaxlength:xa,ngValue:wo,ngModelOptions:Qo}).directive({ngInclude:jo}).directive(Ni).directive(Ro),t.provider({$anchorScroll:Ye,$animate:an,$animateCss:cn,$$animateJs:rn,$$animateQueue:on,$$AnimateRunner:un,$$animateAsyncRun:sn,$browser:ln,$cacheFactory:fn,$controller:xn,$document:Cn,$$isDocumentHidden:_n,$exceptionHandler:kn,$filter:ci,$$forceReflow:Tn,$interpolate:Gn,$interval:Jn,$http:Ln,$httpParamSerializer:Mn,$httpParamSerializerJQLike:Nn,$httpBackend:zn,$xhrFactory:Bn,$jsonpCallbacks:Kn,$location:hr,$log:dr,$parse:Ir,$rootScope:Fr,$q:jr,$$q:Mr,$sce:Zr,$sceDelegate:Kr,$sniffer:Yr,$templateCache:pn,$templateRequest:Xr,$$testability:ti,$timeout:ei,$window:ai,$$rAF:qr,$$jqLite:Me,$$Map:qe,$$cookieReader:ui})}]).info({angularVersion:"1.6.8"}),w.module("ngLocale",[],["$provide",function(t){var e="one",n="other";t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,r){var i=0|t,o=function(t,e){var n,r,i=e;void 0===i&&(i=Math.min((n=t,-1==(r=(n+="").indexOf("."))?0:n.length-r-1),3));var o=Math.pow(10,i);return{v:i,f:(t*o|0)%o}}(t,r);return 1==i&&0==o.v?e:n}})}]),f(function(){Tt(t.document,At)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],e):e(t["@uirouter/angularjs"]={},t.angular)}(this,function(t,e){"use strict";var n=angular,r=e&&e.module?e:n;function i(t){var e=[].slice.apply(arguments,[1]),n=t.length;return function e(r){return r.length>=n?t.apply(null,r):function(){return e(r.concat([].slice.apply(arguments)))}}(e)}function o(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.apply(null,[].slice.call(arguments).reverse())}var s=function(t){return function(e){return e&&e[t]}},u=i(function(t,e,n){return n&&n[t]===e}),c=function(t){return a.apply(null,t.split(".").map(s))},l=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}};function f(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)&&e.apply(null,n)}}function p(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.apply(null,n)||e.apply(null,n)}}var h=function(t){return function(e){return e.reduce(function(e,n){return e&&!!t(n)},!0)}},d=function(t){return function(e){return e.reduce(function(e,n){return e||!!t(n)},!1)}},v=function(t){return function(e){return null!=e&&e.constructor===t||e instanceof t}},m=function(t){return function(e){return t===e}},$=function(t){return function(){return t}};function g(t,e){return function(n){return n[t].apply(n,e)}}function y(t){return function(e){for(var n=0;n<t.length;n++)if(t[n][0](e))return t[n][1](e)}}var w=function(){function t(t){this.text=t,this.glob=t.split(".");var e=this.text.split(".").map(function(t){return"**"===t?"(?:|(?:\\.[^.]*)*)":"*"===t?"\\.[^.]*":"\\."+t}).join("");this.regexp=new RegExp("^"+e+"$")}return t.is=function(t){return!!/[!,*]+/.exec(t)},t.fromString=function(e){return t.is(e)?new t(e):null},t.prototype.matches=function(t){return this.regexp.test("."+t)},t}(),b=function(){function t(e){return t.create(e||{})}return t.create=function(e){e=t.isStateClass(e)?new e:e;var n=Z(Z(e,t.prototype));return e.$$state=function(){return n},n.self=e,n.__stateObjectCache={nameGlob:w.fromString(n.name)},n},t.prototype.is=function(t){return this===t||this.self===t||this.fqn()===t},t.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var t=this.parent.fqn();return t?t+"."+this.name:this.name},t.prototype.root=function(){return this.parent&&this.parent.root()||this},t.prototype.parameters=function(t){return((t=it(t,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(dt(this.params)).filter(function(e){return!t.matchingKeys||t.matchingKeys.hasOwnProperty(e.id)})},t.prototype.parameter=function(t,e){return void 0===e&&(e={}),this.url&&this.url.parameter(t,e)||ft(dt(this.params),u("id",t))||e.inherit&&this.parent&&this.parent.parameter(t)},t.prototype.toString=function(){return this.fqn()},t.isStateClass=function(t){return T(t)&&!0===t.__uiRouterState},t.isState=function(t){return R(t.__stateObjectCache)},t}(),S=Object.prototype.toString,E=function(t){return function(e){return typeof e===t}},x=E("undefined"),C=l(x),_=function(t){return null===t},k=p(_,x),T=E("function"),A=E("number"),O=E("string"),R=function(t){return null!==t&&"object"==typeof t},P=Array.isArray,V=function(t){return"[object Date]"===S.call(t)},I=function(t){return"[object RegExp]"===S.call(t)},j=b.isState;function M(t){if(P(t)&&t.length){var e=t.slice(0,-1),n=t.slice(-1);return!(e.filter(l(O)).length||n.filter(l(T)).length)}return T(t)}var N=f(R,a(s("then"),T)),D=function(t){return function(){throw new Error(t+"(): No coreservices implementation for UI-Router is loaded.")}},U={$q:void 0,$injector:void 0},H="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0,q=H.angular||{},F=q.fromJson||JSON.parse.bind(JSON),L=q.toJson||JSON.stringify.bind(JSON),B=q.forEach||function(t,e,n){if(P(t))return t.forEach(e,n);Object.keys(t).forEach(function(n){return e(t[n],n)})},z=Object.assign||Rt,W=q.equals||Pt;function G(t){return t}function J(){}function K(t,e,n,r,i){void 0===i&&(i=!1);var o=function(e){return t()[e].bind(n())};return(r=r||Object.keys(t())).reduce(function(t,n){var r;return t[n]=i?(r=n,function(){return e[r]=o(r),e[r].apply(null,arguments)}):o(n),t},e)}var Z=function(t,e){return z(Object.create(t),e)},Y=i(Q);function Q(t,e){return-1!==t.indexOf(e)}var X=i(tt);function tt(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),t}var et=i(nt);function nt(t,e){return t.push(e),e}var rt=function(t){return t.slice().forEach(function(e){"function"==typeof e&&e(),X(t,e)})};function it(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e.concat({}).reverse(),i=z.apply(null,r);return z({},i,st(t||{},Object.keys(i)))}var ot=function(t,e){return z(t,e)};function at(t,e){var n=[];for(var r in t.path){if(t.path[r]!==e.path[r])break;n.push(t.path[r])}return n}function st(t,e){var n={};for(var r in t)-1!==e.indexOf(r)&&(n[r]=t[r]);return n}function ut(t,e){return Object.keys(t).filter(l(Y(e))).reduce(function(e,n){return e[n]=t[n],e},{})}function ct(t,e){return ht(t,s(e))}function lt(t,e){var n=P(t),r=n?[]:{},i=n?function(t){return r.push(t)}:function(t,e){return r[e]=t};return B(t,function(t,n){e(t,n)&&i(t,n)}),r}function ft(t,e){var n;return B(t,function(t,r){n||e(t,r)&&(n=t)}),n}var pt=ht;function ht(t,e,n){return n=n||(P(t)?[]:{}),B(t,function(t,r){return n[r]=e(t,r)}),n}var dt=function(t){return Object.keys(t).map(function(e){return t[e]})},vt=function(t,e){return t&&e},mt=function(t,e){return t||e},$t=function(t,e){return t.concat(e)},gt=function(t,e){return P(e)?t.concat(e.reduce(gt,[])):yt(t,e)};function yt(t,e){return t.push(e),t}var wt=function(t,e){return Y(t,e)?t:yt(t,e)},bt=function(t){return t.reduce($t,[])},St=function(t){return t.reduce(gt,[])},Et=Ct,xt=Ct;function Ct(t,e){return void 0===e&&(e="assert failure"),function(n){var r=t(n);if(!r)throw new Error(T(e)?e(n):e);return r}}var _t=function(t){return Object.keys(t).map(function(e){return[e,t[e]]})};function kt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return[];for(var n=t.reduce(function(t,e){return Math.min(e.length,t)},9007199254740991),r=[],i=function(e){switch(t.length){case 1:r.push([t[0][e]]);break;case 2:r.push([t[0][e],t[1][e]]);break;case 3:r.push([t[0][e],t[1][e],t[2][e]]);break;case 4:r.push([t[0][e],t[1][e],t[2][e],t[3][e]]);break;default:r.push(t.map(function(t){return t[e]}))}},o=0;o<n;o++)i(o);return r}function Tt(t,e){var n,r;if(P(e)&&(n=e[0],r=e[1]),!O(n))throw new Error("invalid parameters to applyPairs");return t[n]=r,t}function At(t){return t.length&&t[t.length-1]||void 0}function Ot(t,e){return e&&Object.keys(e).forEach(function(t){return delete e[t]}),e||(e={}),z(e,t)}function Rt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r=Object.keys(n),i=0;i<r.length;i++)t[r[i]]=n[r[i]]}return t}function Pt(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n=typeof t;if(n!==typeof e||"object"!==n)return!1;var r,i,o=[t,e];if(h(P)(o))return i=e,(r=t).length===i.length&&kt(r,i).reduce(function(t,e){return t&&Pt(e[0],e[1])},!0);if(h(V)(o))return t.getTime()===e.getTime();if(h(I)(o))return t.toString()===e.toString();if(h(T)(o))return!0;if([T,P,V,I].map(d).reduce(function(t,e){return t||!!e(o)},!1))return!1;var a={};for(var s in t){if(!Pt(t[s],e[s]))return!1;a[s]=!0}for(var s in e)if(!a[s])return!1;return!0}var Vt,It=function(t){return t.catch(function(t){return 0})&&t},jt=function(t){return It(U.$q.reject(t))},Mt=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=null),this._items=t,this._limit=e,this._evictListeners=[],this.onEvict=et(this._evictListeners)}return t.prototype.enqueue=function(t){var e=this._items;return e.push(t),this._limit&&e.length>this._limit&&this.evict(),t},t.prototype.evict=function(){var t=this._items.shift();return this._evictListeners.forEach(function(e){return e(t)}),t},t.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},t.prototype.clear=function(){var t=this._items;return this._items=[],t},t.prototype.size=function(){return this._items.length},t.prototype.remove=function(t){var e=this._items.indexOf(t);return e>-1&&this._items.splice(e,1)[0]},t.prototype.peekTail=function(){return this._items[this._items.length-1]},t.prototype.peekHead=function(){if(this.size())return this._items[0]},t}();(Vt=t.RejectType||(t.RejectType={}))[Vt.SUPERSEDED=2]="SUPERSEDED",Vt[Vt.ABORTED=3]="ABORTED",Vt[Vt.INVALID=4]="INVALID",Vt[Vt.IGNORED=5]="IGNORED",Vt[Vt.ERROR=6]="ERROR";var Nt=0,Dt=function(){function e(t,e,n){this.$id=Nt++,this.type=t,this.message=e,this.detail=n}return e.isRejectionPromise=function(t){return t&&"function"==typeof t.then&&v(e)(t._transitionRejection)},e.superseded=function(n,r){var i=new e(t.RejectType.SUPERSEDED,"The transition has been superseded by a different transition",n);return r&&r.redirected&&(i.redirected=!0),i},e.redirected=function(t){return e.superseded(t,{redirected:!0})},e.invalid=function(n){return new e(t.RejectType.INVALID,"This transition is invalid",n)},e.ignored=function(n){return new e(t.RejectType.IGNORED,"The transition was ignored",n)},e.aborted=function(n){return new e(t.RejectType.ABORTED,"The transition has been aborted",n)},e.errored=function(n){return new e(t.RejectType.ERROR,"The transition errored",n)},e.normalize=function(t){return v(e)(t)?t:e.errored(t)},e.prototype.toString=function(){var t,e=(t=this.detail)&&t.toString!==Object.prototype.toString?t.toString():Ae(t);return"Transition Rejection($id: "+this.$id+" type: "+this.type+", message: "+this.message+", detail: "+e+")"},e.prototype.toPromise=function(){return z(jt(this),{_transitionRejection:this})},e}();function Ut(t){if(!t)return"ui-view (defunct)";var e=t.creationContext?t.creationContext.name||"(root)":"(none)";return"[ui-view#"+t.id+" "+t.$type+":"+t.fqn+" ("+t.name+"@"+e+")]"}function Ht(e){return A(e)?t.Category[e]:t.Category[t.Category[e]]}var qt,Ft=Function.prototype.bind.call(console.log,console),Lt=T(console.table)?console.table.bind(console):Ft.bind(console);(qt=t.Category||(t.Category={}))[qt.RESOLVE=0]="RESOLVE",qt[qt.TRANSITION=1]="TRANSITION",qt[qt.HOOK=2]="HOOK",qt[qt.UIVIEW=3]="UIVIEW",qt[qt.VIEWCONFIG=4]="VIEWCONFIG";var Bt,zt,Wt=c("$id"),Gt=c("router.$id"),Jt=function(t){return"Transition #"+Wt(t)+"-"+Gt(t)},Kt=function(){function e(){this._enabled={},this.approximateDigests=0}return e.prototype._set=function(e,n){var r=this;n.length||(n=Object.keys(t.Category).map(function(t){return parseInt(t,10)}).filter(function(t){return!isNaN(t)}).map(function(e){return t.Category[e]})),n.map(Ht).forEach(function(t){return r._enabled[t]=e})},e.prototype.enable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!0,t)},e.prototype.disable=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._set(!1,t)},e.prototype.enabled=function(t){return!!this._enabled[Ht(t)]},e.prototype.traceTransitionStart=function(e){this.enabled(t.Category.TRANSITION)&&console.log(Jt(e)+": Started  -> "+Ae(e))},e.prototype.traceTransitionIgnored=function(e){this.enabled(t.Category.TRANSITION)&&console.log(Jt(e)+": Ignored  <> "+Ae(e))},e.prototype.traceHookInvocation=function(e,n,r){if(this.enabled(t.Category.HOOK)){var i=c("traceData.hookType")(r)||"internal",o=c("traceData.context.state.name")(r)||c("traceData.context")(r)||"unknown",a=Ce(e.registeredHook.callback);console.log(Jt(n)+":   Hook -> "+i+" context: "+o+", "+Se(200,a))}},e.prototype.traceHookResult=function(e,n,r){this.enabled(t.Category.HOOK)&&console.log(Jt(n)+":   <- Hook returned: "+Se(200,Ae(e)))},e.prototype.traceResolvePath=function(e,n,r){this.enabled(t.Category.RESOLVE)&&console.log(Jt(r)+":         Resolving "+e+" ("+n+")")},e.prototype.traceResolvableResolved=function(e,n){this.enabled(t.Category.RESOLVE)&&console.log(Jt(n)+":               <- Resolved  "+e+" to: "+Se(200,Ae(e.data)))},e.prototype.traceError=function(e,n){this.enabled(t.Category.TRANSITION)&&console.log(Jt(n)+": <- Rejected "+Ae(n)+", reason: "+e)},e.prototype.traceSuccess=function(e,n){this.enabled(t.Category.TRANSITION)&&console.log(Jt(n)+": <- Success  "+Ae(n)+", final state: "+e.name)},e.prototype.traceUIViewEvent=function(e,n,r){void 0===r&&(r=""),this.enabled(t.Category.UIVIEW)&&console.log("ui-view: "+Ee(30,e)+" "+Ut(n)+r)},e.prototype.traceUIViewConfigUpdated=function(e,n){this.enabled(t.Category.UIVIEW)&&this.traceUIViewEvent("Updating",e," with ViewConfig from context='"+n+"'")},e.prototype.traceUIViewFill=function(e,n){this.enabled(t.Category.UIVIEW)&&this.traceUIViewEvent("Fill",e," with: "+Se(200,n))},e.prototype.traceViewSync=function(e){if(this.enabled(t.Category.VIEWCONFIG)){var n="uiview component fqn",r=e.map(function(t){var e,r=t.uiView,i=t.viewConfig,o=r&&r.fqn,a=i&&i.viewDecl.$context.name+": ("+i.viewDecl.$name+")";return(e={})[n]=o,e["view config state (view name)"]=a,e}).sort(function(t,e){return(t[n]||"").localeCompare(e[n]||"")});Lt(r)}},e.prototype.traceViewServiceEvent=function(e,n){var r,i,o;this.enabled(t.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+e+" "+(i=(r=n).viewDecl,o=i.$context.name||"(root)","[View#"+r.$id+" from '"+o+"' state]: target ui-view: '"+i.$uiViewName+"@"+i.$uiViewContextAnchor+"'"))},e.prototype.traceViewServiceUIViewEvent=function(e,n){this.enabled(t.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+e+" "+Ut(n))},e}(),Zt=new Kt;(Bt=t.TransitionHookPhase||(t.TransitionHookPhase={}))[Bt.CREATE=0]="CREATE",Bt[Bt.BEFORE=1]="BEFORE",Bt[Bt.RUN=2]="RUN",Bt[Bt.SUCCESS=3]="SUCCESS",Bt[Bt.ERROR=4]="ERROR",(zt=t.TransitionHookScope||(t.TransitionHookScope={}))[zt.TRANSITION=0]="TRANSITION",zt[zt.STATE=1]="STATE";var Yt=function(){function t(t,e,n,r){this._stateRegistry=t,this._identifier=e,this._identifier=e,this._params=z({},n||{}),this._options=z({},r||{}),this._definition=t.matcher.find(e,this._options.relative)}return t.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},t.prototype.identifier=function(){return this._identifier},t.prototype.params=function(){return this._params},t.prototype.$state=function(){return this._definition},t.prototype.state=function(){return this._definition&&this._definition.self},t.prototype.options=function(){return this._options},t.prototype.exists=function(){return!(!this._definition||!this._definition.self)},t.prototype.valid=function(){return!this.error()},t.prototype.error=function(){var t=this.options().relative;if(!this._definition&&t){var e=t.name?t.name:t;return"Could not resolve '"+this.name()+"' from state '"+e+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},t.prototype.toString=function(){return"'"+this.name()+"'"+Ae(this.params())},t.prototype.withState=function(e){return new t(this._stateRegistry,e,this._params,this._options)},t.prototype.withParams=function(e,n){void 0===n&&(n=!1);var r=n?e:z({},this._params,e);return new t(this._stateRegistry,this._identifier,r,this._options)},t.prototype.withOptions=function(e,n){void 0===n&&(n=!1);var r=n?e:z({},this._options,e);return new t(this._stateRegistry,this._identifier,this._params,r)},t.isDef=function(t){return t&&t.state&&(O(t.state)||O(t.state.name))},t}(),Qt={current:J,transition:null,traceData:{},bind:null},Xt=function(){function e(e,n,r,i){var o=this;this.transition=e,this.stateContext=n,this.registeredHook=r,this.options=i,this.isSuperseded=function(){return o.type.hookPhase===t.TransitionHookPhase.RUN&&!o.options.transition.isActive()},this.options=it(i,Qt),this.type=r.eventType}return e.chain=function(t,e){return t.reduce(function(t,e){return t.then(function(){return e.invokeHook()})},e||U.$q.when())},e.invokeHooks=function(t,n){for(var r=0;r<t.length;r++){var i=t[r].invokeHook();if(N(i)){var o=t.slice(r+1);return e.chain(o,i).then(n)}}return n()},e.runAllHooks=function(t){t.forEach(function(t){return t.invokeHook()})},e.prototype.logError=function(t){this.transition.router.stateService.defaultErrorHandler()(t)},e.prototype.invokeHook=function(){var t=this,e=this.registeredHook;if(!e._deregistered){var n=this.getNotCurrentRejection();if(n)return n;var r=this.options;Zt.traceHookInvocation(this,this.transition,r);var i=function(n){return e.eventType.getErrorHandler(t)(n)},o=function(n){return e.eventType.getResultHandler(t)(n)};try{var a=e.callback.call(r.bind,t.transition,t.stateContext);return!this.type.synchronous&&N(a)?a.catch(function(t){return Dt.normalize(t).toPromise()}).then(o,i):o(a)}catch(t){return i(Dt.normalize(t))}finally{e.invokeLimit&&++e.invokeCount>=e.invokeLimit&&e.deregister()}}},e.prototype.handleHookResult=function(t){var e=this,n=this.getNotCurrentRejection();return n||(N(t)?t.then(function(t){return e.handleHookResult(t)}):(Zt.traceHookResult(t,this.transition,this.options),!1===t?Dt.aborted("Hook aborted transition").toPromise():v(Yt)(t)?Dt.redirected(t).toPromise():void 0))},e.prototype.getNotCurrentRejection=function(){var t=this.transition.router;return t._disposed?Dt.aborted("UIRouter instance #"+t.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?Dt.aborted().toPromise():this.isSuperseded()?Dt.superseded(this.options.current()).toPromise():void 0},e.prototype.toString=function(){var t=this.options,e=this.registeredHook;return(c("traceData.hookType")(t)||"internal")+" context: "+(c("traceData.context.state.name")(t)||c("traceData.context")(t)||"unknown")+", "+Se(200,_e(e.callback))},e.HANDLE_RESULT=function(t){return function(e){return t.handleHookResult(e)}},e.LOG_REJECTED_RESULT=function(t){return function(e){N(e)&&e.catch(function(e){return t.logError(Dt.normalize(e))})}},e.LOG_ERROR=function(t){return function(e){return t.logError(e)}},e.REJECT_ERROR=function(t){return function(t){return jt(t)}},e.THROW_ERROR=function(t){return function(t){throw t}},e}();function te(t,e){var n=O(e)?[e]:e;return!!(T(n)?n:function(t){for(var e=n,r=0;r<e.length;r++){var i=new w(e[r]);if(i&&i.matches(t.name)||!i&&e[r]===t.name)return!0}return!1})(t)}var ee=function(){function e(t,e,n,r,i,o){void 0===o&&(o={}),this.tranSvc=t,this.eventType=e,this.callback=n,this.matchCriteria=r,this.removeHookFromRegistry=i,this.invokeCount=0,this._deregistered=!1,this.priority=o.priority||0,this.bind=o.bind||null,this.invokeLimit=o.invokeLimit}return e.prototype._matchingNodes=function(t,e){if(!0===e)return t;var n=t.filter(function(t){return te(t.state,e)});return n.length?n:null},e.prototype._getDefaultMatchCriteria=function(){return pt(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},e.prototype._getMatchingNodes=function(e){var n=this,r=z(this._getDefaultMatchCriteria(),this.matchCriteria);return dt(this.tranSvc._pluginapi._getPathTypes()).reduce(function(i,o){var a=o.scope===t.TransitionHookScope.STATE,s=e[o.name]||[],u=a?s:[At(s)];return i[o.name]=n._matchingNodes(u,r[o.name]),i},{})},e.prototype.matches=function(t){var e=this._getMatchingNodes(t);return dt(e).every(G)?e:null},e.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},e}();function ne(t,e,n){var r=(t._registeredHooks=t._registeredHooks||{})[n.name]=[],i=X(r);function o(t,o,a){void 0===a&&(a={});var s=new ee(e,n,o,t,i,a);return r.push(s),s.deregister.bind(s)}return t[n.name]=o,o}var re=function(){function e(t){this.transition=t}return e.prototype.buildHooksForPhase=function(t){var e=this;return this.transition.router.transitionService._pluginapi._getEvents(t).map(function(t){return e.buildHooks(t)}).reduce($t,[]).filter(G)},e.prototype.buildHooks=function(e){var n=this.transition,r=n.treeChanges(),i=this.getMatchingHooks(e,r);if(!i)return[];var o={transition:n,current:n.options().current};return i.map(function(i){return i.matches(r)[e.criteriaMatchPath.name].map(function(r){var a=z({bind:i.bind,traceData:{hookType:e.name,context:r}},o),s=e.criteriaMatchPath.scope===t.TransitionHookScope.STATE?r.state.self:null,u=new Xt(n,s,i,a);return{hook:i,node:r,transitionHook:u}})}).reduce($t,[]).sort(function(t){void 0===t&&(t=!1);return function(e,n){var r=t?-1:1,i=(e.node.state.path.length-n.node.state.path.length)*r;return 0!==i?i:n.hook.priority-e.hook.priority}}(e.reverseSort)).map(function(t){return t.transitionHook})},e.prototype.getMatchingHooks=function(e,n){var r=e.hookPhase===t.TransitionHookPhase.CREATE,i=this.transition.router.transitionService;return(r?[i]:[this.transition,i]).map(function(t){return t.getHooks(e.name)}).filter(Et(P,"broken event named: "+e.name)).reduce($t,[]).filter(function(t){return t.matches(n)})},e}();var ie=function(){function t(t){this.pattern=/.*/,this.inherit=!0,z(this,t)}return t.prototype.is=function(t,e){return!0},t.prototype.encode=function(t,e){return t},t.prototype.decode=function(t,e){return t},t.prototype.equals=function(t,e){return t==e},t.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},t.prototype.toString=function(){return"{ParamType:"+this.name+"}"},t.prototype.$normalize=function(t){return this.is(t)?t:this.decode(t)},t.prototype.$asArray=function(t,e){if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new function(t,e){var n=this;function r(t){return P(t)?t:C(t)?[t]:[]}function i(t,n){return function(i){if(P(i)&&0===i.length)return i;var o=r(i),a=ht(o,t);return!0===n?0===lt(a,function(t){return!t}).length:function(t){switch(t.length){case 0:return;case 1:return"auto"===e?t[0]:t;default:return t}}(a)}}function o(t){return function(e,n){var i=r(e),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!t(i[a],o[a]))return!1;return!0}}["encode","decode","equals","$normalize"].forEach(function(e){var r=t[e].bind(t),a="equals"===e?o:i;n[e]=a(r)}),z(this,{dynamic:t.dynamic,name:t.name,pattern:t.pattern,inherit:t.inherit,is:i(t.is.bind(t),!0),$arrayMode:e})}(this,t)},t}();var oe,ae=Object.prototype.hasOwnProperty,se=function(t){return 0===["value","type","squash","array","dynamic"].filter(ae.bind(t||{})).length};(oe=t.DefType||(t.DefType={}))[oe.PATH=0]="PATH",oe[oe.SEARCH=1]="SEARCH",oe[oe.CONFIG=2]="CONFIG";var ue=function(){function e(e,n,r,i,o){n=function(e,n,r,i,o){if(e.type&&n&&"string"!==n.name)throw new Error("Param '"+i+"' has two type configurations.");if(e.type&&n&&"string"===n.name&&o.type(e.type))return o.type(e.type);if(n)return n;if(!e.type){var a=r===t.DefType.CONFIG?"any":r===t.DefType.PATH?"path":r===t.DefType.SEARCH?"query":"string";return o.type(a)}return e.type instanceof ie?e.type:o.type(e.type)}(r=function(t){function e(){return t.value}return t=se(t)&&{value:t}||t,e.__cacheable=!0,z(t,{$$fn:M(t.value)?t.value:e})}(r),n,i,e,o.paramTypes);var a,u,c=(a={array:i===t.DefType.SEARCH&&"auto"},u=e.match(/\[\]$/)?{array:!0}:{},z(a,u,r).array);n=c?n.$asArray(c,i===t.DefType.SEARCH):n;var l=void 0!==r.value||i===t.DefType.SEARCH,f=C(r.dynamic)?!!r.dynamic:!!n.dynamic,p=C(r.raw)?!!r.raw:!!n.raw,h=function(t,e,n){var r=t.squash;if(!e||!1===r)return!1;if(!C(r)||null==r)return n;if(!0===r||O(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}(r,l,o.defaultSquashPolicy()),d=function(t,e,n,r){var i=[{from:"",to:n||e?void 0:""},{from:null,to:n||e?void 0:""}],o=P(t.replace)?t.replace:[];O(r)&&o.push({from:r,to:void 0});var a=ht(o,s("from"));return lt(i,function(t){return-1===a.indexOf(t.from)}).concat(o)}(r,c,l,h),v=C(r.inherit)?!!r.inherit:!!n.inherit;z(this,{id:e,type:n,location:i,isOptional:l,dynamic:f,raw:p,squash:h,replace:d,inherit:v,array:c,config:r})}return e.values=function(t,e){void 0===e&&(e={});for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];n[o.id]=o.value(e[o.id])}return n},e.changed=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t.filter(function(t){return!t.type.equals(e[t.id],n[t.id])})},e.equals=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),0===e.changed(t,n,r).length},e.validates=function(t,e){return void 0===e&&(e={}),t.map(function(t){return t.validates(e[t.id])}).reduce(vt,!0)},e.prototype.isDefaultValue=function(t){return this.isOptional&&this.type.equals(this.value(),t)},e.prototype.value=function(t){var e=this;return t=function(t){for(var n=0,r=e.replace;n<r.length;n++){var i=r[n];if(i.from===t)return i.to}return t}(t),x(t)?function(){if(e._defaultValueCache)return e._defaultValueCache.defaultValue;if(!U.$injector)throw new Error("Injectable functions cannot be called at configuration time");var t=U.$injector.invoke(e.config.$$fn);if(null!==t&&void 0!==t&&!e.type.is(t))throw new Error("Default value ("+t+") for parameter '"+e.id+"' is not an instance of ParamType ("+e.type.name+")");return e.config.$$fn.__cacheable&&(e._defaultValueCache={defaultValue:t}),t}():this.type.$normalize(t)},e.prototype.isSearch=function(){return this.location===t.DefType.SEARCH},e.prototype.validates=function(t){if((x(t)||null===t)&&this.isOptional)return!0;var e=this.type.$normalize(t);if(!this.type.is(e))return!1;var n=this.type.encode(e);return!(O(n)&&!this.type.pattern.exec(n))},e.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},e}(),ce=function(){function t(e){if(e instanceof t){var n=e;this.state=n.state,this.paramSchema=n.paramSchema.slice(),this.paramValues=z({},n.paramValues),this.resolvables=n.resolvables.slice(),this.views=n.views&&n.views.slice()}else{var r=e;this.state=r,this.paramSchema=r.parameters({inherit:!1}),this.paramValues={},this.resolvables=r.resolvables.map(function(t){return t.clone()})}}return t.prototype.clone=function(){return new t(this)},t.prototype.applyRawParams=function(t){return this.paramValues=this.paramSchema.reduce(function(e,n){return Tt(e,[(r=n).id,r.value(t[r.id])]);var r},{}),this},t.prototype.parameter=function(t){return ft(this.paramSchema,u("id",t))},t.prototype.equals=function(t,e){var n=this.diff(t,e);return n&&0===n.length},t.prototype.diff=function(t,e){if(this.state!==t.state)return!1;var n=e?e(this):this.paramSchema;return ue.changed(n,this.paramValues,t.paramValues)},t.clone=function(t){return t.clone()},t}(),le=function(){function t(){}return t.makeTargetState=function(t,e){var n=At(e).state;return new Yt(t,n,e.map(s("paramValues")).reduce(ot,{}),{})},t.buildPath=function(t){var e=t.params();return t.$state().path.map(function(t){return new ce(t).applyRawParams(e)})},t.buildToPath=function(e,n){var r=t.buildPath(n);return n.options().inherit?t.inheritParams(e,r,Object.keys(n.params())):r},t.applyViewConfigs=function(e,n,r){n.filter(function(t){return Y(r,t.state)}).forEach(function(r){var i=dt(r.state.views||{}),o=t.subPath(n,function(t){return t===r}),a=i.map(function(t){return e.createViewConfig(o,t)});r.views=a.reduce($t,[])})},t.inheritParams=function(t,e,n){void 0===n&&(n=[]);var r=t.map(function(t){return t.paramSchema}).reduce($t,[]).filter(function(t){return!t.inherit}).map(s("id"));return e.map(function(e){var i=z({},e&&e.paramValues),o=st(i,n);i=ut(i,n);var a,s,c,l=ut((a=t,s=e.state,c=ft(a,u("state",s)),z({},c&&c.paramValues)||{}),r),f=z(i,l,o);return new ce(e.state).applyRawParams(f)})},t.treeChanges=function(e,n,r){for(var i,o,a,s,u,c,l=Math.min(e.length,n.length),f=0;f<l&&e[f].state!==r&&(i=e[f],o=n[f],i.equals(o,t.nonDynamicParams));)f++;s=(a=e).slice(0,f),u=a.slice(f);var p=s.map(function(t,e){var r=t.clone();return r.paramValues=n[e].paramValues,r});return c=n.slice(f),{from:a,to:p.concat(c),retained:s,retainedWithToParams:p,exiting:u,entering:c}},t.matching=function(t,e,n){var r=!1;return kt(t,e).reduce(function(t,e){var i=e[0],o=e[1];return(r=r||!i.equals(o,n))?t:t.concat(i)},[])},t.equals=function(e,n,r){return e.length===n.length&&t.matching(e,n,r).length===e.length},t.subPath=function(t,e){var n=ft(t,e),r=t.indexOf(n);return-1===r?void 0:t.slice(0,r+1)},t.nonDynamicParams=function(t){return t.state.parameters({inherit:!1}).filter(function(t){return!t.dynamic})},t.paramValues=function(t){return t.reduce(function(t,e){return z(t,e.paramValues)},{})},t}(),fe={when:"LAZY",async:"WAIT"},pe=function(){function t(e,n,r,i,o){if(this.resolved=!1,this.promise=void 0,e instanceof t)z(this,e);else if(T(n)){if(k(e))throw new Error("new Resolvable(): token argument is required");if(!T(n))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=e,this.policy=i,this.resolveFn=n,this.deps=r||[],this.data=o,this.resolved=void 0!==o,this.promise=this.resolved?U.$q.when(this.data):void 0}else if(R(e)&&e.token&&(e.hasOwnProperty("resolveFn")||e.hasOwnProperty("data"))){var a=e;return new t(a.token,a.resolveFn,a.deps,a.policy,a.data)}}return t.prototype.getPolicy=function(t){var e=this.policy||{},n=t&&t.resolvePolicy||{};return{when:e.when||n.when||fe.when,async:e.async||n.async||fe.async}},t.prototype.resolve=function(t,e){var n=this,r=U.$q,i=t.findNode(this),o=i&&i.state,a="RXWAIT"===this.getPolicy(o).async?function(t){var e=t.cache(1);return e.take(1).toPromise().then(function(){return e})}:G;return this.promise=r.when().then(function(){return r.all(t.getDependencies(n).map(function(n){return n.get(t,e)}))}).then(function(t){return n.resolveFn.apply(null,t)}).then(a).then(function(t){return n.data=t,n.resolved=!0,n.resolveFn=null,Zt.traceResolvableResolved(n,e),n.data})},t.prototype.get=function(t,e){return this.promise||this.resolve(t,e)},t.prototype.toString=function(){return"Resolvable(token: "+Ae(this.token)+", requires: ["+this.deps.map(Ae)+"])"},t.prototype.clone=function(){return new t(this)},t.fromData=function(e,n){return new t(e,function(){return n},null,null,n)},t}(),he={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},de=he.when,ve=[de.EAGER,de.LAZY],me=[de.EAGER],$e="Native Injector",ge=function(){function t(t){this._path=t}return t.prototype.getTokens=function(){return this._path.reduce(function(t,e){return t.concat(e.resolvables.map(function(t){return t.token}))},[]).reduce(wt,[])},t.prototype.getResolvable=function(t){return At(this._path.map(function(t){return t.resolvables}).reduce($t,[]).filter(function(e){return e.token===t}))},t.prototype.getPolicy=function(t){var e=this.findNode(t);return t.getPolicy(e.state)},t.prototype.subContext=function(e){return new t(le.subPath(this._path,function(t){return t.state===e}))},t.prototype.addResolvables=function(t,e){var n=ft(this._path,u("state",e)),r=t.map(function(t){return t.token});n.resolvables=n.resolvables.filter(function(t){return-1===r.indexOf(t.token)}).concat(t)},t.prototype.resolvePath=function(t,e){var n=this;void 0===t&&(t="LAZY");var r=(Y(ve,t)?t:"LAZY")===he.when.EAGER?me:ve;Zt.traceResolvePath(this._path,t,e);var i=function(t,e){return function(r){return Y(t,n.getPolicy(r)[e])}},o=this._path.reduce(function(t,o){var a=o.resolvables.filter(i(r,"when")),s=a.filter(i(["NOWAIT"],"async")),u=a.filter(l(i(["NOWAIT"],"async"))),c=n.subContext(o.state),f=function(t){return t.get(c,e).then(function(e){return{token:t.token,value:e}})};return s.forEach(f),t.concat(u.map(f))},[]);return U.$q.all(o)},t.prototype.injector=function(){return this._injector||(this._injector=new ye(this))},t.prototype.findNode=function(t){return ft(this._path,function(e){return Y(e.resolvables,t)})},t.prototype.getDependencies=function(t){var e=this,n=this.findNode(t),r=(le.subPath(this._path,function(t){return t===n})||this._path).reduce(function(t,e){return t.concat(e.resolvables)},[]).filter(function(e){return e!==t});return t.deps.map(function(t){var n=r.filter(function(e){return e.token===t});if(n.length)return At(n);var i=e.injector().getNative(t);if(x(i))throw new Error("Could not find Dependency Injection token: "+Ae(t));return new pe(t,function(){return i},[],i)})},t}(),ye=function(){function t(t){this.context=t,this.native=this.get($e)||U.$injector}return t.prototype.get=function(t){var e=this.context.getResolvable(t);if(e){if("NOWAIT"===this.context.getPolicy(e).async)return e.get(this.context);if(!e.resolved)throw new Error("Resolvable async .get() not complete:"+Ae(e.token));return e.data}return this.getNative(t)},t.prototype.getAsync=function(t){var e=this.context.getResolvable(t);return e?e.get(this.context):U.$q.when(this.native.get(t))},t.prototype.getNative=function(t){return this.native&&this.native.get(t)},t}(),we=s("self"),be=function(){function e(e,n,r){var i=this;if(this._deferred=U.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new re(this),this.isActive=function(){return i.router.globals.transition===i},this.router=r,this._targetState=n,!n.valid())throw new Error(n.error());this._options=z({current:$(this)},n.options()),this.$id=r.transitionService._transitionCount++;var o=le.buildToPath(e,n);this._treeChanges=le.treeChanges(e,o,this._options.reloadState),this.createTransitionHookRegFns();var a=this._hookBuilder.buildHooksForPhase(t.TransitionHookPhase.CREATE);Xt.invokeHooks(a,function(){return null}),this.applyViewConfigs(r)}return e.prototype.onBefore=function(t,e,n){},e.prototype.onStart=function(t,e,n){},e.prototype.onExit=function(t,e,n){},e.prototype.onRetain=function(t,e,n){},e.prototype.onEnter=function(t,e,n){},e.prototype.onFinish=function(t,e,n){},e.prototype.onSuccess=function(t,e,n){},e.prototype.onError=function(t,e,n){},e.prototype.createTransitionHookRegFns=function(){var e=this;this.router.transitionService._pluginapi._getEvents().filter(function(e){return e.hookPhase!==t.TransitionHookPhase.CREATE}).forEach(function(t){return ne(e,e.router.transitionService,t)})},e.prototype.getHooks=function(t){return this._registeredHooks[t]},e.prototype.applyViewConfigs=function(t){var e=this._treeChanges.entering.map(function(t){return t.state});le.applyViewConfigs(t.transitionService.$view,this._treeChanges.to,e)},e.prototype.$from=function(){return At(this._treeChanges.from).state},e.prototype.$to=function(){return At(this._treeChanges.to).state},e.prototype.from=function(){return this.$from().self},e.prototype.to=function(){return this.$to().self},e.prototype.targetState=function(){return this._targetState},e.prototype.is=function(t){return t instanceof e?this.is({to:t.$to().name,from:t.$from().name}):!(t.to&&!te(this.$to(),t.to)||t.from&&!te(this.$from(),t.from))},e.prototype.params=function(t){return void 0===t&&(t="to"),Object.freeze(this._treeChanges[t].map(s("paramValues")).reduce(ot,{}))},e.prototype.injector=function(t,e){void 0===e&&(e="to");var n=this._treeChanges[e];return t&&(n=le.subPath(n,function(e){return e.state===t||e.state.name===t})),new ge(n).injector()},e.prototype.getResolveTokens=function(t){return void 0===t&&(t="to"),new ge(this._treeChanges[t]).getTokens()},e.prototype.addResolvable=function(t,e){void 0===e&&(e=""),t=v(pe)(t)?t:new pe(t);var n="string"==typeof e?e:e.name,r=this._treeChanges.to,i=ft(r,function(t){return t.state.name===n});new ge(r).addResolvables([t],i.state)},e.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},e.prototype.originalTransition=function(){var t=this.redirectedFrom();return t&&t.originalTransition()||this},e.prototype.options=function(){return this._options},e.prototype.entering=function(){return ht(this._treeChanges.entering,s("state")).map(we)},e.prototype.exiting=function(){return ht(this._treeChanges.exiting,s("state")).map(we).reverse()},e.prototype.retained=function(){return ht(this._treeChanges.retained,s("state")).map(we)},e.prototype.views=function(t,e){void 0===t&&(t="entering");var n=this._treeChanges[t];return(n=e?n.filter(u("state",e)):n).map(s("views")).filter(G).reduce($t,[])},e.prototype.treeChanges=function(t){return t?this._treeChanges[t]:this._treeChanges},e.prototype.redirect=function(t){for(var e=1,n=this;null!=(n=n.redirectedFrom());)if(++e>20)throw new Error("Too many consecutive Transition redirects (20+)");var r={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==t.options().location&&(r.location="replace");var i=z({},this.options(),t.options(),r);t=t.withOptions(i,!0);var o,a=this.router.transitionService.create(this._treeChanges.from,t),s=this._treeChanges.entering,u=a._treeChanges.entering;return le.matching(u,s,le.nonDynamicParams).filter(l((o=t.options().reloadState,function(t){return o&&t.state.includes[o.name]}))).forEach(function(t,e){t.resolvables=s[e].resolvables}),a},e.prototype._changedParams=function(){var t=this._treeChanges;if(!this._options.reload&&(!t.exiting.length&&!t.entering.length&&t.to.length===t.from.length&&!kt(t.to,t.from).map(function(t){return t[0].state!==t[1].state}).reduce(mt,!1))){var e=t.to.map(function(t){return t.paramSchema}),n=[t.to,t.from].map(function(t){return t.map(function(t){return t.paramValues})});return kt(e,n[0],n[1]).map(function(t){var e=t[0],n=t[1],r=t[2];return ue.changed(e,n,r)}).reduce($t,[])}},e.prototype.dynamic=function(){var t=this._changedParams();return!!t&&t.map(function(t){return t.dynamic}).reduce(mt,!1)},e.prototype.ignored=function(){return!!this._ignoredReason()},e.prototype._ignoredReason=function(){var t=this.router.globals.transition,e=this._options.reloadState,n=function(t,n){if(t.length!==n.length)return!1;var r=le.matching(t,n);return t.length===r.filter(function(t){return!e||!t.state.includes[e.name]}).length},r=this.treeChanges(),i=t&&t.treeChanges();return i&&n(i.to,r.to)&&n(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&n(r.from,r.to)?"SameAsCurrent":void 0},e.prototype.run=function(){var e=this,n=Xt.runAllHooks,r=function(t){return e._hookBuilder.buildHooksForPhase(t)},i=r(t.TransitionHookPhase.BEFORE);return Xt.invokeHooks(i,function(){var t=e.router.globals;return t.lastStartedTransitionId=e.$id,t.transition=e,t.transitionHistory.enqueue(e),Zt.traceTransitionStart(e),U.$q.when(void 0)}).then(function(){var e=r(t.TransitionHookPhase.RUN);return Xt.invokeHooks(e,function(){return U.$q.when(void 0)})}).then(function(){Zt.traceSuccess(e.$to(),e),e.success=!0,e._deferred.resolve(e.to()),n(r(t.TransitionHookPhase.SUCCESS))},function(i){Zt.traceError(i,e),e.success=!1,e._deferred.reject(i),e._error=i,n(r(t.TransitionHookPhase.ERROR))}),this.promise},e.prototype.valid=function(){return!this.error()||void 0!==this.success},e.prototype.abort=function(){x(this.success)&&(this._aborted=!0)},e.prototype.error=function(){var t=this.$to();if(t.self.abstract)return"Cannot transition to abstract state '"+t.name+"'";var e=t.parameters(),n=this.params(),r=e.filter(function(t){return!t.validates(n[t.id])});return r.length?"Param values not valid for state '"+t.name+"'. Invalid params: [ "+r.map(function(t){return t.id}).join(", ")+" ]":!1===this.success?this._error:void 0},e.prototype.toString=function(){var t=this.from(),e=this.to(),n=function(t){return null!==t["#"]&&void 0!==t["#"]?t:ut(t,["#"])};return"Transition#"+this.$id+"( '"+(R(t)?t.name:t)+"'"+Ae(n(this._treeChanges.from.map(s("paramValues")).reduce(ot,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(R(e)?e.name:e)+"'"+Ae(n(this.params()))+" )"},e.diToken=e,e}();function Se(t,e){return e.length<=t?e:e.substr(0,t-3)+"..."}function Ee(t,e){for(;e.length<t;)e+=" ";return e}function xe(t){return t.replace(/^([A-Z])/,function(t){return t.toLowerCase()}).replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function Ce(t){var e=_e(t),n=e.match(/^(function [^ ]+\([^)]*\))/),r=n?n[1]:e,i=t.name||"";return i&&r.match(/function \(/)?"function "+i+r.substr(9):r}function _e(t){var e=P(t)?t.slice(-1)[0]:t;return e&&e.toString()||"undefined"}var ke=null,Te=function(t){var e=Dt.isRejectionPromise;return(ke=ke||y([[l(C),$("undefined")],[_,$("null")],[N,$("[Promise]")],[e,function(t){return t._transitionRejection.toString()}],[v(Dt),g("toString")],[v(be),g("toString")],[v(pe),g("toString")],[M,Ce],[$(!0),G]]))(t)};function Ae(t){var e=[];return JSON.stringify(t,function(t,n){return function(t){if(R(t)){if(-1!==e.indexOf(t))return"[circular ref]";e.push(t)}return Te(t)}(n)}).replace(/\\"/g,'"')}var Oe=function(t){return function(e){if(!e)return["",""];var n=e.indexOf(t);return-1===n?[e,""]:[e.substr(0,n),e.substr(n+1)]}},Re=new RegExp("^(?:[a-z]+:)?//[^/]+/"),Pe=function(t){return t.replace(/\/[^/]*$/,"")},Ve=Oe("#"),Ie=Oe("?"),je=Oe("="),Me=function(t){return t?t.replace(/^#/,""):""};function Ne(t){var e=new RegExp("("+t+")","g");return function(t){return t.split(e).filter(G)}}function De(t,e){return O(At(t))&&O(e)?t.slice(0,-1).concat(At(t)+e):yt(t,e)}var Ue,He=function(){function t(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=st(t.prototype,["hash","string","query","path","int","bool","date","json","any"]);this.types=Z(ht(this.defaultTypes,function(t,e){return new ie(z({name:e},t))}),{})}return t.prototype.dispose=function(){this.types={}},t.prototype.type=function(t,e,n){if(!C(e))return this.types[t];if(this.types.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return this.types[t]=new ie(z({name:t},e)),n&&(this.typeQueue.push({name:t,def:n}),this.enqueue||this._flushTypeQueue()),this},t.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var t=this.typeQueue.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");z(this.types[t.name],U.$injector.invoke(t.def))}},t}();Ue=function(t){var e=function(t){return null!=t?t.toString():t},n={encode:e,decode:e,is:v(String),pattern:/.*/,equals:function(t,e){return t==e}};return z({},n,t)},z(He.prototype,{string:Ue({}),path:Ue({pattern:/[^/]*/}),query:Ue({}),hash:Ue({inherit:!1}),int:Ue({decode:function(t){return parseInt(t,10)},is:function(t){return!k(t)&&this.decode(t.toString())===t},pattern:/-?\d+/}),bool:Ue({encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:v(Boolean),pattern:/0|1/}),date:Ue({encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):void 0},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):void 0},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return["getFullYear","getMonth","getDate"].reduce(function(n,r){return n&&t[r]()===e[r]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:Ue({encode:L,decode:F,is:v(Object),equals:W,pattern:/[^/]*/}),any:Ue({encode:G,decode:G,is:function(){return!0},equals:W})});var qe=function(){function t(t){void 0===t&&(t={}),z(this,t)}return t.prototype.$inherit=function(t,e,n){var r,i=at(e,n),o={},a=[];for(var s in i)if(i[s]&&i[s].params&&(r=Object.keys(i[s].params)).length)for(var u in r)a.indexOf(r[u])>=0||(a.push(r[u]),o[r[u]]=this[r[u]]);return z({},o,t)},t}();function Fe(t){return t.name}function Le(t){return t.self.$$state=function(){return t},t.self}function Be(t){return t.parent&&t.parent.data&&(t.data=t.self.data=Z(t.parent.data,t.data)),t.data}var ze=function(t,e){return function(n){var r=n;r&&r.url&&r.name&&r.name.match(/\.\*\*$/)&&(r.url+="{remainder:any}");var i=function(t){if(!O(t))return!1;var e="^"===t.charAt(0);return{val:e?t.substring(1):t,root:e}}(r.url),o=n.parent,a=i?t.compile(i.val,{params:n.params||{},paramMap:function(t,e){return!1===r.reloadOnSearch&&e&&(t=z(t||{},{dynamic:!0})),t}}):r.url;if(!a)return null;if(!t.isMatcher(a))throw new Error("Invalid url '"+a+"' in state '"+n+"'");return i&&i.root?a:(o&&o.navigable||e()).url.append(a)}},We=function(t){return function(e){return!t(e)&&e.url?e:e.parent?e.parent.navigable:null}},Ge=function(t){return function(e){var n=e.url&&e.url.parameters({inherit:!1})||[],r=dt(pt(ut(e.params||{},n.map(s("id"))),function(e,n){return t.fromConfig(n,null,e)}));return n.concat(r).map(function(t){return[t.id,t]}).reduce(Tt,{})}};function Je(t){return t.parent?t.parent.path.concat(t):[t]}function Ke(t){var e=t.parent?z({},t.parent.includes):{};return e[t.name]=!0,e}function Ze(t){var e,n,r=function(t){return t.provide||t.token},i=y([[s("resolveFn"),function(t){return new pe(r(t),t.resolveFn,t.deps,t.policy)}],[s("useFactory"),function(t){return new pe(r(t),t.useFactory,t.deps||t.dependencies,t.policy)}],[s("useClass"),function(t){return new pe(r(t),function(){return new t.useClass},[],t.policy)}],[s("useValue"),function(t){return new pe(r(t),function(){return t.useValue},[],t.policy,t.useValue)}],[s("useExisting"),function(t){return new pe(r(t),G,[t.useExisting],t.policy)}]]),o=y([[a(s("val"),O),function(t){return new pe(t.token,G,[t.val],t.policy)}],[a(s("val"),P),function(t){return new pe(t.token,At(t.val),t.val.slice(0,-1),t.policy)}],[a(s("val"),T),function(t){return new pe(t.token,t.val,(e=t.val,n=U.$injector,e.$inject||n&&n.annotate(e,n.strictDi)||"deferred"),t.policy);var e,n}]]),u=y([[v(pe),function(t){return t}],[function(t){return!(!t.token||!t.resolveFn)},i],[function(t){return!(!t.provide&&!t.token||!(t.useValue||t.useFactory||t.useExisting||t.useClass))},i],[function(t){return!!(t&&t.val&&(O(t.val)||P(t.val)||T(t.val)))},o],[$(!0),function(t){throw new Error("Invalid resolve value: "+Ae(t))}]]),c=t.resolve;return(P(c)?c:(e=c,n=t.resolvePolicy||{},Object.keys(e||{}).map(function(t){return{token:t,val:e[t],deps:void 0,policy:n[t]}}))).map(u)}var Ye=function(){function t(t,e){this.matcher=t;var n=this,r=function(){return t.find("")},i=function(t){return""===t.name};this.builders={name:[Fe],self:[Le],parent:[function(e){return i(e)?null:t.find(n.parentName(e))||r()}],data:[Be],url:[ze(e,r)],navigable:[We(i)],params:[Ge(e.paramFactory)],views:[],path:[Je],includes:[Ke],resolvables:[Ze]}}return t.prototype.builder=function(t,e){var n=this.builders,r=n[t]||[];return O(t)&&!C(e)?r.length>1?r:r[0]:O(t)&&T(e)?(n[t]=r,n[t].push(e),function(){return n[t].splice(n[t].indexOf(e,1))&&null}):void 0},t.prototype.build=function(t){var e=this.matcher,n=this.builders,r=this.parentName(t);if(r&&!e.find(r,void 0,!1))return null;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i].reduce(function(t,e){return function(n){return e(n,t)}},J);t[i]=o(t)}return t},t.prototype.parentName=function(t){var e=t.name||"",n=e.split(".");if("**"===n.pop()&&n.pop(),n.length){if(t.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+e+")");return n.join(".")}return t.parent?O(t.parent)?t.parent:t.parent.name:""},t.prototype.name=function(t){var e=t.name;if(-1!==e.indexOf(".")||!t.parent)return e;var n=O(t.parent)?t.parent:t.parent.name;return n?n+"."+e:e},t}(),Qe=function(){function t(t){this._states=t}return t.prototype.isRelative=function(t){return 0===(t=t||"").indexOf(".")||0===t.indexOf("^")},t.prototype.find=function(t,e,n){if(void 0===n&&(n=!0),t||""===t){var r=O(t),i=r?t:t.name;this.isRelative(i)&&(i=this.resolvePath(i,e));var o=this._states[i];if(o&&(r||!(r||o!==t&&o.self!==t)))return o;if(r&&n){var a=dt(this._states).filter(function(t){return t.__stateObjectCache.nameGlob&&t.__stateObjectCache.nameGlob.matches(i)});return a.length>1&&console.log("stateMatcher.find: Found multiple matches for "+i+" using glob: ",a.map(function(t){return t.name})),a[0]}}},t.prototype.resolvePath=function(t,e){if(!e)throw new Error("No reference point given for path '"+t+"'");for(var n=this.find(e),r=t.split("."),i=r.length,o=0,a=n;o<i;o++)if(""!==r[o]||0!==o){if("^"!==r[o])break;if(!a.parent)throw new Error("Path '"+t+"' not valid for state '"+n.name+"'");a=a.parent}else a=n;var s=r.slice(o).join(".");return a.name+(a.name&&s?".":"")+s},t}(),Xe=function(){function t(t,e,n,r,i){this.$registry=t,this.$urlRouter=e,this.states=n,this.builder=r,this.listeners=i,this.queue=[],this.matcher=t.matcher}return t.prototype.dispose=function(){this.queue=[]},t.prototype.register=function(t){var e=this.queue,n=b.create(t),r=n.name;if(!O(r))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(r)||Y(e.map(s("name")),r))throw new Error("State '"+r+"' is already defined");return e.push(n),this.flush(),n},t.prototype.flush=function(){for(var t=this,e=this.queue,n=this.states,r=this.builder,i=[],o=[],a={},s=function(e){return t.states.hasOwnProperty(e)&&t.states[e]};e.length>0;){var u=e.shift(),c=u.name,l=r.build(u),f=o.indexOf(u);if(l){var p=s(c);if(p&&p.name===c)throw new Error("State '"+c+"' is already defined");var h=s(c+".**");h&&this.$registry.deregister(h),n[c]=u,this.attachRoute(u),f>=0&&o.splice(f,1),i.push(u)}else{var d=a[c];if(a[c]=e.length,f>=0&&d===e.length)return e.push(u),n;f<0&&o.push(u),e.push(u)}}return i.length&&this.listeners.forEach(function(t){return t("registered",i.map(function(t){return t.self}))}),n},t.prototype.attachRoute=function(t){!t.abstract&&t.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(t))},t}(),tn=function(){function t(t){this._router=t,this.states={},this.listeners=[],this.matcher=new Qe(this.states),this.builder=new Ye(this.matcher,t.urlMatcherFactory),this.stateQueue=new Xe(this,t.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return t.prototype._registerRoot=function(){(this._root=this.stateQueue.register({name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0})).navigable=null},t.prototype.dispose=function(){var t=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(e){return t.get(e)&&t.deregister(e)})},t.prototype.onStatesChanged=function(t){return this.listeners.push(t),function(){X(this.listeners)(t)}.bind(this)},t.prototype.root=function(){return this._root},t.prototype.register=function(t){return this.stateQueue.register(t)},t.prototype._deregisterTree=function(t){var e=this,n=this.get().map(function(t){return t.$$state()}),r=function(t){var e=n.filter(function(e){return-1!==t.indexOf(e.parent)});return 0===e.length?e:e.concat(r(e))},i=r([t]),o=[t].concat(i).reverse();return o.forEach(function(t){var n=e._router.urlRouter;n.rules().filter(u("state",t)).forEach(n.removeRule.bind(n)),delete e.states[t.name]}),o},t.prototype.deregister=function(t){var e=this.get(t);if(!e)throw new Error("Can't deregister state; not found: "+t);var n=this._deregisterTree(e.$$state());return this.listeners.forEach(function(t){return t("deregistered",n.map(function(t){return t.self}))}),n},t.prototype.get=function(t,e){var n=this;if(0===arguments.length)return Object.keys(this.states).map(function(t){return n.states[t].self});var r=this.matcher.find(t,e);return r&&r.self||null},t.prototype.decorator=function(t,e){return this.builder.builder(t,e)},t}();function en(t,e){var n=["",""],r=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return r;switch(e.squash){case!1:n=["(",")"+(e.isOptional?"?":"")];break;case!0:r=r.replace(/\/$/,""),n=["(?:/(",")|/)?"];break;default:n=["("+e.squash+"|",")?"]}return r+n[0]+e.type.pattern.source+n[1]}var nn=Ne("/"),rn=function(){function e(t,n,r,i){var o=this;this.config=i,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=t,this.config=it(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:G});for(var a,s,c,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,p=[],h=0,d=function(n){if(!e.nameValidator.test(n))throw new Error("Invalid parameter name '"+n+"' in pattern '"+t+"'");if(ft(o._params,u("id",n)))throw new Error("Duplicate parameter name '"+n+"' in pattern '"+t+"'")},v=function(e,r){var i,a=e[2]||e[3],s=r?e[4]:e[4]||("*"===e[1]?"[\\s\\S]*":null);return{id:a,regexp:s,cfg:o.config.params[a],segment:t.substring(h,e.index),type:s?n.type(s)||(i=s,Z(n.type(r?"query":"path"),{pattern:new RegExp(i,o.config.caseInsensitive?"i":void 0)})):null}};(a=l.exec(t))&&!((s=v(a,!1)).segment.indexOf("?")>=0);)d(s.id),this._params.push(r.fromPath(s.id,s.type,this.config.paramMap(s.cfg,!1))),this._segments.push(s.segment),p.push([s.segment,At(this._params)]),h=l.lastIndex;var m=(c=t.substring(h)).indexOf("?");if(m>=0){var $=c.substring(m);if(c=c.substring(0,m),$.length>0)for(h=0;a=f.exec($);)d((s=v(a,!0)).id),this._params.push(r.fromSearch(s.id,s.type,this.config.paramMap(s.cfg,!0))),h=l.lastIndex}this._segments.push(c),this._compiled=p.map(function(t){return en.apply(null,t)}).concat(en(c))}return e.encodeDashes=function(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})},e.pathSegmentsAndParams=function(e){return kt(e._segments,e._params.filter(function(e){return e.location===t.DefType.PATH}).concat(void 0)).reduce($t,[]).filter(function(t){return""!==t&&C(t)})},e.queryParams=function(e){return e._params.filter(function(e){return e.location===t.DefType.SEARCH})},e.compare=function(t,n){var r=function(t){return t._cache.weights=t._cache.weights||(n=t,n._cache.segments=n._cache.segments||n._cache.path.map(e.pathSegmentsAndParams).reduce($t,[]).reduce(De,[]).map(function(t){return O(t)?nn(t):t}).reduce($t,[])).map(function(t){return"/"===t?1:O(t)?2:t instanceof ue?3:void 0});var n},i=r(t),o=r(n);!function(t,e,n){for(var r=Math.max(t.length,e.length);t.length<r;)t.push(n);for(;e.length<r;)e.push(n)}(i,o,0);var a,s,u=kt(i,o);for(s=0;s<u.length;s++)if(0!==(a=u[s][0]-u[s][1]))return a;return 0},e.prototype.append=function(t){return this._children.push(t),t._cache={path:this._cache.path.concat(t),parent:this,pattern:null},t},e.prototype.isRoot=function(){return this._cache.path[0]===this},e.prototype.toString=function(){return this.pattern},e.prototype.exec=function(t,e,n,r){var i=this;void 0===e&&(e={}),void 0===r&&(r={});var o,a,u,c=(o=this._cache,a="pattern",u=function(){return new RegExp(["^",bt(i._cache.path.map(s("_compiled"))).join(""),!1===i.config.strict?"/?":"","$"].join(""),i.config.caseInsensitive?"i":void 0)},o[a]=o[a]||u()).exec(t);if(!c)return null;var l,f=this.parameters(),p=f.filter(function(t){return!t.isSearch()}),h=f.filter(function(t){return t.isSearch()}),d=this._cache.path.map(function(t){return t._segments.length-1}).reduce(function(t,e){return t+e}),v={};if(d!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var m=0;m<d;m++){for(var $=p[m],g=c[m+1],y=0;y<$.replace.length;y++)$.replace[y].from===g&&(g=$.replace[y].to);g&&!0===$.array&&(void 0,g=ht(ht((l=function(t){return t.split("").reverse().join("")})(g).split(/-(?!\\)/),l),function(t){return t.replace(/\\-/g,"-")}).reverse()),C(g)&&(g=$.type.decode(g)),v[$.id]=$.value(g)}return h.forEach(function(t){for(var n=e[t.id],r=0;r<t.replace.length;r++)t.replace[r].from===n&&(n=t.replace[r].to);C(n)&&(n=t.type.decode(n)),v[t.id]=t.value(n)}),n&&(v["#"]=n),v},e.prototype.parameters=function(t){return void 0===t&&(t={}),!1===t.inherit?this._params:bt(this._cache.path.map(function(t){return t._params}))},e.prototype.parameter=function(t,e){var n=this;void 0===e&&(e={});var r=this._cache.parent;return function(){for(var e=0,r=n._params;e<r.length;e++){var i=r[e];if(i.id===t)return i}}()||!1!==e.inherit&&r&&r.parameter(t,e)||null},e.prototype.validates=function(t){return t=t||{},this.parameters().filter(function(e){return t.hasOwnProperty(e.id)}).map(function(e){return n=e,r=t[e.id],!n||n.validates(r);var n,r}).reduce(vt,!0)},e.prototype.format=function(t){void 0===t&&(t={});var n=this._cache.path,r=n.map(e.pathSegmentsAndParams).reduce($t,[]).map(function(t){return O(t)?t:o(t)}),i=n.map(e.queryParams).reduce($t,[]).map(o);if(r.concat(i).filter(function(t){return!1===t.isValid}).length)return null;function o(e){var n=e.value(t[e.id]),r=e.validates(n),i=e.isDefaultValue(n);return{param:e,value:n,isValid:r,isDefaultValue:i,squash:!!i&&e.squash,encoded:e.type.encode(n)}}var a=r.reduce(function(t,n){if(O(n))return t+n;var r=n.squash,i=n.encoded,o=n.param;return!0===r?t.match(/\/$/)?t.slice(0,-1):t:O(r)?t+r:!1!==r?t:null==i?t:P(i)?t+ht(i,e.encodeDashes).join("-"):o.raw?t+i:t+encodeURIComponent(i)},""),s=i.map(function(t){var e=t.param,n=t.squash,r=t.encoded,i=t.isDefaultValue;if(!(null==r||i&&!1!==n)&&(P(r)||(r=[r]),0!==r.length))return e.raw||(r=ht(r,encodeURIComponent)),r.map(function(t){return e.id+"="+t})}).filter(G).reduce($t,[]).join("&");return a+(s?"?"+s:"")+(t["#"]?"#"+t["#"]:"")},e.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,e}(),on=function(){function e(){var e=this;this.paramTypes=new He,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.paramFactory={fromConfig:function(n,r,i){return new ue(n,r,i,t.DefType.CONFIG,e)},fromPath:function(n,r,i){return new ue(n,r,i,t.DefType.PATH,e)},fromSearch:function(n,r,i){return new ue(n,r,i,t.DefType.SEARCH,e)}},this._getConfig=function(t){return z({strict:e._isStrictMode,caseInsensitive:e._isCaseInsensitive},t)},z(this,{UrlMatcher:rn,Param:ue})}return e.prototype.caseInsensitive=function(t){return this._isCaseInsensitive=C(t)?t:this._isCaseInsensitive},e.prototype.strictMode=function(t){return this._isStrictMode=C(t)?t:this._isStrictMode},e.prototype.defaultSquashPolicy=function(t){if(C(t)&&!0!==t&&!1!==t&&!O(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=C(t)?t:this._defaultSquashPolicy},e.prototype.compile=function(t,e){return new rn(t,this.paramTypes,this.paramFactory,this._getConfig(e))},e.prototype.isMatcher=function(t){if(!R(t))return!1;var e=!0;return B(rn.prototype,function(n,r){T(n)&&(e=e&&C(t[r])&&T(t[r]))}),e},e.prototype.type=function(t,e,n){var r=this.paramTypes.type(t,e,n);return C(e)?this:r},e.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},e.prototype.dispose=function(){this.paramTypes.dispose()},e}(),an=function(){function t(t){this.router=t}return t.prototype.compile=function(t){return this.router.urlMatcherFactory.compile(t)},t.prototype.create=function(t,e){var n=this,r=y([[O,function(t){return r(n.compile(t))}],[v(rn),function(t){return n.fromUrlMatcher(t,e)}],[j,function(t){return n.fromState(t,n.router)}],[v(RegExp),function(t){return n.fromRegExp(t,e)}],[T,function(t){return new sn(t,e)}]]),i=r(t);if(!i)throw new Error("invalid 'what' in when()");return i},t.prototype.fromUrlMatcher=function(t,e){var n=e;O(e)&&(e=this.router.urlMatcherFactory.compile(e)),v(rn)(e)&&(n=function(t){return e.format(t)});var r={urlMatcher:t,matchPriority:function(e){var n=t.parameters().filter(function(t){return t.isOptional});return n.length?n.filter(function(t){return e[t.id]}).length/n.length:1e-6},type:"URLMATCHER"};return z(new sn(function(e){var n=t.exec(e.path,e.search,e.hash);return t.validates(n)&&n},n),r)},t.prototype.fromState=function(t,e){var n={state:t,type:"STATE"};return z(this.fromUrlMatcher(t.url,function(n){var r=e.stateService,i=e.globals;r.href(t,n)!==r.href(i.current,i.params)&&r.transitionTo(t,n,{inherit:!0,source:"url"})}),n)},t.prototype.fromRegExp=function(t,e){if(t.global||t.sticky)throw new Error("Rule RegExp must not be global or sticky");var n=O(e)?function(t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}:e,r={regexp:t,type:"REGEXP"};return z(new sn(function(e){return t.exec(e.path)},n),r)},t.isUrlRule=function(t){return t&&["type","match","handler"].every(function(e){return C(t[e])})},t}(),sn=function(){return function(t,e){var n=this;this.match=t,this.type="RAW",this.matchPriority=function(t){return 0-n.$id},this.handler=e||G}}();var un;un=function(t,e){var n,r,i,o,a,s,u,c,l=(n=t,(e.priority||0)-(n.priority||0));return 0!==l?l:(r=e,0!==(l=((i={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1})[t.type]||0)-(i[r.type]||0))?l:(a=e,0!==(l=(o=t).urlMatcher&&a.urlMatcher?rn.compare(o.urlMatcher,a.urlMatcher):0)?l:(u=e,(c={STATE:!0,URLMATCHER:!0})[(s=t).type]&&c[u.type]?0:(s.$id||0)-(u.$id||0))))};var cn=function(){function t(e){this._sortFn=un,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=e,this.urlRuleFactory=new an(e),K($(t.prototype),this,$(this))}return t.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},t.prototype.sort=function(t){this._rules=this.stableSort(this._rules,this._sortFn=t||this._sortFn),this._sorted=!0},t.prototype.ensureSorted=function(){this._sorted||this.sort()},t.prototype.stableSort=function(t,e){var n=t.map(function(t,e){return{elem:t,idx:e}});return n.sort(function(t,n){var r=e(t.elem,n.elem);return 0===r?t.idx-n.idx:r}),n.map(function(t){return t.elem})},t.prototype.match=function(t){var e=this;this.ensureSorted(),t=z({path:"",search:{},hash:""},t);var n=this.rules();this._otherwiseFn&&n.push(this._otherwiseFn);for(var r,i,o,a=0;a<n.length&&(!r||0===this._sortFn(n[a],r.rule));a++){var s=(i=n[a],void 0,(o=i.match(t,e._router))&&{match:o,rule:i,weight:i.matchPriority(o)});r=!r||s&&s.weight>r.weight?s:r}return r},t.prototype.sync=function(t){if(!t||!t.defaultPrevented){var e=this._router,n=e.urlService,r=e.stateService,i={path:n.path(),search:n.search(),hash:n.hash()},o=this.match(i);y([[O,function(t){return n.url(t,!0)}],[Yt.isDef,function(t){return r.go(t.state,t.params,t.options)}],[v(Yt),function(t){return r.go(t.state(),t.params(),t.options())}]])(o&&o.rule.handler(o.match,i,e))}},t.prototype.listen=function(t){var e=this;if(!1!==t)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(t){return e.sync(t)});this._stopFn&&this._stopFn(),delete this._stopFn},t.prototype.update=function(t){var e=this._router.locationService;t?this.location=e.url():e.url()!==this.location&&e.url(this.location,!0)},t.prototype.push=function(t,e,n){var r=n&&!!n.replace;this._router.urlService.url(t.format(e||{}),r)},t.prototype.href=function(t,e,n){var r=t.format(e);if(null==r)return null;n=n||{absolute:!1};var i,o,a,s,u=this._router.urlService.config,c=u.html5Mode();if(c||null===r||(r="#"+u.hashPrefix()+r),i=r,o=c,a=n.absolute,r="/"===(s=u.baseHref())?i:o?Pe(s)+i:a?s.slice(1)+i:i,!n.absolute||!r)return r;var l=!c&&r?"/":"",f=u.port(),p=80===f||443===f?"":":"+f;return[u.protocol(),"://",u.host(),p,l,r].join("")},t.prototype.rule=function(t){var e=this;if(!an.isUrlRule(t))throw new Error("invalid rule");return t.$id=this._id++,t.priority=t.priority||0,this._rules.push(t),this._sorted=!1,function(){return e.removeRule(t)}},t.prototype.removeRule=function(t){X(this._rules,t)},t.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},t.prototype.otherwise=function(t){var e=ln(t);this._otherwiseFn=this.urlRuleFactory.create($(!0),e),this._sorted=!1},t.prototype.initial=function(t){var e=ln(t);this.rule(this.urlRuleFactory.create(function(t,e){return 0===e.globals.transitionHistory.size()&&!!/^\/?$/.exec(t.path)},e))},t.prototype.when=function(t,e,n){var r=this.urlRuleFactory.create(t,e);return C(n&&n.priority)&&(r.priority=n.priority),this.rule(r),r},t.prototype.deferIntercept=function(t){void 0===t&&(t=!0),this.interceptDeferred=t},t}();function ln(t){if(!(T(t)||O(t)||v(Yt)(t)||Yt.isDef(t)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return T(t)?t:$(t)}var fn=function(){function t(){var t=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return t._uiViews},_activeViewConfigs:function(){return t._viewConfigs},_onSync:function(e){return t._listeners.push(e),function(){return X(t._listeners,e)}}}}return t.normalizeUIViewTarget=function(t,e){void 0===e&&(e="");var n=e.split("@"),r=n[0]||"$default",i=O(n[1])?n[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(r);o&&(i=o[1],r=o[2]),"!"===r.charAt(0)&&(r=r.substr(1),i="");/^(\^(?:\.\^)*)$/.exec(i)?i=i.split(".").reduce(function(t,e){return t.parent},t).name:"."===i&&(i=t.name);return{uiViewName:r,uiViewContextAnchor:i}},t.prototype._rootViewContext=function(t){return this._rootContext=t||this._rootContext},t.prototype._viewConfigFactory=function(t,e){this._viewConfigFactories[t]=e},t.prototype.createViewConfig=function(t,e){var n=this._viewConfigFactories[e.$type];if(!n)throw new Error("ViewService: No view config factory registered for type "+e.$type);var r=n(t,e);return P(r)?r:[r]},t.prototype.deactivateViewConfig=function(t){Zt.traceViewServiceEvent("<- Removing",t),X(this._viewConfigs,t)},t.prototype.activateViewConfig=function(t){Zt.traceViewServiceEvent("-> Registering",t),this._viewConfigs.push(t)},t.prototype.sync=function(){var e=this,n=this._uiViews.map(function(t){return[t.fqn,t]}).reduce(Tt,{});function r(t){for(var e=t.viewDecl.$context,n=0;++n&&e.parent;)e=e.parent;return n}var o=i(function(t,e,n,r){return e*(t(n)-t(r))}),a=this._uiViews.sort(o(function(t){var e=function(t){return t&&t.parent?e(t.parent)+1:1};return 1e4*t.fqn.split(".").length+e(t.creationContext)},1)).map(function(i){var a=e._viewConfigs.filter(t.matches(n,i));return a.length>1&&a.sort(o(r,-1)),{uiView:i,viewConfig:a[0]}}),s=a.map(function(t){return t.viewConfig}),u=this._viewConfigs.filter(function(t){return!Y(s,t)}).map(function(t){return{uiView:void 0,viewConfig:t}});a.forEach(function(t){-1!==e._uiViews.indexOf(t.uiView)&&t.uiView.configUpdated(t.viewConfig)});var c=a.concat(u);this._listeners.forEach(function(t){return t(c)}),Zt.traceViewSync(c)},t.prototype.registerUIView=function(t){Zt.traceViewServiceUIViewEvent("-> Registering",t);var e=this._uiViews;return e.filter(function(e){return e.fqn===t.fqn&&e.$type===t.$type}).length&&Zt.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",t),e.push(t),this.sync(),function(){-1!==e.indexOf(t)?(Zt.traceViewServiceUIViewEvent("<- Deregistering",t),X(e)(t)):Zt.traceViewServiceUIViewEvent("Tried removing non-registered uiView",t)}},t.prototype.available=function(){return this._uiViews.map(s("fqn"))},t.prototype.active=function(){return this._uiViews.filter(s("$config")).map(s("name"))},t.matches=function(t,e){return function(n){if(e.$type!==n.viewDecl.$type)return!1;var r=n.viewDecl,i=r.$uiViewName.split("."),o=e.fqn.split(".");if(!W(i,o.slice(0-i.length)))return!1;var a=1-i.length||void 0,s=o.slice(0,a).join("."),u=t[s].creationContext;return r.$uiViewContextAnchor===(u&&u.name)}},t}(),pn=function(){function t(){this.params=new qe,this.lastStartedTransitionId=-1,this.transitionHistory=new Mt([],1),this.successfulTransitions=new Mt([],1)}return t.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},t}(),hn=function(t){return t.reduce(function(t,e){return t[e]=D(e),t},{dispose:J})},dn=["url","path","search","hash","onChange"],vn=["port","protocol","host","baseHref","html5Mode","hashPrefix"],mn=["type","caseInsensitive","strictMode","defaultSquashPolicy"],$n=["sort","when","initial","otherwise","rules","rule","removeRule"],gn=["deferIntercept","listen","sync","match"],yn=function(){function t(t,e){void 0===e&&(e=!0),this.router=t,this.rules={},this.config={};var n=function(){return t.locationService};K(n,this,n,dn,e);var r=function(){return t.locationConfig};K(r,this.config,r,vn,e);var i=function(){return t.urlMatcherFactory};K(i,this.config,i,mn);var o=function(){return t.urlRouter};K(o,this.rules,o,$n),K(o,this,o,gn)}return t.prototype.url=function(t,e,n){},t.prototype.path=function(){},t.prototype.search=function(){},t.prototype.hash=function(){},t.prototype.onChange=function(t){},t.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},t.prototype.dispose=function(){},t.prototype.sync=function(t){},t.prototype.listen=function(t){},t.prototype.deferIntercept=function(t){},t.prototype.match=function(t){},t.locationServiceStub=hn(dn),t.locationConfigStub=hn(vn),t}(),wn=0,bn=function(){function t(t,e){void 0===t&&(t=yn.locationServiceStub),void 0===e&&(e=yn.locationConfigStub),this.locationService=t,this.locationConfig=e,this.$id=wn++,this._disposed=!1,this._disposables=[],this.trace=Zt,this.viewService=new fn,this.globals=new pn,this.transitionService=new Ln(this),this.urlMatcherFactory=new on,this.urlRouter=new cn(this),this.stateRegistry=new tn(this),this.stateService=new Bn(this),this.urlService=new yn(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(t),this.disposable(e)}return t.prototype.disposable=function(t){this._disposables.push(t)},t.prototype.dispose=function(t){var e=this;t&&T(t.dispose)?t.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(t){try{"function"==typeof t.dispose&&t.dispose(e),X(e._disposables,t)}catch(t){}}))},t.prototype.plugin=function(t,e){void 0===e&&(e={});var n=new t(this,e);if(!n.name)throw new Error("Required property `name` missing on plugin: "+n);return this._disposables.push(n),this._plugins[n.name]=n},t.prototype.getPlugin=function(t){return t?this._plugins[t]:dt(this._plugins)},t}();function Sn(t){t.addResolvable(pe.fromData(bn,t.router),""),t.addResolvable(pe.fromData(be,t),""),t.addResolvable(pe.fromData("$transition$",t),""),t.addResolvable(pe.fromData("$stateParams",t.params()),""),t.entering().forEach(function(e){t.addResolvable(pe.fromData("$state$",e),e)})}var En=Y(["$transition$",be]),xn=function(t){var e=function(t){return En(t.token)?pe.fromData(t.token,null):t},n=t.treeChanges();pt(n,function(t){return t.map(function(t){var n=t.resolvables.map(e);return z(t.clone(),{resolvables:n})})},n)},Cn=function(t){var e=t.to().redirectTo;if(e){var n=t.router.stateService;return T(e)?U.$q.when(e(t)).then(r):r(e)}function r(e){if(e)return e instanceof Yt?e:O(e)?n.target(e,t.params(),t.options()):e.state||e.params?n.target(e.state||t.to(),e.params||t.params(),t.options()):void 0}};function _n(t){return function(e,n){return(0,n.$$state()[t])(e,n)}}var kn=_n("onExit"),Tn=_n("onRetain"),An=_n("onEnter"),On=function(t){return new ge(t.treeChanges().to).resolvePath("EAGER",t).then(J)},Rn=function(t,e){return new ge(t.treeChanges().to).subContext(e.$$state()).resolvePath("LAZY",t).then(J)},Pn=function(t){return new ge(t.treeChanges().to).resolvePath("LAZY",t).then(J)},Vn=function(t){var e=U.$q,n=t.views("entering");if(n.length)return e.all(n.map(function(t){return e.when(t.load())})).then(J)},In=function(t){var e=t.views("entering"),n=t.views("exiting");if(e.length||n.length){var r=t.router.viewService;n.forEach(function(t){return r.deactivateViewConfig(t)}),e.forEach(function(t){return r.activateViewConfig(t)}),r.sync()}},jn=function(t){var e=t.router.globals,n=function(){e.transition===t&&(e.transition=null)};t.onSuccess({},function(){e.successfulTransitions.enqueue(t),e.$current=t.$to(),e.current=e.$current.self,Ot(t.params(),e.params)},{priority:1e4}),t.promise.then(n,n)},Mn=function(t){var e=t.options(),n=t.router.stateService,r=t.router.urlRouter;if("url"!==e.source&&e.location&&n.$current.navigable){var i={replace:"replace"===e.location};r.push(n.$current.navigable.url,n.params,i)}r.update(!0)},Nn=function(t){var e=t.router;var n=t.entering().filter(function(t){return!!t.$$state().lazyLoad}).map(function(e){return Dn(t,e)});return U.$q.all(n).then(function(){if("url"!==t.originalTransition().options().source){var n=t.targetState();return e.stateService.target(n.identifier(),n.params(),n.options())}var r=e.urlService,i=r.match(r.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var a=o.state,s=i.match;return e.stateService.target(a,s,t.options())}e.urlService.sync()})};function Dn(t,e){var n=e.$$state().lazyLoad,r=n._promise;if(!r){r=n._promise=U.$q.when(n(t,e)).then(function(e){e&&Array.isArray(e.states)&&e.states.forEach(function(e){return t.router.stateRegistry.register(e)});return e}).then(function(t){return delete e.lazyLoad,delete e.$$state().lazyLoad,delete n._promise,t},function(t){return delete n._promise,U.$q.reject(t)})}return r}var Un=function(){return function(t,e,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=Xt.HANDLE_RESULT),void 0===a&&(a=Xt.REJECT_ERROR),void 0===s&&(s=!1),this.name=t,this.hookPhase=e,this.hookOrder=n,this.criteriaMatchPath=r,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=s}}();function Hn(t){var e=t._ignoredReason();if(e){Zt.traceTransitionIgnored(t);var n=t.router.globals.transition;return"SameAsCurrent"===e&&n&&n.abort(),Dt.ignored().toPromise()}}function qn(t){if(!t.valid())throw new Error(t.error())}var Fn={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},Ln=function(){function e(t){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=t,this.$view=t.viewService,this._deregisterHookFns={},this._pluginapi=K($(this),{},$(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),t.globals.successfulTransitions.onEvict(xn)}return e.prototype.onCreate=function(t,e,n){},e.prototype.onBefore=function(t,e,n){},e.prototype.onStart=function(t,e,n){},e.prototype.onExit=function(t,e,n){},e.prototype.onRetain=function(t,e,n){},e.prototype.onEnter=function(t,e,n){},e.prototype.onFinish=function(t,e,n){},e.prototype.onSuccess=function(t,e,n){},e.prototype.onError=function(t,e,n){},e.prototype.dispose=function(t){dt(this._registeredHooks).forEach(function(t){return t.forEach(function(e){e._deregistered=!0,X(t,e)})})},e.prototype.create=function(t,e){return new be(t,e,this._router)},e.prototype._defineCoreEvents=function(){var e=t.TransitionHookPhase,n=Xt,r=this._criteriaPaths;this._defineEvent("onCreate",e.CREATE,0,r.to,!1,n.LOG_REJECTED_RESULT,n.THROW_ERROR,!0),this._defineEvent("onBefore",e.BEFORE,0,r.to),this._defineEvent("onStart",e.RUN,0,r.to),this._defineEvent("onExit",e.RUN,100,r.exiting,!0),this._defineEvent("onRetain",e.RUN,200,r.retained),this._defineEvent("onEnter",e.RUN,300,r.entering),this._defineEvent("onFinish",e.RUN,400,r.to),this._defineEvent("onSuccess",e.SUCCESS,0,r.to,!1,n.LOG_REJECTED_RESULT,n.LOG_ERROR,!0),this._defineEvent("onError",e.ERROR,0,r.to,!1,n.LOG_REJECTED_RESULT,n.LOG_ERROR,!0)},e.prototype._defineCorePaths=function(){var e=t.TransitionHookScope.STATE,n=t.TransitionHookScope.TRANSITION;this._definePathType("to",n),this._definePathType("from",n),this._definePathType("exiting",e),this._definePathType("retained",e),this._definePathType("entering",e)},e.prototype._defineEvent=function(t,e,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=Xt.HANDLE_RESULT),void 0===a&&(a=Xt.REJECT_ERROR),void 0===s&&(s=!1);var u=new Un(t,e,n,r,i,o,a,s);this._eventTypes.push(u),ne(this,this,u)},e.prototype._getEvents=function(t){return(C(t)?this._eventTypes.filter(function(e){return e.hookPhase===t}):this._eventTypes.slice()).sort(function(t,e){var n=t.hookPhase-e.hookPhase;return 0===n?t.hookOrder-e.hookOrder:n})},e.prototype._definePathType=function(t,e){this._criteriaPaths[t]={name:t,scope:e}},e.prototype._getPathTypes=function(){return this._criteriaPaths},e.prototype.getHooks=function(t){return this._registeredHooks[t]},e.prototype._registerCoreTransitionHooks=function(){var t=this._deregisterHookFns;t.addCoreResolves=this.onCreate({},Sn),t.ignored=this.onBefore({},Hn,{priority:-9999}),t.invalid=this.onBefore({},qn,{priority:-1e4}),t.redirectTo=this.onStart({to:function(t){return!!t.redirectTo}},Cn),t.onExit=this.onExit({exiting:function(t){return!!t.onExit}},kn),t.onRetain=this.onRetain({retained:function(t){return!!t.onRetain}},Tn),t.onEnter=this.onEnter({entering:function(t){return!!t.onEnter}},An),t.eagerResolve=this.onStart({},On,{priority:1e3}),t.lazyResolve=this.onEnter({entering:$(!0)},Rn,{priority:1e3}),t.resolveAll=this.onFinish({},Pn,{priority:1e3}),t.loadViews=this.onFinish({},Vn),t.activateViews=this.onSuccess({},In),t.updateGlobals=this.onCreate({},jn),t.updateUrl=this.onSuccess({},Mn,{priority:9999}),t.lazyLoad=this.onBefore({entering:function(t){return!!t.lazyLoad}},Nn)},e}(),Bn=function(){function e(t){this.router=t,this.invalidCallbacks=[],this._defaultErrorHandler=function(t){t instanceof Error&&t.stack?(console.error(t),console.error(t.stack)):t instanceof Dt?(console.error(t.toString()),t.detail&&t.detail.stack&&console.error(t.detail.stack)):console.error(t)};var n=Object.keys(e.prototype).filter(l(Y(["current","$current","params","transition"])));K($(e.prototype),this,$(this),n)}return Object.defineProperty(e.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.defaultErrorHandler(J),this.invalidCallbacks=[]},e.prototype._handleInvalidTargetState=function(t,e){var n=this,r=le.makeTargetState(this.router.stateRegistry,t),i=this.router.globals,o=function(){return i.transitionHistory.peekTail()},a=o(),s=new Mt(this.invalidCallbacks.slice()),u=new ge(t).injector(),c=function(t){if(t instanceof Yt){var e=t;return(e=n.target(e.identifier(),e.params(),e.options())).valid()?o()!==a?Dt.superseded().toPromise():n.transitionTo(e.identifier(),e.params(),e.options()):Dt.invalid(e.error()).toPromise()}};return function t(){var n=s.dequeue();return void 0===n?Dt.invalid(e.error()).toPromise():U.$q.when(n(e,r,u)).then(c).then(function(e){return e||t()})}()},e.prototype.onInvalid=function(t){return this.invalidCallbacks.push(t),function(){X(this.invalidCallbacks)(t)}.bind(this)},e.prototype.reload=function(t){return this.transitionTo(this.current,this.params,{reload:!C(t)||t,inherit:!1,notify:!1})},e.prototype.go=function(t,e,n){var r=it(n,{relative:this.$current,inherit:!0},Fn);return this.transitionTo(t,e,r)},e.prototype.target=function(t,e,n){if(void 0===n&&(n={}),R(n.reload)&&!n.reload.name)throw new Error("Invalid reload state object");var r=this.router.stateRegistry;if(n.reloadState=!0===n.reload?r.root():r.matcher.find(n.reload,n.relative),n.reload&&!n.reloadState)throw new Error("No such reload state '"+(O(n.reload)?n.reload:n.reload.name)+"'");return new Yt(this.router.stateRegistry,t,e,n)},e.prototype.getCurrentPath=function(){var t=this,e=this.router.globals.successfulTransitions.peekTail();return e?e.treeChanges().to:[new ce(t.router.stateRegistry.root())]},e.prototype.transitionTo=function(e,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r={});var o=this.router,a=o.globals;r=it(r,Fn);r=z(r,{current:function(){return a.transition}});var s=this.target(e,n,r),u=this.getCurrentPath();if(!s.exists())return this._handleInvalidTargetState(u,s);if(!s.valid())return jt(s.error());var c=function(e){return function(n){if(n instanceof Dt){var r=o.globals.lastStartedTransitionId===e.$id;if(n.type===t.RejectType.IGNORED)return r&&o.urlRouter.update(),U.$q.when(a.current);var s=n.detail;if(n.type===t.RejectType.SUPERSEDED&&n.redirected&&s instanceof Yt){var u=e.redirect(s);return u.run().catch(c(u))}if(n.type===t.RejectType.ABORTED)return r&&o.urlRouter.update(),U.$q.reject(n)}return i.defaultErrorHandler()(n),U.$q.reject(n)}},l=this.router.transitionService.create(u,s),f=l.run().catch(c(l));return It(f),z(f,{transition:l})},e.prototype.is=function(t,e,n){n=it(n,{relative:this.$current});var r=this.router.stateRegistry.matcher.find(t,n.relative);if(C(r)){if(this.$current!==r)return!1;if(!e)return!0;var i=r.parameters({inherit:!0,matchingKeys:e});return ue.equals(i,ue.values(i,e),this.params)}},e.prototype.includes=function(t,e,n){n=it(n,{relative:this.$current});var r=O(t)&&w.fromString(t);if(r){if(!r.matches(this.$current.name))return!1;t=this.$current.name}var i=this.router.stateRegistry.matcher.find(t,n.relative),o=this.$current.includes;if(C(i)){if(!C(o[i.name]))return!1;if(!e)return!0;var a=i.parameters({inherit:!0,matchingKeys:e});return ue.equals(a,ue.values(a,e),this.params)}},e.prototype.href=function(t,e,n){n=it(n,{lossy:!0,inherit:!0,absolute:!1,relative:this.$current}),e=e||{};var r=this.router.stateRegistry.matcher.find(t,n.relative);if(!C(r))return null;n.inherit&&(e=this.params.$inherit(e,this.$current,r));var i=r&&n.lossy?r.navigable:r;return i&&void 0!==i.url&&null!==i.url?this.router.urlRouter.href(i.url,e,{absolute:n.absolute}):null},e.prototype.defaultErrorHandler=function(t){return this._defaultErrorHandler=t||this._defaultErrorHandler},e.prototype.get=function(t,e){var n=this.router.stateRegistry;return 0===arguments.length?n.get():n.get(t,e||this.$current)},e.prototype.lazyLoad=function(t,e){var n=this.get(t);if(!n||!n.lazyLoad)throw new Error("Can not lazy load "+t);var r=this.getCurrentPath(),i=le.makeTargetState(this.router.stateRegistry,r);return Dn(e=e||this.router.transitionService.create(r,i),n)},e}(),zn={when:function(t){return new Promise(function(e,n){return e(t)})},reject:function(t){return new Promise(function(e,n){n(t)})},defer:function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},all:function(t){if(P(t))return Promise.all(t);if(R(t)){var e=Object.keys(t).map(function(e){return t[e].then(function(t){return{key:e,val:t}})});return zn.all(e).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.val,t},{})})}}},Wn={},Gn=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Jn=/([^\s,]+)/g,Kn={get:function(t){return Wn[t]},has:function(t){return null!=Kn.get(t)},invoke:function(t,e,n){var r=z({},Wn,n||{}),i=Kn.annotate(t),o=Et(function(t){return r.hasOwnProperty(t)},function(t){return"DI can't find injectable: '"+t+"'"}),a=i.filter(o).map(function(t){return r[t]});return T(t)?t.apply(e,a):t.slice(-1)[0].apply(e,a)},annotate:function(t){if(!M(t))throw new Error("Not an injectable function: "+t);if(t&&t.$inject)return t.$inject;if(P(t))return t.slice(0,-1);var e=t.toString().replace(Gn,"");return e.slice(e.indexOf("(")+1,e.indexOf(")")).match(Jn)||[]}},Zn=function(t,e){var n=e[0],r=e[1];return t.hasOwnProperty(n)?P(t[n])?t[n].push(r):t[n]=[t[n],r]:t[n]=r,t},Yn=function(t){return t.split("&").filter(G).map(je).reduce(Zn,{})};function Qn(t){var e=function(t){return t||""},n=Ve(t).map(e),r=n[0],i=n[1],o=Ie(r).map(e);return{path:o[0],search:o[1],hash:i,url:t}}var Xn=function(t){var e=t.path(),n=t.search(),r=t.hash(),i=Object.keys(n).map(function(t){var e=n[t];return(P(e)?e:[e]).map(function(e){return t+"="+e})}).reduce($t,[]).join("&");return e+(i?"?"+i:"")+(r?"#"+r:"")};function tr(t,e,n,r){return function(i){var o=i.locationService=new n(i),a=i.locationConfig=new r(i,e);return{name:t,service:o,configuration:a,dispose:function(t){t.dispose(o),t.dispose(a)}}}}var er,nr,rr,ir=function(){function t(t,e){var n=this;this.fireAfterUpdate=e,this._listeners=[],this._listener=function(t){return n._listeners.forEach(function(e){return e(t)})},this.hash=function(){return Qn(n._get()).hash},this.path=function(){return Qn(n._get()).path},this.search=function(){return Yn(Qn(n._get()).search)},this._location=H.location,this._history=H.history}return t.prototype.url=function(t,e){return void 0===e&&(e=!0),C(t)&&t!==this._get()&&(this._set(null,null,t,e),this.fireAfterUpdate&&this._listeners.forEach(function(e){return e({url:t})})),Xn(this)},t.prototype.onChange=function(t){var e=this;return this._listeners.push(t),function(){return X(e._listeners,t)}},t.prototype.dispose=function(t){rt(this._listeners)},t}(),or=(er=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}er(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ar=function(t){function e(e){var n=t.call(this,e,!1)||this;return H.addEventListener("hashchange",n._listener,!1),n}return or(e,t),e.prototype._get=function(){return Me(this._location.hash)},e.prototype._set=function(t,e,n,r){this._location.hash=n},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),H.removeEventListener("hashchange",this._listener)},e}(ir),sr=(nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}nr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ur=function(t){function e(e){return t.call(this,e,!0)||this}return sr(e,t),e.prototype._get=function(){return this._url},e.prototype._set=function(t,e,n,r){this._url=n},e}(ir),cr=(rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}rr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),lr=function(t){function e(e){var n=t.call(this,e,!0)||this;return n._config=e.urlService.config,H.addEventListener("popstate",n._listener,!1),n}return cr(e,t),e.prototype._getBasePrefix=function(){return Pe(this._config.baseHref())},e.prototype._get=function(){var t=this._location,e=t.pathname,n=t.hash,r=t.search;r=Ie(r)[1],n=Ve(n)[1];var i=this._getBasePrefix(),o=e===this._config.baseHref(),a=e.substr(0,i.length)===i;return(e=o?"/":a?e.substring(i.length):e)+(r?"?"+r:"")+(n?"#"+n:"")},e.prototype._set=function(t,e,n,r){var i=this._getBasePrefix(),o=n&&"/"!==n[0]?"/":"",a=""===n||"/"===n?this._config.baseHref():i+o+n;r?this._history.replaceState(t,e,a):this._history.pushState(t,e,a)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e),H.removeEventListener("popstate",this._listener)},e}(ir),fr=function(){return function(){var t=this;this.dispose=J,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return t._port},this.protocol=function(){return t._protocol},this.host=function(){return t._host},this.baseHref=function(){return t._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(e){return C(e)?t._hashPrefix=e:t._hashPrefix}}}(),pr=function(){function t(t,e){void 0===e&&(e=!1),this._isHtml5=e,this._baseHref=void 0,this._hashPrefix=""}return t.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},t.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},t.prototype.host=function(){return location.hostname},t.prototype.html5Mode=function(){return this._isHtml5},t.prototype.hashPrefix=function(t){return C(t)?this._hashPrefix=t:this._hashPrefix},t.prototype.baseHref=function(t){return C(t)?this._baseHref=t:C(this._baseHref)?this._baseHref:this.applyDocumentBaseHref()},t.prototype.applyDocumentBaseHref=function(){var t=document.getElementsByTagName("base")[0];return this._baseHref=t?t.href.substr(location.origin.length):location.pathname||"/"},t.prototype.dispose=function(){},t}();function hr(t){return U.$injector=Kn,U.$q=zn,{name:"vanilla.services",$q:zn,$injector:Kn,dispose:function(){return null}}}var dr=tr("vanilla.hashBangLocation",!1,ar,pr),vr=tr("vanilla.pushStateLocation",!0,lr,pr),mr=tr("vanilla.memoryLocation",!1,ur,fr),$r=function(){function t(){}return t.prototype.dispose=function(t){},t}(),gr=Object.freeze({root:H,fromJson:F,toJson:L,forEach:B,extend:z,equals:W,identity:G,noop:J,createProxyFunctions:K,inherit:Z,inArray:Y,_inArray:Q,removeFrom:X,_removeFrom:tt,pushTo:et,_pushTo:nt,deregAll:rt,defaults:it,mergeR:ot,ancestors:at,pick:st,omit:ut,pluck:ct,filter:lt,find:ft,mapObj:pt,map:ht,values:dt,allTrueR:vt,anyTrueR:mt,unnestR:$t,flattenR:gt,pushR:yt,uniqR:wt,unnest:bt,flatten:St,assertPredicate:Et,assertMap:xt,assertFn:Ct,pairs:_t,arrayTuples:kt,applyPairs:Tt,tail:At,copy:Ot,_extend:Rt,silenceUncaughtInPromise:It,silentRejection:jt,notImplemented:D,services:U,Glob:w,curry:i,compose:o,pipe:a,prop:s,propEq:u,parse:c,not:l,and:f,or:p,all:h,any:d,is:v,eq:m,val:$,invoke:g,pattern:y,isUndefined:x,isDefined:C,isNull:_,isNullOrUndefined:k,isFunction:T,isNumber:A,isString:O,isObject:R,isArray:P,isDate:V,isRegExp:I,isState:j,isInjectable:M,isPromise:N,Queue:Mt,maxLength:Se,padString:Ee,kebobString:xe,functionToString:Ce,fnToString:_e,stringify:Ae,beforeAfterSubstr:Oe,hostRegex:Re,stripLastPathElement:Pe,splitHash:Ve,splitQuery:Ie,splitEqual:je,trimHashVal:Me,splitOnDelim:Ne,joinNeighborsR:De,get Category(){return t.Category},Trace:Kt,trace:Zt,get DefType(){return t.DefType},Param:ue,ParamTypes:He,StateParams:qe,ParamType:ie,PathNode:ce,PathUtils:le,resolvePolicies:he,defaultResolvePolicy:fe,Resolvable:pe,NATIVE_INJECTOR_TOKEN:$e,ResolveContext:ge,resolvablesBuilder:Ze,StateBuilder:Ye,StateObject:b,StateMatcher:Qe,StateQueueManager:Xe,StateRegistry:tn,StateService:Bn,TargetState:Yt,get TransitionHookPhase(){return t.TransitionHookPhase},get TransitionHookScope(){return t.TransitionHookScope},HookBuilder:re,matchState:te,RegisteredHook:ee,makeEvent:ne,get RejectType(){return t.RejectType},Rejection:Dt,Transition:be,TransitionHook:Xt,TransitionEventType:Un,defaultTransOpts:Fn,TransitionService:Ln,UrlMatcher:rn,UrlMatcherFactory:on,UrlRouter:cn,UrlRuleFactory:an,BaseUrlRule:sn,UrlService:yn,ViewService:fn,UIRouterGlobals:pn,UIRouter:bn,$q:zn,$injector:Kn,BaseLocationServices:ir,HashLocationService:ar,MemoryLocationService:ur,PushStateLocationService:lr,MemoryLocationConfig:fr,BrowserLocationConfig:pr,keyValsToObjectR:Zn,getParams:Yn,parseUrl:Qn,buildUrl:Xn,locationPluginFactory:tr,servicesPlugin:hr,hashLocationPlugin:dr,pushStateLocationPlugin:vr,memoryLocationPlugin:mr,UIRouterPluginBase:$r});function yr(){var t=null;return function(e,n){return t=t||U.$injector.get("$templateFactory"),[new Er(e,n,t)]}}var wr=function(t,e){return t.reduce(function(t,n){return t||C(e[n])},!1)};function br(t){if(!t.parent)return{};var e=["component","bindings","componentProvider"],n=["templateProvider","templateUrl","template","notify","async"].concat(["controller","controllerProvider","controllerAs","resolveAs"]),r=e.concat(n);if(C(t.views)&&wr(r,t))throw new Error("State '"+t.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+r.filter(function(e){return C(t[e])}).join(", "));var i={},o=t.views||{$default:st(t,r)};return B(o,function(r,o){if(o=o||"$default",O(r)&&(r={component:r}),r=z({},r),wr(e,r)&&wr(n,r))throw new Error("Cannot combine: "+e.join("|")+" with: "+n.join("|")+" in stateview: '"+o+"@"+t.name+"'");r.resolveAs=r.resolveAs||"$resolve",r.$type="ng1",r.$context=t,r.$name=o;var a=fn.normalizeUIViewTarget(r.$context,r.$name);r.$uiViewName=a.uiViewName,r.$uiViewContextAnchor=a.uiViewContextAnchor,i[o]=r}),i}var Sr=0,Er=function(){function t(t,e,n){var r=this;this.path=t,this.viewDecl=e,this.factory=n,this.$id=Sr++,this.loaded=!1,this.getTemplate=function(t,e){return r.component?r.factory.makeComponentTemplate(t,e,r.component,r.viewDecl.bindings):r.template}}return t.prototype.load=function(){var t=this,e=U.$q,n=new ge(this.path),r=this.path.reduce(function(t,e){return z(t,e.paramValues)},{}),i={template:e.when(this.factory.fromConfig(this.viewDecl,r,n)),controller:e.when(this.getController(n))};return e.all(i).then(function(e){return Zt.traceViewServiceEvent("Loaded",t),t.controller=e.controller,z(t,e.template),t})},t.prototype.getController=function(t){var e=this.viewDecl.controllerProvider;if(!M(e))return this.viewDecl.controller;var n=U.$injector.annotate(e),r=P(e)?At(e):e;return new pe("",r,n).get(t)},t}(),xr=function(){function t(){var t=this;this._useHttp=r.version.minor<3,this.$get=["$http","$templateCache","$injector",function(e,n,r){return t.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),t.$http=e,t.$templateCache=n,t}]}return t.prototype.useHttpService=function(t){this._useHttp=t},t.prototype.fromConfig=function(t,e,n){var r=function(t){return U.$q.when(t).then(function(t){return{template:t}})},i=function(t){return U.$q.when(t).then(function(t){return{component:t}})};return C(t.template)?r(this.fromString(t.template,e)):C(t.templateUrl)?r(this.fromUrl(t.templateUrl,e)):C(t.templateProvider)?r(this.fromProvider(t.templateProvider,e,n)):C(t.component)?i(t.component):C(t.componentProvider)?i(this.fromComponentProvider(t.componentProvider,e,n)):r("<ui-view></ui-view>")},t.prototype.fromString=function(t,e){return T(t)?t(e):t},t.prototype.fromUrl=function(t,e){return T(t)&&(t=t(e)),null==t?null:this._useHttp?this.$http.get(t,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(t){return t.data}):this.$templateRequest(t)},t.prototype.fromProvider=function(t,e,n){var r=U.$injector.annotate(t),i=P(t)?At(t):t;return new pe("",i,r).get(n)},t.prototype.fromComponentProvider=function(t,e,n){var r=U.$injector.annotate(t),i=P(t)?At(t):t;return new pe("",i,r).get(n)},t.prototype.makeComponentTemplate=function(t,e,n,i){i=i||{};var o=r.version.minor>=3?"::":"",a=function(t){var e=xe(t);return/^(x|data)-/.exec(e)?"x-"+e:e},s=function(t){var e=U.$injector.get(t+"Directive");if(!e||!e.length)throw new Error("Unable to find component named '"+t+"'");return e.map(Cr).reduce($t,[])}(n).map(function(n){var r=n.name,s=n.type,u=a(r);if(t.attr(u)&&!i[r])return u+"='"+t.attr(u)+"'";var c=i[r]||r;if("@"===s)return u+"='{{"+o+"$resolve."+c+"}}'";if("&"===s){var l=e.getResolvable(c),f=l&&l.data,p=f&&U.$injector.annotate(f)||[];return u+"='$resolve."+c+(P(f)?"["+(f.length-1)+"]":"")+"("+p.join(",")+")'"}return u+"='"+o+"$resolve."+c+"'"}).join(" "),u=a(n);return"<"+u+" "+s+"></"+u+">"},t}();var Cr=function(t){return R(t.bindToController)?_r(t.bindToController):_r(t.scope)},_r=function(t){return Object.keys(t||{}).map(function(e){return[e,/^([=<@&])[?]?(.*)/.exec(t[e])]}).filter(function(t){return C(t)&&P(t[1])}).map(function(t){return{name:t[1][2]||t[0],type:t[1][1]}})},kr=function(){function t(e,n){this.stateRegistry=e,this.stateService=n,K($(t.prototype),this,$(this))}return t.prototype.decorator=function(t,e){return this.stateRegistry.decorator(t,e)||this},t.prototype.state=function(t,e){return R(t)?e=t:e.name=t,this.stateRegistry.register(e),this},t.prototype.onInvalid=function(t){return this.stateService.onInvalid(t)},t}(),Tr=function(t){return function(e,n){var r=e[t],i="onExit"===t?"from":"to";return r?function(t,e){var n=new ge(t.treeChanges(i)).subContext(e.$$state()),o=z(zr(n),{$state$:e,$transition$:t});return U.$injector.invoke(r,this,o)}:void 0}},Ar=function(){function t(t){this._urlListeners=[],this.$locationProvider=t;var e=$(t);K(e,this,e,["hashPrefix"])}return t.monkeyPatchPathParameterType=function(t){var e=t.urlMatcherFactory.type("path");e.encode=function(t){return null!=t?t.toString().replace(/(~|\/)/g,function(t){return{"~":"~~","/":"~2F"}[t]}):t},e.decode=function(t){return null!=t?t.toString().replace(/(~~|~2F)/g,function(t){return{"~~":"~","~2F":"/"}[t]}):t}},t.prototype.dispose=function(){},t.prototype.onChange=function(t){var e=this;return this._urlListeners.push(t),function(){return X(e._urlListeners)(t)}},t.prototype.html5Mode=function(){var t=this.$locationProvider.html5Mode();return(t=R(t)?t.enabled:t)&&this.$sniffer.history},t.prototype.url=function(t,e,n){return void 0===e&&(e=!1),C(t)&&this.$location.url(t),e&&this.$location.replace(),n&&this.$location.state(n),this.$location.url()},t.prototype._runtimeServices=function(t,e,n,r){var i=this;this.$location=e,this.$sniffer=n,t.$on("$locationChangeSuccess",function(t){return i._urlListeners.forEach(function(e){return e(t)})});var o=$(e),a=$(r);K(o,this,o,["replace","path","search","hash"]),K(o,this,o,["port","protocol","host"]),K(a,this,a,["baseHref"])},t}(),Or=function(){function t(t){this._router=t,this._urlRouter=t.urlRouter}return t.injectableHandler=function(t,e){return function(n){return U.$injector.invoke(e,null,{$match:n,$stateParams:t.globals.params})}},t.prototype.$get=function(){var t=this._urlRouter;return t.update(!0),t.interceptDeferred||t.listen(),t},t.prototype.rule=function(t){var e=this;if(!T(t))throw new Error("'rule' must be a function");var n=new sn(function(){return t(U.$injector,e._router.locationService)},G);return this._urlRouter.rule(n),this},t.prototype.otherwise=function(t){var e=this,n=this._urlRouter;if(O(t))n.otherwise(t);else{if(!T(t))throw new Error("'rule' must be a string or function");n.otherwise(function(){return t(U.$injector,e._router.locationService)})}return this},t.prototype.when=function(e,n){return(P(n)||T(n))&&(n=t.injectableHandler(this._router,n)),this._urlRouter.when(e,n),this},t.prototype.deferIntercept=function(t){this._urlRouter.deferIntercept(t)},t}();r.module("ui.router.angular1",[]);var Rr=r.module("ui.router.init",[]),Pr=r.module("ui.router.util",["ng","ui.router.init"]),Vr=r.module("ui.router.router",["ui.router.util"]),Ir=r.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),jr=r.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),Mr=(r.module("ui.router.compat",["ui.router"]),null);function Nr(t){(Mr=this.router=new bn).stateProvider=new kr(Mr.stateRegistry,Mr.stateService),Mr.stateRegistry.decorator("views",br),Mr.stateRegistry.decorator("onExit",Tr("onExit")),Mr.stateRegistry.decorator("onRetain",Tr("onRetain")),Mr.stateRegistry.decorator("onEnter",Tr("onEnter")),Mr.viewService._pluginapi._viewConfigFactory("ng1",yr());var e=Mr.locationService=Mr.locationConfig=new Ar(t);function n(t,n,r,i,o,a){return e._runtimeServices(i,t,r,n),delete Mr.router,delete Mr.$get,Mr}return Ar.monkeyPatchPathParameterType(Mr),Mr.router=Mr,Mr.$get=n,n.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],Mr}Nr.$inject=["$locationProvider"];var Dr=function(t){return["$uiRouterProvider",function(e){var n=e.router[t];return n.$get=function(){return n},n}]};function Ur(t,e,n){U.$injector=t,U.$q=e,n.stateRegistry.get().map(function(t){return t.$$state().resolvables}).reduce($t,[]).filter(function(t){return"deferred"===t.deps}).forEach(function(e){return e.deps=t.annotate(e.resolveFn,t.strictDi)})}Ur.$inject=["$injector","$q","$uiRouter"];function Hr(t){t.$watch(function(){Zt.approximateDigests++})}Hr.$inject=["$rootScope"],Rr.provider("$uiRouter",Nr),Vr.provider("$urlRouter",["$uiRouterProvider",function(t){return t.urlRouterProvider=new Or(t)}]),Pr.provider("$urlService",Dr("urlService")),Pr.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return Mr.urlMatcherFactory}]),Pr.provider("$templateFactory",function(){return new xr}),Ir.provider("$stateRegistry",Dr("stateRegistry")),Ir.provider("$uiRouterGlobals",Dr("globals")),Ir.provider("$transitions",Dr("transitionService")),Ir.provider("$state",["$uiRouterProvider",function(){return z(Mr.stateProvider,{$get:function(){return Mr.stateService}})}]),Ir.factory("$stateParams",["$uiRouter",function(t){return t.globals.params}]),jr.factory("$view",function(){return Mr.viewService}),jr.service("$trace",function(){return Zt}),jr.run(Hr),Pr.run(["$urlMatcherFactory",function(t){}]),Ir.run(["$state",function(t){}]),Vr.run(["$urlRouter",function(t){}]),Rr.run(Ur);var qr,Fr,Lr,Br,zr=function(t){return t.getTokens().filter(O).map(function(e){var n=t.getResolvable(e);return[e,"NOWAIT"===t.getPolicy(n).async?n.promise:n.data]}).reduce(Tt,{})};function Wr(t){var e,n=t.match(/^\s*({[^}]*})\s*$/);if(n&&(t="("+n[1]+")"),!(e=t.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==e.length)throw new Error("Invalid state ref '"+t+"'");return{state:e[1]||null,paramExpr:e[3]||null}}function Gr(t){var e=t.parent().inheritedData("$uiView"),n=c("$cfg.path")(e);return n?At(n).state.name:void 0}function Jr(t,e,n){var r,i=n.uiState||t.current.name,o=z((r=t,{relative:Gr(e)||r.$current,inherit:!0,source:"sref"}),n.uiStateOpts||{}),a=t.href(i,n.uiStateParams,o);return{uiState:i,uiStateParams:n.uiStateParams,uiStateOpts:o,href:a}}function Kr(t){var e="[object SVGAnimatedString]"===Object.prototype.toString.call(t.prop("href")),n="FORM"===t[0].nodeName;return{attr:n?"action":e?"xlink:href":"href",isAnchor:"A"===t.prop("tagName").toUpperCase(),clickable:!n}}function Zr(t,e,n,r,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||t.attr("target"))){var u=n(function(){e.go(s.uiState,s.uiStateParams,s.uiStateOpts)});o.preventDefault();var c=r.isAnchor&&!s.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(u)}}}}function Yr(t,e,n,r){var i;r&&(i=r.events),P(i)||(i=["click"]);for(var o=t.on?"on":"bind",a=0,s=i;a<s.length;a++){var u=s[a];t[o](u,n)}e.$on("$destroy",function(){for(var e=t.off?"off":"unbind",r=0,o=i;r<o.length;r++){var a=o[r];t[e](a,n)}})}function Qr(t){var e=function(e,n,r){return t.is(e,n,r)};return e.$stateful=!0,e}function Xr(t){var e=function(e,n,r){return t.includes(e,n,r)};return e.$stateful=!0,e}function ti(t,e,n,i,o,a){var s=c("viewDecl.controllerAs"),u=c("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(i){var a=i.html();return i.empty(),function(i,c){var l=c.data("$uiView");if(!l)return c.html(a),void t(c.contents())(i);var f=l.$cfg||{viewDecl:{},getTemplate:J},p=f.path&&new ge(f.path);c.html(f.getTemplate(c,p)||a),Zt.traceUIViewFill(l.$uiView,c.html());var h=t(c.contents()),d=f.controller,v=s(f),m=u(f),$=p&&zr(p);if(i[m]=$,d){var g=e(d,z({},$,{$scope:i,$element:c}));v&&(i[v]=g,i[v][m]=$),c.data("$ngControllerController",g),c.children().data("$ngControllerController",g),ri(o,n,g,i,f)}if(O(f.viewDecl.component))var y=f.viewDecl.component,w=xe(y),b=new RegExp("^(x-|data-)?"+w+"$","i"),S=i.$watch(function(){var t=[].slice.call(c[0].children).filter(function(t){return t&&t.tagName&&b.exec(t.tagName)});return t&&r.element(t).data("$"+y+"Controller")},function(t){t&&(ri(o,n,t,i,f),S())});h(i)}}}}qr=["$uiRouter","$timeout",function(t,e){var n=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){var s,u=Kr(i),c=a[1]||a[0],l=null,f={},p=function(){return Jr(n,i,f)},h=Wr(o.uiSref);function d(){var t=p();l&&l(),c&&(l=c.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&o.$set(u.attr,t.href)}f.uiState=h.state,f.uiStateOpts=o.uiSrefOpts?r.$eval(o.uiSrefOpts):{},h.paramExpr&&(r.$watch(h.paramExpr,function(t){f.uiStateParams=z({},t),d()},!0),f.uiStateParams=z({},r.$eval(h.paramExpr))),d(),r.$on("$destroy",t.stateRegistry.onStatesChanged(d)),r.$on("$destroy",t.transitionService.onSuccess({},d)),u.clickable&&(s=Zr(i,n,e,u,p),Yr(i,r,s,f.uiStateOpts))}}}],Fr=["$uiRouter","$timeout",function(t,e){var n=t.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){var s,u=Kr(i),c=a[1]||a[0],l=null,f={},p=function(){return Jr(n,i,f)},h=["uiState","uiStateParams","uiStateOpts"],d=h.reduce(function(t,e){return t[e]=J,t},{});function v(){var t=p();l&&l(),c&&(l=c.$$addStateInfo(t.uiState,t.uiStateParams)),null!=t.href&&o.$set(u.attr,t.href)}h.forEach(function(t){f[t]=o[t]?r.$eval(o[t]):null,o.$observe(t,function(e){d[t](),d[t]=r.$watch(e,function(e){f[t]=e,v()},!0)})}),v(),r.$on("$destroy",t.stateRegistry.onStatesChanged(v)),r.$on("$destroy",t.transitionService.onSuccess({},v)),u.clickable&&(s=Zr(i,n,e,u,p),Yr(i,r,s,f.uiStateOpts))}}}],Lr=["$state","$stateParams","$interpolate","$uiRouter",function(t,e,n,r){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,i,o){var a,s,u,c,l,f=[];a=n(o.uiSrefActiveEq||"",!1)(e);try{s=e.$eval(o.uiSrefActive)}catch(t){}function p(t){t.promise.then(m,J)}function h(){d(s)}function d(t){R(t)&&(f=[],B(t,function(t,n){var r=function(t,n){var r=Wr(t);v(r.state,e.$eval(r.paramExpr),n)};O(t)?r(t,n):P(t)&&B(t,function(t){r(t,n)})}))}function v(e,n,r){var o={state:t.get(e,Gr(i))||{name:e},params:n,activeClass:r};return f.push(o),function(){X(f)(o)}}function m(){var n=function(t){return t.split(/\s/).filter(G)},r=function(t){return t.map(function(t){return t.activeClass}).map(n).reduce($t,[])},o=r(f).concat(n(a)).reduce(wt,[]),s=r(f.filter(function(e){return t.includes(e.state.name,e.params)})),u=!!f.filter(function(e){return t.is(e.state.name,e.params)}).length?n(a):[],c=s.concat(u).reduce(wt,[]),l=o.filter(function(t){return!Y(c,t)});e.$evalAsync(function(){c.forEach(function(t){return i.addClass(t)}),l.forEach(function(t){return i.removeClass(t)})})}d(s=s||n(o.uiSrefActive||"",!1)(e)),this.$$addStateInfo=function(t,e){if(!(R(s)&&f.length>0)){var n=v(t,e,s);return m(),n}},e.$on("$destroy",(u=r.stateRegistry.onStatesChanged(h),c=r.transitionService.onStart({},p),l=e.$on("$stateChangeSuccess",m),function(){u(),c(),l()})),r.globals.transition&&p(r.globals.transition),m()}]}}],r.module("ui.router.state").directive("uiSref",qr).directive("uiSrefActive",Lr).directive("uiSrefActiveEq",Lr).directive("uiState",Fr),Qr.$inject=["$state"],Xr.$inject=["$state"],r.module("ui.router.state").filter("isState",Qr).filter("includedByState",Xr),Br=["$view","$animate","$uiViewScroll","$interpolate","$q",function(t,e,n,i,o){var a={$cfg:{viewDecl:{$context:t._pluginapi._rootViewContext()}},$uiView:{}},s={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(u,l,f){return function(u,l,p){var h,d,v,m,$,g=p.onload||"",y=p.autoscroll,w={enter:function(t,n,i){r.version.minor>2?e.enter(t,null,n).then(i):e.enter(t,null,n,i)},leave:function(t,n){r.version.minor>2?e.leave(t).then(n):e.leave(t,n)}},b=l.inheritedData("$uiView")||a,S=i(p.uiView||p.name||"")(u)||"$default",E={$type:"ng1",id:s.count++,name:S,fqn:b.$uiView.fqn?b.$uiView.fqn+"."+S:S,config:null,configUpdated:function(t){if(t&&!(t instanceof Er))return;if(e=m,n=t,e===n)return;var e,n;Zt.traceUIViewConfigUpdated(E,t&&t.viewDecl&&t.viewDecl.$context),m=t,x(t)},get creationContext(){var t=c("$cfg.viewDecl.$context")(b),e=c("$uiView.creationContext")(b);return t||e}};function x(t){var e=u.$new(),r=o.defer(),i=o.defer(),a={$cfg:t,$uiView:E},s={$animEnter:r.promise,$animLeave:i.promise,$$animLeave:i};e.$emit("$viewContentLoading",S);var c=f(e,function(t){t.data("$uiViewAnim",s),t.data("$uiView",a),w.enter(t,l,function(){r.resolve(),v&&v.$emit("$viewContentAnimationEnded"),(C(y)&&!y||u.$eval(y))&&n(t)}),function(){if(h&&(Zt.traceUIViewEvent("Removing (previous) el",h.data("$uiView")),h.remove(),h=null),v&&(Zt.traceUIViewEvent("Destroying scope",E),v.$destroy(),v=null),d){var t=d.data("$uiViewAnim");Zt.traceUIViewEvent("Animate out",t),w.leave(d,function(){t.$$animLeave.resolve(),h=null}),h=d,d=null}}()});d=c,(v=e).$emit("$viewContentLoaded",t||m),v.$eval(g)}Zt.traceUIViewEvent("Linking",E),l.data("$uiView",{$uiView:E}),x(),$=t.registerUIView(E),u.$on("$destroy",function(){Zt.traceUIViewEvent("Destroying/Unregistering",E),$()})}}};return s}],ti.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var ei="function"==typeof r.module("ui.router").component,ni=0;function ri(t,e,n,r,i){!T(n.$onInit)||i.viewDecl.component&&ei||n.$onInit();var o=At(i.path).state.self,a={bind:n};if(T(n.uiOnParamsChanged)){var s=new ge(i.path).getResolvable("$transition$").data;r.$on("$destroy",e.onSuccess({},function(t){if(t!==s&&-1===t.exiting().indexOf(o)){var e=t.params("to"),r=t.params("from"),i=t.treeChanges().to.map(function(t){return t.paramSchema}).reduce($t,[]),a=t.treeChanges().from.map(function(t){return t.paramSchema}).reduce($t,[]),u=i.filter(function(t){var n=a.indexOf(t);return-1===n||!a[n].type.equals(e[t.id],r[t.id])});if(u.length){var c=u.map(function(t){return t.id}),l=lt(e,function(t,e){return-1!==c.indexOf(e)});n.uiOnParamsChanged(l,t)}}},a))}if(T(n.uiCanExit)){var u=ni++,c="_uiCanExitIds",l=function(t){return!!t&&(t[c]&&!0===t[c][u]||l(t.redirectedFrom()))},f={exiting:o.name};r.$on("$destroy",e.onBefore(f,function(e){var r,i=e[c]=e[c]||{};return l(e)||(r=t.when(n.uiCanExit(e))).then(function(t){return i[u]=!1!==t}),r},a))}}r.module("ui.router.state").directive("uiView",Br),r.module("ui.router.state").directive("uiView",ti),r.module("ui.router.state").provider("$uiViewScroll",function(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){return n(function(){t[0].scrollIntoView()},0,!1)}}]});t.default="ui.router",t.core=gr,t.watchDigests=Hr,t.getLocals=zr,t.getNg1ViewConfigFactory=yr,t.ng1ViewsBuilder=br,t.Ng1ViewConfig=Er,t.StateProvider=kr,t.UrlRouterProvider=Or,t.root=H,t.fromJson=F,t.toJson=L,t.forEach=B,t.extend=z,t.equals=W,t.identity=G,t.noop=J,t.createProxyFunctions=K,t.inherit=Z,t.inArray=Y,t._inArray=Q,t.removeFrom=X,t._removeFrom=tt,t.pushTo=et,t._pushTo=nt,t.deregAll=rt,t.defaults=it,t.mergeR=ot,t.ancestors=at,t.pick=st,t.omit=ut,t.pluck=ct,t.filter=lt,t.find=ft,t.mapObj=pt,t.map=ht,t.values=dt,t.allTrueR=vt,t.anyTrueR=mt,t.unnestR=$t,t.flattenR=gt,t.pushR=yt,t.uniqR=wt,t.unnest=bt,t.flatten=St,t.assertPredicate=Et,t.assertMap=xt,t.assertFn=Ct,t.pairs=_t,t.arrayTuples=kt,t.applyPairs=Tt,t.tail=At,t.copy=Ot,t._extend=Rt,t.silenceUncaughtInPromise=It,t.silentRejection=jt,t.notImplemented=D,t.services=U,t.Glob=w,t.curry=i,t.compose=o,t.pipe=a,t.prop=s,t.propEq=u,t.parse=c,t.not=l,t.and=f,t.or=p,t.all=h,t.any=d,t.is=v,t.eq=m,t.val=$,t.invoke=g,t.pattern=y,t.isUndefined=x,t.isDefined=C,t.isNull=_,t.isNullOrUndefined=k,t.isFunction=T,t.isNumber=A,t.isString=O,t.isObject=R,t.isArray=P,t.isDate=V,t.isRegExp=I,t.isState=j,t.isInjectable=M,t.isPromise=N,t.Queue=Mt,t.maxLength=Se,t.padString=Ee,t.kebobString=xe,t.functionToString=Ce,t.fnToString=_e,t.stringify=Ae,t.beforeAfterSubstr=Oe,t.hostRegex=Re,t.stripLastPathElement=Pe,t.splitHash=Ve,t.splitQuery=Ie,t.splitEqual=je,t.trimHashVal=Me,t.splitOnDelim=Ne,t.joinNeighborsR=De,t.Trace=Kt,t.trace=Zt,t.Param=ue,t.ParamTypes=He,t.StateParams=qe,t.ParamType=ie,t.PathNode=ce,t.PathUtils=le,t.resolvePolicies=he,t.defaultResolvePolicy=fe,t.Resolvable=pe,t.NATIVE_INJECTOR_TOKEN=$e,t.ResolveContext=ge,t.resolvablesBuilder=Ze,t.StateBuilder=Ye,t.StateObject=b,t.StateMatcher=Qe,t.StateQueueManager=Xe,t.StateRegistry=tn,t.StateService=Bn,t.TargetState=Yt,t.HookBuilder=re,t.matchState=te,t.RegisteredHook=ee,t.makeEvent=ne,t.Rejection=Dt,t.Transition=be,t.TransitionHook=Xt,t.TransitionEventType=Un,t.defaultTransOpts=Fn,t.TransitionService=Ln,t.UrlMatcher=rn,t.UrlMatcherFactory=on,t.UrlRouter=cn,t.UrlRuleFactory=an,t.BaseUrlRule=sn,t.UrlService=yn,t.ViewService=fn,t.UIRouterGlobals=pn,t.UIRouter=bn,t.$q=zn,t.$injector=Kn,t.BaseLocationServices=ir,t.HashLocationService=ar,t.MemoryLocationService=ur,t.PushStateLocationService=lr,t.MemoryLocationConfig=fr,t.BrowserLocationConfig=pr,t.keyValsToObjectR=Zn,t.getParams=Yn,t.parseUrl=Qn,t.buildUrl=Xn,t.locationPluginFactory=tr,t.servicesPlugin=hr,t.hashLocationPlugin=dr,t.pushStateLocationPlugin=vr,t.memoryLocationPlugin=mr,t.UIRouterPluginBase=$r,Object.defineProperty(t,"__esModule",{value:!0})}),function(t,e){"use strict";t._arrayBufferToBase64=function(e){for(var n="",r=new Uint8Array(e),i=r.byteLength,o=0;o<i;o+=1)n+=String.fromCharCode(r[o]);return t.btoa(n)},t.angular.module("naif.base64",[]).directive("baseSixtyFourInput",["$window","$q",function(t,n){var r={onChange:"&",onAfterValidate:"&",parser:"&"},i=["onabort","onerror","onloadstart","onloadend","onprogress","onload"];return i.forEach(function(t){r[t]="&"}),{restrict:"A",require:"ngModel",scope:r,link:function(r,o,a,s){var u=[],c=[];function l(){var t=a.multiple?c:c[0];s.$setViewValue(t),function(t){var e=!0;if(a.maxsize&&t){var n=1e3*parseFloat(a.maxsize);if(a.multiple){for(var r=0;r<t.length;r++)if(t[r].filesize>n){e=!1;break}}else e=t.filesize<=n;s.$setValidity("maxsize",e)}}(t),function(t){var e=!0,n=1e3*parseFloat(a.minsize);if(a.minsize&&t){if(a.multiple){for(var r=0;r<t.length;r++)if(t[r].filesize<n){e=!1;break}}else e=t.filesize>=n;s.$setValidity("minsize",e)}}(t),function(t){if(a.maxnum&&a.multiple&&t){var e=t.length<=parseInt(a.maxnum);s.$setValidity("maxnum",e)}}(t),function(t){if(a.minnum&&a.multiple&&t){var e=t.length>=parseInt(a.minnum);s.$setValidity("minnum",e)}}(t),function(t){var e,n,r,i=!0;if(a.accept&&(n=a.accept.trim().replace(/[,\s]+/gi,"|").replace(/\./g,"\\.").replace(/\/\*/g,"/.*"),e=new RegExp(n)),a.accept&&t){if(a.multiple)for(var o=0;o<t.length;o++){var u=t[o];if(r="."+u.filename.split(".").pop(),!(i=e.test(u.filetype)||e.test(r)))break}else r="."+t.filename.split(".").pop(),i=e.test(t.filetype)||e.test(r);s.$setValidity("accept",i)}}(t)}function f(t,e,n,r,i){n[t]=function(t){e()(t,n,r,u,c,i)}}function p(o,s,l){for(var p=i.length-1;p>=0;p--){var h=i[p];a[h]&&"onload"!==h&&f(h,r[h],o,s,l)}var d,v,m;o.onload=(d=o,v=s,m=l,function(i){var o=i.target.result,s=a.maxsize&&v.size>1024*a.maxsize;a.doNotParseIfOversize!==e&&s?m.base64=null:m.base64=t._arrayBufferToBase64(o),(a.parser?n.when(r.parser()(v,m)):n.when(m)).then(function(t){c.push(t),v.deferredObj.resolve()}),a.onload&&(r.onload&&"function"==typeof r.onload()?r.onload()(i,d,v,u,c,m):r.onload(i,u))})}s&&(s.$isEmpty=function(t){return!t||(angular.isArray(t)?0===t.length:!t.base64)},r._clearInput=function(){o[0].value=""},r.$watch(function(){return s.$viewValue},function(t){s.$isEmpty(t)&&s.$dirty&&(r._clearInput(),s.$setValidity("maxnum",!0),s.$setValidity("minnum",!0),s.$setValidity("maxsize",!0),s.$setValidity("minsize",!0),s.$setValidity("accept",!0))}),o.on("change",function(e){var i;c=[],c=angular.copy(c),0===e.target.files.length?(u=[],l()):(u=e.target.files,function(){var e,r=[];for(e=u.length-1;e>=0;e--)u[e].deferredObj=n.defer(),r.push(u[e].deferredObj.promise);for(n.all(r).then(l),e=u.length-1;e>=0;e--){var i=new t.FileReader,o=u[e],a={};a.filetype=o.type,a.filename=o.name,a.filesize=o.size,p(i,o,a),i.readAsArrayBuffer(o)}}(),i=e,a.onChange&&(r.onChange&&"function"==typeof r.onChange()?r.onChange()(i,u):r.onChange(i,u)),function(t){if(a.onAfterValidate){for(var e=[],i=u.length-1;i>=0;i--)e.push(u[i].deferredObj.promise);n.all(e).then(function(){r.onAfterValidate&&"function"==typeof r.onAfterValidate()?r.onAfterValidate()(t,c,u):r.onAfterValidate(t,c,u)})}}(e)),a.allowSameFile&&r._clearInput()}))}}}])}(window),(void angular.module("app",["ui.router","naif.base64"]))(function(){function t(t,e){t.state("login",{url:"/login",component:"login"}).state("dashboard",{url:"/dashboard",component:"dashboard"}).state("seeker",{url:"/seeker",component:"seeker"}).state("seekerAdd",{url:"/seeker/add",component:"seekerAdd"}).state("seekerEdit",{url:"/seeker/edit/:id",component:"seekerEdit"}).state("supplier",{url:"/supplier",component:"supplier"}).state("supplierAdd",{url:"/supplier/add",component:"supplierAdd"}).state("supplierEdit",{url:"/supplier/edit/:id",component:"supplierEdit"}).state("jobs",{url:"/jobs",component:"jobs"}),e.when("/","dashboard").when("","dashboard")}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]})(),function(){angular.module("app").factory("authService",function(t){var e={},n=t.localStorage;return e.login=function(t,e,r,i){if("admin"===t&&"admin1234"===e)n.setItem("isLoggedIn","true"),r("OK");else{if("admin"!==t&&"admin1234"!==e)return void i("Username and password are incorrect");if("admin"!==t)return void i("Username is incorrect");if("admin1234"!==e)return void i("Password is incorrect")}},e.logout=function(t,e){n.removeItem("isLoggedIn"),t("OK")},e.isLoggedIn=function(){return!!n.getItem("isLoggedIn")},e})}(),function(){angular.module("app").factory("jobsService",function(t){var e={},n="https://mamabison-dev.herokuapp.com/api/v1/jobs",r={"Access-Control-Allow-Origin":"*"};return e.getTotalJobs=function(e,i){t({method:"GET",url:n,headers:r,data:""}).then(function(t){console.log(t),e(t.data.total_jobs)},function(){i(response.statusText)})},e})}(),function(){function t(t,e){var n={},r="https://mamabison-dev.herokuapp.com/api/v1/emaks",i={"Access-Control-Allow-Origin":"*"};return n.seeker=[],n.getSeekersPerPage=function(t,n,o,a){e({method:"GET",url:r+"?page="+t+"&limit="+n,headers:i,data:""}).then(function(t){o(t.data)},function(t){a("Couldn't Fetch Data")})},n.addSeeker=function(t,n,o){e({method:"POST",url:r,headers:i,data:{name:t.name,username:t.username,password:t.password,phone:t.phone,email:t.email,address:t.address,photo:t.photo}}).then(function(t){n(t.status)},function(t){o(t)})},n.deleteSeeker=function(t,n,o){e({method:"DELETE",url:r+"/"+t,headers:i}).then(function(t){n(t.status)},function(t){o(t)})},n.getSeekerById=function(t,n,i){e({method:"GET",url:r+"/"+t,data:""}).then(function(t){n(t.data.data)},function(){i(response.status)})},n.editSeeker=function(t,n,o,a){e({method:"PUT",url:r+"/"+t,headers:i,data:{id:t,name:vm.name,username:vm.username,password:vm.password,phone:vm.phone,email:vm.email,address:vm.address}}).then(function(t){o(t.status)},function(t){a(t)})},n.getTotalSeeker=function(t,n){e({method:"GET",url:r,headers:i,data:""}).then(function(e){t(e.data.total_emak)},function(t){n(t.statusStext)})},n}angular.module("app").factory("seekerService",t),t.$inject=["$window","$http"]}(),function(){angular.module("app").factory("supplierService",function(t){var e={},n="https://mamabison-dev.herokuapp.com/api/v1/suppliers",r={"Access-Control-Allow-Origin":"*"};return e.supplier=[],e.getSupplierPerPage=function(e,i,o,a){t({method:"GET",url:n+"?page="+e+"&limit="+i,headers:r,data:""}).then(function(t){o(t.data),console.log(t)},function(t){a(t.statusText)})},e.getTotalSupplier=function(e,i){t({method:"GET",url:n,headers:r,data:""}).then(function(t){e(t.data.total_supplier)},function(t){i(t.statusText)})},e.getSupplierById=function(e,i,o){t({method:"GET",url:n+"/"+e,headers:r,data:""}).then(function(t){i(t.data.data)},function(t){o(t.statusText)})},e.addSupplier=function(e,i,o){t({method:"POST",url:n,headers:r,data:{name:e.name,username:e.username,email:e.email,password:e.password,phone:e.phone,company_address:e.company_address,company_profile:e.company_profile,photo:e.photo}}).then(function(t){i(t.statusText)},function(t){o(t.statusText)})},e.editSupplier=function(e,i,o,a){t({method:"PUT",url:n,headers:r,data:{id:e,name:i.name,username:i.username,email:i.email,password:i.password,phone:i.phone,company_address:i.company_address,company_profile:i.company_profile,photo:i.photo}}).then(function(t){o(t.statusText)},function(t){a(t.statusText)})},e.deleteSupplier=function(e,i,o){t({method:"DELETE",url:n+"/"+e,headers:r}).then(function(t){i(t.statusText)},function(t){o(t.statusText)})},e})}(),function(){angular.module("app").controller("AppController",function(t,e,n,r){function i(){n.isLoggedIn()||r.go("login")}this.onStart=i,i(),t.onEnter({},function(t){n.isLoggedIn()||r.go("login")})})}()(function(){angular.module("app").controller("NavbarController",function(t,e,n){this.openSideBar=function(){document.querySelector(".side-nav__wrapper").classList.add("side-nav__wrapper--open")},this.logout=function(){t.logout(function(t){"OK"===t&&(e.alert("Logging out"),n.go("login"))},function(t){})}})})()(function(){function t(){var t=document.getElementsByClassName("side-nav__wrapper")[0];this.closeSideBar=function(){t.classList.remove("side-nav__wrapper--open")}}angular.module("app").controller("SideNavController",t),t.$inject=[]})(),function(){angular.module("app").controller("DashboardController",function(t,e,n){var r=this;function i(){t.getTotalJobs(function(t){r.totalJobs=t},function(t){})}function o(){e.getTotalSeeker(function(t){r.totalSeeker=t},function(t){})}function a(){n.getTotalSupplier(function(t){r.totalSupplier=t},function(t){})}r.totalJobs=null,r.totalSeeker=null,r.totalSupplier=null,r.getTotalJobs=i,r.getTotalSeeker=o,r.getTotalSupplier=a,i(),o(),a()})}()(function(){function t(t,e){var n=this;n.seeker=[],n.dataFetched=!1,n.dataPerPage=10,n.totalPage=-1,n.currentPage=null,n.dataStatus="",n.init=function(){n.getSeekersPerPage(1)},n.getSeekersPerPage=function(t){if(n.currentPage===t)return;if(0===t)return;if(t===n.totalPage.length+1)return;n.dataFetched=!1,n.currentPage=t,n.dataStatus="Fetching data...",e.getSeekersPerPage(t,n.dataPerPage,function(t){n.seeker=t.data,n.totalPage=new Array(t.total_page),n.dataFetched=!0},function(t){n.dataStatus="Couldn't fetch data. Try again later"})},n.deleteSeeker=function(t){n.dataFetched=!1,e.deleteSeeker(t,function(t){n.currentPage=null,n.init()},function(t){console.log(t)})}}angular.module("app").controller("SeekerController",t),t.$inject=["$window","seekerService"]})(),function(){angular.module("app").controller("JobsController",function(){})}()(function(){angular.module("app").controller("loginController",function(t,e,n){var r=this;r.username=null,r.password=null,r.login=function(){if(!r.username||!r.password)return;t.login(r.username,r.password,function(t){"OK"===t&&e.go("dashboard")},function(t){n.alert(t)})}})})(),function(){function t(t,e,n){var r=this;r.name=null,r.username=null,r.password=null,r.email=null,r.phone=null,r.address=null,r.photo={filename:"",filetype:"",filesize:"",base64:""},r.addSeeker=function(){if(!(r.name&&r.username&&r.password&&r.email))return;var t={name:r.name,username:r.username,password:r.password,email:r.email,phone:r.phone,address:r.address,photo:"data:"+r.photo.filetype+";base64,"+r.photo.base64};console.log(t),n.addSeeker(t,function(t){r.name=null,r.username=null,r.password=null,r.email=null,r.phone=null,r.address=null,r.photo=null,e.go("seeker"),console.log(t)},function(t){console.log(t)})}}angular.module("app").controller("SeekerAddController",t),t.$inject=["$window","$state","seekerService"]}(),function(){angular.module("app").controller("supplierController",function(t,e,n,r){var i=this;function o(e){i.currentPage!==e&&0!==e&&e!==i.totalPage.length+1&&(i.dataFetched=!1,i.currentPage=e,t.getSupplierPerPage(e,i.dataPerPage,function(t){i.supplier=t.data,i.totalPage=new Array(t.total_page),i.dataFetched=!0},function(t){r.alert(t)}))}i.supplier=[],i.dataFetched=!1,i.dataPerPage=10,i.totalPage=-1,i.currentPage=null,i.getSupplierPerPage=o,i.deleteSupplier=function(e){i.dataFetched=!1,t.deleteSupplier(e,function(t){r.alert(t),i.currentPage=null,i.getSupplierPerPage(1)},function(t){r.alert(t)})},o(1)})}(),function(){function t(t,e,n,r){var i=this;i.id=n.id,i.dataSeeker={},i.name=null,i.username=null,i.password=null,i.email=null,i.phone=null,i.address=null,i.photo={filename:"",filetype:"",filesize:"",base64:""},i.init=function(){i.getSeekerById()},i.getSeekerById=function(){t.getSeekerById(i.id,function(t){i.name=t.name,i.username=t.username,i.password=t.password,i.phone=t.phone,i.email=t.email,i.phone=t.phone,i.address=t.address,i.photo=t.photo},function(t){console.log(t)})},i.editSeeker=function(){if(!(i.name&&i.username&&i.password&&i.email))return;var n={name:i.name,username:i.username,password:i.password,email:i.email,phone:i.phone,address:i.address,photo:"data:"+i.photo.filetype+";base64,"+i.photo.base64};t.editSeeker(i.id,n,function(t){i.name=null,i.username=null,i.password=null,i.email=null,i.phone=null,i.address=null,i.photo={filename:"",filetype:"",filesize:"",base64:""},console.log(t),e.go("seeker")},function(t){console.log(t)})}}angular.module("app").controller("SeekerEditController",t),t.$inject=["seekerService","$state","$stateParams","$window"]}(),function(){angular.module("app").controller("supplierAddController",function(t,e){var n=this;n.name=null,n.username=null,n.email=null,n.password=null,n.photo={filename:"",filetype:"",filesize:"",base64:""},n.company_address=null,n.company_profile=null,n.addSupplier=function(){if(!(n.name&&n.username&&n.email&&n.password&&n.phone&&n.company_address&&n.company_profile&&n.photo.base64))return;var r={name:n.name,username:n.username,email:n.email,password:n.password,phone:n.phone,company_address:n.company_address,company_profile:n.company_profile,photo:"data:"+n.photo.filetype+";base64,"+n.photo.base64};console.log(r),t.addSupplier(r,function(t){e.alert(t),n.name=null,n.username=null,n.email=null,n.password=null,n.phone=null,n.company_address=null,n.company_profile=null,n.photo=null},function(t){e.alert(t)})}})}(),function(){angular.module("app").controller("supplierEditCtrl",function(t,e,n,r){var i=this;function o(){t.getSupplierById(n.id,function(t){i.currentSupplier=t,i.name=i.currentSupplier.name,i.username=i.currentSupplier.username,i.email=i.currentSupplier.email,i.phone=1*i.currentSupplier.phone,i.company_address=i.currentSupplier.company_address,i.company_profile=i.currentSupplier.company_profile,i.photo.url=i.currentSupplier.photo.url},function(t){r.alert(t)})}i.currentSupplier={},i.id=n.id,i.name=null,i.username=null,i.email=null,i.password=null,i.phone=null,i.photo={url:"",filename:"",filetype:"",filesize:"",base64:""},i.company_address=null,i.company_profile=null,i.getSupplierById=o,i.editSupplier=function(){if(!(i.name&&i.username&&i.email&&i.password&&i.phone&&i.company_address&&i.company_profile&&i.photo))return;var n={id:i.id,name:i.name,username:i.username,email:i.email,password:i.password,phone:i.phone,company_address:i.company_address,company_profile:i.company_profile,photo:"data:"+i.photo.filetype+";base64,"+i.photo.base64};t.editSupplier(n,function(t){r.alert(t)},function(t){r.alert(t)}),i.name=null,i.username=null,i.email=null,i.password=null,i.phone=null,i.photo={filename:"",filetype:"",filesize:"",base64:""},i.company_address=null,i.company_profile=null,e.go("supplier")},o()})}(),(void angular.module("app").component("app",{templateUrl:"./src/app/app.template.html",controller:"AppController",controllerAs:"vm"}))(function(){angular.module("app").component("navbar",{templateUrl:"./src/components/navbar/navbar.template.html",controller:"NavbarController",controllerAs:"vm"})})()(function(){angular.module("app").component("sideNav",{templateUrl:"./src/components/sideNav/sidenav.template.html",controller:"SideNavController",controllerAs:"vm"})})(),angular.module("app").component("dashboard",{templateUrl:"./src/views/dashboard/dashboard.template.html",controller:"DashboardController",controllerAs:"vm"}),angular.module("app").component("seeker",{templateUrl:"./src/views/seeker/seeker.template.html",controller:"SeekerController",controllerAs:"vm"}),(void angular.module("app").component("jobs",{templateUrl:"./src/views/jobs/jobs.template.html",controller:"JobsController",controllerAs:"vm"}))(function(){angular.module("app").component("login",{templateUrl:"./src/views/login/login.template.html",controller:"loginController",controllerAs:"vm"})})(),angular.module("app").component("seekerAdd",{templateUrl:"./src/views/seekerAdd/seekerAdd.template.html",controller:"SeekerAddController",controllerAs:"vm"}),(void angular.module("app").component("supplier",{templateUrl:"./src/views/supplier/supplier.template.html",controller:"supplierController",controllerAs:"vm"}))(function(){angular.module("app").component("seekerEdit",{templateUrl:"./src/views/seekerEdit/seekerEdit.template.html",controller:"SeekerEditController",controllerAs:"vm"})})(),angular.module("app").component("supplierAdd",{templateUrl:"src/views/supplierAdd/supplierAdd.template.html",controller:"supplierAddController",controllerAs:"vm"}),angular.module("app").component("supplierEdit",{templateUrl:"src/views/supplierEdit/supplierEdit.template.html",controller:"supplierEditCtrl",controllerAs:"vm"});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXIuanMiLCJhbmd1bGFyLXVpLXJvdXRlci5qcyIsImFuZ3VsYXItYmFzZTY0LXVwbG9hZC5qcyIsImFwcC9hcHAubW9kdWxlLmpzIiwiYXBwL2FwcC5yb3V0ZXMuanMiLCJzZXJ2aWNlcy9hdXRoLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9qb2JzLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9zZWVrZXIuc2VydmljZS5qcyIsInNlcnZpY2VzL3N1cHBsaWVyLnNlcnZpY2UuanMiLCJhcHAvYXBwLmNvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL25hdmJhci9uYXZiYXIuY29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvc2lkZU5hdi9zaWRlbmF2LmNvbnRyb2xsZXIuanMiLCJ2aWV3cy9kYXNoYm9hcmQvZGFzaGJvYXJkLmNvbnRyb2xsZXIuanMiLCJ2aWV3cy9zZWVrZXIvc2Vla2VyLmNvbnRyb2xsZXIuanMiLCJ2aWV3cy9qb2JzL2pvYnMuY29udHJvbGxlci5qcyIsInZpZXdzL2xvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJ2aWV3cy9zZWVrZXJBZGQvc2Vla2VyQWRkLmNvbnRyb2xsZXIuanMiLCJ2aWV3cy9zdXBwbGllci9zdXBwbGllci5jb250cm9sbGVyLmpzIiwidmlld3Mvc2Vla2VyRWRpdC9zZWVrZXJFZGl0LmNvbnRyb2xsZXIuanMiLCJ2aWV3cy9zdXBwbGllckFkZC9zdXBwbGllckFkZC5jb250cm9sbGVyLmpzIiwidmlld3Mvc3VwcGxpZXJFZGl0L3N1cHBsaWVyRWRpdC5jb250cm9sbGVyLmpzIiwiYXBwL2FwcC5jb21wb25lbnQuanMiLCJjb21wb25lbnRzL25hdmJhci9uYXZiYXIuY29tcG9uZW50LmpzIiwiY29tcG9uZW50cy9zaWRlTmF2L3NpZGVuYXYuY29tcG9uZW50LmpzIiwidmlld3MvZGFzaGJvYXJkL2Rhc2hib2FyZC5jb21wb25lbnQuanMiLCJ2aWV3cy9zZWVrZXIvc2Vla2VyLmNvbXBvbmVudC5qcyIsInZpZXdzL2pvYnMvam9icy5jb21wb25lbnQuanMiLCJ2aWV3cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuanMiLCJ2aWV3cy9zZWVrZXJBZGQvc2Vla2VyQWRkLmNvbXBvbmVudC5qcyIsInZpZXdzL3N1cHBsaWVyL3N1cHBsaWVyLmNvbXBvbmVudC5qcyIsInZpZXdzL3NlZWtlckVkaXQvc2Vla2VyRWRpdC5jb21wb25lbnQuanMiLCJ2aWV3cy9zdXBwbGllckFkZC9zdXBwbGllckFkZC5jb21wb25lbnQuanMiLCJ2aWV3cy9zdXBwbGllckVkaXQvc3VwcGxpZXJFZGl0LmNvbXBvbmVudC5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJtaW5FcnJDb25maWciLCJvYmplY3RNYXhEZXB0aCIsImVycm9ySGFuZGxpbmdDb25maWciLCJjb25maWciLCJpc09iamVjdCIsImlzRGVmaW5lZCIsImlzVmFsaWRPYmplY3RNYXhEZXB0aCIsIk5hTiIsIm1heERlcHRoIiwiaXNOdW1iZXIiLCJtaW5FcnIiLCJtb2R1bGUiLCJFcnJvckNvbnN0cnVjdG9yIiwiRXJyb3IiLCJwYXJhbVByZWZpeCIsImkiLCJjb2RlIiwiYXJndW1lbnRzIiwidGVtcGxhdGUiLCJtZXNzYWdlIiwidGVtcGxhdGVBcmdzIiwic2xpY2VBcmdzIiwibWFwIiwiYXJnIiwidG9EZWJ1Z1N0cmluZyIsInJlcGxhY2UiLCJtYXRjaCIsImluZGV4Iiwic2xpY2UiLCJsZW5ndGgiLCJlbmNvZGVVUklDb21wb25lbnQiLCJSRUdFWF9TVFJJTkdfUkVHRVhQIiwiVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsImxvd2VyY2FzZSIsInN0cmluZyIsImlzU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJ1cHBlcmNhc2UiLCJ0b1VwcGVyQ2FzZSIsInMiLCJjaCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJtc2llIiwianFMaXRlIiwialF1ZXJ5IiwiYW5ndWxhck1vZHVsZSIsInNwbGljZSIsInB1c2giLCJ0b1N0cmluZyIsImdldFByb3RvdHlwZU9mIiwibmdNaW5FcnIiLCJhbmd1bGFyIiwidWlkIiwiaXNBcnJheUxpa2UiLCJvYmoiLCJpc1dpbmRvdyIsImlzQXJyYXkiLCJBcnJheSIsIml0ZW0iLCJmb3JFYWNoIiwiaXRlcmF0b3IiLCJjb250ZXh0Iiwia2V5IiwiaXNGdW5jdGlvbiIsImNhbGwiLCJpc1ByaW1pdGl2ZSIsImlzQmxhbmtPYmplY3QiLCJmb3JFYWNoU29ydGVkIiwia2V5cyIsInNvcnQiLCJyZXZlcnNlUGFyYW1zIiwiaXRlcmF0b3JGbiIsInZhbHVlIiwibmV4dFVpZCIsInNldEhhc2hLZXkiLCJoIiwiJCRoYXNoS2V5IiwiYmFzZUV4dGVuZCIsImRzdCIsIm9ianMiLCJkZWVwIiwiaWkiLCJqIiwiamoiLCJzcmMiLCJpc0RhdGUiLCJEYXRlIiwidmFsdWVPZiIsImlzUmVnRXhwIiwiUmVnRXhwIiwibm9kZU5hbWUiLCJjbG9uZU5vZGUiLCJpc0VsZW1lbnQiLCJjbG9uZSIsImV4dGVuZCIsIm1lcmdlIiwidG9JbnQiLCJzdHIiLCJwYXJzZUludCIsImRvY3VtZW50IiwiZG9jdW1lbnRNb2RlIiwiaXNOdW1iZXJOYU4iLCJOdW1iZXIiLCJpc05hTiIsIm51bSIsImluaGVyaXQiLCJwYXJlbnQiLCJleHRyYSIsImNyZWF0ZSIsIm5vb3AiLCJpZGVudGl0eSIsIiQiLCJ2YWx1ZUZuIiwiaGFzQ3VzdG9tVG9TdHJpbmciLCJpc1VuZGVmaW5lZCIsIiRpbmplY3QiLCJpc0Vycm9yIiwiaXNTY29wZSIsIiRldmFsQXN5bmMiLCIkd2F0Y2giLCJpc0Jvb2xlYW4iLCJpc1Byb21pc2VMaWtlIiwidGhlbiIsIlRZUEVEX0FSUkFZX1JFR0VYUCIsInRyaW0iLCJlc2NhcGVGb3JSZWdleHAiLCJub2RlIiwicHJvcCIsImF0dHIiLCJmaW5kIiwibm9kZU5hbWVfIiwiZWxlbWVudCIsImluY2x1ZGVzIiwiYXJyYXkiLCJpbmRleE9mIiwiYXJyYXlSZW1vdmUiLCJjb3B5Iiwic291cmNlIiwiZGVzdGluYXRpb24iLCJzdGFja1NvdXJjZSIsInN0YWNrRGVzdCIsInRlc3QiLCJjb3B5UmVjdXJzZSIsImNvcHlFbGVtZW50IiwibmVlZHNSZWN1cnNlIiwiY29uc3RydWN0b3IiLCJidWZmZXIiLCJieXRlT2Zmc2V0IiwiY29waWVkIiwiQXJyYXlCdWZmZXIiLCJieXRlTGVuZ3RoIiwiVWludDhBcnJheSIsInNldCIsInJlIiwibGFzdEluZGV4IiwidHlwZSIsImNvcHlUeXBlIiwidW5kZWZpbmVkIiwic2ltcGxlQ29tcGFyZSIsImEiLCJiIiwiZXF1YWxzIiwibzEiLCJvMiIsImtleVNldCIsInQxIiwiZ2V0VGltZSIsImNyZWF0ZU1hcCIsImNoYXJBdCIsImNzcCIsInJ1bGVzIiwibmdDc3BFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm5nQ3NwQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwibm9VbnNhZmVFdmFsIiwibm9JbmxpbmVTdHlsZSIsIkZ1bmN0aW9uIiwiZSIsImpxIiwibmFtZV8iLCJlbCIsInByZWZpeCIsIm5hbWUiLCJuZ0F0dHJQcmVmaXhlcyIsImNvbmNhdCIsImFycmF5MSIsImFycmF5MiIsImFyZ3MiLCJzdGFydEluZGV4IiwiYmluZCIsInNlbGYiLCJmbiIsImN1cnJ5QXJncyIsImFwcGx5IiwidG9Kc29uUmVwbGFjZXIiLCJ2YWwiLCJ0b0pzb24iLCJwcmV0dHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZnJvbUpzb24iLCJqc29uIiwicGFyc2UiLCJBTExfQ09MT05TIiwidGltZXpvbmVUb09mZnNldCIsInRpbWV6b25lIiwiZmFsbGJhY2siLCJyZXF1ZXN0ZWRUaW1lem9uZU9mZnNldCIsImNvbnZlcnRUaW1lem9uZVRvTG9jYWwiLCJkYXRlIiwicmV2ZXJzZSIsIm1pbnV0ZXMiLCJkYXRlVGltZXpvbmVPZmZzZXQiLCJnZXRUaW1lem9uZU9mZnNldCIsInRpbWV6b25lT2Zmc2V0Iiwic2V0TWludXRlcyIsImdldE1pbnV0ZXMiLCJzdGFydGluZ1RhZyIsImVtcHR5IiwiZWxlbUh0bWwiLCJhcHBlbmQiLCJodG1sIiwibm9kZVR5cGUiLCJOT0RFX1RZUEVfVEVYVCIsInRyeURlY29kZVVSSUNvbXBvbmVudCIsImRlY29kZVVSSUNvbXBvbmVudCIsInBhcnNlS2V5VmFsdWUiLCJrZXlWYWx1ZSIsInNwbGl0Iiwic3BsaXRQb2ludCIsInN1YnN0cmluZyIsInRvS2V5VmFsdWUiLCJwYXJ0cyIsImFycmF5VmFsdWUiLCJlbmNvZGVVcmlRdWVyeSIsImpvaW4iLCJlbmNvZGVVcmlTZWdtZW50IiwicGN0RW5jb2RlU3BhY2VzIiwiaXNBdXRvQm9vdHN0cmFwQWxsb3dlZCIsInNjcmlwdCIsImN1cnJlbnRTY3JpcHQiLCJIVE1MU2NyaXB0RWxlbWVudCIsIlNWR1NjcmlwdEVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwiZ2V0TmFtZWRJdGVtIiwiZXZlcnkiLCJsaW5rIiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJsb2NhdGlvbiIsIm9yaWdpbiIsInByb3RvY29sIiwiYWxsb3dBdXRvQm9vdHN0cmFwIiwiYW5ndWxhckluaXQiLCJib290c3RyYXAiLCJhcHBFbGVtZW50IiwiaGFzQXR0cmlidXRlIiwiY2FuZGlkYXRlIiwiY29uc29sZSIsImVycm9yIiwic3RyaWN0RGkiLCJuZ0F0dHIiLCJnZXROZ0F0dHJpYnV0ZSIsIm1vZHVsZXMiLCJkb0Jvb3RzdHJhcCIsImluamVjdG9yIiwidGFnIiwidW5zaGlmdCIsIiRwcm92aWRlIiwiZGVidWdJbmZvRW5hYmxlZCIsIiRjb21waWxlUHJvdmlkZXIiLCJjcmVhdGVJbmplY3RvciIsImludm9rZSIsInNjb3BlIiwiY29tcGlsZSIsIiRhcHBseSIsImRhdGEiLCJOR19FTkFCTEVfREVCVUdfSU5GTyIsIk5HX0RFRkVSX0JPT1RTVFJBUCIsInJlc3VtZUJvb3RzdHJhcCIsImV4dHJhTW9kdWxlcyIsInJlc3VtZURlZmVycmVkQm9vdHN0cmFwIiwicmVsb2FkV2l0aERlYnVnSW5mbyIsInJlbG9hZCIsImdldFRlc3RhYmlsaXR5Iiwicm9vdEVsZW1lbnQiLCJnZXQiLCJTTkFLRV9DQVNFX1JFR0VYUCIsInNuYWtlX2Nhc2UiLCJzZXBhcmF0b3IiLCJsZXR0ZXIiLCJwb3MiLCJiaW5kSlF1ZXJ5RmlyZWQiLCJhc3NlcnRBcmciLCJyZWFzb24iLCJhc3NlcnRBcmdGbiIsImFjY2VwdEFycmF5QW5ub3RhdGlvbiIsImFzc2VydE5vdEhhc093blByb3BlcnR5IiwiZ2V0dGVyIiwicGF0aCIsImJpbmRGblRvU2NvcGUiLCJsYXN0SW5zdGFuY2UiLCJsZW4iLCJnZXRCbG9ja05vZGVzIiwibm9kZXMiLCJibG9ja05vZGVzIiwiZW5kTm9kZSIsIm5leHRTaWJsaW5nIiwiTk9ERV9UWVBFX0VMRU1FTlQiLCJOT0RFX1RZUEVfQ09NTUVOVCIsIk5PREVfVFlQRV9ET0NVTUVOVCIsIk5PREVfVFlQRV9ET0NVTUVOVF9GUkFHTUVOVCIsInNoYWxsb3dDb3B5Iiwic2VlbiIsInZlcnNpb24iLCJmdWxsIiwibWFqb3IiLCJtaW5vciIsImRvdCIsImNvZGVOYW1lIiwiSlFMaXRlIiwiZXhwYW5kbyIsImpxQ2FjaGUiLCJjYWNoZSIsImpxSWQiLCJfZGF0YSIsInRoaXMiLCJEQVNIX0xPV0VSQ0FTRV9SRUdFWFAiLCJNU19IQUNLX1JFR0VYUCIsIk1PVVNFX0VWRU5UX01BUCIsIm1vdXNlbGVhdmUiLCJtb3VzZWVudGVyIiwianFMaXRlTWluRXJyIiwiZm5DYW1lbENhc2VSZXBsYWNlIiwiYWxsIiwia2ViYWJUb0NhbWVsIiwiU0lOR0xFX1RBR19SRUdFWFAiLCJIVE1MX1JFR0VYUCIsIlRBR19OQU1FX1JFR0VYUCIsIlhIVE1MX1RBR19SRUdFWFAiLCJ3cmFwTWFwIiwib3B0aW9uIiwidGhlYWQiLCJjb2wiLCJ0ciIsInRkIiwiX2RlZmF1bHQiLCJqcUxpdGVJc1RleHROb2RlIiwianFMaXRlQWNjZXB0c0RhdGEiLCJqcUxpdGVCdWlsZEZyYWdtZW50IiwidG1wIiwid3JhcCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNyZWF0ZVRleHROb2RlIiwiYXBwZW5kQ2hpbGQiLCJleGVjIiwiaW5uZXJIVE1MIiwibGFzdENoaWxkIiwiY2hpbGROb2RlcyIsImZpcnN0Q2hpbGQiLCJ0ZXh0Q29udGVudCIsIm9wdGdyb3VwIiwidGJvZHkiLCJ0Zm9vdCIsImNvbGdyb3VwIiwiY2FwdGlvbiIsInRoIiwianFMaXRlQ29udGFpbnMiLCJOb2RlIiwiY29udGFpbnMiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsImFyZ0lzU3RyaW5nIiwicGFyc2VkIiwianFMaXRlQWRkTm9kZXMiLCJqcUxpdGVSZWFkeSIsImpxTGl0ZUNsb25lIiwianFMaXRlRGVhbG9jIiwib25seURlc2NlbmRhbnRzIiwiY2xlYW5EYXRhIiwicXVlcnlTZWxlY3RvckFsbCIsImpxTGl0ZU9mZiIsInVuc3VwcG9ydGVkIiwiZXhwYW5kb1N0b3JlIiwianFMaXRlRXhwYW5kb1N0b3JlIiwiZXZlbnRzIiwiaGFuZGxlIiwicmVtb3ZlSGFuZGxlciIsImxpc3RlbmVyRm5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImpxTGl0ZVJlbW92ZURhdGEiLCJleHBhbmRvSWQiLCJuZzMzOSIsIiRkZXN0cm95IiwiY3JlYXRlSWZOZWNlc3NhcnkiLCJqcUxpdGVEYXRhIiwiaXNTaW1wbGVTZXR0ZXIiLCJpc1NpbXBsZUdldHRlciIsIm1hc3NHZXR0ZXIiLCJqcUxpdGVIYXNDbGFzcyIsInNlbGVjdG9yIiwianFMaXRlUmVtb3ZlQ2xhc3MiLCJjc3NDbGFzc2VzIiwic2V0QXR0cmlidXRlIiwiZXhpc3RpbmdDbGFzc2VzIiwibmV3Q2xhc3NlcyIsImNzc0NsYXNzIiwianFMaXRlQWRkQ2xhc3MiLCJyb290IiwiZWxlbWVudHMiLCJqcUxpdGVDb250cm9sbGVyIiwianFMaXRlSW5oZXJpdGVkRGF0YSIsImRvY3VtZW50RWxlbWVudCIsIm5hbWVzIiwicGFyZW50Tm9kZSIsImhvc3QiLCJqcUxpdGVFbXB0eSIsInJlbW92ZUNoaWxkIiwianFMaXRlUmVtb3ZlIiwia2VlcERhdGEiLCJ0cmlnZ2VyIiwicmVhZHlTdGF0ZSIsInNldFRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiSlFMaXRlUHJvdG90eXBlIiwicmVhZHkiLCJlcSIsIkJPT0xFQU5fQVRUUiIsIkJPT0xFQU5fRUxFTUVOVFMiLCJBTElBU0VEX0FUVFIiLCJuZ01pbmxlbmd0aCIsIm5nTWF4bGVuZ3RoIiwibmdNaW4iLCJuZ01heCIsIm5nUGF0dGVybiIsIm5nU3RlcCIsImdldEJvb2xlYW5BdHRyTmFtZSIsImJvb2xlYW5BdHRyIiwiZGVmYXVsdEhhbmRsZXJXcmFwcGVyIiwiZXZlbnQiLCJoYW5kbGVyIiwic3BlY2lhbE1vdXNlSGFuZGxlcldyYXBwZXIiLCJ0YXJnZXQiLCJyZWxhdGVkIiwicmVsYXRlZFRhcmdldCIsIiQkanFMaXRlUHJvdmlkZXIiLCIkZ2V0IiwiaGFzQ2xhc3MiLCJjbGFzc2VzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhhc2hLZXkiLCJuZXh0VWlkRm4iLCJvYmpUeXBlIiwicmVtb3ZlRGF0YSIsImhhc0RhdGEiLCJpbmhlcml0ZWREYXRhIiwiaXNvbGF0ZVNjb3BlIiwiY29udHJvbGxlciIsInJlbW92ZUF0dHIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjc3MiLCJzdHlsZSIsInJldCIsImxvd2VyY2FzZWROYW1lIiwiaXNCb29sZWFuQXR0ciIsInRleHQiLCJnZXRUZXh0IiwiJGR2IiwibXVsdGlwbGUiLCJyZXN1bHQiLCJvcHRpb25zIiwic2VsZWN0ZWQiLCJhcmcxIiwiYXJnMiIsIm5vZGVDb3VudCIsIk1hdGgiLCJtaW4iLCJub2RlVmFsdWUiLCJvbiIsImV2ZW50SGFuZGxlciIsImlzRGVmYXVsdFByZXZlbnRlZCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJldmVudEZucyIsImV2ZW50Rm5zTGVuZ3RoIiwiaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkIiwib3JpZ2luYWxTdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wUHJvcGFnYXRpb24iLCJpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCIsImhhbmRsZXJXcmFwcGVyIiwic3BlY2lhbEhhbmRsZXJXcmFwcGVyIiwiZWxlbSIsInR5cGVzIiwiYWRkSGFuZGxlciIsIm5vRXZlbnRMaXN0ZW5lciIsIm9mZiIsIm9uZSIsIm9uRm4iLCJyZXBsYWNlV2l0aCIsInJlcGxhY2VOb2RlIiwiaW5zZXJ0QmVmb3JlIiwicmVwbGFjZUNoaWxkIiwiY2hpbGRyZW4iLCJjb250ZW50cyIsImNvbnRlbnREb2N1bWVudCIsImNoaWxkIiwicHJlcGVuZCIsIndyYXBOb2RlIiwid3JhcHBlciIsInJlbW92ZSIsImRldGFjaCIsImFmdGVyIiwibmV3RWxlbWVudCIsInRvZ2dsZUNsYXNzIiwiY29uZGl0aW9uIiwiY2xhc3NOYW1lIiwiY2xhc3NDb25kaXRpb24iLCJuZXh0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0cmlnZ2VySGFuZGxlciIsImV4dHJhUGFyYW1ldGVycyIsImR1bW15RXZlbnQiLCJldmVudEZuc0NvcHkiLCJoYW5kbGVyQXJncyIsImV2ZW50TmFtZSIsInByZXZlbnREZWZhdWx0IiwiYXJnMyIsInVuYmluZCIsIm5hbktleSIsIk5nTWFwU2hpbSIsIl9rZXlzIiwiX3ZhbHVlcyIsIl9sYXN0S2V5IiwiX2xhc3RJbmRleCIsIl9pZHgiLCJfdHJhbnNmb3JtS2V5IiwiaWR4IiwiZGVsZXRlIiwiTmdNYXAiLCIkJE1hcFByb3ZpZGVyIiwiQVJST1dfQVJHIiwiRk5fQVJHUyIsIkZOX0FSR19TUExJVCIsIkZOX0FSRyIsIlNUUklQX0NPTU1FTlRTIiwiJGluamVjdG9yTWluRXJyIiwic3RyaW5naWZ5Rm4iLCJleHRyYWN0QXJncyIsImZuVGV4dCIsIm1vZHVsZXNUb0xvYWQiLCJJTlNUQU5USUFUSU5HIiwicHJvdmlkZXJTdWZmaXgiLCJsb2FkZWRNb2R1bGVzIiwicHJvdmlkZXJDYWNoZSIsInByb3ZpZGVyIiwic3VwcG9ydE9iamVjdCIsImZhY3RvcnkiLCJzZXJ2aWNlIiwiJGluamVjdG9yIiwiaW5zdGFudGlhdGUiLCJjb25zdGFudCIsImluc3RhbmNlQ2FjaGUiLCJkZWNvcmF0b3IiLCJzZXJ2aWNlTmFtZSIsImRlY29yRm4iLCJvcmlnUHJvdmlkZXIiLCJwcm92aWRlckluamVjdG9yIiwib3JpZyRnZXQiLCJvcmlnSW5zdGFuY2UiLCJpbnN0YW5jZUluamVjdG9yIiwiJGRlbGVnYXRlIiwiY3JlYXRlSW50ZXJuYWxJbmplY3RvciIsImNhbGxlciIsInByb3RvSW5zdGFuY2VJbmplY3RvciIsInJ1bkJsb2NrcyIsImxvYWRNb2R1bGVzIiwibG9hZE5ld01vZHVsZXMiLCJtb2RzIiwiZGVsZWdhdGUiLCJwcm92aWRlcl8iLCJmYWN0b3J5Rm4iLCJlbmZvcmNlIiwibW9kdWxlRm4iLCJyZXF1aXJlcyIsIl9ydW5CbG9ja3MiLCJydW5JbnZva2VRdWV1ZSIsIl9pbnZva2VRdWV1ZSIsIl9jb25maWdCbG9ja3MiLCJzdGFjayIsInF1ZXVlIiwiaW52b2tlQXJncyIsImdldFNlcnZpY2UiLCJlcnIiLCJzaGlmdCIsImluamVjdGlvbkFyZ3MiLCJsb2NhbHMiLCIkJGFubm90YXRlIiwiZnVuYyIsIiQkbmdJc0NsYXNzIiwiaXNDbGFzcyIsIlR5cGUiLCJjdG9yIiwiYW5ub3RhdGUiLCJoYXMiLCIkQW5jaG9yU2Nyb2xsUHJvdmlkZXIiLCJhdXRvU2Nyb2xsaW5nRW5hYmxlZCIsImRpc2FibGVBdXRvU2Nyb2xsaW5nIiwiJHdpbmRvdyIsIiRsb2NhdGlvbiIsIiRyb290U2NvcGUiLCJzY3JvbGxUbyIsInNjcm9sbEludG9WaWV3Iiwib2Zmc2V0Iiwic2Nyb2xsIiwieU9mZnNldCIsImdldENvbXB1dGVkU3R5bGUiLCJwb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImJvdHRvbSIsImdldFlPZmZzZXQiLCJlbGVtVG9wIiwidG9wIiwic2Nyb2xsQnkiLCJoYXNoIiwiZWxtIiwibGlzdCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0RWxlbWVudHNCeU5hbWUiLCJzb21lIiwibmV3VmFsIiwib2xkVmFsIiwiYWN0aW9uIiwid2luIiwibGFzdCIsInVuZGVyc2NvcmUiLCIkYW5pbWF0ZU1pbkVyciIsIkVMRU1FTlRfTk9ERSIsIk5HX0FOSU1BVEVfQ0xBU1NOQU1FIiwibWVyZ2VDbGFzc2VzIiwicHJlcGFyZUFuaW1hdGVPcHRpb25zIiwiJCRDb3JlQW5pbWF0ZUpzUHJvdmlkZXIiLCIkJENvcmVBbmltYXRlUXVldWVQcm92aWRlciIsInBvc3REaWdlc3RRdWV1ZSIsInBvc3REaWdlc3RFbGVtZW50cyIsIiQkQW5pbWF0ZVJ1bm5lciIsImVuYWJsZWQiLCJwaW4iLCJkb21PcGVyYXRpb24iLCJhZGQiLCJjbGFzc2VzQWRkZWQiLCJjbGFzc2VzUmVtb3ZlZCIsImZyb20iLCJ0byIsInVwZGF0ZURhdGEiLCIkJHBvc3REaWdlc3QiLCJoYW5kbGVDU1NDbGFzc0NoYW5nZXMiLCJydW5uZXIiLCJjb21wbGV0ZSIsImNoYW5nZWQiLCJleGlzdGluZyIsImtsYXNzIiwic3BsaXRDbGFzc2VzIiwidG9BZGQiLCJ0b1JlbW92ZSIsInN0YXR1cyIsIiRBbmltYXRlUHJvdmlkZXIiLCJjbGFzc05hbWVGaWx0ZXIiLCJjdXN0b21GaWx0ZXIiLCIkJHJlZ2lzdGVyZWRBbmltYXRpb25zIiwicmVnaXN0ZXIiLCJzdWJzdHIiLCJmaWx0ZXJGbiIsImV4cHJlc3Npb24iLCIkJGFuaW1hdGVRdWV1ZSIsImRvbUluc2VydCIsInBhcmVudEVsZW1lbnQiLCJhZnRlckVsZW1lbnQiLCJhZnRlck5vZGUiLCJleHRyYWN0RWxlbWVudE5vZGUiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiY2FuY2VsIiwiZW5kIiwiZW50ZXIiLCJtb3ZlIiwibGVhdmUiLCJhZGRjbGFzcyIsInNldENsYXNzIiwiYW5pbWF0ZSIsInRlbXBDbGFzc2VzIiwiJCRBbmltYXRlQXN5bmNSdW5GYWN0b3J5UHJvdmlkZXIiLCIkJHJBRiIsIndhaXRRdWV1ZSIsIndhaXRGb3JUaWNrIiwicGFzc2VkIiwiY2FsbGJhY2siLCIkJEFuaW1hdGVSdW5uZXJGYWN0b3J5UHJvdmlkZXIiLCIkcSIsIiRzbmlmZmVyIiwiJCRhbmltYXRlQXN5bmNSdW4iLCIkJGlzRG9jdW1lbnRIaWRkZW4iLCIkdGltZW91dCIsIkFuaW1hdGVSdW5uZXIiLCJzZXRIb3N0IiwicmFmVGljayIsIl9kb25lQ2FsbGJhY2tzIiwiX3RpY2siLCJfc3RhdGUiLCJjaGFpbiIsInJlc3BvbnNlIiwicnVubmVycyIsImNvdW50Iiwib25Qcm9ncmVzcyIsImRvbmUiLCJwcm9ncmVzcyIsImdldFByb21pc2UiLCJwcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlc29sdmVIYW5kbGVyIiwicmVqZWN0SGFuZGxlciIsImNhdGNoIiwiZmluYWxseSIsInBhdXNlIiwicmVzdW1lIiwiX3Jlc29sdmUiLCIkQ29yZUFuaW1hdGVDc3NQcm92aWRlciIsImluaXRpYWxPcHRpb25zIiwiJCRwcmVwYXJlZCIsImNsZWFudXBTdHlsZXMiLCJjbG9zZWQiLCJzdGFydCIsInJ1biIsImFwcGx5QW5pbWF0aW9uQ29udGVudHMiLCIkQnJvd3NlclByb3ZpZGVyIiwiJGxvZyIsIiRkb2N1bWVudCIsImhpc3RvcnkiLCJjbGVhclRpbWVvdXQiLCJwZW5kaW5nRGVmZXJJZHMiLCJpc01vY2siLCJvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCIsIm91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcyIsImNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0IiwicG9wIiwiJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCIsIiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQiLCJub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzIiwiY2FjaGVkU3RhdGUiLCJsYXN0SGlzdG9yeVN0YXRlIiwibGFzdEJyb3dzZXJVcmwiLCJiYXNlRWxlbWVudCIsInBlbmRpbmdMb2NhdGlvbiIsImdldEN1cnJlbnRTdGF0ZSIsInN0YXRlIiwiY2FjaGVTdGF0ZSIsInVybCIsInNhbWVTdGF0ZSIsInNhbWVCYXNlIiwic3RyaXBIYXNoIiwidXJsQ2hhbmdlTGlzdGVuZXJzIiwidXJsQ2hhbmdlSW5pdCIsImNhY2hlU3RhdGVBbmRGaXJlVXJsQ2hhbmdlIiwiZmlyZVN0YXRlT3JVcmxDaGFuZ2UiLCJsYXN0Q2FjaGVkU3RhdGUiLCJwcmV2TGFzdEhpc3RvcnlTdGF0ZSIsImxpc3RlbmVyIiwib25VcmxDaGFuZ2UiLCIkJGFwcGxpY2F0aW9uRGVzdHJveWVkIiwiJCRjaGVja1VybENoYW5nZSIsImJhc2VIcmVmIiwiZGVmZXIiLCJkZWxheSIsInRpbWVvdXRJZCIsImRlZmVySWQiLCIkQ2FjaGVGYWN0b3J5UHJvdmlkZXIiLCJjYWNoZXMiLCJjYWNoZUZhY3RvcnkiLCJjYWNoZUlkIiwic2l6ZSIsInN0YXRzIiwiaWQiLCJjYXBhY2l0eSIsIk1BWF9WQUxVRSIsImxydUhhc2giLCJmcmVzaEVuZCIsInN0YWxlRW5kIiwicHV0IiwicmVmcmVzaCIsImxydUVudHJ5IiwicCIsIm4iLCJyZW1vdmVBbGwiLCJkZXN0cm95IiwiaW5mbyIsImVudHJ5IiwibmV4dEVudHJ5IiwicHJldkVudHJ5IiwiJFRlbXBsYXRlQ2FjaGVQcm92aWRlciIsIiRjYWNoZUZhY3RvcnkiLCIkY29tcGlsZU1pbkVyciIsIl9VTklOSVRJQUxJWkVEX1ZBTFVFIiwiJENvbXBpbGVQcm92aWRlciIsIiQkc2FuaXRpemVVcmlQcm92aWRlciIsImhhc0RpcmVjdGl2ZXMiLCJTdWZmaXgiLCJDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAiLCJDTEFTU19ESVJFQ1RJVkVfUkVHRVhQIiwiQUxMX09SX05PVEhJTkdfQVRUUlMiLCJpdGVtcyIsIm1ha2VNYXAiLCJSRVFVSVJFX1BSRUZJWF9SRUdFWFAiLCJFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQIiwiYmluZGluZ0NhY2hlIiwicGFyc2VJc29sYXRlQmluZGluZ3MiLCJkaXJlY3RpdmVOYW1lIiwiaXNDb250cm9sbGVyIiwiTE9DQUxfUkVHRVhQIiwiYmluZGluZ3MiLCJkZWZpbml0aW9uIiwic2NvcGVOYW1lIiwibW9kZSIsImNvbGxlY3Rpb24iLCJvcHRpb25hbCIsImF0dHJOYW1lIiwicGFyc2VEaXJlY3RpdmVCaW5kaW5ncyIsImRpcmVjdGl2ZSIsImJpbmRUb0NvbnRyb2xsZXIiLCJyZWdpc3RlckRpcmVjdGl2ZSIsImRpcmVjdGl2ZUZhY3RvcnkiLCJhc3NlcnRWYWxpZERpcmVjdGl2ZU5hbWUiLCIkZXhjZXB0aW9uSGFuZGxlciIsImRpcmVjdGl2ZXMiLCJwcmlvcml0eSIsInJlcXVpcmUiLCJyZXN0cmljdCIsImdldERpcmVjdGl2ZVJlc3RyaWN0IiwiJCRtb2R1bGVOYW1lIiwiY29tcG9uZW50IiwicmVnaXN0ZXJDb21wb25lbnQiLCJtYWtlSW5qZWN0YWJsZSIsInRFbGVtZW50IiwidEF0dHJzIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJ0ZW1wbGF0ZVVybCIsImRkbyIsImNvbnRyb2xsZXJBcyIsImlkZW50IiwiQ05UUkxfUkVHIiwiaWRlbnRpZmllckZvckNvbnRyb2xsZXIiLCJ0cmFuc2NsdWRlIiwiYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QiLCJyZWdleHAiLCJpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QiLCJwcmVBc3NpZ25CaW5kaW5nc0VuYWJsZWQiLCJzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQiLCJUVEwiLCJvbkNoYW5nZXNUdGwiLCJjb21tZW50RGlyZWN0aXZlc0VuYWJsZWRDb25maWciLCJjb21tZW50RGlyZWN0aXZlc0VuYWJsZWQiLCJjc3NDbGFzc0RpcmVjdGl2ZXNFbmFibGVkQ29uZmlnIiwiY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZCIsIiRpbnRlcnBvbGF0ZSIsIiR0ZW1wbGF0ZVJlcXVlc3QiLCIkcGFyc2UiLCIkY29udHJvbGxlciIsIiRzY2UiLCIkYW5pbWF0ZSIsIiQkc2FuaXRpemVVcmkiLCJvbkNoYW5nZXNRdWV1ZSIsIlNJTVBMRV9BVFRSX05BTUUiLCJzcGVjaWFsQXR0ckhvbGRlciIsImZsdXNoT25DaGFuZ2VzUXVldWUiLCJlcnJvcnMiLCJBdHRyaWJ1dGVzIiwiYXR0cmlidXRlc1RvQ29weSIsImwiLCIkYXR0ciIsIiQkZWxlbWVudCIsInNhZmVBZGRDbGFzcyIsIiRub3JtYWxpemUiLCJkaXJlY3RpdmVOb3JtYWxpemUiLCIkYWRkQ2xhc3MiLCJjbGFzc1ZhbCIsIiRyZW1vdmVDbGFzcyIsIiR1cGRhdGVDbGFzcyIsIm9sZENsYXNzZXMiLCJ0b2tlbkRpZmZlcmVuY2UiLCIkc2V0Iiwid3JpdGVBdHRyIiwiYm9vbGVhbktleSIsImFsaWFzZWRLZXkiLCJvYnNlcnZlciIsInRyaW1tZWRTcmNzZXQiLCJwYXR0ZXJuIiwicmF3VXJpcyIsIm5iclVyaXNXaXRoMnBhcnRzIiwiZmxvb3IiLCJpbm5lcklkeCIsImxhc3RUdXBsZSIsImF0dHJpYnV0ZSIsInJlbW92ZU5hbWVkSXRlbSIsInNldE5hbWVkSXRlbSIsInNldFNwZWNpYWxBdHRyIiwiJCRvYnNlcnZlcnMiLCIkb2JzZXJ2ZSIsImF0dHJzIiwibGlzdGVuZXJzIiwiJCRpbnRlciIsInN0YXJ0U3ltYm9sIiwiZW5kU3ltYm9sIiwiZGVub3JtYWxpemVUZW1wbGF0ZSIsIk5HX0FUVFJfQklORElORyIsIk1VTFRJX0VMRU1FTlRfRElSX1JFIiwiJCRhZGRCaW5kaW5nSW5mbyIsImJpbmRpbmciLCIkJGFkZEJpbmRpbmdDbGFzcyIsIiQkYWRkU2NvcGVJbmZvIiwiaXNvbGF0ZWQiLCJub1RlbXBsYXRlIiwiZGF0YU5hbWUiLCIkJGFkZFNjb3BlQ2xhc3MiLCIkJGNyZWF0ZUNvbW1lbnQiLCJjb21tZW50IiwiY29udGVudCIsImNyZWF0ZUNvbW1lbnQiLCIkY29tcGlsZU5vZGVzIiwidHJhbnNjbHVkZUZuIiwibWF4UHJpb3JpdHkiLCJpZ25vcmVEaXJlY3RpdmUiLCJwcmV2aW91c0NvbXBpbGVDb250ZXh0IiwiY29tcG9zaXRlTGlua0ZuIiwiY29tcGlsZU5vZGVzIiwibmFtZXNwYWNlIiwiY2xvbmVDb25uZWN0Rm4iLCJuZWVkc05ld1Njb3BlIiwiJHBhcmVudCIsIiRuZXciLCIkbGlua05vZGUiLCJwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiIsInRyYW5zY2x1ZGVDb250cm9sbGVycyIsImZ1dHVyZVBhcmVudEVsZW1lbnQiLCIkJGJvdW5kVHJhbnNjbHVkZSIsIndyYXBUZW1wbGF0ZSIsImNvbnRyb2xsZXJOYW1lIiwiaW5zdGFuY2UiLCJub2RlTGlzdCIsIiRyb290RWxlbWVudCIsIm5vZGVMaW5rRm4iLCJjaGlsZExpbmtGbiIsImxpbmtGbkZvdW5kIiwibm9kZUxpbmtGbkZvdW5kIiwibGlua0ZucyIsIm5vdExpdmVMaXN0IiwibWVyZ2VDb25zZWN1dGl2ZVRleHROb2RlcyIsImNvbGxlY3REaXJlY3RpdmVzIiwiYXBwbHlEaXJlY3RpdmVzVG9Ob2RlIiwidGVybWluYWwiLCJ0cmFuc2NsdWRlT25UaGlzRWxlbWVudCIsInRlbXBsYXRlT25UaGlzRWxlbWVudCIsImNoaWxkU2NvcGUiLCJjaGlsZEJvdW5kVHJhbnNjbHVkZUZuIiwic3RhYmxlTm9kZUxpc3QiLCJub2RlTGlzdExlbmd0aCIsImNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuIiwic2libGluZyIsInByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4iLCJib3VuZFRyYW5zY2x1ZGVGbiIsInRyYW5zY2x1ZGVkU2NvcGUiLCJjbG9uZUZuIiwiY29udHJvbGxlcnMiLCJjb250YWluaW5nU2NvcGUiLCIkJHRyYW5zY2x1ZGVkIiwiYm91bmRTbG90cyIsIiQkc2xvdHMiLCJzbG90TmFtZSIsImludGVycG9sYXRlRm4iLCJhdHRyc01hcCIsImFkZERpcmVjdGl2ZSIsIm5OYW1lIiwibmdBdHRyTmFtZSIsImlzTmdBdHRyIiwibkF0dHJzIiwiYXR0clN0YXJ0TmFtZSIsImF0dHJFbmROYW1lIiwiUFJFRklYX1JFR0VYUCIsIm11bHRpRWxlbWVudE1hdGNoIiwiZGlyZWN0aXZlSXNNdWx0aUVsZW1lbnQiLCJhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUiLCJhbmltVmFsIiwidGVtcGxhdGVOb2RlIiwidGVtcGxhdGVOb2RlUGFyZW50IiwiaGFzQ29tcGlsZVBhcmVudCIsImV4cHJlc3Npb25zIiwiY29sbGVjdENvbW1lbnREaXJlY3RpdmVzIiwiYnlQcmlvcml0eSIsImdyb3VwU2NhbiIsImF0dHJTdGFydCIsImF0dHJFbmQiLCJkZXB0aCIsImdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyIiwibGlua0ZuIiwiY29tcGlsYXRpb25HZW5lcmF0b3IiLCJlYWdlciIsImNvbXBpbGVkIiwiY29tcGlsZU5vZGUiLCJ0ZW1wbGF0ZUF0dHJzIiwianFDb2xsZWN0aW9uIiwib3JpZ2luYWxSZXBsYWNlRGlyZWN0aXZlIiwicHJlTGlua0ZucyIsInBvc3RMaW5rRm5zIiwiJHRlbXBsYXRlIiwiZGlyZWN0aXZlVmFsdWUiLCJ0ZXJtaW5hbFByaW9yaXR5IiwibmV3U2NvcGVEaXJlY3RpdmUiLCJjb250cm9sbGVyRGlyZWN0aXZlcyIsIm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSIsInRlbXBsYXRlRGlyZWN0aXZlIiwibm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSIsImhhc1RyYW5zY2x1ZGVEaXJlY3RpdmUiLCJoYXNUZW1wbGF0ZSIsImhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlIiwiJGNvbXBpbGVOb2RlIiwicmVwbGFjZURpcmVjdGl2ZSIsImNoaWxkVHJhbnNjbHVkZUZuIiwiZGlkU2NhbkZvck11bHRpcGxlVHJhbnNjbHVzaW9uIiwibWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciIsIiQkc3RhcnQiLCIkJGVuZCIsImFzc2VydE5vRHVwbGljYXRlIiwiJCR0bGIiLCJjYW5kaWRhdGVEaXJlY3RpdmUiLCJzY2FubmluZ0luZGV4IiwiJCRwYXJlbnROb2RlIiwic2xvdHMiLCJzbG90TWFwIiwiZmlsbGVkU2xvdHMiLCJlbGVtZW50U2VsZWN0b3IiLCJmaWxsZWQiLCIkJGlzb2xhdGVTY29wZSIsIiQkbmV3U2NvcGUiLCJyZW1vdmVDb21tZW50cyIsInRlbXBsYXRlTmFtZXNwYWNlIiwibmV3VGVtcGxhdGVBdHRycyIsInRlbXBsYXRlRGlyZWN0aXZlcyIsInVucHJvY2Vzc2VkRGlyZWN0aXZlcyIsIm1hcmtEaXJlY3RpdmVTY29wZSIsIm1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzIiwiY29tcGlsZVRlbXBsYXRlVXJsIiwiJCRvcmlnaW5hbERpcmVjdGl2ZSIsImFkZExpbmtGbnMiLCJwcmUiLCJwb3N0IiwibWF4IiwiY2xvbmVBbmRBbm5vdGF0ZUZuIiwibGlua05vZGUiLCJjb250cm9sbGVyU2NvcGUiLCJlbGVtZW50Q29udHJvbGxlcnMiLCJzY29wZUJpbmRpbmdJbmZvIiwiY2xvbmVBdHRhY2hGbiIsInNjb3BlVG9DaGlsZCIsInNsb3RUcmFuc2NsdWRlRm4iLCJpc1Nsb3RGaWxsZWQiLCJjb250cm9sbGVyS2V5IiwiJHNjb3BlIiwiJHRyYW5zY2x1ZGUiLCJjb250cm9sbGVySW5zdGFuY2UiLCJzZXR1cENvbnRyb2xsZXJzIiwiJCRpc29sYXRlQmluZGluZ3MiLCJpbml0aWFsaXplRGlyZWN0aXZlQmluZGluZ3MiLCJyZW1vdmVXYXRjaGVzIiwiJG9uIiwiY29udHJvbGxlckRpcmVjdGl2ZSIsIiQkYmluZGluZ3MiLCJiaW5kaW5nSW5mbyIsImNvbnRyb2xsZXJSZXN1bHQiLCJnZXRDb250cm9sbGVycyIsIiRvbkNoYW5nZXMiLCJpbml0aWFsQ2hhbmdlcyIsIiRvbkluaXQiLCIkZG9DaGVjayIsIiRvbkRlc3Ryb3kiLCJpbnZva2VMaW5rRm4iLCIkcG9zdExpbmsiLCJpbmhlcml0VHlwZSIsInByb3BlcnR5IiwibmV3U2NvcGUiLCJ0RGlyZWN0aXZlcyIsInN0YXJ0QXR0ck5hbWUiLCJlbmRBdHRyTmFtZSIsIm11bHRpRWxlbWVudCIsInNyY0F0dHIiLCJkc3RBdHRyIiwiYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4iLCJhZnRlclRlbXBsYXRlQ2hpbGRMaW5rRm4iLCJsaW5rUXVldWUiLCJiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlIiwib3JpZ0FzeW5jRGlyZWN0aXZlIiwiZGVyaXZlZFN5bmNEaXJlY3RpdmUiLCJ0ZW1wVGVtcGxhdGVBdHRycyIsImJlZm9yZVRlbXBsYXRlTGlua05vZGUiLCJsaW5rUm9vdEVsZW1lbnQiLCIkJGRlc3Ryb3llZCIsImlnbm9yZUNoaWxkTGlua0ZuIiwiZGlmZiIsIndoYXQiLCJwcmV2aW91c0RpcmVjdGl2ZSIsIndyYXBNb2R1bGVOYW1lSWZEZWZpbmVkIiwibW9kdWxlTmFtZSIsInRydXN0ZWRDb250ZXh0IiwiYXR0ck5vcm1hbGl6ZWROYW1lIiwiSFRNTCIsIlJFU09VUkNFX1VSTCIsImdldFRydXN0ZWRDb250ZXh0IiwibXVzdEhhdmVFeHByZXNzaW9uIiwiYWxsT3JOb3RoaW5nIiwibmV3VmFsdWUiLCIkJHNjb3BlIiwib2xkVmFsdWUiLCJlbGVtZW50c1RvUmVtb3ZlIiwibmV3Tm9kZSIsImZpcnN0RWxlbWVudFRvUmVtb3ZlIiwicmVtb3ZlQ291bnQiLCJqMiIsImFubm90YXRpb24iLCJzdHJpY3RCaW5kaW5nc0NoZWNrIiwiY2hhbmdlcyIsInJlbW92ZVdhdGNoQ29sbGVjdGlvbiIsInJlY29yZENoYW5nZXMiLCJjdXJyZW50VmFsdWUiLCJwcmV2aW91c1ZhbHVlIiwidHJpZ2dlck9uQ2hhbmdlc0hvb2siLCJTaW1wbGVDaGFuZ2UiLCJsYXN0VmFsdWUiLCJwYXJlbnRHZXQiLCJwYXJlbnRTZXQiLCJjb21wYXJlIiwicmVtb3ZlV2F0Y2giLCJsaXRlcmFsIiwiYXNzaWduIiwicGFyZW50VmFsdWVXYXRjaCIsInBhcmVudFZhbHVlIiwiJHN0YXRlZnVsIiwiJHdhdGNoQ29sbGVjdGlvbiIsImRlZXBXYXRjaCIsImluaXRpYWxWYWx1ZSIsInByZXZpb3VzIiwiY3VycmVudCIsImlzRmlyc3RDaGFuZ2UiLCJTUEVDSUFMX0NIQVJTX1JFR0VYUCIsIl8iLCJzdHIxIiwic3RyMiIsInZhbHVlcyIsInRva2VuczEiLCJ0b2tlbnMyIiwib3V0ZXIiLCJ0b2tlbiIsImpxTm9kZXMiLCIkY29udHJvbGxlck1pbkVyciIsIiRDb250cm9sbGVyUHJvdmlkZXIiLCJnbG9iYWxzIiwiYWxsb3dHbG9iYWxzIiwibGF0ZXIiLCJpZGVudGlmaWVyIiwiY29udHJvbGxlclByb3RvdHlwZSIsImFkZElkZW50aWZpZXIiLCIkRG9jdW1lbnRQcm92aWRlciIsIiQkSXNEb2N1bWVudEhpZGRlblByb3ZpZGVyIiwiZG9jIiwiaGlkZGVuIiwiY2hhbmdlTGlzdGVuZXIiLCIkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyIiwiZXhjZXB0aW9uIiwiY2F1c2UiLCIkJEZvcmNlUmVmbG93UHJvdmlkZXIiLCJkb21Ob2RlIiwiYm9keSIsIm9mZnNldFdpZHRoIiwiQVBQTElDQVRJT05fSlNPTiIsIkNPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OIiwiQ29udGVudC1UeXBlIiwiSlNPTl9TVEFSVCIsIkpTT05fRU5EUyIsIlsiLCJ7IiwiSlNPTl9QUk9URUNUSU9OX1BSRUZJWCIsIiRodHRwTWluRXJyIiwic2VyaWFsaXplVmFsdWUiLCJ2IiwidG9JU09TdHJpbmciLCIkSHR0cFBhcmFtU2VyaWFsaXplclByb3ZpZGVyIiwicGFyYW1zIiwiJEh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VQcm92aWRlciIsInNlcmlhbGl6ZSIsInRvU2VyaWFsaXplIiwidG9wTGV2ZWwiLCJkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtIiwiaGVhZGVycyIsInRlbXBEYXRhIiwiY29udGVudFR5cGUiLCJoYXNKc29uQ29udGVudFR5cGUiLCJqc29uU3RhcnQiLCJwYXJzZUhlYWRlcnMiLCJmaWxsSW5QYXJzZWQiLCJsaW5lIiwiaGVhZGVyVmFsIiwiaGVhZGVyS2V5IiwiaGVhZGVyc0dldHRlciIsImhlYWRlcnNPYmoiLCJ0cmFuc2Zvcm1EYXRhIiwiZm5zIiwiaXNTdWNjZXNzIiwiJEh0dHBQcm92aWRlciIsImRlZmF1bHRzIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiZCIsImNvbW1vbiIsIkFjY2VwdCIsInBhdGNoIiwieHNyZkNvb2tpZU5hbWUiLCJ4c3JmSGVhZGVyTmFtZSIsInBhcmFtU2VyaWFsaXplciIsImpzb25wQ2FsbGJhY2tQYXJhbSIsInVzZUFwcGx5QXN5bmMiLCJpbnRlcmNlcHRvckZhY3RvcmllcyIsImludGVyY2VwdG9ycyIsIiRicm93c2VyIiwiJGh0dHBCYWNrZW5kIiwiJCRjb29raWVSZWFkZXIiLCJkZWZhdWx0Q2FjaGUiLCJyZXZlcnNlZEludGVyY2VwdG9ycyIsIiRodHRwIiwicmVxdWVzdENvbmZpZyIsIm1ldGhvZCIsImRlZkhlYWRlck5hbWUiLCJsb3dlcmNhc2VEZWZIZWFkZXJOYW1lIiwicmVxSGVhZGVyTmFtZSIsImRlZkhlYWRlcnMiLCJyZXFIZWFkZXJzIiwiZGVmYXVsdEhlYWRlcnNJdGVyYXRpb24iLCJwcm9jZXNzZWRIZWFkZXJzIiwiaGVhZGVyRm4iLCJoZWFkZXIiLCJoZWFkZXJDb250ZW50IiwibWVyZ2VIZWFkZXJzIiwicmVxdWVzdEludGVyY2VwdG9ycyIsInJlc3BvbnNlSW50ZXJjZXB0b3JzIiwiaW50ZXJjZXB0b3IiLCJyZXF1ZXN0IiwicmVxdWVzdEVycm9yIiwicmVzcG9uc2VFcnJvciIsImNoYWluSW50ZXJjZXB0b3JzIiwicmVxRGF0YSIsIndpdGhDcmVkZW50aWFscyIsImNhY2hlZFJlc3AiLCJkZWZlcnJlZCIsImlzSnNvbnAiLCJnZXRUcnVzdGVkUmVzb3VyY2VVcmwiLCJzZXJpYWxpemVkUGFyYW1zIiwiY2JLZXkiLCJzYW5pdGl6ZUpzb25wQ2FsbGJhY2tQYXJhbSIsInBlbmRpbmdSZXF1ZXN0cyIsInJlbW92ZVBlbmRpbmdSZXEiLCJyZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQiLCJyZXNvbHZlUHJvbWlzZSIsInhzcmZWYWx1ZSIsInVybElzU2FtZU9yaWdpbiIsImhlYWRlcnNTdHJpbmciLCJzdGF0dXNUZXh0IiwieGhyU3RhdHVzIiwicmVzb2x2ZUh0dHBQcm9taXNlIiwiJGFwcGx5QXN5bmMiLCIkJHBoYXNlIiwidGltZW91dCIsInJlc3BvbnNlVHlwZSIsImNyZWF0ZUFwcGx5SGFuZGxlcnMiLCJldmVudEhhbmRsZXJzIiwidXBsb2FkRXZlbnRIYW5kbGVycyIsImFwcGx5SGFuZGxlcnMiLCJjYWxsRXZlbnRIYW5kbGVyIiwic2VuZFJlcSIsInRoZW5GbiIsInJlamVjdEZuIiwicmVzcCIsImludGVyY2VwdG9yRmFjdG9yeSIsImNyZWF0ZVNob3J0TWV0aG9kcyIsImNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhIiwiJHhockZhY3RvcnlQcm92aWRlciIsIlhNTEh0dHBSZXF1ZXN0IiwiJEh0dHBCYWNrZW5kUHJvdmlkZXIiLCIkanNvbnBDYWxsYmFja3MiLCIkeGhyRmFjdG9yeSIsImNyZWF0ZVhociIsIiRicm93c2VyRGVmZXIiLCJjYWxsYmFja3MiLCJyYXdEb2N1bWVudCIsImNhbGxiYWNrUGF0aCIsImNyZWF0ZUNhbGxiYWNrIiwianNvbnBEb25lIiwiYXN5bmMiLCJ3YXNDYWxsZWQiLCJqc29ucFJlcSIsImdldFJlc3BvbnNlIiwiY29tcGxldGVSZXF1ZXN0IiwicmVtb3ZlQ2FsbGJhY2siLCJ4aHIiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsInJlc3BvbnNlVGV4dCIsInVybFJlc29sdmUiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJvbmVycm9yIiwib25hYm9ydCIsIm9udGltZW91dCIsInVwbG9hZCIsInNlbmQiLCJ0aW1lb3V0UmVxdWVzdCIsImFib3J0IiwiY3JlYXRlSHR0cEJhY2tlbmQiLCIkaW50ZXJwb2xhdGVNaW5FcnIiLCIkSW50ZXJwb2xhdGVQcm92aWRlciIsInN0YXJ0U3ltYm9sTGVuZ3RoIiwiZW5kU3ltYm9sTGVuZ3RoIiwiZXNjYXBlZFN0YXJ0UmVnZXhwIiwiZXNjYXBlIiwiZXNjYXBlZEVuZFJlZ2V4cCIsInVuZXNjYXBlVGV4dCIsImNvbnN0YW50V2F0Y2hEZWxlZ2F0ZSIsIm9iamVjdEVxdWFsaXR5IiwiY29uc3RhbnRJbnRlcnAiLCJ1bndhdGNoIiwiZXhwIiwiJCR3YXRjaERlbGVnYXRlIiwiZW5kSW5kZXgiLCJwYXJzZUZucyIsInRleHRMZW5ndGgiLCJleHByZXNzaW9uUG9zaXRpb25zIiwicGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvciIsInRocm93Tm9jb25jYXQiLCJjb21wdXRlIiwiZ2V0VmFsdWUiLCJnZXRUcnVzdGVkIiwiaW50ZXJyIiwiJHdhdGNoR3JvdXAiLCJvbGRWYWx1ZXMiLCJjdXJyVmFsdWUiLCIkSW50ZXJ2YWxQcm92aWRlciIsIiQkcSIsImludGVydmFscyIsImludGVydmFsIiwiaW52b2tlQXBwbHkiLCJoYXNQYXJhbXMiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJpdGVyYXRpb24iLCJza2lwQXBwbHkiLCIkJGludGVydmFsSWQiLCJub3RpZnkiLCJtYXJrUUV4Y2VwdGlvbkhhbmRsZWQiLCIkanNvbnBDYWxsYmFja3NQcm92aWRlciIsImNhbGxiYWNrTWFwIiwiY2FsbGJhY2tJZCIsIiQkY291bnRlciIsImNhbGxlZCIsIlBBVEhfTUFUQ0giLCJERUZBVUxUX1BPUlRTIiwiaHR0cCIsImh0dHBzIiwiZnRwIiwiJGxvY2F0aW9uTWluRXJyIiwiZW5jb2RlUGF0aCIsInNlZ21lbnRzIiwicGFyc2VBYnNvbHV0ZVVybCIsImFic29sdXRlVXJsIiwibG9jYXRpb25PYmoiLCJwYXJzZWRVcmwiLCIkJHByb3RvY29sIiwiJCRob3N0IiwiaG9zdG5hbWUiLCIkJHBvcnQiLCJwb3J0IiwiRE9VQkxFX1NMQVNIX1JFR0VYIiwicGFyc2VBcHBVcmwiLCJodG1sNU1vZGUiLCJwcmVmaXhlZCIsInBhdGhuYW1lIiwiJCRwYXRoIiwiZGVjb2RlUGF0aCIsIiQkc2VhcmNoIiwic2VhcmNoIiwiJCRoYXNoIiwic3RhcnRzV2l0aCIsInN0cmlwQmFzZVVybCIsImJhc2UiLCJ0cmltRW1wdHlIYXNoIiwiTG9jYXRpb25IdG1sNVVybCIsImFwcEJhc2UiLCJhcHBCYXNlTm9GaWxlIiwiYmFzZVByZWZpeCIsIiQkaHRtbDUiLCIkJHBhcnNlIiwicGF0aFVybCIsIiQkY29tcG9zZSIsIiQkdXJsIiwiJCRhYnNVcmwiLCIkJHVybFVwZGF0ZWRCeUxvY2F0aW9uIiwiJCRwYXJzZUxpbmtVcmwiLCJyZWxIcmVmIiwiYXBwVXJsIiwicHJldkFwcFVybCIsInJld3JpdHRlblVybCIsIkxvY2F0aW9uSGFzaGJhbmdVcmwiLCJoYXNoUHJlZml4Iiwid2l0aG91dEhhc2hVcmwiLCJ3aXRob3V0QmFzZVVybCIsImZpcnN0UGF0aFNlZ21lbnRNYXRjaCIsIndpbmRvd3NGaWxlUGF0aEV4cCIsInJlbW92ZVdpbmRvd3NEcml2ZU5hbWUiLCJMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybCIsImxvY2F0aW9uUHJvdG90eXBlIiwiJCRyZXBsYWNlIiwiYWJzVXJsIiwibG9jYXRpb25HZXR0ZXIiLCJsb2NhdGlvbkdldHRlclNldHRlciIsInBhcmFtVmFsdWUiLCJwcmVwcm9jZXNzIiwiJExvY2F0aW9uUHJvdmlkZXIiLCJyZXF1aXJlQmFzZSIsInJld3JpdGVMaW5rcyIsIkxvY2F0aW9uTW9kZSIsImluaXRpYWxVcmwiLCJsYXN0SW5kZXhPZiIsIiQkc3RhdGUiLCJJR05PUkVfVVJJX1JFR0VYUCIsInNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2siLCJvbGRVcmwiLCJvbGRTdGF0ZSIsImN0cmxLZXkiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJ3aGljaCIsImJ1dHRvbiIsImFic0hyZWYiLCJpbml0aWFsaXppbmciLCJuZXdVcmwiLCJuZXdTdGF0ZSIsIiRicm9hZGNhc3QiLCJhZnRlckxvY2F0aW9uQ2hhbmdlIiwiJGRpZ2VzdCIsImN1cnJlbnRSZXBsYWNlIiwidXJsT3JTdGF0ZUNoYW5nZWQiLCIkTG9nUHJvdmlkZXIiLCJkZWJ1ZyIsImRlYnVnRW5hYmxlZCIsImZsYWciLCJmb3JtYXRTdGFja1RyYWNlIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibG9nIiwiY29uc29sZUxvZyIsIndhcm4iLCJsb2dGbiIsInNvdXJjZVVSTCIsIkxvY2F0aW9uIiwiJHBhcnNlTWluRXJyIiwib2JqZWN0VmFsdWVPZiIsImdldFN0cmluZ1ZhbHVlIiwiT1BFUkFUT1JTIiwib3BlcmF0b3IiLCJFU0NBUEUiLCJmIiwiciIsInQiLCInIiwiXCIiLCJMZXhlciIsImxleCIsInRva2VucyIsInJlYWRTdHJpbmciLCJwZWVrIiwicmVhZE51bWJlciIsImlzSWRlbnRpZmllclN0YXJ0IiwicGVla011bHRpY2hhciIsInJlYWRJZGVudCIsImlzIiwiaXNXaGl0ZXNwYWNlIiwiY2gyIiwiY2gzIiwib3AxIiwib3AyIiwib3AzIiwidGhyb3dFcnJvciIsImNoYXJzIiwiY29kZVBvaW50QXQiLCJpc1ZhbGlkSWRlbnRpZmllclN0YXJ0IiwiaXNJZGVudGlmaWVyQ29udGludWUiLCJpc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlIiwiY3AiLCJjcDEiLCJjcDIiLCJpc0V4cE9wZXJhdG9yIiwiY29sU3RyIiwibnVtYmVyIiwicGVla0NoIiwicXVvdGUiLCJyYXdTdHJpbmciLCJoZXgiLCJBU1QiLCJsZXhlciIsImlmRGVmaW5lZCIsInBsdXNGbiIsIlByb2dyYW0iLCJFeHByZXNzaW9uU3RhdGVtZW50IiwiQXNzaWdubWVudEV4cHJlc3Npb24iLCJDb25kaXRpb25hbEV4cHJlc3Npb24iLCJMb2dpY2FsRXhwcmVzc2lvbiIsIkJpbmFyeUV4cHJlc3Npb24iLCJVbmFyeUV4cHJlc3Npb24iLCJDYWxsRXhwcmVzc2lvbiIsIk1lbWJlckV4cHJlc3Npb24iLCJJZGVudGlmaWVyIiwiTGl0ZXJhbCIsIkFycmF5RXhwcmVzc2lvbiIsIlByb3BlcnR5IiwiT2JqZWN0RXhwcmVzc2lvbiIsIlRoaXNFeHByZXNzaW9uIiwiTG9jYWxzRXhwcmVzc2lvbiIsIk5HVmFsdWVQYXJhbWV0ZXIiLCJhc3QiLCJwcm9ncmFtIiwiZXhwcmVzc2lvblN0YXRlbWVudCIsImV4cGVjdCIsImZpbHRlckNoYWluIiwibGVmdCIsImZpbHRlciIsImFzc2lnbm1lbnQiLCJ0ZXJuYXJ5IiwiaXNBc3NpZ25hYmxlIiwicmlnaHQiLCJhbHRlcm5hdGUiLCJjb25zZXF1ZW50IiwibG9naWNhbE9SIiwiY29uc3VtZSIsImxvZ2ljYWxBTkQiLCJlcXVhbGl0eSIsInJlbGF0aW9uYWwiLCJhZGRpdGl2ZSIsIm11bHRpcGxpY2F0aXZlIiwidW5hcnkiLCJhcmd1bWVudCIsInByaW1hcnkiLCJhcnJheURlY2xhcmF0aW9uIiwib2JqZWN0Iiwic2VsZlJlZmVyZW50aWFsIiwibGl0ZXJhbHMiLCJjYWxsZWUiLCJwYXJzZUFyZ3VtZW50cyIsImNvbXB1dGVkIiwiYmFzZUV4cHJlc3Npb24iLCJwZWVrVG9rZW4iLCJwcm9wZXJ0aWVzIiwia2luZCIsIm1zZyIsImUxIiwiZTIiLCJlMyIsImU0IiwicGVla0FoZWFkIiwiJGxvY2FscyIsIlBVUklUWV9BQlNPTFVURSIsIlBVUklUWV9SRUxBVElWRSIsImZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMiLCIkZmlsdGVyIiwicGFyZW50SXNQdXJlIiwiYWxsQ29uc3RhbnRzIiwiYXJnc1RvV2F0Y2giLCJpc1N0YXRlbGVzc0ZpbHRlciIsImZpbHRlck5hbWUiLCJhc3RJc1B1cmUiLCJpc1B1cmUiLCJleHByIiwidG9XYXRjaCIsImdldElucHV0cyIsImxhc3RFeHByZXNzaW9uIiwiYXNzaWduYWJsZUFTVCIsIkFTVENvbXBpbGVyIiwiQVNUSW50ZXJwcmV0ZXIiLCJQYXJzZXIiLCJhc3RDb21waWxlciIsImdldFZhbHVlT2YiLCIkUGFyc2VQcm92aWRlciIsImlkZW50U3RhcnQiLCJpZGVudENvbnRpbnVlIiwidHJ1ZSIsImZhbHNlIiwibnVsbCIsImFkZExpdGVyYWwiLCJsaXRlcmFsTmFtZSIsImxpdGVyYWxWYWx1ZSIsInNldElkZW50aWZpZXJGbnMiLCJpZGVudGlmaWVyU3RhcnQiLCJpZGVudGlmaWVyQ29udGludWUiLCIkcGFyc2VPcHRpb25zIiwiJCRnZXRBc3QiLCJnZXRBc3QiLCJpbnRlcmNlcHRvckZuIiwicGFyc2VkRXhwcmVzc2lvbiIsImNhY2hlS2V5Iiwib25lVGltZSIsIm9uZVRpbWVMaXRlcmFsV2F0Y2hEZWxlZ2F0ZSIsIm9uZVRpbWVXYXRjaERlbGVnYXRlIiwiaW5wdXRzIiwiaW5wdXRzV2F0Y2hEZWxlZ2F0ZSIsImFkZEludGVyY2VwdG9yIiwiZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayIsIm9sZFZhbHVlT2ZWYWx1ZSIsImNvbXBhcmVPYmplY3RJZGVudGl0eSIsInByZXR0eVByaW50RXhwcmVzc2lvbiIsImxhc3RSZXN1bHQiLCJpbnB1dEV4cHJlc3Npb25zIiwib2xkSW5wdXRWYWx1ZU9mIiwibmV3SW5wdXRWYWx1ZSIsIm9sZElucHV0VmFsdWVPZlZhbHVlcyIsIm9sZElucHV0VmFsdWVzIiwib25lVGltZUxpc3RlbmVyIiwib2xkIiwiaXNBbGxEZWZpbmVkIiwiYWxsRGVmaW5lZCIsIndhdGNoRGVsZWdhdGUiLCJ1c2VJbnB1dHMiLCIkUVByb3ZpZGVyIiwiZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMiLCJxRmFjdG9yeSIsIiQkUVByb3ZpZGVyIiwibmV4dFRpY2siLCJleGNlcHRpb25IYW5kbGVyIiwiJHFNaW5FcnIiLCJUeXBlRXJyb3IiLCJxdWV1ZVNpemUiLCJjaGVja1F1ZXVlIiwiUHJvbWlzZSIsInJlamVjdFByb21pc2UiLCJub3RpZnlQcm9taXNlIiwicHJvY2Vzc0NoZWNrcyIsInRvQ2hlY2siLCJpc1N0YXRlRXhjZXB0aW9uSGFuZGxlZCIsIm1hcmtRU3RhdGVFeGNlcHRpb25IYW5kbGVkIiwiZXJyb3JNZXNzYWdlIiwic2NoZWR1bGVQcm9jZXNzUXVldWUiLCJwZW5kaW5nIiwicHJvY2Vzc1NjaGVkdWxlZCIsIiQkcGFzc1RvRXhjZXB0aW9uSGFuZGxlciIsInByb2Nlc3NRdWV1ZSIsIiQkcmVqZWN0IiwiJCRyZXNvbHZlIiwiZG9SZXNvbHZlIiwiZG9SZWplY3QiLCJoYW5kbGVDYWxsYmFjayIsInJlc29sdmVyIiwiY2FsbGJhY2tPdXRwdXQiLCJ3aGVuIiwiZXJyYmFjayIsInByb2dyZXNzQmFjayIsIm9uRnVsZmlsbGVkIiwib25SZWplY3RlZCIsIiRRIiwicHJvbWlzZXMiLCJjb3VudGVyIiwicmVzdWx0cyIsInJhY2UiLCJwdXIiLCJxIiwiJCRSQUZQcm92aWRlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwid2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJyYWZTdXBwb3J0ZWQiLCJyYWYiLCJ0aW1lciIsInN1cHBvcnRlZCIsIiRSb290U2NvcGVQcm92aWRlciIsIiRyb290U2NvcGVNaW5FcnIiLCJsYXN0RGlydHlXYXRjaCIsImFwcGx5QXN5bmNJZCIsImRpZ2VzdFR0bCIsImRlc3Ryb3lDaGlsZFNjb3BlIiwiJGV2ZW50IiwiY3VycmVudFNjb3BlIiwiU2NvcGUiLCIkaWQiLCIkJHdhdGNoZXJzIiwiJCRuZXh0U2libGluZyIsIiQkcHJldlNpYmxpbmciLCIkJGNoaWxkSGVhZCIsIiQkY2hpbGRUYWlsIiwiJHJvb3QiLCIkJGxpc3RlbmVycyIsIiQkbGlzdGVuZXJDb3VudCIsIiQkd2F0Y2hlcnNDb3VudCIsImlzb2xhdGUiLCIkJENoaWxkU2NvcGUiLCJDaGlsZFNjb3BlIiwiY3JlYXRlQ2hpbGRTY29wZUNsYXNzIiwid2F0Y2hFeHAiLCJ3YXRjaGVyIiwiaW5pdFdhdGNoVmFsIiwiJCRkaWdlc3RXYXRjaEluZGV4IiwiaW5jcmVtZW50V2F0Y2hlcnNDb3VudCIsIndhdGNoRXhwcmVzc2lvbnMiLCJuZXdWYWx1ZXMiLCJkZXJlZ2lzdGVyRm5zIiwiY2hhbmdlUmVhY3Rpb25TY2hlZHVsZWQiLCJmaXJzdFJ1biIsInNob3VsZENhbGwiLCJ3YXRjaEdyb3VwQWN0aW9uIiwidW53YXRjaEZuIiwiJHdhdGNoQ29sbGVjdGlvbkludGVyY2VwdG9yIiwidmVyeU9sZFZhbHVlIiwidHJhY2tWZXJ5T2xkVmFsdWUiLCJjaGFuZ2VEZXRlY3RlZCIsImNoYW5nZURldGVjdG9yIiwiaW50ZXJuYWxBcnJheSIsImludGVybmFsT2JqZWN0IiwiaW5pdFJ1biIsIm9sZExlbmd0aCIsIl92YWx1ZSIsIm5ld0xlbmd0aCIsIm5ld0l0ZW0iLCJvbGRJdGVtIiwid2F0Y2giLCJ3YXRjaGVycyIsImRpcnR5IiwibG9nSWR4IiwiYXN5bmNUYXNrIiwidHRsIiwid2F0Y2hMb2ciLCJiZWdpblBoYXNlIiwiZmx1c2hBcHBseUFzeW5jIiwiYXN5bmNRdWV1ZVBvc2l0aW9uIiwiYXN5bmNRdWV1ZSIsInRyYXZlcnNlU2NvcGVzTG9vcCIsImNsZWFyUGhhc2UiLCJwb3N0RGlnZXN0UXVldWVQb3NpdGlvbiIsImRlY3JlbWVudExpc3RlbmVyQ291bnQiLCJjbGVhblVwU2NvcGUiLCIkZXZhbCIsImFwcGx5QXN5bmNRdWV1ZSIsIm5hbWVkTGlzdGVuZXJzIiwiaW5kZXhPZkxpc3RlbmVyIiwiJGVtaXQiLCJ0YXJnZXRTY29wZSIsImxpc3RlbmVyQXJncyIsIiQkYXN5bmNRdWV1ZSIsIiQkcG9zdERpZ2VzdFF1ZXVlIiwiJCRhcHBseUFzeW5jUXVldWUiLCJwaGFzZSIsIiQkU2FuaXRpemVVcmlQcm92aWRlciIsInVyaSIsImlzSW1hZ2UiLCJub3JtYWxpemVkVmFsIiwicmVnZXgiLCJuZXh0SWQiLCJmaWx0ZXJzIiwidmFycyIsIm93biIsImFzc2lnbmFibGUiLCJzdGFnZSIsImNvbXB1dGluZyIsInJlY3Vyc2UiLCJyZXR1cm5fIiwiZ2VuZXJhdGVGdW5jdGlvbiIsImZuS2V5IiwiaW50b0lkIiwid2F0Y2hJZCIsImZuU3RyaW5nIiwiVVNFIiwiU1RSSUNUIiwiZmlsdGVyUHJlZml4Iiwid2F0Y2hGbnMiLCJpbnB1dCIsInZhcnNQcmVmaXgiLCJzZWN0aW9uIiwibmFtZUlkIiwicmVjdXJzaW9uRm4iLCJza2lwV2F0Y2hJZENoZWNrIiwiaWZfIiwibGF6eUFzc2lnbiIsImNvbXB1dGVkTWVtYmVyIiwibGF6eVJlY3Vyc2UiLCJwbHVzIiwibm90IiwiZ2V0SGFzT3duUHJvcGVydHkiLCJpc051bGwiLCJub25Db21wdXRlZE1lbWJlciIsIm5vdE51bGwiLCJtZW1iZXIiLCJkZWZhdWx0VmFsdWUiLCJzdHJpbmdFc2NhcGVGbiIsInN0cmluZ0VzY2FwZVJlZ2V4IiwiYyIsInNraXAiLCJpbml0IiwicmhzIiwibGhzIiwidW5hcnkrIiwidW5hcnktIiwidW5hcnkhIiwiYmluYXJ5KyIsImJpbmFyeS0iLCJiaW5hcnkqIiwiYmluYXJ5LyIsImJpbmFyeSUiLCJiaW5hcnk9PT0iLCJiaW5hcnkhPT0iLCJiaW5hcnk9PSIsImJpbmFyeSE9IiwiYmluYXJ5PCIsImJpbmFyeT4iLCJiaW5hcnk8PSIsImJpbmFyeT49IiwiYmluYXJ5JiYiLCJiaW5hcnl8fCIsInRlcm5hcnk/OiIsIiRzY2VNaW5FcnIiLCJTQ0VfQ09OVEVYVFMiLCJDU1MiLCJVUkwiLCJKUyIsIlVOREVSU0NPUkVfTE9XRVJDQVNFX1JFR0VYUCIsInNuYWtlVG9DYW1lbCIsImFkanVzdE1hdGNoZXJzIiwibWF0Y2hlcnMiLCJhZGp1c3RlZE1hdGNoZXJzIiwibWF0Y2hlciIsImFkanVzdE1hdGNoZXIiLCIkU2NlRGVsZWdhdGVQcm92aWRlciIsInJlc291cmNlVXJsV2hpdGVsaXN0IiwicmVzb3VyY2VVcmxCbGFja2xpc3QiLCJodG1sU2FuaXRpemVyIiwibWF0Y2hVcmwiLCJnZW5lcmF0ZUhvbGRlclR5cGUiLCJCYXNlIiwiaG9sZGVyVHlwZSIsInRydXN0ZWRWYWx1ZSIsIiQkdW53cmFwVHJ1c3RlZFZhbHVlIiwidHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSIsImJ5VHlwZSIsInRydXN0QXMiLCJDb25zdHJ1Y3RvciIsIm1heWJlVHJ1c3RlZCIsImFsbG93ZWQiLCJpc1Jlc291cmNlVXJsQWxsb3dlZEJ5UG9saWN5IiwiJFNjZVByb3ZpZGVyIiwiJHNjZURlbGVnYXRlIiwic2NlIiwiaXNFbmFibGVkIiwicGFyc2VBcyIsImVudW1WYWx1ZSIsImxOYW1lIiwiJFNuaWZmZXJQcm92aWRlciIsImV2ZW50U3VwcG9ydCIsImhhc0hpc3RvcnlQdXNoU3RhdGUiLCJudyIsInByb2Nlc3MiLCJjaHJvbWUiLCJhcHAiLCJydW50aW1lIiwicHVzaFN0YXRlIiwiYW5kcm9pZCIsImJveGVlIiwiYm9keVN0eWxlIiwidHJhbnNpdGlvbnMiLCJhbmltYXRpb25zIiwiaGFzRXZlbnQiLCJkaXZFbG0iLCIkdGVtcGxhdGVSZXF1ZXN0TWluRXJyIiwiJFRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyIiwiaHR0cE9wdGlvbnMiLCIkdGVtcGxhdGVDYWNoZSIsImhhbmRsZVJlcXVlc3RGbiIsInRwbCIsImlnbm9yZVJlcXVlc3RFcnJvciIsInRvdGFsUGVuZGluZ1JlcXVlc3RzIiwidHJhbnNmb3JtZXIiLCIkJFRlc3RhYmlsaXR5UHJvdmlkZXIiLCJ0ZXN0YWJpbGl0eSIsImZpbmRCaW5kaW5ncyIsIm9wdF9leGFjdE1hdGNoIiwibWF0Y2hlcyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJkYXRhQmluZGluZyIsImJpbmRpbmdOYW1lIiwiZmluZE1vZGVscyIsInByZWZpeGVzIiwiZ2V0TG9jYXRpb24iLCJzZXRMb2NhdGlvbiIsIndoZW5TdGFibGUiLCIkVGltZW91dFByb3ZpZGVyIiwiZGVmZXJyZWRzIiwiJCR0aW1lb3V0SWQiLCJ1cmxQYXJzaW5nTm9kZSIsIm9yaWdpblVybCIsInJlcXVlc3RVcmwiLCIkV2luZG93UHJvdmlkZXIiLCIkJENvb2tpZVJlYWRlciIsImxhc3RDb29raWVzIiwibGFzdENvb2tpZVN0cmluZyIsInNhZmVEZWNvZGVVUklDb21wb25lbnQiLCJjb29raWVBcnJheSIsImNvb2tpZSIsImN1cnJlbnRDb29raWVTdHJpbmciLCJzYWZlR2V0Q29va2llIiwiJCRDb29raWVSZWFkZXJQcm92aWRlciIsIiRGaWx0ZXJQcm92aWRlciIsInN1ZmZpeCIsImN1cnJlbmN5RmlsdGVyIiwiZGF0ZUZpbHRlciIsImZpbHRlckZpbHRlciIsImpzb25GaWx0ZXIiLCJsaW1pdFRvRmlsdGVyIiwibG93ZXJjYXNlRmlsdGVyIiwibnVtYmVyRmlsdGVyIiwib3JkZXJCeUZpbHRlciIsInVwcGVyY2FzZUZpbHRlciIsImNvbXBhcmF0b3IiLCJhbnlQcm9wZXJ0eUtleSIsInByZWRpY2F0ZUZuIiwibWF0Y2hBZ2FpbnN0QW55UHJvcCIsImdldFR5cGVGb3JGaWx0ZXIiLCJzaG91bGRNYXRjaFByaW1pdGl2ZXMiLCJhY3R1YWwiLCJleHBlY3RlZCIsImRlZXBDb21wYXJlIiwiY3JlYXRlUHJlZGljYXRlRm4iLCJkb250TWF0Y2hXaG9sZU9iamVjdCIsImFjdHVhbFR5cGUiLCJleHBlY3RlZFR5cGUiLCJleHBlY3RlZFZhbCIsIm1hdGNoQW55UHJvcGVydHkiLCJNQVhfRElHSVRTIiwiREVDSU1BTF9TRVAiLCJaRVJPX0NIQVIiLCIkbG9jYWxlIiwiZm9ybWF0cyIsIk5VTUJFUl9GT1JNQVRTIiwiYW1vdW50IiwiY3VycmVuY3lTeW1ib2wiLCJmcmFjdGlvblNpemUiLCJDVVJSRU5DWV9TWU0iLCJQQVRURVJOUyIsIm1heEZyYWMiLCJmb3JtYXROdW1iZXIiLCJHUk9VUF9TRVAiLCJncm91cFNlcCIsImRlY2ltYWxTZXAiLCJwYXJzZWROdW1iZXIiLCJpc0luZmluaXR5IiwiaXNGaW5pdGUiLCJpc1plcm8iLCJudW1TdHIiLCJhYnMiLCJmb3JtYXR0ZWRUZXh0IiwibWluRnJhYyIsImRpZ2l0cyIsImZyYWN0aW9uTGVuIiwicm91bmRBdCIsImRpZ2l0IiwiayIsImNhcnJ5IiwicmVkdWNlUmlnaHQiLCJyb3VuZE51bWJlciIsIm51bWJlck9mSW50ZWdlckRpZ2l0cyIsInplcm9zIiwiZXhwb25lbnQiLCJpbnRlZ2VyTGVuIiwiZGVjaW1hbHMiLCJyZWR1Y2UiLCJncm91cHMiLCJsZ1NpemUiLCJnU2l6ZSIsIm5lZ1ByZSIsIm5lZ1N1ZiIsInBvc1ByZSIsInBvc1N1ZiIsInBhZE51bWJlciIsIm5lZ1dyYXAiLCJuZWciLCJkYXRlR2V0dGVyIiwiZGF0ZVN0ckdldHRlciIsInNob3J0Rm9ybSIsInN0YW5kQWxvbmUiLCJnZXRGaXJzdFRodXJzZGF5T2ZZZWFyIiwieWVhciIsImRheU9mV2Vla09uRmlyc3QiLCJnZXREYXkiLCJ3ZWVrR2V0dGVyIiwiZGF0ZXRpbWUiLCJmaXJzdFRodXJzIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJyb3VuZCIsImVyYUdldHRlciIsIkVSQVMiLCJEQVRFX0ZPUk1BVFMiLCJ5eXl5IiwieXkiLCJ5IiwiTU1NTSIsIk1NTSIsIk1NIiwiTSIsIkxMTEwiLCJkZCIsIkhIIiwiSCIsImhoIiwibW0iLCJtIiwic3MiLCJzc3MiLCJFRUVFIiwiRUVFIiwiZ2V0SG91cnMiLCJBTVBNUyIsIloiLCJ6b25lIiwicGFkZGVkWm9uZSIsInd3IiwidyIsIkciLCJHRyIsIkdHRyIsIkdHR0ciLCJFUkFOQU1FUyIsIkRBVEVfRk9STUFUU19TUExJVCIsIk5VTUJFUl9TVFJJTkciLCJSX0lTTzg2MDFfU1RSIiwiZm9ybWF0IiwiREFURVRJTUVfRk9STUFUUyIsInR6SG91ciIsInR6TWluIiwiZGF0ZVNldHRlciIsInNldFVUQ0Z1bGxZZWFyIiwic2V0RnVsbFllYXIiLCJ0aW1lU2V0dGVyIiwic2V0VVRDSG91cnMiLCJzZXRIb3VycyIsIm1zIiwicGFyc2VGbG9hdCIsImpzb25TdHJpbmdUb0RhdGUiLCJzcGFjaW5nIiwibGltaXQiLCJiZWdpbiIsIkluZmluaXR5Iiwic2xpY2VGbiIsInNvcnRQcmVkaWNhdGUiLCJyZXZlcnNlT3JkZXIiLCJjb21wYXJlRm4iLCJwcmVkaWNhdGVzIiwicHJlZGljYXRlIiwiZGVzY2VuZGluZyIsImRlZmF1bHRDb21wYXJlIiwiY29tcGFyZVZhbHVlcyIsInRpZUJyZWFrZXIiLCJwcmVkaWNhdGVWYWx1ZXMiLCJvYmplY3RWYWx1ZSIsImdldFByZWRpY2F0ZVZhbHVlIiwidjEiLCJ2MiIsInR5cGUxIiwidHlwZTIiLCJ2YWx1ZTEiLCJ2YWx1ZTIiLCJuZ0RpcmVjdGl2ZSIsImh0bWxBbmNob3JEaXJlY3RpdmUiLCJ4bGlua0hyZWYiLCJuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyIsInByb3BOYW1lIiwibm9ybWFsaXplZCIsImRlZmF1bHRMaW5rRm4iLCJuZ01vZGVsIiwiaHRtbEF0dHIiLCJudWxsRm9ybUN0cmwiLCIkYWRkQ29udHJvbCIsIiQkcmVuYW1lQ29udHJvbCIsImNvbnRyb2wiLCIkbmFtZSIsIiRyZW1vdmVDb250cm9sIiwiJHNldFZhbGlkaXR5IiwiJHNldERpcnR5IiwiJHNldFByaXN0aW5lIiwiJHNldFN1Ym1pdHRlZCIsIlBFTkRJTkdfQ0xBU1MiLCJTVUJNSVRURURfQ0xBU1MiLCJGb3JtQ29udHJvbGxlciIsIiQkY29udHJvbHMiLCIkZXJyb3IiLCIkJHN1Y2Nlc3MiLCIkcGVuZGluZyIsIm5nRm9ybSIsIiRkaXJ0eSIsIiRwcmlzdGluZSIsIiR2YWxpZCIsIiRpbnZhbGlkIiwiJHN1Ym1pdHRlZCIsIiQkcGFyZW50Rm9ybSIsIiQkYW5pbWF0ZSIsInNldHVwVmFsaWRpdHkiLCIkcm9sbGJhY2tWaWV3VmFsdWUiLCIkY29tbWl0Vmlld1ZhbHVlIiwibmV3TmFtZSIsIm9sZE5hbWUiLCJQUklTVElORV9DTEFTUyIsIkRJUlRZX0NMQVNTIiwiJHNldFVudG91Y2hlZCIsImFkZFNldFZhbGlkaXR5TWV0aG9kIiwiY2xhenoiLCJ1bnNldCIsImZvcm1EaXJlY3RpdmVGYWN0b3J5IiwiaXNOZ0Zvcm0iLCJmb3JtRWxlbWVudCIsIlZBTElEX0NMQVNTIiwibmFtZUF0dHIiLCJjdHJscyIsImhhbmRsZUZvcm1TdWJtaXNzaW9uIiwic2V0dGVyIiwiZ2V0U2V0dGVyIiwiZm9ybURpcmVjdGl2ZSIsIm5nRm9ybURpcmVjdGl2ZSIsIiQkY2xhc3NDYWNoZSIsIklOVkFMSURfQ0xBU1MiLCJjYWNoZWRUb2dnbGVDbGFzcyIsImN0cmwiLCJzd2l0Y2hWYWx1ZSIsInRvZ2dsZVZhbGlkYXRpb25Dc3MiLCJ2YWxpZGF0aW9uRXJyb3JLZXkiLCJpc1ZhbGlkIiwiY29tYmluZWRTdGF0ZSIsImNyZWF0ZUFuZFNldCIsImlzT2JqZWN0RW1wdHkiLCJ1bnNldEFuZENsZWFudXAiLCJJU09fREFURV9SRUdFWFAiLCJVUkxfUkVHRVhQIiwiRU1BSUxfUkVHRVhQIiwiTlVNQkVSX1JFR0VYUCIsIkRBVEVfUkVHRVhQIiwiREFURVRJTUVMT0NBTF9SRUdFWFAiLCJXRUVLX1JFR0VYUCIsIk1PTlRIX1JFR0VYUCIsIlRJTUVfUkVHRVhQIiwiUEFSVElBTF9WQUxJREFUSU9OX0VWRU5UUyIsIlBBUlRJQUxfVkFMSURBVElPTl9UWVBFUyIsImlucHV0VHlwZSIsImJhc2VJbnB1dFR5cGUiLCJzdHJpbmdCYXNlZElucHV0VHlwZSIsImNyZWF0ZURhdGVJbnB1dFR5cGUiLCJjcmVhdGVEYXRlUGFyc2VyIiwiZGF0ZXRpbWUtbG9jYWwiLCJ0aW1lIiwid2VlayIsImlzb1dlZWsiLCJleGlzdGluZ0RhdGUiLCJob3VycyIsInNlY29uZHMiLCJtaWxsaXNlY29uZHMiLCJhZGREYXlzIiwiZ2V0U2Vjb25kcyIsImdldE1pbGxpc2Vjb25kcyIsIm1vbnRoIiwibWluVmFsIiwibWF4VmFsIiwiYmFkSW5wdXRDaGVja2VyIiwibnVtYmVyRm9ybWF0dGVyUGFyc2VyIiwiJHZhbGlkYXRvcnMiLCIkaXNFbXB0eSIsInBhcnNlTnVtYmVyQXR0clZhbCIsIiR2YWxpZGF0ZSIsInN0ZXAiLCJzdGVwVmFsIiwibW9kZWxWYWx1ZSIsInZpZXdWYWx1ZSIsImlzVmFsaWRGb3JTdGVwIiwiJCRwYXJzZXJOYW1lIiwiZW1haWwiLCJyYWRpbyIsImRvVHJpbSIsIm5nVHJpbSIsImV2IiwiY2hlY2tlZCIsIiRzZXRWaWV3VmFsdWUiLCIkcmVuZGVyIiwiJHZpZXdWYWx1ZSIsInJhbmdlIiwic3VwcG9ydHNSYW5nZSIsIiQkaGFzTmF0aXZlVmFsaWRhdG9ycyIsInZhbGlkaXR5IiwiaGFzTWluQXR0ciIsImhhc01heEF0dHIiLCJoYXNTdGVwQXR0ciIsIm9yaWdpbmFsUmVuZGVyIiwicmFuZ2VVbmRlcmZsb3ciLCJyYW5nZU92ZXJmbG93Iiwic2V0SW5pdGlhbFZhbHVlQW5kT2JzZXJ2ZXIiLCIkbW9kZWxWYWx1ZSIsImVsVmFsIiwic3RlcE1pc21hdGNoIiwiaHRtbEF0dHJOYW1lIiwiY2hhbmdlRm4iLCJjaGVja2JveCIsInRydWVWYWx1ZSIsInBhcnNlQ29uc3RhbnRFeHByIiwibmdUcnVlVmFsdWUiLCJmYWxzZVZhbHVlIiwibmdGYWxzZVZhbHVlIiwiJGZvcm1hdHRlcnMiLCIkcGFyc2VycyIsInN1Ym1pdCIsInJlc2V0IiwiZmlsZSIsImNvbXBvc2luZyIsImRlZmVyTGlzdGVuZXIiLCJvcmlnVmFsdWUiLCJrZXlDb2RlIiwib3JpZ0JhZElucHV0IiwiYmFkSW5wdXQiLCJvcmlnVHlwZU1pc21hdGNoIiwidHlwZU1pc21hdGNoIiwibWFwcGluZyIsImlzbyIsInBhcnQiLCJwYXJzZURhdGUiLCJwcmV2aW91c0RhdGUiLCIkb3B0aW9ucyIsImdldE9wdGlvbiIsInBhcnNlZERhdGUiLCJuZ01vZGVsTWluRXJyIiwiaXNWYWxpZERhdGUiLCJwYXJzZU9ic2VydmVkRGF0ZVZhbHVlIiwiaXNOdW1iZXJJbnRlZ2VyIiwiY291bnREZWNpbWFscyIsIm51bVN0cmluZyIsImRlY2ltYWxTeW1ib2xJbmRleCIsInN0ZXBCYXNlIiwiaXNOb25JbnRlZ2VyVmFsdWUiLCJpc05vbkludGVnZXJTdGVwQmFzZSIsImlzTm9uSW50ZWdlclN0ZXAiLCJ2YWx1ZURlY2ltYWxzIiwic3RlcEJhc2VEZWNpbWFscyIsInN0ZXBEZWNpbWFscyIsImRlY2ltYWxDb3VudCIsIm11bHRpcGxpZXIiLCJwb3ciLCJwYXJzZUZuIiwiaW5wdXREaXJlY3RpdmUiLCJDT05TVEFOVF9WQUxVRV9SRUdFWFAiLCJuZ1ZhbHVlRGlyZWN0aXZlIiwidXBkYXRlRWxlbWVudFZhbHVlIiwicHJvcFZhbHVlIiwidHBsQXR0ciIsIm5nVmFsdWUiLCJuZ0JpbmREaXJlY3RpdmUiLCIkY29tcGlsZSIsInRlbXBsYXRlRWxlbWVudCIsIm5nQmluZCIsIm5nQmluZFRlbXBsYXRlRGlyZWN0aXZlIiwibmdCaW5kVGVtcGxhdGUiLCJuZ0JpbmRIdG1sRGlyZWN0aXZlIiwibmdCaW5kSHRtbEdldHRlciIsIm5nQmluZEh0bWwiLCJuZ0JpbmRIdG1sV2F0Y2giLCJnZXRUcnVzdGVkSHRtbCIsIm5nQ2hhbmdlRGlyZWN0aXZlIiwiJHZpZXdDaGFuZ2VMaXN0ZW5lcnMiLCJuZ0NoYW5nZSIsImNsYXNzRGlyZWN0aXZlIiwiaW5kZXhXYXRjaEV4cHJlc3Npb24iLCJvbGRDbGFzc1N0cmluZyIsImlzT25lVGltZSIsIndhdGNoRXhwcmVzc2lvbiIsInRvRmxhdFZhbHVlIiwidG9DbGFzc1N0cmluZyIsIndhdGNoQWN0aW9uIiwibmV3Q2xhc3NWYWx1ZSIsIm5ld0NsYXNzU3RyaW5nIiwibmdDbGFzc1dhdGNoQWN0aW9uIiwiY2xhc3NDb3VudHMiLCJvbGRNb2R1bG8iLCJkaWdlc3RDbGFzc0NvdW50cyIsImNsYXNzQXJyYXkiLCJjbGFzc2VzVG9VcGRhdGUiLCJvbGRDbGFzc0FycmF5IiwibmV3Q2xhc3NBcnJheSIsInRvUmVtb3ZlQXJyYXkiLCJ0b0FkZEFycmF5IiwidG9SZW1vdmVTdHJpbmciLCJ0b0FkZFN0cmluZyIsImFycmF5RGlmZmVyZW5jZSIsIiRpbmRleCIsIm5ld01vZHVsbyIsImNsYXNzU3RyaW5nIiwiY2xhc3NWYWx1ZSIsImZsYXRWYWx1ZSIsImhhc1VuZGVmaW5lZCIsIm5nQ2xhc3NEaXJlY3RpdmUiLCJuZ0NsYXNzT2RkRGlyZWN0aXZlIiwibmdDbGFzc0V2ZW5EaXJlY3RpdmUiLCJuZ0Nsb2FrRGlyZWN0aXZlIiwibmdDb250cm9sbGVyRGlyZWN0aXZlIiwibmdFdmVudERpcmVjdGl2ZXMiLCJmb3JjZUFzeW5jRXZlbnRzIiwiYmx1ciIsImZvY3VzIiwibmdJZkRpcmVjdGl2ZSIsImJsb2NrIiwicHJldmlvdXNFbGVtZW50cyIsIm5nSWYiLCJuZ0luY2x1ZGVEaXJlY3RpdmUiLCIkYW5jaG9yU2Nyb2xsIiwic3JjRXhwIiwibmdJbmNsdWRlIiwib25sb2FkRXhwIiwiYXV0b1Njcm9sbEV4cCIsImF1dG9zY3JvbGwiLCJwcmV2aW91c0VsZW1lbnQiLCJjdXJyZW50RWxlbWVudCIsImNoYW5nZUNvdW50ZXIiLCJjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50IiwiYWZ0ZXJBbmltYXRpb24iLCJ0aGlzQ2hhbmdlSWQiLCJuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZSIsIm5nSW5pdERpcmVjdGl2ZSIsIm5nSW5pdCIsIm5nTGlzdERpcmVjdGl2ZSIsIm5nTGlzdCIsInRyaW1WYWx1ZXMiLCJVTlRPVUNIRURfQ0xBU1MiLCJUT1VDSEVEX0NMQVNTIiwiRU1QVFlfQ0xBU1MiLCJOT1RfRU1QVFlfQ0xBU1MiLCJOZ01vZGVsQ29udHJvbGxlciIsIiQkcmF3TW9kZWxWYWx1ZSIsIiRhc3luY1ZhbGlkYXRvcnMiLCIkdW50b3VjaGVkIiwiJHRvdWNoZWQiLCJkZWZhdWx0TW9kZWxPcHRpb25zIiwiJCR1cGRhdGVFdmVudHMiLCIkJHVwZGF0ZUV2ZW50SGFuZGxlciIsIiQkcGFyc2VkTmdNb2RlbCIsIiQkcGFyc2VkTmdNb2RlbEFzc2lnbiIsIiQkbmdNb2RlbEdldCIsIiQkbmdNb2RlbFNldCIsIiQkcGVuZGluZ0RlYm91bmNlIiwiJCRwYXJzZXJWYWxpZCIsIiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCIsImRlZmluZVByb3BlcnR5IiwiJCRhdHRyIiwiJCR0aW1lb3V0IiwiJCRleGNlcHRpb25IYW5kbGVyIiwiJCRzZXRNb2RlbFZhbHVlIiwiJCRpbml0R2V0dGVyU2V0dGVycyIsImludm9rZU1vZGVsR2V0dGVyIiwiaW52b2tlTW9kZWxTZXR0ZXIiLCIkJCRwIiwiJCR1cGRhdGVFbXB0eUNsYXNzZXMiLCIkc2V0VG91Y2hlZCIsIiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSIsInByZXZWYWxpZCIsInByZXZNb2RlbFZhbHVlIiwiYWxsb3dJbnZhbGlkIiwidGhhdCIsIiQkcnVuVmFsaWRhdG9ycyIsImFsbFZhbGlkIiwiJCR3cml0ZU1vZGVsVG9TY29wZSIsImRvbmVDYWxsYmFjayIsInZhbGlkYXRvclByb21pc2VzIiwibG9jYWxWYWxpZGF0aW9uUnVuSWQiLCJlcnJvcktleSIsInNldFZhbGlkaXR5IiwicHJvY2Vzc1BhcnNlRXJyb3JzIiwic3luY1ZhbGlkYXRvcnNWYWxpZCIsInZhbGlkYXRvciIsIkJvb2xlYW4iLCJwcm9jZXNzU3luY1ZhbGlkYXRvcnMiLCJ2YWxpZGF0aW9uRG9uZSIsIiQkcGFyc2VBbmRWYWxpZGF0ZSIsIndyaXRlVG9Nb2RlbElmTmVlZGVkIiwiJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdCIsImRlYm91bmNlRGVsYXkiLCIkb3ZlcnJpZGVNb2RlbE9wdGlvbnMiLCJjcmVhdGVDaGlsZCIsIiQkc2V0VXBkYXRlT25FdmVudHMiLCIkcHJvY2Vzc01vZGVsVmFsdWUiLCIkJGZvcm1hdCIsImZvcm1hdHRlcnMiLCJuZ01vZGVsRGlyZWN0aXZlIiwibW9kZWxDdHJsIiwiZm9ybUN0cmwiLCJvcHRpb25zQ3RybCIsInNldFRvdWNoZWQiLCJERUZBVUxUX1JFR0VYUCIsIk1vZGVsT3B0aW9ucyIsIiQkb3B0aW9ucyIsImluaGVyaXRBbGwiLCJ1cGRhdGVPbkRlZmF1bHQiLCJ1cGRhdGVPbiIsImRlYm91bmNlIiwiZ2V0dGVyU2V0dGVyIiwibmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUiLCJOZ01vZGVsT3B0aW9uc0NvbnRyb2xsZXIiLCIkJGF0dHJzIiwicGFyZW50T3B0aW9ucyIsInBhcmVudEN0cmwiLCJtb2RlbE9wdGlvbnNEZWZpbml0aW9uIiwibmdNb2RlbE9wdGlvbnMiLCJuZ05vbkJpbmRhYmxlRGlyZWN0aXZlIiwibmdPcHRpb25zTWluRXJyIiwiTkdfT1BUSU9OU19SRUdFWFAiLCJuZ09wdGlvbnNEaXJlY3RpdmUiLCJvcHRpb25UZW1wbGF0ZSIsIm9wdEdyb3VwVGVtcGxhdGUiLCJzZWxlY3RFbGVtZW50IiwicmVnaXN0ZXJPcHRpb24iLCJzZWxlY3RDdHJsIiwibmdNb2RlbEN0cmwiLCJoYXNFbXB0eU9wdGlvbiIsImVtcHR5T3B0aW9uIiwicHJvdmlkZWRFbXB0eU9wdGlvbiIsIm5nT3B0aW9ucyIsIm9wdGlvbnNFeHAiLCJ2YWx1ZU5hbWUiLCJrZXlOYW1lIiwic2VsZWN0QXMiLCJ0cmFja0J5Iiwidmlld1ZhbHVlRm4iLCJ0cmFja0J5Rm4iLCJnZXRUcmFja0J5VmFsdWVGbiIsImdldFRyYWNrQnlWYWx1ZSIsImdldExvY2FscyIsImRpc3BsYXlGbiIsImdyb3VwQnlGbiIsImRpc2FibGVXaGVuRm4iLCJ2YWx1ZXNGbiIsIk9wdGlvbiIsInNlbGVjdFZhbHVlIiwibGFiZWwiLCJncm91cCIsImRpc2FibGVkIiwiZ2V0T3B0aW9uVmFsdWVzS2V5cyIsIm9wdGlvblZhbHVlcyIsIm9wdGlvblZhbHVlc0tleXMiLCJpdGVtS2V5IiwiZ2V0V2F0Y2hhYmxlcyIsIndhdGNoZWRBcnJheSIsIm9wdGlvblZhbHVlc0xlbmd0aCIsImRpc2FibGVXaGVuIiwiZ2V0T3B0aW9ucyIsIm9wdGlvbkl0ZW1zIiwic2VsZWN0VmFsdWVNYXAiLCJvcHRpb25JdGVtIiwiZ2V0T3B0aW9uRnJvbVZpZXdWYWx1ZSIsImdldFZpZXdWYWx1ZUZyb21PcHRpb24iLCJwYXJzZU9wdGlvbnNFeHByZXNzaW9uIiwibGlzdEZyYWdtZW50IiwiYWRkT3B0aW9uRWxlbWVudCIsIm9wdGlvbkVsZW1lbnQiLCJnZXRBbmRVcGRhdGVTZWxlY3RlZE9wdGlvbiIsImdlbmVyYXRlVW5rbm93bk9wdGlvblZhbHVlIiwid3JpdGVWYWx1ZSIsInNlbGVjdGVkT3B0aW9ucyIsInJlYWRWYWx1ZSIsInNlbGVjdGlvbnMiLCJzZWxlY3RlZE9wdGlvbiIsInNlbGVjdGVkSW5kZXgiLCJyZW1vdmVVbmtub3duT3B0aW9uIiwic2VsZWN0VW5rbm93bk9yRW1wdHlPcHRpb24iLCJ1bnNlbGVjdEVtcHR5T3B0aW9uIiwib3B0aW9uU2NvcGUiLCJvcHRpb25FbCIsIm5lZWRzUmVyZW5kZXIiLCIkaXNFbXB0eU9wdGlvblNlbGVjdGVkIiwiZ3JvdXBFbGVtZW50TWFwIiwiZ3JvdXBFbGVtZW50IiwibmV4dFZhbHVlIiwiaXNOb3RQcmltaXRpdmUiLCJuZ1BsdXJhbGl6ZURpcmVjdGl2ZSIsIkJSQUNFIiwiSVNfV0hFTiIsImxhc3RDb3VudCIsIm51bWJlckV4cCIsIndoZW5FeHAiLCJ3aGVucyIsIndoZW5zRXhwRm5zIiwiYnJhY2VSZXBsYWNlbWVudCIsIndhdGNoUmVtb3ZlciIsInVwZGF0ZUVsZW1lbnRUZXh0IiwibmV3VGV4dCIsImF0dHJpYnV0ZU5hbWUiLCJ0bXBNYXRjaCIsIndoZW5LZXkiLCJjb3VudElzTmFOIiwicGx1cmFsQ2F0Iiwid2hlbkV4cEZuIiwibmdSZXBlYXREaXJlY3RpdmUiLCJOR19SRU1PVkVEIiwibmdSZXBlYXRNaW5FcnIiLCJ1cGRhdGVTY29wZSIsInZhbHVlSWRlbnRpZmllciIsImtleUlkZW50aWZpZXIiLCJhcnJheUxlbmd0aCIsIiRmaXJzdCIsIiRsYXN0IiwiJG1pZGRsZSIsIiRvZGQiLCIkZXZlbiIsIm5nUmVwZWF0IiwibmdSZXBlYXRFbmRDb21tZW50IiwiYWxpYXNBcyIsInRyYWNrQnlFeHAiLCJ0cmFja0J5RXhwR2V0dGVyIiwidHJhY2tCeUlkRXhwRm4iLCJ0cmFja0J5SWRBcnJheUZuIiwidHJhY2tCeUlkT2JqRm4iLCJoYXNoRm5Mb2NhbHMiLCJsYXN0QmxvY2tNYXAiLCJuZXh0Tm9kZSIsImNvbGxlY3Rpb25MZW5ndGgiLCJ0cmFja0J5SWQiLCJ0cmFja0J5SWRGbiIsImNvbGxlY3Rpb25LZXlzIiwibmV4dEJsb2NrT3JkZXIiLCJwcmV2aW91c05vZGUiLCJuZXh0QmxvY2tNYXAiLCJibG9ja0tleSIsIk5HX0hJREVfQ0xBU1MiLCJOR19ISURFX0lOX1BST0dSRVNTX0NMQVNTIiwibmdTaG93RGlyZWN0aXZlIiwibmdTaG93IiwibmdIaWRlRGlyZWN0aXZlIiwibmdIaWRlIiwibmdTdHlsZURpcmVjdGl2ZSIsIm5nU3R5bGUiLCJuZXdTdHlsZXMiLCJvbGRTdHlsZXMiLCJuZ1N3aXRjaERpcmVjdGl2ZSIsImNhc2VzIiwibmdTd2l0Y2hDb250cm9sbGVyIiwid2F0Y2hFeHByIiwibmdTd2l0Y2giLCJzZWxlY3RlZFRyYW5zY2x1ZGVzIiwic2VsZWN0ZWRFbGVtZW50cyIsInByZXZpb3VzTGVhdmVBbmltYXRpb25zIiwic2VsZWN0ZWRTY29wZXMiLCJzcGxpY2VGYWN0b3J5Iiwic2VsZWN0ZWRUcmFuc2NsdWRlIiwiY2FzZUVsZW1lbnQiLCJzZWxlY3RlZFNjb3BlIiwiYW5jaG9yIiwibmdTd2l0Y2hXaGVuRGlyZWN0aXZlIiwibmdTd2l0Y2hXaGVuIiwibmdTd2l0Y2hXaGVuU2VwYXJhdG9yIiwid2hlbkNhc2UiLCJuZ1N3aXRjaERlZmF1bHREaXJlY3RpdmUiLCJuZ1RyYW5zY2x1ZGVNaW5FcnIiLCJuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUiLCJmYWxsYmFja0xpbmtGbiIsIm5nVHJhbnNjbHVkZSIsIm5nVHJhbnNjbHVkZVNsb3QiLCJ1c2VGYWxsYmFja0NvbnRlbnQiLCJub3RXaGl0ZXNwYWNlIiwic2NyaXB0RGlyZWN0aXZlIiwibm9vcE5nTW9kZWxDb250cm9sbGVyIiwic2V0T3B0aW9uU2VsZWN0ZWRTdGF0dXMiLCJTZWxlY3RDb250cm9sbGVyIiwib3B0aW9uc01hcCIsInVua25vd25PcHRpb24iLCJyZW5kZXJVbmtub3duT3B0aW9uIiwidW5rbm93blZhbCIsInVwZGF0ZVVua25vd25PcHRpb24iLCJzZWxlY3RFbXB0eU9wdGlvbiIsInJlYWxWYWwiLCJoYXNPcHRpb24iLCJjdXJyZW50bHlTZWxlY3RlZE9wdGlvbiIsImhhc2hlZFZhbCIsImFkZE9wdGlvbiIsInNjaGVkdWxlUmVuZGVyIiwicmVtb3ZlT3B0aW9uIiwiJGhhc0VtcHR5T3B0aW9uIiwiJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkIiwicmVuZGVyU2NoZWR1bGVkIiwidXBkYXRlU2NoZWR1bGVkIiwic2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUiLCJyZW5kZXJBZnRlciIsIm9wdGlvbkF0dHJzIiwiaW50ZXJwb2xhdGVWYWx1ZUZuIiwiaW50ZXJwb2xhdGVUZXh0Rm4iLCJyZW1vdmFsIiwicHJldmlvdXNseVNlbGVjdGVkIiwicmVtb3ZlVmFsdWUiLCJzZWxlY3REaXJlY3RpdmUiLCJzaG91bGRCZVNlbGVjdGVkIiwiY3VycmVudGx5U2VsZWN0ZWQiLCJsYXN0VmlldyIsImxhc3RWaWV3UmVmIiwib3B0aW9uRGlyZWN0aXZlIiwic2VsZWN0Q3RybE5hbWUiLCJyZXF1aXJlZERpcmVjdGl2ZSIsInJlcXVpcmVkIiwicGF0dGVybkRpcmVjdGl2ZSIsInBhdHRlcm5FeHAiLCJtYXhsZW5ndGhEaXJlY3RpdmUiLCJtYXhsZW5ndGgiLCJpbnRWYWwiLCJtaW5sZW5ndGhEaXJlY3RpdmUiLCJtaW5sZW5ndGgiLCJvcmlnaW5hbENsZWFuRGF0YSIsImpxTmFtZSIsImVsZW1zIiwiYmluZEpRdWVyeSIsIiQkbWluRXJyIiwiJCRjc3AiLCIkJGVuY29kZVVyaVNlZ21lbnQiLCIkJGVuY29kZVVyaVF1ZXJ5IiwiJCRzdHJpbmdpZnkiLCJlbnN1cmUiLCJjb25maWdGbiIsImludm9rZVF1ZXVlIiwiY29uZmlnQmxvY2tzIiwiaW52b2tlTGF0ZXIiLCJtb2R1bGVJbnN0YW5jZSIsImludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSIsImFuaW1hdGlvbiIsImluc2VydE1ldGhvZCIsInJlY2lwZU5hbWUiLCJmYWN0b3J5RnVuY3Rpb24iLCJzZXR1cE1vZHVsZUxvYWRlciIsInRleHRhcmVhIiwiZm9ybSIsInNlbGVjdCIsIm5nQ2xhc3MiLCJuZ0NsYXNzRXZlbiIsIm5nQ2xhc3NPZGQiLCJuZ0Nsb2FrIiwibmdDb250cm9sbGVyIiwibmdOb25CaW5kYWJsZSIsIm5nUGx1cmFsaXplIiwibmdTd2l0Y2hEZWZhdWx0IiwibmdSZXF1aXJlZCIsIiRhbmltYXRlQ3NzIiwiJCRhbmltYXRlSnMiLCIkJGZvcmNlUmVmbG93IiwiJGludGVydmFsIiwiJGh0dHBQYXJhbVNlcmlhbGl6ZXIiLCIkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZSIsIiQkdGVzdGFiaWxpdHkiLCIkJGpxTGl0ZSIsIiQkTWFwIiwiYW5ndWxhclZlcnNpb24iLCJQTFVSQUxfQ0FURUdPUlkiLCJEQVkiLCJGSVJTVERBWU9GV0VFSyIsIk1PTlRIIiwiU0hPUlREQVkiLCJTSE9SVE1PTlRIIiwiU1RBTkRBTE9ORU1PTlRIIiwiV0VFS0VORFJBTkdFIiwiZnVsbERhdGUiLCJsb25nRGF0ZSIsIm1lZGl1bSIsIm1lZGl1bURhdGUiLCJtZWRpdW1UaW1lIiwic2hvcnQiLCJzaG9ydERhdGUiLCJzaG9ydFRpbWUiLCJtaW5JbnQiLCJsb2NhbGVJRCIsIm9wdF9wcmVjaXNpb24iLCJ2ZiIsImdldFZGIiwiaGVhZCIsImdsb2JhbCIsImV4cG9ydHMiLCJkZWZpbmUiLCJhbWQiLCJuZ19mcm9tX2ltcG9ydCIsIm5nX2Zyb21fZ2xvYmFsIiwibmciLCJjdXJyeSIsImluaXRpYWxfYXJncyIsImZ1bmNfYXJnc19sZW5ndGgiLCJjdXJyaWVkIiwiY29tcG9zZSIsInBpcGUiLCJmdW5jcyIsIl9pIiwicHJvcEVxIiwiX3ZhbCIsImFuZCIsImZuMSIsImZuMiIsIm9yIiwiYXJyIiwieCIsImFueSIsIm90aGVyIiwiZm5OYW1lIiwic3RydWN0IiwiR2xvYiIsImdsb2IiLCJyZWdleHBTdHJpbmciLCJzZWciLCJmcm9tU3RyaW5nIiwiU3RhdGVPYmplY3QiLCJzdGF0ZURlY2wiLCJpc1N0YXRlQ2xhc3MiLCJfX3N0YXRlT2JqZWN0Q2FjaGUiLCJuYW1lR2xvYiIsInJlZiIsImZxbiIsInBhcmFtZXRlcnMiLCJvcHRzIiwibWF0Y2hpbmdLZXlzIiwicGFyYW0iLCJwYXJhbWV0ZXIiLCJpc1N0YXRlIiwidG9TdHIiLCJ0aXMiLCJvIiwiaXNOdWxsT3JVbmRlZmluZWQiLCJpc0luamVjdGFibGUiLCJ2YWwkJDEiLCJ0YWlsIiwiaXNQcm9taXNlIiwibm90SW1wbGVtZW50ZWQiLCJmbm5hbWUiLCJzZXJ2aWNlcyIsImFuZ3VsYXIkMSIsImNiIiwiX3RoaXMiLCJfZXh0ZW5kIiwiX2VxdWFscyIsImNyZWF0ZVByb3h5RnVuY3Rpb25zIiwiZm5OYW1lcyIsImxhdGViaW5kIiwiYmluZEZ1bmN0aW9uIiwiYWNjIiwiaW5BcnJheSIsIl9pbkFycmF5IiwicmVtb3ZlRnJvbSIsIl9yZW1vdmVGcm9tIiwicHVzaFRvIiwiX3B1c2hUbyIsImRlcmVnQWxsIiwiZnVuY3Rpb25zIiwiZGVmYXVsdHNMaXN0IiwiX2RlZmF1bHRzTGlzdCIsImRlZmF1bHRWYWxzIiwicGljayIsIm1lcmdlUiIsIm1lbW8iLCJhbmNlc3RvcnMiLCJmaXJzdCIsInNlY29uZCIsInByb3BOYW1lcyIsIm9iakNvcHkiLCJfcHJvcCIsIm9taXQiLCJwbHVjayIsImFjY2VwdCIsIm1hcE9iaiIsImFsbFRydWVSIiwiYW55VHJ1ZVIiLCJ1bm5lc3RSIiwiZmxhdHRlblIiLCJwdXNoUiIsInVuaXFSIiwidW5uZXN0IiwiZmxhdHRlbiIsImFzc2VydFByZWRpY2F0ZSIsImFzc2VydEZuIiwiYXNzZXJ0TWFwIiwicHJlZGljYXRlT3JNYXAiLCJlcnJNc2ciLCJwYWlycyIsImFycmF5VHVwbGVzIiwibWF4QXJyYXlMZW4iLCJfbG9vcF8xIiwiYXBwbHlQYWlycyIsImtleVZhbFR1cGxlIiwiZGVzdCIsInRvT2JqIiwiYTEiLCJhMiIsInR1cCIsIlJlamVjdFR5cGUiLCJzaWxlbmNlVW5jYXVnaHRJblByb21pc2UiLCJzaWxlbnRSZWplY3Rpb24iLCJRdWV1ZSIsIl9pdGVtcyIsIl9saW1pdCIsIl9ldmljdExpc3RlbmVycyIsIm9uRXZpY3QiLCJlbnF1ZXVlIiwiZXZpY3QiLCJkZXF1ZXVlIiwiY2xlYXIiLCJwZWVrVGFpbCIsInBlZWtIZWFkIiwiUmVqZWN0aW9uIiwiZGV0YWlsIiwiaXNSZWplY3Rpb25Qcm9taXNlIiwiX3RyYW5zaXRpb25SZWplY3Rpb24iLCJzdXBlcnNlZGVkIiwicmVqZWN0aW9uIiwiU1VQRVJTRURFRCIsInJlZGlyZWN0ZWQiLCJpbnZhbGlkIiwiSU5WQUxJRCIsImlnbm9yZWQiLCJJR05PUkVEIiwiYWJvcnRlZCIsIkFCT1JURUQiLCJlcnJvcmVkIiwiRVJST1IiLCJub3JtYWxpemUiLCJ0b1Byb21pc2UiLCJ1aVZpZXdTdHJpbmciLCJ1aXZpZXciLCJjcmVhdGlvbkNvbnRleHQiLCIkdHlwZSIsIm5vcm1hbGl6ZWRDYXQiLCJDYXRlZ29yeSIsImNvbnNvbGV0YWJsZSIsInRhYmxlIiwiVHJhbnNpdGlvbkhvb2tQaGFzZSIsIlRyYW5zaXRpb25Ib29rU2NvcGUiLCJfdGlkIiwiX3JpZCIsInRyYW5zTGJsIiwidHJhbnMiLCJUcmFjZSIsIl9lbmFibGVkIiwiYXBwcm94aW1hdGVEaWdlc3RzIiwiX3NldCIsImNhdGVnb3JpZXMiLCJjYXRlZ29yeSIsImVuYWJsZSIsImRpc2FibGUiLCJ0cmFjZVRyYW5zaXRpb25TdGFydCIsIlRSQU5TSVRJT04iLCJ0cmFjZVRyYW5zaXRpb25JZ25vcmVkIiwidHJhY2VIb29rSW52b2NhdGlvbiIsIkhPT0siLCJmdW5jdGlvblRvU3RyaW5nIiwicmVnaXN0ZXJlZEhvb2siLCJtYXhMZW5ndGgiLCJ0cmFjZUhvb2tSZXN1bHQiLCJob29rUmVzdWx0IiwidHJhbnNpdGlvbk9wdGlvbnMiLCJ0cmFjZVJlc29sdmVQYXRoIiwiUkVTT0xWRSIsInRyYWNlUmVzb2x2YWJsZVJlc29sdmVkIiwicmVzb2x2YWJsZSIsInRyYWNlRXJyb3IiLCJ0cmFjZVN1Y2Nlc3MiLCJmaW5hbFN0YXRlIiwidHJhY2VVSVZpZXdFdmVudCIsInZpZXdEYXRhIiwiVUlWSUVXIiwicGFkU3RyaW5nIiwidHJhY2VVSVZpZXdDb25maWdVcGRhdGVkIiwidHJhY2VVSVZpZXdGaWxsIiwidHJhY2VWaWV3U3luYyIsIlZJRVdDT05GSUciLCJ1aXZoZWFkZXIiLCJfYSIsIl9iIiwidWlWaWV3Iiwidmlld0NvbmZpZyIsInVpdiIsImNmZyIsInZpZXdEZWNsIiwiJGNvbnRleHQiLCJsb2NhbGVDb21wYXJlIiwidHJhY2VWaWV3U2VydmljZUV2ZW50IiwidmlldyIsIiR1aVZpZXdOYW1lIiwiJHVpVmlld0NvbnRleHRBbmNob3IiLCJ0cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQiLCJ0cmFjZSIsIlRhcmdldFN0YXRlIiwiX3N0YXRlUmVnaXN0cnkiLCJfaWRlbnRpZmllciIsIl9wYXJhbXMiLCJfb3B0aW9ucyIsIl9kZWZpbml0aW9uIiwicmVsYXRpdmUiLCIkc3RhdGUiLCJleGlzdHMiLCJ2YWxpZCIsInN0YXRlTmFtZSIsIndpdGhTdGF0ZSIsIndpdGhQYXJhbXMiLCJuZXdQYXJhbXMiLCJ3aXRoT3B0aW9ucyIsIm5ld09wdHMiLCJpc0RlZiIsImRlZmF1bHRPcHRpb25zIiwidHJhbnNpdGlvbiIsInRyYWNlRGF0YSIsIlRyYW5zaXRpb25Ib29rIiwic3RhdGVDb250ZXh0IiwiaXNTdXBlcnNlZGVkIiwiaG9va1BoYXNlIiwiUlVOIiwiaXNBY3RpdmUiLCJldmVudFR5cGUiLCJob29rcyIsIndhaXRGb3IiLCJwcmV2IiwibmV4dEhvb2siLCJpbnZva2VIb29rIiwiaW52b2tlSG9va3MiLCJyZW1haW5pbmdIb29rcyIsInJ1bkFsbEhvb2tzIiwiaG9vayIsImxvZ0Vycm9yIiwicm91dGVyIiwic3RhdGVTZXJ2aWNlIiwiZGVmYXVsdEVycm9ySGFuZGxlciIsIl9kZXJlZ2lzdGVyZWQiLCJub3RDdXJyZW50IiwiZ2V0Tm90Q3VycmVudFJlamVjdGlvbiIsImhhbmRsZUVycm9yIiwiZ2V0RXJyb3JIYW5kbGVyIiwiaGFuZGxlUmVzdWx0IiwiZ2V0UmVzdWx0SGFuZGxlciIsInN5bmNocm9ub3VzIiwiaW52b2tlTGltaXQiLCJpbnZva2VDb3VudCIsImRlcmVnaXN0ZXIiLCJoYW5kbGVIb29rUmVzdWx0IiwiaXNUYXJnZXRTdGF0ZSIsIl9kaXNwb3NlZCIsIl9hYm9ydGVkIiwiZm5Ub1N0cmluZyIsIkhBTkRMRV9SRVNVTFQiLCJMT0dfUkVKRUNURURfUkVTVUxUIiwiTE9HX0VSUk9SIiwiUkVKRUNUX0VSUk9SIiwiVEhST1dfRVJST1IiLCJtYXRjaFN0YXRlIiwiY3JpdGVyaW9uIiwidG9NYXRjaCIsImdsb2JTdHJpbmdzIiwiUmVnaXN0ZXJlZEhvb2siLCJ0cmFuU3ZjIiwibWF0Y2hDcml0ZXJpYSIsInJlbW92ZUhvb2tGcm9tUmVnaXN0cnkiLCJfbWF0Y2hpbmdOb2RlcyIsIm1hdGNoaW5nIiwiX2dldERlZmF1bHRNYXRjaENyaXRlcmlhIiwiX3BsdWdpbmFwaSIsIl9nZXRQYXRoVHlwZXMiLCJfZ2V0TWF0Y2hpbmdOb2RlcyIsInRyZWVDaGFuZ2VzIiwiY3JpdGVyaWEiLCJtbiIsInBhdGh0eXBlIiwiaXNTdGF0ZUhvb2siLCJTVEFURSIsIm1ha2VFdmVudCIsInJlZ2lzdHJ5IiwidHJhbnNpdGlvblNlcnZpY2UiLCJfcmVnaXN0ZXJlZEhvb2tzIiwicmVtb3ZlSG9va0ZuIiwiaG9va1JlZ2lzdHJhdGlvbkZuIiwibWF0Y2hPYmplY3QiLCJIb29rQnVpbGRlciIsImJ1aWxkSG9va3NGb3JQaGFzZSIsIl9nZXRFdmVudHMiLCJidWlsZEhvb2tzIiwiaG9va1R5cGUiLCJtYXRjaGluZ0hvb2tzIiwiZ2V0TWF0Y2hpbmdIb29rcyIsImJhc2VIb29rT3B0aW9ucyIsImNyaXRlcmlhTWF0Y2hQYXRoIiwidHJhbnNpdGlvbkhvb2siLCJyZXZlcnNlRGVwdGhTb3J0IiwiZmFjdG9yIiwiZGVwdGhEZWx0YSIsInR1cGxlU29ydCIsInJldmVyc2VTb3J0IiwidHVwbGUiLCJpc0NyZWF0ZSIsIkNSRUFURSIsIiR0cmFuc2l0aW9ucyIsInJlZyIsImdldEhvb2tzIiwiUGFyYW1UeXBlIiwiZGVmIiwiZW5jb2RlIiwiZGVjb2RlIiwiJHN1YlBhdHRlcm4iLCJzdWIiLCIkYXNBcnJheSIsImlzU2VhcmNoIiwiYXJyYXlXcmFwIiwiYXJyYXlIYW5kbGVyIiwiYWxsVHJ1dGh5TW9kZSIsImFycmF5VW53cmFwIiwiYXJyYXlFcXVhbHNIYW5kbGVyIiwidmFsMSIsInZhbDIiLCJwYXJhbVR5cGVGbiIsIndyYXBwZXJGbiIsImR5bmFtaWMiLCIkYXJyYXlNb2RlIiwiRGVmVHlwZSIsImhhc093biIsImlzU2hvcnRoYW5kIiwiUGFyYW0iLCJ1cmxNYXRjaGVyRmFjdG9yeSIsInVybFR5cGUiLCJwYXJhbVR5cGVzIiwiQ09ORklHIiwiUEFUSCIsIlNFQVJDSCIsImdldFR5cGUiLCJnZXRTdGF0aWNEZWZhdWx0VmFsdWUiLCIkJGZuIiwidW53cmFwU2hvcnRoYW5kIiwiYXJyYXlEZWZhdWx0cyIsImFycmF5UGFyYW1Ob21lbmNsYXR1cmUiLCJhcnJheU1vZGUiLCJpc09wdGlvbmFsIiwicmF3Iiwic3F1YXNoIiwiZGVmYXVsdFBvbGljeSIsImdldFNxdWFzaFBvbGljeSIsImRlZmF1bHRTcXVhc2hQb2xpY3kiLCJjb25maWd1cmVkS2V5cyIsImdldFJlcGxhY2UiLCJpbmhlcml0JCQxIiwidmFsdWVzJCQxIiwicGFyYW1WYWx1ZXMiLCJwYXJhbXNfMSIsInZhbHVlczEiLCJ2YWx1ZXMyIiwidmFsaWRhdGVzIiwiaXNEZWZhdWx0VmFsdWUiLCJyZXBsYWNlU3BlY2lhbFZhbHVlcyIsIl9kZWZhdWx0VmFsdWVDYWNoZSIsImdldERlZmF1bHRWYWx1ZSIsImVuY29kZWQiLCJQYXRoTm9kZSIsInN0YXRlT3JOb2RlIiwicGFyYW1TY2hlbWEiLCJyZXNvbHZhYmxlcyIsInZpZXdzIiwicmVzIiwiYXBwbHlSYXdQYXJhbXMiLCJwRGVmIiwicGFyYW1EZWYiLCJwYXJhbXNGbiIsIlBhdGhVdGlscyIsIm1ha2VUYXJnZXRTdGF0ZSIsImJ1aWxkUGF0aCIsInRhcmdldFN0YXRlIiwidG9QYXJhbXMiLCJidWlsZFRvUGF0aCIsImZyb21QYXRoIiwidG9QYXRoIiwiaW5oZXJpdFBhcmFtcyIsImFwcGx5Vmlld0NvbmZpZ3MiLCIkdmlldyIsInN0YXRlcyIsInZpZXdEZWNscyIsInN1YlBhdGgiLCJ2aWV3Q29uZmlncyIsImNyZWF0ZVZpZXdDb25maWciLCJ0b0tleXMiLCJub0luaGVyaXQiLCJ0b05vZGUiLCJ0b1BhcmFtVmFscyIsImluY29taW5nUGFyYW1WYWxzIiwiZnJvbVBhcmFtVmFscyIsIm93blBhcmFtVmFscyIsInJlbG9hZFN0YXRlIiwibm9kZTEiLCJub2RlMiIsInJldGFpbmVkIiwiZXhpdGluZyIsImVudGVyaW5nIiwia2VlcCIsIm5vbkR5bmFtaWNQYXJhbXMiLCJyZXRhaW5lZFdpdGhUb1BhcmFtcyIsInJldGFpbmVkTm9kZSIsImNsb25lZCIsInBhdGhBIiwicGF0aEIiLCJub2RlQSIsIm5vZGVCIiwiZWxlbWVudElkeCIsImRlZmF1bHRSZXNvbHZlUG9saWN5IiwiUmVzb2x2YWJsZSIsInJlc29sdmVGbiIsImRlcHMiLCJwb2xpY3kiLCJyZXNvbHZlZCIsImdldFBvbGljeSIsInRoaXNQb2xpY3kiLCJzdGF0ZVBvbGljeSIsInJlc29sdmVQb2xpY3kiLCJyZXNvbHZlQ29udGV4dCIsImZpbmROb2RlIiwibWF5YmVXYWl0Rm9yUngiLCJvYnNlcnZhYmxlJCIsImNhY2hlZCIsInRha2UiLCJnZXREZXBlbmRlbmNpZXMiLCJyZXNvbHZlZERlcHMiLCJyZXNvbHZlZFZhbHVlIiwiZnJvbURhdGEiLCJyZXNvbHZlUG9saWNpZXMiLCJMQVpZIiwiRUFHRVIiLCJXQUlUIiwiTk9XQUlUIiwiUlhXQUlUIiwiQUxMX1dIRU5TIiwiRUFHRVJfV0hFTlMiLCJOQVRJVkVfSU5KRUNUT1JfVE9LRU4iLCJSZXNvbHZlQ29udGV4dCIsIl9wYXRoIiwiZ2V0VG9rZW5zIiwiZ2V0UmVzb2x2YWJsZSIsInN1YkNvbnRleHQiLCJhZGRSZXNvbHZhYmxlcyIsIm5ld1Jlc29sdmFibGVzIiwicmVzb2x2ZVBhdGgiLCJtYXRjaGVkV2hlbnMiLCJtYXRjaGVzUG9saWN5IiwiYWNjZXB0ZWRWYWxzIiwid2hlbk9yQXN5bmMiLCJub2RlUmVzb2x2YWJsZXMiLCJub3dhaXQiLCJ3YWl0IiwiZ2V0UmVzdWx0IiwiX2luamVjdG9yIiwiVUlJbmplY3RvckltcGwiLCJhdmFpbGFibGVSZXNvbHZhYmxlcyIsIl9ub2RlIiwiZnJvbUluamVjdG9yIiwiZ2V0TmF0aXZlIiwibmF0aXZlIiwiZ2V0QXN5bmMiLCJzdGF0ZVNlbGYiLCJUcmFuc2l0aW9uIiwiX2RlZmVycmVkIiwiX2hvb2tCdWlsZGVyIiwiX3RhcmdldFN0YXRlIiwiX3RyYW5zaXRpb25Db3VudCIsIl90cmVlQ2hhbmdlcyIsImNyZWF0ZVRyYW5zaXRpb25Ib29rUmVnRm5zIiwib25DcmVhdGVIb29rcyIsIm9uQmVmb3JlIiwib25TdGFydCIsIm9uRXhpdCIsIm9uUmV0YWluIiwib25FbnRlciIsIm9uRmluaXNoIiwib25TdWNjZXNzIiwib25FcnJvciIsImhvb2tOYW1lIiwiZW50ZXJpbmdTdGF0ZXMiLCIkZnJvbSIsIiR0byIsImZyZWV6ZSIsInBhdGhOYW1lIiwiZ2V0UmVzb2x2ZVRva2VucyIsImFkZFJlc29sdmFibGUiLCJ0b3BhdGgiLCJ0YXJnZXROb2RlIiwicmVkaXJlY3RlZEZyb20iLCJvcmlnaW5hbFRyYW5zaXRpb24iLCJyZiIsInJlZGlyZWN0IiwicmVkaXJlY3RzIiwicmVkaXJlY3RPcHRzIiwibmV3T3B0aW9ucyIsIm5ld1RyYW5zaXRpb24iLCJvcmlnaW5hbEVudGVyaW5nTm9kZXMiLCJyZWRpcmVjdEVudGVyaW5nTm9kZXMiLCJfY2hhbmdlZFBhcmFtcyIsInRjIiwibm9kZVNjaGVtYXMiLCJzY2hlbWEiLCJ0b1ZhbHMiLCJmcm9tVmFscyIsIl9pZ25vcmVkUmVhc29uIiwic2FtZSIsIm5ld1RDIiwicGVuZFRDIiwiZ2V0SG9va3NGb3IiLCJhbGxCZWZvcmVIb29rcyIsIkJFRk9SRSIsImxhc3RTdGFydGVkVHJhbnNpdGlvbklkIiwidHJhbnNpdGlvbkhpc3RvcnkiLCJhbGxSdW5Ib29rcyIsInN1Y2Nlc3MiLCJTVUNDRVNTIiwiX2Vycm9yIiwiYWJzdHJhY3QiLCJwYXJhbURlZnMiLCJpbnZhbGlkUGFyYW1zIiwiZnJvbVN0YXRlT3JOYW1lIiwidG9TdGF0ZU9yTmFtZSIsImF2b2lkRW1wdHlIYXNoIiwiZGlUb2tlbiIsImtlYm9iU3RyaW5nIiwiY2FtZWxDYXNlIiwiJDEiLCJmblN0ciIsIm5hbWVkRnVuY3Rpb25NYXRjaCIsIl9mbiIsInN0cmluZ2lmeVBhdHRlcm5GbiIsInN0cmluZ2lmeVBhdHRlcm4iLCJpc1JlamVjdGlvbiIsImJlZm9yZUFmdGVyU3Vic3RyIiwiY2hhciIsImhvc3RSZWdleCIsInN0cmlwTGFzdFBhdGhFbGVtZW50Iiwic3BsaXRIYXNoIiwic3BsaXRRdWVyeSIsInNwbGl0RXF1YWwiLCJ0cmltSGFzaFZhbCIsInNwbGl0T25EZWxpbSIsImRlbGltIiwiam9pbk5laWdoYm9yc1IiLCJtYWtlRGVmYXVsdFR5cGUiLCJQYXJhbVR5cGVzIiwidHlwZVF1ZXVlIiwiZGVmYXVsdFR5cGVzIiwiZGlzcG9zZSIsImRlZmluaXRpb25GbiIsIl9mbHVzaFR5cGVRdWV1ZSIsInZhbFRvU3RyaW5nIiwiZGVmYXVsdFR5cGVCYXNlIiwicXVlcnkiLCJpbnQiLCJib29sIiwiY2FwdHVyZSIsIlN0YXRlUGFyYW1zIiwiJGluaGVyaXQiLCIkY3VycmVudCIsInBhcmVudFBhcmFtcyIsInBhcmVudHMiLCJpbmhlcml0ZWQiLCJpbmhlcml0TGlzdCIsIm5hbWVCdWlsZGVyIiwic2VsZkJ1aWxkZXIiLCJkYXRhQnVpbGRlciIsImdldFVybEJ1aWxkZXIiLCIkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciIsInJvb3QkJDEiLCJzdGF0ZURlYyIsInBhcnNlVXJsIiwicGFyYW1NYXAiLCJwYXJhbUNvbmZpZyIsInJlbG9hZE9uU2VhcmNoIiwiaXNNYXRjaGVyIiwibmF2aWdhYmxlIiwiZ2V0TmF2aWdhYmxlQnVpbGRlciIsImlzUm9vdCIsImdldFBhcmFtc0J1aWxkZXIiLCJwYXJhbUZhY3RvcnkiLCJ1cmxQYXJhbXMiLCJub25VcmxQYXJhbXMiLCJmcm9tQ29uZmlnIiwicGF0aEJ1aWxkZXIiLCJpbmNsdWRlc0J1aWxkZXIiLCJyZXNvbHZhYmxlc0J1aWxkZXIiLCJyZXNvbHZlT2JqIiwiZ2V0VG9rZW4iLCJwcm92aWRlIiwibGl0ZXJhbDJSZXNvbHZhYmxlIiwidXNlRmFjdG9yeSIsImRlcGVuZGVuY2llcyIsInVzZUNsYXNzIiwidXNlVmFsdWUiLCJ1c2VFeGlzdGluZyIsInR1cGxlMlJlc29sdmFibGUiLCJpdGVtMlJlc29sdmFibGUiLCJkZWNsIiwiU3RhdGVCdWlsZGVyIiwiYnVpbGRlcnMiLCJwYXJlbnROYW1lIiwiYnVpbGRlciIsImJ1aWxkIiwicGFyZW50Rm4iLCJTdGF0ZU1hdGNoZXIiLCJfc3RhdGVzIiwiaXNSZWxhdGl2ZSIsInN0YXRlT3JOYW1lIiwibWF0Y2hHbG9iIiwiaXNTdHIiLCJiYXNlU3RhdGUiLCJzcGxpdE5hbWUiLCJwYXRoTGVuZ3RoIiwicmVsTmFtZSIsIlN0YXRlUXVldWVNYW5hZ2VyIiwiJHJlZ2lzdHJ5IiwiJHVybFJvdXRlciIsImZsdXNoIiwicmVnaXN0ZXJlZCIsIm9ycGhhbnMiLCJwcmV2aW91c1F1ZXVlTGVuZ3RoIiwiZ2V0U3RhdGUiLCJuYW1lXzEiLCJvcnBoYW5JZHgiLCJleGlzdGluZ1N0YXRlIiwiZXhpc3RpbmdGdXR1cmVTdGF0ZSIsImF0dGFjaFJvdXRlIiwicnVsZSIsInVybFJ1bGVGYWN0b3J5IiwiU3RhdGVSZWdpc3RyeSIsIl9yb3V0ZXIiLCJzdGF0ZVF1ZXVlIiwidXJsUm91dGVyIiwiX3JlZ2lzdGVyUm9vdCIsIl9yb290IiwiIyIsIm9uU3RhdGVzQ2hhbmdlZCIsInN0YXRlRGVmaW5pdGlvbiIsIl9kZXJlZ2lzdGVyVHJlZSIsImFsbCQkMSIsImdldENoaWxkcmVuIiwiX2NoaWxkcmVuIiwiZGVyZWdpc3RlcmVkIiwiJHVyIiwicmVtb3ZlUnVsZSIsImRlcmVnaXN0ZXJlZFN0YXRlcyIsImZvdW5kIiwicXVvdGVSZWdFeHAiLCJzdXJyb3VuZFBhdHRlcm4iLCJzcGxpdE9uU2xhc2giLCJVcmxNYXRjaGVyIiwicGF0dGVybiQkMSIsIl9jYWNoZSIsIl9zZWdtZW50cyIsIl9jb21waWxlZCIsInN0cmljdCIsImNhc2VJbnNlbnNpdGl2ZSIsIm1hdGNoQXJyYXkiLCJzZWdtZW50IiwicGxhY2Vob2xkZXIiLCJzZWFyY2hQbGFjZWhvbGRlciIsInBhdHRlcm5zIiwiY2hlY2tQYXJhbUVycm9ycyIsIm5hbWVWYWxpZGF0b3IiLCJtYXRjaERldGFpbHMiLCJmcm9tU2VhcmNoIiwiX3BhdHRlcm4iLCJlbmNvZGVEYXNoZXMiLCJwYXRoU2VnbWVudHNBbmRQYXJhbXMiLCJxdWVyeVBhcmFtcyIsIndlaWdodHMiLCJ3ZWlnaHRzQSIsIndlaWdodHNCIiwicGFkVmFsIiwicGFkQXJyYXlzIiwiY21wIiwiX3BhaXJzIiwicmV2ZXJzZVN0cmluZyIsImFsbFBhcmFtcyIsInBhdGhQYXJhbXMiLCJzZWFyY2hQYXJhbXMiLCJuUGF0aFNlZ21lbnRzIiwidXJsbSIsImZpbmRQYXJhbSIsInVybE1hdGNoZXJzIiwiZ2V0RGV0YWlscyIsInBhdGhTdHJpbmciLCJxdWVyeVN0cmluZyIsInBhcmFtRGV0YWlscyIsIlVybE1hdGNoZXJGYWN0b3J5IiwiX2lzQ2FzZUluc2Vuc2l0aXZlIiwiX2lzU3RyaWN0TW9kZSIsIl9kZWZhdWx0U3F1YXNoUG9saWN5IiwiX2dldENvbmZpZyIsInN0cmljdE1vZGUiLCJVcmxSdWxlRmFjdG9yeSIsIm1ha2VSdWxlIiwiX3doYXQiLCJmcm9tVXJsTWF0Y2hlciIsImZyb21TdGF0ZSIsImZyb21SZWdFeHAiLCJCYXNlVXJsUnVsZSIsInVybE1hdGNoZXIiLCJfaGFuZGxlciIsImRldGFpbHMiLCJtYXRjaFByaW9yaXR5IiwidHJhbnNpdGlvblRvIiwic3RpY2t5IiwiaXNVcmxSdWxlIiwiZGVmYXVsdFJ1bGVTb3J0Rm4iLCJ1c2VNYXRjaFByaW9yaXR5IiwiVVJMTUFUQ0hFUiIsIlJFR0VYUCIsIlJBVyIsIk9USEVSIiwiVXJsUm91dGVyIiwiX3NvcnRGbiIsIl9ydWxlcyIsImludGVyY2VwdERlZmVycmVkIiwiX2lkIiwiX3NvcnRlZCIsImxpc3RlbiIsIl9vdGhlcndpc2VGbiIsInN0YWJsZVNvcnQiLCJlbnN1cmVTb3J0ZWQiLCJhcnJPZldyYXBwZXIiLCJ3cmFwcGVyQSIsIndyYXBwZXJCIiwiY21wRGlmZiIsImJlc3QiLCJ3ZWlnaHQiLCJzeW5jIiwiZXZ0IiwiJHVybCIsInVybFNlcnZpY2UiLCJuZXd1cmwiLCJnbyIsImFwcGx5UmVzdWx0IiwiX3N0b3BGbiIsIm9uQ2hhbmdlIiwidXBkYXRlIiwicmVhZCIsImxvY2F0aW9uU2VydmljZSIsImFic29sdXRlIiwiaXNIdG1sNSIsInNsYXNoIiwiY2ZnUG9ydCIsIm90aGVyd2lzZSIsImhhbmRsZXJGbiIsImdldEhhbmRsZXJGbiIsImluaXRpYWwiLCJ1cmxQYXJ0cyIsImRlZmVySW50ZXJjZXB0IiwiVmlld1NlcnZpY2UiLCJfdWlWaWV3cyIsIl92aWV3Q29uZmlncyIsIl92aWV3Q29uZmlnRmFjdG9yaWVzIiwiX2xpc3RlbmVycyIsIl9yb290Vmlld0NvbnRleHQiLCJfdmlld0NvbmZpZ0ZhY3RvcnkiLCJfcmVnaXN0ZXJlZFVJVmlld3MiLCJfYWN0aXZlVmlld0NvbmZpZ3MiLCJfb25TeW5jIiwibm9ybWFsaXplVUlWaWV3VGFyZ2V0IiwicmF3Vmlld05hbWUiLCJ2aWV3QXRDb250ZXh0IiwidWlWaWV3TmFtZSIsInVpVmlld0NvbnRleHRBbmNob3IiLCJyZWxhdGl2ZVZpZXdOYW1lU3VnYXIiLCJfcm9vdENvbnRleHQiLCJ2aWV3VHlwZSIsImNmZ0ZhY3RvcnkiLCJjZmdzIiwiZGVhY3RpdmF0ZVZpZXdDb25maWciLCJhY3RpdmF0ZVZpZXdDb25maWciLCJ1aVZpZXdzQnlGcW4iLCJ2aWV3Q29uZmlnRGVwdGgiLCJkZXB0aENvbXBhcmUiLCJkZXB0aEZuIiwicG9zTmVnIiwidWlWaWV3VHVwbGVzIiwic3RhdGVEZXB0aCIsIm1hdGNoaW5nQ29uZmlncyIsIm1hdGNoZWRWaWV3Q29uZmlncyIsInVubWF0Y2hlZENvbmZpZ1R1cGxlcyIsImNvbmZpZ1VwZGF0ZWQiLCJhbGxUdXBsZXMiLCJyZWdpc3RlclVJVmlldyIsInVpVmlld3MiLCJhdmFpbGFibGUiLCJhY3RpdmUiLCJ2YyIsInZjU2VnbWVudHMiLCJ1aXZTZWdtZW50cyIsIm5lZ09mZnNldCIsImZxblRvRmlyc3RTZWdtZW50IiwidWlWaWV3Q29udGV4dCIsIlVJUm91dGVyR2xvYmFscyIsInN1Y2Nlc3NmdWxUcmFuc2l0aW9ucyIsIm1ha2VTdHViIiwibG9jYXRpb25TZXJ2aWNlc0ZucyIsImxvY2F0aW9uQ29uZmlnRm5zIiwidW1mRm5zIiwicnVsZXNGbnMiLCJzeW5jRm5zIiwiVXJsU2VydmljZSIsImxhdGVCaW5kIiwibG9jYXRpb25TZXJ2aWNlcyIsImxvY2F0aW9uQ29uZmlnIiwidW1mIiwibG9jYXRpb25TZXJ2aWNlU3R1YiIsImxvY2F0aW9uQ29uZmlnU3R1YiIsIl9yb3V0ZXJJbnN0YW5jZSIsIlVJUm91dGVyIiwiX2Rpc3Bvc2FibGVzIiwidmlld1NlcnZpY2UiLCJUcmFuc2l0aW9uU2VydmljZSIsInN0YXRlUmVnaXN0cnkiLCJTdGF0ZVNlcnZpY2UiLCJfcGx1Z2lucyIsImRpc3Bvc2FibGUiLCJwbHVnaW4iLCJwbHVnaW5JbnN0YW5jZSIsImdldFBsdWdpbiIsInBsdWdpbk5hbWUiLCJhZGRDb3JlUmVzb2x2YWJsZXMiLCJpc1RyYW5zaXRpb24iLCJ0cmVlQ2hhbmdlc0NsZWFudXAiLCJyZXBsYWNlVHJhbnNpdGlvbldpdGhOdWxsIiwicmVkaXJlY3RUb0hvb2siLCJyZWRpcmVjdFRvIiwibWFrZUVudGVyRXhpdFJldGFpbkhvb2siLCJob29rRm4iLCJvbkV4aXRIb29rIiwib25SZXRhaW5Ib29rIiwib25FbnRlckhvb2siLCJlYWdlclJlc29sdmVQYXRoIiwibGF6eVJlc29sdmVTdGF0ZSIsInJlc29sdmVSZW1haW5pbmciLCJsb2FkRW50ZXJpbmdWaWV3cyIsImVudGVyaW5nVmlld3MiLCJsb2FkIiwiYWN0aXZhdGVWaWV3cyIsImV4aXRpbmdWaWV3cyIsInVwZGF0ZUdsb2JhbFN0YXRlIiwiY2xlYXJDdXJyZW50VHJhbnNpdGlvbiIsInVwZGF0ZVVybCIsInVybE9wdGlvbnMiLCJsYXp5TG9hZEhvb2siLCJsYXp5TG9hZCIsImxhenlMb2FkU3RhdGUiLCJvcmlnIiwibGF6eUxvYWRGbiIsIlRyYW5zaXRpb25FdmVudFR5cGUiLCJob29rT3JkZXIiLCJpZ25vcmVkSG9vayIsImlnbm9yZWRSZWFzb24iLCJpbnZhbGlkVHJhbnNpdGlvbkhvb2siLCJkZWZhdWx0VHJhbnNPcHRzIiwiY3VzdG9tIiwiX2V2ZW50VHlwZXMiLCJfY3JpdGVyaWFQYXRocyIsIl9kZXJlZ2lzdGVySG9va0ZucyIsIl9kZWZpbmVDb3JlUGF0aHMiLCJfZGVmaW5lQ29yZUV2ZW50cyIsIl9yZWdpc3RlckNvcmVUcmFuc2l0aW9uSG9va3MiLCJvbkNyZWF0ZSIsImhvb2tzQXJyYXkiLCJQaGFzZSIsIlRIIiwicGF0aHMiLCJfZGVmaW5lRXZlbnQiLCJfZGVmaW5lUGF0aFR5cGUiLCJjbXBCeVBoYXNlIiwiaG9va1Njb3BlIiwiYWRkQ29yZVJlc29sdmVzIiwiZWFnZXJSZXNvbHZlIiwibGF6eVJlc29sdmUiLCJyZXNvbHZlQWxsIiwibG9hZFZpZXdzIiwidXBkYXRlR2xvYmFscyIsImludmFsaWRDYWxsYmFja3MiLCJfZGVmYXVsdEVycm9ySGFuZGxlciIsIiRlcnJvciQiLCJib3VuZEZucyIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJfaGFuZGxlSW52YWxpZFRhcmdldFN0YXRlIiwidG9TdGF0ZSIsImxhdGVzdFRoaW5nIiwibGF0ZXN0IiwiY2FsbGJhY2tRdWV1ZSIsImNoZWNrRm9yUmVkaXJlY3QiLCJpbnZva2VOZXh0Q2FsbGJhY2siLCJuZXh0Q2FsbGJhY2siLCJvbkludmFsaWQiLCJ0cmFuc09wdHMiLCJnZXRDdXJyZW50UGF0aCIsImxhdGVzdFN1Y2Nlc3MiLCJjdXJyZW50UGF0aCIsInJlamVjdGVkVHJhbnNpdGlvbkhhbmRsZXIiLCJpc0xhdGVzdCIsImVycm9ySGFuZGxlciIsInRyYW5zaXRpb25Ub1Byb21pc2UiLCJpbmNsdWRlIiwibG9zc3kiLCJuYXYiLCJBUkdVTUVOVF9OQU1FUyIsImVuc3VyZUV4aXN0Iiwia2V5VmFsc1RvT2JqZWN0UiIsImFjY3VtIiwiZ2V0UGFyYW1zIiwicGFyc2VVcmwkMSIsIm9yRW1wdHlTdHJpbmciLCJiZWZvcmVoYXNoIiwiYnVpbGRVcmwiLCJsb2MiLCJzZWFyY2hPYmplY3QiLCJsb2NhdGlvblBsdWdpbkZhY3RvcnkiLCJzZXJ2aWNlQ2xhc3MiLCJjb25maWd1cmF0aW9uQ2xhc3MiLCJ1aVJvdXRlciIsImNvbmZpZ3VyYXRpb24iLCJleHRlbmRTdGF0aWNzIiwiQmFzZUxvY2F0aW9uU2VydmljZXMiLCJmaXJlQWZ0ZXJVcGRhdGUiLCJfbGlzdGVuZXIiLCJfZ2V0IiwiX2xvY2F0aW9uIiwiX2hpc3RvcnkiLCJfX2V4dGVuZHMiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9fIiwiSGFzaExvY2F0aW9uU2VydmljZSIsIl9zdXBlciIsInRpdGxlIiwiX19leHRlbmRzJDEiLCJNZW1vcnlMb2NhdGlvblNlcnZpY2UiLCJfdXJsIiwiX19leHRlbmRzJDIiLCJQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UiLCJfY29uZmlnIiwiX2dldEJhc2VQcmVmaXgiLCJleGFjdEJhc2VIcmVmTWF0Y2giLCJzdGFydHNXaXRoQmFzZSIsImZ1bGxVcmwiLCJyZXBsYWNlU3RhdGUiLCJNZW1vcnlMb2NhdGlvbkNvbmZpZyIsIl9iYXNlSHJlZiIsIl9wb3J0IiwiX3Byb3RvY29sIiwiX2hvc3QiLCJfaGFzaFByZWZpeCIsIm5ld3ZhbCIsIkJyb3dzZXJMb2NhdGlvbkNvbmZpZyIsIl9pc0h0bWw1IiwibmV3cHJlZml4IiwiYXBwbHlEb2N1bWVudEJhc2VIcmVmIiwiYmFzZVRhZyIsInNlcnZpY2VzUGx1Z2luIiwiaGFzaExvY2F0aW9uUGx1Z2luIiwicHVzaFN0YXRlTG9jYXRpb25QbHVnaW4iLCJtZW1vcnlMb2NhdGlvblBsdWdpbiIsIlVJUm91dGVyUGx1Z2luQmFzZSIsImdldE5nMVZpZXdDb25maWdGYWN0b3J5IiwidGVtcGxhdGVGYWN0b3J5IiwiTmcxVmlld0NvbmZpZyIsImhhc0FueUtleSIsIm5nMVZpZXdzQnVpbGRlciIsImNvbXBLZXlzIiwibm9uQ29tcEtleXMiLCJhbGxWaWV3S2V5cyIsInZpZXdzT2JqZWN0IiwiJGRlZmF1bHQiLCJyZXNvbHZlQXMiLCJpZCQxIiwibG9hZGVkIiwiZ2V0VGVtcGxhdGUiLCJtYWtlQ29tcG9uZW50VGVtcGxhdGUiLCJnZXRDb250cm9sbGVyIiwiY29udHJvbGxlclByb3ZpZGVyIiwicHJvdmlkZXJGbiIsIlRlbXBsYXRlRmFjdG9yeSIsIl91c2VIdHRwIiwidXNlSHR0cFNlcnZpY2UiLCJhc1RlbXBsYXRlIiwiYXNDb21wb25lbnQiLCJmcm9tVXJsIiwidGVtcGxhdGVQcm92aWRlciIsImZyb21Qcm92aWRlciIsImNvbXBvbmVudFByb3ZpZGVyIiwiZnJvbUNvbXBvbmVudFByb3ZpZGVyIiwia2Vib2IiLCJrZWJvYmVkIiwiY21wRGVmcyIsImdldEJpbmRpbmdzIiwiZ2V0Q29tcG9uZW50QmluZGluZ3MiLCJyZXNvbHZlTmFtZSIsImtlYm9iTmFtZSIsInNjb3BlQmluZGluZ3MiLCJiaW5kaW5nc09iaiIsIlN0YXRlUHJvdmlkZXIiLCJnZXRTdGF0ZUhvb2tCdWlsZGVyIiwic3RhdGVPYmplY3QiLCIkc3RhdGUkIiwiJHRyYW5zaXRpb24kIiwiTmcxTG9jYXRpb25TZXJ2aWNlcyIsIiRsb2NhdGlvblByb3ZpZGVyIiwiX3VybExpc3RlbmVycyIsIl9scCIsIm1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGUiLCJwYXRoVHlwZSIsIn4iLCIvIiwifn4iLCJ+MkYiLCJfcnVudGltZVNlcnZpY2VzIiwiX2xvYyIsIl9icm93c2VyIiwiVXJsUm91dGVyUHJvdmlkZXIiLCJfdXJsUm91dGVyIiwiaW5qZWN0YWJsZUhhbmRsZXIiLCIkbWF0Y2giLCIkc3RhdGVQYXJhbXMiLCJydWxlRm4iLCJtb2RfaW5pdCIsIm1vZF91dGlsIiwibW9kX3J0ciIsIm1vZF9zdGF0ZSIsIm1vZF9tYWluIiwiJHVpUm91dGVyUHJvdmlkZXIiLCJzdGF0ZVByb3ZpZGVyIiwibmcxTG9jYXRpb25TZXJ2aWNlIiwiZ2V0UHJvdmlkZXJGb3IiLCIkdXJwIiwicnVuQmxvY2siLCIkdWlSb3V0ZXIiLCJ3YXRjaERpZ2VzdHMiLCJ1cmxSb3V0ZXJQcm92aWRlciIsIiR1cmxNYXRjaGVyRmFjdG9yeSIsInVpU3JlZkRpcmVjdGl2ZSIsInVpU3RhdGVEaXJlY3RpdmUiLCJ1aVNyZWZBY3RpdmVEaXJlY3RpdmUiLCJjdHgiLCJwYXJzZVN0YXRlUmVmIiwicGFyYW1zT25seSIsInBhcmFtRXhwciIsIiR1aVZpZXciLCJwcm9jZXNzZWREZWYiLCJ1aVN0YXRlIiwidWlTdGF0ZU9wdHMiLCJ1aVN0YXRlUGFyYW1zIiwiZ2V0VHlwZUluZm8iLCJpc1N2ZyIsImlzRm9ybSIsImlzQW5jaG9yIiwiY2xpY2thYmxlIiwiY2xpY2tIb29rIiwiZ2V0RGVmIiwidHJhbnNpdGlvbl8xIiwiaWdub3JlUHJldmVudERlZmF1bHRDb3VudF8xIiwiYmluZEV2ZW50cyIsImV2ZW50c18xIiwiZXZlbnRfMSIsImV2ZW50c18yIiwiZXZlbnRfMiIsIiRJc1N0YXRlRmlsdGVyIiwiaXNGaWx0ZXIiLCIkSW5jbHVkZWRCeVN0YXRlRmlsdGVyIiwiaW5jbHVkZXNGaWx0ZXIiLCIkVmlld0RpcmVjdGl2ZUZpbGwiLCJnZXRDb250cm9sbGVyQXMiLCJnZXRSZXNvbHZlQXMiLCIkY2ZnIiwicmVzb2x2ZUN0eCIsInJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcyIsImNtcF8xIiwidGFnUmVnZXhwXzEiLCJkZXJlZ2lzdGVyV2F0Y2hfMSIsImRpcmVjdGl2ZUVsIiwidGFnTmFtZSIsImN0cmxJbnN0YW5jZSIsInVpU3JlZkFjdGl2ZSIsInVubGlua0luZm9GbiIsInJhd0RlZiIsInVpU3JlZiIsIiQkYWRkU3RhdGVJbmZvIiwidWlTcmVmT3B0cyIsImlucHV0QXR0cnMiLCJ3YXRjaERlcmVnRm5zIiwiZmllbGQiLCJhY3RpdmVFcUNsYXNzIiwiZGVyZWdpc3RlclN0YXRlc0NoYW5nZWRMaXN0ZW5lciIsImRlcmVnaXN0ZXJPblN0YXJ0TGlzdGVuZXIiLCJkZXJlZ2lzdGVyU3RhdGVDaGFuZ2VTdWNjZXNzTGlzdGVuZXIiLCJ1aVNyZWZBY3RpdmVFcSIsInVwZGF0ZUFmdGVyVHJhbnNpdGlvbiIsImhhbmRsZVN0YXRlc0NoYW5nZWQiLCJzZXRTdGF0ZXNGcm9tRGVmaW5pdGlvbk9iamVjdCIsInN0YXRlc0RlZmluaXRpb24iLCJhY3RpdmVDbGFzcyIsImFkZFN0YXRlRm9yQ2xhc3MiLCJhZGRTdGF0ZSIsInN0YXRlUGFyYW1zIiwic3RhdGVJbmZvIiwiZ2V0Q2xhc3NlcyIsInN0YXRlTGlzdCIsImFsbENsYXNzZXMiLCJmdXp6eUNsYXNzZXMiLCJleGFjdENsYXNzZXMiLCJhZGRDbGFzc2VzIiwicmVtb3ZlQ2xhc3NlcyIsImNscyIsIiR1aVZpZXdTY3JvbGwiLCJyb290RGF0YSIsInByZXZpb3VzRWwiLCJjdXJyZW50RWwiLCJ1bnJlZ2lzdGVyIiwicmVuZGVyZXIiLCJhY3RpdmVVSVZpZXciLCJjb25maWcxIiwiY29uZmlnMiIsInVwZGF0ZVZpZXciLCJmcm9tUGFyZW50VGFnQ29uZmlnIiwiZnJvbVBhcmVudFRhZyIsImFuaW1FbnRlciIsImFuaW1MZWF2ZSIsIiR1aVZpZXdEYXRhIiwiJHVpVmlld0FuaW0iLCIkYW5pbUVudGVyIiwiJGFuaW1MZWF2ZSIsIiQkYW5pbUxlYXZlIiwiX3ZpZXdEYXRhXzEiLCJjbGVhbnVwTGFzdFZpZXciLCJoYXNDb21wb25lbnRJbXBsIiwiX3VpQ2FuRXhpdElkIiwidmlld1N0YXRlIiwiaG9va09wdGlvbnMiLCJ1aU9uUGFyYW1zQ2hhbmdlZCIsInZpZXdDcmVhdGlvblRyYW5zXzEiLCJmcm9tUGFyYW1zIiwidG9TY2hlbWEiLCJmcm9tU2NoZW1hIiwiY2hhbmdlZFRvUGFyYW1zIiwiY2hhbmdlZEtleXNfMSIsInVpQ2FuRXhpdCIsImlkXzEiLCJjYWNoZVByb3BfMSIsInByZXZUcnV0aHlBbnN3ZXJfMSIsImlkcyIsInVzZUFuY2hvclNjcm9sbCIsImRlZmF1bHQiLCJjb3JlIiwiX2FycmF5QnVmZmVyVG9CYXNlNjQiLCJiaW5hcnkiLCJieXRlcyIsImJ0b2EiLCJvbkFmdGVyVmFsaWRhdGUiLCJwYXJzZXIiLCJGSUxFX1JFQURFUl9FVkVOVFMiLCJyYXdGaWxlcyIsImZpbGVPYmplY3RzIiwiX3NldFZpZXdWYWx1ZSIsIm1heHNpemUiLCJmaWxlc2l6ZSIsIl9tYXhzaXplIiwibWluc2l6ZSIsIl9taW5zaXplIiwibWF4bnVtIiwiX21heG51bSIsIm1pbm51bSIsIl9taW5udW0iLCJyZWdFeHAiLCJmaWxlRXh0IiwiZmlsZW5hbWUiLCJmaWxldHlwZSIsIl9hY2NlcHQiLCJfYXR0YWNoSGFuZGxlckZvckV2ZW50IiwiZlJlYWRlciIsImZpbGVPYmplY3QiLCJfYXR0YWNoRXZlbnRIYW5kbGVycyIsImV4Y2VlZHNNYXhTaXplIiwiZG9Ob3RQYXJzZUlmT3ZlcnNpemUiLCJiYXNlNjQiLCJmaWxlT2JqIiwiZGVmZXJyZWRPYmoiLCJfY2xlYXJJbnB1dCIsImZpbGVzIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0FycmF5QnVmZmVyIiwiX3JlYWRGaWxlcyIsIl9vbkFmdGVyVmFsaWRhdGUiLCJhbGxvd1NhbWVGaWxlIiwicm91dGVyQ29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJhdXRoIiwic3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInNldEl0ZW0iLCJsb2dvdXQiLCJyZW1vdmVJdGVtIiwiaXNMb2dnZWRJbiIsImdldEl0ZW0iLCJiYXNlVXJsIiwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luIiwiZ2V0VG90YWxKb2JzIiwidG90YWxfam9icyIsInNlZWtlclNlcnZpY2UiLCJzZWVrZXIiLCJnZXRTZWVrZXJzUGVyUGFnZSIsInBhZ2UiLCJsaW1pdERhdGFQZXJQYWdlIiwiYWRkU2Vla2VyIiwicGF5bG9hZCIsInBob25lIiwiYWRkcmVzcyIsInBob3RvIiwiZGVsZXRlU2Vla2VyIiwiZ2V0U2Vla2VyQnlJZCIsImVkaXRTZWVrZXIiLCJ2bSIsImdldFRvdGFsU2Vla2VyIiwidG90YWxfZW1hayIsInN0YXR1c1N0ZXh0Iiwic3VwcGxpZXIiLCJnZXRTdXBwbGllclBlclBhZ2UiLCJkYXRhUGVyUGFnZSIsImdldFRvdGFsU3VwcGxpZXIiLCJ0b3RhbF9zdXBwbGllciIsImdldFN1cHBsaWVyQnlJZCIsImFkZFN1cHBsaWVyIiwiY29tcGFueV9hZGRyZXNzIiwiY29tcGFueV9wcm9maWxlIiwiZWRpdFN1cHBsaWVyIiwiZGVsZXRlU3VwcGxpZXIiLCJhdXRoU2VydmljZSIsIm9wZW5TaWRlQmFyIiwiY2xhc3NMaXN0IiwiYWxlcnQiLCJTaWRlTmF2Q29udHJvbGxlciIsInNpZGVCYXJXcmFwcGVyIiwiY2xvc2VTaWRlQmFyIiwiam9ic1NlcnZpY2UiLCJzdXBwbGllclNlcnZpY2UiLCJ0b3RhbEpvYnMiLCJ0b3RhbFNlZWtlciIsInRvdGFsU3VwcGxpZXIiLCJTZWVrZXJDb250cm9sbGVyIiwiZGF0YUZldGNoZWQiLCJ0b3RhbFBhZ2UiLCJjdXJyZW50UGFnZSIsImRhdGFTdGF0dXMiLCJ0b3RhbF9wYWdlIiwiU2Vla2VyQWRkQ29udHJvbGxlciIsIlNlZWtlckVkaXRDb250cm9sbGVyIiwiZGF0YVNlZWtlciIsImN1cnJlbnRTdXBwbGllciJdLCJtYXBwaW5ncyI6IkNBS0EsU0FBQUEsR0FBQSxhQVFBLElBQUFDLEdBQ0FDLGVBQUEsR0F3QkEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBRCxHQUtBLE9BQUFILEVBSkFLLEVBQUFGLEVBQUFGLGtCQUNBRCxFQUFBQyxlQUFBSyxFQUFBSCxFQUFBRixnQkFBQUUsRUFBQUYsZUFBQU0sS0FZQSxTQUFBRCxFQUFBRSxHQUNBLE9BQUFDLEVBQUFELElBQUFBLEVBQUEsRUFpQ0EsU0FBQUUsRUFBQUMsRUFBQUMsR0FFQSxPQURBQSxFQUFBQSxHQUFBQyxNQUNBLFdBQ0EsSUFNQUMsRUFBQUMsRUFOQUMsRUFBQUMsVUFBQSxHQUNBQyxFQUFBRCxVQUFBLEdBQ0FFLEVBQUEsS0FBQVIsRUFBQUEsRUFBQSxJQUFBLElBQUFLLEVBQUEsS0FDQUksRUFBQUMsR0FBQUosVUFBQSxHQUFBSyxJQUFBLFNBQUFDLEdBQ0EsT0FBQUMsR0FBQUQsRUFBQXZCLEVBQUFDLGtCQWlCQSxJQWJBa0IsR0FBQUQsRUFBQU8sUUFBQSxXQUFBLFNBQUFDLEdBQ0EsSUFBQUMsR0FBQUQsRUFBQUUsTUFBQSxHQUFBLEdBRUEsT0FB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QUNBcFksV0FBQSxtQkFDQXNZLGFBQUEsYUNKQTl4QixRQUFBN0MsT0FBQSxPQUNBazBCLFVBQUEsUUFDQU8sWUFBQSxzQ0FDQXBZLFdBQUEsaUJBQ0FzWSxhQUFBLFFDTEEsV0FDQTl4QixRQUNBN0MsT0FBQSxPQUNBazBCLFVBQUEsU0FDQU8sWUFBQSx3Q0FDQXBZLFdBQUEsa0JBQ0FzWSxhQUFBLFFETkEsR0VDQTl4QixRQUFBN0MsT0FBQSxPQUNBazBCLFVBQUEsYUFDQU8sWUFBQSxnREFDQXBZLFdBQUEsc0JBQ0FzWSxhQUFBLGFDSkE5eEIsUUFBQTdDLE9BQUEsT0FDQWswQixVQUFBLFlBQ0FPLFlBQUEsOENBQ0FwWSxXQUFBLHFCQUNBc1ksYUFBQSxRQ0xBLFdBQ0E5eEIsUUFBQTdDLE9BQUEsT0FDQWswQixVQUFBLGNBQ0FPLFlBQUEsa0RBQ0FwWSxXQUFBLHVCQUNBc1ksYUFBQSxRRExBLEdFQ0E5eEIsUUFDQTdDLE9BQUEsT0FDQWswQixVQUFBLGVBQ0FPLFlBQUEsa0RBQ0FwWSxXQUFBLHdCQUNBc1ksYUFBQSxPQ0xBOXhCLFFBQ0E3QyxPQUFBLE9BQ0FrMEIsVUFBQSxnQkFDQU8sWUFBQSxvREFDQXBZLFdBQUEsbUJBQ0FzWSxhQUFBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuNi44XG4gKiAoYykgMjAxMC0yMDE3IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbih3aW5kb3cpIHsndXNlIHN0cmljdCc7XG5cbi8qIGV4cG9ydGVkXG4gIG1pbkVyckNvbmZpZyxcbiAgZXJyb3JIYW5kbGluZ0NvbmZpZyxcbiAgaXNWYWxpZE9iamVjdE1heERlcHRoXG4qL1xuXG52YXIgbWluRXJyQ29uZmlnID0ge1xuICBvYmplY3RNYXhEZXB0aDogNVxufTtcblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZXJyb3JIYW5kbGluZ0NvbmZpZ1xuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbmZpZ3VyZSBzZXZlcmFsIGFzcGVjdHMgb2YgZXJyb3IgaGFuZGxpbmcgaW4gQW5ndWxhckpTIGlmIHVzZWQgYXMgYSBzZXR0ZXIgb3IgcmV0dXJuIHRoZVxuICogY3VycmVudCBjb25maWd1cmF0aW9uIGlmIHVzZWQgYXMgYSBnZXR0ZXIuIFRoZSBmb2xsb3dpbmcgb3B0aW9ucyBhcmUgc3VwcG9ydGVkOlxuICpcbiAqIC0gKipvYmplY3RNYXhEZXB0aCoqOiBUaGUgbWF4aW11bSBkZXB0aCB0byB3aGljaCBvYmplY3RzIGFyZSB0cmF2ZXJzZWQgd2hlbiBzdHJpbmdpZmllZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKlxuICogT21pdHRlZCBvciB1bmRlZmluZWQgb3B0aW9ucyB3aWxsIGxlYXZlIHRoZSBjb3JyZXNwb25kaW5nIGNvbmZpZ3VyYXRpb24gdmFsdWVzIHVuY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdC4gTWF5IG9ubHkgY29udGFpbiB0aGUgb3B0aW9ucyB0aGF0IG5lZWQgdG8gYmVcbiAqICAgICB1cGRhdGVkLiBTdXBwb3J0ZWQga2V5czpcbiAqXG4gKiAqIGBvYmplY3RNYXhEZXB0aGAgICoqe051bWJlcn0qKiAtIFRoZSBtYXggZGVwdGggZm9yIHN0cmluZ2lmeWluZyBvYmplY3RzLiBTZXR0aW5nIHRvIGFcbiAqICAgbm9uLXBvc2l0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCByZW1vdmVzIHRoZSBtYXggZGVwdGggbGltaXQuXG4gKiAgIERlZmF1bHQ6IDVcbiAqL1xuZnVuY3Rpb24gZXJyb3JIYW5kbGluZ0NvbmZpZyhjb25maWcpIHtcbiAgaWYgKGlzT2JqZWN0KGNvbmZpZykpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGNvbmZpZy5vYmplY3RNYXhEZXB0aCkpIHtcbiAgICAgIG1pbkVyckNvbmZpZy5vYmplY3RNYXhEZXB0aCA9IGlzVmFsaWRPYmplY3RNYXhEZXB0aChjb25maWcub2JqZWN0TWF4RGVwdGgpID8gY29uZmlnLm9iamVjdE1heERlcHRoIDogTmFOO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbWluRXJyQ29uZmlnO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBtYXhEZXB0aFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZE9iamVjdE1heERlcHRoKG1heERlcHRoKSB7XG4gIHJldHVybiBpc051bWJlcihtYXhEZXB0aCkgJiYgbWF4RGVwdGggPiAwO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoaXMgb2JqZWN0IHByb3ZpZGVzIGEgdXRpbGl0eSBmb3IgcHJvZHVjaW5nIHJpY2ggRXJyb3IgbWVzc2FnZXMgd2l0aGluXG4gKiBBbmd1bGFyLiBJdCBjYW4gYmUgY2FsbGVkIGFzIGZvbGxvd3M6XG4gKlxuICogdmFyIGV4YW1wbGVNaW5FcnIgPSBtaW5FcnIoJ2V4YW1wbGUnKTtcbiAqIHRocm93IGV4YW1wbGVNaW5FcnIoJ29uZScsICdUaGlzIHswfSBpcyB7MX0nLCBmb28sIGJhcik7XG4gKlxuICogVGhlIGFib3ZlIGNyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgbWluRXJyIGluIHRoZSBleGFtcGxlIG5hbWVzcGFjZS4gVGhlXG4gKiByZXN1bHRpbmcgZXJyb3Igd2lsbCBoYXZlIGEgbmFtZXNwYWNlZCBlcnJvciBjb2RlIG9mIGV4YW1wbGUub25lLiAgVGhlXG4gKiByZXN1bHRpbmcgZXJyb3Igd2lsbCByZXBsYWNlIHswfSB3aXRoIHRoZSB2YWx1ZSBvZiBmb28sIGFuZCB7MX0gd2l0aCB0aGVcbiAqIHZhbHVlIG9mIGJhci4gVGhlIG9iamVjdCBpcyBub3QgcmVzdHJpY3RlZCBpbiB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBpdCBjYW5cbiAqIHRha2UuXG4gKlxuICogSWYgZmV3ZXIgYXJndW1lbnRzIGFyZSBzcGVjaWZpZWQgdGhhbiBuZWNlc3NhcnkgZm9yIGludGVycG9sYXRpb24sIHRoZSBleHRyYVxuICogaW50ZXJwb2xhdGlvbiBtYXJrZXJzIHdpbGwgYmUgcHJlc2VydmVkIGluIHRoZSBmaW5hbCBzdHJpbmcuXG4gKlxuICogU2luY2UgZGF0YSB3aWxsIGJlIHBhcnNlZCBzdGF0aWNhbGx5IGR1cmluZyBhIGJ1aWxkIHN0ZXAsIHNvbWUgcmVzdHJpY3Rpb25zXG4gKiBhcmUgYXBwbGllZCB3aXRoIHJlc3BlY3QgdG8gaG93IG1pbkVyciBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYW5kIGNhbGxlZC5cbiAqIEluc3RhbmNlcyBzaG91bGQgaGF2ZSBuYW1lcyBvZiB0aGUgZm9ybSBuYW1lc3BhY2VNaW5FcnIgZm9yIGEgbWluRXJyIGNyZWF0ZWRcbiAqIHVzaW5nIG1pbkVycignbmFtZXNwYWNlJykgLiBFcnJvciBjb2RlcywgbmFtZXNwYWNlcyBhbmQgdGVtcGxhdGUgc3RyaW5nc1xuICogc2hvdWxkIGFsbCBiZSBzdGF0aWMgc3RyaW5ncywgbm90IHZhcmlhYmxlcyBvciBnZW5lcmFsIGV4cHJlc3Npb25zLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGUgVGhlIG5hbWVzcGFjZSB0byB1c2UgZm9yIHRoZSBuZXcgbWluRXJyIGluc3RhbmNlLlxuICogQHBhcmFtIHtmdW5jdGlvbn0gRXJyb3JDb25zdHJ1Y3RvciBDdXN0b20gZXJyb3IgY29uc3RydWN0b3IgdG8gYmUgaW5zdGFudGlhdGVkIHdoZW4gcmV0dXJuaW5nXG4gKiAgIGVycm9yIGZyb20gcmV0dXJuZWQgZnVuY3Rpb24sIGZvciBjYXNlcyB3aGVuIGEgcGFydGljdWxhciB0eXBlIG9mIGVycm9yIGlzIHVzZWZ1bC5cbiAqIEByZXR1cm5zIHtmdW5jdGlvbihjb2RlOnN0cmluZywgdGVtcGxhdGU6c3RyaW5nLCAuLi50ZW1wbGF0ZUFyZ3MpOiBFcnJvcn0gbWluRXJyIGluc3RhbmNlXG4gKi9cblxuZnVuY3Rpb24gbWluRXJyKG1vZHVsZSwgRXJyb3JDb25zdHJ1Y3Rvcikge1xuICBFcnJvckNvbnN0cnVjdG9yID0gRXJyb3JDb25zdHJ1Y3RvciB8fCBFcnJvcjtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb2RlID0gYXJndW1lbnRzWzBdLFxuICAgICAgdGVtcGxhdGUgPSBhcmd1bWVudHNbMV0sXG4gICAgICBtZXNzYWdlID0gJ1snICsgKG1vZHVsZSA/IG1vZHVsZSArICc6JyA6ICcnKSArIGNvZGUgKyAnXSAnLFxuICAgICAgdGVtcGxhdGVBcmdzID0gc2xpY2VBcmdzKGFyZ3VtZW50cywgMikubWFwKGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdG9EZWJ1Z1N0cmluZyhhcmcsIG1pbkVyckNvbmZpZy5vYmplY3RNYXhEZXB0aCk7XG4gICAgICB9KSxcbiAgICAgIHBhcmFtUHJlZml4LCBpO1xuXG4gICAgbWVzc2FnZSArPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXGQrXFx9L2csIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICB2YXIgaW5kZXggPSArbWF0Y2guc2xpY2UoMSwgLTEpO1xuXG4gICAgICBpZiAoaW5kZXggPCB0ZW1wbGF0ZUFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZUFyZ3NbaW5kZXhdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG5cbiAgICBtZXNzYWdlICs9ICdcXG5odHRwOi8vZXJyb3JzLmFuZ3VsYXJqcy5vcmcvMS42LjgvJyArXG4gICAgICAobW9kdWxlID8gbW9kdWxlICsgJy8nIDogJycpICsgY29kZTtcblxuICAgIGZvciAoaSA9IDAsIHBhcmFtUHJlZml4ID0gJz8nOyBpIDwgdGVtcGxhdGVBcmdzLmxlbmd0aDsgaSsrLCBwYXJhbVByZWZpeCA9ICcmJykge1xuICAgICAgbWVzc2FnZSArPSBwYXJhbVByZWZpeCArICdwJyArIGkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodGVtcGxhdGVBcmdzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEVycm9yQ29uc3RydWN0b3IobWVzc2FnZSk7XG4gIH07XG59XG5cbi8qIFdlIG5lZWQgdG8gdGVsbCBFU0xpbnQgd2hhdCB2YXJpYWJsZXMgYXJlIGJlaW5nIGV4cG9ydGVkICovXG4vKiBleHBvcnRlZFxuICBhbmd1bGFyLFxuICBtc2llLFxuICBqcUxpdGUsXG4gIGpRdWVyeSxcbiAgc2xpY2UsXG4gIHNwbGljZSxcbiAgcHVzaCxcbiAgdG9TdHJpbmcsXG4gIG1pbkVyckNvbmZpZyxcbiAgZXJyb3JIYW5kbGluZ0NvbmZpZyxcbiAgaXNWYWxpZE9iamVjdE1heERlcHRoLFxuICBuZ01pbkVycixcbiAgYW5ndWxhck1vZHVsZSxcbiAgdWlkLFxuICBSRUdFWF9TVFJJTkdfUkVHRVhQLFxuICBWQUxJRElUWV9TVEFURV9QUk9QRVJUWSxcblxuICBsb3dlcmNhc2UsXG4gIHVwcGVyY2FzZSxcbiAgbWFudWFsTG93ZXJjYXNlLFxuICBtYW51YWxVcHBlcmNhc2UsXG4gIG5vZGVOYW1lXyxcbiAgaXNBcnJheUxpa2UsXG4gIGZvckVhY2gsXG4gIGZvckVhY2hTb3J0ZWQsXG4gIHJldmVyc2VQYXJhbXMsXG4gIG5leHRVaWQsXG4gIHNldEhhc2hLZXksXG4gIGV4dGVuZCxcbiAgdG9JbnQsXG4gIGluaGVyaXQsXG4gIG1lcmdlLFxuICBub29wLFxuICBpZGVudGl0eSxcbiAgdmFsdWVGbixcbiAgaXNVbmRlZmluZWQsXG4gIGlzRGVmaW5lZCxcbiAgaXNPYmplY3QsXG4gIGlzQmxhbmtPYmplY3QsXG4gIGlzU3RyaW5nLFxuICBpc051bWJlcixcbiAgaXNOdW1iZXJOYU4sXG4gIGlzRGF0ZSxcbiAgaXNFcnJvcixcbiAgaXNBcnJheSxcbiAgaXNGdW5jdGlvbixcbiAgaXNSZWdFeHAsXG4gIGlzV2luZG93LFxuICBpc1Njb3BlLFxuICBpc0ZpbGUsXG4gIGlzRm9ybURhdGEsXG4gIGlzQmxvYixcbiAgaXNCb29sZWFuLFxuICBpc1Byb21pc2VMaWtlLFxuICB0cmltLFxuICBlc2NhcGVGb3JSZWdleHAsXG4gIGlzRWxlbWVudCxcbiAgbWFrZU1hcCxcbiAgaW5jbHVkZXMsXG4gIGFycmF5UmVtb3ZlLFxuICBjb3B5LFxuICBzaW1wbGVDb21wYXJlLFxuICBlcXVhbHMsXG4gIGNzcCxcbiAganEsXG4gIGNvbmNhdCxcbiAgc2xpY2VBcmdzLFxuICBiaW5kLFxuICB0b0pzb25SZXBsYWNlcixcbiAgdG9Kc29uLFxuICBmcm9tSnNvbixcbiAgY29udmVydFRpbWV6b25lVG9Mb2NhbCxcbiAgdGltZXpvbmVUb09mZnNldCxcbiAgc3RhcnRpbmdUYWcsXG4gIHRyeURlY29kZVVSSUNvbXBvbmVudCxcbiAgcGFyc2VLZXlWYWx1ZSxcbiAgdG9LZXlWYWx1ZSxcbiAgZW5jb2RlVXJpU2VnbWVudCxcbiAgZW5jb2RlVXJpUXVlcnksXG4gIGFuZ3VsYXJJbml0LFxuICBib290c3RyYXAsXG4gIGdldFRlc3RhYmlsaXR5LFxuICBzbmFrZV9jYXNlLFxuICBiaW5kSlF1ZXJ5LFxuICBhc3NlcnRBcmcsXG4gIGFzc2VydEFyZ0ZuLFxuICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSxcbiAgZ2V0dGVyLFxuICBnZXRCbG9ja05vZGVzLFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgY3JlYXRlTWFwLFxuICBzdHJpbmdpZnksXG5cbiAgTk9ERV9UWVBFX0VMRU1FTlQsXG4gIE5PREVfVFlQRV9BVFRSSUJVVEUsXG4gIE5PREVfVFlQRV9URVhULFxuICBOT0RFX1RZUEVfQ09NTUVOVCxcbiAgTk9ERV9UWVBFX0RPQ1VNRU5ULFxuICBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlRcbiovXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG5nXG4gKiBAbW9kdWxlIG5nXG4gKiBAaW5zdGFsbGF0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgbmcgbW9kdWxlIGlzIGxvYWRlZCBieSBkZWZhdWx0IHdoZW4gYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uIGlzIHN0YXJ0ZWQuIFRoZSBtb2R1bGUgaXRzZWxmXG4gKiBjb250YWlucyB0aGUgZXNzZW50aWFsIGNvbXBvbmVudHMgZm9yIGFuIEFuZ3VsYXJKUyBhcHBsaWNhdGlvbiB0byBmdW5jdGlvbi4gVGhlIHRhYmxlIGJlbG93XG4gKiBsaXN0cyBhIGhpZ2ggbGV2ZWwgYnJlYWtkb3duIG9mIGVhY2ggb2YgdGhlIHNlcnZpY2VzL2ZhY3RvcmllcywgZmlsdGVycywgZGlyZWN0aXZlcyBhbmQgdGVzdGluZ1xuICogY29tcG9uZW50cyBhdmFpbGFibGUgd2l0aGluIHRoaXMgY29yZSBtb2R1bGUuXG4gKlxuICovXG5cbnZhciBSRUdFWF9TVFJJTkdfUkVHRVhQID0gL15cXC8oLispXFwvKFthLXpdKikkLztcblxuLy8gVGhlIG5hbWUgb2YgYSBmb3JtIGNvbnRyb2wncyBWYWxpZGl0eVN0YXRlIHByb3BlcnR5LlxuLy8gVGhpcyBpcyB1c2VkIHNvIHRoYXQgaXQncyBwb3NzaWJsZSBmb3IgaW50ZXJuYWwgdGVzdHMgdG8gY3JlYXRlIG1vY2sgVmFsaWRpdHlTdGF0ZXMuXG52YXIgVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkgPSAndmFsaWRpdHknO1xuXG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmxvd2VyY2FzZVxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVwcmVjYXRlZFxuICogc2luY2VWZXJzaW9uPVwiMS41LjBcIlxuICogcmVtb3ZlVmVyc2lvbj1cIjEuNy4wXCJcbiAqIFVzZSBbU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3RvTG93ZXJDYXNlKSBpbnN0ZWFkLlxuICpcbiAqIEBkZXNjcmlwdGlvbiBDb252ZXJ0cyB0aGUgc3BlY2lmaWVkIHN0cmluZyB0byBsb3dlcmNhc2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZyB0byBiZSBjb252ZXJ0ZWQgdG8gbG93ZXJjYXNlLlxuICogQHJldHVybnMge3N0cmluZ30gTG93ZXJjYXNlZCBzdHJpbmcuXG4gKi9cbnZhciBsb3dlcmNhc2UgPSBmdW5jdGlvbihzdHJpbmcpIHtyZXR1cm4gaXNTdHJpbmcoc3RyaW5nKSA/IHN0cmluZy50b0xvd2VyQ2FzZSgpIDogc3RyaW5nO307XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLnVwcGVyY2FzZVxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVwcmVjYXRlZFxuICogc2luY2VWZXJzaW9uPVwiMS41LjBcIlxuICogcmVtb3ZlVmVyc2lvbj1cIjEuNy4wXCJcbiAqIFVzZSBbU3RyaW5nLnByb3RvdHlwZS50b1VwcGVyQ2FzZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3RvVXBwZXJDYXNlKSBpbnN0ZWFkLlxuICpcbiAqIEBkZXNjcmlwdGlvbiBDb252ZXJ0cyB0aGUgc3BlY2lmaWVkIHN0cmluZyB0byB1cHBlcmNhc2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFN0cmluZyB0byBiZSBjb252ZXJ0ZWQgdG8gdXBwZXJjYXNlLlxuICogQHJldHVybnMge3N0cmluZ30gVXBwZXJjYXNlZCBzdHJpbmcuXG4gKi9cbnZhciB1cHBlcmNhc2UgPSBmdW5jdGlvbihzdHJpbmcpIHtyZXR1cm4gaXNTdHJpbmcoc3RyaW5nKSA/IHN0cmluZy50b1VwcGVyQ2FzZSgpIDogc3RyaW5nO307XG5cblxudmFyIG1hbnVhbExvd2VyY2FzZSA9IGZ1bmN0aW9uKHMpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSAqL1xuICByZXR1cm4gaXNTdHJpbmcocylcbiAgICAgID8gcy5yZXBsYWNlKC9bQS1aXS9nLCBmdW5jdGlvbihjaCkge3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoLmNoYXJDb2RlQXQoMCkgfCAzMik7fSlcbiAgICAgIDogcztcbiAgLyogZXNsaW50LWVuYWJsZSAqL1xufTtcbnZhciBtYW51YWxVcHBlcmNhc2UgPSBmdW5jdGlvbihzKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWJpdHdpc2UgKi9cbiAgcmV0dXJuIGlzU3RyaW5nKHMpXG4gICAgICA/IHMucmVwbGFjZSgvW2Etel0vZywgZnVuY3Rpb24oY2gpIHtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaC5jaGFyQ29kZUF0KDApICYgfjMyKTt9KVxuICAgICAgOiBzO1xuICAvKiBlc2xpbnQtZW5hYmxlICovXG59O1xuXG5cbi8vIFN0cmluZyN0b0xvd2VyQ2FzZSBhbmQgU3RyaW5nI3RvVXBwZXJDYXNlIGRvbid0IHByb2R1Y2UgY29ycmVjdCByZXN1bHRzIGluIGJyb3dzZXJzIHdpdGggVHVya2lzaFxuLy8gbG9jYWxlLCBmb3IgdGhpcyByZWFzb24gd2UgbmVlZCB0byBkZXRlY3QgdGhpcyBjYXNlIGFuZCByZWRlZmluZSBsb3dlcmNhc2UvdXBwZXJjYXNlIG1ldGhvZHNcbi8vIHdpdGggY29ycmVjdCBidXQgc2xvd2VyIGFsdGVybmF0aXZlcy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzExMzg3XG5pZiAoJ2knICE9PSAnSScudG9Mb3dlckNhc2UoKSkge1xuICBsb3dlcmNhc2UgPSBtYW51YWxMb3dlcmNhc2U7XG4gIHVwcGVyY2FzZSA9IG1hbnVhbFVwcGVyY2FzZTtcbn1cblxuXG52YXJcbiAgICBtc2llLCAgICAgICAgICAgICAvLyBob2xkcyBtYWpvciB2ZXJzaW9uIG51bWJlciBmb3IgSUUsIG9yIE5hTiBpZiBVQSBpcyBub3QgSUUuXG4gICAganFMaXRlLCAgICAgICAgICAgLy8gZGVsYXkgYmluZGluZyBzaW5jZSBqUXVlcnkgY291bGQgYmUgbG9hZGVkIGFmdGVyIHVzLlxuICAgIGpRdWVyeSwgICAgICAgICAgIC8vIGRlbGF5IGJpbmRpbmdcbiAgICBzbGljZSAgICAgICAgICAgICA9IFtdLnNsaWNlLFxuICAgIHNwbGljZSAgICAgICAgICAgID0gW10uc3BsaWNlLFxuICAgIHB1c2ggICAgICAgICAgICAgID0gW10ucHVzaCxcbiAgICB0b1N0cmluZyAgICAgICAgICA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsXG4gICAgZ2V0UHJvdG90eXBlT2YgICAgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgbmdNaW5FcnIgICAgICAgICAgPSBtaW5FcnIoJ25nJyksXG5cbiAgICAvKiogQG5hbWUgYW5ndWxhciAqL1xuICAgIGFuZ3VsYXIgICAgICAgICAgID0gd2luZG93LmFuZ3VsYXIgfHwgKHdpbmRvdy5hbmd1bGFyID0ge30pLFxuICAgIGFuZ3VsYXJNb2R1bGUsXG4gICAgdWlkICAgICAgICAgICAgICAgPSAwO1xuXG4vLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbi8qKlxuICogZG9jdW1lbnRNb2RlIGlzIGFuIElFLW9ubHkgcHJvcGVydHlcbiAqIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9jYzE5Njk4OCh2PXZzLjg1KS5hc3B4XG4gKi9cbm1zaWUgPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xuXG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgYG9iamAgaXMgYW4gYXJyYXkgb3IgYXJyYXktbGlrZSBvYmplY3QgKE5vZGVMaXN0LCBBcmd1bWVudHMsXG4gKiAgICAgICAgICAgICAgICAgICBTdHJpbmcgLi4uKVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZShvYmopIHtcblxuICAvLyBgbnVsbGAsIGB1bmRlZmluZWRgIGFuZCBgd2luZG93YCBhcmUgbm90IGFycmF5LWxpa2VcbiAgaWYgKG9iaiA9PSBudWxsIHx8IGlzV2luZG93KG9iaikpIHJldHVybiBmYWxzZTtcblxuICAvLyBhcnJheXMsIHN0cmluZ3MgYW5kIGpRdWVyeS9qcUxpdGUgb2JqZWN0cyBhcmUgYXJyYXkgbGlrZVxuICAvLyAqIGpxTGl0ZSBpcyBlaXRoZXIgdGhlIGpRdWVyeSBvciBqcUxpdGUgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgLy8gKiB3ZSBoYXZlIHRvIGNoZWNrIHRoZSBleGlzdGVuY2Ugb2YganFMaXRlIGZpcnN0IGFzIHRoaXMgbWV0aG9kIGlzIGNhbGxlZFxuICAvLyAgIHZpYSB0aGUgZm9yRWFjaCBtZXRob2Qgd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIGpxTGl0ZSBvYmplY3QgaW4gdGhlIGZpcnN0IHBsYWNlXG4gIGlmIChpc0FycmF5KG9iaikgfHwgaXNTdHJpbmcob2JqKSB8fCAoanFMaXRlICYmIG9iaiBpbnN0YW5jZW9mIGpxTGl0ZSkpIHJldHVybiB0cnVlO1xuXG4gIC8vIFN1cHBvcnQ6IGlPUyA4LjIgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKVxuICAvLyBcImxlbmd0aFwiIGluIG9iaiB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0xMTUwOClcbiAgdmFyIGxlbmd0aCA9ICdsZW5ndGgnIGluIE9iamVjdChvYmopICYmIG9iai5sZW5ndGg7XG5cbiAgLy8gTm9kZUxpc3Qgb2JqZWN0cyAod2l0aCBgaXRlbWAgbWV0aG9kKSBhbmRcbiAgLy8gb3RoZXIgb2JqZWN0cyB3aXRoIHN1aXRhYmxlIGxlbmd0aCBjaGFyYWN0ZXJpc3RpY3MgYXJlIGFycmF5LWxpa2VcbiAgcmV0dXJuIGlzTnVtYmVyKGxlbmd0aCkgJiZcbiAgICAobGVuZ3RoID49IDAgJiYgKChsZW5ndGggLSAxKSBpbiBvYmogfHwgb2JqIGluc3RhbmNlb2YgQXJyYXkpIHx8IHR5cGVvZiBvYmouaXRlbSA9PT0gJ2Z1bmN0aW9uJyk7XG5cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZm9yRWFjaFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEludm9rZXMgdGhlIGBpdGVyYXRvcmAgZnVuY3Rpb24gb25jZSBmb3IgZWFjaCBpdGVtIGluIGBvYmpgIGNvbGxlY3Rpb24sIHdoaWNoIGNhbiBiZSBlaXRoZXIgYW5cbiAqIG9iamVjdCBvciBhbiBhcnJheS4gVGhlIGBpdGVyYXRvcmAgZnVuY3Rpb24gaXMgaW52b2tlZCB3aXRoIGBpdGVyYXRvcih2YWx1ZSwga2V5LCBvYmopYCwgd2hlcmUgYHZhbHVlYFxuICogaXMgdGhlIHZhbHVlIG9mIGFuIG9iamVjdCBwcm9wZXJ0eSBvciBhbiBhcnJheSBlbGVtZW50LCBga2V5YCBpcyB0aGUgb2JqZWN0IHByb3BlcnR5IGtleSBvclxuICogYXJyYXkgZWxlbWVudCBpbmRleCBhbmQgb2JqIGlzIHRoZSBgb2JqYCBpdHNlbGYuIFNwZWNpZnlpbmcgYSBgY29udGV4dGAgZm9yIHRoZSBmdW5jdGlvbiBpcyBvcHRpb25hbC5cbiAqXG4gKiBJdCBpcyB3b3J0aCBub3RpbmcgdGhhdCBgLmZvckVhY2hgIGRvZXMgbm90IGl0ZXJhdGUgb3ZlciBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWNhdXNlIGl0IGZpbHRlcnNcbiAqIHVzaW5nIHRoZSBgaGFzT3duUHJvcGVydHlgIG1ldGhvZC5cbiAqXG4gKiBVbmxpa2UgRVMyNjInc1xuICogW0FycmF5LnByb3RvdHlwZS5mb3JFYWNoXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuNC40LjE4KSxcbiAqIHByb3ZpZGluZyAndW5kZWZpbmVkJyBvciAnbnVsbCcgdmFsdWVzIGZvciBgb2JqYCB3aWxsIG5vdCB0aHJvdyBhIFR5cGVFcnJvciwgYnV0IHJhdGhlciBqdXN0XG4gKiByZXR1cm4gdGhlIHZhbHVlIHByb3ZpZGVkLlxuICpcbiAgIGBgYGpzXG4gICAgIHZhciB2YWx1ZXMgPSB7bmFtZTogJ21pc2tvJywgZ2VuZGVyOiAnbWFsZSd9O1xuICAgICB2YXIgbG9nID0gW107XG4gICAgIGFuZ3VsYXIuZm9yRWFjaCh2YWx1ZXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICB0aGlzLnB1c2goa2V5ICsgJzogJyArIHZhbHVlKTtcbiAgICAgfSwgbG9nKTtcbiAgICAgZXhwZWN0KGxvZykudG9FcXVhbChbJ25hbWU6IG1pc2tvJywgJ2dlbmRlcjogbWFsZSddKTtcbiAgIGBgYFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogT2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdG9yIEl0ZXJhdG9yIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtPYmplY3Q9fSBjb250ZXh0IE9iamVjdCB0byBiZWNvbWUgY29udGV4dCAoYHRoaXNgKSBmb3IgdGhlIGl0ZXJhdG9yIGZ1bmN0aW9uLlxuICogQHJldHVybnMge09iamVjdHxBcnJheX0gUmVmZXJlbmNlIHRvIGBvYmpgLlxuICovXG5cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICB2YXIga2V5LCBsZW5ndGg7XG4gIGlmIChvYmopIHtcbiAgICBpZiAoaXNGdW5jdGlvbihvYmopKSB7XG4gICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJ3Byb3RvdHlwZScgJiYga2V5ICE9PSAnbGVuZ3RoJyAmJiBrZXkgIT09ICduYW1lJyAmJiBvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmopIHx8IGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIHZhciBpc1ByaW1pdGl2ZSA9IHR5cGVvZiBvYmogIT09ICdvYmplY3QnO1xuICAgICAgZm9yIChrZXkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBrZXkgPCBsZW5ndGg7IGtleSsrKSB7XG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSB8fCBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvYmouZm9yRWFjaCAmJiBvYmouZm9yRWFjaCAhPT0gZm9yRWFjaCkge1xuICAgICAgICBvYmouZm9yRWFjaChpdGVyYXRvciwgY29udGV4dCwgb2JqKTtcbiAgICB9IGVsc2UgaWYgKGlzQmxhbmtPYmplY3Qob2JqKSkge1xuICAgICAgLy8gY3JlYXRlTWFwKCkgZmFzdCBwYXRoIC0tLSBTYWZlIHRvIGF2b2lkIGhhc093blByb3BlcnR5IGNoZWNrIGJlY2F1c2UgcHJvdG90eXBlIGNoYWluIGlzIGVtcHR5XG4gICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iai5oYXNPd25Qcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gU2xvdyBwYXRoIGZvciBvYmplY3RzIGluaGVyaXRpbmcgT2JqZWN0LnByb3RvdHlwZSwgaGFzT3duUHJvcGVydHkgY2hlY2sgbmVlZGVkXG4gICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNsb3cgcGF0aCBmb3Igb2JqZWN0cyB3aGljaCBkbyBub3QgaGF2ZSBhIG1ldGhvZCBgaGFzT3duUHJvcGVydHlgXG4gICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIGZvckVhY2hTb3J0ZWQob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaikuc29ydCgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXlzW2ldXSwga2V5c1tpXSk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59XG5cblxuLyoqXG4gKiB3aGVuIHVzaW5nIGZvckVhY2ggdGhlIHBhcmFtcyBhcmUgdmFsdWUsIGtleSwgYnV0IGl0IGlzIG9mdGVuIHVzZWZ1bCB0byBoYXZlIGtleSwgdmFsdWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgKil9IGl0ZXJhdG9yRm5cbiAqIEByZXR1cm5zIHtmdW5jdGlvbigqLCBzdHJpbmcpfVxuICovXG5mdW5jdGlvbiByZXZlcnNlUGFyYW1zKGl0ZXJhdG9yRm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtpdGVyYXRvckZuKGtleSwgdmFsdWUpO307XG59XG5cbi8qKlxuICogQSBjb25zaXN0ZW50IHdheSBvZiBjcmVhdGluZyB1bmlxdWUgSURzIGluIGFuZ3VsYXIuXG4gKlxuICogVXNpbmcgc2ltcGxlIG51bWJlcnMgYWxsb3dzIHVzIHRvIGdlbmVyYXRlIDI4LjYgbWlsbGlvbiB1bmlxdWUgaWRzIHBlciBzZWNvbmQgZm9yIDEwIHllYXJzIGJlZm9yZVxuICogd2UgaGl0IG51bWJlciBwcmVjaXNpb24gaXNzdWVzIGluIEphdmFTY3JpcHQuXG4gKlxuICogTWF0aC5wb3coMiw1MykgLyA2MCAvIDYwIC8gMjQgLyAzNjUgLyAxMCA9IDI4LjZNXG4gKlxuICogQHJldHVybnMge251bWJlcn0gYW4gdW5pcXVlIGFscGhhLW51bWVyaWMgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIG5leHRVaWQoKSB7XG4gIHJldHVybiArK3VpZDtcbn1cblxuXG4vKipcbiAqIFNldCBvciBjbGVhciB0aGUgaGFzaGtleSBmb3IgYW4gb2JqZWN0LlxuICogQHBhcmFtIG9iaiBvYmplY3RcbiAqIEBwYXJhbSBoIHRoZSBoYXNoa2V5ICghdHJ1dGh5IHRvIGRlbGV0ZSB0aGUgaGFzaGtleSlcbiAqL1xuZnVuY3Rpb24gc2V0SGFzaEtleShvYmosIGgpIHtcbiAgaWYgKGgpIHtcbiAgICBvYmouJCRoYXNoS2V5ID0gaDtcbiAgfSBlbHNlIHtcbiAgICBkZWxldGUgb2JqLiQkaGFzaEtleTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGJhc2VFeHRlbmQoZHN0LCBvYmpzLCBkZWVwKSB7XG4gIHZhciBoID0gZHN0LiQkaGFzaEtleTtcblxuICBmb3IgKHZhciBpID0gMCwgaWkgPSBvYmpzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB2YXIgb2JqID0gb2Jqc1tpXTtcbiAgICBpZiAoIWlzT2JqZWN0KG9iaikgJiYgIWlzRnVuY3Rpb24ob2JqKSkgY29udGludWU7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGtleXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbal07XG4gICAgICB2YXIgc3JjID0gb2JqW2tleV07XG5cbiAgICAgIGlmIChkZWVwICYmIGlzT2JqZWN0KHNyYykpIHtcbiAgICAgICAgaWYgKGlzRGF0ZShzcmMpKSB7XG4gICAgICAgICAgZHN0W2tleV0gPSBuZXcgRGF0ZShzcmMudmFsdWVPZigpKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1JlZ0V4cChzcmMpKSB7XG4gICAgICAgICAgZHN0W2tleV0gPSBuZXcgUmVnRXhwKHNyYyk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3JjLm5vZGVOYW1lKSB7XG4gICAgICAgICAgZHN0W2tleV0gPSBzcmMuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRWxlbWVudChzcmMpKSB7XG4gICAgICAgICAgZHN0W2tleV0gPSBzcmMuY2xvbmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIWlzT2JqZWN0KGRzdFtrZXldKSkgZHN0W2tleV0gPSBpc0FycmF5KHNyYykgPyBbXSA6IHt9O1xuICAgICAgICAgIGJhc2VFeHRlbmQoZHN0W2tleV0sIFtzcmNdLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHN0W2tleV0gPSBzcmM7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0SGFzaEtleShkc3QsIGgpO1xuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5leHRlbmRcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBFeHRlbmRzIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QgYGRzdGAgYnkgY29weWluZyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGZyb20gdGhlIGBzcmNgIG9iamVjdChzKVxuICogdG8gYGRzdGAuIFlvdSBjYW4gc3BlY2lmeSBtdWx0aXBsZSBgc3JjYCBvYmplY3RzLiBJZiB5b3Ugd2FudCB0byBwcmVzZXJ2ZSBvcmlnaW5hbCBvYmplY3RzLCB5b3UgY2FuIGRvIHNvXG4gKiBieSBwYXNzaW5nIGFuIGVtcHR5IG9iamVjdCBhcyB0aGUgdGFyZ2V0OiBgdmFyIG9iamVjdCA9IGFuZ3VsYXIuZXh0ZW5kKHt9LCBvYmplY3QxLCBvYmplY3QyKWAuXG4gKlxuICogKipOb3RlOioqIEtlZXAgaW4gbWluZCB0aGF0IGBhbmd1bGFyLmV4dGVuZGAgZG9lcyBub3Qgc3VwcG9ydCByZWN1cnNpdmUgbWVyZ2UgKGRlZXAgY29weSkuIFVzZVxuICoge0BsaW5rIGFuZ3VsYXIubWVyZ2V9IGZvciB0aGlzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkc3QgRGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHsuLi5PYmplY3R9IHNyYyBTb3VyY2Ugb2JqZWN0KHMpLlxuICogQHJldHVybnMge09iamVjdH0gUmVmZXJlbmNlIHRvIGBkc3RgLlxuICovXG5mdW5jdGlvbiBleHRlbmQoZHN0KSB7XG4gIHJldHVybiBiYXNlRXh0ZW5kKGRzdCwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBmYWxzZSk7XG59XG5cblxuLyoqXG4qIEBuZ2RvYyBmdW5jdGlvblxuKiBAbmFtZSBhbmd1bGFyLm1lcmdlXG4qIEBtb2R1bGUgbmdcbiogQGtpbmQgZnVuY3Rpb25cbipcbiogQGRlc2NyaXB0aW9uXG4qIERlZXBseSBleHRlbmRzIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QgYGRzdGAgYnkgY29weWluZyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIGZyb20gdGhlIGBzcmNgIG9iamVjdChzKVxuKiB0byBgZHN0YC4gWW91IGNhbiBzcGVjaWZ5IG11bHRpcGxlIGBzcmNgIG9iamVjdHMuIElmIHlvdSB3YW50IHRvIHByZXNlcnZlIG9yaWdpbmFsIG9iamVjdHMsIHlvdSBjYW4gZG8gc29cbiogYnkgcGFzc2luZyBhbiBlbXB0eSBvYmplY3QgYXMgdGhlIHRhcmdldDogYHZhciBvYmplY3QgPSBhbmd1bGFyLm1lcmdlKHt9LCBvYmplY3QxLCBvYmplY3QyKWAuXG4qXG4qIFVubGlrZSB7QGxpbmsgYW5ndWxhci5leHRlbmQgZXh0ZW5kKCl9LCBgbWVyZ2UoKWAgcmVjdXJzaXZlbHkgZGVzY2VuZHMgaW50byBvYmplY3QgcHJvcGVydGllcyBvZiBzb3VyY2Vcbiogb2JqZWN0cywgcGVyZm9ybWluZyBhIGRlZXAgY29weS5cbipcbiogQGRlcHJlY2F0ZWRcbiogc2luY2VWZXJzaW9uPVwiMS42LjVcIlxuKiBUaGlzIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQsIGJ1dCB3aWxsIG5vdCBiZSByZW1vdmVkIGluIHRoZSAxLnggbGlmZWN5Y2xlLlxuKiBUaGVyZSBhcmUgZWRnZSBjYXNlcyAoc2VlIHtAbGluayBhbmd1bGFyLm1lcmdlI2tub3duLWlzc3VlcyBrbm93biBpc3N1ZXN9KSB0aGF0IGFyZSBub3Rcbiogc3VwcG9ydGVkIGJ5IHRoaXMgZnVuY3Rpb24uIFdlIHN1Z2dlc3RcbiogdXNpbmcgW2xvZGFzaCdzIG1lcmdlKCldKGh0dHBzOi8vbG9kYXNoLmNvbS9kb2NzLzQuMTcuNCNtZXJnZSkgaW5zdGVhZC5cbipcbiogQGtub3duSXNzdWVcbiogVGhpcyBpcyBhIGxpc3Qgb2YgKGtub3duKSBvYmplY3QgdHlwZXMgdGhhdCBhcmUgbm90IGhhbmRsZWQgY29ycmVjdGx5IGJ5IHRoaXMgZnVuY3Rpb246XG4qIC0gW2BCbG9iYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IpXG4qIC0gW2BNZWRpYVN0cmVhbWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9NZWRpYVN0cmVhbSlcbiogLSBbYENhbnZhc0dyYWRpZW50YF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0NhbnZhc0dyYWRpZW50KVxuKiAtIEFuZ3VsYXJKUyB7QGxpbmsgJHJvb3RTY29wZS5TY29wZSBzY29wZXN9O1xuKlxuKiBAcGFyYW0ge09iamVjdH0gZHN0IERlc3RpbmF0aW9uIG9iamVjdC5cbiogQHBhcmFtIHsuLi5PYmplY3R9IHNyYyBTb3VyY2Ugb2JqZWN0KHMpLlxuKiBAcmV0dXJucyB7T2JqZWN0fSBSZWZlcmVuY2UgdG8gYGRzdGAuXG4qL1xuZnVuY3Rpb24gbWVyZ2UoZHN0KSB7XG4gIHJldHVybiBiYXNlRXh0ZW5kKGRzdCwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCB0cnVlKTtcbn1cblxuXG5cbmZ1bmN0aW9uIHRvSW50KHN0cikge1xuICByZXR1cm4gcGFyc2VJbnQoc3RyLCAxMCk7XG59XG5cbnZhciBpc051bWJlck5hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBpc051bWJlck5hTihudW0pIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICByZXR1cm4gbnVtICE9PSBudW07XG59O1xuXG5cbmZ1bmN0aW9uIGluaGVyaXQocGFyZW50LCBleHRyYSkge1xuICByZXR1cm4gZXh0ZW5kKE9iamVjdC5jcmVhdGUocGFyZW50KSwgZXh0cmEpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5ub29wXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBmdW5jdGlvbiB0aGF0IHBlcmZvcm1zIG5vIG9wZXJhdGlvbnMuIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWZ1bCB3aGVuIHdyaXRpbmcgY29kZSBpbiB0aGVcbiAqIGZ1bmN0aW9uYWwgc3R5bGUuXG4gICBgYGBqc1xuICAgICBmdW5jdGlvbiBmb28oY2FsbGJhY2spIHtcbiAgICAgICB2YXIgcmVzdWx0ID0gY2FsY3VsYXRlUmVzdWx0KCk7XG4gICAgICAgKGNhbGxiYWNrIHx8IGFuZ3VsYXIubm9vcCkocmVzdWx0KTtcbiAgICAgfVxuICAgYGBgXG4gKi9cbmZ1bmN0aW9uIG5vb3AoKSB7fVxubm9vcC4kaW5qZWN0ID0gW107XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaWRlbnRpdHlcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBpdHMgZmlyc3QgYXJndW1lbnQuIFRoaXMgZnVuY3Rpb24gaXMgdXNlZnVsIHdoZW4gd3JpdGluZyBjb2RlIGluIHRoZVxuICogZnVuY3Rpb25hbCBzdHlsZS5cbiAqXG4gICBgYGBqc1xuICAgZnVuY3Rpb24gdHJhbnNmb3JtZXIodHJhbnNmb3JtYXRpb25GbiwgdmFsdWUpIHtcbiAgICAgcmV0dXJuICh0cmFuc2Zvcm1hdGlvbkZuIHx8IGFuZ3VsYXIuaWRlbnRpdHkpKHZhbHVlKTtcbiAgIH07XG5cbiAgIC8vIEUuZy5cbiAgIGZ1bmN0aW9uIGdldFJlc3VsdChmbiwgaW5wdXQpIHtcbiAgICAgcmV0dXJuIChmbiB8fCBhbmd1bGFyLmlkZW50aXR5KShpbnB1dCk7XG4gICB9O1xuXG4gICBnZXRSZXN1bHQoZnVuY3Rpb24obikgeyByZXR1cm4gbiAqIDI7IH0sIDIxKTsgICAvLyByZXR1cm5zIDQyXG4gICBnZXRSZXN1bHQobnVsbCwgMjEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm5zIDIxXG4gICBnZXRSZXN1bHQodW5kZWZpbmVkLCAyMSk7ICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm5zIDIxXG4gICBgYGBcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIHRvIGJlIHJldHVybmVkLlxuICogQHJldHVybnMgeyp9IHRoZSB2YWx1ZSBwYXNzZWQgaW4uXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KCQpIHtyZXR1cm4gJDt9XG5pZGVudGl0eS4kaW5qZWN0ID0gW107XG5cblxuZnVuY3Rpb24gdmFsdWVGbih2YWx1ZSkge3JldHVybiBmdW5jdGlvbiB2YWx1ZVJlZigpIHtyZXR1cm4gdmFsdWU7fTt9XG5cbmZ1bmN0aW9uIGhhc0N1c3RvbVRvU3RyaW5nKG9iaikge1xuICByZXR1cm4gaXNGdW5jdGlvbihvYmoudG9TdHJpbmcpICYmIG9iai50b1N0cmluZyAhPT0gdG9TdHJpbmc7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNVbmRlZmluZWRcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIHVuZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgdW5kZWZpbmVkLlxuICovXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWx1ZSkge3JldHVybiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO31cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc0RlZmluZWRcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGRlZmluZWQuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGRlZmluZWQuXG4gKi9cbmZ1bmN0aW9uIGlzRGVmaW5lZCh2YWx1ZSkge3JldHVybiB0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnO31cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc09iamVjdFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYW4gYE9iamVjdGAuIFVubGlrZSBgdHlwZW9mYCBpbiBKYXZhU2NyaXB0LCBgbnVsbGBzIGFyZSBub3RcbiAqIGNvbnNpZGVyZWQgdG8gYmUgb2JqZWN0cy4gTm90ZSB0aGF0IEphdmFTY3JpcHQgYXJyYXlzIGFyZSBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhbiBgT2JqZWN0YCBidXQgbm90IGBudWxsYC5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gaHR0cDovL2pzcGVyZi5jb20vaXNvYmplY3Q0XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnO1xufVxuXG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYSBudWxsIHByb3RvdHlwZVxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYW4gYE9iamVjdGAgd2l0aCBhIG51bGwgcHJvdG90eXBlXG4gKi9cbmZ1bmN0aW9uIGlzQmxhbmtPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgIWdldFByb3RvdHlwZU9mKHZhbHVlKTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5pc1N0cmluZ1xuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgU3RyaW5nYC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBgU3RyaW5nYC5cbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJzt9XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNOdW1iZXJcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIGEgcmVmZXJlbmNlIGlzIGEgYE51bWJlcmAuXG4gKlxuICogVGhpcyBpbmNsdWRlcyB0aGUgXCJzcGVjaWFsXCIgbnVtYmVycyBgTmFOYCwgYCtJbmZpbml0eWAgYW5kIGAtSW5maW5pdHlgLlxuICpcbiAqIElmIHlvdSB3aXNoIHRvIGV4Y2x1ZGUgdGhlc2UgdGhlbiB5b3UgY2FuIHVzZSB0aGUgbmF0aXZlXG4gKiBbYGlzRmluaXRlJ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvaXNGaW5pdGUpXG4gKiBtZXRob2QuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYE51bWJlcmAuXG4gKi9cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcic7fVxuXG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLmlzRGF0ZVxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSB2YWx1ZSBpcyBhIGRhdGUuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGEgYERhdGVgLlxuICovXG5mdW5jdGlvbiBpc0RhdGUodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNBcnJheVxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYW4gYEFycmF5YC4gQWxpYXMgb2YgQXJyYXkuaXNBcnJheS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYW4gYEFycmF5YC5cbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhbiBgRXJyb3JgLlxuICogTG9vc2VseSBiYXNlZCBvbiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9pc2Vycm9yXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBSZWZlcmVuY2UgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIGBFcnJvcmAuXG4gKi9cbmZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpIHtcbiAgdmFyIHRhZyA9IHRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgJ1tvYmplY3QgRXJyb3JdJzogcmV0dXJuIHRydWU7XG4gICAgY2FzZSAnW29iamVjdCBFeGNlcHRpb25dJzogcmV0dXJuIHRydWU7XG4gICAgY2FzZSAnW29iamVjdCBET01FeGNlcHRpb25dJzogcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDogcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNGdW5jdGlvblxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERldGVybWluZXMgaWYgYSByZWZlcmVuY2UgaXMgYSBgRnVuY3Rpb25gLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBGdW5jdGlvbmAuXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO31cblxuXG4vKipcbiAqIERldGVybWluZXMgaWYgYSB2YWx1ZSBpcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgUmVmZXJlbmNlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBhIGBSZWdFeHBgLlxuICovXG5mdW5jdGlvbiBpc1JlZ0V4cCh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIGBvYmpgIGlzIGEgd2luZG93IG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBvYmogT2JqZWN0IHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqYCBpcyBhIHdpbmRvdyBvYmouXG4gKi9cbmZ1bmN0aW9uIGlzV2luZG93KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai53aW5kb3cgPT09IG9iajtcbn1cblxuXG5mdW5jdGlvbiBpc1Njb3BlKG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai4kZXZhbEFzeW5jICYmIG9iai4kd2F0Y2g7XG59XG5cblxuZnVuY3Rpb24gaXNGaWxlKG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBGaWxlXSc7XG59XG5cblxuZnVuY3Rpb24gaXNGb3JtRGF0YShvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgRm9ybURhdGFdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Jsb2Iob2JqKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nO1xufVxuXG5cbmZ1bmN0aW9uIGlzUHJvbWlzZUxpa2Uob2JqKSB7XG4gIHJldHVybiBvYmogJiYgaXNGdW5jdGlvbihvYmoudGhlbik7XG59XG5cblxudmFyIFRZUEVEX0FSUkFZX1JFR0VYUCA9IC9eXFxbb2JqZWN0ICg/OlVpbnQ4fFVpbnQ4Q2xhbXBlZHxVaW50MTZ8VWludDMyfEludDh8SW50MTZ8SW50MzJ8RmxvYXQzMnxGbG9hdDY0KUFycmF5XSQvO1xuZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiBpc051bWJlcih2YWx1ZS5sZW5ndGgpICYmIFRZUEVEX0FSUkFZX1JFR0VYUC50ZXN0KHRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbn1cblxuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcihvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuXG52YXIgdHJpbSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc1N0cmluZyh2YWx1ZSkgPyB2YWx1ZS50cmltKCkgOiB2YWx1ZTtcbn07XG5cbi8vIENvcGllZCBmcm9tOlxuLy8gaHR0cDovL2RvY3MuY2xvc3VyZS1saWJyYXJ5Lmdvb2dsZWNvZGUuY29tL2dpdC9sb2NhbF9jbG9zdXJlX2dvb2dfc3RyaW5nX3N0cmluZy5qcy5zb3VyY2UuaHRtbCNsaW5lMTAyMVxuLy8gUHJlcmVxOiBzIGlzIGEgc3RyaW5nLlxudmFyIGVzY2FwZUZvclJlZ2V4cCA9IGZ1bmN0aW9uKHMpIHtcbiAgcmV0dXJuIHNcbiAgICAucmVwbGFjZSgvKFstKClbXFxde30rPyouJF58LDojPCFcXFxcXSkvZywgJ1xcXFwkMScpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAucmVwbGFjZSgvXFx4MDgvZywgJ1xcXFx4MDgnKTtcbn07XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuaXNFbGVtZW50XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGV0ZXJtaW5lcyBpZiBhIHJlZmVyZW5jZSBpcyBhIERPTSBlbGVtZW50IChvciB3cmFwcGVkIGpRdWVyeSBlbGVtZW50KS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlIFJlZmVyZW5jZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgYSBET00gZWxlbWVudCAob3Igd3JhcHBlZCBqUXVlcnkgZWxlbWVudCkuXG4gKi9cbmZ1bmN0aW9uIGlzRWxlbWVudChub2RlKSB7XG4gIHJldHVybiAhIShub2RlICYmXG4gICAgKG5vZGUubm9kZU5hbWUgIC8vIFdlIGFyZSBhIGRpcmVjdCBlbGVtZW50LlxuICAgIHx8IChub2RlLnByb3AgJiYgbm9kZS5hdHRyICYmIG5vZGUuZmluZCkpKTsgIC8vIFdlIGhhdmUgYW4gb24gYW5kIGZpbmQgbWV0aG9kIHBhcnQgb2YgalF1ZXJ5IEFQSS5cbn1cblxuLyoqXG4gKiBAcGFyYW0gc3RyICdrZXkxLGtleTIsLi4uJ1xuICogQHJldHVybnMge29iamVjdH0gaW4gdGhlIGZvcm0gb2Yge2tleTE6dHJ1ZSwga2V5Mjp0cnVlLCAuLi59XG4gKi9cbmZ1bmN0aW9uIG1ha2VNYXAoc3RyKSB7XG4gIHZhciBvYmogPSB7fSwgaXRlbXMgPSBzdHIuc3BsaXQoJywnKSwgaTtcbiAgZm9yIChpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgb2JqW2l0ZW1zW2ldXSA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuXG5mdW5jdGlvbiBub2RlTmFtZV8oZWxlbWVudCkge1xuICByZXR1cm4gbG93ZXJjYXNlKGVsZW1lbnQubm9kZU5hbWUgfHwgKGVsZW1lbnRbMF0gJiYgZWxlbWVudFswXS5ub2RlTmFtZSkpO1xufVxuXG5mdW5jdGlvbiBpbmNsdWRlcyhhcnJheSwgb2JqKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGFycmF5LCBvYmopICE9PSAtMTtcbn1cblxuZnVuY3Rpb24gYXJyYXlSZW1vdmUoYXJyYXksIHZhbHVlKSB7XG4gIHZhciBpbmRleCA9IGFycmF5LmluZGV4T2YodmFsdWUpO1xuICBpZiAoaW5kZXggPj0gMCkge1xuICAgIGFycmF5LnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgcmV0dXJuIGluZGV4O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5jb3B5XG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYCwgd2hpY2ggc2hvdWxkIGJlIGFuIG9iamVjdCBvciBhbiBhcnJheS5cbiAqXG4gKiAqIElmIG5vIGRlc3RpbmF0aW9uIGlzIHN1cHBsaWVkLCBhIGNvcHkgb2YgdGhlIG9iamVjdCBvciBhcnJheSBpcyBjcmVhdGVkLlxuICogKiBJZiBhIGRlc3RpbmF0aW9uIGlzIHByb3ZpZGVkLCBhbGwgb2YgaXRzIGVsZW1lbnRzIChmb3IgYXJyYXlzKSBvciBwcm9wZXJ0aWVzIChmb3Igb2JqZWN0cylcbiAqICAgYXJlIGRlbGV0ZWQgYW5kIHRoZW4gYWxsIGVsZW1lbnRzL3Byb3BlcnRpZXMgZnJvbSB0aGUgc291cmNlIGFyZSBjb3BpZWQgdG8gaXQuXG4gKiAqIElmIGBzb3VyY2VgIGlzIG5vdCBhbiBvYmplY3Qgb3IgYXJyYXkgKGluYy4gYG51bGxgIGFuZCBgdW5kZWZpbmVkYCksIGBzb3VyY2VgIGlzIHJldHVybmVkLlxuICogKiBJZiBgc291cmNlYCBpcyBpZGVudGljYWwgdG8gYGRlc3RpbmF0aW9uYCBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24uXG4gKlxuICogPGJyIC8+XG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogICBPbmx5IGVudW1lcmFibGUgcHJvcGVydGllcyBhcmUgdGFrZW4gaW50byBhY2NvdW50LiBOb24tZW51bWVyYWJsZSBwcm9wZXJ0aWVzIChib3RoIG9uIGBzb3VyY2VgXG4gKiAgIGFuZCBvbiBgZGVzdGluYXRpb25gKSB3aWxsIGJlIGlnbm9yZWQuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAcGFyYW0geyp9IHNvdXJjZSBUaGUgc291cmNlIHRoYXQgd2lsbCBiZSB1c2VkIHRvIG1ha2UgYSBjb3B5LlxuICogICAgICAgICAgICAgICAgICAgQ2FuIGJlIGFueSB0eXBlLCBpbmNsdWRpbmcgcHJpbWl0aXZlcywgYG51bGxgLCBhbmQgYHVuZGVmaW5lZGAuXG4gKiBAcGFyYW0geyhPYmplY3R8QXJyYXkpPX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gaW50byB3aGljaCB0aGUgc291cmNlIGlzIGNvcGllZC4gSWZcbiAqICAgICBwcm92aWRlZCwgbXVzdCBiZSBvZiB0aGUgc2FtZSB0eXBlIGFzIGBzb3VyY2VgLlxuICogQHJldHVybnMgeyp9IFRoZSBjb3B5IG9yIHVwZGF0ZWQgYGRlc3RpbmF0aW9uYCwgaWYgYGRlc3RpbmF0aW9uYCB3YXMgc3BlY2lmaWVkLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlIG1vZHVsZT1cImNvcHlFeGFtcGxlXCIgbmFtZT1cImFuZ3VsYXItY29weVwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8Zm9ybSBub3ZhbGlkYXRlIGNsYXNzPVwic2ltcGxlLWZvcm1cIj5cbiAgICAgICAgICA8bGFiZWw+TmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIiAvPjwvbGFiZWw+PGJyIC8+XG4gICAgICAgICAgPGxhYmVsPkFnZTogIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJ1c2VyLmFnZVwiIC8+PC9sYWJlbD48YnIgLz5cbiAgICAgICAgICBHZW5kZXI6IDxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmctbW9kZWw9XCJ1c2VyLmdlbmRlclwiIHZhbHVlPVwibWFsZVwiIC8+bWFsZTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwidXNlci5nZW5kZXJcIiB2YWx1ZT1cImZlbWFsZVwiIC8+ZmVtYWxlPC9sYWJlbD48YnIgLz5cbiAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwicmVzZXQoKVwiPlJFU0VUPC9idXR0b24+XG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInVwZGF0ZSh1c2VyKVwiPlNBVkU8L2J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICA8cHJlPmZvcm0gPSB7e3VzZXIgfCBqc29ufX08L3ByZT5cbiAgICAgICAgPHByZT5sZWFkZXIgPSB7e2xlYWRlciB8IGpzb259fTwvcHJlPlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIC8vIE1vZHVsZTogY29weUV4YW1wbGVcbiAgICAgIGFuZ3VsYXIuXG4gICAgICAgIG1vZHVsZSgnY29weUV4YW1wbGUnLCBbXSkuXG4gICAgICAgIGNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUubGVhZGVyID0ge307XG5cbiAgICAgICAgICAkc2NvcGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIEV4YW1wbGUgd2l0aCAxIGFyZ3VtZW50XG4gICAgICAgICAgICAkc2NvcGUudXNlciA9IGFuZ3VsYXIuY29weSgkc2NvcGUubGVhZGVyKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgICAgIC8vIEV4YW1wbGUgd2l0aCAyIGFyZ3VtZW50c1xuICAgICAgICAgICAgYW5ndWxhci5jb3B5KHVzZXIsICRzY29wZS5sZWFkZXIpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAkc2NvcGUucmVzZXQoKTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiBjb3B5KHNvdXJjZSwgZGVzdGluYXRpb24sIG1heERlcHRoKSB7XG4gIHZhciBzdGFja1NvdXJjZSA9IFtdO1xuICB2YXIgc3RhY2tEZXN0ID0gW107XG4gIG1heERlcHRoID0gaXNWYWxpZE9iamVjdE1heERlcHRoKG1heERlcHRoKSA/IG1heERlcHRoIDogTmFOO1xuXG4gIGlmIChkZXN0aW5hdGlvbikge1xuICAgIGlmIChpc1R5cGVkQXJyYXkoZGVzdGluYXRpb24pIHx8IGlzQXJyYXlCdWZmZXIoZGVzdGluYXRpb24pKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3B0YScsICdDYW5cXCd0IGNvcHkhIFR5cGVkQXJyYXkgZGVzdGluYXRpb24gY2Fubm90IGJlIG11dGF0ZWQuJyk7XG4gICAgfVxuICAgIGlmIChzb3VyY2UgPT09IGRlc3RpbmF0aW9uKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3BpJywgJ0NhblxcJ3QgY29weSEgU291cmNlIGFuZCBkZXN0aW5hdGlvbiBhcmUgaWRlbnRpY2FsLicpO1xuICAgIH1cblxuICAgIC8vIEVtcHR5IHRoZSBkZXN0aW5hdGlvbiBvYmplY3RcbiAgICBpZiAoaXNBcnJheShkZXN0aW5hdGlvbikpIHtcbiAgICAgIGRlc3RpbmF0aW9uLmxlbmd0aCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvckVhY2goZGVzdGluYXRpb24sIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleSAhPT0gJyQkaGFzaEtleScpIHtcbiAgICAgICAgICBkZWxldGUgZGVzdGluYXRpb25ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhY2tTb3VyY2UucHVzaChzb3VyY2UpO1xuICAgIHN0YWNrRGVzdC5wdXNoKGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gY29weVJlY3Vyc2Uoc291cmNlLCBkZXN0aW5hdGlvbiwgbWF4RGVwdGgpO1xuICB9XG5cbiAgcmV0dXJuIGNvcHlFbGVtZW50KHNvdXJjZSwgbWF4RGVwdGgpO1xuXG4gIGZ1bmN0aW9uIGNvcHlSZWN1cnNlKHNvdXJjZSwgZGVzdGluYXRpb24sIG1heERlcHRoKSB7XG4gICAgbWF4RGVwdGgtLTtcbiAgICBpZiAobWF4RGVwdGggPCAwKSB7XG4gICAgICByZXR1cm4gJy4uLic7XG4gICAgfVxuICAgIHZhciBoID0gZGVzdGluYXRpb24uJCRoYXNoS2V5O1xuICAgIHZhciBrZXk7XG4gICAgaWYgKGlzQXJyYXkoc291cmNlKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc291cmNlLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgZGVzdGluYXRpb24ucHVzaChjb3B5RWxlbWVudChzb3VyY2VbaV0sIG1heERlcHRoKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0JsYW5rT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIC8vIGNyZWF0ZU1hcCgpIGZhc3QgcGF0aCAtLS0gU2FmZSB0byBhdm9pZCBoYXNPd25Qcm9wZXJ0eSBjaGVjayBiZWNhdXNlIHByb3RvdHlwZSBjaGFpbiBpcyBlbXB0eVxuICAgICAgZm9yIChrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGRlc3RpbmF0aW9uW2tleV0gPSBjb3B5RWxlbWVudChzb3VyY2Vba2V5XSwgbWF4RGVwdGgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc291cmNlICYmIHR5cGVvZiBzb3VyY2UuaGFzT3duUHJvcGVydHkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFNsb3cgcGF0aCwgd2hpY2ggbXVzdCByZWx5IG9uIGhhc093blByb3BlcnR5XG4gICAgICBmb3IgKGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgZGVzdGluYXRpb25ba2V5XSA9IGNvcHlFbGVtZW50KHNvdXJjZVtrZXldLCBtYXhEZXB0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2xvd2VzdCBwYXRoIC0tLSBoYXNPd25Qcm9wZXJ0eSBjYW4ndCBiZSBjYWxsZWQgYXMgYSBtZXRob2RcbiAgICAgIGZvciAoa2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICBkZXN0aW5hdGlvbltrZXldID0gY29weUVsZW1lbnQoc291cmNlW2tleV0sIG1heERlcHRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzZXRIYXNoS2V5KGRlc3RpbmF0aW9uLCBoKTtcbiAgICByZXR1cm4gZGVzdGluYXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5RWxlbWVudChzb3VyY2UsIG1heERlcHRoKSB7XG4gICAgLy8gU2ltcGxlIHZhbHVlc1xuICAgIGlmICghaXNPYmplY3Qoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9XG5cbiAgICAvLyBBbHJlYWR5IGNvcGllZCB2YWx1ZXNcbiAgICB2YXIgaW5kZXggPSBzdGFja1NvdXJjZS5pbmRleE9mKHNvdXJjZSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHN0YWNrRGVzdFtpbmRleF07XG4gICAgfVxuXG4gICAgaWYgKGlzV2luZG93KHNvdXJjZSkgfHwgaXNTY29wZShzb3VyY2UpKSB7XG4gICAgICB0aHJvdyBuZ01pbkVycignY3B3cycsXG4gICAgICAgICdDYW5cXCd0IGNvcHkhIE1ha2luZyBjb3BpZXMgb2YgV2luZG93IG9yIFNjb3BlIGluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLicpO1xuICAgIH1cblxuICAgIHZhciBuZWVkc1JlY3Vyc2UgPSBmYWxzZTtcbiAgICB2YXIgZGVzdGluYXRpb24gPSBjb3B5VHlwZShzb3VyY2UpO1xuXG4gICAgaWYgKGRlc3RpbmF0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlc3RpbmF0aW9uID0gaXNBcnJheShzb3VyY2UpID8gW10gOiBPYmplY3QuY3JlYXRlKGdldFByb3RvdHlwZU9mKHNvdXJjZSkpO1xuICAgICAgbmVlZHNSZWN1cnNlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBzdGFja1NvdXJjZS5wdXNoKHNvdXJjZSk7XG4gICAgc3RhY2tEZXN0LnB1c2goZGVzdGluYXRpb24pO1xuXG4gICAgcmV0dXJuIG5lZWRzUmVjdXJzZVxuICAgICAgPyBjb3B5UmVjdXJzZShzb3VyY2UsIGRlc3RpbmF0aW9uLCBtYXhEZXB0aClcbiAgICAgIDogZGVzdGluYXRpb247XG4gIH1cblxuICBmdW5jdGlvbiBjb3B5VHlwZShzb3VyY2UpIHtcbiAgICBzd2l0Y2ggKHRvU3RyaW5nLmNhbGwoc291cmNlKSkge1xuICAgICAgY2FzZSAnW29iamVjdCBJbnQ4QXJyYXldJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgSW50MTZBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBJbnQzMkFycmF5XSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBGbG9hdDY0QXJyYXldJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgVWludDhBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50MTZBcnJheV0nOlxuICAgICAgY2FzZSAnW29iamVjdCBVaW50MzJBcnJheV0nOlxuICAgICAgICByZXR1cm4gbmV3IHNvdXJjZS5jb25zdHJ1Y3Rvcihjb3B5RWxlbWVudChzb3VyY2UuYnVmZmVyKSwgc291cmNlLmJ5dGVPZmZzZXQsIHNvdXJjZS5sZW5ndGgpO1xuXG4gICAgICBjYXNlICdbb2JqZWN0IEFycmF5QnVmZmVyXSc6XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFMTBcbiAgICAgICAgaWYgKCFzb3VyY2Uuc2xpY2UpIHtcbiAgICAgICAgICAvLyBJZiB3ZSdyZSBpbiB0aGlzIGNhc2Ugd2Uga25vdyB0aGUgZW52aXJvbm1lbnQgc3VwcG9ydHMgQXJyYXlCdWZmZXJcbiAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuICAgICAgICAgIHZhciBjb3BpZWQgPSBuZXcgQXJyYXlCdWZmZXIoc291cmNlLmJ5dGVMZW5ndGgpO1xuICAgICAgICAgIG5ldyBVaW50OEFycmF5KGNvcGllZCkuc2V0KG5ldyBVaW50OEFycmF5KHNvdXJjZSkpO1xuICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgKi9cbiAgICAgICAgICByZXR1cm4gY29waWVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc2xpY2UoMCk7XG5cbiAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgICAgcmV0dXJuIG5ldyBzb3VyY2UuY29uc3RydWN0b3Ioc291cmNlLnZhbHVlT2YoKSk7XG5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoc291cmNlLnNvdXJjZSwgc291cmNlLnRvU3RyaW5nKCkubWF0Y2goL1teL10qJC8pWzBdKTtcbiAgICAgICAgcmUubGFzdEluZGV4ID0gc291cmNlLmxhc3RJbmRleDtcbiAgICAgICAgcmV0dXJuIHJlO1xuXG4gICAgICBjYXNlICdbb2JqZWN0IEJsb2JdJzpcbiAgICAgICAgcmV0dXJuIG5ldyBzb3VyY2UuY29uc3RydWN0b3IoW3NvdXJjZV0sIHt0eXBlOiBzb3VyY2UudHlwZX0pO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHNvdXJjZS5jbG9uZU5vZGUpKSB7XG4gICAgICByZXR1cm4gc291cmNlLmNsb25lTm9kZSh0cnVlKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG5mdW5jdGlvbiBzaW1wbGVDb21wYXJlKGEsIGIpIHsgcmV0dXJuIGEgPT09IGIgfHwgKGEgIT09IGEgJiYgYiAhPT0gYik7IH1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5lcXVhbHNcbiAqIEBtb2R1bGUgbmdcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEZXRlcm1pbmVzIGlmIHR3byBvYmplY3RzIG9yIHR3byB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQuIFN1cHBvcnRzIHZhbHVlIHR5cGVzLCByZWd1bGFyXG4gKiBleHByZXNzaW9ucywgYXJyYXlzIGFuZCBvYmplY3RzLlxuICpcbiAqIFR3byBvYmplY3RzIG9yIHZhbHVlcyBhcmUgY29uc2lkZXJlZCBlcXVpdmFsZW50IGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgZm9sbG93aW5nIGlzIHRydWU6XG4gKlxuICogKiBCb3RoIG9iamVjdHMgb3IgdmFsdWVzIHBhc3MgYD09PWAgY29tcGFyaXNvbi5cbiAqICogQm90aCBvYmplY3RzIG9yIHZhbHVlcyBhcmUgb2YgdGhlIHNhbWUgdHlwZSBhbmQgYWxsIG9mIHRoZWlyIHByb3BlcnRpZXMgYXJlIGVxdWFsIGJ5XG4gKiAgIGNvbXBhcmluZyB0aGVtIHdpdGggYGFuZ3VsYXIuZXF1YWxzYC5cbiAqICogQm90aCB2YWx1ZXMgYXJlIE5hTi4gKEluIEphdmFTY3JpcHQsIE5hTiA9PSBOYU4gPT4gZmFsc2UuIEJ1dCB3ZSBjb25zaWRlciB0d28gTmFOIGFzIGVxdWFsKVxuICogKiBCb3RoIHZhbHVlcyByZXByZXNlbnQgdGhlIHNhbWUgcmVndWxhciBleHByZXNzaW9uIChJbiBKYXZhU2NyaXB0LFxuICogICAvYWJjLyA9PSAvYWJjLyA9PiBmYWxzZS4gQnV0IHdlIGNvbnNpZGVyIHR3byByZWd1bGFyIGV4cHJlc3Npb25zIGFzIGVxdWFsIHdoZW4gdGhlaXIgdGV4dHVhbFxuICogICByZXByZXNlbnRhdGlvbiBtYXRjaGVzKS5cbiAqXG4gKiBEdXJpbmcgYSBwcm9wZXJ0eSBjb21wYXJpc29uLCBwcm9wZXJ0aWVzIG9mIGBmdW5jdGlvbmAgdHlwZSBhbmQgcHJvcGVydGllcyB3aXRoIG5hbWVzXG4gKiB0aGF0IGJlZ2luIHdpdGggYCRgIGFyZSBpZ25vcmVkLlxuICpcbiAqIFNjb3BlIGFuZCBET01XaW5kb3cgb2JqZWN0cyBhcmUgYmVpbmcgY29tcGFyZWQgb25seSBieSBpZGVudGlmeSAoYD09PWApLlxuICpcbiAqIEBwYXJhbSB7Kn0gbzEgT2JqZWN0IG9yIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG8yIE9iamVjdCBvciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYXJndW1lbnRzIGFyZSBlcXVhbC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiZXF1YWxzRXhhbXBsZVwiIG5hbWU9XCJlcXVhbHNFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8Zm9ybSBub3ZhbGlkYXRlPlxuICAgICAgICAgIDxoMz5Vc2VyIDE8L2gzPlxuICAgICAgICAgIE5hbWU6IDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidXNlcjEubmFtZVwiPlxuICAgICAgICAgIEFnZTogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cInVzZXIxLmFnZVwiPlxuXG4gICAgICAgICAgPGgzPlVzZXIgMjwvaDM+XG4gICAgICAgICAgTmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJ1c2VyMi5uYW1lXCI+XG4gICAgICAgICAgQWdlOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwidXNlcjIuYWdlXCI+XG5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJDb21wYXJlXCIgbmctY2xpY2s9XCJjb21wYXJlKClcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBVc2VyIDE6IDxwcmU+e3t1c2VyMSB8IGpzb259fTwvcHJlPlxuICAgICAgICAgIFVzZXIgMjogPHByZT57e3VzZXIyIHwganNvbn19PC9wcmU+XG4gICAgICAgICAgRXF1YWw6IDxwcmU+e3tyZXN1bHR9fTwvcHJlPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZXF1YWxzRXhhbXBsZScsIFtdKS5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLnVzZXIxID0ge307XG4gICAgICAgICAgJHNjb3BlLnVzZXIyID0ge307XG4gICAgICAgICAgJHNjb3BlLmNvbXBhcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5yZXN1bHQgPSBhbmd1bGFyLmVxdWFscygkc2NvcGUudXNlcjEsICRzY29wZS51c2VyMik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiBlcXVhbHMobzEsIG8yKSB7XG4gIGlmIChvMSA9PT0gbzIpIHJldHVybiB0cnVlO1xuICBpZiAobzEgPT09IG51bGwgfHwgbzIgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICBpZiAobzEgIT09IG8xICYmIG8yICE9PSBvMikgcmV0dXJuIHRydWU7IC8vIE5hTiA9PT0gTmFOXG4gIHZhciB0MSA9IHR5cGVvZiBvMSwgdDIgPSB0eXBlb2YgbzIsIGxlbmd0aCwga2V5LCBrZXlTZXQ7XG4gIGlmICh0MSA9PT0gdDIgJiYgdDEgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKGlzQXJyYXkobzEpKSB7XG4gICAgICBpZiAoIWlzQXJyYXkobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoKGxlbmd0aCA9IG8xLmxlbmd0aCkgPT09IG8yLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGtleSA9IDA7IGtleSA8IGxlbmd0aDsga2V5KyspIHtcbiAgICAgICAgICBpZiAoIWVxdWFscyhvMVtrZXldLCBvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNEYXRlKG8xKSkge1xuICAgICAgaWYgKCFpc0RhdGUobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gc2ltcGxlQ29tcGFyZShvMS5nZXRUaW1lKCksIG8yLmdldFRpbWUoKSk7XG4gICAgfSBlbHNlIGlmIChpc1JlZ0V4cChvMSkpIHtcbiAgICAgIGlmICghaXNSZWdFeHAobzIpKSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gbzEudG9TdHJpbmcoKSA9PT0gbzIudG9TdHJpbmcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzU2NvcGUobzEpIHx8IGlzU2NvcGUobzIpIHx8IGlzV2luZG93KG8xKSB8fCBpc1dpbmRvdyhvMikgfHxcbiAgICAgICAgaXNBcnJheShvMikgfHwgaXNEYXRlKG8yKSB8fCBpc1JlZ0V4cChvMikpIHJldHVybiBmYWxzZTtcbiAgICAgIGtleVNldCA9IGNyZWF0ZU1hcCgpO1xuICAgICAgZm9yIChrZXkgaW4gbzEpIHtcbiAgICAgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICckJyB8fCBpc0Z1bmN0aW9uKG8xW2tleV0pKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFlcXVhbHMobzFba2V5XSwgbzJba2V5XSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAga2V5U2V0W2tleV0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gbzIpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGtleVNldCkgJiZcbiAgICAgICAgICAgIGtleS5jaGFyQXQoMCkgIT09ICckJyAmJlxuICAgICAgICAgICAgaXNEZWZpbmVkKG8yW2tleV0pICYmXG4gICAgICAgICAgICAhaXNGdW5jdGlvbihvMltrZXldKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxudmFyIGNzcCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIWlzRGVmaW5lZChjc3AucnVsZXMpKSB7XG5cblxuICAgIHZhciBuZ0NzcEVsZW1lbnQgPSAod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuZy1jc3BdJykgfHxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW5nLWNzcF0nKSk7XG5cbiAgICBpZiAobmdDc3BFbGVtZW50KSB7XG4gICAgICB2YXIgbmdDc3BBdHRyaWJ1dGUgPSBuZ0NzcEVsZW1lbnQuZ2V0QXR0cmlidXRlKCduZy1jc3AnKSB8fFxuICAgICAgICAgICAgICAgICAgICBuZ0NzcEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW5nLWNzcCcpO1xuICAgICAgY3NwLnJ1bGVzID0ge1xuICAgICAgICBub1Vuc2FmZUV2YWw6ICFuZ0NzcEF0dHJpYnV0ZSB8fCAobmdDc3BBdHRyaWJ1dGUuaW5kZXhPZignbm8tdW5zYWZlLWV2YWwnKSAhPT0gLTEpLFxuICAgICAgICBub0lubGluZVN0eWxlOiAhbmdDc3BBdHRyaWJ1dGUgfHwgKG5nQ3NwQXR0cmlidXRlLmluZGV4T2YoJ25vLWlubGluZS1zdHlsZScpICE9PSAtMSlcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNzcC5ydWxlcyA9IHtcbiAgICAgICAgbm9VbnNhZmVFdmFsOiBub1Vuc2FmZUV2YWwoKSxcbiAgICAgICAgbm9JbmxpbmVTdHlsZTogZmFsc2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNzcC5ydWxlcztcblxuICBmdW5jdGlvbiBub1Vuc2FmZUV2YWwoKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXcsIG5vLW5ldy1mdW5jXG4gICAgICBuZXcgRnVuY3Rpb24oJycpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbW9kdWxlIG5nXG4gKiBAbmFtZSBuZ0pxXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nSnEgdGhlIG5hbWUgb2YgdGhlIGxpYnJhcnkgYXZhaWxhYmxlIHVuZGVyIGB3aW5kb3dgXG4gKiB0byBiZSB1c2VkIGZvciBhbmd1bGFyLmVsZW1lbnRcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoaXMgZGlyZWN0aXZlIHRvIGZvcmNlIHRoZSBhbmd1bGFyLmVsZW1lbnQgbGlicmFyeS4gIFRoaXMgc2hvdWxkIGJlXG4gKiB1c2VkIHRvIGZvcmNlIGVpdGhlciBqcUxpdGUgYnkgbGVhdmluZyBuZy1qcSBibGFuayBvciBzZXR0aW5nIHRoZSBuYW1lIG9mXG4gKiB0aGUganF1ZXJ5IHZhcmlhYmxlIHVuZGVyIHdpbmRvdyAoZWcuIGpRdWVyeSkuXG4gKlxuICogU2luY2UgYW5ndWxhciBsb29rcyBmb3IgdGhpcyBkaXJlY3RpdmUgd2hlbiBpdCBpcyBsb2FkZWQgKGRvZXNuJ3Qgd2FpdCBmb3IgdGhlXG4gKiBET01Db250ZW50TG9hZGVkIGV2ZW50KSwgaXQgbXVzdCBiZSBwbGFjZWQgb24gYW4gZWxlbWVudCB0aGF0IGNvbWVzIGJlZm9yZSB0aGUgc2NyaXB0XG4gKiB3aGljaCBsb2FkcyBhbmd1bGFyLiBBbHNvLCBvbmx5IHRoZSBmaXJzdCBpbnN0YW5jZSBvZiBgbmctanFgIHdpbGwgYmUgdXNlZCBhbmQgYWxsXG4gKiBvdGhlcnMgaWdub3JlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byBmb3JjZSBqcUxpdGUgdXNpbmcgdGhlIGBuZ0pxYCBkaXJlY3RpdmUgdG8gdGhlIGBodG1sYCB0YWcuXG4gYGBgaHRtbFxuIDwhZG9jdHlwZSBodG1sPlxuIDxodG1sIG5nLWFwcCBuZy1qcT5cbiAuLi5cbiAuLi5cbiA8L2h0bWw+XG4gYGBgXG4gKiBAZXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYSBqUXVlcnkgYmFzZWQgbGlicmFyeSBvZiBhIGRpZmZlcmVudCBuYW1lLlxuICogVGhlIGxpYnJhcnkgbmFtZSBtdXN0IGJlIGF2YWlsYWJsZSBhdCB0aGUgdG9wIG1vc3QgJ3dpbmRvdycuXG4gYGBgaHRtbFxuIDwhZG9jdHlwZSBodG1sPlxuIDxodG1sIG5nLWFwcCBuZy1qcT1cImpRdWVyeUxpYlwiPlxuIC4uLlxuIC4uLlxuIDwvaHRtbD5cbiBgYGBcbiAqL1xudmFyIGpxID0gZnVuY3Rpb24oKSB7XG4gIGlmIChpc0RlZmluZWQoanEubmFtZV8pKSByZXR1cm4ganEubmFtZV87XG4gIHZhciBlbDtcbiAgdmFyIGksIGlpID0gbmdBdHRyUHJlZml4ZXMubGVuZ3RoLCBwcmVmaXgsIG5hbWU7XG4gIGZvciAoaSA9IDA7IGkgPCBpaTsgKytpKSB7XG4gICAgcHJlZml4ID0gbmdBdHRyUHJlZml4ZXNbaV07XG4gICAgZWwgPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignWycgKyBwcmVmaXgucmVwbGFjZSgnOicsICdcXFxcOicpICsgJ2pxXScpO1xuICAgIGlmIChlbCkge1xuICAgICAgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZShwcmVmaXggKyAnanEnKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoanEubmFtZV8gPSBuYW1lKTtcbn07XG5cbmZ1bmN0aW9uIGNvbmNhdChhcnJheTEsIGFycmF5MiwgaW5kZXgpIHtcbiAgcmV0dXJuIGFycmF5MS5jb25jYXQoc2xpY2UuY2FsbChhcnJheTIsIGluZGV4KSk7XG59XG5cbmZ1bmN0aW9uIHNsaWNlQXJncyhhcmdzLCBzdGFydEluZGV4KSB7XG4gIHJldHVybiBzbGljZS5jYWxsKGFyZ3MsIHN0YXJ0SW5kZXggfHwgMCk7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuYmluZFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBjYWxscyBmdW5jdGlvbiBgZm5gIGJvdW5kIHRvIGBzZWxmYCAoYHNlbGZgIGJlY29tZXMgdGhlIGB0aGlzYCBmb3JcbiAqIGBmbmApLiBZb3UgY2FuIHN1cHBseSBvcHRpb25hbCBgYXJnc2AgdGhhdCBhcmUgcHJlYm91bmQgdG8gdGhlIGZ1bmN0aW9uLiBUaGlzIGZlYXR1cmUgaXMgYWxzb1xuICoga25vd24gYXMgW3BhcnRpYWwgYXBwbGljYXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFydGlhbF9hcHBsaWNhdGlvbiksIGFzXG4gKiBkaXN0aW5ndWlzaGVkIGZyb20gW2Z1bmN0aW9uIGN1cnJ5aW5nXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0N1cnJ5aW5nI0NvbnRyYXN0X3dpdGhfcGFydGlhbF9mdW5jdGlvbl9hcHBsaWNhdGlvbikuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHNlbGYgQ29udGV4dCB3aGljaCBgZm5gIHNob3VsZCBiZSBldmFsdWF0ZWQgaW4uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIEZ1bmN0aW9uIHRvIGJlIGJvdW5kLlxuICogQHBhcmFtIHsuLi4qfSBhcmdzIE9wdGlvbmFsIGFyZ3VtZW50cyB0byBiZSBwcmVib3VuZCB0byB0aGUgYGZuYCBmdW5jdGlvbiBjYWxsLlxuICogQHJldHVybnMge2Z1bmN0aW9uKCl9IEZ1bmN0aW9uIHRoYXQgd3JhcHMgdGhlIGBmbmAgd2l0aCBhbGwgdGhlIHNwZWNpZmllZCBiaW5kaW5ncy5cbiAqL1xuZnVuY3Rpb24gYmluZChzZWxmLCBmbikge1xuICB2YXIgY3VycnlBcmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBzbGljZUFyZ3MoYXJndW1lbnRzLCAyKSA6IFtdO1xuICBpZiAoaXNGdW5jdGlvbihmbikgJiYgIShmbiBpbnN0YW5jZW9mIFJlZ0V4cCkpIHtcbiAgICByZXR1cm4gY3VycnlBcmdzLmxlbmd0aFxuICAgICAgPyBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgICAgICAgPyBmbi5hcHBseShzZWxmLCBjb25jYXQoY3VycnlBcmdzLCBhcmd1bWVudHMsIDApKVxuICAgICAgICAgICAgOiBmbi5hcHBseShzZWxmLCBjdXJyeUFyZ3MpO1xuICAgICAgICB9XG4gICAgICA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgICAgICA/IGZuLmFwcGx5KHNlbGYsIGFyZ3VtZW50cylcbiAgICAgICAgICAgIDogZm4uY2FsbChzZWxmKTtcbiAgICAgICAgfTtcbiAgfSBlbHNlIHtcbiAgICAvLyBJbiBJRSwgbmF0aXZlIG1ldGhvZHMgYXJlIG5vdCBmdW5jdGlvbnMgc28gdGhleSBjYW5ub3QgYmUgYm91bmQgKG5vdGU6IHRoZXkgZG9uJ3QgbmVlZCB0byBiZSkuXG4gICAgcmV0dXJuIGZuO1xuICB9XG59XG5cblxuZnVuY3Rpb24gdG9Kc29uUmVwbGFjZXIoa2V5LCB2YWx1ZSkge1xuICB2YXIgdmFsID0gdmFsdWU7XG5cbiAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnICYmIGtleS5jaGFyQXQoMCkgPT09ICckJyAmJiBrZXkuY2hhckF0KDEpID09PSAnJCcpIHtcbiAgICB2YWwgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAoaXNXaW5kb3codmFsdWUpKSB7XG4gICAgdmFsID0gJyRXSU5ET1cnO1xuICB9IGVsc2UgaWYgKHZhbHVlICYmICB3aW5kb3cuZG9jdW1lbnQgPT09IHZhbHVlKSB7XG4gICAgdmFsID0gJyRET0NVTUVOVCc7XG4gIH0gZWxzZSBpZiAoaXNTY29wZSh2YWx1ZSkpIHtcbiAgICB2YWwgPSAnJFNDT1BFJztcbiAgfVxuXG4gIHJldHVybiB2YWw7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIudG9Kc29uXG4gKiBAbW9kdWxlIG5nXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU2VyaWFsaXplcyBpbnB1dCBpbnRvIGEgSlNPTi1mb3JtYXR0ZWQgc3RyaW5nLiBQcm9wZXJ0aWVzIHdpdGggbGVhZGluZyAkJCBjaGFyYWN0ZXJzIHdpbGwgYmVcbiAqIHN0cmlwcGVkIHNpbmNlIGFuZ3VsYXIgdXNlcyB0aGlzIG5vdGF0aW9uIGludGVybmFsbHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl8RGF0ZXxzdHJpbmd8bnVtYmVyfGJvb2xlYW59IG9iaiBJbnB1dCB0byBiZSBzZXJpYWxpemVkIGludG8gSlNPTi5cbiAqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXJ9IFtwcmV0dHk9Ml0gSWYgc2V0IHRvIHRydWUsIHRoZSBKU09OIG91dHB1dCB3aWxsIGNvbnRhaW4gbmV3bGluZXMgYW5kIHdoaXRlc3BhY2UuXG4gKiAgICBJZiBzZXQgdG8gYW4gaW50ZWdlciwgdGhlIEpTT04gb3V0cHV0IHdpbGwgY29udGFpbiB0aGF0IG1hbnkgc3BhY2VzIHBlciBpbmRlbnRhdGlvbi5cbiAqIEByZXR1cm5zIHtzdHJpbmd8dW5kZWZpbmVkfSBKU09OLWlmaWVkIHN0cmluZyByZXByZXNlbnRpbmcgYG9iamAuXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqIFRoZSBTYWZhcmkgYnJvd3NlciB0aHJvd3MgYSBgUmFuZ2VFcnJvcmAgaW5zdGVhZCBvZiByZXR1cm5pbmcgYG51bGxgIHdoZW4gaXQgdHJpZXMgdG8gc3RyaW5naWZ5IGEgYERhdGVgXG4gKiBvYmplY3Qgd2l0aCBhbiBpbnZhbGlkIGRhdGUgdmFsdWUuIFRoZSBvbmx5IHJlbGlhYmxlIHdheSB0byBwcmV2ZW50IHRoaXMgaXMgdG8gbW9ua2V5cGF0Y2ggdGhlXG4gKiBgRGF0ZS5wcm90b3R5cGUudG9KU09OYCBtZXRob2QgYXMgZm9sbG93czpcbiAqXG4gKiBgYGBcbiAqIHZhciBfRGF0ZXRvSlNPTiA9IERhdGUucHJvdG90eXBlLnRvSlNPTjtcbiAqIERhdGUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICogICB0cnkge1xuICogICAgIHJldHVybiBfRGF0ZXRvSlNPTi5jYWxsKHRoaXMpO1xuICogICB9IGNhdGNoKGUpIHtcbiAqICAgICBpZiAoZSBpbnN0YW5jZW9mIFJhbmdlRXJyb3IpIHtcbiAqICAgICAgIHJldHVybiBudWxsO1xuICogICAgIH1cbiAqICAgICB0aHJvdyBlO1xuICogICB9XG4gKiB9O1xuICogYGBgXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvcHVsbC8xNDIyMSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuZnVuY3Rpb24gdG9Kc29uKG9iaiwgcHJldHR5KSB7XG4gIGlmIChpc1VuZGVmaW5lZChvYmopKSByZXR1cm4gdW5kZWZpbmVkO1xuICBpZiAoIWlzTnVtYmVyKHByZXR0eSkpIHtcbiAgICBwcmV0dHkgPSBwcmV0dHkgPyAyIDogbnVsbDtcbiAgfVxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCB0b0pzb25SZXBsYWNlciwgcHJldHR5KTtcbn1cblxuXG4vKipcbiAqIEBuZ2RvYyBmdW5jdGlvblxuICogQG5hbWUgYW5ndWxhci5mcm9tSnNvblxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIERlc2VyaWFsaXplcyBhIEpTT04gc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBqc29uIEpTT04gc3RyaW5nIHRvIGRlc2VyaWFsaXplLlxuICogQHJldHVybnMge09iamVjdHxBcnJheXxzdHJpbmd8bnVtYmVyfSBEZXNlcmlhbGl6ZWQgSlNPTiBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGZyb21Kc29uKGpzb24pIHtcbiAgcmV0dXJuIGlzU3RyaW5nKGpzb24pXG4gICAgICA/IEpTT04ucGFyc2UoanNvbilcbiAgICAgIDoganNvbjtcbn1cblxuXG52YXIgQUxMX0NPTE9OUyA9IC86L2c7XG5mdW5jdGlvbiB0aW1lem9uZVRvT2Zmc2V0KHRpbWV6b25lLCBmYWxsYmFjaykge1xuICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHksIEVkZ2UgMTMtMTUrXG4gIC8vIElFL0VkZ2UgZG8gbm90IFwidW5kZXJzdGFuZFwiIGNvbG9uIChgOmApIGluIHRpbWV6b25lXG4gIHRpbWV6b25lID0gdGltZXpvbmUucmVwbGFjZShBTExfQ09MT05TLCAnJyk7XG4gIHZhciByZXF1ZXN0ZWRUaW1lem9uZU9mZnNldCA9IERhdGUucGFyc2UoJ0phbiAwMSwgMTk3MCAwMDowMDowMCAnICsgdGltZXpvbmUpIC8gNjAwMDA7XG4gIHJldHVybiBpc051bWJlck5hTihyZXF1ZXN0ZWRUaW1lem9uZU9mZnNldCkgPyBmYWxsYmFjayA6IHJlcXVlc3RlZFRpbWV6b25lT2Zmc2V0O1xufVxuXG5cbmZ1bmN0aW9uIGFkZERhdGVNaW51dGVzKGRhdGUsIG1pbnV0ZXMpIHtcbiAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcbiAgZGF0ZS5zZXRNaW51dGVzKGRhdGUuZ2V0TWludXRlcygpICsgbWludXRlcyk7XG4gIHJldHVybiBkYXRlO1xufVxuXG5cbmZ1bmN0aW9uIGNvbnZlcnRUaW1lem9uZVRvTG9jYWwoZGF0ZSwgdGltZXpvbmUsIHJldmVyc2UpIHtcbiAgcmV2ZXJzZSA9IHJldmVyc2UgPyAtMSA6IDE7XG4gIHZhciBkYXRlVGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gIHZhciB0aW1lem9uZU9mZnNldCA9IHRpbWV6b25lVG9PZmZzZXQodGltZXpvbmUsIGRhdGVUaW1lem9uZU9mZnNldCk7XG4gIHJldHVybiBhZGREYXRlTWludXRlcyhkYXRlLCByZXZlcnNlICogKHRpbWV6b25lT2Zmc2V0IC0gZGF0ZVRpbWV6b25lT2Zmc2V0KSk7XG59XG5cblxuLyoqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0aW5nVGFnKGVsZW1lbnQpIHtcbiAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KS5jbG9uZSgpLmVtcHR5KCk7XG4gIHZhciBlbGVtSHRtbCA9IGpxTGl0ZSgnPGRpdj4nKS5hcHBlbmQoZWxlbWVudCkuaHRtbCgpO1xuICB0cnkge1xuICAgIHJldHVybiBlbGVtZW50WzBdLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfVEVYVCA/IGxvd2VyY2FzZShlbGVtSHRtbCkgOlxuICAgICAgICBlbGVtSHRtbC5cbiAgICAgICAgICBtYXRjaCgvXig8W14+XSs+KS8pWzFdLlxuICAgICAgICAgIHJlcGxhY2UoL148KFtcXHctXSspLywgZnVuY3Rpb24obWF0Y2gsIG5vZGVOYW1lKSB7cmV0dXJuICc8JyArIGxvd2VyY2FzZShub2RlTmFtZSk7fSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbG93ZXJjYXNlKGVsZW1IdG1sKTtcbiAgfVxuXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIFRyaWVzIHRvIGRlY29kZSB0aGUgVVJJIGNvbXBvbmVudCB3aXRob3V0IHRocm93aW5nIGFuIGV4Y2VwdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHN0ciB2YWx1ZSBwb3RlbnRpYWwgVVJJIGNvbXBvbmVudCB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgY2FuIGJlIGRlY29kZWRcbiAqIHdpdGggdGhlIGRlY29kZVVSSUNvbXBvbmVudCBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZ25vcmUgYW55IGludmFsaWQgdXJpIGNvbXBvbmVudC5cbiAgfVxufVxuXG5cbi8qKlxuICogUGFyc2VzIGFuIGVzY2FwZWQgdXJsIHF1ZXJ5IHN0cmluZyBpbnRvIGtleS12YWx1ZSBwYWlycy5cbiAqIEByZXR1cm5zIHtPYmplY3QuPHN0cmluZyxib29sZWFufEFycmF5Pn1cbiAqL1xuZnVuY3Rpb24gcGFyc2VLZXlWYWx1ZSgvKipzdHJpbmcqL2tleVZhbHVlKSB7XG4gIHZhciBvYmogPSB7fTtcbiAgZm9yRWFjaCgoa2V5VmFsdWUgfHwgJycpLnNwbGl0KCcmJyksIGZ1bmN0aW9uKGtleVZhbHVlKSB7XG4gICAgdmFyIHNwbGl0UG9pbnQsIGtleSwgdmFsO1xuICAgIGlmIChrZXlWYWx1ZSkge1xuICAgICAga2V5ID0ga2V5VmFsdWUgPSBrZXlWYWx1ZS5yZXBsYWNlKC9cXCsvZywnJTIwJyk7XG4gICAgICBzcGxpdFBvaW50ID0ga2V5VmFsdWUuaW5kZXhPZignPScpO1xuICAgICAgaWYgKHNwbGl0UG9pbnQgIT09IC0xKSB7XG4gICAgICAgIGtleSA9IGtleVZhbHVlLnN1YnN0cmluZygwLCBzcGxpdFBvaW50KTtcbiAgICAgICAgdmFsID0ga2V5VmFsdWUuc3Vic3RyaW5nKHNwbGl0UG9pbnQgKyAxKTtcbiAgICAgIH1cbiAgICAgIGtleSA9IHRyeURlY29kZVVSSUNvbXBvbmVudChrZXkpO1xuICAgICAgaWYgKGlzRGVmaW5lZChrZXkpKSB7XG4gICAgICAgIHZhbCA9IGlzRGVmaW5lZCh2YWwpID8gdHJ5RGVjb2RlVVJJQ29tcG9uZW50KHZhbCkgOiB0cnVlO1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmpba2V5XSkpIHtcbiAgICAgICAgICBvYmpba2V5XS5wdXNoKHZhbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2JqW2tleV0gPSBbb2JqW2tleV0sdmFsXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHRvS2V5VmFsdWUob2JqKSB7XG4gIHZhciBwYXJ0cyA9IFtdO1xuICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24oYXJyYXlWYWx1ZSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSkgK1xuICAgICAgICAgICAgICAgICAgIChhcnJheVZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeShhcnJheVZhbHVlLCB0cnVlKSkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSkgK1xuICAgICAgICAgICAgICAgKHZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgdHJ1ZSkpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcGFydHMubGVuZ3RoID8gcGFydHMuam9pbignJicpIDogJyc7XG59XG5cblxuLyoqXG4gKiBXZSBuZWVkIG91ciBjdXN0b20gbWV0aG9kIGJlY2F1c2UgZW5jb2RlVVJJQ29tcG9uZW50IGlzIHRvbyBhZ2dyZXNzaXZlIGFuZCBkb2Vzbid0IGZvbGxvd1xuICogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMzk4Ni50eHQgd2l0aCByZWdhcmRzIHRvIHRoZSBjaGFyYWN0ZXIgc2V0IChwY2hhcikgYWxsb3dlZCBpbiBwYXRoXG4gKiBzZWdtZW50czpcbiAqICAgIHNlZ21lbnQgICAgICAgPSAqcGNoYXJcbiAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxuICogICAgcGN0LWVuY29kZWQgICA9IFwiJVwiIEhFWERJRyBIRVhESUdcbiAqICAgIHVucmVzZXJ2ZWQgICAgPSBBTFBIQSAvIERJR0lUIC8gXCItXCIgLyBcIi5cIiAvIFwiX1wiIC8gXCJ+XCJcbiAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcbiAqICAgICAgICAgICAgICAgICAgICAgLyBcIipcIiAvIFwiK1wiIC8gXCIsXCIgLyBcIjtcIiAvIFwiPVwiXG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVyaVNlZ21lbnQodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVcmlRdWVyeSh2YWwsIHRydWUpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyNi9naSwgJyYnKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lM0QvZ2ksICc9JykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTJCL2dpLCAnKycpO1xufVxuXG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgaW50ZW5kZWQgZm9yIGVuY29kaW5nICprZXkqIG9yICp2YWx1ZSogcGFydHMgb2YgcXVlcnkgY29tcG9uZW50LiBXZSBuZWVkIGEgY3VzdG9tXG4gKiBtZXRob2QgYmVjYXVzZSBlbmNvZGVVUklDb21wb25lbnQgaXMgdG9vIGFnZ3Jlc3NpdmUgYW5kIGVuY29kZXMgc3R1ZmYgdGhhdCBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIGVuY29kZWQgcGVyIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODY6XG4gKiAgICBxdWVyeSAgICAgICAgID0gKiggcGNoYXIgLyBcIi9cIiAvIFwiP1wiIClcbiAqICAgIHBjaGFyICAgICAgICAgPSB1bnJlc2VydmVkIC8gcGN0LWVuY29kZWQgLyBzdWItZGVsaW1zIC8gXCI6XCIgLyBcIkBcIlxuICogICAgdW5yZXNlcnZlZCAgICA9IEFMUEhBIC8gRElHSVQgLyBcIi1cIiAvIFwiLlwiIC8gXCJfXCIgLyBcIn5cIlxuICogICAgcGN0LWVuY29kZWQgICA9IFwiJVwiIEhFWERJRyBIRVhESUdcbiAqICAgIHN1Yi1kZWxpbXMgICAgPSBcIiFcIiAvIFwiJFwiIC8gXCImXCIgLyBcIidcIiAvIFwiKFwiIC8gXCIpXCJcbiAqICAgICAgICAgICAgICAgICAgICAgLyBcIipcIiAvIFwiK1wiIC8gXCIsXCIgLyBcIjtcIiAvIFwiPVwiXG4gKi9cbmZ1bmN0aW9uIGVuY29kZVVyaVF1ZXJ5KHZhbCwgcGN0RW5jb2RlU3BhY2VzKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgICAgICAgICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICAgICAgICAgICByZXBsYWNlKC8lM0IvZ2ksICc7JykuXG4gICAgICAgICAgICAgcmVwbGFjZSgvJTIwL2csIChwY3RFbmNvZGVTcGFjZXMgPyAnJTIwJyA6ICcrJykpO1xufVxuXG52YXIgbmdBdHRyUHJlZml4ZXMgPSBbJ25nLScsICdkYXRhLW5nLScsICduZzonLCAneC1uZy0nXTtcblxuZnVuY3Rpb24gZ2V0TmdBdHRyaWJ1dGUoZWxlbWVudCwgbmdBdHRyKSB7XG4gIHZhciBhdHRyLCBpLCBpaSA9IG5nQXR0clByZWZpeGVzLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGlpOyArK2kpIHtcbiAgICBhdHRyID0gbmdBdHRyUHJlZml4ZXNbaV0gKyBuZ0F0dHI7XG4gICAgaWYgKGlzU3RyaW5nKGF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyKSkpIHtcbiAgICAgIHJldHVybiBhdHRyO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gYWxsb3dBdXRvQm9vdHN0cmFwKGRvY3VtZW50KSB7XG4gIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0O1xuXG4gIGlmICghc2NyaXB0KSB7XG4gICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgLy8gSUUgZG9lcyBub3QgaGF2ZSBgZG9jdW1lbnQuY3VycmVudFNjcmlwdGBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIElmIHRoZSBgY3VycmVudFNjcmlwdGAgcHJvcGVydHkgaGFzIGJlZW4gY2xvYmJlcmVkIGp1c3QgcmV0dXJuIGZhbHNlLCBzaW5jZSB0aGlzIGluZGljYXRlcyBhIHByb2JhYmxlIGF0dGFja1xuICBpZiAoIShzY3JpcHQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTFNjcmlwdEVsZW1lbnQgfHwgc2NyaXB0IGluc3RhbmNlb2Ygd2luZG93LlNWR1NjcmlwdEVsZW1lbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGF0dHJpYnV0ZXMgPSBzY3JpcHQuYXR0cmlidXRlcztcbiAgdmFyIHNyY3MgPSBbYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ3NyYycpLCBhdHRyaWJ1dGVzLmdldE5hbWVkSXRlbSgnaHJlZicpLCBhdHRyaWJ1dGVzLmdldE5hbWVkSXRlbSgneGxpbms6aHJlZicpXTtcblxuICByZXR1cm4gc3Jjcy5ldmVyeShmdW5jdGlvbihzcmMpIHtcbiAgICBpZiAoIXNyYykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghc3JjLnZhbHVlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgbGluay5ocmVmID0gc3JjLnZhbHVlO1xuXG4gICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbiA9PT0gbGluay5vcmlnaW4pIHtcbiAgICAgIC8vIFNhbWUtb3JpZ2luIHJlc291cmNlcyBhcmUgYWx3YXlzIGFsbG93ZWQsIGV2ZW4gZm9yIG5vbi13aGl0ZWxpc3RlZCBzY2hlbWVzLlxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIERpc2FibGVkIGJvb3RzdHJhcHBpbmcgdW5sZXNzIGFuZ3VsYXIuanMgd2FzIGxvYWRlZCBmcm9tIGEga25vd24gc2NoZW1lIHVzZWQgb24gdGhlIHdlYi5cbiAgICAvLyBUaGlzIGlzIHRvIHByZXZlbnQgYW5ndWxhci5qcyBidW5kbGVkIHdpdGggYnJvd3NlciBleHRlbnNpb25zIGZyb20gYmVpbmcgdXNlZCB0byBieXBhc3MgdGhlXG4gICAgLy8gY29udGVudCBzZWN1cml0eSBwb2xpY3kgaW4gd2ViIHBhZ2VzIGFuZCBvdGhlciBicm93c2VyIGV4dGVuc2lvbnMuXG4gICAgc3dpdGNoIChsaW5rLnByb3RvY29sKSB7XG4gICAgICBjYXNlICdodHRwOic6XG4gICAgICBjYXNlICdodHRwczonOlxuICAgICAgY2FzZSAnZnRwOic6XG4gICAgICBjYXNlICdibG9iOic6XG4gICAgICBjYXNlICdmaWxlOic6XG4gICAgICBjYXNlICdkYXRhOic6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIENhY2hlZCBhcyBpdCBoYXMgdG8gcnVuIGR1cmluZyBsb2FkaW5nIHNvIHRoYXQgZG9jdW1lbnQuY3VycmVudFNjcmlwdCBpcyBhdmFpbGFibGUuXG52YXIgaXNBdXRvQm9vdHN0cmFwQWxsb3dlZCA9IGFsbG93QXV0b0Jvb3RzdHJhcCh3aW5kb3cuZG9jdW1lbnQpO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQXBwXG4gKiBAbW9kdWxlIG5nXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2FuZ3VsYXIuTW9kdWxlfSBuZ0FwcCBhbiBvcHRpb25hbCBhcHBsaWNhdGlvblxuICogICB7QGxpbmsgYW5ndWxhci5tb2R1bGUgbW9kdWxlfSBuYW1lIHRvIGxvYWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBuZ1N0cmljdERpIGlmIHRoaXMgYXR0cmlidXRlIGlzIHByZXNlbnQgb24gdGhlIGFwcCBlbGVtZW50LCB0aGUgaW5qZWN0b3Igd2lsbCBiZVxuICogICBjcmVhdGVkIGluIFwic3RyaWN0LWRpXCIgbW9kZS4gVGhpcyBtZWFucyB0aGF0IHRoZSBhcHBsaWNhdGlvbiB3aWxsIGZhaWwgdG8gaW52b2tlIGZ1bmN0aW9ucyB3aGljaFxuICogICBkbyBub3QgdXNlIGV4cGxpY2l0IGZ1bmN0aW9uIGFubm90YXRpb24gKGFuZCBhcmUgdGh1cyB1bnN1aXRhYmxlIGZvciBtaW5pZmljYXRpb24pLCBhcyBkZXNjcmliZWRcbiAqICAgaW4ge0BsaW5rIGd1aWRlL2RpIHRoZSBEZXBlbmRlbmN5IEluamVjdGlvbiBndWlkZX0sIGFuZCB1c2VmdWwgZGVidWdnaW5nIGluZm8gd2lsbCBhc3Npc3QgaW5cbiAqICAgdHJhY2tpbmcgZG93biB0aGUgcm9vdCBvZiB0aGVzZSBidWdzLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFVzZSB0aGlzIGRpcmVjdGl2ZSB0byAqKmF1dG8tYm9vdHN0cmFwKiogYW4gQW5ndWxhckpTIGFwcGxpY2F0aW9uLiBUaGUgYG5nQXBwYCBkaXJlY3RpdmVcbiAqIGRlc2lnbmF0ZXMgdGhlICoqcm9vdCBlbGVtZW50Kiogb2YgdGhlIGFwcGxpY2F0aW9uIGFuZCBpcyB0eXBpY2FsbHkgcGxhY2VkIG5lYXIgdGhlIHJvb3QgZWxlbWVudFxuICogb2YgdGhlIHBhZ2UgLSBlLmcuIG9uIHRoZSBgPGJvZHk+YCBvciBgPGh0bWw+YCB0YWdzLlxuICpcbiAqIFRoZXJlIGFyZSBhIGZldyB0aGluZ3MgdG8ga2VlcCBpbiBtaW5kIHdoZW4gdXNpbmcgYG5nQXBwYDpcbiAqIC0gb25seSBvbmUgQW5ndWxhckpTIGFwcGxpY2F0aW9uIGNhbiBiZSBhdXRvLWJvb3RzdHJhcHBlZCBwZXIgSFRNTCBkb2N1bWVudC4gVGhlIGZpcnN0IGBuZ0FwcGBcbiAqICAgZm91bmQgaW4gdGhlIGRvY3VtZW50IHdpbGwgYmUgdXNlZCB0byBkZWZpbmUgdGhlIHJvb3QgZWxlbWVudCB0byBhdXRvLWJvb3RzdHJhcCBhcyBhblxuICogICBhcHBsaWNhdGlvbi4gVG8gcnVuIG11bHRpcGxlIGFwcGxpY2F0aW9ucyBpbiBhbiBIVE1MIGRvY3VtZW50IHlvdSBtdXN0IG1hbnVhbGx5IGJvb3RzdHJhcCB0aGVtIHVzaW5nXG4gKiAgIHtAbGluayBhbmd1bGFyLmJvb3RzdHJhcH0gaW5zdGVhZC5cbiAqIC0gQW5ndWxhckpTIGFwcGxpY2F0aW9ucyBjYW5ub3QgYmUgbmVzdGVkIHdpdGhpbiBlYWNoIG90aGVyLlxuICogLSBEbyBub3QgdXNlIGEgZGlyZWN0aXZlIHRoYXQgdXNlcyB7QGxpbmsgbmcuJGNvbXBpbGUjdHJhbnNjbHVzaW9uIHRyYW5zY2x1c2lvbn0gb24gdGhlIHNhbWUgZWxlbWVudCBhcyBgbmdBcHBgLlxuICogICBUaGlzIGluY2x1ZGVzIGRpcmVjdGl2ZXMgc3VjaCBhcyB7QGxpbmsgbmcubmdJZiBgbmdJZmB9LCB7QGxpbmsgbmcubmdJbmNsdWRlIGBuZ0luY2x1ZGVgfSBhbmRcbiAqICAge0BsaW5rIG5nUm91dGUubmdWaWV3IGBuZ1ZpZXdgfS5cbiAqICAgRG9pbmcgdGhpcyBtaXNwbGFjZXMgdGhlIGFwcCB7QGxpbmsgbmcuJHJvb3RFbGVtZW50IGAkcm9vdEVsZW1lbnRgfSBhbmQgdGhlIGFwcCdzIHtAbGluayBhdXRvLiRpbmplY3RvciBpbmplY3Rvcn0sXG4gKiAgIGNhdXNpbmcgYW5pbWF0aW9ucyB0byBzdG9wIHdvcmtpbmcgYW5kIG1ha2luZyB0aGUgaW5qZWN0b3IgaW5hY2Nlc3NpYmxlIGZyb20gb3V0c2lkZSB0aGUgYXBwLlxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSBhbiAqKkFuZ3VsYXJKUyBtb2R1bGUqKiB0byBiZSB1c2VkIGFzIHRoZSByb290IG1vZHVsZSBmb3IgdGhlIGFwcGxpY2F0aW9uLiAgVGhpc1xuICogbW9kdWxlIHdpbGwgYmUgbG9hZGVkIGludG8gdGhlIHtAbGluayBhdXRvLiRpbmplY3Rvcn0gd2hlbiB0aGUgYXBwbGljYXRpb24gaXMgYm9vdHN0cmFwcGVkLiBJdFxuICogc2hvdWxkIGNvbnRhaW4gdGhlIGFwcGxpY2F0aW9uIGNvZGUgbmVlZGVkIG9yIGhhdmUgZGVwZW5kZW5jaWVzIG9uIG90aGVyIG1vZHVsZXMgdGhhdCB3aWxsXG4gKiBjb250YWluIHRoZSBjb2RlLiBTZWUge0BsaW5rIGFuZ3VsYXIubW9kdWxlfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBJbiB0aGUgZXhhbXBsZSBiZWxvdyBpZiB0aGUgYG5nQXBwYCBkaXJlY3RpdmUgd2VyZSBub3QgcGxhY2VkIG9uIHRoZSBgaHRtbGAgZWxlbWVudCB0aGVuIHRoZVxuICogZG9jdW1lbnQgd291bGQgbm90IGJlIGNvbXBpbGVkLCB0aGUgYEFwcENvbnRyb2xsZXJgIHdvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgYW5kIHRoZSBge3sgYStiIH19YFxuICogd291bGQgbm90IGJlIHJlc29sdmVkIHRvIGAzYC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyBTaW1wbGUgVXNhZ2VcbiAqXG4gKiBgbmdBcHBgIGlzIHRoZSBlYXNpZXN0LCBhbmQgbW9zdCBjb21tb24gd2F5IHRvIGJvb3RzdHJhcCBhbiBhcHBsaWNhdGlvbi5cbiAqXG4gPGV4YW1wbGUgbW9kdWxlPVwibmdBcHBEZW1vXCIgbmFtZT1cIm5nLWFwcFwiPlxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgIDxkaXYgbmctY29udHJvbGxlcj1cIm5nQXBwRGVtb0NvbnRyb2xsZXJcIj5cbiAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxuICAgPC9kaXY+XG4gICA8L2ZpbGU+XG4gICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICBhbmd1bGFyLm1vZHVsZSgnbmdBcHBEZW1vJywgW10pLmNvbnRyb2xsZXIoJ25nQXBwRGVtb0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgJHNjb3BlLmEgPSAxO1xuICAgICAkc2NvcGUuYiA9IDI7XG4gICB9KTtcbiAgIDwvZmlsZT5cbiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIyMgV2l0aCBgbmdTdHJpY3REaWBcbiAqXG4gKiBVc2luZyBgbmdTdHJpY3REaWAsIHlvdSB3b3VsZCBzZWUgc29tZXRoaW5nIGxpa2UgdGhpczpcbiAqXG4gPGV4YW1wbGUgbmctYXBwLWluY2x1ZGVkPVwidHJ1ZVwiIG5hbWU9XCJzdHJpY3QtZGlcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICA8ZGl2IG5nLWFwcD1cIm5nQXBwU3RyaWN0RGVtb1wiIG5nLXN0cmljdC1kaT5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJHb29kQ29udHJvbGxlcjFcIj5cbiAgICAgICAgICAgSSBjYW4gYWRkOiB7e2F9fSArIHt7Yn19ID0gIHt7IGErYiB9fVxuXG4gICAgICAgICAgIDxwPlRoaXMgcmVuZGVycyBiZWNhdXNlIHRoZSBjb250cm9sbGVyIGRvZXMgbm90IGZhaWwgdG9cbiAgICAgICAgICAgICAgaW5zdGFudGlhdGUsIGJ5IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gc3R5bGUgKHNlZVxuICAgICAgICAgICAgICBzY3JpcHQuanMgZm9yIGRldGFpbHMpXG4gICAgICAgICAgIDwvcD5cbiAgICAgICA8L2Rpdj5cblxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkdvb2RDb250cm9sbGVyMlwiPlxuICAgICAgICAgICBOYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJuYW1lXCI+PGJyIC8+XG4gICAgICAgICAgIEhlbGxvLCB7e25hbWV9fSFcblxuICAgICAgICAgICA8cD5UaGlzIHJlbmRlcnMgYmVjYXVzZSB0aGUgY29udHJvbGxlciBkb2VzIG5vdCBmYWlsIHRvXG4gICAgICAgICAgICAgIGluc3RhbnRpYXRlLCBieSB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9uIHN0eWxlXG4gICAgICAgICAgICAgIChzZWUgc2NyaXB0LmpzIGZvciBkZXRhaWxzKVxuICAgICAgICAgICA8L3A+XG4gICAgICAgPC9kaXY+XG5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJCYWRDb250cm9sbGVyXCI+XG4gICAgICAgICAgIEkgY2FuIGFkZDoge3thfX0gKyB7e2J9fSA9ICB7eyBhK2IgfX1cblxuICAgICAgICAgICA8cD5UaGUgY29udHJvbGxlciBjb3VsZCBub3QgYmUgaW5zdGFudGlhdGVkLCBkdWUgdG8gcmVseWluZ1xuICAgICAgICAgICAgICBvbiBhdXRvbWF0aWMgZnVuY3Rpb24gYW5ub3RhdGlvbnMgKHdoaWNoIGFyZSBkaXNhYmxlZCBpblxuICAgICAgICAgICAgICBzdHJpY3QgbW9kZSkuIEFzIHN1Y2gsIHRoZSBjb250ZW50IG9mIHRoaXMgc2VjdGlvbiBpcyBub3RcbiAgICAgICAgICAgICAgaW50ZXJwb2xhdGVkLCBhbmQgdGhlcmUgc2hvdWxkIGJlIGFuIGVycm9yIGluIHlvdXIgd2ViIGNvbnNvbGUuXG4gICAgICAgICAgIDwvcD5cbiAgICAgICA8L2Rpdj5cbiAgIDwvZGl2PlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgYW5ndWxhci5tb2R1bGUoJ25nQXBwU3RyaWN0RGVtbycsIFtdKVxuICAgICAvLyBCYWRDb250cm9sbGVyIHdpbGwgZmFpbCB0byBpbnN0YW50aWF0ZSwgZHVlIHRvIHJlbHlpbmcgb24gYXV0b21hdGljIGZ1bmN0aW9uIGFubm90YXRpb24sXG4gICAgIC8vIHJhdGhlciB0aGFuIGFuIGV4cGxpY2l0IGFubm90YXRpb25cbiAgICAgLmNvbnRyb2xsZXIoJ0JhZENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAkc2NvcGUuYSA9IDE7XG4gICAgICAgJHNjb3BlLmIgPSAyO1xuICAgICB9KVxuICAgICAvLyBVbmxpa2UgQmFkQ29udHJvbGxlciwgR29vZENvbnRyb2xsZXIxIGFuZCBHb29kQ29udHJvbGxlcjIgd2lsbCBub3QgZmFpbCB0byBiZSBpbnN0YW50aWF0ZWQsXG4gICAgIC8vIGR1ZSB0byB1c2luZyBleHBsaWNpdCBhbm5vdGF0aW9ucyB1c2luZyB0aGUgYXJyYXkgc3R5bGUgYW5kICRpbmplY3QgcHJvcGVydHksIHJlc3BlY3RpdmVseS5cbiAgICAgLmNvbnRyb2xsZXIoJ0dvb2RDb250cm9sbGVyMScsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgJHNjb3BlLmEgPSAxO1xuICAgICAgICRzY29wZS5iID0gMjtcbiAgICAgfV0pXG4gICAgIC5jb250cm9sbGVyKCdHb29kQ29udHJvbGxlcjInLCBHb29kQ29udHJvbGxlcjIpO1xuICAgICBmdW5jdGlvbiBHb29kQ29udHJvbGxlcjIoJHNjb3BlKSB7XG4gICAgICAgJHNjb3BlLm5hbWUgPSAnV29ybGQnO1xuICAgICB9XG4gICAgIEdvb2RDb250cm9sbGVyMi4kaW5qZWN0ID0gWyckc2NvcGUnXTtcbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgIGRpdltuZy1jb250cm9sbGVyXSB7XG4gICAgICAgbWFyZ2luLWJvdHRvbTogMWVtO1xuICAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICBib3JkZXI6IDFweCBzb2xpZDtcbiAgICAgICBwYWRkaW5nOiAuNWVtO1xuICAgfVxuICAgZGl2W25nLWNvbnRyb2xsZXJePUdvb2RdIHtcbiAgICAgICBib3JkZXItY29sb3I6ICNkNmU5YzY7XG4gICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2RmZjBkODtcbiAgICAgICBjb2xvcjogIzNjNzYzZDtcbiAgIH1cbiAgIGRpdltuZy1jb250cm9sbGVyXj1CYWRdIHtcbiAgICAgICBib3JkZXItY29sb3I6ICNlYmNjZDE7XG4gICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YyZGVkZTtcbiAgICAgICBjb2xvcjogI2E5NDQ0MjtcbiAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgfVxuICAgPC9maWxlPlxuIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gYW5ndWxhckluaXQoZWxlbWVudCwgYm9vdHN0cmFwKSB7XG4gIHZhciBhcHBFbGVtZW50LFxuICAgICAgbW9kdWxlLFxuICAgICAgY29uZmlnID0ge307XG5cbiAgLy8gVGhlIGVsZW1lbnQgYGVsZW1lbnRgIGhhcyBwcmlvcml0eSBvdmVyIGFueSBvdGhlciBlbGVtZW50LlxuICBmb3JFYWNoKG5nQXR0clByZWZpeGVzLCBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgbmFtZSA9IHByZWZpeCArICdhcHAnO1xuXG4gICAgaWYgKCFhcHBFbGVtZW50ICYmIGVsZW1lbnQuaGFzQXR0cmlidXRlICYmIGVsZW1lbnQuaGFzQXR0cmlidXRlKG5hbWUpKSB7XG4gICAgICBhcHBFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIG1vZHVsZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgfSk7XG4gIGZvckVhY2gobmdBdHRyUHJlZml4ZXMsIGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIHZhciBuYW1lID0gcHJlZml4ICsgJ2FwcCc7XG4gICAgdmFyIGNhbmRpZGF0ZTtcblxuICAgIGlmICghYXBwRWxlbWVudCAmJiAoY2FuZGlkYXRlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbJyArIG5hbWUucmVwbGFjZSgnOicsICdcXFxcOicpICsgJ10nKSkpIHtcbiAgICAgIGFwcEVsZW1lbnQgPSBjYW5kaWRhdGU7XG4gICAgICBtb2R1bGUgPSBjYW5kaWRhdGUuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgIH1cbiAgfSk7XG4gIGlmIChhcHBFbGVtZW50KSB7XG4gICAgaWYgKCFpc0F1dG9Cb290c3RyYXBBbGxvd2VkKSB7XG4gICAgICB3aW5kb3cuY29uc29sZS5lcnJvcignQW5ndWxhcjogZGlzYWJsaW5nIGF1dG9tYXRpYyBib290c3RyYXAuIDxzY3JpcHQ+IHByb3RvY29sIGluZGljYXRlcyAnICtcbiAgICAgICAgICAnYW4gZXh0ZW5zaW9uLCBkb2N1bWVudC5sb2NhdGlvbi5ocmVmIGRvZXMgbm90IG1hdGNoLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25maWcuc3RyaWN0RGkgPSBnZXROZ0F0dHJpYnV0ZShhcHBFbGVtZW50LCAnc3RyaWN0LWRpJykgIT09IG51bGw7XG4gICAgYm9vdHN0cmFwKGFwcEVsZW1lbnQsIG1vZHVsZSA/IFttb2R1bGVdIDogW10sIGNvbmZpZyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuYm9vdHN0cmFwXG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIG1hbnVhbGx5IHN0YXJ0IHVwIGFuZ3VsYXIgYXBwbGljYXRpb24uXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUge0BsaW5rIGd1aWRlL2Jvb3RzdHJhcCBCb290c3RyYXAgZ3VpZGV9LlxuICpcbiAqIEFuZ3VsYXIgd2lsbCBkZXRlY3QgaWYgaXQgaGFzIGJlZW4gbG9hZGVkIGludG8gdGhlIGJyb3dzZXIgbW9yZSB0aGFuIG9uY2UgYW5kIG9ubHkgYWxsb3cgdGhlXG4gKiBmaXJzdCBsb2FkZWQgc2NyaXB0IHRvIGJlIGJvb3RzdHJhcHBlZCBhbmQgd2lsbCByZXBvcnQgYSB3YXJuaW5nIHRvIHRoZSBicm93c2VyIGNvbnNvbGUgZm9yXG4gKiBlYWNoIG9mIHRoZSBzdWJzZXF1ZW50IHNjcmlwdHMuIFRoaXMgcHJldmVudHMgc3RyYW5nZSByZXN1bHRzIGluIGFwcGxpY2F0aW9ucywgd2hlcmUgb3RoZXJ3aXNlXG4gKiBtdWx0aXBsZSBpbnN0YW5jZXMgb2YgQW5ndWxhciB0cnkgdG8gd29yayBvbiB0aGUgRE9NLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogUHJvdHJhY3RvciBiYXNlZCBlbmQtdG8tZW5kIHRlc3RzIGNhbm5vdCB1c2UgdGhpcyBmdW5jdGlvbiB0byBib290c3RyYXAgbWFudWFsbHkuXG4gKiBUaGV5IG11c3QgdXNlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9LlxuICogPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBEbyBub3QgYm9vdHN0cmFwIHRoZSBhcHAgb24gYW4gZWxlbWVudCB3aXRoIGEgZGlyZWN0aXZlIHRoYXQgdXNlcyB7QGxpbmsgbmcuJGNvbXBpbGUjdHJhbnNjbHVzaW9uIHRyYW5zY2x1c2lvbn0sXG4gKiBzdWNoIGFzIHtAbGluayBuZy5uZ0lmIGBuZ0lmYH0sIHtAbGluayBuZy5uZ0luY2x1ZGUgYG5nSW5jbHVkZWB9IGFuZCB7QGxpbmsgbmdSb3V0ZS5uZ1ZpZXcgYG5nVmlld2B9LlxuICogRG9pbmcgdGhpcyBtaXNwbGFjZXMgdGhlIGFwcCB7QGxpbmsgbmcuJHJvb3RFbGVtZW50IGAkcm9vdEVsZW1lbnRgfSBhbmQgdGhlIGFwcCdzIHtAbGluayBhdXRvLiRpbmplY3RvciBpbmplY3Rvcn0sXG4gKiBjYXVzaW5nIGFuaW1hdGlvbnMgdG8gc3RvcCB3b3JraW5nIGFuZCBtYWtpbmcgdGhlIGluamVjdG9yIGluYWNjZXNzaWJsZSBmcm9tIG91dHNpZGUgdGhlIGFwcC5cbiAqIDwvZGl2PlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhZG9jdHlwZSBodG1sPlxuICogPGh0bWw+XG4gKiA8Ym9keT5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIldlbGNvbWVDb250cm9sbGVyXCI+XG4gKiAgIHt7Z3JlZXRpbmd9fVxuICogPC9kaXY+XG4gKlxuICogPHNjcmlwdCBzcmM9XCJhbmd1bGFyLmpzXCI+PC9zY3JpcHQ+XG4gKiA8c2NyaXB0PlxuICogICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2RlbW8nLCBbXSlcbiAqICAgLmNvbnRyb2xsZXIoJ1dlbGNvbWVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAkc2NvcGUuZ3JlZXRpbmcgPSAnV2VsY29tZSEnO1xuICogICB9KTtcbiAqICAgYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFsnZGVtbyddKTtcbiAqIDwvc2NyaXB0PlxuICogPC9ib2R5PlxuICogPC9odG1sPlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IERPTSBlbGVtZW50IHdoaWNoIGlzIHRoZSByb290IG9mIGFuZ3VsYXIgYXBwbGljYXRpb24uXG4gKiBAcGFyYW0ge0FycmF5PFN0cmluZ3xGdW5jdGlvbnxBcnJheT49fSBtb2R1bGVzIGFuIGFycmF5IG9mIG1vZHVsZXMgdG8gbG9hZCBpbnRvIHRoZSBhcHBsaWNhdGlvbi5cbiAqICAgICBFYWNoIGl0ZW0gaW4gdGhlIGFycmF5IHNob3VsZCBiZSB0aGUgbmFtZSBvZiBhIHByZWRlZmluZWQgbW9kdWxlIG9yIGEgKERJIGFubm90YXRlZClcbiAqICAgICBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCBieSB0aGUgaW5qZWN0b3IgYXMgYSBgY29uZmlnYCBibG9jay5cbiAqICAgICBTZWU6IHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfVxuICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgYW4gb2JqZWN0IGZvciBkZWZpbmluZyBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBhcHBsaWNhdGlvbi4gVGhlXG4gKiAgICAgZm9sbG93aW5nIGtleXMgYXJlIHN1cHBvcnRlZDpcbiAqXG4gKiAqIGBzdHJpY3REaWAgLSBkaXNhYmxlIGF1dG9tYXRpYyBmdW5jdGlvbiBhbm5vdGF0aW9uIGZvciB0aGUgYXBwbGljYXRpb24uIFRoaXMgaXMgbWVhbnQgdG9cbiAqICAgYXNzaXN0IGluIGZpbmRpbmcgYnVncyB3aGljaCBicmVhayBtaW5pZmllZCBjb2RlLiBEZWZhdWx0cyB0byBgZmFsc2VgLlxuICpcbiAqIEByZXR1cm5zIHthdXRvLiRpbmplY3Rvcn0gUmV0dXJucyB0aGUgbmV3bHkgY3JlYXRlZCBpbmplY3RvciBmb3IgdGhpcyBhcHAuXG4gKi9cbmZ1bmN0aW9uIGJvb3RzdHJhcChlbGVtZW50LCBtb2R1bGVzLCBjb25maWcpIHtcbiAgaWYgKCFpc09iamVjdChjb25maWcpKSBjb25maWcgPSB7fTtcbiAgdmFyIGRlZmF1bHRDb25maWcgPSB7XG4gICAgc3RyaWN0RGk6IGZhbHNlXG4gIH07XG4gIGNvbmZpZyA9IGV4dGVuZChkZWZhdWx0Q29uZmlnLCBjb25maWcpO1xuICB2YXIgZG9Cb290c3RyYXAgPSBmdW5jdGlvbigpIHtcbiAgICBlbGVtZW50ID0ganFMaXRlKGVsZW1lbnQpO1xuXG4gICAgaWYgKGVsZW1lbnQuaW5qZWN0b3IoKSkge1xuICAgICAgdmFyIHRhZyA9IChlbGVtZW50WzBdID09PSB3aW5kb3cuZG9jdW1lbnQpID8gJ2RvY3VtZW50JyA6IHN0YXJ0aW5nVGFnKGVsZW1lbnQpO1xuICAgICAgLy8gRW5jb2RlIGFuZ2xlIGJyYWNrZXRzIHRvIHByZXZlbnQgaW5wdXQgZnJvbSBiZWluZyBzYW5pdGl6ZWQgdG8gZW1wdHkgc3RyaW5nICM4NjgzLlxuICAgICAgdGhyb3cgbmdNaW5FcnIoXG4gICAgICAgICAgJ2J0c3RycGQnLFxuICAgICAgICAgICdBcHAgYWxyZWFkeSBib290c3RyYXBwZWQgd2l0aCB0aGlzIGVsZW1lbnQgXFwnezB9XFwnJyxcbiAgICAgICAgICB0YWcucmVwbGFjZSgvPC8sJyZsdDsnKS5yZXBsYWNlKC8+LywnJmd0OycpKTtcbiAgICB9XG5cbiAgICBtb2R1bGVzID0gbW9kdWxlcyB8fCBbXTtcbiAgICBtb2R1bGVzLnVuc2hpZnQoWyckcHJvdmlkZScsIGZ1bmN0aW9uKCRwcm92aWRlKSB7XG4gICAgICAkcHJvdmlkZS52YWx1ZSgnJHJvb3RFbGVtZW50JywgZWxlbWVudCk7XG4gICAgfV0pO1xuXG4gICAgaWYgKGNvbmZpZy5kZWJ1Z0luZm9FbmFibGVkKSB7XG4gICAgICAvLyBQdXNoaW5nIHNvIHRoYXQgdGhpcyBvdmVycmlkZXMgYGRlYnVnSW5mb0VuYWJsZWRgIHNldHRpbmcgZGVmaW5lZCBpbiB1c2VyJ3MgYG1vZHVsZXNgLlxuICAgICAgbW9kdWxlcy5wdXNoKFsnJGNvbXBpbGVQcm92aWRlcicsIGZ1bmN0aW9uKCRjb21waWxlUHJvdmlkZXIpIHtcbiAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKHRydWUpO1xuICAgICAgfV0pO1xuICAgIH1cblxuICAgIG1vZHVsZXMudW5zaGlmdCgnbmcnKTtcbiAgICB2YXIgaW5qZWN0b3IgPSBjcmVhdGVJbmplY3Rvcihtb2R1bGVzLCBjb25maWcuc3RyaWN0RGkpO1xuICAgIGluamVjdG9yLmludm9rZShbJyRyb290U2NvcGUnLCAnJHJvb3RFbGVtZW50JywgJyRjb21waWxlJywgJyRpbmplY3RvcicsXG4gICAgICAgZnVuY3Rpb24gYm9vdHN0cmFwQXBwbHkoc2NvcGUsIGVsZW1lbnQsIGNvbXBpbGUsIGluamVjdG9yKSB7XG4gICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50LmRhdGEoJyRpbmplY3RvcicsIGluamVjdG9yKTtcbiAgICAgICAgICBjb21waWxlKGVsZW1lbnQpKHNjb3BlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XVxuICAgICk7XG4gICAgcmV0dXJuIGluamVjdG9yO1xuICB9O1xuXG4gIHZhciBOR19FTkFCTEVfREVCVUdfSU5GTyA9IC9eTkdfRU5BQkxFX0RFQlVHX0lORk8hLztcbiAgdmFyIE5HX0RFRkVSX0JPT1RTVFJBUCA9IC9eTkdfREVGRVJfQk9PVFNUUkFQIS87XG5cbiAgaWYgKHdpbmRvdyAmJiBOR19FTkFCTEVfREVCVUdfSU5GTy50ZXN0KHdpbmRvdy5uYW1lKSkge1xuICAgIGNvbmZpZy5kZWJ1Z0luZm9FbmFibGVkID0gdHJ1ZTtcbiAgICB3aW5kb3cubmFtZSA9IHdpbmRvdy5uYW1lLnJlcGxhY2UoTkdfRU5BQkxFX0RFQlVHX0lORk8sICcnKTtcbiAgfVxuXG4gIGlmICh3aW5kb3cgJiYgIU5HX0RFRkVSX0JPT1RTVFJBUC50ZXN0KHdpbmRvdy5uYW1lKSkge1xuICAgIHJldHVybiBkb0Jvb3RzdHJhcCgpO1xuICB9XG5cbiAgd2luZG93Lm5hbWUgPSB3aW5kb3cubmFtZS5yZXBsYWNlKE5HX0RFRkVSX0JPT1RTVFJBUCwgJycpO1xuICBhbmd1bGFyLnJlc3VtZUJvb3RzdHJhcCA9IGZ1bmN0aW9uKGV4dHJhTW9kdWxlcykge1xuICAgIGZvckVhY2goZXh0cmFNb2R1bGVzLCBmdW5jdGlvbihtb2R1bGUpIHtcbiAgICAgIG1vZHVsZXMucHVzaChtb2R1bGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBkb0Jvb3RzdHJhcCgpO1xuICB9O1xuXG4gIGlmIChpc0Z1bmN0aW9uKGFuZ3VsYXIucmVzdW1lRGVmZXJyZWRCb290c3RyYXApKSB7XG4gICAgYW5ndWxhci5yZXN1bWVEZWZlcnJlZEJvb3RzdHJhcCgpO1xuICB9XG59XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbmFtZSBhbmd1bGFyLnJlbG9hZFdpdGhEZWJ1Z0luZm9cbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoaXMgZnVuY3Rpb24gdG8gcmVsb2FkIHRoZSBjdXJyZW50IGFwcGxpY2F0aW9uIHdpdGggZGVidWcgaW5mb3JtYXRpb24gdHVybmVkIG9uLlxuICogVGhpcyB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYSBjYWxsIHRvIGAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQoZmFsc2UpYC5cbiAqXG4gKiBTZWUge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGVidWdJbmZvRW5hYmxlZH0gZm9yIG1vcmUuXG4gKi9cbmZ1bmN0aW9uIHJlbG9hZFdpdGhEZWJ1Z0luZm8oKSB7XG4gIHdpbmRvdy5uYW1lID0gJ05HX0VOQUJMRV9ERUJVR19JTkZPIScgKyB3aW5kb3cubmFtZTtcbiAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xufVxuXG4vKipcbiAqIEBuYW1lIGFuZ3VsYXIuZ2V0VGVzdGFiaWxpdHlcbiAqIEBtb2R1bGUgbmdcbiAqIEBkZXNjcmlwdGlvblxuICogR2V0IHRoZSB0ZXN0YWJpbGl0eSBzZXJ2aWNlIGZvciB0aGUgaW5zdGFuY2Ugb2YgQW5ndWxhciBvbiB0aGUgZ2l2ZW5cbiAqIGVsZW1lbnQuXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgRE9NIGVsZW1lbnQgd2hpY2ggaXMgdGhlIHJvb3Qgb2YgYW5ndWxhciBhcHBsaWNhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0VGVzdGFiaWxpdHkocm9vdEVsZW1lbnQpIHtcbiAgdmFyIGluamVjdG9yID0gYW5ndWxhci5lbGVtZW50KHJvb3RFbGVtZW50KS5pbmplY3RvcigpO1xuICBpZiAoIWluamVjdG9yKSB7XG4gICAgdGhyb3cgbmdNaW5FcnIoJ3Rlc3QnLFxuICAgICAgJ25vIGluamVjdG9yIGZvdW5kIGZvciBlbGVtZW50IGFyZ3VtZW50IHRvIGdldFRlc3RhYmlsaXR5Jyk7XG4gIH1cbiAgcmV0dXJuIGluamVjdG9yLmdldCgnJCR0ZXN0YWJpbGl0eScpO1xufVxuXG52YXIgU05BS0VfQ0FTRV9SRUdFWFAgPSAvW0EtWl0vZztcbmZ1bmN0aW9uIHNuYWtlX2Nhc2UobmFtZSwgc2VwYXJhdG9yKSB7XG4gIHNlcGFyYXRvciA9IHNlcGFyYXRvciB8fCAnXyc7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoU05BS0VfQ0FTRV9SRUdFWFAsIGZ1bmN0aW9uKGxldHRlciwgcG9zKSB7XG4gICAgcmV0dXJuIChwb3MgPyBzZXBhcmF0b3IgOiAnJykgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcbiAgfSk7XG59XG5cbnZhciBiaW5kSlF1ZXJ5RmlyZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIGJpbmRKUXVlcnkoKSB7XG4gIHZhciBvcmlnaW5hbENsZWFuRGF0YTtcblxuICBpZiAoYmluZEpRdWVyeUZpcmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gYmluZCB0byBqUXVlcnkgaWYgcHJlc2VudDtcbiAgdmFyIGpxTmFtZSA9IGpxKCk7XG4gIGpRdWVyeSA9IGlzVW5kZWZpbmVkKGpxTmFtZSkgPyB3aW5kb3cualF1ZXJ5IDogICAvLyB1c2UgalF1ZXJ5IChpZiBwcmVzZW50KVxuICAgICAgICAgICAhanFOYW1lICAgICAgICAgICAgID8gdW5kZWZpbmVkICAgICA6ICAgLy8gdXNlIGpxTGl0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93W2pxTmFtZV07ICAgLy8gdXNlIGpRdWVyeSBzcGVjaWZpZWQgYnkgYG5nSnFgXG5cbiAgLy8gVXNlIGpRdWVyeSBpZiBpdCBleGlzdHMgd2l0aCBwcm9wZXIgZnVuY3Rpb25hbGl0eSwgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gdXMuXG4gIC8vIEFuZ3VsYXIgMS4yKyByZXF1aXJlcyBqUXVlcnkgMS43KyBmb3Igb24oKS9vZmYoKSBzdXBwb3J0LlxuICAvLyBBbmd1bGFyIDEuMysgdGVjaG5pY2FsbHkgcmVxdWlyZXMgYXQgbGVhc3QgalF1ZXJ5IDIuMSsgYnV0IGl0IG1heSB3b3JrIHdpdGggb2xkZXJcbiAgLy8gdmVyc2lvbnMuIEl0IHdpbGwgbm90IHdvcmsgZm9yIHN1cmUgd2l0aCBqUXVlcnkgPDEuNywgdGhvdWdoLlxuICBpZiAoalF1ZXJ5ICYmIGpRdWVyeS5mbi5vbikge1xuICAgIGpxTGl0ZSA9IGpRdWVyeTtcbiAgICBleHRlbmQoalF1ZXJ5LmZuLCB7XG4gICAgICBzY29wZTogSlFMaXRlUHJvdG90eXBlLnNjb3BlLFxuICAgICAgaXNvbGF0ZVNjb3BlOiBKUUxpdGVQcm90b3R5cGUuaXNvbGF0ZVNjb3BlLFxuICAgICAgY29udHJvbGxlcjogLyoqIEB0eXBlIHs/fSAqLyAoSlFMaXRlUHJvdG90eXBlKS5jb250cm9sbGVyLFxuICAgICAgaW5qZWN0b3I6IEpRTGl0ZVByb3RvdHlwZS5pbmplY3RvcixcbiAgICAgIGluaGVyaXRlZERhdGE6IEpRTGl0ZVByb3RvdHlwZS5pbmhlcml0ZWREYXRhXG4gICAgfSk7XG5cbiAgICAvLyBBbGwgbm9kZXMgcmVtb3ZlZCBmcm9tIHRoZSBET00gdmlhIHZhcmlvdXMgalF1ZXJ5IEFQSXMgbGlrZSAucmVtb3ZlKClcbiAgICAvLyBhcmUgcGFzc2VkIHRocm91Z2ggalF1ZXJ5LmNsZWFuRGF0YS4gTW9ua2V5LXBhdGNoIHRoaXMgbWV0aG9kIHRvIGZpcmVcbiAgICAvLyB0aGUgJGRlc3Ryb3kgZXZlbnQgb24gYWxsIHJlbW92ZWQgbm9kZXMuXG4gICAgb3JpZ2luYWxDbGVhbkRhdGEgPSBqUXVlcnkuY2xlYW5EYXRhO1xuICAgIGpRdWVyeS5jbGVhbkRhdGEgPSBmdW5jdGlvbihlbGVtcykge1xuICAgICAgdmFyIGV2ZW50cztcbiAgICAgIGZvciAodmFyIGkgPSAwLCBlbGVtOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKyspIHtcbiAgICAgICAgZXZlbnRzID0galF1ZXJ5Ll9kYXRhKGVsZW0sICdldmVudHMnKTtcbiAgICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHMuJGRlc3Ryb3kpIHtcbiAgICAgICAgICBqUXVlcnkoZWxlbSkudHJpZ2dlckhhbmRsZXIoJyRkZXN0cm95Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG9yaWdpbmFsQ2xlYW5EYXRhKGVsZW1zKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGpxTGl0ZSA9IEpRTGl0ZTtcbiAgfVxuXG4gIGFuZ3VsYXIuZWxlbWVudCA9IGpxTGl0ZTtcblxuICAvLyBQcmV2ZW50IGRvdWJsZS1wcm94eWluZy5cbiAgYmluZEpRdWVyeUZpcmVkID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiB0aHJvdyBlcnJvciBpZiB0aGUgYXJndW1lbnQgaXMgZmFsc3kuXG4gKi9cbmZ1bmN0aW9uIGFzc2VydEFyZyhhcmcsIG5hbWUsIHJlYXNvbikge1xuICBpZiAoIWFyZykge1xuICAgIHRocm93IG5nTWluRXJyKCdhcmVxJywgJ0FyZ3VtZW50IFxcJ3swfVxcJyBpcyB7MX0nLCAobmFtZSB8fCAnPycpLCAocmVhc29uIHx8ICdyZXF1aXJlZCcpKTtcbiAgfVxuICByZXR1cm4gYXJnO1xufVxuXG5mdW5jdGlvbiBhc3NlcnRBcmdGbihhcmcsIG5hbWUsIGFjY2VwdEFycmF5QW5ub3RhdGlvbikge1xuICBpZiAoYWNjZXB0QXJyYXlBbm5vdGF0aW9uICYmIGlzQXJyYXkoYXJnKSkge1xuICAgICAgYXJnID0gYXJnW2FyZy5sZW5ndGggLSAxXTtcbiAgfVxuXG4gIGFzc2VydEFyZyhpc0Z1bmN0aW9uKGFyZyksIG5hbWUsICdub3QgYSBmdW5jdGlvbiwgZ290ICcgK1xuICAgICAgKGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyA/IGFyZy5jb25zdHJ1Y3Rvci5uYW1lIHx8ICdPYmplY3QnIDogdHlwZW9mIGFyZykpO1xuICByZXR1cm4gYXJnO1xufVxuXG4vKipcbiAqIHRocm93IGVycm9yIGlmIHRoZSBuYW1lIGdpdmVuIGlzIGhhc093blByb3BlcnR5XG4gKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgICAgdGhlIG5hbWUgdG8gdGVzdFxuICogQHBhcmFtICB7U3RyaW5nfSBjb250ZXh0IHRoZSBjb250ZXh0IGluIHdoaWNoIHRoZSBuYW1lIGlzIHVzZWQsIHN1Y2ggYXMgbW9kdWxlIG9yIGRpcmVjdGl2ZVxuICovXG5mdW5jdGlvbiBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCBjb250ZXh0KSB7XG4gIGlmIChuYW1lID09PSAnaGFzT3duUHJvcGVydHknKSB7XG4gICAgdGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCAnaGFzT3duUHJvcGVydHkgaXMgbm90IGEgdmFsaWQgezB9IG5hbWUnLCBjb250ZXh0KTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybiB0aGUgdmFsdWUgYWNjZXNzaWJsZSBmcm9tIHRoZSBvYmplY3QgYnkgcGF0aC4gQW55IHVuZGVmaW5lZCB0cmF2ZXJzYWxzIGFyZSBpZ25vcmVkXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIHN0YXJ0aW5nIG9iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggcGF0aCB0byB0cmF2ZXJzZVxuICogQHBhcmFtIHtib29sZWFufSBbYmluZEZuVG9TY29wZT10cnVlXVxuICogQHJldHVybnMge09iamVjdH0gdmFsdWUgYXMgYWNjZXNzaWJsZSBieSBwYXRoXG4gKi9cbi8vVE9ETyhtaXNrbyk6IHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmVtb3ZlZFxuZnVuY3Rpb24gZ2V0dGVyKG9iaiwgcGF0aCwgYmluZEZuVG9TY29wZSkge1xuICBpZiAoIXBhdGgpIHJldHVybiBvYmo7XG4gIHZhciBrZXlzID0gcGF0aC5zcGxpdCgnLicpO1xuICB2YXIga2V5O1xuICB2YXIgbGFzdEluc3RhbmNlID0gb2JqO1xuICB2YXIgbGVuID0ga2V5cy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGtleSA9IGtleXNbaV07XG4gICAgaWYgKG9iaikge1xuICAgICAgb2JqID0gKGxhc3RJbnN0YW5jZSA9IG9iailba2V5XTtcbiAgICB9XG4gIH1cbiAgaWYgKCFiaW5kRm5Ub1Njb3BlICYmIGlzRnVuY3Rpb24ob2JqKSkge1xuICAgIHJldHVybiBiaW5kKGxhc3RJbnN0YW5jZSwgb2JqKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgRE9NIHNpYmxpbmdzIGJldHdlZW4gdGhlIGZpcnN0IGFuZCBsYXN0IG5vZGUgaW4gdGhlIGdpdmVuIGFycmF5LlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgbGlrZSBvYmplY3RcbiAqIEByZXR1cm5zIHtBcnJheX0gdGhlIGlucHV0dGVkIG9iamVjdCBvciBhIGpxTGl0ZSBjb2xsZWN0aW9uIGNvbnRhaW5pbmcgdGhlIG5vZGVzXG4gKi9cbmZ1bmN0aW9uIGdldEJsb2NrTm9kZXMobm9kZXMpIHtcbiAgLy8gVE9ETyhwZXJmKTogdXBkYXRlIGBub2Rlc2AgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBvYmplY3Q/XG4gIHZhciBub2RlID0gbm9kZXNbMF07XG4gIHZhciBlbmROb2RlID0gbm9kZXNbbm9kZXMubGVuZ3RoIC0gMV07XG4gIHZhciBibG9ja05vZGVzO1xuXG4gIGZvciAodmFyIGkgPSAxOyBub2RlICE9PSBlbmROb2RlICYmIChub2RlID0gbm9kZS5uZXh0U2libGluZyk7IGkrKykge1xuICAgIGlmIChibG9ja05vZGVzIHx8IG5vZGVzW2ldICE9PSBub2RlKSB7XG4gICAgICBpZiAoIWJsb2NrTm9kZXMpIHtcbiAgICAgICAgYmxvY2tOb2RlcyA9IGpxTGl0ZShzbGljZS5jYWxsKG5vZGVzLCAwLCBpKSk7XG4gICAgICB9XG4gICAgICBibG9ja05vZGVzLnB1c2gobm9kZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJsb2NrTm9kZXMgfHwgbm9kZXM7XG59XG5cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG9iamVjdCB3aXRob3V0IGEgcHJvdG90eXBlLiBUaGlzIG9iamVjdCBpcyB1c2VmdWwgZm9yIGxvb2t1cCB3aXRob3V0IGhhdmluZyB0b1xuICogZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGljYWxseSBpbmhlcml0ZWQgcHJvcGVydGllcyB2aWEgaGFzT3duUHJvcGVydHkuXG4gKlxuICogUmVsYXRlZCBtaWNyby1iZW5jaG1hcmtzOlxuICogLSBodHRwOi8vanNwZXJmLmNvbS9vYmplY3QtY3JlYXRlMlxuICogLSBodHRwOi8vanNwZXJmLmNvbS9wcm90by1tYXAtbG9va3VwLzJcbiAqIC0gaHR0cDovL2pzcGVyZi5jb20vZm9yLWluLXZzLW9iamVjdC1rZXlzMlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU1hcCgpIHtcbiAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgeyAvLyBudWxsIHx8IHVuZGVmaW5lZFxuICAgIHJldHVybiAnJztcbiAgfVxuICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICBicmVhaztcbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgdmFsdWUgPSAnJyArIHZhbHVlO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChoYXNDdXN0b21Ub1N0cmluZyh2YWx1ZSkgJiYgIWlzQXJyYXkodmFsdWUpICYmICFpc0RhdGUodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gdG9Kc29uKHZhbHVlKTtcbiAgICAgIH1cbiAgfVxuXG4gIHJldHVybiB2YWx1ZTtcbn1cblxudmFyIE5PREVfVFlQRV9FTEVNRU5UID0gMTtcbnZhciBOT0RFX1RZUEVfQVRUUklCVVRFID0gMjtcbnZhciBOT0RFX1RZUEVfVEVYVCA9IDM7XG52YXIgTk9ERV9UWVBFX0NPTU1FTlQgPSA4O1xudmFyIE5PREVfVFlQRV9ET0NVTUVOVCA9IDk7XG52YXIgTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UID0gMTE7XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlXG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBJbnRlcmZhY2UgZm9yIGNvbmZpZ3VyaW5nIGFuZ3VsYXIge0BsaW5rIGFuZ3VsYXIubW9kdWxlIG1vZHVsZXN9LlxuICovXG5cbmZ1bmN0aW9uIHNldHVwTW9kdWxlTG9hZGVyKHdpbmRvdykge1xuXG4gIHZhciAkaW5qZWN0b3JNaW5FcnIgPSBtaW5FcnIoJyRpbmplY3RvcicpO1xuICB2YXIgbmdNaW5FcnIgPSBtaW5FcnIoJ25nJyk7XG5cbiAgZnVuY3Rpb24gZW5zdXJlKG9iaiwgbmFtZSwgZmFjdG9yeSkge1xuICAgIHJldHVybiBvYmpbbmFtZV0gfHwgKG9ialtuYW1lXSA9IGZhY3RvcnkoKSk7XG4gIH1cblxuICB2YXIgYW5ndWxhciA9IGVuc3VyZSh3aW5kb3csICdhbmd1bGFyJywgT2JqZWN0KTtcblxuICAvLyBXZSBuZWVkIHRvIGV4cG9zZSBgYW5ndWxhci4kJG1pbkVycmAgdG8gbW9kdWxlcyBzdWNoIGFzIGBuZ1Jlc291cmNlYCB0aGF0IHJlZmVyZW5jZSBpdCBkdXJpbmcgYm9vdHN0cmFwXG4gIGFuZ3VsYXIuJCRtaW5FcnIgPSBhbmd1bGFyLiQkbWluRXJyIHx8IG1pbkVycjtcblxuICByZXR1cm4gZW5zdXJlKGFuZ3VsYXIsICdtb2R1bGUnLCBmdW5jdGlvbigpIHtcbiAgICAvKiogQHR5cGUge09iamVjdC48c3RyaW5nLCBhbmd1bGFyLk1vZHVsZT59ICovXG4gICAgdmFyIG1vZHVsZXMgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBmdW5jdGlvblxuICAgICAqIEBuYW1lIGFuZ3VsYXIubW9kdWxlXG4gICAgICogQG1vZHVsZSBuZ1xuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqXG4gICAgICogVGhlIGBhbmd1bGFyLm1vZHVsZWAgaXMgYSBnbG9iYWwgcGxhY2UgZm9yIGNyZWF0aW5nLCByZWdpc3RlcmluZyBhbmQgcmV0cmlldmluZyBBbmd1bGFyXG4gICAgICogbW9kdWxlcy5cbiAgICAgKiBBbGwgbW9kdWxlcyAoYW5ndWxhciBjb3JlIG9yIDNyZCBwYXJ0eSkgdGhhdCBzaG91bGQgYmUgYXZhaWxhYmxlIHRvIGFuIGFwcGxpY2F0aW9uIG11c3QgYmVcbiAgICAgKiByZWdpc3RlcmVkIHVzaW5nIHRoaXMgbWVjaGFuaXNtLlxuICAgICAqXG4gICAgICogUGFzc2luZyBvbmUgYXJndW1lbnQgcmV0cmlldmVzIGFuIGV4aXN0aW5nIHtAbGluayBhbmd1bGFyLk1vZHVsZX0sXG4gICAgICogd2hlcmVhcyBwYXNzaW5nIG1vcmUgdGhhbiBvbmUgYXJndW1lbnQgY3JlYXRlcyBhIG5ldyB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9XG4gICAgICpcbiAgICAgKlxuICAgICAqICMgTW9kdWxlXG4gICAgICpcbiAgICAgKiBBIG1vZHVsZSBpcyBhIGNvbGxlY3Rpb24gb2Ygc2VydmljZXMsIGRpcmVjdGl2ZXMsIGNvbnRyb2xsZXJzLCBmaWx0ZXJzLCBhbmQgY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbi5cbiAgICAgKiBgYW5ndWxhci5tb2R1bGVgIGlzIHVzZWQgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZVxuICAgICAqIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdteU1vZHVsZScsIFtdKTtcbiAgICAgKlxuICAgICAqIC8vIHJlZ2lzdGVyIGEgbmV3IHNlcnZpY2VcbiAgICAgKiBteU1vZHVsZS52YWx1ZSgnYXBwTmFtZScsICdNeUNvb2xBcHAnKTtcbiAgICAgKlxuICAgICAqIC8vIGNvbmZpZ3VyZSBleGlzdGluZyBzZXJ2aWNlcyBpbnNpZGUgaW5pdGlhbGl6YXRpb24gYmxvY2tzLlxuICAgICAqIG15TW9kdWxlLmNvbmZpZyhbJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAgKiAgIC8vIENvbmZpZ3VyZSBleGlzdGluZyBwcm92aWRlcnNcbiAgICAgKiAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJyEnKTtcbiAgICAgKiB9XSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGVuIHlvdSBjYW4gY3JlYXRlIGFuIGluamVjdG9yIGFuZCBsb2FkIHlvdXIgbW9kdWxlcyBsaWtlIHRoaXM6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciBpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoWyduZycsICdteU1vZHVsZSddKVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSG93ZXZlciBpdCdzIG1vcmUgbGlrZWx5IHRoYXQgeW91J2xsIGp1c3QgdXNlXG4gICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0FwcCBuZ0FwcH0gb3JcbiAgICAgKiB7QGxpbmsgYW5ndWxhci5ib290c3RyYXB9IHRvIHNpbXBsaWZ5IHRoaXMgcHJvY2VzcyBmb3IgeW91LlxuICAgICAqXG4gICAgICogQHBhcmFtIHshc3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBtb2R1bGUgdG8gY3JlYXRlIG9yIHJldHJpZXZlLlxuICAgICAqIEBwYXJhbSB7IUFycmF5LjxzdHJpbmc+PX0gcmVxdWlyZXMgSWYgc3BlY2lmaWVkIHRoZW4gbmV3IG1vZHVsZSBpcyBiZWluZyBjcmVhdGVkLiBJZlxuICAgICAqICAgICAgICB1bnNwZWNpZmllZCB0aGVuIHRoZSBtb2R1bGUgaXMgYmVpbmcgcmV0cmlldmVkIGZvciBmdXJ0aGVyIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbj19IGNvbmZpZ0ZuIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb24gZm9yIHRoZSBtb2R1bGUuIFNhbWUgYXNcbiAgICAgKiAgICAgICAge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZyBNb2R1bGUjY29uZmlnKCl9LlxuICAgICAqIEByZXR1cm5zIHthbmd1bGFyLk1vZHVsZX0gbmV3IG1vZHVsZSB3aXRoIHRoZSB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9IGFwaS5cbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gbW9kdWxlKG5hbWUsIHJlcXVpcmVzLCBjb25maWdGbikge1xuXG4gICAgICB2YXIgaW5mbyA9IHt9O1xuXG4gICAgICB2YXIgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkgPSBmdW5jdGlvbihuYW1lLCBjb250ZXh0KSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnaGFzT3duUHJvcGVydHknKSB7XG4gICAgICAgICAgdGhyb3cgbmdNaW5FcnIoJ2JhZG5hbWUnLCAnaGFzT3duUHJvcGVydHkgaXMgbm90IGEgdmFsaWQgezB9IG5hbWUnLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkobmFtZSwgJ21vZHVsZScpO1xuICAgICAgaWYgKHJlcXVpcmVzICYmIG1vZHVsZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgbW9kdWxlc1tuYW1lXSA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZW5zdXJlKG1vZHVsZXMsIG5hbWUsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXJlcXVpcmVzKSB7XG4gICAgICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdub21vZCcsICdNb2R1bGUgXFwnezB9XFwnIGlzIG5vdCBhdmFpbGFibGUhIFlvdSBlaXRoZXIgbWlzc3BlbGxlZCAnICtcbiAgICAgICAgICAgICAndGhlIG1vZHVsZSBuYW1lIG9yIGZvcmdvdCB0byBsb2FkIGl0LiBJZiByZWdpc3RlcmluZyBhIG1vZHVsZSBlbnN1cmUgdGhhdCB5b3UgJyArXG4gICAgICAgICAgICAgJ3NwZWNpZnkgdGhlIGRlcGVuZGVuY2llcyBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50LicsIG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqIEB0eXBlIHshQXJyYXkuPEFycmF5LjwqPj59ICovXG4gICAgICAgIHZhciBpbnZva2VRdWV1ZSA9IFtdO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5LjxGdW5jdGlvbj59ICovXG4gICAgICAgIHZhciBjb25maWdCbG9ja3MgPSBbXTtcblxuICAgICAgICAvKiogQHR5cGUgeyFBcnJheS48RnVuY3Rpb24+fSAqL1xuICAgICAgICB2YXIgcnVuQmxvY2tzID0gW107XG5cbiAgICAgICAgdmFyIGNvbmZpZyA9IGludm9rZUxhdGVyKCckaW5qZWN0b3InLCAnaW52b2tlJywgJ3B1c2gnLCBjb25maWdCbG9ja3MpO1xuXG4gICAgICAgIC8qKiBAdHlwZSB7YW5ndWxhci5Nb2R1bGV9ICovXG4gICAgICAgIHZhciBtb2R1bGVJbnN0YW5jZSA9IHtcbiAgICAgICAgICAvLyBQcml2YXRlIHN0YXRlXG4gICAgICAgICAgX2ludm9rZVF1ZXVlOiBpbnZva2VRdWV1ZSxcbiAgICAgICAgICBfY29uZmlnQmxvY2tzOiBjb25maWdCbG9ja3MsXG4gICAgICAgICAgX3J1bkJsb2NrczogcnVuQmxvY2tzLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2luZm9cbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdD19IGluZm8gSW5mb3JtYXRpb24gYWJvdXQgdGhlIG1vZHVsZVxuICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R8TW9kdWxlfSBUaGUgY3VycmVudCBpbmZvIG9iamVjdCBmb3IgdGhpcyBtb2R1bGUgaWYgY2FsbGVkIGFzIGEgZ2V0dGVyLFxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICBvciBgdGhpc2AgaWYgY2FsbGVkIGFzIGEgc2V0dGVyLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogUmVhZCBhbmQgd3JpdGUgY3VzdG9tIGluZm9ybWF0aW9uIGFib3V0IHRoaXMgbW9kdWxlLlxuICAgICAgICAgICAqIEZvciBleGFtcGxlIHlvdSBjb3VsZCBwdXQgdGhlIHZlcnNpb24gb2YgdGhlIG1vZHVsZSBpbiBoZXJlLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogYGBganNcbiAgICAgICAgICAgKiBhbmd1bGFyLm1vZHVsZSgnbXlNb2R1bGUnLCBbXSkuaW5mbyh7IHZlcnNpb246ICcxLjAuMCcgfSk7XG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBUaGUgdmVyc2lvbiBjb3VsZCB0aGVuIGJlIHJlYWQgYmFjayBvdXQgYnkgYWNjZXNzaW5nIHRoZSBtb2R1bGUgZWxzZXdoZXJlOlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICogdmFyIHZlcnNpb24gPSBhbmd1bGFyLm1vZHVsZSgnbXlNb2R1bGUnKS5pbmZvKCkudmVyc2lvbjtcbiAgICAgICAgICAgKiBgYGBcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIFlvdSBjYW4gYWxzbyByZXRyaWV2ZSB0aGlzIGluZm9ybWF0aW9uIGR1cmluZyBydW50aW1lIHZpYSB0aGVcbiAgICAgICAgICAgKiB7QGxpbmsgJGluamVjdG9yI21vZHVsZXMgYCRpbmplY3Rvci5tb2R1bGVzYH0gcHJvcGVydHk6XG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgICAqIHZhciB2ZXJzaW9uID0gJGluamVjdG9yLm1vZHVsZXNbJ215TW9kdWxlJ10uaW5mbygpLnZlcnNpb247XG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICovXG4gICAgICAgICAgaW5mbzogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB0aHJvdyBuZ01pbkVycignYW9iaicsICdBcmd1bWVudCBcXCd7MH1cXCcgbXVzdCBiZSBhbiBvYmplY3QnLCAndmFsdWUnKTtcbiAgICAgICAgICAgICAgaW5mbyA9IHZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNyZXF1aXJlc1xuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIEhvbGRzIHRoZSBsaXN0IG9mIG1vZHVsZXMgd2hpY2ggdGhlIGluamVjdG9yIHdpbGwgbG9hZCBiZWZvcmUgdGhlIGN1cnJlbnQgbW9kdWxlIGlzXG4gICAgICAgICAgICogbG9hZGVkLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHJlcXVpcmVzOiByZXF1aXJlcyxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI25hbWVcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBOYW1lIG9mIHRoZSBtb2R1bGUuXG4gICAgICAgICAgICovXG4gICAgICAgICAgbmFtZTogbmFtZSxcblxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3Byb3ZpZGVyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3ZpZGVyVHlwZSBDb25zdHJ1Y3Rpb24gZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiB0aGVcbiAgICAgICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgcHJvdmlkZXI6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJHByb3ZpZGUnLCAncHJvdmlkZXInKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNmYWN0b3J5XG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIHNlcnZpY2UgbmFtZVxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByb3ZpZGVyRnVuY3Rpb24gRnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiB0aGUgc2VydmljZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjZmFjdG9yeSAkcHJvdmlkZS5mYWN0b3J5KCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGZhY3Rvcnk6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJHByb3ZpZGUnLCAnZmFjdG9yeScpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI3NlcnZpY2VcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uc3RydWN0b3IgQSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW5zdGFudGlhdGVkLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgc2VydmljZTogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckcHJvdmlkZScsICdzZXJ2aWNlJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjdmFsdWVcbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgc2VydmljZSBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHsqfSBvYmplY3QgU2VydmljZSBpbnN0YW5jZSBvYmplY3QuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogU2VlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlICRwcm92aWRlLnZhbHVlKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHZhbHVlOiBpbnZva2VMYXRlcignJHByb3ZpZGUnLCAndmFsdWUnKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNjb25zdGFudFxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBjb25zdGFudCBuYW1lXG4gICAgICAgICAgICogQHBhcmFtIHsqfSBvYmplY3QgQ29uc3RhbnQgdmFsdWUuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogQmVjYXVzZSB0aGUgY29uc3RhbnRzIGFyZSBmaXhlZCwgdGhleSBnZXQgYXBwbGllZCBiZWZvcmUgb3RoZXIgcHJvdmlkZSBtZXRob2RzLlxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNjb25zdGFudCAkcHJvdmlkZS5jb25zdGFudCgpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBjb25zdGFudDogaW52b2tlTGF0ZXIoJyRwcm92aWRlJywgJ2NvbnN0YW50JywgJ3Vuc2hpZnQnKSxcblxuICAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjZGVjb3JhdG9yXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIGRlY29yYXRlLlxuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGRlY29yRm4gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgc2VydmljZSBuZWVkcyB0byBiZVxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFudGlhdGVkIGFuZCBzaG91bGQgcmV0dXJuIHRoZSBkZWNvcmF0ZWQgc2VydmljZSBpbnN0YW5jZS5cbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yICRwcm92aWRlLmRlY29yYXRvcigpfS5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBkZWNvcmF0b3I6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJHByb3ZpZGUnLCAnZGVjb3JhdG9yJywgY29uZmlnQmxvY2tzKSxcblxuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICAgKiBAbmFtZSBhbmd1bGFyLk1vZHVsZSNhbmltYXRpb25cbiAgICAgICAgICAgKiBAbW9kdWxlIG5nXG4gICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgYW5pbWF0aW9uIG5hbWVcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhbmltYXRpb25GYWN0b3J5IEZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiBhblxuICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqXG4gICAgICAgICAgICogKipOT1RFKio6IGFuaW1hdGlvbnMgdGFrZSBlZmZlY3Qgb25seSBpZiB0aGUgKipuZ0FuaW1hdGUqKiBtb2R1bGUgaXMgbG9hZGVkLlxuICAgICAgICAgICAqXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBEZWZpbmVzIGFuIGFuaW1hdGlvbiBob29rIHRoYXQgY2FuIGJlIGxhdGVyIHVzZWQgd2l0aFxuICAgICAgICAgICAqIHtAbGluayAkYW5pbWF0ZSAkYW5pbWF0ZX0gc2VydmljZSBhbmQgZGlyZWN0aXZlcyB0aGF0IHVzZSB0aGlzIHNlcnZpY2UuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgICAqIG1vZHVsZS5hbmltYXRpb24oJy5hbmltYXRpb24tbmFtZScsIGZ1bmN0aW9uKCRpbmplY3QxLCAkaW5qZWN0Mikge1xuICAgICAgICAgICAqICAgcmV0dXJuIHtcbiAgICAgICAgICAgKiAgICAgZXZlbnROYW1lIDogZnVuY3Rpb24oZWxlbWVudCwgZG9uZSkge1xuICAgICAgICAgICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAqICAgICAgIC8vb25jZSBjb21wbGV0ZSwgdGhlbiBydW4gZG9uZSgpXG4gICAgICAgICAgICogICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNhbmNlbGxhdGlvbkZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgKiAgICAgICAgIC8vY29kZSB0byBjYW5jZWwgdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAqICAgICAgIH1cbiAgICAgICAgICAgKiAgICAgfVxuICAgICAgICAgICAqICAgfVxuICAgICAgICAgICAqIH0pXG4gICAgICAgICAgICogYGBgXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRhbmltYXRlUHJvdmlkZXIjcmVnaXN0ZXIgJGFuaW1hdGVQcm92aWRlci5yZWdpc3RlcigpfSBhbmRcbiAgICAgICAgICAgKiB7QGxpbmsgbmdBbmltYXRlIG5nQW5pbWF0ZSBtb2R1bGV9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGFuaW1hdGlvbjogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckYW5pbWF0ZVByb3ZpZGVyJywgJ3JlZ2lzdGVyJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjZmlsdGVyXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEZpbHRlciBuYW1lIC0gdGhpcyBtdXN0IGJlIGEgdmFsaWQgYW5ndWxhciBleHByZXNzaW9uIGlkZW50aWZpZXJcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmaWx0ZXJGYWN0b3J5IEZhY3RvcnkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZSBvZiBmaWx0ZXIuXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogU2VlIHtAbGluayBuZy4kZmlsdGVyUHJvdmlkZXIjcmVnaXN0ZXIgJGZpbHRlclByb3ZpZGVyLnJlZ2lzdGVyKCl9LlxuICAgICAgICAgICAqXG4gICAgICAgICAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICAgICAgICAgKiAqKk5vdGU6KiogRmlsdGVyIG5hbWVzIG11c3QgYmUgdmFsaWQgYW5ndWxhciB7QGxpbmsgZXhwcmVzc2lvbn0gaWRlbnRpZmllcnMsIHN1Y2ggYXMgYHVwcGVyY2FzZWAgb3IgYG9yZGVyQnlgLlxuICAgICAgICAgICAqIE5hbWVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGh5cGhlbnMgYW5kIGRvdHMsIGFyZSBub3QgYWxsb3dlZC4gSWYgeW91IHdpc2ggdG8gbmFtZXNwYWNlXG4gICAgICAgICAgICogeW91ciBmaWx0ZXJzLCB0aGVuIHlvdSBjYW4gdXNlIGNhcGl0YWxpemF0aW9uIChgbXlhcHBTdWJzZWN0aW9uRmlsdGVyeGApIG9yIHVuZGVyc2NvcmVzXG4gICAgICAgICAgICogKGBteWFwcF9zdWJzZWN0aW9uX2ZpbHRlcnhgKS5cbiAgICAgICAgICAgKiA8L2Rpdj5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBmaWx0ZXI6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJGZpbHRlclByb3ZpZGVyJywgJ3JlZ2lzdGVyJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29udHJvbGxlclxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgQ29udHJvbGxlciBuYW1lLCBvciBhbiBvYmplY3QgbWFwIG9mIGNvbnRyb2xsZXJzIHdoZXJlIHRoZVxuICAgICAgICAgICAqICAgIGtleXMgYXJlIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbnN0cnVjdG9ycy5cbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbnRyb2xsZXJQcm92aWRlciNyZWdpc3RlciAkY29udHJvbGxlclByb3ZpZGVyLnJlZ2lzdGVyKCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGNvbnRyb2xsZXI6IGludm9rZUxhdGVyQW5kU2V0TW9kdWxlTmFtZSgnJGNvbnRyb2xsZXJQcm92aWRlcicsICdyZWdpc3RlcicpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2RpcmVjdGl2ZVxuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgRGlyZWN0aXZlIG5hbWUsIG9yIGFuIG9iamVjdCBtYXAgb2YgZGlyZWN0aXZlcyB3aGVyZSB0aGVcbiAgICAgICAgICAgKiAgICBrZXlzIGFyZSB0aGUgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmYWN0b3JpZXMuXG4gICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGlyZWN0aXZlRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2Ugb2ZcbiAgICAgICAgICAgKiBkaXJlY3RpdmVzLlxuICAgICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgICAqIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGVQcm92aWRlciNkaXJlY3RpdmUgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoKX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgZGlyZWN0aXZlOiBpbnZva2VMYXRlckFuZFNldE1vZHVsZU5hbWUoJyRjb21waWxlUHJvdmlkZXInLCAnZGlyZWN0aXZlJyksXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjY29tcG9uZW50XG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGNvbXBvbmVudCBpbiBjYW1lbC1jYXNlIChpLmUuIG15Q29tcCB3aGljaCB3aWxsIG1hdGNoIGFzIG15LWNvbXApXG4gICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ29tcG9uZW50IGRlZmluaXRpb24gb2JqZWN0IChhIHNpbXBsaWZpZWRcbiAgICAgICAgICAgKiAgICB7QGxpbmsgbmcuJGNvbXBpbGUjZGlyZWN0aXZlLWRlZmluaXRpb24tb2JqZWN0IGRpcmVjdGl2ZSBkZWZpbml0aW9uIG9iamVjdH0pXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICAgKiBTZWUge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjY29tcG9uZW50ICRjb21waWxlUHJvdmlkZXIuY29tcG9uZW50KCl9LlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGNvbXBvbmVudDogaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKCckY29tcGlsZVByb3ZpZGVyJywgJ2NvbXBvbmVudCcpLFxuXG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICAgICAqIEBuYW1lIGFuZ3VsYXIuTW9kdWxlI2NvbmZpZ1xuICAgICAgICAgICAqIEBtb2R1bGUgbmdcbiAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25maWdGbiBFeGVjdXRlIHRoaXMgZnVuY3Rpb24gb24gbW9kdWxlIGxvYWQuIFVzZWZ1bCBmb3Igc2VydmljZVxuICAgICAgICAgICAqICAgIGNvbmZpZ3VyYXRpb24uXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHJlZ2lzdGVyIHdvcmsgd2hpY2ggbmVlZHMgdG8gYmUgcGVyZm9ybWVkIG9uIG1vZHVsZSBsb2FkaW5nLlxuICAgICAgICAgICAqIEZvciBtb3JlIGFib3V0IGhvdyB0byBjb25maWd1cmUgc2VydmljZXMsIHNlZVxuICAgICAgICAgICAqIHtAbGluayBwcm92aWRlcnMjcHJvdmlkZXItcmVjaXBlIFByb3ZpZGVyIFJlY2lwZX0uXG4gICAgICAgICAgICovXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXG5cbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAgICogQG5hbWUgYW5ndWxhci5Nb2R1bGUjcnVuXG4gICAgICAgICAgICogQG1vZHVsZSBuZ1xuICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluaXRpYWxpemF0aW9uRm4gRXhlY3V0ZSB0aGlzIGZ1bmN0aW9uIGFmdGVyIGluamVjdG9yIGNyZWF0aW9uLlxuICAgICAgICAgICAqICAgIFVzZWZ1bCBmb3IgYXBwbGljYXRpb24gaW5pdGlhbGl6YXRpb24uXG4gICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICogVXNlIHRoaXMgbWV0aG9kIHRvIHJlZ2lzdGVyIHdvcmsgd2hpY2ggc2hvdWxkIGJlIHBlcmZvcm1lZCB3aGVuIHRoZSBpbmplY3RvciBpcyBkb25lXG4gICAgICAgICAgICogbG9hZGluZyBhbGwgbW9kdWxlcy5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBydW46IGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgICAgICAgICBydW5CbG9ja3MucHVzaChibG9jayk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGNvbmZpZ0ZuKSB7XG4gICAgICAgICAgY29uZmlnKGNvbmZpZ0ZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtb2R1bGVJbnN0YW5jZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmc9fSBpbnNlcnRNZXRob2RcbiAgICAgICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTGF0ZXIocHJvdmlkZXIsIG1ldGhvZCwgaW5zZXJ0TWV0aG9kLCBxdWV1ZSkge1xuICAgICAgICAgIGlmICghcXVldWUpIHF1ZXVlID0gaW52b2tlUXVldWU7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcXVldWVbaW5zZXJ0TWV0aG9kIHx8ICdwdXNoJ10oW3Byb3ZpZGVyLCBtZXRob2QsIGFyZ3VtZW50c10pO1xuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZUluc3RhbmNlO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgICAgICogQHJldHVybnMge2FuZ3VsYXIuTW9kdWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTGF0ZXJBbmRTZXRNb2R1bGVOYW1lKHByb3ZpZGVyLCBtZXRob2QsIHF1ZXVlKSB7XG4gICAgICAgICAgaWYgKCFxdWV1ZSkgcXVldWUgPSBpbnZva2VRdWV1ZTtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjaXBlTmFtZSwgZmFjdG9yeUZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZmFjdG9yeUZ1bmN0aW9uICYmIGlzRnVuY3Rpb24oZmFjdG9yeUZ1bmN0aW9uKSkgZmFjdG9yeUZ1bmN0aW9uLiQkbW9kdWxlTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBxdWV1ZS5wdXNoKFtwcm92aWRlciwgbWV0aG9kLCBhcmd1bWVudHNdKTtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGVJbnN0YW5jZTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxufVxuXG4vKiBnbG9iYWwgc2hhbGxvd0NvcHk6IHRydWUgKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgc2hhbGxvdyBjb3B5IG9mIGFuIG9iamVjdCwgYW4gYXJyYXkgb3IgYSBwcmltaXRpdmUuXG4gKlxuICogQXNzdW1lcyB0aGF0IHRoZXJlIGFyZSBubyBwcm90byBwcm9wZXJ0aWVzIGZvciBvYmplY3RzLlxuICovXG5mdW5jdGlvbiBzaGFsbG93Q29weShzcmMsIGRzdCkge1xuICBpZiAoaXNBcnJheShzcmMpKSB7XG4gICAgZHN0ID0gZHN0IHx8IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gc3JjLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGRzdFtpXSA9IHNyY1tpXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qoc3JjKSkge1xuICAgIGRzdCA9IGRzdCB8fCB7fTtcblxuICAgIGZvciAodmFyIGtleSBpbiBzcmMpIHtcbiAgICAgIGlmICghKGtleS5jaGFyQXQoMCkgPT09ICckJyAmJiBrZXkuY2hhckF0KDEpID09PSAnJCcpKSB7XG4gICAgICAgIGRzdFtrZXldID0gc3JjW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRzdCB8fCBzcmM7XG59XG5cbi8qIGV4cG9ydGVkIHRvRGVidWdTdHJpbmcgKi9cblxuZnVuY3Rpb24gc2VyaWFsaXplT2JqZWN0KG9iaiwgbWF4RGVwdGgpIHtcbiAgdmFyIHNlZW4gPSBbXTtcblxuICAvLyBUaGVyZSBpcyBubyBkaXJlY3Qgd2F5IHRvIHN0cmluZ2lmeSBvYmplY3QgdW50aWwgcmVhY2hpbmcgYSBzcGVjaWZpYyBkZXB0aFxuICAvLyBhbmQgYSB2ZXJ5IGRlZXAgb2JqZWN0IGNhbiBjYXVzZSBhIHBlcmZvcm1hbmNlIGlzc3VlLCBzbyB3ZSBjb3B5IHRoZSBvYmplY3RcbiAgLy8gYmFzZWQgb24gdGhpcyBzcGVjaWZpYyBkZXB0aCBhbmQgdGhlbiBzdHJpbmdpZnkgaXQuXG4gIGlmIChpc1ZhbGlkT2JqZWN0TWF4RGVwdGgobWF4RGVwdGgpKSB7XG4gICAgLy8gVGhpcyBmaWxlIGlzIGFsc28gaW5jbHVkZWQgaW4gYGFuZ3VsYXItbG9hZGVyYCwgc28gYGNvcHkoKWAgbWlnaHQgbm90IGFsd2F5cyBiZSBhdmFpbGFibGUgaW5cbiAgICAvLyB0aGUgY2xvc3VyZS4gVGhlcmVmb3JlLCBpdCBpcyBsYXppbHkgcmV0cmlldmVkIGFzIGBhbmd1bGFyLmNvcHkoKWAgd2hlbiBuZWVkZWQuXG4gICAgb2JqID0gYW5ndWxhci5jb3B5KG9iaiwgbnVsbCwgbWF4RGVwdGgpO1xuICB9XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgdmFsID0gdG9Kc29uUmVwbGFjZXIoa2V5LCB2YWwpO1xuICAgIGlmIChpc09iamVjdCh2YWwpKSB7XG5cbiAgICAgIGlmIChzZWVuLmluZGV4T2YodmFsKSA+PSAwKSByZXR1cm4gJy4uLic7XG5cbiAgICAgIHNlZW4ucHVzaCh2YWwpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdG9EZWJ1Z1N0cmluZyhvYmosIG1heERlcHRoKSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG9iai50b1N0cmluZygpLnJlcGxhY2UoLyBcXHtbXFxzXFxTXSokLywgJycpO1xuICB9IGVsc2UgaWYgKGlzVW5kZWZpbmVkKG9iaikpIHtcbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iaiAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc2VyaWFsaXplT2JqZWN0KG9iaiwgbWF4RGVwdGgpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qIGdsb2JhbCBhbmd1bGFyTW9kdWxlOiB0cnVlLFxuICB2ZXJzaW9uOiB0cnVlLFxuXG4gICRDb21waWxlUHJvdmlkZXIsXG5cbiAgaHRtbEFuY2hvckRpcmVjdGl2ZSxcbiAgaW5wdXREaXJlY3RpdmUsXG4gIGlucHV0RGlyZWN0aXZlLFxuICBmb3JtRGlyZWN0aXZlLFxuICBzY3JpcHREaXJlY3RpdmUsXG4gIHNlbGVjdERpcmVjdGl2ZSxcbiAgb3B0aW9uRGlyZWN0aXZlLFxuICBuZ0JpbmREaXJlY3RpdmUsXG4gIG5nQmluZEh0bWxEaXJlY3RpdmUsXG4gIG5nQmluZFRlbXBsYXRlRGlyZWN0aXZlLFxuICBuZ0NsYXNzRGlyZWN0aXZlLFxuICBuZ0NsYXNzRXZlbkRpcmVjdGl2ZSxcbiAgbmdDbGFzc09kZERpcmVjdGl2ZSxcbiAgbmdDbG9ha0RpcmVjdGl2ZSxcbiAgbmdDb250cm9sbGVyRGlyZWN0aXZlLFxuICBuZ0Zvcm1EaXJlY3RpdmUsXG4gIG5nSGlkZURpcmVjdGl2ZSxcbiAgbmdJZkRpcmVjdGl2ZSxcbiAgbmdJbmNsdWRlRGlyZWN0aXZlLFxuICBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZSxcbiAgbmdJbml0RGlyZWN0aXZlLFxuICBuZ05vbkJpbmRhYmxlRGlyZWN0aXZlLFxuICBuZ1BsdXJhbGl6ZURpcmVjdGl2ZSxcbiAgbmdSZXBlYXREaXJlY3RpdmUsXG4gIG5nU2hvd0RpcmVjdGl2ZSxcbiAgbmdTdHlsZURpcmVjdGl2ZSxcbiAgbmdTd2l0Y2hEaXJlY3RpdmUsXG4gIG5nU3dpdGNoV2hlbkRpcmVjdGl2ZSxcbiAgbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlLFxuICBuZ09wdGlvbnNEaXJlY3RpdmUsXG4gIG5nVHJhbnNjbHVkZURpcmVjdGl2ZSxcbiAgbmdNb2RlbERpcmVjdGl2ZSxcbiAgbmdMaXN0RGlyZWN0aXZlLFxuICBuZ0NoYW5nZURpcmVjdGl2ZSxcbiAgcGF0dGVybkRpcmVjdGl2ZSxcbiAgcGF0dGVybkRpcmVjdGl2ZSxcbiAgcmVxdWlyZWREaXJlY3RpdmUsXG4gIHJlcXVpcmVkRGlyZWN0aXZlLFxuICBtaW5sZW5ndGhEaXJlY3RpdmUsXG4gIG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgbWF4bGVuZ3RoRGlyZWN0aXZlLFxuICBtYXhsZW5ndGhEaXJlY3RpdmUsXG4gIG5nVmFsdWVEaXJlY3RpdmUsXG4gIG5nTW9kZWxPcHRpb25zRGlyZWN0aXZlLFxuICBuZ0F0dHJpYnV0ZUFsaWFzRGlyZWN0aXZlcyxcbiAgbmdFdmVudERpcmVjdGl2ZXMsXG5cbiAgJEFuY2hvclNjcm9sbFByb3ZpZGVyLFxuICAkQW5pbWF0ZVByb3ZpZGVyLFxuICAkQ29yZUFuaW1hdGVDc3NQcm92aWRlcixcbiAgJCRDb3JlQW5pbWF0ZUpzUHJvdmlkZXIsXG4gICQkQ29yZUFuaW1hdGVRdWV1ZVByb3ZpZGVyLFxuICAkJEFuaW1hdGVSdW5uZXJGYWN0b3J5UHJvdmlkZXIsXG4gICQkQW5pbWF0ZUFzeW5jUnVuRmFjdG9yeVByb3ZpZGVyLFxuICAkQnJvd3NlclByb3ZpZGVyLFxuICAkQ2FjaGVGYWN0b3J5UHJvdmlkZXIsXG4gICRDb250cm9sbGVyUHJvdmlkZXIsXG4gICREYXRlUHJvdmlkZXIsXG4gICREb2N1bWVudFByb3ZpZGVyLFxuICAkJElzRG9jdW1lbnRIaWRkZW5Qcm92aWRlcixcbiAgJEV4Y2VwdGlvbkhhbmRsZXJQcm92aWRlcixcbiAgJEZpbHRlclByb3ZpZGVyLFxuICAkJEZvcmNlUmVmbG93UHJvdmlkZXIsXG4gICRJbnRlcnBvbGF0ZVByb3ZpZGVyLFxuICAkSW50ZXJ2YWxQcm92aWRlcixcbiAgJEh0dHBQcm92aWRlcixcbiAgJEh0dHBQYXJhbVNlcmlhbGl6ZXJQcm92aWRlcixcbiAgJEh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VQcm92aWRlcixcbiAgJEh0dHBCYWNrZW5kUHJvdmlkZXIsXG4gICR4aHJGYWN0b3J5UHJvdmlkZXIsXG4gICRqc29ucENhbGxiYWNrc1Byb3ZpZGVyLFxuICAkTG9jYXRpb25Qcm92aWRlcixcbiAgJExvZ1Byb3ZpZGVyLFxuICAkJE1hcFByb3ZpZGVyLFxuICAkUGFyc2VQcm92aWRlcixcbiAgJFJvb3RTY29wZVByb3ZpZGVyLFxuICAkUVByb3ZpZGVyLFxuICAkJFFQcm92aWRlcixcbiAgJCRTYW5pdGl6ZVVyaVByb3ZpZGVyLFxuICAkU2NlUHJvdmlkZXIsXG4gICRTY2VEZWxlZ2F0ZVByb3ZpZGVyLFxuICAkU25pZmZlclByb3ZpZGVyLFxuICAkVGVtcGxhdGVDYWNoZVByb3ZpZGVyLFxuICAkVGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIsXG4gICQkVGVzdGFiaWxpdHlQcm92aWRlcixcbiAgJFRpbWVvdXRQcm92aWRlcixcbiAgJCRSQUZQcm92aWRlcixcbiAgJFdpbmRvd1Byb3ZpZGVyLFxuICAkJGpxTGl0ZVByb3ZpZGVyLFxuICAkJENvb2tpZVJlYWRlclByb3ZpZGVyXG4qL1xuXG5cbi8qKlxuICogQG5nZG9jIG9iamVjdFxuICogQG5hbWUgYW5ndWxhci52ZXJzaW9uXG4gKiBAbW9kdWxlIG5nXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IEFuZ3VsYXJKUyB2ZXJzaW9uLlxuICpcbiAqIFRoaXMgb2JqZWN0IGhhcyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKlxuICogLSBgZnVsbGAg4oCTIGB7c3RyaW5nfWAg4oCTIEZ1bGwgdmVyc2lvbiBzdHJpbmcsIHN1Y2ggYXMgXCIwLjkuMThcIi5cbiAqIC0gYG1ham9yYCDigJMgYHtudW1iZXJ9YCDigJMgTWFqb3IgdmVyc2lvbiBudW1iZXIsIHN1Y2ggYXMgXCIwXCIuXG4gKiAtIGBtaW5vcmAg4oCTIGB7bnVtYmVyfWAg4oCTIE1pbm9yIHZlcnNpb24gbnVtYmVyLCBzdWNoIGFzIFwiOVwiLlxuICogLSBgZG90YCDigJMgYHtudW1iZXJ9YCDigJMgRG90IHZlcnNpb24gbnVtYmVyLCBzdWNoIGFzIFwiMThcIi5cbiAqIC0gYGNvZGVOYW1lYCDigJMgYHtzdHJpbmd9YCDigJMgQ29kZSBuYW1lIG9mIHRoZSByZWxlYXNlLCBzdWNoIGFzIFwiamlnZ2xpbmctYXJtZmF0XCIuXG4gKi9cbnZhciB2ZXJzaW9uID0ge1xuICAvLyBUaGVzZSBwbGFjZWhvbGRlciBzdHJpbmdzIHdpbGwgYmUgcmVwbGFjZWQgYnkgZ3J1bnQncyBgYnVpbGRgIHRhc2suXG4gIC8vIFRoZXkgbmVlZCB0byBiZSBkb3VibGUtIG9yIHNpbmdsZS1xdW90ZWQuXG4gIGZ1bGw6ICcxLjYuOCcsXG4gIG1ham9yOiAxLFxuICBtaW5vcjogNixcbiAgZG90OiA4LFxuICBjb2RlTmFtZTogJ2JlbmVmaWNpYWwtdGluY3R1cmUnXG59O1xuXG5cbmZ1bmN0aW9uIHB1Ymxpc2hFeHRlcm5hbEFQSShhbmd1bGFyKSB7XG4gIGV4dGVuZChhbmd1bGFyLCB7XG4gICAgJ2Vycm9ySGFuZGxpbmdDb25maWcnOiBlcnJvckhhbmRsaW5nQ29uZmlnLFxuICAgICdib290c3RyYXAnOiBib290c3RyYXAsXG4gICAgJ2NvcHknOiBjb3B5LFxuICAgICdleHRlbmQnOiBleHRlbmQsXG4gICAgJ21lcmdlJzogbWVyZ2UsXG4gICAgJ2VxdWFscyc6IGVxdWFscyxcbiAgICAnZWxlbWVudCc6IGpxTGl0ZSxcbiAgICAnZm9yRWFjaCc6IGZvckVhY2gsXG4gICAgJ2luamVjdG9yJzogY3JlYXRlSW5qZWN0b3IsXG4gICAgJ25vb3AnOiBub29wLFxuICAgICdiaW5kJzogYmluZCxcbiAgICAndG9Kc29uJzogdG9Kc29uLFxuICAgICdmcm9tSnNvbic6IGZyb21Kc29uLFxuICAgICdpZGVudGl0eSc6IGlkZW50aXR5LFxuICAgICdpc1VuZGVmaW5lZCc6IGlzVW5kZWZpbmVkLFxuICAgICdpc0RlZmluZWQnOiBpc0RlZmluZWQsXG4gICAgJ2lzU3RyaW5nJzogaXNTdHJpbmcsXG4gICAgJ2lzRnVuY3Rpb24nOiBpc0Z1bmN0aW9uLFxuICAgICdpc09iamVjdCc6IGlzT2JqZWN0LFxuICAgICdpc051bWJlcic6IGlzTnVtYmVyLFxuICAgICdpc0VsZW1lbnQnOiBpc0VsZW1lbnQsXG4gICAgJ2lzQXJyYXknOiBpc0FycmF5LFxuICAgICd2ZXJzaW9uJzogdmVyc2lvbixcbiAgICAnaXNEYXRlJzogaXNEYXRlLFxuICAgICdsb3dlcmNhc2UnOiBsb3dlcmNhc2UsXG4gICAgJ3VwcGVyY2FzZSc6IHVwcGVyY2FzZSxcbiAgICAnY2FsbGJhY2tzJzogeyQkY291bnRlcjogMH0sXG4gICAgJ2dldFRlc3RhYmlsaXR5JzogZ2V0VGVzdGFiaWxpdHksXG4gICAgJ3JlbG9hZFdpdGhEZWJ1Z0luZm8nOiByZWxvYWRXaXRoRGVidWdJbmZvLFxuICAgICckJG1pbkVycic6IG1pbkVycixcbiAgICAnJCRjc3AnOiBjc3AsXG4gICAgJyQkZW5jb2RlVXJpU2VnbWVudCc6IGVuY29kZVVyaVNlZ21lbnQsXG4gICAgJyQkZW5jb2RlVXJpUXVlcnknOiBlbmNvZGVVcmlRdWVyeSxcbiAgICAnJCRzdHJpbmdpZnknOiBzdHJpbmdpZnlcbiAgfSk7XG5cbiAgYW5ndWxhck1vZHVsZSA9IHNldHVwTW9kdWxlTG9hZGVyKHdpbmRvdyk7XG5cbiAgYW5ndWxhck1vZHVsZSgnbmcnLCBbJ25nTG9jYWxlJ10sIFsnJHByb3ZpZGUnLFxuICAgIGZ1bmN0aW9uIG5nTW9kdWxlKCRwcm92aWRlKSB7XG4gICAgICAvLyAkJHNhbml0aXplVXJpUHJvdmlkZXIgbmVlZHMgdG8gYmUgYmVmb3JlICRjb21waWxlUHJvdmlkZXIgYXMgaXQgaXMgdXNlZCBieSBpdC5cbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKHtcbiAgICAgICAgJCRzYW5pdGl6ZVVyaTogJCRTYW5pdGl6ZVVyaVByb3ZpZGVyXG4gICAgICB9KTtcbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKCckY29tcGlsZScsICRDb21waWxlUHJvdmlkZXIpLlxuICAgICAgICBkaXJlY3RpdmUoe1xuICAgICAgICAgICAgYTogaHRtbEFuY2hvckRpcmVjdGl2ZSxcbiAgICAgICAgICAgIGlucHV0OiBpbnB1dERpcmVjdGl2ZSxcbiAgICAgICAgICAgIHRleHRhcmVhOiBpbnB1dERpcmVjdGl2ZSxcbiAgICAgICAgICAgIGZvcm06IGZvcm1EaXJlY3RpdmUsXG4gICAgICAgICAgICBzY3JpcHQ6IHNjcmlwdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIHNlbGVjdDogc2VsZWN0RGlyZWN0aXZlLFxuICAgICAgICAgICAgb3B0aW9uOiBvcHRpb25EaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0JpbmQ6IG5nQmluZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQmluZEh0bWw6IG5nQmluZEh0bWxEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0JpbmRUZW1wbGF0ZTogbmdCaW5kVGVtcGxhdGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0NsYXNzOiBuZ0NsYXNzRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDbGFzc0V2ZW46IG5nQ2xhc3NFdmVuRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdDbGFzc09kZDogbmdDbGFzc09kZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2xvYWs6IG5nQ2xvYWtEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0NvbnRyb2xsZXI6IG5nQ29udHJvbGxlckRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nRm9ybTogbmdGb3JtRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdIaWRlOiBuZ0hpZGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0lmOiBuZ0lmRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdJbmNsdWRlOiBuZ0luY2x1ZGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0luaXQ6IG5nSW5pdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTm9uQmluZGFibGU6IG5nTm9uQmluZGFibGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1BsdXJhbGl6ZTogbmdQbHVyYWxpemVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1JlcGVhdDogbmdSZXBlYXREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1Nob3c6IG5nU2hvd0RpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nU3R5bGU6IG5nU3R5bGVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N3aXRjaDogbmdTd2l0Y2hEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1N3aXRjaFdoZW46IG5nU3dpdGNoV2hlbkRpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nU3dpdGNoRGVmYXVsdDogbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdPcHRpb25zOiBuZ09wdGlvbnNEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1RyYW5zY2x1ZGU6IG5nVHJhbnNjbHVkZURpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nTW9kZWw6IG5nTW9kZWxEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ0xpc3Q6IG5nTGlzdERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nQ2hhbmdlOiBuZ0NoYW5nZURpcmVjdGl2ZSxcbiAgICAgICAgICAgIHBhdHRlcm46IHBhdHRlcm5EaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1BhdHRlcm46IHBhdHRlcm5EaXJlY3RpdmUsXG4gICAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWREaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ1JlcXVpcmVkOiByZXF1aXJlZERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG1pbmxlbmd0aDogbWlubGVuZ3RoRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdNaW5sZW5ndGg6IG1pbmxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG1heGxlbmd0aDogbWF4bGVuZ3RoRGlyZWN0aXZlLFxuICAgICAgICAgICAgbmdNYXhsZW5ndGg6IG1heGxlbmd0aERpcmVjdGl2ZSxcbiAgICAgICAgICAgIG5nVmFsdWU6IG5nVmFsdWVEaXJlY3RpdmUsXG4gICAgICAgICAgICBuZ01vZGVsT3B0aW9uczogbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmVcbiAgICAgICAgfSkuXG4gICAgICAgIGRpcmVjdGl2ZSh7XG4gICAgICAgICAgbmdJbmNsdWRlOiBuZ0luY2x1ZGVGaWxsQ29udGVudERpcmVjdGl2ZVxuICAgICAgICB9KS5cbiAgICAgICAgZGlyZWN0aXZlKG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzKS5cbiAgICAgICAgZGlyZWN0aXZlKG5nRXZlbnREaXJlY3RpdmVzKTtcbiAgICAgICRwcm92aWRlLnByb3ZpZGVyKHtcbiAgICAgICAgJGFuY2hvclNjcm9sbDogJEFuY2hvclNjcm9sbFByb3ZpZGVyLFxuICAgICAgICAkYW5pbWF0ZTogJEFuaW1hdGVQcm92aWRlcixcbiAgICAgICAgJGFuaW1hdGVDc3M6ICRDb3JlQW5pbWF0ZUNzc1Byb3ZpZGVyLFxuICAgICAgICAkJGFuaW1hdGVKczogJCRDb3JlQW5pbWF0ZUpzUHJvdmlkZXIsXG4gICAgICAgICQkYW5pbWF0ZVF1ZXVlOiAkJENvcmVBbmltYXRlUXVldWVQcm92aWRlcixcbiAgICAgICAgJCRBbmltYXRlUnVubmVyOiAkJEFuaW1hdGVSdW5uZXJGYWN0b3J5UHJvdmlkZXIsXG4gICAgICAgICQkYW5pbWF0ZUFzeW5jUnVuOiAkJEFuaW1hdGVBc3luY1J1bkZhY3RvcnlQcm92aWRlcixcbiAgICAgICAgJGJyb3dzZXI6ICRCcm93c2VyUHJvdmlkZXIsXG4gICAgICAgICRjYWNoZUZhY3Rvcnk6ICRDYWNoZUZhY3RvcnlQcm92aWRlcixcbiAgICAgICAgJGNvbnRyb2xsZXI6ICRDb250cm9sbGVyUHJvdmlkZXIsXG4gICAgICAgICRkb2N1bWVudDogJERvY3VtZW50UHJvdmlkZXIsXG4gICAgICAgICQkaXNEb2N1bWVudEhpZGRlbjogJCRJc0RvY3VtZW50SGlkZGVuUHJvdmlkZXIsXG4gICAgICAgICRleGNlcHRpb25IYW5kbGVyOiAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyLFxuICAgICAgICAkZmlsdGVyOiAkRmlsdGVyUHJvdmlkZXIsXG4gICAgICAgICQkZm9yY2VSZWZsb3c6ICQkRm9yY2VSZWZsb3dQcm92aWRlcixcbiAgICAgICAgJGludGVycG9sYXRlOiAkSW50ZXJwb2xhdGVQcm92aWRlcixcbiAgICAgICAgJGludGVydmFsOiAkSW50ZXJ2YWxQcm92aWRlcixcbiAgICAgICAgJGh0dHA6ICRIdHRwUHJvdmlkZXIsXG4gICAgICAgICRodHRwUGFyYW1TZXJpYWxpemVyOiAkSHR0cFBhcmFtU2VyaWFsaXplclByb3ZpZGVyLFxuICAgICAgICAkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZTogJEh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VQcm92aWRlcixcbiAgICAgICAgJGh0dHBCYWNrZW5kOiAkSHR0cEJhY2tlbmRQcm92aWRlcixcbiAgICAgICAgJHhockZhY3Rvcnk6ICR4aHJGYWN0b3J5UHJvdmlkZXIsXG4gICAgICAgICRqc29ucENhbGxiYWNrczogJGpzb25wQ2FsbGJhY2tzUHJvdmlkZXIsXG4gICAgICAgICRsb2NhdGlvbjogJExvY2F0aW9uUHJvdmlkZXIsXG4gICAgICAgICRsb2c6ICRMb2dQcm92aWRlcixcbiAgICAgICAgJHBhcnNlOiAkUGFyc2VQcm92aWRlcixcbiAgICAgICAgJHJvb3RTY29wZTogJFJvb3RTY29wZVByb3ZpZGVyLFxuICAgICAgICAkcTogJFFQcm92aWRlcixcbiAgICAgICAgJCRxOiAkJFFQcm92aWRlcixcbiAgICAgICAgJHNjZTogJFNjZVByb3ZpZGVyLFxuICAgICAgICAkc2NlRGVsZWdhdGU6ICRTY2VEZWxlZ2F0ZVByb3ZpZGVyLFxuICAgICAgICAkc25pZmZlcjogJFNuaWZmZXJQcm92aWRlcixcbiAgICAgICAgJHRlbXBsYXRlQ2FjaGU6ICRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIsXG4gICAgICAgICR0ZW1wbGF0ZVJlcXVlc3Q6ICRUZW1wbGF0ZVJlcXVlc3RQcm92aWRlcixcbiAgICAgICAgJCR0ZXN0YWJpbGl0eTogJCRUZXN0YWJpbGl0eVByb3ZpZGVyLFxuICAgICAgICAkdGltZW91dDogJFRpbWVvdXRQcm92aWRlcixcbiAgICAgICAgJHdpbmRvdzogJFdpbmRvd1Byb3ZpZGVyLFxuICAgICAgICAkJHJBRjogJCRSQUZQcm92aWRlcixcbiAgICAgICAgJCRqcUxpdGU6ICQkanFMaXRlUHJvdmlkZXIsXG4gICAgICAgICQkTWFwOiAkJE1hcFByb3ZpZGVyLFxuICAgICAgICAkJGNvb2tpZVJlYWRlcjogJCRDb29raWVSZWFkZXJQcm92aWRlclxuICAgICAgfSk7XG4gICAgfVxuICBdKVxuICAuaW5mbyh7IGFuZ3VsYXJWZXJzaW9uOiAnMS42LjgnIH0pO1xufVxuXG4vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqXG4gKiAgICAgQW55IGNvbW1pdHMgdG8gdGhpcyBmaWxlIHNob3VsZCBiZSByZXZpZXdlZCB3aXRoIHNlY3VyaXR5IGluIG1pbmQuICAqXG4gKiAgIENoYW5nZXMgdG8gdGhpcyBmaWxlIGNhbiBwb3RlbnRpYWxseSBjcmVhdGUgc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzLiAqXG4gKiAgICAgICAgICBBbiBhcHByb3ZhbCBmcm9tIDIgQ29yZSBtZW1iZXJzIHdpdGggaGlzdG9yeSBvZiBtb2RpZnlpbmcgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIGZpbGUgaXMgcmVxdWlyZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgRG9lcyB0aGUgY2hhbmdlIHNvbWVob3cgYWxsb3cgZm9yIGFyYml0cmFyeSBqYXZhc2NyaXB0IHRvIGJlIGV4ZWN1dGVkPyAqXG4gKiAgICBPciBhbGxvd3MgZm9yIHNvbWVvbmUgdG8gY2hhbmdlIHRoZSBwcm90b3R5cGUgb2YgYnVpbHQtaW4gb2JqZWN0cz8gICAqXG4gKiAgICAgT3IgZ2l2ZXMgdW5kZXNpcmVkIGFjY2VzcyB0byB2YXJpYWJsZXMgbGlrZXMgZG9jdW1lbnQgb3Igd2luZG93PyAgICAqXG4gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqL1xuXG4vKiBnbG9iYWxcbiAgSlFMaXRlUHJvdG90eXBlOiB0cnVlLFxuICBCT09MRUFOX0FUVFI6IHRydWUsXG4gIEFMSUFTRURfQVRUUjogdHJ1ZVxuKi9cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy9KUUxpdGVcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLyoqXG4gKiBAbmdkb2MgZnVuY3Rpb25cbiAqIEBuYW1lIGFuZ3VsYXIuZWxlbWVudFxuICogQG1vZHVsZSBuZ1xuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFdyYXBzIGEgcmF3IERPTSBlbGVtZW50IG9yIEhUTUwgc3RyaW5nIGFzIGEgW2pRdWVyeV0oaHR0cDovL2pxdWVyeS5jb20pIGVsZW1lbnQuXG4gKlxuICogSWYgalF1ZXJ5IGlzIGF2YWlsYWJsZSwgYGFuZ3VsYXIuZWxlbWVudGAgaXMgYW4gYWxpYXMgZm9yIHRoZVxuICogW2pRdWVyeV0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2pRdWVyeS8pIGZ1bmN0aW9uLiBJZiBqUXVlcnkgaXMgbm90IGF2YWlsYWJsZSwgYGFuZ3VsYXIuZWxlbWVudGBcbiAqIGRlbGVnYXRlcyB0byBBbmd1bGFyJ3MgYnVpbHQtaW4gc3Vic2V0IG9mIGpRdWVyeSwgY2FsbGVkIFwialF1ZXJ5IGxpdGVcIiBvciAqKmpxTGl0ZSoqLlxuICpcbiAqIGpxTGl0ZSBpcyBhIHRpbnksIEFQSS1jb21wYXRpYmxlIHN1YnNldCBvZiBqUXVlcnkgdGhhdCBhbGxvd3NcbiAqIEFuZ3VsYXIgdG8gbWFuaXB1bGF0ZSB0aGUgRE9NIGluIGEgY3Jvc3MtYnJvd3NlciBjb21wYXRpYmxlIHdheS4ganFMaXRlIGltcGxlbWVudHMgb25seSB0aGUgbW9zdFxuICogY29tbW9ubHkgbmVlZGVkIGZ1bmN0aW9uYWxpdHkgd2l0aCB0aGUgZ29hbCBvZiBoYXZpbmcgYSB2ZXJ5IHNtYWxsIGZvb3RwcmludC5cbiAqXG4gKiBUbyB1c2UgYGpRdWVyeWAsIHNpbXBseSBlbnN1cmUgaXQgaXMgbG9hZGVkIGJlZm9yZSB0aGUgYGFuZ3VsYXIuanNgIGZpbGUuIFlvdSBjYW4gYWxzbyB1c2UgdGhlXG4gKiB7QGxpbmsgbmdKcSBgbmdKcWB9IGRpcmVjdGl2ZSB0byBzcGVjaWZ5IHRoYXQganFsaXRlIHNob3VsZCBiZSB1c2VkIG92ZXIgalF1ZXJ5LCBvciB0byB1c2UgYVxuICogc3BlY2lmaWMgdmVyc2lvbiBvZiBqUXVlcnkgaWYgbXVsdGlwbGUgdmVyc2lvbnMgZXhpc3Qgb24gdGhlIHBhZ2UuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj4qKk5vdGU6KiogQWxsIGVsZW1lbnQgcmVmZXJlbmNlcyBpbiBBbmd1bGFyIGFyZSBhbHdheXMgd3JhcHBlZCB3aXRoIGpRdWVyeSBvclxuICoganFMaXRlIChzdWNoIGFzIHRoZSBlbGVtZW50IGFyZ3VtZW50IGluIGEgZGlyZWN0aXZlJ3MgY29tcGlsZSAvIGxpbmsgZnVuY3Rpb24pLiBUaGV5IGFyZSBuZXZlciByYXcgRE9NIHJlZmVyZW5jZXMuPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj4qKk5vdGU6KiogS2VlcCBpbiBtaW5kIHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsIG5vdCBmaW5kIGVsZW1lbnRzXG4gKiBieSB0YWcgbmFtZSAvIENTUyBzZWxlY3Rvci4gRm9yIGxvb2t1cHMgYnkgdGFnIG5hbWUsIHRyeSBpbnN0ZWFkIGBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoLi4uKWBcbiAqIG9yIGAkZG9jdW1lbnQuZmluZCgpYCwgb3IgdXNlIHRoZSBzdGFuZGFyZCBET00gQVBJcywgZS5nLiBgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgpYC48L2Rpdj5cbiAqXG4gKiAjIyBBbmd1bGFyJ3MganFMaXRlXG4gKiBqcUxpdGUgcHJvdmlkZXMgb25seSB0aGUgZm9sbG93aW5nIGpRdWVyeSBtZXRob2RzOlxuICpcbiAqIC0gW2BhZGRDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FkZENsYXNzLykgLSBEb2VzIG5vdCBzdXBwb3J0IGEgZnVuY3Rpb24gYXMgZmlyc3QgYXJndW1lbnRcbiAqIC0gW2BhZnRlcigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2FmdGVyLylcbiAqIC0gW2BhcHBlbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9hcHBlbmQvKVxuICogLSBbYGF0dHIoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9hdHRyLykgLSBEb2VzIG5vdCBzdXBwb3J0IGZ1bmN0aW9ucyBhcyBwYXJhbWV0ZXJzXG4gKiAtIFtgYmluZCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2JpbmQvKSAoX2RlcHJlY2F0ZWRfLCB1c2UgW2BvbigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL29uLykpIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzLCBzZWxlY3RvcnMgb3IgZXZlbnREYXRhXG4gKiAtIFtgY2hpbGRyZW4oKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jaGlsZHJlbi8pIC0gRG9lcyBub3Qgc3VwcG9ydCBzZWxlY3RvcnNcbiAqIC0gW2BjbG9uZSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2Nsb25lLylcbiAqIC0gW2Bjb250ZW50cygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2NvbnRlbnRzLylcbiAqIC0gW2Bjc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9jc3MvKSAtIE9ubHkgcmV0cmlldmVzIGlubGluZS1zdHlsZXMsIGRvZXMgbm90IGNhbGwgYGdldENvbXB1dGVkU3R5bGUoKWAuXG4gKiAgIEFzIGEgc2V0dGVyLCBkb2VzIG5vdCBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5ncyBvciBhcHBlbmQgJ3B4JywgYW5kIGFsc28gZG9lcyBub3QgaGF2ZSBhdXRvbWF0aWMgcHJvcGVydHkgcHJlZml4aW5nLlxuICogLSBbYGRhdGEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9kYXRhLylcbiAqIC0gW2BkZXRhY2goKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9kZXRhY2gvKVxuICogLSBbYGVtcHR5KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZW1wdHkvKVxuICogLSBbYGVxKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vZXEvKVxuICogLSBbYGZpbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9maW5kLykgLSBMaW1pdGVkIHRvIGxvb2t1cHMgYnkgdGFnIG5hbWVcbiAqIC0gW2BoYXNDbGFzcygpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL2hhc0NsYXNzLylcbiAqIC0gW2BodG1sKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vaHRtbC8pXG4gKiAtIFtgbmV4dCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL25leHQvKSAtIERvZXMgbm90IHN1cHBvcnQgc2VsZWN0b3JzXG4gKiAtIFtgb24oKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vbi8pIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzLCBzZWxlY3RvcnMgb3IgZXZlbnREYXRhXG4gKiAtIFtgb2ZmKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vb2ZmLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMsIHNlbGVjdG9ycyBvciBldmVudCBvYmplY3QgYXMgcGFyYW1ldGVyXG4gKiAtIFtgb25lKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vb25lLykgLSBEb2VzIG5vdCBzdXBwb3J0IG5hbWVzcGFjZXMgb3Igc2VsZWN0b3JzXG4gKiAtIFtgcGFyZW50KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcGFyZW50LykgLSBEb2VzIG5vdCBzdXBwb3J0IHNlbGVjdG9yc1xuICogLSBbYHByZXBlbmQoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9wcmVwZW5kLylcbiAqIC0gW2Bwcm9wKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcHJvcC8pXG4gKiAtIFtgcmVhZHkoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZWFkeS8pIChfZGVwcmVjYXRlZF8sIHVzZSBgYW5ndWxhci5lbGVtZW50KGNhbGxiYWNrKWAgaW5zdGVhZCBvZiBgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShjYWxsYmFjaylgKVxuICogLSBbYHJlbW92ZSgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZS8pXG4gKiAtIFtgcmVtb3ZlQXR0cigpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlbW92ZUF0dHIvKSAtIERvZXMgbm90IHN1cHBvcnQgbXVsdGlwbGUgYXR0cmlidXRlc1xuICogLSBbYHJlbW92ZUNsYXNzKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vcmVtb3ZlQ2xhc3MvKSAtIERvZXMgbm90IHN1cHBvcnQgYSBmdW5jdGlvbiBhcyBmaXJzdCBhcmd1bWVudFxuICogLSBbYHJlbW92ZURhdGEoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9yZW1vdmVEYXRhLylcbiAqIC0gW2ByZXBsYWNlV2l0aCgpYF0oaHR0cDovL2FwaS5qcXVlcnkuY29tL3JlcGxhY2VXaXRoLylcbiAqIC0gW2B0ZXh0KClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdGV4dC8pXG4gKiAtIFtgdG9nZ2xlQ2xhc3MoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90b2dnbGVDbGFzcy8pIC0gRG9lcyBub3Qgc3VwcG9ydCBhIGZ1bmN0aW9uIGFzIGZpcnN0IGFyZ3VtZW50XG4gKiAtIFtgdHJpZ2dlckhhbmRsZXIoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS90cmlnZ2VySGFuZGxlci8pIC0gUGFzc2VzIGEgZHVtbXkgZXZlbnQgb2JqZWN0IHRvIGhhbmRsZXJzXG4gKiAtIFtgdW5iaW5kKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vdW5iaW5kLykgKF9kZXByZWNhdGVkXywgdXNlIFtgb2ZmKClgXShodHRwOi8vYXBpLmpxdWVyeS5jb20vb2ZmLykpIC0gRG9lcyBub3Qgc3VwcG9ydCBuYW1lc3BhY2VzIG9yIGV2ZW50IG9iamVjdCBhcyBwYXJhbWV0ZXJcbiAqIC0gW2B2YWwoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS92YWwvKVxuICogLSBbYHdyYXAoKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS93cmFwLylcbiAqXG4gKiAjIyBqUXVlcnkvanFMaXRlIEV4dHJhc1xuICogQW5ndWxhciBhbHNvIHByb3ZpZGVzIHRoZSBmb2xsb3dpbmcgYWRkaXRpb25hbCBtZXRob2RzIGFuZCBldmVudHMgdG8gYm90aCBqUXVlcnkgYW5kIGpxTGl0ZTpcbiAqXG4gKiAjIyMgRXZlbnRzXG4gKiAtIGAkZGVzdHJveWAgLSBBbmd1bGFySlMgaW50ZXJjZXB0cyBhbGwganFMaXRlL2pRdWVyeSdzIERPTSBkZXN0cnVjdGlvbiBhcGlzIGFuZCBmaXJlcyB0aGlzIGV2ZW50XG4gKiAgICBvbiBhbGwgRE9NIG5vZGVzIGJlaW5nIHJlbW92ZWQuICBUaGlzIGNhbiBiZSB1c2VkIHRvIGNsZWFuIHVwIGFueSAzcmQgcGFydHkgYmluZGluZ3MgdG8gdGhlIERPTVxuICogICAgZWxlbWVudCBiZWZvcmUgaXQgaXMgcmVtb3ZlZC5cbiAqXG4gKiAjIyMgTWV0aG9kc1xuICogLSBgY29udHJvbGxlcihuYW1lKWAgLSByZXRyaWV2ZXMgdGhlIGNvbnRyb2xsZXIgb2YgdGhlIGN1cnJlbnQgZWxlbWVudCBvciBpdHMgcGFyZW50LiBCeSBkZWZhdWx0XG4gKiAgIHJldHJpZXZlcyBjb250cm9sbGVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgYG5nQ29udHJvbGxlcmAgZGlyZWN0aXZlLiBJZiBgbmFtZWAgaXMgcHJvdmlkZWQgYXNcbiAqICAgY2FtZWxDYXNlIGRpcmVjdGl2ZSBuYW1lLCB0aGVuIHRoZSBjb250cm9sbGVyIGZvciB0aGlzIGRpcmVjdGl2ZSB3aWxsIGJlIHJldHJpZXZlZCAoZS5nLlxuICogICBgJ25nTW9kZWwnYCkuXG4gKiAtIGBpbmplY3RvcigpYCAtIHJldHJpZXZlcyB0aGUgaW5qZWN0b3Igb2YgdGhlIGN1cnJlbnQgZWxlbWVudCBvciBpdHMgcGFyZW50LlxuICogLSBgc2NvcGUoKWAgLSByZXRyaWV2ZXMgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIHNjb3BlfSBvZiB0aGUgY3VycmVudFxuICogICBlbGVtZW50IG9yIGl0cyBwYXJlbnQuIFJlcXVpcmVzIHtAbGluayBndWlkZS9wcm9kdWN0aW9uI2Rpc2FibGluZy1kZWJ1Zy1kYXRhIERlYnVnIERhdGF9IHRvXG4gKiAgIGJlIGVuYWJsZWQuXG4gKiAtIGBpc29sYXRlU2NvcGUoKWAgLSByZXRyaWV2ZXMgYW4gaXNvbGF0ZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0gaWYgb25lIGlzIGF0dGFjaGVkIGRpcmVjdGx5IHRvIHRoZVxuICogICBjdXJyZW50IGVsZW1lbnQuIFRoaXMgZ2V0dGVyIHNob3VsZCBiZSB1c2VkIG9ubHkgb24gZWxlbWVudHMgdGhhdCBjb250YWluIGEgZGlyZWN0aXZlIHdoaWNoIHN0YXJ0cyBhIG5ldyBpc29sYXRlXG4gKiAgIHNjb3BlLiBDYWxsaW5nIGBzY29wZSgpYCBvbiB0aGlzIGVsZW1lbnQgYWx3YXlzIHJldHVybnMgdGhlIG9yaWdpbmFsIG5vbi1pc29sYXRlIHNjb3BlLlxuICogICBSZXF1aXJlcyB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEZWJ1ZyBEYXRhfSB0byBiZSBlbmFibGVkLlxuICogLSBgaW5oZXJpdGVkRGF0YSgpYCAtIHNhbWUgYXMgYGRhdGEoKWAsIGJ1dCB3YWxrcyB1cCB0aGUgRE9NIHVudGlsIGEgdmFsdWUgaXMgZm91bmQgb3IgdGhlIHRvcFxuICogICBwYXJlbnQgZWxlbWVudCBpcyByZWFjaGVkLlxuICpcbiAqIEBrbm93bklzc3VlIFlvdSBjYW5ub3Qgc3B5IG9uIGBhbmd1bGFyLmVsZW1lbnRgIGlmIHlvdSBhcmUgdXNpbmcgSmFzbWluZSB2ZXJzaW9uIDEueC4gU2VlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNDI1MSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xET01FbGVtZW50fSBlbGVtZW50IEhUTUwgc3RyaW5nIG9yIERPTUVsZW1lbnQgdG8gYmUgd3JhcHBlZCBpbnRvIGpRdWVyeS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IGpRdWVyeSBvYmplY3QuXG4gKi9cblxuSlFMaXRlLmV4cGFuZG8gPSAnbmczMzknO1xuXG52YXIganFDYWNoZSA9IEpRTGl0ZS5jYWNoZSA9IHt9LFxuICAgIGpxSWQgPSAxO1xuXG4vKlxuICogISEhIFRoaXMgaXMgYW4gdW5kb2N1bWVudGVkIFwicHJpdmF0ZVwiIGZ1bmN0aW9uICEhIVxuICovXG5KUUxpdGUuX2RhdGEgPSBmdW5jdGlvbihub2RlKSB7XG4gIC8valF1ZXJ5IGFsd2F5cyByZXR1cm5zIGFuIG9iamVjdCBvbiBjYWNoZSBtaXNzXG4gIHJldHVybiB0aGlzLmNhY2hlW25vZGVbdGhpcy5leHBhbmRvXV0gfHwge307XG59O1xuXG5mdW5jdGlvbiBqcU5leHRJZCgpIHsgcmV0dXJuICsranFJZDsgfVxuXG5cbnZhciBEQVNIX0xPV0VSQ0FTRV9SRUdFWFAgPSAvLShbYS16XSkvZztcbnZhciBNU19IQUNLX1JFR0VYUCA9IC9eLW1zLS87XG52YXIgTU9VU0VfRVZFTlRfTUFQID0geyBtb3VzZWxlYXZlOiAnbW91c2VvdXQnLCBtb3VzZWVudGVyOiAnbW91c2VvdmVyJyB9O1xudmFyIGpxTGl0ZU1pbkVyciA9IG1pbkVycignanFMaXRlJyk7XG5cbi8qKlxuICogQ29udmVydHMga2ViYWItY2FzZSB0byBjYW1lbENhc2UuXG4gKiBUaGVyZSBpcyBhbHNvIGEgc3BlY2lhbCBjYXNlIGZvciB0aGUgbXMgcHJlZml4IHN0YXJ0aW5nIHdpdGggYSBsb3dlcmNhc2UgbGV0dGVyLlxuICogQHBhcmFtIG5hbWUgTmFtZSB0byBub3JtYWxpemVcbiAqL1xuZnVuY3Rpb24gY3NzS2ViYWJUb0NhbWVsKG5hbWUpIHtcbiAgICByZXR1cm4ga2ViYWJUb0NhbWVsKG5hbWUucmVwbGFjZShNU19IQUNLX1JFR0VYUCwgJ21zLScpKTtcbn1cblxuZnVuY3Rpb24gZm5DYW1lbENhc2VSZXBsYWNlKGFsbCwgbGV0dGVyKSB7XG4gIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBrZWJhYi1jYXNlIHRvIGNhbWVsQ2FzZS5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGtlYmFiVG9DYW1lbChuYW1lKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoREFTSF9MT1dFUkNBU0VfUkVHRVhQLCBmbkNhbWVsQ2FzZVJlcGxhY2UpO1xufVxuXG52YXIgU0lOR0xFX1RBR19SRUdFWFAgPSAvXjwoW1xcdy1dKylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC87XG52YXIgSFRNTF9SRUdFWFAgPSAvPHwmIz9cXHcrOy87XG52YXIgVEFHX05BTUVfUkVHRVhQID0gLzwoW1xcdzotXSspLztcbnZhciBYSFRNTF9UQUdfUkVHRVhQID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzotXSspW14+XSopXFwvPi9naTtcblxudmFyIHdyYXBNYXAgPSB7XG4gICdvcHRpb24nOiBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXSxcblxuICAndGhlYWQnOiBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXSxcbiAgJ2NvbCc6IFsyLCAnPHRhYmxlPjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddLFxuICAndHInOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcbiAgJ3RkJzogWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J10sXG4gICdfZGVmYXVsdCc6IFswLCAnJywgJyddXG59O1xuXG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG53cmFwTWFwLnRib2R5ID0gd3JhcE1hcC50Zm9vdCA9IHdyYXBNYXAuY29sZ3JvdXAgPSB3cmFwTWFwLmNhcHRpb24gPSB3cmFwTWFwLnRoZWFkO1xud3JhcE1hcC50aCA9IHdyYXBNYXAudGQ7XG5cblxuZnVuY3Rpb24ganFMaXRlSXNUZXh0Tm9kZShodG1sKSB7XG4gIHJldHVybiAhSFRNTF9SRUdFWFAudGVzdChodG1sKTtcbn1cblxuZnVuY3Rpb24ganFMaXRlQWNjZXB0c0RhdGEobm9kZSkge1xuICAvLyBUaGUgd2luZG93IG9iamVjdCBjYW4gYWNjZXB0IGRhdGEgYnV0IGhhcyBubyBub2RlVHlwZVxuICAvLyBPdGhlcndpc2Ugd2UgYXJlIG9ubHkgaW50ZXJlc3RlZCBpbiBlbGVtZW50cyAoMSkgYW5kIGRvY3VtZW50cyAoOSlcbiAgdmFyIG5vZGVUeXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgcmV0dXJuIG5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCB8fCAhbm9kZVR5cGUgfHwgbm9kZVR5cGUgPT09IE5PREVfVFlQRV9ET0NVTUVOVDtcbn1cblxuZnVuY3Rpb24ganFMaXRlSGFzRGF0YShub2RlKSB7XG4gIGZvciAodmFyIGtleSBpbiBqcUNhY2hlW25vZGUubmczMzldKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBqcUxpdGVCdWlsZEZyYWdtZW50KGh0bWwsIGNvbnRleHQpIHtcbiAgdmFyIHRtcCwgdGFnLCB3cmFwLFxuICAgICAgZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIG5vZGVzID0gW10sIGk7XG5cbiAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoaHRtbCkpIHtcbiAgICAvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcbiAgICBub2Rlcy5wdXNoKGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoaHRtbCkpO1xuICB9IGVsc2Uge1xuICAgIC8vIENvbnZlcnQgaHRtbCBpbnRvIERPTSBub2Rlc1xuICAgIHRtcCA9IGZyYWdtZW50LmFwcGVuZENoaWxkKGNvbnRleHQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuICAgIHRhZyA9IChUQUdfTkFNRV9SRUdFWFAuZXhlYyhodG1sKSB8fCBbJycsICcnXSlbMV0udG9Mb3dlckNhc2UoKTtcbiAgICB3cmFwID0gd3JhcE1hcFt0YWddIHx8IHdyYXBNYXAuX2RlZmF1bHQ7XG4gICAgdG1wLmlubmVySFRNTCA9IHdyYXBbMV0gKyBodG1sLnJlcGxhY2UoWEhUTUxfVEFHX1JFR0VYUCwgJzwkMT48LyQyPicpICsgd3JhcFsyXTtcblxuICAgIC8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudFxuICAgIGkgPSB3cmFwWzBdO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG4gICAgfVxuXG4gICAgbm9kZXMgPSBjb25jYXQobm9kZXMsIHRtcC5jaGlsZE5vZGVzKTtcblxuICAgIHRtcCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG4gICAgdG1wLnRleHRDb250ZW50ID0gJyc7XG4gIH1cblxuICAvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG4gIGZyYWdtZW50LnRleHRDb250ZW50ID0gJyc7XG4gIGZyYWdtZW50LmlubmVySFRNTCA9ICcnOyAvLyBDbGVhciBpbm5lciBIVE1MXG4gIGZvckVhY2gobm9kZXMsIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGZyYWdtZW50O1xufVxuXG5mdW5jdGlvbiBqcUxpdGVQYXJzZUhUTUwoaHRtbCwgY29udGV4dCkge1xuICBjb250ZXh0ID0gY29udGV4dCB8fCB3aW5kb3cuZG9jdW1lbnQ7XG4gIHZhciBwYXJzZWQ7XG5cbiAgaWYgKChwYXJzZWQgPSBTSU5HTEVfVEFHX1JFR0VYUC5leGVjKGh0bWwpKSkge1xuICAgIHJldHVybiBbY29udGV4dC5jcmVhdGVFbGVtZW50KHBhcnNlZFsxXSldO1xuICB9XG5cbiAgaWYgKChwYXJzZWQgPSBqcUxpdGVCdWlsZEZyYWdtZW50KGh0bWwsIGNvbnRleHQpKSkge1xuICAgIHJldHVybiBwYXJzZWQuY2hpbGROb2RlcztcbiAgfVxuXG4gIHJldHVybiBbXTtcbn1cblxuZnVuY3Rpb24ganFMaXRlV3JhcE5vZGUobm9kZSwgd3JhcHBlcikge1xuICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKHdyYXBwZXIsIG5vZGUpO1xuICB9XG5cbiAgd3JhcHBlci5hcHBlbmRDaGlsZChub2RlKTtcbn1cblxuXG4vLyBJRTktMTEgaGFzIG5vIG1ldGhvZCBcImNvbnRhaW5zXCIgaW4gU1ZHIGVsZW1lbnQgYW5kIGluIE5vZGUucHJvdG90eXBlLiBCdWcgIzEwMjU5LlxudmFyIGpxTGl0ZUNvbnRhaW5zID0gd2luZG93Lk5vZGUucHJvdG90eXBlLmNvbnRhaW5zIHx8IC8qKiBAdGhpcyAqLyBmdW5jdGlvbihhcmcpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgcmV0dXJuICEhKHRoaXMuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYXJnKSAmIDE2KTtcbn07XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gSlFMaXRlKGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBKUUxpdGUpIHtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIHZhciBhcmdJc1N0cmluZztcblxuICBpZiAoaXNTdHJpbmcoZWxlbWVudCkpIHtcbiAgICBlbGVtZW50ID0gdHJpbShlbGVtZW50KTtcbiAgICBhcmdJc1N0cmluZyA9IHRydWU7XG4gIH1cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEpRTGl0ZSkpIHtcbiAgICBpZiAoYXJnSXNTdHJpbmcgJiYgZWxlbWVudC5jaGFyQXQoMCkgIT09ICc8Jykge1xuICAgICAgdGhyb3cganFMaXRlTWluRXJyKCdub3NlbCcsICdMb29raW5nIHVwIGVsZW1lbnRzIHZpYSBzZWxlY3RvcnMgaXMgbm90IHN1cHBvcnRlZCBieSBqcUxpdGUhIFNlZTogaHR0cDovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvYW5ndWxhci5lbGVtZW50Jyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSlFMaXRlKGVsZW1lbnQpO1xuICB9XG5cbiAgaWYgKGFyZ0lzU3RyaW5nKSB7XG4gICAganFMaXRlQWRkTm9kZXModGhpcywganFMaXRlUGFyc2VIVE1MKGVsZW1lbnQpKTtcbiAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKGVsZW1lbnQpKSB7XG4gICAganFMaXRlUmVhZHkoZWxlbWVudCk7XG4gIH0gZWxzZSB7XG4gICAganFMaXRlQWRkTm9kZXModGhpcywgZWxlbWVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlQ2xvbmUoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZURlYWxvYyhlbGVtZW50LCBvbmx5RGVzY2VuZGFudHMpIHtcbiAgaWYgKCFvbmx5RGVzY2VuZGFudHMgJiYganFMaXRlQWNjZXB0c0RhdGEoZWxlbWVudCkpIGpxTGl0ZS5jbGVhbkRhdGEoW2VsZW1lbnRdKTtcblxuICBpZiAoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAganFMaXRlLmNsZWFuRGF0YShlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlT2ZmKGVsZW1lbnQsIHR5cGUsIGZuLCB1bnN1cHBvcnRlZCkge1xuICBpZiAoaXNEZWZpbmVkKHVuc3VwcG9ydGVkKSkgdGhyb3cganFMaXRlTWluRXJyKCdvZmZhcmdzJywgJ2pxTGl0ZSNvZmYoKSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBgc2VsZWN0b3JgIGFyZ3VtZW50Jyk7XG5cbiAgdmFyIGV4cGFuZG9TdG9yZSA9IGpxTGl0ZUV4cGFuZG9TdG9yZShlbGVtZW50KTtcbiAgdmFyIGV2ZW50cyA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuZXZlbnRzO1xuICB2YXIgaGFuZGxlID0gZXhwYW5kb1N0b3JlICYmIGV4cGFuZG9TdG9yZS5oYW5kbGU7XG5cbiAgaWYgKCFoYW5kbGUpIHJldHVybjsgLy9ubyBsaXN0ZW5lcnMgcmVnaXN0ZXJlZFxuXG4gIGlmICghdHlwZSkge1xuICAgIGZvciAodHlwZSBpbiBldmVudHMpIHtcbiAgICAgIGlmICh0eXBlICE9PSAnJGRlc3Ryb3knKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGUpO1xuICAgICAgfVxuICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICB9XG4gIH0gZWxzZSB7XG5cbiAgICB2YXIgcmVtb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgIHZhciBsaXN0ZW5lckZucyA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChpc0RlZmluZWQoZm4pKSB7XG4gICAgICAgIGFycmF5UmVtb3ZlKGxpc3RlbmVyRm5zIHx8IFtdLCBmbik7XG4gICAgICB9XG4gICAgICBpZiAoIShpc0RlZmluZWQoZm4pICYmIGxpc3RlbmVyRm5zICYmIGxpc3RlbmVyRm5zLmxlbmd0aCA+IDApKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGUpO1xuICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3JFYWNoKHR5cGUuc3BsaXQoJyAnKSwgZnVuY3Rpb24odHlwZSkge1xuICAgICAgcmVtb3ZlSGFuZGxlcih0eXBlKTtcbiAgICAgIGlmIChNT1VTRV9FVkVOVF9NQVBbdHlwZV0pIHtcbiAgICAgICAgcmVtb3ZlSGFuZGxlcihNT1VTRV9FVkVOVF9NQVBbdHlwZV0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVJlbW92ZURhdGEoZWxlbWVudCwgbmFtZSkge1xuICB2YXIgZXhwYW5kb0lkID0gZWxlbWVudC5uZzMzOTtcbiAgdmFyIGV4cGFuZG9TdG9yZSA9IGV4cGFuZG9JZCAmJiBqcUNhY2hlW2V4cGFuZG9JZF07XG5cbiAgaWYgKGV4cGFuZG9TdG9yZSkge1xuICAgIGlmIChuYW1lKSB7XG4gICAgICBkZWxldGUgZXhwYW5kb1N0b3JlLmRhdGFbbmFtZV07XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV4cGFuZG9TdG9yZS5oYW5kbGUpIHtcbiAgICAgIGlmIChleHBhbmRvU3RvcmUuZXZlbnRzLiRkZXN0cm95KSB7XG4gICAgICAgIGV4cGFuZG9TdG9yZS5oYW5kbGUoe30sICckZGVzdHJveScpO1xuICAgICAgfVxuICAgICAganFMaXRlT2ZmKGVsZW1lbnQpO1xuICAgIH1cbiAgICBkZWxldGUganFDYWNoZVtleHBhbmRvSWRdO1xuICAgIGVsZW1lbnQubmczMzkgPSB1bmRlZmluZWQ7IC8vIGRvbid0IGRlbGV0ZSBET00gZXhwYW5kb3MuIElFIGFuZCBDaHJvbWUgZG9uJ3QgbGlrZSBpdFxuICB9XG59XG5cblxuZnVuY3Rpb24ganFMaXRlRXhwYW5kb1N0b3JlKGVsZW1lbnQsIGNyZWF0ZUlmTmVjZXNzYXJ5KSB7XG4gIHZhciBleHBhbmRvSWQgPSBlbGVtZW50Lm5nMzM5LFxuICAgICAgZXhwYW5kb1N0b3JlID0gZXhwYW5kb0lkICYmIGpxQ2FjaGVbZXhwYW5kb0lkXTtcblxuICBpZiAoY3JlYXRlSWZOZWNlc3NhcnkgJiYgIWV4cGFuZG9TdG9yZSkge1xuICAgIGVsZW1lbnQubmczMzkgPSBleHBhbmRvSWQgPSBqcU5leHRJZCgpO1xuICAgIGV4cGFuZG9TdG9yZSA9IGpxQ2FjaGVbZXhwYW5kb0lkXSA9IHtldmVudHM6IHt9LCBkYXRhOiB7fSwgaGFuZGxlOiB1bmRlZmluZWR9O1xuICB9XG5cbiAgcmV0dXJuIGV4cGFuZG9TdG9yZTtcbn1cblxuXG5mdW5jdGlvbiBqcUxpdGVEYXRhKGVsZW1lbnQsIGtleSwgdmFsdWUpIHtcbiAgaWYgKGpxTGl0ZUFjY2VwdHNEYXRhKGVsZW1lbnQpKSB7XG4gICAgdmFyIHByb3A7XG5cbiAgICB2YXIgaXNTaW1wbGVTZXR0ZXIgPSBpc0RlZmluZWQodmFsdWUpO1xuICAgIHZhciBpc1NpbXBsZUdldHRlciA9ICFpc1NpbXBsZVNldHRlciAmJiBrZXkgJiYgIWlzT2JqZWN0KGtleSk7XG4gICAgdmFyIG1hc3NHZXR0ZXIgPSAha2V5O1xuICAgIHZhciBleHBhbmRvU3RvcmUgPSBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwgIWlzU2ltcGxlR2V0dGVyKTtcbiAgICB2YXIgZGF0YSA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuZGF0YTtcblxuICAgIGlmIChpc1NpbXBsZVNldHRlcikgeyAvLyBkYXRhKCdrZXknLCB2YWx1ZSlcbiAgICAgIGRhdGFba2ViYWJUb0NhbWVsKGtleSldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtYXNzR2V0dGVyKSB7ICAvLyBkYXRhKClcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNTaW1wbGVHZXR0ZXIpIHsgLy8gZGF0YSgna2V5JylcbiAgICAgICAgICAvLyBkb24ndCBmb3JjZSBjcmVhdGlvbiBvZiBleHBhbmRvU3RvcmUgaWYgaXQgZG9lc24ndCBleGlzdCB5ZXRcbiAgICAgICAgICByZXR1cm4gZGF0YSAmJiBkYXRhW2tlYmFiVG9DYW1lbChrZXkpXTtcbiAgICAgICAgfSBlbHNlIHsgLy8gbWFzcy1zZXR0ZXI6IGRhdGEoe2tleTE6IHZhbDEsIGtleTI6IHZhbDJ9KVxuICAgICAgICAgIGZvciAocHJvcCBpbiBrZXkpIHtcbiAgICAgICAgICAgIGRhdGFba2ViYWJUb0NhbWVsKHByb3ApXSA9IGtleVtwcm9wXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlSGFzQ2xhc3MoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgaWYgKCFlbGVtZW50LmdldEF0dHJpYnV0ZSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gKCgnICcgKyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgfHwgJycpICsgJyAnKS5yZXBsYWNlKC9bXFxuXFx0XS9nLCAnICcpLlxuICAgICAgaW5kZXhPZignICcgKyBzZWxlY3RvciArICcgJykgPiAtMSk7XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZVJlbW92ZUNsYXNzKGVsZW1lbnQsIGNzc0NsYXNzZXMpIHtcbiAgaWYgKGNzc0NsYXNzZXMgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcbiAgICB2YXIgZXhpc3RpbmdDbGFzc2VzID0gKCcgJyArIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyAnICcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXG5cXHRdL2csICcgJyk7XG4gICAgdmFyIG5ld0NsYXNzZXMgPSBleGlzdGluZ0NsYXNzZXM7XG5cbiAgICBmb3JFYWNoKGNzc0NsYXNzZXMuc3BsaXQoJyAnKSwgZnVuY3Rpb24oY3NzQ2xhc3MpIHtcbiAgICAgIGNzc0NsYXNzID0gdHJpbShjc3NDbGFzcyk7XG4gICAgICBuZXdDbGFzc2VzID0gbmV3Q2xhc3Nlcy5yZXBsYWNlKCcgJyArIGNzc0NsYXNzICsgJyAnLCAnICcpO1xuICAgIH0pO1xuXG4gICAgaWYgKG5ld0NsYXNzZXMgIT09IGV4aXN0aW5nQ2xhc3Nlcykge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgdHJpbShuZXdDbGFzc2VzKSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGpxTGl0ZUFkZENsYXNzKGVsZW1lbnQsIGNzc0NsYXNzZXMpIHtcbiAgaWYgKGNzc0NsYXNzZXMgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcbiAgICB2YXIgZXhpc3RpbmdDbGFzc2VzID0gKCcgJyArIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJykgKyAnICcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXG5cXHRdL2csICcgJyk7XG4gICAgdmFyIG5ld0NsYXNzZXMgPSBleGlzdGluZ0NsYXNzZXM7XG5cbiAgICBmb3JFYWNoKGNzc0NsYXNzZXMuc3BsaXQoJyAnKSwgZnVuY3Rpb24oY3NzQ2xhc3MpIHtcbiAgICAgIGNzc0NsYXNzID0gdHJpbShjc3NDbGFzcyk7XG4gICAgICBpZiAobmV3Q2xhc3Nlcy5pbmRleE9mKCcgJyArIGNzc0NsYXNzICsgJyAnKSA9PT0gLTEpIHtcbiAgICAgICAgbmV3Q2xhc3NlcyArPSBjc3NDbGFzcyArICcgJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChuZXdDbGFzc2VzICE9PSBleGlzdGluZ0NsYXNzZXMpIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHRyaW0obmV3Q2xhc3NlcykpO1xuICAgIH1cbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGpxTGl0ZUFkZE5vZGVzKHJvb3QsIGVsZW1lbnRzKSB7XG4gIC8vIFRISVMgQ09ERSBJUyBWRVJZIEhPVC4gRG9uJ3QgbWFrZSBjaGFuZ2VzIHdpdGhvdXQgYmVuY2htYXJraW5nLlxuXG4gIGlmIChlbGVtZW50cykge1xuXG4gICAgLy8gaWYgYSBOb2RlICh0aGUgbW9zdCBjb21tb24gY2FzZSlcbiAgICBpZiAoZWxlbWVudHMubm9kZVR5cGUpIHtcbiAgICAgIHJvb3Rbcm9vdC5sZW5ndGgrK10gPSBlbGVtZW50cztcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuICAgICAgLy8gaWYgYW4gQXJyYXkgb3IgTm9kZUxpc3QgYW5kIG5vdCBhIFdpbmRvd1xuICAgICAgaWYgKHR5cGVvZiBsZW5ndGggPT09ICdudW1iZXInICYmIGVsZW1lbnRzLndpbmRvdyAhPT0gZWxlbWVudHMpIHtcbiAgICAgICAgaWYgKGxlbmd0aCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJvb3Rbcm9vdC5sZW5ndGgrK10gPSBlbGVtZW50c1tpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3Rbcm9vdC5sZW5ndGgrK10gPSBlbGVtZW50cztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBqcUxpdGVDb250cm9sbGVyKGVsZW1lbnQsIG5hbWUpIHtcbiAgcmV0dXJuIGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudCwgJyQnICsgKG5hbWUgfHwgJ25nQ29udHJvbGxlcicpICsgJ0NvbnRyb2xsZXInKTtcbn1cblxuZnVuY3Rpb24ganFMaXRlSW5oZXJpdGVkRGF0YShlbGVtZW50LCBuYW1lLCB2YWx1ZSkge1xuICAvLyBpZiBlbGVtZW50IGlzIHRoZSBkb2N1bWVudCBvYmplY3Qgd29yayB3aXRoIHRoZSBodG1sIGVsZW1lbnQgaW5zdGVhZFxuICAvLyB0aGlzIG1ha2VzICQoZG9jdW1lbnQpLnNjb3BlKCkgcG9zc2libGVcbiAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IE5PREVfVFlQRV9ET0NVTUVOVCkge1xuICAgIGVsZW1lbnQgPSBlbGVtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgfVxuICB2YXIgbmFtZXMgPSBpc0FycmF5KG5hbWUpID8gbmFtZSA6IFtuYW1lXTtcblxuICB3aGlsZSAoZWxlbWVudCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5hbWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGlmIChpc0RlZmluZWQodmFsdWUgPSBqcUxpdGUuZGF0YShlbGVtZW50LCBuYW1lc1tpXSkpKSByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLy8gSWYgZGVhbGluZyB3aXRoIGEgZG9jdW1lbnQgZnJhZ21lbnQgbm9kZSB3aXRoIGEgaG9zdCBlbGVtZW50LCBhbmQgbm8gcGFyZW50LCB1c2UgdGhlIGhvc3RcbiAgICAvLyBlbGVtZW50IGFzIHRoZSBwYXJlbnQuIFRoaXMgZW5hYmxlcyBkaXJlY3RpdmVzIHdpdGhpbiBhIFNoYWRvdyBET00gb3IgcG9seWZpbGxlZCBTaGFkb3cgRE9NXG4gICAgLy8gdG8gbG9va3VwIHBhcmVudCBjb250cm9sbGVycy5cbiAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlIHx8IChlbGVtZW50Lm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQgJiYgZWxlbWVudC5ob3N0KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVFbXB0eShlbGVtZW50KSB7XG4gIGpxTGl0ZURlYWxvYyhlbGVtZW50LCB0cnVlKTtcbiAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBqcUxpdGVSZW1vdmUoZWxlbWVudCwga2VlcERhdGEpIHtcbiAgaWYgKCFrZWVwRGF0YSkganFMaXRlRGVhbG9jKGVsZW1lbnQpO1xuICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG59XG5cblxuZnVuY3Rpb24ganFMaXRlRG9jdW1lbnRMb2FkZWQoYWN0aW9uLCB3aW4pIHtcbiAgd2luID0gd2luIHx8IHdpbmRvdztcbiAgaWYgKHdpbi5kb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgLy8gRm9yY2UgdGhlIGFjdGlvbiB0byBiZSBydW4gYXN5bmMgZm9yIGNvbnNpc3RlbnQgYmVoYXZpb3JcbiAgICAvLyBmcm9tIHRoZSBhY3Rpb24ncyBwb2ludCBvZiB2aWV3XG4gICAgLy8gaS5lLiBpdCB3aWxsIGRlZmluaXRlbHkgbm90IGJlIGluIGEgJGFwcGx5XG4gICAgd2luLnNldFRpbWVvdXQoYWN0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBObyBuZWVkIHRvIHVuYmluZCB0aGlzIGhhbmRsZXIgYXMgbG9hZCBpcyBvbmx5IGV2ZXIgY2FsbGVkIG9uY2VcbiAgICBqcUxpdGUod2luKS5vbignbG9hZCcsIGFjdGlvbik7XG4gIH1cbn1cblxuZnVuY3Rpb24ganFMaXRlUmVhZHkoZm4pIHtcbiAgZnVuY3Rpb24gdHJpZ2dlcigpIHtcbiAgICB3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHRyaWdnZXIpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgdHJpZ2dlcik7XG4gICAgZm4oKTtcbiAgfVxuXG4gIC8vIGNoZWNrIGlmIGRvY3VtZW50IGlzIGFscmVhZHkgbG9hZGVkXG4gIGlmICh3aW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZuKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBXZSBjYW4gbm90IHVzZSBqcUxpdGUgc2luY2Ugd2UgYXJlIG5vdCBkb25lIGxvYWRpbmcgYW5kIGpRdWVyeSBjb3VsZCBiZSBsb2FkZWQgbGF0ZXIuXG5cbiAgICAvLyBXb3JrcyBmb3IgbW9kZXJuIGJyb3dzZXJzIGFuZCBJRTlcbiAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHRyaWdnZXIpO1xuXG4gICAgLy8gRmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCBmb3Igb3RoZXJzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0cmlnZ2VyKTtcbiAgfVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEZ1bmN0aW9ucyB3aGljaCBhcmUgZGVjbGFyZWQgZGlyZWN0bHkuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbnZhciBKUUxpdGVQcm90b3R5cGUgPSBKUUxpdGUucHJvdG90eXBlID0ge1xuICByZWFkeToganFMaXRlUmVhZHksXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICBmb3JFYWNoKHRoaXMsIGZ1bmN0aW9uKGUpIHsgdmFsdWUucHVzaCgnJyArIGUpO30pO1xuICAgIHJldHVybiAnWycgKyB2YWx1ZS5qb2luKCcsICcpICsgJ10nO1xuICB9LFxuXG4gIGVxOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIChpbmRleCA+PSAwKSA/IGpxTGl0ZSh0aGlzW2luZGV4XSkgOiBqcUxpdGUodGhpc1t0aGlzLmxlbmd0aCArIGluZGV4XSk7XG4gIH0sXG5cbiAgbGVuZ3RoOiAwLFxuICBwdXNoOiBwdXNoLFxuICBzb3J0OiBbXS5zb3J0LFxuICBzcGxpY2U6IFtdLnNwbGljZVxufTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBGdW5jdGlvbnMgaXRlcmF0aW5nIGdldHRlci9zZXR0ZXJzLlxuLy8gdGhlc2UgZnVuY3Rpb25zIHJldHVybiBzZWxmIG9uIHNldHRlciBhbmRcbi8vIHZhbHVlIG9uIGdldC5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xudmFyIEJPT0xFQU5fQVRUUiA9IHt9O1xuZm9yRWFjaCgnbXVsdGlwbGUsc2VsZWN0ZWQsY2hlY2tlZCxkaXNhYmxlZCxyZWFkT25seSxyZXF1aXJlZCxvcGVuJy5zcGxpdCgnLCcpLCBmdW5jdGlvbih2YWx1ZSkge1xuICBCT09MRUFOX0FUVFJbbG93ZXJjYXNlKHZhbHVlKV0gPSB2YWx1ZTtcbn0pO1xudmFyIEJPT0xFQU5fRUxFTUVOVFMgPSB7fTtcbmZvckVhY2goJ2lucHV0LHNlbGVjdCxvcHRpb24sdGV4dGFyZWEsYnV0dG9uLGZvcm0sZGV0YWlscycuc3BsaXQoJywnKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgQk9PTEVBTl9FTEVNRU5UU1t2YWx1ZV0gPSB0cnVlO1xufSk7XG52YXIgQUxJQVNFRF9BVFRSID0ge1xuICAnbmdNaW5sZW5ndGgnOiAnbWlubGVuZ3RoJyxcbiAgJ25nTWF4bGVuZ3RoJzogJ21heGxlbmd0aCcsXG4gICduZ01pbic6ICdtaW4nLFxuICAnbmdNYXgnOiAnbWF4JyxcbiAgJ25nUGF0dGVybic6ICdwYXR0ZXJuJyxcbiAgJ25nU3RlcCc6ICdzdGVwJ1xufTtcblxuZnVuY3Rpb24gZ2V0Qm9vbGVhbkF0dHJOYW1lKGVsZW1lbnQsIG5hbWUpIHtcbiAgLy8gY2hlY2sgZG9tIGxhc3Qgc2luY2Ugd2Ugd2lsbCBtb3N0IGxpa2VseSBmYWlsIG9uIG5hbWVcbiAgdmFyIGJvb2xlYW5BdHRyID0gQk9PTEVBTl9BVFRSW25hbWUudG9Mb3dlckNhc2UoKV07XG5cbiAgLy8gYm9vbGVhbkF0dHIgaXMgaGVyZSB0d2ljZSB0byBtaW5pbWl6ZSBET00gYWNjZXNzXG4gIHJldHVybiBib29sZWFuQXR0ciAmJiBCT09MRUFOX0VMRU1FTlRTW25vZGVOYW1lXyhlbGVtZW50KV0gJiYgYm9vbGVhbkF0dHI7XG59XG5cbmZ1bmN0aW9uIGdldEFsaWFzZWRBdHRyTmFtZShuYW1lKSB7XG4gIHJldHVybiBBTElBU0VEX0FUVFJbbmFtZV07XG59XG5cbmZvckVhY2goe1xuICBkYXRhOiBqcUxpdGVEYXRhLFxuICByZW1vdmVEYXRhOiBqcUxpdGVSZW1vdmVEYXRhLFxuICBoYXNEYXRhOiBqcUxpdGVIYXNEYXRhLFxuICBjbGVhbkRhdGE6IGZ1bmN0aW9uIGpxTGl0ZUNsZWFuRGF0YShub2Rlcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5vZGVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgIGpxTGl0ZVJlbW92ZURhdGEobm9kZXNbaV0pO1xuICAgIH1cbiAgfVxufSwgZnVuY3Rpb24oZm4sIG5hbWUpIHtcbiAgSlFMaXRlW25hbWVdID0gZm47XG59KTtcblxuZm9yRWFjaCh7XG4gIGRhdGE6IGpxTGl0ZURhdGEsXG4gIGluaGVyaXRlZERhdGE6IGpxTGl0ZUluaGVyaXRlZERhdGEsXG5cbiAgc2NvcGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAvLyBDYW4ndCB1c2UganFMaXRlRGF0YSBoZXJlIGRpcmVjdGx5IHNvIHdlIHN0YXkgY29tcGF0aWJsZSB3aXRoIGpRdWVyeSFcbiAgICByZXR1cm4ganFMaXRlLmRhdGEoZWxlbWVudCwgJyRzY29wZScpIHx8IGpxTGl0ZUluaGVyaXRlZERhdGEoZWxlbWVudC5wYXJlbnROb2RlIHx8IGVsZW1lbnQsIFsnJGlzb2xhdGVTY29wZScsICckc2NvcGUnXSk7XG4gIH0sXG5cbiAgaXNvbGF0ZVNjb3BlOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgLy8gQ2FuJ3QgdXNlIGpxTGl0ZURhdGEgaGVyZSBkaXJlY3RseSBzbyB3ZSBzdGF5IGNvbXBhdGlibGUgd2l0aCBqUXVlcnkhXG4gICAgcmV0dXJuIGpxTGl0ZS5kYXRhKGVsZW1lbnQsICckaXNvbGF0ZVNjb3BlJykgfHwganFMaXRlLmRhdGEoZWxlbWVudCwgJyRpc29sYXRlU2NvcGVOb1RlbXBsYXRlJyk7XG4gIH0sXG5cbiAgY29udHJvbGxlcjoganFMaXRlQ29udHJvbGxlcixcblxuICBpbmplY3RvcjogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHJldHVybiBqcUxpdGVJbmhlcml0ZWREYXRhKGVsZW1lbnQsICckaW5qZWN0b3InKTtcbiAgfSxcblxuICByZW1vdmVBdHRyOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lKSB7XG4gICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gIH0sXG5cbiAgaGFzQ2xhc3M6IGpxTGl0ZUhhc0NsYXNzLFxuXG4gIGNzczogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gY3NzS2ViYWJUb0NhbWVsKG5hbWUpO1xuXG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGVbbmFtZV0gPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbbmFtZV07XG4gICAgfVxuICB9LFxuXG4gIGF0dHI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5hbWUsIHZhbHVlKSB7XG4gICAgdmFyIHJldDtcbiAgICB2YXIgbm9kZVR5cGUgPSBlbGVtZW50Lm5vZGVUeXBlO1xuICAgIGlmIChub2RlVHlwZSA9PT0gTk9ERV9UWVBFX1RFWFQgfHwgbm9kZVR5cGUgPT09IE5PREVfVFlQRV9BVFRSSUJVVEUgfHwgbm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UIHx8XG4gICAgICAhZWxlbWVudC5nZXRBdHRyaWJ1dGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbG93ZXJjYXNlZE5hbWUgPSBsb3dlcmNhc2UobmFtZSk7XG4gICAgdmFyIGlzQm9vbGVhbkF0dHIgPSBCT09MRUFOX0FUVFJbbG93ZXJjYXNlZE5hbWVdO1xuXG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIC8vIHNldHRlclxuXG4gICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgKHZhbHVlID09PSBmYWxzZSAmJiBpc0Jvb2xlYW5BdHRyKSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsIGlzQm9vbGVhbkF0dHIgPyBsb3dlcmNhc2VkTmFtZSA6IHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZ2V0dGVyXG5cbiAgICAgIHJldCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKG5hbWUpO1xuXG4gICAgICBpZiAoaXNCb29sZWFuQXR0ciAmJiByZXQgIT09IG51bGwpIHtcbiAgICAgICAgcmV0ID0gbG93ZXJjYXNlZE5hbWU7XG4gICAgICB9XG4gICAgICAvLyBOb3JtYWxpemUgbm9uLWV4aXN0aW5nIGF0dHJpYnV0ZXMgdG8gdW5kZWZpbmVkIChhcyBqUXVlcnkpLlxuICAgICAgcmV0dXJuIHJldCA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldDtcbiAgICB9XG4gIH0sXG5cbiAgcHJvcDogZnVuY3Rpb24oZWxlbWVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgZWxlbWVudFtuYW1lXSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZWxlbWVudFtuYW1lXTtcbiAgICB9XG4gIH0sXG5cbiAgdGV4dDogKGZ1bmN0aW9uKCkge1xuICAgIGdldFRleHQuJGR2ID0gJyc7XG4gICAgcmV0dXJuIGdldFRleHQ7XG5cbiAgICBmdW5jdGlvbiBnZXRUZXh0KGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHZhciBub2RlVHlwZSA9IGVsZW1lbnQubm9kZVR5cGU7XG4gICAgICAgIHJldHVybiAobm9kZVR5cGUgPT09IE5PREVfVFlQRV9FTEVNRU5UIHx8IG5vZGVUeXBlID09PSBOT0RFX1RZUEVfVEVYVCkgPyBlbGVtZW50LnRleHRDb250ZW50IDogJyc7XG4gICAgICB9XG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgfVxuICB9KSgpLFxuXG4gIHZhbDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICBpZiAoZWxlbWVudC5tdWx0aXBsZSAmJiBub2RlTmFtZV8oZWxlbWVudCkgPT09ICdzZWxlY3QnKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yRWFjaChlbGVtZW50Lm9wdGlvbnMsIGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9wdGlvbi52YWx1ZSB8fCBvcHRpb24udGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgIH1cbiAgICBlbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gIH0sXG5cbiAgaHRtbDogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgfVxuICAgIGpxTGl0ZURlYWxvYyhlbGVtZW50LCB0cnVlKTtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHZhbHVlO1xuICB9LFxuXG4gIGVtcHR5OiBqcUxpdGVFbXB0eVxufSwgZnVuY3Rpb24oZm4sIG5hbWUpIHtcbiAgLyoqXG4gICAqIFByb3BlcnRpZXM6IHdyaXRlcyByZXR1cm4gc2VsZWN0aW9uLCByZWFkcyByZXR1cm4gZmlyc3QgdmFsdWVcbiAgICovXG4gIEpRTGl0ZS5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbihhcmcxLCBhcmcyKSB7XG4gICAgdmFyIGksIGtleTtcbiAgICB2YXIgbm9kZUNvdW50ID0gdGhpcy5sZW5ndGg7XG5cbiAgICAvLyBqcUxpdGVIYXNDbGFzcyBoYXMgb25seSB0d28gYXJndW1lbnRzLCBidXQgaXMgYSBnZXR0ZXItb25seSBmbiwgc28gd2UgbmVlZCB0byBzcGVjaWFsLWNhc2UgaXRcbiAgICAvLyBpbiBhIHdheSB0aGF0IHN1cnZpdmVzIG1pbmlmaWNhdGlvbi5cbiAgICAvLyBqcUxpdGVFbXB0eSB0YWtlcyBubyBhcmd1bWVudHMgYnV0IGlzIGEgc2V0dGVyLlxuICAgIGlmIChmbiAhPT0ganFMaXRlRW1wdHkgJiZcbiAgICAgICAgKGlzVW5kZWZpbmVkKChmbi5sZW5ndGggPT09IDIgJiYgKGZuICE9PSBqcUxpdGVIYXNDbGFzcyAmJiBmbiAhPT0ganFMaXRlQ29udHJvbGxlcikpID8gYXJnMSA6IGFyZzIpKSkge1xuICAgICAgaWYgKGlzT2JqZWN0KGFyZzEpKSB7XG5cbiAgICAgICAgLy8gd2UgYXJlIGEgd3JpdGUsIGJ1dCB0aGUgb2JqZWN0IHByb3BlcnRpZXMgYXJlIHRoZSBrZXkvdmFsdWVzXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBub2RlQ291bnQ7IGkrKykge1xuICAgICAgICAgIGlmIChmbiA9PT0ganFMaXRlRGF0YSkge1xuICAgICAgICAgICAgLy8gZGF0YSgpIHRha2VzIHRoZSB3aG9sZSBvYmplY3QgaW4galF1ZXJ5XG4gICAgICAgICAgICBmbih0aGlzW2ldLCBhcmcxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gYXJnMSkge1xuICAgICAgICAgICAgICBmbih0aGlzW2ldLCBrZXksIGFyZzFba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJldHVybiBzZWxmIGZvciBjaGFpbmluZ1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHdlIGFyZSBhIHJlYWQsIHNvIHJlYWQgdGhlIGZpcnN0IGNoaWxkLlxuICAgICAgICAvLyBUT0RPOiBkbyB3ZSBzdGlsbCBuZWVkIHRoaXM/XG4gICAgICAgIHZhciB2YWx1ZSA9IGZuLiRkdjtcbiAgICAgICAgLy8gT25seSBpZiB3ZSBoYXZlICRkdiBkbyB3ZSBpdGVyYXRlIG92ZXIgYWxsLCBvdGhlcndpc2UgaXQgaXMganVzdCB0aGUgZmlyc3QgZWxlbWVudC5cbiAgICAgICAgdmFyIGpqID0gKGlzVW5kZWZpbmVkKHZhbHVlKSkgPyBNYXRoLm1pbihub2RlQ291bnQsIDEpIDogbm9kZUNvdW50O1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGpqOyBqKyspIHtcbiAgICAgICAgICB2YXIgbm9kZVZhbHVlID0gZm4odGhpc1tqXSwgYXJnMSwgYXJnMik7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZSA/IHZhbHVlICsgbm9kZVZhbHVlIDogbm9kZVZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gd2UgYXJlIGEgd3JpdGUsIHNvIGFwcGx5IHRvIGFsbCBjaGlsZHJlblxuICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGVDb3VudDsgaSsrKSB7XG4gICAgICAgIGZuKHRoaXNbaV0sIGFyZzEsIGFyZzIpO1xuICAgICAgfVxuICAgICAgLy8gcmV0dXJuIHNlbGYgZm9yIGNoYWluaW5nXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH07XG59KTtcblxuZnVuY3Rpb24gY3JlYXRlRXZlbnRIYW5kbGVyKGVsZW1lbnQsIGV2ZW50cykge1xuICB2YXIgZXZlbnRIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQsIHR5cGUpIHtcbiAgICAvLyBqUXVlcnkgc3BlY2lmaWMgYXBpXG4gICAgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXZlbnQuZGVmYXVsdFByZXZlbnRlZDtcbiAgICB9O1xuXG4gICAgdmFyIGV2ZW50Rm5zID0gZXZlbnRzW3R5cGUgfHwgZXZlbnQudHlwZV07XG4gICAgdmFyIGV2ZW50Rm5zTGVuZ3RoID0gZXZlbnRGbnMgPyBldmVudEZucy5sZW5ndGggOiAwO1xuXG4gICAgaWYgKCFldmVudEZuc0xlbmd0aCkgcmV0dXJuO1xuXG4gICAgaWYgKGlzVW5kZWZpbmVkKGV2ZW50LmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCkpIHtcbiAgICAgIHZhciBvcmlnaW5hbFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9IGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtcbiAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBldmVudC5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuXG4gICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcmlnaW5hbFN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbikge1xuICAgICAgICAgIG9yaWdpbmFsU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uLmNhbGwoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXZlbnQuaW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID09PSB0cnVlO1xuICAgIH07XG5cbiAgICAvLyBTb21lIGV2ZW50cyBoYXZlIHNwZWNpYWwgaGFuZGxlcnMgdGhhdCB3cmFwIHRoZSByZWFsIGhhbmRsZXJcbiAgICB2YXIgaGFuZGxlcldyYXBwZXIgPSBldmVudEZucy5zcGVjaWFsSGFuZGxlcldyYXBwZXIgfHwgZGVmYXVsdEhhbmRsZXJXcmFwcGVyO1xuXG4gICAgLy8gQ29weSBldmVudCBoYW5kbGVycyBpbiBjYXNlIGV2ZW50IGhhbmRsZXJzIGFycmF5IGlzIG1vZGlmaWVkIGR1cmluZyBleGVjdXRpb24uXG4gICAgaWYgKChldmVudEZuc0xlbmd0aCA+IDEpKSB7XG4gICAgICBldmVudEZucyA9IHNoYWxsb3dDb3B5KGV2ZW50Rm5zKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50Rm5zTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xuICAgICAgICBoYW5kbGVyV3JhcHBlcihlbGVtZW50LCBldmVudCwgZXZlbnRGbnNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBUT0RPOiB0aGlzIGlzIGEgaGFjayBmb3IgYW5ndWxhck1vY2tzL2NsZWFyRGF0YUNhY2hlIHRoYXQgbWFrZXMgaXQgcG9zc2libGUgdG8gZGVyZWdpc3RlciBhbGxcbiAgLy8gICAgICAgZXZlbnRzIG9uIGBlbGVtZW50YFxuICBldmVudEhhbmRsZXIuZWxlbSA9IGVsZW1lbnQ7XG4gIHJldHVybiBldmVudEhhbmRsZXI7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRIYW5kbGVyV3JhcHBlcihlbGVtZW50LCBldmVudCwgaGFuZGxlcikge1xuICBoYW5kbGVyLmNhbGwoZWxlbWVudCwgZXZlbnQpO1xufVxuXG5mdW5jdGlvbiBzcGVjaWFsTW91c2VIYW5kbGVyV3JhcHBlcih0YXJnZXQsIGV2ZW50LCBoYW5kbGVyKSB7XG4gIC8vIFJlZmVyIHRvIGpRdWVyeSdzIGltcGxlbWVudGF0aW9uIG9mIG1vdXNlZW50ZXIgJiBtb3VzZWxlYXZlXG4gIC8vIFJlYWQgYWJvdXQgbW91c2VlbnRlciBhbmQgbW91c2VsZWF2ZTpcbiAgLy8gaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9qcy9ldmVudHNfbW91c2UuaHRtbCNsaW5rOFxuICB2YXIgcmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQ7XG4gIC8vIEZvciBtb3VzZW50ZXIvbGVhdmUgY2FsbCB0aGUgaGFuZGxlciBpZiByZWxhdGVkIGlzIG91dHNpZGUgdGhlIHRhcmdldC5cbiAgLy8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcbiAgaWYgKCFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0YXJnZXQgJiYgIWpxTGl0ZUNvbnRhaW5zLmNhbGwodGFyZ2V0LCByZWxhdGVkKSkpIHtcbiAgICBoYW5kbGVyLmNhbGwodGFyZ2V0LCBldmVudCk7XG4gIH1cbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBGdW5jdGlvbnMgaXRlcmF0aW5nIHRyYXZlcnNhbC5cbi8vIFRoZXNlIGZ1bmN0aW9ucyBjaGFpbiByZXN1bHRzIGludG8gYSBzaW5nbGVcbi8vIHNlbGVjdG9yLlxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5mb3JFYWNoKHtcbiAgcmVtb3ZlRGF0YToganFMaXRlUmVtb3ZlRGF0YSxcblxuICBvbjogZnVuY3Rpb24ganFMaXRlT24oZWxlbWVudCwgdHlwZSwgZm4sIHVuc3VwcG9ydGVkKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh1bnN1cHBvcnRlZCkpIHRocm93IGpxTGl0ZU1pbkVycignb25hcmdzJywgJ2pxTGl0ZSNvbigpIGRvZXMgbm90IHN1cHBvcnQgdGhlIGBzZWxlY3RvcmAgb3IgYGV2ZW50RGF0YWAgcGFyYW1ldGVycycpO1xuXG4gICAgLy8gRG8gbm90IGFkZCBldmVudCBoYW5kbGVycyB0byBub24tZWxlbWVudHMgYmVjYXVzZSB0aGV5IHdpbGwgbm90IGJlIGNsZWFuZWQgdXAuXG4gICAgaWYgKCFqcUxpdGVBY2NlcHRzRGF0YShlbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBleHBhbmRvU3RvcmUgPSBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCwgdHJ1ZSk7XG4gICAgdmFyIGV2ZW50cyA9IGV4cGFuZG9TdG9yZS5ldmVudHM7XG4gICAgdmFyIGhhbmRsZSA9IGV4cGFuZG9TdG9yZS5oYW5kbGU7XG5cbiAgICBpZiAoIWhhbmRsZSkge1xuICAgICAgaGFuZGxlID0gZXhwYW5kb1N0b3JlLmhhbmRsZSA9IGNyZWF0ZUV2ZW50SGFuZGxlcihlbGVtZW50LCBldmVudHMpO1xuICAgIH1cblxuICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3N0cmluZy1pbmRleG9mLXZzLXNwbGl0XG4gICAgdmFyIHR5cGVzID0gdHlwZS5pbmRleE9mKCcgJykgPj0gMCA/IHR5cGUuc3BsaXQoJyAnKSA6IFt0eXBlXTtcbiAgICB2YXIgaSA9IHR5cGVzLmxlbmd0aDtcblxuICAgIHZhciBhZGRIYW5kbGVyID0gZnVuY3Rpb24odHlwZSwgc3BlY2lhbEhhbmRsZXJXcmFwcGVyLCBub0V2ZW50TGlzdGVuZXIpIHtcbiAgICAgIHZhciBldmVudEZucyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKCFldmVudEZucykge1xuICAgICAgICBldmVudEZucyA9IGV2ZW50c1t0eXBlXSA9IFtdO1xuICAgICAgICBldmVudEZucy5zcGVjaWFsSGFuZGxlcldyYXBwZXIgPSBzcGVjaWFsSGFuZGxlcldyYXBwZXI7XG4gICAgICAgIGlmICh0eXBlICE9PSAnJGRlc3Ryb3knICYmICFub0V2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBldmVudEZucy5wdXNoKGZuKTtcbiAgICB9O1xuXG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdHlwZSA9IHR5cGVzW2ldO1xuICAgICAgaWYgKE1PVVNFX0VWRU5UX01BUFt0eXBlXSkge1xuICAgICAgICBhZGRIYW5kbGVyKE1PVVNFX0VWRU5UX01BUFt0eXBlXSwgc3BlY2lhbE1vdXNlSGFuZGxlcldyYXBwZXIpO1xuICAgICAgICBhZGRIYW5kbGVyKHR5cGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhZGRIYW5kbGVyKHR5cGUpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBvZmY6IGpxTGl0ZU9mZixcblxuICBvbmU6IGZ1bmN0aW9uKGVsZW1lbnQsIHR5cGUsIGZuKSB7XG4gICAgZWxlbWVudCA9IGpxTGl0ZShlbGVtZW50KTtcblxuICAgIC8vYWRkIHRoZSBsaXN0ZW5lciB0d2ljZSBzbyB0aGF0IHdoZW4gaXQgaXMgY2FsbGVkXG4gICAgLy95b3UgY2FuIHJlbW92ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gYW5kIHN0aWxsIGJlXG4gICAgLy9hYmxlIHRvIGNhbGwgZWxlbWVudC5vZmYoZXYsIGZuKSBub3JtYWxseVxuICAgIGVsZW1lbnQub24odHlwZSwgZnVuY3Rpb24gb25GbigpIHtcbiAgICAgIGVsZW1lbnQub2ZmKHR5cGUsIGZuKTtcbiAgICAgIGVsZW1lbnQub2ZmKHR5cGUsIG9uRm4pO1xuICAgIH0pO1xuICAgIGVsZW1lbnQub24odHlwZSwgZm4pO1xuICB9LFxuXG4gIHJlcGxhY2VXaXRoOiBmdW5jdGlvbihlbGVtZW50LCByZXBsYWNlTm9kZSkge1xuICAgIHZhciBpbmRleCwgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgIGpxTGl0ZURlYWxvYyhlbGVtZW50KTtcbiAgICBmb3JFYWNoKG5ldyBKUUxpdGUocmVwbGFjZU5vZGUpLCBmdW5jdGlvbihub2RlKSB7XG4gICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2RlLCBpbmRleC5uZXh0U2libGluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5vZGUsIGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgaW5kZXggPSBub2RlO1xuICAgIH0pO1xuICB9LFxuXG4gIGNoaWxkcmVuOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgdmFyIGNoaWxkcmVuID0gW107XG4gICAgZm9yRWFjaChlbGVtZW50LmNoaWxkTm9kZXMsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfSxcblxuICBjb250ZW50czogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LmNvbnRlbnREb2N1bWVudCB8fCBlbGVtZW50LmNoaWxkTm9kZXMgfHwgW107XG4gIH0sXG5cbiAgYXBwZW5kOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7XG4gICAgdmFyIG5vZGVUeXBlID0gZWxlbWVudC5ub2RlVHlwZTtcbiAgICBpZiAobm9kZVR5cGUgIT09IE5PREVfVFlQRV9FTEVNRU5UICYmIG5vZGVUeXBlICE9PSBOT0RFX1RZUEVfRE9DVU1FTlRfRlJBR01FTlQpIHJldHVybjtcblxuICAgIG5vZGUgPSBuZXcgSlFMaXRlKG5vZGUpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbm9kZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBub2RlW2ldO1xuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9LFxuXG4gIHByZXBlbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHtcbiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcbiAgICAgIHZhciBpbmRleCA9IGVsZW1lbnQuZmlyc3RDaGlsZDtcbiAgICAgIGZvckVhY2gobmV3IEpRTGl0ZShub2RlKSwgZnVuY3Rpb24oY2hpbGQpIHtcbiAgICAgICAgZWxlbWVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIGluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICB3cmFwOiBmdW5jdGlvbihlbGVtZW50LCB3cmFwTm9kZSkge1xuICAgIGpxTGl0ZVdyYXBOb2RlKGVsZW1lbnQsIGpxTGl0ZSh3cmFwTm9kZSkuZXEoMCkuY2xvbmUoKVswXSk7XG4gIH0sXG5cbiAgcmVtb3ZlOiBqcUxpdGVSZW1vdmUsXG5cbiAgZGV0YWNoOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAganFMaXRlUmVtb3ZlKGVsZW1lbnQsIHRydWUpO1xuICB9LFxuXG4gIGFmdGVyOiBmdW5jdGlvbihlbGVtZW50LCBuZXdFbGVtZW50KSB7XG4gICAgdmFyIGluZGV4ID0gZWxlbWVudCwgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgbmV3RWxlbWVudCA9IG5ldyBKUUxpdGUobmV3RWxlbWVudCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG5ld0VsZW1lbnQubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICB2YXIgbm9kZSA9IG5ld0VsZW1lbnRbaV07XG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgaW5kZXgubmV4dFNpYmxpbmcpO1xuICAgICAgICBpbmRleCA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGFkZENsYXNzOiBqcUxpdGVBZGRDbGFzcyxcbiAgcmVtb3ZlQ2xhc3M6IGpxTGl0ZVJlbW92ZUNsYXNzLFxuXG4gIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBzZWxlY3RvciwgY29uZGl0aW9uKSB7XG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBmb3JFYWNoKHNlbGVjdG9yLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgY2xhc3NDb25kaXRpb24gPSBjb25kaXRpb247XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChjbGFzc0NvbmRpdGlvbikpIHtcbiAgICAgICAgICBjbGFzc0NvbmRpdGlvbiA9ICFqcUxpdGVIYXNDbGFzcyhlbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIChjbGFzc0NvbmRpdGlvbiA/IGpxTGl0ZUFkZENsYXNzIDoganFMaXRlUmVtb3ZlQ2xhc3MpKGVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgcGFyZW50OiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgdmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0RPQ1VNRU5UX0ZSQUdNRU5UID8gcGFyZW50IDogbnVsbDtcbiAgfSxcblxuICBuZXh0OiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICB9LFxuXG4gIGZpbmQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gICAgaWYgKGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHNlbGVjdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSxcblxuICBjbG9uZToganFMaXRlQ2xvbmUsXG5cbiAgdHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIGV2ZW50LCBleHRyYVBhcmFtZXRlcnMpIHtcblxuICAgIHZhciBkdW1teUV2ZW50LCBldmVudEZuc0NvcHksIGhhbmRsZXJBcmdzO1xuICAgIHZhciBldmVudE5hbWUgPSBldmVudC50eXBlIHx8IGV2ZW50O1xuICAgIHZhciBleHBhbmRvU3RvcmUgPSBqcUxpdGVFeHBhbmRvU3RvcmUoZWxlbWVudCk7XG4gICAgdmFyIGV2ZW50cyA9IGV4cGFuZG9TdG9yZSAmJiBleHBhbmRvU3RvcmUuZXZlbnRzO1xuICAgIHZhciBldmVudEZucyA9IGV2ZW50cyAmJiBldmVudHNbZXZlbnROYW1lXTtcblxuICAgIGlmIChldmVudEZucykge1xuICAgICAgLy8gQ3JlYXRlIGEgZHVtbXkgZXZlbnQgdG8gcGFzcyB0byB0aGUgaGFuZGxlcnNcbiAgICAgIGR1bW15RXZlbnQgPSB7XG4gICAgICAgIHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHsgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsgfSxcbiAgICAgICAgaXNEZWZhdWx0UHJldmVudGVkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdHJ1ZTsgfSxcbiAgICAgICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsgdGhpcy5pbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlOyB9LFxuICAgICAgICBpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9PT0gdHJ1ZTsgfSxcbiAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBub29wLFxuICAgICAgICB0eXBlOiBldmVudE5hbWUsXG4gICAgICAgIHRhcmdldDogZWxlbWVudFxuICAgICAgfTtcblxuICAgICAgLy8gSWYgYSBjdXN0b20gZXZlbnQgd2FzIHByb3ZpZGVkIHRoZW4gZXh0ZW5kIG91ciBkdW1teSBldmVudCB3aXRoIGl0XG4gICAgICBpZiAoZXZlbnQudHlwZSkge1xuICAgICAgICBkdW1teUV2ZW50ID0gZXh0ZW5kKGR1bW15RXZlbnQsIGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29weSBldmVudCBoYW5kbGVycyBpbiBjYXNlIGV2ZW50IGhhbmRsZXJzIGFycmF5IGlzIG1vZGlmaWVkIGR1cmluZyBleGVjdXRpb24uXG4gICAgICBldmVudEZuc0NvcHkgPSBzaGFsbG93Q29weShldmVudEZucyk7XG4gICAgICBoYW5kbGVyQXJncyA9IGV4dHJhUGFyYW1ldGVycyA/IFtkdW1teUV2ZW50XS5jb25jYXQoZXh0cmFQYXJhbWV0ZXJzKSA6IFtkdW1teUV2ZW50XTtcblxuICAgICAgZm9yRWFjaChldmVudEZuc0NvcHksIGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIGlmICghZHVtbXlFdmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgICAgZm4uYXBwbHkoZWxlbWVudCwgaGFuZGxlckFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0sIGZ1bmN0aW9uKGZuLCBuYW1lKSB7XG4gIC8qKlxuICAgKiBjaGFpbmluZyBmdW5jdGlvbnNcbiAgICovXG4gIEpRTGl0ZS5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbihhcmcxLCBhcmcyLCBhcmczKSB7XG4gICAgdmFyIHZhbHVlO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gZm4odGhpc1tpXSwgYXJnMSwgYXJnMiwgYXJnMyk7XG4gICAgICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgLy8gYW55IGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYSB2YWx1ZSBuZWVkcyB0byBiZSB3cmFwcGVkXG4gICAgICAgICAgdmFsdWUgPSBqcUxpdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqcUxpdGVBZGROb2Rlcyh2YWx1ZSwgZm4odGhpc1tpXSwgYXJnMSwgYXJnMiwgYXJnMykpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcztcbiAgfTtcbn0pO1xuXG4vLyBiaW5kIGxlZ2FjeSBiaW5kL3VuYmluZCB0byBvbi9vZmZcbkpRTGl0ZS5wcm90b3R5cGUuYmluZCA9IEpRTGl0ZS5wcm90b3R5cGUub247XG5KUUxpdGUucHJvdG90eXBlLnVuYmluZCA9IEpRTGl0ZS5wcm90b3R5cGUub2ZmO1xuXG5cbi8vIFByb3ZpZGVyIGZvciBwcml2YXRlICQkanFMaXRlIHNlcnZpY2Vcbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJCRqcUxpdGVQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24gJCRqcUxpdGUoKSB7XG4gICAgcmV0dXJuIGV4dGVuZChKUUxpdGUsIHtcbiAgICAgIGhhc0NsYXNzOiBmdW5jdGlvbihub2RlLCBjbGFzc2VzKSB7XG4gICAgICAgIGlmIChub2RlLmF0dHIpIG5vZGUgPSBub2RlWzBdO1xuICAgICAgICByZXR1cm4ganFMaXRlSGFzQ2xhc3Mobm9kZSwgY2xhc3Nlcyk7XG4gICAgICB9LFxuICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKG5vZGUsIGNsYXNzZXMpIHtcbiAgICAgICAgaWYgKG5vZGUuYXR0cikgbm9kZSA9IG5vZGVbMF07XG4gICAgICAgIHJldHVybiBqcUxpdGVBZGRDbGFzcyhub2RlLCBjbGFzc2VzKTtcbiAgICAgIH0sXG4gICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24obm9kZSwgY2xhc3Nlcykge1xuICAgICAgICBpZiAobm9kZS5hdHRyKSBub2RlID0gbm9kZVswXTtcbiAgICAgICAgcmV0dXJuIGpxTGl0ZVJlbW92ZUNsYXNzKG5vZGUsIGNsYXNzZXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xufVxuXG4vKipcbiAqIENvbXB1dGVzIGEgaGFzaCBvZiBhbiAnb2JqJy5cbiAqIEhhc2ggb2YgYTpcbiAqICBzdHJpbmcgaXMgc3RyaW5nXG4gKiAgbnVtYmVyIGlzIG51bWJlciBhcyBzdHJpbmdcbiAqICBvYmplY3QgaXMgZWl0aGVyIHJlc3VsdCBvZiBjYWxsaW5nICQkaGFzaEtleSBmdW5jdGlvbiBvbiB0aGUgb2JqZWN0IG9yIHVuaXF1ZWx5IGdlbmVyYXRlZCBpZCxcbiAqICAgICAgICAgdGhhdCBpcyBhbHNvIGFzc2lnbmVkIHRvIHRoZSAkJGhhc2hLZXkgcHJvcGVydHkgb2YgdGhlIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0gb2JqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBoYXNoIHN0cmluZyBzdWNoIHRoYXQgdGhlIHNhbWUgaW5wdXQgd2lsbCBoYXZlIHRoZSBzYW1lIGhhc2ggc3RyaW5nLlxuICogICAgICAgICBUaGUgcmVzdWx0aW5nIHN0cmluZyBrZXkgaXMgaW4gJ3R5cGU6aGFzaEtleScgZm9ybWF0LlxuICovXG5mdW5jdGlvbiBoYXNoS2V5KG9iaiwgbmV4dFVpZEZuKSB7XG4gIHZhciBrZXkgPSBvYmogJiYgb2JqLiQkaGFzaEtleTtcblxuICBpZiAoa2V5KSB7XG4gICAgaWYgKHR5cGVvZiBrZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGtleSA9IG9iai4kJGhhc2hLZXkoKTtcbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuXG4gIHZhciBvYmpUeXBlID0gdHlwZW9mIG9iajtcbiAgaWYgKG9ialR5cGUgPT09ICdmdW5jdGlvbicgfHwgKG9ialR5cGUgPT09ICdvYmplY3QnICYmIG9iaiAhPT0gbnVsbCkpIHtcbiAgICBrZXkgPSBvYmouJCRoYXNoS2V5ID0gb2JqVHlwZSArICc6JyArIChuZXh0VWlkRm4gfHwgbmV4dFVpZCkoKTtcbiAgfSBlbHNlIHtcbiAgICBrZXkgPSBvYmpUeXBlICsgJzonICsgb2JqO1xuICB9XG5cbiAgcmV0dXJuIGtleTtcbn1cblxuLy8gQSBtaW5pbWFsIEVTMjAxNSBNYXAgaW1wbGVtZW50YXRpb24uXG4vLyBTaG91bGQgYmUgYnVnL2ZlYXR1cmUgZXF1aXZhbGVudCB0byB0aGUgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBvZiBzdXBwb3J0ZWQgYnJvd3NlcnNcbi8vIChmb3IgdGhlIGZlYXR1cmVzIHJlcXVpcmVkIGluIEFuZ3VsYXIpLlxuLy8gU2VlIGh0dHBzOi8va2FuZ2F4LmdpdGh1Yi5pby9jb21wYXQtdGFibGUvZXM2LyN0ZXN0LU1hcFxudmFyIG5hbktleSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5mdW5jdGlvbiBOZ01hcFNoaW0oKSB7XG4gIHRoaXMuX2tleXMgPSBbXTtcbiAgdGhpcy5fdmFsdWVzID0gW107XG4gIHRoaXMuX2xhc3RLZXkgPSBOYU47XG4gIHRoaXMuX2xhc3RJbmRleCA9IC0xO1xufVxuTmdNYXBTaGltLnByb3RvdHlwZSA9IHtcbiAgX2lkeDogZnVuY3Rpb24oa2V5KSB7XG4gICAgaWYgKGtleSA9PT0gdGhpcy5fbGFzdEtleSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2xhc3RJbmRleDtcbiAgICB9XG4gICAgdGhpcy5fbGFzdEtleSA9IGtleTtcbiAgICB0aGlzLl9sYXN0SW5kZXggPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcbiAgICByZXR1cm4gdGhpcy5fbGFzdEluZGV4O1xuICB9LFxuICBfdHJhbnNmb3JtS2V5OiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gaXNOdW1iZXJOYU4oa2V5KSA/IG5hbktleSA6IGtleTtcbiAgfSxcbiAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICBrZXkgPSB0aGlzLl90cmFuc2Zvcm1LZXkoa2V5KTtcbiAgICB2YXIgaWR4ID0gdGhpcy5faWR4KGtleSk7XG4gICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgIHJldHVybiB0aGlzLl92YWx1ZXNbaWR4XTtcbiAgICB9XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgIGtleSA9IHRoaXMuX3RyYW5zZm9ybUtleShrZXkpO1xuICAgIHZhciBpZHggPSB0aGlzLl9pZHgoa2V5KTtcbiAgICBpZiAoaWR4ID09PSAtMSkge1xuICAgICAgaWR4ID0gdGhpcy5fbGFzdEluZGV4ID0gdGhpcy5fa2V5cy5sZW5ndGg7XG4gICAgfVxuICAgIHRoaXMuX2tleXNbaWR4XSA9IGtleTtcbiAgICB0aGlzLl92YWx1ZXNbaWR4XSA9IHZhbHVlO1xuXG4gICAgLy8gU3VwcG9ydDogSUUxMVxuICAgIC8vIERvIG5vdCBgcmV0dXJuIHRoaXNgIHRvIHNpbXVsYXRlIHRoZSBwYXJ0aWFsIElFMTEgaW1wbGVtZW50YXRpb25cbiAgfSxcbiAgZGVsZXRlOiBmdW5jdGlvbihrZXkpIHtcbiAgICBrZXkgPSB0aGlzLl90cmFuc2Zvcm1LZXkoa2V5KTtcbiAgICB2YXIgaWR4ID0gdGhpcy5faWR4KGtleSk7XG4gICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fa2V5cy5zcGxpY2UoaWR4LCAxKTtcbiAgICB0aGlzLl92YWx1ZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgdGhpcy5fbGFzdEtleSA9IE5hTjtcbiAgICB0aGlzLl9sYXN0SW5kZXggPSAtMTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuLy8gRm9yIG5vdywgYWx3YXlzIHVzZSBgTmdNYXBTaGltYCwgZXZlbiBpZiBgd2luZG93Lk1hcGAgaXMgYXZhaWxhYmxlLiBTb21lIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnNcbi8vIGFyZSBzdGlsbCBidWdneSAob2Z0ZW4gaW4gc3VidGxlIHdheXMpIGFuZCBjYW4gY2F1c2UgaGFyZC10by1kZWJ1ZyBmYWlsdXJlcy4gV2hlbiBuYXRpdmUgYE1hcGBcbi8vIGltcGxlbWVudGF0aW9ucyBnZXQgbW9yZSBzdGFibGUsIHdlIGNhbiByZWNvbnNpZGVyIHN3aXRjaGluZyB0byBgd2luZG93Lk1hcGAgKHdoZW4gYXZhaWxhYmxlKS5cbnZhciBOZ01hcCA9IE5nTWFwU2hpbTtcblxudmFyICQkTWFwUHJvdmlkZXIgPSBbLyoqIEB0aGlzICovZnVuY3Rpb24oKSB7XG4gIHRoaXMuJGdldCA9IFtmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTmdNYXA7XG4gIH1dO1xufV07XG5cbi8qKlxuICogQG5nZG9jIGZ1bmN0aW9uXG4gKiBAbW9kdWxlIG5nXG4gKiBAbmFtZSBhbmd1bGFyLmluamVjdG9yXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ3JlYXRlcyBhbiBpbmplY3RvciBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCBmb3IgcmV0cmlldmluZyBzZXJ2aWNlcyBhcyB3ZWxsIGFzIGZvclxuICogZGVwZW5kZW5jeSBpbmplY3Rpb24gKHNlZSB7QGxpbmsgZ3VpZGUvZGkgZGVwZW5kZW5jeSBpbmplY3Rpb259KS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBtb2R1bGVzIEEgbGlzdCBvZiBtb2R1bGUgZnVuY3Rpb25zIG9yIHRoZWlyIGFsaWFzZXMuIFNlZVxuICogICAgIHtAbGluayBhbmd1bGFyLm1vZHVsZX0uIFRoZSBgbmdgIG1vZHVsZSBtdXN0IGJlIGV4cGxpY2l0bHkgYWRkZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbc3RyaWN0RGk9ZmFsc2VdIFdoZXRoZXIgdGhlIGluamVjdG9yIHNob3VsZCBiZSBpbiBzdHJpY3QgbW9kZSwgd2hpY2hcbiAqICAgICBkaXNhbGxvd3MgYXJndW1lbnQgbmFtZSBhbm5vdGF0aW9uIGluZmVyZW5jZS5cbiAqIEByZXR1cm5zIHtpbmplY3Rvcn0gSW5qZWN0b3Igb2JqZWN0LiBTZWUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uXG4gKlxuICogQGV4YW1wbGVcbiAqIFR5cGljYWwgdXNhZ2VcbiAqIGBgYGpzXG4gKiAgIC8vIGNyZWF0ZSBhbiBpbmplY3RvclxuICogICB2YXIgJGluamVjdG9yID0gYW5ndWxhci5pbmplY3RvcihbJ25nJ10pO1xuICpcbiAqICAgLy8gdXNlIHRoZSBpbmplY3RvciB0byBraWNrIG9mZiB5b3VyIGFwcGxpY2F0aW9uXG4gKiAgIC8vIHVzZSB0aGUgdHlwZSBpbmZlcmVuY2UgdG8gYXV0byBpbmplY3QgYXJndW1lbnRzLCBvciB1c2UgaW1wbGljaXQgaW5qZWN0aW9uXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oJHJvb3RTY29wZSwgJGNvbXBpbGUsICRkb2N1bWVudCkge1xuICogICAgICRjb21waWxlKCRkb2N1bWVudCkoJHJvb3RTY29wZSk7XG4gKiAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogU29tZXRpbWVzIHlvdSB3YW50IHRvIGdldCBhY2Nlc3MgdG8gdGhlIGluamVjdG9yIG9mIGEgY3VycmVudGx5IHJ1bm5pbmcgQW5ndWxhciBhcHBcbiAqIGZyb20gb3V0c2lkZSBBbmd1bGFyLiBQZXJoYXBzLCB5b3Ugd2FudCB0byBpbmplY3QgYW5kIGNvbXBpbGUgc29tZSBtYXJrdXAgYWZ0ZXIgdGhlXG4gKiBhcHBsaWNhdGlvbiBoYXMgYmVlbiBib290c3RyYXBwZWQuIFlvdSBjYW4gZG8gdGhpcyB1c2luZyB0aGUgZXh0cmEgYGluamVjdG9yKClgIGFkZGVkXG4gKiB0byBKUXVlcnkvanFMaXRlIGVsZW1lbnRzLiBTZWUge0BsaW5rIGFuZ3VsYXIuZWxlbWVudH0uXG4gKlxuICogKlRoaXMgaXMgZmFpcmx5IHJhcmUgYnV0IGNvdWxkIGJlIHRoZSBjYXNlIGlmIGEgdGhpcmQgcGFydHkgbGlicmFyeSBpcyBpbmplY3RpbmcgdGhlXG4gKiBtYXJrdXAuKlxuICpcbiAqIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSBhIG5ldyBibG9jayBvZiBIVE1MIGNvbnRhaW5pbmcgYSBgbmctY29udHJvbGxlcmBcbiAqIGRpcmVjdGl2ZSBpcyBhZGRlZCB0byB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCBib2R5IGJ5IEpRdWVyeS4gV2UgdGhlbiBjb21waWxlIGFuZCBsaW5rXG4gKiBpdCBpbnRvIHRoZSBjdXJyZW50IEFuZ3VsYXJKUyBzY29wZS5cbiAqXG4gKiBgYGBqc1xuICogdmFyICRkaXYgPSAkKCc8ZGl2IG5nLWNvbnRyb2xsZXI9XCJNeUN0cmxcIj57e2NvbnRlbnQubGFiZWx9fTwvZGl2PicpO1xuICogJChkb2N1bWVudC5ib2R5KS5hcHBlbmQoJGRpdik7XG4gKlxuICogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5pbmplY3RvcigpLmludm9rZShmdW5jdGlvbigkY29tcGlsZSkge1xuICogICB2YXIgc2NvcGUgPSBhbmd1bGFyLmVsZW1lbnQoJGRpdikuc2NvcGUoKTtcbiAqICAgJGNvbXBpbGUoJGRpdikoc2NvcGUpO1xuICogfSk7XG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1vZHVsZVxuICogQG5hbWUgYXV0b1xuICogQGluc3RhbGxhdGlvblxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogSW1wbGljaXQgbW9kdWxlIHdoaWNoIGdldHMgYXV0b21hdGljYWxseSBhZGRlZCB0byBlYWNoIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LlxuICovXG5cbnZhciBBUlJPV19BUkcgPSAvXihbXihdKz8pPT4vO1xudmFyIEZOX0FSR1MgPSAvXlteKF0qXFwoXFxzKihbXildKilcXCkvbTtcbnZhciBGTl9BUkdfU1BMSVQgPSAvLC87XG52YXIgRk5fQVJHID0gL15cXHMqKF8/KShcXFMrPylcXDFcXHMqJC87XG52YXIgU1RSSVBfQ09NTUVOVFMgPSAvKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWc7XG52YXIgJGluamVjdG9yTWluRXJyID0gbWluRXJyKCckaW5qZWN0b3InKTtcblxuZnVuY3Rpb24gc3RyaW5naWZ5Rm4oZm4pIHtcbiAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGZuKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFyZ3MoZm4pIHtcbiAgdmFyIGZuVGV4dCA9IHN0cmluZ2lmeUZuKGZuKS5yZXBsYWNlKFNUUklQX0NPTU1FTlRTLCAnJyksXG4gICAgICBhcmdzID0gZm5UZXh0Lm1hdGNoKEFSUk9XX0FSRykgfHwgZm5UZXh0Lm1hdGNoKEZOX0FSR1MpO1xuICByZXR1cm4gYXJncztcbn1cblxuZnVuY3Rpb24gYW5vbkZuKGZuKSB7XG4gIC8vIEZvciBhbm9ueW1vdXMgZnVuY3Rpb25zLCBzaG93aW5nIGF0IHRoZSB2ZXJ5IGxlYXN0IHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgY2FuIGhlbHAgaW5cbiAgLy8gZGVidWdnaW5nLlxuICB2YXIgYXJncyA9IGV4dHJhY3RBcmdzKGZuKTtcbiAgaWYgKGFyZ3MpIHtcbiAgICByZXR1cm4gJ2Z1bmN0aW9uKCcgKyAoYXJnc1sxXSB8fCAnJykucmVwbGFjZSgvW1xcc1xcclxcbl0rLywgJyAnKSArICcpJztcbiAgfVxuICByZXR1cm4gJ2ZuJztcbn1cblxuZnVuY3Rpb24gYW5ub3RhdGUoZm4sIHN0cmljdERpLCBuYW1lKSB7XG4gIHZhciAkaW5qZWN0LFxuICAgICAgYXJnRGVjbCxcbiAgICAgIGxhc3Q7XG5cbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmICghKCRpbmplY3QgPSBmbi4kaW5qZWN0KSkge1xuICAgICAgJGluamVjdCA9IFtdO1xuICAgICAgaWYgKGZuLmxlbmd0aCkge1xuICAgICAgICBpZiAoc3RyaWN0RGkpIHtcbiAgICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpIHx8ICFuYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gZm4ubmFtZSB8fCBhbm9uRm4oZm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3N0cmljdGRpJyxcbiAgICAgICAgICAgICd7MH0gaXMgbm90IHVzaW5nIGV4cGxpY2l0IGFubm90YXRpb24gYW5kIGNhbm5vdCBiZSBpbnZva2VkIGluIHN0cmljdCBtb2RlJywgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXJnRGVjbCA9IGV4dHJhY3RBcmdzKGZuKTtcbiAgICAgICAgZm9yRWFjaChhcmdEZWNsWzFdLnNwbGl0KEZOX0FSR19TUExJVCksIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgIGFyZy5yZXBsYWNlKEZOX0FSRywgZnVuY3Rpb24oYWxsLCB1bmRlcnNjb3JlLCBuYW1lKSB7XG4gICAgICAgICAgICAkaW5qZWN0LnB1c2gobmFtZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZm4uJGluamVjdCA9ICRpbmplY3Q7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzQXJyYXkoZm4pKSB7XG4gICAgbGFzdCA9IGZuLmxlbmd0aCAtIDE7XG4gICAgYXNzZXJ0QXJnRm4oZm5bbGFzdF0sICdmbicpO1xuICAgICRpbmplY3QgPSBmbi5zbGljZSgwLCBsYXN0KTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnRBcmdGbihmbiwgJ2ZuJywgdHJ1ZSk7XG4gIH1cbiAgcmV0dXJuICRpbmplY3Q7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaW5qZWN0b3JcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgJGluamVjdG9yYCBpcyB1c2VkIHRvIHJldHJpZXZlIG9iamVjdCBpbnN0YW5jZXMgYXMgZGVmaW5lZCBieVxuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUgcHJvdmlkZXJ9LCBpbnN0YW50aWF0ZSB0eXBlcywgaW52b2tlIG1ldGhvZHMsXG4gKiBhbmQgbG9hZCBtb2R1bGVzLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgYWx3YXlzIGhvbGRzIHRydWU6XG4gKlxuICogYGBganNcbiAqICAgdmFyICRpbmplY3RvciA9IGFuZ3VsYXIuaW5qZWN0b3IoKTtcbiAqICAgZXhwZWN0KCRpbmplY3Rvci5nZXQoJyRpbmplY3RvcicpKS50b0JlKCRpbmplY3Rvcik7XG4gKiAgIGV4cGVjdCgkaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICogICAgIHJldHVybiAkaW5qZWN0b3I7XG4gKiAgIH0pKS50b0JlKCRpbmplY3Rvcik7XG4gKiBgYGBcbiAqXG4gKiAjIyBJbmplY3Rpb24gRnVuY3Rpb24gQW5ub3RhdGlvblxuICpcbiAqIEphdmFTY3JpcHQgZG9lcyBub3QgaGF2ZSBhbm5vdGF0aW9ucywgYW5kIGFubm90YXRpb25zIGFyZSBuZWVkZWQgZm9yIGRlcGVuZGVuY3kgaW5qZWN0aW9uLiBUaGVcbiAqIGZvbGxvd2luZyBhcmUgYWxsIHZhbGlkIHdheXMgb2YgYW5ub3RhdGluZyBmdW5jdGlvbiB3aXRoIGluamVjdGlvbiBhcmd1bWVudHMgYW5kIGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIGBgYGpzXG4gKiAgIC8vIGluZmVycmVkIChvbmx5IHdvcmtzIGlmIGNvZGUgbm90IG1pbmlmaWVkL29iZnVzY2F0ZWQpXG4gKiAgICRpbmplY3Rvci5pbnZva2UoZnVuY3Rpb24oc2VydmljZUEpe30pO1xuICpcbiAqICAgLy8gYW5ub3RhdGVkXG4gKiAgIGZ1bmN0aW9uIGV4cGxpY2l0KHNlcnZpY2VBKSB7fTtcbiAqICAgZXhwbGljaXQuJGluamVjdCA9IFsnc2VydmljZUEnXTtcbiAqICAgJGluamVjdG9yLmludm9rZShleHBsaWNpdCk7XG4gKlxuICogICAvLyBpbmxpbmVcbiAqICAgJGluamVjdG9yLmludm9rZShbJ3NlcnZpY2VBJywgZnVuY3Rpb24oc2VydmljZUEpe31dKTtcbiAqIGBgYFxuICpcbiAqICMjIyBJbmZlcmVuY2VcbiAqXG4gKiBJbiBKYXZhU2NyaXB0IGNhbGxpbmcgYHRvU3RyaW5nKClgIG9uIGEgZnVuY3Rpb24gcmV0dXJucyB0aGUgZnVuY3Rpb24gZGVmaW5pdGlvbi4gVGhlIGRlZmluaXRpb25cbiAqIGNhbiB0aGVuIGJlIHBhcnNlZCBhbmQgdGhlIGZ1bmN0aW9uIGFyZ3VtZW50cyBjYW4gYmUgZXh0cmFjdGVkLiBUaGlzIG1ldGhvZCBvZiBkaXNjb3ZlcmluZ1xuICogYW5ub3RhdGlvbnMgaXMgZGlzYWxsb3dlZCB3aGVuIHRoZSBpbmplY3RvciBpcyBpbiBzdHJpY3QgbW9kZS5cbiAqICpOT1RFOiogVGhpcyBkb2VzIG5vdCB3b3JrIHdpdGggbWluaWZpY2F0aW9uLCBhbmQgb2JmdXNjYXRpb24gdG9vbHMgc2luY2UgdGhlc2UgdG9vbHMgY2hhbmdlIHRoZVxuICogYXJndW1lbnQgbmFtZXMuXG4gKlxuICogIyMjIGAkaW5qZWN0YCBBbm5vdGF0aW9uXG4gKiBCeSBhZGRpbmcgYW4gYCRpbmplY3RgIHByb3BlcnR5IG9udG8gYSBmdW5jdGlvbiB0aGUgaW5qZWN0aW9uIHBhcmFtZXRlcnMgY2FuIGJlIHNwZWNpZmllZC5cbiAqXG4gKiAjIyMgSW5saW5lXG4gKiBBcyBhbiBhcnJheSBvZiBpbmplY3Rpb24gbmFtZXMsIHdoZXJlIHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGFycmF5IGlzIHRoZSBmdW5jdGlvbiB0byBjYWxsLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3BlcnR5XG4gKiBAbmFtZSAkaW5qZWN0b3IjbW9kdWxlc1xuICogQHR5cGUge09iamVjdH1cbiAqIEBkZXNjcmlwdGlvblxuICogQSBoYXNoIGNvbnRhaW5pbmcgYWxsIHRoZSBtb2R1bGVzIHRoYXQgaGF2ZSBiZWVuIGxvYWRlZCBpbnRvIHRoZVxuICogJGluamVjdG9yLlxuICpcbiAqIFlvdSBjYW4gdXNlIHRoaXMgcHJvcGVydHkgdG8gZmluZCBvdXQgaW5mb3JtYXRpb24gYWJvdXQgYSBtb2R1bGUgdmlhIHRoZVxuICoge0BsaW5rIGFuZ3VsYXIuTW9kdWxlI2luZm8gYG15TW9kdWxlLmluZm8oLi4uKWB9IG1ldGhvZC5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIHZhciBpbmZvID0gJGluamVjdG9yLm1vZHVsZXNbJ25nQW5pbWF0ZSddLmluZm8oKTtcbiAqIGBgYFxuICpcbiAqICoqRG8gbm90IHVzZSB0aGlzIHByb3BlcnR5IHRvIGF0dGVtcHQgdG8gbW9kaWZ5IHRoZSBtb2R1bGVzIGFmdGVyIHRoZSBhcHBsaWNhdGlvblxuICogaGFzIGJlZW4gYm9vdHN0cmFwcGVkLioqXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNnZXRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiBhbiBpbnN0YW5jZSBvZiB0aGUgc2VydmljZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UgdG8gcmV0cmlldmUuXG4gKiBAcGFyYW0ge3N0cmluZz19IGNhbGxlciBBbiBvcHRpb25hbCBzdHJpbmcgdG8gcHJvdmlkZSB0aGUgb3JpZ2luIG9mIHRoZSBmdW5jdGlvbiBjYWxsIGZvciBlcnJvciBtZXNzYWdlcy5cbiAqIEByZXR1cm4geyp9IFRoZSBpbnN0YW5jZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNpbnZva2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEludm9rZSB0aGUgbWV0aG9kIGFuZCBzdXBwbHkgdGhlIG1ldGhvZCBhcmd1bWVudHMgZnJvbSB0aGUgYCRpbmplY3RvcmAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZm4gVGhlIGluamVjdGFibGUgZnVuY3Rpb24gdG8gaW52b2tlLiBGdW5jdGlvbiBwYXJhbWV0ZXJzIGFyZVxuICogICBpbmplY3RlZCBhY2NvcmRpbmcgdG8gdGhlIHtAbGluayBndWlkZS9kaSAkaW5qZWN0IEFubm90YXRpb259IHJ1bGVzLlxuICogQHBhcmFtIHtPYmplY3Q9fSBzZWxmIFRoZSBgdGhpc2AgZm9yIHRoZSBpbnZva2VkIG1ldGhvZC5cbiAqIEBwYXJhbSB7T2JqZWN0PX0gbG9jYWxzIE9wdGlvbmFsIG9iamVjdC4gSWYgcHJlc2V0IHRoZW4gYW55IGFyZ3VtZW50IG5hbWVzIGFyZSByZWFkIGZyb20gdGhpc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0IGZpcnN0LCBiZWZvcmUgdGhlIGAkaW5qZWN0b3JgIGlzIGNvbnN1bHRlZC5cbiAqIEByZXR1cm5zIHsqfSB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhlIGludm9rZWQgYGZuYCBmdW5jdGlvbi5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNoYXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFsbG93cyB0aGUgdXNlciB0byBxdWVyeSBpZiB0aGUgcGFydGljdWxhciBzZXJ2aWNlIGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSBzZXJ2aWNlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge2Jvb2xlYW59IGB0cnVlYCBpZiBpbmplY3RvciBoYXMgZ2l2ZW4gc2VydmljZS5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRpbmplY3RvciNpbnN0YW50aWF0ZVxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgSlMgdHlwZS4gVGhlIG1ldGhvZCB0YWtlcyBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLCBpbnZva2VzIHRoZSBuZXdcbiAqIG9wZXJhdG9yLCBhbmQgc3VwcGxpZXMgYWxsIG9mIHRoZSBhcmd1bWVudHMgdG8gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGFzIHNwZWNpZmllZCBieSB0aGVcbiAqIGNvbnN0cnVjdG9yIGFubm90YXRpb24uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gVHlwZSBBbm5vdGF0ZWQgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge09iamVjdD19IGxvY2FscyBPcHRpb25hbCBvYmplY3QuIElmIHByZXNldCB0aGVuIGFueSBhcmd1bWVudCBuYW1lcyBhcmUgcmVhZCBmcm9tIHRoaXNcbiAqIG9iamVjdCBmaXJzdCwgYmVmb3JlIHRoZSBgJGluamVjdG9yYCBpcyBjb25zdWx0ZWQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBuZXcgaW5zdGFuY2Ugb2YgYFR5cGVgLlxuICovXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2Fubm90YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHNlcnZpY2UgbmFtZXMgd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIHJlcXVlc3RpbmcgZm9yIGluamVjdGlvbi4gVGhpcyBBUEkgaXNcbiAqIHVzZWQgYnkgdGhlIGluamVjdG9yIHRvIGRldGVybWluZSB3aGljaCBzZXJ2aWNlcyBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGZ1bmN0aW9uIHdoZW4gdGhlXG4gKiBmdW5jdGlvbiBpcyBpbnZva2VkLiBUaGVyZSBhcmUgdGhyZWUgd2F5cyBpbiB3aGljaCB0aGUgZnVuY3Rpb24gY2FuIGJlIGFubm90YXRlZCB3aXRoIHRoZSBuZWVkZWRcbiAqIGRlcGVuZGVuY2llcy5cbiAqXG4gKiAjIyMjIEFyZ3VtZW50IG5hbWVzXG4gKlxuICogVGhlIHNpbXBsZXN0IGZvcm0gaXMgdG8gZXh0cmFjdCB0aGUgZGVwZW5kZW5jaWVzIGZyb20gdGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24uIFRoaXMgaXMgZG9uZVxuICogYnkgY29udmVydGluZyB0aGUgZnVuY3Rpb24gaW50byBhIHN0cmluZyB1c2luZyBgdG9TdHJpbmcoKWAgbWV0aG9kIGFuZCBleHRyYWN0aW5nIHRoZSBhcmd1bWVudFxuICogbmFtZXMuXG4gKiBgYGBqc1xuICogICAvLyBHaXZlblxuICogICBmdW5jdGlvbiBNeUNvbnRyb2xsZXIoJHNjb3BlLCAkcm91dGUpIHtcbiAqICAgICAvLyAuLi5cbiAqICAgfVxuICpcbiAqICAgLy8gVGhlblxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoTXlDb250cm9sbGVyKSkudG9FcXVhbChbJyRzY29wZScsICckcm91dGUnXSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGRpc2FsbG93IHRoaXMgbWV0aG9kIGJ5IHVzaW5nIHN0cmljdCBpbmplY3Rpb24gbW9kZS5cbiAqXG4gKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCB3b3JrIHdpdGggY29kZSBtaW5pZmljYXRpb24gLyBvYmZ1c2NhdGlvbi4gRm9yIHRoaXMgcmVhc29uIHRoZSBmb2xsb3dpbmdcbiAqIGFubm90YXRpb24gc3RyYXRlZ2llcyBhcmUgc3VwcG9ydGVkLlxuICpcbiAqICMjIyMgVGhlIGAkaW5qZWN0YCBwcm9wZXJ0eVxuICpcbiAqIElmIGEgZnVuY3Rpb24gaGFzIGFuIGAkaW5qZWN0YCBwcm9wZXJ0eSBhbmQgaXRzIHZhbHVlIGlzIGFuIGFycmF5IG9mIHN0cmluZ3MsIHRoZW4gdGhlIHN0cmluZ3NcbiAqIHJlcHJlc2VudCBuYW1lcyBvZiBzZXJ2aWNlcyB0byBiZSBpbmplY3RlZCBpbnRvIHRoZSBmdW5jdGlvbi5cbiAqIGBgYGpzXG4gKiAgIC8vIEdpdmVuXG4gKiAgIHZhciBNeUNvbnRyb2xsZXIgPSBmdW5jdGlvbihvYmZ1c2NhdGVkU2NvcGUsIG9iZnVzY2F0ZWRSb3V0ZSkge1xuICogICAgIC8vIC4uLlxuICogICB9XG4gKiAgIC8vIERlZmluZSBmdW5jdGlvbiBkZXBlbmRlbmNpZXNcbiAqICAgTXlDb250cm9sbGVyWyckaW5qZWN0J10gPSBbJyRzY29wZScsICckcm91dGUnXTtcbiAqXG4gKiAgIC8vIFRoZW5cbiAqICAgZXhwZWN0KGluamVjdG9yLmFubm90YXRlKE15Q29udHJvbGxlcikpLnRvRXF1YWwoWyckc2NvcGUnLCAnJHJvdXRlJ10pO1xuICogYGBgXG4gKlxuICogIyMjIyBUaGUgYXJyYXkgbm90YXRpb25cbiAqXG4gKiBJdCBpcyBvZnRlbiBkZXNpcmFibGUgdG8gaW5saW5lIEluamVjdGVkIGZ1bmN0aW9ucyBhbmQgdGhhdCdzIHdoZW4gc2V0dGluZyB0aGUgYCRpbmplY3RgIHByb3BlcnR5XG4gKiBpcyB2ZXJ5IGluY29udmVuaWVudC4gSW4gdGhlc2Ugc2l0dWF0aW9ucyB1c2luZyB0aGUgYXJyYXkgbm90YXRpb24gdG8gc3BlY2lmeSB0aGUgZGVwZW5kZW5jaWVzIGluXG4gKiBhIHdheSB0aGF0IHN1cnZpdmVzIG1pbmlmaWNhdGlvbiBpcyBhIGJldHRlciBjaG9pY2U6XG4gKlxuICogYGBganNcbiAqICAgLy8gV2Ugd2lzaCB0byB3cml0ZSB0aGlzIChub3QgbWluaWZpY2F0aW9uIC8gb2JmdXNjYXRpb24gc2FmZSlcbiAqICAgaW5qZWN0b3IuaW52b2tlKGZ1bmN0aW9uKCRjb21waWxlLCAkcm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH0pO1xuICpcbiAqICAgLy8gV2UgYXJlIGZvcmNlZCB0byB3cml0ZSBicmVhayBpbmxpbmluZ1xuICogICB2YXIgdG1wRm4gPSBmdW5jdGlvbihvYmZ1c2NhdGVkQ29tcGlsZSwgb2JmdXNjYXRlZFJvb3RTY29wZSkge1xuICogICAgIC8vIC4uLlxuICogICB9O1xuICogICB0bXBGbi4kaW5qZWN0ID0gWyckY29tcGlsZScsICckcm9vdFNjb3BlJ107XG4gKiAgIGluamVjdG9yLmludm9rZSh0bXBGbik7XG4gKlxuICogICAvLyBUbyBiZXR0ZXIgc3VwcG9ydCBpbmxpbmUgZnVuY3Rpb24gdGhlIGlubGluZSBhbm5vdGF0aW9uIGlzIHN1cHBvcnRlZFxuICogICBpbmplY3Rvci5pbnZva2UoWyckY29tcGlsZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24ob2JmQ29tcGlsZSwgb2JmUm9vdFNjb3BlKSB7XG4gKiAgICAgLy8gLi4uXG4gKiAgIH1dKTtcbiAqXG4gKiAgIC8vIFRoZXJlZm9yZVxuICogICBleHBlY3QoaW5qZWN0b3IuYW5ub3RhdGUoXG4gKiAgICAgIFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uKG9iZnVzXyRjb21waWxlLCBvYmZ1c18kcm9vdFNjb3BlKSB7fV0pXG4gKiAgICApLnRvRXF1YWwoWyckY29tcGlsZScsICckcm9vdFNjb3BlJ10pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxBcnJheS48c3RyaW5nfEZ1bmN0aW9uPn0gZm4gRnVuY3Rpb24gZm9yIHdoaWNoIGRlcGVuZGVudCBzZXJ2aWNlIG5hbWVzIG5lZWQgdG9cbiAqIGJlIHJldHJpZXZlZCBhcyBkZXNjcmliZWQgYWJvdmUuXG4gKlxuICogQHBhcmFtIHtib29sZWFuPX0gW3N0cmljdERpPWZhbHNlXSBEaXNhbGxvdyBhcmd1bWVudCBuYW1lIGFubm90YXRpb24gaW5mZXJlbmNlLlxuICpcbiAqIEByZXR1cm5zIHtBcnJheS48c3RyaW5nPn0gVGhlIG5hbWVzIG9mIHRoZSBzZXJ2aWNlcyB3aGljaCB0aGUgZnVuY3Rpb24gcmVxdWlyZXMuXG4gKi9cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGluamVjdG9yI2xvYWROZXdNb2R1bGVzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogKipUaGlzIGlzIGEgZGFuZ2Vyb3VzIEFQSSwgd2hpY2ggeW91IHVzZSBhdCB5b3VyIG93biByaXNrISoqXG4gKlxuICogQWRkIHRoZSBzcGVjaWZpZWQgbW9kdWxlcyB0byB0aGUgY3VycmVudCBpbmplY3Rvci5cbiAqXG4gKiBUaGlzIG1ldGhvZCB3aWxsIGFkZCBlYWNoIG9mIHRoZSBpbmplY3RhYmxlcyB0byB0aGUgaW5qZWN0b3IgYW5kIGV4ZWN1dGUgYWxsIG9mIHRoZSBjb25maWcgYW5kIHJ1blxuICogYmxvY2tzIGZvciBlYWNoIG1vZHVsZSBwYXNzZWQgdG8gdGhlIG1ldGhvZC5cbiAqXG4gKiBJZiBhIG1vZHVsZSBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZCBpbnRvIHRoZSBpbmplY3RvciB0aGVuIGl0IHdpbGwgbm90IGJlIGxvYWRlZCBhZ2Fpbi5cbiAqXG4gKiAqIFRoZSBhcHBsaWNhdGlvbiBkZXZlbG9wZXIgaXMgcmVzcG9uc2libGUgZm9yIGxvYWRpbmcgdGhlIGNvZGUgY29udGFpbmluZyB0aGUgbW9kdWxlczsgYW5kIGZvclxuICogZW5zdXJpbmcgdGhhdCBsYXp5IHNjcmlwdHMgYXJlIG5vdCBkb3dubG9hZGVkIGFuZCBleGVjdXRlZCBtb3JlIG9mdGVuIHRoYXQgZGVzaXJlZC5cbiAqICogUHJldmlvdXNseSBjb21waWxlZCBIVE1MIHdpbGwgbm90IGJlIGFmZmVjdGVkIGJ5IG5ld2x5IGxvYWRlZCBkaXJlY3RpdmVzLCBmaWx0ZXJzIGFuZCBjb21wb25lbnRzLlxuICogKiBNb2R1bGVzIGNhbm5vdCBiZSB1bmxvYWRlZC5cbiAqXG4gKiBZb3UgY2FuIHVzZSB7QGxpbmsgJGluamVjdG9yI21vZHVsZXMgYCRpbmplY3Rvci5tb2R1bGVzYH0gdG8gY2hlY2sgd2hldGhlciBhIG1vZHVsZSBoYXMgYmVlbiBsb2FkZWRcbiAqIGludG8gdGhlIGluamVjdG9yLCB3aGljaCBtYXkgaW5kaWNhdGUgd2hldGhlciB0aGUgc2NyaXB0IGhhcyBiZWVuIGV4ZWN1dGVkIGFscmVhZHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgaXMgYW4gZXhhbXBsZSBvZiBsb2FkaW5nIGEgYnVuZGxlIG9mIG1vZHVsZXMsIHdpdGggYSB1dGlsaXR5IG1ldGhvZCBjYWxsZWQgYGdldFNjcmlwdGA6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogYXBwLmZhY3RvcnkoJ2xvYWRNb2R1bGUnLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAqICAgcmV0dXJuIGZ1bmN0aW9uIGxvYWRNb2R1bGUobW9kdWxlTmFtZSwgYnVuZGxlVXJsKSB7XG4gKiAgICAgcmV0dXJuIGdldFNjcmlwdChidW5kbGVVcmwpLnRoZW4oZnVuY3Rpb24oKSB7ICRpbmplY3Rvci5sb2FkTmV3TW9kdWxlcyhbbW9kdWxlTmFtZV0pOyB9KTtcbiAqICAgfTtcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge0FycmF5PFN0cmluZ3xGdW5jdGlvbnxBcnJheT49fSBtb2RzIGFuIGFycmF5IG9mIG1vZHVsZXMgdG8gbG9hZCBpbnRvIHRoZSBhcHBsaWNhdGlvbi5cbiAqICAgICBFYWNoIGl0ZW0gaW4gdGhlIGFycmF5IHNob3VsZCBiZSB0aGUgbmFtZSBvZiBhIHByZWRlZmluZWQgbW9kdWxlIG9yIGEgKERJIGFubm90YXRlZClcbiAqICAgICBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCBieSB0aGUgaW5qZWN0b3IgYXMgYSBgY29uZmlnYCBibG9jay5cbiAqICAgICBTZWU6IHtAbGluayBhbmd1bGFyLm1vZHVsZSBtb2R1bGVzfVxuICovXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHByb3ZpZGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGEgbnVtYmVyIG9mIG1ldGhvZHMgZm9yIHJlZ2lzdGVyaW5nIGNvbXBvbmVudHNcbiAqIHdpdGggdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9LiBNYW55IG9mIHRoZXNlIGZ1bmN0aW9ucyBhcmUgYWxzbyBleHBvc2VkIG9uXG4gKiB7QGxpbmsgYW5ndWxhci5Nb2R1bGV9LlxuICpcbiAqIEFuIEFuZ3VsYXIgKipzZXJ2aWNlKiogaXMgYSBzaW5nbGV0b24gb2JqZWN0IGNyZWF0ZWQgYnkgYSAqKnNlcnZpY2UgZmFjdG9yeSoqLiAgVGhlc2UgKipzZXJ2aWNlXG4gKiBmYWN0b3JpZXMqKiBhcmUgZnVuY3Rpb25zIHdoaWNoLCBpbiB0dXJuLCBhcmUgY3JlYXRlZCBieSBhICoqc2VydmljZSBwcm92aWRlcioqLlxuICogVGhlICoqc2VydmljZSBwcm92aWRlcnMqKiBhcmUgY29uc3RydWN0b3IgZnVuY3Rpb25zLiBXaGVuIGluc3RhbnRpYXRlZCB0aGV5IG11c3QgY29udGFpbiBhXG4gKiBwcm9wZXJ0eSBjYWxsZWQgYCRnZXRgLCB3aGljaCBob2xkcyB0aGUgKipzZXJ2aWNlIGZhY3RvcnkqKiBmdW5jdGlvbi5cbiAqXG4gKiBXaGVuIHlvdSByZXF1ZXN0IGEgc2VydmljZSwgdGhlIHtAbGluayBhdXRvLiRpbmplY3RvciAkaW5qZWN0b3J9IGlzIHJlc3BvbnNpYmxlIGZvciBmaW5kaW5nIHRoZVxuICogY29ycmVjdCAqKnNlcnZpY2UgcHJvdmlkZXIqKiwgaW5zdGFudGlhdGluZyBpdCBhbmQgdGhlbiBjYWxsaW5nIGl0cyBgJGdldGAgKipzZXJ2aWNlIGZhY3RvcnkqKlxuICogZnVuY3Rpb24gdG8gZ2V0IHRoZSBpbnN0YW5jZSBvZiB0aGUgKipzZXJ2aWNlKiouXG4gKlxuICogT2Z0ZW4gc2VydmljZXMgaGF2ZSBubyBjb25maWd1cmF0aW9uIG9wdGlvbnMgYW5kIHRoZXJlIGlzIG5vIG5lZWQgdG8gYWRkIG1ldGhvZHMgdG8gdGhlIHNlcnZpY2VcbiAqIHByb3ZpZGVyLiAgVGhlIHByb3ZpZGVyIHdpbGwgYmUgbm8gbW9yZSB0aGFuIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gd2l0aCBhIGAkZ2V0YCBwcm9wZXJ0eS4gRm9yXG4gKiB0aGVzZSBjYXNlcyB0aGUge0BsaW5rIGF1dG8uJHByb3ZpZGUgJHByb3ZpZGV9IHNlcnZpY2UgaGFzIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHMgdG8gcmVnaXN0ZXJcbiAqIHNlcnZpY2VzIHdpdGhvdXQgc3BlY2lmeWluZyBhIHByb3ZpZGVyLlxuICpcbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgcHJvdmlkZXIobmFtZSwgcHJvdmlkZXIpfSAtIHJlZ2lzdGVycyBhICoqc2VydmljZSBwcm92aWRlcioqIHdpdGggdGhlXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn1cbiAqICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjY29uc3RhbnQgY29uc3RhbnQobmFtZSwgb2JqKX0gLSByZWdpc3RlcnMgYSB2YWx1ZS9vYmplY3QgdGhhdCBjYW4gYmUgYWNjZXNzZWQgYnlcbiAqICAgICBwcm92aWRlcnMgYW5kIHNlcnZpY2VzLlxuICogKiB7QGxpbmsgYXV0by4kcHJvdmlkZSN2YWx1ZSB2YWx1ZShuYW1lLCBvYmopfSAtIHJlZ2lzdGVycyBhIHZhbHVlL29iamVjdCB0aGF0IGNhbiBvbmx5IGJlIGFjY2Vzc2VkIGJ5XG4gKiAgICAgc2VydmljZXMsIG5vdCBwcm92aWRlcnMuXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2ZhY3RvcnkgZmFjdG9yeShuYW1lLCBmbil9IC0gcmVnaXN0ZXJzIGEgc2VydmljZSAqKmZhY3RvcnkgZnVuY3Rpb24qKlxuICogICAgIHRoYXQgd2lsbCBiZSB3cmFwcGVkIGluIGEgKipzZXJ2aWNlIHByb3ZpZGVyKiogb2JqZWN0LCB3aG9zZSBgJGdldGAgcHJvcGVydHkgd2lsbCBjb250YWluIHRoZVxuICogICAgIGdpdmVuIGZhY3RvcnkgZnVuY3Rpb24uXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI3NlcnZpY2Ugc2VydmljZShuYW1lLCBGbil9IC0gcmVnaXN0ZXJzIGEgKipjb25zdHJ1Y3RvciBmdW5jdGlvbioqXG4gKiAgICAgdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSAqKnNlcnZpY2UgcHJvdmlkZXIqKiBvYmplY3QsIHdob3NlIGAkZ2V0YCBwcm9wZXJ0eSB3aWxsIGluc3RhbnRpYXRlXG4gKiAgICAgIGEgbmV3IG9iamVjdCB1c2luZyB0aGUgZ2l2ZW4gY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKiAqIHtAbGluayBhdXRvLiRwcm92aWRlI2RlY29yYXRvciBkZWNvcmF0b3IobmFtZSwgZGVjb3JGbil9IC0gcmVnaXN0ZXJzIGEgKipkZWNvcmF0b3IgZnVuY3Rpb24qKiB0aGF0XG4gKiAgICAgIHdpbGwgYmUgYWJsZSB0byBtb2RpZnkgb3IgcmVwbGFjZSB0aGUgaW1wbGVtZW50YXRpb24gb2YgYW5vdGhlciBzZXJ2aWNlLlxuICpcbiAqIFNlZSB0aGUgaW5kaXZpZHVhbCBtZXRob2RzIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBleGFtcGxlcy5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI3Byb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqcHJvdmlkZXIgZnVuY3Rpb24qKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gUHJvdmlkZXIgZnVuY3Rpb25zXG4gKiBhcmUgY29uc3RydWN0b3IgZnVuY3Rpb25zLCB3aG9zZSBpbnN0YW5jZXMgYXJlIHJlc3BvbnNpYmxlIGZvciBcInByb3ZpZGluZ1wiIGEgZmFjdG9yeSBmb3IgYVxuICogc2VydmljZS5cbiAqXG4gKiBTZXJ2aWNlIHByb3ZpZGVyIG5hbWVzIHN0YXJ0IHdpdGggdGhlIG5hbWUgb2YgdGhlIHNlcnZpY2UgdGhleSBwcm92aWRlIGZvbGxvd2VkIGJ5IGBQcm92aWRlcmAuXG4gKiBGb3IgZXhhbXBsZSwgdGhlIHtAbGluayBuZy4kbG9nICRsb2d9IHNlcnZpY2UgaGFzIGEgcHJvdmlkZXIgY2FsbGVkXG4gKiB7QGxpbmsgbmcuJGxvZ1Byb3ZpZGVyICRsb2dQcm92aWRlcn0uXG4gKlxuICogU2VydmljZSBwcm92aWRlciBvYmplY3RzIGNhbiBoYXZlIGFkZGl0aW9uYWwgbWV0aG9kcyB3aGljaCBhbGxvdyBjb25maWd1cmF0aW9uIG9mIHRoZSBwcm92aWRlclxuICogYW5kIGl0cyBzZXJ2aWNlLiBJbXBvcnRhbnRseSwgeW91IGNhbiBjb25maWd1cmUgd2hhdCBraW5kIG9mIHNlcnZpY2UgaXMgY3JlYXRlZCBieSB0aGUgYCRnZXRgXG4gKiBtZXRob2QsIG9yIGhvdyB0aGF0IHNlcnZpY2Ugd2lsbCBhY3QuIEZvciBleGFtcGxlLCB0aGUge0BsaW5rIG5nLiRsb2dQcm92aWRlciAkbG9nUHJvdmlkZXJ9IGhhcyBhXG4gKiBtZXRob2Qge0BsaW5rIG5nLiRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWQgZGVidWdFbmFibGVkfVxuICogd2hpY2ggbGV0cyB5b3Ugc3BlY2lmeSB3aGV0aGVyIHRoZSB7QGxpbmsgbmcuJGxvZyAkbG9nfSBzZXJ2aWNlIHdpbGwgbG9nIGRlYnVnIG1lc3NhZ2VzIHRvIHRoZVxuICogY29uc29sZSBvciBub3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluc3RhbmNlLiBOT1RFOiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBhdmFpbGFibGUgdW5kZXIgYG5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb3ZpZGVyJ2Aga2V5LlxuICogQHBhcmFtIHsoT2JqZWN0fGZ1bmN0aW9uKCkpfSBwcm92aWRlciBJZiB0aGUgcHJvdmlkZXIgaXM6XG4gKlxuICogICAtIGBPYmplY3RgOiB0aGVuIGl0IHNob3VsZCBoYXZlIGEgYCRnZXRgIG1ldGhvZC4gVGhlIGAkZ2V0YCBtZXRob2Qgd2lsbCBiZSBpbnZva2VkIHVzaW5nXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSAkaW5qZWN0b3IuaW52b2tlKCl9IHdoZW4gYW4gaW5zdGFuY2UgbmVlZHMgdG8gYmUgY3JlYXRlZC5cbiAqICAgLSBgQ29uc3RydWN0b3JgOiBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIgd2lsbCBiZSBjcmVhdGVkIHVzaW5nXG4gKiAgICAge0BsaW5rIGF1dG8uJGluamVjdG9yI2luc3RhbnRpYXRlICRpbmplY3Rvci5pbnN0YW50aWF0ZSgpfSwgdGhlbiB0cmVhdGVkIGFzIGBvYmplY3RgLlxuICpcbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcblxuICogQGV4YW1wbGVcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIGNyZWF0ZSBhIHNpbXBsZSBldmVudCB0cmFja2luZyBzZXJ2aWNlIGFuZCByZWdpc3RlciBpdCB1c2luZ1xuICoge0BsaW5rIGF1dG8uJHByb3ZpZGUjcHJvdmlkZXIgJHByb3ZpZGUucHJvdmlkZXIoKX0uXG4gKlxuICogYGBganNcbiAqICAvLyBEZWZpbmUgdGhlIGV2ZW50VHJhY2tlciBwcm92aWRlclxuICogIGZ1bmN0aW9uIEV2ZW50VHJhY2tlclByb3ZpZGVyKCkge1xuICogICAgdmFyIHRyYWNraW5nVXJsID0gJy90cmFjayc7XG4gKlxuICogICAgLy8gQSBwcm92aWRlciBtZXRob2QgZm9yIGNvbmZpZ3VyaW5nIHdoZXJlIHRoZSB0cmFja2VkIGV2ZW50cyBzaG91bGQgYmVlbiBzYXZlZFxuICogICAgdGhpcy5zZXRUcmFja2luZ1VybCA9IGZ1bmN0aW9uKHVybCkge1xuICogICAgICB0cmFja2luZ1VybCA9IHVybDtcbiAqICAgIH07XG4gKlxuICogICAgLy8gVGhlIHNlcnZpY2UgZmFjdG9yeSBmdW5jdGlvblxuICogICAgdGhpcy4kZ2V0ID0gWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gKiAgICAgIHZhciB0cmFja2VkRXZlbnRzID0ge307XG4gKiAgICAgIHJldHVybiB7XG4gKiAgICAgICAgLy8gQ2FsbCB0aGlzIHRvIHRyYWNrIGFuIGV2ZW50XG4gKiAgICAgICAgZXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgICAgICAgICB2YXIgY291bnQgPSB0cmFja2VkRXZlbnRzW2V2ZW50XSB8fCAwO1xuICogICAgICAgICAgY291bnQgKz0gMTtcbiAqICAgICAgICAgIHRyYWNrZWRFdmVudHNbZXZlbnRdID0gY291bnQ7XG4gKiAgICAgICAgICByZXR1cm4gY291bnQ7XG4gKiAgICAgICAgfSxcbiAqICAgICAgICAvLyBDYWxsIHRoaXMgdG8gc2F2ZSB0aGUgdHJhY2tlZCBldmVudHMgdG8gdGhlIHRyYWNraW5nVXJsXG4gKiAgICAgICAgc2F2ZTogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAkaHR0cC5wb3N0KHRyYWNraW5nVXJsLCB0cmFja2VkRXZlbnRzKTtcbiAqICAgICAgICB9XG4gKiAgICAgIH07XG4gKiAgICB9XTtcbiAqICB9XG4gKlxuICogIGRlc2NyaWJlKCdldmVudFRyYWNrZXInLCBmdW5jdGlvbigpIHtcbiAqICAgIHZhciBwb3N0U3B5O1xuICpcbiAqICAgIGJlZm9yZUVhY2gobW9kdWxlKGZ1bmN0aW9uKCRwcm92aWRlKSB7XG4gKiAgICAgIC8vIFJlZ2lzdGVyIHRoZSBldmVudFRyYWNrZXIgcHJvdmlkZXJcbiAqICAgICAgJHByb3ZpZGUucHJvdmlkZXIoJ2V2ZW50VHJhY2tlcicsIEV2ZW50VHJhY2tlclByb3ZpZGVyKTtcbiAqICAgIH0pKTtcbiAqXG4gKiAgICBiZWZvcmVFYWNoKG1vZHVsZShmdW5jdGlvbihldmVudFRyYWNrZXJQcm92aWRlcikge1xuICogICAgICAvLyBDb25maWd1cmUgZXZlbnRUcmFja2VyIHByb3ZpZGVyXG4gKiAgICAgIGV2ZW50VHJhY2tlclByb3ZpZGVyLnNldFRyYWNraW5nVXJsKCcvY3VzdG9tLXRyYWNrJyk7XG4gKiAgICB9KSk7XG4gKlxuICogICAgaXQoJ3RyYWNrcyBldmVudHMnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyKSB7XG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMSk7XG4gKiAgICAgIGV4cGVjdChldmVudFRyYWNrZXIuZXZlbnQoJ2xvZ2luJykpLnRvRXF1YWwoMik7XG4gKiAgICB9KSk7XG4gKlxuICogICAgaXQoJ3NhdmVzIHRvIHRoZSB0cmFja2luZyB1cmwnLCBpbmplY3QoZnVuY3Rpb24oZXZlbnRUcmFja2VyLCAkaHR0cCkge1xuICogICAgICBwb3N0U3B5ID0gc3B5T24oJGh0dHAsICdwb3N0Jyk7XG4gKiAgICAgIGV2ZW50VHJhY2tlci5ldmVudCgnbG9naW4nKTtcbiAqICAgICAgZXZlbnRUcmFja2VyLnNhdmUoKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAqICAgICAgZXhwZWN0KHBvc3RTcHkubW9zdFJlY2VudENhbGwuYXJnc1swXSkubm90LnRvRXF1YWwoJy90cmFjaycpO1xuICogICAgICBleHBlY3QocG9zdFNweS5tb3N0UmVjZW50Q2FsbC5hcmdzWzBdKS50b0VxdWFsKCcvY3VzdG9tLXRyYWNrJyk7XG4gKiAgICAgIGV4cGVjdChwb3N0U3B5Lm1vc3RSZWNlbnRDYWxsLmFyZ3NbMV0pLnRvRXF1YWwoeyAnbG9naW4nOiAxIH0pO1xuICogICAgfSkpO1xuICogIH0pO1xuICogYGBgXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNmYWN0b3J5XG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBSZWdpc3RlciBhICoqc2VydmljZSBmYWN0b3J5KiosIHdoaWNoIHdpbGwgYmUgY2FsbGVkIHRvIHJldHVybiB0aGUgc2VydmljZSBpbnN0YW5jZS5cbiAqIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHMgcHJvdmlkZXIgY29uc2lzdHMgb2Ygb25seSBhIGAkZ2V0YCBwcm9wZXJ0eSxcbiAqIHdoaWNoIGlzIHRoZSBnaXZlbiBzZXJ2aWNlIGZhY3RvcnkgZnVuY3Rpb24uXG4gKiBZb3Ugc2hvdWxkIHVzZSB7QGxpbmsgYXV0by4kcHJvdmlkZSNmYWN0b3J5ICRwcm92aWRlLmZhY3RvcnkoZ2V0Rm4pfSBpZiB5b3UgZG8gbm90IG5lZWQgdG9cbiAqIGNvbmZpZ3VyZSB5b3VyIHNlcnZpY2UgaW4gYSBwcm92aWRlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSAkZ2V0Rm4gVGhlIGluamVjdGFibGUgJGdldEZuIGZvciB0aGUgaW5zdGFuY2UgY3JlYXRpb24uXG4gKiAgICAgICAgICAgICAgICAgICAgICBJbnRlcm5hbGx5IHRoaXMgaXMgYSBzaG9ydCBoYW5kIGZvciBgJHByb3ZpZGUucHJvdmlkZXIobmFtZSwgeyRnZXQ6ICRnZXRGbn0pYC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBpcyBhbiBleGFtcGxlIG9mIHJlZ2lzdGVyaW5nIGEgc2VydmljZVxuICogYGBganNcbiAqICAgJHByb3ZpZGUuZmFjdG9yeSgncGluZycsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuICogICAgIHJldHVybiBmdW5jdGlvbiBwaW5nKCkge1xuICogICAgICAgcmV0dXJuICRodHRwLnNlbmQoJy9waW5nJyk7XG4gKiAgICAgfTtcbiAqICAgfV0pO1xuICogYGBgXG4gKiBZb3Ugd291bGQgdGhlbiBpbmplY3QgYW5kIHVzZSB0aGlzIHNlcnZpY2UgbGlrZSB0aGlzOlxuICogYGBganNcbiAqICAgc29tZU1vZHVsZS5jb250cm9sbGVyKCdDdHJsJywgWydwaW5nJywgZnVuY3Rpb24ocGluZykge1xuICogICAgIHBpbmcoKTtcbiAqICAgfV0pO1xuICogYGBgXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBtZXRob2RcbiAqIEBuYW1lICRwcm92aWRlI3NlcnZpY2VcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipzZXJ2aWNlIGNvbnN0cnVjdG9yKiosIHdoaWNoIHdpbGwgYmUgaW52b2tlZCB3aXRoIGBuZXdgIHRvIGNyZWF0ZSB0aGUgc2VydmljZVxuICogaW5zdGFuY2UuXG4gKiBUaGlzIGlzIHNob3J0IGZvciByZWdpc3RlcmluZyBhIHNlcnZpY2Ugd2hlcmUgaXRzIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIGEgZmFjdG9yeVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGluc3RhbmNlIGluc3RhbnRpYXRlZCBieSB0aGUgaW5qZWN0b3IgZnJvbSB0aGUgc2VydmljZSBjb25zdHJ1Y3RvclxuICogZnVuY3Rpb24uXG4gKlxuICogSW50ZXJuYWxseSBpdCBsb29rcyBhIGJpdCBsaWtlIHRoaXM6XG4gKlxuICogYGBgXG4gKiB7XG4gKiAgICRnZXQ6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiAkaW5qZWN0b3IuaW5zdGFudGlhdGUoY29uc3RydWN0b3IpO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKlxuICogWW91IHNob3VsZCB1c2Uge0BsaW5rIGF1dG8uJHByb3ZpZGUjc2VydmljZSAkcHJvdmlkZS5zZXJ2aWNlKGNsYXNzKX0gaWYgeW91IGRlZmluZSB5b3VyIHNlcnZpY2VcbiAqIGFzIGEgdHlwZS9jbGFzcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBjb25zdHJ1Y3RvciBBbiBpbmplY3RhYmxlIGNsYXNzIChjb25zdHJ1Y3RvciBmdW5jdGlvbilcbiAqICAgICB0aGF0IHdpbGwgYmUgaW5zdGFudGlhdGVkLlxuICogQHJldHVybnMge09iamVjdH0gcmVnaXN0ZXJlZCBwcm92aWRlciBpbnN0YW5jZVxuICpcbiAqIEBleGFtcGxlXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgb2YgcmVnaXN0ZXJpbmcgYSBzZXJ2aWNlIHVzaW5nXG4gKiB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlICRwcm92aWRlLnNlcnZpY2UoY2xhc3MpfS5cbiAqIGBgYGpzXG4gKiAgIHZhciBQaW5nID0gZnVuY3Rpb24oJGh0dHApIHtcbiAqICAgICB0aGlzLiRodHRwID0gJGh0dHA7XG4gKiAgIH07XG4gKlxuICogICBQaW5nLiRpbmplY3QgPSBbJyRodHRwJ107XG4gKlxuICogICBQaW5nLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIHRoaXMuJGh0dHAuZ2V0KCcvcGluZycpO1xuICogICB9O1xuICogICAkcHJvdmlkZS5zZXJ2aWNlKCdwaW5nJywgUGluZyk7XG4gKiBgYGBcbiAqIFlvdSB3b3VsZCB0aGVuIGluamVjdCBhbmQgdXNlIHRoaXMgc2VydmljZSBsaWtlIHRoaXM6XG4gKiBgYGBqc1xuICogICBzb21lTW9kdWxlLmNvbnRyb2xsZXIoJ0N0cmwnLCBbJ3BpbmcnLCBmdW5jdGlvbihwaW5nKSB7XG4gKiAgICAgcGluZy5zZW5kKCk7XG4gKiAgIH1dKTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSN2YWx1ZVxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVnaXN0ZXIgYSAqKnZhbHVlIHNlcnZpY2UqKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfSwgc3VjaCBhcyBhIHN0cmluZywgYVxuICogbnVtYmVyLCBhbiBhcnJheSwgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24uIFRoaXMgaXMgc2hvcnQgZm9yIHJlZ2lzdGVyaW5nIGEgc2VydmljZSB3aGVyZSBpdHNcbiAqIHByb3ZpZGVyJ3MgYCRnZXRgIHByb3BlcnR5IGlzIGEgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vIGFyZ3VtZW50cyBhbmQgcmV0dXJucyB0aGUgKip2YWx1ZVxuICogc2VydmljZSoqLiBUaGF0IGFsc28gbWVhbnMgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGluamVjdCBvdGhlciBzZXJ2aWNlcyBpbnRvIGEgdmFsdWUgc2VydmljZS5cbiAqXG4gKiBWYWx1ZSBzZXJ2aWNlcyBhcmUgc2ltaWxhciB0byBjb25zdGFudCBzZXJ2aWNlcywgZXhjZXB0IHRoYXQgdGhleSBjYW5ub3QgYmUgaW5qZWN0ZWQgaW50byBhXG4gKiBtb2R1bGUgY29uZmlndXJhdGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWd9KSBidXQgdGhleSBjYW4gYmUgb3ZlcnJpZGRlbiBieVxuICogYW4gQW5ndWxhciB7QGxpbmsgYXV0by4kcHJvdmlkZSNkZWNvcmF0b3IgZGVjb3JhdG9yfS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IHJlZ2lzdGVyZWQgcHJvdmlkZXIgaW5zdGFuY2VcbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBhcmUgc29tZSBleGFtcGxlcyBvZiBjcmVhdGluZyB2YWx1ZSBzZXJ2aWNlcy5cbiAqIGBgYGpzXG4gKiAgICRwcm92aWRlLnZhbHVlKCdBRE1JTl9VU0VSJywgJ2FkbWluJyk7XG4gKlxuICogICAkcHJvdmlkZS52YWx1ZSgnUm9sZUxvb2t1cCcsIHsgYWRtaW46IDAsIHdyaXRlcjogMSwgcmVhZGVyOiAyIH0pO1xuICpcbiAqICAgJHByb3ZpZGUudmFsdWUoJ2hhbGZPZicsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gKiAgICAgcmV0dXJuIHZhbHVlIC8gMjtcbiAqICAgfSk7XG4gKiBgYGBcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJHByb3ZpZGUjY29uc3RhbnRcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipjb25zdGFudCBzZXJ2aWNlKiogd2l0aCB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0sIHN1Y2ggYXMgYSBzdHJpbmcsXG4gKiBhIG51bWJlciwgYW4gYXJyYXksIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uLiBMaWtlIHRoZSB7QGxpbmsgYXV0by4kcHJvdmlkZSN2YWx1ZSB2YWx1ZX0sIGl0IGlzIG5vdFxuICogcG9zc2libGUgdG8gaW5qZWN0IG90aGVyIHNlcnZpY2VzIGludG8gYSBjb25zdGFudC5cbiAqXG4gKiBCdXQgdW5saWtlIHtAbGluayBhdXRvLiRwcm92aWRlI3ZhbHVlIHZhbHVlfSwgYSBjb25zdGFudCBjYW4gYmVcbiAqIGluamVjdGVkIGludG8gYSBtb2R1bGUgY29uZmlndXJhdGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBhbmd1bGFyLk1vZHVsZSNjb25maWd9KSBhbmQgaXQgY2Fubm90XG4gKiBiZSBvdmVycmlkZGVuIGJ5IGFuIEFuZ3VsYXIge0BsaW5rIGF1dG8uJHByb3ZpZGUjZGVjb3JhdG9yIGRlY29yYXRvcn0uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvbnN0YW50LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgY29uc3RhbnQgdmFsdWUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSByZWdpc3RlcmVkIGluc3RhbmNlXG4gKlxuICogQGV4YW1wbGVcbiAqIEhlcmUgYSBzb21lIGV4YW1wbGVzIG9mIGNyZWF0aW5nIGNvbnN0YW50czpcbiAqIGBgYGpzXG4gKiAgICRwcm92aWRlLmNvbnN0YW50KCdTSEFSRF9IRUlHSFQnLCAzMDYpO1xuICpcbiAqICAgJHByb3ZpZGUuY29uc3RhbnQoJ01ZX0NPTE9VUlMnLCBbJ3JlZCcsICdibHVlJywgJ2dyZXknXSk7XG4gKlxuICogICAkcHJvdmlkZS5jb25zdGFudCgnZG91YmxlJywgZnVuY3Rpb24odmFsdWUpIHtcbiAqICAgICByZXR1cm4gdmFsdWUgKiAyO1xuICogICB9KTtcbiAqIGBgYFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcHJvdmlkZSNkZWNvcmF0b3JcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFJlZ2lzdGVyIGEgKipkZWNvcmF0b3IgZnVuY3Rpb24qKiB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS4gQSBkZWNvcmF0b3IgZnVuY3Rpb25cbiAqIGludGVyY2VwdHMgdGhlIGNyZWF0aW9uIG9mIGEgc2VydmljZSwgYWxsb3dpbmcgaXQgdG8gb3ZlcnJpZGUgb3IgbW9kaWZ5IHRoZSBiZWhhdmlvciBvZiB0aGVcbiAqIHNlcnZpY2UuIFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGRlY29yYXRvciBmdW5jdGlvbiBtYXkgYmUgdGhlIG9yaWdpbmFsIHNlcnZpY2UsIG9yIGEgbmV3IHNlcnZpY2VcbiAqIHRoYXQgcmVwbGFjZXMgKG9yIHdyYXBzIGFuZCBkZWxlZ2F0ZXMgdG8pIHRoZSBvcmlnaW5hbCBzZXJ2aWNlLlxuICpcbiAqIFlvdSBjYW4gZmluZCBvdXQgbW9yZSBhYm91dCB1c2luZyBkZWNvcmF0b3JzIGluIHRoZSB7QGxpbmsgZ3VpZGUvZGVjb3JhdG9yc30gZ3VpZGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gZGVjb3JhdGUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5LjxzdHJpbmd8RnVuY3Rpb24+fSBkZWNvcmF0b3IgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgc2VydmljZSBuZWVkcyB0byBiZVxuICogICAgcHJvdmlkZWQgYW5kIHNob3VsZCByZXR1cm4gdGhlIGRlY29yYXRlZCBzZXJ2aWNlIGluc3RhbmNlLiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHVzaW5nXG4gKiAgICB0aGUge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSBpbmplY3Rvci5pbnZva2V9IG1ldGhvZCBhbmQgaXMgdGhlcmVmb3JlIGZ1bGx5IGluamVjdGFibGUuXG4gKiAgICBMb2NhbCBpbmplY3Rpb24gYXJndW1lbnRzOlxuICpcbiAqICAgICogYCRkZWxlZ2F0ZWAgLSBUaGUgb3JpZ2luYWwgc2VydmljZSBpbnN0YW5jZSwgd2hpY2ggY2FuIGJlIHJlcGxhY2VkLCBtb25rZXkgcGF0Y2hlZCwgY29uZmlndXJlZCxcbiAqICAgICAgZGVjb3JhdGVkIG9yIGRlbGVnYXRlZCB0by5cbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSB3ZSBkZWNvcmF0ZSB0aGUge0BsaW5rIG5nLiRsb2cgJGxvZ30gc2VydmljZSB0byBjb252ZXJ0IHdhcm5pbmdzIHRvIGVycm9ycyBieSBpbnRlcmNlcHRpbmdcbiAqIGNhbGxzIHRvIHtAbGluayBuZy4kbG9nI2Vycm9yICRsb2cud2FybigpfS5cbiAqIGBgYGpzXG4gKiAgICRwcm92aWRlLmRlY29yYXRvcignJGxvZycsIFsnJGRlbGVnYXRlJywgZnVuY3Rpb24oJGRlbGVnYXRlKSB7XG4gKiAgICAgJGRlbGVnYXRlLndhcm4gPSAkZGVsZWdhdGUuZXJyb3I7XG4gKiAgICAgcmV0dXJuICRkZWxlZ2F0ZTtcbiAqICAgfV0pO1xuICogYGBgXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVJbmplY3Rvcihtb2R1bGVzVG9Mb2FkLCBzdHJpY3REaSkge1xuICBzdHJpY3REaSA9IChzdHJpY3REaSA9PT0gdHJ1ZSk7XG4gIHZhciBJTlNUQU5USUFUSU5HID0ge30sXG4gICAgICBwcm92aWRlclN1ZmZpeCA9ICdQcm92aWRlcicsXG4gICAgICBwYXRoID0gW10sXG4gICAgICBsb2FkZWRNb2R1bGVzID0gbmV3IE5nTWFwKCksXG4gICAgICBwcm92aWRlckNhY2hlID0ge1xuICAgICAgICAkcHJvdmlkZToge1xuICAgICAgICAgICAgcHJvdmlkZXI6IHN1cHBvcnRPYmplY3QocHJvdmlkZXIpLFxuICAgICAgICAgICAgZmFjdG9yeTogc3VwcG9ydE9iamVjdChmYWN0b3J5KSxcbiAgICAgICAgICAgIHNlcnZpY2U6IHN1cHBvcnRPYmplY3Qoc2VydmljZSksXG4gICAgICAgICAgICB2YWx1ZTogc3VwcG9ydE9iamVjdCh2YWx1ZSksXG4gICAgICAgICAgICBjb25zdGFudDogc3VwcG9ydE9iamVjdChjb25zdGFudCksXG4gICAgICAgICAgICBkZWNvcmF0b3I6IGRlY29yYXRvclxuICAgICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm92aWRlckluamVjdG9yID0gKHByb3ZpZGVyQ2FjaGUuJGluamVjdG9yID1cbiAgICAgICAgICBjcmVhdGVJbnRlcm5hbEluamVjdG9yKHByb3ZpZGVyQ2FjaGUsIGZ1bmN0aW9uKHNlcnZpY2VOYW1lLCBjYWxsZXIpIHtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzU3RyaW5nKGNhbGxlcikpIHtcbiAgICAgICAgICAgICAgcGF0aC5wdXNoKGNhbGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ3VucHInLCAnVW5rbm93biBwcm92aWRlcjogezB9JywgcGF0aC5qb2luKCcgPC0gJykpO1xuICAgICAgICAgIH0pKSxcbiAgICAgIGluc3RhbmNlQ2FjaGUgPSB7fSxcbiAgICAgIHByb3RvSW5zdGFuY2VJbmplY3RvciA9XG4gICAgICAgICAgY3JlYXRlSW50ZXJuYWxJbmplY3RvcihpbnN0YW5jZUNhY2hlLCBmdW5jdGlvbihzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XG4gICAgICAgICAgICB2YXIgcHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChzZXJ2aWNlTmFtZSArIHByb3ZpZGVyU3VmZml4LCBjYWxsZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyLiRnZXQsIHByb3ZpZGVyLCB1bmRlZmluZWQsIHNlcnZpY2VOYW1lKTtcbiAgICAgICAgICB9KSxcbiAgICAgIGluc3RhbmNlSW5qZWN0b3IgPSBwcm90b0luc3RhbmNlSW5qZWN0b3I7XG5cbiAgcHJvdmlkZXJDYWNoZVsnJGluamVjdG9yJyArIHByb3ZpZGVyU3VmZml4XSA9IHsgJGdldDogdmFsdWVGbihwcm90b0luc3RhbmNlSW5qZWN0b3IpIH07XG4gIGluc3RhbmNlSW5qZWN0b3IubW9kdWxlcyA9IHByb3ZpZGVySW5qZWN0b3IubW9kdWxlcyA9IGNyZWF0ZU1hcCgpO1xuICB2YXIgcnVuQmxvY2tzID0gbG9hZE1vZHVsZXMobW9kdWxlc1RvTG9hZCk7XG4gIGluc3RhbmNlSW5qZWN0b3IgPSBwcm90b0luc3RhbmNlSW5qZWN0b3IuZ2V0KCckaW5qZWN0b3InKTtcbiAgaW5zdGFuY2VJbmplY3Rvci5zdHJpY3REaSA9IHN0cmljdERpO1xuICBmb3JFYWNoKHJ1bkJsb2NrcywgZnVuY3Rpb24oZm4pIHsgaWYgKGZuKSBpbnN0YW5jZUluamVjdG9yLmludm9rZShmbik7IH0pO1xuXG4gIGluc3RhbmNlSW5qZWN0b3IubG9hZE5ld01vZHVsZXMgPSBmdW5jdGlvbihtb2RzKSB7XG4gICAgZm9yRWFjaChsb2FkTW9kdWxlcyhtb2RzKSwgZnVuY3Rpb24oZm4pIHsgaWYgKGZuKSBpbnN0YW5jZUluamVjdG9yLmludm9rZShmbik7IH0pO1xuICB9O1xuXG5cbiAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3I7XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vICRwcm92aWRlclxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBmdW5jdGlvbiBzdXBwb3J0T2JqZWN0KGRlbGVnYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChpc09iamVjdChrZXkpKSB7XG4gICAgICAgIGZvckVhY2goa2V5LCByZXZlcnNlUGFyYW1zKGRlbGVnYXRlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVsZWdhdGUoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByb3ZpZGVyKG5hbWUsIHByb3ZpZGVyXykge1xuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdzZXJ2aWNlJyk7XG4gICAgaWYgKGlzRnVuY3Rpb24ocHJvdmlkZXJfKSB8fCBpc0FycmF5KHByb3ZpZGVyXykpIHtcbiAgICAgIHByb3ZpZGVyXyA9IHByb3ZpZGVySW5qZWN0b3IuaW5zdGFudGlhdGUocHJvdmlkZXJfKTtcbiAgICB9XG4gICAgaWYgKCFwcm92aWRlcl8uJGdldCkge1xuICAgICAgdGhyb3cgJGluamVjdG9yTWluRXJyKCdwZ2V0JywgJ1Byb3ZpZGVyIFxcJ3swfVxcJyBtdXN0IGRlZmluZSAkZ2V0IGZhY3RvcnkgbWV0aG9kLicsIG5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gKHByb3ZpZGVyQ2FjaGVbbmFtZSArIHByb3ZpZGVyU3VmZml4XSA9IHByb3ZpZGVyXyk7XG4gIH1cblxuICBmdW5jdGlvbiBlbmZvcmNlUmV0dXJuVmFsdWUobmFtZSwgZmFjdG9yeSkge1xuICAgIHJldHVybiAvKiogQHRoaXMgKi8gZnVuY3Rpb24gZW5mb3JjZWRSZXR1cm5WYWx1ZSgpIHtcbiAgICAgIHZhciByZXN1bHQgPSBpbnN0YW5jZUluamVjdG9yLmludm9rZShmYWN0b3J5LCB0aGlzKTtcbiAgICAgIGlmIChpc1VuZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycigndW5kZWYnLCAnUHJvdmlkZXIgXFwnezB9XFwnIG11c3QgcmV0dXJuIGEgdmFsdWUgZnJvbSAkZ2V0IGZhY3RvcnkgbWV0aG9kLicsIG5hbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gZmFjdG9yeShuYW1lLCBmYWN0b3J5Rm4sIGVuZm9yY2UpIHtcbiAgICByZXR1cm4gcHJvdmlkZXIobmFtZSwge1xuICAgICAgJGdldDogZW5mb3JjZSAhPT0gZmFsc2UgPyBlbmZvcmNlUmV0dXJuVmFsdWUobmFtZSwgZmFjdG9yeUZuKSA6IGZhY3RvcnlGblxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VydmljZShuYW1lLCBjb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBmYWN0b3J5KG5hbWUsIFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgICByZXR1cm4gJGluamVjdG9yLmluc3RhbnRpYXRlKGNvbnN0cnVjdG9yKTtcbiAgICB9XSk7XG4gIH1cblxuICBmdW5jdGlvbiB2YWx1ZShuYW1lLCB2YWwpIHsgcmV0dXJuIGZhY3RvcnkobmFtZSwgdmFsdWVGbih2YWwpLCBmYWxzZSk7IH1cblxuICBmdW5jdGlvbiBjb25zdGFudChuYW1lLCB2YWx1ZSkge1xuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdjb25zdGFudCcpO1xuICAgIHByb3ZpZGVyQ2FjaGVbbmFtZV0gPSB2YWx1ZTtcbiAgICBpbnN0YW5jZUNhY2hlW25hbWVdID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBkZWNvcmF0b3Ioc2VydmljZU5hbWUsIGRlY29yRm4pIHtcbiAgICB2YXIgb3JpZ1Byb3ZpZGVyID0gcHJvdmlkZXJJbmplY3Rvci5nZXQoc2VydmljZU5hbWUgKyBwcm92aWRlclN1ZmZpeCksXG4gICAgICAgIG9yaWckZ2V0ID0gb3JpZ1Byb3ZpZGVyLiRnZXQ7XG5cbiAgICBvcmlnUHJvdmlkZXIuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9yaWdJbnN0YW5jZSA9IGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKG9yaWckZ2V0LCBvcmlnUHJvdmlkZXIpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlSW5qZWN0b3IuaW52b2tlKGRlY29yRm4sIG51bGwsIHskZGVsZWdhdGU6IG9yaWdJbnN0YW5jZX0pO1xuICAgIH07XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gTW9kdWxlIExvYWRpbmdcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGZ1bmN0aW9uIGxvYWRNb2R1bGVzKG1vZHVsZXNUb0xvYWQpIHtcbiAgICBhc3NlcnRBcmcoaXNVbmRlZmluZWQobW9kdWxlc1RvTG9hZCkgfHwgaXNBcnJheShtb2R1bGVzVG9Mb2FkKSwgJ21vZHVsZXNUb0xvYWQnLCAnbm90IGFuIGFycmF5Jyk7XG4gICAgdmFyIHJ1bkJsb2NrcyA9IFtdLCBtb2R1bGVGbjtcbiAgICBmb3JFYWNoKG1vZHVsZXNUb0xvYWQsIGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgaWYgKGxvYWRlZE1vZHVsZXMuZ2V0KG1vZHVsZSkpIHJldHVybjtcbiAgICAgIGxvYWRlZE1vZHVsZXMuc2V0KG1vZHVsZSwgdHJ1ZSk7XG5cbiAgICAgIGZ1bmN0aW9uIHJ1bkludm9rZVF1ZXVlKHF1ZXVlKSB7XG4gICAgICAgIHZhciBpLCBpaTtcbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBxdWV1ZS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgdmFyIGludm9rZUFyZ3MgPSBxdWV1ZVtpXSxcbiAgICAgICAgICAgICAgcHJvdmlkZXIgPSBwcm92aWRlckluamVjdG9yLmdldChpbnZva2VBcmdzWzBdKTtcblxuICAgICAgICAgIHByb3ZpZGVyW2ludm9rZUFyZ3NbMV1dLmFwcGx5KHByb3ZpZGVyLCBpbnZva2VBcmdzWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBpZiAoaXNTdHJpbmcobW9kdWxlKSkge1xuICAgICAgICAgIG1vZHVsZUZuID0gYW5ndWxhck1vZHVsZShtb2R1bGUpO1xuICAgICAgICAgIGluc3RhbmNlSW5qZWN0b3IubW9kdWxlc1ttb2R1bGVdID0gbW9kdWxlRm47XG4gICAgICAgICAgcnVuQmxvY2tzID0gcnVuQmxvY2tzLmNvbmNhdChsb2FkTW9kdWxlcyhtb2R1bGVGbi5yZXF1aXJlcykpLmNvbmNhdChtb2R1bGVGbi5fcnVuQmxvY2tzKTtcbiAgICAgICAgICBydW5JbnZva2VRdWV1ZShtb2R1bGVGbi5faW52b2tlUXVldWUpO1xuICAgICAgICAgIHJ1bkludm9rZVF1ZXVlKG1vZHVsZUZuLl9jb25maWdCbG9ja3MpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24obW9kdWxlKSkge1xuICAgICAgICAgICAgcnVuQmxvY2tzLnB1c2gocHJvdmlkZXJJbmplY3Rvci5pbnZva2UobW9kdWxlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgICAgICBydW5CbG9ja3MucHVzaChwcm92aWRlckluamVjdG9yLmludm9rZShtb2R1bGUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhc3NlcnRBcmdGbihtb2R1bGUsICdtb2R1bGUnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoaXNBcnJheShtb2R1bGUpKSB7XG4gICAgICAgICAgbW9kdWxlID0gbW9kdWxlW21vZHVsZS5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5tZXNzYWdlICYmIGUuc3RhY2sgJiYgZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSkgPT09IC0xKSB7XG4gICAgICAgICAgLy8gU2FmYXJpICYgRkYncyBzdGFjayB0cmFjZXMgZG9uJ3QgY29udGFpbiBlcnJvci5tZXNzYWdlIGNvbnRlbnRcbiAgICAgICAgICAvLyB1bmxpa2UgdGhvc2Ugb2YgQ2hyb21lIGFuZCBJRVxuICAgICAgICAgIC8vIFNvIGlmIHN0YWNrIGRvZXNuJ3QgY29udGFpbiBtZXNzYWdlLCB3ZSBjcmVhdGUgYSBuZXcgc3RyaW5nIHRoYXQgY29udGFpbnMgYm90aC5cbiAgICAgICAgICAvLyBTaW5jZSBlcnJvci5zdGFjayBpcyByZWFkLW9ubHkgaW4gU2FmYXJpLCBJJ20gb3ZlcnJpZGluZyBlIGFuZCBub3QgZS5zdGFjayBoZXJlLlxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1leC1hc3NpZ25cbiAgICAgICAgICBlID0gZS5tZXNzYWdlICsgJ1xcbicgKyBlLnN0YWNrO1xuICAgICAgICB9XG4gICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycignbW9kdWxlcnInLCAnRmFpbGVkIHRvIGluc3RhbnRpYXRlIG1vZHVsZSB7MH0gZHVlIHRvOlxcbnsxfScsXG4gICAgICAgICAgICAgICAgICBtb2R1bGUsIGUuc3RhY2sgfHwgZS5tZXNzYWdlIHx8IGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBydW5CbG9ja3M7XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gaW50ZXJuYWwgSW5qZWN0b3JcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZnVuY3Rpb24gY3JlYXRlSW50ZXJuYWxJbmplY3RvcihjYWNoZSwgZmFjdG9yeSkge1xuXG4gICAgZnVuY3Rpb24gZ2V0U2VydmljZShzZXJ2aWNlTmFtZSwgY2FsbGVyKSB7XG4gICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoc2VydmljZU5hbWUpKSB7XG4gICAgICAgIGlmIChjYWNoZVtzZXJ2aWNlTmFtZV0gPT09IElOU1RBTlRJQVRJTkcpIHtcbiAgICAgICAgICB0aHJvdyAkaW5qZWN0b3JNaW5FcnIoJ2NkZXAnLCAnQ2lyY3VsYXIgZGVwZW5kZW5jeSBmb3VuZDogezB9JyxcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZU5hbWUgKyAnIDwtICcgKyBwYXRoLmpvaW4oJyA8LSAnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhY2hlW3NlcnZpY2VOYW1lXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcGF0aC51bnNoaWZ0KHNlcnZpY2VOYW1lKTtcbiAgICAgICAgICBjYWNoZVtzZXJ2aWNlTmFtZV0gPSBJTlNUQU5USUFUSU5HO1xuICAgICAgICAgIGNhY2hlW3NlcnZpY2VOYW1lXSA9IGZhY3Rvcnkoc2VydmljZU5hbWUsIGNhbGxlcik7XG4gICAgICAgICAgcmV0dXJuIGNhY2hlW3NlcnZpY2VOYW1lXTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKGNhY2hlW3NlcnZpY2VOYW1lXSA9PT0gSU5TVEFOVElBVElORykge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlW3NlcnZpY2VOYW1lXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHBhdGguc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gaW5qZWN0aW9uQXJncyhmbiwgbG9jYWxzLCBzZXJ2aWNlTmFtZSkge1xuICAgICAgdmFyIGFyZ3MgPSBbXSxcbiAgICAgICAgICAkaW5qZWN0ID0gY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZShmbiwgc3RyaWN0RGksIHNlcnZpY2VOYW1lKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9ICRpbmplY3QubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGtleSA9ICRpbmplY3RbaV07XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRocm93ICRpbmplY3Rvck1pbkVycignaXRrbicsXG4gICAgICAgICAgICAgICAgICAnSW5jb3JyZWN0IGluamVjdGlvbiB0b2tlbiEgRXhwZWN0ZWQgc2VydmljZSBuYW1lIGFzIHN0cmluZywgZ290IHswfScsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgYXJncy5wdXNoKGxvY2FscyAmJiBsb2NhbHMuaGFzT3duUHJvcGVydHkoa2V5KSA/IGxvY2Fsc1trZXldIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFNlcnZpY2Uoa2V5LCBzZXJ2aWNlTmFtZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNDbGFzcyhmdW5jKSB7XG4gICAgICAvLyBTdXBwb3J0OiBJRSA5LTExIG9ubHlcbiAgICAgIC8vIElFIDktMTEgZG8gbm90IHN1cHBvcnQgY2xhc3NlcyBhbmQgSUU5IGxlYWtzIHdpdGggdGhlIGNvZGUgYmVsb3cuXG4gICAgICBpZiAobXNpZSB8fCB0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgcmVzdWx0ID0gZnVuYy4kJG5nSXNDbGFzcztcbiAgICAgIGlmICghaXNCb29sZWFuKHJlc3VsdCkpIHtcbiAgICAgICAgLy8gU3VwcG9ydDogRWRnZSAxMi0xMyBvbmx5XG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9pc3N1ZXMvNjE1NjEzNS9cbiAgICAgICAgcmVzdWx0ID0gZnVuYy4kJG5nSXNDbGFzcyA9IC9eKD86Y2xhc3NcXGJ8Y29uc3RydWN0b3JcXCgpLy50ZXN0KHN0cmluZ2lmeUZuKGZ1bmMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52b2tlKGZuLCBzZWxmLCBsb2NhbHMsIHNlcnZpY2VOYW1lKSB7XG4gICAgICBpZiAodHlwZW9mIGxvY2FscyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc2VydmljZU5hbWUgPSBsb2NhbHM7XG4gICAgICAgIGxvY2FscyA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmdzID0gaW5qZWN0aW9uQXJncyhmbiwgbG9jYWxzLCBzZXJ2aWNlTmFtZSk7XG4gICAgICBpZiAoaXNBcnJheShmbikpIHtcbiAgICAgICAgZm4gPSBmbltmbi5sZW5ndGggLSAxXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc0NsYXNzKGZuKSkge1xuICAgICAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9hbmd1bGFyanMtaW52b2tlLWFwcGx5LXZzLXN3aXRjaFxuICAgICAgICAvLyAjNTM4OFxuICAgICAgICByZXR1cm4gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmdzLnVuc2hpZnQobnVsbCk7XG4gICAgICAgIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KGZuLCBhcmdzKSkoKTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGluc3RhbnRpYXRlKFR5cGUsIGxvY2Fscywgc2VydmljZU5hbWUpIHtcbiAgICAgIC8vIENoZWNrIGlmIFR5cGUgaXMgYW5ub3RhdGVkIGFuZCB1c2UganVzdCB0aGUgZ2l2ZW4gZnVuY3Rpb24gYXQgbi0xIGFzIHBhcmFtZXRlclxuICAgICAgLy8gZS5nLiBzb21lTW9kdWxlLmZhY3RvcnkoJ2dyZWV0ZXInLCBbJyR3aW5kb3cnLCBmdW5jdGlvbihyZW5hbWVkJHdpbmRvdykge31dKTtcbiAgICAgIHZhciBjdG9yID0gKGlzQXJyYXkoVHlwZSkgPyBUeXBlW1R5cGUubGVuZ3RoIC0gMV0gOiBUeXBlKTtcbiAgICAgIHZhciBhcmdzID0gaW5qZWN0aW9uQXJncyhUeXBlLCBsb2NhbHMsIHNlcnZpY2VOYW1lKTtcbiAgICAgIC8vIEVtcHR5IG9iamVjdCBhdCBwb3NpdGlvbiAwIGlzIGlnbm9yZWQgZm9yIGludm9jYXRpb24gd2l0aCBgbmV3YCwgYnV0IHJlcXVpcmVkLlxuICAgICAgYXJncy51bnNoaWZ0KG51bGwpO1xuICAgICAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoY3RvciwgYXJncykpKCk7XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgaW52b2tlOiBpbnZva2UsXG4gICAgICBpbnN0YW50aWF0ZTogaW5zdGFudGlhdGUsXG4gICAgICBnZXQ6IGdldFNlcnZpY2UsXG4gICAgICBhbm5vdGF0ZTogY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSxcbiAgICAgIGhhczogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gcHJvdmlkZXJDYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lICsgcHJvdmlkZXJTdWZmaXgpIHx8IGNhY2hlLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuY3JlYXRlSW5qZWN0b3IuJCRhbm5vdGF0ZSA9IGFubm90YXRlO1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuY2hvclNjcm9sbFByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIGAkYW5jaG9yU2Nyb2xsUHJvdmlkZXJgIHRvIGRpc2FibGUgYXV0b21hdGljIHNjcm9sbGluZyB3aGVuZXZlclxuICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGNoYW5nZXMuXG4gKi9cbmZ1bmN0aW9uICRBbmNob3JTY3JvbGxQcm92aWRlcigpIHtcblxuICB2YXIgYXV0b1Njcm9sbGluZ0VuYWJsZWQgPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZ1xuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQnkgZGVmYXVsdCwge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwgJGFuY2hvclNjcm9sbCgpfSB3aWxsIGF1dG9tYXRpY2FsbHkgZGV0ZWN0IGNoYW5nZXMgdG9cbiAgICoge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9IGFuZCBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgdGhlIG5ldyBoYXNoLjxiciAvPlxuICAgKiBVc2UgdGhpcyBtZXRob2QgdG8gZGlzYWJsZSBhdXRvbWF0aWMgc2Nyb2xsaW5nLlxuICAgKlxuICAgKiBJZiBhdXRvbWF0aWMgc2Nyb2xsaW5nIGlzIGRpc2FibGVkLCBvbmUgbXVzdCBleHBsaWNpdGx5IGNhbGxcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwgJGFuY2hvclNjcm9sbCgpfSBpbiBvcmRlciB0byBzY3JvbGwgdG8gdGhlIGVsZW1lbnQgcmVsYXRlZCB0byB0aGVcbiAgICogY3VycmVudCBoYXNoLlxuICAgKi9cbiAgdGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZyA9IGZ1bmN0aW9uKCkge1xuICAgIGF1dG9TY3JvbGxpbmdFbmFibGVkID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICRhbmNob3JTY3JvbGxcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICogQHJlcXVpcmVzICR3aW5kb3dcbiAgICogQHJlcXVpcmVzICRsb2NhdGlvblxuICAgKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogV2hlbiBjYWxsZWQsIGl0IHNjcm9sbHMgdG8gdGhlIGVsZW1lbnQgcmVsYXRlZCB0byB0aGUgc3BlY2lmaWVkIGBoYXNoYCBvciAoaWYgb21pdHRlZCkgdG8gdGhlXG4gICAqIGN1cnJlbnQgdmFsdWUgb2Yge0BsaW5rIG5nLiRsb2NhdGlvbiNoYXNoICRsb2NhdGlvbi5oYXNoKCl9LCBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIHNwZWNpZmllZFxuICAgKiBpbiB0aGVcbiAgICogW0hUTUw1IHNwZWNdKGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2Jyb3dzZXJzLmh0bWwjYW4taW5kaWNhdGVkLXBhcnQtb2YtdGhlLWRvY3VtZW50KS5cbiAgICpcbiAgICogSXQgYWxzbyB3YXRjaGVzIHRoZSB7QGxpbmsgbmcuJGxvY2F0aW9uI2hhc2ggJGxvY2F0aW9uLmhhc2goKX0gYW5kIGF1dG9tYXRpY2FsbHkgc2Nyb2xscyB0b1xuICAgKiBtYXRjaCBhbnkgYW5jaG9yIHdoZW5ldmVyIGl0IGNoYW5nZXMuIFRoaXMgY2FuIGJlIGRpc2FibGVkIGJ5IGNhbGxpbmdcbiAgICoge0BsaW5rIG5nLiRhbmNob3JTY3JvbGxQcm92aWRlciNkaXNhYmxlQXV0b1Njcm9sbGluZyAkYW5jaG9yU2Nyb2xsUHJvdmlkZXIuZGlzYWJsZUF1dG9TY3JvbGxpbmcoKX0uXG4gICAqXG4gICAqIEFkZGl0aW9uYWxseSwgeW91IGNhbiB1c2UgaXRzIHtAbGluayBuZy4kYW5jaG9yU2Nyb2xsI3lPZmZzZXQgeU9mZnNldH0gcHJvcGVydHkgdG8gc3BlY2lmeSBhXG4gICAqIHZlcnRpY2FsIHNjcm9sbC1vZmZzZXQgKGVpdGhlciBmaXhlZCBvciBkeW5hbWljKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBoYXNoIFRoZSBoYXNoIHNwZWNpZnlpbmcgdGhlIGVsZW1lbnQgdG8gc2Nyb2xsIHRvLiBJZiBvbWl0dGVkLCB0aGUgdmFsdWUgb2ZcbiAgICogICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZy4kbG9jYXRpb24jaGFzaCAkbG9jYXRpb24uaGFzaCgpfSB3aWxsIGJlIHVzZWQuXG4gICAqXG4gICAqIEBwcm9wZXJ0eSB7KG51bWJlcnxmdW5jdGlvbnxqcUxpdGUpfSB5T2Zmc2V0XG4gICAqIElmIHNldCwgc3BlY2lmaWVzIGEgdmVydGljYWwgc2Nyb2xsLW9mZnNldC4gVGhpcyBpcyBvZnRlbiB1c2VmdWwgd2hlbiB0aGVyZSBhcmUgZml4ZWRcbiAgICogcG9zaXRpb25lZCBlbGVtZW50cyBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlLCBzdWNoIGFzIG5hdmJhcnMsIGhlYWRlcnMgZXRjLlxuICAgKlxuICAgKiBgeU9mZnNldGAgY2FuIGJlIHNwZWNpZmllZCBpbiB2YXJpb3VzIHdheXM6XG4gICAqIC0gKipudW1iZXIqKjogQSBmaXhlZCBudW1iZXIgb2YgcGl4ZWxzIHRvIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPjxiciAvPlxuICAgKiAtICoqZnVuY3Rpb24qKjogQSBnZXR0ZXIgZnVuY3Rpb24gY2FsbGVkIGV2ZXJ5dGltZSBgJGFuY2hvclNjcm9sbCgpYCBpcyBleGVjdXRlZC4gTXVzdCByZXR1cm5cbiAgICogICBhIG51bWJlciByZXByZXNlbnRpbmcgdGhlIG9mZnNldCAoaW4gcGl4ZWxzKS48YnIgLz48YnIgLz5cbiAgICogLSAqKmpxTGl0ZSoqOiBBIGpxTGl0ZS9qUXVlcnkgZWxlbWVudCB0byBiZSB1c2VkIGZvciBzcGVjaWZ5aW5nIHRoZSBvZmZzZXQuIFRoZSBkaXN0YW5jZSBmcm9tXG4gICAqICAgdGhlIHRvcCBvZiB0aGUgcGFnZSB0byB0aGUgZWxlbWVudCdzIGJvdHRvbSB3aWxsIGJlIHVzZWQgYXMgb2Zmc2V0LjxiciAvPlxuICAgKiAgICoqTm90ZSoqOiBUaGUgZWxlbWVudCB3aWxsIGJlIHRha2VuIGludG8gYWNjb3VudCBvbmx5IGFzIGxvbmcgYXMgaXRzIGBwb3NpdGlvbmAgaXMgc2V0IHRvXG4gICAqICAgYGZpeGVkYC4gVGhpcyBvcHRpb24gaXMgdXNlZnVsLCB3aGVuIGRlYWxpbmcgd2l0aCByZXNwb25zaXZlIG5hdmJhcnMvaGVhZGVycyB0aGF0IGFkanVzdFxuICAgKiAgIHRoZWlyIGhlaWdodCBhbmQvb3IgcG9zaXRpb25pbmcgYWNjb3JkaW5nIHRvIHRoZSB2aWV3cG9ydCdzIHNpemUuXG4gICAqXG4gICAqIDxiciAvPlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiBJbiBvcmRlciBmb3IgYHlPZmZzZXRgIHRvIHdvcmsgcHJvcGVybHksIHNjcm9sbGluZyBzaG91bGQgdGFrZSBwbGFjZSBvbiB0aGUgZG9jdW1lbnQncyByb290IGFuZFxuICAgKiBub3Qgc29tZSBjaGlsZCBlbGVtZW50LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgPGV4YW1wbGUgbW9kdWxlPVwiYW5jaG9yU2Nyb2xsRXhhbXBsZVwiIG5hbWU9XCJhbmNob3Itc2Nyb2xsXCI+XG4gICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxkaXYgaWQ9XCJzY3JvbGxBcmVhXCIgbmctY29udHJvbGxlcj1cIlNjcm9sbENvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgPGEgbmctY2xpY2s9XCJnb3RvQm90dG9tKClcIj5HbyB0byBib3R0b208L2E+XG4gICAgICAgICAgIDxhIGlkPVwiYm90dG9tXCI+PC9hPiBZb3UncmUgYXQgdGhlIGJvdHRvbSFcbiAgICAgICAgIDwvZGl2PlxuICAgICAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnYW5jaG9yU2Nyb2xsRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignU2Nyb2xsQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJyxcbiAgICAgICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRsb2NhdGlvbiwgJGFuY2hvclNjcm9sbCkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmdvdG9Cb3R0b20gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBsb2NhdGlvbi5oYXNoIHRvIHRoZSBpZCBvZlxuICAgICAgICAgICAgICAgICAvLyB0aGUgZWxlbWVudCB5b3Ugd2lzaCB0byBzY3JvbGwgdG8uXG4gICAgICAgICAgICAgICAgICRsb2NhdGlvbi5oYXNoKCdib3R0b20nKTtcblxuICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKVxuICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgICAgI3Njcm9sbEFyZWEge1xuICAgICAgICAgICBoZWlnaHQ6IDI4MHB4O1xuICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgIH1cblxuICAgICAgICAgI2JvdHRvbSB7XG4gICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICBtYXJnaW4tdG9wOiAyMDAwcHg7XG4gICAgICAgICB9XG4gICAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gICAqXG4gICAqIDxociAvPlxuICAgKiBUaGUgZXhhbXBsZSBiZWxvdyBpbGx1c3RyYXRlcyB0aGUgdXNlIG9mIGEgdmVydGljYWwgc2Nyb2xsLW9mZnNldCAoc3BlY2lmaWVkIGFzIGEgZml4ZWQgdmFsdWUpLlxuICAgKiBTZWUge0BsaW5rIG5nLiRhbmNob3JTY3JvbGwjeU9mZnNldCAkYW5jaG9yU2Nyb2xsLnlPZmZzZXR9IGZvciBtb3JlIGRldGFpbHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgIDxleGFtcGxlIG1vZHVsZT1cImFuY2hvclNjcm9sbE9mZnNldEV4YW1wbGVcIiBuYW1lPVwiYW5jaG9yLXNjcm9sbC1vZmZzZXRcIj5cbiAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZpeGVkLWhlYWRlclwiIG5nLWNvbnRyb2xsZXI9XCJoZWFkZXJDdHJsXCI+XG4gICAgICAgICAgIDxhIGhyZWY9XCJcIiBuZy1jbGljaz1cImdvdG9BbmNob3IoeClcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XG4gICAgICAgICAgICAgR28gdG8gYW5jaG9yIHt7eH19XG4gICAgICAgICAgIDwvYT5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGRpdiBpZD1cImFuY2hvcnt7eH19XCIgY2xhc3M9XCJhbmNob3JcIiBuZy1yZXBlYXQ9XCJ4IGluIFsxLDIsMyw0LDVdXCI+XG4gICAgICAgICAgIEFuY2hvciB7e3h9fSBvZiA1XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICA8L2ZpbGU+XG4gICAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2FuY2hvclNjcm9sbE9mZnNldEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLnJ1bihbJyRhbmNob3JTY3JvbGwnLCBmdW5jdGlvbigkYW5jaG9yU2Nyb2xsKSB7XG4gICAgICAgICAgICAgJGFuY2hvclNjcm9sbC55T2Zmc2V0ID0gNTA7ICAgLy8gYWx3YXlzIHNjcm9sbCBieSA1MCBleHRyYSBwaXhlbHNcbiAgICAgICAgICAgfV0pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdoZWFkZXJDdHJsJywgWyckYW5jaG9yU2Nyb2xsJywgJyRsb2NhdGlvbicsICckc2NvcGUnLFxuICAgICAgICAgICAgIGZ1bmN0aW9uKCRhbmNob3JTY3JvbGwsICRsb2NhdGlvbiwgJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAkc2NvcGUuZ290b0FuY2hvciA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgdmFyIG5ld0hhc2ggPSAnYW5jaG9yJyArIHg7XG4gICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24uaGFzaCgpICE9PSBuZXdIYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSAkbG9jYXRpb24uaGFzaCB0byBgbmV3SGFzaGAgYW5kXG4gICAgICAgICAgICAgICAgICAgLy8gJGFuY2hvclNjcm9sbCB3aWxsIGF1dG9tYXRpY2FsbHkgc2Nyb2xsIHRvIGl0XG4gICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLmhhc2goJ2FuY2hvcicgKyB4KTtcbiAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKSBleHBsaWNpdGx5LFxuICAgICAgICAgICAgICAgICAgIC8vIHNpbmNlICRsb2NhdGlvbi5oYXNoIGhhc24ndCBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgXSk7XG4gICAgICAgPC9maWxlPlxuICAgICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAgIGJvZHkge1xuICAgICAgICAgICBwYWRkaW5nLXRvcDogNTBweDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmFuY2hvciB7XG4gICAgICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCBEYXJrT3JjaGlkO1xuICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDEwcHggMjAwcHggMTBweDtcbiAgICAgICAgIH1cblxuICAgICAgICAgLmZpeGVkLWhlYWRlciB7XG4gICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgaGVpZ2h0OiA1MHB4O1xuICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgICAgIHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7XG4gICAgICAgICB9XG5cbiAgICAgICAgIC5maXhlZC1oZWFkZXIgPiBhIHtcbiAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICBtYXJnaW46IDVweCAxNXB4O1xuICAgICAgICAgfVxuICAgICAgIDwvZmlsZT5cbiAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRsb2NhdGlvbicsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHdpbmRvdywgJGxvY2F0aW9uLCAkcm9vdFNjb3BlKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gJHdpbmRvdy5kb2N1bWVudDtcblxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZmlyc3QgYW5jaG9yIGZyb20gYSBOb2RlTGlzdFxuICAgIC8vICh1c2luZyBgQXJyYXkjc29tZSgpYCBpbnN0ZWFkIG9mIGBhbmd1bGFyI2ZvckVhY2goKWAgc2luY2UgaXQncyBtb3JlIHBlcmZvcm1hbnRcbiAgICAvLyAgYW5kIHdvcmtpbmcgaW4gYWxsIHN1cHBvcnRlZCBicm93c2Vycy4pXG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3RBbmNob3IobGlzdCkge1xuICAgICAgdmFyIHJlc3VsdCA9IG51bGw7XG4gICAgICBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGxpc3QsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKG5vZGVOYW1lXyhlbGVtZW50KSA9PT0gJ2EnKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZWxlbWVudDtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFlPZmZzZXQoKSB7XG5cbiAgICAgIHZhciBvZmZzZXQgPSBzY3JvbGwueU9mZnNldDtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ob2Zmc2V0KSkge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50KG9mZnNldCkpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBvZmZzZXRbMF07XG4gICAgICAgIHZhciBzdHlsZSA9ICR3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcbiAgICAgICAgaWYgKHN0eWxlLnBvc2l0aW9uICE9PSAnZml4ZWQnKSB7XG4gICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNOdW1iZXIob2Zmc2V0KSkge1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvKGVsZW0pIHtcbiAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgIGVsZW0uc2Nyb2xsSW50b1ZpZXcoKTtcblxuICAgICAgICB2YXIgb2Zmc2V0ID0gZ2V0WU9mZnNldCgpO1xuXG4gICAgICAgIGlmIChvZmZzZXQpIHtcbiAgICAgICAgICAvLyBgb2Zmc2V0YCBpcyB0aGUgbnVtYmVyIG9mIHBpeGVscyB3ZSBzaG91bGQgc2Nyb2xsIFVQIGluIG9yZGVyIHRvIGFsaWduIGBlbGVtYCBwcm9wZXJseS5cbiAgICAgICAgICAvLyBUaGlzIGlzIHRydWUgT05MWSBpZiB0aGUgY2FsbCB0byBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCBpbml0aWFsbHkgYWxpZ25zIGBlbGVtYCBhdCB0aGVcbiAgICAgICAgICAvLyB0b3Agb2YgdGhlIHZpZXdwb3J0LlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSUYgdGhlIG51bWJlciBvZiBwaXhlbHMgZnJvbSB0aGUgdG9wIG9mIGBlbGVtYCB0byB0aGUgZW5kIG9mIHRoZSBwYWdlJ3MgY29udGVudCBpcyBsZXNzXG4gICAgICAgICAgLy8gdGhhbiB0aGUgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCwgdGhlbiBgZWxlbS5zY3JvbGxJbnRvVmlldygpYCB3aWxsIGFsaWduIHRoZSBgZWxlbWAgc29tZVxuICAgICAgICAgIC8vIHdheSBkb3duIHRoZSBwYWdlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhpcyBpcyBvZnRlbiB0aGUgY2FzZSBmb3IgZWxlbWVudHMgbmVhciB0aGUgYm90dG9tIG9mIHRoZSBwYWdlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSW4gc3VjaCBjYXNlcyB3ZSBkbyBub3QgbmVlZCB0byBzY3JvbGwgdGhlIHdob2xlIGBvZmZzZXRgIHVwLCBqdXN0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW5cbiAgICAgICAgICAvLyB0aGUgdG9wIG9mIHRoZSBlbGVtZW50IGFuZCB0aGUgb2Zmc2V0LCB3aGljaCBpcyBlbm91Z2ggdG8gYWxpZ24gdGhlIHRvcCBvZiBgZWxlbWAgYXQgdGhlXG4gICAgICAgICAgLy8gZGVzaXJlZCBwb3NpdGlvbi5cbiAgICAgICAgICB2YXIgZWxlbVRvcCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICR3aW5kb3cuc2Nyb2xsQnkoMCwgZWxlbVRvcCAtIG9mZnNldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2Nyb2xsKGhhc2gpIHtcbiAgICAgIC8vIEFsbG93IG51bWVyaWMgaGFzaGVzXG4gICAgICBoYXNoID0gaXNTdHJpbmcoaGFzaCkgPyBoYXNoIDogaXNOdW1iZXIoaGFzaCkgPyBoYXNoLnRvU3RyaW5nKCkgOiAkbG9jYXRpb24uaGFzaCgpO1xuICAgICAgdmFyIGVsbTtcblxuICAgICAgLy8gZW1wdHkgaGFzaCwgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGlmICghaGFzaCkgc2Nyb2xsVG8obnVsbCk7XG5cbiAgICAgIC8vIGVsZW1lbnQgd2l0aCBnaXZlbiBpZFxuICAgICAgZWxzZSBpZiAoKGVsbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhhc2gpKSkgc2Nyb2xsVG8oZWxtKTtcblxuICAgICAgLy8gZmlyc3QgYW5jaG9yIHdpdGggZ2l2ZW4gbmFtZSA6LURcbiAgICAgIGVsc2UgaWYgKChlbG0gPSBnZXRGaXJzdEFuY2hvcihkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShoYXNoKSkpKSBzY3JvbGxUbyhlbG0pO1xuXG4gICAgICAvLyBubyBlbGVtZW50IGFuZCBoYXNoID09PSAndG9wJywgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgIGVsc2UgaWYgKGhhc2ggPT09ICd0b3AnKSBzY3JvbGxUbyhudWxsKTtcbiAgICB9XG5cbiAgICAvLyBkb2VzIG5vdCBzY3JvbGwgd2hlbiB1c2VyIGNsaWNrcyBvbiBhbmNob3IgbGluayB0aGF0IGlzIGN1cnJlbnRseSBvblxuICAgIC8vIChubyB1cmwgY2hhbmdlLCBubyAkbG9jYXRpb24uaGFzaCgpIGNoYW5nZSksIGJyb3dzZXIgbmF0aXZlIGRvZXMgc2Nyb2xsXG4gICAgaWYgKGF1dG9TY3JvbGxpbmdFbmFibGVkKSB7XG4gICAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiBhdXRvU2Nyb2xsV2F0Y2goKSB7cmV0dXJuICRsb2NhdGlvbi5oYXNoKCk7fSxcbiAgICAgICAgZnVuY3Rpb24gYXV0b1Njcm9sbFdhdGNoQWN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgLy8gc2tpcCB0aGUgaW5pdGlhbCBzY3JvbGwgaWYgJGxvY2F0aW9uLmhhc2ggaXMgZW1wdHlcbiAgICAgICAgICBpZiAobmV3VmFsID09PSBvbGRWYWwgJiYgbmV3VmFsID09PSAnJykgcmV0dXJuO1xuXG4gICAgICAgICAganFMaXRlRG9jdW1lbnRMb2FkZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoc2Nyb2xsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjcm9sbDtcbiAgfV07XG59XG5cbnZhciAkYW5pbWF0ZU1pbkVyciA9IG1pbkVycignJGFuaW1hdGUnKTtcbnZhciBFTEVNRU5UX05PREUgPSAxO1xudmFyIE5HX0FOSU1BVEVfQ0xBU1NOQU1FID0gJ25nLWFuaW1hdGUnO1xuXG5mdW5jdGlvbiBtZXJnZUNsYXNzZXMoYSxiKSB7XG4gIGlmICghYSAmJiAhYikgcmV0dXJuICcnO1xuICBpZiAoIWEpIHJldHVybiBiO1xuICBpZiAoIWIpIHJldHVybiBhO1xuICBpZiAoaXNBcnJheShhKSkgYSA9IGEuam9pbignICcpO1xuICBpZiAoaXNBcnJheShiKSkgYiA9IGIuam9pbignICcpO1xuICByZXR1cm4gYSArICcgJyArIGI7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RFbGVtZW50Tm9kZShlbGVtZW50KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBlbG0gPSBlbGVtZW50W2ldO1xuICAgIGlmIChlbG0ubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERSkge1xuICAgICAgcmV0dXJuIGVsbTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3BsaXRDbGFzc2VzKGNsYXNzZXMpIHtcbiAgaWYgKGlzU3RyaW5nKGNsYXNzZXMpKSB7XG4gICAgY2xhc3NlcyA9IGNsYXNzZXMuc3BsaXQoJyAnKTtcbiAgfVxuXG4gIC8vIFVzZSBjcmVhdGVNYXAoKSB0byBwcmV2ZW50IGNsYXNzIGFzc3VtcHRpb25zIGludm9sdmluZyBwcm9wZXJ0eSBuYW1lcyBpblxuICAvLyBPYmplY3QucHJvdG90eXBlXG4gIHZhciBvYmogPSBjcmVhdGVNYXAoKTtcbiAgZm9yRWFjaChjbGFzc2VzLCBmdW5jdGlvbihrbGFzcykge1xuICAgIC8vIHNvbWV0aW1lcyB0aGUgc3BsaXQgbGVhdmVzIGVtcHR5IHN0cmluZyB2YWx1ZXNcbiAgICAvLyBpbmNhc2UgZXh0cmEgc3BhY2VzIHdlcmUgYXBwbGllZCB0byB0aGUgb3B0aW9uc1xuICAgIGlmIChrbGFzcy5sZW5ndGgpIHtcbiAgICAgIG9ialtrbGFzc10gPSB0cnVlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbi8vIGlmIGFueSBvdGhlciB0eXBlIG9mIG9wdGlvbnMgdmFsdWUgYmVzaWRlcyBhbiBPYmplY3QgdmFsdWUgaXNcbi8vIHBhc3NlZCBpbnRvIHRoZSAkYW5pbWF0ZS5tZXRob2QoKSBhbmltYXRpb24gdGhlbiB0aGlzIGhlbHBlciBjb2RlXG4vLyB3aWxsIGJlIHJ1biB3aGljaCB3aWxsIGlnbm9yZSBpdC4gV2hpbGUgdGhpcyBwYXRjaCBpcyBub3QgdGhlXG4vLyBncmVhdGVzdCBzb2x1dGlvbiB0byB0aGlzLCBhIGxvdCBvZiBleGlzdGluZyBwbHVnaW5zIGRlcGVuZCBvblxuLy8gJGFuaW1hdGUgdG8gZWl0aGVyIGNhbGwgdGhlIGNhbGxiYWNrICg8IDEuMikgb3IgcmV0dXJuIGEgcHJvbWlzZVxuLy8gdGhhdCBjYW4gYmUgY2hhbmdlZC4gVGhpcyBoZWxwZXIgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IHRoZSBvcHRpb25zXG4vLyBhcmUgd2lwZWQgY2xlYW4gaW5jYXNlIGEgY2FsbGJhY2sgZnVuY3Rpb24gaXMgcHJvdmlkZWQuXG5mdW5jdGlvbiBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykge1xuICByZXR1cm4gaXNPYmplY3Qob3B0aW9ucylcbiAgICAgID8gb3B0aW9uc1xuICAgICAgOiB7fTtcbn1cblxudmFyICQkQ29yZUFuaW1hdGVKc1Byb3ZpZGVyID0gLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBub29wO1xufTtcblxuLy8gdGhpcyBpcyBwcmVmaXhlZCB3aXRoIENvcmUgc2luY2UgaXQgY29uZmxpY3RzIHdpdGhcbi8vIHRoZSBhbmltYXRlUXVldWVQcm92aWRlciBkZWZpbmVkIGluIG5nQW5pbWF0ZS9hbmltYXRlUXVldWUuanNcbnZhciAkJENvcmVBbmltYXRlUXVldWVQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdmFyIHBvc3REaWdlc3RRdWV1ZSA9IG5ldyBOZ01hcCgpO1xuICB2YXIgcG9zdERpZ2VzdEVsZW1lbnRzID0gW107XG5cbiAgdGhpcy4kZ2V0ID0gWyckJEFuaW1hdGVSdW5uZXInLCAnJHJvb3RTY29wZScsXG4gICAgICAgZnVuY3Rpb24oJCRBbmltYXRlUnVubmVyLCAgICRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZW5hYmxlZDogbm9vcCxcbiAgICAgIG9uOiBub29wLFxuICAgICAgb2ZmOiBub29wLFxuICAgICAgcGluOiBub29wLFxuXG4gICAgICBwdXNoOiBmdW5jdGlvbihlbGVtZW50LCBldmVudCwgb3B0aW9ucywgZG9tT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmIChkb21PcGVyYXRpb24pIHtcbiAgICAgICAgICBkb21PcGVyYXRpb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5mcm9tKSB7XG4gICAgICAgICAgZWxlbWVudC5jc3Mob3B0aW9ucy5mcm9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgICAgIGVsZW1lbnQuY3NzKG9wdGlvbnMudG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYWRkQ2xhc3MgfHwgb3B0aW9ucy5yZW1vdmVDbGFzcykge1xuICAgICAgICAgIGFkZFJlbW92ZUNsYXNzZXNQb3N0RGlnZXN0KGVsZW1lbnQsIG9wdGlvbnMuYWRkQ2xhc3MsIG9wdGlvbnMucmVtb3ZlQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJ1bm5lciA9IG5ldyAkJEFuaW1hdGVSdW5uZXIoKTtcblxuICAgICAgICAvLyBzaW5jZSB0aGVyZSBhcmUgbm8gYW5pbWF0aW9ucyB0byBydW4gdGhlIHJ1bm5lciBuZWVkcyB0byBiZVxuICAgICAgICAvLyBub3RpZmllZCB0aGF0IHRoZSBhbmltYXRpb24gY2FsbCBpcyBjb21wbGV0ZS5cbiAgICAgICAgcnVubmVyLmNvbXBsZXRlKCk7XG4gICAgICAgIHJldHVybiBydW5uZXI7XG4gICAgICB9XG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gdXBkYXRlRGF0YShkYXRhLCBjbGFzc2VzLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcbiAgICAgIGlmIChjbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzZXMgPSBpc1N0cmluZyhjbGFzc2VzKSA/IGNsYXNzZXMuc3BsaXQoJyAnKSA6XG4gICAgICAgICAgICAgICAgICBpc0FycmF5KGNsYXNzZXMpID8gY2xhc3NlcyA6IFtdO1xuICAgICAgICBmb3JFYWNoKGNsYXNzZXMsIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgICAgICAgIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGF0YVtjbGFzc05hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGFuZ2VkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUNTU0NsYXNzQ2hhbmdlcygpIHtcbiAgICAgIGZvckVhY2gocG9zdERpZ2VzdEVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIHZhciBkYXRhID0gcG9zdERpZ2VzdFF1ZXVlLmdldChlbGVtZW50KTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICB2YXIgZXhpc3RpbmcgPSBzcGxpdENsYXNzZXMoZWxlbWVudC5hdHRyKCdjbGFzcycpKTtcbiAgICAgICAgICB2YXIgdG9BZGQgPSAnJztcbiAgICAgICAgICB2YXIgdG9SZW1vdmUgPSAnJztcbiAgICAgICAgICBmb3JFYWNoKGRhdGEsIGZ1bmN0aW9uKHN0YXR1cywgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgaGFzQ2xhc3MgPSAhIWV4aXN0aW5nW2NsYXNzTmFtZV07XG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9PSBoYXNDbGFzcykge1xuICAgICAgICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgdG9BZGQgKz0gKHRvQWRkLmxlbmd0aCA/ICcgJyA6ICcnKSArIGNsYXNzTmFtZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b1JlbW92ZSArPSAodG9SZW1vdmUubGVuZ3RoID8gJyAnIDogJycpICsgY2xhc3NOYW1lO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQsIGZ1bmN0aW9uKGVsbSkge1xuICAgICAgICAgICAgaWYgKHRvQWRkKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZUFkZENsYXNzKGVsbSwgdG9BZGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAgIGpxTGl0ZVJlbW92ZUNsYXNzKGVsbSwgdG9SZW1vdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHBvc3REaWdlc3RRdWV1ZS5kZWxldGUoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcG9zdERpZ2VzdEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBhZGRSZW1vdmVDbGFzc2VzUG9zdERpZ2VzdChlbGVtZW50LCBhZGQsIHJlbW92ZSkge1xuICAgICAgdmFyIGRhdGEgPSBwb3N0RGlnZXN0UXVldWUuZ2V0KGVsZW1lbnQpIHx8IHt9O1xuXG4gICAgICB2YXIgY2xhc3Nlc0FkZGVkID0gdXBkYXRlRGF0YShkYXRhLCBhZGQsIHRydWUpO1xuICAgICAgdmFyIGNsYXNzZXNSZW1vdmVkID0gdXBkYXRlRGF0YShkYXRhLCByZW1vdmUsIGZhbHNlKTtcblxuICAgICAgaWYgKGNsYXNzZXNBZGRlZCB8fCBjbGFzc2VzUmVtb3ZlZCkge1xuXG4gICAgICAgIHBvc3REaWdlc3RRdWV1ZS5zZXQoZWxlbWVudCwgZGF0YSk7XG4gICAgICAgIHBvc3REaWdlc3RFbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChwb3N0RGlnZXN0RWxlbWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgJHJvb3RTY29wZS4kJHBvc3REaWdlc3QoaGFuZGxlQ1NTQ2xhc3NDaGFuZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfV07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGFuaW1hdGVQcm92aWRlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiAkYW5pbWF0ZSB0aGF0IGRvZXNuJ3QgcGVyZm9ybSBhbnkgYW5pbWF0aW9ucywgaW5zdGVhZCBqdXN0XG4gKiBzeW5jaHJvbm91c2x5IHBlcmZvcm1zIERPTSB1cGRhdGVzIGFuZCByZXNvbHZlcyB0aGUgcmV0dXJuZWQgcnVubmVyIHByb21pc2UuXG4gKlxuICogSW4gb3JkZXIgdG8gZW5hYmxlIGFuaW1hdGlvbnMgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBoYXMgdG8gYmUgbG9hZGVkLlxuICpcbiAqIFRvIHNlZSB0aGUgZnVuY3Rpb25hbCBpbXBsZW1lbnRhdGlvbiBjaGVjayBvdXQgYHNyYy9uZ0FuaW1hdGUvYW5pbWF0ZS5qc2AuXG4gKi9cbnZhciAkQW5pbWF0ZVByb3ZpZGVyID0gWyckcHJvdmlkZScsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbigkcHJvdmlkZSkge1xuICB2YXIgcHJvdmlkZXIgPSB0aGlzO1xuICB2YXIgY2xhc3NOYW1lRmlsdGVyID0gbnVsbDtcbiAgdmFyIGN1c3RvbUZpbHRlciA9IG51bGw7XG5cbiAgdGhpcy4kJHJlZ2lzdGVyZWRBbmltYXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNyZWdpc3RlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXJzIGEgbmV3IGluamVjdGFibGUgYW5pbWF0aW9uIGZhY3RvcnkgZnVuY3Rpb24uIFRoZSBmYWN0b3J5IGZ1bmN0aW9uIHByb2R1Y2VzIHRoZVxuICAgKiBhbmltYXRpb24gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIGNhbGxiYWNrIGZ1bmN0aW9ucyBmb3IgZWFjaCBldmVudCB0aGF0IGlzIGV4cGVjdGVkIHRvIGJlXG4gICAqIGFuaW1hdGVkLlxuICAgKlxuICAgKiAgICogYGV2ZW50Rm5gOiBgZnVuY3Rpb24oZWxlbWVudCwgLi4uICwgZG9uZUZ1bmN0aW9uLCBvcHRpb25zKWBcbiAgICogICBUaGUgZWxlbWVudCB0byBhbmltYXRlLCB0aGUgYGRvbmVGdW5jdGlvbmAgYW5kIHRoZSBvcHRpb25zIGZlZCBpbnRvIHRoZSBhbmltYXRpb24uIERlcGVuZGluZ1xuICAgKiAgIG9uIHRoZSB0eXBlIG9mIGFuaW1hdGlvbiBhZGRpdGlvbmFsIGFyZ3VtZW50cyB3aWxsIGJlIGluamVjdGVkIGludG8gdGhlIGFuaW1hdGlvbiBmdW5jdGlvbi4gVGhlXG4gICAqICAgbGlzdCBiZWxvdyBleHBsYWlucyB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlcyBmb3IgdGhlIGRpZmZlcmVudCBhbmltYXRpb24gbWV0aG9kczpcbiAgICpcbiAgICogICAtIHNldENsYXNzOiBmdW5jdGlvbihlbGVtZW50LCBhZGRlZENsYXNzZXMsIHJlbW92ZWRDbGFzc2VzLCBkb25lRnVuY3Rpb24sIG9wdGlvbnMpXG4gICAqICAgLSBhZGRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgYWRkZWRDbGFzc2VzLCBkb25lRnVuY3Rpb24sIG9wdGlvbnMpXG4gICAqICAgLSByZW1vdmVDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgcmVtb3ZlZENsYXNzZXMsIGRvbmVGdW5jdGlvbiwgb3B0aW9ucylcbiAgICogICAtIGVudGVyLCBsZWF2ZSwgbW92ZTogZnVuY3Rpb24oZWxlbWVudCwgZG9uZUZ1bmN0aW9uLCBvcHRpb25zKVxuICAgKiAgIC0gYW5pbWF0ZTogZnVuY3Rpb24oZWxlbWVudCwgZnJvbVN0eWxlcywgdG9TdHlsZXMsIGRvbmVGdW5jdGlvbiwgb3B0aW9ucylcbiAgICpcbiAgICogICBNYWtlIHN1cmUgdG8gdHJpZ2dlciB0aGUgYGRvbmVGdW5jdGlvbmAgb25jZSB0aGUgYW5pbWF0aW9uIGlzIGZ1bGx5IGNvbXBsZXRlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAgIHJldHVybiB7XG4gICAqICAgICAvL2VudGVyLCBsZWF2ZSwgbW92ZSBzaWduYXR1cmVcbiAgICogICAgIGV2ZW50Rm4gOiBmdW5jdGlvbihlbGVtZW50LCBkb25lLCBvcHRpb25zKSB7XG4gICAqICAgICAgIC8vY29kZSB0byBydW4gdGhlIGFuaW1hdGlvblxuICAgKiAgICAgICAvL29uY2UgY29tcGxldGUsIHRoZW4gcnVuIGRvbmUoKVxuICAgKiAgICAgICByZXR1cm4gZnVuY3Rpb24gZW5kRnVuY3Rpb24od2FzQ2FuY2VsbGVkKSB7XG4gICAqICAgICAgICAgLy9jb2RlIHRvIGNhbmNlbCB0aGUgYW5pbWF0aW9uXG4gICAqICAgICAgIH1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYW5pbWF0aW9uICh0aGlzIGlzIHdoYXQgdGhlIGNsYXNzLWJhc2VkIENTUyB2YWx1ZSB3aWxsIGJlIGNvbXBhcmVkIHRvKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeSBUaGUgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgdG8gcmV0dXJuIHRoZSBhbmltYXRpb25cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuXG4gICAqL1xuICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgZmFjdG9yeSkge1xuICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApICE9PSAnLicpIHtcbiAgICAgIHRocm93ICRhbmltYXRlTWluRXJyKCdub3Rjc2VsJywgJ0V4cGVjdGluZyBjbGFzcyBzZWxlY3RvciBzdGFydGluZyB3aXRoIFxcJy5cXCcgZ290IFxcJ3swfVxcJy4nLCBuYW1lKTtcbiAgICB9XG5cbiAgICB2YXIga2V5ID0gbmFtZSArICctYW5pbWF0aW9uJztcbiAgICBwcm92aWRlci4kJHJlZ2lzdGVyZWRBbmltYXRpb25zW25hbWUuc3Vic3RyKDEpXSA9IGtleTtcbiAgICAkcHJvdmlkZS5mYWN0b3J5KGtleSwgZmFjdG9yeSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGFuaW1hdGVQcm92aWRlciNjdXN0b21GaWx0ZXJcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgYW5kL29yIHJldHVybnMgdGhlIGN1c3RvbSBmaWx0ZXIgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIHRvIFwiZmlsdGVyXCIgYW5pbWF0aW9ucywgaS5lLlxuICAgKiBkZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGlzIGFsbG93ZWQgb3Igbm90LiBXaGVuIG5vIGZpbHRlciBpcyBzcGVjaWZpZWQgKHRoZSBkZWZhdWx0KSwgbm9cbiAgICogYW5pbWF0aW9uIHdpbGwgYmUgYmxvY2tlZC4gU2V0dGluZyB0aGUgYGN1c3RvbUZpbHRlcmAgdmFsdWUgd2lsbCBvbmx5IGFsbG93IGFuaW1hdGlvbnMgZm9yXG4gICAqIHdoaWNoIHRoZSBmaWx0ZXIgZnVuY3Rpb24ncyByZXR1cm4gdmFsdWUgaXMgdHJ1dGh5LlxuICAgKlxuICAgKiBUaGlzIGFsbG93cyB0byBlYXNpbHkgY3JlYXRlIGFyYml0cmFyaWx5IGNvbXBsZXggcnVsZXMgZm9yIGZpbHRlcmluZyBhbmltYXRpb25zLCBzdWNoIGFzXG4gICAqIGFsbG93aW5nIHNwZWNpZmljIGV2ZW50cyBvbmx5LCBvciBlbmFibGluZyBhbmltYXRpb25zIG9uIHNwZWNpZmljIHN1YnRyZWVzIG9mIHRoZSBET00sIGV0Yy5cbiAgICogRmlsdGVyaW5nIGFuaW1hdGlvbnMgY2FuIGFsc28gYm9vc3QgcGVyZm9ybWFuY2UgZm9yIGxvdy1wb3dlcmVkIGRldmljZXMsIGFzIHdlbGwgYXNcbiAgICogYXBwbGljYXRpb25zIGNvbnRhaW5pbmcgYSBsb3Qgb2Ygc3RydWN0dXJhbCBvcGVyYXRpb25zLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICAgKiAgICoqQmVzdCBQcmFjdGljZToqKlxuICAgKiAgIEtlZXAgdGhlIGZpbHRlcmluZyBmdW5jdGlvbiBhcyBsZWFuIGFzIHBvc3NpYmxlLCBiZWNhdXNlIGl0IHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIERPTVxuICAgKiAgIGFjdGlvbiAoZS5nLiBpbnNlcnRpb24sIHJlbW92YWwsIGNsYXNzIGNoYW5nZSkgcGVyZm9ybWVkIGJ5IFwiYW5pbWF0aW9uLWF3YXJlXCIgZGlyZWN0aXZlcy5cbiAgICogICBTZWUge0BsaW5rIGd1aWRlL2FuaW1hdGlvbnMjd2hpY2gtZGlyZWN0aXZlcy1zdXBwb3J0LWFuaW1hdGlvbnMtIGhlcmV9IGZvciBhIGxpc3Qgb2YgYnVpbHQtaW5cbiAgICogICBkaXJlY3RpdmVzIHRoYXQgc3VwcG9ydCBhbmltYXRpb25zLlxuICAgKiAgIFBlcmZvcm1pbmcgY29tcHV0YXRpb25hbGx5IGV4cGVuc2l2ZSBvciB0aW1lLWNvbnN1bWluZyBvcGVyYXRpb25zIG9uIGVhY2ggY2FsbCBvZiB0aGVcbiAgICogICBmaWx0ZXJpbmcgZnVuY3Rpb24gY2FuIG1ha2UgeW91ciBhbmltYXRpb25zIHNsdWdnaXNoLlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogKipOb3RlOioqIElmIHByZXNlbnQsIGBjdXN0b21GaWx0ZXJgIHdpbGwgYmUgY2hlY2tlZCBiZWZvcmVcbiAgICoge0BsaW5rICRhbmltYXRlUHJvdmlkZXIjY2xhc3NOYW1lRmlsdGVyIGNsYXNzTmFtZUZpbHRlcn0uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBmaWx0ZXJGbiAtIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGZpbHRlciBhbGwgYW5pbWF0aW9ucy5cbiAgICogICBJZiBhIGZhbHN5IHZhbHVlIGlzIHJldHVybmVkLCBubyBhbmltYXRpb24gd2lsbCBiZSBwZXJmb3JtZWQuIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZFxuICAgKiAgIHdpdGggdGhlIGZvbGxvd2luZyBhcmd1bWVudHM6XG4gICAqICAgLSAqKm5vZGUqKiBge0RPTUVsZW1lbnR9YCAtIFRoZSBET00gZWxlbWVudCB0byBiZSBhbmltYXRlZC5cbiAgICogICAtICoqZXZlbnQqKiBge1N0cmluZ31gIC0gVGhlIG5hbWUgb2YgdGhlIGFuaW1hdGlvbiBldmVudCAoZS5nLiBgZW50ZXJgLCBgbGVhdmVgLCBgYWRkQ2xhc3NgXG4gICAqICAgICBldGMpLlxuICAgKiAgIC0gKipvcHRpb25zKiogYHtPYmplY3R9YCAtIEEgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB1c2VkIGZvciB0aGUgYW5pbWF0aW9uLlxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJlbnQgZmlsdGVyIGZ1bmN0aW9uIG9yIGBudWxsYCBpZiB0aGVyZSBpcyBub25lIHNldC5cbiAgICovXG4gIHRoaXMuY3VzdG9tRmlsdGVyID0gZnVuY3Rpb24oZmlsdGVyRm4pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY3VzdG9tRmlsdGVyID0gaXNGdW5jdGlvbihmaWx0ZXJGbikgPyBmaWx0ZXJGbiA6IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1c3RvbUZpbHRlcjtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkYW5pbWF0ZVByb3ZpZGVyI2NsYXNzTmFtZUZpbHRlclxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyBhbmQvb3IgcmV0dXJucyB0aGUgQ1NTIGNsYXNzIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIGNoZWNrZWQgd2hlbiBwZXJmb3JtaW5nXG4gICAqIGFuIGFuaW1hdGlvbi4gVXBvbiBib290c3RyYXAgdGhlIGNsYXNzTmFtZUZpbHRlciB2YWx1ZSBpcyBub3Qgc2V0IGF0IGFsbCBhbmQgd2lsbFxuICAgKiB0aGVyZWZvcmUgZW5hYmxlICRhbmltYXRlIHRvIGF0dGVtcHQgdG8gcGVyZm9ybSBhbiBhbmltYXRpb24gb24gYW55IGVsZW1lbnQgdGhhdCBpcyB0cmlnZ2VyZWQuXG4gICAqIFdoZW4gc2V0dGluZyB0aGUgYGNsYXNzTmFtZUZpbHRlcmAgdmFsdWUsIGFuaW1hdGlvbnMgd2lsbCBvbmx5IGJlIHBlcmZvcm1lZCBvbiBlbGVtZW50c1xuICAgKiB0aGF0IHN1Y2Nlc3NmdWxseSBtYXRjaCB0aGUgZmlsdGVyIGV4cHJlc3Npb24uIFRoaXMgaW4gdHVybiBjYW4gYm9vc3QgcGVyZm9ybWFuY2VcbiAgICogZm9yIGxvdy1wb3dlcmVkIGRldmljZXMgYXMgd2VsbCBhcyBhcHBsaWNhdGlvbnMgY29udGFpbmluZyBhIGxvdCBvZiBzdHJ1Y3R1cmFsIG9wZXJhdGlvbnMuXG4gICAqXG4gICAqICoqTm90ZToqKiBJZiBwcmVzZW50LCBgY2xhc3NOYW1lRmlsdGVyYCB3aWxsIGJlIGNoZWNrZWQgYWZ0ZXJcbiAgICoge0BsaW5rICRhbmltYXRlUHJvdmlkZXIjY3VzdG9tRmlsdGVyIGN1c3RvbUZpbHRlcn0uIElmIGBjdXN0b21GaWx0ZXJgIGlzIHByZXNlbnQgYW5kIHJldHVybnNcbiAgICogZmFsc2UsIGBjbGFzc05hbWVGaWx0ZXJgIHdpbGwgbm90IGJlIGNoZWNrZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gZXhwcmVzc2lvbiBUaGUgY2xhc3NOYW1lIGV4cHJlc3Npb24gd2hpY2ggd2lsbCBiZSBjaGVja2VkIGFnYWluc3QgYWxsIGFuaW1hdGlvbnNcbiAgICogQHJldHVybiB7UmVnRXhwfSBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIGV4cHJlc3Npb24gdmFsdWUuIElmIG51bGwgdGhlbiB0aGVyZSBpcyBubyBleHByZXNzaW9uIHZhbHVlXG4gICAqL1xuICB0aGlzLmNsYXNzTmFtZUZpbHRlciA9IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2xhc3NOYW1lRmlsdGVyID0gKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBSZWdFeHApID8gZXhwcmVzc2lvbiA6IG51bGw7XG4gICAgICBpZiAoY2xhc3NOYW1lRmlsdGVyKSB7XG4gICAgICAgIHZhciByZXNlcnZlZFJlZ2V4ID0gbmV3IFJlZ0V4cCgnWyhcXFxcc3xcXFxcLyldJyArIE5HX0FOSU1BVEVfQ0xBU1NOQU1FICsgJ1soXFxcXHN8XFxcXC8pXScpO1xuICAgICAgICBpZiAocmVzZXJ2ZWRSZWdleC50ZXN0KGNsYXNzTmFtZUZpbHRlci50b1N0cmluZygpKSkge1xuICAgICAgICAgIGNsYXNzTmFtZUZpbHRlciA9IG51bGw7XG4gICAgICAgICAgdGhyb3cgJGFuaW1hdGVNaW5FcnIoJ25vbmdjbHMnLCAnJGFuaW1hdGVQcm92aWRlci5jbGFzc05hbWVGaWx0ZXIocmVnZXgpIHByb2hpYml0cyBhY2NlcHRpbmcgYSByZWdleCB2YWx1ZSB3aGljaCBtYXRjaGVzL2NvbnRhaW5zIHRoZSBcInswfVwiIENTUyBjbGFzcy4nLCBOR19BTklNQVRFX0NMQVNTTkFNRSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNsYXNzTmFtZUZpbHRlcjtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbJyQkYW5pbWF0ZVF1ZXVlJywgZnVuY3Rpb24oJCRhbmltYXRlUXVldWUpIHtcbiAgICBmdW5jdGlvbiBkb21JbnNlcnQoZWxlbWVudCwgcGFyZW50RWxlbWVudCwgYWZ0ZXJFbGVtZW50KSB7XG4gICAgICAvLyBpZiBmb3Igc29tZSByZWFzb24gdGhlIHByZXZpb3VzIGVsZW1lbnQgd2FzIHJlbW92ZWRcbiAgICAgIC8vIGZyb20gdGhlIGRvbSBzb21ldGltZSBiZWZvcmUgdGhpcyBjb2RlIHJ1bnMgdGhlbiBsZXQnc1xuICAgICAgLy8ganVzdCBzdGljayB0byB1c2luZyB0aGUgcGFyZW50IGVsZW1lbnQgYXMgdGhlIGFuY2hvclxuICAgICAgaWYgKGFmdGVyRWxlbWVudCkge1xuICAgICAgICB2YXIgYWZ0ZXJOb2RlID0gZXh0cmFjdEVsZW1lbnROb2RlKGFmdGVyRWxlbWVudCk7XG4gICAgICAgIGlmIChhZnRlck5vZGUgJiYgIWFmdGVyTm9kZS5wYXJlbnROb2RlICYmICFhZnRlck5vZGUucHJldmlvdXNFbGVtZW50U2libGluZykge1xuICAgICAgICAgIGFmdGVyRWxlbWVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhZnRlckVsZW1lbnQpIHtcbiAgICAgICAgYWZ0ZXJFbGVtZW50LmFmdGVyKGVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50RWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGFuaW1hdGVcbiAgICAgKiBAZGVzY3JpcHRpb24gVGhlICRhbmltYXRlIHNlcnZpY2UgZXhwb3NlcyBhIHNlcmllcyBvZiBET00gdXRpbGl0eSBtZXRob2RzIHRoYXQgcHJvdmlkZSBzdXBwb3J0XG4gICAgICogZm9yIGFuaW1hdGlvbiBob29rcy4gVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdGhlIGFwcGxpY2F0aW9uIG9mIERPTSBvcGVyYXRpb25zLCBob3dldmVyLFxuICAgICAqIHdoZW4gYW4gYW5pbWF0aW9uIGlzIGRldGVjdGVkIChhbmQgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZCksICRhbmltYXRlIHdpbGwgZG8gdGhlIGhlYXZ5IGxpZnRpbmdcbiAgICAgKiB0byBlbnN1cmUgdGhhdCBhbmltYXRpb24gcnVucyB3aXRoIHRoZSB0cmlnZ2VyZWQgRE9NIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgJGFuaW1hdGUgZG9lc24ndCB0cmlnZ2VyIGFueSBhbmltYXRpb25zLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBpc24ndFxuICAgICAqIGluY2x1ZGVkIGFuZCBvbmx5IHdoZW4gaXQgaXMgYWN0aXZlIHRoZW4gdGhlIGFuaW1hdGlvbiBob29rcyB0aGF0IGAkYW5pbWF0ZWAgdHJpZ2dlcnMgd2lsbCBiZVxuICAgICAqIGZ1bmN0aW9uYWwuIE9uY2UgYWN0aXZlIHRoZW4gYWxsIHN0cnVjdHVyYWwgYG5nLWAgZGlyZWN0aXZlcyB3aWxsIHRyaWdnZXIgYW5pbWF0aW9ucyBhcyB0aGV5IHBlcmZvcm1cbiAgICAgKiB0aGVpciBET00tcmVsYXRlZCBvcGVyYXRpb25zIChlbnRlciwgbGVhdmUgYW5kIG1vdmUpLiBPdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYG5nQ2xhc3NgLFxuICAgICAqIGBuZ1Nob3dgLCBgbmdIaWRlYCBhbmQgYG5nTWVzc2FnZXNgIGFsc28gcHJvdmlkZSBzdXBwb3J0IGZvciBhbmltYXRpb25zLlxuICAgICAqXG4gICAgICogSXQgaXMgcmVjb21tZW5kZWQgdGhhdCB0aGVgJGFuaW1hdGVgIHNlcnZpY2UgaXMgYWx3YXlzIHVzZWQgd2hlbiBleGVjdXRpbmcgRE9NLXJlbGF0ZWQgcHJvY2VkdXJlcyB3aXRoaW4gZGlyZWN0aXZlcy5cbiAgICAgKlxuICAgICAqIFRvIGxlYXJuIG1vcmUgYWJvdXQgZW5hYmxpbmcgYW5pbWF0aW9uIHN1cHBvcnQsIGNsaWNrIGhlcmUgdG8gdmlzaXQgdGhlXG4gICAgICoge0BsaW5rIG5nQW5pbWF0ZSBuZ0FuaW1hdGUgbW9kdWxlIHBhZ2V9LlxuICAgICAqL1xuICAgIHJldHVybiB7XG4gICAgICAvLyB3ZSBkb24ndCBjYWxsIGl0IGRpcmVjdGx5IHNpbmNlIG5vbi1leGlzdGFudCBhcmd1bWVudHMgbWF5XG4gICAgICAvLyBiZSBpbnRlcnByZXRlZCBhcyBudWxsIHdpdGhpbiB0aGUgc3ViIGVuYWJsZWQgZnVuY3Rpb25cblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjb25cbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gU2V0cyB1cCBhbiBldmVudCBsaXN0ZW5lciB0byBmaXJlIHdoZW5ldmVyIHRoZSBhbmltYXRpb24gZXZlbnQgKGVudGVyLCBsZWF2ZSwgbW92ZSwgZXRjLi4uKVxuICAgICAgICogICAgaGFzIGZpcmVkIG9uIHRoZSBnaXZlbiBlbGVtZW50IG9yIGFtb25nIGFueSBvZiBpdHMgY2hpbGRyZW4uIE9uY2UgdGhlIGxpc3RlbmVyIGlzIGZpcmVkLCB0aGUgcHJvdmlkZWQgY2FsbGJhY2tcbiAgICAgICAqICAgIGlzIGZpcmVkIHdpdGggdGhlIGZvbGxvd2luZyBwYXJhbXM6XG4gICAgICAgKlxuICAgICAgICogYGBganNcbiAgICAgICAqICRhbmltYXRlLm9uKCdlbnRlcicsIGNvbnRhaW5lcixcbiAgICAgICAqICAgIGZ1bmN0aW9uIGNhbGxiYWNrKGVsZW1lbnQsIHBoYXNlKSB7XG4gICAgICAgKiAgICAgIC8vIGNvb2wgd2UgZGV0ZWN0ZWQgYW4gZW50ZXIgYW5pbWF0aW9uIHdpdGhpbiB0aGUgY29udGFpbmVyXG4gICAgICAgKiAgICB9XG4gICAgICAgKiApO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IHRoZSBhbmltYXRpb24gZXZlbnQgdGhhdCB3aWxsIGJlIGNhcHR1cmVkIChlLmcuIGVudGVyLCBsZWF2ZSwgbW92ZSwgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzLCBldGMuLi4pXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciB0aGUgY29udGFpbmVyIGVsZW1lbnQgdGhhdCB3aWxsIGNhcHR1cmUgZWFjaCBvZiB0aGUgYW5pbWF0aW9uIGV2ZW50cyB0aGF0IGFyZSBmaXJlZCBvbiBpdHNlbGZcbiAgICAgICAqICAgICBhcyB3ZWxsIGFzIGFtb25nIGl0cyBjaGlsZHJlblxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBmaXJlZCB3aGVuIHRoZSBsaXN0ZW5lciBpcyB0cmlnZ2VyZWRcbiAgICAgICAqXG4gICAgICAgKiBUaGUgYXJndW1lbnRzIHByZXNlbnQgaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGFyZTpcbiAgICAgICAqICogYGVsZW1lbnRgIC0gVGhlIGNhcHR1cmVkIERPTSBlbGVtZW50IHRoYXQgdGhlIGFuaW1hdGlvbiB3YXMgZmlyZWQgb24uXG4gICAgICAgKiAqIGBwaGFzZWAgLSBUaGUgcGhhc2Ugb2YgdGhlIGFuaW1hdGlvbi4gVGhlIHR3byBwb3NzaWJsZSBwaGFzZXMgYXJlICoqc3RhcnQqKiAod2hlbiB0aGUgYW5pbWF0aW9uIHN0YXJ0cykgYW5kICoqY2xvc2UqKiAod2hlbiBpdCBlbmRzKS5cbiAgICAgICAqL1xuICAgICAgb246ICQkYW5pbWF0ZVF1ZXVlLm9uLFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNvZmZcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKiBAZGVzY3JpcHRpb24gRGVyZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgYmFzZWQgb24gdGhlIGV2ZW50IHdoaWNoIGhhcyBiZWVuIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgZWxlbWVudC4gVGhpcyBtZXRob2RcbiAgICAgICAqIGNhbiBiZSB1c2VkIGluIHRocmVlIGRpZmZlcmVudCB3YXlzIGRlcGVuZGluZyBvbiB0aGUgYXJndW1lbnRzOlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAvLyByZW1vdmUgYWxsIHRoZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgYGVudGVyYFxuICAgICAgICogJGFuaW1hdGUub2ZmKCdlbnRlcicpO1xuICAgICAgICpcbiAgICAgICAqIC8vIHJlbW92ZSBsaXN0ZW5lcnMgZm9yIGFsbCBhbmltYXRpb24gZXZlbnRzIGZyb20gdGhlIGNvbnRhaW5lciBlbGVtZW50XG4gICAgICAgKiAkYW5pbWF0ZS5vZmYoY29udGFpbmVyKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyByZW1vdmUgYWxsIHRoZSBhbmltYXRpb24gZXZlbnQgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgYGVudGVyYCBvbiB0aGUgZ2l2ZW4gZWxlbWVudCBhbmQgaXRzIGNoaWxkcmVuXG4gICAgICAgKiAkYW5pbWF0ZS5vZmYoJ2VudGVyJywgY29udGFpbmVyKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIHByb3ZpZGVkIGJ5IGBjYWxsYmFja2AgdGhhdCBpcyBzZXRcbiAgICAgICAqIC8vIHRvIGxpc3RlbiBmb3IgYGVudGVyYCBvbiB0aGUgZ2l2ZW4gYGNvbnRhaW5lcmAgYXMgd2VsbCBhcyBpdHMgY2hpbGRyZW5cbiAgICAgICAqICRhbmltYXRlLm9mZignZW50ZXInLCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfERPTUVsZW1lbnR9IGV2ZW50fGNvbnRhaW5lciB0aGUgYW5pbWF0aW9uIGV2ZW50IChlLmcuIGVudGVyLCBsZWF2ZSwgbW92ZSxcbiAgICAgICAqIGFkZENsYXNzLCByZW1vdmVDbGFzcywgZXRjLi4uKSwgb3IgdGhlIGNvbnRhaW5lciBlbGVtZW50LiBJZiBpdCBpcyB0aGUgZWxlbWVudCwgYWxsIG90aGVyXG4gICAgICAgKiBhcmd1bWVudHMgYXJlIGlnbm9yZWQuXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnQ9fSBjb250YWluZXIgdGhlIGNvbnRhaW5lciBlbGVtZW50IHRoZSBldmVudCBsaXN0ZW5lciB3YXMgcGxhY2VkIG9uXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2FzIHJlZ2lzdGVyZWQgYXMgdGhlIGxpc3RlbmVyXG4gICAgICAgKi9cbiAgICAgIG9mZjogJCRhbmltYXRlUXVldWUub2ZmLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI3BpblxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBBc3NvY2lhdGVzIHRoZSBwcm92aWRlZCBlbGVtZW50IHdpdGggYSBob3N0IHBhcmVudCBlbGVtZW50IHRvIGFsbG93IHRoZSBlbGVtZW50IHRvIGJlIGFuaW1hdGVkIGV2ZW4gaWYgaXQgZXhpc3RzXG4gICAgICAgKiAgICBvdXRzaWRlIG9mIHRoZSBET00gc3RydWN0dXJlIG9mIHRoZSBBbmd1bGFyIGFwcGxpY2F0aW9uLiBCeSBkb2luZyBzbywgYW55IGFuaW1hdGlvbiB0cmlnZ2VyZWQgdmlhIGAkYW5pbWF0ZWAgY2FuIGJlIGlzc3VlZCBvbiB0aGVcbiAgICAgICAqICAgIGVsZW1lbnQgZGVzcGl0ZSBiZWluZyBvdXRzaWRlIHRoZSByZWFsbSBvZiB0aGUgYXBwbGljYXRpb24gb3Igd2l0aGluIGFub3RoZXIgYXBwbGljYXRpb24uIFNheSBmb3IgZXhhbXBsZSBpZiB0aGUgYXBwbGljYXRpb25cbiAgICAgICAqICAgIHdhcyBib290c3RyYXBwZWQgb24gYW4gZWxlbWVudCB0aGF0IGlzIHNvbWV3aGVyZSBpbnNpZGUgb2YgdGhlIGA8Ym9keT5gIHRhZywgYnV0IHdlIHdhbnRlZCB0byBhbGxvdyBmb3IgYW4gZWxlbWVudCB0byBiZSBzaXR1YXRlZFxuICAgICAgICogICAgYXMgYSBkaXJlY3QgY2hpbGQgb2YgYGRvY3VtZW50LmJvZHlgLCB0aGVuIHRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHBpbm5pbmcgdGhlIGVsZW1lbnQgdmlhIGAkYW5pbWF0ZS5waW4oZWxlbWVudClgLiBLZWVwIGluIG1pbmRcbiAgICAgICAqICAgIHRoYXQgY2FsbGluZyBgJGFuaW1hdGUucGluKGVsZW1lbnQsIHBhcmVudEVsZW1lbnQpYCB3aWxsIG5vdCBhY3R1YWxseSBpbnNlcnQgaW50byB0aGUgRE9NIGFueXdoZXJlOyBpdCB3aWxsIGp1c3QgY3JlYXRlIHRoZSBhc3NvY2lhdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiAgICBOb3RlIHRoYXQgdGhpcyBmZWF0dXJlIGlzIG9ubHkgYWN0aXZlIHdoZW4gdGhlIGBuZ0FuaW1hdGVgIG1vZHVsZSBpcyB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZXh0ZXJuYWwgZWxlbWVudCB0aGF0IHdpbGwgYmUgcGlubmVkXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudEVsZW1lbnQgdGhlIGhvc3QgcGFyZW50IGVsZW1lbnQgdGhhdCB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXh0ZXJuYWwgZWxlbWVudFxuICAgICAgICovXG4gICAgICBwaW46ICQkYW5pbWF0ZVF1ZXVlLnBpbixcblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjZW5hYmxlZFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBVc2VkIHRvIGdldCBhbmQgc2V0IHdoZXRoZXIgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZCBvciBub3Qgb24gdGhlIGVudGlyZSBhcHBsaWNhdGlvbiBvciBvbiBhbiBlbGVtZW50IGFuZCBpdHMgY2hpbGRyZW4uIFRoaXNcbiAgICAgICAqIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgaW4gZm91ciB3YXlzOlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAvLyByZXR1cm5zIHRydWUgb3IgZmFsc2VcbiAgICAgICAqICRhbmltYXRlLmVuYWJsZWQoKTtcbiAgICAgICAqXG4gICAgICAgKiAvLyBjaGFuZ2VzIHRoZSBlbmFibGVkIHN0YXRlIGZvciBhbGwgYW5pbWF0aW9uc1xuICAgICAgICogJGFuaW1hdGUuZW5hYmxlZChmYWxzZSk7XG4gICAgICAgKiAkYW5pbWF0ZS5lbmFibGVkKHRydWUpO1xuICAgICAgICpcbiAgICAgICAqIC8vIHJldHVybnMgdHJ1ZSBvciBmYWxzZSBpZiBhbmltYXRpb25zIGFyZSBlbmFibGVkIGZvciBhbiBlbGVtZW50XG4gICAgICAgKiAkYW5pbWF0ZS5lbmFibGVkKGVsZW1lbnQpO1xuICAgICAgICpcbiAgICAgICAqIC8vIGNoYW5nZXMgdGhlIGVuYWJsZWQgc3RhdGUgZm9yIGFuIGVsZW1lbnQgYW5kIGl0cyBjaGlsZHJlblxuICAgICAgICogJGFuaW1hdGUuZW5hYmxlZChlbGVtZW50LCB0cnVlKTtcbiAgICAgICAqICRhbmltYXRlLmVuYWJsZWQoZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gZWxlbWVudCB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgY29uc2lkZXJlZCBmb3IgY2hlY2tpbmcvc2V0dGluZyB0aGUgZW5hYmxlZCBzdGF0ZVxuICAgICAgICogQHBhcmFtIHtib29sZWFuPX0gZW5hYmxlZCB3aGV0aGVyIG9yIG5vdCB0aGUgYW5pbWF0aW9ucyB3aWxsIGJlIGVuYWJsZWQgZm9yIHRoZSBlbGVtZW50XG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gd2hldGhlciBvciBub3QgYW5pbWF0aW9ucyBhcmUgZW5hYmxlZFxuICAgICAgICovXG4gICAgICBlbmFibGVkOiAkJGFuaW1hdGVRdWV1ZS5lbmFibGVkLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRhbmltYXRlI2NhbmNlbFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBDYW5jZWxzIHRoZSBwcm92aWRlZCBhbmltYXRpb24uXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtQcm9taXNlfSBhbmltYXRpb25Qcm9taXNlIFRoZSBhbmltYXRpb24gcHJvbWlzZSB0aGF0IGlzIHJldHVybmVkIHdoZW4gYW4gYW5pbWF0aW9uIGlzIHN0YXJ0ZWQuXG4gICAgICAgKi9cbiAgICAgIGNhbmNlbDogZnVuY3Rpb24ocnVubmVyKSB7XG4gICAgICAgIGlmIChydW5uZXIuZW5kKSB7XG4gICAgICAgICAgcnVubmVyLmVuZCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNlbnRlclxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBJbnNlcnRzIHRoZSBlbGVtZW50IGludG8gdGhlIERPTSBlaXRoZXIgYWZ0ZXIgdGhlIGBhZnRlcmAgZWxlbWVudCAoaWYgcHJvdmlkZWQpIG9yXG4gICAgICAgKiAgIGFzIHRoZSBmaXJzdCBjaGlsZCB3aXRoaW4gdGhlIGBwYXJlbnRgIGVsZW1lbnQgYW5kIHRoZW4gdHJpZ2dlcnMgYW4gYW5pbWF0aW9uLlxuICAgICAgICogICBBIHByb21pc2UgaXMgcmV0dXJuZWQgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGR1cmluZyB0aGUgbmV4dCBkaWdlc3Qgb25jZSB0aGUgYW5pbWF0aW9uXG4gICAgICAgKiAgIGhhcyBjb21wbGV0ZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHBhcmVudCB0aGUgcGFyZW50IGVsZW1lbnQgd2hpY2ggd2lsbCBhcHBlbmQgdGhlIGVsZW1lbnQgYXNcbiAgICAgICAqICAgYSBjaGlsZCAoc28gbG9uZyBhcyB0aGUgYWZ0ZXIgZWxlbWVudCBpcyBub3QgcHJlc2VudClcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudD19IGFmdGVyIHRoZSBzaWJsaW5nIGVsZW1lbnQgYWZ0ZXIgd2hpY2ggdGhlIGVsZW1lbnQgd2lsbCBiZSBhcHBlbmRlZFxuICAgICAgICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIGFuIG9wdGlvbmFsIGNvbGxlY3Rpb24gb2Ygb3B0aW9ucy9zdHlsZXMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiAgIFRoZSBvYmplY3QgY2FuIGhhdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAgICpcbiAgICAgICAqICAgLSAqKmFkZENsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIGFkZCB0byBlbGVtZW50XG4gICAgICAgKiAgIC0gKipmcm9tKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgdGhlIGJlZ2lubmluZyBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgdG9gXG4gICAgICAgKiAgIC0gKipyZW1vdmVDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byByZW1vdmUgZnJvbSBlbGVtZW50XG4gICAgICAgKiAgIC0gKip0byoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IGVuZCBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgZnJvbWBcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgZW50ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50ICYmIGpxTGl0ZShwYXJlbnQpO1xuICAgICAgICBhZnRlciA9IGFmdGVyICYmIGpxTGl0ZShhZnRlcik7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudCB8fCBhZnRlci5wYXJlbnQoKTtcbiAgICAgICAgZG9tSW5zZXJ0KGVsZW1lbnQsIHBhcmVudCwgYWZ0ZXIpO1xuICAgICAgICByZXR1cm4gJCRhbmltYXRlUXVldWUucHVzaChlbGVtZW50LCAnZW50ZXInLCBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjbW92ZVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBJbnNlcnRzIChtb3ZlcykgdGhlIGVsZW1lbnQgaW50byBpdHMgbmV3IHBvc2l0aW9uIGluIHRoZSBET00gZWl0aGVyIGFmdGVyXG4gICAgICAgKiAgIHRoZSBgYWZ0ZXJgIGVsZW1lbnQgKGlmIHByb3ZpZGVkKSBvciBhcyB0aGUgZmlyc3QgY2hpbGQgd2l0aGluIHRoZSBgcGFyZW50YCBlbGVtZW50XG4gICAgICAgKiAgIGFuZCB0aGVuIHRyaWdnZXJzIGFuIGFuaW1hdGlvbi4gQSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZFxuICAgICAgICogICBkdXJpbmcgdGhlIG5leHQgZGlnZXN0IG9uY2UgdGhlIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCB0aGUgZWxlbWVudCB3aGljaCB3aWxsIGJlIG1vdmVkIGludG8gdGhlIG5ldyBET00gcG9zaXRpb25cbiAgICAgICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50IHRoZSBwYXJlbnQgZWxlbWVudCB3aGljaCB3aWxsIGFwcGVuZCB0aGUgZWxlbWVudCBhc1xuICAgICAgICogICBhIGNoaWxkIChzbyBsb25nIGFzIHRoZSBhZnRlciBlbGVtZW50IGlzIG5vdCBwcmVzZW50KVxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gYWZ0ZXIgdGhlIHNpYmxpbmcgZWxlbWVudCBhZnRlciB3aGljaCB0aGUgZWxlbWVudCB3aWxsIGJlIGFwcGVuZGVkXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxuICAgICAgICovXG4gICAgICBtb3ZlOiBmdW5jdGlvbihlbGVtZW50LCBwYXJlbnQsIGFmdGVyLCBvcHRpb25zKSB7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudCAmJiBqcUxpdGUocGFyZW50KTtcbiAgICAgICAgYWZ0ZXIgPSBhZnRlciAmJiBqcUxpdGUoYWZ0ZXIpO1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQgfHwgYWZ0ZXIucGFyZW50KCk7XG4gICAgICAgIGRvbUluc2VydChlbGVtZW50LCBwYXJlbnQsIGFmdGVyKTtcbiAgICAgICAgcmV0dXJuICQkYW5pbWF0ZVF1ZXVlLnB1c2goZWxlbWVudCwgJ21vdmUnLCBwcmVwYXJlQW5pbWF0ZU9wdGlvbnMob3B0aW9ucykpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNsZWF2ZVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqIEBkZXNjcmlwdGlvbiBUcmlnZ2VycyBhbiBhbmltYXRpb24gYW5kIHRoZW4gcmVtb3ZlcyB0aGUgZWxlbWVudCBmcm9tIHRoZSBET00uXG4gICAgICAgKiBXaGVuIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgYSBwcm9taXNlIGlzIHJldHVybmVkIHRoYXQgd2lsbCBiZSByZXNvbHZlZCBkdXJpbmcgdGhlIG5leHRcbiAgICAgICAqIGRpZ2VzdCBvbmNlIHRoZSBhbmltYXRpb24gaGFzIGNvbXBsZXRlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIERPTVxuICAgICAgICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIGFuIG9wdGlvbmFsIGNvbGxlY3Rpb24gb2Ygb3B0aW9ucy9zdHlsZXMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiAgIFRoZSBvYmplY3QgY2FuIGhhdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAgICpcbiAgICAgICAqICAgLSAqKmFkZENsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIGFkZCB0byBlbGVtZW50XG4gICAgICAgKiAgIC0gKipmcm9tKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgdGhlIGJlZ2lubmluZyBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgdG9gXG4gICAgICAgKiAgIC0gKipyZW1vdmVDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byByZW1vdmUgZnJvbSBlbGVtZW50XG4gICAgICAgKiAgIC0gKip0byoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IGVuZCBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgZnJvbWBcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgbGVhdmU6IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICQkYW5pbWF0ZVF1ZXVlLnB1c2goZWxlbWVudCwgJ2xlYXZlJywgcHJlcGFyZUFuaW1hdGVPcHRpb25zKG9wdGlvbnMpLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGFuaW1hdGUjYWRkQ2xhc3NcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uIFRyaWdnZXJzIGFuIGFkZENsYXNzIGFuaW1hdGlvbiBzdXJyb3VuZGluZyB0aGUgYWRkaXRpb24gb2YgdGhlIHByb3ZpZGVkIENTUyBjbGFzcyhlcykuIFVwb25cbiAgICAgICAqICAgZXhlY3V0aW9uLCB0aGUgYWRkQ2xhc3Mgb3BlcmF0aW9uIHdpbGwgb25seSBiZSBoYW5kbGVkIGFmdGVyIHRoZSBuZXh0IGRpZ2VzdCBhbmQgaXQgd2lsbCBub3QgdHJpZ2dlciBhblxuICAgICAgICogICBhbmltYXRpb24gaWYgZWxlbWVudCBhbHJlYWR5IGNvbnRhaW5zIHRoZSBDU1MgY2xhc3Mgb3IgaWYgdGhlIGNsYXNzIGlzIHJlbW92ZWQgYXQgYSBsYXRlciBzdGVwLlxuICAgICAgICogICBOb3RlIHRoYXQgY2xhc3MtYmFzZWQgYW5pbWF0aW9ucyBhcmUgdHJlYXRlZCBkaWZmZXJlbnRseSBjb21wYXJlZCB0byBzdHJ1Y3R1cmFsIGFuaW1hdGlvbnNcbiAgICAgICAqICAgKGxpa2UgZW50ZXIsIG1vdmUgYW5kIGxlYXZlKSBzaW5jZSB0aGUgQ1NTIGNsYXNzZXMgbWF5IGJlIGFkZGVkL3JlbW92ZWQgYXQgZGlmZmVyZW50IHBvaW50c1xuICAgICAgICogICBkZXBlbmRpbmcgaWYgQ1NTIG9yIEphdmFTY3JpcHQgYW5pbWF0aW9ucyBhcmUgdXNlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggdGhlIENTUyBjbGFzc2VzIHdpbGwgYmUgYXBwbGllZCB0b1xuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSB0aGUgQ1NTIGNsYXNzKGVzKSB0aGF0IHdpbGwgYmUgYWRkZWQgKG11bHRpcGxlIGNsYXNzZXMgYXJlIHNlcGFyYXRlZCB2aWEgc3BhY2VzKVxuICAgICAgICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIGFuIG9wdGlvbmFsIGNvbGxlY3Rpb24gb2Ygb3B0aW9ucy9zdHlsZXMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiAgIFRoZSBvYmplY3QgY2FuIGhhdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAgICpcbiAgICAgICAqICAgLSAqKmFkZENsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIGFkZCB0byBlbGVtZW50XG4gICAgICAgKiAgIC0gKipmcm9tKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgdGhlIGJlZ2lubmluZyBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgdG9gXG4gICAgICAgKiAgIC0gKipyZW1vdmVDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byByZW1vdmUgZnJvbSBlbGVtZW50XG4gICAgICAgKiAgIC0gKip0byoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IGVuZCBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgZnJvbWBcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gcHJlcGFyZUFuaW1hdGVPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBvcHRpb25zLmFkZENsYXNzID0gbWVyZ2VDbGFzc2VzKG9wdGlvbnMuYWRkY2xhc3MsIGNsYXNzTmFtZSk7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdhZGRDbGFzcycsIG9wdGlvbnMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNyZW1vdmVDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gVHJpZ2dlcnMgYSByZW1vdmVDbGFzcyBhbmltYXRpb24gc3Vycm91bmRpbmcgdGhlIHJlbW92YWwgb2YgdGhlIHByb3ZpZGVkIENTUyBjbGFzcyhlcykuIFVwb25cbiAgICAgICAqICAgZXhlY3V0aW9uLCB0aGUgcmVtb3ZlQ2xhc3Mgb3BlcmF0aW9uIHdpbGwgb25seSBiZSBoYW5kbGVkIGFmdGVyIHRoZSBuZXh0IGRpZ2VzdCBhbmQgaXQgd2lsbCBub3QgdHJpZ2dlciBhblxuICAgICAgICogICBhbmltYXRpb24gaWYgZWxlbWVudCBkb2VzIG5vdCBjb250YWluIHRoZSBDU1MgY2xhc3Mgb3IgaWYgdGhlIGNsYXNzIGlzIGFkZGVkIGF0IGEgbGF0ZXIgc3RlcC5cbiAgICAgICAqICAgTm90ZSB0aGF0IGNsYXNzLWJhc2VkIGFuaW1hdGlvbnMgYXJlIHRyZWF0ZWQgZGlmZmVyZW50bHkgY29tcGFyZWQgdG8gc3RydWN0dXJhbCBhbmltYXRpb25zXG4gICAgICAgKiAgIChsaWtlIGVudGVyLCBtb3ZlIGFuZCBsZWF2ZSkgc2luY2UgdGhlIENTUyBjbGFzc2VzIG1heSBiZSBhZGRlZC9yZW1vdmVkIGF0IGRpZmZlcmVudCBwb2ludHNcbiAgICAgICAqICAgZGVwZW5kaW5nIGlmIENTUyBvciBKYXZhU2NyaXB0IGFuaW1hdGlvbnMgYXJlIHVzZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHRoZSBDU1MgY2xhc3NlcyB3aWxsIGJlIGFwcGxpZWQgdG9cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgdGhlIENTUyBjbGFzcyhlcykgdGhhdCB3aWxsIGJlIHJlbW92ZWQgKG11bHRpcGxlIGNsYXNzZXMgYXJlIHNlcGFyYXRlZCB2aWEgc3BhY2VzKVxuICAgICAgICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIGFuIG9wdGlvbmFsIGNvbGxlY3Rpb24gb2Ygb3B0aW9ucy9zdHlsZXMgdGhhdCB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiAgIFRoZSBvYmplY3QgY2FuIGhhdmUgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAgICpcbiAgICAgICAqICAgLSAqKmFkZENsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIGFkZCB0byBlbGVtZW50XG4gICAgICAgKiAgIC0gKipmcm9tKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgdGhlIGJlZ2lubmluZyBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgdG9gXG4gICAgICAgKiAgIC0gKipyZW1vdmVDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byByZW1vdmUgZnJvbSBlbGVtZW50XG4gICAgICAgKiAgIC0gKip0byoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IGVuZCBvZiBhbmltYXRpb24uIE11c3QgaGF2ZSBtYXRjaGluZyBgZnJvbWBcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSB0aGUgYW5pbWF0aW9uIGNhbGxiYWNrIHByb21pc2VcbiAgICAgICAqL1xuICAgICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gcHJlcGFyZUFuaW1hdGVPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBvcHRpb25zLnJlbW92ZUNsYXNzID0gbWVyZ2VDbGFzc2VzKG9wdGlvbnMucmVtb3ZlQ2xhc3MsIGNsYXNzTmFtZSk7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdyZW1vdmVDbGFzcycsIG9wdGlvbnMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNzZXRDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb24gUGVyZm9ybXMgYm90aCB0aGUgYWRkaXRpb24gYW5kIHJlbW92YWwgb2YgYSBDU1MgY2xhc3NlcyBvbiBhbiBlbGVtZW50IGFuZCAoZHVyaW5nIHRoZSBwcm9jZXNzKVxuICAgICAgICogICAgdHJpZ2dlcnMgYW4gYW5pbWF0aW9uIHN1cnJvdW5kaW5nIHRoZSBjbGFzcyBhZGRpdGlvbi9yZW1vdmFsLiBNdWNoIGxpa2UgYCRhbmltYXRlLmFkZENsYXNzYCBhbmRcbiAgICAgICAqICAgIGAkYW5pbWF0ZS5yZW1vdmVDbGFzc2AsIGBzZXRDbGFzc2Agd2lsbCBvbmx5IGV2YWx1YXRlIHRoZSBjbGFzc2VzIGJlaW5nIGFkZGVkL3JlbW92ZWQgb25jZSBhIGRpZ2VzdCBoYXNcbiAgICAgICAqICAgIHBhc3NlZC4gTm90ZSB0aGF0IGNsYXNzLWJhc2VkIGFuaW1hdGlvbnMgYXJlIHRyZWF0ZWQgZGlmZmVyZW50bHkgY29tcGFyZWQgdG8gc3RydWN0dXJhbCBhbmltYXRpb25zXG4gICAgICAgKiAgICAobGlrZSBlbnRlciwgbW92ZSBhbmQgbGVhdmUpIHNpbmNlIHRoZSBDU1MgY2xhc3NlcyBtYXkgYmUgYWRkZWQvcmVtb3ZlZCBhdCBkaWZmZXJlbnQgcG9pbnRzXG4gICAgICAgKiAgICBkZXBlbmRpbmcgaWYgQ1NTIG9yIEphdmFTY3JpcHQgYW5pbWF0aW9ucyBhcmUgdXNlZC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGVsZW1lbnQgdGhlIGVsZW1lbnQgd2hpY2ggdGhlIENTUyBjbGFzc2VzIHdpbGwgYmUgYXBwbGllZCB0b1xuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGFkZCB0aGUgQ1NTIGNsYXNzKGVzKSB0aGF0IHdpbGwgYmUgYWRkZWQgKG11bHRpcGxlIGNsYXNzZXMgYXJlIHNlcGFyYXRlZCB2aWEgc3BhY2VzKVxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHJlbW92ZSB0aGUgQ1NTIGNsYXNzKGVzKSB0aGF0IHdpbGwgYmUgcmVtb3ZlZCAobXVsdGlwbGUgY2xhc3NlcyBhcmUgc2VwYXJhdGVkIHZpYSBzcGFjZXMpXG4gICAgICAgKiBAcGFyYW0ge29iamVjdD19IG9wdGlvbnMgYW4gb3B0aW9uYWwgY29sbGVjdGlvbiBvZiBvcHRpb25zL3N0eWxlcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgVGhlIG9iamVjdCBjYW4gaGF2ZSB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gICAgICAgKlxuICAgICAgICogICAtICoqYWRkQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gYWRkIHRvIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKmZyb20qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGB0b2BcbiAgICAgICAqICAgLSAqKnJlbW92ZUNsYXNzKiogLSBge3N0cmluZ31gIC0gc3BhY2Utc2VwYXJhdGVkIENTUyBjbGFzc2VzIHRvIHJlbW92ZSBmcm9tIGVsZW1lbnRcbiAgICAgICAqICAgLSAqKnRvKiogLSBge09iamVjdH1gIC0gQ1NTIHByb3BlcnRpZXMgJiB2YWx1ZXMgYXQgZW5kIG9mIGFuaW1hdGlvbi4gTXVzdCBoYXZlIG1hdGNoaW5nIGBmcm9tYFxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm4ge1Byb21pc2V9IHRoZSBhbmltYXRpb24gY2FsbGJhY2sgcHJvbWlzZVxuICAgICAgICovXG4gICAgICBzZXRDbGFzczogZnVuY3Rpb24oZWxlbWVudCwgYWRkLCByZW1vdmUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IHByZXBhcmVBbmltYXRlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgb3B0aW9ucy5hZGRDbGFzcyA9IG1lcmdlQ2xhc3NlcyhvcHRpb25zLmFkZENsYXNzLCBhZGQpO1xuICAgICAgICBvcHRpb25zLnJlbW92ZUNsYXNzID0gbWVyZ2VDbGFzc2VzKG9wdGlvbnMucmVtb3ZlQ2xhc3MsIHJlbW92ZSk7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdzZXRDbGFzcycsIG9wdGlvbnMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkYW5pbWF0ZSNhbmltYXRlXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvbiBQZXJmb3JtcyBhbiBpbmxpbmUgYW5pbWF0aW9uIG9uIHRoZSBlbGVtZW50IHdoaWNoIGFwcGxpZXMgdGhlIHByb3ZpZGVkIHRvIGFuZCBmcm9tIENTUyBzdHlsZXMgdG8gdGhlIGVsZW1lbnQuXG4gICAgICAgKiBJZiBhbnkgZGV0ZWN0ZWQgQ1NTIHRyYW5zaXRpb24sIGtleWZyYW1lIG9yIEphdmFTY3JpcHQgbWF0Y2hlcyB0aGUgcHJvdmlkZWQgY2xhc3NOYW1lIHZhbHVlLCB0aGVuIHRoZSBhbmltYXRpb24gd2lsbCB0YWtlXG4gICAgICAgKiBvbiB0aGUgcHJvdmlkZWQgc3R5bGVzLiBGb3IgZXhhbXBsZSwgaWYgYSB0cmFuc2l0aW9uIGFuaW1hdGlvbiBpcyBzZXQgZm9yIHRoZSBnaXZlbiBjbGFzc05hbWUsIHRoZW4gdGhlIHByb3ZpZGVkIGBmcm9tYCBhbmRcbiAgICAgICAqIGB0b2Agc3R5bGVzIHdpbGwgYmUgYXBwbGllZCBhbG9uZ3NpZGUgdGhlIGdpdmVuIHRyYW5zaXRpb24uIElmIHRoZSBDU1Mgc3R5bGUgcHJvdmlkZWQgaW4gYGZyb21gIGRvZXMgbm90IGhhdmUgYSBjb3JyZXNwb25kaW5nXG4gICAgICAgKiBzdHlsZSBpbiBgdG9gLCB0aGUgc3R5bGUgaW4gYGZyb21gIGlzIGFwcGxpZWQgaW1tZWRpYXRlbHksIGFuZCBubyBhbmltYXRpb24gaXMgcnVuLlxuICAgICAgICogSWYgYSBKYXZhU2NyaXB0IGFuaW1hdGlvbiBpcyBkZXRlY3RlZCB0aGVuIHRoZSBwcm92aWRlZCBzdHlsZXMgd2lsbCBiZSBnaXZlbiBpbiBhcyBmdW5jdGlvbiBwYXJhbWV0ZXJzIGludG8gdGhlIGBhbmltYXRlYFxuICAgICAgICogbWV0aG9kIChvciBhcyBwYXJ0IG9mIHRoZSBgb3B0aW9uc2AgcGFyYW1ldGVyKTpcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICogbmdNb2R1bGUuYW5pbWF0aW9uKCcubXktaW5saW5lLWFuaW1hdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICogICByZXR1cm4ge1xuICAgICAgICogICAgIGFuaW1hdGUgOiBmdW5jdGlvbihlbGVtZW50LCBmcm9tLCB0bywgZG9uZSwgb3B0aW9ucykge1xuICAgICAgICogICAgICAgLy9hbmltYXRpb25cbiAgICAgICAqICAgICAgIGRvbmUoKTtcbiAgICAgICAqICAgICB9XG4gICAgICAgKiAgIH1cbiAgICAgICAqIH0pO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtET01FbGVtZW50fSBlbGVtZW50IHRoZSBlbGVtZW50IHdoaWNoIHRoZSBDU1Mgc3R5bGVzIHdpbGwgYmUgYXBwbGllZCB0b1xuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGZyb20gdGhlIGZyb20gKHN0YXJ0aW5nKSBDU1Mgc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IGFuZCBhY3Jvc3MgdGhlIGFuaW1hdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0byB0aGUgdG8gKGRlc3RpbmF0aW9uKSBDU1Mgc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IGFuZCBhY3Jvc3MgdGhlIGFuaW1hdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gY2xhc3NOYW1lIGFuIG9wdGlvbmFsIENTUyBjbGFzcyB0aGF0IHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudCBmb3IgdGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24uIElmXG4gICAgICAgKiAgICB0aGlzIHZhbHVlIGlzIGxlZnQgYXMgZW1wdHkgdGhlbiBhIENTUyBjbGFzcyBvZiBgbmctaW5saW5lLWFuaW1hdGVgIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAqICAgIChOb3RlIHRoYXQgaWYgbm8gYW5pbWF0aW9uIGlzIGRldGVjdGVkIHRoZW4gdGhpcyB2YWx1ZSB3aWxsIG5vdCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LilcbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0PX0gb3B0aW9ucyBhbiBvcHRpb25hbCBjb2xsZWN0aW9uIG9mIG9wdGlvbnMvc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICogICBUaGUgb2JqZWN0IGNhbiBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgICAqXG4gICAgICAgKiAgIC0gKiphZGRDbGFzcyoqIC0gYHtzdHJpbmd9YCAtIHNwYWNlLXNlcGFyYXRlZCBDU1MgY2xhc3NlcyB0byBhZGQgdG8gZWxlbWVudFxuICAgICAgICogICAtICoqZnJvbSoqIC0gYHtPYmplY3R9YCAtIENTUyBwcm9wZXJ0aWVzICYgdmFsdWVzIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYHRvYFxuICAgICAgICogICAtICoqcmVtb3ZlQ2xhc3MqKiAtIGB7c3RyaW5nfWAgLSBzcGFjZS1zZXBhcmF0ZWQgQ1NTIGNsYXNzZXMgdG8gcmVtb3ZlIGZyb20gZWxlbWVudFxuICAgICAgICogICAtICoqdG8qKiAtIGB7T2JqZWN0fWAgLSBDU1MgcHJvcGVydGllcyAmIHZhbHVlcyBhdCBlbmQgb2YgYW5pbWF0aW9uLiBNdXN0IGhhdmUgbWF0Y2hpbmcgYGZyb21gXG4gICAgICAgKlxuICAgICAgICogQHJldHVybiB7UHJvbWlzZX0gdGhlIGFuaW1hdGlvbiBjYWxsYmFjayBwcm9taXNlXG4gICAgICAgKi9cbiAgICAgIGFuaW1hdGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGZyb20sIHRvLCBjbGFzc05hbWUsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IHByZXBhcmVBbmltYXRlT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgb3B0aW9ucy5mcm9tID0gb3B0aW9ucy5mcm9tID8gZXh0ZW5kKG9wdGlvbnMuZnJvbSwgZnJvbSkgOiBmcm9tO1xuICAgICAgICBvcHRpb25zLnRvICAgPSBvcHRpb25zLnRvICAgPyBleHRlbmQob3B0aW9ucy50bywgdG8pICAgICA6IHRvO1xuXG4gICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCAnbmctaW5saW5lLWFuaW1hdGUnO1xuICAgICAgICBvcHRpb25zLnRlbXBDbGFzc2VzID0gbWVyZ2VDbGFzc2VzKG9wdGlvbnMudGVtcENsYXNzZXMsIGNsYXNzTmFtZSk7XG4gICAgICAgIHJldHVybiAkJGFuaW1hdGVRdWV1ZS5wdXNoKGVsZW1lbnQsICdhbmltYXRlJywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfTtcbiAgfV07XG59XTtcblxudmFyICQkQW5pbWF0ZUFzeW5jUnVuRmFjdG9yeVByb3ZpZGVyID0gLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBbJyQkckFGJywgZnVuY3Rpb24oJCRyQUYpIHtcbiAgICB2YXIgd2FpdFF1ZXVlID0gW107XG5cbiAgICBmdW5jdGlvbiB3YWl0Rm9yVGljayhmbikge1xuICAgICAgd2FpdFF1ZXVlLnB1c2goZm4pO1xuICAgICAgaWYgKHdhaXRRdWV1ZS5sZW5ndGggPiAxKSByZXR1cm47XG4gICAgICAkJHJBRihmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3YWl0UXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB3YWl0UXVldWVbaV0oKTtcbiAgICAgICAgfVxuICAgICAgICB3YWl0UXVldWUgPSBbXTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXNzZWQgPSBmYWxzZTtcbiAgICAgIHdhaXRGb3JUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBwYXNzZWQgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHBhc3NlZCkge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2FpdEZvclRpY2soY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gIH1dO1xufTtcblxudmFyICQkQW5pbWF0ZVJ1bm5lckZhY3RvcnlQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcScsICckc25pZmZlcicsICckJGFuaW1hdGVBc3luY1J1bicsICckJGlzRG9jdW1lbnRIaWRkZW4nLCAnJHRpbWVvdXQnLFxuICAgICAgIGZ1bmN0aW9uKCRxLCAgICRzbmlmZmVyLCAgICQkYW5pbWF0ZUFzeW5jUnVuLCAgICQkaXNEb2N1bWVudEhpZGRlbiwgICAkdGltZW91dCkge1xuXG4gICAgdmFyIElOSVRJQUxfU1RBVEUgPSAwO1xuICAgIHZhciBET05FX1BFTkRJTkdfU1RBVEUgPSAxO1xuICAgIHZhciBET05FX0NPTVBMRVRFX1NUQVRFID0gMjtcblxuICAgIEFuaW1hdGVSdW5uZXIuY2hhaW4gPSBmdW5jdGlvbihjaGFpbiwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBpbmRleCA9IDA7XG5cbiAgICAgIG5leHQoKTtcbiAgICAgIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gY2hhaW4ubGVuZ3RoKSB7XG4gICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hhaW5baW5kZXhdKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEFuaW1hdGVSdW5uZXIuYWxsID0gZnVuY3Rpb24ocnVubmVycywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICB2YXIgc3RhdHVzID0gdHJ1ZTtcbiAgICAgIGZvckVhY2gocnVubmVycywgZnVuY3Rpb24ocnVubmVyKSB7XG4gICAgICAgIHJ1bm5lci5kb25lKG9uUHJvZ3Jlc3MpO1xuICAgICAgfSk7XG5cbiAgICAgIGZ1bmN0aW9uIG9uUHJvZ3Jlc3MocmVzcG9uc2UpIHtcbiAgICAgICAgc3RhdHVzID0gc3RhdHVzICYmIHJlc3BvbnNlO1xuICAgICAgICBpZiAoKytjb3VudCA9PT0gcnVubmVycy5sZW5ndGgpIHtcbiAgICAgICAgICBjYWxsYmFjayhzdGF0dXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEFuaW1hdGVSdW5uZXIoaG9zdCkge1xuICAgICAgdGhpcy5zZXRIb3N0KGhvc3QpO1xuXG4gICAgICB2YXIgcmFmVGljayA9ICQkYW5pbWF0ZUFzeW5jUnVuKCk7XG4gICAgICB2YXIgdGltZW91dFRpY2sgPSBmdW5jdGlvbihmbikge1xuICAgICAgICAkdGltZW91dChmbiwgMCwgZmFsc2UpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5fZG9uZUNhbGxiYWNrcyA9IFtdO1xuICAgICAgdGhpcy5fdGljayA9IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIGlmICgkJGlzRG9jdW1lbnRIaWRkZW4oKSkge1xuICAgICAgICAgIHRpbWVvdXRUaWNrKGZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYWZUaWNrKGZuKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHRoaXMuX3N0YXRlID0gMDtcbiAgICB9XG5cbiAgICBBbmltYXRlUnVubmVyLnByb3RvdHlwZSA9IHtcbiAgICAgIHNldEhvc3Q6IGZ1bmN0aW9uKGhvc3QpIHtcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdCB8fCB7fTtcbiAgICAgIH0sXG5cbiAgICAgIGRvbmU6IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gRE9ORV9DT01QTEVURV9TVEFURSkge1xuICAgICAgICAgIGZuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fZG9uZUNhbGxiYWNrcy5wdXNoKGZuKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgcHJvZ3Jlc3M6IG5vb3AsXG5cbiAgICAgIGdldFByb21pc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXRoaXMucHJvbWlzZSkge1xuICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICB0aGlzLnByb21pc2UgPSAkcShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHNlbGYuZG9uZShmdW5jdGlvbihzdGF0dXMpIHtcbiAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb21pc2U7XG4gICAgICB9LFxuXG4gICAgICB0aGVuOiBmdW5jdGlvbihyZXNvbHZlSGFuZGxlciwgcmVqZWN0SGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9taXNlKCkudGhlbihyZXNvbHZlSGFuZGxlciwgcmVqZWN0SGFuZGxlcik7XG4gICAgICB9LFxuXG4gICAgICAnY2F0Y2gnOiBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFByb21pc2UoKVsnY2F0Y2gnXShoYW5kbGVyKTtcbiAgICAgIH0sXG5cbiAgICAgICdmaW5hbGx5JzogZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm9taXNlKClbJ2ZpbmFsbHknXShoYW5kbGVyKTtcbiAgICAgIH0sXG5cbiAgICAgIHBhdXNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9zdC5wYXVzZSkge1xuICAgICAgICAgIHRoaXMuaG9zdC5wYXVzZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICByZXN1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5ob3N0LnJlc3VtZSkge1xuICAgICAgICAgIHRoaXMuaG9zdC5yZXN1bWUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9zdC5lbmQpIHtcbiAgICAgICAgICB0aGlzLmhvc3QuZW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh0cnVlKTtcbiAgICAgIH0sXG5cbiAgICAgIGNhbmNlbDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3QuY2FuY2VsKSB7XG4gICAgICAgICAgdGhpcy5ob3N0LmNhbmNlbCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Jlc29sdmUoZmFsc2UpO1xuICAgICAgfSxcblxuICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlID09PSBJTklUSUFMX1NUQVRFKSB7XG4gICAgICAgICAgc2VsZi5fc3RhdGUgPSBET05FX1BFTkRJTkdfU1RBVEU7XG4gICAgICAgICAgc2VsZi5fdGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuX3Jlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBfcmVzb2x2ZTogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSBET05FX0NPTVBMRVRFX1NUQVRFKSB7XG4gICAgICAgICAgZm9yRWFjaCh0aGlzLl9kb25lQ2FsbGJhY2tzLCBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgZm4ocmVzcG9uc2UpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuX2RvbmVDYWxsYmFja3MubGVuZ3RoID0gMDtcbiAgICAgICAgICB0aGlzLl9zdGF0ZSA9IERPTkVfQ09NUExFVEVfU1RBVEU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEFuaW1hdGVSdW5uZXI7XG4gIH1dO1xufTtcblxuLyogZXhwb3J0ZWQgJENvcmVBbmltYXRlQ3NzUHJvdmlkZXIgKi9cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGFuaW1hdGVDc3NcbiAqIEBraW5kIG9iamVjdFxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgaXMgdGhlIGNvcmUgdmVyc2lvbiBvZiBgJGFuaW1hdGVDc3NgLiBCeSBkZWZhdWx0LCBvbmx5IHdoZW4gdGhlIGBuZ0FuaW1hdGVgIGlzIGluY2x1ZGVkLFxuICogdGhlbiB0aGUgYCRhbmltYXRlQ3NzYCBzZXJ2aWNlIHdpbGwgYWN0dWFsbHkgcGVyZm9ybSBhbmltYXRpb25zLlxuICpcbiAqIENsaWNrIGhlcmUge0BsaW5rIG5nQW5pbWF0ZS4kYW5pbWF0ZUNzcyB0byByZWFkIHRoZSBkb2N1bWVudGF0aW9uIGZvciAkYW5pbWF0ZUNzc30uXG4gKi9cbnZhciAkQ29yZUFuaW1hdGVDc3NQcm92aWRlciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBbJyQkckFGJywgJyRxJywgJyQkQW5pbWF0ZVJ1bm5lcicsIGZ1bmN0aW9uKCQkckFGLCAkcSwgJCRBbmltYXRlUnVubmVyKSB7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oZWxlbWVudCwgaW5pdGlhbE9wdGlvbnMpIHtcbiAgICAgIC8vIGFsbCBvZiB0aGUgYW5pbWF0aW9uIGZ1bmN0aW9ucyBzaG91bGQgY3JlYXRlXG4gICAgICAvLyBhIGNvcHkgb2YgdGhlIG9wdGlvbnMgZGF0YSwgaG93ZXZlciwgaWYgYVxuICAgICAgLy8gcGFyZW50IHNlcnZpY2UgaGFzIGFscmVhZHkgY3JlYXRlZCBhIGNvcHkgdGhlblxuICAgICAgLy8gd2Ugc2hvdWxkIHN0aWNrIHRvIHVzaW5nIHRoYXRcbiAgICAgIHZhciBvcHRpb25zID0gaW5pdGlhbE9wdGlvbnMgfHwge307XG4gICAgICBpZiAoIW9wdGlvbnMuJCRwcmVwYXJlZCkge1xuICAgICAgICBvcHRpb25zID0gY29weShvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gdGhlcmUgaXMgbm8gcG9pbnQgaW4gYXBwbHlpbmcgdGhlIHN0eWxlcyBzaW5jZVxuICAgICAgLy8gdGhlcmUgaXMgbm8gYW5pbWF0aW9uIHRoYXQgZ29lcyBvbiBhdCBhbGwgaW5cbiAgICAgIC8vIHRoaXMgdmVyc2lvbiBvZiAkYW5pbWF0ZUNzcy5cbiAgICAgIGlmIChvcHRpb25zLmNsZWFudXBTdHlsZXMpIHtcbiAgICAgICAgb3B0aW9ucy5mcm9tID0gb3B0aW9ucy50byA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmZyb20pIHtcbiAgICAgICAgZWxlbWVudC5jc3Mob3B0aW9ucy5mcm9tKTtcbiAgICAgICAgb3B0aW9ucy5mcm9tID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIGNsb3NlZCwgcnVubmVyID0gbmV3ICQkQW5pbWF0ZVJ1bm5lcigpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6IHJ1bixcbiAgICAgICAgZW5kOiBydW5cbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHJ1bigpIHtcbiAgICAgICAgJCRyQUYoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYXBwbHlBbmltYXRpb25Db250ZW50cygpO1xuICAgICAgICAgIGlmICghY2xvc2VkKSB7XG4gICAgICAgICAgICBydW5uZXIuY29tcGxldGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBydW5uZXI7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGFwcGx5QW5pbWF0aW9uQ29udGVudHMoKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFkZENsYXNzKSB7XG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhvcHRpb25zLmFkZENsYXNzKTtcbiAgICAgICAgICBvcHRpb25zLmFkZENsYXNzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5yZW1vdmVDbGFzcykge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3Mob3B0aW9ucy5yZW1vdmVDbGFzcyk7XG4gICAgICAgICAgb3B0aW9ucy5yZW1vdmVDbGFzcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudG8pIHtcbiAgICAgICAgICBlbGVtZW50LmNzcyhvcHRpb25zLnRvKTtcbiAgICAgICAgICBvcHRpb25zLnRvID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1dO1xufTtcblxuLyogZ2xvYmFsIHN0cmlwSGFzaDogdHJ1ZSAqL1xuXG4vKipcbiAqICEgVGhpcyBpcyBhIHByaXZhdGUgdW5kb2N1bWVudGVkIHNlcnZpY2UgIVxuICpcbiAqIEBuYW1lICRicm93c2VyXG4gKiBAcmVxdWlyZXMgJGxvZ1xuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIG9iamVjdCBoYXMgdHdvIGdvYWxzOlxuICpcbiAqIC0gaGlkZSBhbGwgdGhlIGdsb2JhbCBzdGF0ZSBpbiB0aGUgYnJvd3NlciBjYXVzZWQgYnkgdGhlIHdpbmRvdyBvYmplY3RcbiAqIC0gYWJzdHJhY3QgYXdheSBhbGwgdGhlIGJyb3dzZXIgc3BlY2lmaWMgZmVhdHVyZXMgYW5kIGluY29uc2lzdGVuY2llc1xuICpcbiAqIEZvciB0ZXN0cyB3ZSBwcm92aWRlIHtAbGluayBuZ01vY2suJGJyb3dzZXIgbW9jayBpbXBsZW1lbnRhdGlvbn0gb2YgdGhlIGAkYnJvd3NlcmBcbiAqIHNlcnZpY2UsIHdoaWNoIGNhbiBiZSB1c2VkIGZvciBjb252ZW5pZW50IHRlc3Rpbmcgb2YgdGhlIGFwcGxpY2F0aW9uIHdpdGhvdXQgdGhlIGludGVyYWN0aW9uIHdpdGhcbiAqIHRoZSByZWFsIGJyb3dzZXIgYXBpcy5cbiAqL1xuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gd2luZG93IFRoZSBnbG9iYWwgd2luZG93IG9iamVjdC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBkb2N1bWVudCBqUXVlcnkgd3JhcHBlZCBkb2N1bWVudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSAkbG9nIHdpbmRvdy5jb25zb2xlIG9yIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIGludGVyZmFjZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSAkc25pZmZlciAkc25pZmZlciBzZXJ2aWNlXG4gKi9cbmZ1bmN0aW9uIEJyb3dzZXIod2luZG93LCBkb2N1bWVudCwgJGxvZywgJHNuaWZmZXIpIHtcbiAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24sXG4gICAgICBoaXN0b3J5ID0gd2luZG93Lmhpc3RvcnksXG4gICAgICBzZXRUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQsXG4gICAgICBjbGVhclRpbWVvdXQgPSB3aW5kb3cuY2xlYXJUaW1lb3V0LFxuICAgICAgcGVuZGluZ0RlZmVySWRzID0ge307XG5cbiAgc2VsZi5pc01vY2sgPSBmYWxzZTtcblxuICB2YXIgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPSAwO1xuICB2YXIgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzID0gW107XG5cbiAgLy8gVE9ETyh2b2p0YSk6IHJlbW92ZSB0aGlzIHRlbXBvcmFyeSBhcGlcbiAgc2VsZi4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0ID0gY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q7XG4gIHNlbGYuJCRpbmNPdXRzdGFuZGluZ1JlcXVlc3RDb3VudCA9IGZ1bmN0aW9uKCkgeyBvdXRzdGFuZGluZ1JlcXVlc3RDb3VudCsrOyB9O1xuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyB0aGUgYGZuYCBmdW5jdGlvbihzdXBwb3J0cyBjdXJyeWluZykgYW5kIGRlY3JlbWVudHMgdGhlIGBvdXRzdGFuZGluZ1JlcXVlc3RDYWxsYmFja3NgXG4gICAqIGNvdW50ZXIuIElmIHRoZSBjb3VudGVyIHJlYWNoZXMgMCwgYWxsIHRoZSBgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzYCBhcmUgZXhlY3V0ZWQuXG4gICAqL1xuICBmdW5jdGlvbiBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChmbikge1xuICAgIHRyeSB7XG4gICAgICBmbi5hcHBseShudWxsLCBzbGljZUFyZ3MoYXJndW1lbnRzLCAxKSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENvdW50LS07XG4gICAgICBpZiAob3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPT09IDApIHtcbiAgICAgICAgd2hpbGUgKG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q2FsbGJhY2tzLnBvcCgpKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgJGxvZy5lcnJvcihlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRIYXNoKHVybCkge1xuICAgIHZhciBpbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gICAgcmV0dXJuIGluZGV4ID09PSAtMSA/ICcnIDogdXJsLnN1YnN0cihpbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogVE9ETyh2b2p0YSk6IHByZWZpeCB0aGlzIG1ldGhvZCB3aXRoICQkID9cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFjayBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gbm8gb3V0c3RhbmRpbmcgcmVxdWVzdFxuICAgKi9cbiAgc2VsZi5ub3RpZnlXaGVuTm9PdXRzdGFuZGluZ1JlcXVlc3RzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAob3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQgPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHN0YW5kaW5nUmVxdWVzdENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gVVJMIEFQSVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIHZhciBjYWNoZWRTdGF0ZSwgbGFzdEhpc3RvcnlTdGF0ZSxcbiAgICAgIGxhc3RCcm93c2VyVXJsID0gbG9jYXRpb24uaHJlZixcbiAgICAgIGJhc2VFbGVtZW50ID0gZG9jdW1lbnQuZmluZCgnYmFzZScpLFxuICAgICAgcGVuZGluZ0xvY2F0aW9uID0gbnVsbCxcbiAgICAgIGdldEN1cnJlbnRTdGF0ZSA9ICEkc25pZmZlci5oaXN0b3J5ID8gbm9vcCA6IGZ1bmN0aW9uIGdldEN1cnJlbnRTdGF0ZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gaGlzdG9yeS5zdGF0ZTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIE1TSUUgY2FuIHJlcG9ydGVkbHkgdGhyb3cgd2hlbiB0aGVyZSBpcyBubyBzdGF0ZSAoVU5DT05GSVJNRUQpLlxuICAgICAgICB9XG4gICAgICB9O1xuXG4gIGNhY2hlU3RhdGUoKTtcblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjdXJsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBHRVRURVI6XG4gICAqIFdpdGhvdXQgYW55IGFyZ3VtZW50LCB0aGlzIG1ldGhvZCBqdXN0IHJldHVybnMgY3VycmVudCB2YWx1ZSBvZiBsb2NhdGlvbi5ocmVmLlxuICAgKlxuICAgKiBTRVRURVI6XG4gICAqIFdpdGggYXQgbGVhc3Qgb25lIGFyZ3VtZW50LCB0aGlzIG1ldGhvZCBzZXRzIHVybCB0byBuZXcgdmFsdWUuXG4gICAqIElmIGh0bWw1IGhpc3RvcnkgYXBpIHN1cHBvcnRlZCwgcHVzaFN0YXRlL3JlcGxhY2VTdGF0ZSBpcyB1c2VkLCBvdGhlcndpc2VcbiAgICogbG9jYXRpb24uaHJlZi9sb2NhdGlvbi5yZXBsYWNlIGlzIHVzZWQuXG4gICAqIFJldHVybnMgaXRzIG93biBpbnN0YW5jZSB0byBhbGxvdyBjaGFpbmluZ1xuICAgKlxuICAgKiBOT1RFOiB0aGlzIGFwaSBpcyBpbnRlbmRlZCBmb3IgdXNlIG9ubHkgYnkgdGhlICRsb2NhdGlvbiBzZXJ2aWNlLiBQbGVhc2UgdXNlIHRoZVxuICAgKiB7QGxpbmsgbmcuJGxvY2F0aW9uICRsb2NhdGlvbiBzZXJ2aWNlfSB0byBjaGFuZ2UgdXJsLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIE5ldyB1cmwgKHdoZW4gdXNlZCBhcyBzZXR0ZXIpXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlcGxhY2UgU2hvdWxkIG5ldyB1cmwgcmVwbGFjZSBjdXJyZW50IGhpc3RvcnkgcmVjb3JkP1xuICAgKiBAcGFyYW0ge29iamVjdD19IHN0YXRlIG9iamVjdCB0byB1c2Ugd2l0aCBwdXNoU3RhdGUvcmVwbGFjZVN0YXRlXG4gICAqL1xuICBzZWxmLnVybCA9IGZ1bmN0aW9uKHVybCwgcmVwbGFjZSwgc3RhdGUpIHtcbiAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMgYGhpc3Rvcnkuc3RhdGVgIGlzIGBudWxsYCBieSBkZWZhdWx0OyB0cmVhdGluZyBpdCBzZXBhcmF0ZWx5XG4gICAgLy8gZnJvbSBgdW5kZWZpbmVkYCB3b3VsZCBjYXVzZSBgJGJyb3dzZXIudXJsKCcvZm9vJylgIHRvIGNoYW5nZSBgaGlzdG9yeS5zdGF0ZWBcbiAgICAvLyB0byB1bmRlZmluZWQgdmlhIGBwdXNoU3RhdGVgLiBJbnN0ZWFkLCBsZXQncyBjaGFuZ2UgYHVuZGVmaW5lZGAgdG8gYG51bGxgIGhlcmUuXG4gICAgaWYgKGlzVW5kZWZpbmVkKHN0YXRlKSkge1xuICAgICAgc3RhdGUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIEFuZHJvaWQgQnJvd3NlciBCRkNhY2hlIGNhdXNlcyBsb2NhdGlvbiwgaGlzdG9yeSByZWZlcmVuY2UgdG8gYmVjb21lIHN0YWxlLlxuICAgIGlmIChsb2NhdGlvbiAhPT0gd2luZG93LmxvY2F0aW9uKSBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcbiAgICBpZiAoaGlzdG9yeSAhPT0gd2luZG93Lmhpc3RvcnkpIGhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcblxuICAgIC8vIHNldHRlclxuICAgIGlmICh1cmwpIHtcbiAgICAgIHZhciBzYW1lU3RhdGUgPSBsYXN0SGlzdG9yeVN0YXRlID09PSBzdGF0ZTtcblxuICAgICAgLy8gRG9uJ3QgY2hhbmdlIGFueXRoaW5nIGlmIHByZXZpb3VzIGFuZCBjdXJyZW50IFVSTHMgYW5kIHN0YXRlcyBtYXRjaC4gVGhpcyBhbHNvIHByZXZlbnRzXG4gICAgICAvLyBJRTwxMCBmcm9tIGdldHRpbmcgaW50byByZWRpcmVjdCBsb29wIHdoZW4gaW4gTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmwgbW9kZS5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2NvbW1pdC9mZmIyNzAxXG4gICAgICBpZiAobGFzdEJyb3dzZXJVcmwgPT09IHVybCAmJiAoISRzbmlmZmVyLmhpc3RvcnkgfHwgc2FtZVN0YXRlKSkge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cbiAgICAgIHZhciBzYW1lQmFzZSA9IGxhc3RCcm93c2VyVXJsICYmIHN0cmlwSGFzaChsYXN0QnJvd3NlclVybCkgPT09IHN0cmlwSGFzaCh1cmwpO1xuICAgICAgbGFzdEJyb3dzZXJVcmwgPSB1cmw7XG4gICAgICBsYXN0SGlzdG9yeVN0YXRlID0gc3RhdGU7XG4gICAgICAvLyBEb24ndCB1c2UgaGlzdG9yeSBBUEkgaWYgb25seSB0aGUgaGFzaCBjaGFuZ2VkXG4gICAgICAvLyBkdWUgdG8gYSBidWcgaW4gSUUxMC9JRTExIHdoaWNoIGxlYWRzXG4gICAgICAvLyB0byBub3QgZmlyaW5nIGEgYGhhc2hjaGFuZ2VgIG5vciBgcG9wc3RhdGVgIGV2ZW50XG4gICAgICAvLyBpbiBzb21lIGNhc2VzIChzZWUgIzkxNDMpLlxuICAgICAgaWYgKCRzbmlmZmVyLmhpc3RvcnkgJiYgKCFzYW1lQmFzZSB8fCAhc2FtZVN0YXRlKSkge1xuICAgICAgICBoaXN0b3J5W3JlcGxhY2UgPyAncmVwbGFjZVN0YXRlJyA6ICdwdXNoU3RhdGUnXShzdGF0ZSwgJycsIHVybCk7XG4gICAgICAgIGNhY2hlU3RhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghc2FtZUJhc2UpIHtcbiAgICAgICAgICBwZW5kaW5nTG9jYXRpb24gPSB1cmw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKHVybCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXNhbWVCYXNlKSB7XG4gICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gZ2V0SGFzaCh1cmwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2NhdGlvbi5ocmVmICE9PSB1cmwpIHtcbiAgICAgICAgICBwZW5kaW5nTG9jYXRpb24gPSB1cmw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwZW5kaW5nTG9jYXRpb24pIHtcbiAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gdXJsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgLy8gZ2V0dGVyXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIC0gcGVuZGluZ0xvY2F0aW9uIGlzIG5lZWRlZCBhcyBicm93c2VycyBkb24ndCBhbGxvdyB0byByZWFkIG91dFxuICAgICAgLy8gICB0aGUgbmV3IGxvY2F0aW9uLmhyZWYgaWYgYSByZWxvYWQgaGFwcGVuZWQgb3IgaWYgdGhlcmUgaXMgYSBidWcgbGlrZSBpbiBpT1MgOSAoc2VlXG4gICAgICAvLyAgIGh0dHBzOi8vb3BlbnJhZGFyLmFwcHNwb3QuY29tLzIyMTg2MTA5KS5cbiAgICAgIC8vIC0gdGhlIHJlcGxhY2VtZW50IGlzIGEgd29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDA3MTcyXG4gICAgICByZXR1cm4gcGVuZGluZ0xvY2F0aW9uIHx8IGxvY2F0aW9uLmhyZWYucmVwbGFjZSgvJTI3L2csJ1xcJycpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjc3RhdGVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGEgZ2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gaGlzdG9yeS5zdGF0ZSBvciBudWxsIGlmIGhpc3Rvcnkuc3RhdGUgaXMgdW5kZWZpbmVkLlxuICAgKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBzdGF0ZVxuICAgKi9cbiAgc2VsZi5zdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjYWNoZWRTdGF0ZTtcbiAgfTtcblxuICB2YXIgdXJsQ2hhbmdlTGlzdGVuZXJzID0gW10sXG4gICAgICB1cmxDaGFuZ2VJbml0ID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UoKSB7XG4gICAgcGVuZGluZ0xvY2F0aW9uID0gbnVsbDtcbiAgICBmaXJlU3RhdGVPclVybENoYW5nZSgpO1xuICB9XG5cbiAgLy8gVGhpcyB2YXJpYWJsZSBzaG91bGQgYmUgdXNlZCAqb25seSogaW5zaWRlIHRoZSBjYWNoZVN0YXRlIGZ1bmN0aW9uLlxuICB2YXIgbGFzdENhY2hlZFN0YXRlID0gbnVsbDtcbiAgZnVuY3Rpb24gY2FjaGVTdGF0ZSgpIHtcbiAgICAvLyBUaGlzIHNob3VsZCBiZSB0aGUgb25seSBwbGFjZSBpbiAkYnJvd3NlciB3aGVyZSBgaGlzdG9yeS5zdGF0ZWAgaXMgcmVhZC5cbiAgICBjYWNoZWRTdGF0ZSA9IGdldEN1cnJlbnRTdGF0ZSgpO1xuICAgIGNhY2hlZFN0YXRlID0gaXNVbmRlZmluZWQoY2FjaGVkU3RhdGUpID8gbnVsbCA6IGNhY2hlZFN0YXRlO1xuXG4gICAgLy8gUHJldmVudCBjYWxsYmFja3MgZm8gZmlyZSB0d2ljZSBpZiBib3RoIGhhc2hjaGFuZ2UgJiBwb3BzdGF0ZSB3ZXJlIGZpcmVkLlxuICAgIGlmIChlcXVhbHMoY2FjaGVkU3RhdGUsIGxhc3RDYWNoZWRTdGF0ZSkpIHtcbiAgICAgIGNhY2hlZFN0YXRlID0gbGFzdENhY2hlZFN0YXRlO1xuICAgIH1cblxuICAgIGxhc3RDYWNoZWRTdGF0ZSA9IGNhY2hlZFN0YXRlO1xuICAgIGxhc3RIaXN0b3J5U3RhdGUgPSBjYWNoZWRTdGF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpcmVTdGF0ZU9yVXJsQ2hhbmdlKCkge1xuICAgIHZhciBwcmV2TGFzdEhpc3RvcnlTdGF0ZSA9IGxhc3RIaXN0b3J5U3RhdGU7XG4gICAgY2FjaGVTdGF0ZSgpO1xuXG4gICAgaWYgKGxhc3RCcm93c2VyVXJsID09PSBzZWxmLnVybCgpICYmIHByZXZMYXN0SGlzdG9yeVN0YXRlID09PSBjYWNoZWRTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxhc3RCcm93c2VyVXJsID0gc2VsZi51cmwoKTtcbiAgICBsYXN0SGlzdG9yeVN0YXRlID0gY2FjaGVkU3RhdGU7XG4gICAgZm9yRWFjaCh1cmxDaGFuZ2VMaXN0ZW5lcnMsIGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgICBsaXN0ZW5lcihzZWxmLnVybCgpLCBjYWNoZWRTdGF0ZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQG5hbWUgJGJyb3dzZXIjb25VcmxDaGFuZ2VcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJlZ2lzdGVyIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQsIHdoZW4gdXJsIGNoYW5nZXMuXG4gICAqXG4gICAqIEl0J3Mgb25seSBjYWxsZWQgd2hlbiB0aGUgdXJsIGlzIGNoYW5nZWQgZnJvbSBvdXRzaWRlIG9mIGFuZ3VsYXI6XG4gICAqIC0gdXNlciB0eXBlcyBkaWZmZXJlbnQgdXJsIGludG8gYWRkcmVzcyBiYXJcbiAgICogLSB1c2VyIGNsaWNrcyBvbiBoaXN0b3J5IChmb3J3YXJkL2JhY2spIGJ1dHRvblxuICAgKiAtIHVzZXIgY2xpY2tzIG9uIGEgbGlua1xuICAgKlxuICAgKiBJdCdzIG5vdCBjYWxsZWQgd2hlbiB1cmwgaXMgY2hhbmdlZCBieSAkYnJvd3Nlci51cmwoKSBtZXRob2RcbiAgICpcbiAgICogVGhlIGxpc3RlbmVyIGdldHMgY2FsbGVkIHdpdGggbmV3IHVybCBhcyBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIE5PVEU6IHRoaXMgYXBpIGlzIGludGVuZGVkIGZvciB1c2Ugb25seSBieSB0aGUgJGxvY2F0aW9uIHNlcnZpY2UuIFBsZWFzZSB1c2UgdGhlXG4gICAqIHtAbGluayBuZy4kbG9jYXRpb24gJGxvY2F0aW9uIHNlcnZpY2V9IHRvIG1vbml0b3IgdXJsIGNoYW5nZXMgaW4gYW5ndWxhciBhcHBzLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyl9IGxpc3RlbmVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHVybCBjaGFuZ2VzLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihzdHJpbmcpfSBSZXR1cm5zIHRoZSByZWdpc3RlcmVkIGxpc3RlbmVyIGZuIC0gaGFuZHkgaWYgdGhlIGZuIGlzIGFub255bW91cy5cbiAgICovXG4gIHNlbGYub25VcmxDaGFuZ2UgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIC8vIFRPRE8odm9qdGEpOiByZWZhY3RvciB0byB1c2Ugbm9kZSdzIHN5bnRheCBmb3IgZXZlbnRzXG4gICAgaWYgKCF1cmxDaGFuZ2VJbml0KSB7XG4gICAgICAvLyBXZSBsaXN0ZW4gb24gYm90aCAoaGFzaGNoYW5nZS9wb3BzdGF0ZSkgd2hlbiBhdmFpbGFibGUsIGFzIHNvbWUgYnJvd3NlcnMgZG9uJ3RcbiAgICAgIC8vIGZpcmUgcG9wc3RhdGUgd2hlbiB1c2VyIGNoYW5nZXMgdGhlIGFkZHJlc3MgYmFyIGFuZCBkb24ndCBmaXJlIGhhc2hjaGFuZ2Ugd2hlbiB1cmxcbiAgICAgIC8vIGNoYW5nZWQgYnkgcHVzaC9yZXBsYWNlU3RhdGVcblxuICAgICAgLy8gaHRtbDUgaGlzdG9yeSBhcGkgLSBwb3BzdGF0ZSBldmVudFxuICAgICAgaWYgKCRzbmlmZmVyLmhpc3RvcnkpIGpxTGl0ZSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGNhY2hlU3RhdGVBbmRGaXJlVXJsQ2hhbmdlKTtcbiAgICAgIC8vIGhhc2hjaGFuZ2UgZXZlbnRcbiAgICAgIGpxTGl0ZSh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgY2FjaGVTdGF0ZUFuZEZpcmVVcmxDaGFuZ2UpO1xuXG4gICAgICB1cmxDaGFuZ2VJbml0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB1cmxDaGFuZ2VMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIGNhbGxiYWNrO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBSZW1vdmUgcG9wc3RhdGUgYW5kIGhhc2hjaGFuZ2UgaGFuZGxlciBmcm9tIHdpbmRvdy5cbiAgICpcbiAgICogTk9URTogdGhpcyBhcGkgaXMgaW50ZW5kZWQgZm9yIHVzZSBvbmx5IGJ5ICRyb290U2NvcGUuXG4gICAqL1xuICBzZWxmLiQkYXBwbGljYXRpb25EZXN0cm95ZWQgPSBmdW5jdGlvbigpIHtcbiAgICBqcUxpdGUod2luZG93KS5vZmYoJ2hhc2hjaGFuZ2UgcG9wc3RhdGUnLCBjYWNoZVN0YXRlQW5kRmlyZVVybENoYW5nZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSB1cmwgaGFzIGNoYW5nZWQgb3V0c2lkZSBvZiBBbmd1bGFyLlxuICAgKiBOZWVkcyB0byBiZSBleHBvcnRlZCB0byBiZSBhYmxlIHRvIGNoZWNrIGZvciBjaGFuZ2VzIHRoYXQgaGF2ZSBiZWVuIGRvbmUgaW4gc3luYyxcbiAgICogYXMgaGFzaGNoYW5nZS9wb3BzdGF0ZSBldmVudHMgZmlyZSBpbiBhc3luYy5cbiAgICovXG4gIHNlbGYuJCRjaGVja1VybENoYW5nZSA9IGZpcmVTdGF0ZU9yVXJsQ2hhbmdlO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIE1pc2MgQVBJXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2Jhc2VIcmVmXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXR1cm5zIGN1cnJlbnQgPGJhc2UgaHJlZj5cbiAgICogKGFsd2F5cyByZWxhdGl2ZSAtIHdpdGhvdXQgZG9tYWluKVxuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY3VycmVudCBiYXNlIGhyZWZcbiAgICovXG4gIHNlbGYuYmFzZUhyZWYgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaHJlZiA9IGJhc2VFbGVtZW50LmF0dHIoJ2hyZWYnKTtcbiAgICByZXR1cm4gaHJlZiA/IGhyZWYucmVwbGFjZSgvXihodHRwcz86KT9cXC9cXC9bXi9dKi8sICcnKSA6ICcnO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmFtZSAkYnJvd3NlciNkZWZlclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGZuIEEgZnVuY3Rpb24sIHdobydzIGV4ZWN1dGlvbiBzaG91bGQgYmUgZGVmZXJyZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gW2RlbGF5PTBdIG9mIG1pbGxpc2Vjb25kcyB0byBkZWZlciB0aGUgZnVuY3Rpb24gZXhlY3V0aW9uLlxuICAgKiBAcmV0dXJucyB7Kn0gRGVmZXJJZCB0aGF0IGNhbiBiZSB1c2VkIHRvIGNhbmNlbCB0aGUgdGFzayB2aWEgYCRicm93c2VyLmRlZmVyLmNhbmNlbCgpYC5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEV4ZWN1dGVzIGEgZm4gYXN5bmNocm9ub3VzbHkgdmlhIGBzZXRUaW1lb3V0KGZuLCBkZWxheSlgLlxuICAgKlxuICAgKiBVbmxpa2Ugd2hlbiBjYWxsaW5nIGBzZXRUaW1lb3V0YCBkaXJlY3RseSwgaW4gdGVzdCB0aGlzIGZ1bmN0aW9uIGlzIG1vY2tlZCBhbmQgaW5zdGVhZCBvZiB1c2luZ1xuICAgKiBgc2V0VGltZW91dGAgaW4gdGVzdHMsIHRoZSBmbnMgYXJlIHF1ZXVlZCBpbiBhbiBhcnJheSwgd2hpY2ggY2FuIGJlIHByb2dyYW1tYXRpY2FsbHkgZmx1c2hlZFxuICAgKiB2aWEgYCRicm93c2VyLmRlZmVyLmZsdXNoKClgLlxuICAgKlxuICAgKi9cbiAgc2VsZi5kZWZlciA9IGZ1bmN0aW9uKGZuLCBkZWxheSkge1xuICAgIHZhciB0aW1lb3V0SWQ7XG4gICAgb3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrKztcbiAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgZGVsZXRlIHBlbmRpbmdEZWZlcklkc1t0aW1lb3V0SWRdO1xuICAgICAgY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoZm4pO1xuICAgIH0sIGRlbGF5IHx8IDApO1xuICAgIHBlbmRpbmdEZWZlcklkc1t0aW1lb3V0SWRdID0gdHJ1ZTtcbiAgICByZXR1cm4gdGltZW91dElkO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuYW1lICRicm93c2VyI2RlZmVyLmNhbmNlbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2FuY2VscyBhIGRlZmVycmVkIHRhc2sgaWRlbnRpZmllZCB3aXRoIGBkZWZlcklkYC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkZWZlcklkIFRva2VuIHJldHVybmVkIGJ5IHRoZSBgJGJyb3dzZXIuZGVmZXJgIGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgaGFzbid0IGV4ZWN1dGVkIHlldCBhbmQgd2FzIHN1Y2Nlc3NmdWxseVxuICAgKiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWQuXG4gICAqL1xuICBzZWxmLmRlZmVyLmNhbmNlbCA9IGZ1bmN0aW9uKGRlZmVySWQpIHtcbiAgICBpZiAocGVuZGluZ0RlZmVySWRzW2RlZmVySWRdKSB7XG4gICAgICBkZWxldGUgcGVuZGluZ0RlZmVySWRzW2RlZmVySWRdO1xuICAgICAgY2xlYXJUaW1lb3V0KGRlZmVySWQpO1xuICAgICAgY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Qobm9vcCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG59XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJEJyb3dzZXJQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckd2luZG93JywgJyRsb2cnLCAnJHNuaWZmZXInLCAnJGRvY3VtZW50JyxcbiAgICAgIGZ1bmN0aW9uKCR3aW5kb3csICRsb2csICRzbmlmZmVyLCAkZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCcm93c2VyKCR3aW5kb3csICRkb2N1bWVudCwgJGxvZywgJHNuaWZmZXIpO1xuICAgICAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRjYWNoZUZhY3RvcnlcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBGYWN0b3J5IHRoYXQgY29uc3RydWN0cyB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0cyBhbmQgZ2l2ZXMgYWNjZXNzIHRvXG4gKiB0aGVtLlxuICpcbiAqIGBgYGpzXG4gKlxuICogIHZhciBjYWNoZSA9ICRjYWNoZUZhY3RvcnkoJ2NhY2hlSWQnKTtcbiAqICBleHBlY3QoJGNhY2hlRmFjdG9yeS5nZXQoJ2NhY2hlSWQnKSkudG9CZShjYWNoZSk7XG4gKiAgZXhwZWN0KCRjYWNoZUZhY3RvcnkuZ2V0KCdub1N1Y2hDYWNoZUlkJykpLm5vdC50b0JlRGVmaW5lZCgpO1xuICpcbiAqICBjYWNoZS5wdXQoXCJrZXlcIiwgXCJ2YWx1ZVwiKTtcbiAqICBjYWNoZS5wdXQoXCJhbm90aGVyIGtleVwiLCBcImFub3RoZXIgdmFsdWVcIik7XG4gKlxuICogIC8vIFdlJ3ZlIHNwZWNpZmllZCBubyBvcHRpb25zIG9uIGNyZWF0aW9uXG4gKiAgZXhwZWN0KGNhY2hlLmluZm8oKSkudG9FcXVhbCh7aWQ6ICdjYWNoZUlkJywgc2l6ZTogMn0pO1xuICpcbiAqIGBgYFxuICpcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVJZCBOYW1lIG9yIGlkIG9mIHRoZSBuZXdseSBjcmVhdGVkIGNhY2hlLlxuICogQHBhcmFtIHtvYmplY3Q9fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0IHRoYXQgc3BlY2lmaWVzIHRoZSBjYWNoZSBiZWhhdmlvci4gUHJvcGVydGllczpcbiAqXG4gKiAgIC0gYHtudW1iZXI9fWAgYGNhcGFjaXR5YCDigJQgdHVybnMgdGhlIGNhY2hlIGludG8gTFJVIGNhY2hlLlxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9IE5ld2x5IGNyZWF0ZWQgY2FjaGUgb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBzZXQgb2YgbWV0aG9kczpcbiAqXG4gKiAtIGB7b2JqZWN0fWAgYGluZm8oKWAg4oCUIFJldHVybnMgaWQsIHNpemUsIGFuZCBvcHRpb25zIG9mIGNhY2hlLlxuICogLSBge3sqfX1gIGBwdXQoe3N0cmluZ30ga2V5LCB7Kn0gdmFsdWUpYCDigJQgUHV0cyBhIG5ldyBrZXktdmFsdWUgcGFpciBpbnRvIHRoZSBjYWNoZSBhbmQgcmV0dXJuc1xuICogICBpdC5cbiAqIC0gYHt7Kn19YCBgZ2V0KHtzdHJpbmd9IGtleSlgIOKAlCBSZXR1cm5zIGNhY2hlZCB2YWx1ZSBmb3IgYGtleWAgb3IgdW5kZWZpbmVkIGZvciBjYWNoZSBtaXNzLlxuICogLSBge3ZvaWR9YCBgcmVtb3ZlKHtzdHJpbmd9IGtleSlgIOKAlCBSZW1vdmVzIGEga2V5LXZhbHVlIHBhaXIgZnJvbSB0aGUgY2FjaGUuXG4gKiAtIGB7dm9pZH1gIGByZW1vdmVBbGwoKWAg4oCUIFJlbW92ZXMgYWxsIGNhY2hlZCB2YWx1ZXMuXG4gKiAtIGB7dm9pZH1gIGBkZXN0cm95KClgIOKAlCBSZW1vdmVzIHJlZmVyZW5jZXMgdG8gdGhpcyBjYWNoZSBmcm9tICRjYWNoZUZhY3RvcnkuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImNhY2hlRXhhbXBsZUFwcFwiIG5hbWU9XCJjYWNoZS1mYWN0b3J5XCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQ2FjaGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJuZXdDYWNoZUtleVwiIHBsYWNlaG9sZGVyPVwiS2V5XCI+XG4gICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJuZXdDYWNoZVZhbHVlXCIgcGxhY2Vob2xkZXI9XCJWYWx1ZVwiPlxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInB1dChuZXdDYWNoZUtleSwgbmV3Q2FjaGVWYWx1ZSlcIj5DYWNoZTwvYnV0dG9uPlxuXG4gICAgICAgICA8cCBuZy1pZj1cImtleXMubGVuZ3RoXCI+Q2FjaGVkIFZhbHVlczwvcD5cbiAgICAgICAgIDxkaXYgbmctcmVwZWF0PVwia2V5IGluIGtleXNcIj5cbiAgICAgICAgICAgPHNwYW4gbmctYmluZD1cImtleVwiPjwvc3Bhbj5cbiAgICAgICAgICAgPHNwYW4+OiA8L3NwYW4+XG4gICAgICAgICAgIDxiIG5nLWJpbmQ9XCJjYWNoZS5nZXQoa2V5KVwiPjwvYj5cbiAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICA8cD5DYWNoZSBJbmZvPC9wPlxuICAgICAgICAgPGRpdiBuZy1yZXBlYXQ9XCIoa2V5LCB2YWx1ZSkgaW4gY2FjaGUuaW5mbygpXCI+XG4gICAgICAgICAgIDxzcGFuIG5nLWJpbmQ9XCJrZXlcIj48L3NwYW4+XG4gICAgICAgICAgIDxzcGFuPjogPC9zcGFuPlxuICAgICAgICAgICA8YiBuZy1iaW5kPVwidmFsdWVcIj48L2I+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2NhY2hlRXhhbXBsZUFwcCcsIFtdKS5cbiAgICAgICAgIGNvbnRyb2xsZXIoJ0NhY2hlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRjYWNoZUZhY3RvcnknLCBmdW5jdGlvbigkc2NvcGUsICRjYWNoZUZhY3RvcnkpIHtcbiAgICAgICAgICAgJHNjb3BlLmtleXMgPSBbXTtcbiAgICAgICAgICAgJHNjb3BlLmNhY2hlID0gJGNhY2hlRmFjdG9yeSgnY2FjaGVJZCcpO1xuICAgICAgICAgICAkc2NvcGUucHV0ID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKCRzY29wZS5jYWNoZS5nZXQoa2V5KSkpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5rZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgJHNjb3BlLmNhY2hlLnB1dChrZXksIGFuZ3VsYXIuaXNVbmRlZmluZWQodmFsdWUpID8gbnVsbCA6IHZhbHVlKTtcbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgcCB7XG4gICAgICAgICBtYXJnaW46IDEwcHggMCAzcHg7XG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbmZ1bmN0aW9uICRDYWNoZUZhY3RvcnlQcm92aWRlcigpIHtcblxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2FjaGVzID0ge307XG5cbiAgICBmdW5jdGlvbiBjYWNoZUZhY3RvcnkoY2FjaGVJZCwgb3B0aW9ucykge1xuICAgICAgaWYgKGNhY2hlSWQgaW4gY2FjaGVzKSB7XG4gICAgICAgIHRocm93IG1pbkVycignJGNhY2hlRmFjdG9yeScpKCdpaWQnLCAnQ2FjaGVJZCBcXCd7MH1cXCcgaXMgYWxyZWFkeSB0YWtlbiEnLCBjYWNoZUlkKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpemUgPSAwLFxuICAgICAgICAgIHN0YXRzID0gZXh0ZW5kKHt9LCBvcHRpb25zLCB7aWQ6IGNhY2hlSWR9KSxcbiAgICAgICAgICBkYXRhID0gY3JlYXRlTWFwKCksXG4gICAgICAgICAgY2FwYWNpdHkgPSAob3B0aW9ucyAmJiBvcHRpb25zLmNhcGFjaXR5KSB8fCBOdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgICAgIGxydUhhc2ggPSBjcmVhdGVNYXAoKSxcbiAgICAgICAgICBmcmVzaEVuZCA9IG51bGwsXG4gICAgICAgICAgc3RhbGVFbmQgPSBudWxsO1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyB0eXBlXG4gICAgICAgKiBAbmFtZSAkY2FjaGVGYWN0b3J5LkNhY2hlXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBIGNhY2hlIG9iamVjdCB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBkYXRhLCBwcmltYXJpbHkgdXNlZCBieVxuICAgICAgICoge0BsaW5rICR0ZW1wbGF0ZVJlcXVlc3QgJHRlbXBsYXRlUmVxdWVzdH0gYW5kIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOnNjcmlwdCBzY3JpcHR9XG4gICAgICAgKiBkaXJlY3RpdmUgdG8gY2FjaGUgdGVtcGxhdGVzIGFuZCBvdGhlciBkYXRhLlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAgYW5ndWxhci5tb2R1bGUoJ3N1cGVyQ2FjaGUnKVxuICAgICAgICogICAgLmZhY3RvcnkoJ3N1cGVyQ2FjaGUnLCBbJyRjYWNoZUZhY3RvcnknLCBmdW5jdGlvbigkY2FjaGVGYWN0b3J5KSB7XG4gICAgICAgKiAgICAgIHJldHVybiAkY2FjaGVGYWN0b3J5KCdzdXBlci1jYWNoZScpO1xuICAgICAgICogICAgfV0pO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogRXhhbXBsZSB0ZXN0OlxuICAgICAgICpcbiAgICAgICAqIGBgYGpzXG4gICAgICAgKiAgaXQoJ3Nob3VsZCBiZWhhdmUgbGlrZSBhIGNhY2hlJywgaW5qZWN0KGZ1bmN0aW9uKHN1cGVyQ2FjaGUpIHtcbiAgICAgICAqICAgIHN1cGVyQ2FjaGUucHV0KCdrZXknLCAndmFsdWUnKTtcbiAgICAgICAqICAgIHN1cGVyQ2FjaGUucHV0KCdhbm90aGVyIGtleScsICdhbm90aGVyIHZhbHVlJyk7XG4gICAgICAgKlxuICAgICAgICogICAgZXhwZWN0KHN1cGVyQ2FjaGUuaW5mbygpKS50b0VxdWFsKHtcbiAgICAgICAqICAgICAgaWQ6ICdzdXBlci1jYWNoZScsXG4gICAgICAgKiAgICAgIHNpemU6IDJcbiAgICAgICAqICAgIH0pO1xuICAgICAgICpcbiAgICAgICAqICAgIHN1cGVyQ2FjaGUucmVtb3ZlKCdhbm90aGVyIGtleScpO1xuICAgICAgICogICAgZXhwZWN0KHN1cGVyQ2FjaGUuZ2V0KCdhbm90aGVyIGtleScpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICAgKlxuICAgICAgICogICAgc3VwZXJDYWNoZS5yZW1vdmVBbGwoKTtcbiAgICAgICAqICAgIGV4cGVjdChzdXBlckNhY2hlLmluZm8oKSkudG9FcXVhbCh7XG4gICAgICAgKiAgICAgIGlkOiAnc3VwZXItY2FjaGUnLFxuICAgICAgICogICAgICBzaXplOiAwXG4gICAgICAgKiAgICB9KTtcbiAgICAgICAqICB9KSk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIChjYWNoZXNbY2FjaGVJZF0gPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNwdXRcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIEluc2VydHMgYSBuYW1lZCBlbnRyeSBpbnRvIHRoZSB7QGxpbmsgJGNhY2hlRmFjdG9yeS5DYWNoZSBDYWNoZX0gb2JqZWN0IHRvIGJlXG4gICAgICAgICAqIHJldHJpZXZlZCBsYXRlciwgYW5kIGluY3JlbWVudGluZyB0aGUgc2l6ZSBvZiB0aGUgY2FjaGUgaWYgdGhlIGtleSB3YXMgbm90IGFscmVhZHlcbiAgICAgICAgICogcHJlc2VudCBpbiB0aGUgY2FjaGUuIElmIGJlaGF2aW5nIGxpa2UgYW4gTFJVIGNhY2hlLCBpdCB3aWxsIGFsc28gcmVtb3ZlIHN0YWxlXG4gICAgICAgICAqIGVudHJpZXMgZnJvbSB0aGUgc2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBJdCB3aWxsIG5vdCBpbnNlcnQgdW5kZWZpbmVkIHZhbHVlcyBpbnRvIHRoZSBjYWNoZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IHVuZGVyIHdoaWNoIHRoZSBjYWNoZWQgZGF0YSBpcyBzdG9yZWQuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgdGhlIHZhbHVlIHRvIHN0b3JlIGFsb25nc2lkZSB0aGUga2V5LiBJZiBpdCBpcyB1bmRlZmluZWQsIHRoZSBrZXlcbiAgICAgICAgICogICAgd2lsbCBub3QgYmUgc3RvcmVkLlxuICAgICAgICAgKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIHN0b3JlZC5cbiAgICAgICAgICovXG4gICAgICAgIHB1dDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpIHJldHVybjtcbiAgICAgICAgICBpZiAoY2FwYWNpdHkgPCBOdW1iZXIuTUFYX1ZBTFVFKSB7XG4gICAgICAgICAgICB2YXIgbHJ1RW50cnkgPSBscnVIYXNoW2tleV0gfHwgKGxydUhhc2hba2V5XSA9IHtrZXk6IGtleX0pO1xuXG4gICAgICAgICAgICByZWZyZXNoKGxydUVudHJ5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIShrZXkgaW4gZGF0YSkpIHNpemUrKztcbiAgICAgICAgICBkYXRhW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgIGlmIChzaXplID4gY2FwYWNpdHkpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHN0YWxlRW5kLmtleSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjZ2V0XG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBSZXRyaWV2ZXMgbmFtZWQgZGF0YSBzdG9yZWQgaW4gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgdGhlIGtleSBvZiB0aGUgZGF0YSB0byBiZSByZXRyaWV2ZWRcbiAgICAgICAgICogQHJldHVybnMgeyp9IHRoZSB2YWx1ZSBzdG9yZWQuXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIGlmIChjYXBhY2l0eSA8IE51bWJlci5NQVhfVkFMVUUpIHtcbiAgICAgICAgICAgIHZhciBscnVFbnRyeSA9IGxydUhhc2hba2V5XTtcblxuICAgICAgICAgICAgaWYgKCFscnVFbnRyeSkgcmV0dXJuO1xuXG4gICAgICAgICAgICByZWZyZXNoKGxydUVudHJ5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNyZW1vdmVcbiAgICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJlbW92ZXMgYW4gZW50cnkgZnJvbSB0aGUge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGV9IG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSB0aGUga2V5IG9mIHRoZSBlbnRyeSB0byBiZSByZW1vdmVkXG4gICAgICAgICAqL1xuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIGlmIChjYXBhY2l0eSA8IE51bWJlci5NQVhfVkFMVUUpIHtcbiAgICAgICAgICAgIHZhciBscnVFbnRyeSA9IGxydUhhc2hba2V5XTtcblxuICAgICAgICAgICAgaWYgKCFscnVFbnRyeSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAobHJ1RW50cnkgPT09IGZyZXNoRW5kKSBmcmVzaEVuZCA9IGxydUVudHJ5LnA7XG4gICAgICAgICAgICBpZiAobHJ1RW50cnkgPT09IHN0YWxlRW5kKSBzdGFsZUVuZCA9IGxydUVudHJ5Lm47XG4gICAgICAgICAgICBsaW5rKGxydUVudHJ5Lm4sbHJ1RW50cnkucCk7XG5cbiAgICAgICAgICAgIGRlbGV0ZSBscnVIYXNoW2tleV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCEoa2V5IGluIGRhdGEpKSByZXR1cm47XG5cbiAgICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xuICAgICAgICAgIHNpemUtLTtcbiAgICAgICAgfSxcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjcmVtb3ZlQWxsXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBDbGVhcnMgdGhlIGNhY2hlIG9iamVjdCBvZiBhbnkgZW50cmllcy5cbiAgICAgICAgICovXG4gICAgICAgIHJlbW92ZUFsbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGF0YSA9IGNyZWF0ZU1hcCgpO1xuICAgICAgICAgIHNpemUgPSAwO1xuICAgICAgICAgIGxydUhhc2ggPSBjcmVhdGVNYXAoKTtcbiAgICAgICAgICBmcmVzaEVuZCA9IHN0YWxlRW5kID0gbnVsbDtcbiAgICAgICAgfSxcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgICAqIEBuYW1lICRjYWNoZUZhY3RvcnkuQ2FjaGUjZGVzdHJveVxuICAgICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAgICogRGVzdHJveXMgdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfSBvYmplY3QgZW50aXJlbHksXG4gICAgICAgICAqIHJlbW92aW5nIGl0IGZyb20gdGhlIHtAbGluayAkY2FjaGVGYWN0b3J5ICRjYWNoZUZhY3Rvcnl9IHNldC5cbiAgICAgICAgICovXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGRhdGEgPSBudWxsO1xuICAgICAgICAgIHN0YXRzID0gbnVsbDtcbiAgICAgICAgICBscnVIYXNoID0gbnVsbDtcbiAgICAgICAgICBkZWxldGUgY2FjaGVzW2NhY2hlSWRdO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAgICogQG5hbWUgJGNhY2hlRmFjdG9yeS5DYWNoZSNpbmZvXG4gICAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICAgKiBSZXRyaWV2ZSBpbmZvcm1hdGlvbiByZWdhcmRpbmcgYSBwYXJ0aWN1bGFyIHtAbGluayAkY2FjaGVGYWN0b3J5LkNhY2hlIENhY2hlfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybnMge29iamVjdH0gYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgICAgICAgKiAgIDx1bD5cbiAgICAgICAgICogICAgIDxsaT4qKmlkKio6IHRoZSBpZCBvZiB0aGUgY2FjaGUgaW5zdGFuY2U8L2xpPlxuICAgICAgICAgKiAgICAgPGxpPioqc2l6ZSoqOiB0aGUgbnVtYmVyIG9mIGVudHJpZXMga2VwdCBpbiB0aGUgY2FjaGUgaW5zdGFuY2U8L2xpPlxuICAgICAgICAgKiAgICAgPGxpPioqLi4uKio6IGFueSBhZGRpdGlvbmFsIHByb3BlcnRpZXMgZnJvbSB0aGUgb3B0aW9ucyBvYmplY3Qgd2hlbiBjcmVhdGluZyB0aGVcbiAgICAgICAgICogICAgICAgY2FjaGUuPC9saT5cbiAgICAgICAgICogICA8L3VsPlxuICAgICAgICAgKi9cbiAgICAgICAgaW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgc3RhdHMsIHtzaXplOiBzaXplfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG5cbiAgICAgIC8qKlxuICAgICAgICogbWFrZXMgdGhlIGBlbnRyeWAgdGhlIGZyZXNoRW5kIG9mIHRoZSBMUlUgbGlua2VkIGxpc3RcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gcmVmcmVzaChlbnRyeSkge1xuICAgICAgICBpZiAoZW50cnkgIT09IGZyZXNoRW5kKSB7XG4gICAgICAgICAgaWYgKCFzdGFsZUVuZCkge1xuICAgICAgICAgICAgc3RhbGVFbmQgPSBlbnRyeTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0YWxlRW5kID09PSBlbnRyeSkge1xuICAgICAgICAgICAgc3RhbGVFbmQgPSBlbnRyeS5uO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpbmsoZW50cnkubiwgZW50cnkucCk7XG4gICAgICAgICAgbGluayhlbnRyeSwgZnJlc2hFbmQpO1xuICAgICAgICAgIGZyZXNoRW5kID0gZW50cnk7XG4gICAgICAgICAgZnJlc2hFbmQubiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuXG4gICAgICAvKipcbiAgICAgICAqIGJpZGlyZWN0aW9uYWxseSBsaW5rcyB0d28gZW50cmllcyBvZiB0aGUgTFJVIGxpbmtlZCBsaXN0XG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGxpbmsobmV4dEVudHJ5LCBwcmV2RW50cnkpIHtcbiAgICAgICAgaWYgKG5leHRFbnRyeSAhPT0gcHJldkVudHJ5KSB7XG4gICAgICAgICAgaWYgKG5leHRFbnRyeSkgbmV4dEVudHJ5LnAgPSBwcmV2RW50cnk7IC8vcCBzdGFuZHMgZm9yIHByZXZpb3VzLCAncHJldicgZGlkbid0IG1pbmlmeVxuICAgICAgICAgIGlmIChwcmV2RW50cnkpIHByZXZFbnRyeS5uID0gbmV4dEVudHJ5OyAvL24gc3RhbmRzIGZvciBuZXh0LCAnbmV4dCcgZGlkbid0IG1pbmlmeVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNhY2hlRmFjdG9yeSNpbmZvXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBHZXQgaW5mb3JtYXRpb24gYWJvdXQgYWxsIHRoZSBjYWNoZXMgdGhhdCBoYXZlIGJlZW4gY3JlYXRlZFxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSAtIGtleS12YWx1ZSBtYXAgb2YgYGNhY2hlSWRgIHRvIHRoZSByZXN1bHQgb2YgY2FsbGluZyBgY2FjaGUjaW5mb2BcbiAgICovXG4gICAgY2FjaGVGYWN0b3J5LmluZm8gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbmZvID0ge307XG4gICAgICBmb3JFYWNoKGNhY2hlcywgZnVuY3Rpb24oY2FjaGUsIGNhY2hlSWQpIHtcbiAgICAgICAgaW5mb1tjYWNoZUlkXSA9IGNhY2hlLmluZm8oKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGluZm87XG4gICAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjYWNoZUZhY3RvcnkjZ2V0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBHZXQgYWNjZXNzIHRvIGEgY2FjaGUgb2JqZWN0IGJ5IHRoZSBgY2FjaGVJZGAgdXNlZCB3aGVuIGl0IHdhcyBjcmVhdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2FjaGVJZCBOYW1lIG9yIGlkIG9mIGEgY2FjaGUgdG8gYWNjZXNzLlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBDYWNoZSBvYmplY3QgaWRlbnRpZmllZCBieSB0aGUgY2FjaGVJZCBvciB1bmRlZmluZWQgaWYgbm8gc3VjaCBjYWNoZS5cbiAgICovXG4gICAgY2FjaGVGYWN0b3J5LmdldCA9IGZ1bmN0aW9uKGNhY2hlSWQpIHtcbiAgICAgIHJldHVybiBjYWNoZXNbY2FjaGVJZF07XG4gICAgfTtcblxuXG4gICAgcmV0dXJuIGNhY2hlRmFjdG9yeTtcbiAgfTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHRlbXBsYXRlQ2FjaGVcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgJHRlbXBsYXRlQ2FjaGVgIGlzIGEge0BsaW5rICRjYWNoZUZhY3RvcnkuQ2FjaGUgQ2FjaGUgb2JqZWN0fSBjcmVhdGVkIGJ5IHRoZVxuICoge0BsaW5rIG5nLiRjYWNoZUZhY3RvcnkgJGNhY2hlRmFjdG9yeX0uXG4gKlxuICogVGhlIGZpcnN0IHRpbWUgYSB0ZW1wbGF0ZSBpcyB1c2VkLCBpdCBpcyBsb2FkZWQgaW4gdGhlIHRlbXBsYXRlIGNhY2hlIGZvciBxdWljayByZXRyaWV2YWwuIFlvdVxuICogY2FuIGxvYWQgdGVtcGxhdGVzIGRpcmVjdGx5IGludG8gdGhlIGNhY2hlIGluIGEgYHNjcmlwdGAgdGFnLCBieSB1c2luZyB7QGxpbmsgJHRlbXBsYXRlUmVxdWVzdH0sXG4gKiBvciBieSBjb25zdW1pbmcgdGhlIGAkdGVtcGxhdGVDYWNoZWAgc2VydmljZSBkaXJlY3RseS5cbiAqXG4gKiBBZGRpbmcgdmlhIHRoZSBgc2NyaXB0YCB0YWc6XG4gKlxuICogYGBgaHRtbFxuICogICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L25nLXRlbXBsYXRlXCIgaWQ9XCJ0ZW1wbGF0ZUlkLmh0bWxcIj5cbiAqICAgICA8cD5UaGlzIGlzIHRoZSBjb250ZW50IG9mIHRoZSB0ZW1wbGF0ZTwvcD5cbiAqICAgPC9zY3JpcHQ+XG4gKiBgYGBcbiAqXG4gKiAqKk5vdGU6KiogdGhlIGBzY3JpcHRgIHRhZyBjb250YWluaW5nIHRoZSB0ZW1wbGF0ZSBkb2VzIG5vdCBuZWVkIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBgaGVhZGAgb2ZcbiAqIHRoZSBkb2N1bWVudCwgYnV0IGl0IG11c3QgYmUgYSBkZXNjZW5kZW50IG9mIHRoZSB7QGxpbmsgbmcuJHJvb3RFbGVtZW50ICRyb290RWxlbWVudH0gKGUuZy5cbiAqIGVsZW1lbnQgd2l0aCB7QGxpbmsgbmdBcHB9IGF0dHJpYnV0ZSksIG90aGVyd2lzZSB0aGUgdGVtcGxhdGUgd2lsbCBiZSBpZ25vcmVkLlxuICpcbiAqIEFkZGluZyB2aWEgdGhlIGAkdGVtcGxhdGVDYWNoZWAgc2VydmljZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIG15QXBwID0gYW5ndWxhci5tb2R1bGUoJ215QXBwJywgW10pO1xuICogbXlBcHAucnVuKGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gKiAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgndGVtcGxhdGVJZC5odG1sJywgJ1RoaXMgaXMgdGhlIGNvbnRlbnQgb2YgdGhlIHRlbXBsYXRlJyk7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFRvIHJldHJpZXZlIHRoZSB0ZW1wbGF0ZSBsYXRlciwgc2ltcGx5IHVzZSBpdCBpbiB5b3VyIGNvbXBvbmVudDpcbiAqIGBgYGpzXG4gKiBteUFwcC5jb21wb25lbnQoJ215Q29tcG9uZW50Jywge1xuICogICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZUlkLmh0bWwnXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIG9yIGdldCBpdCB2aWEgdGhlIGAkdGVtcGxhdGVDYWNoZWAgc2VydmljZTpcbiAqIGBgYGpzXG4gKiAkdGVtcGxhdGVDYWNoZS5nZXQoJ3RlbXBsYXRlSWQuaHRtbCcpXG4gKiBgYGBcbiAqXG4gKi9cbmZ1bmN0aW9uICRUZW1wbGF0ZUNhY2hlUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJGNhY2hlRmFjdG9yeScsIGZ1bmN0aW9uKCRjYWNoZUZhY3RvcnkpIHtcbiAgICByZXR1cm4gJGNhY2hlRmFjdG9yeSgndGVtcGxhdGVzJyk7XG4gIH1dO1xufVxuXG4vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqXG4gKiAgICAgQW55IGNvbW1pdHMgdG8gdGhpcyBmaWxlIHNob3VsZCBiZSByZXZpZXdlZCB3aXRoIHNlY3VyaXR5IGluIG1pbmQuICAqXG4gKiAgIENoYW5nZXMgdG8gdGhpcyBmaWxlIGNhbiBwb3RlbnRpYWxseSBjcmVhdGUgc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzLiAqXG4gKiAgICAgICAgICBBbiBhcHByb3ZhbCBmcm9tIDIgQ29yZSBtZW1iZXJzIHdpdGggaGlzdG9yeSBvZiBtb2RpZnlpbmcgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzIGZpbGUgaXMgcmVxdWlyZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gKiAgRG9lcyB0aGUgY2hhbmdlIHNvbWVob3cgYWxsb3cgZm9yIGFyYml0cmFyeSBqYXZhc2NyaXB0IHRvIGJlIGV4ZWN1dGVkPyAqXG4gKiAgICBPciBhbGxvd3MgZm9yIHNvbWVvbmUgdG8gY2hhbmdlIHRoZSBwcm90b3R5cGUgb2YgYnVpbHQtaW4gb2JqZWN0cz8gICAqXG4gKiAgICAgT3IgZ2l2ZXMgdW5kZXNpcmVkIGFjY2VzcyB0byB2YXJpYWJsZXMgbGlrZSBkb2N1bWVudCBvciB3aW5kb3c/ICAgICpcbiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICovXG5cbi8qICEgVkFSSUFCTEUvRlVOQ1RJT04gTkFNSU5HIENPTlZFTlRJT05TIFRIQVQgQVBQTFkgVE8gVEhJUyBGSUxFIVxuICpcbiAqIERPTS1yZWxhdGVkIHZhcmlhYmxlczpcbiAqXG4gKiAtIFwibm9kZVwiIC0gRE9NIE5vZGVcbiAqIC0gXCJlbGVtZW50XCIgLSBET00gRWxlbWVudCBvciBOb2RlXG4gKiAtIFwiJG5vZGVcIiBvciBcIiRlbGVtZW50XCIgLSBqcUxpdGUtd3JhcHBlZCBub2RlIG9yIGVsZW1lbnRcbiAqXG4gKlxuICogQ29tcGlsZXIgcmVsYXRlZCBzdHVmZjpcbiAqXG4gKiAtIFwibGlua0ZuXCIgLSBsaW5raW5nIGZuIG9mIGEgc2luZ2xlIGRpcmVjdGl2ZVxuICogLSBcIm5vZGVMaW5rRm5cIiAtIGZ1bmN0aW9uIHRoYXQgYWdncmVnYXRlcyBhbGwgbGlua2luZyBmbnMgZm9yIGEgcGFydGljdWxhciBub2RlXG4gKiAtIFwiY2hpbGRMaW5rRm5cIiAtICBmdW5jdGlvbiB0aGF0IGFnZ3JlZ2F0ZXMgYWxsIGxpbmtpbmcgZm5zIGZvciBjaGlsZCBub2RlcyBvZiBhIHBhcnRpY3VsYXIgbm9kZVxuICogLSBcImNvbXBvc2l0ZUxpbmtGblwiIC0gZnVuY3Rpb24gdGhhdCBhZ2dyZWdhdGVzIGFsbCBsaW5raW5nIGZucyBmb3IgYSBjb21waWxhdGlvbiByb290IChub2RlTGlzdClcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRjb21waWxlXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29tcGlsZXMgYW4gSFRNTCBzdHJpbmcgb3IgRE9NIGludG8gYSB0ZW1wbGF0ZSBhbmQgcHJvZHVjZXMgYSB0ZW1wbGF0ZSBmdW5jdGlvbiwgd2hpY2hcbiAqIGNhbiB0aGVuIGJlIHVzZWQgdG8gbGluayB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBgc2NvcGVgfSBhbmQgdGhlIHRlbXBsYXRlIHRvZ2V0aGVyLlxuICpcbiAqIFRoZSBjb21waWxhdGlvbiBpcyBhIHByb2Nlc3Mgb2Ygd2Fsa2luZyB0aGUgRE9NIHRyZWUgYW5kIG1hdGNoaW5nIERPTSBlbGVtZW50cyB0b1xuICoge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlIGRpcmVjdGl2ZXN9LlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogVGhpcyBkb2N1bWVudCBpcyBhbiBpbi1kZXB0aCByZWZlcmVuY2Ugb2YgYWxsIGRpcmVjdGl2ZSBvcHRpb25zLlxuICogRm9yIGEgZ2VudGxlIGludHJvZHVjdGlvbiB0byBkaXJlY3RpdmVzIHdpdGggZXhhbXBsZXMgb2YgY29tbW9uIHVzZSBjYXNlcyxcbiAqIHNlZSB0aGUge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmUgZ3VpZGV9LlxuICogPC9kaXY+XG4gKlxuICogIyMgQ29tcHJlaGVuc2l2ZSBEaXJlY3RpdmUgQVBJXG4gKlxuICogVGhlcmUgYXJlIG1hbnkgZGlmZmVyZW50IG9wdGlvbnMgZm9yIGEgZGlyZWN0aXZlLlxuICpcbiAqIFRoZSBkaWZmZXJlbmNlIHJlc2lkZXMgaW4gdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmFjdG9yeSBmdW5jdGlvbi5cbiAqIFlvdSBjYW4gZWl0aGVyIHJldHVybiBhIHtAbGluayAkY29tcGlsZSNkaXJlY3RpdmUtZGVmaW5pdGlvbi1vYmplY3QgRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0IChzZWUgYmVsb3cpfVxuICogdGhhdCBkZWZpbmVzIHRoZSBkaXJlY3RpdmUgcHJvcGVydGllcywgb3IganVzdCB0aGUgYHBvc3RMaW5rYCBmdW5jdGlvbiAoYWxsIG90aGVyIHByb3BlcnRpZXMgd2lsbCBoYXZlXG4gKiB0aGUgZGVmYXVsdCB2YWx1ZXMpLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1zdWNjZXNzXCI+XG4gKiAqKkJlc3QgUHJhY3RpY2U6KiogSXQncyByZWNvbW1lbmRlZCB0byB1c2UgdGhlIFwiZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0XCIgZm9ybS5cbiAqIDwvZGl2PlxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIGRpcmVjdGl2ZSBkZWNsYXJlZCB3aXRoIGEgRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0OlxuICpcbiAqIGBgYGpzXG4gKiAgIHZhciBteU1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKC4uLik7XG4gKlxuICogICBteU1vZHVsZS5kaXJlY3RpdmUoJ2RpcmVjdGl2ZU5hbWUnLCBmdW5jdGlvbiBmYWN0b3J5KGluamVjdGFibGVzKSB7XG4gKiAgICAgdmFyIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3QgPSB7XG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXByaW9yaXR5LSBwcmlvcml0eX06IDAsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXRlbXBsYXRlLSB0ZW1wbGF0ZX06ICc8ZGl2PjwvZGl2PicsIC8vIG9yIC8vIGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHsgLi4uIH0sXG4gKiAgICAgICAvLyBvclxuICogICAgICAgLy8ge0BsaW5rICRjb21waWxlIy10ZW1wbGF0ZXVybC0gdGVtcGxhdGVVcmx9OiAnZGlyZWN0aXZlLmh0bWwnLCAvLyBvciAvLyBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7IC4uLiB9LFxuICogICAgICAge0BsaW5rICRjb21waWxlIy10cmFuc2NsdWRlLSB0cmFuc2NsdWRlfTogZmFsc2UsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXJlc3RyaWN0LSByZXN0cmljdH06ICdBJyxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtdGVtcGxhdGVuYW1lc3BhY2UtIHRlbXBsYXRlTmFtZXNwYWNlfTogJ2h0bWwnLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy1zY29wZS0gc2NvcGV9OiBmYWxzZSxcbiAqICAgICAgIHtAbGluayAkY29tcGlsZSMtY29udHJvbGxlci0gY29udHJvbGxlcn06IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHRyYW5zY2x1ZGUsIG90aGVySW5qZWN0YWJsZXMpIHsgLi4uIH0sXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLWNvbnRyb2xsZXJhcy0gY29udHJvbGxlckFzfTogJ3N0cmluZ0lkZW50aWZpZXInLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy1iaW5kdG9jb250cm9sbGVyLSBiaW5kVG9Db250cm9sbGVyfTogZmFsc2UsXG4gKiAgICAgICB7QGxpbmsgJGNvbXBpbGUjLXJlcXVpcmUtIHJlcXVpcmV9OiAnc2libGluZ0RpcmVjdGl2ZU5hbWUnLCAvLyBvciAvLyBbJ15wYXJlbnREaXJlY3RpdmVOYW1lJywgJz9vcHRpb25hbERpcmVjdGl2ZU5hbWUnLCAnP15vcHRpb25hbFBhcmVudCddLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy1tdWx0aWVsZW1lbnQtIG11bHRpRWxlbWVudH06IGZhbHNlLFxuICogICAgICAge0BsaW5rICRjb21waWxlIy1jb21waWxlLSBjb21waWxlfTogZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgIHtAbGluayAkY29tcGlsZSNwcmUtbGlua2luZy1mdW5jdGlvbiBwcmV9OiBmdW5jdGlvbiBwcmVMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjb250cm9sbGVyKSB7IC4uLiB9LFxuICogICAgICAgICAgICB7QGxpbmsgJGNvbXBpbGUjcG9zdC1saW5raW5nLWZ1bmN0aW9uIHBvc3R9OiBmdW5jdGlvbiBwb3N0TGluayhzY29wZSwgaUVsZW1lbnQsIGlBdHRycywgY29udHJvbGxlcikgeyAuLi4gfVxuICogICAgICAgICB9XG4gKiAgICAgICAgIC8vIG9yXG4gKiAgICAgICAgIC8vIHJldHVybiBmdW5jdGlvbiBwb3N0TGluayggLi4uICkgeyAuLi4gfVxuICogICAgICAgfSxcbiAqICAgICAgIC8vIG9yXG4gKiAgICAgICAvLyB7QGxpbmsgJGNvbXBpbGUjLWxpbmstIGxpbmt9OiB7XG4gKiAgICAgICAvLyAge0BsaW5rICRjb21waWxlI3ByZS1saW5raW5nLWZ1bmN0aW9uIHByZX06IGZ1bmN0aW9uIHByZUxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH0sXG4gKiAgICAgICAvLyAge0BsaW5rICRjb21waWxlI3Bvc3QtbGlua2luZy1mdW5jdGlvbiBwb3N0fTogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIpIHsgLi4uIH1cbiAqICAgICAgIC8vIH1cbiAqICAgICAgIC8vIG9yXG4gKiAgICAgICAvLyB7QGxpbmsgJGNvbXBpbGUjLWxpbmstIGxpbmt9OiBmdW5jdGlvbiBwb3N0TGluayggLi4uICkgeyAuLi4gfVxuICogICAgIH07XG4gKiAgICAgcmV0dXJuIGRpcmVjdGl2ZURlZmluaXRpb25PYmplY3Q7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBBbnkgdW5zcGVjaWZpZWQgb3B0aW9ucyB3aWxsIHVzZSB0aGUgZGVmYXVsdCB2YWx1ZS4gWW91IGNhbiBzZWUgdGhlIGRlZmF1bHQgdmFsdWVzIGJlbG93LlxuICogPC9kaXY+XG4gKlxuICogVGhlcmVmb3JlIHRoZSBhYm92ZSBjYW4gYmUgc2ltcGxpZmllZCBhczpcbiAqXG4gKiBgYGBqc1xuICogICB2YXIgbXlNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSguLi4pO1xuICpcbiAqICAgbXlNb2R1bGUuZGlyZWN0aXZlKCdkaXJlY3RpdmVOYW1lJywgZnVuY3Rpb24gZmFjdG9yeShpbmplY3RhYmxlcykge1xuICogICAgIHZhciBkaXJlY3RpdmVEZWZpbml0aW9uT2JqZWN0ID0ge1xuICogICAgICAgbGluazogZnVuY3Rpb24gcG9zdExpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHsgLi4uIH1cbiAqICAgICB9O1xuICogICAgIHJldHVybiBkaXJlY3RpdmVEZWZpbml0aW9uT2JqZWN0O1xuICogICAgIC8vIG9yXG4gKiAgICAgLy8gcmV0dXJuIGZ1bmN0aW9uIHBvc3RMaW5rKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzKSB7IC4uLiB9XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogIyMjIExpZmUtY3ljbGUgaG9va3NcbiAqIERpcmVjdGl2ZSBjb250cm9sbGVycyBjYW4gcHJvdmlkZSB0aGUgZm9sbG93aW5nIG1ldGhvZHMgdGhhdCBhcmUgY2FsbGVkIGJ5IEFuZ3VsYXIgYXQgcG9pbnRzIGluIHRoZSBsaWZlLWN5Y2xlIG9mIHRoZVxuICogZGlyZWN0aXZlOlxuICogKiBgJG9uSW5pdCgpYCAtIENhbGxlZCBvbiBlYWNoIGNvbnRyb2xsZXIgYWZ0ZXIgYWxsIHRoZSBjb250cm9sbGVycyBvbiBhbiBlbGVtZW50IGhhdmUgYmVlbiBjb25zdHJ1Y3RlZCBhbmRcbiAqICAgaGFkIHRoZWlyIGJpbmRpbmdzIGluaXRpYWxpemVkIChhbmQgYmVmb3JlIHRoZSBwcmUgJmFtcDsgcG9zdCBsaW5raW5nIGZ1bmN0aW9ucyBmb3IgdGhlIGRpcmVjdGl2ZXMgb25cbiAqICAgdGhpcyBlbGVtZW50KS4gVGhpcyBpcyBhIGdvb2QgcGxhY2UgdG8gcHV0IGluaXRpYWxpemF0aW9uIGNvZGUgZm9yIHlvdXIgY29udHJvbGxlci5cbiAqICogYCRvbkNoYW5nZXMoY2hhbmdlc09iailgIC0gQ2FsbGVkIHdoZW5ldmVyIG9uZS13YXkgKGA8YCkgb3IgaW50ZXJwb2xhdGlvbiAoYEBgKSBiaW5kaW5ncyBhcmUgdXBkYXRlZC4gVGhlXG4gKiAgIGBjaGFuZ2VzT2JqYCBpcyBhIGhhc2ggd2hvc2Uga2V5cyBhcmUgdGhlIG5hbWVzIG9mIHRoZSBib3VuZCBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBjaGFuZ2VkLCBhbmQgdGhlIHZhbHVlcyBhcmUgYW5cbiAqICAgb2JqZWN0IG9mIHRoZSBmb3JtIGB7IGN1cnJlbnRWYWx1ZSwgcHJldmlvdXNWYWx1ZSwgaXNGaXJzdENoYW5nZSgpIH1gLiBVc2UgdGhpcyBob29rIHRvIHRyaWdnZXIgdXBkYXRlcyB3aXRoaW4gYVxuICogICBjb21wb25lbnQgc3VjaCBhcyBjbG9uaW5nIHRoZSBib3VuZCB2YWx1ZSB0byBwcmV2ZW50IGFjY2lkZW50YWwgbXV0YXRpb24gb2YgdGhlIG91dGVyIHZhbHVlLiBOb3RlIHRoYXQgdGhpcyB3aWxsXG4gKiAgIGFsc28gYmUgY2FsbGVkIHdoZW4geW91ciBiaW5kaW5ncyBhcmUgaW5pdGlhbGl6ZWQuXG4gKiAqIGAkZG9DaGVjaygpYCAtIENhbGxlZCBvbiBlYWNoIHR1cm4gb2YgdGhlIGRpZ2VzdCBjeWNsZS4gUHJvdmlkZXMgYW4gb3Bwb3J0dW5pdHkgdG8gZGV0ZWN0IGFuZCBhY3Qgb25cbiAqICAgY2hhbmdlcy4gQW55IGFjdGlvbnMgdGhhdCB5b3Ugd2lzaCB0byB0YWtlIGluIHJlc3BvbnNlIHRvIHRoZSBjaGFuZ2VzIHRoYXQgeW91IGRldGVjdCBtdXN0IGJlXG4gKiAgIGludm9rZWQgZnJvbSB0aGlzIGhvb2s7IGltcGxlbWVudGluZyB0aGlzIGhhcyBubyBlZmZlY3Qgb24gd2hlbiBgJG9uQ2hhbmdlc2AgaXMgY2FsbGVkLiBGb3IgZXhhbXBsZSwgdGhpcyBob29rXG4gKiAgIGNvdWxkIGJlIHVzZWZ1bCBpZiB5b3Ugd2lzaCB0byBwZXJmb3JtIGEgZGVlcCBlcXVhbGl0eSBjaGVjaywgb3IgdG8gY2hlY2sgYSBEYXRlIG9iamVjdCwgY2hhbmdlcyB0byB3aGljaCB3b3VsZCBub3RcbiAqICAgYmUgZGV0ZWN0ZWQgYnkgQW5ndWxhcidzIGNoYW5nZSBkZXRlY3RvciBhbmQgdGh1cyBub3QgdHJpZ2dlciBgJG9uQ2hhbmdlc2AuIFRoaXMgaG9vayBpcyBpbnZva2VkIHdpdGggbm8gYXJndW1lbnRzO1xuICogICBpZiBkZXRlY3RpbmcgY2hhbmdlcywgeW91IG11c3Qgc3RvcmUgdGhlIHByZXZpb3VzIHZhbHVlKHMpIGZvciBjb21wYXJpc29uIHRvIHRoZSBjdXJyZW50IHZhbHVlcy5cbiAqICogYCRvbkRlc3Ryb3koKWAgLSBDYWxsZWQgb24gYSBjb250cm9sbGVyIHdoZW4gaXRzIGNvbnRhaW5pbmcgc2NvcGUgaXMgZGVzdHJveWVkLiBVc2UgdGhpcyBob29rIGZvciByZWxlYXNpbmdcbiAqICAgZXh0ZXJuYWwgcmVzb3VyY2VzLCB3YXRjaGVzIGFuZCBldmVudCBoYW5kbGVycy4gTm90ZSB0aGF0IGNvbXBvbmVudHMgaGF2ZSB0aGVpciBgJG9uRGVzdHJveSgpYCBob29rcyBjYWxsZWQgaW5cbiAqICAgdGhlIHNhbWUgb3JkZXIgYXMgdGhlIGAkc2NvcGUuJGJyb2FkY2FzdGAgZXZlbnRzIGFyZSB0cmlnZ2VyZWQsIHdoaWNoIGlzIHRvcCBkb3duLiBUaGlzIG1lYW5zIHRoYXQgcGFyZW50XG4gKiAgIGNvbXBvbmVudHMgd2lsbCBoYXZlIHRoZWlyIGAkb25EZXN0cm95KClgIGhvb2sgY2FsbGVkIGJlZm9yZSBjaGlsZCBjb21wb25lbnRzLlxuICogKiBgJHBvc3RMaW5rKClgIC0gQ2FsbGVkIGFmdGVyIHRoaXMgY29udHJvbGxlcidzIGVsZW1lbnQgYW5kIGl0cyBjaGlsZHJlbiBoYXZlIGJlZW4gbGlua2VkLiBTaW1pbGFyIHRvIHRoZSBwb3N0LWxpbmtcbiAqICAgZnVuY3Rpb24gdGhpcyBob29rIGNhbiBiZSB1c2VkIHRvIHNldCB1cCBET00gZXZlbnQgaGFuZGxlcnMgYW5kIGRvIGRpcmVjdCBET00gbWFuaXB1bGF0aW9uLlxuICogICBOb3RlIHRoYXQgY2hpbGQgZWxlbWVudHMgdGhhdCBjb250YWluIGB0ZW1wbGF0ZVVybGAgZGlyZWN0aXZlcyB3aWxsIG5vdCBoYXZlIGJlZW4gY29tcGlsZWQgYW5kIGxpbmtlZCBzaW5jZVxuICogICB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd24gY29tcGlsYXRpb24gYW5kIGxpbmtpbmcgaGFzIGJlZW5cbiAqICAgc3VzcGVuZGVkIHVudGlsIHRoYXQgb2NjdXJzLlxuICpcbiAqICMjIyMgQ29tcGFyaXNvbiB3aXRoIEFuZ3VsYXIgMiBsaWZlLWN5Y2xlIGhvb2tzXG4gKiBBbmd1bGFyIDIgYWxzbyB1c2VzIGxpZmUtY3ljbGUgaG9va3MgZm9yIGl0cyBjb21wb25lbnRzLiBXaGlsZSB0aGUgQW5ndWxhciAxIGxpZmUtY3ljbGUgaG9va3MgYXJlIHNpbWlsYXIgdGhlcmUgYXJlXG4gKiBzb21lIGRpZmZlcmVuY2VzIHRoYXQgeW91IHNob3VsZCBiZSBhd2FyZSBvZiwgZXNwZWNpYWxseSB3aGVuIGl0IGNvbWVzIHRvIG1vdmluZyB5b3VyIGNvZGUgZnJvbSBBbmd1bGFyIDEgdG8gQW5ndWxhciAyOlxuICpcbiAqICogQW5ndWxhciAxIGhvb2tzIGFyZSBwcmVmaXhlZCB3aXRoIGAkYCwgc3VjaCBhcyBgJG9uSW5pdGAuIEFuZ3VsYXIgMiBob29rcyBhcmUgcHJlZml4ZWQgd2l0aCBgbmdgLCBzdWNoIGFzIGBuZ09uSW5pdGAuXG4gKiAqIEFuZ3VsYXIgMSBob29rcyBjYW4gYmUgZGVmaW5lZCBvbiB0aGUgY29udHJvbGxlciBwcm90b3R5cGUgb3IgYWRkZWQgdG8gdGhlIGNvbnRyb2xsZXIgaW5zaWRlIGl0cyBjb25zdHJ1Y3Rvci5cbiAqICAgSW4gQW5ndWxhciAyIHlvdSBjYW4gb25seSBkZWZpbmUgaG9va3Mgb24gdGhlIHByb3RvdHlwZSBvZiB0aGUgQ29tcG9uZW50IGNsYXNzLlxuICogKiBEdWUgdG8gdGhlIGRpZmZlcmVuY2VzIGluIGNoYW5nZS1kZXRlY3Rpb24sIHlvdSBtYXkgZ2V0IG1hbnkgbW9yZSBjYWxscyB0byBgJGRvQ2hlY2tgIGluIEFuZ3VsYXIgMSB0aGFuIHlvdSB3b3VsZCB0b1xuICogICBgbmdEb0NoZWNrYCBpbiBBbmd1bGFyIDJcbiAqICogQ2hhbmdlcyB0byB0aGUgbW9kZWwgaW5zaWRlIGAkZG9DaGVja2Agd2lsbCB0cmlnZ2VyIG5ldyB0dXJucyBvZiB0aGUgZGlnZXN0IGxvb3AsIHdoaWNoIHdpbGwgY2F1c2UgdGhlIGNoYW5nZXMgdG8gYmVcbiAqICAgcHJvcGFnYXRlZCB0aHJvdWdob3V0IHRoZSBhcHBsaWNhdGlvbi5cbiAqICAgQW5ndWxhciAyIGRvZXMgbm90IGFsbG93IHRoZSBgbmdEb0NoZWNrYCBob29rIHRvIHRyaWdnZXIgYSBjaGFuZ2Ugb3V0c2lkZSBvZiB0aGUgY29tcG9uZW50LiBJdCB3aWxsIGVpdGhlciB0aHJvdyBhblxuICogICBlcnJvciBvciBkbyBub3RoaW5nIGRlcGVuZGluZyB1cG9uIHRoZSBzdGF0ZSBvZiBgZW5hYmxlUHJvZE1vZGUoKWAuXG4gKlxuICogIyMjIyBMaWZlLWN5Y2xlIGhvb2sgZXhhbXBsZXNcbiAqXG4gKiBUaGlzIGV4YW1wbGUgc2hvd3MgaG93IHlvdSBjYW4gY2hlY2sgZm9yIG11dGF0aW9ucyB0byBhIERhdGUgb2JqZWN0IGV2ZW4gdGhvdWdoIHRoZSBpZGVudGl0eSBvZiB0aGUgb2JqZWN0XG4gKiBoYXMgbm90IGNoYW5nZWQuXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cImRvQ2hlY2tEYXRlRXhhbXBsZVwiIG1vZHVsZT1cImRvLWNoZWNrLW1vZHVsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgYW5ndWxhci5tb2R1bGUoJ2RvLWNoZWNrLW1vZHVsZScsIFtdKVxuICogICAgICAgLmNvbXBvbmVudCgnYXBwJywge1xuICogICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAnTW9udGg6IDxpbnB1dCBuZy1tb2RlbD1cIiRjdHJsLm1vbnRoXCIgbmctY2hhbmdlPVwiJGN0cmwudXBkYXRlRGF0ZSgpXCI+JyArXG4gKiAgICAgICAgICAgJ0RhdGU6IHt7ICRjdHJsLmRhdGUgfX0nICtcbiAqICAgICAgICAgICAnPHRlc3QgZGF0ZT1cIiRjdHJsLmRhdGVcIj48L3Rlc3Q+JyxcbiAqICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgdGhpcy5kYXRlID0gbmV3IERhdGUoKTtcbiAqICAgICAgICAgICB0aGlzLm1vbnRoID0gdGhpcy5kYXRlLmdldE1vbnRoKCk7XG4gKiAgICAgICAgICAgdGhpcy51cGRhdGVEYXRlID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICB0aGlzLmRhdGUuc2V0TW9udGgodGhpcy5tb250aCk7XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSlcbiAqICAgICAgIC5jb21wb25lbnQoJ3Rlc3QnLCB7XG4gKiAgICAgICAgIGJpbmRpbmdzOiB7IGRhdGU6ICc8JyB9LFxuICogICAgICAgICB0ZW1wbGF0ZTpcbiAqICAgICAgICAgICAnPHByZT57eyAkY3RybC5sb2cgfCBqc29uIH19PC9wcmU+JyxcbiAqICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWU7XG4gKiAgICAgICAgICAgdGhpcy5sb2cgPSBbXTtcbiAqICAgICAgICAgICB0aGlzLiRkb0NoZWNrID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy5kYXRlICYmIHRoaXMuZGF0ZS52YWx1ZU9mKCk7XG4gKiAgICAgICAgICAgICBpZiAocHJldmlvdXNWYWx1ZSAhPT0gY3VycmVudFZhbHVlKSB7XG4gKiAgICAgICAgICAgICAgIHRoaXMubG9nLnB1c2goJ2RvQ2hlY2s6IGRhdGUgbXV0YXRlZDogJyArIHRoaXMuZGF0ZSk7XG4gKiAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gKiAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgfTtcbiAqICAgICAgICAgfVxuICogICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8YXBwPjwvYXBwPlxuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogVGhpcyBleGFtcGxlIHNob3cgaG93IHlvdSBtaWdodCB1c2UgYCRkb0NoZWNrYCB0byB0cmlnZ2VyIGNoYW5nZXMgaW4geW91ciBjb21wb25lbnQncyBpbnB1dHMgZXZlbiBpZiB0aGVcbiAqIGFjdHVhbCBpZGVudGl0eSBvZiB0aGUgY29tcG9uZW50IGRvZXNuJ3QgY2hhbmdlLiAoQmUgYXdhcmUgdGhhdCBjbG9uaW5nIGFuZCBkZWVwIGVxdWFsaXR5IGNoZWNrcyBvbiBsYXJnZVxuICogYXJyYXlzIG9yIG9iamVjdHMgY2FuIGhhdmUgYSBuZWdhdGl2ZSBpbXBhY3Qgb24geW91ciBhcHBsaWNhdGlvbiBwZXJmb3JtYW5jZSlcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwiZG9DaGVja0FycmF5RXhhbXBsZVwiIG1vZHVsZT1cImRvLWNoZWNrLW1vZHVsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxkaXYgbmctaW5pdD1cIml0ZW1zID0gW11cIj5cbiAqICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJpdGVtcy5wdXNoKGl0ZW1zLmxlbmd0aClcIj5BZGQgSXRlbTwvYnV0dG9uPlxuICogICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIml0ZW1zID0gW11cIj5SZXNldCBJdGVtczwvYnV0dG9uPlxuICogICAgICAgPHByZT57eyBpdGVtcyB9fTwvcHJlPlxuICogICAgICAgPHRlc3QgaXRlbXM9XCJpdGVtc1wiPjwvdGVzdD5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgIGFuZ3VsYXIubW9kdWxlKCdkby1jaGVjay1tb2R1bGUnLCBbXSlcbiAqICAgICAgICAuY29tcG9uZW50KCd0ZXN0Jywge1xuICogICAgICAgICAgYmluZGluZ3M6IHsgaXRlbXM6ICc8JyB9LFxuICogICAgICAgICAgdGVtcGxhdGU6XG4gKiAgICAgICAgICAgICc8cHJlPnt7ICRjdHJsLmxvZyB8IGpzb24gfX08L3ByZT4nLFxuICogICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgIHRoaXMubG9nID0gW107XG4gKlxuICogICAgICAgICAgICB0aGlzLiRkb0NoZWNrID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgICAgICAgaWYgKHRoaXMuaXRlbXNfcmVmICE9PSB0aGlzLml0ZW1zKSB7XG4gKiAgICAgICAgICAgICAgICB0aGlzLmxvZy5wdXNoKCdkb0NoZWNrOiBpdGVtcyBjaGFuZ2VkJyk7XG4gKiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zX3JlZiA9IHRoaXMuaXRlbXM7XG4gKiAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICAgIGlmICghYW5ndWxhci5lcXVhbHModGhpcy5pdGVtc19jbG9uZSwgdGhpcy5pdGVtcykpIHtcbiAqICAgICAgICAgICAgICAgIHRoaXMubG9nLnB1c2goJ2RvQ2hlY2s6IGl0ZW1zIG11dGF0ZWQnKTtcbiAqICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNfY2xvbmUgPSBhbmd1bGFyLmNvcHkodGhpcy5pdGVtcyk7XG4gKiAgICAgICAgICAgICAgfVxuICogICAgICAgICAgICB9O1xuICogICAgICAgICAgfVxuICogICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqICMjIyBEaXJlY3RpdmUgRGVmaW5pdGlvbiBPYmplY3RcbiAqXG4gKiBUaGUgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0IHByb3ZpZGVzIGluc3RydWN0aW9ucyB0byB0aGUge0BsaW5rIG5nLiRjb21waWxlXG4gKiBjb21waWxlcn0uIFRoZSBhdHRyaWJ1dGVzIGFyZTpcbiAqXG4gKiAjIyMjIGBtdWx0aUVsZW1lbnRgXG4gKiBXaGVuIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIHRydWUgKGRlZmF1bHQgaXMgYGZhbHNlYCksIHRoZSBIVE1MIGNvbXBpbGVyIHdpbGwgY29sbGVjdCBET00gbm9kZXMgYmV0d2VlblxuICogbm9kZXMgd2l0aCB0aGUgYXR0cmlidXRlcyBgZGlyZWN0aXZlLW5hbWUtc3RhcnRgIGFuZCBgZGlyZWN0aXZlLW5hbWUtZW5kYCwgYW5kIGdyb3VwIHRoZW1cbiAqIHRvZ2V0aGVyIGFzIHRoZSBkaXJlY3RpdmUgZWxlbWVudHMuIEl0IGlzIHJlY29tbWVuZGVkIHRoYXQgdGhpcyBmZWF0dXJlIGJlIHVzZWQgb24gZGlyZWN0aXZlc1xuICogd2hpY2ggYXJlIG5vdCBzdHJpY3RseSBiZWhhdmlvcmFsIChzdWNoIGFzIHtAbGluayBuZ0NsaWNrfSksIGFuZCB3aGljaFxuICogZG8gbm90IG1hbmlwdWxhdGUgb3IgcmVwbGFjZSBjaGlsZCBub2RlcyAoc3VjaCBhcyB7QGxpbmsgbmdJbmNsdWRlfSkuXG4gKlxuICogIyMjIyBgcHJpb3JpdHlgXG4gKiBXaGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBkaXJlY3RpdmVzIGRlZmluZWQgb24gYSBzaW5nbGUgRE9NIGVsZW1lbnQsIHNvbWV0aW1lcyBpdFxuICogaXMgbmVjZXNzYXJ5IHRvIHNwZWNpZnkgdGhlIG9yZGVyIGluIHdoaWNoIHRoZSBkaXJlY3RpdmVzIGFyZSBhcHBsaWVkLiBUaGUgYHByaW9yaXR5YCBpcyB1c2VkXG4gKiB0byBzb3J0IHRoZSBkaXJlY3RpdmVzIGJlZm9yZSB0aGVpciBgY29tcGlsZWAgZnVuY3Rpb25zIGdldCBjYWxsZWQuIFByaW9yaXR5IGlzIGRlZmluZWQgYXMgYVxuICogbnVtYmVyLiBEaXJlY3RpdmVzIHdpdGggZ3JlYXRlciBudW1lcmljYWwgYHByaW9yaXR5YCBhcmUgY29tcGlsZWQgZmlyc3QuIFByZS1saW5rIGZ1bmN0aW9uc1xuICogYXJlIGFsc28gcnVuIGluIHByaW9yaXR5IG9yZGVyLCBidXQgcG9zdC1saW5rIGZ1bmN0aW9ucyBhcmUgcnVuIGluIHJldmVyc2Ugb3JkZXIuIFRoZSBvcmRlclxuICogb2YgZGlyZWN0aXZlcyB3aXRoIHRoZSBzYW1lIHByaW9yaXR5IGlzIHVuZGVmaW5lZC4gVGhlIGRlZmF1bHQgcHJpb3JpdHkgaXMgYDBgLlxuICpcbiAqICMjIyMgYHRlcm1pbmFsYFxuICogSWYgc2V0IHRvIHRydWUgdGhlbiB0aGUgY3VycmVudCBgcHJpb3JpdHlgIHdpbGwgYmUgdGhlIGxhc3Qgc2V0IG9mIGRpcmVjdGl2ZXNcbiAqIHdoaWNoIHdpbGwgZXhlY3V0ZSAoYW55IGRpcmVjdGl2ZXMgYXQgdGhlIGN1cnJlbnQgcHJpb3JpdHkgd2lsbCBzdGlsbCBleGVjdXRlXG4gKiBhcyB0aGUgb3JkZXIgb2YgZXhlY3V0aW9uIG9uIHNhbWUgYHByaW9yaXR5YCBpcyB1bmRlZmluZWQpLiBOb3RlIHRoYXQgZXhwcmVzc2lvbnNcbiAqIGFuZCBvdGhlciBkaXJlY3RpdmVzIHVzZWQgaW4gdGhlIGRpcmVjdGl2ZSdzIHRlbXBsYXRlIHdpbGwgYWxzbyBiZSBleGNsdWRlZCBmcm9tIGV4ZWN1dGlvbi5cbiAqXG4gKiAjIyMjIGBzY29wZWBcbiAqIFRoZSBzY29wZSBwcm9wZXJ0eSBjYW4gYmUgYGZhbHNlYCwgYHRydWVgLCBvciBhbiBvYmplY3Q6XG4gKlxuICogKiAqKmBmYWxzZWAgKGRlZmF1bHQpOioqIE5vIHNjb3BlIHdpbGwgYmUgY3JlYXRlZCBmb3IgdGhlIGRpcmVjdGl2ZS4gVGhlIGRpcmVjdGl2ZSB3aWxsIHVzZSBpdHNcbiAqIHBhcmVudCdzIHNjb3BlLlxuICpcbiAqICogKipgdHJ1ZWA6KiogQSBuZXcgY2hpbGQgc2NvcGUgdGhhdCBwcm90b3R5cGljYWxseSBpbmhlcml0cyBmcm9tIGl0cyBwYXJlbnQgd2lsbCBiZSBjcmVhdGVkIGZvclxuICogdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuIElmIG11bHRpcGxlIGRpcmVjdGl2ZXMgb24gdGhlIHNhbWUgZWxlbWVudCByZXF1ZXN0IGEgbmV3IHNjb3BlLFxuICogb25seSBvbmUgbmV3IHNjb3BlIGlzIGNyZWF0ZWQuXG4gKlxuICogKiAqKmB7Li4ufWAgKGFuIG9iamVjdCBoYXNoKToqKiBBIG5ldyBcImlzb2xhdGVcIiBzY29wZSBpcyBjcmVhdGVkIGZvciB0aGUgZGlyZWN0aXZlJ3MgdGVtcGxhdGUuXG4gKiBUaGUgJ2lzb2xhdGUnIHNjb3BlIGRpZmZlcnMgZnJvbSBub3JtYWwgc2NvcGUgaW4gdGhhdCBpdCBkb2VzIG5vdCBwcm90b3R5cGljYWxseVxuICogaW5oZXJpdCBmcm9tIGl0cyBwYXJlbnQgc2NvcGUuIFRoaXMgaXMgdXNlZnVsIHdoZW4gY3JlYXRpbmcgcmV1c2FibGUgY29tcG9uZW50cywgd2hpY2ggc2hvdWxkIG5vdFxuICogYWNjaWRlbnRhbGx5IHJlYWQgb3IgbW9kaWZ5IGRhdGEgaW4gdGhlIHBhcmVudCBzY29wZS4gTm90ZSB0aGF0IGFuIGlzb2xhdGUgc2NvcGVcbiAqIGRpcmVjdGl2ZSB3aXRob3V0IGEgYHRlbXBsYXRlYCBvciBgdGVtcGxhdGVVcmxgIHdpbGwgbm90IGFwcGx5IHRoZSBpc29sYXRlIHNjb3BlXG4gKiB0byBpdHMgY2hpbGRyZW4gZWxlbWVudHMuXG4gKlxuICogVGhlICdpc29sYXRlJyBzY29wZSBvYmplY3QgaGFzaCBkZWZpbmVzIGEgc2V0IG9mIGxvY2FsIHNjb3BlIHByb3BlcnRpZXMgZGVyaXZlZCBmcm9tIGF0dHJpYnV0ZXMgb24gdGhlXG4gKiBkaXJlY3RpdmUncyBlbGVtZW50LiBUaGVzZSBsb2NhbCBwcm9wZXJ0aWVzIGFyZSB1c2VmdWwgZm9yIGFsaWFzaW5nIHZhbHVlcyBmb3IgdGVtcGxhdGVzLiBUaGUga2V5cyBpblxuICogdGhlIG9iamVjdCBoYXNoIG1hcCB0byB0aGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgb24gdGhlIGlzb2xhdGUgc2NvcGU7IHRoZSB2YWx1ZXMgZGVmaW5lIGhvdyB0aGUgcHJvcGVydHlcbiAqIGlzIGJvdW5kIHRvIHRoZSBwYXJlbnQgc2NvcGUsIHZpYSBtYXRjaGluZyBhdHRyaWJ1dGVzIG9uIHRoZSBkaXJlY3RpdmUncyBlbGVtZW50OlxuICpcbiAqICogYEBgIG9yIGBAYXR0cmAgLSBiaW5kIGEgbG9jYWwgc2NvcGUgcHJvcGVydHkgdG8gdGhlIHZhbHVlIG9mIERPTSBhdHRyaWJ1dGUuIFRoZSByZXN1bHQgaXNcbiAqICAgYWx3YXlzIGEgc3RyaW5nIHNpbmNlIERPTSBhdHRyaWJ1dGVzIGFyZSBzdHJpbmdzLiBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGVcbiAqICAgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZS4gR2l2ZW4gYDxteS1jb21wb25lbnRcbiAqICAgbXktYXR0cj1cImhlbGxvIHt7bmFtZX19XCI+YCBhbmQgdGhlIGlzb2xhdGUgc2NvcGUgZGVmaW5pdGlvbiBgc2NvcGU6IHsgbG9jYWxOYW1lOidAbXlBdHRyJyB9YCxcbiAqICAgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIHByb3BlcnR5IGBsb2NhbE5hbWVgIHdpbGwgcmVmbGVjdCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIGBoZWxsb1xuICogICB7e25hbWV9fWAuIEFzIHRoZSBgbmFtZWAgYXR0cmlidXRlIGNoYW5nZXMgc28gd2lsbCB0aGUgYGxvY2FsTmFtZWAgcHJvcGVydHkgb24gdGhlIGRpcmVjdGl2ZSdzXG4gKiAgIHNjb3BlLiBUaGUgYG5hbWVgIGlzIHJlYWQgZnJvbSB0aGUgcGFyZW50IHNjb3BlIChub3QgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlKS5cbiAqXG4gKiAqIGA9YCBvciBgPWF0dHJgIC0gc2V0IHVwIGEgYmlkaXJlY3Rpb25hbCBiaW5kaW5nIGJldHdlZW4gYSBsb2NhbCBzY29wZSBwcm9wZXJ0eSBhbmQgYW4gZXhwcmVzc2lvblxuICogICBwYXNzZWQgdmlhIHRoZSBhdHRyaWJ1dGUgYGF0dHJgLiBUaGUgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQgaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS5cbiAqICAgSWYgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsXG4gKiAgIG5hbWUuIEdpdmVuIGA8bXktY29tcG9uZW50IG15LWF0dHI9XCJwYXJlbnRNb2RlbFwiPmAgYW5kIHRoZSBpc29sYXRlIHNjb3BlIGRlZmluaXRpb24gYHNjb3BlOiB7XG4gKiAgIGxvY2FsTW9kZWw6ICc9bXlBdHRyJyB9YCwgdGhlIHByb3BlcnR5IGBsb2NhbE1vZGVsYCBvbiB0aGUgZGlyZWN0aXZlJ3Mgc2NvcGUgd2lsbCByZWZsZWN0IHRoZVxuICogICB2YWx1ZSBvZiBgcGFyZW50TW9kZWxgIG9uIHRoZSBwYXJlbnQgc2NvcGUuIENoYW5nZXMgdG8gYHBhcmVudE1vZGVsYCB3aWxsIGJlIHJlZmxlY3RlZCBpblxuICogICBgbG9jYWxNb2RlbGAgYW5kIHZpY2UgdmVyc2EuIE9wdGlvbmFsIGF0dHJpYnV0ZXMgc2hvdWxkIGJlIG1hcmtlZCBhcyBzdWNoIHdpdGggYSBxdWVzdGlvbiBtYXJrOlxuICogICBgPT9gIG9yIGA9P2F0dHJgLiBJZiB0aGUgYmluZGluZyBleHByZXNzaW9uIGlzIG5vbi1hc3NpZ25hYmxlLCBvciBpZiB0aGUgYXR0cmlidXRlIGlzbid0XG4gKiAgIG9wdGlvbmFsIGFuZCBkb2Vzbid0IGV4aXN0LCBhbiBleGNlcHRpb24gKHtAbGluayBlcnJvci8kY29tcGlsZS9ub25hc3NpZ24gYCRjb21waWxlOm5vbmFzc2lnbmB9KVxuICogICB3aWxsIGJlIHRocm93biB1cG9uIGRpc2NvdmVyaW5nIGNoYW5nZXMgdG8gdGhlIGxvY2FsIHZhbHVlLCBzaW5jZSBpdCB3aWxsIGJlIGltcG9zc2libGUgdG8gc3luY1xuICogICB0aGVtIGJhY2sgdG8gdGhlIHBhcmVudCBzY29wZS4gQnkgZGVmYXVsdCwgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCBgJHdhdGNoYH1cbiAqICAgbWV0aG9kIGlzIHVzZWQgZm9yIHRyYWNraW5nIGNoYW5nZXMsIGFuZCB0aGUgZXF1YWxpdHkgY2hlY2sgaXMgYmFzZWQgb24gb2JqZWN0IGlkZW50aXR5LlxuICogICBIb3dldmVyLCBpZiBhbiBvYmplY3QgbGl0ZXJhbCBvciBhbiBhcnJheSBsaXRlcmFsIGlzIHBhc3NlZCBhcyB0aGUgYmluZGluZyBleHByZXNzaW9uLCB0aGVcbiAqICAgZXF1YWxpdHkgY2hlY2sgaXMgZG9uZSBieSB2YWx1ZSAodXNpbmcgdGhlIHtAbGluayBhbmd1bGFyLmVxdWFsc30gZnVuY3Rpb24pLiBJdCdzIGFsc28gcG9zc2libGVcbiAqICAgdG8gd2F0Y2ggdGhlIGV2YWx1YXRlZCB2YWx1ZSBzaGFsbG93bHkgd2l0aCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2hDb2xsZWN0aW9uXG4gKiAgIGAkd2F0Y2hDb2xsZWN0aW9uYH06IHVzZSBgPSpgIG9yIGA9KmF0dHJgIChgPSo/YCBvciBgPSo/YXR0cmAgaWYgdGhlIGF0dHJpYnV0ZSBpcyBvcHRpb25hbCkuXG4gKlxuICAqICogYDxgIG9yIGA8YXR0cmAgLSBzZXQgdXAgYSBvbmUtd2F5IChvbmUtZGlyZWN0aW9uYWwpIGJpbmRpbmcgYmV0d2VlbiBhIGxvY2FsIHNjb3BlIHByb3BlcnR5IGFuZCBhblxuICogICBleHByZXNzaW9uIHBhc3NlZCB2aWEgdGhlIGF0dHJpYnV0ZSBgYXR0cmAuIFRoZSBleHByZXNzaW9uIGlzIGV2YWx1YXRlZCBpbiB0aGUgY29udGV4dCBvZiB0aGVcbiAqICAgcGFyZW50IHNjb3BlLiBJZiBubyBgYXR0cmAgbmFtZSBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgYXR0cmlidXRlIG5hbWUgaXMgYXNzdW1lZCB0byBiZSB0aGUgc2FtZSBhcyB0aGVcbiAqICAgbG9jYWwgbmFtZS4gWW91IGNhbiBhbHNvIG1ha2UgdGhlIGJpbmRpbmcgb3B0aW9uYWwgYnkgYWRkaW5nIGA/YDogYDw/YCBvciBgPD9hdHRyYC5cbiAqXG4gKiAgIEZvciBleGFtcGxlLCBnaXZlbiBgPG15LWNvbXBvbmVudCBteS1hdHRyPVwicGFyZW50TW9kZWxcIj5gIGFuZCBkaXJlY3RpdmUgZGVmaW5pdGlvbiBvZlxuICogICBgc2NvcGU6IHsgbG9jYWxNb2RlbDonPG15QXR0cicgfWAsIHRoZW4gdGhlIGlzb2xhdGVkIHNjb3BlIHByb3BlcnR5IGBsb2NhbE1vZGVsYCB3aWxsIHJlZmxlY3QgdGhlXG4gKiAgIHZhbHVlIG9mIGBwYXJlbnRNb2RlbGAgb24gdGhlIHBhcmVudCBzY29wZS4gQW55IGNoYW5nZXMgdG8gYHBhcmVudE1vZGVsYCB3aWxsIGJlIHJlZmxlY3RlZFxuICogICBpbiBgbG9jYWxNb2RlbGAsIGJ1dCBjaGFuZ2VzIGluIGBsb2NhbE1vZGVsYCB3aWxsIG5vdCByZWZsZWN0IGluIGBwYXJlbnRNb2RlbGAuIFRoZXJlIGFyZSBob3dldmVyXG4gKiAgIHR3byBjYXZlYXRzOlxuICogICAgIDEuIG9uZS13YXkgYmluZGluZyBkb2VzIG5vdCBjb3B5IHRoZSB2YWx1ZSBmcm9tIHRoZSBwYXJlbnQgdG8gdGhlIGlzb2xhdGUgc2NvcGUsIGl0IHNpbXBseVxuICogICAgIHNldHMgdGhlIHNhbWUgdmFsdWUuIFRoYXQgbWVhbnMgaWYgeW91ciBib3VuZCB2YWx1ZSBpcyBhbiBvYmplY3QsIGNoYW5nZXMgdG8gaXRzIHByb3BlcnRpZXNcbiAqICAgICBpbiB0aGUgaXNvbGF0ZWQgc2NvcGUgd2lsbCBiZSByZWZsZWN0ZWQgaW4gdGhlIHBhcmVudCBzY29wZSAoYmVjYXVzZSBib3RoIHJlZmVyZW5jZSB0aGUgc2FtZSBvYmplY3QpLlxuICogICAgIDIuIG9uZS13YXkgYmluZGluZyB3YXRjaGVzIGNoYW5nZXMgdG8gdGhlICoqaWRlbnRpdHkqKiBvZiB0aGUgcGFyZW50IHZhbHVlLiBUaGF0IG1lYW5zIHRoZVxuICogICAgIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCBgJHdhdGNoYH0gb24gdGhlIHBhcmVudCB2YWx1ZSBvbmx5IGZpcmVzIGlmIHRoZSByZWZlcmVuY2VcbiAqICAgICB0byB0aGUgdmFsdWUgaGFzIGNoYW5nZWQuIEluIG1vc3QgY2FzZXMsIHRoaXMgc2hvdWxkIG5vdCBiZSBvZiBjb25jZXJuLCBidXQgY2FuIGJlIGltcG9ydGFudFxuICogICAgIHRvIGtub3cgaWYgeW91IG9uZS13YXkgYmluZCB0byBhbiBvYmplY3QsIGFuZCB0aGVuIHJlcGxhY2UgdGhhdCBvYmplY3QgaW4gdGhlIGlzb2xhdGVkIHNjb3BlLlxuICogICAgIElmIHlvdSBub3cgY2hhbmdlIGEgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBpbiB5b3VyIHBhcmVudCBzY29wZSwgdGhlIGNoYW5nZSB3aWxsIG5vdCBiZVxuICogICAgIHByb3BhZ2F0ZWQgdG8gdGhlIGlzb2xhdGVkIHNjb3BlLCBiZWNhdXNlIHRoZSBpZGVudGl0eSBvZiB0aGUgb2JqZWN0IG9uIHRoZSBwYXJlbnQgc2NvcGVcbiAqICAgICBoYXMgbm90IGNoYW5nZWQuIEluc3RlYWQgeW91IG11c3QgYXNzaWduIGEgbmV3IG9iamVjdC5cbiAqXG4gKiAgIE9uZS13YXkgYmluZGluZyBpcyB1c2VmdWwgaWYgeW91IGRvIG5vdCBwbGFuIHRvIHByb3BhZ2F0ZSBjaGFuZ2VzIHRvIHlvdXIgaXNvbGF0ZWQgc2NvcGUgYmluZGluZ3NcbiAqICAgYmFjayB0byB0aGUgcGFyZW50LiBIb3dldmVyLCBpdCBkb2VzIG5vdCBtYWtlIHRoaXMgY29tcGxldGVseSBpbXBvc3NpYmxlLlxuICpcbiAqICogYCZgIG9yIGAmYXR0cmAgLSBwcm92aWRlcyBhIHdheSB0byBleGVjdXRlIGFuIGV4cHJlc3Npb24gaW4gdGhlIGNvbnRleHQgb2YgdGhlIHBhcmVudCBzY29wZS4gSWZcbiAqICAgbm8gYGF0dHJgIG5hbWUgaXMgc3BlY2lmaWVkIHRoZW4gdGhlIGF0dHJpYnV0ZSBuYW1lIGlzIGFzc3VtZWQgdG8gYmUgdGhlIHNhbWUgYXMgdGhlIGxvY2FsIG5hbWUuXG4gKiAgIEdpdmVuIGA8bXktY29tcG9uZW50IG15LWF0dHI9XCJjb3VudCA9IGNvdW50ICsgdmFsdWVcIj5gIGFuZCB0aGUgaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uIGBzY29wZToge1xuICogICBsb2NhbEZuOicmbXlBdHRyJyB9YCwgdGhlIGlzb2xhdGUgc2NvcGUgcHJvcGVydHkgYGxvY2FsRm5gIHdpbGwgcG9pbnQgdG8gYSBmdW5jdGlvbiB3cmFwcGVyIGZvclxuICogICB0aGUgYGNvdW50ID0gY291bnQgKyB2YWx1ZWAgZXhwcmVzc2lvbi4gT2Z0ZW4gaXQncyBkZXNpcmFibGUgdG8gcGFzcyBkYXRhIGZyb20gdGhlIGlzb2xhdGVkIHNjb3BlXG4gKiAgIHZpYSBhbiBleHByZXNzaW9uIHRvIHRoZSBwYXJlbnQgc2NvcGUuIFRoaXMgY2FuIGJlIGRvbmUgYnkgcGFzc2luZyBhIG1hcCBvZiBsb2NhbCB2YXJpYWJsZSBuYW1lc1xuICogICBhbmQgdmFsdWVzIGludG8gdGhlIGV4cHJlc3Npb24gd3JhcHBlciBmbi4gRm9yIGV4YW1wbGUsIGlmIHRoZSBleHByZXNzaW9uIGlzIGBpbmNyZW1lbnQoYW1vdW50KWBcbiAqICAgdGhlbiB3ZSBjYW4gc3BlY2lmeSB0aGUgYW1vdW50IHZhbHVlIGJ5IGNhbGxpbmcgdGhlIGBsb2NhbEZuYCBhcyBgbG9jYWxGbih7YW1vdW50OiAyMn0pYC5cbiAqXG4gKiBJbiBnZW5lcmFsIGl0J3MgcG9zc2libGUgdG8gYXBwbHkgbW9yZSB0aGFuIG9uZSBkaXJlY3RpdmUgdG8gb25lIGVsZW1lbnQsIGJ1dCB0aGVyZSBtaWdodCBiZSBsaW1pdGF0aW9uc1xuICogZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIHNjb3BlIHJlcXVpcmVkIGJ5IHRoZSBkaXJlY3RpdmVzLiBUaGUgZm9sbG93aW5nIHBvaW50cyB3aWxsIGhlbHAgZXhwbGFpbiB0aGVzZSBsaW1pdGF0aW9ucy5cbiAqIEZvciBzaW1wbGljaXR5IG9ubHkgdHdvIGRpcmVjdGl2ZXMgYXJlIHRha2VuIGludG8gYWNjb3VudCwgYnV0IGl0IGlzIGFsc28gYXBwbGljYWJsZSBmb3Igc2V2ZXJhbCBkaXJlY3RpdmVzOlxuICpcbiAqICogKipubyBzY29wZSoqICsgKipubyBzY29wZSoqID0+IFR3byBkaXJlY3RpdmVzIHdoaWNoIGRvbid0IHJlcXVpcmUgdGhlaXIgb3duIHNjb3BlIHdpbGwgdXNlIHRoZWlyIHBhcmVudCdzIHNjb3BlXG4gKiAqICoqY2hpbGQgc2NvcGUqKiArICoqbm8gc2NvcGUqKiA9PiAgQm90aCBkaXJlY3RpdmVzIHdpbGwgc2hhcmUgb25lIHNpbmdsZSBjaGlsZCBzY29wZVxuICogKiAqKmNoaWxkIHNjb3BlKiogKyAqKmNoaWxkIHNjb3BlKiogPT4gIEJvdGggZGlyZWN0aXZlcyB3aWxsIHNoYXJlIG9uZSBzaW5nbGUgY2hpbGQgc2NvcGVcbiAqICogKippc29sYXRlZCBzY29wZSoqICsgKipubyBzY29wZSoqID0+ICBUaGUgaXNvbGF0ZWQgZGlyZWN0aXZlIHdpbGwgdXNlIGl0J3Mgb3duIGNyZWF0ZWQgaXNvbGF0ZWQgc2NvcGUuIFRoZSBvdGhlciBkaXJlY3RpdmUgd2lsbCB1c2VcbiAqIGl0cyBwYXJlbnQncyBzY29wZVxuICogKiAqKmlzb2xhdGVkIHNjb3BlKiogKyAqKmNoaWxkIHNjb3BlKiogPT4gICoqV29uJ3Qgd29yayEqKiBPbmx5IG9uZSBzY29wZSBjYW4gYmUgcmVsYXRlZCB0byBvbmUgZWxlbWVudC4gVGhlcmVmb3JlIHRoZXNlIGRpcmVjdGl2ZXMgY2Fubm90XG4gKiBiZSBhcHBsaWVkIHRvIHRoZSBzYW1lIGVsZW1lbnQuXG4gKiAqICoqaXNvbGF0ZWQgc2NvcGUqKiArICoqaXNvbGF0ZWQgc2NvcGUqKiAgPT4gICoqV29uJ3Qgd29yayEqKiBPbmx5IG9uZSBzY29wZSBjYW4gYmUgcmVsYXRlZCB0byBvbmUgZWxlbWVudC4gVGhlcmVmb3JlIHRoZXNlIGRpcmVjdGl2ZXNcbiAqIGNhbm5vdCBiZSBhcHBsaWVkIHRvIHRoZSBzYW1lIGVsZW1lbnQuXG4gKlxuICpcbiAqICMjIyMgYGJpbmRUb0NvbnRyb2xsZXJgXG4gKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgdG8gYmluZCBzY29wZSBwcm9wZXJ0aWVzIGRpcmVjdGx5IHRvIHRoZSBjb250cm9sbGVyLiBJdCBjYW4gYmUgZWl0aGVyXG4gKiBgdHJ1ZWAgb3IgYW4gb2JqZWN0IGhhc2ggd2l0aCB0aGUgc2FtZSBmb3JtYXQgYXMgdGhlIGBzY29wZWAgcHJvcGVydHkuXG4gKlxuICogV2hlbiBhbiBpc29sYXRlIHNjb3BlIGlzIHVzZWQgZm9yIGEgZGlyZWN0aXZlIChzZWUgYWJvdmUpLCBgYmluZFRvQ29udHJvbGxlcjogdHJ1ZWAgd2lsbFxuICogYWxsb3cgYSBjb21wb25lbnQgdG8gaGF2ZSBpdHMgcHJvcGVydGllcyBib3VuZCB0byB0aGUgY29udHJvbGxlciwgcmF0aGVyIHRoYW4gdG8gc2NvcGUuXG4gKlxuICogQWZ0ZXIgdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkLCB0aGUgaW5pdGlhbCB2YWx1ZXMgb2YgdGhlIGlzb2xhdGUgc2NvcGUgYmluZGluZ3Mgd2lsbCBiZSBib3VuZCB0byB0aGUgY29udHJvbGxlclxuICogcHJvcGVydGllcy4gWW91IGNhbiBhY2Nlc3MgdGhlc2UgYmluZGluZ3Mgb25jZSB0aGV5IGhhdmUgYmVlbiBpbml0aWFsaXplZCBieSBwcm92aWRpbmcgYSBjb250cm9sbGVyIG1ldGhvZCBjYWxsZWRcbiAqIGAkb25Jbml0YCwgd2hpY2ggaXMgY2FsbGVkIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnMgb24gYW4gZWxlbWVudCBoYXZlIGJlZW4gY29uc3RydWN0ZWQgYW5kIGhhZCB0aGVpciBiaW5kaW5nc1xuICogaW5pdGlhbGl6ZWQuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqRGVwcmVjYXRpb24gd2FybmluZzoqKiBpZiBgJGNvbXBpbGVQcm9jdmlkZXIucHJlQXNzaWduQmluZGluZ3NFbmFibGVkKHRydWUpYCB3YXMgY2FsbGVkLCBiaW5kaW5ncyBmb3Igbm9uLUVTNiBjbGFzc1xuICogY29udHJvbGxlcnMgYXJlIGJvdW5kIHRvIGB0aGlzYCBiZWZvcmUgdGhlIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgaXMgY2FsbGVkIGJ1dCB0aGlzIHVzZSBpcyBub3cgZGVwcmVjYXRlZC4gUGxlYXNlXG4gKiBwbGFjZSBpbml0aWFsaXphdGlvbiBjb2RlIHRoYXQgcmVsaWVzIHVwb24gYmluZGluZ3MgaW5zaWRlIGEgYCRvbkluaXRgIG1ldGhvZCBvbiB0aGUgY29udHJvbGxlciwgaW5zdGVhZC5cbiAqIDwvZGl2PlxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gc2V0IGBiaW5kVG9Db250cm9sbGVyYCB0byBhbiBvYmplY3QgaGFzaCB3aXRoIHRoZSBzYW1lIGZvcm1hdCBhcyB0aGUgYHNjb3BlYCBwcm9wZXJ0eS5cbiAqIFRoaXMgd2lsbCBzZXQgdXAgdGhlIHNjb3BlIGJpbmRpbmdzIHRvIHRoZSBjb250cm9sbGVyIGRpcmVjdGx5LiBOb3RlIHRoYXQgYHNjb3BlYCBjYW4gc3RpbGwgYmUgdXNlZFxuICogdG8gZGVmaW5lIHdoaWNoIGtpbmQgb2Ygc2NvcGUgaXMgY3JlYXRlZC4gQnkgZGVmYXVsdCwgbm8gc2NvcGUgaXMgY3JlYXRlZC4gVXNlIGBzY29wZToge31gIHRvIGNyZWF0ZSBhbiBpc29sYXRlXG4gKiBzY29wZSAodXNlZnVsIGZvciBjb21wb25lbnQgZGlyZWN0aXZlcykuXG4gKlxuICogSWYgYm90aCBgYmluZFRvQ29udHJvbGxlcmAgYW5kIGBzY29wZWAgYXJlIGRlZmluZWQgYW5kIGhhdmUgb2JqZWN0IGhhc2hlcywgYGJpbmRUb0NvbnRyb2xsZXJgIG92ZXJyaWRlcyBgc2NvcGVgLlxuICpcbiAqXG4gKiAjIyMjIGBjb250cm9sbGVyYFxuICogQ29udHJvbGxlciBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gVGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGJlZm9yZSB0aGVcbiAqIHByZS1saW5raW5nIHBoYXNlIGFuZCBjYW4gYmUgYWNjZXNzZWQgYnkgb3RoZXIgZGlyZWN0aXZlcyAoc2VlXG4gKiBgcmVxdWlyZWAgYXR0cmlidXRlKS4gVGhpcyBhbGxvd3MgdGhlIGRpcmVjdGl2ZXMgdG8gY29tbXVuaWNhdGUgd2l0aCBlYWNoIG90aGVyIGFuZCBhdWdtZW50XG4gKiBlYWNoIG90aGVyJ3MgYmVoYXZpb3IuIFRoZSBjb250cm9sbGVyIGlzIGluamVjdGFibGUgKGFuZCBzdXBwb3J0cyBicmFja2V0IG5vdGF0aW9uKSB3aXRoIHRoZSBmb2xsb3dpbmcgbG9jYWxzOlxuICpcbiAqICogYCRzY29wZWAgLSBDdXJyZW50IHNjb3BlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudFxuICogKiBgJGVsZW1lbnRgIC0gQ3VycmVudCBlbGVtZW50XG4gKiAqIGAkYXR0cnNgIC0gQ3VycmVudCBhdHRyaWJ1dGVzIG9iamVjdCBmb3IgdGhlIGVsZW1lbnRcbiAqICogYCR0cmFuc2NsdWRlYCAtIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uIHByZS1ib3VuZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGU6XG4gKiAgIGBmdW5jdGlvbihbc2NvcGVdLCBjbG9uZUxpbmtpbmdGbiwgZnV0dXJlUGFyZW50RWxlbWVudCwgc2xvdE5hbWUpYDpcbiAqICAgICogYHNjb3BlYDogKG9wdGlvbmFsKSBvdmVycmlkZSB0aGUgc2NvcGUuXG4gKiAgICAqIGBjbG9uZUxpbmtpbmdGbmA6IChvcHRpb25hbCkgYXJndW1lbnQgdG8gY3JlYXRlIGNsb25lcyBvZiB0aGUgb3JpZ2luYWwgdHJhbnNjbHVkZWQgY29udGVudC5cbiAqICAgICogYGZ1dHVyZVBhcmVudEVsZW1lbnRgIChvcHRpb25hbCk6XG4gKiAgICAgICAgKiBkZWZpbmVzIHRoZSBwYXJlbnQgdG8gd2hpY2ggdGhlIGBjbG9uZUxpbmtpbmdGbmAgd2lsbCBhZGQgdGhlIGNsb25lZCBlbGVtZW50cy5cbiAqICAgICAgICAqIGRlZmF1bHQ6IGAkZWxlbWVudC5wYXJlbnQoKWAgcmVzcC4gYCRlbGVtZW50YCBmb3IgYHRyYW5zY2x1ZGU6J2VsZW1lbnQnYCByZXNwLiBgdHJhbnNjbHVkZTp0cnVlYC5cbiAqICAgICAgICAqIG9ubHkgbmVlZGVkIGZvciB0cmFuc2NsdWRlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIGNvbnRhaW4gbm9uIGh0bWwgZWxlbWVudHMgKGUuZy4gU1ZHIGVsZW1lbnRzKVxuICogICAgICAgICAgYW5kIHdoZW4gdGhlIGBjbG9uZUxpbmtpbmdGbmAgaXMgcGFzc2VkLFxuICogICAgICAgICAgYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBjcmVhdGVkIGFuZCBjbG9uZWQgaW4gYSBzcGVjaWFsIHdheSB3aGVuIHRoZXkgYXJlIGRlZmluZWQgb3V0c2lkZSB0aGVpclxuICogICAgICAgICAgdXN1YWwgY29udGFpbmVycyAoZS5nLiBsaWtlIGA8c3ZnPmApLlxuICogICAgICAgICogU2VlIGFsc28gdGhlIGBkaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2VgIHByb3BlcnR5LlxuICogICAgKiBgc2xvdE5hbWVgOiAob3B0aW9uYWwpIHRoZSBuYW1lIG9mIHRoZSBzbG90IHRvIHRyYW5zY2x1ZGUuIElmIGZhbHN5IChlLmcuIGBudWxsYCwgYHVuZGVmaW5lZGAgb3IgYCcnYClcbiAqICAgICAgdGhlbiB0aGUgZGVmYXVsdCB0cmFuc2NsdXNpb24gaXMgcHJvdmlkZWQuXG4gKiAgICBUaGUgYCR0cmFuc2NsdWRlYCBmdW5jdGlvbiBhbHNvIGhhcyBhIG1ldGhvZCBvbiBpdCwgYCR0cmFuc2NsdWRlLmlzU2xvdEZpbGxlZChzbG90TmFtZSlgLCB3aGljaCByZXR1cm5zXG4gKiAgICBgdHJ1ZWAgaWYgdGhlIHNwZWNpZmllZCBzbG90IGNvbnRhaW5zIGNvbnRlbnQgKGkuZS4gb25lIG9yIG1vcmUgRE9NIG5vZGVzKS5cbiAqXG4gKiAjIyMjIGByZXF1aXJlYFxuICogUmVxdWlyZSBhbm90aGVyIGRpcmVjdGl2ZSBhbmQgaW5qZWN0IGl0cyBjb250cm9sbGVyIGFzIHRoZSBmb3VydGggYXJndW1lbnQgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZVxuICogYHJlcXVpcmVgIHByb3BlcnR5IGNhbiBiZSBhIHN0cmluZywgYW4gYXJyYXkgb3IgYW4gb2JqZWN0OlxuICogKiBhICoqc3RyaW5nKiogY29udGFpbmluZyB0aGUgbmFtZSBvZiB0aGUgZGlyZWN0aXZlIHRvIHBhc3MgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb25cbiAqICogYW4gKiphcnJheSoqIGNvbnRhaW5pbmcgdGhlIG5hbWVzIG9mIGRpcmVjdGl2ZXMgdG8gcGFzcyB0byB0aGUgbGlua2luZyBmdW5jdGlvbi4gVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGVcbiAqIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBiZSBhbiBhcnJheSBvZiBjb250cm9sbGVycyBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgbmFtZXMgaW4gdGhlIGByZXF1aXJlYCBwcm9wZXJ0eVxuICogKiBhbiAqKm9iamVjdCoqIHdob3NlIHByb3BlcnR5IHZhbHVlcyBhcmUgdGhlIG5hbWVzIG9mIHRoZSBkaXJlY3RpdmVzIHRvIHBhc3MgdG8gdGhlIGxpbmtpbmcgZnVuY3Rpb24uIFRoZSBhcmd1bWVudFxuICogcGFzc2VkIHRvIHRoZSBsaW5raW5nIGZ1bmN0aW9uIHdpbGwgYWxzbyBiZSBhbiBvYmplY3Qgd2l0aCBtYXRjaGluZyBrZXlzLCB3aG9zZSB2YWx1ZXMgd2lsbCBob2xkIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBjb250cm9sbGVycy5cbiAqXG4gKiBJZiB0aGUgYHJlcXVpcmVgIHByb3BlcnR5IGlzIGFuIG9iamVjdCBhbmQgYGJpbmRUb0NvbnRyb2xsZXJgIGlzIHRydXRoeSwgdGhlbiB0aGUgcmVxdWlyZWQgY29udHJvbGxlcnMgYXJlXG4gKiBib3VuZCB0byB0aGUgY29udHJvbGxlciB1c2luZyB0aGUga2V5cyBvZiB0aGUgYHJlcXVpcmVgIHByb3BlcnR5LiBUaGlzIGJpbmRpbmcgb2NjdXJzIGFmdGVyIGFsbCB0aGUgY29udHJvbGxlcnNcbiAqIGhhdmUgYmVlbiBjb25zdHJ1Y3RlZCBidXQgYmVmb3JlIGAkb25Jbml0YCBpcyBjYWxsZWQuXG4gKiBJZiB0aGUgbmFtZSBvZiB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBpcyB0aGUgc2FtZSBhcyB0aGUgbG9jYWwgbmFtZSAodGhlIGtleSksIHRoZSBuYW1lIGNhbiBiZVxuICogb21pdHRlZC4gRm9yIGV4YW1wbGUsIGB7cGFyZW50RGlyOiAnXl4nfWAgaXMgZXF1aXZhbGVudCB0byBge3BhcmVudERpcjogJ15ecGFyZW50RGlyJ31gLlxuICogU2VlIHRoZSB7QGxpbmsgJGNvbXBpbGVQcm92aWRlciNjb21wb25lbnR9IGhlbHBlciBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdGhpcyBjYW4gYmUgdXNlZC5cbiAqIElmIG5vIHN1Y2ggcmVxdWlyZWQgZGlyZWN0aXZlKHMpIGNhbiBiZSBmb3VuZCwgb3IgaWYgdGhlIGRpcmVjdGl2ZSBkb2VzIG5vdCBoYXZlIGEgY29udHJvbGxlciwgdGhlbiBhbiBlcnJvciBpc1xuICogcmFpc2VkICh1bmxlc3Mgbm8gbGluayBmdW5jdGlvbiBpcyBzcGVjaWZpZWQgYW5kIHRoZSByZXF1aXJlZCBjb250cm9sbGVycyBhcmUgbm90IGJlaW5nIGJvdW5kIHRvIHRoZSBkaXJlY3RpdmVcbiAqIGNvbnRyb2xsZXIsIGluIHdoaWNoIGNhc2UgZXJyb3IgY2hlY2tpbmcgaXMgc2tpcHBlZCkuIFRoZSBuYW1lIGNhbiBiZSBwcmVmaXhlZCB3aXRoOlxuICpcbiAqICogKG5vIHByZWZpeCkgLSBMb2NhdGUgdGhlIHJlcXVpcmVkIGNvbnRyb2xsZXIgb24gdGhlIGN1cnJlbnQgZWxlbWVudC4gVGhyb3cgYW4gZXJyb3IgaWYgbm90IGZvdW5kLlxuICogKiBgP2AgLSBBdHRlbXB0IHRvIGxvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBvciBwYXNzIGBudWxsYCB0byB0aGUgYGxpbmtgIGZuIGlmIG5vdCBmb3VuZC5cbiAqICogYF5gIC0gTG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCBhbmQgaXRzIHBhcmVudHMuIFRocm93IGFuIGVycm9yIGlmIG5vdCBmb3VuZC5cbiAqICogYF5eYCAtIExvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQncyBwYXJlbnRzLiBUaHJvdyBhbiBlcnJvciBpZiBub3QgZm91bmQuXG4gKiAqIGA/XmAgLSBBdHRlbXB0IHRvIGxvY2F0ZSB0aGUgcmVxdWlyZWQgY29udHJvbGxlciBieSBzZWFyY2hpbmcgdGhlIGVsZW1lbnQgYW5kIGl0cyBwYXJlbnRzIG9yIHBhc3NcbiAqICAgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxuICogKiBgP15eYCAtIEF0dGVtcHQgdG8gbG9jYXRlIHRoZSByZXF1aXJlZCBjb250cm9sbGVyIGJ5IHNlYXJjaGluZyB0aGUgZWxlbWVudCdzIHBhcmVudHMsIG9yIHBhc3NcbiAqICAgYG51bGxgIHRvIHRoZSBgbGlua2AgZm4gaWYgbm90IGZvdW5kLlxuICpcbiAqXG4gKiAjIyMjIGBjb250cm9sbGVyQXNgXG4gKiBJZGVudGlmaWVyIG5hbWUgZm9yIGEgcmVmZXJlbmNlIHRvIHRoZSBjb250cm9sbGVyIGluIHRoZSBkaXJlY3RpdmUncyBzY29wZS5cbiAqIFRoaXMgYWxsb3dzIHRoZSBjb250cm9sbGVyIHRvIGJlIHJlZmVyZW5jZWQgZnJvbSB0aGUgZGlyZWN0aXZlIHRlbXBsYXRlLiBUaGlzIGlzIGVzcGVjaWFsbHlcbiAqIHVzZWZ1bCB3aGVuIGEgZGlyZWN0aXZlIGlzIHVzZWQgYXMgY29tcG9uZW50LCBpLmUuIHdpdGggYW4gYGlzb2xhdGVgIHNjb3BlLiBJdCdzIGFsc28gcG9zc2libGVcbiAqIHRvIHVzZSBpdCBpbiBhIGRpcmVjdGl2ZSB3aXRob3V0IGFuIGBpc29sYXRlYCAvIGBuZXdgIHNjb3BlLCBidXQgeW91IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGVcbiAqIGBjb250cm9sbGVyQXNgIHJlZmVyZW5jZSBtaWdodCBvdmVyd3JpdGUgYSBwcm9wZXJ0eSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBwYXJlbnQgc2NvcGUuXG4gKlxuICpcbiAqICMjIyMgYHJlc3RyaWN0YFxuICogU3RyaW5nIG9mIHN1YnNldCBvZiBgRUFDTWAgd2hpY2ggcmVzdHJpY3RzIHRoZSBkaXJlY3RpdmUgdG8gYSBzcGVjaWZpYyBkaXJlY3RpdmVcbiAqIGRlY2xhcmF0aW9uIHN0eWxlLiBJZiBvbWl0dGVkLCB0aGUgZGVmYXVsdHMgKGVsZW1lbnRzIGFuZCBhdHRyaWJ1dGVzKSBhcmUgdXNlZC5cbiAqXG4gKiAqIGBFYCAtIEVsZW1lbnQgbmFtZSAoZGVmYXVsdCk6IGA8bXktZGlyZWN0aXZlPjwvbXktZGlyZWN0aXZlPmBcbiAqICogYEFgIC0gQXR0cmlidXRlIChkZWZhdWx0KTogYDxkaXYgbXktZGlyZWN0aXZlPVwiZXhwXCI+PC9kaXY+YFxuICogKiBgQ2AgLSBDbGFzczogYDxkaXYgY2xhc3M9XCJteS1kaXJlY3RpdmU6IGV4cDtcIj48L2Rpdj5gXG4gKiAqIGBNYCAtIENvbW1lbnQ6IGA8IS0tIGRpcmVjdGl2ZTogbXktZGlyZWN0aXZlIGV4cCAtLT5gXG4gKlxuICpcbiAqICMjIyMgYHRlbXBsYXRlTmFtZXNwYWNlYFxuICogU3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZG9jdW1lbnQgdHlwZSB1c2VkIGJ5IHRoZSBtYXJrdXAgaW4gdGhlIHRlbXBsYXRlLlxuICogQW5ndWxhckpTIG5lZWRzIHRoaXMgaW5mb3JtYXRpb24gYXMgdGhvc2UgZWxlbWVudHMgbmVlZCB0byBiZSBjcmVhdGVkIGFuZCBjbG9uZWRcbiAqIGluIGEgc3BlY2lhbCB3YXkgd2hlbiB0aGV5IGFyZSBkZWZpbmVkIG91dHNpZGUgdGhlaXIgdXN1YWwgY29udGFpbmVycyBsaWtlIGA8c3ZnPmAgYW5kIGA8bWF0aD5gLlxuICpcbiAqICogYGh0bWxgIC0gQWxsIHJvb3Qgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIGFyZSBIVE1MLiBSb290IG5vZGVzIG1heSBhbHNvIGJlXG4gKiAgIHRvcC1sZXZlbCBlbGVtZW50cyBzdWNoIGFzIGA8c3ZnPmAgb3IgYDxtYXRoPmAuXG4gKiAqIGBzdmdgIC0gVGhlIHJvb3Qgbm9kZXMgaW4gdGhlIHRlbXBsYXRlIGFyZSBTVkcgZWxlbWVudHMgKGV4Y2x1ZGluZyBgPG1hdGg+YCkuXG4gKiAqIGBtYXRoYCAtIFRoZSByb290IG5vZGVzIGluIHRoZSB0ZW1wbGF0ZSBhcmUgTWF0aE1MIGVsZW1lbnRzIChleGNsdWRpbmcgYDxzdmc+YCkuXG4gKlxuICogSWYgbm8gYHRlbXBsYXRlTmFtZXNwYWNlYCBpcyBzcGVjaWZpZWQsIHRoZW4gdGhlIG5hbWVzcGFjZSBpcyBjb25zaWRlcmVkIHRvIGJlIGBodG1sYC5cbiAqXG4gKiAjIyMjIGB0ZW1wbGF0ZWBcbiAqIEhUTUwgbWFya3VwIHRoYXQgbWF5OlxuICogKiBSZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCAoZGVmYXVsdCkuXG4gKiAqIFJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQgaXRzZWxmIChpZiBgcmVwbGFjZWAgaXMgdHJ1ZSAtIERFUFJFQ0FURUQpLlxuICogKiBXcmFwIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCAoaWYgYHRyYW5zY2x1ZGVgIGlzIHRydWUpLlxuICpcbiAqIFZhbHVlIG1heSBiZTpcbiAqXG4gKiAqIEEgc3RyaW5nLiBGb3IgZXhhbXBsZSBgPGRpdiByZWQtb24taG92ZXI+e3tkZWxldGVfc3RyfX08L2Rpdj5gLlxuICogKiBBIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHR3byBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgXG4gKiAgIGZ1bmN0aW9uIGFwaSBiZWxvdykgYW5kIHJldHVybnMgYSBzdHJpbmcgdmFsdWUuXG4gKlxuICpcbiAqICMjIyMgYHRlbXBsYXRlVXJsYFxuICogVGhpcyBpcyBzaW1pbGFyIHRvIGB0ZW1wbGF0ZWAgYnV0IHRoZSB0ZW1wbGF0ZSBpcyBsb2FkZWQgZnJvbSB0aGUgc3BlY2lmaWVkIFVSTCwgYXN5bmNocm9ub3VzbHkuXG4gKlxuICogQmVjYXVzZSB0ZW1wbGF0ZSBsb2FkaW5nIGlzIGFzeW5jaHJvbm91cyB0aGUgY29tcGlsZXIgd2lsbCBzdXNwZW5kIGNvbXBpbGF0aW9uIG9mIGRpcmVjdGl2ZXMgb24gdGhhdCBlbGVtZW50XG4gKiBmb3IgbGF0ZXIgd2hlbiB0aGUgdGVtcGxhdGUgaGFzIGJlZW4gcmVzb2x2ZWQuICBJbiB0aGUgbWVhbnRpbWUgaXQgd2lsbCBjb250aW51ZSB0byBjb21waWxlIGFuZCBsaW5rXG4gKiBzaWJsaW5nIGFuZCBwYXJlbnQgZWxlbWVudHMgYXMgdGhvdWdoIHRoaXMgZWxlbWVudCBoYWQgbm90IGNvbnRhaW5lZCBhbnkgZGlyZWN0aXZlcy5cbiAqXG4gKiBUaGUgY29tcGlsZXIgZG9lcyBub3Qgc3VzcGVuZCB0aGUgZW50aXJlIGNvbXBpbGF0aW9uIHRvIHdhaXQgZm9yIHRlbXBsYXRlcyB0byBiZSBsb2FkZWQgYmVjYXVzZSB0aGlzXG4gKiB3b3VsZCByZXN1bHQgaW4gdGhlIHdob2xlIGFwcCBcInN0YWxsaW5nXCIgdW50aWwgYWxsIHRlbXBsYXRlcyBhcmUgbG9hZGVkIGFzeW5jaHJvbm91c2x5IC0gZXZlbiBpbiB0aGVcbiAqIGNhc2Ugd2hlbiBvbmx5IG9uZSBkZWVwbHkgbmVzdGVkIGRpcmVjdGl2ZSBoYXMgYHRlbXBsYXRlVXJsYC5cbiAqXG4gKiBUZW1wbGF0ZSBsb2FkaW5nIGlzIGFzeW5jaHJvbm91cyBldmVuIGlmIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiBwcmVsb2FkZWQgaW50byB0aGUge0BsaW5rICR0ZW1wbGF0ZUNhY2hlfVxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSBgdGVtcGxhdGVVcmxgIGFzIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgVVJMIG9yIGFzIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgdHdvXG4gKiBhcmd1bWVudHMgYHRFbGVtZW50YCBhbmQgYHRBdHRyc2AgKGRlc2NyaWJlZCBpbiB0aGUgYGNvbXBpbGVgIGZ1bmN0aW9uIGFwaSBiZWxvdykgYW5kIHJldHVybnNcbiAqIGEgc3RyaW5nIHZhbHVlIHJlcHJlc2VudGluZyB0aGUgdXJsLiAgSW4gZWl0aGVyIGNhc2UsIHRoZSB0ZW1wbGF0ZSBVUkwgaXMgcGFzc2VkIHRocm91Z2gge0BsaW5rXG4gKiAkc2NlI2dldFRydXN0ZWRSZXNvdXJjZVVybCAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybH0uXG4gKlxuICpcbiAqICMjIyMgYHJlcGxhY2VgICgqREVQUkVDQVRFRCopXG4gKlxuICogYHJlcGxhY2VgIHdpbGwgYmUgcmVtb3ZlZCBpbiBuZXh0IG1ham9yIHJlbGVhc2UgLSBpLmUuIHYyLjApLlxuICpcbiAqIFNwZWNpZmllcyB3aGF0IHRoZSB0ZW1wbGF0ZSBzaG91bGQgcmVwbGFjZS4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqXG4gKiAqIGB0cnVlYCAtIHRoZSB0ZW1wbGF0ZSB3aWxsIHJlcGxhY2UgdGhlIGRpcmVjdGl2ZSdzIGVsZW1lbnQuXG4gKiAqIGBmYWxzZWAgLSB0aGUgdGVtcGxhdGUgd2lsbCByZXBsYWNlIHRoZSBjb250ZW50cyBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cbiAqXG4gKiBUaGUgcmVwbGFjZW1lbnQgcHJvY2VzcyBtaWdyYXRlcyBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgLyBjbGFzc2VzIGZyb20gdGhlIG9sZCBlbGVtZW50IHRvIHRoZSBuZXdcbiAqIG9uZS4gU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI3RlbXBsYXRlLWV4cGFuZGluZy1kaXJlY3RpdmVcbiAqIERpcmVjdGl2ZXMgR3VpZGV9IGZvciBhbiBleGFtcGxlLlxuICpcbiAqIFRoZXJlIGFyZSB2ZXJ5IGZldyBzY2VuYXJpb3Mgd2hlcmUgZWxlbWVudCByZXBsYWNlbWVudCBpcyByZXF1aXJlZCBmb3IgdGhlIGFwcGxpY2F0aW9uIGZ1bmN0aW9uLFxuICogdGhlIG1haW4gb25lIGJlaW5nIHJldXNhYmxlIGN1c3RvbSBjb21wb25lbnRzIHRoYXQgYXJlIHVzZWQgd2l0aGluIFNWRyBjb250ZXh0c1xuICogKGJlY2F1c2UgU1ZHIGRvZXNuJ3Qgd29yayB3aXRoIGN1c3RvbSBlbGVtZW50cyBpbiB0aGUgRE9NIHRyZWUpLlxuICpcbiAqICMjIyMgYHRyYW5zY2x1ZGVgXG4gKiBFeHRyYWN0IHRoZSBjb250ZW50cyBvZiB0aGUgZWxlbWVudCB3aGVyZSB0aGUgZGlyZWN0aXZlIGFwcGVhcnMgYW5kIG1ha2UgaXQgYXZhaWxhYmxlIHRvIHRoZSBkaXJlY3RpdmUuXG4gKiBUaGUgY29udGVudHMgYXJlIGNvbXBpbGVkIGFuZCBwcm92aWRlZCB0byB0aGUgZGlyZWN0aXZlIGFzIGEgKip0cmFuc2NsdXNpb24gZnVuY3Rpb24qKi4gU2VlIHRoZVxuICoge0BsaW5rICRjb21waWxlI3RyYW5zY2x1c2lvbiBUcmFuc2NsdXNpb259IHNlY3Rpb24gYmVsb3cuXG4gKlxuICpcbiAqICMjIyMgYGNvbXBpbGVgXG4gKlxuICogYGBganNcbiAqICAgZnVuY3Rpb24gY29tcGlsZSh0RWxlbWVudCwgdEF0dHJzLCB0cmFuc2NsdWRlKSB7IC4uLiB9XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBkZWFscyB3aXRoIHRyYW5zZm9ybWluZyB0aGUgdGVtcGxhdGUgRE9NLiBTaW5jZSBtb3N0IGRpcmVjdGl2ZXMgZG8gbm90IGRvXG4gKiB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiwgaXQgaXMgbm90IHVzZWQgb2Z0ZW4uIFRoZSBjb21waWxlIGZ1bmN0aW9uIHRha2VzIHRoZSBmb2xsb3dpbmcgYXJndW1lbnRzOlxuICpcbiAqICAgKiBgdEVsZW1lbnRgIC0gdGVtcGxhdGUgZWxlbWVudCAtIFRoZSBlbGVtZW50IHdoZXJlIHRoZSBkaXJlY3RpdmUgaGFzIGJlZW4gZGVjbGFyZWQuIEl0IGlzXG4gKiAgICAgc2FmZSB0byBkbyB0ZW1wbGF0ZSB0cmFuc2Zvcm1hdGlvbiBvbiB0aGUgZWxlbWVudCBhbmQgY2hpbGQgZWxlbWVudHMgb25seS5cbiAqXG4gKiAgICogYHRBdHRyc2AgLSB0ZW1wbGF0ZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBjb21waWxlIGZ1bmN0aW9ucy5cbiAqXG4gKiAgICogYHRyYW5zY2x1ZGVgIC0gIFsqREVQUkVDQVRFRCohXSBBIHRyYW5zY2x1ZGUgbGlua2luZyBmdW5jdGlvbjogYGZ1bmN0aW9uKHNjb3BlLCBjbG9uZUxpbmtpbmdGbilgXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGUgdGVtcGxhdGUgaW5zdGFuY2UgYW5kIHRoZSBsaW5rIGluc3RhbmNlIG1heSBiZSBkaWZmZXJlbnQgb2JqZWN0cyBpZiB0aGUgdGVtcGxhdGUgaGFzXG4gKiBiZWVuIGNsb25lZC4gRm9yIHRoaXMgcmVhc29uIGl0IGlzICoqbm90Kiogc2FmZSB0byBkbyBhbnl0aGluZyBvdGhlciB0aGFuIERPTSB0cmFuc2Zvcm1hdGlvbnMgdGhhdFxuICogYXBwbHkgdG8gYWxsIGNsb25lZCBET00gbm9kZXMgd2l0aGluIHRoZSBjb21waWxlIGZ1bmN0aW9uLiBTcGVjaWZpY2FsbHksIERPTSBsaXN0ZW5lciByZWdpc3RyYXRpb25cbiAqIHNob3VsZCBiZSBkb25lIGluIGEgbGlua2luZyBmdW5jdGlvbiByYXRoZXIgdGhhbiBpbiBhIGNvbXBpbGUgZnVuY3Rpb24uXG4gKiA8L2Rpdj5cblxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBUaGUgY29tcGlsZSBmdW5jdGlvbiBjYW5ub3QgaGFuZGxlIGRpcmVjdGl2ZXMgdGhhdCByZWN1cnNpdmVseSB1c2UgdGhlbXNlbHZlcyBpbiB0aGVpclxuICogb3duIHRlbXBsYXRlcyBvciBjb21waWxlIGZ1bmN0aW9ucy4gQ29tcGlsaW5nIHRoZXNlIGRpcmVjdGl2ZXMgcmVzdWx0cyBpbiBhbiBpbmZpbml0ZSBsb29wIGFuZFxuICogc3RhY2sgb3ZlcmZsb3cgZXJyb3JzLlxuICpcbiAqIFRoaXMgY2FuIGJlIGF2b2lkZWQgYnkgbWFudWFsbHkgdXNpbmcgJGNvbXBpbGUgaW4gdGhlIHBvc3RMaW5rIGZ1bmN0aW9uIHRvIGltcGVyYXRpdmVseSBjb21waWxlXG4gKiBhIGRpcmVjdGl2ZSdzIHRlbXBsYXRlIGluc3RlYWQgb2YgcmVseWluZyBvbiBhdXRvbWF0aWMgdGVtcGxhdGUgY29tcGlsYXRpb24gdmlhIGB0ZW1wbGF0ZWAgb3JcbiAqIGB0ZW1wbGF0ZVVybGAgZGVjbGFyYXRpb24gb3IgbWFudWFsIGNvbXBpbGF0aW9uIGluc2lkZSB0aGUgY29tcGlsZSBmdW5jdGlvbi5cbiAqIDwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqICoqTm90ZToqKiBUaGUgYHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBjb21waWxlIGZ1bmN0aW9uIGlzIGRlcHJlY2F0ZWQsIGFzIGl0XG4gKiAgIGUuZy4gZG9lcyBub3Qga25vdyBhYm91dCB0aGUgcmlnaHQgb3V0ZXIgc2NvcGUuIFBsZWFzZSB1c2UgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gdGhhdCBpcyBwYXNzZWRcbiAqICAgdG8gdGhlIGxpbmsgZnVuY3Rpb24gaW5zdGVhZC5cbiAqIDwvZGl2PlxuXG4gKiBBIGNvbXBpbGUgZnVuY3Rpb24gY2FuIGhhdmUgYSByZXR1cm4gdmFsdWUgd2hpY2ggY2FuIGJlIGVpdGhlciBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdC5cbiAqXG4gKiAqIHJldHVybmluZyBhIChwb3N0LWxpbmspIGZ1bmN0aW9uIC0gaXMgZXF1aXZhbGVudCB0byByZWdpc3RlcmluZyB0aGUgbGlua2luZyBmdW5jdGlvbiB2aWEgdGhlXG4gKiAgIGBsaW5rYCBwcm9wZXJ0eSBvZiB0aGUgY29uZmlnIG9iamVjdCB3aGVuIHRoZSBjb21waWxlIGZ1bmN0aW9uIGlzIGVtcHR5LlxuICpcbiAqICogcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGZ1bmN0aW9uKHMpIHJlZ2lzdGVyZWQgdmlhIGBwcmVgIGFuZCBgcG9zdGAgcHJvcGVydGllcyAtIGFsbG93cyB5b3UgdG9cbiAqICAgY29udHJvbCB3aGVuIGEgbGlua2luZyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS4gU2VlIGluZm8gYWJvdXRcbiAqICAgcHJlLWxpbmtpbmcgYW5kIHBvc3QtbGlua2luZyBmdW5jdGlvbnMgYmVsb3cuXG4gKlxuICpcbiAqICMjIyMgYGxpbmtgXG4gKiBUaGlzIHByb3BlcnR5IGlzIHVzZWQgb25seSBpZiB0aGUgYGNvbXBpbGVgIHByb3BlcnR5IGlzIG5vdCBkZWZpbmVkLlxuICpcbiAqIGBgYGpzXG4gKiAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIsIHRyYW5zY2x1ZGVGbikgeyAuLi4gfVxuICogYGBgXG4gKlxuICogVGhlIGxpbmsgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIHJlZ2lzdGVyaW5nIERPTSBsaXN0ZW5lcnMgYXMgd2VsbCBhcyB1cGRhdGluZyB0aGUgRE9NLiBJdCBpc1xuICogZXhlY3V0ZWQgYWZ0ZXIgdGhlIHRlbXBsYXRlIGhhcyBiZWVuIGNsb25lZC4gVGhpcyBpcyB3aGVyZSBtb3N0IG9mIHRoZSBkaXJlY3RpdmUgbG9naWMgd2lsbCBiZVxuICogcHV0LlxuICpcbiAqICAgKiBgc2NvcGVgIC0ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgU2NvcGV9IC0gVGhlIHNjb3BlIHRvIGJlIHVzZWQgYnkgdGhlXG4gKiAgICAgZGlyZWN0aXZlIGZvciByZWdpc3RlcmluZyB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkd2F0Y2ggd2F0Y2hlc30uXG4gKlxuICogICAqIGBpRWxlbWVudGAgLSBpbnN0YW5jZSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgd2hlcmUgdGhlIGRpcmVjdGl2ZSBpcyB0byBiZSB1c2VkLiBJdCBpcyBzYWZlIHRvXG4gKiAgICAgbWFuaXB1bGF0ZSB0aGUgY2hpbGRyZW4gb2YgdGhlIGVsZW1lbnQgb25seSBpbiBgcG9zdExpbmtgIGZ1bmN0aW9uIHNpbmNlIHRoZSBjaGlsZHJlbiBoYXZlXG4gKiAgICAgYWxyZWFkeSBiZWVuIGxpbmtlZC5cbiAqXG4gKiAgICogYGlBdHRyc2AgLSBpbnN0YW5jZSBhdHRyaWJ1dGVzIC0gTm9ybWFsaXplZCBsaXN0IG9mIGF0dHJpYnV0ZXMgZGVjbGFyZWQgb24gdGhpcyBlbGVtZW50IHNoYXJlZFxuICogICAgIGJldHdlZW4gYWxsIGRpcmVjdGl2ZSBsaW5raW5nIGZ1bmN0aW9ucy5cbiAqXG4gKiAgICogYGNvbnRyb2xsZXJgIC0gdGhlIGRpcmVjdGl2ZSdzIHJlcXVpcmVkIGNvbnRyb2xsZXIgaW5zdGFuY2UocykgLSBJbnN0YW5jZXMgYXJlIHNoYXJlZFxuICogICAgIGFtb25nIGFsbCBkaXJlY3RpdmVzLCB3aGljaCBhbGxvd3MgdGhlIGRpcmVjdGl2ZXMgdG8gdXNlIHRoZSBjb250cm9sbGVycyBhcyBhIGNvbW11bmljYXRpb25cbiAqICAgICBjaGFubmVsLiBUaGUgZXhhY3QgdmFsdWUgZGVwZW5kcyBvbiB0aGUgZGlyZWN0aXZlJ3MgYHJlcXVpcmVgIHByb3BlcnR5OlxuICogICAgICAgKiBubyBjb250cm9sbGVyKHMpIHJlcXVpcmVkOiB0aGUgZGlyZWN0aXZlJ3Mgb3duIGNvbnRyb2xsZXIsIG9yIGB1bmRlZmluZWRgIGlmIGl0IGRvZXNuJ3QgaGF2ZSBvbmVcbiAqICAgICAgICogYHN0cmluZ2A6IHRoZSBjb250cm9sbGVyIGluc3RhbmNlXG4gKiAgICAgICAqIGBhcnJheWA6IGFycmF5IG9mIGNvbnRyb2xsZXIgaW5zdGFuY2VzXG4gKlxuICogICAgIElmIGEgcmVxdWlyZWQgY29udHJvbGxlciBjYW5ub3QgYmUgZm91bmQsIGFuZCBpdCBpcyBvcHRpb25hbCwgdGhlIGluc3RhbmNlIGlzIGBudWxsYCxcbiAqICAgICBvdGhlcndpc2UgdGhlIHtAbGluayBlcnJvcjokY29tcGlsZTpjdHJlcSBNaXNzaW5nIFJlcXVpcmVkIENvbnRyb2xsZXJ9IGVycm9yIGlzIHRocm93bi5cbiAqXG4gKiAgICAgTm90ZSB0aGF0IHlvdSBjYW4gYWxzbyByZXF1aXJlIHRoZSBkaXJlY3RpdmUncyBvd24gY29udHJvbGxlciAtIGl0IHdpbGwgYmUgbWFkZSBhdmFpbGFibGUgbGlrZVxuICogICAgIGFueSBvdGhlciBjb250cm9sbGVyLlxuICpcbiAqICAgKiBgdHJhbnNjbHVkZUZuYCAtIEEgdHJhbnNjbHVkZSBsaW5raW5nIGZ1bmN0aW9uIHByZS1ib3VuZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiAgICAgVGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgYCR0cmFuc2NsdWRlYCBwYXJhbWV0ZXIgb2YgZGlyZWN0aXZlIGNvbnRyb2xsZXJzLFxuICogICAgIHNlZSB7QGxpbmsgbmcuJGNvbXBpbGUjLWNvbnRyb2xsZXItIHRoZSBjb250cm9sbGVyIHNlY3Rpb24gZm9yIGRldGFpbHN9LlxuICogICAgIGBmdW5jdGlvbihbc2NvcGVdLCBjbG9uZUxpbmtpbmdGbiwgZnV0dXJlUGFyZW50RWxlbWVudClgLlxuICpcbiAqICMjIyMgUHJlLWxpbmtpbmcgZnVuY3Rpb25cbiAqXG4gKiBFeGVjdXRlZCBiZWZvcmUgdGhlIGNoaWxkIGVsZW1lbnRzIGFyZSBsaW5rZWQuIE5vdCBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBzaW5jZSB0aGVcbiAqIGNvbXBpbGVyIGxpbmtpbmcgZnVuY3Rpb24gd2lsbCBmYWlsIHRvIGxvY2F0ZSB0aGUgY29ycmVjdCBlbGVtZW50cyBmb3IgbGlua2luZy5cbiAqXG4gKiAjIyMjIFBvc3QtbGlua2luZyBmdW5jdGlvblxuICpcbiAqIEV4ZWN1dGVkIGFmdGVyIHRoZSBjaGlsZCBlbGVtZW50cyBhcmUgbGlua2VkLlxuICpcbiAqIE5vdGUgdGhhdCBjaGlsZCBlbGVtZW50cyB0aGF0IGNvbnRhaW4gYHRlbXBsYXRlVXJsYCBkaXJlY3RpdmVzIHdpbGwgbm90IGhhdmUgYmVlbiBjb21waWxlZFxuICogYW5kIGxpbmtlZCBzaW5jZSB0aGV5IGFyZSB3YWl0aW5nIGZvciB0aGVpciB0ZW1wbGF0ZSB0byBsb2FkIGFzeW5jaHJvbm91c2x5IGFuZCB0aGVpciBvd25cbiAqIGNvbXBpbGF0aW9uIGFuZCBsaW5raW5nIGhhcyBiZWVuIHN1c3BlbmRlZCB1bnRpbCB0aGF0IG9jY3Vycy5cbiAqXG4gKiBJdCBpcyBzYWZlIHRvIGRvIERPTSB0cmFuc2Zvcm1hdGlvbiBpbiB0aGUgcG9zdC1saW5raW5nIGZ1bmN0aW9uIG9uIGVsZW1lbnRzIHRoYXQgYXJlIG5vdCB3YWl0aW5nXG4gKiBmb3IgdGhlaXIgYXN5bmMgdGVtcGxhdGVzIHRvIGJlIHJlc29sdmVkLlxuICpcbiAqXG4gKiAjIyMgVHJhbnNjbHVzaW9uXG4gKlxuICogVHJhbnNjbHVzaW9uIGlzIHRoZSBwcm9jZXNzIG9mIGV4dHJhY3RpbmcgYSBjb2xsZWN0aW9uIG9mIERPTSBlbGVtZW50cyBmcm9tIG9uZSBwYXJ0IG9mIHRoZSBET00gYW5kXG4gKiBjb3B5aW5nIHRoZW0gdG8gYW5vdGhlciBwYXJ0IG9mIHRoZSBET00sIHdoaWxlIG1haW50YWluaW5nIHRoZWlyIGNvbm5lY3Rpb24gdG8gdGhlIG9yaWdpbmFsIEFuZ3VsYXJKU1xuICogc2NvcGUgZnJvbSB3aGVyZSB0aGV5IHdlcmUgdGFrZW4uXG4gKlxuICogVHJhbnNjbHVzaW9uIGlzIHVzZWQgKG9mdGVuIHdpdGgge0BsaW5rIG5nVHJhbnNjbHVkZX0pIHRvIGluc2VydCB0aGVcbiAqIG9yaWdpbmFsIGNvbnRlbnRzIG9mIGEgZGlyZWN0aXZlJ3MgZWxlbWVudCBpbnRvIGEgc3BlY2lmaWVkIHBsYWNlIGluIHRoZSB0ZW1wbGF0ZSBvZiB0aGUgZGlyZWN0aXZlLlxuICogVGhlIGJlbmVmaXQgb2YgdHJhbnNjbHVzaW9uLCBvdmVyIHNpbXBseSBtb3ZpbmcgdGhlIERPTSBlbGVtZW50cyBtYW51YWxseSwgaXMgdGhhdCB0aGUgdHJhbnNjbHVkZWRcbiAqIGNvbnRlbnQgaGFzIGFjY2VzcyB0byB0aGUgcHJvcGVydGllcyBvbiB0aGUgc2NvcGUgZnJvbSB3aGljaCBpdCB3YXMgdGFrZW4sIGV2ZW4gaWYgdGhlIGRpcmVjdGl2ZVxuICogaGFzIGlzb2xhdGVkIHNjb3BlLlxuICogU2VlIHRoZSB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlI2NyZWF0aW5nLWEtZGlyZWN0aXZlLXRoYXQtd3JhcHMtb3RoZXItZWxlbWVudHMgRGlyZWN0aXZlcyBHdWlkZX0uXG4gKlxuICogVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgdGhlIHdpZGdldCB0byBoYXZlIHByaXZhdGUgc3RhdGUgZm9yIGl0cyB0ZW1wbGF0ZSwgd2hpbGUgdGhlIHRyYW5zY2x1ZGVkXG4gKiBjb250ZW50IGhhcyBhY2Nlc3MgdG8gaXRzIG9yaWdpbmF0aW5nIHNjb3BlLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogV2hlbiB0ZXN0aW5nIGFuIGVsZW1lbnQgdHJhbnNjbHVkZSBkaXJlY3RpdmUgeW91IG11c3Qgbm90IHBsYWNlIHRoZSBkaXJlY3RpdmUgYXQgdGhlIHJvb3Qgb2YgdGhlXG4gKiBET00gZnJhZ21lbnQgdGhhdCBpcyBiZWluZyBjb21waWxlZC4gU2VlIHtAbGluayBndWlkZS91bml0LXRlc3RpbmcjdGVzdGluZy10cmFuc2NsdXNpb24tZGlyZWN0aXZlc1xuICogVGVzdGluZyBUcmFuc2NsdXNpb24gRGlyZWN0aXZlc30uXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUga2luZHMgb2YgdHJhbnNjbHVzaW9uIGRlcGVuZGluZyB1cG9uIHdoZXRoZXIgeW91IHdhbnQgdG8gdHJhbnNjbHVkZSBqdXN0IHRoZSBjb250ZW50cyBvZiB0aGVcbiAqIGRpcmVjdGl2ZSdzIGVsZW1lbnQsIHRoZSBlbnRpcmUgZWxlbWVudCBvciBtdWx0aXBsZSBwYXJ0cyBvZiB0aGUgZWxlbWVudCBjb250ZW50czpcbiAqXG4gKiAqIGB0cnVlYCAtIHRyYW5zY2x1ZGUgdGhlIGNvbnRlbnQgKGkuZS4gdGhlIGNoaWxkIG5vZGVzKSBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudC5cbiAqICogYCdlbGVtZW50J2AgLSB0cmFuc2NsdWRlIHRoZSB3aG9sZSBvZiB0aGUgZGlyZWN0aXZlJ3MgZWxlbWVudCBpbmNsdWRpbmcgYW55IGRpcmVjdGl2ZXMgb24gdGhpc1xuICogICBlbGVtZW50IHRoYXQgZGVmaW5lZCBhdCBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdGhpcyBkaXJlY3RpdmUuIFdoZW4gdXNlZCwgdGhlIGB0ZW1wbGF0ZWBcbiAqICAgcHJvcGVydHkgaXMgaWdub3JlZC5cbiAqICogKipgey4uLn1gIChhbiBvYmplY3QgaGFzaCk6KiogLSBtYXAgZWxlbWVudHMgb2YgdGhlIGNvbnRlbnQgb250byB0cmFuc2NsdXNpb24gXCJzbG90c1wiIGluIHRoZSB0ZW1wbGF0ZS5cbiAqXG4gKiAqKk11bHQtc2xvdCB0cmFuc2NsdXNpb24qKiBpcyBkZWNsYXJlZCBieSBwcm92aWRpbmcgYW4gb2JqZWN0IGZvciB0aGUgYHRyYW5zY2x1ZGVgIHByb3BlcnR5LlxuICpcbiAqIFRoaXMgb2JqZWN0IGlzIGEgbWFwIHdoZXJlIHRoZSBrZXlzIGFyZSB0aGUgbmFtZSBvZiB0aGUgc2xvdCB0byBmaWxsIGFuZCB0aGUgdmFsdWUgaXMgYW4gZWxlbWVudCBzZWxlY3RvclxuICogdXNlZCB0byBtYXRjaCB0aGUgSFRNTCB0byB0aGUgc2xvdC4gVGhlIGVsZW1lbnQgc2VsZWN0b3Igc2hvdWxkIGJlIGluIG5vcm1hbGl6ZWQgZm9ybSAoZS5nLiBgbXlFbGVtZW50YClcbiAqIGFuZCB3aWxsIG1hdGNoIHRoZSBzdGFuZGFyZCBlbGVtZW50IHZhcmlhbnRzIChlLmcuIGBteS1lbGVtZW50YCwgYG15OmVsZW1lbnRgLCBgZGF0YS1teS1lbGVtZW50YCwgZXRjKS5cbiAqXG4gKiBGb3IgZnVydGhlciBpbmZvcm1hdGlvbiBjaGVjayBvdXQgdGhlIGd1aWRlIG9uIHtAbGluayBndWlkZS9kaXJlY3RpdmUjbWF0Y2hpbmctZGlyZWN0aXZlcyBNYXRjaGluZyBEaXJlY3RpdmVzfVxuICpcbiAqIElmIHRoZSBlbGVtZW50IHNlbGVjdG9yIGlzIHByZWZpeGVkIHdpdGggYSBgP2AgdGhlbiB0aGF0IHNsb3QgaXMgb3B0aW9uYWwuXG4gKlxuICogRm9yIGV4YW1wbGUsIHRoZSB0cmFuc2NsdWRlIG9iamVjdCBgeyBzbG90QTogJz9teUN1c3RvbUVsZW1lbnQnIH1gIG1hcHMgYDxteS1jdXN0b20tZWxlbWVudD5gIGVsZW1lbnRzIHRvXG4gKiB0aGUgYHNsb3RBYCBzbG90LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgdmlhIHRoZSBgJHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIG9yIHZpYSB0aGUge0BsaW5rIG5nVHJhbnNjbHVkZX0gZGlyZWN0aXZlLlxuICpcbiAqIFNsb3RzIHRoYXQgYXJlIG5vdCBtYXJrZWQgYXMgb3B0aW9uYWwgKGA/YCkgd2lsbCB0cmlnZ2VyIGEgY29tcGlsZSB0aW1lIGVycm9yIGlmIHRoZXJlIGFyZSBubyBtYXRjaGluZyBlbGVtZW50c1xuICogaW4gdGhlIHRyYW5zY2x1ZGUgY29udGVudC4gSWYgeW91IHdpc2ggdG8ga25vdyBpZiBhbiBvcHRpb25hbCBzbG90IHdhcyBmaWxsZWQgd2l0aCBjb250ZW50LCB0aGVuIHlvdSBjYW4gY2FsbFxuICogYCR0cmFuc2NsdWRlLmlzU2xvdEZpbGxlZChzbG90TmFtZSlgIG9uIHRoZSB0cmFuc2NsdWRlIGZ1bmN0aW9uIHBhc3NlZCB0byB0aGUgZGlyZWN0aXZlJ3MgbGluayBmdW5jdGlvbiBhbmRcbiAqIGluamVjdGFibGUgaW50byB0aGUgZGlyZWN0aXZlJ3MgY29udHJvbGxlci5cbiAqXG4gKlxuICogIyMjIyBUcmFuc2NsdXNpb24gRnVuY3Rpb25zXG4gKlxuICogV2hlbiBhIGRpcmVjdGl2ZSByZXF1ZXN0cyB0cmFuc2NsdXNpb24sIHRoZSBjb21waWxlciBleHRyYWN0cyBpdHMgY29udGVudHMgYW5kIHByb3ZpZGVzIGEgKip0cmFuc2NsdXNpb25cbiAqIGZ1bmN0aW9uKiogdG8gdGhlIGRpcmVjdGl2ZSdzIGBsaW5rYCBmdW5jdGlvbiBhbmQgYGNvbnRyb2xsZXJgLiBUaGlzIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiBpcyBhIHNwZWNpYWxcbiAqICoqbGlua2luZyBmdW5jdGlvbioqIHRoYXQgd2lsbCByZXR1cm4gdGhlIGNvbXBpbGVkIGNvbnRlbnRzIGxpbmtlZCB0byBhIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqIElmIHlvdSBhcmUganVzdCB1c2luZyB7QGxpbmsgbmdUcmFuc2NsdWRlfSB0aGVuIHlvdSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgZnVuY3Rpb24sIHNpbmNlXG4gKiBuZ1RyYW5zY2x1ZGUgd2lsbCBkZWFsIHdpdGggaXQgZm9yIHVzLlxuICogPC9kaXY+XG4gKlxuICogSWYgeW91IHdhbnQgdG8gbWFudWFsbHkgY29udHJvbCB0aGUgaW5zZXJ0aW9uIGFuZCByZW1vdmFsIG9mIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50IGluIHlvdXIgZGlyZWN0aXZlXG4gKiB0aGVuIHlvdSBtdXN0IHVzZSB0aGlzIHRyYW5zY2x1ZGUgZnVuY3Rpb24uIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGl0IHJldHVybnMgYSBhIGpxTGl0ZS9KUXVlcnlcbiAqIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBjb21waWxlZCBET00sIHdoaWNoIGlzIGxpbmtlZCB0byB0aGUgY29ycmVjdCB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1c2lvbiBmdW5jdGlvbiB5b3UgY2FuIHBhc3MgaW4gYSAqKmNsb25lIGF0dGFjaCBmdW5jdGlvbioqLiBUaGlzIGZ1bmN0aW9uIGFjY2VwdHNcbiAqIHR3byBwYXJhbWV0ZXJzLCBgZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7IC4uLiB9YCwgd2hlcmUgdGhlIGBjbG9uZWAgaXMgYSBmcmVzaCBjb21waWxlZCBjb3B5IG9mIHlvdXIgdHJhbnNjbHVkZWRcbiAqIGNvbnRlbnQgYW5kIHRoZSBgc2NvcGVgIGlzIHRoZSBuZXdseSBjcmVhdGVkIHRyYW5zY2x1c2lvbiBzY29wZSwgd2hpY2ggdGhlIGNsb25lIHdpbGwgYmUgbGlua2VkIHRvLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAqKkJlc3QgUHJhY3RpY2UqKjogQWx3YXlzIHByb3ZpZGUgYSBgY2xvbmVGbmAgKGNsb25lIGF0dGFjaCBmdW5jdGlvbikgd2hlbiB5b3UgY2FsbCBhIHRyYW5zY2x1ZGUgZnVuY3Rpb25cbiAqIHNpbmNlIHlvdSB0aGVuIGdldCBhIGZyZXNoIGNsb25lIG9mIHRoZSBvcmlnaW5hbCBET00gYW5kIGFsc28gaGF2ZSBhY2Nlc3MgdG8gdGhlIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBJdCBpcyBub3JtYWwgcHJhY3RpY2UgdG8gYXR0YWNoIHlvdXIgdHJhbnNjbHVkZWQgY29udGVudCAoYGNsb25lYCkgdG8gdGhlIERPTSBpbnNpZGUgeW91ciAqKmNsb25lXG4gKiBhdHRhY2ggZnVuY3Rpb24qKjpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHRyYW5zY2x1ZGVkQ29udGVudCwgdHJhbnNjbHVzaW9uU2NvcGU7XG4gKlxuICogJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUsIHNjb3BlKSB7XG4gKiAgIGVsZW1lbnQuYXBwZW5kKGNsb25lKTtcbiAqICAgdHJhbnNjbHVkZWRDb250ZW50ID0gY2xvbmU7XG4gKiAgIHRyYW5zY2x1c2lvblNjb3BlID0gc2NvcGU7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIExhdGVyLCBpZiB5b3Ugd2FudCB0byByZW1vdmUgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgZnJvbSB5b3VyIERPTSB0aGVuIHlvdSBzaG91bGQgYWxzbyBkZXN0cm95IHRoZVxuICogYXNzb2NpYXRlZCB0cmFuc2NsdXNpb24gc2NvcGU6XG4gKlxuICogYGBganNcbiAqIHRyYW5zY2x1ZGVkQ29udGVudC5yZW1vdmUoKTtcbiAqIHRyYW5zY2x1c2lvblNjb3BlLiRkZXN0cm95KCk7XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipCZXN0IFByYWN0aWNlKio6IGlmIHlvdSBpbnRlbmQgdG8gYWRkIGFuZCByZW1vdmUgdHJhbnNjbHVkZWQgY29udGVudCBtYW51YWxseSBpbiB5b3VyIGRpcmVjdGl2ZVxuICogKGJ5IGNhbGxpbmcgdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBET00gYW5kIGNhbGxpbmcgYGVsZW1lbnQucmVtb3ZlKClgIHRvIHJlbW92ZSBpdCksXG4gKiB0aGVuIHlvdSBhcmUgYWxzbyByZXNwb25zaWJsZSBmb3IgY2FsbGluZyBgJGRlc3Ryb3lgIG9uIHRoZSB0cmFuc2NsdXNpb24gc2NvcGUuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUaGUgYnVpbHQtaW4gRE9NIG1hbmlwdWxhdGlvbiBkaXJlY3RpdmVzLCBzdWNoIGFzIHtAbGluayBuZ0lmfSwge0BsaW5rIG5nU3dpdGNofSBhbmQge0BsaW5rIG5nUmVwZWF0fVxuICogYXV0b21hdGljYWxseSBkZXN0cm95IHRoZWlyIHRyYW5zY2x1ZGVkIGNsb25lcyBhcyBuZWNlc3Nhcnkgc28geW91IGRvIG5vdCBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoaXMgaWZcbiAqIHlvdSBhcmUgc2ltcGx5IHVzaW5nIHtAbGluayBuZ1RyYW5zY2x1ZGV9IHRvIGluamVjdCB0aGUgdHJhbnNjbHVzaW9uIGludG8geW91ciBkaXJlY3RpdmUuXG4gKlxuICpcbiAqICMjIyMgVHJhbnNjbHVzaW9uIFNjb3Blc1xuICpcbiAqIFdoZW4geW91IGNhbGwgYSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGl0IHJldHVybnMgYSBET00gZnJhZ21lbnQgdGhhdCBpcyBwcmUtYm91bmQgdG8gYSAqKnRyYW5zY2x1c2lvblxuICogc2NvcGUqKi4gVGhpcyBzY29wZSBpcyBzcGVjaWFsLCBpbiB0aGF0IGl0IGlzIGEgY2hpbGQgb2YgdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIChhbmQgc28gZ2V0cyBkZXN0cm95ZWRcbiAqIHdoZW4gdGhlIGRpcmVjdGl2ZSdzIHNjb3BlIGdldHMgZGVzdHJveWVkKSBidXQgaXQgaW5oZXJpdHMgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHNjb3BlIGZyb20gd2hpY2ggaXRcbiAqIHdhcyB0YWtlbi5cbiAqXG4gKiBGb3IgZXhhbXBsZSBjb25zaWRlciBhIGRpcmVjdGl2ZSB0aGF0IHVzZXMgdHJhbnNjbHVzaW9uIGFuZCBpc29sYXRlZCBzY29wZS4gVGhlIERPTSBoaWVyYXJjaHkgbWlnaHQgbG9va1xuICogbGlrZSB0aGlzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgbmctYXBwPlxuICogICA8ZGl2IGlzb2xhdGU+XG4gKiAgICAgPGRpdiB0cmFuc2NsdXNpb24+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZGl2PlxuICogPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBUaGUgYCRwYXJlbnRgIHNjb3BlIGhpZXJhcmNoeSB3aWxsIGxvb2sgbGlrZSB0aGlzOlxuICpcbiAgIGBgYFxuICAgLSAkcm9vdFNjb3BlXG4gICAgIC0gaXNvbGF0ZVxuICAgICAgIC0gdHJhbnNjbHVzaW9uXG4gICBgYGBcbiAqXG4gKiBidXQgdGhlIHNjb3BlcyB3aWxsIGluaGVyaXQgcHJvdG90eXBpY2FsbHkgZnJvbSBkaWZmZXJlbnQgc2NvcGVzIHRvIHRoZWlyIGAkcGFyZW50YC5cbiAqXG4gICBgYGBcbiAgIC0gJHJvb3RTY29wZVxuICAgICAtIHRyYW5zY2x1c2lvblxuICAgLSBpc29sYXRlXG4gICBgYGBcbiAqXG4gKlxuICogIyMjIEF0dHJpYnV0ZXNcbiAqXG4gKiBUaGUge0BsaW5rIG5nLiRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIEF0dHJpYnV0ZXN9IG9iamVjdCAtIHBhc3NlZCBhcyBhIHBhcmFtZXRlciBpbiB0aGVcbiAqIGBsaW5rKClgIG9yIGBjb21waWxlKClgIGZ1bmN0aW9ucy4gSXQgaGFzIGEgdmFyaWV0eSBvZiB1c2VzLlxuICpcbiAqICogKkFjY2Vzc2luZyBub3JtYWxpemVkIGF0dHJpYnV0ZSBuYW1lczoqIERpcmVjdGl2ZXMgbGlrZSAnbmdCaW5kJyBjYW4gYmUgZXhwcmVzc2VkIGluIG1hbnkgd2F5czpcbiAqICAgJ25nOmJpbmQnLCBgZGF0YS1uZy1iaW5kYCwgb3IgJ3gtbmctYmluZCcuIFRoZSBhdHRyaWJ1dGVzIG9iamVjdCBhbGxvd3MgZm9yIG5vcm1hbGl6ZWQgYWNjZXNzXG4gKiAgIHRvIHRoZSBhdHRyaWJ1dGVzLlxuICpcbiAqICogKkRpcmVjdGl2ZSBpbnRlci1jb21tdW5pY2F0aW9uOiogQWxsIGRpcmVjdGl2ZXMgc2hhcmUgdGhlIHNhbWUgaW5zdGFuY2Ugb2YgdGhlIGF0dHJpYnV0ZXNcbiAqICAgb2JqZWN0IHdoaWNoIGFsbG93cyB0aGUgZGlyZWN0aXZlcyB0byB1c2UgdGhlIGF0dHJpYnV0ZXMgb2JqZWN0IGFzIGludGVyIGRpcmVjdGl2ZVxuICogICBjb21tdW5pY2F0aW9uLlxuICpcbiAqICogKlN1cHBvcnRzIGludGVycG9sYXRpb246KiBJbnRlcnBvbGF0aW9uIGF0dHJpYnV0ZXMgYXJlIGFzc2lnbmVkIHRvIHRoZSBhdHRyaWJ1dGUgb2JqZWN0XG4gKiAgIGFsbG93aW5nIG90aGVyIGRpcmVjdGl2ZXMgdG8gcmVhZCB0aGUgaW50ZXJwb2xhdGVkIHZhbHVlLlxuICpcbiAqICogKk9ic2VydmluZyBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlczoqIFVzZSBgJG9ic2VydmVgIHRvIG9ic2VydmUgdGhlIHZhbHVlIGNoYW5nZXMgb2YgYXR0cmlidXRlc1xuICogICB0aGF0IGNvbnRhaW4gaW50ZXJwb2xhdGlvbiAoZS5nLiBgc3JjPVwie3tiYXJ9fVwiYCkuIE5vdCBvbmx5IGlzIHRoaXMgdmVyeSBlZmZpY2llbnQgYnV0IGl0J3MgYWxzb1xuICogICB0aGUgb25seSB3YXkgdG8gZWFzaWx5IGdldCB0aGUgYWN0dWFsIHZhbHVlIGJlY2F1c2UgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlIHRoZSBpbnRlcnBvbGF0aW9uXG4gKiAgIGhhc24ndCBiZWVuIGV2YWx1YXRlZCB5ZXQgYW5kIHNvIHRoZSB2YWx1ZSBpcyBhdCB0aGlzIHRpbWUgc2V0IHRvIGB1bmRlZmluZWRgLlxuICpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBsaW5raW5nRm4oc2NvcGUsIGVsbSwgYXR0cnMsIGN0cmwpIHtcbiAqICAgLy8gZ2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWVcbiAqICAgY29uc29sZS5sb2coYXR0cnMubmdNb2RlbCk7XG4gKlxuICogICAvLyBjaGFuZ2UgdGhlIGF0dHJpYnV0ZVxuICogICBhdHRycy4kc2V0KCduZ01vZGVsJywgJ25ldyB2YWx1ZScpO1xuICpcbiAqICAgLy8gb2JzZXJ2ZSBjaGFuZ2VzIHRvIGludGVycG9sYXRlZCBhdHRyaWJ1dGVcbiAqICAgYXR0cnMuJG9ic2VydmUoJ25nTW9kZWwnLCBmdW5jdGlvbih2YWx1ZSkge1xuICogICAgIGNvbnNvbGUubG9nKCduZ01vZGVsIGhhcyBjaGFuZ2VkIHZhbHVlIHRvICcgKyB2YWx1ZSk7XG4gKiAgIH0pO1xuICogfVxuICogYGBgXG4gKlxuICogIyMgRXhhbXBsZVxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGUqKjogVHlwaWNhbGx5IGRpcmVjdGl2ZXMgYXJlIHJlZ2lzdGVyZWQgd2l0aCBgbW9kdWxlLmRpcmVjdGl2ZWAuIFRoZSBleGFtcGxlIGJlbG93IGlzXG4gKiB0byBpbGx1c3RyYXRlIGhvdyBgJGNvbXBpbGVgIHdvcmtzLlxuICogPC9kaXY+XG4gKlxuIDxleGFtcGxlIG1vZHVsZT1cImNvbXBpbGVFeGFtcGxlXCIgbmFtZT1cImNvbXBpbGVcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgPHNjcmlwdD5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCdjb21waWxlRXhhbXBsZScsIFtdLCBmdW5jdGlvbigkY29tcGlsZVByb3ZpZGVyKSB7XG4gICAgICAgIC8vIGNvbmZpZ3VyZSBuZXcgJ2NvbXBpbGUnIGRpcmVjdGl2ZSBieSBwYXNzaW5nIGEgZGlyZWN0aXZlXG4gICAgICAgIC8vIGZhY3RvcnkgZnVuY3Rpb24uIFRoZSBmYWN0b3J5IGZ1bmN0aW9uIGluamVjdHMgdGhlICckY29tcGlsZSdcbiAgICAgICAgJGNvbXBpbGVQcm92aWRlci5kaXJlY3RpdmUoJ2NvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xuICAgICAgICAgIC8vIGRpcmVjdGl2ZSBmYWN0b3J5IGNyZWF0ZXMgYSBsaW5rIGZ1bmN0aW9uXG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgICBmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAvLyB3YXRjaCB0aGUgJ2NvbXBpbGUnIGV4cHJlc3Npb24gZm9yIGNoYW5nZXNcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGV2YWwoYXR0cnMuY29tcGlsZSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgJ2NvbXBpbGUnIGV4cHJlc3Npb24gY2hhbmdlc1xuICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBpdCBpbnRvIHRoZSBjdXJyZW50IERPTVxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbCh2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb21waWxlIHRoZSBuZXcgRE9NIGFuZCBsaW5rIGl0IHRvIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gc2NvcGUuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogd2Ugb25seSBjb21waWxlIC5jaGlsZE5vZGVzIHNvIHRoYXRcbiAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBnZXQgaW50byBpbmZpbml0ZSBsb29wIGNvbXBpbGluZyBvdXJzZWx2ZXNcbiAgICAgICAgICAgICAgICAkY29tcGlsZShlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY29udHJvbGxlcignR3JlZXRlckNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUubmFtZSA9ICdBbmd1bGFyJztcbiAgICAgICAgJHNjb3BlLmh0bWwgPSAnSGVsbG8ge3tuYW1lfX0nO1xuICAgICAgfV0pO1xuICAgIDwvc2NyaXB0PlxuICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkdyZWV0ZXJDb250cm9sbGVyXCI+XG4gICAgICA8aW5wdXQgbmctbW9kZWw9XCJuYW1lXCI+IDxici8+XG4gICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJodG1sXCI+PC90ZXh0YXJlYT4gPGJyLz5cbiAgICAgIDxkaXYgY29tcGlsZT1cImh0bWxcIj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgaXQoJ3Nob3VsZCBhdXRvIGNvbXBpbGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICB2YXIgdGV4dGFyZWEgPSAkKCd0ZXh0YXJlYScpO1xuICAgICAgIHZhciBvdXRwdXQgPSAkKCdkaXZbY29tcGlsZV0nKTtcbiAgICAgICAvLyBUaGUgaW5pdGlhbCBzdGF0ZSByZWFkcyAnSGVsbG8gQW5ndWxhcicuXG4gICAgICAgZXhwZWN0KG91dHB1dC5nZXRUZXh0KCkpLnRvQmUoJ0hlbGxvIEFuZ3VsYXInKTtcbiAgICAgICB0ZXh0YXJlYS5jbGVhcigpO1xuICAgICAgIHRleHRhcmVhLnNlbmRLZXlzKCd7e25hbWV9fSEnKTtcbiAgICAgICBleHBlY3Qob3V0cHV0LmdldFRleHQoKSkudG9CZSgnQW5ndWxhciEnKTtcbiAgICAgfSk7XG4gICA8L2ZpbGU+XG4gPC9leGFtcGxlPlxuXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfERPTUVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCBvciBIVE1MIHN0cmluZyB0byBjb21waWxlIGludG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oYW5ndWxhci5TY29wZSwgY2xvbmVBdHRhY2hGbj0pfSB0cmFuc2NsdWRlIGZ1bmN0aW9uIGF2YWlsYWJsZSB0byBkaXJlY3RpdmVzIC0gREVQUkVDQVRFRC5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiAqKk5vdGU6KiogUGFzc2luZyBhIGB0cmFuc2NsdWRlYCBmdW5jdGlvbiB0byB0aGUgJGNvbXBpbGUgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZCwgYXMgaXRcbiAqICAgZS5nLiB3aWxsIG5vdCB1c2UgdGhlIHJpZ2h0IG91dGVyIHNjb3BlLiBQbGVhc2UgcGFzcyB0aGUgdHJhbnNjbHVkZSBmdW5jdGlvbiBhcyBhXG4gKiAgIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgdG8gdGhlIGxpbmsgZnVuY3Rpb24gaW5zdGVhZC5cbiAqIDwvZGl2PlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhQcmlvcml0eSBvbmx5IGFwcGx5IGRpcmVjdGl2ZXMgbG93ZXIgdGhhbiBnaXZlbiBwcmlvcml0eSAoT25seSBlZmZlY3RzIHRoZVxuICogICAgICAgICAgICAgICAgIHJvb3QgZWxlbWVudChzKSwgbm90IHRoZWlyIGNoaWxkcmVuKVxuICogQHJldHVybnMge2Z1bmN0aW9uKHNjb3BlLCBjbG9uZUF0dGFjaEZuPSwgb3B0aW9ucz0pfSBhIGxpbmsgZnVuY3Rpb24gd2hpY2ggaXMgdXNlZCB0byBiaW5kIHRlbXBsYXRlXG4gKiAoYSBET00gZWxlbWVudC90cmVlKSB0byBhIHNjb3BlLiBXaGVyZTpcbiAqXG4gKiAgKiBgc2NvcGVgIC0gQSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBTY29wZX0gdG8gYmluZCB0by5cbiAqICAqIGBjbG9uZUF0dGFjaEZuYCAtIElmIGBjbG9uZUF0dGFjaEZuYCBpcyBwcm92aWRlZCwgdGhlbiB0aGUgbGluayBmdW5jdGlvbiB3aWxsIGNsb25lIHRoZVxuICogIGB0ZW1wbGF0ZWAgYW5kIGNhbGwgdGhlIGBjbG9uZUF0dGFjaEZuYCBmdW5jdGlvbiBhbGxvd2luZyB0aGUgY2FsbGVyIHRvIGF0dGFjaCB0aGVcbiAqICBjbG9uZWQgZWxlbWVudHMgdG8gdGhlIERPTSBkb2N1bWVudCBhdCB0aGUgYXBwcm9wcmlhdGUgcGxhY2UuIFRoZSBgY2xvbmVBdHRhY2hGbmAgaXNcbiAqICBjYWxsZWQgYXM6IDxici8+IGBjbG9uZUF0dGFjaEZuKGNsb25lZEVsZW1lbnQsIHNjb3BlKWAgd2hlcmU6XG4gKlxuICogICAgICAqIGBjbG9uZWRFbGVtZW50YCAtIGlzIGEgY2xvbmUgb2YgdGhlIG9yaWdpbmFsIGBlbGVtZW50YCBwYXNzZWQgaW50byB0aGUgY29tcGlsZXIuXG4gKiAgICAgICogYHNjb3BlYCAtIGlzIHRoZSBjdXJyZW50IHNjb3BlIHdpdGggd2hpY2ggdGhlIGxpbmtpbmcgZnVuY3Rpb24gaXMgd29ya2luZyB3aXRoLlxuICpcbiAqICAqIGBvcHRpb25zYCAtIEFuIG9wdGlvbmFsIG9iamVjdCBoYXNoIHdpdGggbGlua2luZyBvcHRpb25zLiBJZiBgb3B0aW9uc2AgaXMgcHJvdmlkZWQsIHRoZW4gdGhlIGZvbGxvd2luZ1xuICogIGtleXMgbWF5IGJlIHVzZWQgdG8gY29udHJvbCBsaW5raW5nIGJlaGF2aW9yOlxuICpcbiAqICAgICAgKiBgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm5gIC0gdGhlIHRyYW5zY2x1ZGUgZnVuY3Rpb24gbWFkZSBhdmFpbGFibGUgdG9cbiAqICAgICAgICBkaXJlY3RpdmVzOyBpZiBnaXZlbiwgaXQgd2lsbCBiZSBwYXNzZWQgdGhyb3VnaCB0byB0aGUgbGluayBmdW5jdGlvbnMgb2ZcbiAqICAgICAgICBkaXJlY3RpdmVzIGZvdW5kIGluIGBlbGVtZW50YCBkdXJpbmcgY29tcGlsYXRpb24uXG4gKiAgICAgICogYHRyYW5zY2x1ZGVDb250cm9sbGVyc2AgLSBhbiBvYmplY3QgaGFzaCB3aXRoIGtleXMgdGhhdCBtYXAgY29udHJvbGxlciBuYW1lc1xuICogICAgICAgIHRvIGEgaGFzaCB3aXRoIHRoZSBrZXkgYGluc3RhbmNlYCwgd2hpY2ggbWFwcyB0byB0aGUgY29udHJvbGxlciBpbnN0YW5jZTtcbiAqICAgICAgICBpZiBnaXZlbiwgaXQgd2lsbCBtYWtlIHRoZSBjb250cm9sbGVycyBhdmFpbGFibGUgdG8gZGlyZWN0aXZlcyBvbiB0aGUgY29tcGlsZU5vZGU6XG4gKiAgICAgICAgYGBgXG4gKiAgICAgICAge1xuICogICAgICAgICAgcGFyZW50OiB7XG4gKiAgICAgICAgICAgIGluc3RhbmNlOiBwYXJlbnRDb250cm9sbGVySW5zdGFuY2VcbiAqICAgICAgICAgIH1cbiAqICAgICAgICB9XG4gKiAgICAgICAgYGBgXG4gKiAgICAgICogYGZ1dHVyZVBhcmVudEVsZW1lbnRgIC0gZGVmaW5lcyB0aGUgcGFyZW50IHRvIHdoaWNoIHRoZSBgY2xvbmVBdHRhY2hGbmAgd2lsbCBhZGRcbiAqICAgICAgICB0aGUgY2xvbmVkIGVsZW1lbnRzOyBvbmx5IG5lZWRlZCBmb3IgdHJhbnNjbHVkZXMgdGhhdCBhcmUgYWxsb3dlZCB0byBjb250YWluIG5vbiBodG1sXG4gKiAgICAgICAgZWxlbWVudHMgKGUuZy4gU1ZHIGVsZW1lbnRzKS4gU2VlIGFsc28gdGhlIGRpcmVjdGl2ZS5jb250cm9sbGVyIHByb3BlcnR5LlxuICpcbiAqIENhbGxpbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb24gcmV0dXJucyB0aGUgZWxlbWVudCBvZiB0aGUgdGVtcGxhdGUuIEl0IGlzIGVpdGhlciB0aGUgb3JpZ2luYWxcbiAqIGVsZW1lbnQgcGFzc2VkIGluLCBvciB0aGUgY2xvbmUgb2YgdGhlIGVsZW1lbnQgaWYgdGhlIGBjbG9uZUF0dGFjaEZuYCBpcyBwcm92aWRlZC5cbiAqXG4gKiBBZnRlciBsaW5raW5nIHRoZSB2aWV3IGlzIG5vdCB1cGRhdGVkIHVudGlsIGFmdGVyIGEgY2FsbCB0byAkZGlnZXN0IHdoaWNoIHR5cGljYWxseSBpcyBkb25lIGJ5XG4gKiBBbmd1bGFyIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogSWYgeW91IG5lZWQgYWNjZXNzIHRvIHRoZSBib3VuZCB2aWV3LCB0aGVyZSBhcmUgdHdvIHdheXMgdG8gZG8gaXQ6XG4gKlxuICogLSBJZiB5b3UgYXJlIG5vdCBhc2tpbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb24gdG8gY2xvbmUgdGhlIHRlbXBsYXRlLCBjcmVhdGUgdGhlIERPTSBlbGVtZW50KHMpXG4gKiAgIGJlZm9yZSB5b3Ugc2VuZCB0aGVtIHRvIHRoZSBjb21waWxlciBhbmQga2VlcCB0aGlzIHJlZmVyZW5jZSBhcm91bmQuXG4gKiAgIGBgYGpzXG4gKiAgICAgdmFyIGVsZW1lbnQgPSAkY29tcGlsZSgnPHA+e3t0b3RhbH19PC9wPicpKHNjb3BlKTtcbiAqICAgYGBgXG4gKlxuICogLSBpZiBvbiB0aGUgb3RoZXIgaGFuZCwgeW91IG5lZWQgdGhlIGVsZW1lbnQgdG8gYmUgY2xvbmVkLCB0aGUgdmlldyByZWZlcmVuY2UgZnJvbSB0aGUgb3JpZ2luYWxcbiAqICAgZXhhbXBsZSB3b3VsZCBub3QgcG9pbnQgdG8gdGhlIGNsb25lLCBidXQgcmF0aGVyIHRvIHRoZSBvcmlnaW5hbCB0ZW1wbGF0ZSB0aGF0IHdhcyBjbG9uZWQuIEluXG4gKiAgIHRoaXMgY2FzZSwgeW91IGNhbiBhY2Nlc3MgdGhlIGNsb25lIHZpYSB0aGUgY2xvbmVBdHRhY2hGbjpcbiAqICAgYGBganNcbiAqICAgICB2YXIgdGVtcGxhdGVFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KCc8cD57e3RvdGFsfX08L3A+JyksXG4gKiAgICAgICAgIHNjb3BlID0gLi4uLjtcbiAqXG4gKiAgICAgdmFyIGNsb25lZEVsZW1lbnQgPSAkY29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpKHNjb3BlLCBmdW5jdGlvbihjbG9uZWRFbGVtZW50LCBzY29wZSkge1xuICogICAgICAgLy9hdHRhY2ggdGhlIGNsb25lIHRvIERPTSBkb2N1bWVudCBhdCB0aGUgcmlnaHQgcGxhY2VcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgLy9ub3cgd2UgaGF2ZSByZWZlcmVuY2UgdG8gdGhlIGNsb25lZCBET00gdmlhIGBjbG9uZWRFbGVtZW50YFxuICogICBgYGBcbiAqXG4gKlxuICogRm9yIGluZm9ybWF0aW9uIG9uIGhvdyB0aGUgY29tcGlsZXIgd29ya3MsIHNlZSB0aGVcbiAqIHtAbGluayBndWlkZS9jb21waWxlciBBbmd1bGFyIEhUTUwgQ29tcGlsZXJ9IHNlY3Rpb24gb2YgdGhlIERldmVsb3BlciBHdWlkZS5cbiAqXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqICMjIyBEb3VibGUgQ29tcGlsYXRpb25cbiAqXG4gICBEb3VibGUgY29tcGlsYXRpb24gb2NjdXJzIHdoZW4gYW4gYWxyZWFkeSBjb21waWxlZCBwYXJ0IG9mIHRoZSBET00gZ2V0c1xuICAgY29tcGlsZWQgYWdhaW4uIFRoaXMgaXMgYW4gdW5kZXNpcmVkIGVmZmVjdCBhbmQgY2FuIGxlYWQgdG8gbWlzYmVoYXZpbmcgZGlyZWN0aXZlcywgcGVyZm9ybWFuY2UgaXNzdWVzLFxuICAgYW5kIG1lbW9yeSBsZWFrcy4gUmVmZXIgdG8gdGhlIENvbXBpbGVyIEd1aWRlIHtAbGluayBndWlkZS9jb21waWxlciNkb3VibGUtY29tcGlsYXRpb24tYW5kLWhvdy10by1hdm9pZC1pdFxuICAgc2VjdGlvbiBvbiBkb3VibGUgY29tcGlsYXRpb259IGZvciBhbiBpbi1kZXB0aCBleHBsYW5hdGlvbiBhbmQgd2F5cyB0byBhdm9pZCBpdC5cbiAqXG4gKi9cblxudmFyICRjb21waWxlTWluRXJyID0gbWluRXJyKCckY29tcGlsZScpO1xuXG5mdW5jdGlvbiBVTklOSVRJQUxJWkVEX1ZBTFVFKCkge31cbnZhciBfVU5JTklUSUFMSVpFRF9WQUxVRSA9IG5ldyBVTklOSVRJQUxJWkVEX1ZBTFVFKCk7XG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKi9cbiRDb21waWxlUHJvdmlkZXIuJGluamVjdCA9IFsnJHByb3ZpZGUnLCAnJCRzYW5pdGl6ZVVyaVByb3ZpZGVyJ107XG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICRDb21waWxlUHJvdmlkZXIoJHByb3ZpZGUsICQkc2FuaXRpemVVcmlQcm92aWRlcikge1xuICB2YXIgaGFzRGlyZWN0aXZlcyA9IHt9LFxuICAgICAgU3VmZml4ID0gJ0RpcmVjdGl2ZScsXG4gICAgICBDT01NRU5UX0RJUkVDVElWRV9SRUdFWFAgPSAvXlxccypkaXJlY3RpdmU6XFxzKihbXFx3LV0rKVxccysoLiopJC8sXG4gICAgICBDTEFTU19ESVJFQ1RJVkVfUkVHRVhQID0gLygoW1xcdy1dKykoPzo6KFteO10rKSk/Oz8pLyxcbiAgICAgIEFMTF9PUl9OT1RISU5HX0FUVFJTID0gbWFrZU1hcCgnbmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldCcpLFxuICAgICAgUkVRVUlSRV9QUkVGSVhfUkVHRVhQID0gL14oPzooXFxeXFxePyk/KFxcPyk/KFxcXlxcXj8pPyk/LztcblxuICAvLyBSZWY6IGh0dHA6Ly9kZXZlbG9wZXJzLndoYXR3Zy5vcmcvd2ViYXBwYXBpcy5odG1sI2V2ZW50LWhhbmRsZXItaWRsLWF0dHJpYnV0ZXNcbiAgLy8gVGhlIGFzc3VtcHRpb24gaXMgdGhhdCBmdXR1cmUgRE9NIGV2ZW50IGF0dHJpYnV0ZSBuYW1lcyB3aWxsIGJlZ2luIHdpdGhcbiAgLy8gJ29uJyBhbmQgYmUgY29tcG9zZWQgb2Ygb25seSBFbmdsaXNoIGxldHRlcnMuXG4gIHZhciBFVkVOVF9IQU5ETEVSX0FUVFJfUkVHRVhQID0gL14ob25bYS16XSt8Zm9ybWFjdGlvbikkLztcbiAgdmFyIGJpbmRpbmdDYWNoZSA9IGNyZWF0ZU1hcCgpO1xuXG4gIGZ1bmN0aW9uIHBhcnNlSXNvbGF0ZUJpbmRpbmdzKHNjb3BlLCBkaXJlY3RpdmVOYW1lLCBpc0NvbnRyb2xsZXIpIHtcbiAgICB2YXIgTE9DQUxfUkVHRVhQID0gL15cXHMqKFtAJjxdfD0oXFwqPykpKFxcPz8pXFxzKihbXFx3JF0qKVxccyokLztcblxuICAgIHZhciBiaW5kaW5ncyA9IGNyZWF0ZU1hcCgpO1xuXG4gICAgZm9yRWFjaChzY29wZSwgZnVuY3Rpb24oZGVmaW5pdGlvbiwgc2NvcGVOYW1lKSB7XG4gICAgICBpZiAoZGVmaW5pdGlvbiBpbiBiaW5kaW5nQ2FjaGUpIHtcbiAgICAgICAgYmluZGluZ3Nbc2NvcGVOYW1lXSA9IGJpbmRpbmdDYWNoZVtkZWZpbml0aW9uXTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG1hdGNoID0gZGVmaW5pdGlvbi5tYXRjaChMT0NBTF9SRUdFWFApO1xuXG4gICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdpc2NwJyxcbiAgICAgICAgICAgICdJbnZhbGlkIHszfSBmb3IgZGlyZWN0aXZlIFxcJ3swfVxcJy4nICtcbiAgICAgICAgICAgICcgRGVmaW5pdGlvbjogey4uLiB7MX06IFxcJ3syfVxcJyAuLi59JyxcbiAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsIHNjb3BlTmFtZSwgZGVmaW5pdGlvbixcbiAgICAgICAgICAgIChpc0NvbnRyb2xsZXIgPyAnY29udHJvbGxlciBiaW5kaW5ncyBkZWZpbml0aW9uJyA6XG4gICAgICAgICAgICAnaXNvbGF0ZSBzY29wZSBkZWZpbml0aW9uJykpO1xuICAgICAgfVxuXG4gICAgICBiaW5kaW5nc1tzY29wZU5hbWVdID0ge1xuICAgICAgICBtb2RlOiBtYXRjaFsxXVswXSxcbiAgICAgICAgY29sbGVjdGlvbjogbWF0Y2hbMl0gPT09ICcqJyxcbiAgICAgICAgb3B0aW9uYWw6IG1hdGNoWzNdID09PSAnPycsXG4gICAgICAgIGF0dHJOYW1lOiBtYXRjaFs0XSB8fCBzY29wZU5hbWVcbiAgICAgIH07XG4gICAgICBpZiAobWF0Y2hbNF0pIHtcbiAgICAgICAgYmluZGluZ0NhY2hlW2RlZmluaXRpb25dID0gYmluZGluZ3Nbc2NvcGVOYW1lXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBiaW5kaW5ncztcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlRGlyZWN0aXZlQmluZGluZ3MoZGlyZWN0aXZlLCBkaXJlY3RpdmVOYW1lKSB7XG4gICAgdmFyIGJpbmRpbmdzID0ge1xuICAgICAgaXNvbGF0ZVNjb3BlOiBudWxsLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogbnVsbFxuICAgIH07XG4gICAgaWYgKGlzT2JqZWN0KGRpcmVjdGl2ZS5zY29wZSkpIHtcbiAgICAgIGlmIChkaXJlY3RpdmUuYmluZFRvQ29udHJvbGxlciA9PT0gdHJ1ZSkge1xuICAgICAgICBiaW5kaW5ncy5iaW5kVG9Db250cm9sbGVyID0gcGFyc2VJc29sYXRlQmluZGluZ3MoZGlyZWN0aXZlLnNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlTmFtZSwgdHJ1ZSk7XG4gICAgICAgIGJpbmRpbmdzLmlzb2xhdGVTY29wZSA9IHt9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmluZGluZ3MuaXNvbGF0ZVNjb3BlID0gcGFyc2VJc29sYXRlQmluZGluZ3MoZGlyZWN0aXZlLnNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmVOYW1lLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc09iamVjdChkaXJlY3RpdmUuYmluZFRvQ29udHJvbGxlcikpIHtcbiAgICAgIGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXIgPVxuICAgICAgICAgIHBhcnNlSXNvbGF0ZUJpbmRpbmdzKGRpcmVjdGl2ZS5iaW5kVG9Db250cm9sbGVyLCBkaXJlY3RpdmVOYW1lLCB0cnVlKTtcbiAgICB9XG4gICAgaWYgKGJpbmRpbmdzLmJpbmRUb0NvbnRyb2xsZXIgJiYgIWRpcmVjdGl2ZS5jb250cm9sbGVyKSB7XG4gICAgICAvLyBUaGVyZSBpcyBubyBjb250cm9sbGVyXG4gICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbm9jdHJsJyxcbiAgICAgICAgICAgICdDYW5ub3QgYmluZCB0byBjb250cm9sbGVyIHdpdGhvdXQgZGlyZWN0aXZlIFxcJ3swfVxcJ3MgY29udHJvbGxlci4nLFxuICAgICAgICAgICAgZGlyZWN0aXZlTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBiaW5kaW5ncztcbiAgfVxuXG4gIGZ1bmN0aW9uIGFzc2VydFZhbGlkRGlyZWN0aXZlTmFtZShuYW1lKSB7XG4gICAgdmFyIGxldHRlciA9IG5hbWUuY2hhckF0KDApO1xuICAgIGlmICghbGV0dGVyIHx8IGxldHRlciAhPT0gbG93ZXJjYXNlKGxldHRlcikpIHtcbiAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdiYWRkaXInLCAnRGlyZWN0aXZlL0NvbXBvbmVudCBuYW1lIFxcJ3swfVxcJyBpcyBpbnZhbGlkLiBUaGUgZmlyc3QgY2hhcmFjdGVyIG11c3QgYmUgYSBsb3dlcmNhc2UgbGV0dGVyJywgbmFtZSk7XG4gICAgfVxuICAgIGlmIChuYW1lICE9PSBuYW1lLnRyaW0oKSkge1xuICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2JhZGRpcicsXG4gICAgICAgICAgICAnRGlyZWN0aXZlL0NvbXBvbmVudCBuYW1lIFxcJ3swfVxcJyBpcyBpbnZhbGlkLiBUaGUgbmFtZSBzaG91bGQgbm90IGNvbnRhaW4gbGVhZGluZyBvciB0cmFpbGluZyB3aGl0ZXNwYWNlcycsXG4gICAgICAgICAgICBuYW1lKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXREaXJlY3RpdmVSZXF1aXJlKGRpcmVjdGl2ZSkge1xuICAgIHZhciByZXF1aXJlID0gZGlyZWN0aXZlLnJlcXVpcmUgfHwgKGRpcmVjdGl2ZS5jb250cm9sbGVyICYmIGRpcmVjdGl2ZS5uYW1lKTtcblxuICAgIGlmICghaXNBcnJheShyZXF1aXJlKSAmJiBpc09iamVjdChyZXF1aXJlKSkge1xuICAgICAgZm9yRWFjaChyZXF1aXJlLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHZhciBtYXRjaCA9IHZhbHVlLm1hdGNoKFJFUVVJUkVfUFJFRklYX1JFR0VYUCk7XG4gICAgICAgIHZhciBuYW1lID0gdmFsdWUuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgIGlmICghbmFtZSkgcmVxdWlyZVtrZXldID0gbWF0Y2hbMF0gKyBrZXk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVxdWlyZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERpcmVjdGl2ZVJlc3RyaWN0KHJlc3RyaWN0LCBuYW1lKSB7XG4gICAgaWYgKHJlc3RyaWN0ICYmICEoaXNTdHJpbmcocmVzdHJpY3QpICYmIC9bRUFDTV0vLnRlc3QocmVzdHJpY3QpKSkge1xuICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2JhZHJlc3RyaWN0JyxcbiAgICAgICAgICAnUmVzdHJpY3QgcHJvcGVydHkgXFwnezB9XFwnIG9mIGRpcmVjdGl2ZSBcXCd7MX1cXCcgaXMgaW52YWxpZCcsXG4gICAgICAgICAgcmVzdHJpY3QsXG4gICAgICAgICAgbmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3RyaWN0IHx8ICdFQSc7XG4gIH1cblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZVxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXIgYSBuZXcgZGlyZWN0aXZlIHdpdGggdGhlIGNvbXBpbGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R9IG5hbWUgTmFtZSBvZiB0aGUgZGlyZWN0aXZlIGluIGNhbWVsLWNhc2UgKGkuZS4gPGNvZGU+bmdCaW5kPC9jb2RlPiB3aGljaFxuICAgKiAgICB3aWxsIG1hdGNoIGFzIDxjb2RlPm5nLWJpbmQ8L2NvZGU+KSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBkaXJlY3RpdmVzIHdoZXJlIHRoZSBrZXlzIGFyZSB0aGVcbiAgICogICAgbmFtZXMgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBmYWN0b3JpZXMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258QXJyYXl9IGRpcmVjdGl2ZUZhY3RvcnkgQW4gaW5qZWN0YWJsZSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbi4gU2VlIHRoZVxuICAgKiAgICB7QGxpbmsgZ3VpZGUvZGlyZWN0aXZlIGRpcmVjdGl2ZSBndWlkZX0gYW5kIHRoZSB7QGxpbmsgJGNvbXBpbGUgY29tcGlsZSBBUEl9IGZvciBtb3JlIGluZm8uXG4gICAqIEByZXR1cm5zIHtuZy4kY29tcGlsZVByb3ZpZGVyfSBTZWxmIGZvciBjaGFpbmluZy5cbiAgICovXG4gIHRoaXMuZGlyZWN0aXZlID0gZnVuY3Rpb24gcmVnaXN0ZXJEaXJlY3RpdmUobmFtZSwgZGlyZWN0aXZlRmFjdG9yeSkge1xuICAgIGFzc2VydEFyZyhuYW1lLCAnbmFtZScpO1xuICAgIGFzc2VydE5vdEhhc093blByb3BlcnR5KG5hbWUsICdkaXJlY3RpdmUnKTtcbiAgICBpZiAoaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgIGFzc2VydFZhbGlkRGlyZWN0aXZlTmFtZShuYW1lKTtcbiAgICAgIGFzc2VydEFyZyhkaXJlY3RpdmVGYWN0b3J5LCAnZGlyZWN0aXZlRmFjdG9yeScpO1xuICAgICAgaWYgKCFoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGhhc0RpcmVjdGl2ZXNbbmFtZV0gPSBbXTtcbiAgICAgICAgJHByb3ZpZGUuZmFjdG9yeShuYW1lICsgU3VmZml4LCBbJyRpbmplY3RvcicsICckZXhjZXB0aW9uSGFuZGxlcicsXG4gICAgICAgICAgZnVuY3Rpb24oJGluamVjdG9yLCAkZXhjZXB0aW9uSGFuZGxlcikge1xuICAgICAgICAgICAgdmFyIGRpcmVjdGl2ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvckVhY2goaGFzRGlyZWN0aXZlc1tuYW1lXSwgZnVuY3Rpb24oZGlyZWN0aXZlRmFjdG9yeSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aXZlID0gJGluamVjdG9yLmludm9rZShkaXJlY3RpdmVGYWN0b3J5KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihkaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUgPSB7IGNvbXBpbGU6IHZhbHVlRm4oZGlyZWN0aXZlKSB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWRpcmVjdGl2ZS5jb21waWxlICYmIGRpcmVjdGl2ZS5saW5rKSB7XG4gICAgICAgICAgICAgICAgICBkaXJlY3RpdmUuY29tcGlsZSA9IHZhbHVlRm4oZGlyZWN0aXZlLmxpbmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUucHJpb3JpdHkgPSBkaXJlY3RpdmUucHJpb3JpdHkgfHwgMDtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUubmFtZSA9IGRpcmVjdGl2ZS5uYW1lIHx8IG5hbWU7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLnJlcXVpcmUgPSBnZXREaXJlY3RpdmVSZXF1aXJlKGRpcmVjdGl2ZSk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlLnJlc3RyaWN0ID0gZ2V0RGlyZWN0aXZlUmVzdHJpY3QoZGlyZWN0aXZlLnJlc3RyaWN0LCBuYW1lKTtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUuJCRtb2R1bGVOYW1lID0gZGlyZWN0aXZlRmFjdG9yeS4kJG1vZHVsZU5hbWU7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlcy5wdXNoKGRpcmVjdGl2ZSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlcztcbiAgICAgICAgICB9XSk7XG4gICAgICB9XG4gICAgICBoYXNEaXJlY3RpdmVzW25hbWVdLnB1c2goZGlyZWN0aXZlRmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvckVhY2gobmFtZSwgcmV2ZXJzZVBhcmFtcyhyZWdpc3RlckRpcmVjdGl2ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2NvbXBvbmVudFxuICAgKiBAbW9kdWxlIG5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBjb21wb25lbnQgaW4gY2FtZWxDYXNlIChpLmUuIGBteUNvbXBgIHdoaWNoIHdpbGwgbWF0Y2ggYDxteS1jb21wPmApLFxuICAgKiAgICBvciBhbiBvYmplY3QgbWFwIG9mIGNvbXBvbmVudHMgd2hlcmUgdGhlIGtleXMgYXJlIHRoZSBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGNvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIENvbXBvbmVudCBkZWZpbml0aW9uIG9iamVjdCAoYSBzaW1wbGlmaWVkXG4gICAqICAgIHtAbGluayBuZy4kY29tcGlsZSNkaXJlY3RpdmUtZGVmaW5pdGlvbi1vYmplY3QgZGlyZWN0aXZlIGRlZmluaXRpb24gb2JqZWN0fSksXG4gICAqICAgIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIChhbGwgb3B0aW9uYWwpOlxuICAgKlxuICAgKiAgICAtIGBjb250cm9sbGVyYCDigJMgYHsoc3RyaW5nfGZ1bmN0aW9uKCk9fWAg4oCTIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmVcbiAgICogICAgICBhc3NvY2lhdGVkIHdpdGggbmV3bHkgY3JlYXRlZCBzY29wZSBvciB0aGUgbmFtZSBvZiBhIHtAbGluayBuZy4kY29tcGlsZSMtY29udHJvbGxlci1cbiAgICogICAgICByZWdpc3RlcmVkIGNvbnRyb2xsZXJ9IGlmIHBhc3NlZCBhcyBhIHN0cmluZy4gQW4gZW1wdHkgYG5vb3BgIGZ1bmN0aW9uIGJ5IGRlZmF1bHQuXG4gICAqICAgIC0gYGNvbnRyb2xsZXJBc2Ag4oCTIGB7c3RyaW5nPX1gIOKAkyBpZGVudGlmaWVyIG5hbWUgZm9yIHRvIHJlZmVyZW5jZSB0aGUgY29udHJvbGxlciBpbiB0aGUgY29tcG9uZW50J3Mgc2NvcGUuXG4gICAqICAgICAgSWYgcHJlc2VudCwgdGhlIGNvbnRyb2xsZXIgd2lsbCBiZSBwdWJsaXNoZWQgdG8gc2NvcGUgdW5kZXIgdGhlIGBjb250cm9sbGVyQXNgIG5hbWUuXG4gICAqICAgICAgSWYgbm90IHByZXNlbnQsIHRoaXMgd2lsbCBkZWZhdWx0IHRvIGJlIGAkY3RybGAuXG4gICAqICAgIC0gYHRlbXBsYXRlYCDigJMgYHtzdHJpbmc9fGZ1bmN0aW9uKCk9fWAg4oCTIGh0bWwgdGVtcGxhdGUgYXMgYSBzdHJpbmcgb3IgYSBmdW5jdGlvbiB0aGF0XG4gICAqICAgICAgcmV0dXJucyBhbiBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nIHdoaWNoIHNob3VsZCBiZSB1c2VkIGFzIHRoZSBjb250ZW50cyBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICogICAgICBFbXB0eSBzdHJpbmcgYnkgZGVmYXVsdC5cbiAgICpcbiAgICogICAgICBJZiBgdGVtcGxhdGVgIGlzIGEgZnVuY3Rpb24sIHRoZW4gaXQgaXMge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSBpbmplY3RlZH0gd2l0aFxuICAgKiAgICAgIHRoZSBmb2xsb3dpbmcgbG9jYWxzOlxuICAgKlxuICAgKiAgICAgIC0gYCRlbGVtZW50YCAtIEN1cnJlbnQgZWxlbWVudFxuICAgKiAgICAgIC0gYCRhdHRyc2AgLSBDdXJyZW50IGF0dHJpYnV0ZXMgb2JqZWN0IGZvciB0aGUgZWxlbWVudFxuICAgKlxuICAgKiAgICAtIGB0ZW1wbGF0ZVVybGAg4oCTIGB7c3RyaW5nPXxmdW5jdGlvbigpPX1gIOKAkyBwYXRoIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHBhdGggdG8gYW4gaHRtbFxuICAgKiAgICAgIHRlbXBsYXRlIHRoYXQgc2hvdWxkIGJlIHVzZWQgIGFzIHRoZSBjb250ZW50cyBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogICAgICBJZiBgdGVtcGxhdGVVcmxgIGlzIGEgZnVuY3Rpb24sIHRoZW4gaXQgaXMge0BsaW5rIGF1dG8uJGluamVjdG9yI2ludm9rZSBpbmplY3RlZH0gd2l0aFxuICAgKiAgICAgIHRoZSBmb2xsb3dpbmcgbG9jYWxzOlxuICAgKlxuICAgKiAgICAgIC0gYCRlbGVtZW50YCAtIEN1cnJlbnQgZWxlbWVudFxuICAgKiAgICAgIC0gYCRhdHRyc2AgLSBDdXJyZW50IGF0dHJpYnV0ZXMgb2JqZWN0IGZvciB0aGUgZWxlbWVudFxuICAgKlxuICAgKiAgICAtIGBiaW5kaW5nc2Ag4oCTIGB7b2JqZWN0PX1gIOKAkyBkZWZpbmVzIGJpbmRpbmdzIGJldHdlZW4gRE9NIGF0dHJpYnV0ZXMgYW5kIGNvbXBvbmVudCBwcm9wZXJ0aWVzLlxuICAgKiAgICAgIENvbXBvbmVudCBwcm9wZXJ0aWVzIGFyZSBhbHdheXMgYm91bmQgdG8gdGhlIGNvbXBvbmVudCBjb250cm9sbGVyIGFuZCBub3QgdG8gdGhlIHNjb3BlLlxuICAgKiAgICAgIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGUjLWJpbmR0b2NvbnRyb2xsZXItIGBiaW5kVG9Db250cm9sbGVyYH0uXG4gICAqICAgIC0gYHRyYW5zY2x1ZGVgIOKAkyBge2Jvb2xlYW49fWAg4oCTIHdoZXRoZXIge0BsaW5rICRjb21waWxlI3RyYW5zY2x1c2lvbiBjb250ZW50IHRyYW5zY2x1c2lvbn0gaXMgZW5hYmxlZC5cbiAgICogICAgICBEaXNhYmxlZCBieSBkZWZhdWx0LlxuICAgKiAgICAtIGByZXF1aXJlYCAtIGB7T2JqZWN0PHN0cmluZywgc3RyaW5nPj19YCAtIHJlcXVpcmVzIHRoZSBjb250cm9sbGVycyBvZiBvdGhlciBkaXJlY3RpdmVzIGFuZCBiaW5kcyB0aGVtIHRvXG4gICAqICAgICAgdGhpcyBjb21wb25lbnQncyBjb250cm9sbGVyLiBUaGUgb2JqZWN0IGtleXMgc3BlY2lmeSB0aGUgcHJvcGVydHkgbmFtZXMgdW5kZXIgd2hpY2ggdGhlIHJlcXVpcmVkXG4gICAqICAgICAgY29udHJvbGxlcnMgKG9iamVjdCB2YWx1ZXMpIHdpbGwgYmUgYm91bmQuIFNlZSB7QGxpbmsgbmcuJGNvbXBpbGUjLXJlcXVpcmUtIGByZXF1aXJlYH0uXG4gICAqICAgIC0gYCQuLi5gIOKAkyBhZGRpdGlvbmFsIHByb3BlcnRpZXMgdG8gYXR0YWNoIHRvIHRoZSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbiBhbmQgdGhlIGNvbnRyb2xsZXJcbiAgICogICAgICBjb25zdHJ1Y3RvciBmdW5jdGlvbi4gKFRoaXMgaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IHJvdXRlciB0byBhbm5vdGF0ZSlcbiAgICpcbiAgICogQHJldHVybnMge25nLiRjb21waWxlUHJvdmlkZXJ9IHRoZSBjb21waWxlIHByb3ZpZGVyIGl0c2VsZiwgZm9yIGNoYWluaW5nIG9mIGZ1bmN0aW9uIGNhbGxzLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmVnaXN0ZXIgYSAqKmNvbXBvbmVudCBkZWZpbml0aW9uKiogd2l0aCB0aGUgY29tcGlsZXIuIFRoaXMgaXMgYSBzaG9ydGhhbmQgZm9yIHJlZ2lzdGVyaW5nIGEgc3BlY2lhbFxuICAgKiB0eXBlIG9mIGRpcmVjdGl2ZSwgd2hpY2ggcmVwcmVzZW50cyBhIHNlbGYtY29udGFpbmVkIFVJIGNvbXBvbmVudCBpbiB5b3VyIGFwcGxpY2F0aW9uLiBTdWNoIGNvbXBvbmVudHNcbiAgICogYXJlIGFsd2F5cyBpc29sYXRlZCAoaS5lLiBgc2NvcGU6IHt9YCkgYW5kIGFyZSBhbHdheXMgcmVzdHJpY3RlZCB0byBlbGVtZW50cyAoaS5lLiBgcmVzdHJpY3Q6ICdFJ2ApLlxuICAgKlxuICAgKiBDb21wb25lbnQgZGVmaW5pdGlvbnMgYXJlIHZlcnkgc2ltcGxlIGFuZCBkbyBub3QgcmVxdWlyZSBhcyBtdWNoIGNvbmZpZ3VyYXRpb24gYXMgZGVmaW5pbmcgZ2VuZXJhbFxuICAgKiBkaXJlY3RpdmVzLiBDb21wb25lbnQgZGVmaW5pdGlvbnMgdXN1YWxseSBjb25zaXN0IG9ubHkgb2YgYSB0ZW1wbGF0ZSBhbmQgYSBjb250cm9sbGVyIGJhY2tpbmcgaXQuXG4gICAqXG4gICAqIEluIG9yZGVyIHRvIG1ha2UgdGhlIGRlZmluaXRpb24gZWFzaWVyLCBjb21wb25lbnRzIGVuZm9yY2UgYmVzdCBwcmFjdGljZXMgbGlrZSB1c2Ugb2YgYGNvbnRyb2xsZXJBc2AsXG4gICAqIGBiaW5kVG9Db250cm9sbGVyYC4gVGhleSBhbHdheXMgaGF2ZSAqKmlzb2xhdGUgc2NvcGUqKiBhbmQgYXJlIHJlc3RyaWN0ZWQgdG8gZWxlbWVudHMuXG4gICAqXG4gICAqIEhlcmUgYXJlIGEgZmV3IGV4YW1wbGVzIG9mIGhvdyB5b3Ugd291bGQgdXN1YWxseSBkZWZpbmUgY29tcG9uZW50czpcbiAgICpcbiAgICogYGBganNcbiAgICogICB2YXIgbXlNb2QgPSBhbmd1bGFyLm1vZHVsZSguLi4pO1xuICAgKiAgIG15TW9kLmNvbXBvbmVudCgnbXlDb21wJywge1xuICAgKiAgICAgdGVtcGxhdGU6ICc8ZGl2Pk15IG5hbWUgaXMge3skY3RybC5uYW1lfX08L2Rpdj4nLFxuICAgKiAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oKSB7XG4gICAqICAgICAgIHRoaXMubmFtZSA9ICdzaGFoYXInO1xuICAgKiAgICAgfVxuICAgKiAgIH0pO1xuICAgKlxuICAgKiAgIG15TW9kLmNvbXBvbmVudCgnbXlDb21wJywge1xuICAgKiAgICAgdGVtcGxhdGU6ICc8ZGl2Pk15IG5hbWUgaXMge3skY3RybC5uYW1lfX08L2Rpdj4nLFxuICAgKiAgICAgYmluZGluZ3M6IHtuYW1lOiAnQCd9XG4gICAqICAgfSk7XG4gICAqXG4gICAqICAgbXlNb2QuY29tcG9uZW50KCdteUNvbXAnLCB7XG4gICAqICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL215LWNvbXAuaHRtbCcsXG4gICAqICAgICBjb250cm9sbGVyOiAnTXlDdHJsJyxcbiAgICogICAgIGNvbnRyb2xsZXJBczogJ2N0cmwnLFxuICAgKiAgICAgYmluZGluZ3M6IHtuYW1lOiAnQCd9XG4gICAqICAgfSk7XG4gICAqXG4gICAqIGBgYFxuICAgKiBGb3IgbW9yZSBleGFtcGxlcywgYW5kIGFuIGluLWRlcHRoIGd1aWRlLCBzZWUgdGhlIHtAbGluayBndWlkZS9jb21wb25lbnQgY29tcG9uZW50IGd1aWRlfS5cbiAgICpcbiAgICogPGJyIC8+XG4gICAqIFNlZSBhbHNvIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSAkY29tcGlsZVByb3ZpZGVyLmRpcmVjdGl2ZSgpfS5cbiAgICovXG4gIHRoaXMuY29tcG9uZW50ID0gZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgb3B0aW9ucykge1xuICAgIGlmICghaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgIGZvckVhY2gobmFtZSwgcmV2ZXJzZVBhcmFtcyhiaW5kKHRoaXMsIHJlZ2lzdGVyQ29tcG9uZW50KSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdmFyIGNvbnRyb2xsZXIgPSBvcHRpb25zLmNvbnRyb2xsZXIgfHwgZnVuY3Rpb24oKSB7fTtcblxuICAgIGZ1bmN0aW9uIGZhY3RvcnkoJGluamVjdG9yKSB7XG4gICAgICBmdW5jdGlvbiBtYWtlSW5qZWN0YWJsZShmbikge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikgfHwgaXNBcnJheShmbikpIHtcbiAgICAgICAgICByZXR1cm4gLyoqIEB0aGlzICovIGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHtcbiAgICAgICAgICAgIHJldHVybiAkaW5qZWN0b3IuaW52b2tlKGZuLCB0aGlzLCB7JGVsZW1lbnQ6IHRFbGVtZW50LCAkYXR0cnM6IHRBdHRyc30pO1xuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGZuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB0ZW1wbGF0ZSA9ICghb3B0aW9ucy50ZW1wbGF0ZSAmJiAhb3B0aW9ucy50ZW1wbGF0ZVVybCA/ICcnIDogb3B0aW9ucy50ZW1wbGF0ZSk7XG4gICAgICB2YXIgZGRvID0ge1xuICAgICAgICBjb250cm9sbGVyOiBjb250cm9sbGVyLFxuICAgICAgICBjb250cm9sbGVyQXM6IGlkZW50aWZpZXJGb3JDb250cm9sbGVyKG9wdGlvbnMuY29udHJvbGxlcikgfHwgb3B0aW9ucy5jb250cm9sbGVyQXMgfHwgJyRjdHJsJyxcbiAgICAgICAgdGVtcGxhdGU6IG1ha2VJbmplY3RhYmxlKHRlbXBsYXRlKSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IG1ha2VJbmplY3RhYmxlKG9wdGlvbnMudGVtcGxhdGVVcmwpLFxuICAgICAgICB0cmFuc2NsdWRlOiBvcHRpb25zLnRyYW5zY2x1ZGUsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjogb3B0aW9ucy5iaW5kaW5ncyB8fCB7fSxcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgcmVxdWlyZTogb3B0aW9ucy5yZXF1aXJlXG4gICAgICB9O1xuXG4gICAgICAvLyBDb3B5IGFubm90YXRpb25zIChzdGFydGluZyB3aXRoICQpIG92ZXIgdG8gdGhlIERET1xuICAgICAgZm9yRWFjaChvcHRpb25zLCBmdW5jdGlvbih2YWwsIGtleSkge1xuICAgICAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyQnKSBkZG9ba2V5XSA9IHZhbDtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZGRvO1xuICAgIH1cblxuICAgIC8vIFRPRE8ocGV0ZSkgcmVtb3ZlIHRoZSBmb2xsb3dpbmcgYGZvckVhY2hgIGJlZm9yZSB3ZSByZWxlYXNlIDEuNi4wXG4gICAgLy8gVGhlIGNvbXBvbmVudC1yb3V0ZXJAMC4yLjAgbG9va3MgZm9yIHRoZSBhbm5vdGF0aW9ucyBvbiB0aGUgY29udHJvbGxlciBjb25zdHJ1Y3RvclxuICAgIC8vIE5vdGhpbmcgaW4gQW5ndWxhciBsb29rcyBmb3IgYW5ub3RhdGlvbnMgb24gdGhlIGZhY3RvcnkgZnVuY3Rpb24gYnV0IHdlIGNhbid0IHJlbW92ZVxuICAgIC8vIGl0IGZyb20gMS41LnggeWV0LlxuXG4gICAgLy8gQ29weSBhbnkgYW5ub3RhdGlvbiBwcm9wZXJ0aWVzIChzdGFydGluZyB3aXRoICQpIG92ZXIgdG8gdGhlIGZhY3RvcnkgYW5kIGNvbnRyb2xsZXIgY29uc3RydWN0b3IgZnVuY3Rpb25zXG4gICAgLy8gVGhlc2UgY291bGQgYmUgdXNlZCBieSBsaWJyYXJpZXMgc3VjaCBhcyB0aGUgbmV3IGNvbXBvbmVudCByb3V0ZXJcbiAgICBmb3JFYWNoKG9wdGlvbnMsIGZ1bmN0aW9uKHZhbCwga2V5KSB7XG4gICAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyQnKSB7XG4gICAgICAgIGZhY3Rvcnlba2V5XSA9IHZhbDtcbiAgICAgICAgLy8gRG9uJ3QgdHJ5IHRvIGNvcHkgb3ZlciBhbm5vdGF0aW9ucyB0byBuYW1lZCBjb250cm9sbGVyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXIpKSBjb250cm9sbGVyW2tleV0gPSB2YWw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBmYWN0b3J5LiRpbmplY3QgPSBbJyRpbmplY3RvciddO1xuXG4gICAgcmV0dXJuIHRoaXMuZGlyZWN0aXZlKG5hbWUsIGZhY3RvcnkpO1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0cmlldmVzIG9yIG92ZXJyaWRlcyB0aGUgZGVmYXVsdCByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIGZvciB3aGl0ZWxpc3Rpbmcgb2Ygc2FmZVxuICAgKiB1cmxzIGR1cmluZyBhW2hyZWZdIHNhbml0aXphdGlvbi5cbiAgICpcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudGluZyBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cbiAgICpcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBhW2hyZWZdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0YFxuICAgKiByZWd1bGFyIGV4cHJlc3Npb24uIElmIGEgbWF0Y2ggaXMgZm91bmQsIHRoZSBvcmlnaW5hbCB1cmwgaXMgd3JpdHRlbiBpbnRvIHRoZSBkb20uIE90aGVyd2lzZSxcbiAgICogdGhlIGFic29sdXRlIHVybCBpcyBwcmVmaXhlZCB3aXRoIGAndW5zYWZlOidgIHN0cmluZyBhbmQgb25seSB0aGVuIGlzIGl0IHdyaXR0ZW4gaW50byB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlZ0V4cD19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXG4gICAqIEByZXR1cm5zIHtSZWdFeHB8bmcuJGNvbXBpbGVQcm92aWRlcn0gQ3VycmVudCBSZWdFeHAgaWYgY2FsbGVkIHdpdGhvdXQgdmFsdWUgb3Igc2VsZiBmb3JcbiAgICogICAgY2hhaW5pbmcgb3RoZXJ3aXNlLlxuICAgKi9cbiAgdGhpcy5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xuICAgICAgJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KHJlZ2V4cCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICQkc2FuaXRpemVVcmlQcm92aWRlci5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpO1xuICAgIH1cbiAgfTtcblxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXG4gICAqIHVybHMgZHVyaW5nIGltZ1tzcmNdIHNhbml0aXphdGlvbi5cbiAgICpcbiAgICogVGhlIHNhbml0aXphdGlvbiBpcyBhIHNlY3VyaXR5IG1lYXN1cmUgYWltZWQgYXQgcHJldmVudCBYU1MgYXR0YWNrcyB2aWEgaHRtbCBsaW5rcy5cbiAgICpcbiAgICogQW55IHVybCBhYm91dCB0byBiZSBhc3NpZ25lZCB0byBpbWdbc3JjXSB2aWEgZGF0YS1iaW5kaW5nIGlzIGZpcnN0IG5vcm1hbGl6ZWQgYW5kIHR1cm5lZCBpbnRvXG4gICAqIGFuIGFic29sdXRlIHVybC4gQWZ0ZXJ3YXJkcywgdGhlIHVybCBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IGZ1bmN0aW9uKHJlZ2V4cCkge1xuICAgIGlmIChpc0RlZmluZWQocmVnZXhwKSkge1xuICAgICAgJCRzYW5pdGl6ZVVyaVByb3ZpZGVyLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdChyZWdleHApO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAkJHNhbml0aXplVXJpUHJvdmlkZXIuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICAkY29tcGlsZVByb3ZpZGVyI2RlYnVnSW5mb0VuYWJsZWRcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZW5hYmxlZCB1cGRhdGUgdGhlIGRlYnVnSW5mb0VuYWJsZWQgc3RhdGUgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSBqdXN0IHJldHVybiB0aGVcbiAgICogY3VycmVudCBkZWJ1Z0luZm9FbmFibGVkIHN0YXRlXG4gICAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlIGlmIHVzZWQgYXMgZ2V0dGVyIG9yIGl0c2VsZiAoY2hhaW5pbmcpIGlmIHVzZWQgYXMgc2V0dGVyXG4gICAqXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYWxsIHRoaXMgbWV0aG9kIHRvIGVuYWJsZS9kaXNhYmxlIHZhcmlvdXMgZGVidWcgcnVudGltZSBpbmZvcm1hdGlvbiBpbiB0aGUgY29tcGlsZXIgc3VjaCBhcyBhZGRpbmdcbiAgICogYmluZGluZyBpbmZvcm1hdGlvbiBhbmQgYSByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgc2NvcGUgb24gdG8gRE9NIGVsZW1lbnRzLlxuICAgKiBJZiBlbmFibGVkLCB0aGUgY29tcGlsZXIgd2lsbCBhZGQgdGhlIGZvbGxvd2luZyB0byBET00gZWxlbWVudHMgdGhhdCBoYXZlIGJlZW4gYm91bmQgdG8gdGhlIHNjb3BlXG4gICAqICogYG5nLWJpbmRpbmdgIENTUyBjbGFzc1xuICAgKiAqIGBuZy1zY29wZWAgYW5kIGBuZy1pc29sYXRlZC1zY29wZWAgQ1NTIGNsYXNzZXNcbiAgICogKiBgJGJpbmRpbmdgIGRhdGEgcHJvcGVydHkgY29udGFpbmluZyBhbiBhcnJheSBvZiB0aGUgYmluZGluZyBleHByZXNzaW9uc1xuICAgKiAqIERhdGEgcHJvcGVydGllcyB1c2VkIGJ5IHRoZSB7QGxpbmsgYW5ndWxhci5lbGVtZW50I21ldGhvZHMgYHNjb3BlKClgL2Bpc29sYXRlU2NvcGUoKWAgbWV0aG9kc30gdG8gcmV0dXJuXG4gICAqICAgdGhlIGVsZW1lbnQncyBzY29wZS5cbiAgICogKiBQbGFjZWhvbGRlciBjb21tZW50cyB3aWxsIGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBkaXJlY3RpdmUgYW5kIGJpbmRpbmcgY2F1c2VkIHRoZSBwbGFjZWhvbGRlci5cbiAgICogICBFLmcuIGA8IS0tIG5nSWY6IHNob3VsZFNob3coKSAtLT5gLlxuICAgKlxuICAgKiBZb3UgbWF5IHdhbnQgdG8gZGlzYWJsZSB0aGlzIGluIHByb2R1Y3Rpb24gZm9yIGEgc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgYm9vc3QuIFNlZVxuICAgKiB7QGxpbmsgZ3VpZGUvcHJvZHVjdGlvbiNkaXNhYmxpbmctZGVidWctZGF0YSBEaXNhYmxpbmcgRGVidWcgRGF0YX0gZm9yIG1vcmUuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRydWUuXG4gICAqL1xuICB2YXIgZGVidWdJbmZvRW5hYmxlZCA9IHRydWU7XG4gIHRoaXMuZGVidWdJbmZvRW5hYmxlZCA9IGZ1bmN0aW9uKGVuYWJsZWQpIHtcbiAgICBpZiAoaXNEZWZpbmVkKGVuYWJsZWQpKSB7XG4gICAgICBkZWJ1Z0luZm9FbmFibGVkID0gZW5hYmxlZDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gZGVidWdJbmZvRW5hYmxlZDtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAgJGNvbXBpbGVQcm92aWRlciNwcmVBc3NpZ25CaW5kaW5nc0VuYWJsZWRcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZW5hYmxlZCB1cGRhdGUgdGhlIHByZUFzc2lnbkJpbmRpbmdzRW5hYmxlZCBzdGF0ZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZVxuICAgKiBjdXJyZW50IHByZUFzc2lnbkJpbmRpbmdzRW5hYmxlZCBzdGF0ZVxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxuICAgKlxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBlbmFibGUvZGlzYWJsZSB3aGV0aGVyIGRpcmVjdGl2ZSBjb250cm9sbGVycyBhcmUgYXNzaWduZWQgYmluZGluZ3MgYmVmb3JlXG4gICAqIGNhbGxpbmcgdGhlIGNvbnRyb2xsZXIncyBjb25zdHJ1Y3Rvci5cbiAgICogSWYgZW5hYmxlZCAodHJ1ZSksIHRoZSBjb21waWxlciBhc3NpZ25zIHRoZSB2YWx1ZSBvZiBlYWNoIG9mIHRoZSBiaW5kaW5ncyB0byB0aGVcbiAgICogcHJvcGVydGllcyBvZiB0aGUgY29udHJvbGxlciBvYmplY3QgYmVmb3JlIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGlzIG9iamVjdCBpcyBjYWxsZWQuXG4gICAqXG4gICAqIElmIGRpc2FibGVkIChmYWxzZSksIHRoZSBjb21waWxlciBjYWxscyB0aGUgY29uc3RydWN0b3IgZmlyc3QgYmVmb3JlIGFzc2lnbmluZyBiaW5kaW5ncy5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgZmFsc2UuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIHNpbmNlVmVyc2lvbj1cIjEuNi4wXCJcbiAgICogcmVtb3ZlVmVyc2lvbj1cIjEuNy4wXCJcbiAgICpcbiAgICogVGhpcyBtZXRob2QgYW5kIHRoZSBvcHRpb24gdG8gYXNzaWduIHRoZSBiaW5kaW5ncyBiZWZvcmUgY2FsbGluZyB0aGUgY29udHJvbGxlcidzIGNvbnN0cnVjdG9yXG4gICAqIHdpbGwgYmUgcmVtb3ZlZCBpbiB2MS43LjAuXG4gICAqL1xuICB2YXIgcHJlQXNzaWduQmluZGluZ3NFbmFibGVkID0gZmFsc2U7XG4gIHRoaXMucHJlQXNzaWduQmluZGluZ3NFbmFibGVkID0gZnVuY3Rpb24oZW5hYmxlZCkge1xuICAgIGlmIChpc0RlZmluZWQoZW5hYmxlZCkpIHtcbiAgICAgIHByZUFzc2lnbkJpbmRpbmdzRW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIHByZUFzc2lnbkJpbmRpbmdzRW5hYmxlZDtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAgJGNvbXBpbGVQcm92aWRlciNzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWRcbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFuPX0gZW5hYmxlZCB1cGRhdGUgdGhlIHN0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZCBzdGF0ZSBpZiBwcm92aWRlZCwgb3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZVxuICAgKiBjdXJyZW50IHN0cmljdENvbXBvbmVudEJpbmRpbmdzRW5hYmxlZCBzdGF0ZVxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxuICAgKlxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byBlbmFibGUvZGlzYWJsZSBzdHJpY3QgY29tcG9uZW50IGJpbmRpbmdzIGNoZWNrLiBJZiBlbmFibGVkLCB0aGUgY29tcGlsZXIgd2lsbCBlbmZvcmNlIHRoYXRcbiAgICogZm9yIGFsbCBiaW5kaW5ncyBvZiBhIGNvbXBvbmVudCB0aGF0IGFyZSBub3Qgc2V0IGFzIG9wdGlvbmFsIHdpdGggYD9gLCBhbiBhdHRyaWJ1dGUgbmVlZHMgdG8gYmUgcHJvdmlkZWRcbiAgICogb24gdGhlIGNvbXBvbmVudCdzIEhUTUwgdGFnLlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBmYWxzZS5cbiAgICovXG4gIHZhciBzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQgPSBmYWxzZTtcbiAgdGhpcy5zdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQgPSBmdW5jdGlvbihlbmFibGVkKSB7XG4gICAgaWYgKGlzRGVmaW5lZChlbmFibGVkKSkge1xuICAgICAgc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkID0gZW5hYmxlZDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaWN0Q29tcG9uZW50QmluZGluZ3NFbmFibGVkO1xuICB9O1xuXG4gIHZhciBUVEwgPSAxMDtcbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbXBpbGVQcm92aWRlciNvbkNoYW5nZXNUdGxcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFNldHMgdGhlIG51bWJlciBvZiB0aW1lcyBgJG9uQ2hhbmdlc2AgaG9va3MgY2FuIHRyaWdnZXIgbmV3IGNoYW5nZXMgYmVmb3JlIGdpdmluZyB1cCBhbmRcbiAgICogYXNzdW1pbmcgdGhhdCB0aGUgbW9kZWwgaXMgdW5zdGFibGUuXG4gICAqXG4gICAqIFRoZSBjdXJyZW50IGRlZmF1bHQgaXMgMTAgaXRlcmF0aW9ucy5cbiAgICpcbiAgICogSW4gY29tcGxleCBhcHBsaWNhdGlvbnMgaXQncyBwb3NzaWJsZSB0aGF0IGRlcGVuZGVuY2llcyBiZXR3ZWVuIGAkb25DaGFuZ2VzYCBob29rcyBhbmQgYmluZGluZ3Mgd2lsbCByZXN1bHRcbiAgICogaW4gc2V2ZXJhbCBpdGVyYXRpb25zIG9mIGNhbGxzIHRvIHRoZXNlIGhvb2tzLiBIb3dldmVyIGlmIGFuIGFwcGxpY2F0aW9uIG5lZWRzIG1vcmUgdGhhbiB0aGUgZGVmYXVsdCAxMFxuICAgKiBpdGVyYXRpb25zIHRvIHN0YWJpbGl6ZSB0aGVuIHlvdSBzaG91bGQgaW52ZXN0aWdhdGUgd2hhdCBpcyBjYXVzaW5nIHRoZSBtb2RlbCB0byBjb250aW51b3VzbHkgY2hhbmdlIGR1cmluZ1xuICAgKiB0aGUgYCRvbkNoYW5nZXNgIGhvb2sgZXhlY3V0aW9uLlxuICAgKlxuICAgKiBJbmNyZWFzaW5nIHRoZSBUVEwgY291bGQgaGF2ZSBwZXJmb3JtYW5jZSBpbXBsaWNhdGlvbnMsIHNvIHlvdSBzaG91bGQgbm90IGNoYW5nZSBpdCB3aXRob3V0IHByb3BlciBqdXN0aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbGltaXQgVGhlIG51bWJlciBvZiBgJG9uQ2hhbmdlc2AgaG9vayBpdGVyYXRpb25zLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfG9iamVjdH0gdGhlIGN1cnJlbnQgbGltaXQgKG9yIGB0aGlzYCBpZiBjYWxsZWQgYXMgYSBzZXR0ZXIgZm9yIGNoYWluaW5nKVxuICAgKi9cbiAgdGhpcy5vbkNoYW5nZXNUdGwgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBUVEwgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gVFRMO1xuICB9O1xuXG4gIHZhciBjb21tZW50RGlyZWN0aXZlc0VuYWJsZWRDb25maWcgPSB0cnVlO1xuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkY29tcGlsZVByb3ZpZGVyI2NvbW1lbnREaXJlY3RpdmVzRW5hYmxlZFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogSXQgaW5kaWNhdGVzIHRvIHRoZSBjb21waWxlclxuICAgKiB3aGV0aGVyIG9yIG5vdCBkaXJlY3RpdmVzIG9uIGNvbW1lbnRzIHNob3VsZCBiZSBjb21waWxlZC5cbiAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKlxuICAgKiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2l0aCBmYWxzZSBkaXNhYmxlcyB0aGUgY29tcGlsYXRpb24gb2YgZGlyZWN0aXZlc1xuICAgKiBvbiBjb21tZW50cyBmb3IgdGhlIHdob2xlIGFwcGxpY2F0aW9uLlxuICAgKiBUaGlzIHJlc3VsdHMgaW4gYSBjb21waWxhdGlvbiBwZXJmb3JtYW5jZSBnYWluLFxuICAgKiBhcyB0aGUgY29tcGlsZXIgZG9lc24ndCBoYXZlIHRvIGNoZWNrIGNvbW1lbnRzIHdoZW4gbG9va2luZyBmb3IgZGlyZWN0aXZlcy5cbiAgICogVGhpcyBzaG91bGQgaG93ZXZlciBvbmx5IGJlIHVzZWQgaWYgeW91IGFyZSBzdXJlIHRoYXQgbm8gY29tbWVudCBkaXJlY3RpdmVzIGFyZSB1c2VkIGluXG4gICAqIHRoZSBhcHBsaWNhdGlvbiAoaW5jbHVkaW5nIGFueSAzcmQgcGFydHkgZGlyZWN0aXZlcykuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCBgZmFsc2VgIGlmIHRoZSBjb21waWxlciBtYXkgaWdub3JlIGRpcmVjdGl2ZXMgb24gY29tbWVudHNcbiAgICogQHJldHVybnMge2Jvb2xlYW58b2JqZWN0fSB0aGUgY3VycmVudCB2YWx1ZSAob3IgYHRoaXNgIGlmIGNhbGxlZCBhcyBhIHNldHRlciBmb3IgY2hhaW5pbmcpXG4gICAqL1xuICB0aGlzLmNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZENvbmZpZyA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBjb21tZW50RGlyZWN0aXZlc0VuYWJsZWRDb25maWc7XG4gIH07XG5cblxuICB2YXIgY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZyA9IHRydWU7XG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb21waWxlUHJvdmlkZXIjY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZFxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogSXQgaW5kaWNhdGVzIHRvIHRoZSBjb21waWxlclxuICAgKiB3aGV0aGVyIG9yIG5vdCBkaXJlY3RpdmVzIG9uIGVsZW1lbnQgY2xhc3NlcyBzaG91bGQgYmUgY29tcGlsZWQuXG4gICAqIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICpcbiAgICogQ2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpdGggZmFsc2UgZGlzYWJsZXMgdGhlIGNvbXBpbGF0aW9uIG9mIGRpcmVjdGl2ZXNcbiAgICogb24gZWxlbWVudCBjbGFzc2VzIGZvciB0aGUgd2hvbGUgYXBwbGljYXRpb24uXG4gICAqIFRoaXMgcmVzdWx0cyBpbiBhIGNvbXBpbGF0aW9uIHBlcmZvcm1hbmNlIGdhaW4sXG4gICAqIGFzIHRoZSBjb21waWxlciBkb2Vzbid0IGhhdmUgdG8gY2hlY2sgZWxlbWVudCBjbGFzc2VzIHdoZW4gbG9va2luZyBmb3IgZGlyZWN0aXZlcy5cbiAgICogVGhpcyBzaG91bGQgaG93ZXZlciBvbmx5IGJlIHVzZWQgaWYgeW91IGFyZSBzdXJlIHRoYXQgbm8gY2xhc3MgZGlyZWN0aXZlcyBhcmUgdXNlZCBpblxuICAgKiB0aGUgYXBwbGljYXRpb24gKGluY2x1ZGluZyBhbnkgM3JkIHBhcnR5IGRpcmVjdGl2ZXMpLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgYGZhbHNlYCBpZiB0aGUgY29tcGlsZXIgbWF5IGlnbm9yZSBkaXJlY3RpdmVzIG9uIGVsZW1lbnQgY2xhc3Nlc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbnxvYmplY3R9IHRoZSBjdXJyZW50IHZhbHVlIChvciBgdGhpc2AgaWYgY2FsbGVkIGFzIGEgc2V0dGVyIGZvciBjaGFpbmluZylcbiAgICovXG4gIHRoaXMuY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNzc0NsYXNzRGlyZWN0aXZlc0VuYWJsZWRDb25maWcgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZENvbmZpZztcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBbXG4gICAgICAgICAgICAnJGluamVjdG9yJywgJyRpbnRlcnBvbGF0ZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckdGVtcGxhdGVSZXF1ZXN0JywgJyRwYXJzZScsXG4gICAgICAgICAgICAnJGNvbnRyb2xsZXInLCAnJHJvb3RTY29wZScsICckc2NlJywgJyRhbmltYXRlJywgJyQkc2FuaXRpemVVcmknLFxuICAgIGZ1bmN0aW9uKCRpbmplY3RvciwgICAkaW50ZXJwb2xhdGUsICAgJGV4Y2VwdGlvbkhhbmRsZXIsICAgJHRlbXBsYXRlUmVxdWVzdCwgICAkcGFyc2UsXG4gICAgICAgICAgICAgJGNvbnRyb2xsZXIsICAgJHJvb3RTY29wZSwgICAkc2NlLCAgICRhbmltYXRlLCAgICQkc2FuaXRpemVVcmkpIHtcblxuICAgIHZhciBTSU1QTEVfQVRUUl9OQU1FID0gL15cXHcvO1xuICAgIHZhciBzcGVjaWFsQXR0ckhvbGRlciA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuXG4gICAgdmFyIGNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZCA9IGNvbW1lbnREaXJlY3RpdmVzRW5hYmxlZENvbmZpZztcbiAgICB2YXIgY3NzQ2xhc3NEaXJlY3RpdmVzRW5hYmxlZCA9IGNzc0NsYXNzRGlyZWN0aXZlc0VuYWJsZWRDb25maWc7XG5cblxuICAgIHZhciBvbkNoYW5nZXNUdGwgPSBUVEw7XG4gICAgLy8gVGhlIG9uQ2hhbmdlcyBob29rcyBzaG91bGQgYWxsIGJlIHJ1biB0b2dldGhlciBpbiBhIHNpbmdsZSBkaWdlc3RcbiAgICAvLyBXaGVuIGNoYW5nZXMgb2NjdXIsIHRoZSBjYWxsIHRvIHRyaWdnZXIgdGhlaXIgaG9va3Mgd2lsbCBiZSBhZGRlZCB0byB0aGlzIHF1ZXVlXG4gICAgdmFyIG9uQ2hhbmdlc1F1ZXVlO1xuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgaW4gYSAkJHBvc3REaWdlc3QgdG8gdHJpZ2dlciBhbGwgdGhlIG9uQ2hhbmdlcyBob29rcyBpbiBhIHNpbmdsZSBkaWdlc3RcbiAgICBmdW5jdGlvbiBmbHVzaE9uQ2hhbmdlc1F1ZXVlKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCEoLS1vbkNoYW5nZXNUdGwpKSB7XG4gICAgICAgICAgLy8gV2UgaGF2ZSBoaXQgdGhlIFRUTCBsaW1pdCBzbyByZXNldCBldmVyeXRoaW5nXG4gICAgICAgICAgb25DaGFuZ2VzUXVldWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ2luZmNobmcnLCAnezB9ICRvbkNoYW5nZXMoKSBpdGVyYXRpb25zIHJlYWNoZWQuIEFib3J0aW5nIVxcbicsIFRUTCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbXVzdCBydW4gdGhpcyBob29rIGluIGFuIGFwcGx5IHNpbmNlIHRoZSAkJHBvc3REaWdlc3QgcnVucyBvdXRzaWRlIGFwcGx5XG4gICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBlcnJvcnMgPSBbXTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBvbkNoYW5nZXNRdWV1ZS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBvbkNoYW5nZXNRdWV1ZVtpXSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBlcnJvcnMucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHF1ZXVlIHRvIHRyaWdnZXIgYSBuZXcgc2NoZWR1bGUgbmV4dCB0aW1lIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgICAgICAgb25DaGFuZ2VzUXVldWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9ycztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgb25DaGFuZ2VzVHRsKys7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBBdHRyaWJ1dGVzKGVsZW1lbnQsIGF0dHJpYnV0ZXNUb0NvcHkpIHtcbiAgICAgIGlmIChhdHRyaWJ1dGVzVG9Db3B5KSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlc1RvQ29weSk7XG4gICAgICAgIHZhciBpLCBsLCBrZXk7XG5cbiAgICAgICAgZm9yIChpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICB0aGlzW2tleV0gPSBhdHRyaWJ1dGVzVG9Db3B5W2tleV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJGF0dHIgPSB7fTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kJGVsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cblxuICAgIEF0dHJpYnV0ZXMucHJvdG90eXBlID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkY29tcGlsZS5kaXJlY3RpdmUuQXR0cmlidXRlcyMkbm9ybWFsaXplXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQ29udmVydHMgYW4gYXR0cmlidXRlIG5hbWUgKGUuZy4gZGFzaC9jb2xvbi91bmRlcnNjb3JlLWRlbGltaXRlZCBzdHJpbmcsIG9wdGlvbmFsbHkgcHJlZml4ZWQgd2l0aCBgeC1gIG9yXG4gICAgICAgKiBgZGF0YS1gKSB0byBpdHMgbm9ybWFsaXplZCwgY2FtZWxDYXNlIGZvcm0uXG4gICAgICAgKlxuICAgICAgICogQWxzbyB0aGVyZSBpcyBzcGVjaWFsIGNhc2UgZm9yIE1veiBwcmVmaXggc3RhcnRpbmcgd2l0aCB1cHBlciBjYXNlIGxldHRlci5cbiAgICAgICAqXG4gICAgICAgKiBGb3IgZnVydGhlciBpbmZvcm1hdGlvbiBjaGVjayBvdXQgdGhlIGd1aWRlIG9uIHtAbGluayBndWlkZS9kaXJlY3RpdmUjbWF0Y2hpbmctZGlyZWN0aXZlcyBNYXRjaGluZyBEaXJlY3RpdmVzfVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gICAgICAgKi9cbiAgICAgICRub3JtYWxpemU6IGRpcmVjdGl2ZU5vcm1hbGl6ZSxcblxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyRhZGRDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFkZHMgdGhlIENTUyBjbGFzcyB2YWx1ZSBzcGVjaWZpZWQgYnkgdGhlIGNsYXNzVmFsIHBhcmFtZXRlciB0byB0aGUgZWxlbWVudC4gSWYgYW5pbWF0aW9uc1xuICAgICAgICogYXJlIGVuYWJsZWQgdGhlbiBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQgZm9yIHRoZSBjbGFzcyBhZGRpdGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NWYWwgVGhlIGNsYXNzTmFtZSB2YWx1ZSB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAqL1xuICAgICAgJGFkZENsYXNzOiBmdW5jdGlvbihjbGFzc1ZhbCkge1xuICAgICAgICBpZiAoY2xhc3NWYWwgJiYgY2xhc3NWYWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCBjbGFzc1ZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHJlbW92ZUNsYXNzXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmVtb3ZlcyB0aGUgQ1NTIGNsYXNzIHZhbHVlIHNwZWNpZmllZCBieSB0aGUgY2xhc3NWYWwgcGFyYW1ldGVyIGZyb20gdGhlIGVsZW1lbnQuIElmXG4gICAgICAgKiBhbmltYXRpb25zIGFyZSBlbmFibGVkIHRoZW4gYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGZvciB0aGUgY2xhc3MgcmVtb3ZhbC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NWYWwgVGhlIGNsYXNzTmFtZSB2YWx1ZSB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gICAgICAgKi9cbiAgICAgICRyZW1vdmVDbGFzczogZnVuY3Rpb24oY2xhc3NWYWwpIHtcbiAgICAgICAgaWYgKGNsYXNzVmFsICYmIGNsYXNzVmFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgY2xhc3NWYWwpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzIyR1cGRhdGVDbGFzc1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIEFkZHMgYW5kIHJlbW92ZXMgdGhlIGFwcHJvcHJpYXRlIENTUyBjbGFzcyB2YWx1ZXMgdG8gdGhlIGVsZW1lbnQgYmFzZWQgb24gdGhlIGRpZmZlcmVuY2VcbiAgICAgICAqIGJldHdlZW4gdGhlIG5ldyBhbmQgb2xkIENTUyBjbGFzcyB2YWx1ZXMgKHNwZWNpZmllZCBhcyBuZXdDbGFzc2VzIGFuZCBvbGRDbGFzc2VzKS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3Q2xhc3NlcyBUaGUgY3VycmVudCBDU1MgY2xhc3NOYW1lIHZhbHVlXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gb2xkQ2xhc3NlcyBUaGUgZm9ybWVyIENTUyBjbGFzc05hbWUgdmFsdWVcbiAgICAgICAqL1xuICAgICAgJHVwZGF0ZUNsYXNzOiBmdW5jdGlvbihuZXdDbGFzc2VzLCBvbGRDbGFzc2VzKSB7XG4gICAgICAgIHZhciB0b0FkZCA9IHRva2VuRGlmZmVyZW5jZShuZXdDbGFzc2VzLCBvbGRDbGFzc2VzKTtcbiAgICAgICAgaWYgKHRvQWRkICYmIHRvQWRkLmxlbmd0aCkge1xuICAgICAgICAgICRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCB0b0FkZCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdG9SZW1vdmUgPSB0b2tlbkRpZmZlcmVuY2Uob2xkQ2xhc3NlcywgbmV3Q2xhc3Nlcyk7XG4gICAgICAgIGlmICh0b1JlbW92ZSAmJiB0b1JlbW92ZS5sZW5ndGgpIHtcbiAgICAgICAgICAkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgdG9SZW1vdmUpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFNldCBhIG5vcm1hbGl6ZWQgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50IGluIGEgd2F5IHN1Y2ggdGhhdCBhbGwgZGlyZWN0aXZlc1xuICAgICAgICogY2FuIHNoYXJlIHRoZSBhdHRyaWJ1dGUuIFRoaXMgZnVuY3Rpb24gcHJvcGVybHkgaGFuZGxlcyBib29sZWFuIGF0dHJpYnV0ZXMuXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IE5vcm1hbGl6ZWQga2V5LiAoaWUgbmdBdHRyaWJ1dGUpXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ3xib29sZWFufSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LiBJZiBgbnVsbGAgYXR0cmlidXRlIHdpbGwgYmUgZGVsZXRlZC5cbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHdyaXRlQXR0ciBJZiBmYWxzZSwgZG9lcyBub3Qgd3JpdGUgdGhlIHZhbHVlIHRvIERPTSBlbGVtZW50IGF0dHJpYnV0ZS5cbiAgICAgICAqICAgICBEZWZhdWx0cyB0byB0cnVlLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmc9fSBhdHRyTmFtZSBPcHRpb25hbCBub25lIG5vcm1hbGl6ZWQgbmFtZS4gRGVmYXVsdHMgdG8ga2V5LlxuICAgICAgICovXG4gICAgICAkc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlLCB3cml0ZUF0dHIsIGF0dHJOYW1lKSB7XG4gICAgICAgIC8vIFRPRE86IGRlY2lkZSB3aGV0aGVyIG9yIG5vdCB0byB0aHJvdyBhbiBlcnJvciBpZiBcImNsYXNzXCJcbiAgICAgICAgLy9pcyBzZXQgdGhyb3VnaCB0aGlzIGZ1bmN0aW9uIHNpbmNlIGl0IG1heSBjYXVzZSAkdXBkYXRlQ2xhc3MgdG9cbiAgICAgICAgLy9iZWNvbWUgdW5zdGFibGUuXG5cbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLiQkZWxlbWVudFswXSxcbiAgICAgICAgICAgIGJvb2xlYW5LZXkgPSBnZXRCb29sZWFuQXR0ck5hbWUobm9kZSwga2V5KSxcbiAgICAgICAgICAgIGFsaWFzZWRLZXkgPSBnZXRBbGlhc2VkQXR0ck5hbWUoa2V5KSxcbiAgICAgICAgICAgIG9ic2VydmVyID0ga2V5LFxuICAgICAgICAgICAgbm9kZU5hbWU7XG5cbiAgICAgICAgaWYgKGJvb2xlYW5LZXkpIHtcbiAgICAgICAgICB0aGlzLiQkZWxlbWVudC5wcm9wKGtleSwgdmFsdWUpO1xuICAgICAgICAgIGF0dHJOYW1lID0gYm9vbGVhbktleTtcbiAgICAgICAgfSBlbHNlIGlmIChhbGlhc2VkS2V5KSB7XG4gICAgICAgICAgdGhpc1thbGlhc2VkS2V5XSA9IHZhbHVlO1xuICAgICAgICAgIG9ic2VydmVyID0gYWxpYXNlZEtleTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuXG4gICAgICAgIC8vIHRyYW5zbGF0ZSBub3JtYWxpemVkIGtleSB0byBhY3R1YWwga2V5XG4gICAgICAgIGlmIChhdHRyTmFtZSkge1xuICAgICAgICAgIHRoaXMuJGF0dHJba2V5XSA9IGF0dHJOYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF0dHJOYW1lID0gdGhpcy4kYXR0cltrZXldO1xuICAgICAgICAgIGlmICghYXR0ck5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuJGF0dHJba2V5XSA9IGF0dHJOYW1lID0gc25ha2VfY2FzZShrZXksICctJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbm9kZU5hbWUgPSBub2RlTmFtZV8odGhpcy4kJGVsZW1lbnQpO1xuXG4gICAgICAgIGlmICgobm9kZU5hbWUgPT09ICdhJyAmJiAoa2V5ID09PSAnaHJlZicgfHwga2V5ID09PSAneGxpbmtIcmVmJykpIHx8XG4gICAgICAgICAgICAobm9kZU5hbWUgPT09ICdpbWcnICYmIGtleSA9PT0gJ3NyYycpKSB7XG4gICAgICAgICAgLy8gc2FuaXRpemUgYVtocmVmXSBhbmQgaW1nW3NyY10gdmFsdWVzXG4gICAgICAgICAgdGhpc1trZXldID0gdmFsdWUgPSAkJHNhbml0aXplVXJpKHZhbHVlLCBrZXkgPT09ICdzcmMnKTtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlTmFtZSA9PT0gJ2ltZycgJiYga2V5ID09PSAnc3Jjc2V0JyAmJiBpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgLy8gc2FuaXRpemUgaW1nW3NyY3NldF0gdmFsdWVzXG4gICAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuXG4gICAgICAgICAgLy8gZmlyc3QgY2hlY2sgaWYgdGhlcmUgYXJlIHNwYWNlcyBiZWNhdXNlIGl0J3Mgbm90IHRoZSBzYW1lIHBhdHRlcm5cbiAgICAgICAgICB2YXIgdHJpbW1lZFNyY3NldCA9IHRyaW0odmFsdWUpO1xuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICggICA5OTl4ICAgLHwgICA5OTl3ICAgLHwgICAsfCwgICApXG4gICAgICAgICAgdmFyIHNyY1BhdHRlcm4gPSAvKFxccytcXGQreFxccyosfFxccytcXGQrd1xccyosfFxccyssfCxcXHMrKS87XG4gICAgICAgICAgdmFyIHBhdHRlcm4gPSAvXFxzLy50ZXN0KHRyaW1tZWRTcmNzZXQpID8gc3JjUGF0dGVybiA6IC8oLCkvO1xuXG4gICAgICAgICAgLy8gc3BsaXQgc3Jjc2V0IGludG8gdHVwbGUgb2YgdXJpIGFuZCBkZXNjcmlwdG9yIGV4Y2VwdCBmb3IgdGhlIGxhc3QgaXRlbVxuICAgICAgICAgIHZhciByYXdVcmlzID0gdHJpbW1lZFNyY3NldC5zcGxpdChwYXR0ZXJuKTtcblxuICAgICAgICAgIC8vIGZvciBlYWNoIHR1cGxlc1xuICAgICAgICAgIHZhciBuYnJVcmlzV2l0aDJwYXJ0cyA9IE1hdGguZmxvb3IocmF3VXJpcy5sZW5ndGggLyAyKTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5iclVyaXNXaXRoMnBhcnRzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpbm5lcklkeCA9IGkgKiAyO1xuICAgICAgICAgICAgLy8gc2FuaXRpemUgdGhlIHVyaVxuICAgICAgICAgICAgcmVzdWx0ICs9ICQkc2FuaXRpemVVcmkodHJpbShyYXdVcmlzW2lubmVySWR4XSksIHRydWUpO1xuICAgICAgICAgICAgLy8gYWRkIHRoZSBkZXNjcmlwdG9yXG4gICAgICAgICAgICByZXN1bHQgKz0gKCcgJyArIHRyaW0ocmF3VXJpc1tpbm5lcklkeCArIDFdKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gc3BsaXQgdGhlIGxhc3QgaXRlbSBpbnRvIHVyaSBhbmQgZGVzY3JpcHRvclxuICAgICAgICAgIHZhciBsYXN0VHVwbGUgPSB0cmltKHJhd1VyaXNbaSAqIDJdKS5zcGxpdCgvXFxzLyk7XG5cbiAgICAgICAgICAvLyBzYW5pdGl6ZSB0aGUgbGFzdCB1cmlcbiAgICAgICAgICByZXN1bHQgKz0gJCRzYW5pdGl6ZVVyaSh0cmltKGxhc3RUdXBsZVswXSksIHRydWUpO1xuXG4gICAgICAgICAgLy8gYW5kIGFkZCB0aGUgbGFzdCBkZXNjcmlwdG9yIGlmIGFueVxuICAgICAgICAgIGlmIChsYXN0VHVwbGUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gKCcgJyArIHRyaW0obGFzdFR1cGxlWzFdKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlID0gcmVzdWx0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdyaXRlQXR0ciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGF0dHJOYW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKFNJTVBMRV9BVFRSX05BTUUudGVzdChhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgdGhpcy4kJGVsZW1lbnQuYXR0cihhdHRyTmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0U3BlY2lhbEF0dHIodGhpcy4kJGVsZW1lbnRbMF0sIGF0dHJOYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmlyZSBvYnNlcnZlcnNcbiAgICAgICAgdmFyICQkb2JzZXJ2ZXJzID0gdGhpcy4kJG9ic2VydmVycztcbiAgICAgICAgaWYgKCQkb2JzZXJ2ZXJzKSB7XG4gICAgICAgICAgZm9yRWFjaCgkJG9ic2VydmVyc1tvYnNlcnZlcl0sIGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmbih2YWx1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJG9ic2VydmVcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBPYnNlcnZlcyBhbiBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBvYnNlcnZlciBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb25jZSBkdXJpbmcgdGhlIG5leHQgYCRkaWdlc3RgIGZvbGxvd2luZ1xuICAgICAgICogY29tcGlsYXRpb24uIFRoZSBvYnNlcnZlciBpcyB0aGVuIGludm9rZWQgd2hlbmV2ZXIgdGhlIGludGVycG9sYXRlZCB2YWx1ZVxuICAgICAgICogY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IE5vcm1hbGl6ZWQga2V5LiAoaWUgbmdBdHRyaWJ1dGUpIC5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW50ZXJwb2xhdGVkVmFsdWUpfSBmbiBGdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW5ldmVyXG4gICAgICAgICAgICAgICAgdGhlIGludGVycG9sYXRlZCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIGNoYW5nZXMuXG4gICAgICAgKiAgICAgICAgU2VlIHRoZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiNob3ctdGV4dC1hbmQtYXR0cmlidXRlLWJpbmRpbmdzLXdvcmsgSW50ZXJwb2xhdGlvblxuICAgICAgICogICAgICAgIGd1aWRlfSBmb3IgbW9yZSBpbmZvLlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBvYnNlcnZlci5cbiAgICAgICAqL1xuICAgICAgJG9ic2VydmU6IGZ1bmN0aW9uKGtleSwgZm4pIHtcbiAgICAgICAgdmFyIGF0dHJzID0gdGhpcyxcbiAgICAgICAgICAgICQkb2JzZXJ2ZXJzID0gKGF0dHJzLiQkb2JzZXJ2ZXJzIHx8IChhdHRycy4kJG9ic2VydmVycyA9IGNyZWF0ZU1hcCgpKSksXG4gICAgICAgICAgICBsaXN0ZW5lcnMgPSAoJCRvYnNlcnZlcnNba2V5XSB8fCAoJCRvYnNlcnZlcnNba2V5XSA9IFtdKSk7XG5cbiAgICAgICAgbGlzdGVuZXJzLnB1c2goZm4pO1xuICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCFsaXN0ZW5lcnMuJCRpbnRlciAmJiBhdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmICFpc1VuZGVmaW5lZChhdHRyc1trZXldKSkge1xuICAgICAgICAgICAgLy8gbm8gb25lIHJlZ2lzdGVyZWQgYXR0cmlidXRlIGludGVycG9sYXRpb24gZnVuY3Rpb24sIHNvIGxldHMgY2FsbCBpdCBtYW51YWxseVxuICAgICAgICAgICAgZm4oYXR0cnNba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgYXJyYXlSZW1vdmUobGlzdGVuZXJzLCBmbik7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNldFNwZWNpYWxBdHRyKGVsZW1lbnQsIGF0dHJOYW1lLCB2YWx1ZSkge1xuICAgICAgLy8gQXR0cmlidXRlcyBuYW1lcyB0aGF0IGRvIG5vdCBzdGFydCB3aXRoIGxldHRlcnMgKHN1Y2ggYXMgYChjbGljaylgKSBjYW5ub3QgYmUgc2V0IHVzaW5nIGBzZXRBdHRyaWJ1dGVgXG4gICAgICAvLyBzbyB3ZSBoYXZlIHRvIGp1bXAgdGhyb3VnaCBzb21lIGhvb3BzIHRvIGdldCBzdWNoIGFuIGF0dHJpYnV0ZVxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9wdWxsLzEzMzE4XG4gICAgICBzcGVjaWFsQXR0ckhvbGRlci5pbm5lckhUTUwgPSAnPHNwYW4gJyArIGF0dHJOYW1lICsgJz4nO1xuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBzcGVjaWFsQXR0ckhvbGRlci5maXJzdENoaWxkLmF0dHJpYnV0ZXM7XG4gICAgICB2YXIgYXR0cmlidXRlID0gYXR0cmlidXRlc1swXTtcbiAgICAgIC8vIFdlIGhhdmUgdG8gcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgZnJvbSBpdHMgY29udGFpbmVyIGVsZW1lbnQgYmVmb3JlIHdlIGNhbiBhZGQgaXQgdG8gdGhlIGRlc3RpbmF0aW9uIGVsZW1lbnRcbiAgICAgIGF0dHJpYnV0ZXMucmVtb3ZlTmFtZWRJdGVtKGF0dHJpYnV0ZS5uYW1lKTtcbiAgICAgIGF0dHJpYnV0ZS52YWx1ZSA9IHZhbHVlO1xuICAgICAgZWxlbWVudC5hdHRyaWJ1dGVzLnNldE5hbWVkSXRlbShhdHRyaWJ1dGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICB0cnkge1xuICAgICAgICAkZWxlbWVudC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpZ25vcmUsIHNpbmNlIGl0IG1lYW5zIHRoYXQgd2UgYXJlIHRyeWluZyB0byBzZXQgY2xhc3Mgb25cbiAgICAgICAgLy8gU1ZHIGVsZW1lbnQsIHdoZXJlIGNsYXNzIG5hbWUgaXMgcmVhZC1vbmx5LlxuICAgICAgfVxuICAgIH1cblxuXG4gICAgdmFyIHN0YXJ0U3ltYm9sID0gJGludGVycG9sYXRlLnN0YXJ0U3ltYm9sKCksXG4gICAgICAgIGVuZFN5bWJvbCA9ICRpbnRlcnBvbGF0ZS5lbmRTeW1ib2woKSxcbiAgICAgICAgZGVub3JtYWxpemVUZW1wbGF0ZSA9IChzdGFydFN5bWJvbCA9PT0gJ3t7JyAmJiBlbmRTeW1ib2wgID09PSAnfX0nKVxuICAgICAgICAgICAgPyBpZGVudGl0eVxuICAgICAgICAgICAgOiBmdW5jdGlvbiBkZW5vcm1hbGl6ZVRlbXBsYXRlKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHtcXHsvZywgc3RhcnRTeW1ib2wpLnJlcGxhY2UoL319L2csIGVuZFN5bWJvbCk7XG4gICAgICAgIH0sXG4gICAgICAgIE5HX0FUVFJfQklORElORyA9IC9ebmdBdHRyW0EtWl0vO1xuICAgIHZhciBNVUxUSV9FTEVNRU5UX0RJUl9SRSA9IC9eKC4rKVN0YXJ0JC87XG5cbiAgICBjb21waWxlLiQkYWRkQmluZGluZ0luZm8gPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRCaW5kaW5nSW5mbygkZWxlbWVudCwgYmluZGluZykge1xuICAgICAgdmFyIGJpbmRpbmdzID0gJGVsZW1lbnQuZGF0YSgnJGJpbmRpbmcnKSB8fCBbXTtcblxuICAgICAgaWYgKGlzQXJyYXkoYmluZGluZykpIHtcbiAgICAgICAgYmluZGluZ3MgPSBiaW5kaW5ncy5jb25jYXQoYmluZGluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiaW5kaW5ncy5wdXNoKGJpbmRpbmcpO1xuICAgICAgfVxuXG4gICAgICAkZWxlbWVudC5kYXRhKCckYmluZGluZycsIGJpbmRpbmdzKTtcbiAgICB9IDogbm9vcDtcblxuICAgIGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3MgPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRCaW5kaW5nQ2xhc3MoJGVsZW1lbnQpIHtcbiAgICAgIHNhZmVBZGRDbGFzcygkZWxlbWVudCwgJ25nLWJpbmRpbmcnKTtcbiAgICB9IDogbm9vcDtcblxuICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8gPSBkZWJ1Z0luZm9FbmFibGVkID8gZnVuY3Rpb24gJCRhZGRTY29wZUluZm8oJGVsZW1lbnQsIHNjb3BlLCBpc29sYXRlZCwgbm9UZW1wbGF0ZSkge1xuICAgICAgdmFyIGRhdGFOYW1lID0gaXNvbGF0ZWQgPyAobm9UZW1wbGF0ZSA/ICckaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZScgOiAnJGlzb2xhdGVTY29wZScpIDogJyRzY29wZSc7XG4gICAgICAkZWxlbWVudC5kYXRhKGRhdGFOYW1lLCBzY29wZSk7XG4gICAgfSA6IG5vb3A7XG5cbiAgICBjb21waWxlLiQkYWRkU2NvcGVDbGFzcyA9IGRlYnVnSW5mb0VuYWJsZWQgPyBmdW5jdGlvbiAkJGFkZFNjb3BlQ2xhc3MoJGVsZW1lbnQsIGlzb2xhdGVkKSB7XG4gICAgICBzYWZlQWRkQ2xhc3MoJGVsZW1lbnQsIGlzb2xhdGVkID8gJ25nLWlzb2xhdGUtc2NvcGUnIDogJ25nLXNjb3BlJyk7XG4gICAgfSA6IG5vb3A7XG5cbiAgICBjb21waWxlLiQkY3JlYXRlQ29tbWVudCA9IGZ1bmN0aW9uKGRpcmVjdGl2ZU5hbWUsIGNvbW1lbnQpIHtcbiAgICAgIHZhciBjb250ZW50ID0gJyc7XG4gICAgICBpZiAoZGVidWdJbmZvRW5hYmxlZCkge1xuICAgICAgICBjb250ZW50ID0gJyAnICsgKGRpcmVjdGl2ZU5hbWUgfHwgJycpICsgJzogJztcbiAgICAgICAgaWYgKGNvbW1lbnQpIGNvbnRlbnQgKz0gY29tbWVudCArICcgJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGNvbXBpbGU7XG5cbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICBmdW5jdGlvbiBjb21waWxlKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIGlmICghKCRjb21waWxlTm9kZXMgaW5zdGFuY2VvZiBqcUxpdGUpKSB7XG4gICAgICAgIC8vIGpxdWVyeSBhbHdheXMgcmV3cmFwcywgd2hlcmVhcyB3ZSBuZWVkIHRvIHByZXNlcnZlIHRoZSBvcmlnaW5hbCBzZWxlY3RvciBzbyB0aGF0IHdlIGNhblxuICAgICAgICAvLyBtb2RpZnkgaXQuXG4gICAgICAgICRjb21waWxlTm9kZXMgPSBqcUxpdGUoJGNvbXBpbGVOb2Rlcyk7XG4gICAgICB9XG4gICAgICB2YXIgY29tcG9zaXRlTGlua0ZuID1cbiAgICAgICAgICAgICAgY29tcGlsZU5vZGVzKCRjb21waWxlTm9kZXMsIHRyYW5zY2x1ZGVGbiwgJGNvbXBpbGVOb2RlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xuICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoJGNvbXBpbGVOb2Rlcyk7XG4gICAgICB2YXIgbmFtZXNwYWNlID0gbnVsbDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBwdWJsaWNMaW5rRm4oc2NvcGUsIGNsb25lQ29ubmVjdEZuLCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghJGNvbXBpbGVOb2Rlcykge1xuICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdtdWx0aWxpbmsnLCAnVGhpcyBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gbGlua2VkLicpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydEFyZyhzY29wZSwgJ3Njb3BlJyk7XG5cbiAgICAgICAgaWYgKHByZXZpb3VzQ29tcGlsZUNvbnRleHQgJiYgcHJldmlvdXNDb21waWxlQ29udGV4dC5uZWVkc05ld1Njb3BlKSB7XG4gICAgICAgICAgLy8gQSBwYXJlbnQgZGlyZWN0aXZlIGRpZCBhIHJlcGxhY2UgYW5kIGEgZGlyZWN0aXZlIG9uIHRoaXMgZWxlbWVudCBhc2tlZFxuICAgICAgICAgIC8vIGZvciB0cmFuc2NsdXNpb24sIHdoaWNoIGNhdXNlZCB1cyB0byBsb3NlIGEgbGF5ZXIgb2YgZWxlbWVudCBvbiB3aGljaFxuICAgICAgICAgIC8vIHdlIGNvdWxkIGhvbGQgdGhlIG5ldyB0cmFuc2NsdXNpb24gc2NvcGUsIHNvIHdlIHdpbGwgY3JlYXRlIGl0IG1hbnVhbGx5XG4gICAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgICBzY29wZSA9IHNjb3BlLiRwYXJlbnQuJG5ldygpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiA9IG9wdGlvbnMucGFyZW50Qm91bmRUcmFuc2NsdWRlRm4sXG4gICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzID0gb3B0aW9ucy50cmFuc2NsdWRlQ29udHJvbGxlcnMsXG4gICAgICAgICAgZnV0dXJlUGFyZW50RWxlbWVudCA9IG9wdGlvbnMuZnV0dXJlUGFyZW50RWxlbWVudDtcblxuICAgICAgICAvLyBXaGVuIGBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbmAgaXMgcGFzc2VkLCBpdCBpcyBhXG4gICAgICAgIC8vIGBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZWAgZnVuY3Rpb24gKGl0IHdhcyBwcmV2aW91c2x5IHBhc3NlZFxuICAgICAgICAvLyBhcyBgdHJhbnNjbHVkZWAgdG8gZGlyZWN0aXZlLmxpbmspIHNvIHdlIG11c3QgdW53cmFwIGl0IHRvIGdldFxuICAgICAgICAvLyBpdHMgYGJvdW5kVHJhbnNjbHVkZUZuYFxuICAgICAgICBpZiAocGFyZW50Qm91bmRUcmFuc2NsdWRlRm4gJiYgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4uJCRib3VuZFRyYW5zY2x1ZGUpIHtcbiAgICAgICAgICBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbiA9IHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuLiQkYm91bmRUcmFuc2NsdWRlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFuYW1lc3BhY2UpIHtcbiAgICAgICAgICBuYW1lc3BhY2UgPSBkZXRlY3ROYW1lc3BhY2VGb3JDaGlsZEVsZW1lbnRzKGZ1dHVyZVBhcmVudEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciAkbGlua05vZGU7XG4gICAgICAgIGlmIChuYW1lc3BhY2UgIT09ICdodG1sJykge1xuICAgICAgICAgIC8vIFdoZW4gdXNpbmcgYSBkaXJlY3RpdmUgd2l0aCByZXBsYWNlOnRydWUgYW5kIHRlbXBsYXRlVXJsIHRoZSAkY29tcGlsZU5vZGVzXG4gICAgICAgICAgLy8gKG9yIGEgY2hpbGQgZWxlbWVudCBpbnNpZGUgb2YgdGhlbSlcbiAgICAgICAgICAvLyBtaWdodCBjaGFuZ2UsIHNvIHdlIG5lZWQgdG8gcmVjcmVhdGUgdGhlIG5hbWVzcGFjZSBhZGFwdGVkIGNvbXBpbGVOb2Rlc1xuICAgICAgICAgIC8vIGZvciBjYWxsIHRvIHRoZSBsaW5rIGZ1bmN0aW9uLlxuICAgICAgICAgIC8vIE5vdGU6IFRoaXMgd2lsbCBhbHJlYWR5IGNsb25lIHRoZSBub2Rlcy4uLlxuICAgICAgICAgICRsaW5rTm9kZSA9IGpxTGl0ZShcbiAgICAgICAgICAgIHdyYXBUZW1wbGF0ZShuYW1lc3BhY2UsIGpxTGl0ZSgnPGRpdj4nKS5hcHBlbmQoJGNvbXBpbGVOb2RlcykuaHRtbCgpKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2xvbmVDb25uZWN0Rm4pIHtcbiAgICAgICAgICAvLyBpbXBvcnRhbnQhITogd2UgbXVzdCBjYWxsIG91ciBqcUxpdGUuY2xvbmUoKSBzaW5jZSB0aGUgalF1ZXJ5IG9uZSBpcyB0cnlpbmcgdG8gYmUgc21hcnRcbiAgICAgICAgICAvLyBhbmQgc29tZXRpbWVzIGNoYW5nZXMgdGhlIHN0cnVjdHVyZSBvZiB0aGUgRE9NLlxuICAgICAgICAgICRsaW5rTm9kZSA9IEpRTGl0ZVByb3RvdHlwZS5jbG9uZS5jYWxsKCRjb21waWxlTm9kZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRsaW5rTm9kZSA9ICRjb21waWxlTm9kZXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJhbnNjbHVkZUNvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgZm9yICh2YXIgY29udHJvbGxlck5hbWUgaW4gdHJhbnNjbHVkZUNvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgICAkbGlua05vZGUuZGF0YSgnJCcgKyBjb250cm9sbGVyTmFtZSArICdDb250cm9sbGVyJywgdHJhbnNjbHVkZUNvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXS5pbnN0YW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlSW5mbygkbGlua05vZGUsIHNjb3BlKTtcblxuICAgICAgICBpZiAoY2xvbmVDb25uZWN0Rm4pIGNsb25lQ29ubmVjdEZuKCRsaW5rTm9kZSwgc2NvcGUpO1xuICAgICAgICBpZiAoY29tcG9zaXRlTGlua0ZuKSBjb21wb3NpdGVMaW5rRm4oc2NvcGUsICRsaW5rTm9kZSwgJGxpbmtOb2RlLCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgaWYgKCFjbG9uZUNvbm5lY3RGbikge1xuICAgICAgICAgICRjb21waWxlTm9kZXMgPSBjb21wb3NpdGVMaW5rRm4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkbGlua05vZGU7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRldGVjdE5hbWVzcGFjZUZvckNoaWxkRWxlbWVudHMocGFyZW50RWxlbWVudCkge1xuICAgICAgLy8gVE9ETzogTWFrZSB0aGlzIGRldGVjdCBNYXRoTUwgYXMgd2VsbC4uLlxuICAgICAgdmFyIG5vZGUgPSBwYXJlbnRFbGVtZW50ICYmIHBhcmVudEVsZW1lbnRbMF07XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgcmV0dXJuICdodG1sJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBub2RlTmFtZV8obm9kZSkgIT09ICdmb3JlaWdub2JqZWN0JyAmJiB0b1N0cmluZy5jYWxsKG5vZGUpLm1hdGNoKC9TVkcvKSA/ICdzdmcnIDogJ2h0bWwnO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXBpbGUgZnVuY3Rpb24gbWF0Y2hlcyBlYWNoIG5vZGUgaW4gbm9kZUxpc3QgYWdhaW5zdCB0aGUgZGlyZWN0aXZlcy4gT25jZSBhbGwgZGlyZWN0aXZlc1xuICAgICAqIGZvciBhIHBhcnRpY3VsYXIgbm9kZSBhcmUgY29sbGVjdGVkIHRoZWlyIGNvbXBpbGUgZnVuY3Rpb25zIGFyZSBleGVjdXRlZC4gVGhlIGNvbXBpbGVcbiAgICAgKiBmdW5jdGlvbnMgcmV0dXJuIHZhbHVlcyAtIHRoZSBsaW5raW5nIGZ1bmN0aW9ucyAtIGFyZSBjb21iaW5lZCBpbnRvIGEgY29tcG9zaXRlIGxpbmtpbmdcbiAgICAgKiBmdW5jdGlvbiwgd2hpY2ggaXMgdGhlIGEgbGlua2luZyBmdW5jdGlvbiBmb3IgdGhlIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdCBhbiBhcnJheSBvZiBub2RlcyBvciBOb2RlTGlzdCB0byBjb21waWxlXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihhbmd1bGFyLlNjb3BlLCBjbG9uZUF0dGFjaEZuPSl9IHRyYW5zY2x1ZGVGbiBBIGxpbmtpbmcgZnVuY3Rpb24sIHdoZXJlIHRoZVxuICAgICAqICAgICAgICBzY29wZSBhcmd1bWVudCBpcyBhdXRvLWdlbmVyYXRlZCB0byB0aGUgbmV3IGNoaWxkIG9mIHRoZSB0cmFuc2NsdWRlZCBwYXJlbnQgc2NvcGUuXG4gICAgICogQHBhcmFtIHtET01FbGVtZW50PX0gJHJvb3RFbGVtZW50IElmIHRoZSBub2RlTGlzdCBpcyB0aGUgcm9vdCBvZiB0aGUgY29tcGlsYXRpb24gdHJlZSB0aGVuXG4gICAgICogICAgICAgIHRoZSByb290RWxlbWVudCBtdXN0IGJlIHNldCB0aGUganFMaXRlIGNvbGxlY3Rpb24gb2YgdGhlIGNvbXBpbGUgcm9vdC4gVGhpcyBpc1xuICAgICAqICAgICAgICBuZWVkZWQgc28gdGhhdCB0aGUganFMaXRlIGNvbGxlY3Rpb24gaXRlbXMgY2FuIGJlIHJlcGxhY2VkIHdpdGggd2lkZ2V0cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IG1heFByaW9yaXR5IE1heCBkaXJlY3RpdmUgcHJpb3JpdHkuXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGNvbXBvc2l0ZSBsaW5raW5nIGZ1bmN0aW9uIG9mIGFsbCBvZiB0aGUgbWF0Y2hlZCBkaXJlY3RpdmVzIG9yIG51bGwuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY29tcGlsZU5vZGVzKG5vZGVMaXN0LCB0cmFuc2NsdWRlRm4sICRyb290RWxlbWVudCwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XG4gICAgICB2YXIgbGlua0ZucyA9IFtdLFxuICAgICAgICAgIC8vIGBub2RlTGlzdGAgY2FuIGJlIGVpdGhlciBhbiBlbGVtZW50J3MgYC5jaGlsZE5vZGVzYCAobGl2ZSBOb2RlTGlzdClcbiAgICAgICAgICAvLyBvciBhIGpxTGl0ZS9qUXVlcnkgY29sbGVjdGlvbiBvciBhbiBhcnJheVxuICAgICAgICAgIG5vdExpdmVMaXN0ID0gaXNBcnJheShub2RlTGlzdCkgfHwgKG5vZGVMaXN0IGluc3RhbmNlb2YganFMaXRlKSxcbiAgICAgICAgICBhdHRycywgZGlyZWN0aXZlcywgbm9kZUxpbmtGbiwgY2hpbGROb2RlcywgY2hpbGRMaW5rRm4sIGxpbmtGbkZvdW5kLCBub2RlTGlua0ZuRm91bmQ7XG5cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBhdHRycyA9IG5ldyBBdHRyaWJ1dGVzKCk7XG5cbiAgICAgICAgLy8gU3VwcG9ydDogSUUgMTEgb25seVxuICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciAjMTE3ODEgYW5kICMxNDkyNFxuICAgICAgICBpZiAobXNpZSA9PT0gMTEpIHtcbiAgICAgICAgICBtZXJnZUNvbnNlY3V0aXZlVGV4dE5vZGVzKG5vZGVMaXN0LCBpLCBub3RMaXZlTGlzdCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBtdXN0IGFsd2F5cyByZWZlciB0byBgbm9kZUxpc3RbaV1gIGhlcmVhZnRlcixcbiAgICAgICAgLy8gc2luY2UgdGhlIG5vZGVzIGNhbiBiZSByZXBsYWNlZCB1bmRlcm5lYXRoIHVzLlxuICAgICAgICBkaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMobm9kZUxpc3RbaV0sIFtdLCBhdHRycywgaSA9PT0gMCA/IG1heFByaW9yaXR5IDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZURpcmVjdGl2ZSk7XG5cbiAgICAgICAgbm9kZUxpbmtGbiA9IChkaXJlY3RpdmVzLmxlbmd0aClcbiAgICAgICAgICAgID8gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIG5vZGVMaXN0W2ldLCBhdHRycywgdHJhbnNjbHVkZUZuLCAkcm9vdEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIFtdLCBbXSwgcHJldmlvdXNDb21waWxlQ29udGV4dClcbiAgICAgICAgICAgIDogbnVsbDtcblxuICAgICAgICBpZiAobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnNjb3BlKSB7XG4gICAgICAgICAgY29tcGlsZS4kJGFkZFNjb3BlQ2xhc3MoYXR0cnMuJCRlbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoaWxkTGlua0ZuID0gKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCB8fFxuICAgICAgICAgICAgICAgICAgICAgICEoY2hpbGROb2RlcyA9IG5vZGVMaXN0W2ldLmNoaWxkTm9kZXMpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIWNoaWxkTm9kZXMubGVuZ3RoKVxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IGNvbXBpbGVOb2RlcyhjaGlsZE5vZGVzLFxuICAgICAgICAgICAgICAgICBub2RlTGlua0ZuID8gKFxuICAgICAgICAgICAgICAgICAgKG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQgfHwgIW5vZGVMaW5rRm4udGVtcGxhdGVPblRoaXNFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgJiYgbm9kZUxpbmtGbi50cmFuc2NsdWRlKSA6IHRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgaWYgKG5vZGVMaW5rRm4gfHwgY2hpbGRMaW5rRm4pIHtcbiAgICAgICAgICBsaW5rRm5zLnB1c2goaSwgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuICAgICAgICAgIGxpbmtGbkZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICBub2RlTGlua0ZuRm91bmQgPSBub2RlTGlua0ZuRm91bmQgfHwgbm9kZUxpbmtGbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vdXNlIHRoZSBwcmV2aW91cyBjb250ZXh0IG9ubHkgZm9yIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSB2aXJ0dWFsIGdyb3VwXG4gICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyByZXR1cm4gYSBsaW5raW5nIGZ1bmN0aW9uIGlmIHdlIGhhdmUgZm91bmQgYW55dGhpbmcsIG51bGwgb3RoZXJ3aXNlXG4gICAgICByZXR1cm4gbGlua0ZuRm91bmQgPyBjb21wb3NpdGVMaW5rRm4gOiBudWxsO1xuXG4gICAgICBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4oc2NvcGUsIG5vZGVMaXN0LCAkcm9vdEVsZW1lbnQsIHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZSwgY2hpbGRTY29wZSwgaSwgaWksIGlkeCwgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbjtcbiAgICAgICAgdmFyIHN0YWJsZU5vZGVMaXN0O1xuXG5cbiAgICAgICAgaWYgKG5vZGVMaW5rRm5Gb3VuZCkge1xuICAgICAgICAgIC8vIGNvcHkgbm9kZUxpc3Qgc28gdGhhdCBpZiBhIG5vZGVMaW5rRm4gcmVtb3ZlcyBvciBhZGRzIGFuIGVsZW1lbnQgYXQgdGhpcyBET00gbGV2ZWwgb3VyXG4gICAgICAgICAgLy8gb2Zmc2V0cyBkb24ndCBnZXQgc2NyZXdlZCB1cFxuICAgICAgICAgIHZhciBub2RlTGlzdExlbmd0aCA9IG5vZGVMaXN0Lmxlbmd0aDtcbiAgICAgICAgICBzdGFibGVOb2RlTGlzdCA9IG5ldyBBcnJheShub2RlTGlzdExlbmd0aCk7XG5cbiAgICAgICAgICAvLyBjcmVhdGUgYSBzcGFyc2UgYXJyYXkgYnkgb25seSBjb3B5aW5nIHRoZSBlbGVtZW50cyB3aGljaCBoYXZlIGEgbGlua0ZuXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpbmtGbnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgICAgIGlkeCA9IGxpbmtGbnNbaV07XG4gICAgICAgICAgICBzdGFibGVOb2RlTGlzdFtpZHhdID0gbm9kZUxpc3RbaWR4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhYmxlTm9kZUxpc3QgPSBub2RlTGlzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gbGlua0Zucy5sZW5ndGg7IGkgPCBpaTspIHtcbiAgICAgICAgICBub2RlID0gc3RhYmxlTm9kZUxpc3RbbGlua0Zuc1tpKytdXTtcbiAgICAgICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgICAgIGNoaWxkTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXG4gICAgICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcbiAgICAgICAgICAgIGlmIChub2RlTGlua0ZuLnNjb3BlKSB7XG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBzY29wZS4kbmV3KCk7XG4gICAgICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUluZm8oanFMaXRlKG5vZGUpLCBjaGlsZFNjb3BlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoaWxkU2NvcGUgPSBzY29wZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKFxuICAgICAgICAgICAgICAgICAgc2NvcGUsIG5vZGVMaW5rRm4udHJhbnNjbHVkZSwgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm4pO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFub2RlTGlua0ZuLnRlbXBsYXRlT25UaGlzRWxlbWVudCAmJiBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gcGFyZW50Qm91bmRUcmFuc2NsdWRlRm47XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXBhcmVudEJvdW5kVHJhbnNjbHVkZUZuICYmIHRyYW5zY2x1ZGVGbikge1xuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIHRyYW5zY2x1ZGVGbik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBub2RlTGlua0ZuKGNoaWxkTGlua0ZuLCBjaGlsZFNjb3BlLCBub2RlLCAkcm9vdEVsZW1lbnQsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xuXG4gICAgICAgICAgfSBlbHNlIGlmIChjaGlsZExpbmtGbikge1xuICAgICAgICAgICAgY2hpbGRMaW5rRm4oc2NvcGUsIG5vZGUuY2hpbGROb2RlcywgdW5kZWZpbmVkLCBwYXJlbnRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWVyZ2VDb25zZWN1dGl2ZVRleHROb2Rlcyhub2RlTGlzdCwgaWR4LCBub3RMaXZlTGlzdCkge1xuICAgICAgdmFyIG5vZGUgPSBub2RlTGlzdFtpZHhdO1xuICAgICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgIHZhciBzaWJsaW5nO1xuXG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX1RFWFQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzaWJsaW5nID0gcGFyZW50ID8gbm9kZS5uZXh0U2libGluZyA6IG5vZGVMaXN0W2lkeCArIDFdO1xuICAgICAgICBpZiAoIXNpYmxpbmcgfHwgc2libGluZy5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX1RFWFQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUubm9kZVZhbHVlID0gbm9kZS5ub2RlVmFsdWUgKyBzaWJsaW5nLm5vZGVWYWx1ZTtcblxuICAgICAgICBpZiAoc2libGluZy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgc2libGluZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub3RMaXZlTGlzdCAmJiBzaWJsaW5nID09PSBub2RlTGlzdFtpZHggKyAxXSkge1xuICAgICAgICAgIG5vZGVMaXN0LnNwbGljZShpZHggKyAxLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJvdW5kVHJhbnNjbHVkZUZuKHNjb3BlLCB0cmFuc2NsdWRlRm4sIHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4pIHtcbiAgICAgIGZ1bmN0aW9uIGJvdW5kVHJhbnNjbHVkZUZuKHRyYW5zY2x1ZGVkU2NvcGUsIGNsb25lRm4sIGNvbnRyb2xsZXJzLCBmdXR1cmVQYXJlbnRFbGVtZW50LCBjb250YWluaW5nU2NvcGUpIHtcblxuICAgICAgICBpZiAoIXRyYW5zY2x1ZGVkU2NvcGUpIHtcbiAgICAgICAgICB0cmFuc2NsdWRlZFNjb3BlID0gc2NvcGUuJG5ldyhmYWxzZSwgY29udGFpbmluZ1Njb3BlKTtcbiAgICAgICAgICB0cmFuc2NsdWRlZFNjb3BlLiQkdHJhbnNjbHVkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zY2x1ZGVGbih0cmFuc2NsdWRlZFNjb3BlLCBjbG9uZUZuLCB7XG4gICAgICAgICAgcGFyZW50Qm91bmRUcmFuc2NsdWRlRm46IHByZXZpb3VzQm91bmRUcmFuc2NsdWRlRm4sXG4gICAgICAgICAgdHJhbnNjbHVkZUNvbnRyb2xsZXJzOiBjb250cm9sbGVycyxcbiAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50OiBmdXR1cmVQYXJlbnRFbGVtZW50XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBXZSBuZWVkICB0byBhdHRhY2ggdGhlIHRyYW5zY2x1c2lvbiBzbG90cyBvbnRvIHRoZSBgYm91bmRUcmFuc2NsdWRlRm5gXG4gICAgICAvLyBzbyB0aGF0IHRoZXkgYXJlIGF2YWlsYWJsZSBpbnNpZGUgdGhlIGBjb250cm9sbGVyc0JvdW5kVHJhbnNjbHVkZWAgZnVuY3Rpb25cbiAgICAgIHZhciBib3VuZFNsb3RzID0gYm91bmRUcmFuc2NsdWRlRm4uJCRzbG90cyA9IGNyZWF0ZU1hcCgpO1xuICAgICAgZm9yICh2YXIgc2xvdE5hbWUgaW4gdHJhbnNjbHVkZUZuLiQkc2xvdHMpIHtcbiAgICAgICAgaWYgKHRyYW5zY2x1ZGVGbi4kJHNsb3RzW3Nsb3ROYW1lXSkge1xuICAgICAgICAgIGJvdW5kU2xvdHNbc2xvdE5hbWVdID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIHRyYW5zY2x1ZGVGbi4kJHNsb3RzW3Nsb3ROYW1lXSwgcHJldmlvdXNCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYm91bmRTbG90c1tzbG90TmFtZV0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBib3VuZFRyYW5zY2x1ZGVGbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb29rcyBmb3IgZGlyZWN0aXZlcyBvbiB0aGUgZ2l2ZW4gbm9kZSBhbmQgYWRkcyB0aGVtIHRvIHRoZSBkaXJlY3RpdmUgY29sbGVjdGlvbiB3aGljaCBpc1xuICAgICAqIHNvcnRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBub2RlIE5vZGUgdG8gc2VhcmNoLlxuICAgICAqIEBwYXJhbSBkaXJlY3RpdmVzIEFuIGFycmF5IHRvIHdoaWNoIHRoZSBkaXJlY3RpdmVzIGFyZSBhZGRlZCB0by4gVGhpcyBhcnJheSBpcyBzb3J0ZWQgYmVmb3JlXG4gICAgICogICAgICAgIHRoZSBmdW5jdGlvbiByZXR1cm5zLlxuICAgICAqIEBwYXJhbSBhdHRycyBUaGUgc2hhcmVkIGF0dHJzIG9iamVjdCB3aGljaCBpcyB1c2VkIHRvIHBvcHVsYXRlIHRoZSBub3JtYWxpemVkIGF0dHJpYnV0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSBtYXhQcmlvcml0eSBNYXggZGlyZWN0aXZlIHByaW9yaXR5LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNvbGxlY3REaXJlY3RpdmVzKG5vZGUsIGRpcmVjdGl2ZXMsIGF0dHJzLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSB7XG4gICAgICB2YXIgbm9kZVR5cGUgPSBub2RlLm5vZGVUeXBlLFxuICAgICAgICAgIGF0dHJzTWFwID0gYXR0cnMuJGF0dHIsXG4gICAgICAgICAgbWF0Y2gsXG4gICAgICAgICAgbm9kZU5hbWUsXG4gICAgICAgICAgY2xhc3NOYW1lO1xuXG4gICAgICBzd2l0Y2ggKG5vZGVUeXBlKSB7XG4gICAgICAgIGNhc2UgTk9ERV9UWVBFX0VMRU1FTlQ6IC8qIEVsZW1lbnQgKi9cblxuICAgICAgICAgIG5vZGVOYW1lID0gbm9kZU5hbWVfKG5vZGUpO1xuXG4gICAgICAgICAgLy8gdXNlIHRoZSBub2RlIG5hbWU6IDxkaXJlY3RpdmU+XG4gICAgICAgICAgYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsXG4gICAgICAgICAgICAgIGRpcmVjdGl2ZU5vcm1hbGl6ZShub2RlTmFtZSksICdFJywgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSk7XG5cbiAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgdGhlIGF0dHJpYnV0ZXNcbiAgICAgICAgICBmb3IgKHZhciBhdHRyLCBuYW1lLCBuTmFtZSwgbmdBdHRyTmFtZSwgdmFsdWUsIGlzTmdBdHRyLCBuQXR0cnMgPSBub2RlLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgaiA9IDAsIGpqID0gbkF0dHJzICYmIG5BdHRycy5sZW5ndGg7IGogPCBqajsgaisrKSB7XG4gICAgICAgICAgICB2YXIgYXR0clN0YXJ0TmFtZSA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGF0dHJFbmROYW1lID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGF0dHIgPSBuQXR0cnNbal07XG4gICAgICAgICAgICBuYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuXG4gICAgICAgICAgICAvLyBzdXBwb3J0IG5nQXR0ciBhdHRyaWJ1dGUgYmluZGluZ1xuICAgICAgICAgICAgbmdBdHRyTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKTtcbiAgICAgICAgICAgIGlzTmdBdHRyID0gTkdfQVRUUl9CSU5ESU5HLnRlc3QobmdBdHRyTmFtZSk7XG4gICAgICAgICAgICBpZiAoaXNOZ0F0dHIpIHtcbiAgICAgICAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShQUkVGSVhfUkVHRVhQLCAnJylcbiAgICAgICAgICAgICAgICAuc3Vic3RyKDgpLnJlcGxhY2UoL18oLikvZywgZnVuY3Rpb24obWF0Y2gsIGxldHRlcikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbXVsdGlFbGVtZW50TWF0Y2ggPSBuZ0F0dHJOYW1lLm1hdGNoKE1VTFRJX0VMRU1FTlRfRElSX1JFKTtcbiAgICAgICAgICAgIGlmIChtdWx0aUVsZW1lbnRNYXRjaCAmJiBkaXJlY3RpdmVJc011bHRpRWxlbWVudChtdWx0aUVsZW1lbnRNYXRjaFsxXSkpIHtcbiAgICAgICAgICAgICAgYXR0clN0YXJ0TmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgIGF0dHJFbmROYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSA1KSArICdlbmQnO1xuICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSA2KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbk5hbWUgPSBkaXJlY3RpdmVOb3JtYWxpemUobmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIGF0dHJzTWFwW25OYW1lXSA9IG5hbWU7XG4gICAgICAgICAgICBpZiAoaXNOZ0F0dHIgfHwgIWF0dHJzLmhhc093blByb3BlcnR5KG5OYW1lKSkge1xuICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChnZXRCb29sZWFuQXR0ck5hbWUobm9kZSwgbk5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB0cnVlOyAvLyBwcmVzZW5jZSBtZWFucyB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkQXR0ckludGVycG9sYXRlRGlyZWN0aXZlKG5vZGUsIGRpcmVjdGl2ZXMsIHZhbHVlLCBuTmFtZSwgaXNOZ0F0dHIpO1xuICAgICAgICAgICAgYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnQScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIGF0dHJTdGFydE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJFbmROYW1lKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdpbnB1dCcgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgIC8vIEhpZGRlbiBpbnB1dCBlbGVtZW50cyBjYW4gaGF2ZSBzdHJhbmdlIGJlaGF2aW91ciB3aGVuIG5hdmlnYXRpbmcgYmFjayB0byB0aGUgcGFnZVxuICAgICAgICAgICAgLy8gVGhpcyB0ZWxscyB0aGUgYnJvd3NlciBub3QgdG8gdHJ5IHRvIGNhY2hlIGFuZCByZWluc3RhdGUgcHJldmlvdXMgdmFsdWVzXG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnYXV0b2NvbXBsZXRlJywgJ29mZicpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHVzZSBjbGFzcyBhcyBkaXJlY3RpdmVcbiAgICAgICAgICBpZiAoIWNzc0NsYXNzRGlyZWN0aXZlc0VuYWJsZWQpIGJyZWFrO1xuICAgICAgICAgIGNsYXNzTmFtZSA9IG5vZGUuY2xhc3NOYW1lO1xuICAgICAgICAgIGlmIChpc09iamVjdChjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgIC8vIE1heWJlIFNWR0FuaW1hdGVkU3RyaW5nXG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5hbmltVmFsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNTdHJpbmcoY2xhc3NOYW1lKSAmJiBjbGFzc05hbWUgIT09ICcnKSB7XG4gICAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gQ0xBU1NfRElSRUNUSVZFX1JFR0VYUC5leGVjKGNsYXNzTmFtZSkpKSB7XG4gICAgICAgICAgICAgIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG1hdGNoWzJdKTtcbiAgICAgICAgICAgICAgaWYgKGFkZERpcmVjdGl2ZShkaXJlY3RpdmVzLCBuTmFtZSwgJ0MnLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlKSkge1xuICAgICAgICAgICAgICAgIGF0dHJzW25OYW1lXSA9IHRyaW0obWF0Y2hbM10pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS5zdWJzdHIobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOT0RFX1RZUEVfVEVYVDogLyogVGV4dCBOb2RlICovXG4gICAgICAgICAgYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5vZGUubm9kZVZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOT0RFX1RZUEVfQ09NTUVOVDogLyogQ29tbWVudCAqL1xuICAgICAgICAgIGlmICghY29tbWVudERpcmVjdGl2ZXNFbmFibGVkKSBicmVhaztcbiAgICAgICAgICBjb2xsZWN0Q29tbWVudERpcmVjdGl2ZXMobm9kZSwgZGlyZWN0aXZlcywgYXR0cnMsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBkaXJlY3RpdmVzLnNvcnQoYnlQcmlvcml0eSk7XG4gICAgICByZXR1cm4gZGlyZWN0aXZlcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb2xsZWN0Q29tbWVudERpcmVjdGl2ZXMobm9kZSwgZGlyZWN0aXZlcywgYXR0cnMsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpIHtcbiAgICAgIC8vIGZ1bmN0aW9uIGNyZWF0ZWQgYmVjYXVzZSBvZiBwZXJmb3JtYW5jZSwgdHJ5L2NhdGNoIGRpc2FibGVzXG4gICAgICAvLyB0aGUgb3B0aW1pemF0aW9uIG9mIHRoZSB3aG9sZSBmdW5jdGlvbiAjMTQ4NDhcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBtYXRjaCA9IENPTU1FTlRfRElSRUNUSVZFX1JFR0VYUC5leGVjKG5vZGUubm9kZVZhbHVlKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgdmFyIG5OYW1lID0gZGlyZWN0aXZlTm9ybWFsaXplKG1hdGNoWzFdKTtcbiAgICAgICAgICBpZiAoYWRkRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIG5OYW1lLCAnTScsIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUpKSB7XG4gICAgICAgICAgICBhdHRyc1tuTmFtZV0gPSB0cmltKG1hdGNoWzJdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gdHVybnMgb3V0IHRoYXQgdW5kZXIgc29tZSBjaXJjdW1zdGFuY2VzIElFOSB0aHJvd3MgZXJyb3JzIHdoZW4gb25lIGF0dGVtcHRzIHRvIHJlYWRcbiAgICAgICAgLy8gY29tbWVudCdzIG5vZGUgdmFsdWUuXG4gICAgICAgIC8vIEp1c3QgaWdub3JlIGl0IGFuZCBjb250aW51ZS4gKENhbid0IHNlZW0gdG8gcmVwcm9kdWNlIGluIHRlc3QgY2FzZS4pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBub2RlIHdpdGggYSBkaXJlY3RpdmUtc3RhcnQgaXQgY29sbGVjdHMgYWxsIG9mIHRoZSBzaWJsaW5ncyB1bnRpbCBpdCBmaW5kc1xuICAgICAqIGRpcmVjdGl2ZS1lbmQuXG4gICAgICogQHBhcmFtIG5vZGVcbiAgICAgKiBAcGFyYW0gYXR0clN0YXJ0XG4gICAgICogQHBhcmFtIGF0dHJFbmRcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBncm91cFNjYW4obm9kZSwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XG4gICAgICB2YXIgbm9kZXMgPSBbXTtcbiAgICAgIHZhciBkZXB0aCA9IDA7XG4gICAgICBpZiAoYXR0clN0YXJ0ICYmIG5vZGUuaGFzQXR0cmlidXRlICYmIG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIHtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3V0ZXJkaXInLFxuICAgICAgICAgICAgICAgICAgICAgICdVbnRlcm1pbmF0ZWQgYXR0cmlidXRlLCBmb3VuZCBcXCd7MH1cXCcgYnV0IG5vIG1hdGNoaW5nIFxcJ3sxfVxcJyBmb3VuZC4nLFxuICAgICAgICAgICAgICAgICAgICAgIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfRUxFTUVOVCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKGF0dHJTdGFydCkpIGRlcHRoKys7XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoYXR0ckVuZCkpIGRlcHRoLS07XG4gICAgICAgICAgfVxuICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH0gd2hpbGUgKGRlcHRoID4gMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ganFMaXRlKG5vZGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcmFwcGVyIGZvciBsaW5raW5nIGZ1bmN0aW9uIHdoaWNoIGNvbnZlcnRzIG5vcm1hbCBsaW5raW5nIGZ1bmN0aW9uIGludG8gYSBncm91cGVkXG4gICAgICogbGlua2luZyBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0gbGlua0ZuXG4gICAgICogQHBhcmFtIGF0dHJTdGFydFxuICAgICAqIEBwYXJhbSBhdHRyRW5kXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdyb3VwRWxlbWVudHNMaW5rRm5XcmFwcGVyKGxpbmtGbiwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gZ3JvdXBlZEVsZW1lbnRzTGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pIHtcbiAgICAgICAgZWxlbWVudCA9IGdyb3VwU2NhbihlbGVtZW50WzBdLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICByZXR1cm4gbGlua0ZuKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gZ2VuZXJhdG9yIHRoYXQgaXMgdXNlZCB0byBzdXBwb3J0IGJvdGggZWFnZXIgYW5kIGxhenkgY29tcGlsYXRpb25cbiAgICAgKiBsaW5raW5nIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSBlYWdlclxuICAgICAqIEBwYXJhbSAkY29tcGlsZU5vZGVzXG4gICAgICogQHBhcmFtIHRyYW5zY2x1ZGVGblxuICAgICAqIEBwYXJhbSBtYXhQcmlvcml0eVxuICAgICAqIEBwYXJhbSBpZ25vcmVEaXJlY3RpdmVcbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDb21waWxlQ29udGV4dFxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjb21waWxhdGlvbkdlbmVyYXRvcihlYWdlciwgJGNvbXBpbGVOb2RlcywgdHJhbnNjbHVkZUZuLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XG4gICAgICB2YXIgY29tcGlsZWQ7XG5cbiAgICAgIGlmIChlYWdlcikge1xuICAgICAgICByZXR1cm4gY29tcGlsZSgkY29tcGlsZU5vZGVzLCB0cmFuc2NsdWRlRm4sIG1heFByaW9yaXR5LCBpZ25vcmVEaXJlY3RpdmUsIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIC8qKiBAdGhpcyAqLyBmdW5jdGlvbiBsYXp5Q29tcGlsYXRpb24oKSB7XG4gICAgICAgIGlmICghY29tcGlsZWQpIHtcbiAgICAgICAgICBjb21waWxlZCA9IGNvbXBpbGUoJGNvbXBpbGVOb2RlcywgdHJhbnNjbHVkZUZuLCBtYXhQcmlvcml0eSwgaWdub3JlRGlyZWN0aXZlLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KTtcblxuICAgICAgICAgIC8vIE51bGwgb3V0IGFsbCBvZiB0aGVzZSByZWZlcmVuY2VzIGluIG9yZGVyIHRvIG1ha2UgdGhlbSBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uXG4gICAgICAgICAgLy8gc2luY2UgdGhpcyBpcyBhIHBvdGVudGlhbGx5IGxvbmcgbGl2ZWQgY2xvc3VyZVxuICAgICAgICAgICRjb21waWxlTm9kZXMgPSB0cmFuc2NsdWRlRm4gPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcGlsZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT25jZSB0aGUgZGlyZWN0aXZlcyBoYXZlIGJlZW4gY29sbGVjdGVkLCB0aGVpciBjb21waWxlIGZ1bmN0aW9ucyBhcmUgZXhlY3V0ZWQuIFRoaXMgbWV0aG9kXG4gICAgICogaXMgcmVzcG9uc2libGUgZm9yIGlubGluaW5nIGRpcmVjdGl2ZSB0ZW1wbGF0ZXMgYXMgd2VsbCBhcyB0ZXJtaW5hdGluZyB0aGUgYXBwbGljYXRpb25cbiAgICAgKiBvZiB0aGUgZGlyZWN0aXZlcyBpZiB0aGUgdGVybWluYWwgZGlyZWN0aXZlIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzIEFycmF5IG9mIGNvbGxlY3RlZCBkaXJlY3RpdmVzIHRvIGV4ZWN1dGUgdGhlaXIgY29tcGlsZSBmdW5jdGlvbi5cbiAgICAgKiAgICAgICAgdGhpcyBuZWVkcyB0byBiZSBwcmUtc29ydGVkIGJ5IHByaW9yaXR5IG9yZGVyLlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gY29tcGlsZU5vZGUgVGhlIHJhdyBET00gbm9kZSB0byBhcHBseSB0aGUgY29tcGlsZSBmdW5jdGlvbnMgdG9cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVtcGxhdGVBdHRycyBUaGUgc2hhcmVkIGF0dHJpYnV0ZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oYW5ndWxhci5TY29wZSwgY2xvbmVBdHRhY2hGbj0pfSB0cmFuc2NsdWRlRm4gQSBsaW5raW5nIGZ1bmN0aW9uLCB3aGVyZSB0aGVcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUgYXJndW1lbnQgaXMgYXV0by1nZW5lcmF0ZWQgdG8gdGhlIG5ld1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCBvZiB0aGUgdHJhbnNjbHVkZWQgcGFyZW50IHNjb3BlLlxuICAgICAqIEBwYXJhbSB7SlFMaXRlfSBqcUNvbGxlY3Rpb24gSWYgd2UgYXJlIHdvcmtpbmcgb24gdGhlIHJvb3Qgb2YgdGhlIGNvbXBpbGUgdHJlZSB0aGVuIHRoaXNcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50IGhhcyB0aGUgcm9vdCBqcUxpdGUgYXJyYXkgc28gdGhhdCB3ZSBjYW4gcmVwbGFjZSBub2Rlc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gaXQuXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBvcmlnaW5hbFJlcGxhY2VEaXJlY3RpdmUgQW4gb3B0aW9uYWwgZGlyZWN0aXZlIHRoYXQgd2lsbCBiZSBpZ25vcmVkIHdoZW5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21waWxpbmcgdGhlIHRyYW5zY2x1c2lvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5LjxGdW5jdGlvbj59IHByZUxpbmtGbnNcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxGdW5jdGlvbj59IHBvc3RMaW5rRm5zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQgQ29udGV4dCB1c2VkIGZvciBwcmV2aW91cyBjb21waWxhdGlvbiBvZiB0aGUgY3VycmVudFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVcbiAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IGxpbmtGblxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFwcGx5RGlyZWN0aXZlc1RvTm9kZShkaXJlY3RpdmVzLCBjb21waWxlTm9kZSwgdGVtcGxhdGVBdHRycywgdHJhbnNjbHVkZUZuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqcUNvbGxlY3Rpb24sIG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpIHtcbiAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0IHx8IHt9O1xuXG4gICAgICB2YXIgdGVybWluYWxQcmlvcml0eSA9IC1OdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgICAgIG5ld1Njb3BlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5uZXdTY29wZURpcmVjdGl2ZSxcbiAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlcyA9IHByZXZpb3VzQ29tcGlsZUNvbnRleHQuY29udHJvbGxlckRpcmVjdGl2ZXMsXG4gICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID0gcHJldmlvdXNDb21waWxlQ29udGV4dC5uZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0LnRlbXBsYXRlRGlyZWN0aXZlLFxuICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lm5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmUsXG4gICAgICAgICAgaGFzVHJhbnNjbHVkZURpcmVjdGl2ZSA9IGZhbHNlLFxuICAgICAgICAgIGhhc1RlbXBsYXRlID0gZmFsc2UsXG4gICAgICAgICAgaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPSBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlLFxuICAgICAgICAgICRjb21waWxlTm9kZSA9IHRlbXBsYXRlQXR0cnMuJCRlbGVtZW50ID0ganFMaXRlKGNvbXBpbGVOb2RlKSxcbiAgICAgICAgICBkaXJlY3RpdmUsXG4gICAgICAgICAgZGlyZWN0aXZlTmFtZSxcbiAgICAgICAgICAkdGVtcGxhdGUsXG4gICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IG9yaWdpbmFsUmVwbGFjZURpcmVjdGl2ZSxcbiAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiA9IHRyYW5zY2x1ZGVGbixcbiAgICAgICAgICBsaW5rRm4sXG4gICAgICAgICAgZGlkU2NhbkZvck11bHRpcGxlVHJhbnNjbHVzaW9uID0gZmFsc2UsXG4gICAgICAgICAgbWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciA9IGZhbHNlLFxuICAgICAgICAgIGRpcmVjdGl2ZVZhbHVlO1xuXG4gICAgICAvLyBleGVjdXRlcyBhbGwgZGlyZWN0aXZlcyBvbiB0aGUgY3VycmVudCBlbGVtZW50XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgZGlyZWN0aXZlID0gZGlyZWN0aXZlc1tpXTtcbiAgICAgICAgdmFyIGF0dHJTdGFydCA9IGRpcmVjdGl2ZS4kJHN0YXJ0O1xuICAgICAgICB2YXIgYXR0ckVuZCA9IGRpcmVjdGl2ZS4kJGVuZDtcblxuICAgICAgICAvLyBjb2xsZWN0IG11bHRpYmxvY2sgc2VjdGlvbnNcbiAgICAgICAgaWYgKGF0dHJTdGFydCkge1xuICAgICAgICAgICRjb21waWxlTm9kZSA9IGdyb3VwU2Nhbihjb21waWxlTm9kZSwgYXR0clN0YXJ0LCBhdHRyRW5kKTtcbiAgICAgICAgfVxuICAgICAgICAkdGVtcGxhdGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRlcm1pbmFsUHJpb3JpdHkgPiBkaXJlY3RpdmUucHJpb3JpdHkpIHtcbiAgICAgICAgICBicmVhazsgLy8gcHJldmVudCBmdXJ0aGVyIHByb2Nlc3Npbmcgb2YgZGlyZWN0aXZlc1xuICAgICAgICB9XG5cbiAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUuc2NvcGU7XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZVZhbHVlKSB7XG5cbiAgICAgICAgICAvLyBza2lwIHRoZSBjaGVjayBmb3IgZGlyZWN0aXZlcyB3aXRoIGFzeW5jIHRlbXBsYXRlcywgd2UnbGwgY2hlY2sgdGhlIGRlcml2ZWQgc3luY1xuICAgICAgICAgIC8vIGRpcmVjdGl2ZSB3aGVuIHRoZSB0ZW1wbGF0ZSBhcnJpdmVzXG4gICAgICAgICAgaWYgKCFkaXJlY3RpdmUudGVtcGxhdGVVcmwpIHtcbiAgICAgICAgICAgIGlmIChpc09iamVjdChkaXJlY3RpdmVWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBkaXJlY3RpdmUgaXMgdHJ5aW5nIHRvIGFkZCBhbiBpc29sYXRlZCBzY29wZS5cbiAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGVyZSBpcyBubyBzY29wZSBvZiBhbnkga2luZCBhbHJlYWR5XG4gICAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCduZXcvaXNvbGF0ZWQgc2NvcGUnLCBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHwgbmV3U2NvcGVEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBkaXJlY3RpdmUgaXMgdHJ5aW5nIHRvIGFkZCBhIGNoaWxkIHNjb3BlLlxuICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZXJlIGlzIG5vIGlzb2xhdGVkIHNjb3BlIGFscmVhZHlcbiAgICAgICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ25ldy9pc29sYXRlZCBzY29wZScsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSwgZGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5ld1Njb3BlRGlyZWN0aXZlID0gbmV3U2NvcGVEaXJlY3RpdmUgfHwgZGlyZWN0aXZlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZS5uYW1lO1xuXG4gICAgICAgIC8vIElmIHdlIGVuY291bnRlciBhIGNvbmRpdGlvbiB0aGF0IGNhbiByZXN1bHQgaW4gdHJhbnNjbHVzaW9uIG9uIHRoZSBkaXJlY3RpdmUsXG4gICAgICAgIC8vIHRoZW4gc2NhbiBhaGVhZCBpbiB0aGUgcmVtYWluaW5nIGRpcmVjdGl2ZXMgZm9yIG90aGVycyB0aGF0IG1heSBjYXVzZSBhIG11bHRpcGxlXG4gICAgICAgIC8vIHRyYW5zY2x1c2lvbiBlcnJvciB0byBiZSB0aHJvd24gZHVyaW5nIHRoZSBjb21waWxhdGlvbiBwcm9jZXNzLiAgSWYgYSBtYXRjaGluZyBkaXJlY3RpdmVcbiAgICAgICAgLy8gaXMgZm91bmQsIHRoZW4gd2Uga25vdyB0aGF0IHdoZW4gd2UgZW5jb3VudGVyIGEgdHJhbnNjbHVkZWQgZGlyZWN0aXZlLCB3ZSBuZWVkIHRvIGVhZ2VybHlcbiAgICAgICAgLy8gY29tcGlsZSB0aGUgYHRyYW5zY2x1ZGVgIGZ1bmN0aW9uIHJhdGhlciB0aGFuIGRvaW5nIGl0IGxhemlseSBpbiBvcmRlciB0byB0aHJvd1xuICAgICAgICAvLyBleGNlcHRpb25zIGF0IHRoZSBjb3JyZWN0IHRpbWVcbiAgICAgICAgaWYgKCFkaWRTY2FuRm9yTXVsdGlwbGVUcmFuc2NsdXNpb24gJiYgKChkaXJlY3RpdmUucmVwbGFjZSAmJiAoZGlyZWN0aXZlLnRlbXBsYXRlVXJsIHx8IGRpcmVjdGl2ZS50ZW1wbGF0ZSkpXG4gICAgICAgICAgICB8fCAoZGlyZWN0aXZlLnRyYW5zY2x1ZGUgJiYgIWRpcmVjdGl2ZS4kJHRsYikpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZURpcmVjdGl2ZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNjYW5uaW5nSW5kZXggPSBpICsgMTsgKGNhbmRpZGF0ZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZXNbc2Nhbm5pbmdJbmRleCsrXSk7KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoY2FuZGlkYXRlRGlyZWN0aXZlLnRyYW5zY2x1ZGUgJiYgIWNhbmRpZGF0ZURpcmVjdGl2ZS4kJHRsYilcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IChjYW5kaWRhdGVEaXJlY3RpdmUucmVwbGFjZSAmJiAoY2FuZGlkYXRlRGlyZWN0aXZlLnRlbXBsYXRlVXJsIHx8IGNhbmRpZGF0ZURpcmVjdGl2ZS50ZW1wbGF0ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaWdodEhhdmVNdWx0aXBsZVRyYW5zY2x1c2lvbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGlkU2NhbkZvck11bHRpcGxlVHJhbnNjbHVzaW9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZGlyZWN0aXZlLnRlbXBsYXRlVXJsICYmIGRpcmVjdGl2ZS5jb250cm9sbGVyKSB7XG4gICAgICAgICAgY29udHJvbGxlckRpcmVjdGl2ZXMgPSBjb250cm9sbGVyRGlyZWN0aXZlcyB8fCBjcmVhdGVNYXAoKTtcbiAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgnXFwnJyArIGRpcmVjdGl2ZU5hbWUgKyAnXFwnIGNvbnRyb2xsZXInLFxuICAgICAgICAgICAgICBjb250cm9sbGVyRGlyZWN0aXZlc1tkaXJlY3RpdmVOYW1lXSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdID0gZGlyZWN0aXZlO1xuICAgICAgICB9XG5cbiAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkaXJlY3RpdmUudHJhbnNjbHVkZTtcblxuICAgICAgICBpZiAoZGlyZWN0aXZlVmFsdWUpIHtcbiAgICAgICAgICBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBuZ0lmIGFuZCBuZ1JlcGVhdCBzbyB0aGF0IHdlIGRvbid0IGNvbXBsYWluIGFib3V0IGR1cGxpY2F0ZSB0cmFuc2NsdXNpb24uXG4gICAgICAgICAgLy8gVGhpcyBvcHRpb24gc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBkaXJlY3RpdmVzIHRoYXQga25vdyBob3cgdG8gc2FmZWx5IGhhbmRsZSBlbGVtZW50IHRyYW5zY2x1c2lvbixcbiAgICAgICAgICAvLyB3aGVyZSB0aGUgdHJhbnNjbHVkZWQgbm9kZXMgYXJlIGFkZGVkIG9yIHJlcGxhY2VkIGFmdGVyIGxpbmtpbmcuXG4gICAgICAgICAgaWYgKCFkaXJlY3RpdmUuJCR0bGIpIHtcbiAgICAgICAgICAgIGFzc2VydE5vRHVwbGljYXRlKCd0cmFuc2NsdXNpb24nLCBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLCBkaXJlY3RpdmUsICRjb21waWxlTm9kZSk7XG4gICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChkaXJlY3RpdmVWYWx1ZSA9PT0gJ2VsZW1lbnQnKSB7XG4gICAgICAgICAgICBoYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0ZXJtaW5hbFByaW9yaXR5ID0gZGlyZWN0aXZlLnByaW9yaXR5O1xuICAgICAgICAgICAgJHRlbXBsYXRlID0gJGNvbXBpbGVOb2RlO1xuICAgICAgICAgICAgJGNvbXBpbGVOb2RlID0gdGVtcGxhdGVBdHRycy4kJGVsZW1lbnQgPVxuICAgICAgICAgICAgICAgIGpxTGl0ZShjb21waWxlLiQkY3JlYXRlQ29tbWVudChkaXJlY3RpdmVOYW1lLCB0ZW1wbGF0ZUF0dHJzW2RpcmVjdGl2ZU5hbWVdKSk7XG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICRjb21waWxlTm9kZVswXTtcbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKGpxQ29sbGVjdGlvbiwgc2xpY2VBcmdzKCR0ZW1wbGF0ZSksIGNvbXBpbGVOb2RlKTtcblxuICAgICAgICAgICAgLy8gU3VwcG9ydDogQ2hyb21lIDwgNTBcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzE0MDQxXG5cbiAgICAgICAgICAgIC8vIEluIHRoZSB2ZXJzaW9ucyBvZiBWOCBwcmlvciB0byBDaHJvbWUgNTAsIHRoZSBkb2N1bWVudCBmcmFnbWVudCB0aGF0IGlzIGNyZWF0ZWRcbiAgICAgICAgICAgIC8vIGluIHRoZSBgcmVwbGFjZVdpdGhgIGZ1bmN0aW9uIGlzIGltcHJvcGVybHkgZ2FyYmFnZSBjb2xsZWN0ZWQgZGVzcGl0ZSBzdGlsbFxuICAgICAgICAgICAgLy8gYmVpbmcgcmVmZXJlbmNlZCBieSB0aGUgYHBhcmVudE5vZGVgIHByb3BlcnR5IG9mIGFsbCBvZiB0aGUgY2hpbGQgbm9kZXMuICBCeSBhZGRpbmdcbiAgICAgICAgICAgIC8vIGEgcmVmZXJlbmNlIHRvIHRoZSBmcmFnbWVudCB2aWEgYSBkaWZmZXJlbnQgcHJvcGVydHksIHdlIGNhbiBhdm9pZCB0aGF0IGluY29ycmVjdFxuICAgICAgICAgICAgLy8gYmVoYXZpb3IuXG4gICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBsaW5lIGFmdGVyIENocm9tZSA1MCBoYXMgYmVlbiByZWxlYXNlZFxuICAgICAgICAgICAgJHRlbXBsYXRlWzBdLiQkcGFyZW50Tm9kZSA9ICR0ZW1wbGF0ZVswXS5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbiA9IGNvbXBpbGF0aW9uR2VuZXJhdG9yKG1pZ2h0SGF2ZU11bHRpcGxlVHJhbnNjbHVzaW9uRXJyb3IsICR0ZW1wbGF0ZSwgdHJhbnNjbHVkZUZuLCB0ZXJtaW5hbFByaW9yaXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VEaXJlY3RpdmUgJiYgcmVwbGFjZURpcmVjdGl2ZS5uYW1lLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBwYXNzIGluOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBjb250cm9sbGVyRGlyZWN0aXZlcyAtIG90aGVyd2lzZSB3ZSdsbCBjcmVhdGUgZHVwbGljYXRlcyBjb250cm9sbGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgb3IgdGVtcGxhdGVEaXJlY3RpdmUgLSBjb21iaW5pbmcgdGVtcGxhdGVzIHdpdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgZWxlbWVudCB0cmFuc2NsdXNpb24gZG9lc24ndCBtYWtlIHNlbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgb25seSBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlIHNvIHRoYXQgd2UgcHJldmVudCBwdXR0aW5nIHRyYW5zY2x1c2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24gdGhlIHNhbWUgZWxlbWVudCBtb3JlIHRoYW4gb25jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6IG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB2YXIgc2xvdHMgPSBjcmVhdGVNYXAoKTtcblxuICAgICAgICAgICAgaWYgKCFpc09iamVjdChkaXJlY3RpdmVWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0ganFMaXRlKGpxTGl0ZUNsb25lKGNvbXBpbGVOb2RlKSkuY29udGVudHMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0cmFuc2NsdXNpb24gc2xvdHMsXG4gICAgICAgICAgICAgIC8vIGNvbGxlY3QgdGhlbSB1cCwgY29tcGlsZSB0aGVtIGFuZCBzdG9yZSB0aGVpciB0cmFuc2NsdXNpb24gZnVuY3Rpb25zXG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IFtdO1xuXG4gICAgICAgICAgICAgIHZhciBzbG90TWFwID0gY3JlYXRlTWFwKCk7XG4gICAgICAgICAgICAgIHZhciBmaWxsZWRTbG90cyA9IGNyZWF0ZU1hcCgpO1xuXG4gICAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBlbGVtZW50IHNlbGVjdG9yc1xuICAgICAgICAgICAgICBmb3JFYWNoKGRpcmVjdGl2ZVZhbHVlLCBmdW5jdGlvbihlbGVtZW50U2VsZWN0b3IsIHNsb3ROYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgYW4gZWxlbWVudCBzZWxlY3RvciBzdGFydHMgd2l0aCBhID8gdGhlbiBpdCBpcyBvcHRpb25hbFxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25hbCA9IChlbGVtZW50U2VsZWN0b3IuY2hhckF0KDApID09PSAnPycpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnRTZWxlY3RvciA9IG9wdGlvbmFsID8gZWxlbWVudFNlbGVjdG9yLnN1YnN0cmluZygxKSA6IGVsZW1lbnRTZWxlY3RvcjtcblxuICAgICAgICAgICAgICAgIHNsb3RNYXBbZWxlbWVudFNlbGVjdG9yXSA9IHNsb3ROYW1lO1xuXG4gICAgICAgICAgICAgICAgLy8gV2UgZXhwbGljaXRseSBhc3NpZ24gYG51bGxgIHNpbmNlIHRoaXMgaW1wbGllcyB0aGF0IGEgc2xvdCB3YXMgZGVmaW5lZCBidXQgbm90IGZpbGxlZC5cbiAgICAgICAgICAgICAgICAvLyBMYXRlciB3aGVuIGNhbGxpbmcgYm91bmRUcmFuc2NsdXNpb24gZnVuY3Rpb25zIHdpdGggYSBzbG90IG5hbWUgd2Ugb25seSBlcnJvciBpZiB0aGVcbiAgICAgICAgICAgICAgICAvLyBzbG90IGlzIGB1bmRlZmluZWRgXG4gICAgICAgICAgICAgICAgc2xvdHNbc2xvdE5hbWVdID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIC8vIGZpbGxlZFNsb3RzIGNvbnRhaW5zIGB0cnVlYCBmb3IgYWxsIHNsb3RzIHRoYXQgYXJlIGVpdGhlciBvcHRpb25hbCBvciBoYXZlIGJlZW5cbiAgICAgICAgICAgICAgICAvLyBmaWxsZWQuIFRoaXMgaXMgdXNlZCB0byBjaGVjayB0aGF0IHdlIGhhdmUgbm90IG1pc3NlZCBhbnkgcmVxdWlyZWQgc2xvdHNcbiAgICAgICAgICAgICAgICBmaWxsZWRTbG90c1tzbG90TmFtZV0gPSBvcHRpb25hbDtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgLy8gQWRkIHRoZSBtYXRjaGluZyBlbGVtZW50cyBpbnRvIHRoZWlyIHNsb3RcbiAgICAgICAgICAgICAgZm9yRWFjaCgkY29tcGlsZU5vZGUuY29udGVudHMoKSwgZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBzbG90TmFtZSA9IHNsb3RNYXBbZGlyZWN0aXZlTm9ybWFsaXplKG5vZGVOYW1lXyhub2RlKSldO1xuICAgICAgICAgICAgICAgIGlmIChzbG90TmFtZSkge1xuICAgICAgICAgICAgICAgICAgZmlsbGVkU2xvdHNbc2xvdE5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3ROYW1lXSA9IHNsb3RzW3Nsb3ROYW1lXSB8fCBbXTtcbiAgICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3ROYW1lXS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAkdGVtcGxhdGUucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIC8vIENoZWNrIGZvciByZXF1aXJlZCBzbG90cyB0aGF0IHdlcmUgbm90IGZpbGxlZFxuICAgICAgICAgICAgICBmb3JFYWNoKGZpbGxlZFNsb3RzLCBmdW5jdGlvbihmaWxsZWQsIHNsb3ROYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFmaWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdyZXFzbG90JywgJ1JlcXVpcmVkIHRyYW5zY2x1c2lvbiBzbG90IGB7MH1gIHdhcyBub3QgZmlsbGVkLicsIHNsb3ROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGZvciAodmFyIHNsb3ROYW1lIGluIHNsb3RzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNsb3RzW3Nsb3ROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgLy8gT25seSBkZWZpbmUgYSB0cmFuc2NsdXNpb24gZnVuY3Rpb24gaWYgdGhlIHNsb3Qgd2FzIGZpbGxlZFxuICAgICAgICAgICAgICAgICAgc2xvdHNbc2xvdE5hbWVdID0gY29tcGlsYXRpb25HZW5lcmF0b3IobWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciwgc2xvdHNbc2xvdE5hbWVdLCB0cmFuc2NsdWRlRm4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkY29tcGlsZU5vZGUuZW1wdHkoKTsgLy8gY2xlYXIgY29udGVudHNcbiAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuID0gY29tcGlsYXRpb25HZW5lcmF0b3IobWlnaHRIYXZlTXVsdGlwbGVUcmFuc2NsdXNpb25FcnJvciwgJHRlbXBsYXRlLCB0cmFuc2NsdWRlRm4sIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsIHsgbmVlZHNOZXdTY29wZTogZGlyZWN0aXZlLiQkaXNvbGF0ZVNjb3BlIHx8IGRpcmVjdGl2ZS4kJG5ld1Njb3BlfSk7XG4gICAgICAgICAgICBjaGlsZFRyYW5zY2x1ZGVGbi4kJHNsb3RzID0gc2xvdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRpcmVjdGl2ZS50ZW1wbGF0ZSkge1xuICAgICAgICAgIGhhc1RlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgICBhc3NlcnROb0R1cGxpY2F0ZSgndGVtcGxhdGUnLCB0ZW1wbGF0ZURpcmVjdGl2ZSwgZGlyZWN0aXZlLCAkY29tcGlsZU5vZGUpO1xuICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlID0gZGlyZWN0aXZlO1xuXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSAoaXNGdW5jdGlvbihkaXJlY3RpdmUudGVtcGxhdGUpKVxuICAgICAgICAgICAgICA/IGRpcmVjdGl2ZS50ZW1wbGF0ZSgkY29tcGlsZU5vZGUsIHRlbXBsYXRlQXR0cnMpXG4gICAgICAgICAgICAgIDogZGlyZWN0aXZlLnRlbXBsYXRlO1xuXG4gICAgICAgICAgZGlyZWN0aXZlVmFsdWUgPSBkZW5vcm1hbGl6ZVRlbXBsYXRlKGRpcmVjdGl2ZVZhbHVlKTtcblxuICAgICAgICAgIGlmIChkaXJlY3RpdmUucmVwbGFjZSkge1xuICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgICAgIGlmIChqcUxpdGVJc1RleHROb2RlKGRpcmVjdGl2ZVZhbHVlKSkge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IHJlbW92ZUNvbW1lbnRzKHdyYXBUZW1wbGF0ZShkaXJlY3RpdmUudGVtcGxhdGVOYW1lc3BhY2UsIHRyaW0oZGlyZWN0aXZlVmFsdWUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21waWxlTm9kZSA9ICR0ZW1wbGF0ZVswXTtcblxuICAgICAgICAgICAgaWYgKCR0ZW1wbGF0ZS5sZW5ndGggIT09IDEgfHwgY29tcGlsZU5vZGUubm9kZVR5cGUgIT09IE5PREVfVFlQRV9FTEVNRU5UKSB7XG4gICAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCd0cGxydCcsXG4gICAgICAgICAgICAgICAgICAnVGVtcGxhdGUgZm9yIGRpcmVjdGl2ZSBcXCd7MH1cXCcgbXVzdCBoYXZlIGV4YWN0bHkgb25lIHJvb3QgZWxlbWVudC4gezF9JyxcbiAgICAgICAgICAgICAgICAgIGRpcmVjdGl2ZU5hbWUsICcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVwbGFjZVdpdGgoanFDb2xsZWN0aW9uLCAkY29tcGlsZU5vZGUsIGNvbXBpbGVOb2RlKTtcblxuICAgICAgICAgICAgdmFyIG5ld1RlbXBsYXRlQXR0cnMgPSB7JGF0dHI6IHt9fTtcblxuICAgICAgICAgICAgLy8gY29tYmluZSBkaXJlY3RpdmVzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUgYW5kIGZyb20gdGhlIHRlbXBsYXRlOlxuICAgICAgICAgICAgLy8gLSB0YWtlIHRoZSBhcnJheSBvZiBkaXJlY3RpdmVzIGZvciB0aGlzIGVsZW1lbnRcbiAgICAgICAgICAgIC8vIC0gc3BsaXQgaXQgaW50byB0d28gcGFydHMsIHRob3NlIHRoYXQgYWxyZWFkeSBhcHBsaWVkIChwcm9jZXNzZWQpIGFuZCB0aG9zZSB0aGF0IHdlcmVuJ3QgKHVucHJvY2Vzc2VkKVxuICAgICAgICAgICAgLy8gLSBjb2xsZWN0IGRpcmVjdGl2ZXMgZnJvbSB0aGUgdGVtcGxhdGUgYW5kIHNvcnQgdGhlbSBieSBwcmlvcml0eVxuICAgICAgICAgICAgLy8gLSBjb21iaW5lIGRpcmVjdGl2ZXMgYXM6IHByb2Nlc3NlZCArIHRlbXBsYXRlICsgdW5wcm9jZXNzZWRcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZURpcmVjdGl2ZXMgPSBjb2xsZWN0RGlyZWN0aXZlcyhjb21waWxlTm9kZSwgW10sIG5ld1RlbXBsYXRlQXR0cnMpO1xuICAgICAgICAgICAgdmFyIHVucHJvY2Vzc2VkRGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXMuc3BsaWNlKGkgKyAxLCBkaXJlY3RpdmVzLmxlbmd0aCAtIChpICsgMSkpO1xuXG4gICAgICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlIHx8IG5ld1Njb3BlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgICAgIC8vIFRoZSBvcmlnaW5hbCBkaXJlY3RpdmUgY2F1c2VkIHRoZSBjdXJyZW50IGVsZW1lbnQgdG8gYmUgcmVwbGFjZWQgYnV0IHRoaXMgZWxlbWVudFxuICAgICAgICAgICAgICAvLyBhbHNvIG5lZWRzIHRvIGhhdmUgYSBuZXcgc2NvcGUsIHNvIHdlIG5lZWQgdG8gdGVsbCB0aGUgdGVtcGxhdGUgZGlyZWN0aXZlc1xuICAgICAgICAgICAgICAvLyB0aGF0IHRoZXkgd291bGQgbmVlZCB0byBnZXQgdGhlaXIgc2NvcGUgZnJvbSBmdXJ0aGVyIHVwLCBpZiB0aGV5IHJlcXVpcmUgdHJhbnNjbHVzaW9uXG4gICAgICAgICAgICAgIG1hcmtEaXJlY3RpdmVTY29wZSh0ZW1wbGF0ZURpcmVjdGl2ZXMsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSwgbmV3U2NvcGVEaXJlY3RpdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXMuY29uY2F0KHRlbXBsYXRlRGlyZWN0aXZlcykuY29uY2F0KHVucHJvY2Vzc2VkRGlyZWN0aXZlcyk7XG4gICAgICAgICAgICBtZXJnZVRlbXBsYXRlQXR0cmlidXRlcyh0ZW1wbGF0ZUF0dHJzLCBuZXdUZW1wbGF0ZUF0dHJzKTtcblxuICAgICAgICAgICAgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGNvbXBpbGVOb2RlLmh0bWwoZGlyZWN0aXZlVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJlY3RpdmUudGVtcGxhdGVVcmwpIHtcbiAgICAgICAgICBoYXNUZW1wbGF0ZSA9IHRydWU7XG4gICAgICAgICAgYXNzZXJ0Tm9EdXBsaWNhdGUoJ3RlbXBsYXRlJywgdGVtcGxhdGVEaXJlY3RpdmUsIGRpcmVjdGl2ZSwgJGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICB0ZW1wbGF0ZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcblxuICAgICAgICAgIGlmIChkaXJlY3RpdmUucmVwbGFjZSkge1xuICAgICAgICAgICAgcmVwbGFjZURpcmVjdGl2ZSA9IGRpcmVjdGl2ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZnVuYy1hc3NpZ25cbiAgICAgICAgICBub2RlTGlua0ZuID0gY29tcGlsZVRlbXBsYXRlVXJsKGRpcmVjdGl2ZXMuc3BsaWNlKGksIGRpcmVjdGl2ZXMubGVuZ3RoIC0gaSksICRjb21waWxlTm9kZSxcbiAgICAgICAgICAgICAgdGVtcGxhdGVBdHRycywganFDb2xsZWN0aW9uLCBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlICYmIGNoaWxkVHJhbnNjbHVkZUZuLCBwcmVMaW5rRm5zLCBwb3N0TGlua0Zucywge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJEaXJlY3RpdmVzOiBjb250cm9sbGVyRGlyZWN0aXZlcyxcbiAgICAgICAgICAgICAgICBuZXdTY29wZURpcmVjdGl2ZTogKG5ld1Njb3BlRGlyZWN0aXZlICE9PSBkaXJlY3RpdmUpICYmIG5ld1Njb3BlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTogbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlRGlyZWN0aXZlOiB0ZW1wbGF0ZURpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlOiBub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIGlpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aXZlLmNvbXBpbGUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGlua0ZuID0gZGlyZWN0aXZlLmNvbXBpbGUoJGNvbXBpbGVOb2RlLCB0ZW1wbGF0ZUF0dHJzLCBjaGlsZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IGRpcmVjdGl2ZS4kJG9yaWdpbmFsRGlyZWN0aXZlIHx8IGRpcmVjdGl2ZTtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpbmtGbikpIHtcbiAgICAgICAgICAgICAgYWRkTGlua0ZucyhudWxsLCBiaW5kKGNvbnRleHQsIGxpbmtGbiksIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmtGbikge1xuICAgICAgICAgICAgICBhZGRMaW5rRm5zKGJpbmQoY29udGV4dCwgbGlua0ZuLnByZSksIGJpbmQoY29udGV4dCwgbGlua0ZuLnBvc3QpLCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUsIHN0YXJ0aW5nVGFnKCRjb21waWxlTm9kZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJlY3RpdmUudGVybWluYWwpIHtcbiAgICAgICAgICBub2RlTGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgICAgICAgICB0ZXJtaW5hbFByaW9yaXR5ID0gTWF0aC5tYXgodGVybWluYWxQcmlvcml0eSwgZGlyZWN0aXZlLnByaW9yaXR5KTtcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIG5vZGVMaW5rRm4uc2NvcGUgPSBuZXdTY29wZURpcmVjdGl2ZSAmJiBuZXdTY29wZURpcmVjdGl2ZS5zY29wZSA9PT0gdHJ1ZTtcbiAgICAgIG5vZGVMaW5rRm4udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQgPSBoYXNUcmFuc2NsdWRlRGlyZWN0aXZlO1xuICAgICAgbm9kZUxpbmtGbi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQgPSBoYXNUZW1wbGF0ZTtcbiAgICAgIG5vZGVMaW5rRm4udHJhbnNjbHVkZSA9IGNoaWxkVHJhbnNjbHVkZUZuO1xuXG4gICAgICBwcmV2aW91c0NvbXBpbGVDb250ZXh0Lmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlID0gaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU7XG5cbiAgICAgIC8vIG1pZ2h0IGJlIG5vcm1hbCBvciBkZWxheWVkIG5vZGVMaW5rRm4gZGVwZW5kaW5nIG9uIGlmIHRlbXBsYXRlVXJsIGlzIHByZXNlbnRcbiAgICAgIHJldHVybiBub2RlTGlua0ZuO1xuXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICBmdW5jdGlvbiBhZGRMaW5rRm5zKHByZSwgcG9zdCwgYXR0clN0YXJ0LCBhdHRyRW5kKSB7XG4gICAgICAgIGlmIChwcmUpIHtcbiAgICAgICAgICBpZiAoYXR0clN0YXJ0KSBwcmUgPSBncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihwcmUsIGF0dHJTdGFydCwgYXR0ckVuZCk7XG4gICAgICAgICAgcHJlLnJlcXVpcmUgPSBkaXJlY3RpdmUucmVxdWlyZTtcbiAgICAgICAgICBwcmUuZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5hbWU7XG4gICAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9PT0gZGlyZWN0aXZlIHx8IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSkge1xuICAgICAgICAgICAgcHJlID0gY2xvbmVBbmRBbm5vdGF0ZUZuKHByZSwge2lzb2xhdGVTY29wZTogdHJ1ZX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwcmVMaW5rRm5zLnB1c2gocHJlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zdCkge1xuICAgICAgICAgIGlmIChhdHRyU3RhcnQpIHBvc3QgPSBncm91cEVsZW1lbnRzTGlua0ZuV3JhcHBlcihwb3N0LCBhdHRyU3RhcnQsIGF0dHJFbmQpO1xuICAgICAgICAgIHBvc3QucmVxdWlyZSA9IGRpcmVjdGl2ZS5yZXF1aXJlO1xuICAgICAgICAgIHBvc3QuZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5hbWU7XG4gICAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSA9PT0gZGlyZWN0aXZlIHx8IGRpcmVjdGl2ZS4kJGlzb2xhdGVTY29wZSkge1xuICAgICAgICAgICAgcG9zdCA9IGNsb25lQW5kQW5ub3RhdGVGbihwb3N0LCB7aXNvbGF0ZVNjb3BlOiB0cnVlfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBvc3RMaW5rRm5zLnB1c2gocG9zdCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbm9kZUxpbmtGbihjaGlsZExpbmtGbiwgc2NvcGUsIGxpbmtOb2RlLCAkcm9vdEVsZW1lbnQsIGJvdW5kVHJhbnNjbHVkZUZuKSB7XG4gICAgICAgIHZhciBpLCBpaSwgbGlua0ZuLCBpc29sYXRlU2NvcGUsIGNvbnRyb2xsZXJTY29wZSwgZWxlbWVudENvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4sICRlbGVtZW50LFxuICAgICAgICAgICAgYXR0cnMsIHNjb3BlQmluZGluZ0luZm87XG5cbiAgICAgICAgaWYgKGNvbXBpbGVOb2RlID09PSBsaW5rTm9kZSkge1xuICAgICAgICAgIGF0dHJzID0gdGVtcGxhdGVBdHRycztcbiAgICAgICAgICAkZWxlbWVudCA9IHRlbXBsYXRlQXR0cnMuJCRlbGVtZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRlbGVtZW50ID0ganFMaXRlKGxpbmtOb2RlKTtcbiAgICAgICAgICBhdHRycyA9IG5ldyBBdHRyaWJ1dGVzKCRlbGVtZW50LCB0ZW1wbGF0ZUF0dHJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRyb2xsZXJTY29wZSA9IHNjb3BlO1xuICAgICAgICBpZiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgaXNvbGF0ZVNjb3BlID0gc2NvcGUuJG5ldyh0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChuZXdTY29wZURpcmVjdGl2ZSkge1xuICAgICAgICAgIGNvbnRyb2xsZXJTY29wZSA9IHNjb3BlLiRwYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYm91bmRUcmFuc2NsdWRlRm4pIHtcbiAgICAgICAgICAvLyB0cmFjayBgYm91bmRUcmFuc2NsdWRlRm5gIHNvIGl0IGNhbiBiZSB1bndyYXBwZWQgaWYgYHRyYW5zY2x1ZGVGbmBcbiAgICAgICAgICAvLyBpcyBsYXRlciBwYXNzZWQgYXMgYHBhcmVudEJvdW5kVHJhbnNjbHVkZUZuYCB0byBgcHVibGljTGlua0ZuYFxuICAgICAgICAgIHRyYW5zY2x1ZGVGbiA9IGNvbnRyb2xsZXJzQm91bmRUcmFuc2NsdWRlO1xuICAgICAgICAgIHRyYW5zY2x1ZGVGbi4kJGJvdW5kVHJhbnNjbHVkZSA9IGJvdW5kVHJhbnNjbHVkZUZuO1xuICAgICAgICAgIC8vIGV4cG9zZSB0aGUgc2xvdHMgb24gdGhlIGAkdHJhbnNjbHVkZWAgZnVuY3Rpb25cbiAgICAgICAgICB0cmFuc2NsdWRlRm4uaXNTbG90RmlsbGVkID0gZnVuY3Rpb24oc2xvdE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiAhIWJvdW5kVHJhbnNjbHVkZUZuLiQkc2xvdHNbc2xvdE5hbWVdO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udHJvbGxlckRpcmVjdGl2ZXMpIHtcbiAgICAgICAgICBlbGVtZW50Q29udHJvbGxlcnMgPSBzZXR1cENvbnRyb2xsZXJzKCRlbGVtZW50LCBhdHRycywgdHJhbnNjbHVkZUZuLCBjb250cm9sbGVyRGlyZWN0aXZlcywgaXNvbGF0ZVNjb3BlLCBzY29wZSwgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUpIHtcbiAgICAgICAgICAvLyBJbml0aWFsaXplIGlzb2xhdGUgc2NvcGUgYmluZGluZ3MgZm9yIG5ldyBpc29sYXRlIHNjb3BlIGRpcmVjdGl2ZS5cbiAgICAgICAgICBjb21waWxlLiQkYWRkU2NvcGVJbmZvKCRlbGVtZW50LCBpc29sYXRlU2NvcGUsIHRydWUsICEodGVtcGxhdGVEaXJlY3RpdmUgJiYgKHRlbXBsYXRlRGlyZWN0aXZlID09PSBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUgfHxcbiAgICAgICAgICAgICAgdGVtcGxhdGVEaXJlY3RpdmUgPT09IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS4kJG9yaWdpbmFsRGlyZWN0aXZlKSkpO1xuICAgICAgICAgIGNvbXBpbGUuJCRhZGRTY29wZUNsYXNzKCRlbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICBpc29sYXRlU2NvcGUuJCRpc29sYXRlQmluZGluZ3MgPVxuICAgICAgICAgICAgICBuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUuJCRpc29sYXRlQmluZGluZ3M7XG4gICAgICAgICAgc2NvcGVCaW5kaW5nSW5mbyA9IGluaXRpYWxpemVEaXJlY3RpdmVCaW5kaW5ncyhzY29wZSwgYXR0cnMsIGlzb2xhdGVTY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc29sYXRlU2NvcGUuJCRpc29sYXRlQmluZGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlKTtcbiAgICAgICAgICBpZiAoc2NvcGVCaW5kaW5nSW5mby5yZW1vdmVXYXRjaGVzKSB7XG4gICAgICAgICAgICBpc29sYXRlU2NvcGUuJG9uKCckZGVzdHJveScsIHNjb3BlQmluZGluZ0luZm8ucmVtb3ZlV2F0Y2hlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBiaW5kVG9Db250cm9sbGVyIGJpbmRpbmdzXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gZWxlbWVudENvbnRyb2xsZXJzKSB7XG4gICAgICAgICAgdmFyIGNvbnRyb2xsZXJEaXJlY3RpdmUgPSBjb250cm9sbGVyRGlyZWN0aXZlc1tuYW1lXTtcbiAgICAgICAgICB2YXIgY29udHJvbGxlciA9IGVsZW1lbnRDb250cm9sbGVyc1tuYW1lXTtcbiAgICAgICAgICB2YXIgYmluZGluZ3MgPSBjb250cm9sbGVyRGlyZWN0aXZlLiQkYmluZGluZ3MuYmluZFRvQ29udHJvbGxlcjtcblxuICAgICAgICAgIGlmIChwcmVBc3NpZ25CaW5kaW5nc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmIChiaW5kaW5ncykge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmJpbmRpbmdJbmZvID1cbiAgICAgICAgICAgICAgICBpbml0aWFsaXplRGlyZWN0aXZlQmluZGluZ3MoY29udHJvbGxlclNjb3BlLCBhdHRycywgY29udHJvbGxlci5pbnN0YW5jZSwgYmluZGluZ3MsIGNvbnRyb2xsZXJEaXJlY3RpdmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5iaW5kaW5nSW5mbyA9IHt9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlclJlc3VsdCA9IGNvbnRyb2xsZXIoKTtcbiAgICAgICAgICAgIGlmIChjb250cm9sbGVyUmVzdWx0ICE9PSBjb250cm9sbGVyLmluc3RhbmNlKSB7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBjb250cm9sbGVyIGNvbnN0cnVjdG9yIGhhcyBhIHJldHVybiB2YWx1ZSwgb3ZlcndyaXRlIHRoZSBpbnN0YW5jZVxuICAgICAgICAgICAgICAvLyBmcm9tIHNldHVwQ29udHJvbGxlcnNcbiAgICAgICAgICAgICAgY29udHJvbGxlci5pbnN0YW5jZSA9IGNvbnRyb2xsZXJSZXN1bHQ7XG4gICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJyQnICsgY29udHJvbGxlckRpcmVjdGl2ZS5uYW1lICsgJ0NvbnRyb2xsZXInLCBjb250cm9sbGVyUmVzdWx0KTtcbiAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIuYmluZGluZ0luZm8ucmVtb3ZlV2F0Y2hlcykge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYmluZGluZ0luZm8ucmVtb3ZlV2F0Y2hlcygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuYmluZGluZ0luZm8gPVxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVEaXJlY3RpdmVCaW5kaW5ncyhjb250cm9sbGVyU2NvcGUsIGF0dHJzLCBjb250cm9sbGVyLmluc3RhbmNlLCBiaW5kaW5ncywgY29udHJvbGxlckRpcmVjdGl2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5zdGFuY2UgPSBjb250cm9sbGVyKCk7XG4gICAgICAgICAgICAkZWxlbWVudC5kYXRhKCckJyArIGNvbnRyb2xsZXJEaXJlY3RpdmUubmFtZSArICdDb250cm9sbGVyJywgY29udHJvbGxlci5pbnN0YW5jZSk7XG4gICAgICAgICAgICBjb250cm9sbGVyLmJpbmRpbmdJbmZvID1cbiAgICAgICAgICAgICAgaW5pdGlhbGl6ZURpcmVjdGl2ZUJpbmRpbmdzKGNvbnRyb2xsZXJTY29wZSwgYXR0cnMsIGNvbnRyb2xsZXIuaW5zdGFuY2UsIGJpbmRpbmdzLCBjb250cm9sbGVyRGlyZWN0aXZlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCaW5kIHRoZSByZXF1aXJlZCBjb250cm9sbGVycyB0byB0aGUgY29udHJvbGxlciwgaWYgYHJlcXVpcmVgIGlzIGFuIG9iamVjdCBhbmQgYGJpbmRUb0NvbnRyb2xsZXJgIGlzIHRydXRoeVxuICAgICAgICBmb3JFYWNoKGNvbnRyb2xsZXJEaXJlY3RpdmVzLCBmdW5jdGlvbihjb250cm9sbGVyRGlyZWN0aXZlLCBuYW1lKSB7XG4gICAgICAgICAgdmFyIHJlcXVpcmUgPSBjb250cm9sbGVyRGlyZWN0aXZlLnJlcXVpcmU7XG4gICAgICAgICAgaWYgKGNvbnRyb2xsZXJEaXJlY3RpdmUuYmluZFRvQ29udHJvbGxlciAmJiAhaXNBcnJheShyZXF1aXJlKSAmJiBpc09iamVjdChyZXF1aXJlKSkge1xuICAgICAgICAgICAgZXh0ZW5kKGVsZW1lbnRDb250cm9sbGVyc1tuYW1lXS5pbnN0YW5jZSwgZ2V0Q29udHJvbGxlcnMobmFtZSwgcmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSGFuZGxlIHRoZSBpbml0IGFuZCBkZXN0cm95IGxpZmVjeWNsZSBob29rcyBvbiBhbGwgY29udHJvbGxlcnMgdGhhdCBoYXZlIHRoZW1cbiAgICAgICAgZm9yRWFjaChlbGVtZW50Q29udHJvbGxlcnMsIGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICB2YXIgY29udHJvbGxlckluc3RhbmNlID0gY29udHJvbGxlci5pbnN0YW5jZTtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJG9uQ2hhbmdlcykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZS4kb25DaGFuZ2VzKGNvbnRyb2xsZXIuYmluZGluZ0luZm8uaW5pdGlhbENoYW5nZXMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLiRvbkluaXQpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UuJG9uSW5pdCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLiRkb0NoZWNrKSkge1xuICAgICAgICAgICAgY29udHJvbGxlclNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHsgY29udHJvbGxlckluc3RhbmNlLiRkb0NoZWNrKCk7IH0pO1xuICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlLiRkb0NoZWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS4kb25EZXN0cm95KSkge1xuICAgICAgICAgICAgY29udHJvbGxlclNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiBjYWxsT25EZXN0cm95SG9vaygpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlLiRvbkRlc3Ryb3koKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUFJFTElOS0lOR1xuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHByZUxpbmtGbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIGxpbmtGbiA9IHByZUxpbmtGbnNbaV07XG4gICAgICAgICAgaW52b2tlTGlua0ZuKGxpbmtGbixcbiAgICAgICAgICAgICAgbGlua0ZuLmlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxuICAgICAgICAgICAgICAkZWxlbWVudCxcbiAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgIGxpbmtGbi5yZXF1aXJlICYmIGdldENvbnRyb2xsZXJzKGxpbmtGbi5kaXJlY3RpdmVOYW1lLCBsaW5rRm4ucmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyksXG4gICAgICAgICAgICAgIHRyYW5zY2x1ZGVGblxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSRUNVUlNJT05cbiAgICAgICAgLy8gV2Ugb25seSBwYXNzIHRoZSBpc29sYXRlIHNjb3BlLCBpZiB0aGUgaXNvbGF0ZSBkaXJlY3RpdmUgaGFzIGEgdGVtcGxhdGUsXG4gICAgICAgIC8vIG90aGVyd2lzZSB0aGUgY2hpbGQgZWxlbWVudHMgZG8gbm90IGJlbG9uZyB0byB0aGUgaXNvbGF0ZSBkaXJlY3RpdmUuXG4gICAgICAgIHZhciBzY29wZVRvQ2hpbGQgPSBzY29wZTtcbiAgICAgICAgaWYgKG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSAmJiAobmV3SXNvbGF0ZVNjb3BlRGlyZWN0aXZlLnRlbXBsYXRlIHx8IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZS50ZW1wbGF0ZVVybCA9PT0gbnVsbCkpIHtcbiAgICAgICAgICBzY29wZVRvQ2hpbGQgPSBpc29sYXRlU2NvcGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkTGlua0ZuKSB7XG4gICAgICAgICAgY2hpbGRMaW5rRm4oc2NvcGVUb0NoaWxkLCBsaW5rTm9kZS5jaGlsZE5vZGVzLCB1bmRlZmluZWQsIGJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBPU1RMSU5LSU5HXG4gICAgICAgIGZvciAoaSA9IHBvc3RMaW5rRm5zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgbGlua0ZuID0gcG9zdExpbmtGbnNbaV07XG4gICAgICAgICAgaW52b2tlTGlua0ZuKGxpbmtGbixcbiAgICAgICAgICAgICAgbGlua0ZuLmlzb2xhdGVTY29wZSA/IGlzb2xhdGVTY29wZSA6IHNjb3BlLFxuICAgICAgICAgICAgICAkZWxlbWVudCxcbiAgICAgICAgICAgICAgYXR0cnMsXG4gICAgICAgICAgICAgIGxpbmtGbi5yZXF1aXJlICYmIGdldENvbnRyb2xsZXJzKGxpbmtGbi5kaXJlY3RpdmVOYW1lLCBsaW5rRm4ucmVxdWlyZSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyksXG4gICAgICAgICAgICAgIHRyYW5zY2x1ZGVGblxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcmlnZ2VyICRwb3N0TGluayBsaWZlY3ljbGUgaG9va3NcbiAgICAgICAgZm9yRWFjaChlbGVtZW50Q29udHJvbGxlcnMsIGZ1bmN0aW9uKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICB2YXIgY29udHJvbGxlckluc3RhbmNlID0gY29udHJvbGxlci5pbnN0YW5jZTtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJHBvc3RMaW5rKSkge1xuICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlLiRwb3N0TGluaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZnVuY3Rpb24gdGhhdCBpcyBpbmplY3RlZCBhcyBgJHRyYW5zY2x1ZGVgLlxuICAgICAgICAvLyBOb3RlOiBhbGwgYXJndW1lbnRzIGFyZSBvcHRpb25hbCFcbiAgICAgICAgZnVuY3Rpb24gY29udHJvbGxlcnNCb3VuZFRyYW5zY2x1ZGUoc2NvcGUsIGNsb25lQXR0YWNoRm4sIGZ1dHVyZVBhcmVudEVsZW1lbnQsIHNsb3ROYW1lKSB7XG4gICAgICAgICAgdmFyIHRyYW5zY2x1ZGVDb250cm9sbGVycztcbiAgICAgICAgICAvLyBObyBzY29wZSBwYXNzZWQgaW46XG4gICAgICAgICAgaWYgKCFpc1Njb3BlKHNjb3BlKSkge1xuICAgICAgICAgICAgc2xvdE5hbWUgPSBmdXR1cmVQYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgZnV0dXJlUGFyZW50RWxlbWVudCA9IGNsb25lQXR0YWNoRm47XG4gICAgICAgICAgICBjbG9uZUF0dGFjaEZuID0gc2NvcGU7XG4gICAgICAgICAgICBzY29wZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUpIHtcbiAgICAgICAgICAgIHRyYW5zY2x1ZGVDb250cm9sbGVycyA9IGVsZW1lbnRDb250cm9sbGVycztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFmdXR1cmVQYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICBmdXR1cmVQYXJlbnRFbGVtZW50ID0gaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgPyAkZWxlbWVudC5wYXJlbnQoKSA6ICRlbGVtZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc2xvdE5hbWUpIHtcbiAgICAgICAgICAgIC8vIHNsb3RUcmFuc2NsdWRlRm4gY2FuIGJlIG9uZSBvZiB0aHJlZSB0aGluZ3M6XG4gICAgICAgICAgICAvLyAgKiBhIHRyYW5zY2x1ZGUgZnVuY3Rpb24gLSBhIGZpbGxlZCBzbG90XG4gICAgICAgICAgICAvLyAgKiBgbnVsbGAgLSBhbiBvcHRpb25hbCBzbG90IHRoYXQgd2FzIG5vdCBmaWxsZWRcbiAgICAgICAgICAgIC8vICAqIGB1bmRlZmluZWRgIC0gYSBzbG90IHRoYXQgd2FzIG5vdCBkZWNsYXJlZCAoaS5lLiBpbnZhbGlkKVxuICAgICAgICAgICAgdmFyIHNsb3RUcmFuc2NsdWRlRm4gPSBib3VuZFRyYW5zY2x1ZGVGbi4kJHNsb3RzW3Nsb3ROYW1lXTtcbiAgICAgICAgICAgIGlmIChzbG90VHJhbnNjbHVkZUZuKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzbG90VHJhbnNjbHVkZUZuKHNjb3BlLCBjbG9uZUF0dGFjaEZuLCB0cmFuc2NsdWRlQ29udHJvbGxlcnMsIGZ1dHVyZVBhcmVudEVsZW1lbnQsIHNjb3BlVG9DaGlsZCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzVW5kZWZpbmVkKHNsb3RUcmFuc2NsdWRlRm4pKSB7XG4gICAgICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdub3Nsb3QnLFxuICAgICAgICAgICAgICAgJ05vIHBhcmVudCBkaXJlY3RpdmUgdGhhdCByZXF1aXJlcyBhIHRyYW5zY2x1c2lvbiB3aXRoIHNsb3QgbmFtZSBcInswfVwiLiAnICtcbiAgICAgICAgICAgICAgICdFbGVtZW50OiB7MX0nLFxuICAgICAgICAgICAgICAgc2xvdE5hbWUsIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBib3VuZFRyYW5zY2x1ZGVGbihzY29wZSwgY2xvbmVBdHRhY2hGbiwgdHJhbnNjbHVkZUNvbnRyb2xsZXJzLCBmdXR1cmVQYXJlbnRFbGVtZW50LCBzY29wZVRvQ2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbnRyb2xsZXJzKGRpcmVjdGl2ZU5hbWUsIHJlcXVpcmUsICRlbGVtZW50LCBlbGVtZW50Q29udHJvbGxlcnMpIHtcbiAgICAgIHZhciB2YWx1ZTtcblxuICAgICAgaWYgKGlzU3RyaW5nKHJlcXVpcmUpKSB7XG4gICAgICAgIHZhciBtYXRjaCA9IHJlcXVpcmUubWF0Y2goUkVRVUlSRV9QUkVGSVhfUkVHRVhQKTtcbiAgICAgICAgdmFyIG5hbWUgPSByZXF1aXJlLnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICB2YXIgaW5oZXJpdFR5cGUgPSBtYXRjaFsxXSB8fCBtYXRjaFszXTtcbiAgICAgICAgdmFyIG9wdGlvbmFsID0gbWF0Y2hbMl0gPT09ICc/JztcblxuICAgICAgICAvL0lmIG9ubHkgcGFyZW50cyB0aGVuIHN0YXJ0IGF0IHRoZSBwYXJlbnQgZWxlbWVudFxuICAgICAgICBpZiAoaW5oZXJpdFR5cGUgPT09ICdeXicpIHtcbiAgICAgICAgICAkZWxlbWVudCA9ICRlbGVtZW50LnBhcmVudCgpO1xuICAgICAgICAvL090aGVyd2lzZSBhdHRlbXB0IGdldHRpbmcgdGhlIGNvbnRyb2xsZXIgZnJvbSBlbGVtZW50Q29udHJvbGxlcnMgaW4gY2FzZVxuICAgICAgICAvL3RoZSBlbGVtZW50IGlzIHRyYW5zY2x1ZGVkIChhbmQgaGFzIG5vIGRhdGEpIGFuZCB0byBhdm9pZCAuZGF0YSBpZiBwb3NzaWJsZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gZWxlbWVudENvbnRyb2xsZXJzICYmIGVsZW1lbnRDb250cm9sbGVyc1tuYW1lXTtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlICYmIHZhbHVlLmluc3RhbmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgIHZhciBkYXRhTmFtZSA9ICckJyArIG5hbWUgKyAnQ29udHJvbGxlcic7XG4gICAgICAgICAgdmFsdWUgPSBpbmhlcml0VHlwZSA/ICRlbGVtZW50LmluaGVyaXRlZERhdGEoZGF0YU5hbWUpIDogJGVsZW1lbnQuZGF0YShkYXRhTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXZhbHVlICYmICFvcHRpb25hbCkge1xuICAgICAgICAgIHRocm93ICRjb21waWxlTWluRXJyKCdjdHJlcScsXG4gICAgICAgICAgICAgICdDb250cm9sbGVyIFxcJ3swfVxcJywgcmVxdWlyZWQgYnkgZGlyZWN0aXZlIFxcJ3sxfVxcJywgY2FuXFwndCBiZSBmb3VuZCEnLFxuICAgICAgICAgICAgICBuYW1lLCBkaXJlY3RpdmVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc0FycmF5KHJlcXVpcmUpKSB7XG4gICAgICAgIHZhbHVlID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlcXVpcmUubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIHZhbHVlW2ldID0gZ2V0Q29udHJvbGxlcnMoZGlyZWN0aXZlTmFtZSwgcmVxdWlyZVtpXSwgJGVsZW1lbnQsIGVsZW1lbnRDb250cm9sbGVycyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QocmVxdWlyZSkpIHtcbiAgICAgICAgdmFsdWUgPSB7fTtcbiAgICAgICAgZm9yRWFjaChyZXF1aXJlLCBmdW5jdGlvbihjb250cm9sbGVyLCBwcm9wZXJ0eSkge1xuICAgICAgICAgIHZhbHVlW3Byb3BlcnR5XSA9IGdldENvbnRyb2xsZXJzKGRpcmVjdGl2ZU5hbWUsIGNvbnRyb2xsZXIsICRlbGVtZW50LCBlbGVtZW50Q29udHJvbGxlcnMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZhbHVlIHx8IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0dXBDb250cm9sbGVycygkZWxlbWVudCwgYXR0cnMsIHRyYW5zY2x1ZGVGbiwgY29udHJvbGxlckRpcmVjdGl2ZXMsIGlzb2xhdGVTY29wZSwgc2NvcGUsIG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSkge1xuICAgICAgdmFyIGVsZW1lbnRDb250cm9sbGVycyA9IGNyZWF0ZU1hcCgpO1xuICAgICAgZm9yICh2YXIgY29udHJvbGxlcktleSBpbiBjb250cm9sbGVyRGlyZWN0aXZlcykge1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0gY29udHJvbGxlckRpcmVjdGl2ZXNbY29udHJvbGxlcktleV07XG4gICAgICAgIHZhciBsb2NhbHMgPSB7XG4gICAgICAgICAgJHNjb3BlOiBkaXJlY3RpdmUgPT09IG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSB8fCBkaXJlY3RpdmUuJCRpc29sYXRlU2NvcGUgPyBpc29sYXRlU2NvcGUgOiBzY29wZSxcbiAgICAgICAgICAkZWxlbWVudDogJGVsZW1lbnQsXG4gICAgICAgICAgJGF0dHJzOiBhdHRycyxcbiAgICAgICAgICAkdHJhbnNjbHVkZTogdHJhbnNjbHVkZUZuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBkaXJlY3RpdmUuY29udHJvbGxlcjtcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIgPT09ICdAJykge1xuICAgICAgICAgIGNvbnRyb2xsZXIgPSBhdHRyc1tkaXJlY3RpdmUubmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY29udHJvbGxlckluc3RhbmNlID0gJGNvbnRyb2xsZXIoY29udHJvbGxlciwgbG9jYWxzLCB0cnVlLCBkaXJlY3RpdmUuY29udHJvbGxlckFzKTtcblxuICAgICAgICAvLyBGb3IgZGlyZWN0aXZlcyB3aXRoIGVsZW1lbnQgdHJhbnNjbHVzaW9uIHRoZSBlbGVtZW50IGlzIGEgY29tbWVudC5cbiAgICAgICAgLy8gSW4gdGhpcyBjYXNlIC5kYXRhIHdpbGwgbm90IGF0dGFjaCBhbnkgZGF0YS5cbiAgICAgICAgLy8gSW5zdGVhZCwgd2Ugc2F2ZSB0aGUgY29udHJvbGxlcnMgZm9yIHRoZSBlbGVtZW50IGluIGEgbG9jYWwgaGFzaCBhbmQgYXR0YWNoIHRvIC5kYXRhXG4gICAgICAgIC8vIGxhdGVyLCBvbmNlIHdlIGhhdmUgdGhlIGFjdHVhbCBlbGVtZW50LlxuICAgICAgICBlbGVtZW50Q29udHJvbGxlcnNbZGlyZWN0aXZlLm5hbWVdID0gY29udHJvbGxlckluc3RhbmNlO1xuICAgICAgICAkZWxlbWVudC5kYXRhKCckJyArIGRpcmVjdGl2ZS5uYW1lICsgJ0NvbnRyb2xsZXInLCBjb250cm9sbGVySW5zdGFuY2UuaW5zdGFuY2UpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVsZW1lbnRDb250cm9sbGVycztcbiAgICB9XG5cbiAgICAvLyBEZXBlbmRpbmcgdXBvbiB0aGUgY29udGV4dCBpbiB3aGljaCBhIGRpcmVjdGl2ZSBmaW5kcyBpdHNlbGYgaXQgbWlnaHQgbmVlZCB0byBoYXZlIGEgbmV3IGlzb2xhdGVkXG4gICAgLy8gb3IgY2hpbGQgc2NvcGUgY3JlYXRlZC4gRm9yIGluc3RhbmNlOlxuICAgIC8vICogaWYgdGhlIGRpcmVjdGl2ZSBoYXMgYmVlbiBwdWxsZWQgaW50byBhIHRlbXBsYXRlIGJlY2F1c2UgYW5vdGhlciBkaXJlY3RpdmUgd2l0aCBhIGhpZ2hlciBwcmlvcml0eVxuICAgIC8vIGFza2VkIGZvciBlbGVtZW50IHRyYW5zY2x1c2lvblxuICAgIC8vICogaWYgdGhlIGRpcmVjdGl2ZSBpdHNlbGYgYXNrcyBmb3IgdHJhbnNjbHVzaW9uIGJ1dCBpdCBpcyBhdCB0aGUgcm9vdCBvZiBhIHRlbXBsYXRlIGFuZCB0aGUgb3JpZ2luYWxcbiAgICAvLyBlbGVtZW50IHdhcyByZXBsYWNlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzEyOTM2XG4gICAgZnVuY3Rpb24gbWFya0RpcmVjdGl2ZVNjb3BlKGRpcmVjdGl2ZXMsIGlzb2xhdGVTY29wZSwgbmV3U2NvcGUpIHtcbiAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGRpcmVjdGl2ZXMubGVuZ3RoOyBqIDwgamo7IGorKykge1xuICAgICAgICBkaXJlY3RpdmVzW2pdID0gaW5oZXJpdChkaXJlY3RpdmVzW2pdLCB7JCRpc29sYXRlU2NvcGU6IGlzb2xhdGVTY29wZSwgJCRuZXdTY29wZTogbmV3U2NvcGV9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBsb29rcyB1cCB0aGUgZGlyZWN0aXZlIGFuZCBkZWNvcmF0ZXMgaXQgd2l0aCBleGNlcHRpb24gaGFuZGxpbmcgYW5kIHByb3BlciBwYXJhbWV0ZXJzLiBXZVxuICAgICAqIGNhbGwgdGhpcyB0aGUgYm91bmREaXJlY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBkaXJlY3RpdmUgdG8gbG9vayB1cC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gVGhlIGRpcmVjdGl2ZSBtdXN0IGJlIGZvdW5kIGluIHNwZWNpZmljIGZvcm1hdC5cbiAgICAgKiAgIFN0cmluZyBjb250YWluaW5nIGFueSBvZiB0aGVzZXMgY2hhcmFjdGVyczpcbiAgICAgKlxuICAgICAqICAgKiBgRWA6IGVsZW1lbnQgbmFtZVxuICAgICAqICAgKiBgQSc6IGF0dHJpYnV0ZVxuICAgICAqICAgKiBgQ2A6IGNsYXNzXG4gICAgICogICAqIGBNYDogY29tbWVudFxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGRpcmVjdGl2ZSB3YXMgYWRkZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkRGlyZWN0aXZlKHREaXJlY3RpdmVzLCBuYW1lLCBsb2NhdGlvbiwgbWF4UHJpb3JpdHksIGlnbm9yZURpcmVjdGl2ZSwgc3RhcnRBdHRyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kQXR0ck5hbWUpIHtcbiAgICAgIGlmIChuYW1lID09PSBpZ25vcmVEaXJlY3RpdmUpIHJldHVybiBudWxsO1xuICAgICAgdmFyIG1hdGNoID0gbnVsbDtcbiAgICAgIGlmIChoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGZvciAodmFyIGRpcmVjdGl2ZSwgZGlyZWN0aXZlcyA9ICRpbmplY3Rvci5nZXQobmFtZSArIFN1ZmZpeCksXG4gICAgICAgICAgICBpID0gMCwgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICBkaXJlY3RpdmUgPSBkaXJlY3RpdmVzW2ldO1xuICAgICAgICAgIGlmICgoaXNVbmRlZmluZWQobWF4UHJpb3JpdHkpIHx8IG1heFByaW9yaXR5ID4gZGlyZWN0aXZlLnByaW9yaXR5KSAmJlxuICAgICAgICAgICAgICAgZGlyZWN0aXZlLnJlc3RyaWN0LmluZGV4T2YobG9jYXRpb24pICE9PSAtMSkge1xuICAgICAgICAgICAgaWYgKHN0YXJ0QXR0ck5hbWUpIHtcbiAgICAgICAgICAgICAgZGlyZWN0aXZlID0gaW5oZXJpdChkaXJlY3RpdmUsIHskJHN0YXJ0OiBzdGFydEF0dHJOYW1lLCAkJGVuZDogZW5kQXR0ck5hbWV9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGlyZWN0aXZlLiQkYmluZGluZ3MpIHtcbiAgICAgICAgICAgICAgdmFyIGJpbmRpbmdzID0gZGlyZWN0aXZlLiQkYmluZGluZ3MgPVxuICAgICAgICAgICAgICAgICAgcGFyc2VEaXJlY3RpdmVCaW5kaW5ncyhkaXJlY3RpdmUsIGRpcmVjdGl2ZS5uYW1lKTtcbiAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KGJpbmRpbmdzLmlzb2xhdGVTY29wZSkpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmUuJCRpc29sYXRlQmluZGluZ3MgPSBiaW5kaW5ncy5pc29sYXRlU2NvcGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHREaXJlY3RpdmVzLnB1c2goZGlyZWN0aXZlKTtcbiAgICAgICAgICAgIG1hdGNoID0gZGlyZWN0aXZlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogbG9va3MgdXAgdGhlIGRpcmVjdGl2ZSBhbmQgcmV0dXJucyB0cnVlIGlmIGl0IGlzIGEgbXVsdGktZWxlbWVudCBkaXJlY3RpdmUsXG4gICAgICogYW5kIHRoZXJlZm9yZSByZXF1aXJlcyBET00gbm9kZXMgYmV0d2VlbiAtc3RhcnQgYW5kIC1lbmQgbWFya2VycyB0byBiZSBncm91cGVkXG4gICAgICogdG9nZXRoZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBuYW1lIG9mIHRoZSBkaXJlY3RpdmUgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIGRpcmVjdGl2ZSB3YXMgcmVnaXN0ZXJlZCBhcyBtdWx0aS1lbGVtZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGRpcmVjdGl2ZUlzTXVsdGlFbGVtZW50KG5hbWUpIHtcbiAgICAgIGlmIChoYXNEaXJlY3RpdmVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgIGZvciAodmFyIGRpcmVjdGl2ZSwgZGlyZWN0aXZlcyA9ICRpbmplY3Rvci5nZXQobmFtZSArIFN1ZmZpeCksXG4gICAgICAgICAgICBpID0gMCwgaWkgPSBkaXJlY3RpdmVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICBkaXJlY3RpdmUgPSBkaXJlY3RpdmVzW2ldO1xuICAgICAgICAgIGlmIChkaXJlY3RpdmUubXVsdGlFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBlbGVtZW50IGlzIHJlcGxhY2VkIHdpdGggSFRNTCB0ZW1wbGF0ZSB0aGVuIHRoZSBuZXcgYXR0cmlidXRlc1xuICAgICAqIG9uIHRoZSB0ZW1wbGF0ZSBuZWVkIHRvIGJlIG1lcmdlZCB3aXRoIHRoZSBleGlzdGluZyBhdHRyaWJ1dGVzIGluIHRoZSBET00uXG4gICAgICogVGhlIGRlc2lyZWQgZWZmZWN0IGlzIHRvIGhhdmUgYm90aCBvZiB0aGUgYXR0cmlidXRlcyBwcmVzZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGRzdCBkZXN0aW5hdGlvbiBhdHRyaWJ1dGVzIChvcmlnaW5hbCBET00pXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHNyYyBzb3VyY2UgYXR0cmlidXRlcyAoZnJvbSB0aGUgZGlyZWN0aXZlIHRlbXBsYXRlKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1lcmdlVGVtcGxhdGVBdHRyaWJ1dGVzKGRzdCwgc3JjKSB7XG4gICAgICB2YXIgc3JjQXR0ciA9IHNyYy4kYXR0cixcbiAgICAgICAgICBkc3RBdHRyID0gZHN0LiRhdHRyO1xuXG4gICAgICAvLyByZWFwcGx5IHRoZSBvbGQgYXR0cmlidXRlcyB0byB0aGUgbmV3IGVsZW1lbnRcbiAgICAgIGZvckVhY2goZHN0LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmIChrZXkuY2hhckF0KDApICE9PSAnJCcpIHtcbiAgICAgICAgICBpZiAoc3JjW2tleV0gJiYgc3JjW2tleV0gIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHZhbHVlICs9IChrZXkgPT09ICdzdHlsZScgPyAnOycgOiAnICcpICsgc3JjW2tleV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YWx1ZSA9IHNyY1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkc3QuJHNldChrZXksIHZhbHVlLCB0cnVlLCBzcmNBdHRyW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gY29weSB0aGUgbmV3IGF0dHJpYnV0ZXMgb24gdGhlIG9sZCBhdHRycyBvYmplY3RcbiAgICAgIGZvckVhY2goc3JjLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHdlIGFscmVhZHkgc2V0IHRoaXMgYXR0cmlidXRlIGluIHRoZSBsb29wIGFib3ZlLlxuICAgICAgICAvLyBgZHN0YCB3aWxsIG5ldmVyIGNvbnRhaW4gaGFzT3duUHJvcGVydHkgYXMgRE9NIHBhcnNlciB3b24ndCBsZXQgaXQuXG4gICAgICAgIC8vIFlvdSB3aWxsIGdldCBhbiBcIkludmFsaWRDaGFyYWN0ZXJFcnJvcjogRE9NIEV4Y2VwdGlvbiA1XCIgZXJyb3IgaWYgeW91XG4gICAgICAgIC8vIGhhdmUgYW4gYXR0cmlidXRlIGxpa2UgXCJoYXMtb3duLXByb3BlcnR5XCIgb3IgXCJkYXRhLWhhcy1vd24tcHJvcGVydHlcIiwgZXRjLlxuICAgICAgICBpZiAoIWRzdC5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGtleS5jaGFyQXQoMCkgIT09ICckJykge1xuICAgICAgICAgIGRzdFtrZXldID0gdmFsdWU7XG5cbiAgICAgICAgICBpZiAoa2V5ICE9PSAnY2xhc3MnICYmIGtleSAhPT0gJ3N0eWxlJykge1xuICAgICAgICAgICAgZHN0QXR0cltrZXldID0gc3JjQXR0cltrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBjb21waWxlVGVtcGxhdGVVcmwoZGlyZWN0aXZlcywgJGNvbXBpbGVOb2RlLCB0QXR0cnMsXG4gICAgICAgICRyb290RWxlbWVudCwgY2hpbGRUcmFuc2NsdWRlRm4sIHByZUxpbmtGbnMsIHBvc3RMaW5rRm5zLCBwcmV2aW91c0NvbXBpbGVDb250ZXh0KSB7XG4gICAgICB2YXIgbGlua1F1ZXVlID0gW10sXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4sXG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuLFxuICAgICAgICAgIGJlZm9yZVRlbXBsYXRlQ29tcGlsZU5vZGUgPSAkY29tcGlsZU5vZGVbMF0sXG4gICAgICAgICAgb3JpZ0FzeW5jRGlyZWN0aXZlID0gZGlyZWN0aXZlcy5zaGlmdCgpLFxuICAgICAgICAgIGRlcml2ZWRTeW5jRGlyZWN0aXZlID0gaW5oZXJpdChvcmlnQXN5bmNEaXJlY3RpdmUsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBudWxsLCB0cmFuc2NsdWRlOiBudWxsLCByZXBsYWNlOiBudWxsLCAkJG9yaWdpbmFsRGlyZWN0aXZlOiBvcmlnQXN5bmNEaXJlY3RpdmVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0ZW1wbGF0ZVVybCA9IChpc0Z1bmN0aW9uKG9yaWdBc3luY0RpcmVjdGl2ZS50ZW1wbGF0ZVVybCkpXG4gICAgICAgICAgICAgID8gb3JpZ0FzeW5jRGlyZWN0aXZlLnRlbXBsYXRlVXJsKCRjb21waWxlTm9kZSwgdEF0dHJzKVxuICAgICAgICAgICAgICA6IG9yaWdBc3luY0RpcmVjdGl2ZS50ZW1wbGF0ZVVybCxcbiAgICAgICAgICB0ZW1wbGF0ZU5hbWVzcGFjZSA9IG9yaWdBc3luY0RpcmVjdGl2ZS50ZW1wbGF0ZU5hbWVzcGFjZTtcblxuICAgICAgJGNvbXBpbGVOb2RlLmVtcHR5KCk7XG5cbiAgICAgICR0ZW1wbGF0ZVJlcXVlc3QodGVtcGxhdGVVcmwpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICB2YXIgY29tcGlsZU5vZGUsIHRlbXBUZW1wbGF0ZUF0dHJzLCAkdGVtcGxhdGUsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm47XG5cbiAgICAgICAgICBjb250ZW50ID0gZGVub3JtYWxpemVUZW1wbGF0ZShjb250ZW50KTtcblxuICAgICAgICAgIGlmIChvcmlnQXN5bmNEaXJlY3RpdmUucmVwbGFjZSkge1xuICAgICAgICAgICAgaWYgKGpxTGl0ZUlzVGV4dE5vZGUoY29udGVudCkpIHtcbiAgICAgICAgICAgICAgJHRlbXBsYXRlID0gW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAkdGVtcGxhdGUgPSByZW1vdmVDb21tZW50cyh3cmFwVGVtcGxhdGUodGVtcGxhdGVOYW1lc3BhY2UsIHRyaW0oY29udGVudCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBpbGVOb2RlID0gJHRlbXBsYXRlWzBdO1xuXG4gICAgICAgICAgICBpZiAoJHRlbXBsYXRlLmxlbmd0aCAhPT0gMSB8fCBjb21waWxlTm9kZS5ub2RlVHlwZSAhPT0gTk9ERV9UWVBFX0VMRU1FTlQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3RwbHJ0JyxcbiAgICAgICAgICAgICAgICAgICdUZW1wbGF0ZSBmb3IgZGlyZWN0aXZlIFxcJ3swfVxcJyBtdXN0IGhhdmUgZXhhY3RseSBvbmUgcm9vdCBlbGVtZW50LiB7MX0nLFxuICAgICAgICAgICAgICAgICAgb3JpZ0FzeW5jRGlyZWN0aXZlLm5hbWUsIHRlbXBsYXRlVXJsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGVtcFRlbXBsYXRlQXR0cnMgPSB7JGF0dHI6IHt9fTtcbiAgICAgICAgICAgIHJlcGxhY2VXaXRoKCRyb290RWxlbWVudCwgJGNvbXBpbGVOb2RlLCBjb21waWxlTm9kZSk7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVEaXJlY3RpdmVzID0gY29sbGVjdERpcmVjdGl2ZXMoY29tcGlsZU5vZGUsIFtdLCB0ZW1wVGVtcGxhdGVBdHRycyk7XG5cbiAgICAgICAgICAgIGlmIChpc09iamVjdChvcmlnQXN5bmNEaXJlY3RpdmUuc2NvcGUpKSB7XG4gICAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBkaXJlY3RpdmUgdGhhdCBjYXVzZWQgdGhlIHRlbXBsYXRlIHRvIGJlIGxvYWRlZCBhc3luYyByZXF1aXJlZFxuICAgICAgICAgICAgICAvLyBhbiBpc29sYXRlIHNjb3BlXG4gICAgICAgICAgICAgIG1hcmtEaXJlY3RpdmVTY29wZSh0ZW1wbGF0ZURpcmVjdGl2ZXMsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlyZWN0aXZlcyA9IHRlbXBsYXRlRGlyZWN0aXZlcy5jb25jYXQoZGlyZWN0aXZlcyk7XG4gICAgICAgICAgICBtZXJnZVRlbXBsYXRlQXR0cmlidXRlcyh0QXR0cnMsIHRlbXBUZW1wbGF0ZUF0dHJzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tcGlsZU5vZGUgPSBiZWZvcmVUZW1wbGF0ZUNvbXBpbGVOb2RlO1xuICAgICAgICAgICAgJGNvbXBpbGVOb2RlLmh0bWwoY29udGVudCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGlyZWN0aXZlcy51bnNoaWZ0KGRlcml2ZWRTeW5jRGlyZWN0aXZlKTtcblxuICAgICAgICAgIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuID0gYXBwbHlEaXJlY3RpdmVzVG9Ob2RlKGRpcmVjdGl2ZXMsIGNvbXBpbGVOb2RlLCB0QXR0cnMsXG4gICAgICAgICAgICAgIGNoaWxkVHJhbnNjbHVkZUZuLCAkY29tcGlsZU5vZGUsIG9yaWdBc3luY0RpcmVjdGl2ZSwgcHJlTGlua0ZucywgcG9zdExpbmtGbnMsXG4gICAgICAgICAgICAgIHByZXZpb3VzQ29tcGlsZUNvbnRleHQpO1xuICAgICAgICAgIGZvckVhY2goJHJvb3RFbGVtZW50LCBmdW5jdGlvbihub2RlLCBpKSB7XG4gICAgICAgICAgICBpZiAobm9kZSA9PT0gY29tcGlsZU5vZGUpIHtcbiAgICAgICAgICAgICAgJHJvb3RFbGVtZW50W2ldID0gJGNvbXBpbGVOb2RlWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbiA9IGNvbXBpbGVOb2RlcygkY29tcGlsZU5vZGVbMF0uY2hpbGROb2RlcywgY2hpbGRUcmFuc2NsdWRlRm4pO1xuXG4gICAgICAgICAgd2hpbGUgKGxpbmtRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBzY29wZSA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGJlZm9yZVRlbXBsYXRlTGlua05vZGUgPSBsaW5rUXVldWUuc2hpZnQoKSxcbiAgICAgICAgICAgICAgICBsaW5rUm9vdEVsZW1lbnQgPSBsaW5rUXVldWUuc2hpZnQoKSxcbiAgICAgICAgICAgICAgICBib3VuZFRyYW5zY2x1ZGVGbiA9IGxpbmtRdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGxpbmtOb2RlID0gJGNvbXBpbGVOb2RlWzBdO1xuXG4gICAgICAgICAgICBpZiAoc2NvcGUuJCRkZXN0cm95ZWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBpZiAoYmVmb3JlVGVtcGxhdGVMaW5rTm9kZSAhPT0gYmVmb3JlVGVtcGxhdGVDb21waWxlTm9kZSkge1xuICAgICAgICAgICAgICB2YXIgb2xkQ2xhc3NlcyA9IGJlZm9yZVRlbXBsYXRlTGlua05vZGUuY2xhc3NOYW1lO1xuXG4gICAgICAgICAgICAgIGlmICghKHByZXZpb3VzQ29tcGlsZUNvbnRleHQuaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUgJiZcbiAgICAgICAgICAgICAgICAgIG9yaWdBc3luY0RpcmVjdGl2ZS5yZXBsYWNlKSkge1xuICAgICAgICAgICAgICAgIC8vIGl0IHdhcyBjbG9uZWQgdGhlcmVmb3JlIHdlIGhhdmUgdG8gY2xvbmUgYXMgd2VsbC5cbiAgICAgICAgICAgICAgICBsaW5rTm9kZSA9IGpxTGl0ZUNsb25lKGNvbXBpbGVOb2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXBsYWNlV2l0aChsaW5rUm9vdEVsZW1lbnQsIGpxTGl0ZShiZWZvcmVUZW1wbGF0ZUxpbmtOb2RlKSwgbGlua05vZGUpO1xuXG4gICAgICAgICAgICAgIC8vIENvcHkgaW4gQ1NTIGNsYXNzZXMgZnJvbSBvcmlnaW5hbCBub2RlXG4gICAgICAgICAgICAgIHNhZmVBZGRDbGFzcyhqcUxpdGUobGlua05vZGUpLCBvbGRDbGFzc2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhZnRlclRlbXBsYXRlTm9kZUxpbmtGbi50cmFuc2NsdWRlT25UaGlzRWxlbWVudCkge1xuICAgICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGUsIGJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4gPSBib3VuZFRyYW5zY2x1ZGVGbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuKGFmdGVyVGVtcGxhdGVDaGlsZExpbmtGbiwgc2NvcGUsIGxpbmtOb2RlLCAkcm9vdEVsZW1lbnQsXG4gICAgICAgICAgICAgIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5rUXVldWUgPSBudWxsO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIGlmIChpc0Vycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiBkZWxheWVkTm9kZUxpbmtGbihpZ25vcmVDaGlsZExpbmtGbiwgc2NvcGUsIG5vZGUsIHJvb3RFbGVtZW50LCBib3VuZFRyYW5zY2x1ZGVGbikge1xuICAgICAgICB2YXIgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbiA9IGJvdW5kVHJhbnNjbHVkZUZuO1xuICAgICAgICBpZiAoc2NvcGUuJCRkZXN0cm95ZWQpIHJldHVybjtcbiAgICAgICAgaWYgKGxpbmtRdWV1ZSkge1xuICAgICAgICAgIGxpbmtRdWV1ZS5wdXNoKHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgcm9vdEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRCb3VuZFRyYW5zY2x1ZGVGbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50KSB7XG4gICAgICAgICAgICBjaGlsZEJvdW5kVHJhbnNjbHVkZUZuID0gY3JlYXRlQm91bmRUcmFuc2NsdWRlRm4oc2NvcGUsIGFmdGVyVGVtcGxhdGVOb2RlTGlua0ZuLnRyYW5zY2x1ZGUsIGJvdW5kVHJhbnNjbHVkZUZuKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWZ0ZXJUZW1wbGF0ZU5vZGVMaW5rRm4oYWZ0ZXJUZW1wbGF0ZUNoaWxkTGlua0ZuLCBzY29wZSwgbm9kZSwgcm9vdEVsZW1lbnQsIGNoaWxkQm91bmRUcmFuc2NsdWRlRm4pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogU29ydGluZyBmdW5jdGlvbiBmb3IgYm91bmQgZGlyZWN0aXZlcy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBieVByaW9yaXR5KGEsIGIpIHtcbiAgICAgIHZhciBkaWZmID0gYi5wcmlvcml0eSAtIGEucHJpb3JpdHk7XG4gICAgICBpZiAoZGlmZiAhPT0gMCkgcmV0dXJuIGRpZmY7XG4gICAgICBpZiAoYS5uYW1lICE9PSBiLm5hbWUpIHJldHVybiAoYS5uYW1lIDwgYi5uYW1lKSA/IC0xIDogMTtcbiAgICAgIHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhc3NlcnROb0R1cGxpY2F0ZSh3aGF0LCBwcmV2aW91c0RpcmVjdGl2ZSwgZGlyZWN0aXZlLCBlbGVtZW50KSB7XG5cbiAgICAgIGZ1bmN0aW9uIHdyYXBNb2R1bGVOYW1lSWZEZWZpbmVkKG1vZHVsZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZU5hbWUgP1xuICAgICAgICAgICgnIChtb2R1bGU6ICcgKyBtb2R1bGVOYW1lICsgJyknKSA6XG4gICAgICAgICAgJyc7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcmV2aW91c0RpcmVjdGl2ZSkge1xuICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbXVsdGlkaXInLCAnTXVsdGlwbGUgZGlyZWN0aXZlcyBbezB9ezF9LCB7Mn17M31dIGFza2luZyBmb3IgezR9IG9uOiB7NX0nLFxuICAgICAgICAgICAgcHJldmlvdXNEaXJlY3RpdmUubmFtZSwgd3JhcE1vZHVsZU5hbWVJZkRlZmluZWQocHJldmlvdXNEaXJlY3RpdmUuJCRtb2R1bGVOYW1lKSxcbiAgICAgICAgICAgIGRpcmVjdGl2ZS5uYW1lLCB3cmFwTW9kdWxlTmFtZUlmRGVmaW5lZChkaXJlY3RpdmUuJCRtb2R1bGVOYW1lKSwgd2hhdCwgc3RhcnRpbmdUYWcoZWxlbWVudCkpO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYWRkVGV4dEludGVycG9sYXRlRGlyZWN0aXZlKGRpcmVjdGl2ZXMsIHRleHQpIHtcbiAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKHRleHQsIHRydWUpO1xuICAgICAgaWYgKGludGVycG9sYXRlRm4pIHtcbiAgICAgICAgZGlyZWN0aXZlcy5wdXNoKHtcbiAgICAgICAgICBwcmlvcml0eTogMCxcbiAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiB0ZXh0SW50ZXJwb2xhdGVDb21waWxlRm4odGVtcGxhdGVOb2RlKSB7XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVOb2RlUGFyZW50ID0gdGVtcGxhdGVOb2RlLnBhcmVudCgpLFxuICAgICAgICAgICAgICAgIGhhc0NvbXBpbGVQYXJlbnQgPSAhIXRlbXBsYXRlTm9kZVBhcmVudC5sZW5ndGg7XG5cbiAgICAgICAgICAgIC8vIFdoZW4gdHJhbnNjbHVkaW5nIGEgdGVtcGxhdGUgdGhhdCBoYXMgYmluZGluZ3MgaW4gdGhlIHJvb3RcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGhhdmUgYSBwYXJlbnQgYW5kIHRodXMgbmVlZCB0byBhZGQgdGhlIGNsYXNzIGR1cmluZyBsaW5raW5nIGZuLlxuICAgICAgICAgICAgaWYgKGhhc0NvbXBpbGVQYXJlbnQpIGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModGVtcGxhdGVOb2RlUGFyZW50KTtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRleHRJbnRlcnBvbGF0ZUxpbmtGbihzY29wZSwgbm9kZSkge1xuICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnQoKTtcbiAgICAgICAgICAgICAgaWYgKCFoYXNDb21waWxlUGFyZW50KSBjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHBhcmVudCk7XG4gICAgICAgICAgICAgIGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhwYXJlbnQsIGludGVycG9sYXRlRm4uZXhwcmVzc2lvbnMpO1xuICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goaW50ZXJwb2xhdGVGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVGbldhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbm9kZVswXS5ub2RlVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiB3cmFwVGVtcGxhdGUodHlwZSwgdGVtcGxhdGUpIHtcbiAgICAgIHR5cGUgPSBsb3dlcmNhc2UodHlwZSB8fCAnaHRtbCcpO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdzdmcnOlxuICAgICAgY2FzZSAnbWF0aCc6XG4gICAgICAgIHZhciB3cmFwcGVyID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB3cmFwcGVyLmlubmVySFRNTCA9ICc8JyArIHR5cGUgKyAnPicgKyB0ZW1wbGF0ZSArICc8LycgKyB0eXBlICsgJz4nO1xuICAgICAgICByZXR1cm4gd3JhcHBlci5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBnZXRUcnVzdGVkQ29udGV4dChub2RlLCBhdHRyTm9ybWFsaXplZE5hbWUpIHtcbiAgICAgIGlmIChhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdzcmNkb2MnKSB7XG4gICAgICAgIHJldHVybiAkc2NlLkhUTUw7XG4gICAgICB9XG4gICAgICB2YXIgdGFnID0gbm9kZU5hbWVfKG5vZGUpO1xuICAgICAgLy8gQWxsIHRhZ3Mgd2l0aCBzcmMgYXR0cmlidXRlcyByZXF1aXJlIGEgUkVTT1VSQ0VfVVJMIHZhbHVlLCBleGNlcHQgZm9yXG4gICAgICAvLyBpbWcgYW5kIHZhcmlvdXMgaHRtbDUgbWVkaWEgdGFncy5cbiAgICAgIGlmIChhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdzcmMnIHx8IGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ25nU3JjJykge1xuICAgICAgICBpZiAoWydpbWcnLCAndmlkZW8nLCAnYXVkaW8nLCAnc291cmNlJywgJ3RyYWNrJ10uaW5kZXhPZih0YWcpID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiAkc2NlLlJFU09VUkNFX1VSTDtcbiAgICAgICAgfVxuICAgICAgLy8gbWFjdGlvblt4bGluazpocmVmXSBjYW4gc291cmNlIFNWRy4gIEl0J3Mgbm90IGxpbWl0ZWQgdG8gPG1hY3Rpb24+LlxuICAgICAgfSBlbHNlIGlmIChhdHRyTm9ybWFsaXplZE5hbWUgPT09ICd4bGlua0hyZWYnIHx8XG4gICAgICAgICAgKHRhZyA9PT0gJ2Zvcm0nICYmIGF0dHJOb3JtYWxpemVkTmFtZSA9PT0gJ2FjdGlvbicpIHx8XG4gICAgICAgICAgLy8gbGlua3MgY2FuIGJlIHN0eWxlc2hlZXRzIG9yIGltcG9ydHMsIHdoaWNoIGNhbiBydW4gc2NyaXB0IGluIHRoZSBjdXJyZW50IG9yaWdpblxuICAgICAgICAgICh0YWcgPT09ICdsaW5rJyAmJiBhdHRyTm9ybWFsaXplZE5hbWUgPT09ICdocmVmJylcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gJHNjZS5SRVNPVVJDRV9VUkw7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBhZGRBdHRySW50ZXJwb2xhdGVEaXJlY3RpdmUobm9kZSwgZGlyZWN0aXZlcywgdmFsdWUsIG5hbWUsIGlzTmdBdHRyKSB7XG4gICAgICB2YXIgdHJ1c3RlZENvbnRleHQgPSBnZXRUcnVzdGVkQ29udGV4dChub2RlLCBuYW1lKTtcbiAgICAgIHZhciBtdXN0SGF2ZUV4cHJlc3Npb24gPSAhaXNOZ0F0dHI7XG4gICAgICB2YXIgYWxsT3JOb3RoaW5nID0gQUxMX09SX05PVEhJTkdfQVRUUlNbbmFtZV0gfHwgaXNOZ0F0dHI7XG5cbiAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKHZhbHVlLCBtdXN0SGF2ZUV4cHJlc3Npb24sIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpO1xuXG4gICAgICAvLyBubyBpbnRlcnBvbGF0aW9uIGZvdW5kIC0+IGlnbm9yZVxuICAgICAgaWYgKCFpbnRlcnBvbGF0ZUZuKSByZXR1cm47XG5cbiAgICAgIGlmIChuYW1lID09PSAnbXVsdGlwbGUnICYmIG5vZGVOYW1lXyhub2RlKSA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ3NlbG11bHRpJyxcbiAgICAgICAgICAgICdCaW5kaW5nIHRvIHRoZSBcXCdtdWx0aXBsZVxcJyBhdHRyaWJ1dGUgaXMgbm90IHN1cHBvcnRlZC4gRWxlbWVudDogezB9JyxcbiAgICAgICAgICAgIHN0YXJ0aW5nVGFnKG5vZGUpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKEVWRU5UX0hBTkRMRVJfQVRUUl9SRUdFWFAudGVzdChuYW1lKSkge1xuICAgICAgICB0aHJvdyAkY29tcGlsZU1pbkVycignbm9kb21ldmVudHMnLFxuICAgICAgICAgICAgJ0ludGVycG9sYXRpb25zIGZvciBIVE1MIERPTSBldmVudCBhdHRyaWJ1dGVzIGFyZSBkaXNhbGxvd2VkLiAgUGxlYXNlIHVzZSB0aGUgJyArXG4gICAgICAgICAgICAgICAgJ25nLSB2ZXJzaW9ucyAoc3VjaCBhcyBuZy1jbGljayBpbnN0ZWFkIG9mIG9uY2xpY2spIGluc3RlYWQuJyk7XG4gICAgICB9XG5cbiAgICAgIGRpcmVjdGl2ZXMucHVzaCh7XG4gICAgICAgIHByaW9yaXR5OiAxMDAsXG4gICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcHJlOiBmdW5jdGlvbiBhdHRySW50ZXJwb2xhdGVQcmVMaW5rRm4oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgICAgICAgICB2YXIgJCRvYnNlcnZlcnMgPSAoYXR0ci4kJG9ic2VydmVycyB8fCAoYXR0ci4kJG9ic2VydmVycyA9IGNyZWF0ZU1hcCgpKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGhhcyBjaGFuZ2VkIHNpbmNlIGxhc3QgJGludGVycG9sYXRlKCllZFxuICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IGF0dHJbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBpbnRlcnBvbGF0ZSBhZ2FpbiBzaW5jZSB0aGUgYXR0cmlidXRlIHZhbHVlIGhhcyBiZWVuIHVwZGF0ZWRcbiAgICAgICAgICAgICAgICAgIC8vIChlLmcuIGJ5IGFub3RoZXIgZGlyZWN0aXZlJ3MgY29tcGlsZSBmdW5jdGlvbilcbiAgICAgICAgICAgICAgICAgIC8vIGVuc3VyZSB1bnNldC9lbXB0eSB2YWx1ZXMgbWFrZSBpbnRlcnBvbGF0ZUZuIGZhbHN5XG4gICAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZUZuID0gbmV3VmFsdWUgJiYgJGludGVycG9sYXRlKG5ld1ZhbHVlLCB0cnVlLCB0cnVzdGVkQ29udGV4dCwgYWxsT3JOb3RoaW5nKTtcbiAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgYXR0cmlidXRlIHdhcyB1cGRhdGVkIHNvIHRoYXQgdGhlcmUgaXMgbm8gaW50ZXJwb2xhdGlvbiBnb2luZyBvbiB3ZSBkb24ndCB3YW50IHRvXG4gICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgYW55IG9ic2VydmVyc1xuICAgICAgICAgICAgICAgIGlmICghaW50ZXJwb2xhdGVGbikgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBhdHRyIG9iamVjdCBzbyB0aGF0IGl0J3MgcmVhZHkgaW4gY2FzZSB3ZSBuZWVkIHRoZSB2YWx1ZSBmb3IgaXNvbGF0ZVxuICAgICAgICAgICAgICAgIC8vIHNjb3BlIGluaXRpYWxpemF0aW9uLCBvdGhlcndpc2UgdGhlIHZhbHVlIHdvdWxkIG5vdCBiZSBhdmFpbGFibGUgZnJvbSBpc29sYXRlXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0aXZlJ3MgbGlua2luZyBmbiBkdXJpbmcgbGlua2luZyBwaGFzZVxuICAgICAgICAgICAgICAgIGF0dHJbbmFtZV0gPSBpbnRlcnBvbGF0ZUZuKHNjb3BlKTtcblxuICAgICAgICAgICAgICAgICgkJG9ic2VydmVyc1tuYW1lXSB8fCAoJCRvYnNlcnZlcnNbbmFtZV0gPSBbXSkpLiQkaW50ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIChhdHRyLiQkb2JzZXJ2ZXJzICYmIGF0dHIuJCRvYnNlcnZlcnNbbmFtZV0uJCRzY29wZSB8fCBzY29wZSkuXG4gICAgICAgICAgICAgICAgICAkd2F0Y2goaW50ZXJwb2xhdGVGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVGbldhdGNoQWN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvL3NwZWNpYWwgY2FzZSBmb3IgY2xhc3MgYXR0cmlidXRlIGFkZGl0aW9uICsgcmVtb3ZhbFxuICAgICAgICAgICAgICAgICAgICAvL3NvIHRoYXQgY2xhc3MgY2hhbmdlcyBjYW4gdGFwIGludG8gdGhlIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAgICAvL2hvb2tzIHByb3ZpZGVkIGJ5IHRoZSAkYW5pbWF0ZSBzZXJ2aWNlLiBCZSBzdXJlIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vc2tpcCBhbmltYXRpb25zIHdoZW4gdGhlIGZpcnN0IGRpZ2VzdCBvY2N1cnMgKHdoZW5cbiAgICAgICAgICAgICAgICAgICAgLy9ib3RoIHRoZSBuZXcgYW5kIHRoZSBvbGQgdmFsdWVzIGFyZSB0aGUgc2FtZSkgc2luY2VcbiAgICAgICAgICAgICAgICAgICAgLy90aGUgQ1NTIGNsYXNzZXMgYXJlIHRoZSBub24taW50ZXJwb2xhdGVkIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiBuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyLiR1cGRhdGVDbGFzcyhuZXdWYWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGF0dHIuJHNldChuYW1lLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyBhIHNwZWNpYWwganFMaXRlLnJlcGxhY2VXaXRoLCB3aGljaCBjYW4gcmVwbGFjZSBpdGVtcyB3aGljaFxuICAgICAqIGhhdmUgbm8gcGFyZW50cywgcHJvdmlkZWQgdGhhdCB0aGUgY29udGFpbmluZyBqcUxpdGUgY29sbGVjdGlvbiBpcyBwcm92aWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SnFMaXRlPX0gJHJvb3RFbGVtZW50IFRoZSByb290IG9mIHRoZSBjb21waWxlIHRyZWUuIFVzZWQgc28gdGhhdCB3ZSBjYW4gcmVwbGFjZSBub2Rlc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSByb290IG9mIHRoZSB0cmVlLlxuICAgICAqIEBwYXJhbSB7SnFMaXRlfSBlbGVtZW50c1RvUmVtb3ZlIFRoZSBqcUxpdGUgZWxlbWVudCB3aGljaCB3ZSBhcmUgZ29pbmcgdG8gcmVwbGFjZS4gV2Uga2VlcFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBzaGVsbCwgYnV0IHJlcGxhY2UgaXRzIERPTSBub2RlIHJlZmVyZW5jZS5cbiAgICAgKiBAcGFyYW0ge05vZGV9IG5ld05vZGUgVGhlIG5ldyBET00gbm9kZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZXBsYWNlV2l0aCgkcm9vdEVsZW1lbnQsIGVsZW1lbnRzVG9SZW1vdmUsIG5ld05vZGUpIHtcbiAgICAgIHZhciBmaXJzdEVsZW1lbnRUb1JlbW92ZSA9IGVsZW1lbnRzVG9SZW1vdmVbMF0sXG4gICAgICAgICAgcmVtb3ZlQ291bnQgPSBlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aCxcbiAgICAgICAgICBwYXJlbnQgPSBmaXJzdEVsZW1lbnRUb1JlbW92ZS5wYXJlbnROb2RlLFxuICAgICAgICAgIGksIGlpO1xuXG4gICAgICBpZiAoJHJvb3RFbGVtZW50KSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGlpID0gJHJvb3RFbGVtZW50Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICBpZiAoJHJvb3RFbGVtZW50W2ldID09PSBmaXJzdEVsZW1lbnRUb1JlbW92ZSkge1xuICAgICAgICAgICAgJHJvb3RFbGVtZW50W2krK10gPSBuZXdOb2RlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGksIGoyID0gaiArIHJlbW92ZUNvdW50IC0gMSxcbiAgICAgICAgICAgICAgICAgICAgIGpqID0gJHJvb3RFbGVtZW50Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgaiA8IGpqOyBqKyssIGoyKyspIHtcbiAgICAgICAgICAgICAgaWYgKGoyIDwgamopIHtcbiAgICAgICAgICAgICAgICAkcm9vdEVsZW1lbnRbal0gPSAkcm9vdEVsZW1lbnRbajJdO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSAkcm9vdEVsZW1lbnRbal07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRyb290RWxlbWVudC5sZW5ndGggLT0gcmVtb3ZlQ291bnQgLSAxO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVwbGFjZWQgZWxlbWVudCBpcyBhbHNvIHRoZSBqUXVlcnkgLmNvbnRleHQgdGhlbiByZXBsYWNlIGl0XG4gICAgICAgICAgICAvLyAuY29udGV4dCBpcyBhIGRlcHJlY2F0ZWQgalF1ZXJ5IGFwaSwgc28gd2Ugc2hvdWxkIHNldCBpdCBvbmx5IHdoZW4galF1ZXJ5IHNldCBpdFxuICAgICAgICAgICAgLy8gaHR0cDovL2FwaS5qcXVlcnkuY29tL2NvbnRleHQvXG4gICAgICAgICAgICBpZiAoJHJvb3RFbGVtZW50LmNvbnRleHQgPT09IGZpcnN0RWxlbWVudFRvUmVtb3ZlKSB7XG4gICAgICAgICAgICAgICRyb290RWxlbWVudC5jb250ZXh0ID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgZmlyc3RFbGVtZW50VG9SZW1vdmUpO1xuICAgICAgfVxuXG4gICAgICAvLyBBcHBlbmQgYWxsIHRoZSBgZWxlbWVudHNUb1JlbW92ZWAgdG8gYSBmcmFnbWVudC4gVGhpcyB3aWxsLi4uXG4gICAgICAvLyAtIHJlbW92ZSB0aGVtIGZyb20gdGhlIERPTVxuICAgICAgLy8gLSBhbGxvdyB0aGVtIHRvIHN0aWxsIGJlIHRyYXZlcnNlZCB3aXRoIC5uZXh0U2libGluZ1xuICAgICAgLy8gLSBhbGxvdyBhIHNpbmdsZSBmcmFnbWVudC5xU0EgdG8gZmV0Y2ggYWxsIGVsZW1lbnRzIGJlaW5nIHJlbW92ZWRcbiAgICAgIHZhciBmcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcmVtb3ZlQ291bnQ7IGkrKykge1xuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChlbGVtZW50c1RvUmVtb3ZlW2ldKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGpxTGl0ZS5oYXNEYXRhKGZpcnN0RWxlbWVudFRvUmVtb3ZlKSkge1xuICAgICAgICAvLyBDb3B5IG92ZXIgdXNlciBkYXRhICh0aGF0IGluY2x1ZGVzIEFuZ3VsYXIncyAkc2NvcGUgZXRjLikuIERvbid0IGNvcHkgcHJpdmF0ZVxuICAgICAgICAvLyBkYXRhIGhlcmUgYmVjYXVzZSB0aGVyZSdzIG5vIHB1YmxpYyBpbnRlcmZhY2UgaW4galF1ZXJ5IHRvIGRvIHRoYXQgYW5kIGNvcHlpbmcgb3ZlclxuICAgICAgICAvLyBldmVudCBsaXN0ZW5lcnMgKHdoaWNoIGlzIHRoZSBtYWluIHVzZSBvZiBwcml2YXRlIGRhdGEpIHdvdWxkbid0IHdvcmsgYW55d2F5LlxuICAgICAgICBqcUxpdGUuZGF0YShuZXdOb2RlLCBqcUxpdGUuZGF0YShmaXJzdEVsZW1lbnRUb1JlbW92ZSkpO1xuXG4gICAgICAgIC8vIFJlbW92ZSAkZGVzdHJveSBldmVudCBsaXN0ZW5lcnMgZnJvbSBgZmlyc3RFbGVtZW50VG9SZW1vdmVgXG4gICAgICAgIGpxTGl0ZShmaXJzdEVsZW1lbnRUb1JlbW92ZSkub2ZmKCckZGVzdHJveScpO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhbnVwIGFueSBkYXRhL2xpc3RlbmVycyBvbiB0aGUgZWxlbWVudHMgYW5kIGNoaWxkcmVuLlxuICAgICAgLy8gVGhpcyBpbmNsdWRlcyBpbnZva2luZyB0aGUgJGRlc3Ryb3kgZXZlbnQgb24gYW55IGVsZW1lbnRzIHdpdGggbGlzdGVuZXJzLlxuICAgICAganFMaXRlLmNsZWFuRGF0YShmcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcqJykpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIGpxTGl0ZSBjb2xsZWN0aW9uIHRvIG9ubHkgY29udGFpbiB0aGUgYG5ld05vZGVgXG4gICAgICBmb3IgKGkgPSAxOyBpIDwgcmVtb3ZlQ291bnQ7IGkrKykge1xuICAgICAgICBkZWxldGUgZWxlbWVudHNUb1JlbW92ZVtpXTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnRzVG9SZW1vdmVbMF0gPSBuZXdOb2RlO1xuICAgICAgZWxlbWVudHNUb1JlbW92ZS5sZW5ndGggPSAxO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gY2xvbmVBbmRBbm5vdGF0ZUZuKGZuLCBhbm5vdGF0aW9uKSB7XG4gICAgICByZXR1cm4gZXh0ZW5kKGZ1bmN0aW9uKCkgeyByZXR1cm4gZm4uYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgfSwgZm4sIGFubm90YXRpb24pO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gaW52b2tlTGlua0ZuKGxpbmtGbiwgc2NvcGUsICRlbGVtZW50LCBhdHRycywgY29udHJvbGxlcnMsIHRyYW5zY2x1ZGVGbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGlua0ZuKHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIGNvbnRyb2xsZXJzLCB0cmFuc2NsdWRlRm4pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlLCBzdGFydGluZ1RhZygkZWxlbWVudCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0cmljdEJpbmRpbmdzQ2hlY2soYXR0ck5hbWUsIGRpcmVjdGl2ZU5hbWUpIHtcbiAgICAgIGlmIChzdHJpY3RDb21wb25lbnRCaW5kaW5nc0VuYWJsZWQpIHtcbiAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ21pc3NpbmdhdHRyJyxcbiAgICAgICAgICAnQXR0cmlidXRlIFxcJ3swfVxcJyBvZiBcXCd7MX1cXCcgaXMgbm9uLW9wdGlvbmFsIGFuZCBtdXN0IGJlIHNldCEnLFxuICAgICAgICAgIGF0dHJOYW1lLCBkaXJlY3RpdmVOYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgJHdhdGNoZXMgZm9yIGlzb2xhdGUgc2NvcGUgYW5kIGNvbnRyb2xsZXIgYmluZGluZ3MuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZURpcmVjdGl2ZUJpbmRpbmdzKHNjb3BlLCBhdHRycywgZGVzdGluYXRpb24sIGJpbmRpbmdzLCBkaXJlY3RpdmUpIHtcbiAgICAgIHZhciByZW1vdmVXYXRjaENvbGxlY3Rpb24gPSBbXTtcbiAgICAgIHZhciBpbml0aWFsQ2hhbmdlcyA9IHt9O1xuICAgICAgdmFyIGNoYW5nZXM7XG5cbiAgICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uIGluaXRpYWxpemVCaW5kaW5nKGRlZmluaXRpb24sIHNjb3BlTmFtZSkge1xuICAgICAgICB2YXIgYXR0ck5hbWUgPSBkZWZpbml0aW9uLmF0dHJOYW1lLFxuICAgICAgICBvcHRpb25hbCA9IGRlZmluaXRpb24ub3B0aW9uYWwsXG4gICAgICAgIG1vZGUgPSBkZWZpbml0aW9uLm1vZGUsIC8vIEAsID0sIDwsIG9yICZcbiAgICAgICAgbGFzdFZhbHVlLFxuICAgICAgICBwYXJlbnRHZXQsIHBhcmVudFNldCwgY29tcGFyZSwgcmVtb3ZlV2F0Y2g7XG5cbiAgICAgICAgc3dpdGNoIChtb2RlKSB7XG5cbiAgICAgICAgICBjYXNlICdAJzpcbiAgICAgICAgICAgIGlmICghb3B0aW9uYWwgJiYgIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICAgIGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBhdHRyc1thdHRyTmFtZV0gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gYXR0cnMuJG9ic2VydmUoYXR0ck5hbWUsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChpc1N0cmluZyh2YWx1ZSkgfHwgaXNCb29sZWFuKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV07XG4gICAgICAgICAgICAgICAgcmVjb3JkQ2hhbmdlcyhzY29wZU5hbWUsIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF0dHJzLiQkb2JzZXJ2ZXJzW2F0dHJOYW1lXS4kJHNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgICBsYXN0VmFsdWUgPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcobGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlIGhhcyBiZWVuIHByb3ZpZGVkIHRoZW4gd2UgdHJpZ2dlciBhbiBpbnRlcnBvbGF0aW9uIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAvLyB0aGUgdmFsdWUgaXMgdGhlcmUgZm9yIHVzZSBpbiB0aGUgbGluayBmblxuICAgICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gJGludGVycG9sYXRlKGxhc3RWYWx1ZSkoc2NvcGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Jvb2xlYW4obGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgYXR0cmlidXRlcyBpcyBvbmUgb2YgdGhlIEJPT0xFQU5fQVRUUiB0aGVuIEFuZ3VsYXIgd2lsbCBoYXZlIGNvbnZlcnRlZFxuICAgICAgICAgICAgICAvLyB0aGUgdmFsdWUgdG8gYm9vbGVhbiByYXRoZXIgdGhhbiBhIHN0cmluZywgc28gd2Ugc3BlY2lhbCBjYXNlIHRoaXMgc2l0dWF0aW9uXG4gICAgICAgICAgICAgIGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBsYXN0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbml0aWFsQ2hhbmdlc1tzY29wZU5hbWVdID0gbmV3IFNpbXBsZUNoYW5nZShfVU5JTklUSUFMSVpFRF9WQUxVRSwgZGVzdGluYXRpb25bc2NvcGVOYW1lXSk7XG4gICAgICAgICAgICByZW1vdmVXYXRjaENvbGxlY3Rpb24ucHVzaChyZW1vdmVXYXRjaCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJz0nOlxuICAgICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKGF0dHJzLCBhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSBicmVhaztcbiAgICAgICAgICAgICAgc3RyaWN0QmluZGluZ3NDaGVjayhhdHRyTmFtZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9uYWwgJiYgIWF0dHJzW2F0dHJOYW1lXSkgYnJlYWs7XG5cbiAgICAgICAgICAgIHBhcmVudEdldCA9ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pO1xuICAgICAgICAgICAgaWYgKHBhcmVudEdldC5saXRlcmFsKSB7XG4gICAgICAgICAgICAgIGNvbXBhcmUgPSBlcXVhbHM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb21wYXJlID0gc2ltcGxlQ29tcGFyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudFNldCA9IHBhcmVudEdldC5hc3NpZ24gfHwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBjaGFuZ2UsIG9yIHdlIHdpbGwgdGhyb3cgdGhpcyBleGNlcHRpb24gb24gZXZlcnkgJGRpZ2VzdFxuICAgICAgICAgICAgICBsYXN0VmFsdWUgPSBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gcGFyZW50R2V0KHNjb3BlKTtcbiAgICAgICAgICAgICAgdGhyb3cgJGNvbXBpbGVNaW5FcnIoJ25vbmFzc2lnbicsXG4gICAgICAgICAgICAgICAgICAnRXhwcmVzc2lvbiBcXCd7MH1cXCcgaW4gYXR0cmlidXRlIFxcJ3sxfVxcJyB1c2VkIHdpdGggZGlyZWN0aXZlIFxcJ3syfVxcJyBpcyBub24tYXNzaWduYWJsZSEnLFxuICAgICAgICAgICAgICAgICAgYXR0cnNbYXR0ck5hbWVdLCBhdHRyTmFtZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGRlc3RpbmF0aW9uW3Njb3BlTmFtZV0gPSBwYXJlbnRHZXQoc2NvcGUpO1xuICAgICAgICAgICAgdmFyIHBhcmVudFZhbHVlV2F0Y2ggPSBmdW5jdGlvbiBwYXJlbnRWYWx1ZVdhdGNoKHBhcmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmICghY29tcGFyZShwYXJlbnRWYWx1ZSwgZGVzdGluYXRpb25bc2NvcGVOYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSBhcmUgb3V0IG9mIHN5bmMgYW5kIG5lZWQgdG8gY29weVxuICAgICAgICAgICAgICAgIGlmICghY29tcGFyZShwYXJlbnRWYWx1ZSwgbGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgLy8gcGFyZW50IGNoYW5nZWQgYW5kIGl0IGhhcyBwcmVjZWRlbmNlXG4gICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gcGFyZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwYXJlbnQgY2FuIGJlIGFzc2lnbmVkIHRoZW4gZG8gc29cbiAgICAgICAgICAgICAgICAgIHBhcmVudFNldChzY29wZSwgcGFyZW50VmFsdWUgPSBkZXN0aW5hdGlvbltzY29wZU5hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbGFzdFZhbHVlID0gcGFyZW50VmFsdWU7XG4gICAgICAgICAgICAgIHJldHVybiBsYXN0VmFsdWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcGFyZW50VmFsdWVXYXRjaC4kc3RhdGVmdWwgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uY29sbGVjdGlvbikge1xuICAgICAgICAgICAgICByZW1vdmVXYXRjaCA9IHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oYXR0cnNbYXR0ck5hbWVdLCBwYXJlbnRWYWx1ZVdhdGNoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gc2NvcGUuJHdhdGNoKCRwYXJzZShhdHRyc1thdHRyTmFtZV0sIHBhcmVudFZhbHVlV2F0Y2gpLCBudWxsLCBwYXJlbnRHZXQubGl0ZXJhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW1vdmVXYXRjaENvbGxlY3Rpb24ucHVzaChyZW1vdmVXYXRjaCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJzwnOlxuICAgICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKGF0dHJzLCBhdHRyTmFtZSkpIHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSBicmVhaztcbiAgICAgICAgICAgICAgc3RyaWN0QmluZGluZ3NDaGVjayhhdHRyTmFtZSwgZGlyZWN0aXZlLm5hbWUpO1xuICAgICAgICAgICAgICBhdHRyc1thdHRyTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9uYWwgJiYgIWF0dHJzW2F0dHJOYW1lXSkgYnJlYWs7XG5cbiAgICAgICAgICAgIHBhcmVudEdldCA9ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pO1xuICAgICAgICAgICAgdmFyIGRlZXBXYXRjaCA9IHBhcmVudEdldC5saXRlcmFsO1xuXG4gICAgICAgICAgICB2YXIgaW5pdGlhbFZhbHVlID0gZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IHBhcmVudEdldChzY29wZSk7XG4gICAgICAgICAgICBpbml0aWFsQ2hhbmdlc1tzY29wZU5hbWVdID0gbmV3IFNpbXBsZUNoYW5nZShfVU5JTklUSUFMSVpFRF9WQUxVRSwgZGVzdGluYXRpb25bc2NvcGVOYW1lXSk7XG5cbiAgICAgICAgICAgIHJlbW92ZVdhdGNoID0gc2NvcGUuJHdhdGNoKHBhcmVudEdldCwgZnVuY3Rpb24gcGFyZW50VmFsdWVXYXRjaEFjdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlID09PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSA9PT0gaW5pdGlhbFZhbHVlIHx8IChkZWVwV2F0Y2ggJiYgZXF1YWxzKG9sZFZhbHVlLCBpbml0aWFsVmFsdWUpKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IGluaXRpYWxWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZWNvcmRDaGFuZ2VzKHNjb3BlTmFtZSwgbmV3VmFsdWUsIG9sZFZhbHVlKTtcbiAgICAgICAgICAgICAgZGVzdGluYXRpb25bc2NvcGVOYW1lXSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgfSwgZGVlcFdhdGNoKTtcblxuICAgICAgICAgICAgcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uLnB1c2gocmVtb3ZlV2F0Y2gpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICcmJzpcbiAgICAgICAgICAgIGlmICghb3B0aW9uYWwgJiYgIWhhc093blByb3BlcnR5LmNhbGwoYXR0cnMsIGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgICBzdHJpY3RCaW5kaW5nc0NoZWNrKGF0dHJOYW1lLCBkaXJlY3RpdmUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb24ndCBhc3NpZ24gT2JqZWN0LnByb3RvdHlwZSBtZXRob2QgdG8gc2NvcGVcbiAgICAgICAgICAgIHBhcmVudEdldCA9IGF0dHJzLmhhc093blByb3BlcnR5KGF0dHJOYW1lKSA/ICRwYXJzZShhdHRyc1thdHRyTmFtZV0pIDogbm9vcDtcblxuICAgICAgICAgICAgLy8gRG9uJ3QgYXNzaWduIG5vb3AgdG8gZGVzdGluYXRpb24gaWYgZXhwcmVzc2lvbiBpcyBub3QgdmFsaWRcbiAgICAgICAgICAgIGlmIChwYXJlbnRHZXQgPT09IG5vb3AgJiYgb3B0aW9uYWwpIGJyZWFrO1xuXG4gICAgICAgICAgICBkZXN0aW5hdGlvbltzY29wZU5hbWVdID0gZnVuY3Rpb24obG9jYWxzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBwYXJlbnRHZXQoc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiByZWNvcmRDaGFuZ2VzKGtleSwgY3VycmVudFZhbHVlLCBwcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGRlc3RpbmF0aW9uLiRvbkNoYW5nZXMpICYmICFzaW1wbGVDb21wYXJlKGN1cnJlbnRWYWx1ZSwgcHJldmlvdXNWYWx1ZSkpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBhbHJlYWR5IHNjaGVkdWxlZCB0aGUgdG9wIGxldmVsIG9uQ2hhbmdlc1F1ZXVlIGhhbmRsZXIgdGhlbiBkbyBzbyBub3dcbiAgICAgICAgICBpZiAoIW9uQ2hhbmdlc1F1ZXVlKSB7XG4gICAgICAgICAgICBzY29wZS4kJHBvc3REaWdlc3QoZmx1c2hPbkNoYW5nZXNRdWV1ZSk7XG4gICAgICAgICAgICBvbkNoYW5nZXNRdWV1ZSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG5vdCBhbHJlYWR5IHF1ZXVlZCBhIHRyaWdnZXIgb2Ygb25DaGFuZ2VzIGZvciB0aGlzIGNvbnRyb2xsZXIgdGhlbiBkbyBzbyBub3dcbiAgICAgICAgICBpZiAoIWNoYW5nZXMpIHtcbiAgICAgICAgICAgIGNoYW5nZXMgPSB7fTtcbiAgICAgICAgICAgIG9uQ2hhbmdlc1F1ZXVlLnB1c2godHJpZ2dlck9uQ2hhbmdlc0hvb2spO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBJZiB0aGUgaGFzIGJlZW4gYSBjaGFuZ2Ugb24gdGhpcyBwcm9wZXJ0eSBhbHJlYWR5IHRoZW4gd2UgbmVlZCB0byByZXVzZSB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICBpZiAoY2hhbmdlc1trZXldKSB7XG4gICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gY2hhbmdlc1trZXldLnByZXZpb3VzVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFN0b3JlIHRoaXMgY2hhbmdlXG4gICAgICAgICAgY2hhbmdlc1trZXldID0gbmV3IFNpbXBsZUNoYW5nZShwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJPbkNoYW5nZXNIb29rKCkge1xuICAgICAgICBkZXN0aW5hdGlvbi4kb25DaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICAvLyBOb3cgY2xlYXIgdGhlIGNoYW5nZXMgc28gdGhhdCB3ZSBzY2hlZHVsZSBvbkNoYW5nZXMgd2hlbiBtb3JlIGNoYW5nZXMgYXJyaXZlXG4gICAgICAgIGNoYW5nZXMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxDaGFuZ2VzOiBpbml0aWFsQ2hhbmdlcyxcbiAgICAgICAgcmVtb3ZlV2F0Y2hlczogcmVtb3ZlV2F0Y2hDb2xsZWN0aW9uLmxlbmd0aCAmJiBmdW5jdGlvbiByZW1vdmVXYXRjaGVzKCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlbW92ZVdhdGNoQ29sbGVjdGlvbi5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICByZW1vdmVXYXRjaENvbGxlY3Rpb25baV0oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XTtcbn1cblxuZnVuY3Rpb24gU2ltcGxlQ2hhbmdlKHByZXZpb3VzLCBjdXJyZW50KSB7XG4gIHRoaXMucHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzO1xuICB0aGlzLmN1cnJlbnRWYWx1ZSA9IGN1cnJlbnQ7XG59XG5TaW1wbGVDaGFuZ2UucHJvdG90eXBlLmlzRmlyc3RDaGFuZ2UgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA9PT0gX1VOSU5JVElBTElaRURfVkFMVUU7IH07XG5cblxudmFyIFBSRUZJWF9SRUdFWFAgPSAvXigoPzp4fGRhdGEpWzpcXC1fXSkvaTtcbnZhciBTUEVDSUFMX0NIQVJTX1JFR0VYUCA9IC9bOlxcLV9dKyguKS9nO1xuXG4vKipcbiAqIENvbnZlcnRzIGFsbCBhY2NlcHRlZCBkaXJlY3RpdmVzIGZvcm1hdCBpbnRvIHByb3BlciBkaXJlY3RpdmUgbmFtZS5cbiAqIEBwYXJhbSBuYW1lIE5hbWUgdG8gbm9ybWFsaXplXG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGl2ZU5vcm1hbGl6ZShuYW1lKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoUFJFRklYX1JFR0VYUCwgJycpXG4gICAgLnJlcGxhY2UoU1BFQ0lBTF9DSEFSU19SRUdFWFAsIGZ1bmN0aW9uKF8sIGxldHRlciwgb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gb2Zmc2V0ID8gbGV0dGVyLnRvVXBwZXJDYXNlKCkgOiBsZXR0ZXI7XG4gICAgfSk7XG59XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lICRjb21waWxlLmRpcmVjdGl2ZS5BdHRyaWJ1dGVzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHNoYXJlZCBvYmplY3QgYmV0d2VlbiBkaXJlY3RpdmUgY29tcGlsZSAvIGxpbmtpbmcgZnVuY3Rpb25zIHdoaWNoIGNvbnRhaW5zIG5vcm1hbGl6ZWQgRE9NXG4gKiBlbGVtZW50IGF0dHJpYnV0ZXMuIFRoZSB2YWx1ZXMgcmVmbGVjdCBjdXJyZW50IGJpbmRpbmcgc3RhdGUgYHt7IH19YC4gVGhlIG5vcm1hbGl6YXRpb24gaXNcbiAqIG5lZWRlZCBzaW5jZSBhbGwgb2YgdGhlc2UgYXJlIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCBpbiBBbmd1bGFyOlxuICpcbiAqIGBgYFxuICogICAgPHNwYW4gbmc6YmluZD1cImFcIiBuZy1iaW5kPVwiYVwiIGRhdGEtbmctYmluZD1cImFcIiB4LW5nLWJpbmQ9XCJhXCI+XG4gKiBgYGBcbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm9wZXJ0eVxuICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGF0dHJcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEEgbWFwIG9mIERPTSBlbGVtZW50IGF0dHJpYnV0ZSBuYW1lcyB0byB0aGUgbm9ybWFsaXplZCBuYW1lLiBUaGlzIGlzXG4gKiBuZWVkZWQgdG8gZG8gcmV2ZXJzZSBsb29rdXAgZnJvbSBub3JtYWxpemVkIG5hbWUgYmFjayB0byBhY3R1YWwgbmFtZS5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJHNldFxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNldCBET00gZWxlbWVudCBhdHRyaWJ1dGUgdmFsdWUuXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5vcm1hbGl6ZWQgZWxlbWVudCBhdHRyaWJ1dGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gbW9kaWZ5LiBUaGUgbmFtZSBpc1xuICogICAgICAgICAgcmV2ZXJzZS10cmFuc2xhdGVkIHVzaW5nIHRoZSB7QGxpbmsgbmcuJGNvbXBpbGUuZGlyZWN0aXZlLkF0dHJpYnV0ZXMjJGF0dHIgJGF0dHJ9XG4gKiAgICAgICAgICBwcm9wZXJ0eSB0byB0aGUgb3JpZ2luYWwgbmFtZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBWYWx1ZSB0byBzZXQgdGhlIGF0dHJpYnV0ZSB0by4gVGhlIHZhbHVlIGNhbiBiZSBhbiBpbnRlcnBvbGF0ZWQgc3RyaW5nLlxuICovXG5cblxuXG4vKipcbiAqIENsb3N1cmUgY29tcGlsZXIgdHlwZSBpbmZvcm1hdGlvblxuICovXG5cbmZ1bmN0aW9uIG5vZGVzZXRMaW5raW5nRm4oXG4gIC8qIGFuZ3VsYXIuU2NvcGUgKi8gc2NvcGUsXG4gIC8qIE5vZGVMaXN0ICovIG5vZGVMaXN0LFxuICAvKiBFbGVtZW50ICovIHJvb3RFbGVtZW50LFxuICAvKiBmdW5jdGlvbihGdW5jdGlvbikgKi8gYm91bmRUcmFuc2NsdWRlRm5cbikge31cblxuZnVuY3Rpb24gZGlyZWN0aXZlTGlua2luZ0ZuKFxuICAvKiBub2Rlc2V0TGlua2luZ0ZuICovIG5vZGVzZXRMaW5raW5nRm4sXG4gIC8qIGFuZ3VsYXIuU2NvcGUgKi8gc2NvcGUsXG4gIC8qIE5vZGUgKi8gbm9kZSxcbiAgLyogRWxlbWVudCAqLyByb290RWxlbWVudCxcbiAgLyogZnVuY3Rpb24oRnVuY3Rpb24pICovIGJvdW5kVHJhbnNjbHVkZUZuXG4pIHt9XG5cbmZ1bmN0aW9uIHRva2VuRGlmZmVyZW5jZShzdHIxLCBzdHIyKSB7XG4gIHZhciB2YWx1ZXMgPSAnJyxcbiAgICAgIHRva2VuczEgPSBzdHIxLnNwbGl0KC9cXHMrLyksXG4gICAgICB0b2tlbnMyID0gc3RyMi5zcGxpdCgvXFxzKy8pO1xuXG4gIG91dGVyOlxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2VuczEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdG9rZW4gPSB0b2tlbnMxW2ldO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdG9rZW5zMi5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKHRva2VuID09PSB0b2tlbnMyW2pdKSBjb250aW51ZSBvdXRlcjtcbiAgICB9XG4gICAgdmFsdWVzICs9ICh2YWx1ZXMubGVuZ3RoID4gMCA/ICcgJyA6ICcnKSArIHRva2VuO1xuICB9XG4gIHJldHVybiB2YWx1ZXM7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNvbW1lbnRzKGpxTm9kZXMpIHtcbiAganFOb2RlcyA9IGpxTGl0ZShqcU5vZGVzKTtcbiAgdmFyIGkgPSBqcU5vZGVzLmxlbmd0aDtcblxuICBpZiAoaSA8PSAxKSB7XG4gICAgcmV0dXJuIGpxTm9kZXM7XG4gIH1cblxuICB3aGlsZSAoaS0tKSB7XG4gICAgdmFyIG5vZGUgPSBqcU5vZGVzW2ldO1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfQ09NTUVOVCB8fFxuICAgICAgIChub2RlLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfVEVYVCAmJiBub2RlLm5vZGVWYWx1ZS50cmltKCkgPT09ICcnKSkge1xuICAgICAgICAgc3BsaWNlLmNhbGwoanFOb2RlcywgaSwgMSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBqcU5vZGVzO1xufVxuXG52YXIgJGNvbnRyb2xsZXJNaW5FcnIgPSBtaW5FcnIoJyRjb250cm9sbGVyJyk7XG5cblxudmFyIENOVFJMX1JFRyA9IC9eKFxcUyspKFxccythc1xccysoW1xcdyRdKykpPyQvO1xuZnVuY3Rpb24gaWRlbnRpZmllckZvckNvbnRyb2xsZXIoY29udHJvbGxlciwgaWRlbnQpIHtcbiAgaWYgKGlkZW50ICYmIGlzU3RyaW5nKGlkZW50KSkgcmV0dXJuIGlkZW50O1xuICBpZiAoaXNTdHJpbmcoY29udHJvbGxlcikpIHtcbiAgICB2YXIgbWF0Y2ggPSBDTlRSTF9SRUcuZXhlYyhjb250cm9sbGVyKTtcbiAgICBpZiAobWF0Y2gpIHJldHVybiBtYXRjaFszXTtcbiAgfVxufVxuXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkY29udHJvbGxlclByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIHtAbGluayBuZy4kY29udHJvbGxlciAkY29udHJvbGxlciBzZXJ2aWNlfSBpcyB1c2VkIGJ5IEFuZ3VsYXIgdG8gY3JlYXRlIG5ld1xuICogY29udHJvbGxlcnMuXG4gKlxuICogVGhpcyBwcm92aWRlciBhbGxvd3MgY29udHJvbGxlciByZWdpc3RyYXRpb24gdmlhIHRoZVxuICoge0BsaW5rIG5nLiRjb250cm9sbGVyUHJvdmlkZXIjcmVnaXN0ZXIgcmVnaXN0ZXJ9IG1ldGhvZC5cbiAqL1xuZnVuY3Rpb24gJENvbnRyb2xsZXJQcm92aWRlcigpIHtcbiAgdmFyIGNvbnRyb2xsZXJzID0ge30sXG4gICAgICBnbG9iYWxzID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbnRyb2xsZXJQcm92aWRlciNoYXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQ29udHJvbGxlciBuYW1lIHRvIGNoZWNrLlxuICAgKi9cbiAgdGhpcy5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGNvbnRyb2xsZXJzLmhhc093blByb3BlcnR5KG5hbWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRjb250cm9sbGVyUHJvdmlkZXIjcmVnaXN0ZXJcbiAgICogQHBhcmFtIHtzdHJpbmd8T2JqZWN0fSBuYW1lIENvbnRyb2xsZXIgbmFtZSwgb3IgYW4gb2JqZWN0IG1hcCBvZiBjb250cm9sbGVycyB3aGVyZSB0aGUga2V5cyBhcmVcbiAgICogICAgdGhlIG5hbWVzIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29uc3RydWN0b3JzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5fSBjb25zdHJ1Y3RvciBDb250cm9sbGVyIGNvbnN0cnVjdG9yIGZuIChvcHRpb25hbGx5IGRlY29yYXRlZCB3aXRoIERJXG4gICAqICAgIGFubm90YXRpb25zIGluIHRoZSBhcnJheSBub3RhdGlvbikuXG4gICAqL1xuICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgY29uc3RydWN0b3IpIHtcbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eShuYW1lLCAnY29udHJvbGxlcicpO1xuICAgIGlmIChpc09iamVjdChuYW1lKSkge1xuICAgICAgZXh0ZW5kKGNvbnRyb2xsZXJzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udHJvbGxlcnNbbmFtZV0gPSBjb25zdHJ1Y3RvcjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGNvbnRyb2xsZXJQcm92aWRlciNhbGxvd0dsb2JhbHNcbiAgICogQGRlc2NyaXB0aW9uIElmIGNhbGxlZCwgYWxsb3dzIGAkY29udHJvbGxlcmAgdG8gZmluZCBjb250cm9sbGVyIGNvbnN0cnVjdG9ycyBvbiBgd2luZG93YFxuICAgKlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBzaW5jZVZlcnNpb249XCJ2MS4zLjBcIlxuICAgKiByZW1vdmVWZXJzaW9uPVwidjEuNy4wXCJcbiAgICogVGhpcyBtZXRob2Qgb2YgZmluZGluZyBjb250cm9sbGVycyBoYXMgYmVlbiBkZXByZWNhdGVkLlxuICAgKi9cbiAgdGhpcy5hbGxvd0dsb2JhbHMgPSBmdW5jdGlvbigpIHtcbiAgICBnbG9iYWxzID0gdHJ1ZTtcbiAgfTtcblxuXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgJyR3aW5kb3cnLCBmdW5jdGlvbigkaW5qZWN0b3IsICR3aW5kb3cpIHtcblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAgICogQG5hbWUgJGNvbnRyb2xsZXJcbiAgICAgKiBAcmVxdWlyZXMgJGluamVjdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gY29uc3RydWN0b3IgSWYgY2FsbGVkIHdpdGggYSBmdW5jdGlvbiB0aGVuIGl0J3MgY29uc2lkZXJlZCB0byBiZSB0aGVcbiAgICAgKiAgICBjb250cm9sbGVyIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLiBPdGhlcndpc2UgaXQncyBjb25zaWRlcmVkIHRvIGJlIGEgc3RyaW5nIHdoaWNoIGlzIHVzZWRcbiAgICAgKiAgICB0byByZXRyaWV2ZSB0aGUgY29udHJvbGxlciBjb25zdHJ1Y3RvciB1c2luZyB0aGUgZm9sbG93aW5nIHN0ZXBzOlxuICAgICAqXG4gICAgICogICAgKiBjaGVjayBpZiBhIGNvbnRyb2xsZXIgd2l0aCBnaXZlbiBuYW1lIGlzIHJlZ2lzdGVyZWQgdmlhIGAkY29udHJvbGxlclByb3ZpZGVyYFxuICAgICAqICAgICogY2hlY2sgaWYgZXZhbHVhdGluZyB0aGUgc3RyaW5nIG9uIHRoZSBjdXJyZW50IHNjb3BlIHJldHVybnMgYSBjb25zdHJ1Y3RvclxuICAgICAqICAgICogaWYgJGNvbnRyb2xsZXJQcm92aWRlciNhbGxvd0dsb2JhbHMsIGNoZWNrIGB3aW5kb3dbY29uc3RydWN0b3JdYCBvbiB0aGUgZ2xvYmFsXG4gICAgICogICAgICBgd2luZG93YCBvYmplY3QgKGRlcHJlY2F0ZWQsIG5vdCByZWNvbW1lbmRlZClcbiAgICAgKlxuICAgICAqICAgIFRoZSBzdHJpbmcgY2FuIHVzZSB0aGUgYGNvbnRyb2xsZXIgYXMgcHJvcGVydHlgIHN5bnRheCwgd2hlcmUgdGhlIGNvbnRyb2xsZXIgaW5zdGFuY2UgaXMgcHVibGlzaGVkXG4gICAgICogICAgYXMgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eSBvbiB0aGUgYHNjb3BlYDsgdGhlIGBzY29wZWAgbXVzdCBiZSBpbmplY3RlZCBpbnRvIGBsb2NhbHNgIHBhcmFtIGZvciB0aGlzXG4gICAgICogICAgdG8gd29yayBjb3JyZWN0bHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9jYWxzIEluamVjdGlvbiBsb2NhbHMgZm9yIENvbnRyb2xsZXIuXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBJbnN0YW5jZSBvZiBnaXZlbiBjb250cm9sbGVyLlxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogYCRjb250cm9sbGVyYCBzZXJ2aWNlIGlzIHJlc3BvbnNpYmxlIGZvciBpbnN0YW50aWF0aW5nIGNvbnRyb2xsZXJzLlxuICAgICAqXG4gICAgICogSXQncyBqdXN0IGEgc2ltcGxlIGNhbGwgdG8ge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0sIGJ1dCBleHRyYWN0ZWQgaW50b1xuICAgICAqIGEgc2VydmljZSwgc28gdGhhdCBvbmUgY2FuIG92ZXJyaWRlIHRoaXMgc2VydmljZSB3aXRoIFtCQyB2ZXJzaW9uXShodHRwczovL2dpc3QuZ2l0aHViLmNvbS8xNjQ5Nzg4KS5cbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gJGNvbnRyb2xsZXIoZXhwcmVzc2lvbiwgbG9jYWxzLCBsYXRlciwgaWRlbnQpIHtcbiAgICAgIC8vIFBSSVZBVEUgQVBJOlxuICAgICAgLy8gICBwYXJhbSBgbGF0ZXJgIC0tLSBpbmRpY2F0ZXMgdGhhdCB0aGUgY29udHJvbGxlcidzIGNvbnN0cnVjdG9yIGlzIGludm9rZWQgYXQgYSBsYXRlciB0aW1lLlxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBJZiB0cnVlLCAkY29udHJvbGxlciB3aWxsIGFsbG9jYXRlIHRoZSBvYmplY3Qgd2l0aCB0aGUgY29ycmVjdFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBwcm90b3R5cGUgY2hhaW4sIGJ1dCB3aWxsIG5vdCBpbnZva2UgdGhlIGNvbnRyb2xsZXIgdW50aWwgYSByZXR1cm5lZFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayBpcyBpbnZva2VkLlxuICAgICAgLy8gICBwYXJhbSBgaWRlbnRgIC0tLSBBbiBvcHRpb25hbCBsYWJlbCB3aGljaCBvdmVycmlkZXMgdGhlIGxhYmVsIHBhcnNlZCBmcm9tIHRoZSBjb250cm9sbGVyXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb24sIGlmIGFueS5cbiAgICAgIHZhciBpbnN0YW5jZSwgbWF0Y2gsIGNvbnN0cnVjdG9yLCBpZGVudGlmaWVyO1xuICAgICAgbGF0ZXIgPSBsYXRlciA9PT0gdHJ1ZTtcbiAgICAgIGlmIChpZGVudCAmJiBpc1N0cmluZyhpZGVudCkpIHtcbiAgICAgICAgaWRlbnRpZmllciA9IGlkZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdHJpbmcoZXhwcmVzc2lvbikpIHtcbiAgICAgICAgbWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKENOVFJMX1JFRyk7XG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICB0aHJvdyAkY29udHJvbGxlck1pbkVycignY3RybGZtdCcsXG4gICAgICAgICAgICAnQmFkbHkgZm9ybWVkIGNvbnRyb2xsZXIgc3RyaW5nIFxcJ3swfVxcJy4gJyArXG4gICAgICAgICAgICAnTXVzdCBtYXRjaCBgX19uYW1lX18gYXMgX19pZF9fYCBvciBgX19uYW1lX19gLicsIGV4cHJlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0cnVjdG9yID0gbWF0Y2hbMV07XG4gICAgICAgIGlkZW50aWZpZXIgPSBpZGVudGlmaWVyIHx8IG1hdGNoWzNdO1xuICAgICAgICBleHByZXNzaW9uID0gY29udHJvbGxlcnMuaGFzT3duUHJvcGVydHkoY29uc3RydWN0b3IpXG4gICAgICAgICAgICA/IGNvbnRyb2xsZXJzW2NvbnN0cnVjdG9yXVxuICAgICAgICAgICAgOiBnZXR0ZXIobG9jYWxzLiRzY29wZSwgY29uc3RydWN0b3IsIHRydWUpIHx8XG4gICAgICAgICAgICAgICAgKGdsb2JhbHMgPyBnZXR0ZXIoJHdpbmRvdywgY29uc3RydWN0b3IsIHRydWUpIDogdW5kZWZpbmVkKTtcblxuICAgICAgICBpZiAoIWV4cHJlc3Npb24pIHtcbiAgICAgICAgICB0aHJvdyAkY29udHJvbGxlck1pbkVycignY3RybHJlZycsXG4gICAgICAgICAgICAnVGhlIGNvbnRyb2xsZXIgd2l0aCB0aGUgbmFtZSBcXCd7MH1cXCcgaXMgbm90IHJlZ2lzdGVyZWQuJywgY29uc3RydWN0b3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXNzZXJ0QXJnRm4oZXhwcmVzc2lvbiwgY29uc3RydWN0b3IsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAobGF0ZXIpIHtcbiAgICAgICAgLy8gSW5zdGFudGlhdGUgY29udHJvbGxlciBsYXRlcjpcbiAgICAgICAgLy8gVGhpcyBtYWNoaW5lcnkgaXMgdXNlZCB0byBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIG9iamVjdCBiZWZvcmUgY2FsbGluZyB0aGVcbiAgICAgICAgLy8gY29udHJvbGxlcidzIGNvbnN0cnVjdG9yIGl0c2VsZi5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgcHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgY29udHJvbGxlciBiZWZvcmUgdGhlIGNvbnN0cnVjdG9yIGlzXG4gICAgICAgIC8vIGludm9rZWQuIFByaW1hcmlseSwgdGhpcyBpcyB1c2VkIGZvciBpc29sYXRlIHNjb3BlIGJpbmRpbmdzIGluICRjb21waWxlLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGZlYXR1cmUgaXMgbm90IGludGVuZGVkIGZvciB1c2UgYnkgYXBwbGljYXRpb25zLCBhbmQgaXMgdGh1cyBub3QgZG9jdW1lbnRlZFxuICAgICAgICAvLyBwdWJsaWNseS5cbiAgICAgICAgLy8gT2JqZWN0IGNyZWF0aW9uOiBodHRwOi8vanNwZXJmLmNvbS9jcmVhdGUtY29uc3RydWN0b3IvMlxuICAgICAgICB2YXIgY29udHJvbGxlclByb3RvdHlwZSA9IChpc0FycmF5KGV4cHJlc3Npb24pID9cbiAgICAgICAgICBleHByZXNzaW9uW2V4cHJlc3Npb24ubGVuZ3RoIC0gMV0gOiBleHByZXNzaW9uKS5wcm90b3R5cGU7XG4gICAgICAgIGluc3RhbmNlID0gT2JqZWN0LmNyZWF0ZShjb250cm9sbGVyUHJvdG90eXBlIHx8IG51bGwpO1xuXG4gICAgICAgIGlmIChpZGVudGlmaWVyKSB7XG4gICAgICAgICAgYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBjb25zdHJ1Y3RvciB8fCBleHByZXNzaW9uLm5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAkY29udHJvbGxlckluaXQoKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9ICRpbmplY3Rvci5pbnZva2UoZXhwcmVzc2lvbiwgaW5zdGFuY2UsIGxvY2FscywgY29uc3RydWN0b3IpO1xuICAgICAgICAgIGlmIChyZXN1bHQgIT09IGluc3RhbmNlICYmIChpc09iamVjdChyZXN1bHQpIHx8IGlzRnVuY3Rpb24ocmVzdWx0KSkpIHtcbiAgICAgICAgICAgIGluc3RhbmNlID0gcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgLy8gSWYgcmVzdWx0IGNoYW5nZWQsIHJlLWFzc2lnbiBjb250cm9sbGVyQXMgdmFsdWUgdG8gc2NvcGUuXG4gICAgICAgICAgICAgIGFkZElkZW50aWZpZXIobG9jYWxzLCBpZGVudGlmaWVyLCBpbnN0YW5jZSwgY29uc3RydWN0b3IgfHwgZXhwcmVzc2lvbi5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlLFxuICAgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGluc3RhbmNlID0gJGluamVjdG9yLmluc3RhbnRpYXRlKGV4cHJlc3Npb24sIGxvY2FscywgY29uc3RydWN0b3IpO1xuXG4gICAgICBpZiAoaWRlbnRpZmllcikge1xuICAgICAgICBhZGRJZGVudGlmaWVyKGxvY2FscywgaWRlbnRpZmllciwgaW5zdGFuY2UsIGNvbnN0cnVjdG9yIHx8IGV4cHJlc3Npb24ubmFtZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gYWRkSWRlbnRpZmllcihsb2NhbHMsIGlkZW50aWZpZXIsIGluc3RhbmNlLCBuYW1lKSB7XG4gICAgICBpZiAoIShsb2NhbHMgJiYgaXNPYmplY3QobG9jYWxzLiRzY29wZSkpKSB7XG4gICAgICAgIHRocm93IG1pbkVycignJGNvbnRyb2xsZXInKSgnbm9zY3AnLFxuICAgICAgICAgICdDYW5ub3QgZXhwb3J0IGNvbnRyb2xsZXIgXFwnezB9XFwnIGFzIFxcJ3sxfVxcJyEgTm8gJHNjb3BlIG9iamVjdCBwcm92aWRlZCB2aWEgYGxvY2Fsc2AuJyxcbiAgICAgICAgICBuYW1lLCBpZGVudGlmaWVyKTtcbiAgICAgIH1cblxuICAgICAgbG9jYWxzLiRzY29wZVtpZGVudGlmaWVyXSA9IGluc3RhbmNlO1xuICAgIH1cbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRkb2N1bWVudFxuICogQHJlcXVpcmVzICR3aW5kb3dcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIHtAbGluayBhbmd1bGFyLmVsZW1lbnQgalF1ZXJ5IG9yIGpxTGl0ZX0gd3JhcHBlciBmb3IgdGhlIGJyb3dzZXIncyBgd2luZG93LmRvY3VtZW50YCBvYmplY3QuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cImRvY3VtZW50RXhhbXBsZVwiIG5hbWU9XCJkb2N1bWVudFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8cD4kZG9jdW1lbnQgdGl0bGU6IDxiIG5nLWJpbmQ9XCJ0aXRsZVwiPjwvYj48L3A+XG4gICAgICAgICA8cD53aW5kb3cuZG9jdW1lbnQgdGl0bGU6IDxiIG5nLWJpbmQ9XCJ3aW5kb3dUaXRsZVwiPjwvYj48L3A+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkb2N1bWVudEV4YW1wbGUnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRkb2N1bWVudCcsIGZ1bmN0aW9uKCRzY29wZSwgJGRvY3VtZW50KSB7XG4gICAgICAgICAgICRzY29wZS50aXRsZSA9ICRkb2N1bWVudFswXS50aXRsZTtcbiAgICAgICAgICAgJHNjb3BlLndpbmRvd1RpdGxlID0gYW5ndWxhci5lbGVtZW50KHdpbmRvdy5kb2N1bWVudClbMF0udGl0bGU7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gJERvY3VtZW50UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsIGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIHJldHVybiBqcUxpdGUod2luZG93LmRvY3VtZW50KTtcbiAgfV07XG59XG5cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHRoaXNcbiAqIExpc3RlbnMgZm9yIGRvY3VtZW50IHZpc2liaWxpdHkgY2hhbmdlIGFuZCBtYWtlcyB0aGUgY3VycmVudCBzdGF0dXMgYWNjZXNzaWJsZS5cbiAqL1xuZnVuY3Rpb24gJCRJc0RvY3VtZW50SGlkZGVuUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJGRvY3VtZW50JywgJyRyb290U2NvcGUnLCBmdW5jdGlvbigkZG9jdW1lbnQsICRyb290U2NvcGUpIHtcbiAgICB2YXIgZG9jID0gJGRvY3VtZW50WzBdO1xuICAgIHZhciBoaWRkZW4gPSBkb2MgJiYgZG9jLmhpZGRlbjtcblxuICAgICRkb2N1bWVudC5vbigndmlzaWJpbGl0eWNoYW5nZScsIGNoYW5nZUxpc3RlbmVyKTtcblxuICAgICRyb290U2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgJGRvY3VtZW50Lm9mZigndmlzaWJpbGl0eWNoYW5nZScsIGNoYW5nZUxpc3RlbmVyKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGNoYW5nZUxpc3RlbmVyKCkge1xuICAgICAgaGlkZGVuID0gZG9jLmhpZGRlbjtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gaGlkZGVuO1xuICAgIH07XG4gIH1dO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkZXhjZXB0aW9uSGFuZGxlclxuICogQHJlcXVpcmVzIG5nLiRsb2dcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBbnkgdW5jYXVnaHQgZXhjZXB0aW9uIGluIGFuZ3VsYXIgZXhwcmVzc2lvbnMgaXMgZGVsZWdhdGVkIHRvIHRoaXMgc2VydmljZS5cbiAqIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHNpbXBseSBkZWxlZ2F0ZXMgdG8gYCRsb2cuZXJyb3JgIHdoaWNoIGxvZ3MgaXQgaW50b1xuICogdGhlIGJyb3dzZXIgY29uc29sZS5cbiAqXG4gKiBJbiB1bml0IHRlc3RzLCBpZiBgYW5ndWxhci1tb2Nrcy5qc2AgaXMgbG9hZGVkLCB0aGlzIHNlcnZpY2UgaXMgb3ZlcnJpZGRlbiBieVxuICoge0BsaW5rIG5nTW9jay4kZXhjZXB0aW9uSGFuZGxlciBtb2NrICRleGNlcHRpb25IYW5kbGVyfSB3aGljaCBhaWRzIGluIHRlc3RpbmcuXG4gKlxuICogIyMgRXhhbXBsZTpcbiAqXG4gKiBUaGUgZXhhbXBsZSBiZWxvdyB3aWxsIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCBgJGV4Y2VwdGlvbkhhbmRsZXJgIGluIG9yZGVyIHRvIChhKSBsb2cgdW5jYXVnaHRcbiAqIGVycm9ycyB0byB0aGUgYmFja2VuZCBmb3IgbGF0ZXIgaW5zcGVjdGlvbiBieSB0aGUgZGV2ZWxvcGVycyBhbmQgKGIpIHRvIHVzZSBgJGxvZy53YXJuKClgIGluc3RlYWRcbiAqIG9mIGAkbG9nLmVycm9yKClgLlxuICpcbiAqIGBgYGpzXG4gKiAgIGFuZ3VsYXIuXG4gKiAgICAgbW9kdWxlKCdleGNlcHRpb25PdmVyd3JpdGUnLCBbXSkuXG4gKiAgICAgZmFjdG9yeSgnJGV4Y2VwdGlvbkhhbmRsZXInLCBbJyRsb2cnLCAnbG9nRXJyb3JzVG9CYWNrZW5kJywgZnVuY3Rpb24oJGxvZywgbG9nRXJyb3JzVG9CYWNrZW5kKSB7XG4gKiAgICAgICByZXR1cm4gZnVuY3Rpb24gbXlFeGNlcHRpb25IYW5kbGVyKGV4Y2VwdGlvbiwgY2F1c2UpIHtcbiAqICAgICAgICAgbG9nRXJyb3JzVG9CYWNrZW5kKGV4Y2VwdGlvbiwgY2F1c2UpO1xuICogICAgICAgICAkbG9nLndhcm4oZXhjZXB0aW9uLCBjYXVzZSk7XG4gKiAgICAgICB9O1xuICogICAgIH1dKTtcbiAqIGBgYFxuICpcbiAqIDxociAvPlxuICogTm90ZSwgdGhhdCBjb2RlIGV4ZWN1dGVkIGluIGV2ZW50LWxpc3RlbmVycyAoZXZlbiB0aG9zZSByZWdpc3RlcmVkIHVzaW5nIGpxTGl0ZSdzIGBvbmAvYGJpbmRgXG4gKiBtZXRob2RzKSBkb2VzIG5vdCBkZWxlZ2F0ZSBleGNlcHRpb25zIHRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9XG4gKiAodW5sZXNzIGV4ZWN1dGVkIGR1cmluZyBhIGRpZ2VzdCkuXG4gKlxuICogSWYgeW91IHdpc2gsIHlvdSBjYW4gbWFudWFsbHkgZGVsZWdhdGUgZXhjZXB0aW9ucywgZS5nLlxuICogYHRyeSB7IC4uLiB9IGNhdGNoKGUpIHsgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7IH1gXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXhjZXB0aW9uIEV4Y2VwdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIGVycm9yLlxuICogQHBhcmFtIHtzdHJpbmc9fSBjYXVzZSBPcHRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY29udGV4dCBpbiB3aGljaFxuICogICAgICAgdGhlIGVycm9yIHdhcyB0aHJvd24uXG4gKlxuICovXG5mdW5jdGlvbiAkRXhjZXB0aW9uSGFuZGxlclByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyRsb2cnLCBmdW5jdGlvbigkbG9nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGV4Y2VwdGlvbiwgY2F1c2UpIHtcbiAgICAgICRsb2cuZXJyb3IuYXBwbHkoJGxvZywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XTtcbn1cblxudmFyICQkRm9yY2VSZWZsb3dQcm92aWRlciA9IC8qKiBAdGhpcyAqLyBmdW5jdGlvbigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckZG9jdW1lbnQnLCBmdW5jdGlvbigkZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZG9tTm9kZSkge1xuICAgICAgLy90aGUgbGluZSBiZWxvdyB3aWxsIGZvcmNlIHRoZSBicm93c2VyIHRvIHBlcmZvcm0gYSByZXBhaW50IHNvXG4gICAgICAvL3RoYXQgYWxsIHRoZSBhbmltYXRlZCBlbGVtZW50cyB3aXRoaW4gdGhlIGFuaW1hdGlvbiBmcmFtZSB3aWxsXG4gICAgICAvL2JlIHByb3Blcmx5IHVwZGF0ZWQgYW5kIGRyYXduIG9uIHNjcmVlbi4gVGhpcyBpcyByZXF1aXJlZCB0b1xuICAgICAgLy9lbnN1cmUgdGhhdCB0aGUgcHJlcGFyYXRpb24gYW5pbWF0aW9uIGlzIHByb3Blcmx5IGZsdXNoZWQgc28gdGhhdFxuICAgICAgLy90aGUgYWN0aXZlIHN0YXRlIHBpY2tzIHVwIGZyb20gdGhlcmUuIERPIE5PVCBSRU1PVkUgVEhJUyBMSU5FLlxuICAgICAgLy9ETyBOT1QgT1BUSU1JWkUgVEhJUyBMSU5FLiBUSEUgTUlOSUZJRVIgV0lMTCBSRU1PVkUgSVQgT1RIRVJXSVNFIFdISUNIXG4gICAgICAvL1dJTEwgUkVTVUxUIElOIEFOIFVOUFJFRElDVEFCTEUgQlVHIFRIQVQgSVMgVkVSWSBIQVJEIFRPIFRSQUNLIERPV04gQU5EXG4gICAgICAvL1dJTEwgVEFLRSBZRUFSUyBBV0FZIEZST00gWU9VUiBMSUZFLlxuICAgICAgaWYgKGRvbU5vZGUpIHtcbiAgICAgICAgaWYgKCFkb21Ob2RlLm5vZGVUeXBlICYmIGRvbU5vZGUgaW5zdGFuY2VvZiBqcUxpdGUpIHtcbiAgICAgICAgICBkb21Ob2RlID0gZG9tTm9kZVswXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9tTm9kZSA9ICRkb2N1bWVudFswXS5ib2R5O1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRvbU5vZGUub2Zmc2V0V2lkdGggKyAxO1xuICAgIH07XG4gIH1dO1xufTtcblxudmFyIEFQUExJQ0FUSU9OX0pTT04gPSAnYXBwbGljYXRpb24vanNvbic7XG52YXIgQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04gPSB7J0NvbnRlbnQtVHlwZSc6IEFQUExJQ0FUSU9OX0pTT04gKyAnO2NoYXJzZXQ9dXRmLTgnfTtcbnZhciBKU09OX1NUQVJUID0gL15cXFt8Xlxceyg/IVxceykvO1xudmFyIEpTT05fRU5EUyA9IHtcbiAgJ1snOiAvXSQvLFxuICAneyc6IC99JC9cbn07XG52YXIgSlNPTl9QUk9URUNUSU9OX1BSRUZJWCA9IC9eXFwpXVxcfScsP1xcbi87XG52YXIgJGh0dHBNaW5FcnIgPSBtaW5FcnIoJyRodHRwJyk7XG5cbmZ1bmN0aW9uIHNlcmlhbGl6ZVZhbHVlKHYpIHtcbiAgaWYgKGlzT2JqZWN0KHYpKSB7XG4gICAgcmV0dXJuIGlzRGF0ZSh2KSA/IHYudG9JU09TdHJpbmcoKSA6IHRvSnNvbih2KTtcbiAgfVxuICByZXR1cm4gdjtcbn1cblxuXG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICRIdHRwUGFyYW1TZXJpYWxpemVyUHJvdmlkZXIoKSB7XG4gIC8qKlxuICAgKiBAbmdkb2Mgc2VydmljZVxuICAgKiBAbmFtZSAkaHR0cFBhcmFtU2VyaWFsaXplclxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmYXVsdCB7QGxpbmsgJGh0dHAgYCRodHRwYH0gcGFyYW1zIHNlcmlhbGl6ZXIgdGhhdCBjb252ZXJ0cyBvYmplY3RzIHRvIHN0cmluZ3NcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBmb2xsb3dpbmcgcnVsZXM6XG4gICAqXG4gICAqICogYHsnZm9vJzogJ2Jhcid9YCByZXN1bHRzIGluIGBmb289YmFyYFxuICAgKiAqIGB7J2Zvbyc6IERhdGUubm93KCl9YCByZXN1bHRzIGluIGBmb289MjAxNS0wNC0wMVQwOSUzQTUwJTNBNDkuMjYyWmAgKGB0b0lTT1N0cmluZygpYCBhbmQgZW5jb2RlZCByZXByZXNlbnRhdGlvbiBvZiBhIERhdGUgb2JqZWN0KVxuICAgKiAqIGB7J2Zvbyc6IFsnYmFyJywgJ2JheiddfWAgcmVzdWx0cyBpbiBgZm9vPWJhciZmb289YmF6YCAocmVwZWF0ZWQga2V5IGZvciBlYWNoIGFycmF5IGVsZW1lbnQpXG4gICAqICogYHsnZm9vJzogeydiYXInOidiYXonfX1gIHJlc3VsdHMgaW4gYGZvbz0lN0IlMjJiYXIlMjIlM0ElMjJiYXolMjIlN0RgIChzdHJpbmdpZmllZCBhbmQgZW5jb2RlZCByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QpXG4gICAqXG4gICAqIE5vdGUgdGhhdCBzZXJpYWxpemVyIHdpbGwgc29ydCB0aGUgcmVxdWVzdCBwYXJhbWV0ZXJzIGFscGhhYmV0aWNhbGx5LlxuICAgKiAqL1xuXG4gIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBuZ1BhcmFtU2VyaWFsaXplcihwYXJhbXMpIHtcbiAgICAgIGlmICghcGFyYW1zKSByZXR1cm4gJyc7XG4gICAgICB2YXIgcGFydHMgPSBbXTtcbiAgICAgIGZvckVhY2hTb3J0ZWQocGFyYW1zLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZCh2YWx1ZSkgfHwgaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybjtcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgZm9yRWFjaCh2YWx1ZSwgZnVuY3Rpb24odikge1xuICAgICAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXkpICArICc9JyArIGVuY29kZVVyaVF1ZXJ5KHNlcmlhbGl6ZVZhbHVlKHYpKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShrZXkpICsgJz0nICsgZW5jb2RlVXJpUXVlcnkoc2VyaWFsaXplVmFsdWUodmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcGFydHMuam9pbignJicpO1xuICAgIH07XG4gIH07XG59XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJEh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2VQcm92aWRlcigpIHtcbiAgLyoqXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICRodHRwUGFyYW1TZXJpYWxpemVySlFMaWtlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBbHRlcm5hdGl2ZSB7QGxpbmsgJGh0dHAgYCRodHRwYH0gcGFyYW1zIHNlcmlhbGl6ZXIgdGhhdCBmb2xsb3dzXG4gICAqIGpRdWVyeSdzIFtgcGFyYW0oKWBdKGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9qcXVlcnkucGFyYW0vKSBtZXRob2QgbG9naWMuXG4gICAqIFRoZSBzZXJpYWxpemVyIHdpbGwgYWxzbyBzb3J0IHRoZSBwYXJhbXMgYWxwaGFiZXRpY2FsbHkuXG4gICAqXG4gICAqIFRvIHVzZSBpdCBmb3Igc2VyaWFsaXppbmcgYCRodHRwYCByZXF1ZXN0IHBhcmFtZXRlcnMsIHNldCBpdCBhcyB0aGUgYHBhcmFtU2VyaWFsaXplcmAgcHJvcGVydHk6XG4gICAqXG4gICAqIGBgYGpzXG4gICAqICRodHRwKHtcbiAgICogICB1cmw6IG15VXJsLFxuICAgKiAgIG1ldGhvZDogJ0dFVCcsXG4gICAqICAgcGFyYW1zOiBteVBhcmFtcyxcbiAgICogICBwYXJhbVNlcmlhbGl6ZXI6ICckaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZSdcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHNldCBpdCBhcyB0aGUgZGVmYXVsdCBgcGFyYW1TZXJpYWxpemVyYCBpbiB0aGVcbiAgICoge0BsaW5rICRodHRwUHJvdmlkZXIjZGVmYXVsdHMgYCRodHRwUHJvdmlkZXJgfS5cbiAgICpcbiAgICogQWRkaXRpb25hbGx5LCB5b3UgY2FuIGluamVjdCB0aGUgc2VyaWFsaXplciBhbmQgdXNlIGl0IGV4cGxpY2l0bHksIGZvciBleGFtcGxlIHRvIHNlcmlhbGl6ZVxuICAgKiBmb3JtIGRhdGEgZm9yIHN1Ym1pc3Npb246XG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC5jb250cm9sbGVyKGZ1bmN0aW9uKCRodHRwLCAkaHR0cFBhcmFtU2VyaWFsaXplckpRTGlrZSkge1xuICAgKiAgIC8vLi4uXG4gICAqXG4gICAqICAgJGh0dHAoe1xuICAgKiAgICAgdXJsOiBteVVybCxcbiAgICogICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgKiAgICAgZGF0YTogJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2UobXlEYXRhKSxcbiAgICogICAgIGhlYWRlcnM6IHtcbiAgICogICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogKi9cbiAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGpRdWVyeUxpa2VQYXJhbVNlcmlhbGl6ZXIocGFyYW1zKSB7XG4gICAgICBpZiAoIXBhcmFtcykgcmV0dXJuICcnO1xuICAgICAgdmFyIHBhcnRzID0gW107XG4gICAgICBzZXJpYWxpemUocGFyYW1zLCAnJywgdHJ1ZSk7XG4gICAgICByZXR1cm4gcGFydHMuam9pbignJicpO1xuXG4gICAgICBmdW5jdGlvbiBzZXJpYWxpemUodG9TZXJpYWxpemUsIHByZWZpeCwgdG9wTGV2ZWwpIHtcbiAgICAgICAgaWYgKHRvU2VyaWFsaXplID09PSBudWxsIHx8IGlzVW5kZWZpbmVkKHRvU2VyaWFsaXplKSkgcmV0dXJuO1xuICAgICAgICBpZiAoaXNBcnJheSh0b1NlcmlhbGl6ZSkpIHtcbiAgICAgICAgICBmb3JFYWNoKHRvU2VyaWFsaXplLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHNlcmlhbGl6ZSh2YWx1ZSwgcHJlZml4ICsgJ1snICsgKGlzT2JqZWN0KHZhbHVlKSA/IGluZGV4IDogJycpICsgJ10nKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1NlcmlhbGl6ZSkgJiYgIWlzRGF0ZSh0b1NlcmlhbGl6ZSkpIHtcbiAgICAgICAgICBmb3JFYWNoU29ydGVkKHRvU2VyaWFsaXplLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBzZXJpYWxpemUodmFsdWUsIHByZWZpeCArXG4gICAgICAgICAgICAgICAgKHRvcExldmVsID8gJycgOiAnWycpICtcbiAgICAgICAgICAgICAgICBrZXkgK1xuICAgICAgICAgICAgICAgICh0b3BMZXZlbCA/ICcnIDogJ10nKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFydHMucHVzaChlbmNvZGVVcmlRdWVyeShwcmVmaXgpICsgJz0nICsgZW5jb2RlVXJpUXVlcnkoc2VyaWFsaXplVmFsdWUodG9TZXJpYWxpemUpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9O1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtKGRhdGEsIGhlYWRlcnMpIHtcbiAgaWYgKGlzU3RyaW5nKGRhdGEpKSB7XG4gICAgLy8gU3RyaXAganNvbiB2dWxuZXJhYmlsaXR5IHByb3RlY3Rpb24gcHJlZml4IGFuZCB0cmltIHdoaXRlc3BhY2VcbiAgICB2YXIgdGVtcERhdGEgPSBkYXRhLnJlcGxhY2UoSlNPTl9QUk9URUNUSU9OX1BSRUZJWCwgJycpLnRyaW0oKTtcblxuICAgIGlmICh0ZW1wRGF0YSkge1xuICAgICAgdmFyIGNvbnRlbnRUeXBlID0gaGVhZGVycygnQ29udGVudC1UeXBlJyk7XG4gICAgICB2YXIgaGFzSnNvbkNvbnRlbnRUeXBlID0gY29udGVudFR5cGUgJiYgKGNvbnRlbnRUeXBlLmluZGV4T2YoQVBQTElDQVRJT05fSlNPTikgPT09IDApO1xuXG4gICAgICBpZiAoaGFzSnNvbkNvbnRlbnRUeXBlIHx8IGlzSnNvbkxpa2UodGVtcERhdGEpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZGF0YSA9IGZyb21Kc29uKHRlbXBEYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmICghaGFzSnNvbkNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgJGh0dHBNaW5FcnIoJ2JhZGRhdGEnLCAnRGF0YSBtdXN0IGJlIGEgdmFsaWQgSlNPTiBvYmplY3QuIFJlY2VpdmVkOiBcInswfVwiLiAnICtcbiAgICAgICAgICAnUGFyc2UgZXJyb3I6IFwiezF9XCInLCBkYXRhLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBpc0pzb25MaWtlKHN0cikge1xuICAgIHZhciBqc29uU3RhcnQgPSBzdHIubWF0Y2goSlNPTl9TVEFSVCk7XG4gICAgcmV0dXJuIGpzb25TdGFydCAmJiBKU09OX0VORFNbanNvblN0YXJ0WzBdXS50ZXN0KHN0cik7XG59XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGtleSB2YWx1ZSBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaGVhZGVycyBSYXcgaGVhZGVycyBhcyBhIHN0cmluZ1xuICogQHJldHVybnMge09iamVjdH0gUGFyc2VkIGhlYWRlcnMgYXMga2V5IHZhbHVlIG9iamVjdFxuICovXG5mdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuICB2YXIgcGFyc2VkID0gY3JlYXRlTWFwKCksIGk7XG5cbiAgZnVuY3Rpb24gZmlsbEluUGFyc2VkKGtleSwgdmFsKSB7XG4gICAgaWYgKGtleSkge1xuICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNTdHJpbmcoaGVhZGVycykpIHtcbiAgICBmb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbihsaW5lKSB7XG4gICAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAgICBmaWxsSW5QYXJzZWQobG93ZXJjYXNlKHRyaW0obGluZS5zdWJzdHIoMCwgaSkpKSwgdHJpbShsaW5lLnN1YnN0cihpICsgMSkpKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChpc09iamVjdChoZWFkZXJzKSkge1xuICAgIGZvckVhY2goaGVhZGVycywgZnVuY3Rpb24oaGVhZGVyVmFsLCBoZWFkZXJLZXkpIHtcbiAgICAgIGZpbGxJblBhcnNlZChsb3dlcmNhc2UoaGVhZGVyS2V5KSwgdHJpbShoZWFkZXJWYWwpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBwYXJzZWQ7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gcGFyc2VkIGhlYWRlcnMuXG4gKlxuICogSGVhZGVycyBhcmUgbGF6eSBwYXJzZWQgd2hlbiBmaXJzdCByZXF1ZXN0ZWQuXG4gKiBAc2VlIHBhcnNlSGVhZGVyc1xuICpcbiAqIEBwYXJhbSB7KHN0cmluZ3xPYmplY3QpfSBoZWFkZXJzIEhlYWRlcnMgdG8gcHJvdmlkZSBhY2Nlc3MgdG8uXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc3RyaW5nPSl9IFJldHVybnMgYSBnZXR0ZXIgZnVuY3Rpb24gd2hpY2ggaWYgY2FsbGVkIHdpdGg6XG4gKlxuICogICAtIGlmIGNhbGxlZCB3aXRoIGFuIGFyZ3VtZW50IHJldHVybnMgYSBzaW5nbGUgaGVhZGVyIHZhbHVlIG9yIG51bGxcbiAqICAgLSBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgaGVhZGVycy5cbiAqL1xuZnVuY3Rpb24gaGVhZGVyc0dldHRlcihoZWFkZXJzKSB7XG4gIHZhciBoZWFkZXJzT2JqO1xuXG4gIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgaWYgKCFoZWFkZXJzT2JqKSBoZWFkZXJzT2JqID0gIHBhcnNlSGVhZGVycyhoZWFkZXJzKTtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICB2YXIgdmFsdWUgPSBoZWFkZXJzT2JqW2xvd2VyY2FzZShuYW1lKV07XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhlYWRlcnNPYmo7XG4gIH07XG59XG5cblxuLyoqXG4gKiBDaGFpbiBhbGwgZ2l2ZW4gZnVuY3Rpb25zXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGZvciBib3RoIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHRyYW5zZm9ybWluZ1xuICpcbiAqIEBwYXJhbSB7Kn0gZGF0YSBEYXRhIHRvIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nPSl9IGhlYWRlcnMgSFRUUCBoZWFkZXJzIGdldHRlciBmbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGF0dXMgSFRUUCBzdGF0dXMgY29kZSBvZiB0aGUgcmVzcG9uc2UuXG4gKiBAcGFyYW0geyhGdW5jdGlvbnxBcnJheS48RnVuY3Rpb24+KX0gZm5zIEZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIGZ1bmN0aW9ucy5cbiAqIEByZXR1cm5zIHsqfSBUcmFuc2Zvcm1lZCBkYXRhLlxuICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGRhdGEsIGhlYWRlcnMsIHN0YXR1cywgZm5zKSB7XG4gIGlmIChpc0Z1bmN0aW9uKGZucykpIHtcbiAgICByZXR1cm4gZm5zKGRhdGEsIGhlYWRlcnMsIHN0YXR1cyk7XG4gIH1cblxuICBmb3JFYWNoKGZucywgZnVuY3Rpb24oZm4pIHtcbiAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycywgc3RhdHVzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cblxuZnVuY3Rpb24gaXNTdWNjZXNzKHN0YXR1cykge1xuICByZXR1cm4gMjAwIDw9IHN0YXR1cyAmJiBzdGF0dXMgPCAzMDA7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRodHRwUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2UgYCRodHRwUHJvdmlkZXJgIHRvIGNoYW5nZSB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUge0BsaW5rIG5nLiRodHRwICRodHRwfSBzZXJ2aWNlLlxuICogKi9cbmZ1bmN0aW9uICRIdHRwUHJvdmlkZXIoKSB7XG4gIC8qKlxuICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciNkZWZhdWx0c1xuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogT2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMgZm9yIGFsbCB7QGxpbmsgbmcuJGh0dHAgJGh0dHB9IHJlcXVlc3RzLlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLmNhY2hlYCoqIC0ge2Jvb2xlYW58T2JqZWN0fSAtIEEgYm9vbGVhbiB2YWx1ZSBvciBvYmplY3QgY3JlYXRlZCB3aXRoXG4gICAqIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5IGAkY2FjaGVGYWN0b3J5YH0gdG8gZW5hYmxlIG9yIGRpc2FibGUgY2FjaGluZyBvZiBIVFRQIHJlc3BvbnNlc1xuICAgKiBieSBkZWZhdWx0LiBTZWUge0BsaW5rICRodHRwI2NhY2hpbmcgJGh0dHAgQ2FjaGluZ30gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMuaGVhZGVyc2AqKiAtIHtPYmplY3R9IC0gRGVmYXVsdCBoZWFkZXJzIGZvciBhbGwgJGh0dHAgcmVxdWVzdHMuXG4gICAqIFJlZmVyIHRvIHtAbGluayBuZy4kaHR0cCNzZXR0aW5nLWh0dHAtaGVhZGVycyAkaHR0cH0gZm9yIGRvY3VtZW50YXRpb24gb25cbiAgICogc2V0dGluZyBkZWZhdWx0IGhlYWRlcnMuXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMuY29tbW9uYCoqXG4gICAqICAgICAtICoqYGRlZmF1bHRzLmhlYWRlcnMucG9zdGAqKlxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnB1dGAqKlxuICAgKiAgICAgLSAqKmBkZWZhdWx0cy5oZWFkZXJzLnBhdGNoYCoqXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMuanNvbnBDYWxsYmFja1BhcmFtYCoqIC0gYHtzdHJpbmd9YCAtIHRoZSBuYW1lIG9mIHRoZSBxdWVyeSBwYXJhbWV0ZXIgdGhhdCBwYXNzZXMgdGhlIG5hbWUgb2YgdGhlXG4gICAqIGNhbGxiYWNrIGluIGEgSlNPTlAgcmVxdWVzdC4gVGhlIHZhbHVlIG9mIHRoaXMgcGFyYW1ldGVyIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgZXhwcmVzc2lvbiBnZW5lcmF0ZWQgYnkgdGhlXG4gICAqIHtAbGluayAkanNvbnBDYWxsYmFja3N9IHNlcnZpY2UuIERlZmF1bHRzIHRvIGAnY2FsbGJhY2snYC5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy5wYXJhbVNlcmlhbGl6ZXJgKiogLSBge3N0cmluZ3xmdW5jdGlvbihPYmplY3Q8c3RyaW5nLHN0cmluZz4pOnN0cmluZ31gIC0gQSBmdW5jdGlvblxuICAgKiAgdXNlZCB0byB0aGUgcHJlcGFyZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgcmVxdWVzdCBwYXJhbWV0ZXJzIChzcGVjaWZpZWQgYXMgYW4gb2JqZWN0KS5cbiAgICogIElmIHNwZWNpZmllZCBhcyBzdHJpbmcsIGl0IGlzIGludGVycHJldGVkIGFzIGEgZnVuY3Rpb24gcmVnaXN0ZXJlZCB3aXRoIHRoZSB7QGxpbmsgYXV0by4kaW5qZWN0b3IgJGluamVjdG9yfS5cbiAgICogIERlZmF1bHRzIHRvIHtAbGluayBuZy4kaHR0cFBhcmFtU2VyaWFsaXplciAkaHR0cFBhcmFtU2VyaWFsaXplcn0uXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGAqKiAtXG4gICAqIGB7QXJyYXk8ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcik+fGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIpfWAgLVxuICAgKiBBbiBhcnJheSBvZiBmdW5jdGlvbnMgKG9yIGEgc2luZ2xlIGZ1bmN0aW9uKSB3aGljaCBhcmUgYXBwbGllZCB0byB0aGUgcmVxdWVzdCBkYXRhLlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGlzIGFuIGFycmF5IHdpdGggb25lIHJlcXVlc3QgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb246XG4gICAqXG4gICAqICAgLSBJZiB0aGUgYGRhdGFgIHByb3BlcnR5IG9mIHRoZSByZXF1ZXN0IGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5zIGFuIG9iamVjdCwgc2VyaWFsaXplIGl0XG4gICAqICAgICBpbnRvIEpTT04gZm9ybWF0LlxuICAgKlxuICAgKiAtICoqYGRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCoqIC1cbiAgICogYHtBcnJheTxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpPnxmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyLCBzdGF0dXMpfWAgLVxuICAgKiBBbiBhcnJheSBvZiBmdW5jdGlvbnMgKG9yIGEgc2luZ2xlIGZ1bmN0aW9uKSB3aGljaCBhcmUgYXBwbGllZCB0byB0aGUgcmVzcG9uc2UgZGF0YS4gQnkgZGVmYXVsdCxcbiAgICogdGhpcyBpcyBhbiBhcnJheSB3aGljaCBhcHBsaWVzIG9uZSByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiB0aGF0IGRvZXMgdHdvIHRoaW5nczpcbiAgICpcbiAgICogIC0gSWYgWFNSRiBwcmVmaXggaXMgZGV0ZWN0ZWQsIHN0cmlwIGl0XG4gICAqICAgIChzZWUge0BsaW5rIG5nLiRodHRwI3NlY3VyaXR5LWNvbnNpZGVyYXRpb25zIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zIGluIHRoZSAkaHR0cCBkb2NzfSkuXG4gICAqICAtIElmIHRoZSBgQ29udGVudC1UeXBlYCBpcyBgYXBwbGljYXRpb24vanNvbmAgb3IgdGhlIHJlc3BvbnNlIGxvb2tzIGxpa2UgSlNPTixcbiAgICogICAgZGVzZXJpYWxpemUgaXQgdXNpbmcgYSBKU09OIHBhcnNlci5cbiAgICpcbiAgICogLSAqKmBkZWZhdWx0cy54c3JmQ29va2llTmFtZWAqKiAtIHtzdHJpbmd9IC0gTmFtZSBvZiBjb29raWUgY29udGFpbmluZyB0aGUgWFNSRiB0b2tlbi5cbiAgICogRGVmYXVsdHMgdmFsdWUgaXMgYCdYU1JGLVRPS0VOJ2AuXG4gICAqXG4gICAqIC0gKipgZGVmYXVsdHMueHNyZkhlYWRlck5hbWVgKiogLSB7c3RyaW5nfSAtIE5hbWUgb2YgSFRUUCBoZWFkZXIgdG8gcG9wdWxhdGUgd2l0aCB0aGVcbiAgICogWFNSRiB0b2tlbi4gRGVmYXVsdHMgdmFsdWUgaXMgYCdYLVhTUkYtVE9LRU4nYC5cbiAgICpcbiAgICoqL1xuICB2YXIgZGVmYXVsdHMgPSB0aGlzLmRlZmF1bHRzID0ge1xuICAgIC8vIHRyYW5zZm9ybSBpbmNvbWluZyByZXNwb25zZSBkYXRhXG4gICAgdHJhbnNmb3JtUmVzcG9uc2U6IFtkZWZhdWx0SHR0cFJlc3BvbnNlVHJhbnNmb3JtXSxcblxuICAgIC8vIHRyYW5zZm9ybSBvdXRnb2luZyByZXF1ZXN0IGRhdGFcbiAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24oZCkge1xuICAgICAgcmV0dXJuIGlzT2JqZWN0KGQpICYmICFpc0ZpbGUoZCkgJiYgIWlzQmxvYihkKSAmJiAhaXNGb3JtRGF0YShkKSA/IHRvSnNvbihkKSA6IGQ7XG4gICAgfV0sXG5cbiAgICAvLyBkZWZhdWx0IGhlYWRlcnNcbiAgICBoZWFkZXJzOiB7XG4gICAgICBjb21tb246IHtcbiAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG4gICAgICB9LFxuICAgICAgcG9zdDogICBzaGFsbG93Q29weShDT05URU5UX1RZUEVfQVBQTElDQVRJT05fSlNPTiksXG4gICAgICBwdXQ6ICAgIHNoYWxsb3dDb3B5KENPTlRFTlRfVFlQRV9BUFBMSUNBVElPTl9KU09OKSxcbiAgICAgIHBhdGNoOiAgc2hhbGxvd0NvcHkoQ09OVEVOVF9UWVBFX0FQUExJQ0FUSU9OX0pTT04pXG4gICAgfSxcblxuICAgIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gICAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gICAgcGFyYW1TZXJpYWxpemVyOiAnJGh0dHBQYXJhbVNlcmlhbGl6ZXInLFxuXG4gICAganNvbnBDYWxsYmFja1BhcmFtOiAnY2FsbGJhY2snXG4gIH07XG5cbiAgdmFyIHVzZUFwcGx5QXN5bmMgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciN1c2VBcHBseUFzeW5jXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBDb25maWd1cmUgJGh0dHAgc2VydmljZSB0byBjb21iaW5lIHByb2Nlc3Npbmcgb2YgbXVsdGlwbGUgaHR0cCByZXNwb25zZXMgcmVjZWl2ZWQgYXQgYXJvdW5kXG4gICAqIHRoZSBzYW1lIHRpbWUgdmlhIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseUFzeW5jICRyb290U2NvcGUuJGFwcGx5QXN5bmN9LiBUaGlzIGNhbiByZXN1bHQgaW5cbiAgICogc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnQgZm9yIGJpZ2dlciBhcHBsaWNhdGlvbnMgdGhhdCBtYWtlIG1hbnkgSFRUUCByZXF1ZXN0c1xuICAgKiBjb25jdXJyZW50bHkgKGNvbW1vbiBkdXJpbmcgYXBwbGljYXRpb24gYm9vdHN0cmFwKS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gZmFsc2UuIElmIG5vIHZhbHVlIGlzIHNwZWNpZmllZCwgcmV0dXJucyB0aGUgY3VycmVudCBjb25maWd1cmVkIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiB0cnVlLCB3aGVuIHJlcXVlc3RzIGFyZSBsb2FkZWQsIHRoZXkgd2lsbCBzY2hlZHVsZSBhIGRlZmVycmVkXG4gICAqICAgIFwiYXBwbHlcIiBvbiB0aGUgbmV4dCB0aWNrLCBnaXZpbmcgdGltZSBmb3Igc3Vic2VxdWVudCByZXF1ZXN0cyBpbiBhIHJvdWdobHkgfjEwbXMgd2luZG93XG4gICAqICAgIHRvIGxvYWQgYW5kIHNoYXJlIHRoZSBzYW1lIGRpZ2VzdCBjeWNsZS5cbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW58T2JqZWN0fSBJZiBhIHZhbHVlIGlzIHNwZWNpZmllZCwgcmV0dXJucyB0aGUgJGh0dHBQcm92aWRlciBmb3IgY2hhaW5pbmcuXG4gICAqICAgIG90aGVyd2lzZSwgcmV0dXJucyB0aGUgY3VycmVudCBjb25maWd1cmVkIHZhbHVlLlxuICAgKiovXG4gIHRoaXMudXNlQXBwbHlBc3luYyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgIHVzZUFwcGx5QXN5bmMgPSAhIXZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiB1c2VBcHBseUFzeW5jO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICogQG5hbWUgJGh0dHBQcm92aWRlciNpbnRlcmNlcHRvcnNcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEFycmF5IGNvbnRhaW5pbmcgc2VydmljZSBmYWN0b3JpZXMgZm9yIGFsbCBzeW5jaHJvbm91cyBvciBhc3luY2hyb25vdXMge0BsaW5rIG5nLiRodHRwICRodHRwfVxuICAgKiBwcmUtcHJvY2Vzc2luZyBvZiByZXF1ZXN0IG9yIHBvc3Rwcm9jZXNzaW5nIG9mIHJlc3BvbnNlcy5cbiAgICpcbiAgICogVGhlc2Ugc2VydmljZSBmYWN0b3JpZXMgYXJlIG9yZGVyZWQgYnkgcmVxdWVzdCwgaS5lLiB0aGV5IGFyZSBhcHBsaWVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuICAgKiBhcnJheSwgb24gcmVxdWVzdCwgYnV0IHJldmVyc2Ugb3JkZXIsIG9uIHJlc3BvbnNlLlxuICAgKlxuICAgKiB7QGxpbmsgbmcuJGh0dHAjaW50ZXJjZXB0b3JzIEludGVyY2VwdG9ycyBkZXRhaWxlZCBpbmZvfVxuICAgKiovXG4gIHZhciBpbnRlcmNlcHRvckZhY3RvcmllcyA9IHRoaXMuaW50ZXJjZXB0b3JzID0gW107XG5cbiAgdGhpcy4kZ2V0ID0gWyckYnJvd3NlcicsICckaHR0cEJhY2tlbmQnLCAnJCRjb29raWVSZWFkZXInLCAnJGNhY2hlRmFjdG9yeScsICckcm9vdFNjb3BlJywgJyRxJywgJyRpbmplY3RvcicsICckc2NlJyxcbiAgICAgIGZ1bmN0aW9uKCRicm93c2VyLCAkaHR0cEJhY2tlbmQsICQkY29va2llUmVhZGVyLCAkY2FjaGVGYWN0b3J5LCAkcm9vdFNjb3BlLCAkcSwgJGluamVjdG9yLCAkc2NlKSB7XG5cbiAgICB2YXIgZGVmYXVsdENhY2hlID0gJGNhY2hlRmFjdG9yeSgnJGh0dHAnKTtcblxuICAgIC8qKlxuICAgICAqIE1ha2Ugc3VyZSB0aGF0IGRlZmF1bHQgcGFyYW0gc2VyaWFsaXplciBpcyBleHBvc2VkIGFzIGEgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBkZWZhdWx0cy5wYXJhbVNlcmlhbGl6ZXIgPSBpc1N0cmluZyhkZWZhdWx0cy5wYXJhbVNlcmlhbGl6ZXIpID9cbiAgICAgICRpbmplY3Rvci5nZXQoZGVmYXVsdHMucGFyYW1TZXJpYWxpemVyKSA6IGRlZmF1bHRzLnBhcmFtU2VyaWFsaXplcjtcblxuICAgIC8qKlxuICAgICAqIEludGVyY2VwdG9ycyBzdG9yZWQgaW4gcmV2ZXJzZSBvcmRlci4gSW5uZXIgaW50ZXJjZXB0b3JzIGJlZm9yZSBvdXRlciBpbnRlcmNlcHRvcnMuXG4gICAgICogVGhlIHJldmVyc2FsIGlzIG5lZWRlZCBzbyB0aGF0IHdlIGNhbiBidWlsZCB1cCB0aGUgaW50ZXJjZXB0aW9uIGNoYWluIGFyb3VuZCB0aGVcbiAgICAgKiBzZXJ2ZXIgcmVxdWVzdC5cbiAgICAgKi9cbiAgICB2YXIgcmV2ZXJzZWRJbnRlcmNlcHRvcnMgPSBbXTtcblxuICAgIGZvckVhY2goaW50ZXJjZXB0b3JGYWN0b3JpZXMsIGZ1bmN0aW9uKGludGVyY2VwdG9yRmFjdG9yeSkge1xuICAgICAgcmV2ZXJzZWRJbnRlcmNlcHRvcnMudW5zaGlmdChpc1N0cmluZyhpbnRlcmNlcHRvckZhY3RvcnkpXG4gICAgICAgICAgPyAkaW5qZWN0b3IuZ2V0KGludGVyY2VwdG9yRmFjdG9yeSkgOiAkaW5qZWN0b3IuaW52b2tlKGludGVyY2VwdG9yRmFjdG9yeSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHNlcnZpY2VcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqIEBuYW1lICRodHRwXG4gICAgICogQHJlcXVpcmVzIG5nLiRodHRwQmFja2VuZFxuICAgICAqIEByZXF1aXJlcyAkY2FjaGVGYWN0b3J5XG4gICAgICogQHJlcXVpcmVzICRyb290U2NvcGVcbiAgICAgKiBAcmVxdWlyZXMgJHFcbiAgICAgKiBAcmVxdWlyZXMgJGluamVjdG9yXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBUaGUgYCRodHRwYCBzZXJ2aWNlIGlzIGEgY29yZSBBbmd1bGFyIHNlcnZpY2UgdGhhdCBmYWNpbGl0YXRlcyBjb21tdW5pY2F0aW9uIHdpdGggdGhlIHJlbW90ZVxuICAgICAqIEhUVFAgc2VydmVycyB2aWEgdGhlIGJyb3dzZXIncyBbWE1MSHR0cFJlcXVlc3RdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL3htbGh0dHByZXF1ZXN0KVxuICAgICAqIG9iamVjdCBvciB2aWEgW0pTT05QXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0pTT05QKS5cbiAgICAgKlxuICAgICAqIEZvciB1bml0IHRlc3RpbmcgYXBwbGljYXRpb25zIHRoYXQgdXNlIGAkaHR0cGAgc2VydmljZSwgc2VlXG4gICAgICoge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgJGh0dHBCYWNrZW5kIG1vY2t9LlxuICAgICAqXG4gICAgICogRm9yIGEgaGlnaGVyIGxldmVsIG9mIGFic3RyYWN0aW9uLCBwbGVhc2UgY2hlY2sgb3V0IHRoZSB7QGxpbmsgbmdSZXNvdXJjZS4kcmVzb3VyY2VcbiAgICAgKiAkcmVzb3VyY2V9IHNlcnZpY2UuXG4gICAgICpcbiAgICAgKiBUaGUgJGh0dHAgQVBJIGlzIGJhc2VkIG9uIHRoZSB7QGxpbmsgbmcuJHEgZGVmZXJyZWQvcHJvbWlzZSBBUElzfSBleHBvc2VkIGJ5XG4gICAgICogdGhlICRxIHNlcnZpY2UuIFdoaWxlIGZvciBzaW1wbGUgdXNhZ2UgcGF0dGVybnMgdGhpcyBkb2Vzbid0IG1hdHRlciBtdWNoLCBmb3IgYWR2YW5jZWQgdXNhZ2VcbiAgICAgKiBpdCBpcyBpbXBvcnRhbnQgdG8gZmFtaWxpYXJpemUgeW91cnNlbGYgd2l0aCB0aGVzZSBBUElzIGFuZCB0aGUgZ3VhcmFudGVlcyB0aGV5IHByb3ZpZGUuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIEdlbmVyYWwgdXNhZ2VcbiAgICAgKiBUaGUgYCRodHRwYCBzZXJ2aWNlIGlzIGEgZnVuY3Rpb24gd2hpY2ggdGFrZXMgYSBzaW5nbGUgYXJndW1lbnQg4oCUIGEge0BsaW5rICRodHRwI3VzYWdlIGNvbmZpZ3VyYXRpb24gb2JqZWN0fSDigJRcbiAgICAgKiB0aGF0IGlzIHVzZWQgdG8gZ2VuZXJhdGUgYW4gSFRUUCByZXF1ZXN0IGFuZCByZXR1cm5zICBhIHtAbGluayBuZy4kcSBwcm9taXNlfS5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAvLyBTaW1wbGUgR0VUIHJlcXVlc3QgZXhhbXBsZTpcbiAgICAgKiAgICRodHRwKHtcbiAgICAgKiAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgKiAgICAgdXJsOiAnL3NvbWVVcmwnXG4gICAgICogICB9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuICAgICAqICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgYXN5bmNocm9ub3VzbHlcbiAgICAgKiAgICAgICAvLyB3aGVuIHRoZSByZXNwb25zZSBpcyBhdmFpbGFibGVcbiAgICAgKiAgICAgfSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSkge1xuICAgICAqICAgICAgIC8vIGNhbGxlZCBhc3luY2hyb25vdXNseSBpZiBhbiBlcnJvciBvY2N1cnNcbiAgICAgKiAgICAgICAvLyBvciBzZXJ2ZXIgcmV0dXJucyByZXNwb25zZSB3aXRoIGFuIGVycm9yIHN0YXR1cy5cbiAgICAgKiAgICAgfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGUgcmVzcG9uc2Ugb2JqZWN0IGhhcyB0aGVzZSBwcm9wZXJ0aWVzOlxuICAgICAqXG4gICAgICogICAtICoqZGF0YSoqIOKAkyBge3N0cmluZ3xPYmplY3R9YCDigJMgVGhlIHJlc3BvbnNlIGJvZHkgdHJhbnNmb3JtZWQgd2l0aCB0aGUgdHJhbnNmb3JtXG4gICAgICogICAgIGZ1bmN0aW9ucy5cbiAgICAgKiAgIC0gKipzdGF0dXMqKiDigJMgYHtudW1iZXJ9YCDigJMgSFRUUCBzdGF0dXMgY29kZSBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICogICAtICoqaGVhZGVycyoqIOKAkyBge2Z1bmN0aW9uKFtoZWFkZXJOYW1lXSl9YCDigJMgSGVhZGVyIGdldHRlciBmdW5jdGlvbi5cbiAgICAgKiAgIC0gKipjb25maWcqKiDigJMgYHtPYmplY3R9YCDigJMgVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IHRoYXQgd2FzIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHJlcXVlc3QuXG4gICAgICogICAtICoqc3RhdHVzVGV4dCoqIOKAkyBge3N0cmluZ31gIOKAkyBIVFRQIHN0YXR1cyB0ZXh0IG9mIHRoZSByZXNwb25zZS5cbiAgICAgKiAgIC0gKip4aHJTdGF0dXMqKiDigJMgYHtzdHJpbmd9YCDigJMgU3RhdHVzIG9mIHRoZSBYTUxIdHRwUmVxdWVzdCAoYGNvbXBsZXRlYCwgYGVycm9yYCwgYHRpbWVvdXRgIG9yIGBhYm9ydGApLlxuICAgICAqXG4gICAgICogQSByZXNwb25zZSBzdGF0dXMgY29kZSBiZXR3ZWVuIDIwMCBhbmQgMjk5IGlzIGNvbnNpZGVyZWQgYSBzdWNjZXNzIHN0YXR1cyBhbmQgd2lsbCByZXN1bHQgaW5cbiAgICAgKiB0aGUgc3VjY2VzcyBjYWxsYmFjayBiZWluZyBjYWxsZWQuIEFueSByZXNwb25zZSBzdGF0dXMgY29kZSBvdXRzaWRlIG9mIHRoYXQgcmFuZ2UgaXNcbiAgICAgKiBjb25zaWRlcmVkIGFuIGVycm9yIHN0YXR1cyBhbmQgd2lsbCByZXN1bHQgaW4gdGhlIGVycm9yIGNhbGxiYWNrIGJlaW5nIGNhbGxlZC5cbiAgICAgKiBBbHNvLCBzdGF0dXMgY29kZXMgbGVzcyB0aGFuIC0xIGFyZSBub3JtYWxpemVkIHRvIHplcm8uIC0xIHVzdWFsbHkgbWVhbnMgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICogYWJvcnRlZCwgZS5nLiB1c2luZyBhIGBjb25maWcudGltZW91dGAuXG4gICAgICogTm90ZSB0aGF0IGlmIHRoZSByZXNwb25zZSBpcyBhIHJlZGlyZWN0LCBYTUxIdHRwUmVxdWVzdCB3aWxsIHRyYW5zcGFyZW50bHkgZm9sbG93IGl0LCBtZWFuaW5nXG4gICAgICogdGhhdCB0aGUgb3V0Y29tZSAoc3VjY2VzcyBvciBlcnJvcikgd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHRoZSBmaW5hbCByZXNwb25zZSBzdGF0dXMgY29kZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogIyMgU2hvcnRjdXQgbWV0aG9kc1xuICAgICAqXG4gICAgICogU2hvcnRjdXQgbWV0aG9kcyBhcmUgYWxzbyBhdmFpbGFibGUuIEFsbCBzaG9ydGN1dCBtZXRob2RzIHJlcXVpcmUgcGFzc2luZyBpbiB0aGUgVVJMLCBhbmRcbiAgICAgKiByZXF1ZXN0IGRhdGEgbXVzdCBiZSBwYXNzZWQgaW4gZm9yIFBPU1QvUFVUIHJlcXVlc3RzLiBBbiBvcHRpb25hbCBjb25maWcgY2FuIGJlIHBhc3NlZCBhcyB0aGVcbiAgICAgKiBsYXN0IGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiAgICRodHRwLmdldCgnL3NvbWVVcmwnLCBjb25maWcpLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgKiAgICRodHRwLnBvc3QoJy9zb21lVXJsJywgZGF0YSwgY29uZmlnKS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBDb21wbGV0ZSBsaXN0IG9mIHNob3J0Y3V0IG1ldGhvZHM6XG4gICAgICpcbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNnZXQgJGh0dHAuZ2V0fVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2hlYWQgJGh0dHAuaGVhZH1cbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNwb3N0ICRodHRwLnBvc3R9XG4gICAgICogLSB7QGxpbmsgbmcuJGh0dHAjcHV0ICRodHRwLnB1dH1cbiAgICAgKiAtIHtAbGluayBuZy4kaHR0cCNkZWxldGUgJGh0dHAuZGVsZXRlfVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI2pzb25wICRodHRwLmpzb25wfVxuICAgICAqIC0ge0BsaW5rIG5nLiRodHRwI3BhdGNoICRodHRwLnBhdGNofVxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyBXcml0aW5nIFVuaXQgVGVzdHMgdGhhdCB1c2UgJGh0dHBcbiAgICAgKiBXaGVuIHVuaXQgdGVzdGluZyAodXNpbmcge0BsaW5rIG5nTW9jayBuZ01vY2t9KSwgaXQgaXMgbmVjZXNzYXJ5IHRvIGNhbGxcbiAgICAgKiB7QGxpbmsgbmdNb2NrLiRodHRwQmFja2VuZCNmbHVzaCAkaHR0cEJhY2tlbmQuZmx1c2goKX0gdG8gZmx1c2ggZWFjaCBwZW5kaW5nXG4gICAgICogcmVxdWVzdCB1c2luZyB0cmFpbmVkIHJlc3BvbnNlcy5cbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqICRodHRwQmFja2VuZC5leHBlY3RHRVQoLi4uKTtcbiAgICAgKiAkaHR0cC5nZXQoLi4uKTtcbiAgICAgKiAkaHR0cEJhY2tlbmQuZmx1c2goKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIFNldHRpbmcgSFRUUCBIZWFkZXJzXG4gICAgICpcbiAgICAgKiBUaGUgJGh0dHAgc2VydmljZSB3aWxsIGF1dG9tYXRpY2FsbHkgYWRkIGNlcnRhaW4gSFRUUCBoZWFkZXJzIHRvIGFsbCByZXF1ZXN0cy4gVGhlc2UgZGVmYXVsdHNcbiAgICAgKiBjYW4gYmUgZnVsbHkgY29uZmlndXJlZCBieSBhY2Nlc3NpbmcgdGhlIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnNgIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBvYmplY3QsIHdoaWNoIGN1cnJlbnRseSBjb250YWlucyB0aGlzIGRlZmF1bHQgY29uZmlndXJhdGlvbjpcbiAgICAgKlxuICAgICAqIC0gYCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25gIChoZWFkZXJzIHRoYXQgYXJlIGNvbW1vbiBmb3IgYWxsIHJlcXVlc3RzKTpcbiAgICAgKiAgIC0gPGNvZGU+QWNjZXB0OiBhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCBcXComIzY1Mjc5Oy8mIzY1Mjc5O1xcKjwvY29kZT5cbiAgICAgKiAtIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucG9zdGA6IChoZWFkZXIgZGVmYXVsdHMgZm9yIFBPU1QgcmVxdWVzdHMpXG4gICAgICogICAtIGBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25gXG4gICAgICogLSBgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnB1dGAgKGhlYWRlciBkZWZhdWx0cyBmb3IgUFVUIHJlcXVlc3RzKVxuICAgICAqICAgLSBgQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uYFxuICAgICAqXG4gICAgICogVG8gYWRkIG9yIG92ZXJ3cml0ZSB0aGVzZSBkZWZhdWx0cywgc2ltcGx5IGFkZCBvciByZW1vdmUgYSBwcm9wZXJ0eSBmcm9tIHRoZXNlIGNvbmZpZ3VyYXRpb25cbiAgICAgKiBvYmplY3RzLiBUbyBhZGQgaGVhZGVycyBmb3IgYW4gSFRUUCBtZXRob2Qgb3RoZXIgdGhhbiBQT1NUIG9yIFBVVCwgc2ltcGx5IGFkZCBhIG5ldyBvYmplY3RcbiAgICAgKiB3aXRoIHRoZSBsb3dlcmNhc2VkIEhUVFAgbWV0aG9kIG5hbWUgYXMgdGhlIGtleSwgZS5nLlxuICAgICAqIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0ID0geyAnTXktSGVhZGVyJyA6ICd2YWx1ZScgfWAuXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdHMgY2FuIGFsc28gYmUgc2V0IGF0IHJ1bnRpbWUgdmlhIHRoZSBgJGh0dHAuZGVmYXVsdHNgIG9iamVjdCBpbiB0aGUgc2FtZVxuICAgICAqIGZhc2hpb24uIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogbW9kdWxlLnJ1bihmdW5jdGlvbigkaHR0cCkge1xuICAgICAqICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb24uQXV0aG9yaXphdGlvbiA9ICdCYXNpYyBZbVZsY0RwaWIyOXcnO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSW4gYWRkaXRpb24sIHlvdSBjYW4gc3VwcGx5IGEgYGhlYWRlcnNgIHByb3BlcnR5IGluIHRoZSBjb25maWcgb2JqZWN0IHBhc3NlZCB3aGVuXG4gICAgICogY2FsbGluZyBgJGh0dHAoY29uZmlnKWAsIHdoaWNoIG92ZXJyaWRlcyB0aGUgZGVmYXVsdHMgd2l0aG91dCBjaGFuZ2luZyB0aGVtIGdsb2JhbGx5LlxuICAgICAqXG4gICAgICogVG8gZXhwbGljaXRseSByZW1vdmUgYSBoZWFkZXIgYXV0b21hdGljYWxseSBhZGRlZCB2aWEgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzIG9uIGEgcGVyIHJlcXVlc3QgYmFzaXMsXG4gICAgICogVXNlIHRoZSBgaGVhZGVyc2AgcHJvcGVydHksIHNldHRpbmcgdGhlIGRlc2lyZWQgaGVhZGVyIHRvIGB1bmRlZmluZWRgLiBGb3IgZXhhbXBsZTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIHJlcSA9IHtcbiAgICAgKiAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICogIHVybDogJ2h0dHA6Ly9leGFtcGxlLmNvbScsXG4gICAgICogIGhlYWRlcnM6IHtcbiAgICAgKiAgICAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkXG4gICAgICogIH0sXG4gICAgICogIGRhdGE6IHsgdGVzdDogJ3Rlc3QnIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiAkaHR0cChyZXEpLnRoZW4oZnVuY3Rpb24oKXsuLi59LCBmdW5jdGlvbigpey4uLn0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMgVHJhbnNmb3JtaW5nIFJlcXVlc3RzIGFuZCBSZXNwb25zZXNcbiAgICAgKlxuICAgICAqIEJvdGggcmVxdWVzdHMgYW5kIHJlc3BvbnNlcyBjYW4gYmUgdHJhbnNmb3JtZWQgdXNpbmcgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zOiBgdHJhbnNmb3JtUmVxdWVzdGBcbiAgICAgKiBhbmQgYHRyYW5zZm9ybVJlc3BvbnNlYC4gVGhlc2UgcHJvcGVydGllcyBjYW4gYmUgYSBzaW5nbGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zXG4gICAgICogdGhlIHRyYW5zZm9ybWVkIHZhbHVlIChgZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlciwgc3RhdHVzKWApIG9yIGFuIGFycmF5IG9mIHN1Y2ggdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zLFxuICAgICAqIHdoaWNoIGFsbG93cyB5b3UgdG8gYHB1c2hgIG9yIGB1bnNoaWZ0YCBhIG5ldyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiBpbnRvIHRoZSB0cmFuc2Zvcm1hdGlvbiBjaGFpbi5cbiAgICAgKlxuICAgICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAgICogKipOb3RlOioqIEFuZ3VsYXIgZG9lcyBub3QgbWFrZSBhIGNvcHkgb2YgdGhlIGBkYXRhYCBwYXJhbWV0ZXIgYmVmb3JlIGl0IGlzIHBhc3NlZCBpbnRvIHRoZSBgdHJhbnNmb3JtUmVxdWVzdGAgcGlwZWxpbmUuXG4gICAgICogVGhhdCBtZWFucyBjaGFuZ2VzIHRvIHRoZSBwcm9wZXJ0aWVzIG9mIGBkYXRhYCBhcmUgbm90IGxvY2FsIHRvIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gKHNpbmNlIEphdmFzY3JpcHQgcGFzc2VzIG9iamVjdHMgYnkgcmVmZXJlbmNlKS5cbiAgICAgKiBGb3IgZXhhbXBsZSwgd2hlbiBjYWxsaW5nIGAkaHR0cC5nZXQodXJsLCAkc2NvcGUubXlPYmplY3QpYCwgbW9kaWZpY2F0aW9ucyB0byB0aGUgb2JqZWN0J3MgcHJvcGVydGllcyBpbiBhIHRyYW5zZm9ybVJlcXVlc3RcbiAgICAgKiBmdW5jdGlvbiB3aWxsIGJlIHJlZmxlY3RlZCBvbiB0aGUgc2NvcGUgYW5kIGluIGFueSB0ZW1wbGF0ZXMgd2hlcmUgdGhlIG9iamVjdCBpcyBkYXRhLWJvdW5kLlxuICAgICAqIFRvIHByZXZlbnQgdGhpcywgdHJhbnNmb3JtIGZ1bmN0aW9ucyBzaG91bGQgaGF2ZSBubyBzaWRlLWVmZmVjdHMuXG4gICAgICogSWYgeW91IG5lZWQgdG8gbW9kaWZ5IHByb3BlcnRpZXMsIGl0IGlzIHJlY29tbWVuZGVkIHRvIG1ha2UgYSBjb3B5IG9mIHRoZSBkYXRhLCBvciBjcmVhdGUgbmV3IG9iamVjdCB0byByZXR1cm4uXG4gICAgICogPC9kaXY+XG4gICAgICpcbiAgICAgKiAjIyMgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnNcbiAgICAgKlxuICAgICAqIFRoZSBgJGh0dHBQcm92aWRlcmAgcHJvdmlkZXIgYW5kIGAkaHR0cGAgc2VydmljZSBleHBvc2UgYGRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgIGFuZFxuICAgICAqIGBkZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZWAgcHJvcGVydGllcy4gSWYgYSByZXF1ZXN0IGRvZXMgbm90IHByb3ZpZGUgaXRzIG93biB0cmFuc2Zvcm1hdGlvbnNcbiAgICAgKiB0aGVuIHRoZXNlIHdpbGwgYmUgYXBwbGllZC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYXVnbWVudCBvciByZXBsYWNlIHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyBieSBtb2RpZnlpbmcgdGhlc2UgcHJvcGVydGllcyBieSBhZGRpbmcgdG8gb3JcbiAgICAgKiByZXBsYWNpbmcgdGhlIGFycmF5LlxuICAgICAqXG4gICAgICogQW5ndWxhciBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGRlZmF1bHQgdHJhbnNmb3JtYXRpb25zOlxuICAgICAqXG4gICAgICogUmVxdWVzdCB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlcXVlc3RgIGFuZCBgJGh0dHAuZGVmYXVsdHMudHJhbnNmb3JtUmVxdWVzdGApIGlzXG4gICAgICogYW4gYXJyYXkgd2l0aCBvbmUgZnVuY3Rpb24gdGhhdCBkb2VzIHRoZSBmb2xsb3dpbmc6XG4gICAgICpcbiAgICAgKiAtIElmIHRoZSBgZGF0YWAgcHJvcGVydHkgb2YgdGhlIHJlcXVlc3QgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbnMgYW4gb2JqZWN0LCBzZXJpYWxpemUgaXRcbiAgICAgKiAgIGludG8gSlNPTiBmb3JtYXQuXG4gICAgICpcbiAgICAgKiBSZXNwb25zZSB0cmFuc2Zvcm1hdGlvbnMgKGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCBhbmQgYCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlYCkgaXNcbiAgICAgKiBhbiBhcnJheSB3aXRoIG9uZSBmdW5jdGlvbiB0aGF0IGRvZXMgdGhlIGZvbGxvd2luZzpcbiAgICAgKlxuICAgICAqICAtIElmIFhTUkYgcHJlZml4IGlzIGRldGVjdGVkLCBzdHJpcCBpdCAoc2VlIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zIHNlY3Rpb24gYmVsb3cpLlxuICAgICAqICAtIElmIHRoZSBgQ29udGVudC1UeXBlYCBpcyBgYXBwbGljYXRpb24vanNvbmAgb3IgdGhlIHJlc3BvbnNlIGxvb2tzIGxpa2UgSlNPTixcbiAgICogICAgICBkZXNlcmlhbGl6ZSBpdCB1c2luZyBhIEpTT04gcGFyc2VyLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnMgUGVyIFJlcXVlc3RcbiAgICAgKlxuICAgICAqIElmIHlvdSB3aXNoIHRvIG92ZXJyaWRlIHRoZSByZXF1ZXN0L3Jlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucyBvbmx5IGZvciBhIHNpbmdsZSByZXF1ZXN0IHRoZW4gcHJvdmlkZVxuICAgICAqIGB0cmFuc2Zvcm1SZXF1ZXN0YCBhbmQvb3IgYHRyYW5zZm9ybVJlc3BvbnNlYCBwcm9wZXJ0aWVzIG9uIHRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBwYXNzZWRcbiAgICAgKiBpbnRvIGAkaHR0cGAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgaWYgeW91IHByb3ZpZGUgdGhlc2UgcHJvcGVydGllcyBvbiB0aGUgY29uZmlnIG9iamVjdCB0aGUgZGVmYXVsdCB0cmFuc2Zvcm1hdGlvbnMgd2lsbCBiZVxuICAgICAqIG92ZXJ3cml0dGVuLiBJZiB5b3Ugd2lzaCB0byBhdWdtZW50IHRoZSBkZWZhdWx0IHRyYW5zZm9ybWF0aW9ucyB0aGVuIHlvdSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB5b3VyXG4gICAgICogbG9jYWwgdHJhbnNmb3JtYXRpb24gYXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgZm9sbG93aW5nIGNvZGUgZGVtb25zdHJhdGVzIGFkZGluZyBhIG5ldyByZXNwb25zZSB0cmFuc2Zvcm1hdGlvbiB0byBiZSBydW4gYWZ0ZXIgdGhlIGRlZmF1bHQgcmVzcG9uc2VcbiAgICAgKiB0cmFuc2Zvcm1hdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogZnVuY3Rpb24gYXBwZW5kVHJhbnNmb3JtKGRlZmF1bHRzLCB0cmFuc2Zvcm0pIHtcbiAgICAgKlxuICAgICAqICAgLy8gV2UgY2FuJ3QgZ3VhcmFudGVlIHRoYXQgdGhlIGRlZmF1bHQgdHJhbnNmb3JtYXRpb24gaXMgYW4gYXJyYXlcbiAgICAgKiAgIGRlZmF1bHRzID0gYW5ndWxhci5pc0FycmF5KGRlZmF1bHRzKSA/IGRlZmF1bHRzIDogW2RlZmF1bHRzXTtcbiAgICAgKlxuICAgICAqICAgLy8gQXBwZW5kIHRoZSBuZXcgdHJhbnNmb3JtYXRpb24gdG8gdGhlIGRlZmF1bHRzXG4gICAgICogICByZXR1cm4gZGVmYXVsdHMuY29uY2F0KHRyYW5zZm9ybSk7XG4gICAgICogfVxuICAgICAqXG4gICAgICogJGh0dHAoe1xuICAgICAqICAgdXJsOiAnLi4uJyxcbiAgICAgKiAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICogICB0cmFuc2Zvcm1SZXNwb25zZTogYXBwZW5kVHJhbnNmb3JtKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAqICAgICByZXR1cm4gZG9UcmFuc2Zvcm0odmFsdWUpO1xuICAgICAqICAgfSlcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqXG4gICAgICogIyMgQ2FjaGluZ1xuICAgICAqXG4gICAgICoge0BsaW5rIG5nLiRodHRwIGAkaHR0cGB9IHJlc3BvbnNlcyBhcmUgbm90IGNhY2hlZCBieSBkZWZhdWx0LiBUbyBlbmFibGUgY2FjaGluZywgeW91IG11c3RcbiAgICAgKiBzZXQgdGhlIGNvbmZpZy5jYWNoZSB2YWx1ZSBvciB0aGUgZGVmYXVsdCBjYWNoZSB2YWx1ZSB0byBUUlVFIG9yIHRvIGEgY2FjaGUgb2JqZWN0IChjcmVhdGVkXG4gICAgICogd2l0aCB7QGxpbmsgbmcuJGNhY2hlRmFjdG9yeSBgJGNhY2hlRmFjdG9yeWB9KS4gSWYgZGVmaW5lZCwgdGhlIHZhbHVlIG9mIGNvbmZpZy5jYWNoZSB0YWtlc1xuICAgICAqIHByZWNlZGVuY2Ugb3ZlciB0aGUgZGVmYXVsdCBjYWNoZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEluIG9yZGVyIHRvOlxuICAgICAqICAgKiBjYWNoZSBhbGwgcmVzcG9uc2VzIC0gc2V0IHRoZSBkZWZhdWx0IGNhY2hlIHZhbHVlIHRvIFRSVUUgb3IgdG8gYSBjYWNoZSBvYmplY3RcbiAgICAgKiAgICogY2FjaGUgYSBzcGVjaWZpYyByZXNwb25zZSAtIHNldCBjb25maWcuY2FjaGUgdmFsdWUgdG8gVFJVRSBvciB0byBhIGNhY2hlIG9iamVjdFxuICAgICAqXG4gICAgICogSWYgY2FjaGluZyBpcyBlbmFibGVkLCBidXQgbmVpdGhlciB0aGUgZGVmYXVsdCBjYWNoZSBub3IgY29uZmlnLmNhY2hlIGFyZSBzZXQgdG8gYSBjYWNoZSBvYmplY3QsXG4gICAgICogdGhlbiB0aGUgZGVmYXVsdCBgJGNhY2hlRmFjdG9yeShcIiRodHRwXCIpYCBvYmplY3QgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGNhY2hlIHZhbHVlIGNhbiBiZSBzZXQgYnkgdXBkYXRpbmcgdGhlXG4gICAgICoge0BsaW5rIG5nLiRodHRwI2RlZmF1bHRzIGAkaHR0cC5kZWZhdWx0cy5jYWNoZWB9IHByb3BlcnR5IG9yIHRoZVxuICAgICAqIHtAbGluayAkaHR0cFByb3ZpZGVyI2RlZmF1bHRzIGAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmNhY2hlYH0gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBXaGVuIGNhY2hpbmcgaXMgZW5hYmxlZCwge0BsaW5rIG5nLiRodHRwIGAkaHR0cGB9IHN0b3JlcyB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHVzaW5nXG4gICAgICogdGhlIHJlbGV2YW50IGNhY2hlIG9iamVjdC4gVGhlIG5leHQgdGltZSB0aGUgc2FtZSByZXF1ZXN0IGlzIG1hZGUsIHRoZSByZXNwb25zZSBpcyByZXR1cm5lZFxuICAgICAqIGZyb20gdGhlIGNhY2hlIHdpdGhvdXQgc2VuZGluZyBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIFRha2Ugbm90ZSB0aGF0OlxuICAgICAqXG4gICAgICogICAqIE9ubHkgR0VUIGFuZCBKU09OUCByZXF1ZXN0cyBhcmUgY2FjaGVkLlxuICAgICAqICAgKiBUaGUgY2FjaGUga2V5IGlzIHRoZSByZXF1ZXN0IFVSTCBpbmNsdWRpbmcgc2VhcmNoIHBhcmFtZXRlcnM7IGhlYWRlcnMgYXJlIG5vdCBjb25zaWRlcmVkLlxuICAgICAqICAgKiBDYWNoZWQgcmVzcG9uc2VzIGFyZSByZXR1cm5lZCBhc3luY2hyb25vdXNseSwgaW4gdGhlIHNhbWUgd2F5IGFzIHJlc3BvbnNlcyBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogICAqIElmIG11bHRpcGxlIGlkZW50aWNhbCByZXF1ZXN0cyBhcmUgbWFkZSB1c2luZyB0aGUgc2FtZSBjYWNoZSwgd2hpY2ggaXMgbm90IHlldCBwb3B1bGF0ZWQsXG4gICAgICogICAgIG9uZSByZXF1ZXN0IHdpbGwgYmUgbWFkZSB0byB0aGUgc2VydmVyIGFuZCByZW1haW5pbmcgcmVxdWVzdHMgd2lsbCByZXR1cm4gdGhlIHNhbWUgcmVzcG9uc2UuXG4gICAgICogICAqIEEgY2FjaGUtY29udHJvbCBoZWFkZXIgb24gdGhlIHJlc3BvbnNlIGRvZXMgbm90IGFmZmVjdCBpZiBvciBob3cgcmVzcG9uc2VzIGFyZSBjYWNoZWQuXG4gICAgICpcbiAgICAgKlxuICAgICAqICMjIEludGVyY2VwdG9yc1xuICAgICAqXG4gICAgICogQmVmb3JlIHlvdSBzdGFydCBjcmVhdGluZyBpbnRlcmNlcHRvcnMsIGJlIHN1cmUgdG8gdW5kZXJzdGFuZCB0aGVcbiAgICAgKiB7QGxpbmsgbmcuJHEgJHEgYW5kIGRlZmVycmVkL3Byb21pc2UgQVBJc30uXG4gICAgICpcbiAgICAgKiBGb3IgcHVycG9zZXMgb2YgZ2xvYmFsIGVycm9yIGhhbmRsaW5nLCBhdXRoZW50aWNhdGlvbiwgb3IgYW55IGtpbmQgb2Ygc3luY2hyb25vdXMgb3JcbiAgICAgKiBhc3luY2hyb25vdXMgcHJlLXByb2Nlc3Npbmcgb2YgcmVxdWVzdCBvciBwb3N0cHJvY2Vzc2luZyBvZiByZXNwb25zZXMsIGl0IGlzIGRlc2lyYWJsZSB0byBiZVxuICAgICAqIGFibGUgdG8gaW50ZXJjZXB0IHJlcXVlc3RzIGJlZm9yZSB0aGV5IGFyZSBoYW5kZWQgdG8gdGhlIHNlcnZlciBhbmRcbiAgICAgKiByZXNwb25zZXMgYmVmb3JlIHRoZXkgYXJlIGhhbmRlZCBvdmVyIHRvIHRoZSBhcHBsaWNhdGlvbiBjb2RlIHRoYXRcbiAgICAgKiBpbml0aWF0ZWQgdGhlc2UgcmVxdWVzdHMuIFRoZSBpbnRlcmNlcHRvcnMgbGV2ZXJhZ2UgdGhlIHtAbGluayBuZy4kcVxuICAgICAqIHByb21pc2UgQVBJc30gdG8gZnVsZmlsbCB0aGlzIG5lZWQgZm9yIGJvdGggc3luY2hyb25vdXMgYW5kIGFzeW5jaHJvbm91cyBwcmUtcHJvY2Vzc2luZy5cbiAgICAgKlxuICAgICAqIFRoZSBpbnRlcmNlcHRvcnMgYXJlIHNlcnZpY2UgZmFjdG9yaWVzIHRoYXQgYXJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgYCRodHRwUHJvdmlkZXJgIGJ5XG4gICAgICogYWRkaW5nIHRoZW0gdG8gdGhlIGAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9yc2AgYXJyYXkuIFRoZSBmYWN0b3J5IGlzIGNhbGxlZCBhbmRcbiAgICAgKiBpbmplY3RlZCB3aXRoIGRlcGVuZGVuY2llcyAoaWYgc3BlY2lmaWVkKSBhbmQgcmV0dXJucyB0aGUgaW50ZXJjZXB0b3IuXG4gICAgICpcbiAgICAgKiBUaGVyZSBhcmUgdHdvIGtpbmRzIG9mIGludGVyY2VwdG9ycyAoYW5kIHR3byBraW5kcyBvZiByZWplY3Rpb24gaW50ZXJjZXB0b3JzKTpcbiAgICAgKlxuICAgICAqICAgKiBgcmVxdWVzdGA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggYSBodHRwIHtAbGluayAkaHR0cCN1c2FnZSBjb25maWd9IG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgY29uZmlnYCBvYmplY3Qgb3IgY3JlYXRlIGEgbmV3IG9uZS4gVGhlIGZ1bmN0aW9uIG5lZWRzIHRvIHJldHVybiB0aGUgYGNvbmZpZ2BcbiAgICAgKiAgICAgb2JqZWN0IGRpcmVjdGx5LCBvciBhIHByb21pc2UgY29udGFpbmluZyB0aGUgYGNvbmZpZ2Agb3IgYSBuZXcgYGNvbmZpZ2Agb2JqZWN0LlxuICAgICAqICAgKiBgcmVxdWVzdEVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICogICAqIGByZXNwb25zZWA6IGludGVyY2VwdG9ycyBnZXQgY2FsbGVkIHdpdGggaHR0cCBgcmVzcG9uc2VgIG9iamVjdC4gVGhlIGZ1bmN0aW9uIGlzIGZyZWUgdG9cbiAgICAgKiAgICAgbW9kaWZ5IHRoZSBgcmVzcG9uc2VgIG9iamVjdCBvciBjcmVhdGUgYSBuZXcgb25lLiBUaGUgZnVuY3Rpb24gbmVlZHMgdG8gcmV0dXJuIHRoZSBgcmVzcG9uc2VgXG4gICAgICogICAgIG9iamVjdCBkaXJlY3RseSwgb3IgYXMgYSBwcm9taXNlIGNvbnRhaW5pbmcgdGhlIGByZXNwb25zZWAgb3IgYSBuZXcgYHJlc3BvbnNlYCBvYmplY3QuXG4gICAgICogICAqIGByZXNwb25zZUVycm9yYDogaW50ZXJjZXB0b3IgZ2V0cyBjYWxsZWQgd2hlbiBhIHByZXZpb3VzIGludGVyY2VwdG9yIHRocmV3IGFuIGVycm9yIG9yXG4gICAgICogICAgIHJlc29sdmVkIHdpdGggYSByZWplY3Rpb24uXG4gICAgICpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICAvLyByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgYXMgYSBzZXJ2aWNlXG4gICAgICogICAkcHJvdmlkZS5mYWN0b3J5KCdteUh0dHBJbnRlcmNlcHRvcicsIGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICAvLyBvcHRpb25hbCBtZXRob2RcbiAgICAgKiAgICAgICAncmVxdWVzdCc6IGZ1bmN0aW9uKGNvbmZpZykge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIHN1Y2Nlc3NcbiAgICAgKiAgICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3JlcXVlc3RFcnJvcic6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xuICAgICAqICAgICAgICAgLy8gZG8gc29tZXRoaW5nIG9uIGVycm9yXG4gICAgICogICAgICAgICBpZiAoY2FuUmVjb3ZlcihyZWplY3Rpb24pKSB7XG4gICAgICogICAgICAgICAgIHJldHVybiByZXNwb25zZU9yTmV3UHJvbWlzZVxuICAgICAqICAgICAgICAgfVxuICAgICAqICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKlxuICAgICAqXG4gICAgICogICAgICAgLy8gb3B0aW9uYWwgbWV0aG9kXG4gICAgICogICAgICAgJ3Jlc3BvbnNlJzogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBzdWNjZXNzXG4gICAgICogICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICogICAgICAgfSxcbiAgICAgKlxuICAgICAqICAgICAgIC8vIG9wdGlvbmFsIG1ldGhvZFxuICAgICAqICAgICAgJ3Jlc3BvbnNlRXJyb3InOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcbiAgICAgKiAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBvbiBlcnJvclxuICAgICAqICAgICAgICAgaWYgKGNhblJlY292ZXIocmVqZWN0aW9uKSkge1xuICAgICAqICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VPck5ld1Byb21pc2VcbiAgICAgKiAgICAgICAgIH1cbiAgICAgKiAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKlxuICAgICAqICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnbXlIdHRwSW50ZXJjZXB0b3InKTtcbiAgICAgKlxuICAgICAqXG4gICAgICogICAvLyBhbHRlcm5hdGl2ZWx5LCByZWdpc3RlciB0aGUgaW50ZXJjZXB0b3IgdmlhIGFuIGFub255bW91cyBmYWN0b3J5XG4gICAgICogICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGZ1bmN0aW9uKCRxLCBkZXBlbmRlbmN5MSwgZGVwZW5kZW5jeTIpIHtcbiAgICAgKiAgICAgcmV0dXJuIHtcbiAgICAgKiAgICAgICdyZXF1ZXN0JzogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgICogICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZVxuICAgICAqICAgICAgIH0sXG4gICAgICpcbiAgICAgKiAgICAgICAncmVzcG9uc2UnOiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAqICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmVcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIH07XG4gICAgICogICB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqICMjIFNlY3VyaXR5IENvbnNpZGVyYXRpb25zXG4gICAgICpcbiAgICAgKiBXaGVuIGRlc2lnbmluZyB3ZWIgYXBwbGljYXRpb25zLCBjb25zaWRlciBzZWN1cml0eSB0aHJlYXRzIGZyb206XG4gICAgICpcbiAgICAgKiAtIFtKU09OIHZ1bG5lcmFiaWxpdHldKGh0dHA6Ly9oYWFja2VkLmNvbS9hcmNoaXZlLzIwMDgvMTEvMjAvYW5hdG9teS1vZi1hLXN1YnRsZS1qc29uLXZ1bG5lcmFiaWxpdHkuYXNweClcbiAgICAgKiAtIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KVxuICAgICAqXG4gICAgICogQm90aCBzZXJ2ZXIgYW5kIHRoZSBjbGllbnQgbXVzdCBjb29wZXJhdGUgaW4gb3JkZXIgdG8gZWxpbWluYXRlIHRoZXNlIHRocmVhdHMuIEFuZ3VsYXIgY29tZXNcbiAgICAgKiBwcmUtY29uZmlndXJlZCB3aXRoIHN0cmF0ZWdpZXMgdGhhdCBhZGRyZXNzIHRoZXNlIGlzc3VlcywgYnV0IGZvciB0aGlzIHRvIHdvcmsgYmFja2VuZCBzZXJ2ZXJcbiAgICAgKiBjb29wZXJhdGlvbiBpcyByZXF1aXJlZC5cbiAgICAgKlxuICAgICAqICMjIyBKU09OIFZ1bG5lcmFiaWxpdHkgUHJvdGVjdGlvblxuICAgICAqXG4gICAgICogQSBbSlNPTiB2dWxuZXJhYmlsaXR5XShodHRwOi8vaGFhY2tlZC5jb20vYXJjaGl2ZS8yMDA4LzExLzIwL2FuYXRvbXktb2YtYS1zdWJ0bGUtanNvbi12dWxuZXJhYmlsaXR5LmFzcHgpXG4gICAgICogYWxsb3dzIHRoaXJkIHBhcnR5IHdlYnNpdGUgdG8gdHVybiB5b3VyIEpTT04gcmVzb3VyY2UgVVJMIGludG9cbiAgICAgKiBbSlNPTlBdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSlNPTlApIHJlcXVlc3QgdW5kZXIgc29tZSBjb25kaXRpb25zLiBUb1xuICAgICAqIGNvdW50ZXIgdGhpcyB5b3VyIHNlcnZlciBjYW4gcHJlZml4IGFsbCBKU09OIHJlcXVlc3RzIHdpdGggZm9sbG93aW5nIHN0cmluZyBgXCIpXX0nLFxcblwiYC5cbiAgICAgKiBBbmd1bGFyIHdpbGwgYXV0b21hdGljYWxseSBzdHJpcCB0aGUgcHJlZml4IGJlZm9yZSBwcm9jZXNzaW5nIGl0IGFzIEpTT04uXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSBpZiB5b3VyIHNlcnZlciBuZWVkcyB0byByZXR1cm46XG4gICAgICogYGBganNcbiAgICAgKiBbJ29uZScsJ3R3byddXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiB3aGljaCBpcyB2dWxuZXJhYmxlIHRvIGF0dGFjaywgeW91ciBzZXJ2ZXIgY2FuIHJldHVybjpcbiAgICAgKiBgYGBqc1xuICAgICAqICldfScsXG4gICAgICogWydvbmUnLCd0d28nXVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQW5ndWxhciB3aWxsIHN0cmlwIHRoZSBwcmVmaXgsIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBKU09OLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyMgQ3Jvc3MgU2l0ZSBSZXF1ZXN0IEZvcmdlcnkgKFhTUkYpIFByb3RlY3Rpb25cbiAgICAgKlxuICAgICAqIFtYU1JGXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Nyb3NzLXNpdGVfcmVxdWVzdF9mb3JnZXJ5KSBpcyBhbiBhdHRhY2sgdGVjaG5pcXVlIGJ5XG4gICAgICogd2hpY2ggdGhlIGF0dGFja2VyIGNhbiB0cmljayBhbiBhdXRoZW50aWNhdGVkIHVzZXIgaW50byB1bmtub3dpbmdseSBleGVjdXRpbmcgYWN0aW9ucyBvbiB5b3VyXG4gICAgICogd2Vic2l0ZS4gQW5ndWxhciBwcm92aWRlcyBhIG1lY2hhbmlzbSB0byBjb3VudGVyIFhTUkYuIFdoZW4gcGVyZm9ybWluZyBYSFIgcmVxdWVzdHMsIHRoZVxuICAgICAqICRodHRwIHNlcnZpY2UgcmVhZHMgYSB0b2tlbiBmcm9tIGEgY29va2llIChieSBkZWZhdWx0LCBgWFNSRi1UT0tFTmApIGFuZCBzZXRzIGl0IGFzIGFuIEhUVFBcbiAgICAgKiBoZWFkZXIgKGBYLVhTUkYtVE9LRU5gKS4gU2luY2Ugb25seSBKYXZhU2NyaXB0IHRoYXQgcnVucyBvbiB5b3VyIGRvbWFpbiBjb3VsZCByZWFkIHRoZVxuICAgICAqIGNvb2tpZSwgeW91ciBzZXJ2ZXIgY2FuIGJlIGFzc3VyZWQgdGhhdCB0aGUgWEhSIGNhbWUgZnJvbSBKYXZhU2NyaXB0IHJ1bm5pbmcgb24geW91ciBkb21haW4uXG4gICAgICogVGhlIGhlYWRlciB3aWxsIG5vdCBiZSBzZXQgZm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cy5cbiAgICAgKlxuICAgICAqIFRvIHRha2UgYWR2YW50YWdlIG9mIHRoaXMsIHlvdXIgc2VydmVyIG5lZWRzIHRvIHNldCBhIHRva2VuIGluIGEgSmF2YVNjcmlwdCByZWFkYWJsZSBzZXNzaW9uXG4gICAgICogY29va2llIGNhbGxlZCBgWFNSRi1UT0tFTmAgb24gdGhlIGZpcnN0IEhUVFAgR0VUIHJlcXVlc3QuIE9uIHN1YnNlcXVlbnQgWEhSIHJlcXVlc3RzIHRoZVxuICAgICAqIHNlcnZlciBjYW4gdmVyaWZ5IHRoYXQgdGhlIGNvb2tpZSBtYXRjaGVzIGBYLVhTUkYtVE9LRU5gIEhUVFAgaGVhZGVyLCBhbmQgdGhlcmVmb3JlIGJlIHN1cmVcbiAgICAgKiB0aGF0IG9ubHkgSmF2YVNjcmlwdCBydW5uaW5nIG9uIHlvdXIgZG9tYWluIGNvdWxkIGhhdmUgc2VudCB0aGUgcmVxdWVzdC4gVGhlIHRva2VuIG11c3QgYmVcbiAgICAgKiB1bmlxdWUgZm9yIGVhY2ggdXNlciBhbmQgbXVzdCBiZSB2ZXJpZmlhYmxlIGJ5IHRoZSBzZXJ2ZXIgKHRvIHByZXZlbnQgdGhlIEphdmFTY3JpcHQgZnJvbVxuICAgICAqIG1ha2luZyB1cCBpdHMgb3duIHRva2VucykuIFdlIHJlY29tbWVuZCB0aGF0IHRoZSB0b2tlbiBpcyBhIGRpZ2VzdCBvZiB5b3VyIHNpdGUnc1xuICAgICAqIGF1dGhlbnRpY2F0aW9uIGNvb2tpZSB3aXRoIGEgW3NhbHRdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NhbHRfKGNyeXB0b2dyYXBoeSYjNDE7KVxuICAgICAqIGZvciBhZGRlZCBzZWN1cml0eS5cbiAgICAgKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBoZWFkZXJzIGNhbiBiZSBzcGVjaWZpZWQgdXNpbmcgdGhlIHhzcmZIZWFkZXJOYW1lIGFuZCB4c3JmQ29va2llTmFtZVxuICAgICAqIHByb3BlcnRpZXMgb2YgZWl0aGVyICRodHRwUHJvdmlkZXIuZGVmYXVsdHMgYXQgY29uZmlnLXRpbWUsICRodHRwLmRlZmF1bHRzIGF0IHJ1bi10aW1lLFxuICAgICAqIG9yIHRoZSBwZXItcmVxdWVzdCBjb25maWcgb2JqZWN0LlxuICAgICAqXG4gICAgICogSW4gb3JkZXIgdG8gcHJldmVudCBjb2xsaXNpb25zIGluIGVudmlyb25tZW50cyB3aGVyZSBtdWx0aXBsZSBBbmd1bGFyIGFwcHMgc2hhcmUgdGhlXG4gICAgICogc2FtZSBkb21haW4gb3Igc3ViZG9tYWluLCB3ZSByZWNvbW1lbmQgdGhhdCBlYWNoIGFwcGxpY2F0aW9uIHVzZXMgdW5pcXVlIGNvb2tpZSBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBPYmplY3QgZGVzY3JpYmluZyB0aGUgcmVxdWVzdCB0byBiZSBtYWRlIGFuZCBob3cgaXQgc2hvdWxkIGJlXG4gICAgICogICAgcHJvY2Vzc2VkLiBUaGUgb2JqZWN0IGhhcyBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqICAgIC0gKiptZXRob2QqKiDigJMgYHtzdHJpbmd9YCDigJMgSFRUUCBtZXRob2QgKGUuZy4gJ0dFVCcsICdQT1NUJywgZXRjKVxuICAgICAqICAgIC0gKip1cmwqKiDigJMgYHtzdHJpbmd8VHJ1c3RlZE9iamVjdH1gIOKAkyBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgb3IgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgYSBjYWxsIHRvIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh1cmwpYC5cbiAgICAgKiAgICAtICoqcGFyYW1zKiog4oCTIGB7T2JqZWN0LjxzdHJpbmd8T2JqZWN0Pn1gIOKAkyBNYXAgb2Ygc3RyaW5ncyBvciBvYmplY3RzIHdoaWNoIHdpbGwgYmUgc2VyaWFsaXplZFxuICAgICAqICAgICAgd2l0aCB0aGUgYHBhcmFtU2VyaWFsaXplcmAgYW5kIGFwcGVuZGVkIGFzIEdFVCBwYXJhbWV0ZXJzLlxuICAgICAqICAgIC0gKipkYXRhKiog4oCTIGB7c3RyaW5nfE9iamVjdH1gIOKAkyBEYXRhIHRvIGJlIHNlbnQgYXMgdGhlIHJlcXVlc3QgbWVzc2FnZSBkYXRhLlxuICAgICAqICAgIC0gKipoZWFkZXJzKiog4oCTIGB7T2JqZWN0fWAg4oCTIE1hcCBvZiBzdHJpbmdzIG9yIGZ1bmN0aW9ucyB3aGljaCByZXR1cm4gc3RyaW5ncyByZXByZXNlbnRpbmdcbiAgICAgKiAgICAgIEhUVFAgaGVhZGVycyB0byBzZW5kIHRvIHRoZSBzZXJ2ZXIuIElmIHRoZSByZXR1cm4gdmFsdWUgb2YgYSBmdW5jdGlvbiBpcyBudWxsLCB0aGVcbiAgICAgKiAgICAgIGhlYWRlciB3aWxsIG5vdCBiZSBzZW50LiBGdW5jdGlvbnMgYWNjZXB0IGEgY29uZmlnIG9iamVjdCBhcyBhbiBhcmd1bWVudC5cbiAgICAgKiAgICAtICoqZXZlbnRIYW5kbGVycyoqIC0gYHtPYmplY3R9YCAtIEV2ZW50IGxpc3RlbmVycyB0byBiZSBib3VuZCB0byB0aGUgWE1MSHR0cFJlcXVlc3Qgb2JqZWN0LlxuICAgICAqICAgICAgVG8gYmluZCBldmVudHMgdG8gdGhlIFhNTEh0dHBSZXF1ZXN0IHVwbG9hZCBvYmplY3QsIHVzZSBgdXBsb2FkRXZlbnRIYW5kbGVyc2AuXG4gICAgICogICAgICBUaGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZCBpbiB0aGUgY29udGV4dCBvZiBhIGAkYXBwbHlgIGJsb2NrLlxuICAgICAqICAgIC0gKip1cGxvYWRFdmVudEhhbmRsZXJzKiogLSBge09iamVjdH1gIC0gRXZlbnQgbGlzdGVuZXJzIHRvIGJlIGJvdW5kIHRvIHRoZSBYTUxIdHRwUmVxdWVzdCB1cGxvYWRcbiAgICAgKiAgICAgIG9iamVjdC4gVG8gYmluZCBldmVudHMgdG8gdGhlIFhNTEh0dHBSZXF1ZXN0IG9iamVjdCwgdXNlIGBldmVudEhhbmRsZXJzYC5cbiAgICAgKiAgICAgIFRoZSBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIGluIHRoZSBjb250ZXh0IG9mIGEgYCRhcHBseWAgYmxvY2suXG4gICAgICogICAgLSAqKnhzcmZIZWFkZXJOYW1lKiog4oCTIGB7c3RyaW5nfWAg4oCTIE5hbWUgb2YgSFRUUCBoZWFkZXIgdG8gcG9wdWxhdGUgd2l0aCB0aGUgWFNSRiB0b2tlbi5cbiAgICAgKiAgICAtICoqeHNyZkNvb2tpZU5hbWUqKiDigJMgYHtzdHJpbmd9YCDigJMgTmFtZSBvZiBjb29raWUgY29udGFpbmluZyB0aGUgWFNSRiB0b2tlbi5cbiAgICAgKiAgICAtICoqdHJhbnNmb3JtUmVxdWVzdCoqIOKAk1xuICAgICAqICAgICAgYHtmdW5jdGlvbihkYXRhLCBoZWFkZXJzR2V0dGVyKXxBcnJheS48ZnVuY3Rpb24oZGF0YSwgaGVhZGVyc0dldHRlcik+fWAg4oCTXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcbiAgICAgKiAgICAgIHJlcXVlc3QgYm9keSBhbmQgaGVhZGVycyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBzZXJpYWxpemVkKSB2ZXJzaW9uLlxuICAgICAqICAgICAgU2VlIHtAbGluayBuZy4kaHR0cCNvdmVycmlkaW5nLXRoZS1kZWZhdWx0LXRyYW5zZm9ybWF0aW9ucy1wZXItcmVxdWVzdFxuICAgICAqICAgICAgT3ZlcnJpZGluZyB0aGUgRGVmYXVsdCBUcmFuc2Zvcm1hdGlvbnN9XG4gICAgICogICAgLSAqKnRyYW5zZm9ybVJlc3BvbnNlKiog4oCTXG4gICAgICogICAgICBge2Z1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyl8QXJyYXkuPGZ1bmN0aW9uKGRhdGEsIGhlYWRlcnNHZXR0ZXIsIHN0YXR1cyk+fWAg4oCTXG4gICAgICogICAgICB0cmFuc2Zvcm0gZnVuY3Rpb24gb3IgYW4gYXJyYXkgb2Ygc3VjaCBmdW5jdGlvbnMuIFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gdGFrZXMgdGhlIGh0dHBcbiAgICAgKiAgICAgIHJlc3BvbnNlIGJvZHksIGhlYWRlcnMgYW5kIHN0YXR1cyBhbmQgcmV0dXJucyBpdHMgdHJhbnNmb3JtZWQgKHR5cGljYWxseSBkZXNlcmlhbGl6ZWQpIHZlcnNpb24uXG4gICAgICogICAgICBTZWUge0BsaW5rIG5nLiRodHRwI292ZXJyaWRpbmctdGhlLWRlZmF1bHQtdHJhbnNmb3JtYXRpb25zLXBlci1yZXF1ZXN0XG4gICAgICogICAgICBPdmVycmlkaW5nIHRoZSBEZWZhdWx0IFRyYW5zZm9ybWF0aW9uc31cbiAgICAgKiAgICAtICoqcGFyYW1TZXJpYWxpemVyKiogLSBge3N0cmluZ3xmdW5jdGlvbihPYmplY3Q8c3RyaW5nLHN0cmluZz4pOnN0cmluZ31gIC0gQSBmdW5jdGlvbiB1c2VkIHRvXG4gICAgICogICAgICBwcmVwYXJlIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgcmVxdWVzdCBwYXJhbWV0ZXJzIChzcGVjaWZpZWQgYXMgYW4gb2JqZWN0KS5cbiAgICAgKiAgICAgIElmIHNwZWNpZmllZCBhcyBzdHJpbmcsIGl0IGlzIGludGVycHJldGVkIGFzIGZ1bmN0aW9uIHJlZ2lzdGVyZWQgd2l0aCB0aGVcbiAgICAgKiAgICAgIHtAbGluayAkaW5qZWN0b3IgJGluamVjdG9yfSwgd2hpY2ggbWVhbnMgeW91IGNhbiBjcmVhdGUgeW91ciBvd24gc2VyaWFsaXplclxuICAgICAqICAgICAgYnkgcmVnaXN0ZXJpbmcgaXQgYXMgYSB7QGxpbmsgYXV0by4kcHJvdmlkZSNzZXJ2aWNlIHNlcnZpY2V9LlxuICAgICAqICAgICAgVGhlIGRlZmF1bHQgc2VyaWFsaXplciBpcyB0aGUge0BsaW5rICRodHRwUGFyYW1TZXJpYWxpemVyICRodHRwUGFyYW1TZXJpYWxpemVyfTtcbiAgICAgKiAgICAgIGFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHRoZSB7QGxpbmsgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2UgJGh0dHBQYXJhbVNlcmlhbGl6ZXJKUUxpa2V9XG4gICAgICogICAgLSAqKmNhY2hlKiog4oCTIGB7Ym9vbGVhbnxPYmplY3R9YCDigJMgQSBib29sZWFuIHZhbHVlIG9yIG9iamVjdCBjcmVhdGVkIHdpdGhcbiAgICAgKiAgICAgIHtAbGluayBuZy4kY2FjaGVGYWN0b3J5IGAkY2FjaGVGYWN0b3J5YH0gdG8gZW5hYmxlIG9yIGRpc2FibGUgY2FjaGluZyBvZiB0aGUgSFRUUCByZXNwb25zZS5cbiAgICAgKiAgICAgIFNlZSB7QGxpbmsgJGh0dHAjY2FjaGluZyAkaHR0cCBDYWNoaW5nfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKiAgICAtICoqdGltZW91dCoqIOKAkyBge251bWJlcnxQcm9taXNlfWAg4oCTIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzLCBvciB7QGxpbmsgbmcuJHEgcHJvbWlzZX1cbiAgICAgKiAgICAgIHRoYXQgc2hvdWxkIGFib3J0IHRoZSByZXF1ZXN0IHdoZW4gcmVzb2x2ZWQuXG4gICAgICogICAgLSAqKndpdGhDcmVkZW50aWFscyoqIC0gYHtib29sZWFufWAgLSB3aGV0aGVyIHRvIHNldCB0aGUgYHdpdGhDcmVkZW50aWFsc2AgZmxhZyBvbiB0aGVcbiAgICAgKiAgICAgIFhIUiBvYmplY3QuIFNlZSBbcmVxdWVzdHMgd2l0aCBjcmVkZW50aWFsc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvSFRUUC9BY2Nlc3NfY29udHJvbF9DT1JTI1JlcXVlc3RzX3dpdGhfY3JlZGVudGlhbHMpXG4gICAgICogICAgICBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKiAgICAtICoqcmVzcG9uc2VUeXBlKiogLSBge3N0cmluZ31gIC0gc2VlXG4gICAgICogICAgICBbWE1MSHR0cFJlcXVlc3QucmVzcG9uc2VUeXBlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvWE1MSHR0cFJlcXVlc3QjeG1saHR0cHJlcXVlc3QtcmVzcG9uc2V0eXBlKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gUmV0dXJucyBhIHtAbGluayBuZy4kcSBgUHJvbWlzZX1gIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB0byBhIHJlc3BvbnNlIG9iamVjdFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiB0aGUgcmVxdWVzdCBzdWNjZWVkcyBvciBmYWlscy5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtBcnJheS48T2JqZWN0Pn0gcGVuZGluZ1JlcXVlc3RzIEFycmF5IG9mIGNvbmZpZyBvYmplY3RzIGZvciBjdXJyZW50bHkgcGVuZGluZ1xuICAgICAqICAgcmVxdWVzdHMuIFRoaXMgaXMgcHJpbWFyaWx5IG1lYW50IHRvIGJlIHVzZWQgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cbiAgICAgKlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbjxleGFtcGxlIG1vZHVsZT1cImh0dHBFeGFtcGxlXCIgbmFtZT1cImh0dHAtc2VydmljZVwiPlxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgPGRpdiBuZy1jb250cm9sbGVyPVwiRmV0Y2hDb250cm9sbGVyXCI+XG4gICAgPHNlbGVjdCBuZy1tb2RlbD1cIm1ldGhvZFwiIGFyaWEtbGFiZWw9XCJSZXF1ZXN0IG1ldGhvZFwiPlxuICAgICAgPG9wdGlvbj5HRVQ8L29wdGlvbj5cbiAgICAgIDxvcHRpb24+SlNPTlA8L29wdGlvbj5cbiAgICA8L3NlbGVjdD5cbiAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVybFwiIHNpemU9XCI4MFwiIGFyaWEtbGFiZWw9XCJVUkxcIiAvPlxuICAgIDxidXR0b24gaWQ9XCJmZXRjaGJ0blwiIG5nLWNsaWNrPVwiZmV0Y2goKVwiPmZldGNoPC9idXR0b24+PGJyPlxuICAgIDxidXR0b24gaWQ9XCJzYW1wbGVnZXRidG5cIiBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdHRVQnLCAnaHR0cC1oZWxsby5odG1sJylcIj5TYW1wbGUgR0VUPC9idXR0b24+XG4gICAgPGJ1dHRvbiBpZD1cInNhbXBsZWpzb25wYnRuXCJcbiAgICAgIG5nLWNsaWNrPVwidXBkYXRlTW9kZWwoJ0pTT05QJyxcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHBzOi8vYW5ndWxhcmpzLm9yZy9ncmVldC5waHA/bmFtZT1TdXBlciUyMEhlcm8nKVwiPlxuICAgICAgU2FtcGxlIEpTT05QXG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvbiBpZD1cImludmFsaWRqc29ucGJ0blwiXG4gICAgICBuZy1jbGljaz1cInVwZGF0ZU1vZGVsKCdKU09OUCcsICdodHRwczovL2FuZ3VsYXJqcy5vcmcvZG9lc250ZXhpc3QnKVwiPlxuICAgICAgICBJbnZhbGlkIEpTT05QXG4gICAgICA8L2J1dHRvbj5cbiAgICA8cHJlPmh0dHAgc3RhdHVzIGNvZGU6IHt7c3RhdHVzfX08L3ByZT5cbiAgICA8cHJlPmh0dHAgcmVzcG9uc2UgZGF0YToge3tkYXRhfX08L3ByZT5cbiAgPC9kaXY+XG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gIGFuZ3VsYXIubW9kdWxlKCdodHRwRXhhbXBsZScsIFtdKVxuICAgIC5jb25maWcoWyckc2NlRGVsZWdhdGVQcm92aWRlcicsIGZ1bmN0aW9uKCRzY2VEZWxlZ2F0ZVByb3ZpZGVyKSB7XG4gICAgICAvLyBXZSBtdXN0IHdoaXRlbGlzdCB0aGUgSlNPTlAgZW5kcG9pbnQgdGhhdCB3ZSBhcmUgdXNpbmcgdG8gc2hvdyB0aGF0IHdlIHRydXN0IGl0XG4gICAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdChbXG4gICAgICAgICdzZWxmJyxcbiAgICAgICAgJ2h0dHBzOi8vYW5ndWxhcmpzLm9yZy8qKidcbiAgICAgIF0pO1xuICAgIH1dKVxuICAgIC5jb250cm9sbGVyKCdGZXRjaENvbnRyb2xsZXInLCBbJyRzY29wZScsICckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsXG4gICAgICBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICAkc2NvcGUubWV0aG9kID0gJ0dFVCc7XG4gICAgICAgICRzY29wZS51cmwgPSAnaHR0cC1oZWxsby5odG1sJztcblxuICAgICAgICAkc2NvcGUuZmV0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuY29kZSA9IG51bGw7XG4gICAgICAgICAgJHNjb3BlLnJlc3BvbnNlID0gbnVsbDtcblxuICAgICAgICAgICRodHRwKHttZXRob2Q6ICRzY29wZS5tZXRob2QsIHVybDogJHNjb3BlLnVybCwgY2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuXG4gICAgICAgICAgICB0aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSByZXNwb25zZS5zdGF0dXM7XG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kYXRhID0gcmVzcG9uc2UuZGF0YSB8fCAnUmVxdWVzdCBmYWlsZWQnO1xuICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsKSB7XG4gICAgICAgICAgJHNjb3BlLm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgICAkc2NvcGUudXJsID0gdXJsO1xuICAgICAgICB9O1xuICAgICAgfV0pO1xuPC9maWxlPlxuPGZpbGUgbmFtZT1cImh0dHAtaGVsbG8uaHRtbFwiPlxuICBIZWxsbywgJGh0dHAhXG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gIHZhciBzdGF0dXMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3N0YXR1cycpKTtcbiAgdmFyIGRhdGEgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2RhdGEnKSk7XG4gIHZhciBmZXRjaEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2ZldGNoYnRuJykpO1xuICB2YXIgc2FtcGxlR2V0QnRuID0gZWxlbWVudChieS5pZCgnc2FtcGxlZ2V0YnRuJykpO1xuICB2YXIgaW52YWxpZEpzb25wQnRuID0gZWxlbWVudChieS5pZCgnaW52YWxpZGpzb25wYnRuJykpO1xuXG4gIGl0KCdzaG91bGQgbWFrZSBhbiB4aHIgR0VUIHJlcXVlc3QnLCBmdW5jdGlvbigpIHtcbiAgICBzYW1wbGVHZXRCdG4uY2xpY2soKTtcbiAgICBmZXRjaEJ0bi5jbGljaygpO1xuICAgIGV4cGVjdChzdGF0dXMuZ2V0VGV4dCgpKS50b01hdGNoKCcyMDAnKTtcbiAgICBleHBlY3QoZGF0YS5nZXRUZXh0KCkpLnRvTWF0Y2goL0hlbGxvLCBcXCRodHRwIS8pO1xuICB9KTtcblxuLy8gQ29tbWVudGVkIG91dCBkdWUgdG8gZmxha2VzLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvOTE4NVxuLy8gaXQoJ3Nob3VsZCBtYWtlIGEgSlNPTlAgcmVxdWVzdCB0byBhbmd1bGFyanMub3JnJywgZnVuY3Rpb24oKSB7XG4vLyAgIHZhciBzYW1wbGVKc29ucEJ0biA9IGVsZW1lbnQoYnkuaWQoJ3NhbXBsZWpzb25wYnRuJykpO1xuLy8gICBzYW1wbGVKc29ucEJ0bi5jbGljaygpO1xuLy8gICBmZXRjaEJ0bi5jbGljaygpO1xuLy8gICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMjAwJyk7XG4vLyAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgvU3VwZXIgSGVybyEvKTtcbi8vIH0pO1xuXG4gIGl0KCdzaG91bGQgbWFrZSBKU09OUCByZXF1ZXN0IHRvIGludmFsaWQgVVJMIGFuZCBpbnZva2UgdGhlIGVycm9yIGhhbmRsZXInLFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgaW52YWxpZEpzb25wQnRuLmNsaWNrKCk7XG4gICAgZmV0Y2hCdG4uY2xpY2soKTtcbiAgICBleHBlY3Qoc3RhdHVzLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xuICAgIGV4cGVjdChkYXRhLmdldFRleHQoKSkudG9NYXRjaCgnUmVxdWVzdCBmYWlsZWQnKTtcbiAgfSk7XG48L2ZpbGU+XG48L2V4YW1wbGU+XG4gICAgICovXG4gICAgZnVuY3Rpb24gJGh0dHAocmVxdWVzdENvbmZpZykge1xuXG4gICAgICBpZiAoIWlzT2JqZWN0KHJlcXVlc3RDb25maWcpKSB7XG4gICAgICAgIHRocm93IG1pbkVycignJGh0dHAnKSgnYmFkcmVxJywgJ0h0dHAgcmVxdWVzdCBjb25maWd1cmF0aW9uIG11c3QgYmUgYW4gb2JqZWN0LiAgUmVjZWl2ZWQ6IHswfScsIHJlcXVlc3RDb25maWcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzU3RyaW5nKCRzY2UudmFsdWVPZihyZXF1ZXN0Q29uZmlnLnVybCkpKSB7XG4gICAgICAgIHRocm93IG1pbkVycignJGh0dHAnKSgnYmFkcmVxJywgJ0h0dHAgcmVxdWVzdCBjb25maWd1cmF0aW9uIHVybCBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgJHNjZSB0cnVzdGVkIG9iamVjdC4gIFJlY2VpdmVkOiB7MH0nLCByZXF1ZXN0Q29uZmlnLnVybCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb25maWcgPSBleHRlbmQoe1xuICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBkZWZhdWx0cy50cmFuc2Zvcm1SZXF1ZXN0LFxuICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZTogZGVmYXVsdHMudHJhbnNmb3JtUmVzcG9uc2UsXG4gICAgICAgIHBhcmFtU2VyaWFsaXplcjogZGVmYXVsdHMucGFyYW1TZXJpYWxpemVyLFxuICAgICAgICBqc29ucENhbGxiYWNrUGFyYW06IGRlZmF1bHRzLmpzb25wQ2FsbGJhY2tQYXJhbVxuICAgICAgfSwgcmVxdWVzdENvbmZpZyk7XG5cbiAgICAgIGNvbmZpZy5oZWFkZXJzID0gbWVyZ2VIZWFkZXJzKHJlcXVlc3RDb25maWcpO1xuICAgICAgY29uZmlnLm1ldGhvZCA9IHVwcGVyY2FzZShjb25maWcubWV0aG9kKTtcbiAgICAgIGNvbmZpZy5wYXJhbVNlcmlhbGl6ZXIgPSBpc1N0cmluZyhjb25maWcucGFyYW1TZXJpYWxpemVyKSA/XG4gICAgICAgICAgJGluamVjdG9yLmdldChjb25maWcucGFyYW1TZXJpYWxpemVyKSA6IGNvbmZpZy5wYXJhbVNlcmlhbGl6ZXI7XG5cbiAgICAgICRicm93c2VyLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtcblxuICAgICAgdmFyIHJlcXVlc3RJbnRlcmNlcHRvcnMgPSBbXTtcbiAgICAgIHZhciByZXNwb25zZUludGVyY2VwdG9ycyA9IFtdO1xuICAgICAgdmFyIHByb21pc2UgPSAkcS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgICAgIC8vIGFwcGx5IGludGVyY2VwdG9yc1xuICAgICAgZm9yRWFjaChyZXZlcnNlZEludGVyY2VwdG9ycywgZnVuY3Rpb24oaW50ZXJjZXB0b3IpIHtcbiAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlcXVlc3QgfHwgaW50ZXJjZXB0b3IucmVxdWVzdEVycm9yKSB7XG4gICAgICAgICAgcmVxdWVzdEludGVyY2VwdG9ycy51bnNoaWZ0KGludGVyY2VwdG9yLnJlcXVlc3QsIGludGVyY2VwdG9yLnJlcXVlc3RFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludGVyY2VwdG9yLnJlc3BvbnNlIHx8IGludGVyY2VwdG9yLnJlc3BvbnNlRXJyb3IpIHtcbiAgICAgICAgICByZXNwb25zZUludGVyY2VwdG9ycy5wdXNoKGludGVyY2VwdG9yLnJlc3BvbnNlLCBpbnRlcmNlcHRvci5yZXNwb25zZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHByb21pc2UgPSBjaGFpbkludGVyY2VwdG9ycyhwcm9taXNlLCByZXF1ZXN0SW50ZXJjZXB0b3JzKTtcbiAgICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oc2VydmVyUmVxdWVzdCk7XG4gICAgICBwcm9taXNlID0gY2hhaW5JbnRlcmNlcHRvcnMocHJvbWlzZSwgcmVzcG9uc2VJbnRlcmNlcHRvcnMpO1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UuZmluYWxseShjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCk7XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuXG5cbiAgICAgIGZ1bmN0aW9uIGNoYWluSW50ZXJjZXB0b3JzKHByb21pc2UsIGludGVyY2VwdG9ycykge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnRlcmNlcHRvcnMubGVuZ3RoOyBpIDwgaWk7KSB7XG4gICAgICAgICAgdmFyIHRoZW5GbiA9IGludGVyY2VwdG9yc1tpKytdO1xuICAgICAgICAgIHZhciByZWplY3RGbiA9IGludGVyY2VwdG9yc1tpKytdO1xuXG4gICAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbih0aGVuRm4sIHJlamVjdEZuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyY2VwdG9ycy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdCgpIHtcbiAgICAgICAgJGJyb3dzZXIuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChub29wKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZXhlY3V0ZUhlYWRlckZucyhoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgdmFyIGhlYWRlckNvbnRlbnQsIHByb2Nlc3NlZEhlYWRlcnMgPSB7fTtcblxuICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKGhlYWRlckZuLCBoZWFkZXIpIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbihoZWFkZXJGbikpIHtcbiAgICAgICAgICAgIGhlYWRlckNvbnRlbnQgPSBoZWFkZXJGbihjb25maWcpO1xuICAgICAgICAgICAgaWYgKGhlYWRlckNvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzZWRIZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJGbjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWRIZWFkZXJzO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBtZXJnZUhlYWRlcnMoY29uZmlnKSB7XG4gICAgICAgIHZhciBkZWZIZWFkZXJzID0gZGVmYXVsdHMuaGVhZGVycyxcbiAgICAgICAgICAgIHJlcUhlYWRlcnMgPSBleHRlbmQoe30sIGNvbmZpZy5oZWFkZXJzKSxcbiAgICAgICAgICAgIGRlZkhlYWRlck5hbWUsIGxvd2VyY2FzZURlZkhlYWRlck5hbWUsIHJlcUhlYWRlck5hbWU7XG5cbiAgICAgICAgZGVmSGVhZGVycyA9IGV4dGVuZCh7fSwgZGVmSGVhZGVycy5jb21tb24sIGRlZkhlYWRlcnNbbG93ZXJjYXNlKGNvbmZpZy5tZXRob2QpXSk7XG5cbiAgICAgICAgLy8gdXNpbmcgZm9yLWluIGluc3RlYWQgb2YgZm9yRWFjaCB0byBhdm9pZCB1bm5lY2Vzc2FyeSBpdGVyYXRpb24gYWZ0ZXIgaGVhZGVyIGhhcyBiZWVuIGZvdW5kXG4gICAgICAgIGRlZmF1bHRIZWFkZXJzSXRlcmF0aW9uOlxuICAgICAgICBmb3IgKGRlZkhlYWRlck5hbWUgaW4gZGVmSGVhZGVycykge1xuICAgICAgICAgIGxvd2VyY2FzZURlZkhlYWRlck5hbWUgPSBsb3dlcmNhc2UoZGVmSGVhZGVyTmFtZSk7XG5cbiAgICAgICAgICBmb3IgKHJlcUhlYWRlck5hbWUgaW4gcmVxSGVhZGVycykge1xuICAgICAgICAgICAgaWYgKGxvd2VyY2FzZShyZXFIZWFkZXJOYW1lKSA9PT0gbG93ZXJjYXNlRGVmSGVhZGVyTmFtZSkge1xuICAgICAgICAgICAgICBjb250aW51ZSBkZWZhdWx0SGVhZGVyc0l0ZXJhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXFIZWFkZXJzW2RlZkhlYWRlck5hbWVdID0gZGVmSGVhZGVyc1tkZWZIZWFkZXJOYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGV4ZWN1dGUgaWYgaGVhZGVyIHZhbHVlIGlzIGEgZnVuY3Rpb24gZm9yIG1lcmdlZCBoZWFkZXJzXG4gICAgICAgIHJldHVybiBleGVjdXRlSGVhZGVyRm5zKHJlcUhlYWRlcnMsIHNoYWxsb3dDb3B5KGNvbmZpZykpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXJ2ZXJSZXF1ZXN0KGNvbmZpZykge1xuICAgICAgICB2YXIgaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xuICAgICAgICB2YXIgcmVxRGF0YSA9IHRyYW5zZm9ybURhdGEoY29uZmlnLmRhdGEsIGhlYWRlcnNHZXR0ZXIoaGVhZGVycyksIHVuZGVmaW5lZCwgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3QpO1xuXG4gICAgICAgIC8vIHN0cmlwIGNvbnRlbnQtdHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgICAgICBpZiAoaXNVbmRlZmluZWQocmVxRGF0YSkpIHtcbiAgICAgICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBoZWFkZXIpIHtcbiAgICAgICAgICAgIGlmIChsb3dlcmNhc2UoaGVhZGVyKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAgICAgZGVsZXRlIGhlYWRlcnNbaGVhZGVyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSAmJiAhaXNVbmRlZmluZWQoZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzKSkge1xuICAgICAgICAgIGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgPSBkZWZhdWx0cy53aXRoQ3JlZGVudGlhbHM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZW5kIHJlcXVlc3RcbiAgICAgICAgcmV0dXJuIHNlbmRSZXEoY29uZmlnLCByZXFEYXRhKS50aGVuKHRyYW5zZm9ybVJlc3BvbnNlLCB0cmFuc2Zvcm1SZXNwb25zZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIC8vIG1ha2UgYSBjb3B5IHNpbmNlIHRoZSByZXNwb25zZSBtdXN0IGJlIGNhY2hlYWJsZVxuICAgICAgICB2YXIgcmVzcCA9IGV4dGVuZCh7fSwgcmVzcG9uc2UpO1xuICAgICAgICByZXNwLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKHJlc3BvbnNlLmRhdGEsIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2UpO1xuICAgICAgICByZXR1cm4gKGlzU3VjY2VzcyhyZXNwb25zZS5zdGF0dXMpKVxuICAgICAgICAgID8gcmVzcFxuICAgICAgICAgIDogJHEucmVqZWN0KHJlc3ApO1xuICAgICAgfVxuICAgIH1cblxuICAgICRodHRwLnBlbmRpbmdSZXF1ZXN0cyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI2dldFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYEdFVGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRPYmplY3R9IHVybCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhbiBvYmplY3QgY3JlYXRlZCBieSBhIGNhbGwgdG8gYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUgaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJGh0dHAjdXNhZ2VcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaHR0cCNkZWxldGVcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBERUxFVEVgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xUcnVzdGVkT2JqZWN0fSB1cmwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZDtcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgYSBjYWxsIHRvIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh1cmwpYC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy9zZXJ2aWNlLyRodHRwI3VzYWdlXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjaGVhZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYEhFQURgIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xUcnVzdGVkT2JqZWN0fSB1cmwgQWJzb2x1dGUgb3IgcmVsYXRpdmUgVVJMIG9mIHRoZSByZXNvdXJjZSB0aGF0IGlzIGJlaW5nIHJlcXVlc3RlZDtcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgYW4gb2JqZWN0IGNyZWF0ZWQgYnkgYSBjYWxsIHRvIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybCh1cmwpYC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9iamVjdC4gU2VlIGh0dHBzOi8vZG9jcy5hbmd1bGFyanMub3JnL2FwaS9uZy9zZXJ2aWNlLyRodHRwI3VzYWdlXG4gICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJGh0dHAjanNvbnBcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBKU09OUGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCwgc2luY2UgSlNPTlAgcmVxdWVzdHMgYXJlIHNlbnNpdGl2ZSBiZWNhdXNlIHRoZSByZXNwb25zZSBpcyBnaXZlbiBmdWxsIGFjY2VzcyB0byB0aGUgYnJvd3NlcixcbiAgICAgKiB0aGUgdXJsIG11c3QgYmUgZGVjbGFyZWQsIHZpYSB7QGxpbmsgJHNjZX0gYXMgYSB0cnVzdGVkIHJlc291cmNlIFVSTC5cbiAgICAgKiBZb3UgY2FuIHRydXN0IGEgVVJMIGJ5IGFkZGluZyBpdCB0byB0aGUgd2hpdGVsaXN0IHZpYVxuICAgICAqIHtAbGluayAkc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCAgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0YH0gb3JcbiAgICAgKiBieSBleHBsaWNpdGx5IHRydXN0aW5nIHRoZSBVUkwgdmlhIHtAbGluayAkc2NlI3RydXN0QXNSZXNvdXJjZVVybCBgJHNjZS50cnVzdEFzUmVzb3VyY2VVcmwodXJsKWB9LlxuICAgICAqXG4gICAgICogWW91IHNob3VsZCBhdm9pZCBnZW5lcmF0aW5nIHRoZSBVUkwgZm9yIHRoZSBKU09OUCByZXF1ZXN0IGZyb20gdXNlciBwcm92aWRlZCBkYXRhLlxuICAgICAqIFByb3ZpZGUgYWRkaXRpb25hbCBxdWVyeSBwYXJhbWV0ZXJzIHZpYSBgcGFyYW1zYCBwcm9wZXJ0eSBvZiB0aGUgYGNvbmZpZ2AgcGFyYW1ldGVyLCByYXRoZXIgdGhhblxuICAgICAqIG1vZGlmeWluZyB0aGUgVVJMIGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEpTT05QIHJlcXVlc3RzIG11c3Qgc3BlY2lmeSBhIGNhbGxiYWNrIHRvIGJlIHVzZWQgaW4gdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci4gVGhpcyBjYWxsYmFja1xuICAgICAqIGlzIHBhc3NlZCBhcyBhIHF1ZXJ5IHBhcmFtZXRlciBpbiB0aGUgcmVxdWVzdC4gWW91IG11c3Qgc3BlY2lmeSB0aGUgbmFtZSBvZiB0aGlzIHBhcmFtZXRlciBieVxuICAgICAqIHNldHRpbmcgdGhlIGBqc29ucENhbGxiYWNrUGFyYW1gIHByb3BlcnR5IG9uIHRoZSByZXF1ZXN0IGNvbmZpZyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiAkaHR0cC5qc29ucCgnc29tZS90cnVzdGVkL3VybCcsIHtqc29ucENhbGxiYWNrUGFyYW06ICdjYWxsYmFjayd9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIHNwZWNpZnkgYSBkZWZhdWx0IGNhbGxiYWNrIHBhcmFtZXRlciBuYW1lIGluIGAkaHR0cC5kZWZhdWx0cy5qc29ucENhbGxiYWNrUGFyYW1gLlxuICAgICAqIEluaXRpYWxseSB0aGlzIGlzIHNldCB0byBgJ2NhbGxiYWNrJ2AuXG4gICAgICpcbiAgICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gICAgICogWW91IGNhbiBubyBsb25nZXIgdXNlIHRoZSBgSlNPTl9DQUxMQkFDS2Agc3RyaW5nIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHNwZWNpZnlpbmcgd2hlcmUgdGhlIGNhbGxiYWNrXG4gICAgICogcGFyYW1ldGVyIHZhbHVlIHNob3VsZCBnby5cbiAgICAgKiA8L2Rpdj5cbiAgICAgKlxuICAgICAqIElmIHlvdSB3b3VsZCBsaWtlIHRvIGN1c3RvbWlzZSB3aGVyZSBhbmQgaG93IHRoZSBjYWxsYmFja3MgYXJlIHN0b3JlZCB0aGVuIHRyeSBvdmVycmlkaW5nXG4gICAgICogb3IgZGVjb3JhdGluZyB0aGUge0BsaW5rICRqc29ucENhbGxiYWNrc30gc2VydmljZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRPYmplY3R9IHVybCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgb2YgdGhlIHJlc291cmNlIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkO1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBhbiBvYmplY3QgY3JlYXRlZCBieSBhIGNhbGwgdG8gYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHVybClgLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUgaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJGh0dHAjdXNhZ2VcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcbiAgICAgKi9cbiAgICBjcmVhdGVTaG9ydE1ldGhvZHMoJ2dldCcsICdkZWxldGUnLCAnaGVhZCcsICdqc29ucCcpO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI3Bvc3RcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IG1ldGhvZCB0byBwZXJmb3JtIGBQT1NUYCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBSZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgc3BlY2lmeWluZyB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb25maWcgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QuIFNlZSBodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcvc2VydmljZS8kaHR0cCN1c2FnZVxuICAgICAqIEByZXR1cm5zIHtIdHRwUHJvbWlzZX0gRnV0dXJlIG9iamVjdFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRodHRwI3B1dFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBVVGAgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMIHNwZWNpZnlpbmcgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSByZXF1ZXN0XG4gICAgICogQHBhcmFtIHsqfSBkYXRhIFJlcXVlc3QgY29udGVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUgaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJGh0dHAjdXNhZ2VcbiAgICAgKiBAcmV0dXJucyB7SHR0cFByb21pc2V9IEZ1dHVyZSBvYmplY3RcbiAgICAgKi9cblxuICAgICAvKipcbiAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgKiBAbmFtZSAkaHR0cCNwYXRjaFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogU2hvcnRjdXQgbWV0aG9kIHRvIHBlcmZvcm0gYFBBVENIYCByZXF1ZXN0LlxuICAgICAgKlxuICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBzcGVjaWZ5aW5nIHRoZSBkZXN0aW5hdGlvbiBvZiB0aGUgcmVxdWVzdFxuICAgICAgKiBAcGFyYW0geyp9IGRhdGEgUmVxdWVzdCBjb250ZW50XG4gICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb2JqZWN0LiBTZWUgaHR0cHM6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nL3NlcnZpY2UvJGh0dHAjdXNhZ2VcbiAgICAgICogQHJldHVybnMge0h0dHBQcm9taXNlfSBGdXR1cmUgb2JqZWN0XG4gICAgICAqL1xuICAgIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKCdwb3N0JywgJ3B1dCcsICdwYXRjaCcpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmdkb2MgcHJvcGVydHlcbiAgICAgICAgICogQG5hbWUgJGh0dHAjZGVmYXVsdHNcbiAgICAgICAgICpcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAqIFJ1bnRpbWUgZXF1aXZhbGVudCBvZiB0aGUgYCRodHRwUHJvdmlkZXIuZGVmYXVsdHNgIHByb3BlcnR5LiBBbGxvd3MgY29uZmlndXJhdGlvbiBvZlxuICAgICAgICAgKiBkZWZhdWx0IGhlYWRlcnMsIHdpdGhDcmVkZW50aWFscyBhcyB3ZWxsIGFzIHJlcXVlc3QgYW5kIHJlc3BvbnNlIHRyYW5zZm9ybWF0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogU2VlIFwiU2V0dGluZyBIVFRQIEhlYWRlcnNcIiBhbmQgXCJUcmFuc2Zvcm1pbmcgUmVxdWVzdHMgYW5kIFJlc3BvbnNlc1wiIHNlY3Rpb25zIGFib3ZlLlxuICAgICAgICAgKi9cbiAgICAkaHR0cC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuXG5cbiAgICByZXR1cm4gJGh0dHA7XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kcyhuYW1lcykge1xuICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgJGh0dHBbbmFtZV0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgICAgICAgIHJldHVybiAkaHR0cChleHRlbmQoe30sIGNvbmZpZyB8fCB7fSwge1xuICAgICAgICAgICAgbWV0aG9kOiBuYW1lLFxuICAgICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNob3J0TWV0aG9kc1dpdGhEYXRhKG5hbWUpIHtcbiAgICAgIGZvckVhY2goYXJndW1lbnRzLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICRodHRwW25hbWVdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICAgICAgICByZXR1cm4gJGh0dHAoZXh0ZW5kKHt9LCBjb25maWcgfHwge30sIHtcbiAgICAgICAgICAgIG1ldGhvZDogbmFtZSxcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogTWFrZXMgdGhlIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiAhISEgQUNDRVNTRVMgQ0xPU1VSRSBWQVJTOlxuICAgICAqICRodHRwQmFja2VuZCwgZGVmYXVsdHMsICRsb2csICRyb290U2NvcGUsIGRlZmF1bHRDYWNoZSwgJGh0dHAucGVuZGluZ1JlcXVlc3RzXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2VuZFJlcShjb25maWcsIHJlcURhdGEpIHtcbiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCksXG4gICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UsXG4gICAgICAgICAgY2FjaGUsXG4gICAgICAgICAgY2FjaGVkUmVzcCxcbiAgICAgICAgICByZXFIZWFkZXJzID0gY29uZmlnLmhlYWRlcnMsXG4gICAgICAgICAgaXNKc29ucCA9IGxvd2VyY2FzZShjb25maWcubWV0aG9kKSA9PT0gJ2pzb25wJyxcbiAgICAgICAgICB1cmwgPSBjb25maWcudXJsO1xuXG4gICAgICBpZiAoaXNKc29ucCkge1xuICAgICAgICAvLyBKU09OUCBpcyBhIHByZXR0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHdoZXJlIHdlJ3JlIGFsbG93aW5nIGEgc2NyaXB0IHRvIGhhdmUgZnVsbCBhY2Nlc3MgdG9cbiAgICAgICAgLy8gb3VyIERPTSBhbmQgSlMgc3BhY2UuICBTbyB3ZSByZXF1aXJlIHRoYXQgdGhlIFVSTCBzYXRpc2ZpZXMgU0NFLlJFU09VUkNFX1VSTC5cbiAgICAgICAgdXJsID0gJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodXJsKTtcbiAgICAgIH0gZWxzZSBpZiAoIWlzU3RyaW5nKHVybCkpIHtcbiAgICAgICAgLy8gSWYgaXQgaXMgbm90IGEgc3RyaW5nIHRoZW4gdGhlIFVSTCBtdXN0IGJlIGEgJHNjZSB0cnVzdGVkIG9iamVjdFxuICAgICAgICB1cmwgPSAkc2NlLnZhbHVlT2YodXJsKTtcbiAgICAgIH1cblxuICAgICAgdXJsID0gYnVpbGRVcmwodXJsLCBjb25maWcucGFyYW1TZXJpYWxpemVyKGNvbmZpZy5wYXJhbXMpKTtcblxuICAgICAgaWYgKGlzSnNvbnApIHtcbiAgICAgICAgLy8gQ2hlY2sgdGhlIHVybCBhbmQgYWRkIHRoZSBKU09OUCBjYWxsYmFjayBwbGFjZWhvbGRlclxuICAgICAgICB1cmwgPSBzYW5pdGl6ZUpzb25wQ2FsbGJhY2tQYXJhbSh1cmwsIGNvbmZpZy5qc29ucENhbGxiYWNrUGFyYW0pO1xuICAgICAgfVxuXG4gICAgICAkaHR0cC5wZW5kaW5nUmVxdWVzdHMucHVzaChjb25maWcpO1xuICAgICAgcHJvbWlzZS50aGVuKHJlbW92ZVBlbmRpbmdSZXEsIHJlbW92ZVBlbmRpbmdSZXEpO1xuXG4gICAgICBpZiAoKGNvbmZpZy5jYWNoZSB8fCBkZWZhdWx0cy5jYWNoZSkgJiYgY29uZmlnLmNhY2hlICE9PSBmYWxzZSAmJlxuICAgICAgICAgIChjb25maWcubWV0aG9kID09PSAnR0VUJyB8fCBjb25maWcubWV0aG9kID09PSAnSlNPTlAnKSkge1xuICAgICAgICBjYWNoZSA9IGlzT2JqZWN0KGNvbmZpZy5jYWNoZSkgPyBjb25maWcuY2FjaGVcbiAgICAgICAgICAgIDogaXNPYmplY3QoLyoqIEB0eXBlIHs/fSAqLyAoZGVmYXVsdHMpLmNhY2hlKVxuICAgICAgICAgICAgICA/IC8qKiBAdHlwZSB7P30gKi8gKGRlZmF1bHRzKS5jYWNoZVxuICAgICAgICAgICAgICA6IGRlZmF1bHRDYWNoZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGNhY2hlZFJlc3AgPSBjYWNoZS5nZXQodXJsKTtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChjYWNoZWRSZXNwKSkge1xuICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKGNhY2hlZFJlc3ApKSB7XG4gICAgICAgICAgICAvLyBjYWNoZWQgcmVxdWVzdCBoYXMgYWxyZWFkeSBiZWVuIHNlbnQsIGJ1dCB0aGVyZSBpcyBubyByZXNwb25zZSB5ZXRcbiAgICAgICAgICAgIGNhY2hlZFJlc3AudGhlbihyZXNvbHZlUHJvbWlzZVdpdGhSZXN1bHQsIHJlc29sdmVQcm9taXNlV2l0aFJlc3VsdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNlcnZpbmcgZnJvbSBjYWNoZVxuICAgICAgICAgICAgaWYgKGlzQXJyYXkoY2FjaGVkUmVzcCkpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcFsxXSwgY2FjaGVkUmVzcFswXSwgc2hhbGxvd0NvcHkoY2FjaGVkUmVzcFsyXSksIGNhY2hlZFJlc3BbM10sIGNhY2hlZFJlc3BbNF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoY2FjaGVkUmVzcCwgMjAwLCB7fSwgJ09LJywgJ2NvbXBsZXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHB1dCB0aGUgcHJvbWlzZSBmb3IgdGhlIG5vbi10cmFuc2Zvcm1lZCByZXNwb25zZSBpbnRvIGNhY2hlIGFzIGEgcGxhY2Vob2xkZXJcbiAgICAgICAgICBjYWNoZS5wdXQodXJsLCBwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8vIGlmIHdlIHdvbid0IGhhdmUgdGhlIHJlc3BvbnNlIGluIGNhY2hlLCBzZXQgdGhlIHhzcmYgaGVhZGVycyBhbmRcbiAgICAgIC8vIHNlbmQgdGhlIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmRcbiAgICAgIGlmIChpc1VuZGVmaW5lZChjYWNoZWRSZXNwKSkge1xuICAgICAgICB2YXIgeHNyZlZhbHVlID0gdXJsSXNTYW1lT3JpZ2luKGNvbmZpZy51cmwpXG4gICAgICAgICAgICA/ICQkY29va2llUmVhZGVyKClbY29uZmlnLnhzcmZDb29raWVOYW1lIHx8IGRlZmF1bHRzLnhzcmZDb29raWVOYW1lXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgICByZXFIZWFkZXJzWyhjb25maWcueHNyZkhlYWRlck5hbWUgfHwgZGVmYXVsdHMueHNyZkhlYWRlck5hbWUpXSA9IHhzcmZWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgICRodHRwQmFja2VuZChjb25maWcubWV0aG9kLCB1cmwsIHJlcURhdGEsIGRvbmUsIHJlcUhlYWRlcnMsIGNvbmZpZy50aW1lb3V0LFxuICAgICAgICAgICAgY29uZmlnLndpdGhDcmVkZW50aWFscywgY29uZmlnLnJlc3BvbnNlVHlwZSxcbiAgICAgICAgICAgIGNyZWF0ZUFwcGx5SGFuZGxlcnMoY29uZmlnLmV2ZW50SGFuZGxlcnMpLFxuICAgICAgICAgICAgY3JlYXRlQXBwbHlIYW5kbGVycyhjb25maWcudXBsb2FkRXZlbnRIYW5kbGVycykpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlQXBwbHlIYW5kbGVycyhldmVudEhhbmRsZXJzKSB7XG4gICAgICAgIGlmIChldmVudEhhbmRsZXJzKSB7XG4gICAgICAgICAgdmFyIGFwcGx5SGFuZGxlcnMgPSB7fTtcbiAgICAgICAgICBmb3JFYWNoKGV2ZW50SGFuZGxlcnMsIGZ1bmN0aW9uKGV2ZW50SGFuZGxlciwga2V5KSB7XG4gICAgICAgICAgICBhcHBseUhhbmRsZXJzW2tleV0gPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICBpZiAodXNlQXBwbHlBc3luYykge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5QXN5bmMoY2FsbEV2ZW50SGFuZGxlcik7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgICAgICAgICAgY2FsbEV2ZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGNhbGxFdmVudEhhbmRsZXIpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsbEV2ZW50SGFuZGxlcigpIHtcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXIoZXZlbnQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBhcHBseUhhbmRsZXJzO1xuICAgICAgICB9XG4gICAgICB9XG5cblxuICAgICAgLyoqXG4gICAgICAgKiBDYWxsYmFjayByZWdpc3RlcmVkIHRvICRodHRwQmFja2VuZCgpOlxuICAgICAgICogIC0gY2FjaGVzIHRoZSByZXNwb25zZSBpZiBkZXNpcmVkXG4gICAgICAgKiAgLSByZXNvbHZlcyB0aGUgcmF3ICRodHRwIHByb21pc2VcbiAgICAgICAqICAtIGNhbGxzICRhcHBseVxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBkb25lKHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cykge1xuICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICBpZiAoaXNTdWNjZXNzKHN0YXR1cykpIHtcbiAgICAgICAgICAgIGNhY2hlLnB1dCh1cmwsIFtzdGF0dXMsIHJlc3BvbnNlLCBwYXJzZUhlYWRlcnMoaGVhZGVyc1N0cmluZyksIHN0YXR1c1RleHQsIHhoclN0YXR1c10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgcHJvbWlzZSBmcm9tIHRoZSBjYWNoZVxuICAgICAgICAgICAgY2FjaGUucmVtb3ZlKHVybCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzb2x2ZUh0dHBQcm9taXNlKCkge1xuICAgICAgICAgIHJlc29sdmVQcm9taXNlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQXBwbHlBc3luYykge1xuICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5QXN5bmMocmVzb2x2ZUh0dHBQcm9taXNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlSHR0cFByb21pc2UoKTtcbiAgICAgICAgICBpZiAoISRyb290U2NvcGUuJCRwaGFzZSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8qKlxuICAgICAgICogUmVzb2x2ZXMgdGhlIHJhdyAkaHR0cCBwcm9taXNlLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzLCBzdGF0dXNUZXh0LCB4aHJTdGF0dXMpIHtcbiAgICAgICAgLy9zdGF0dXM6IEhUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUsIDAsIC0xIChhYm9ydGVkIGJ5IHRpbWVvdXQgLyBwcm9taXNlKVxuICAgICAgICBzdGF0dXMgPSBzdGF0dXMgPj0gLTEgPyBzdGF0dXMgOiAwO1xuXG4gICAgICAgIChpc1N1Y2Nlc3Moc3RhdHVzKSA/IGRlZmVycmVkLnJlc29sdmUgOiBkZWZlcnJlZC5yZWplY3QpKHtcbiAgICAgICAgICBkYXRhOiByZXNwb25zZSxcbiAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzR2V0dGVyKGhlYWRlcnMpLFxuICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgIHN0YXR1c1RleHQ6IHN0YXR1c1RleHQsXG4gICAgICAgICAgeGhyU3RhdHVzOiB4aHJTdGF0dXNcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlV2l0aFJlc3VsdChyZXN1bHQpIHtcbiAgICAgICAgcmVzb2x2ZVByb21pc2UocmVzdWx0LmRhdGEsIHJlc3VsdC5zdGF0dXMsIHNoYWxsb3dDb3B5KHJlc3VsdC5oZWFkZXJzKCkpLCByZXN1bHQuc3RhdHVzVGV4dCwgcmVzdWx0LnhoclN0YXR1cyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVBlbmRpbmdSZXEoKSB7XG4gICAgICAgIHZhciBpZHggPSAkaHR0cC5wZW5kaW5nUmVxdWVzdHMuaW5kZXhPZihjb25maWcpO1xuICAgICAgICBpZiAoaWR4ICE9PSAtMSkgJGh0dHAucGVuZGluZ1JlcXVlc3RzLnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYnVpbGRVcmwodXJsLCBzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgICBpZiAoc2VyaWFsaXplZFBhcmFtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHVybCArPSAoKHVybC5pbmRleE9mKCc/JykgPT09IC0xKSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzYW5pdGl6ZUpzb25wQ2FsbGJhY2tQYXJhbSh1cmwsIGNiS2V5KSB7XG4gICAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoJz8nKTtcbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAyKSB7XG4gICAgICAgIC8vIFRocm93IGlmIHRoZSB1cmwgY29udGFpbnMgbW9yZSB0aGFuIG9uZSBgP2AgcXVlcnkgaW5kaWNhdG9yXG4gICAgICAgIHRocm93ICRodHRwTWluRXJyKCdiYWRqc29ucCcsICdJbGxlZ2FsIHVzZSBtb3JlIHRoYW4gb25lIFwiP1wiLCBpbiB1cmwsIFwiezF9XCInLCB1cmwpO1xuICAgICAgfVxuICAgICAgdmFyIHBhcmFtcyA9IHBhcnNlS2V5VmFsdWUocGFydHNbMV0pO1xuICAgICAgZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnSlNPTl9DQUxMQkFDSycpIHtcbiAgICAgICAgICAvLyBUaHJvdyBpZiB0aGUgdXJsIGFscmVhZHkgY29udGFpbnMgYSByZWZlcmVuY2UgdG8gSlNPTl9DQUxMQkFDS1xuICAgICAgICAgIHRocm93ICRodHRwTWluRXJyKCdiYWRqc29ucCcsICdJbGxlZ2FsIHVzZSBvZiBKU09OX0NBTExCQUNLIGluIHVybCwgXCJ7MH1cIicsIHVybCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gY2JLZXkpIHtcbiAgICAgICAgICAvLyBUaHJvdyBpZiB0aGUgY2FsbGJhY2sgcGFyYW0gd2FzIGFscmVhZHkgcHJvdmlkZWRcbiAgICAgICAgICB0aHJvdyAkaHR0cE1pbkVycignYmFkanNvbnAnLCAnSWxsZWdhbCB1c2Ugb2YgY2FsbGJhY2sgcGFyYW0sIFwiezB9XCIsIGluIHVybCwgXCJ7MX1cIicsIGNiS2V5LCB1cmwpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIGluIHRoZSBKU09OX0NBTExCQUNLIGNhbGxiYWNrIHBhcmFtIHZhbHVlXG4gICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpID09PSAtMSkgPyAnPycgOiAnJicpICsgY2JLZXkgKyAnPUpTT05fQ0FMTEJBQ0snO1xuXG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICR4aHJGYWN0b3J5XG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRmFjdG9yeSBmdW5jdGlvbiB1c2VkIHRvIGNyZWF0ZSBYTUxIdHRwUmVxdWVzdCBvYmplY3RzLlxuICpcbiAqIFJlcGxhY2Ugb3IgZGVjb3JhdGUgdGhpcyBzZXJ2aWNlIHRvIGNyZWF0ZSB5b3VyIG93biBjdXN0b20gWE1MSHR0cFJlcXVlc3Qgb2JqZWN0cy5cbiAqXG4gKiBgYGBcbiAqIGFuZ3VsYXIubW9kdWxlKCdteUFwcCcsIFtdKVxuICogLmZhY3RvcnkoJyR4aHJGYWN0b3J5JywgZnVuY3Rpb24oKSB7XG4gKiAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVYaHIobWV0aG9kLCB1cmwpIHtcbiAqICAgICByZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCh7bW96U3lzdGVtOiB0cnVlfSk7XG4gKiAgIH07XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2QgSFRUUCBtZXRob2Qgb2YgdGhlIHJlcXVlc3QgKEdFVCwgUE9TVCwgUFVULCAuLilcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMIG9mIHRoZSByZXF1ZXN0LlxuICovXG5mdW5jdGlvbiAkeGhyRmFjdG9yeVByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlWGhyKCkge1xuICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9O1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkaHR0cEJhY2tlbmRcbiAqIEByZXF1aXJlcyAkanNvbnBDYWxsYmFja3NcbiAqIEByZXF1aXJlcyAkZG9jdW1lbnRcbiAqIEByZXF1aXJlcyAkeGhyRmFjdG9yeVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhUVFAgYmFja2VuZCB1c2VkIGJ5IHRoZSB7QGxpbmsgbmcuJGh0dHAgc2VydmljZX0gdGhhdCBkZWxlZ2F0ZXMgdG9cbiAqIFhNTEh0dHBSZXF1ZXN0IG9iamVjdCBvciBKU09OUCBhbmQgZGVhbHMgd2l0aCBicm93c2VyIGluY29tcGF0aWJpbGl0aWVzLlxuICpcbiAqIFlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byB1c2UgdGhpcyBzZXJ2aWNlIGRpcmVjdGx5LCBpbnN0ZWFkIHVzZSB0aGUgaGlnaGVyLWxldmVsIGFic3RyYWN0aW9uczpcbiAqIHtAbGluayBuZy4kaHR0cCAkaHR0cH0gb3Ige0BsaW5rIG5nUmVzb3VyY2UuJHJlc291cmNlICRyZXNvdXJjZX0uXG4gKlxuICogRHVyaW5nIHRlc3RpbmcgdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBzd2FwcGVkIHdpdGgge0BsaW5rIG5nTW9jay4kaHR0cEJhY2tlbmQgbW9ja1xuICogJGh0dHBCYWNrZW5kfSB3aGljaCBjYW4gYmUgdHJhaW5lZCB3aXRoIHJlc3BvbnNlcy5cbiAqL1xuZnVuY3Rpb24gJEh0dHBCYWNrZW5kUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJGJyb3dzZXInLCAnJGpzb25wQ2FsbGJhY2tzJywgJyRkb2N1bWVudCcsICckeGhyRmFjdG9yeScsIGZ1bmN0aW9uKCRicm93c2VyLCAkanNvbnBDYWxsYmFja3MsICRkb2N1bWVudCwgJHhockZhY3RvcnkpIHtcbiAgICByZXR1cm4gY3JlYXRlSHR0cEJhY2tlbmQoJGJyb3dzZXIsICR4aHJGYWN0b3J5LCAkYnJvd3Nlci5kZWZlciwgJGpzb25wQ2FsbGJhY2tzLCAkZG9jdW1lbnRbMF0pO1xuICB9XTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSHR0cEJhY2tlbmQoJGJyb3dzZXIsIGNyZWF0ZVhociwgJGJyb3dzZXJEZWZlciwgY2FsbGJhY2tzLCByYXdEb2N1bWVudCkge1xuICAvLyBUT0RPKHZvanRhKTogZml4IHRoZSBzaWduYXR1cmVcbiAgcmV0dXJuIGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBwb3N0LCBjYWxsYmFjaywgaGVhZGVycywgdGltZW91dCwgd2l0aENyZWRlbnRpYWxzLCByZXNwb25zZVR5cGUsIGV2ZW50SGFuZGxlcnMsIHVwbG9hZEV2ZW50SGFuZGxlcnMpIHtcbiAgICB1cmwgPSB1cmwgfHwgJGJyb3dzZXIudXJsKCk7XG5cbiAgICBpZiAobG93ZXJjYXNlKG1ldGhvZCkgPT09ICdqc29ucCcpIHtcbiAgICAgIHZhciBjYWxsYmFja1BhdGggPSBjYWxsYmFja3MuY3JlYXRlQ2FsbGJhY2sodXJsKTtcbiAgICAgIHZhciBqc29ucERvbmUgPSBqc29ucFJlcSh1cmwsIGNhbGxiYWNrUGF0aCwgZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XG4gICAgICAgIC8vIGpzb25wUmVxIG9ubHkgZXZlciBzZXRzIHN0YXR1cyB0byAyMDAgKE9LKSwgNDA0IChFUlJPUikgb3IgLTEgKFdBSVRJTkcpXG4gICAgICAgIHZhciByZXNwb25zZSA9IChzdGF0dXMgPT09IDIwMCkgJiYgY2FsbGJhY2tzLmdldFJlc3BvbnNlKGNhbGxiYWNrUGF0aCk7XG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgc3RhdHVzLCByZXNwb25zZSwgJycsIHRleHQsICdjb21wbGV0ZScpO1xuICAgICAgICBjYWxsYmFja3MucmVtb3ZlQ2FsbGJhY2soY2FsbGJhY2tQYXRoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgIHZhciB4aHIgPSBjcmVhdGVYaHIobWV0aG9kLCB1cmwpO1xuXG4gICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICBmb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIHJlcXVlc3RMb2FkZWQoKSB7XG4gICAgICAgIHZhciBzdGF0dXNUZXh0ID0geGhyLnN0YXR1c1RleHQgfHwgJyc7XG5cbiAgICAgICAgLy8gcmVzcG9uc2VUZXh0IGlzIHRoZSBvbGQtc2Nob29sIHdheSBvZiByZXRyaWV2aW5nIHJlc3BvbnNlIChzdXBwb3J0ZWQgYnkgSUU5KVxuICAgICAgICAvLyByZXNwb25zZS9yZXNwb25zZVR5cGUgcHJvcGVydGllcyB3ZXJlIGludHJvZHVjZWQgaW4gWEhSIExldmVsMiBzcGVjIChzdXBwb3J0ZWQgYnkgSUUxMClcbiAgICAgICAgdmFyIHJlc3BvbnNlID0gKCdyZXNwb25zZScgaW4geGhyKSA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XG5cbiAgICAgICAgLy8gbm9ybWFsaXplIElFOSBidWcgKGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzE0NTApXG4gICAgICAgIHZhciBzdGF0dXMgPSB4aHIuc3RhdHVzID09PSAxMjIzID8gMjA0IDogeGhyLnN0YXR1cztcblxuICAgICAgICAvLyBmaXggc3RhdHVzIGNvZGUgd2hlbiBpdCBpcyAwICgwIHN0YXR1cyBpcyB1bmRvY3VtZW50ZWQpLlxuICAgICAgICAvLyBPY2N1cnMgd2hlbiBhY2Nlc3NpbmcgZmlsZSByZXNvdXJjZXMgb3Igb24gQW5kcm9pZCA0LjEgc3RvY2sgYnJvd3NlclxuICAgICAgICAvLyB3aGlsZSByZXRyaWV2aW5nIGZpbGVzIGZyb20gYXBwbGljYXRpb24gY2FjaGUuXG4gICAgICAgIGlmIChzdGF0dXMgPT09IDApIHtcbiAgICAgICAgICBzdGF0dXMgPSByZXNwb25zZSA/IDIwMCA6IHVybFJlc29sdmUodXJsKS5wcm90b2NvbCA9PT0gJ2ZpbGUnID8gNDA0IDogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjayxcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgICAgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLFxuICAgICAgICAgICAgc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICdjb21wbGV0ZScpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHJlcXVlc3RFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUaGUgcmVzcG9uc2UgaXMgYWx3YXlzIGVtcHR5XG4gICAgICAgIC8vIFNlZSBodHRwczovL3hoci5zcGVjLndoYXR3Zy5vcmcvI3JlcXVlc3QtZXJyb3Itc3RlcHMgYW5kIGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LW5ldHdvcmstZXJyb3JcbiAgICAgICAgY29tcGxldGVSZXF1ZXN0KGNhbGxiYWNrLCAtMSwgbnVsbCwgbnVsbCwgJycsICdlcnJvcicpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHJlcXVlc3RBYm9ydGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbXBsZXRlUmVxdWVzdChjYWxsYmFjaywgLTEsIG51bGwsIG51bGwsICcnLCAnYWJvcnQnKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZXF1ZXN0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUaGUgcmVzcG9uc2UgaXMgYWx3YXlzIGVtcHR5XG4gICAgICAgIC8vIFNlZSBodHRwczovL3hoci5zcGVjLndoYXR3Zy5vcmcvI3JlcXVlc3QtZXJyb3Itc3RlcHMgYW5kIGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LW5ldHdvcmstZXJyb3JcbiAgICAgICAgY29tcGxldGVSZXF1ZXN0KGNhbGxiYWNrLCAtMSwgbnVsbCwgbnVsbCwgJycsICd0aW1lb3V0Jyk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub25lcnJvciA9IHJlcXVlc3RFcnJvcjtcbiAgICAgIHhoci5vbmFib3J0ID0gcmVxdWVzdEFib3J0ZWQ7XG4gICAgICB4aHIub250aW1lb3V0ID0gcmVxdWVzdFRpbWVvdXQ7XG5cbiAgICAgIGZvckVhY2goZXZlbnRIYW5kbGVycywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGZvckVhY2godXBsb2FkRXZlbnRIYW5kbGVycywgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoa2V5LCB2YWx1ZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHdpdGhDcmVkZW50aWFscykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3BvbnNlVHlwZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBXZWJLaXQgYWRkZWQgc3VwcG9ydCBmb3IgdGhlIGpzb24gcmVzcG9uc2VUeXBlIHZhbHVlIG9uIDA5LzAzLzIwMTNcbiAgICAgICAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NzM2NDguIFZlcnNpb25zIG9mIFNhZmFyaSBwcmlvciB0byA3IGFyZVxuICAgICAgICAgIC8vIGtub3duIHRvIHRocm93IHdoZW4gc2V0dGluZyB0aGUgdmFsdWUgXCJqc29uXCIgYXMgdGhlIHJlc3BvbnNlIHR5cGUuIE90aGVyIG9sZGVyXG4gICAgICAgICAgLy8gYnJvd3NlcnMgaW1wbGVtZW50aW5nIHRoZSByZXNwb25zZVR5cGVcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIFRoZSBqc29uIHJlc3BvbnNlIHR5cGUgY2FuIGJlIGlnbm9yZWQgaWYgbm90IHN1cHBvcnRlZCwgYmVjYXVzZSBKU09OIHBheWxvYWRzIGFyZVxuICAgICAgICAgIC8vIHBhcnNlZCBvbiB0aGUgY2xpZW50LXNpZGUgcmVnYXJkbGVzcy5cbiAgICAgICAgICBpZiAocmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKGlzVW5kZWZpbmVkKHBvc3QpID8gbnVsbCA6IHBvc3QpO1xuICAgIH1cblxuICAgIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgdmFyIHRpbWVvdXRJZCA9ICRicm93c2VyRGVmZXIodGltZW91dFJlcXVlc3QsIHRpbWVvdXQpO1xuICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlTGlrZSh0aW1lb3V0KSkge1xuICAgICAgdGltZW91dC50aGVuKHRpbWVvdXRSZXF1ZXN0KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHRpbWVvdXRSZXF1ZXN0KCkge1xuICAgICAgaWYgKGpzb25wRG9uZSkge1xuICAgICAgICBqc29ucERvbmUoKTtcbiAgICAgIH1cbiAgICAgIGlmICh4aHIpIHtcbiAgICAgICAgeGhyLmFib3J0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29tcGxldGVSZXF1ZXN0KGNhbGxiYWNrLCBzdGF0dXMsIHJlc3BvbnNlLCBoZWFkZXJzU3RyaW5nLCBzdGF0dXNUZXh0LCB4aHJTdGF0dXMpIHtcbiAgICAgIC8vIGNhbmNlbCB0aW1lb3V0IGFuZCBzdWJzZXF1ZW50IHRpbWVvdXQgcHJvbWlzZSByZXNvbHV0aW9uXG4gICAgICBpZiAoaXNEZWZpbmVkKHRpbWVvdXRJZCkpIHtcbiAgICAgICAgJGJyb3dzZXJEZWZlci5jYW5jZWwodGltZW91dElkKTtcbiAgICAgIH1cbiAgICAgIGpzb25wRG9uZSA9IHhociA9IG51bGw7XG5cbiAgICAgIGNhbGxiYWNrKHN0YXR1cywgcmVzcG9uc2UsIGhlYWRlcnNTdHJpbmcsIHN0YXR1c1RleHQsIHhoclN0YXR1cyk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGpzb25wUmVxKHVybCwgY2FsbGJhY2tQYXRoLCBkb25lKSB7XG4gICAgdXJsID0gdXJsLnJlcGxhY2UoJ0pTT05fQ0FMTEJBQ0snLCBjYWxsYmFja1BhdGgpO1xuICAgIC8vIHdlIGNhbid0IHVzZSBqUXVlcnkvanFMaXRlIGhlcmUgYmVjYXVzZSBqUXVlcnkgZG9lcyBjcmF6eSBzdHVmZiB3aXRoIHNjcmlwdCBlbGVtZW50cywgZS5nLjpcbiAgICAvLyAtIGZldGNoZXMgbG9jYWwgc2NyaXB0cyB2aWEgWEhSIGFuZCBldmFscyB0aGVtXG4gICAgLy8gLSBhZGRzIGFuZCBpbW1lZGlhdGVseSByZW1vdmVzIHNjcmlwdCBlbGVtZW50cyBmcm9tIHRoZSBkb2N1bWVudFxuICAgIHZhciBzY3JpcHQgPSByYXdEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSwgY2FsbGJhY2sgPSBudWxsO1xuICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXG4gICAgY2FsbGJhY2sgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgc2NyaXB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjYWxsYmFjayk7XG4gICAgICBzY3JpcHQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBjYWxsYmFjayk7XG4gICAgICByYXdEb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgdmFyIHN0YXR1cyA9IC0xO1xuICAgICAgdmFyIHRleHQgPSAndW5rbm93bic7XG5cbiAgICAgIGlmIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnICYmICFjYWxsYmFja3Mud2FzQ2FsbGVkKGNhbGxiYWNrUGF0aCkpIHtcbiAgICAgICAgICBldmVudCA9IHsgdHlwZTogJ2Vycm9yJyB9O1xuICAgICAgICB9XG4gICAgICAgIHRleHQgPSBldmVudC50eXBlO1xuICAgICAgICBzdGF0dXMgPSBldmVudC50eXBlID09PSAnZXJyb3InID8gNDA0IDogMjAwO1xuICAgICAgfVxuXG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBkb25lKHN0YXR1cywgdGV4dCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY2FsbGJhY2spO1xuICAgIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGNhbGxiYWNrKTtcbiAgICByYXdEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgcmV0dXJuIGNhbGxiYWNrO1xuICB9XG59XG5cbnZhciAkaW50ZXJwb2xhdGVNaW5FcnIgPSBhbmd1bGFyLiRpbnRlcnBvbGF0ZU1pbkVyciA9IG1pbkVycignJGludGVycG9sYXRlJyk7XG4kaW50ZXJwb2xhdGVNaW5FcnIudGhyb3dOb2NvbmNhdCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgdGhyb3cgJGludGVycG9sYXRlTWluRXJyKCdub2NvbmNhdCcsXG4gICAgICAnRXJyb3Igd2hpbGUgaW50ZXJwb2xhdGluZzogezB9XFxuU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgZGlzYWxsb3dzICcgK1xuICAgICAgJ2ludGVycG9sYXRpb25zIHRoYXQgY29uY2F0ZW5hdGUgbXVsdGlwbGUgZXhwcmVzc2lvbnMgd2hlbiBhIHRydXN0ZWQgdmFsdWUgaXMgJyArXG4gICAgICAncmVxdWlyZWQuICBTZWUgaHR0cDovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcuJHNjZScsIHRleHQpO1xufTtcblxuJGludGVycG9sYXRlTWluRXJyLmludGVyciA9IGZ1bmN0aW9uKHRleHQsIGVycikge1xuICByZXR1cm4gJGludGVycG9sYXRlTWluRXJyKCdpbnRlcnInLCAnQ2FuXFwndCBpbnRlcnBvbGF0ZTogezB9XFxuezF9JywgdGV4dCwgZXJyLnRvU3RyaW5nKCkpO1xufTtcblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRpbnRlcnBvbGF0ZVByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFVzZWQgZm9yIGNvbmZpZ3VyaW5nIHRoZSBpbnRlcnBvbGF0aW9uIG1hcmt1cC4gRGVmYXVsdHMgdG8gYHt7YCBhbmQgYH19YC5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiBUaGlzIGZlYXR1cmUgaXMgc29tZXRpbWVzIHVzZWQgdG8gbWl4IGRpZmZlcmVudCBtYXJrdXAgbGFuZ3VhZ2VzLCBlLmcuIHRvIHdyYXAgYW4gQW5ndWxhclxuICogdGVtcGxhdGUgd2l0aGluIGEgUHl0aG9uIEppbmphIHRlbXBsYXRlIChvciBhbnkgb3RoZXIgdGVtcGxhdGUgbGFuZ3VhZ2UpLiBNaXhpbmcgdGVtcGxhdGluZ1xuICogbGFuZ3VhZ2VzIGlzICoqdmVyeSBkYW5nZXJvdXMqKi4gVGhlIGVtYmVkZGluZyB0ZW1wbGF0ZSBsYW5ndWFnZSB3aWxsIG5vdCBzYWZlbHkgZXNjYXBlIEFuZ3VsYXJcbiAqIGV4cHJlc3Npb25zLCBzbyBhbnkgdXNlci1jb250cm9sbGVkIHZhbHVlcyBpbiB0aGUgdGVtcGxhdGUgd2lsbCBjYXVzZSBDcm9zcyBTaXRlIFNjcmlwdGluZyAoWFNTKVxuICogc2VjdXJpdHkgYnVncyFcbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG48ZXhhbXBsZSBuYW1lPVwiY3VzdG9tLWludGVycG9sYXRpb24tbWFya3VwXCIgbW9kdWxlPVwiY3VzdG9tSW50ZXJwb2xhdGlvbkFwcFwiPlxuPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbjxzY3JpcHQ+XG4gIHZhciBjdXN0b21JbnRlcnBvbGF0aW9uQXBwID0gYW5ndWxhci5tb2R1bGUoJ2N1c3RvbUludGVycG9sYXRpb25BcHAnLCBbXSk7XG5cbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb25maWcoZnVuY3Rpb24oJGludGVycG9sYXRlUHJvdmlkZXIpIHtcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5zdGFydFN5bWJvbCgnLy8nKTtcbiAgICAkaW50ZXJwb2xhdGVQcm92aWRlci5lbmRTeW1ib2woJy8vJyk7XG4gIH0pO1xuXG5cbiAgY3VzdG9tSW50ZXJwb2xhdGlvbkFwcC5jb250cm9sbGVyKCdEZW1vQ29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5sYWJlbCA9IFwiVGhpcyBiaW5kaW5nIGlzIGJyb3VnaHQgeW91IGJ5IC8vIGludGVycG9sYXRpb24gc3ltYm9scy5cIjtcbiAgfSk7XG48L3NjcmlwdD5cbjxkaXYgbmctY29udHJvbGxlcj1cIkRlbW9Db250cm9sbGVyIGFzIGRlbW9cIj5cbiAgICAvL2RlbW8ubGFiZWwvL1xuPC9kaXY+XG48L2ZpbGU+XG48ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gIGl0KCdzaG91bGQgaW50ZXJwb2xhdGUgYmluZGluZyB3aXRoIGN1c3RvbSBzeW1ib2xzJywgZnVuY3Rpb24oKSB7XG4gICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnZGVtby5sYWJlbCcpKS5nZXRUZXh0KCkpLnRvQmUoJ1RoaXMgYmluZGluZyBpcyBicm91Z2h0IHlvdSBieSAvLyBpbnRlcnBvbGF0aW9uIHN5bWJvbHMuJyk7XG4gIH0pO1xuPC9maWxlPlxuPC9leGFtcGxlPlxuICovXG5mdW5jdGlvbiAkSW50ZXJwb2xhdGVQcm92aWRlcigpIHtcbiAgdmFyIHN0YXJ0U3ltYm9sID0gJ3t7JztcbiAgdmFyIGVuZFN5bWJvbCA9ICd9fSc7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGludGVycG9sYXRlUHJvdmlkZXIjc3RhcnRTeW1ib2xcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN5bWJvbCB0byBkZW5vdGUgc3RhcnQgb2YgZXhwcmVzc2lvbiBpbiB0aGUgaW50ZXJwb2xhdGVkIHN0cmluZy4gRGVmYXVsdHMgdG8gYHt7YC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmc9fSB2YWx1ZSBuZXcgdmFsdWUgdG8gc2V0IHRoZSBzdGFydGluZyBzeW1ib2wgdG8uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUgc3ltYm9sIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLnN0YXJ0U3ltYm9sID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHN0YXJ0U3ltYm9sID0gdmFsdWU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkaW50ZXJwb2xhdGVQcm92aWRlciNlbmRTeW1ib2xcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN5bWJvbCB0byBkZW5vdGUgdGhlIGVuZCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBgfX1gLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHZhbHVlIG5ldyB2YWx1ZSB0byBzZXQgdGhlIGVuZGluZyBzeW1ib2wgdG8uXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8c2VsZn0gUmV0dXJucyB0aGUgc3ltYm9sIHdoZW4gdXNlZCBhcyBnZXR0ZXIgYW5kIHNlbGYgaWYgdXNlZCBhcyBzZXR0ZXIuXG4gICAqL1xuICB0aGlzLmVuZFN5bWJvbCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBlbmRTeW1ib2wgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZW5kU3ltYm9sO1xuICAgIH1cbiAgfTtcblxuXG4gIHRoaXMuJGdldCA9IFsnJHBhcnNlJywgJyRleGNlcHRpb25IYW5kbGVyJywgJyRzY2UnLCBmdW5jdGlvbigkcGFyc2UsICRleGNlcHRpb25IYW5kbGVyLCAkc2NlKSB7XG4gICAgdmFyIHN0YXJ0U3ltYm9sTGVuZ3RoID0gc3RhcnRTeW1ib2wubGVuZ3RoLFxuICAgICAgICBlbmRTeW1ib2xMZW5ndGggPSBlbmRTeW1ib2wubGVuZ3RoLFxuICAgICAgICBlc2NhcGVkU3RhcnRSZWdleHAgPSBuZXcgUmVnRXhwKHN0YXJ0U3ltYm9sLnJlcGxhY2UoLy4vZywgZXNjYXBlKSwgJ2cnKSxcbiAgICAgICAgZXNjYXBlZEVuZFJlZ2V4cCA9IG5ldyBSZWdFeHAoZW5kU3ltYm9sLnJlcGxhY2UoLy4vZywgZXNjYXBlKSwgJ2cnKTtcblxuICAgIGZ1bmN0aW9uIGVzY2FwZShjaCkge1xuICAgICAgcmV0dXJuICdcXFxcXFxcXFxcXFwnICsgY2g7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5lc2NhcGVUZXh0KHRleHQpIHtcbiAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoZXNjYXBlZFN0YXJ0UmVnZXhwLCBzdGFydFN5bWJvbCkuXG4gICAgICAgIHJlcGxhY2UoZXNjYXBlZEVuZFJlZ2V4cCwgZW5kU3ltYm9sKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiB0aGlzIGlzIHRoZSBzYW1lIGFzIHRoZSBjb25zdGFudFdhdGNoRGVsZWdhdGUgaW4gcGFyc2UuanNcbiAgICBmdW5jdGlvbiBjb25zdGFudFdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgY29uc3RhbnRJbnRlcnApIHtcbiAgICAgIHZhciB1bndhdGNoID0gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGNvbnN0YW50SW50ZXJwb2xhdGVXYXRjaChzY29wZSkge1xuICAgICAgICB1bndhdGNoKCk7XG4gICAgICAgIHJldHVybiBjb25zdGFudEludGVycChzY29wZSk7XG4gICAgICB9LCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHkpO1xuICAgICAgcmV0dXJuIHVud2F0Y2g7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHNlcnZpY2VcbiAgICAgKiBAbmFtZSAkaW50ZXJwb2xhdGVcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHJlcXVpcmVzICRwYXJzZVxuICAgICAqIEByZXF1aXJlcyAkc2NlXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIENvbXBpbGVzIGEgc3RyaW5nIHdpdGggbWFya3VwIGludG8gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbi4gVGhpcyBzZXJ2aWNlIGlzIHVzZWQgYnkgdGhlXG4gICAgICogSFRNTCB7QGxpbmsgbmcuJGNvbXBpbGUgJGNvbXBpbGV9IHNlcnZpY2UgZm9yIGRhdGEgYmluZGluZy4gU2VlXG4gICAgICoge0BsaW5rIG5nLiRpbnRlcnBvbGF0ZVByb3ZpZGVyICRpbnRlcnBvbGF0ZVByb3ZpZGVyfSBmb3IgY29uZmlndXJpbmcgdGhlXG4gICAgICogaW50ZXJwb2xhdGlvbiBtYXJrdXAuXG4gICAgICpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICB2YXIgJGludGVycG9sYXRlID0gLi4uOyAvLyBpbmplY3RlZFxuICAgICAqICAgdmFyIGV4cCA9ICRpbnRlcnBvbGF0ZSgnSGVsbG8ge3tuYW1lIHwgdXBwZXJjYXNlfX0hJyk7XG4gICAgICogICBleHBlY3QoZXhwKHtuYW1lOidBbmd1bGFyJ30pKS50b0VxdWFsKCdIZWxsbyBBTkdVTEFSIScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogYCRpbnRlcnBvbGF0ZWAgdGFrZXMgYW4gb3B0aW9uYWwgZm91cnRoIGFyZ3VtZW50LCBgYWxsT3JOb3RoaW5nYC4gSWYgYGFsbE9yTm90aGluZ2AgaXNcbiAgICAgKiBgdHJ1ZWAsIHRoZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGB1bmRlZmluZWRgIHVubGVzcyBhbGwgZW1iZWRkZWQgZXhwcmVzc2lvbnNcbiAgICAgKiBldmFsdWF0ZSB0byBhIHZhbHVlIG90aGVyIHRoYW4gYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqICAgdmFyICRpbnRlcnBvbGF0ZSA9IC4uLjsgLy8gaW5qZWN0ZWRcbiAgICAgKiAgIHZhciBjb250ZXh0ID0ge2dyZWV0aW5nOiAnSGVsbG8nLCBuYW1lOiB1bmRlZmluZWQgfTtcbiAgICAgKlxuICAgICAqICAgLy8gZGVmYXVsdCBcImZvcmdpdmluZ1wiIG1vZGVcbiAgICAgKiAgIHZhciBleHAgPSAkaW50ZXJwb2xhdGUoJ3t7Z3JlZXRpbmd9fSB7e25hbWV9fSEnKTtcbiAgICAgKiAgIGV4cGVjdChleHAoY29udGV4dCkpLnRvRXF1YWwoJ0hlbGxvICEnKTtcbiAgICAgKlxuICAgICAqICAgLy8gXCJhbGxPck5vdGhpbmdcIiBtb2RlXG4gICAgICogICBleHAgPSAkaW50ZXJwb2xhdGUoJ3t7Z3JlZXRpbmd9fSB7e25hbWV9fSEnLCBmYWxzZSwgbnVsbCwgdHJ1ZSk7XG4gICAgICogICBleHBlY3QoZXhwKGNvbnRleHQpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICogICBjb250ZXh0Lm5hbWUgPSAnQW5ndWxhcic7XG4gICAgICogICBleHBlY3QoZXhwKGNvbnRleHQpKS50b0VxdWFsKCdIZWxsbyBBbmd1bGFyIScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogYGFsbE9yTm90aGluZ2AgaXMgdXNlZnVsIGZvciBpbnRlcnBvbGF0aW5nIFVSTHMuIGBuZ1NyY2AgYW5kIGBuZ1NyY3NldGAgdXNlIHRoaXMgYmVoYXZpb3IuXG4gICAgICpcbiAgICAgKiAjIyMjIEVzY2FwZWQgSW50ZXJwb2xhdGlvblxuICAgICAqICRpbnRlcnBvbGF0ZSBwcm92aWRlcyBhIG1lY2hhbmlzbSBmb3IgZXNjYXBpbmcgaW50ZXJwb2xhdGlvbiBtYXJrZXJzLiBTdGFydCBhbmQgZW5kIG1hcmtlcnNcbiAgICAgKiBjYW4gYmUgZXNjYXBlZCBieSBwcmVjZWRpbmcgZWFjaCBvZiB0aGVpciBjaGFyYWN0ZXJzIHdpdGggYSBSRVZFUlNFIFNPTElEVVMgVSswMDVDIChiYWNrc2xhc2gpLlxuICAgICAqIEl0IHdpbGwgYmUgcmVuZGVyZWQgYXMgYSByZWd1bGFyIHN0YXJ0L2VuZCBtYXJrZXIsIGFuZCB3aWxsIG5vdCBiZSBpbnRlcnByZXRlZCBhcyBhbiBleHByZXNzaW9uXG4gICAgICogb3IgYmluZGluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgZW5hYmxlcyB3ZWItc2VydmVycyB0byBwcmV2ZW50IHNjcmlwdCBpbmplY3Rpb24gYXR0YWNrcyBhbmQgZGVmYWNpbmcgYXR0YWNrcywgdG8gc29tZVxuICAgICAqIGRlZ3JlZSwgd2hpbGUgYWxzbyBlbmFibGluZyBjb2RlIGV4YW1wbGVzIHRvIHdvcmsgd2l0aG91dCByZWx5aW5nIG9uIHRoZVxuICAgICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdOb25CaW5kYWJsZSBuZ05vbkJpbmRhYmxlfSBkaXJlY3RpdmUuXG4gICAgICpcbiAgICAgKiAqKkZvciBzZWN1cml0eSBwdXJwb3NlcywgaXQgaXMgc3Ryb25nbHkgZW5jb3VyYWdlZCB0aGF0IHdlYiBzZXJ2ZXJzIGVzY2FwZSB1c2VyLXN1cHBsaWVkIGRhdGEsXG4gICAgICogcmVwbGFjaW5nIGFuZ2xlIGJyYWNrZXRzICgmbHQ7LCAmZ3Q7KSB3aXRoICZhbXA7bHQ7IGFuZCAmYW1wO2d0OyByZXNwZWN0aXZlbHksIGFuZCByZXBsYWNpbmcgYWxsXG4gICAgICogaW50ZXJwb2xhdGlvbiBzdGFydC9lbmQgbWFya2VycyB3aXRoIHRoZWlyIGVzY2FwZWQgY291bnRlcnBhcnRzLioqXG4gICAgICpcbiAgICAgKiBFc2NhcGVkIGludGVycG9sYXRpb24gbWFya2VycyBhcmUgb25seSByZXBsYWNlZCB3aXRoIHRoZSBhY3R1YWwgaW50ZXJwb2xhdGlvbiBtYXJrZXJzIGluIHJlbmRlcmVkXG4gICAgICogb3V0cHV0IHdoZW4gdGhlICRpbnRlcnBvbGF0ZSBzZXJ2aWNlIHByb2Nlc3NlcyB0aGUgdGV4dC4gU28sIGZvciBIVE1MIGVsZW1lbnRzIGludGVycG9sYXRlZFxuICAgICAqIGJ5IHtAbGluayBuZy4kY29tcGlsZSAkY29tcGlsZX0sIG9yIG90aGVyd2lzZSBpbnRlcnBvbGF0ZWQgd2l0aCB0aGUgYG11c3RIYXZlRXhwcmVzc2lvbmAgcGFyYW1ldGVyXG4gICAgICogc2V0IHRvIGB0cnVlYCwgdGhlIGludGVycG9sYXRlZCB0ZXh0IG11c3QgY29udGFpbiBhbiB1bmVzY2FwZWQgaW50ZXJwb2xhdGlvbiBleHByZXNzaW9uLiBBcyBzdWNoLFxuICAgICAqIHRoaXMgaXMgdHlwaWNhbGx5IHVzZWZ1bCBvbmx5IHdoZW4gdXNlci1kYXRhIGlzIHVzZWQgaW4gcmVuZGVyaW5nIGEgdGVtcGxhdGUgZnJvbSB0aGUgc2VydmVyLCBvclxuICAgICAqIHdoZW4gb3RoZXJ3aXNlIHVudHJ1c3RlZCBkYXRhIGlzIHVzZWQgYnkgYSBkaXJlY3RpdmUuXG4gICAgICpcbiAgICAgKiA8ZXhhbXBsZSBuYW1lPVwiaW50ZXJwb2xhdGlvblwiPlxuICAgICAqICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAqICAgIDxkaXYgbmctaW5pdD1cInVzZXJuYW1lPSdBIHVzZXInXCI+XG4gICAgICogICAgICA8cCBuZy1pbml0PVwiYXBwdGl0bGU9J0VzY2FwaW5nIGRlbW8nXCI+e3thcHB0aXRsZX19OiBcXHtcXHsgdXNlcm5hbWUgPSBcImRlZmFjZWQgdmFsdWVcIjsgXFx9XFx9XG4gICAgICogICAgICAgIDwvcD5cbiAgICAgKiAgICAgIDxwPjxzdHJvbmc+e3t1c2VybmFtZX19PC9zdHJvbmc+IGF0dGVtcHRzIHRvIGluamVjdCBjb2RlIHdoaWNoIHdpbGwgZGVmYWNlIHRoZVxuICAgICAqICAgICAgICBhcHBsaWNhdGlvbiwgYnV0IGZhaWxzIHRvIGFjY29tcGxpc2ggdGhlaXIgdGFzaywgYmVjYXVzZSB0aGUgc2VydmVyIGhhcyBjb3JyZWN0bHlcbiAgICAgKiAgICAgICAgZXNjYXBlZCB0aGUgaW50ZXJwb2xhdGlvbiBzdGFydC9lbmQgbWFya2VycyB3aXRoIFJFVkVSU0UgU09MSURVUyBVKzAwNUMgKGJhY2tzbGFzaClcbiAgICAgKiAgICAgICAgY2hhcmFjdGVycy48L3A+XG4gICAgICogICAgICA8cD5JbnN0ZWFkLCB0aGUgcmVzdWx0IG9mIHRoZSBhdHRlbXB0ZWQgc2NyaXB0IGluamVjdGlvbiBpcyB2aXNpYmxlLCBhbmQgY2FuIGJlIHJlbW92ZWRcbiAgICAgKiAgICAgICAgZnJvbSB0aGUgZGF0YWJhc2UgYnkgYW4gYWRtaW5pc3RyYXRvci48L3A+XG4gICAgICogICAgPC9kaXY+XG4gICAgICogIDwvZmlsZT5cbiAgICAgKiA8L2V4YW1wbGU+XG4gICAgICpcbiAgICAgKiBAa25vd25Jc3N1ZVxuICAgICAqIEl0IGlzIGN1cnJlbnRseSBub3QgcG9zc2libGUgZm9yIGFuIGludGVycG9sYXRlZCBleHByZXNzaW9uIHRvIGNvbnRhaW4gdGhlIGludGVycG9sYXRpb24gZW5kXG4gICAgICogc3ltYm9sLiBGb3IgZXhhbXBsZSwgYHt7ICd9fScgfX1gIHdpbGwgYmUgaW5jb3JyZWN0bHkgaW50ZXJwcmV0ZWQgYXMgYHt7ICcgfX1gICsgYCcgfX1gLCBpLmUuXG4gICAgICogYW4gaW50ZXJwb2xhdGVkIGV4cHJlc3Npb24gY29uc2lzdGluZyBvZiBhIHNpbmdsZS1xdW90ZSAoYCdgKSBhbmQgdGhlIGAnIH19YCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAa25vd25Jc3N1ZVxuICAgICAqIEFsbCBkaXJlY3RpdmVzIGFuZCBjb21wb25lbnRzIG11c3QgdXNlIHRoZSBzdGFuZGFyZCBge3tgIGB9fWAgaW50ZXJwb2xhdGlvbiBzeW1ib2xzXG4gICAgICogaW4gdGhlaXIgdGVtcGxhdGVzLiBJZiB5b3UgY2hhbmdlIHRoZSBhcHBsaWNhdGlvbiBpbnRlcnBvbGF0aW9uIHN5bWJvbHMgdGhlIHtAbGluayAkY29tcGlsZX1cbiAgICAgKiBzZXJ2aWNlIHdpbGwgYXR0ZW1wdCB0byBkZW5vcm1hbGl6ZSB0aGUgc3RhbmRhcmQgc3ltYm9scyB0byB0aGUgY3VzdG9tIHN5bWJvbHMuXG4gICAgICogVGhlIGRlbm9ybWFsaXphdGlvbiBwcm9jZXNzIGlzIG5vdCBjbGV2ZXIgZW5vdWdoIHRvIGtub3cgbm90IHRvIHJlcGxhY2UgaW5zdGFuY2VzIG9mIHRoZSBzdGFuZGFyZFxuICAgICAqIHN5bWJvbHMgd2hlcmUgdGhleSB3b3VsZCBub3Qgbm9ybWFsbHkgYmUgdHJlYXRlZCBhcyBpbnRlcnBvbGF0aW9uIHN5bWJvbHMuIEZvciBleGFtcGxlIGluIHRoZSBmb2xsb3dpbmdcbiAgICAgKiBjb2RlIHNuaXBwZXQgdGhlIGNsb3NpbmcgYnJhY2VzIG9mIHRoZSBsaXRlcmFsIG9iamVjdCB3aWxsIGdldCBpbmNvcnJlY3RseSBkZW5vcm1hbGl6ZWQ6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiA8ZGl2IGRhdGEtY29udGV4dD0ne1wiY29udGV4dFwiOntcImlkXCI6MyxcInR5cGVcIjpcInBhZ2VcIn19XCI+XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBUaGUgd29ya2Fyb3VuZCBpcyB0byBlbnN1cmUgdGhhdCBzdWNoIGluc3RhbmNlcyBhcmUgc2VwYXJhdGVkIGJ5IHdoaXRlc3BhY2U6XG4gICAgICogYGBgXG4gICAgICogPGRpdiBkYXRhLWNvbnRleHQ9J3tcImNvbnRleHRcIjp7XCJpZFwiOjMsXCJ0eXBlXCI6XCJwYWdlXCJ9IH1cIj5cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMTQ2MTAjaXNzdWVjb21tZW50LTIxOTQwMTA5OSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHdpdGggbWFya3VwIHRvIGludGVycG9sYXRlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IG11c3RIYXZlRXhwcmVzc2lvbiBpZiBzZXQgdG8gdHJ1ZSB0aGVuIHRoZSBpbnRlcnBvbGF0aW9uIHN0cmluZyBtdXN0IGhhdmVcbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIGluIG9yZGVyIHRvIHJldHVybiBhbiBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLiBTdHJpbmdzIHdpdGggbm9cbiAgICAgKiAgICBlbWJlZGRlZCBleHByZXNzaW9uIHdpbGwgcmV0dXJuIG51bGwgZm9yIHRoZSBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gdHJ1c3RlZENvbnRleHQgd2hlbiBwcm92aWRlZCwgdGhlIHJldHVybmVkIGZ1bmN0aW9uIHBhc3NlcyB0aGUgaW50ZXJwb2xhdGVkXG4gICAgICogICAgcmVzdWx0IHRocm91Z2gge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWQoaW50ZXJwb2xhdGVkUmVzdWx0LFxuICAgICAqICAgIHRydXN0ZWRDb250ZXh0KX0gYmVmb3JlIHJldHVybmluZyBpdC4gIFJlZmVyIHRvIHRoZSB7QGxpbmsgbmcuJHNjZSAkc2NlfSBzZXJ2aWNlIHRoYXRcbiAgICAgKiAgICBwcm92aWRlcyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyBmb3IgZGV0YWlscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhbGxPck5vdGhpbmcgaWYgYHRydWVgLCB0aGVuIHRoZSByZXR1cm5lZCBmdW5jdGlvbiByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAqICAgIHVubGVzcyBhbGwgZW1iZWRkZWQgZXhwcmVzc2lvbnMgZXZhbHVhdGUgdG8gYSB2YWx1ZSBvdGhlciB0aGFuIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0KX0gYW4gaW50ZXJwb2xhdGlvbiBmdW5jdGlvbiB3aGljaCBpcyB1c2VkIHRvIGNvbXB1dGUgdGhlXG4gICAgICogICAgaW50ZXJwb2xhdGVkIHN0cmluZy4gVGhlIGZ1bmN0aW9uIGhhcyB0aGVzZSBwYXJhbWV0ZXJzOlxuICAgICAqXG4gICAgICogLSBgY29udGV4dGA6IGV2YWx1YXRpb24gY29udGV4dCBmb3IgYWxsIGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZSBpbnRlcnBvbGF0ZWQgdGV4dFxuICAgICAqL1xuICAgIGZ1bmN0aW9uICRpbnRlcnBvbGF0ZSh0ZXh0LCBtdXN0SGF2ZUV4cHJlc3Npb24sIHRydXN0ZWRDb250ZXh0LCBhbGxPck5vdGhpbmcpIHtcbiAgICAgIC8vIFByb3ZpZGUgYSBxdWljayBleGl0IGFuZCBzaW1wbGlmaWVkIHJlc3VsdCBmdW5jdGlvbiBmb3IgdGV4dCB3aXRoIG5vIGludGVycG9sYXRpb25cbiAgICAgIGlmICghdGV4dC5sZW5ndGggfHwgdGV4dC5pbmRleE9mKHN0YXJ0U3ltYm9sKSA9PT0gLTEpIHtcbiAgICAgICAgdmFyIGNvbnN0YW50SW50ZXJwO1xuICAgICAgICBpZiAoIW11c3RIYXZlRXhwcmVzc2lvbikge1xuICAgICAgICAgIHZhciB1bmVzY2FwZWRUZXh0ID0gdW5lc2NhcGVUZXh0KHRleHQpO1xuICAgICAgICAgIGNvbnN0YW50SW50ZXJwID0gdmFsdWVGbih1bmVzY2FwZWRUZXh0KTtcbiAgICAgICAgICBjb25zdGFudEludGVycC5leHAgPSB0ZXh0O1xuICAgICAgICAgIGNvbnN0YW50SW50ZXJwLmV4cHJlc3Npb25zID0gW107XG4gICAgICAgICAgY29uc3RhbnRJbnRlcnAuJCR3YXRjaERlbGVnYXRlID0gY29uc3RhbnRXYXRjaERlbGVnYXRlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25zdGFudEludGVycDtcbiAgICAgIH1cblxuICAgICAgYWxsT3JOb3RoaW5nID0gISFhbGxPck5vdGhpbmc7XG4gICAgICB2YXIgc3RhcnRJbmRleCxcbiAgICAgICAgICBlbmRJbmRleCxcbiAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgZXhwcmVzc2lvbnMgPSBbXSxcbiAgICAgICAgICBwYXJzZUZucyA9IFtdLFxuICAgICAgICAgIHRleHRMZW5ndGggPSB0ZXh0Lmxlbmd0aCxcbiAgICAgICAgICBleHAsXG4gICAgICAgICAgY29uY2F0ID0gW10sXG4gICAgICAgICAgZXhwcmVzc2lvblBvc2l0aW9ucyA9IFtdO1xuXG4gICAgICB3aGlsZSAoaW5kZXggPCB0ZXh0TGVuZ3RoKSB7XG4gICAgICAgIGlmICgoKHN0YXJ0SW5kZXggPSB0ZXh0LmluZGV4T2Yoc3RhcnRTeW1ib2wsIGluZGV4KSkgIT09IC0xKSAmJlxuICAgICAgICAgICAgICgoZW5kSW5kZXggPSB0ZXh0LmluZGV4T2YoZW5kU3ltYm9sLCBzdGFydEluZGV4ICsgc3RhcnRTeW1ib2xMZW5ndGgpKSAhPT0gLTEpKSB7XG4gICAgICAgICAgaWYgKGluZGV4ICE9PSBzdGFydEluZGV4KSB7XG4gICAgICAgICAgICBjb25jYXQucHVzaCh1bmVzY2FwZVRleHQodGV4dC5zdWJzdHJpbmcoaW5kZXgsIHN0YXJ0SW5kZXgpKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGV4cCA9IHRleHQuc3Vic3RyaW5nKHN0YXJ0SW5kZXggKyBzdGFydFN5bWJvbExlbmd0aCwgZW5kSW5kZXgpO1xuICAgICAgICAgIGV4cHJlc3Npb25zLnB1c2goZXhwKTtcbiAgICAgICAgICBwYXJzZUZucy5wdXNoKCRwYXJzZShleHAsIHBhcnNlU3RyaW5naWZ5SW50ZXJjZXB0b3IpKTtcbiAgICAgICAgICBpbmRleCA9IGVuZEluZGV4ICsgZW5kU3ltYm9sTGVuZ3RoO1xuICAgICAgICAgIGV4cHJlc3Npb25Qb3NpdGlvbnMucHVzaChjb25jYXQubGVuZ3RoKTtcbiAgICAgICAgICBjb25jYXQucHVzaCgnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gd2UgZGlkIG5vdCBmaW5kIGFuIGludGVycG9sYXRpb24sIHNvIHdlIGhhdmUgdG8gYWRkIHRoZSByZW1haW5kZXIgdG8gdGhlIHNlcGFyYXRvcnMgYXJyYXlcbiAgICAgICAgICBpZiAoaW5kZXggIT09IHRleHRMZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbmNhdC5wdXNoKHVuZXNjYXBlVGV4dCh0ZXh0LnN1YnN0cmluZyhpbmRleCkpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ29uY2F0ZW5hdGluZyBleHByZXNzaW9ucyBtYWtlcyBpdCBoYXJkIHRvIHJlYXNvbiBhYm91dCB3aGV0aGVyIHNvbWUgY29tYmluYXRpb24gb2ZcbiAgICAgIC8vIGNvbmNhdGVuYXRlZCB2YWx1ZXMgYXJlIHVuc2FmZSB0byB1c2UgYW5kIGNvdWxkIGVhc2lseSBsZWFkIHRvIFhTUy4gIEJ5IHJlcXVpcmluZyB0aGF0IGFcbiAgICAgIC8vIHNpbmdsZSBleHByZXNzaW9uIGJlIHVzZWQgZm9yIGlmcmFtZVtzcmNdLCBvYmplY3Rbc3JjXSwgZXRjLiwgd2UgZW5zdXJlIHRoYXQgdGhlIHZhbHVlXG4gICAgICAvLyB0aGF0J3MgdXNlZCBpcyBhc3NpZ25lZCBvciBjb25zdHJ1Y3RlZCBieSBzb21lIEpTIGNvZGUgc29tZXdoZXJlIHRoYXQgaXMgbW9yZSB0ZXN0YWJsZSBvclxuICAgICAgLy8gbWFrZSBpdCBvYnZpb3VzIHRoYXQgeW91IGJvdW5kIHRoZSB2YWx1ZSB0byBzb21lIHVzZXIgY29udHJvbGxlZCB2YWx1ZS4gIFRoaXMgaGVscHMgcmVkdWNlXG4gICAgICAvLyB0aGUgbG9hZCB3aGVuIGF1ZGl0aW5nIGZvciBYU1MgaXNzdWVzLlxuICAgICAgaWYgKHRydXN0ZWRDb250ZXh0ICYmIGNvbmNhdC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgJGludGVycG9sYXRlTWluRXJyLnRocm93Tm9jb25jYXQodGV4dCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghbXVzdEhhdmVFeHByZXNzaW9uIHx8IGV4cHJlc3Npb25zLmxlbmd0aCkge1xuICAgICAgICB2YXIgY29tcHV0ZSA9IGZ1bmN0aW9uKHZhbHVlcykge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhbGxPck5vdGhpbmcgJiYgaXNVbmRlZmluZWQodmFsdWVzW2ldKSkgcmV0dXJuO1xuICAgICAgICAgICAgY29uY2F0W2V4cHJlc3Npb25Qb3NpdGlvbnNbaV1dID0gdmFsdWVzW2ldO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY29uY2F0LmpvaW4oJycpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHRydXN0ZWRDb250ZXh0ID9cbiAgICAgICAgICAgICRzY2UuZ2V0VHJ1c3RlZCh0cnVzdGVkQ29udGV4dCwgdmFsdWUpIDpcbiAgICAgICAgICAgICRzY2UudmFsdWVPZih2YWx1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiBpbnRlcnBvbGF0aW9uRm4oY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheShpaSk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGZvciAoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhbHVlc1tpXSA9IHBhcnNlRm5zW2ldKGNvbnRleHQpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGUodmFsdWVzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcigkaW50ZXJwb2xhdGVNaW5FcnIuaW50ZXJyKHRleHQsIGVycikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSwge1xuICAgICAgICAgIC8vIGFsbCBvZiB0aGVzZSBwcm9wZXJ0aWVzIGFyZSB1bmRvY3VtZW50ZWQgZm9yIG5vd1xuICAgICAgICAgIGV4cDogdGV4dCwgLy9qdXN0IGZvciBjb21wYXRpYmlsaXR5IHdpdGggcmVndWxhciB3YXRjaGVycyBjcmVhdGVkIHZpYSAkd2F0Y2hcbiAgICAgICAgICBleHByZXNzaW9uczogZXhwcmVzc2lvbnMsXG4gICAgICAgICAgJCR3YXRjaERlbGVnYXRlOiBmdW5jdGlvbihzY29wZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoR3JvdXAocGFyc2VGbnMsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbiBpbnRlcnBvbGF0ZUZuV2F0Y2hlcih2YWx1ZXMsIG9sZFZhbHVlcykge1xuICAgICAgICAgICAgICB2YXIgY3VyclZhbHVlID0gY29tcHV0ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgICBsaXN0ZW5lci5jYWxsKHRoaXMsIGN1cnJWYWx1ZSwgdmFsdWVzICE9PSBvbGRWYWx1ZXMgPyBsYXN0VmFsdWUgOiBjdXJyVmFsdWUsIHNjb3BlKTtcbiAgICAgICAgICAgICAgbGFzdFZhbHVlID0gY3VyclZhbHVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VTdHJpbmdpZnlJbnRlcmNlcHRvcih2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhbHVlID0gZ2V0VmFsdWUodmFsdWUpO1xuICAgICAgICAgIHJldHVybiBhbGxPck5vdGhpbmcgJiYgIWlzRGVmaW5lZCh2YWx1ZSkgPyB2YWx1ZSA6IHN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKCRpbnRlcnBvbGF0ZU1pbkVyci5pbnRlcnIodGV4dCwgZXJyKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaW50ZXJwb2xhdGUjc3RhcnRTeW1ib2xcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTeW1ib2wgdG8gZGVub3RlIHRoZSBzdGFydCBvZiBleHByZXNzaW9uIGluIHRoZSBpbnRlcnBvbGF0ZWQgc3RyaW5nLiBEZWZhdWx0cyB0byBge3tgLlxuICAgICAqXG4gICAgICogVXNlIHtAbGluayBuZy4kaW50ZXJwb2xhdGVQcm92aWRlciNzdGFydFN5bWJvbCBgJGludGVycG9sYXRlUHJvdmlkZXIuc3RhcnRTeW1ib2xgfSB0byBjaGFuZ2VcbiAgICAgKiB0aGUgc3ltYm9sLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3N0cmluZ30gc3RhcnQgc3ltYm9sLlxuICAgICAqL1xuICAgICRpbnRlcnBvbGF0ZS5zdGFydFN5bWJvbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHN0YXJ0U3ltYm9sO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkaW50ZXJwb2xhdGUjZW5kU3ltYm9sXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU3ltYm9sIHRvIGRlbm90ZSB0aGUgZW5kIG9mIGV4cHJlc3Npb24gaW4gdGhlIGludGVycG9sYXRlZCBzdHJpbmcuIERlZmF1bHRzIHRvIGB9fWAuXG4gICAgICpcbiAgICAgKiBVc2Uge0BsaW5rIG5nLiRpbnRlcnBvbGF0ZVByb3ZpZGVyI2VuZFN5bWJvbCBgJGludGVycG9sYXRlUHJvdmlkZXIuZW5kU3ltYm9sYH0gdG8gY2hhbmdlXG4gICAgICogdGhlIHN5bWJvbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IGVuZCBzeW1ib2wuXG4gICAgICovXG4gICAgJGludGVycG9sYXRlLmVuZFN5bWJvbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGVuZFN5bWJvbDtcbiAgICB9O1xuXG4gICAgcmV0dXJuICRpbnRlcnBvbGF0ZTtcbiAgfV07XG59XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJEludGVydmFsUHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckd2luZG93JywgJyRxJywgJyQkcScsICckYnJvd3NlcicsXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkd2luZG93LCAgICRxLCAgICQkcSwgICAkYnJvd3Nlcikge1xuICAgIHZhciBpbnRlcnZhbHMgPSB7fTtcblxuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAgKiBAbmFtZSAkaW50ZXJ2YWxcbiAgICAgICpcbiAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAqIEFuZ3VsYXIncyB3cmFwcGVyIGZvciBgd2luZG93LnNldEludGVydmFsYC4gVGhlIGBmbmAgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZXZlcnkgYGRlbGF5YFxuICAgICAgKiBtaWxsaXNlY29uZHMuXG4gICAgICAqXG4gICAgICAqIFRoZSByZXR1cm4gdmFsdWUgb2YgcmVnaXN0ZXJpbmcgYW4gaW50ZXJ2YWwgZnVuY3Rpb24gaXMgYSBwcm9taXNlLiBUaGlzIHByb21pc2Ugd2lsbCBiZVxuICAgICAgKiBub3RpZmllZCB1cG9uIGVhY2ggdGljayBvZiB0aGUgaW50ZXJ2YWwsIGFuZCB3aWxsIGJlIHJlc29sdmVkIGFmdGVyIGBjb3VudGAgaXRlcmF0aW9ucywgb3JcbiAgICAgICogcnVuIGluZGVmaW5pdGVseSBpZiBgY291bnRgIGlzIG5vdCBkZWZpbmVkLiBUaGUgdmFsdWUgb2YgdGhlIG5vdGlmaWNhdGlvbiB3aWxsIGJlIHRoZVxuICAgICAgKiBudW1iZXIgb2YgaXRlcmF0aW9ucyB0aGF0IGhhdmUgcnVuLlxuICAgICAgKiBUbyBjYW5jZWwgYW4gaW50ZXJ2YWwsIGNhbGwgYCRpbnRlcnZhbC5jYW5jZWwocHJvbWlzZSlgLlxuICAgICAgKlxuICAgICAgKiBJbiB0ZXN0cyB5b3UgY2FuIHVzZSB7QGxpbmsgbmdNb2NrLiRpbnRlcnZhbCNmbHVzaCBgJGludGVydmFsLmZsdXNoKG1pbGxpcylgfSB0b1xuICAgICAgKiBtb3ZlIGZvcndhcmQgYnkgYG1pbGxpc2AgbWlsbGlzZWNvbmRzIGFuZCB0cmlnZ2VyIGFueSBmdW5jdGlvbnMgc2NoZWR1bGVkIHRvIHJ1biBpbiB0aGF0XG4gICAgICAqIHRpbWUuXG4gICAgICAqXG4gICAgICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAgICAqICoqTm90ZSoqOiBJbnRlcnZhbHMgY3JlYXRlZCBieSB0aGlzIHNlcnZpY2UgbXVzdCBiZSBleHBsaWNpdGx5IGRlc3Ryb3llZCB3aGVuIHlvdSBhcmUgZmluaXNoZWRcbiAgICAgICogd2l0aCB0aGVtLiAgSW4gcGFydGljdWxhciB0aGV5IGFyZSBub3QgYXV0b21hdGljYWxseSBkZXN0cm95ZWQgd2hlbiBhIGNvbnRyb2xsZXIncyBzY29wZSBvciBhXG4gICAgICAqIGRpcmVjdGl2ZSdzIGVsZW1lbnQgYXJlIGRlc3Ryb3llZC5cbiAgICAgICogWW91IHNob3VsZCB0YWtlIHRoaXMgaW50byBjb25zaWRlcmF0aW9uIGFuZCBtYWtlIHN1cmUgdG8gYWx3YXlzIGNhbmNlbCB0aGUgaW50ZXJ2YWwgYXQgdGhlXG4gICAgICAqIGFwcHJvcHJpYXRlIG1vbWVudC4gIFNlZSB0aGUgZXhhbXBsZSBiZWxvdyBmb3IgbW9yZSBkZXRhaWxzIG9uIGhvdyBhbmQgd2hlbiB0byBkbyB0aGlzLlxuICAgICAgKiA8L2Rpdj5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmbiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCByZXBlYXRlZGx5LiBJZiBubyBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgICAgKiAgIGFyZSBwYXNzZWQgKHNlZSBiZWxvdyksIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCBpdGVyYXRpb24gY291bnQuXG4gICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZWFjaCBmdW5jdGlvbiBjYWxsLlxuICAgICAgKiBAcGFyYW0ge251bWJlcj19IFtjb3VudD0wXSBOdW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0LiBJZiBub3Qgc2V0LCBvciAwLCB3aWxsIHJlcGVhdFxuICAgICAgKiAgIGluZGVmaW5pdGVseS5cbiAgICAgICogQHBhcmFtIHtib29sZWFuPX0gW2ludm9rZUFwcGx5PXRydWVdIElmIHNldCB0byBgZmFsc2VgIHNraXBzIG1vZGVsIGRpcnR5IGNoZWNraW5nLCBvdGhlcndpc2VcbiAgICAgICogICB3aWxsIGludm9rZSBgZm5gIHdpdGhpbiB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGFwcGx5ICRhcHBseX0gYmxvY2suXG4gICAgICAqIEBwYXJhbSB7Li4uKj19IFBhc3MgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRvIHRoZSBleGVjdXRlZCBmdW5jdGlvbi5cbiAgICAgICogQHJldHVybnMge3Byb21pc2V9IEEgcHJvbWlzZSB3aGljaCB3aWxsIGJlIG5vdGlmaWVkIG9uIGVhY2ggaXRlcmF0aW9uLiBJdCB3aWxsIHJlc29sdmUgb25jZSBhbGwgaXRlcmF0aW9ucyBvZiB0aGUgaW50ZXJ2YWwgY29tcGxldGUuXG4gICAgICAqXG4gICAgICAqIEBleGFtcGxlXG4gICAgICAqIDxleGFtcGxlIG1vZHVsZT1cImludGVydmFsRXhhbXBsZVwiIG5hbWU9XCJpbnRlcnZhbC1zZXJ2aWNlXCI+XG4gICAgICAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAqICAgPHNjcmlwdD5cbiAgICAgICogICAgIGFuZ3VsYXIubW9kdWxlKCdpbnRlcnZhbEV4YW1wbGUnLCBbXSlcbiAgICAgICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGludGVydmFsJyxcbiAgICAgICogICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRpbnRlcnZhbCkge1xuICAgICAgKiAgICAgICAgICAgJHNjb3BlLmZvcm1hdCA9ICdNL2QveXkgaDptbTpzcyBhJztcbiAgICAgICogICAgICAgICAgICRzY29wZS5ibG9vZF8xID0gMTAwO1xuICAgICAgKiAgICAgICAgICAgJHNjb3BlLmJsb29kXzIgPSAxMjA7XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICB2YXIgc3RvcDtcbiAgICAgICogICAgICAgICAgICRzY29wZS5maWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgKiAgICAgICAgICAgICAvLyBEb24ndCBzdGFydCBhIG5ldyBmaWdodCBpZiB3ZSBhcmUgYWxyZWFkeSBmaWdodGluZ1xuICAgICAgKiAgICAgICAgICAgICBpZiAoIGFuZ3VsYXIuaXNEZWZpbmVkKHN0b3ApICkgcmV0dXJuO1xuICAgICAgKlxuICAgICAgKiAgICAgICAgICAgICBzdG9wID0gJGludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgKiAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYmxvb2RfMSA+IDAgJiYgJHNjb3BlLmJsb29kXzIgPiAwKSB7XG4gICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuYmxvb2RfMSA9ICRzY29wZS5ibG9vZF8xIC0gMztcbiAgICAgICogICAgICAgICAgICAgICAgICRzY29wZS5ibG9vZF8yID0gJHNjb3BlLmJsb29kXzIgLSA0O1xuICAgICAgKiAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAqICAgICAgICAgICAgICAgICAkc2NvcGUuc3RvcEZpZ2h0KCk7XG4gICAgICAqICAgICAgICAgICAgICAgfVxuICAgICAgKiAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgKiAgICAgICAgICAgfTtcbiAgICAgICpcbiAgICAgICogICAgICAgICAgICRzY29wZS5zdG9wRmlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICogICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHN0b3ApKSB7XG4gICAgICAqICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChzdG9wKTtcbiAgICAgICogICAgICAgICAgICAgICBzdG9wID0gdW5kZWZpbmVkO1xuICAgICAgKiAgICAgICAgICAgICB9XG4gICAgICAqICAgICAgICAgICB9O1xuICAgICAgKlxuICAgICAgKiAgICAgICAgICAgJHNjb3BlLnJlc2V0RmlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICogICAgICAgICAgICAgJHNjb3BlLmJsb29kXzEgPSAxMDA7XG4gICAgICAqICAgICAgICAgICAgICRzY29wZS5ibG9vZF8yID0gMTIwO1xuICAgICAgKiAgICAgICAgICAgfTtcbiAgICAgICpcbiAgICAgICogICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAqICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBpbnRlcnZhbCBpcyBkZXN0cm95ZWQgdG9vXG4gICAgICAqICAgICAgICAgICAgICRzY29wZS5zdG9wRmlnaHQoKTtcbiAgICAgICogICAgICAgICAgIH0pO1xuICAgICAgKiAgICAgICAgIH1dKVxuICAgICAgKiAgICAgICAvLyBSZWdpc3RlciB0aGUgJ215Q3VycmVudFRpbWUnIGRpcmVjdGl2ZSBmYWN0b3J5IG1ldGhvZC5cbiAgICAgICogICAgICAgLy8gV2UgaW5qZWN0ICRpbnRlcnZhbCBhbmQgZGF0ZUZpbHRlciBzZXJ2aWNlIHNpbmNlIHRoZSBmYWN0b3J5IG1ldGhvZCBpcyBESS5cbiAgICAgICogICAgICAgLmRpcmVjdGl2ZSgnbXlDdXJyZW50VGltZScsIFsnJGludGVydmFsJywgJ2RhdGVGaWx0ZXInLFxuICAgICAgKiAgICAgICAgIGZ1bmN0aW9uKCRpbnRlcnZhbCwgZGF0ZUZpbHRlcikge1xuICAgICAgKiAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBkaXJlY3RpdmUgbGluayBmdW5jdGlvbi4gKGNvbXBpbGUgZnVuY3Rpb24gbm90IG5lZWRlZClcbiAgICAgICogICAgICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICogICAgICAgICAgICAgdmFyIGZvcm1hdCwgIC8vIGRhdGUgZm9ybWF0XG4gICAgICAqICAgICAgICAgICAgICAgICBzdG9wVGltZTsgLy8gc28gdGhhdCB3ZSBjYW4gY2FuY2VsIHRoZSB0aW1lIHVwZGF0ZXNcbiAgICAgICpcbiAgICAgICogICAgICAgICAgICAgLy8gdXNlZCB0byB1cGRhdGUgdGhlIFVJXG4gICAgICAqICAgICAgICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWUoKSB7XG4gICAgICAqICAgICAgICAgICAgICAgZWxlbWVudC50ZXh0KGRhdGVGaWx0ZXIobmV3IERhdGUoKSwgZm9ybWF0KSk7XG4gICAgICAqICAgICAgICAgICAgIH1cbiAgICAgICpcbiAgICAgICogICAgICAgICAgICAgLy8gd2F0Y2ggdGhlIGV4cHJlc3Npb24sIGFuZCB1cGRhdGUgdGhlIFVJIG9uIGNoYW5nZS5cbiAgICAgICogICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHJzLm15Q3VycmVudFRpbWUsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAqICAgICAgICAgICAgICAgZm9ybWF0ID0gdmFsdWU7XG4gICAgICAqICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgICAgKiAgICAgICAgICAgICB9KTtcbiAgICAgICpcbiAgICAgICogICAgICAgICAgICAgc3RvcFRpbWUgPSAkaW50ZXJ2YWwodXBkYXRlVGltZSwgMTAwMCk7XG4gICAgICAqXG4gICAgICAqICAgICAgICAgICAgIC8vIGxpc3RlbiBvbiBET00gZGVzdHJveSAocmVtb3ZhbCkgZXZlbnQsIGFuZCBjYW5jZWwgdGhlIG5leHQgVUkgdXBkYXRlXG4gICAgICAqICAgICAgICAgICAgIC8vIHRvIHByZXZlbnQgdXBkYXRpbmcgdGltZSBhZnRlciB0aGUgRE9NIGVsZW1lbnQgd2FzIHJlbW92ZWQuXG4gICAgICAqICAgICAgICAgICAgIGVsZW1lbnQub24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAqICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbChzdG9wVGltZSk7XG4gICAgICAqICAgICAgICAgICAgIH0pO1xuICAgICAgKiAgICAgICAgICAgfVxuICAgICAgKiAgICAgICAgIH1dKTtcbiAgICAgICogICA8L3NjcmlwdD5cbiAgICAgICpcbiAgICAgICogICA8ZGl2PlxuICAgICAgKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICogICAgICAgPGxhYmVsPkRhdGUgZm9ybWF0OiA8aW5wdXQgbmctbW9kZWw9XCJmb3JtYXRcIj48L2xhYmVsPiA8aHIvPlxuICAgICAgKiAgICAgICBDdXJyZW50IHRpbWUgaXM6IDxzcGFuIG15LWN1cnJlbnQtdGltZT1cImZvcm1hdFwiPjwvc3Bhbj5cbiAgICAgICogICAgICAgPGhyLz5cbiAgICAgICogICAgICAgQmxvb2QgMSA6IDxmb250IGNvbG9yPSdyZWQnPnt7Ymxvb2RfMX19PC9mb250PlxuICAgICAgKiAgICAgICBCbG9vZCAyIDogPGZvbnQgY29sb3I9J3JlZCc+e3tibG9vZF8yfX08L2ZvbnQ+XG4gICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJmaWdodCgpXCI+RmlnaHQ8L2J1dHRvbj5cbiAgICAgICogICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1uZy1jbGljaz1cInN0b3BGaWdodCgpXCI+U3RvcEZpZ2h0PC9idXR0b24+XG4gICAgICAqICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtbmctY2xpY2s9XCJyZXNldEZpZ2h0KClcIj5yZXNldEZpZ2h0PC9idXR0b24+XG4gICAgICAqICAgICA8L2Rpdj5cbiAgICAgICogICA8L2Rpdj5cbiAgICAgICpcbiAgICAgICogPC9maWxlPlxuICAgICAgKiA8L2V4YW1wbGU+XG4gICAgICAqL1xuICAgIGZ1bmN0aW9uIGludGVydmFsKGZuLCBkZWxheSwgY291bnQsIGludm9rZUFwcGx5KSB7XG4gICAgICB2YXIgaGFzUGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDQsXG4gICAgICAgICAgYXJncyA9IGhhc1BhcmFtcyA/IHNsaWNlQXJncyhhcmd1bWVudHMsIDQpIDogW10sXG4gICAgICAgICAgc2V0SW50ZXJ2YWwgPSAkd2luZG93LnNldEludGVydmFsLFxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwgPSAkd2luZG93LmNsZWFySW50ZXJ2YWwsXG4gICAgICAgICAgaXRlcmF0aW9uID0gMCxcbiAgICAgICAgICBza2lwQXBwbHkgPSAoaXNEZWZpbmVkKGludm9rZUFwcGx5KSAmJiAhaW52b2tlQXBwbHkpLFxuICAgICAgICAgIGRlZmVycmVkID0gKHNraXBBcHBseSA/ICQkcSA6ICRxKS5kZWZlcigpLFxuICAgICAgICAgIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICBjb3VudCA9IGlzRGVmaW5lZChjb3VudCkgPyBjb3VudCA6IDA7XG5cbiAgICAgIHByb21pc2UuJCRpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gdGljaygpIHtcbiAgICAgICAgaWYgKHNraXBBcHBseSkge1xuICAgICAgICAgICRicm93c2VyLmRlZmVyKGNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGRlZmVycmVkLm5vdGlmeShpdGVyYXRpb24rKyk7XG5cbiAgICAgICAgaWYgKGNvdW50ID4gMCAmJiBpdGVyYXRpb24gPj0gY291bnQpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGl0ZXJhdGlvbik7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbChwcm9taXNlLiQkaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgZGVsZXRlIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNraXBBcHBseSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcblxuICAgICAgfSwgZGVsYXkpO1xuXG4gICAgICBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdID0gZGVmZXJyZWQ7XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuXG4gICAgICBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgaWYgKCFoYXNQYXJhbXMpIHtcbiAgICAgICAgICBmbihpdGVyYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAgLyoqXG4gICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICogQG5hbWUgJGludGVydmFsI2NhbmNlbFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogQ2FuY2VscyBhIHRhc2sgYXNzb2NpYXRlZCB3aXRoIHRoZSBgcHJvbWlzZWAuXG4gICAgICAqXG4gICAgICAqIEBwYXJhbSB7UHJvbWlzZT19IHByb21pc2UgcmV0dXJuZWQgYnkgdGhlIGAkaW50ZXJ2YWxgIGZ1bmN0aW9uLlxuICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgd2FzIHN1Y2Nlc3NmdWxseSBjYW5jZWxlZC5cbiAgICAgICovXG4gICAgaW50ZXJ2YWwuY2FuY2VsID0gZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKHByb21pc2UgJiYgcHJvbWlzZS4kJGludGVydmFsSWQgaW4gaW50ZXJ2YWxzKSB7XG4gICAgICAgIC8vIEludGVydmFsIGNhbmNlbHMgc2hvdWxkIG5vdCByZXBvcnQgYXMgdW5oYW5kbGVkIHByb21pc2UuXG4gICAgICAgIG1hcmtRRXhjZXB0aW9uSGFuZGxlZChpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdLnByb21pc2UpO1xuICAgICAgICBpbnRlcnZhbHNbcHJvbWlzZS4kJGludGVydmFsSWRdLnJlamVjdCgnY2FuY2VsZWQnKTtcbiAgICAgICAgJHdpbmRvdy5jbGVhckludGVydmFsKHByb21pc2UuJCRpbnRlcnZhbElkKTtcbiAgICAgICAgZGVsZXRlIGludGVydmFsc1twcm9taXNlLiQkaW50ZXJ2YWxJZF07XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gaW50ZXJ2YWw7XG4gIH1dO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkanNvbnBDYWxsYmFja3NcbiAqIEByZXF1aXJlcyAkd2luZG93XG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgc2VydmljZSBoYW5kbGVzIHRoZSBsaWZlY3ljbGUgb2YgY2FsbGJhY2tzIHRvIGhhbmRsZSBKU09OUCByZXF1ZXN0cy5cbiAqIE92ZXJyaWRlIHRoaXMgc2VydmljZSBpZiB5b3Ugd2lzaCB0byBjdXN0b21pc2Ugd2hlcmUgdGhlIGNhbGxiYWNrcyBhcmUgc3RvcmVkIGFuZFxuICogaG93IHRoZXkgdmFyeSBjb21wYXJlZCB0byB0aGUgcmVxdWVzdGVkIHVybC5cbiAqL1xudmFyICRqc29ucENhbGxiYWNrc1Byb3ZpZGVyID0gLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2FsbGJhY2tzID0gYW5ndWxhci5jYWxsYmFja3M7XG4gICAgdmFyIGNhbGxiYWNrTWFwID0ge307XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDYWxsYmFjayhjYWxsYmFja0lkKSB7XG4gICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNhbGxiYWNrLmRhdGEgPSBkYXRhO1xuICAgICAgICBjYWxsYmFjay5jYWxsZWQgPSB0cnVlO1xuICAgICAgfTtcbiAgICAgIGNhbGxiYWNrLmlkID0gY2FsbGJhY2tJZDtcbiAgICAgIHJldHVybiBjYWxsYmFjaztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkanNvbnBDYWxsYmFja3MjY3JlYXRlQ2FsbGJhY2tcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgdGhlIHVybCBvZiB0aGUgSlNPTlAgcmVxdWVzdFxuICAgICAgICogQHJldHVybnMge3N0cmluZ30gdGhlIGNhbGxiYWNrIHBhdGggdG8gc2VuZCB0byB0aGUgc2VydmVyIGFzIHBhcnQgb2YgdGhlIEpTT05QIHJlcXVlc3RcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICoge0BsaW5rICRodHRwQmFja2VuZH0gY2FsbHMgdGhpcyBtZXRob2QgdG8gY3JlYXRlIGEgY2FsbGJhY2sgYW5kIGdldCBob2xkIG9mIHRoZSBwYXRoIHRvIHRoZSBjYWxsYmFja1xuICAgICAgICogdG8gcGFzcyB0byB0aGUgc2VydmVyLCB3aGljaCB3aWxsIGJlIHVzZWQgdG8gY2FsbCB0aGUgY2FsbGJhY2sgd2l0aCBpdHMgcGF5bG9hZCBpbiB0aGUgSlNPTlAgcmVzcG9uc2UuXG4gICAgICAgKi9cbiAgICAgIGNyZWF0ZUNhbGxiYWNrOiBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrSWQgPSAnXycgKyAoY2FsbGJhY2tzLiQkY291bnRlcisrKS50b1N0cmluZygzNik7XG4gICAgICAgIHZhciBjYWxsYmFja1BhdGggPSAnYW5ndWxhci5jYWxsYmFja3MuJyArIGNhbGxiYWNrSWQ7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGNyZWF0ZUNhbGxiYWNrKGNhbGxiYWNrSWQpO1xuICAgICAgICBjYWxsYmFja01hcFtjYWxsYmFja1BhdGhdID0gY2FsbGJhY2tzW2NhbGxiYWNrSWRdID0gY2FsbGJhY2s7XG4gICAgICAgIHJldHVybiBjYWxsYmFja1BhdGg7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkanNvbnBDYWxsYmFja3Mjd2FzQ2FsbGVkXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2FsbGJhY2tQYXRoIHRoZSBwYXRoIHRvIHRoZSBjYWxsYmFjayB0aGF0IHdhcyBzZW50IGluIHRoZSBKU09OUCByZXF1ZXN0XG4gICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gd2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gY2FsbGVkLCBhcyBhIHJlc3VsdCBvZiB0aGUgSlNPTlAgcmVzcG9uc2VcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICoge0BsaW5rICRodHRwQmFja2VuZH0gY2FsbHMgdGhpcyBtZXRob2QgdG8gZmluZCBvdXQgd2hldGhlciB0aGUgSlNPTlAgcmVzcG9uc2UgYWN0dWFsbHkgY2FsbGVkIHRoZVxuICAgICAgICogY2FsbGJhY2sgdGhhdCB3YXMgcGFzc2VkIGluIHRoZSByZXF1ZXN0LlxuICAgICAgICovXG4gICAgICB3YXNDYWxsZWQ6IGZ1bmN0aW9uKGNhbGxiYWNrUGF0aCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2tNYXBbY2FsbGJhY2tQYXRoXS5jYWxsZWQ7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkanNvbnBDYWxsYmFja3MjZ2V0UmVzcG9uc2VcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjYWxsYmFja1BhdGggdGhlIHBhdGggdG8gdGhlIGNhbGxiYWNrIHRoYXQgd2FzIHNlbnQgaW4gdGhlIEpTT05QIHJlcXVlc3RcbiAgICAgICAqIEByZXR1cm5zIHsqfSB0aGUgZGF0YSByZWNlaXZlZCBmcm9tIHRoZSByZXNwb25zZSB2aWEgdGhlIHJlZ2lzdGVyZWQgY2FsbGJhY2tcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICoge0BsaW5rICRodHRwQmFja2VuZH0gY2FsbHMgdGhpcyBtZXRob2QgdG8gZ2V0IGhvbGQgb2YgdGhlIGRhdGEgdGhhdCB3YXMgcHJvdmlkZWQgdG8gdGhlIGNhbGxiYWNrXG4gICAgICAgKiBpbiB0aGUgSlNPTlAgcmVzcG9uc2UuXG4gICAgICAgKi9cbiAgICAgIGdldFJlc3BvbnNlOiBmdW5jdGlvbihjYWxsYmFja1BhdGgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFwW2NhbGxiYWNrUGF0aF0uZGF0YTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRqc29ucENhbGxiYWNrcyNyZW1vdmVDYWxsYmFja1xuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNhbGxiYWNrUGF0aCB0aGUgcGF0aCB0byB0aGUgY2FsbGJhY2sgdGhhdCB3YXMgc2VudCBpbiB0aGUgSlNPTlAgcmVxdWVzdFxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiB7QGxpbmsgJGh0dHBCYWNrZW5kfSBjYWxscyB0aGlzIG1ldGhvZCB0byByZW1vdmUgdGhlIGNhbGxiYWNrIGFmdGVyIHRoZSBKU09OUCByZXF1ZXN0IGhhc1xuICAgICAgICogY29tcGxldGVkIG9yIHRpbWVkLW91dC5cbiAgICAgICAqL1xuICAgICAgcmVtb3ZlQ2FsbGJhY2s6IGZ1bmN0aW9uKGNhbGxiYWNrUGF0aCkge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBjYWxsYmFja01hcFtjYWxsYmFja1BhdGhdO1xuICAgICAgICBkZWxldGUgY2FsbGJhY2tzW2NhbGxiYWNrLmlkXTtcbiAgICAgICAgZGVsZXRlIGNhbGxiYWNrTWFwW2NhbGxiYWNrUGF0aF07XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn07XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRsb2NhbGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICRsb2NhbGUgc2VydmljZSBwcm92aWRlcyBsb2NhbGl6YXRpb24gcnVsZXMgZm9yIHZhcmlvdXMgQW5ndWxhciBjb21wb25lbnRzLiBBcyBvZiByaWdodCBub3cgdGhlXG4gKiBvbmx5IHB1YmxpYyBhcGkgaXM6XG4gKlxuICogKiBgaWRgIOKAkyBge3N0cmluZ31gIOKAkyBsb2NhbGUgaWQgZm9ybWF0dGVkIGFzIGBsYW5ndWFnZUlkLWNvdW50cnlJZGAgKGUuZy4gYGVuLXVzYClcbiAqL1xuXG52YXIgUEFUSF9NQVRDSCA9IC9eKFtePyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyxcbiAgICBERUZBVUxUX1BPUlRTID0geydodHRwJzogODAsICdodHRwcyc6IDQ0MywgJ2Z0cCc6IDIxfTtcbnZhciAkbG9jYXRpb25NaW5FcnIgPSBtaW5FcnIoJyRsb2NhdGlvbicpO1xuXG5cbi8qKlxuICogRW5jb2RlIHBhdGggdXNpbmcgZW5jb2RlVXJpU2VnbWVudCwgaWdub3JpbmcgZm9yd2FyZCBzbGFzaGVzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byBlbmNvZGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVuY29kZVBhdGgocGF0aCkge1xuICB2YXIgc2VnbWVudHMgPSBwYXRoLnNwbGl0KCcvJyksXG4gICAgICBpID0gc2VnbWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICAvLyBkZWNvZGUgZm9yd2FyZCBzbGFzaGVzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIGRvdWJsZSBlbmNvZGVkXG4gICAgc2VnbWVudHNbaV0gPSBlbmNvZGVVcmlTZWdtZW50KHNlZ21lbnRzW2ldLnJlcGxhY2UoLyUyRi9nLCAnLycpKTtcbiAgfVxuXG4gIHJldHVybiBzZWdtZW50cy5qb2luKCcvJyk7XG59XG5cbmZ1bmN0aW9uIGRlY29kZVBhdGgocGF0aCwgaHRtbDVNb2RlKSB7XG4gIHZhciBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy8nKSxcbiAgICAgIGkgPSBzZWdtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKGktLSkge1xuICAgIHNlZ21lbnRzW2ldID0gZGVjb2RlVVJJQ29tcG9uZW50KHNlZ21lbnRzW2ldKTtcbiAgICBpZiAoaHRtbDVNb2RlKSB7XG4gICAgICAvLyBlbmNvZGUgZm9yd2FyZCBzbGFzaGVzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlaW5nIG1pc3Rha2VuIGZvciBwYXRoIHNlcGFyYXRvcnNcbiAgICAgIHNlZ21lbnRzW2ldID0gc2VnbWVudHNbaV0ucmVwbGFjZSgvXFwvL2csICclMkYnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2VnbWVudHMuam9pbignLycpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUFic29sdXRlVXJsKGFic29sdXRlVXJsLCBsb2NhdGlvbk9iaikge1xuICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZShhYnNvbHV0ZVVybCk7XG5cbiAgbG9jYXRpb25PYmouJCRwcm90b2NvbCA9IHBhcnNlZFVybC5wcm90b2NvbDtcbiAgbG9jYXRpb25PYmouJCRob3N0ID0gcGFyc2VkVXJsLmhvc3RuYW1lO1xuICBsb2NhdGlvbk9iai4kJHBvcnQgPSB0b0ludChwYXJzZWRVcmwucG9ydCkgfHwgREVGQVVMVF9QT1JUU1twYXJzZWRVcmwucHJvdG9jb2xdIHx8IG51bGw7XG59XG5cbnZhciBET1VCTEVfU0xBU0hfUkVHRVggPSAvXlxccypbXFxcXC9dezIsfS87XG5mdW5jdGlvbiBwYXJzZUFwcFVybCh1cmwsIGxvY2F0aW9uT2JqLCBodG1sNU1vZGUpIHtcblxuICBpZiAoRE9VQkxFX1NMQVNIX1JFR0VYLnRlc3QodXJsKSkge1xuICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignYmFkcGF0aCcsICdJbnZhbGlkIHVybCBcInswfVwiLicsIHVybCk7XG4gIH1cblxuICB2YXIgcHJlZml4ZWQgPSAodXJsLmNoYXJBdCgwKSAhPT0gJy8nKTtcbiAgaWYgKHByZWZpeGVkKSB7XG4gICAgdXJsID0gJy8nICsgdXJsO1xuICB9XG4gIHZhciBtYXRjaCA9IHVybFJlc29sdmUodXJsKTtcbiAgdmFyIHBhdGggPSBwcmVmaXhlZCAmJiBtYXRjaC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyA/IG1hdGNoLnBhdGhuYW1lLnN1YnN0cmluZygxKSA6IG1hdGNoLnBhdGhuYW1lO1xuICBsb2NhdGlvbk9iai4kJHBhdGggPSBkZWNvZGVQYXRoKHBhdGgsIGh0bWw1TW9kZSk7XG4gIGxvY2F0aW9uT2JqLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShtYXRjaC5zZWFyY2gpO1xuICBsb2NhdGlvbk9iai4kJGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2guaGFzaCk7XG5cbiAgLy8gbWFrZSBzdXJlIHBhdGggc3RhcnRzIHdpdGggJy8nO1xuICBpZiAobG9jYXRpb25PYmouJCRwYXRoICYmIGxvY2F0aW9uT2JqLiQkcGF0aC5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgIGxvY2F0aW9uT2JqLiQkcGF0aCA9ICcvJyArIGxvY2F0aW9uT2JqLiQkcGF0aDtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdGFydHNXaXRoKHN0ciwgc2VhcmNoKSB7XG4gIHJldHVybiBzdHIuc2xpY2UoMCwgc2VhcmNoLmxlbmd0aCkgPT09IHNlYXJjaDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IHJldHVybnMgdGV4dCBmcm9tIGB1cmxgIGFmdGVyIGBiYXNlYCBvciBgdW5kZWZpbmVkYCBpZiBpdCBkb2VzIG5vdCBiZWdpbiB3aXRoXG4gKiAgICAgICAgICAgICAgICAgICB0aGUgZXhwZWN0ZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBzdHJpcEJhc2VVcmwoYmFzZSwgdXJsKSB7XG4gIGlmIChzdGFydHNXaXRoKHVybCwgYmFzZSkpIHtcbiAgICByZXR1cm4gdXJsLnN1YnN0cihiYXNlLmxlbmd0aCk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzdHJpcEhhc2godXJsKSB7XG4gIHZhciBpbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gIHJldHVybiBpbmRleCA9PT0gLTEgPyB1cmwgOiB1cmwuc3Vic3RyKDAsIGluZGV4KTtcbn1cblxuZnVuY3Rpb24gdHJpbUVtcHR5SGFzaCh1cmwpIHtcbiAgcmV0dXJuIHVybC5yZXBsYWNlKC8oIy4rKXwjJC8sICckMScpO1xufVxuXG5cbmZ1bmN0aW9uIHN0cmlwRmlsZSh1cmwpIHtcbiAgcmV0dXJuIHVybC5zdWJzdHIoMCwgc3RyaXBIYXNoKHVybCkubGFzdEluZGV4T2YoJy8nKSArIDEpO1xufVxuXG4vKiByZXR1cm4gdGhlIHNlcnZlciBvbmx5IChzY2hlbWU6Ly9ob3N0OnBvcnQpICovXG5mdW5jdGlvbiBzZXJ2ZXJCYXNlKHVybCkge1xuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwuaW5kZXhPZignLycsIHVybC5pbmRleE9mKCcvLycpICsgMikpO1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IdG1sNVVybCByZXByZXNlbnRzIGEgVVJMXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gSFRNTDUgbW9kZSBpcyBlbmFibGVkIGFuZCBzdXBwb3J0ZWRcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBhcHBCYXNlIGFwcGxpY2F0aW9uIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZU5vRmlsZSBhcHBsaWNhdGlvbiBiYXNlIFVSTCBzdHJpcHBlZCBvZiBhbnkgZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlUHJlZml4IFVSTCBwYXRoIHByZWZpeFxuICovXG5mdW5jdGlvbiBMb2NhdGlvbkh0bWw1VXJsKGFwcEJhc2UsIGFwcEJhc2VOb0ZpbGUsIGJhc2VQcmVmaXgpIHtcbiAgdGhpcy4kJGh0bWw1ID0gdHJ1ZTtcbiAgYmFzZVByZWZpeCA9IGJhc2VQcmVmaXggfHwgJyc7XG4gIHBhcnNlQWJzb2x1dGVVcmwoYXBwQmFzZSwgdGhpcyk7XG5cblxuICAvKipcbiAgICogUGFyc2UgZ2l2ZW4gSFRNTDUgKHJlZ3VsYXIpIFVSTCBzdHJpbmcgaW50byBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSFRNTDUgVVJMXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgcGF0aFVybCA9IHN0cmlwQmFzZVVybChhcHBCYXNlTm9GaWxlLCB1cmwpO1xuICAgIGlmICghaXNTdHJpbmcocGF0aFVybCkpIHtcbiAgICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignaXB0aHByZngnLCAnSW52YWxpZCB1cmwgXCJ7MH1cIiwgbWlzc2luZyBwYXRoIHByZWZpeCBcInsxfVwiLicsIHVybCxcbiAgICAgICAgICBhcHBCYXNlTm9GaWxlKTtcbiAgICB9XG5cbiAgICBwYXJzZUFwcFVybChwYXRoVXJsLCB0aGlzLCB0cnVlKTtcblxuICAgIGlmICghdGhpcy4kJHBhdGgpIHtcbiAgICAgIHRoaXMuJCRwYXRoID0gJy8nO1xuICAgIH1cblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbXBvc2UgdXJsIGFuZCB1cGRhdGUgYGFic1VybGAgcHJvcGVydHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuJCRjb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlYXJjaCA9IHRvS2V5VmFsdWUodGhpcy4kJHNlYXJjaCksXG4gICAgICAgIGhhc2ggPSB0aGlzLiQkaGFzaCA/ICcjJyArIGVuY29kZVVyaVNlZ21lbnQodGhpcy4kJGhhc2gpIDogJyc7XG5cbiAgICB0aGlzLiQkdXJsID0gZW5jb2RlUGF0aCh0aGlzLiQkcGF0aCkgKyAoc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJycpICsgaGFzaDtcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZU5vRmlsZSArIHRoaXMuJCR1cmwuc3Vic3RyKDEpOyAvLyBmaXJzdCBjaGFyIGlzIGFsd2F5cyAnLydcblxuICAgIHRoaXMuJCR1cmxVcGRhdGVkQnlMb2NhdGlvbiA9IHRydWU7XG4gIH07XG5cbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xuICAgIGlmIChyZWxIcmVmICYmIHJlbEhyZWZbMF0gPT09ICcjJykge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBsaW5rcyB0byBoYXNoIGZyYWdtZW50czpcbiAgICAgIC8vIGtlZXAgdGhlIG9sZCB1cmwgYW5kIG9ubHkgcmVwbGFjZSB0aGUgaGFzaCBmcmFnbWVudFxuICAgICAgdGhpcy5oYXNoKHJlbEhyZWYuc2xpY2UoMSkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBhcHBVcmwsIHByZXZBcHBVcmw7XG4gICAgdmFyIHJld3JpdHRlblVybDtcblxuXG4gICAgaWYgKGlzRGVmaW5lZChhcHBVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZSwgdXJsKSkpIHtcbiAgICAgIHByZXZBcHBVcmwgPSBhcHBVcmw7XG4gICAgICBpZiAoYmFzZVByZWZpeCAmJiBpc0RlZmluZWQoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGJhc2VQcmVmaXgsIGFwcFVybCkpKSB7XG4gICAgICAgIHJld3JpdHRlblVybCA9IGFwcEJhc2VOb0ZpbGUgKyAoc3RyaXBCYXNlVXJsKCcvJywgYXBwVXJsKSB8fCBhcHBVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZSArIHByZXZBcHBVcmw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0RlZmluZWQoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGFwcEJhc2VOb0ZpbGUsIHVybCkpKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlICsgYXBwVXJsO1xuICAgIH0gZWxzZSBpZiAoYXBwQmFzZU5vRmlsZSA9PT0gdXJsICsgJy8nKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlTm9GaWxlO1xuICAgIH1cbiAgICBpZiAocmV3cml0dGVuVXJsKSB7XG4gICAgICB0aGlzLiQkcGFyc2UocmV3cml0dGVuVXJsKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmV3cml0dGVuVXJsO1xuICB9O1xufVxuXG5cbi8qKlxuICogTG9jYXRpb25IYXNoYmFuZ1VybCByZXByZXNlbnRzIFVSTFxuICogVGhpcyBvYmplY3QgaXMgZXhwb3NlZCBhcyAkbG9jYXRpb24gc2VydmljZSB3aGVuIGRldmVsb3BlciBkb2Vzbid0IG9wdCBpbnRvIGh0bWw1IG1vZGUuXG4gKiBJdCBhbHNvIHNlcnZlcyBhcyB0aGUgYmFzZSBjbGFzcyBmb3IgaHRtbDUgbW9kZSBmYWxsYmFjayBvbiBsZWdhY3kgYnJvd3NlcnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZSBhcHBsaWNhdGlvbiBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2VOb0ZpbGUgYXBwbGljYXRpb24gYmFzZSBVUkwgc3RyaXBwZWQgb2YgYW55IGZpbGVuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaFByZWZpeCBoYXNoYmFuZyBwcmVmaXhcbiAqL1xuZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ1VybChhcHBCYXNlLCBhcHBCYXNlTm9GaWxlLCBoYXNoUHJlZml4KSB7XG5cbiAgcGFyc2VBYnNvbHV0ZVVybChhcHBCYXNlLCB0aGlzKTtcblxuXG4gIC8qKlxuICAgKiBQYXJzZSBnaXZlbiBoYXNoYmFuZyBVUkwgaW50byBwcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgSGFzaGJhbmcgVVJMXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLiQkcGFyc2UgPSBmdW5jdGlvbih1cmwpIHtcbiAgICB2YXIgd2l0aG91dEJhc2VVcmwgPSBzdHJpcEJhc2VVcmwoYXBwQmFzZSwgdXJsKSB8fCBzdHJpcEJhc2VVcmwoYXBwQmFzZU5vRmlsZSwgdXJsKTtcbiAgICB2YXIgd2l0aG91dEhhc2hVcmw7XG5cbiAgICBpZiAoIWlzVW5kZWZpbmVkKHdpdGhvdXRCYXNlVXJsKSAmJiB3aXRob3V0QmFzZVVybC5jaGFyQXQoMCkgPT09ICcjJykge1xuXG4gICAgICAvLyBUaGUgcmVzdCBvZiB0aGUgVVJMIHN0YXJ0cyB3aXRoIGEgaGFzaCBzbyB3ZSBoYXZlXG4gICAgICAvLyBnb3QgZWl0aGVyIGEgaGFzaGJhbmcgcGF0aCBvciBhIHBsYWluIGhhc2ggZnJhZ21lbnRcbiAgICAgIHdpdGhvdXRIYXNoVXJsID0gc3RyaXBCYXNlVXJsKGhhc2hQcmVmaXgsIHdpdGhvdXRCYXNlVXJsKTtcbiAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0SGFzaFVybCkpIHtcbiAgICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHByZWZpeCBzbyB3ZSBqdXN0IGhhdmUgYSBoYXNoIGZyYWdtZW50XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gd2l0aG91dEJhc2VVcmw7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUgd2FzIG5vIGhhc2hiYW5nIHBhdGggbm9yIGhhc2ggZnJhZ21lbnQ6XG4gICAgICAvLyBJZiB3ZSBhcmUgaW4gSFRNTDUgbW9kZSB3ZSB1c2Ugd2hhdCBpcyBsZWZ0IGFzIHRoZSBwYXRoO1xuICAgICAgLy8gT3RoZXJ3aXNlIHdlIGlnbm9yZSB3aGF0IGlzIGxlZnRcbiAgICAgIGlmICh0aGlzLiQkaHRtbDUpIHtcbiAgICAgICAgd2l0aG91dEhhc2hVcmwgPSB3aXRob3V0QmFzZVVybDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpdGhvdXRIYXNoVXJsID0gJyc7XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh3aXRob3V0QmFzZVVybCkpIHtcbiAgICAgICAgICBhcHBCYXNlID0gdXJsO1xuICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHRoaXMpLnJlcGxhY2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBhcnNlQXBwVXJsKHdpdGhvdXRIYXNoVXJsLCB0aGlzLCBmYWxzZSk7XG5cbiAgICB0aGlzLiQkcGF0aCA9IHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUodGhpcy4kJHBhdGgsIHdpdGhvdXRIYXNoVXJsLCBhcHBCYXNlKTtcblxuICAgIHRoaXMuJCRjb21wb3NlKCk7XG5cbiAgICAvKlxuICAgICAqIEluIFdpbmRvd3MsIG9uIGFuIGFuY2hvciBub2RlIG9uIGRvY3VtZW50cyBsb2FkZWQgZnJvbVxuICAgICAqIHRoZSBmaWxlc3lzdGVtLCB0aGUgYnJvd3NlciB3aWxsIHJldHVybiBhIHBhdGhuYW1lXG4gICAgICogcHJlZml4ZWQgd2l0aCB0aGUgZHJpdmUgbmFtZSAoJy9DOi9wYXRoJykgd2hlbiBhXG4gICAgICogcGF0aG5hbWUgd2l0aG91dCBhIGRyaXZlIGlzIHNldDpcbiAgICAgKiAgKiBhLnNldEF0dHJpYnV0ZSgnaHJlZicsICcvZm9vJylcbiAgICAgKiAgICogYS5wYXRobmFtZSA9PT0gJy9DOi9mb28nIC8vdHJ1ZVxuICAgICAqXG4gICAgICogSW5zaWRlIG9mIEFuZ3VsYXIsIHdlJ3JlIGFsd2F5cyB1c2luZyBwYXRobmFtZXMgdGhhdFxuICAgICAqIGRvIG5vdCBpbmNsdWRlIGRyaXZlIG5hbWVzIGZvciByb3V0aW5nLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJlbW92ZVdpbmRvd3NEcml2ZU5hbWUocGF0aCwgdXJsLCBiYXNlKSB7XG4gICAgICAvKlxuICAgICAgTWF0Y2hlcyBwYXRocyBmb3IgZmlsZSBwcm90b2NvbCBvbiB3aW5kb3dzLFxuICAgICAgc3VjaCBhcyAvQzovZm9vL2JhciwgYW5kIGNhcHR1cmVzIG9ubHkgL2Zvby9iYXIuXG4gICAgICAqL1xuICAgICAgdmFyIHdpbmRvd3NGaWxlUGF0aEV4cCA9IC9eXFwvW0EtWl06KFxcLy4qKS87XG5cbiAgICAgIHZhciBmaXJzdFBhdGhTZWdtZW50TWF0Y2g7XG5cbiAgICAgIC8vR2V0IHRoZSByZWxhdGl2ZSBwYXRoIGZyb20gdGhlIGlucHV0IFVSTC5cbiAgICAgIGlmIChzdGFydHNXaXRoKHVybCwgYmFzZSkpIHtcbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoYmFzZSwgJycpO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgaW5wdXQgVVJMIGludGVudGlvbmFsbHkgY29udGFpbnMgYSBmaXJzdCBwYXRoIHNlZ21lbnQgdGhhdCBlbmRzIHdpdGggYSBjb2xvbi5cbiAgICAgIGlmICh3aW5kb3dzRmlsZVBhdGhFeHAuZXhlYyh1cmwpKSB7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgfVxuXG4gICAgICBmaXJzdFBhdGhTZWdtZW50TWF0Y2ggPSB3aW5kb3dzRmlsZVBhdGhFeHAuZXhlYyhwYXRoKTtcbiAgICAgIHJldHVybiBmaXJzdFBhdGhTZWdtZW50TWF0Y2ggPyBmaXJzdFBhdGhTZWdtZW50TWF0Y2hbMV0gOiBwYXRoO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ29tcG9zZSBoYXNoYmFuZyBVUkwgYW5kIHVwZGF0ZSBgYWJzVXJsYCBwcm9wZXJ0eVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy4kJGNvbXBvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VhcmNoID0gdG9LZXlWYWx1ZSh0aGlzLiQkc2VhcmNoKSxcbiAgICAgICAgaGFzaCA9IHRoaXMuJCRoYXNoID8gJyMnICsgZW5jb2RlVXJpU2VnbWVudCh0aGlzLiQkaGFzaCkgOiAnJztcblxuICAgIHRoaXMuJCR1cmwgPSBlbmNvZGVQYXRoKHRoaXMuJCRwYXRoKSArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyBoYXNoO1xuICAgIHRoaXMuJCRhYnNVcmwgPSBhcHBCYXNlICsgKHRoaXMuJCR1cmwgPyBoYXNoUHJlZml4ICsgdGhpcy4kJHVybCA6ICcnKTtcblxuICAgIHRoaXMuJCR1cmxVcGRhdGVkQnlMb2NhdGlvbiA9IHRydWU7XG4gIH07XG5cbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xuICAgIGlmIChzdHJpcEhhc2goYXBwQmFzZSkgPT09IHN0cmlwSGFzaCh1cmwpKSB7XG4gICAgICB0aGlzLiQkcGFyc2UodXJsKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG59XG5cblxuLyoqXG4gKiBMb2NhdGlvbkhhc2hiYW5nVXJsIHJlcHJlc2VudHMgVVJMXG4gKiBUaGlzIG9iamVjdCBpcyBleHBvc2VkIGFzICRsb2NhdGlvbiBzZXJ2aWNlIHdoZW4gaHRtbDUgaGlzdG9yeSBhcGkgaXMgZW5hYmxlZCBidXQgdGhlIGJyb3dzZXJcbiAqIGRvZXMgbm90IHN1cHBvcnQgaXQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBwQmFzZSBhcHBsaWNhdGlvbiBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IGFwcEJhc2VOb0ZpbGUgYXBwbGljYXRpb24gYmFzZSBVUkwgc3RyaXBwZWQgb2YgYW55IGZpbGVuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaFByZWZpeCBoYXNoYmFuZyBwcmVmaXhcbiAqL1xuZnVuY3Rpb24gTG9jYXRpb25IYXNoYmFuZ0luSHRtbDVVcmwoYXBwQmFzZSwgYXBwQmFzZU5vRmlsZSwgaGFzaFByZWZpeCkge1xuICB0aGlzLiQkaHRtbDUgPSB0cnVlO1xuICBMb2NhdGlvbkhhc2hiYW5nVXJsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgdGhpcy4kJHBhcnNlTGlua1VybCA9IGZ1bmN0aW9uKHVybCwgcmVsSHJlZikge1xuICAgIGlmIChyZWxIcmVmICYmIHJlbEhyZWZbMF0gPT09ICcjJykge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBsaW5rcyB0byBoYXNoIGZyYWdtZW50czpcbiAgICAgIC8vIGtlZXAgdGhlIG9sZCB1cmwgYW5kIG9ubHkgcmVwbGFjZSB0aGUgaGFzaCBmcmFnbWVudFxuICAgICAgdGhpcy5oYXNoKHJlbEhyZWYuc2xpY2UoMSkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHJld3JpdHRlblVybDtcbiAgICB2YXIgYXBwVXJsO1xuXG4gICAgaWYgKGFwcEJhc2UgPT09IHN0cmlwSGFzaCh1cmwpKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSB1cmw7XG4gICAgfSBlbHNlIGlmICgoYXBwVXJsID0gc3RyaXBCYXNlVXJsKGFwcEJhc2VOb0ZpbGUsIHVybCkpKSB7XG4gICAgICByZXdyaXR0ZW5VcmwgPSBhcHBCYXNlICsgaGFzaFByZWZpeCArIGFwcFVybDtcbiAgICB9IGVsc2UgaWYgKGFwcEJhc2VOb0ZpbGUgPT09IHVybCArICcvJykge1xuICAgICAgcmV3cml0dGVuVXJsID0gYXBwQmFzZU5vRmlsZTtcbiAgICB9XG4gICAgaWYgKHJld3JpdHRlblVybCkge1xuICAgICAgdGhpcy4kJHBhcnNlKHJld3JpdHRlblVybCk7XG4gICAgfVxuICAgIHJldHVybiAhIXJld3JpdHRlblVybDtcbiAgfTtcblxuICB0aGlzLiQkY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWFyY2ggPSB0b0tleVZhbHVlKHRoaXMuJCRzZWFyY2gpLFxuICAgICAgICBoYXNoID0gdGhpcy4kJGhhc2ggPyAnIycgKyBlbmNvZGVVcmlTZWdtZW50KHRoaXMuJCRoYXNoKSA6ICcnO1xuXG4gICAgdGhpcy4kJHVybCA9IGVuY29kZVBhdGgodGhpcy4kJHBhdGgpICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIGhhc2g7XG4gICAgLy8gaW5jbHVkZSBoYXNoUHJlZml4IGluICQkYWJzVXJsIHdoZW4gJCR1cmwgaXMgZW1wdHkgc28gSUU5IGRvZXMgbm90IHJlbG9hZCBwYWdlIGJlY2F1c2Ugb2YgcmVtb3ZhbCBvZiAnIydcbiAgICB0aGlzLiQkYWJzVXJsID0gYXBwQmFzZSArIGhhc2hQcmVmaXggKyB0aGlzLiQkdXJsO1xuXG4gICAgdGhpcy4kJHVybFVwZGF0ZWRCeUxvY2F0aW9uID0gdHJ1ZTtcbiAgfTtcblxufVxuXG5cbnZhciBsb2NhdGlvblByb3RvdHlwZSA9IHtcblxuICAvKipcbiAgICogRW5zdXJlIGFic29sdXRlIFVSTCBpcyBpbml0aWFsaXplZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gICQkYWJzVXJsOicnLFxuXG4gIC8qKlxuICAgKiBBcmUgd2UgaW4gaHRtbDUgbW9kZT9cbiAgICogQHByaXZhdGVcbiAgICovXG4gICQkaHRtbDU6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBIYXMgYW55IGNoYW5nZSBiZWVuIHJlcGxhY2luZz9cbiAgICogQHByaXZhdGVcbiAgICovXG4gICQkcmVwbGFjZTogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI2Fic1VybFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXG4gICAqXG4gICAqIFJldHVybiBmdWxsIFVSTCByZXByZXNlbnRhdGlvbiB3aXRoIGFsbCBzZWdtZW50cyBlbmNvZGVkIGFjY29yZGluZyB0byBydWxlcyBzcGVjaWZpZWQgaW5cbiAgICogW1JGQyAzOTg2XShodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmMzOTg2LnR4dCkuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgYWJzVXJsID0gJGxvY2F0aW9uLmFic1VybCgpO1xuICAgKiAvLyA9PiBcImh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gZnVsbCBVUkxcbiAgICovXG4gIGFic1VybDogbG9jYXRpb25HZXR0ZXIoJyQkYWJzVXJsJyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3VybFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm4gVVJMIChlLmcuIGAvcGF0aD9hPWIjaGFzaGApIHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlci5cbiAgICpcbiAgICogQ2hhbmdlIHBhdGgsIHNlYXJjaCBhbmQgaGFzaCwgd2hlbiBjYWxsZWQgd2l0aCBwYXJhbWV0ZXIgYW5kIHJldHVybiBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciB1cmwgPSAkbG9jYXRpb24udXJsKCk7XG4gICAqIC8vID0+IFwiL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gdXJsIE5ldyBVUkwgd2l0aG91dCBiYXNlIHByZWZpeCAoZS5nLiBgL3BhdGg/YT1iI2hhc2hgKVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHVybFxuICAgKi9cbiAgdXJsOiBmdW5jdGlvbih1cmwpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQodXJsKSkge1xuICAgICAgcmV0dXJuIHRoaXMuJCR1cmw7XG4gICAgfVxuXG4gICAgdmFyIG1hdGNoID0gUEFUSF9NQVRDSC5leGVjKHVybCk7XG4gICAgaWYgKG1hdGNoWzFdIHx8IHVybCA9PT0gJycpIHRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMV0pKTtcbiAgICBpZiAobWF0Y2hbMl0gfHwgbWF0Y2hbMV0gfHwgdXJsID09PSAnJykgdGhpcy5zZWFyY2gobWF0Y2hbM10gfHwgJycpO1xuICAgIHRoaXMuaGFzaChtYXRjaFs1XSB8fCAnJyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jcHJvdG9jb2xcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciBvbmx5LlxuICAgKlxuICAgKiBSZXR1cm4gcHJvdG9jb2wgb2YgY3VycmVudCBVUkwuXG4gICAqXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vZXhhbXBsZS5jb20vIy9zb21lL3BhdGg/Zm9vPWJhciZiYXo9eG94b1xuICAgKiB2YXIgcHJvdG9jb2wgPSAkbG9jYXRpb24ucHJvdG9jb2woKTtcbiAgICogLy8gPT4gXCJodHRwXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gcHJvdG9jb2wgb2YgY3VycmVudCBVUkxcbiAgICovXG4gIHByb3RvY29sOiBsb2NhdGlvbkdldHRlcignJCRwcm90b2NvbCcpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2NhdGlvbiNob3N0XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgb25seS5cbiAgICpcbiAgICogUmV0dXJuIGhvc3Qgb2YgY3VycmVudCBVUkwuXG4gICAqXG4gICAqIE5vdGU6IGNvbXBhcmVkIHRvIHRoZSBub24tYW5ndWxhciB2ZXJzaW9uIGBsb2NhdGlvbi5ob3N0YCB3aGljaCByZXR1cm5zIGBob3N0bmFtZTpwb3J0YCwgdGhpcyByZXR1cm5zIHRoZSBgaG9zdG5hbWVgIHBvcnRpb24gb25seS5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBob3N0ID0gJGxvY2F0aW9uLmhvc3QoKTtcbiAgICogLy8gPT4gXCJleGFtcGxlLmNvbVwiXG4gICAqXG4gICAqIC8vIGdpdmVuIFVSTCBodHRwOi8vdXNlcjpwYXNzd29yZEBleGFtcGxlLmNvbTo4MDgwLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cbiAgICogaG9zdCA9ICRsb2NhdGlvbi5ob3N0KCk7XG4gICAqIC8vID0+IFwiZXhhbXBsZS5jb21cIlxuICAgKiBob3N0ID0gbG9jYXRpb24uaG9zdDtcbiAgICogLy8gPT4gXCJleGFtcGxlLmNvbTo4MDgwXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gaG9zdCBvZiBjdXJyZW50IFVSTC5cbiAgICovXG4gIGhvc3Q6IGxvY2F0aW9uR2V0dGVyKCckJGhvc3QnKSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jcG9ydFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIG9ubHkuXG4gICAqXG4gICAqIFJldHVybiBwb3J0IG9mIGN1cnJlbnQgVVJMLlxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBnaXZlbiBVUkwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cbiAgICogdmFyIHBvcnQgPSAkbG9jYXRpb24ucG9ydCgpO1xuICAgKiAvLyA9PiA4MFxuICAgKiBgYGBcbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSBwb3J0XG4gICAqL1xuICBwb3J0OiBsb2NhdGlvbkdldHRlcignJCRwb3J0JyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3BhdGhcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoaXMgbWV0aG9kIGlzIGdldHRlciAvIHNldHRlci5cbiAgICpcbiAgICogUmV0dXJuIHBhdGggb2YgY3VycmVudCBVUkwgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2UgcGF0aCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxuICAgKlxuICAgKiBOb3RlOiBQYXRoIHNob3VsZCBhbHdheXMgYmVnaW4gd2l0aCBmb3J3YXJkIHNsYXNoICgvKSwgdGhpcyBtZXRob2Qgd2lsbCBhZGQgdGhlIGZvcndhcmQgc2xhc2hcbiAgICogaWYgaXQgaXMgbWlzc2luZy5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvXG4gICAqIHZhciBwYXRoID0gJGxvY2F0aW9uLnBhdGgoKTtcbiAgICogLy8gPT4gXCIvc29tZS9wYXRoXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpPX0gcGF0aCBOZXcgcGF0aFxuICAgKiBAcmV0dXJuIHsoc3RyaW5nfG9iamVjdCl9IHBhdGggaWYgY2FsbGVkIHdpdGggbm8gcGFyYW1ldGVycywgb3IgYCRsb2NhdGlvbmAgaWYgY2FsbGVkIHdpdGggYSBwYXJhbWV0ZXJcbiAgICovXG4gIHBhdGg6IGxvY2F0aW9uR2V0dGVyU2V0dGVyKCckJHBhdGgnLCBmdW5jdGlvbihwYXRoKSB7XG4gICAgcGF0aCA9IHBhdGggIT09IG51bGwgPyBwYXRoLnRvU3RyaW5nKCkgOiAnJztcbiAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGggOiAnLycgKyBwYXRoO1xuICB9KSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jc2VhcmNoXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiBzZWFyY2ggcGFydCAoYXMgb2JqZWN0KSBvZiBjdXJyZW50IFVSTCB3aGVuIGNhbGxlZCB3aXRob3V0IGFueSBwYXJhbWV0ZXIuXG4gICAqXG4gICAqIENoYW5nZSBzZWFyY2ggcGFydCB3aGVuIGNhbGxlZCB3aXRoIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxuICAgKlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBnaXZlbiBVUkwgaHR0cDovL2V4YW1wbGUuY29tLyMvc29tZS9wYXRoP2Zvbz1iYXImYmF6PXhveG9cbiAgICogdmFyIHNlYXJjaE9iamVjdCA9ICRsb2NhdGlvbi5zZWFyY2goKTtcbiAgICogLy8gPT4ge2ZvbzogJ2JhcicsIGJhejogJ3hveG8nfVxuICAgKlxuICAgKiAvLyBzZXQgZm9vIHRvICd5aXBlZSdcbiAgICogJGxvY2F0aW9uLnNlYXJjaCgnZm9vJywgJ3lpcGVlJyk7XG4gICAqIC8vICRsb2NhdGlvbi5zZWFyY2goKSA9PiB7Zm9vOiAneWlwZWUnLCBiYXo6ICd4b3hvJ31cbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdC48c3RyaW5nPnxPYmplY3QuPEFycmF5LjxzdHJpbmc+Pn0gc2VhcmNoIE5ldyBzZWFyY2ggcGFyYW1zIC0gc3RyaW5nIG9yXG4gICAqIGhhc2ggb2JqZWN0LlxuICAgKlxuICAgKiBXaGVuIGNhbGxlZCB3aXRoIGEgc2luZ2xlIGFyZ3VtZW50IHRoZSBtZXRob2QgYWN0cyBhcyBhIHNldHRlciwgc2V0dGluZyB0aGUgYHNlYXJjaGAgY29tcG9uZW50XG4gICAqIG9mIGAkbG9jYXRpb25gIHRvIHRoZSBzcGVjaWZpZWQgdmFsdWUuXG4gICAqXG4gICAqIElmIHRoZSBhcmd1bWVudCBpcyBhIGhhc2ggb2JqZWN0IGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgdmFsdWVzLCB0aGVzZSB2YWx1ZXMgd2lsbCBiZSBlbmNvZGVkXG4gICAqIGFzIGR1cGxpY2F0ZSBzZWFyY2ggcGFyYW1ldGVycyBpbiB0aGUgVVJMLlxuICAgKlxuICAgKiBAcGFyYW0geyhzdHJpbmd8TnVtYmVyfEFycmF5PHN0cmluZz58Ym9vbGVhbik9fSBwYXJhbVZhbHVlIElmIGBzZWFyY2hgIGlzIGEgc3RyaW5nIG9yIG51bWJlciwgdGhlbiBgcGFyYW1WYWx1ZWBcbiAgICogd2lsbCBvdmVycmlkZSBvbmx5IGEgc2luZ2xlIHNlYXJjaCBwcm9wZXJ0eS5cbiAgICpcbiAgICogSWYgYHBhcmFtVmFsdWVgIGlzIGFuIGFycmF5LCBpdCB3aWxsIG92ZXJyaWRlIHRoZSBwcm9wZXJ0eSBvZiB0aGUgYHNlYXJjaGAgY29tcG9uZW50IG9mXG4gICAqIGAkbG9jYXRpb25gIHNwZWNpZmllZCB2aWEgdGhlIGZpcnN0IGFyZ3VtZW50LlxuICAgKlxuICAgKiBJZiBgcGFyYW1WYWx1ZWAgaXMgYG51bGxgLCB0aGUgcHJvcGVydHkgc3BlY2lmaWVkIHZpYSB0aGUgZmlyc3QgYXJndW1lbnQgd2lsbCBiZSBkZWxldGVkLlxuICAgKlxuICAgKiBJZiBgcGFyYW1WYWx1ZWAgaXMgYHRydWVgLCB0aGUgcHJvcGVydHkgc3BlY2lmaWVkIHZpYSB0aGUgZmlyc3QgYXJndW1lbnQgd2lsbCBiZSBhZGRlZCB3aXRoIG5vXG4gICAqIHZhbHVlIG5vciB0cmFpbGluZyBlcXVhbCBzaWduLlxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IElmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cyByZXR1cm5zIHRoZSBwYXJzZWQgYHNlYXJjaGAgb2JqZWN0LiBJZiBjYWxsZWQgd2l0aFxuICAgKiBvbmUgb3IgbW9yZSBhcmd1bWVudHMgcmV0dXJucyBgJGxvY2F0aW9uYCBvYmplY3QgaXRzZWxmLlxuICAgKi9cbiAgc2VhcmNoOiBmdW5jdGlvbihzZWFyY2gsIHBhcmFtVmFsdWUpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIHRoaXMuJCRzZWFyY2g7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGlmIChpc1N0cmluZyhzZWFyY2gpIHx8IGlzTnVtYmVyKHNlYXJjaCkpIHtcbiAgICAgICAgICBzZWFyY2ggPSBzZWFyY2gudG9TdHJpbmcoKTtcbiAgICAgICAgICB0aGlzLiQkc2VhcmNoID0gcGFyc2VLZXlWYWx1ZShzZWFyY2gpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNlYXJjaCkpIHtcbiAgICAgICAgICBzZWFyY2ggPSBjb3B5KHNlYXJjaCwge30pO1xuICAgICAgICAgIC8vIHJlbW92ZSBvYmplY3QgdW5kZWZpbmVkIG9yIG51bGwgcHJvcGVydGllc1xuICAgICAgICAgIGZvckVhY2goc2VhcmNoLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkgZGVsZXRlIHNlYXJjaFtrZXldO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy4kJHNlYXJjaCA9IHNlYXJjaDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ2lzcmNoYXJnJyxcbiAgICAgICAgICAgICAgJ1RoZSBmaXJzdCBhcmd1bWVudCBvZiB0aGUgYCRsb2NhdGlvbiNzZWFyY2goKWAgY2FsbCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChwYXJhbVZhbHVlKSB8fCBwYXJhbVZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuJCRzZWFyY2hbc2VhcmNoXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiQkc2VhcmNoW3NlYXJjaF0gPSBwYXJhbVZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy4kJGNvbXBvc2UoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb24jaGFzaFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGhpcyBtZXRob2QgaXMgZ2V0dGVyIC8gc2V0dGVyLlxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBoYXNoIGZyYWdtZW50IHdoZW4gY2FsbGVkIHdpdGhvdXQgYW55IHBhcmFtZXRlcnMuXG4gICAqXG4gICAqIENoYW5nZXMgdGhlIGhhc2ggZnJhZ21lbnQgd2hlbiBjYWxsZWQgd2l0aCBhIHBhcmFtZXRlciBhbmQgcmV0dXJucyBgJGxvY2F0aW9uYC5cbiAgICpcbiAgICpcbiAgICogYGBganNcbiAgICogLy8gZ2l2ZW4gVVJMIGh0dHA6Ly9leGFtcGxlLmNvbS8jL3NvbWUvcGF0aD9mb289YmFyJmJhej14b3hvI2hhc2hWYWx1ZVxuICAgKiB2YXIgaGFzaCA9ICRsb2NhdGlvbi5oYXNoKCk7XG4gICAqIC8vID0+IFwiaGFzaFZhbHVlXCJcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpPX0gaGFzaCBOZXcgaGFzaCBmcmFnbWVudFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IGhhc2hcbiAgICovXG4gIGhhc2g6IGxvY2F0aW9uR2V0dGVyU2V0dGVyKCckJGhhc2gnLCBmdW5jdGlvbihoYXNoKSB7XG4gICAgcmV0dXJuIGhhc2ggIT09IG51bGwgPyBoYXNoLnRvU3RyaW5nKCkgOiAnJztcbiAgfSksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3JlcGxhY2VcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIElmIGNhbGxlZCwgYWxsIGNoYW5nZXMgdG8gJGxvY2F0aW9uIGR1cmluZyB0aGUgY3VycmVudCBgJGRpZ2VzdGAgd2lsbCByZXBsYWNlIHRoZSBjdXJyZW50IGhpc3RvcnlcbiAgICogcmVjb3JkLCBpbnN0ZWFkIG9mIGFkZGluZyBhIG5ldyBvbmUuXG4gICAqL1xuICByZXBsYWNlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkcmVwbGFjZSA9IHRydWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn07XG5cbmZvckVhY2goW0xvY2F0aW9uSGFzaGJhbmdJbkh0bWw1VXJsLCBMb2NhdGlvbkhhc2hiYW5nVXJsLCBMb2NhdGlvbkh0bWw1VXJsXSwgZnVuY3Rpb24oTG9jYXRpb24pIHtcbiAgTG9jYXRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShsb2NhdGlvblByb3RvdHlwZSk7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGxvY2F0aW9uI3N0YXRlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIG1ldGhvZCBpcyBnZXR0ZXIgLyBzZXR0ZXIuXG4gICAqXG4gICAqIFJldHVybiB0aGUgaGlzdG9yeSBzdGF0ZSBvYmplY3Qgd2hlbiBjYWxsZWQgd2l0aG91dCBhbnkgcGFyYW1ldGVyLlxuICAgKlxuICAgKiBDaGFuZ2UgdGhlIGhpc3Rvcnkgc3RhdGUgb2JqZWN0IHdoZW4gY2FsbGVkIHdpdGggb25lIHBhcmFtZXRlciBhbmQgcmV0dXJuIGAkbG9jYXRpb25gLlxuICAgKiBUaGUgc3RhdGUgb2JqZWN0IGlzIGxhdGVyIHBhc3NlZCB0byBgcHVzaFN0YXRlYCBvciBgcmVwbGFjZVN0YXRlYC5cbiAgICpcbiAgICogTk9URTogVGhpcyBtZXRob2QgaXMgc3VwcG9ydGVkIG9ubHkgaW4gSFRNTDUgbW9kZSBhbmQgb25seSBpbiBicm93c2VycyBzdXBwb3J0aW5nXG4gICAqIHRoZSBIVE1MNSBIaXN0b3J5IEFQSSAoaS5lLiBtZXRob2RzIGBwdXNoU3RhdGVgIGFuZCBgcmVwbGFjZVN0YXRlYCkuIElmIHlvdSBuZWVkIHRvIHN1cHBvcnRcbiAgICogb2xkZXIgYnJvd3NlcnMgKGxpa2UgSUU5IG9yIEFuZHJvaWQgPCA0LjApLCBkb24ndCB1c2UgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0PX0gc3RhdGUgU3RhdGUgb2JqZWN0IGZvciBwdXNoU3RhdGUgb3IgcmVwbGFjZVN0YXRlXG4gICAqIEByZXR1cm4ge29iamVjdH0gc3RhdGVcbiAgICovXG4gIExvY2F0aW9uLnByb3RvdHlwZS5zdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdGhpcy4kJHN0YXRlO1xuICAgIH1cblxuICAgIGlmIChMb2NhdGlvbiAhPT0gTG9jYXRpb25IdG1sNVVybCB8fCAhdGhpcy4kJGh0bWw1KSB7XG4gICAgICB0aHJvdyAkbG9jYXRpb25NaW5FcnIoJ25vc3RhdGUnLCAnSGlzdG9yeSBBUEkgc3RhdGUgc3VwcG9ydCBpcyBhdmFpbGFibGUgb25seSAnICtcbiAgICAgICAgJ2luIEhUTUw1IG1vZGUgYW5kIG9ubHkgaW4gYnJvd3NlcnMgc3VwcG9ydGluZyBIVE1MNSBIaXN0b3J5IEFQSScpO1xuICAgIH1cbiAgICAvLyBUaGUgdXNlciBtaWdodCBtb2RpZnkgYHN0YXRlT2JqZWN0YCBhZnRlciBpbnZva2luZyBgJGxvY2F0aW9uLnN0YXRlKHN0YXRlT2JqZWN0KWBcbiAgICAvLyBidXQgd2UncmUgY2hhbmdpbmcgdGhlICQkc3RhdGUgcmVmZXJlbmNlIHRvICRicm93c2VyLnN0YXRlKCkgZHVyaW5nIHRoZSAkZGlnZXN0XG4gICAgLy8gc28gdGhlIG1vZGlmaWNhdGlvbiB3aW5kb3cgaXMgbmFycm93LlxuICAgIHRoaXMuJCRzdGF0ZSA9IGlzVW5kZWZpbmVkKHN0YXRlKSA/IG51bGwgOiBzdGF0ZTtcbiAgICB0aGlzLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24gPSB0cnVlO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59KTtcblxuXG5mdW5jdGlvbiBsb2NhdGlvbkdldHRlcihwcm9wZXJ0eSkge1xuICByZXR1cm4gLyoqIEB0aGlzICovIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzW3Byb3BlcnR5XTtcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBsb2NhdGlvbkdldHRlclNldHRlcihwcm9wZXJ0eSwgcHJlcHJvY2Vzcykge1xuICByZXR1cm4gLyoqIEB0aGlzICovIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHRoaXNbcHJvcGVydHldO1xuICAgIH1cblxuICAgIHRoaXNbcHJvcGVydHldID0gcHJlcHJvY2Vzcyh2YWx1ZSk7XG4gICAgdGhpcy4kJGNvbXBvc2UoKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRsb2NhdGlvblxuICpcbiAqIEByZXF1aXJlcyAkcm9vdEVsZW1lbnRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSAkbG9jYXRpb24gc2VydmljZSBwYXJzZXMgdGhlIFVSTCBpbiB0aGUgYnJvd3NlciBhZGRyZXNzIGJhciAoYmFzZWQgb24gdGhlXG4gKiBbd2luZG93LmxvY2F0aW9uXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi93aW5kb3cubG9jYXRpb24pKSBhbmQgbWFrZXMgdGhlIFVSTFxuICogYXZhaWxhYmxlIHRvIHlvdXIgYXBwbGljYXRpb24uIENoYW5nZXMgdG8gdGhlIFVSTCBpbiB0aGUgYWRkcmVzcyBiYXIgYXJlIHJlZmxlY3RlZCBpbnRvXG4gKiAkbG9jYXRpb24gc2VydmljZSBhbmQgY2hhbmdlcyB0byAkbG9jYXRpb24gYXJlIHJlZmxlY3RlZCBpbnRvIHRoZSBicm93c2VyIGFkZHJlc3MgYmFyLlxuICpcbiAqICoqVGhlICRsb2NhdGlvbiBzZXJ2aWNlOioqXG4gKlxuICogLSBFeHBvc2VzIHRoZSBjdXJyZW50IFVSTCBpbiB0aGUgYnJvd3NlciBhZGRyZXNzIGJhciwgc28geW91IGNhblxuICogICAtIFdhdGNoIGFuZCBvYnNlcnZlIHRoZSBVUkwuXG4gKiAgIC0gQ2hhbmdlIHRoZSBVUkwuXG4gKiAtIFN5bmNocm9uaXplcyB0aGUgVVJMIHdpdGggdGhlIGJyb3dzZXIgd2hlbiB0aGUgdXNlclxuICogICAtIENoYW5nZXMgdGhlIGFkZHJlc3MgYmFyLlxuICogICAtIENsaWNrcyB0aGUgYmFjayBvciBmb3J3YXJkIGJ1dHRvbiAob3IgY2xpY2tzIGEgSGlzdG9yeSBsaW5rKS5cbiAqICAgLSBDbGlja3Mgb24gYSBsaW5rLlxuICogLSBSZXByZXNlbnRzIHRoZSBVUkwgb2JqZWN0IGFzIGEgc2V0IG9mIG1ldGhvZHMgKHByb3RvY29sLCBob3N0LCBwb3J0LCBwYXRoLCBzZWFyY2gsIGhhc2gpLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIHNlZSB7QGxpbmsgZ3VpZGUvJGxvY2F0aW9uIERldmVsb3BlciBHdWlkZTogVXNpbmcgJGxvY2F0aW9ufVxuICovXG5cbi8qKlxuICogQG5nZG9jIHByb3ZpZGVyXG4gKiBAbmFtZSAkbG9jYXRpb25Qcm92aWRlclxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZSB0aGUgYCRsb2NhdGlvblByb3ZpZGVyYCB0byBjb25maWd1cmUgaG93IHRoZSBhcHBsaWNhdGlvbiBkZWVwIGxpbmtpbmcgcGF0aHMgYXJlIHN0b3JlZC5cbiAqL1xuZnVuY3Rpb24gJExvY2F0aW9uUHJvdmlkZXIoKSB7XG4gIHZhciBoYXNoUHJlZml4ID0gJyEnLFxuICAgICAgaHRtbDVNb2RlID0ge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgcmVxdWlyZUJhc2U6IHRydWUsXG4gICAgICAgIHJld3JpdGVMaW5rczogdHJ1ZVxuICAgICAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb25Qcm92aWRlciNoYXNoUHJlZml4XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIHByZWZpeCBpcyBgJyEnYC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBwcmVmaXggUHJlZml4IGZvciBoYXNoIHBhcnQgKGNvbnRhaW5pbmcgcGF0aCBhbmQgc2VhcmNoKVxuICAgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZSBpZiB1c2VkIGFzIGdldHRlciBvciBpdHNlbGYgKGNoYWluaW5nKSBpZiB1c2VkIGFzIHNldHRlclxuICAgKi9cbiAgdGhpcy5oYXNoUHJlZml4ID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgaWYgKGlzRGVmaW5lZChwcmVmaXgpKSB7XG4gICAgICBoYXNoUHJlZml4ID0gcHJlZml4O1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBoYXNoUHJlZml4O1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkbG9jYXRpb25Qcm92aWRlciNodG1sNU1vZGVcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7KGJvb2xlYW58T2JqZWN0KT19IG1vZGUgSWYgYm9vbGVhbiwgc2V0cyBgaHRtbDVNb2RlLmVuYWJsZWRgIHRvIHZhbHVlLlxuICAgKiAgIElmIG9iamVjdCwgc2V0cyBgZW5hYmxlZGAsIGByZXF1aXJlQmFzZWAgYW5kIGByZXdyaXRlTGlua3NgIHRvIHJlc3BlY3RpdmUgdmFsdWVzLiBTdXBwb3J0ZWRcbiAgICogICBwcm9wZXJ0aWVzOlxuICAgKiAgIC0gKiplbmFibGVkKiog4oCTIGB7Ym9vbGVhbn1gIOKAkyAoZGVmYXVsdDogZmFsc2UpIElmIHRydWUsIHdpbGwgcmVseSBvbiBgaGlzdG9yeS5wdXNoU3RhdGVgIHRvXG4gICAqICAgICBjaGFuZ2UgdXJscyB3aGVyZSBzdXBwb3J0ZWQuIFdpbGwgZmFsbCBiYWNrIHRvIGhhc2gtcHJlZml4ZWQgcGF0aHMgaW4gYnJvd3NlcnMgdGhhdCBkbyBub3RcbiAgICogICAgIHN1cHBvcnQgYHB1c2hTdGF0ZWAuXG4gICAqICAgLSAqKnJlcXVpcmVCYXNlKiogLSBge2Jvb2xlYW59YCAtIChkZWZhdWx0OiBgdHJ1ZWApIFdoZW4gaHRtbDVNb2RlIGlzIGVuYWJsZWQsIHNwZWNpZmllc1xuICAgKiAgICAgd2hldGhlciBvciBub3QgYSA8YmFzZT4gdGFnIGlzIHJlcXVpcmVkIHRvIGJlIHByZXNlbnQuIElmIGBlbmFibGVkYCBhbmQgYHJlcXVpcmVCYXNlYCBhcmVcbiAgICogICAgIHRydWUsIGFuZCBhIGJhc2UgdGFnIGlzIG5vdCBwcmVzZW50LCBhbiBlcnJvciB3aWxsIGJlIHRocm93biB3aGVuIGAkbG9jYXRpb25gIGlzIGluamVjdGVkLlxuICAgKiAgICAgU2VlIHRoZSB7QGxpbmsgZ3VpZGUvJGxvY2F0aW9uICRsb2NhdGlvbiBndWlkZSBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cbiAgICogICAtICoqcmV3cml0ZUxpbmtzKiogLSBge2Jvb2xlYW58c3RyaW5nfWAgLSAoZGVmYXVsdDogYHRydWVgKSBXaGVuIGh0bWw1TW9kZSBpcyBlbmFibGVkLFxuICAgKiAgICAgZW5hYmxlcy9kaXNhYmxlcyBVUkwgcmV3cml0aW5nIGZvciByZWxhdGl2ZSBsaW5rcy4gSWYgc2V0IHRvIGEgc3RyaW5nLCBVUkwgcmV3cml0aW5nIHdpbGxcbiAgICogICAgIG9ubHkgaGFwcGVuIG9uIGxpbmtzIHdpdGggYW4gYXR0cmlidXRlIHRoYXQgbWF0Y2hlcyB0aGUgZ2l2ZW4gc3RyaW5nLiBGb3IgZXhhbXBsZSwgaWYgc2V0XG4gICAqICAgICB0byBgJ2ludGVybmFsLWxpbmsnYCwgdGhlbiB0aGUgVVJMIHdpbGwgb25seSBiZSByZXdyaXR0ZW4gZm9yIGA8YSBpbnRlcm5hbC1saW5rPmAgbGlua3MuXG4gICAqICAgICBOb3RlIHRoYXQgW2F0dHJpYnV0ZSBuYW1lIG5vcm1hbGl6YXRpb25dKGd1aWRlL2RpcmVjdGl2ZSNub3JtYWxpemF0aW9uKSBkb2VzIG5vdCBhcHBseVxuICAgKiAgICAgaGVyZSwgc28gYCdpbnRlcm5hbExpbmsnYCB3aWxsICoqbm90KiogbWF0Y2ggYCdpbnRlcm5hbC1saW5rJ2AuXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGh0bWw1TW9kZSBvYmplY3QgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuaHRtbDVNb2RlID0gZnVuY3Rpb24obW9kZSkge1xuICAgIGlmIChpc0Jvb2xlYW4obW9kZSkpIHtcbiAgICAgIGh0bWw1TW9kZS5lbmFibGVkID0gbW9kZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QobW9kZSkpIHtcblxuICAgICAgaWYgKGlzQm9vbGVhbihtb2RlLmVuYWJsZWQpKSB7XG4gICAgICAgIGh0bWw1TW9kZS5lbmFibGVkID0gbW9kZS5lbmFibGVkO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNCb29sZWFuKG1vZGUucmVxdWlyZUJhc2UpKSB7XG4gICAgICAgIGh0bWw1TW9kZS5yZXF1aXJlQmFzZSA9IG1vZGUucmVxdWlyZUJhc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0Jvb2xlYW4obW9kZS5yZXdyaXRlTGlua3MpIHx8IGlzU3RyaW5nKG1vZGUucmV3cml0ZUxpbmtzKSkge1xuICAgICAgICBodG1sNU1vZGUucmV3cml0ZUxpbmtzID0gbW9kZS5yZXdyaXRlTGlua3M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gaHRtbDVNb2RlO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIGV2ZW50XG4gICAqIEBuYW1lICRsb2NhdGlvbiMkbG9jYXRpb25DaGFuZ2VTdGFydFxuICAgKiBAZXZlbnRUeXBlIGJyb2FkY2FzdCBvbiByb290IHNjb3BlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBCcm9hZGNhc3RlZCBiZWZvcmUgYSBVUkwgd2lsbCBjaGFuZ2UuXG4gICAqXG4gICAqIFRoaXMgY2hhbmdlIGNhbiBiZSBwcmV2ZW50ZWQgYnkgY2FsbGluZ1xuICAgKiBgcHJldmVudERlZmF1bHRgIG1ldGhvZCBvZiB0aGUgZXZlbnQuIFNlZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259IGZvciBtb3JlXG4gICAqIGRldGFpbHMgYWJvdXQgZXZlbnQgb2JqZWN0LiBVcG9uIHN1Y2Nlc3NmdWwgY2hhbmdlXG4gICAqIHtAbGluayBuZy4kbG9jYXRpb24jJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcyAkbG9jYXRpb25DaGFuZ2VTdWNjZXNzfSBpcyBmaXJlZC5cbiAgICpcbiAgICogVGhlIGBuZXdTdGF0ZWAgYW5kIGBvbGRTdGF0ZWAgcGFyYW1ldGVycyBtYXkgYmUgZGVmaW5lZCBvbmx5IGluIEhUTUw1IG1vZGUgYW5kIHdoZW5cbiAgICogdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIEhUTUw1IEhpc3RvcnkgQVBJLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdVcmwgTmV3IFVSTFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9sZFVybCBVUkwgdGhhdCB3YXMgYmVmb3JlIGl0IHdhcyBjaGFuZ2VkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5ld1N0YXRlIE5ldyBoaXN0b3J5IHN0YXRlIG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9sZFN0YXRlIEhpc3Rvcnkgc3RhdGUgb2JqZWN0IHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBldmVudFxuICAgKiBAbmFtZSAkbG9jYXRpb24jJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1xuICAgKiBAZXZlbnRUeXBlIGJyb2FkY2FzdCBvbiByb290IHNjb3BlXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBCcm9hZGNhc3RlZCBhZnRlciBhIFVSTCB3YXMgY2hhbmdlZC5cbiAgICpcbiAgICogVGhlIGBuZXdTdGF0ZWAgYW5kIGBvbGRTdGF0ZWAgcGFyYW1ldGVycyBtYXkgYmUgZGVmaW5lZCBvbmx5IGluIEhUTUw1IG1vZGUgYW5kIHdoZW5cbiAgICogdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIEhUTUw1IEhpc3RvcnkgQVBJLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5ndWxhckV2ZW50IFN5bnRoZXRpYyBldmVudCBvYmplY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdVcmwgTmV3IFVSTFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9sZFVybCBVUkwgdGhhdCB3YXMgYmVmb3JlIGl0IHdhcyBjaGFuZ2VkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5ld1N0YXRlIE5ldyBoaXN0b3J5IHN0YXRlIG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9sZFN0YXRlIEhpc3Rvcnkgc3RhdGUgb2JqZWN0IHRoYXQgd2FzIGJlZm9yZSBpdCB3YXMgY2hhbmdlZC5cbiAgICovXG5cbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRicm93c2VyJywgJyRzbmlmZmVyJywgJyRyb290RWxlbWVudCcsICckd2luZG93JyxcbiAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICRicm93c2VyLCAkc25pZmZlciwgJHJvb3RFbGVtZW50LCAkd2luZG93KSB7XG4gICAgdmFyICRsb2NhdGlvbixcbiAgICAgICAgTG9jYXRpb25Nb2RlLFxuICAgICAgICBiYXNlSHJlZiA9ICRicm93c2VyLmJhc2VIcmVmKCksIC8vIGlmIGJhc2VbaHJlZl0gaXMgdW5kZWZpbmVkLCBpdCBkZWZhdWx0cyB0byAnJ1xuICAgICAgICBpbml0aWFsVXJsID0gJGJyb3dzZXIudXJsKCksXG4gICAgICAgIGFwcEJhc2U7XG5cbiAgICBpZiAoaHRtbDVNb2RlLmVuYWJsZWQpIHtcbiAgICAgIGlmICghYmFzZUhyZWYgJiYgaHRtbDVNb2RlLnJlcXVpcmVCYXNlKSB7XG4gICAgICAgIHRocm93ICRsb2NhdGlvbk1pbkVycignbm9iYXNlJyxcbiAgICAgICAgICAnJGxvY2F0aW9uIGluIEhUTUw1IG1vZGUgcmVxdWlyZXMgYSA8YmFzZT4gdGFnIHRvIGJlIHByZXNlbnQhJyk7XG4gICAgICB9XG4gICAgICBhcHBCYXNlID0gc2VydmVyQmFzZShpbml0aWFsVXJsKSArIChiYXNlSHJlZiB8fCAnLycpO1xuICAgICAgTG9jYXRpb25Nb2RlID0gJHNuaWZmZXIuaGlzdG9yeSA/IExvY2F0aW9uSHRtbDVVcmwgOiBMb2NhdGlvbkhhc2hiYW5nSW5IdG1sNVVybDtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBwQmFzZSA9IHN0cmlwSGFzaChpbml0aWFsVXJsKTtcbiAgICAgIExvY2F0aW9uTW9kZSA9IExvY2F0aW9uSGFzaGJhbmdVcmw7XG4gICAgfVxuICAgIHZhciBhcHBCYXNlTm9GaWxlID0gc3RyaXBGaWxlKGFwcEJhc2UpO1xuXG4gICAgJGxvY2F0aW9uID0gbmV3IExvY2F0aW9uTW9kZShhcHBCYXNlLCBhcHBCYXNlTm9GaWxlLCAnIycgKyBoYXNoUHJlZml4KTtcbiAgICAkbG9jYXRpb24uJCRwYXJzZUxpbmtVcmwoaW5pdGlhbFVybCwgaW5pdGlhbFVybCk7XG5cbiAgICAkbG9jYXRpb24uJCRzdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XG5cbiAgICB2YXIgSUdOT1JFX1VSSV9SRUdFWFAgPSAvXlxccyooamF2YXNjcmlwdHxtYWlsdG8pOi9pO1xuXG4gICAgZnVuY3Rpb24gc2V0QnJvd3NlclVybFdpdGhGYWxsYmFjayh1cmwsIHJlcGxhY2UsIHN0YXRlKSB7XG4gICAgICB2YXIgb2xkVXJsID0gJGxvY2F0aW9uLnVybCgpO1xuICAgICAgdmFyIG9sZFN0YXRlID0gJGxvY2F0aW9uLiQkc3RhdGU7XG4gICAgICB0cnkge1xuICAgICAgICAkYnJvd3Nlci51cmwodXJsLCByZXBsYWNlLCBzdGF0ZSk7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlICRsb2NhdGlvbi5zdGF0ZSgpIHJldHVybnMgcmVmZXJlbnRpYWxseSBpZGVudGljYWwgKG5vdCBqdXN0IGRlZXBseSBlcXVhbClcbiAgICAgICAgLy8gc3RhdGUgb2JqZWN0OyB0aGlzIG1ha2VzIHBvc3NpYmxlIHF1aWNrIGNoZWNraW5nIGlmIHRoZSBzdGF0ZSBjaGFuZ2VkIGluIHRoZSBkaWdlc3RcbiAgICAgICAgLy8gbG9vcC4gQ2hlY2tpbmcgZGVlcCBlcXVhbGl0eSB3b3VsZCBiZSB0b28gZXhwZW5zaXZlLlxuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIFJlc3RvcmUgb2xkIHZhbHVlcyBpZiBwdXNoU3RhdGUgZmFpbHNcbiAgICAgICAgJGxvY2F0aW9uLnVybChvbGRVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG9sZFN0YXRlO1xuXG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHJvb3RFbGVtZW50Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgcmV3cml0ZUxpbmtzID0gaHRtbDVNb2RlLnJld3JpdGVMaW5rcztcbiAgICAgIC8vIFRPRE8odm9qdGEpOiByZXdyaXRlIGxpbmsgd2hlbiBvcGVuaW5nIGluIG5ldyB0YWIvd2luZG93IChpbiBsZWdhY3kgYnJvd3NlcilcbiAgICAgIC8vIGN1cnJlbnRseSB3ZSBvcGVuIG5pY2UgdXJsIGxpbmsgYW5kIHJlZGlyZWN0IHRoZW5cblxuICAgICAgaWYgKCFyZXdyaXRlTGlua3MgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5IHx8IGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LndoaWNoID09PSAyIHx8IGV2ZW50LmJ1dHRvbiA9PT0gMikgcmV0dXJuO1xuXG4gICAgICB2YXIgZWxtID0ganFMaXRlKGV2ZW50LnRhcmdldCk7XG5cbiAgICAgIC8vIHRyYXZlcnNlIHRoZSBET00gdXAgdG8gZmluZCBmaXJzdCBBIHRhZ1xuICAgICAgd2hpbGUgKG5vZGVOYW1lXyhlbG1bMF0pICE9PSAnYScpIHtcbiAgICAgICAgLy8gaWdub3JlIHJld3JpdGluZyBpZiBubyBBIHRhZyAocmVhY2hlZCByb290IGVsZW1lbnQsIG9yIG5vIHBhcmVudCAtIHJlbW92ZWQgZnJvbSBkb2N1bWVudClcbiAgICAgICAgaWYgKGVsbVswXSA9PT0gJHJvb3RFbGVtZW50WzBdIHx8ICEoZWxtID0gZWxtLnBhcmVudCgpKVswXSkgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdHJpbmcocmV3cml0ZUxpbmtzKSAmJiBpc1VuZGVmaW5lZChlbG0uYXR0cihyZXdyaXRlTGlua3MpKSkgcmV0dXJuO1xuXG4gICAgICB2YXIgYWJzSHJlZiA9IGVsbS5wcm9wKCdocmVmJyk7XG4gICAgICAvLyBnZXQgdGhlIGFjdHVhbCBocmVmIGF0dHJpYnV0ZSAtIHNlZVxuICAgICAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2RkMzQ3MTQ4KHY9dnMuODUpLmFzcHhcbiAgICAgIHZhciByZWxIcmVmID0gZWxtLmF0dHIoJ2hyZWYnKSB8fCBlbG0uYXR0cigneGxpbms6aHJlZicpO1xuXG4gICAgICBpZiAoaXNPYmplY3QoYWJzSHJlZikgJiYgYWJzSHJlZi50b1N0cmluZygpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nKSB7XG4gICAgICAgIC8vIFNWR0FuaW1hdGVkU3RyaW5nLmFuaW1WYWwgc2hvdWxkIGJlIGlkZW50aWNhbCB0byBTVkdBbmltYXRlZFN0cmluZy5iYXNlVmFsLCB1bmxlc3MgZHVyaW5nXG4gICAgICAgIC8vIGFuIGFuaW1hdGlvbi5cbiAgICAgICAgYWJzSHJlZiA9IHVybFJlc29sdmUoYWJzSHJlZi5hbmltVmFsKS5ocmVmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZ25vcmUgd2hlbiB1cmwgaXMgc3RhcnRlZCB3aXRoIGphdmFzY3JpcHQ6IG9yIG1haWx0bzpcbiAgICAgIGlmIChJR05PUkVfVVJJX1JFR0VYUC50ZXN0KGFic0hyZWYpKSByZXR1cm47XG5cbiAgICAgIGlmIChhYnNIcmVmICYmICFlbG0uYXR0cigndGFyZ2V0JykgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIGlmICgkbG9jYXRpb24uJCRwYXJzZUxpbmtVcmwoYWJzSHJlZiwgcmVsSHJlZikpIHtcbiAgICAgICAgICAvLyBXZSBkbyBhIHByZXZlbnREZWZhdWx0IGZvciBhbGwgdXJscyB0aGF0IGFyZSBwYXJ0IG9mIHRoZSBhbmd1bGFyIGFwcGxpY2F0aW9uLFxuICAgICAgICAgIC8vIGluIGh0bWw1bW9kZSBhbmQgYWxzbyB3aXRob3V0LCBzbyB0aGF0IHdlIGFyZSBhYmxlIHRvIGFib3J0IG5hdmlnYXRpb24gd2l0aG91dFxuICAgICAgICAgIC8vIGdldHRpbmcgZG91YmxlIGVudHJpZXMgaW4gdGhlIGxvY2F0aW9uIGhpc3RvcnkuXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAvLyB1cGRhdGUgbG9jYXRpb24gbWFudWFsbHlcbiAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSAkYnJvd3Nlci51cmwoKSkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgIC8vIGhhY2sgdG8gd29yayBhcm91bmQgRkY2IGJ1ZyA2ODQyMDggd2hlbiBzY2VuYXJpbyBydW5uZXIgY2xpY2tzIG9uIGxpbmtzXG4gICAgICAgICAgICAkd2luZG93LmFuZ3VsYXJbJ2ZmLTY4NDIwOC1wcmV2ZW50RGVmYXVsdCddID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgLy8gcmV3cml0ZSBoYXNoYmFuZyB1cmwgPD4gaHRtbDUgdXJsXG4gICAgaWYgKHRyaW1FbXB0eUhhc2goJGxvY2F0aW9uLmFic1VybCgpKSAhPT0gdHJpbUVtcHR5SGFzaChpbml0aWFsVXJsKSkge1xuICAgICAgJGJyb3dzZXIudXJsKCRsb2NhdGlvbi5hYnNVcmwoKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdmFyIGluaXRpYWxpemluZyA9IHRydWU7XG5cbiAgICAvLyB1cGRhdGUgJGxvY2F0aW9uIHdoZW4gJGJyb3dzZXIgdXJsIGNoYW5nZXNcbiAgICAkYnJvd3Nlci5vblVybENoYW5nZShmdW5jdGlvbihuZXdVcmwsIG5ld1N0YXRlKSB7XG5cbiAgICAgIGlmICghc3RhcnRzV2l0aChuZXdVcmwsIGFwcEJhc2VOb0ZpbGUpKSB7XG4gICAgICAgIC8vIElmIHdlIGFyZSBuYXZpZ2F0aW5nIG91dHNpZGUgb2YgdGhlIGFwcCB0aGVuIGZvcmNlIGEgcmVsb2FkXG4gICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5ld1VybDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvbGRVcmwgPSAkbG9jYXRpb24uYWJzVXJsKCk7XG4gICAgICAgIHZhciBvbGRTdGF0ZSA9ICRsb2NhdGlvbi4kJHN0YXRlO1xuICAgICAgICB2YXIgZGVmYXVsdFByZXZlbnRlZDtcbiAgICAgICAgbmV3VXJsID0gdHJpbUVtcHR5SGFzaChuZXdVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRwYXJzZShuZXdVcmwpO1xuICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQgPSAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLCBvbGRVcmwsXG4gICAgICAgICAgICBuZXdTdGF0ZSwgb2xkU3RhdGUpLmRlZmF1bHRQcmV2ZW50ZWQ7XG5cbiAgICAgICAgLy8gaWYgdGhlIGxvY2F0aW9uIHdhcyBjaGFuZ2VkIGJ5IGEgYCRsb2NhdGlvbkNoYW5nZVN0YXJ0YCBoYW5kbGVyIHRoZW4gc3RvcFxuICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXG4gICAgICAgIGlmICgkbG9jYXRpb24uYWJzVXJsKCkgIT09IG5ld1VybCkgcmV0dXJuO1xuXG4gICAgICAgIGlmIChkZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcbiAgICAgICAgICAkbG9jYXRpb24uJCRzdGF0ZSA9IG9sZFN0YXRlO1xuICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sob2xkVXJsLCBmYWxzZSwgb2xkU3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluaXRpYWxpemluZyA9IGZhbHNlO1xuICAgICAgICAgIGFmdGVyTG9jYXRpb25DaGFuZ2Uob2xkVXJsLCBvbGRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGRpZ2VzdCgpO1xuICAgIH0pO1xuXG4gICAgLy8gdXBkYXRlIGJyb3dzZXJcbiAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAkbG9jYXRpb25XYXRjaCgpIHtcbiAgICAgIGlmIChpbml0aWFsaXppbmcgfHwgJGxvY2F0aW9uLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24pIHtcbiAgICAgICAgJGxvY2F0aW9uLiQkdXJsVXBkYXRlZEJ5TG9jYXRpb24gPSBmYWxzZTtcblxuICAgICAgICB2YXIgb2xkVXJsID0gdHJpbUVtcHR5SGFzaCgkYnJvd3Nlci51cmwoKSk7XG4gICAgICAgIHZhciBuZXdVcmwgPSB0cmltRW1wdHlIYXNoKCRsb2NhdGlvbi5hYnNVcmwoKSk7XG4gICAgICAgIHZhciBvbGRTdGF0ZSA9ICRicm93c2VyLnN0YXRlKCk7XG4gICAgICAgIHZhciBjdXJyZW50UmVwbGFjZSA9ICRsb2NhdGlvbi4kJHJlcGxhY2U7XG4gICAgICAgIHZhciB1cmxPclN0YXRlQ2hhbmdlZCA9IG9sZFVybCAhPT0gbmV3VXJsIHx8XG4gICAgICAgICAgKCRsb2NhdGlvbi4kJGh0bWw1ICYmICRzbmlmZmVyLmhpc3RvcnkgJiYgb2xkU3RhdGUgIT09ICRsb2NhdGlvbi4kJHN0YXRlKTtcblxuICAgICAgICBpZiAoaW5pdGlhbGl6aW5nIHx8IHVybE9yU3RhdGVDaGFuZ2VkKSB7XG4gICAgICAgICAgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbmV3VXJsID0gJGxvY2F0aW9uLmFic1VybCgpO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRQcmV2ZW50ZWQgPSAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN0YXJ0JywgbmV3VXJsLCBvbGRVcmwsXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKS5kZWZhdWx0UHJldmVudGVkO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGUgbG9jYXRpb24gd2FzIGNoYW5nZWQgYnkgYSBgJGxvY2F0aW9uQ2hhbmdlU3RhcnRgIGhhbmRsZXIgdGhlbiBzdG9wXG4gICAgICAgICAgICAvLyBwcm9jZXNzaW5nIHRoaXMgbG9jYXRpb24gY2hhbmdlXG4gICAgICAgICAgICBpZiAoJGxvY2F0aW9uLmFic1VybCgpICE9PSBuZXdVcmwpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkcGFyc2Uob2xkVXJsKTtcbiAgICAgICAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUgPSBvbGRTdGF0ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICh1cmxPclN0YXRlQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHNldEJyb3dzZXJVcmxXaXRoRmFsbGJhY2sobmV3VXJsLCBjdXJyZW50UmVwbGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFN0YXRlID09PSAkbG9jYXRpb24uJCRzdGF0ZSA/IG51bGwgOiAkbG9jYXRpb24uJCRzdGF0ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbG9jYXRpb24uJCRyZXBsYWNlID0gZmFsc2U7XG5cbiAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcmV0dXJuIGFueXRoaW5nIGJlY2F1c2UgJGV2YWxBc3luYyB3aWxsIG1ha2UgdGhlIGRpZ2VzdCBsb29wIGRpcnR5IHdoZW5cbiAgICAgIC8vIHRoZXJlIGlzIGEgY2hhbmdlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gJGxvY2F0aW9uO1xuXG4gICAgZnVuY3Rpb24gYWZ0ZXJMb2NhdGlvbkNoYW5nZShvbGRVcmwsIG9sZFN0YXRlKSB7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCAkbG9jYXRpb24uYWJzVXJsKCksIG9sZFVybCxcbiAgICAgICAgJGxvY2F0aW9uLiQkc3RhdGUsIG9sZFN0YXRlKTtcbiAgICB9XG59XTtcbn1cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJGxvZ1xuICogQHJlcXVpcmVzICR3aW5kb3dcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNpbXBsZSBzZXJ2aWNlIGZvciBsb2dnaW5nLiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIHNhZmVseSB3cml0ZXMgdGhlIG1lc3NhZ2VcbiAqIGludG8gdGhlIGJyb3dzZXIncyBjb25zb2xlIChpZiBwcmVzZW50KS5cbiAqXG4gKiBUaGUgbWFpbiBwdXJwb3NlIG9mIHRoaXMgc2VydmljZSBpcyB0byBzaW1wbGlmeSBkZWJ1Z2dpbmcgYW5kIHRyb3VibGVzaG9vdGluZy5cbiAqXG4gKiBUbyByZXZlYWwgdGhlIGxvY2F0aW9uIG9mIHRoZSBjYWxscyB0byBgJGxvZ2AgaW4gdGhlIEphdmFTY3JpcHQgY29uc29sZSxcbiAqIHlvdSBjYW4gXCJibGFja2JveFwiIHRoZSBBbmd1bGFySlMgc291cmNlIGluIHlvdXIgYnJvd3NlcjpcbiAqXG4gKiBbTW96aWxsYSBkZXNjcmlwdGlvbiBvZiBibGFja2JveGluZ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9EZWJ1Z2dlci9Ib3dfdG8vQmxhY2tfYm94X2Ffc291cmNlKS5cbiAqIFtDaHJvbWUgZGVzY3JpcHRpb24gb2YgYmxhY2tib3hpbmddKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9ibGFja2JveGluZykuXG4gKlxuICogTm90ZTogTm90IGFsbCBicm93c2VycyBzdXBwb3J0IGJsYWNrYm94aW5nLlxuICpcbiAqIFRoZSBkZWZhdWx0IGlzIHRvIGxvZyBgZGVidWdgIG1lc3NhZ2VzLiBZb3UgY2FuIHVzZVxuICoge0BsaW5rIG5nLiRsb2dQcm92aWRlciBuZy4kbG9nUHJvdmlkZXIjZGVidWdFbmFibGVkfSB0byBjaGFuZ2UgdGhpcy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibG9nRXhhbXBsZVwiIG5hbWU9XCJsb2ctc2VydmljZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2xvZ0V4YW1wbGUnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdMb2dDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJGxvZycsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZykge1xuICAgICAgICAgICAkc2NvcGUuJGxvZyA9ICRsb2c7XG4gICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gJ0hlbGxvIFdvcmxkISc7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJMb2dDb250cm9sbGVyXCI+XG4gICAgICAgICA8cD5SZWxvYWQgdGhpcyBwYWdlIHdpdGggb3BlbiBjb25zb2xlLCBlbnRlciB0ZXh0IGFuZCBoaXQgdGhlIGxvZyBidXR0b24uLi48L3A+XG4gICAgICAgICA8bGFiZWw+TWVzc2FnZTpcbiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibWVzc2FnZVwiIC8+PC9sYWJlbD5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmxvZyhtZXNzYWdlKVwiPmxvZzwvYnV0dG9uPlxuICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cIiRsb2cud2FybihtZXNzYWdlKVwiPndhcm48L2J1dHRvbj5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkbG9nLmluZm8obWVzc2FnZSlcIj5pbmZvPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5lcnJvcihtZXNzYWdlKVwiPmVycm9yPC9idXR0b24+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiJGxvZy5kZWJ1ZyhtZXNzYWdlKVwiPmRlYnVnPC9idXR0b24+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGxvZ1Byb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNlIHRoZSBgJGxvZ1Byb3ZpZGVyYCB0byBjb25maWd1cmUgaG93IHRoZSBhcHBsaWNhdGlvbiBsb2dzIG1lc3NhZ2VzXG4gKi9cbmZ1bmN0aW9uICRMb2dQcm92aWRlcigpIHtcbiAgdmFyIGRlYnVnID0gdHJ1ZSxcbiAgICAgIHNlbGYgPSB0aGlzO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRsb2dQcm92aWRlciNkZWJ1Z0VuYWJsZWRcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGZsYWcgZW5hYmxlIG9yIGRpc2FibGUgZGVidWcgbGV2ZWwgbWVzc2FnZXNcbiAgICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWUgaWYgdXNlZCBhcyBnZXR0ZXIgb3IgaXRzZWxmIChjaGFpbmluZykgaWYgdXNlZCBhcyBzZXR0ZXJcbiAgICovXG4gIHRoaXMuZGVidWdFbmFibGVkID0gZnVuY3Rpb24oZmxhZykge1xuICAgIGlmIChpc0RlZmluZWQoZmxhZykpIHtcbiAgICAgIGRlYnVnID0gZmxhZztcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICB9O1xuXG4gIHRoaXMuJGdldCA9IFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcbiAgICAvLyBTdXBwb3J0OiBJRSA5LTExLCBFZGdlIDEyLTE0K1xuICAgIC8vIElFL0VkZ2UgZGlzcGxheSBlcnJvcnMgaW4gc3VjaCBhIHdheSB0aGF0IGl0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGNsaWNrIGluIDQgcGxhY2VzXG4gICAgLy8gdG8gc2VlIHRoZSBzdGFjayB0cmFjZS4gVGhlcmUgaXMgbm8gd2F5IHRvIGZlYXR1cmUtZGV0ZWN0IGl0IHNvIHRoZXJlJ3MgYSBjaGFuY2VcbiAgICAvLyBvZiB0aGUgdXNlciBhZ2VudCBzbmlmZmluZyB0byBnbyB3cm9uZyBidXQgc2luY2UgaXQncyBvbmx5IGFib3V0IGxvZ2dpbmcsIHRoaXMgc2hvdWxkbid0XG4gICAgLy8gYnJlYWsgYXBwcy4gT3RoZXIgYnJvd3NlcnMgZGlzcGxheSBlcnJvcnMgaW4gYSBzZW5zaWJsZSB3YXkgYW5kIHNvbWUgb2YgdGhlbSBtYXAgc3RhY2tcbiAgICAvLyB0cmFjZXMgYWxvbmcgc291cmNlIG1hcHMgaWYgYXZhaWxhYmxlIHNvIGl0IG1ha2VzIHNlbnNlIHRvIGxldCBicm93c2VycyBkaXNwbGF5IGl0XG4gICAgLy8gYXMgdGhleSB3YW50LlxuICAgIHZhciBmb3JtYXRTdGFja1RyYWNlID0gbXNpZSB8fCAvXFxiRWRnZVxcLy8udGVzdCgkd2luZG93Lm5hdmlnYXRvciAmJiAkd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNsb2dcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGEgbG9nIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgbG9nOiBjb25zb2xlTG9nKCdsb2cnKSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkbG9nI2luZm9cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGFuIGluZm9ybWF0aW9uIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgaW5mbzogY29uc29sZUxvZygnaW5mbycpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjd2FyblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogV3JpdGUgYSB3YXJuaW5nIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgd2FybjogY29uc29sZUxvZygnd2FybicpLFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRsb2cjZXJyb3JcbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFdyaXRlIGFuIGVycm9yIG1lc3NhZ2VcbiAgICAgICAqL1xuICAgICAgZXJyb3I6IGNvbnNvbGVMb2coJ2Vycm9yJyksXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJGxvZyNkZWJ1Z1xuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogV3JpdGUgYSBkZWJ1ZyBtZXNzYWdlXG4gICAgICAgKi9cbiAgICAgIGRlYnVnOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBmbiA9IGNvbnNvbGVMb2coJ2RlYnVnJyk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICAgICAgZm4uYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSgpXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGZvcm1hdEVycm9yKGFyZykge1xuICAgICAgaWYgKGlzRXJyb3IoYXJnKSkge1xuICAgICAgICBpZiAoYXJnLnN0YWNrICYmIGZvcm1hdFN0YWNrVHJhY2UpIHtcbiAgICAgICAgICBhcmcgPSAoYXJnLm1lc3NhZ2UgJiYgYXJnLnN0YWNrLmluZGV4T2YoYXJnLm1lc3NhZ2UpID09PSAtMSlcbiAgICAgICAgICAgICAgPyAnRXJyb3I6ICcgKyBhcmcubWVzc2FnZSArICdcXG4nICsgYXJnLnN0YWNrXG4gICAgICAgICAgICAgIDogYXJnLnN0YWNrO1xuICAgICAgICB9IGVsc2UgaWYgKGFyZy5zb3VyY2VVUkwpIHtcbiAgICAgICAgICBhcmcgPSBhcmcubWVzc2FnZSArICdcXG4nICsgYXJnLnNvdXJjZVVSTCArICc6JyArIGFyZy5saW5lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnNvbGVMb2codHlwZSkge1xuICAgICAgdmFyIGNvbnNvbGUgPSAkd2luZG93LmNvbnNvbGUgfHwge30sXG4gICAgICAgICAgbG9nRm4gPSBjb25zb2xlW3R5cGVdIHx8IGNvbnNvbGUubG9nIHx8IG5vb3A7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yRWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgIGFyZ3MucHVzaChmb3JtYXRFcnJvcihhcmcpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFIDkgb25seVxuICAgICAgICAvLyBjb25zb2xlIG1ldGhvZHMgZG9uJ3QgaW5oZXJpdCBmcm9tIEZ1bmN0aW9uLnByb3RvdHlwZSBpbiBJRSA5IHNvIHdlIGNhbid0XG4gICAgICAgIC8vIGNhbGwgYGxvZ0ZuLmFwcGx5KGNvbnNvbGUsIGFyZ3MpYCBkaXJlY3RseS5cbiAgICAgICAgcmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGxvZ0ZuLCBjb25zb2xlLCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuICB9XTtcbn1cblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxudmFyICRwYXJzZU1pbkVyciA9IG1pbkVycignJHBhcnNlJyk7XG5cbnZhciBvYmplY3RWYWx1ZU9mID0ge30uY29uc3RydWN0b3IucHJvdG90eXBlLnZhbHVlT2Y7XG5cbi8vIFNhbmRib3hpbmcgQW5ndWxhciBFeHByZXNzaW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBBbmd1bGFyIGV4cHJlc3Npb25zIGFyZSBubyBsb25nZXIgc2FuZGJveGVkLiBTbyBpdCBpcyBub3cgZXZlbiBlYXNpZXIgdG8gYWNjZXNzIGFyYml0cmFyeSBKUyBjb2RlIGJ5XG4vLyB2YXJpb3VzIG1lYW5zIHN1Y2ggYXMgb2J0YWluaW5nIGEgcmVmZXJlbmNlIHRvIG5hdGl2ZSBKUyBmdW5jdGlvbnMgbGlrZSB0aGUgRnVuY3Rpb24gY29uc3RydWN0b3IuXG4vL1xuLy8gQXMgYW4gZXhhbXBsZSwgY29uc2lkZXIgdGhlIGZvbGxvd2luZyBBbmd1bGFyIGV4cHJlc3Npb246XG4vL1xuLy8gICB7fS50b1N0cmluZy5jb25zdHJ1Y3RvcignYWxlcnQoXCJldmlsIEpTIGNvZGVcIiknKVxuLy9cbi8vIEl0IGlzIGltcG9ydGFudCB0byByZWFsaXplIHRoYXQgaWYgeW91IGNyZWF0ZSBhbiBleHByZXNzaW9uIGZyb20gYSBzdHJpbmcgdGhhdCBjb250YWlucyB1c2VyIHByb3ZpZGVkXG4vLyBjb250ZW50IHRoZW4gaXQgaXMgcG9zc2libGUgdGhhdCB5b3VyIGFwcGxpY2F0aW9uIGNvbnRhaW5zIGEgc2VjdXJpdHkgdnVsbmVyYWJpbGl0eSB0byBhbiBYU1Mgc3R5bGUgYXR0YWNrLlxuLy9cbi8vIFNlZSBodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9ndWlkZS9zZWN1cml0eVxuXG5cbmZ1bmN0aW9uIGdldFN0cmluZ1ZhbHVlKG5hbWUpIHtcbiAgLy8gUHJvcGVydHkgbmFtZXMgbXVzdCBiZSBzdHJpbmdzLiBUaGlzIG1lYW5zIHRoYXQgbm9uLXN0cmluZyBvYmplY3RzIGNhbm5vdCBiZSB1c2VkXG4gIC8vIGFzIGtleXMgaW4gYW4gb2JqZWN0LiBBbnkgbm9uLXN0cmluZyBvYmplY3QsIGluY2x1ZGluZyBhIG51bWJlciwgaXMgdHlwZWNhc3RlZFxuICAvLyBpbnRvIGEgc3RyaW5nIHZpYSB0aGUgdG9TdHJpbmcgbWV0aG9kLlxuICAvLyAtLSBNRE4sIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9Qcm9wZXJ0eV9hY2Nlc3NvcnMjUHJvcGVydHlfbmFtZXNcbiAgLy9cbiAgLy8gU28sIHRvIGVuc3VyZSB0aGF0IHdlIGFyZSBjaGVja2luZyB0aGUgc2FtZSBgbmFtZWAgdGhhdCBKYXZhU2NyaXB0IHdvdWxkIHVzZSwgd2UgY2FzdCBpdFxuICAvLyB0byBhIHN0cmluZy4gSXQncyBub3QgYWx3YXlzIHBvc3NpYmxlLiBJZiBgbmFtZWAgaXMgYW4gb2JqZWN0IGFuZCBpdHMgYHRvU3RyaW5nYCBtZXRob2QgaXNcbiAgLy8gJ2Jyb2tlbicgKGRvZXNuJ3QgcmV0dXJuIGEgc3RyaW5nLCBpc24ndCBhIGZ1bmN0aW9uLCBldGMuKSwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd246XG4gIC8vXG4gIC8vIFR5cGVFcnJvcjogQ2Fubm90IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVxuICAvL1xuICAvLyBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgd2UgZG9uJ3QgY2F0Y2ggdGhpcyBlcnJvciBoZXJlIGFuZCBhbGxvdyBpdCB0byBwcm9wYWdhdGUgdXAgdGhlIGNhbGxcbiAgLy8gc3RhY2suIE5vdGUgdGhhdCB5b3UnbGwgZ2V0IHRoZSBzYW1lIGVycm9yIGluIEphdmFTY3JpcHQgaWYgeW91IHRyeSB0byBhY2Nlc3MgYSBwcm9wZXJ0eSB1c2luZ1xuICAvLyBzdWNoIGEgJ2Jyb2tlbicgb2JqZWN0IGFzIGEga2V5LlxuICByZXR1cm4gbmFtZSArICcnO1xufVxuXG5cbnZhciBPUEVSQVRPUlMgPSBjcmVhdGVNYXAoKTtcbmZvckVhY2goJysgLSAqIC8gJSA9PT0gIT09ID09ICE9IDwgPiA8PSA+PSAmJiB8fCAhID0gfCcuc3BsaXQoJyAnKSwgZnVuY3Rpb24ob3BlcmF0b3IpIHsgT1BFUkFUT1JTW29wZXJhdG9yXSA9IHRydWU7IH0pO1xudmFyIEVTQ0FQRSA9IHsnbic6J1xcbicsICdmJzonXFxmJywgJ3InOidcXHInLCAndCc6J1xcdCcsICd2JzonXFx2JywgJ1xcJyc6J1xcJycsICdcIic6J1wiJ307XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52YXIgTGV4ZXIgPSBmdW5jdGlvbiBMZXhlcihvcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG59O1xuXG5MZXhlci5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBMZXhlcixcblxuICBsZXg6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIHRoaXMuaW5kZXggPSAwO1xuICAgIHRoaXMudG9rZW5zID0gW107XG5cbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICBpZiAoY2ggPT09ICdcIicgfHwgY2ggPT09ICdcXCcnKSB7XG4gICAgICAgIHRoaXMucmVhZFN0cmluZyhjaCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNOdW1iZXIoY2gpIHx8IGNoID09PSAnLicgJiYgdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpIHtcbiAgICAgICAgdGhpcy5yZWFkTnVtYmVyKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNJZGVudGlmaWVyU3RhcnQodGhpcy5wZWVrTXVsdGljaGFyKCkpKSB7XG4gICAgICAgIHRoaXMucmVhZElkZW50KCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXMoY2gsICcoKXt9W10uLDs6PycpKSB7XG4gICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiBjaH0pO1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNXaGl0ZXNwYWNlKGNoKSkge1xuICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2gyID0gY2ggKyB0aGlzLnBlZWsoKTtcbiAgICAgICAgdmFyIGNoMyA9IGNoMiArIHRoaXMucGVlaygyKTtcbiAgICAgICAgdmFyIG9wMSA9IE9QRVJBVE9SU1tjaF07XG4gICAgICAgIHZhciBvcDIgPSBPUEVSQVRPUlNbY2gyXTtcbiAgICAgICAgdmFyIG9wMyA9IE9QRVJBVE9SU1tjaDNdO1xuICAgICAgICBpZiAob3AxIHx8IG9wMiB8fCBvcDMpIHtcbiAgICAgICAgICB2YXIgdG9rZW4gPSBvcDMgPyBjaDMgOiAob3AyID8gY2gyIDogY2gpO1xuICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goe2luZGV4OiB0aGlzLmluZGV4LCB0ZXh0OiB0b2tlbiwgb3BlcmF0b3I6IHRydWV9KTtcbiAgICAgICAgICB0aGlzLmluZGV4ICs9IHRva2VuLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnRocm93RXJyb3IoJ1VuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgJywgdGhpcy5pbmRleCwgdGhpcy5pbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRva2VucztcbiAgfSxcblxuICBpczogZnVuY3Rpb24oY2gsIGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihpKSB7XG4gICAgdmFyIG51bSA9IGkgfHwgMTtcbiAgICByZXR1cm4gKHRoaXMuaW5kZXggKyBudW0gPCB0aGlzLnRleHQubGVuZ3RoKSA/IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCArIG51bSkgOiBmYWxzZTtcbiAgfSxcblxuICBpc051bWJlcjogZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gKCcwJyA8PSBjaCAmJiBjaCA8PSAnOScpICYmIHR5cGVvZiBjaCA9PT0gJ3N0cmluZyc7XG4gIH0sXG5cbiAgaXNXaGl0ZXNwYWNlOiBmdW5jdGlvbihjaCkge1xuICAgIC8vIElFIHRyZWF0cyBub24tYnJlYWtpbmcgc3BhY2UgYXMgXFx1MDBBMFxuICAgIHJldHVybiAoY2ggPT09ICcgJyB8fCBjaCA9PT0gJ1xccicgfHwgY2ggPT09ICdcXHQnIHx8XG4gICAgICAgICAgICBjaCA9PT0gJ1xcbicgfHwgY2ggPT09ICdcXHYnIHx8IGNoID09PSAnXFx1MDBBMCcpO1xuICB9LFxuXG4gIGlzSWRlbnRpZmllclN0YXJ0OiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyU3RhcnQgP1xuICAgICAgICB0aGlzLm9wdGlvbnMuaXNJZGVudGlmaWVyU3RhcnQoY2gsIHRoaXMuY29kZVBvaW50QXQoY2gpKSA6XG4gICAgICAgIHRoaXMuaXNWYWxpZElkZW50aWZpZXJTdGFydChjaCk7XG4gIH0sXG5cbiAgaXNWYWxpZElkZW50aWZpZXJTdGFydDogZnVuY3Rpb24oY2gpIHtcbiAgICByZXR1cm4gKCdhJyA8PSBjaCAmJiBjaCA8PSAneicgfHxcbiAgICAgICAgICAgICdBJyA8PSBjaCAmJiBjaCA8PSAnWicgfHxcbiAgICAgICAgICAgICdfJyA9PT0gY2ggfHwgY2ggPT09ICckJyk7XG4gIH0sXG5cbiAgaXNJZGVudGlmaWVyQ29udGludWU6IGZ1bmN0aW9uKGNoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZSA/XG4gICAgICAgIHRoaXMub3B0aW9ucy5pc0lkZW50aWZpZXJDb250aW51ZShjaCwgdGhpcy5jb2RlUG9pbnRBdChjaCkpIDpcbiAgICAgICAgdGhpcy5pc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlKGNoKTtcbiAgfSxcblxuICBpc1ZhbGlkSWRlbnRpZmllckNvbnRpbnVlOiBmdW5jdGlvbihjaCwgY3ApIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkSWRlbnRpZmllclN0YXJ0KGNoLCBjcCkgfHwgdGhpcy5pc051bWJlcihjaCk7XG4gIH0sXG5cbiAgY29kZVBvaW50QXQ6IGZ1bmN0aW9uKGNoKSB7XG4gICAgaWYgKGNoLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGNoLmNoYXJDb2RlQXQoMCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICByZXR1cm4gKGNoLmNoYXJDb2RlQXQoMCkgPDwgMTApICsgY2guY2hhckNvZGVBdCgxKSAtIDB4MzVGREMwMDtcbiAgfSxcblxuICBwZWVrTXVsdGljaGFyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2ggPSB0aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpO1xuICAgIHZhciBwZWVrID0gdGhpcy5wZWVrKCk7XG4gICAgaWYgKCFwZWVrKSB7XG4gICAgICByZXR1cm4gY2g7XG4gICAgfVxuICAgIHZhciBjcDEgPSBjaC5jaGFyQ29kZUF0KDApO1xuICAgIHZhciBjcDIgPSBwZWVrLmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNwMSA+PSAweEQ4MDAgJiYgY3AxIDw9IDB4REJGRiAmJiBjcDIgPj0gMHhEQzAwICYmIGNwMiA8PSAweERGRkYpIHtcbiAgICAgIHJldHVybiBjaCArIHBlZWs7XG4gICAgfVxuICAgIHJldHVybiBjaDtcbiAgfSxcblxuICBpc0V4cE9wZXJhdG9yOiBmdW5jdGlvbihjaCkge1xuICAgIHJldHVybiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnIHx8IHRoaXMuaXNOdW1iZXIoY2gpKTtcbiAgfSxcblxuICB0aHJvd0Vycm9yOiBmdW5jdGlvbihlcnJvciwgc3RhcnQsIGVuZCkge1xuICAgIGVuZCA9IGVuZCB8fCB0aGlzLmluZGV4O1xuICAgIHZhciBjb2xTdHIgPSAoaXNEZWZpbmVkKHN0YXJ0KVxuICAgICAgICAgICAgPyAncyAnICsgc3RhcnQgKyAgJy0nICsgdGhpcy5pbmRleCArICcgWycgKyB0aGlzLnRleHQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpICsgJ10nXG4gICAgICAgICAgICA6ICcgJyArIGVuZCk7XG4gICAgdGhyb3cgJHBhcnNlTWluRXJyKCdsZXhlcnInLCAnTGV4ZXIgRXJyb3I6IHswfSBhdCBjb2x1bW57MX0gaW4gZXhwcmVzc2lvbiBbezJ9XS4nLFxuICAgICAgICBlcnJvciwgY29sU3RyLCB0aGlzLnRleHQpO1xuICB9LFxuXG4gIHJlYWROdW1iZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBudW1iZXIgPSAnJztcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHdoaWxlICh0aGlzLmluZGV4IDwgdGhpcy50ZXh0Lmxlbmd0aCkge1xuICAgICAgdmFyIGNoID0gbG93ZXJjYXNlKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO1xuICAgICAgaWYgKGNoID09PSAnLicgfHwgdGhpcy5pc051bWJlcihjaCkpIHtcbiAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHBlZWtDaCA9IHRoaXMucGVlaygpO1xuICAgICAgICBpZiAoY2ggPT09ICdlJyAmJiB0aGlzLmlzRXhwT3BlcmF0b3IocGVla0NoKSkge1xuICAgICAgICAgIG51bWJlciArPSBjaDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRXhwT3BlcmF0b3IoY2gpICYmXG4gICAgICAgICAgICBwZWVrQ2ggJiYgdGhpcy5pc051bWJlcihwZWVrQ2gpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PT0gJ2UnKSB7XG4gICAgICAgICAgbnVtYmVyICs9IGNoO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFeHBPcGVyYXRvcihjaCkgJiZcbiAgICAgICAgICAgICghcGVla0NoIHx8ICF0aGlzLmlzTnVtYmVyKHBlZWtDaCkpICYmXG4gICAgICAgICAgICBudW1iZXIuY2hhckF0KG51bWJlci5sZW5ndGggLSAxKSA9PT0gJ2UnKSB7XG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJbnZhbGlkIGV4cG9uZW50Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50b2tlbnMucHVzaCh7XG4gICAgICBpbmRleDogc3RhcnQsXG4gICAgICB0ZXh0OiBudW1iZXIsXG4gICAgICBjb25zdGFudDogdHJ1ZSxcbiAgICAgIHZhbHVlOiBOdW1iZXIobnVtYmVyKVxuICAgIH0pO1xuICB9LFxuXG4gIHJlYWRJZGVudDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5pbmRleDtcbiAgICB0aGlzLmluZGV4ICs9IHRoaXMucGVla011bHRpY2hhcigpLmxlbmd0aDtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMucGVla011bHRpY2hhcigpO1xuICAgICAgaWYgKCF0aGlzLmlzSWRlbnRpZmllckNvbnRpbnVlKGNoKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXggKz0gY2gubGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgIGluZGV4OiBzdGFydCxcbiAgICAgIHRleHQ6IHRoaXMudGV4dC5zbGljZShzdGFydCwgdGhpcy5pbmRleCksXG4gICAgICBpZGVudGlmaWVyOiB0cnVlXG4gICAgfSk7XG4gIH0sXG5cbiAgcmVhZFN0cmluZzogZnVuY3Rpb24ocXVvdGUpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLmluZGV4O1xuICAgIHRoaXMuaW5kZXgrKztcbiAgICB2YXIgc3RyaW5nID0gJyc7XG4gICAgdmFyIHJhd1N0cmluZyA9IHF1b3RlO1xuICAgIHZhciBlc2NhcGUgPSBmYWxzZTtcbiAgICB3aGlsZSAodGhpcy5pbmRleCA8IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgIHZhciBjaCA9IHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7XG4gICAgICByYXdTdHJpbmcgKz0gY2g7XG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIGlmIChjaCA9PT0gJ3UnKSB7XG4gICAgICAgICAgdmFyIGhleCA9IHRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCArIDEsIHRoaXMuaW5kZXggKyA1KTtcbiAgICAgICAgICBpZiAoIWhleC5tYXRjaCgvW1xcZGEtZl17NH0vaSkpIHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dFcnJvcignSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHUnICsgaGV4ICsgJ10nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5pbmRleCArPSA0O1xuICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGhleCwgMTYpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgcmVwID0gRVNDQVBFW2NoXTtcbiAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcgKyAocmVwIHx8IGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlc2NhcGUgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoY2ggPT09ICdcXFxcJykge1xuICAgICAgICBlc2NhcGUgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChjaCA9PT0gcXVvdGUpIHtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHtcbiAgICAgICAgICBpbmRleDogc3RhcnQsXG4gICAgICAgICAgdGV4dDogcmF3U3RyaW5nLFxuICAgICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICAgIHZhbHVlOiBzdHJpbmdcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmluZyArPSBjaDtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5kZXgrKztcbiAgICB9XG4gICAgdGhpcy50aHJvd0Vycm9yKCdVbnRlcm1pbmF0ZWQgcXVvdGUnLCBzdGFydCk7XG4gIH1cbn07XG5cbnZhciBBU1QgPSBmdW5jdGlvbiBBU1QobGV4ZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5sZXhlciA9IGxleGVyO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xufTtcblxuQVNULlByb2dyYW0gPSAnUHJvZ3JhbSc7XG5BU1QuRXhwcmVzc2lvblN0YXRlbWVudCA9ICdFeHByZXNzaW9uU3RhdGVtZW50JztcbkFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbiA9ICdBc3NpZ25tZW50RXhwcmVzc2lvbic7XG5BU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uID0gJ0NvbmRpdGlvbmFsRXhwcmVzc2lvbic7XG5BU1QuTG9naWNhbEV4cHJlc3Npb24gPSAnTG9naWNhbEV4cHJlc3Npb24nO1xuQVNULkJpbmFyeUV4cHJlc3Npb24gPSAnQmluYXJ5RXhwcmVzc2lvbic7XG5BU1QuVW5hcnlFeHByZXNzaW9uID0gJ1VuYXJ5RXhwcmVzc2lvbic7XG5BU1QuQ2FsbEV4cHJlc3Npb24gPSAnQ2FsbEV4cHJlc3Npb24nO1xuQVNULk1lbWJlckV4cHJlc3Npb24gPSAnTWVtYmVyRXhwcmVzc2lvbic7XG5BU1QuSWRlbnRpZmllciA9ICdJZGVudGlmaWVyJztcbkFTVC5MaXRlcmFsID0gJ0xpdGVyYWwnO1xuQVNULkFycmF5RXhwcmVzc2lvbiA9ICdBcnJheUV4cHJlc3Npb24nO1xuQVNULlByb3BlcnR5ID0gJ1Byb3BlcnR5JztcbkFTVC5PYmplY3RFeHByZXNzaW9uID0gJ09iamVjdEV4cHJlc3Npb24nO1xuQVNULlRoaXNFeHByZXNzaW9uID0gJ1RoaXNFeHByZXNzaW9uJztcbkFTVC5Mb2NhbHNFeHByZXNzaW9uID0gJ0xvY2Fsc0V4cHJlc3Npb24nO1xuXG4vLyBJbnRlcm5hbCB1c2Ugb25seVxuQVNULk5HVmFsdWVQYXJhbWV0ZXIgPSAnTkdWYWx1ZVBhcmFtZXRlcic7XG5cbkFTVC5wcm90b3R5cGUgPSB7XG4gIGFzdDogZnVuY3Rpb24odGV4dCkge1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgdGhpcy50b2tlbnMgPSB0aGlzLmxleGVyLmxleCh0ZXh0KTtcblxuICAgIHZhciB2YWx1ZSA9IHRoaXMucHJvZ3JhbSgpO1xuXG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBhbiB1bmV4cGVjdGVkIHRva2VuJywgdGhpcy50b2tlbnNbMF0pO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICBwcm9ncmFtOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYm9keSA9IFtdO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAodGhpcy50b2tlbnMubGVuZ3RoID4gMCAmJiAhdGhpcy5wZWVrKCd9JywgJyknLCAnOycsICddJykpXG4gICAgICAgIGJvZHkucHVzaCh0aGlzLmV4cHJlc3Npb25TdGF0ZW1lbnQoKSk7XG4gICAgICBpZiAoIXRoaXMuZXhwZWN0KCc7JykpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogQVNULlByb2dyYW0sIGJvZHk6IGJvZHl9O1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBleHByZXNzaW9uU3RhdGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4geyB0eXBlOiBBU1QuRXhwcmVzc2lvblN0YXRlbWVudCwgZXhwcmVzc2lvbjogdGhpcy5maWx0ZXJDaGFpbigpIH07XG4gIH0sXG5cbiAgZmlsdGVyQ2hhaW46IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZWZ0ID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgd2hpbGUgKHRoaXMuZXhwZWN0KCd8JykpIHtcbiAgICAgIGxlZnQgPSB0aGlzLmZpbHRlcihsZWZ0KTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgZXhwcmVzc2lvbjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaWdubWVudCgpO1xuICB9LFxuXG4gIGFzc2lnbm1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLnRlcm5hcnkoKTtcbiAgICBpZiAodGhpcy5leHBlY3QoJz0nKSkge1xuICAgICAgaWYgKCFpc0Fzc2lnbmFibGUocmVzdWx0KSkge1xuICAgICAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2x2YWwnLCAnVHJ5aW5nIHRvIGFzc2lnbiBhIHZhbHVlIHRvIGEgbm9uIGwtdmFsdWUnKTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0ID0geyB0eXBlOiBBU1QuQXNzaWdubWVudEV4cHJlc3Npb24sIGxlZnQ6IHJlc3VsdCwgcmlnaHQ6IHRoaXMuYXNzaWdubWVudCgpLCBvcGVyYXRvcjogJz0nfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcblxuICB0ZXJuYXJ5OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGVzdCA9IHRoaXMubG9naWNhbE9SKCk7XG4gICAgdmFyIGFsdGVybmF0ZTtcbiAgICB2YXIgY29uc2VxdWVudDtcbiAgICBpZiAodGhpcy5leHBlY3QoJz8nKSkge1xuICAgICAgYWx0ZXJuYXRlID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICBpZiAodGhpcy5jb25zdW1lKCc6JykpIHtcbiAgICAgICAgY29uc2VxdWVudCA9IHRoaXMuZXhwcmVzc2lvbigpO1xuICAgICAgICByZXR1cm4geyB0eXBlOiBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uLCB0ZXN0OiB0ZXN0LCBhbHRlcm5hdGU6IGFsdGVybmF0ZSwgY29uc2VxdWVudDogY29uc2VxdWVudH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZXN0O1xuICB9LFxuXG4gIGxvZ2ljYWxPUjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLmxvZ2ljYWxBTkQoKTtcbiAgICB3aGlsZSAodGhpcy5leHBlY3QoJ3x8JykpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5Mb2dpY2FsRXhwcmVzc2lvbiwgb3BlcmF0b3I6ICd8fCcsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLmxvZ2ljYWxBTkQoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBsb2dpY2FsQU5EOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuZXF1YWxpdHkoKTtcbiAgICB3aGlsZSAodGhpcy5leHBlY3QoJyYmJykpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5Mb2dpY2FsRXhwcmVzc2lvbiwgb3BlcmF0b3I6ICcmJicsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLmVxdWFsaXR5KCl9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBlcXVhbGl0eTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnJlbGF0aW9uYWwoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc9PScsJyE9JywnPT09JywnIT09JykpKSB7XG4gICAgICBsZWZ0ID0geyB0eXBlOiBBU1QuQmluYXJ5RXhwcmVzc2lvbiwgb3BlcmF0b3I6IHRva2VuLnRleHQsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLnJlbGF0aW9uYWwoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICByZWxhdGlvbmFsOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXMuYWRkaXRpdmUoKTtcbiAgICB2YXIgdG9rZW47XG4gICAgd2hpbGUgKCh0b2tlbiA9IHRoaXMuZXhwZWN0KCc8JywgJz4nLCAnPD0nLCAnPj0nKSkpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgbGVmdDogbGVmdCwgcmlnaHQ6IHRoaXMuYWRkaXRpdmUoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBhZGRpdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLm11bHRpcGxpY2F0aXZlKCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKycsJy0nKSkpIHtcbiAgICAgIGxlZnQgPSB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgbGVmdDogbGVmdCwgcmlnaHQ6IHRoaXMubXVsdGlwbGljYXRpdmUoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gbGVmdDtcbiAgfSxcblxuICBtdWx0aXBsaWNhdGl2ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzLnVuYXJ5KCk7XG4gICAgdmFyIHRva2VuO1xuICAgIHdoaWxlICgodG9rZW4gPSB0aGlzLmV4cGVjdCgnKicsJy8nLCclJykpKSB7XG4gICAgICBsZWZ0ID0geyB0eXBlOiBBU1QuQmluYXJ5RXhwcmVzc2lvbiwgb3BlcmF0b3I6IHRva2VuLnRleHQsIGxlZnQ6IGxlZnQsIHJpZ2h0OiB0aGlzLnVuYXJ5KCkgfTtcbiAgICB9XG4gICAgcmV0dXJuIGxlZnQ7XG4gIH0sXG5cbiAgdW5hcnk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbjtcbiAgICBpZiAoKHRva2VuID0gdGhpcy5leHBlY3QoJysnLCAnLScsICchJykpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBBU1QuVW5hcnlFeHByZXNzaW9uLCBvcGVyYXRvcjogdG9rZW4udGV4dCwgcHJlZml4OiB0cnVlLCBhcmd1bWVudDogdGhpcy51bmFyeSgpIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnByaW1hcnkoKTtcbiAgICB9XG4gIH0sXG5cbiAgcHJpbWFyeTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHByaW1hcnk7XG4gICAgaWYgKHRoaXMuZXhwZWN0KCcoJykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmZpbHRlckNoYWluKCk7XG4gICAgICB0aGlzLmNvbnN1bWUoJyknKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCdbJykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmFycmF5RGVjbGFyYXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhwZWN0KCd7JykpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLm9iamVjdCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zZWxmUmVmZXJlbnRpYWwuaGFzT3duUHJvcGVydHkodGhpcy5wZWVrKCkudGV4dCkpIHtcbiAgICAgIHByaW1hcnkgPSBjb3B5KHRoaXMuc2VsZlJlZmVyZW50aWFsW3RoaXMuY29uc3VtZSgpLnRleHRdKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5saXRlcmFscy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnBlZWsoKS50ZXh0KSkge1xuICAgICAgcHJpbWFyeSA9IHsgdHlwZTogQVNULkxpdGVyYWwsIHZhbHVlOiB0aGlzLm9wdGlvbnMubGl0ZXJhbHNbdGhpcy5jb25zdW1lKCkudGV4dF19O1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuaWRlbnRpZmllcikge1xuICAgICAgcHJpbWFyeSA9IHRoaXMuaWRlbnRpZmllcigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKCkuY29uc3RhbnQpIHtcbiAgICAgIHByaW1hcnkgPSB0aGlzLmNvbnN0YW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignbm90IGEgcHJpbWFyeSBleHByZXNzaW9uJywgdGhpcy5wZWVrKCkpO1xuICAgIH1cblxuICAgIHZhciBuZXh0O1xuICAgIHdoaWxlICgobmV4dCA9IHRoaXMuZXhwZWN0KCcoJywgJ1snLCAnLicpKSkge1xuICAgICAgaWYgKG5leHQudGV4dCA9PT0gJygnKSB7XG4gICAgICAgIHByaW1hcnkgPSB7dHlwZTogQVNULkNhbGxFeHByZXNzaW9uLCBjYWxsZWU6IHByaW1hcnksIGFyZ3VtZW50czogdGhpcy5wYXJzZUFyZ3VtZW50cygpIH07XG4gICAgICAgIHRoaXMuY29uc3VtZSgnKScpO1xuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICdbJykge1xuICAgICAgICBwcmltYXJ5ID0geyB0eXBlOiBBU1QuTWVtYmVyRXhwcmVzc2lvbiwgb2JqZWN0OiBwcmltYXJ5LCBwcm9wZXJ0eTogdGhpcy5leHByZXNzaW9uKCksIGNvbXB1dGVkOiB0cnVlIH07XG4gICAgICAgIHRoaXMuY29uc3VtZSgnXScpO1xuICAgICAgfSBlbHNlIGlmIChuZXh0LnRleHQgPT09ICcuJykge1xuICAgICAgICBwcmltYXJ5ID0geyB0eXBlOiBBU1QuTWVtYmVyRXhwcmVzc2lvbiwgb2JqZWN0OiBwcmltYXJ5LCBwcm9wZXJ0eTogdGhpcy5pZGVudGlmaWVyKCksIGNvbXB1dGVkOiBmYWxzZSB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdJTVBPU1NJQkxFJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcmltYXJ5O1xuICB9LFxuXG4gIGZpbHRlcjogZnVuY3Rpb24oYmFzZUV4cHJlc3Npb24pIHtcbiAgICB2YXIgYXJncyA9IFtiYXNlRXhwcmVzc2lvbl07XG4gICAgdmFyIHJlc3VsdCA9IHt0eXBlOiBBU1QuQ2FsbEV4cHJlc3Npb24sIGNhbGxlZTogdGhpcy5pZGVudGlmaWVyKCksIGFyZ3VtZW50czogYXJncywgZmlsdGVyOiB0cnVlfTtcblxuICAgIHdoaWxlICh0aGlzLmV4cGVjdCgnOicpKSB7XG4gICAgICBhcmdzLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgcGFyc2VBcmd1bWVudHM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgaWYgKHRoaXMucGVla1Rva2VuKCkudGV4dCAhPT0gJyknKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGFyZ3MucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9LFxuXG4gIGlkZW50aWZpZXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b2tlbiA9IHRoaXMuY29uc3VtZSgpO1xuICAgIGlmICghdG9rZW4uaWRlbnRpZmllcikge1xuICAgICAgdGhpcy50aHJvd0Vycm9yKCdpcyBub3QgYSB2YWxpZCBpZGVudGlmaWVyJywgdG9rZW4pO1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBBU1QuSWRlbnRpZmllciwgbmFtZTogdG9rZW4udGV4dCB9O1xuICB9LFxuXG4gIGNvbnN0YW50OiBmdW5jdGlvbigpIHtcbiAgICAvLyBUT0RPIGNoZWNrIHRoYXQgaXQgaXMgYSBjb25zdGFudFxuICAgIHJldHVybiB7IHR5cGU6IEFTVC5MaXRlcmFsLCB2YWx1ZTogdGhpcy5jb25zdW1lKCkudmFsdWUgfTtcbiAgfSxcblxuICBhcnJheURlY2xhcmF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZWxlbWVudHMgPSBbXTtcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnXScpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRoaXMucGVlaygnXScpKSB7XG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzLnB1c2godGhpcy5leHByZXNzaW9uKCkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnXScpO1xuXG4gICAgcmV0dXJuIHsgdHlwZTogQVNULkFycmF5RXhwcmVzc2lvbiwgZWxlbWVudHM6IGVsZW1lbnRzIH07XG4gIH0sXG5cbiAgb2JqZWN0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJvcGVydGllcyA9IFtdLCBwcm9wZXJ0eTtcbiAgICBpZiAodGhpcy5wZWVrVG9rZW4oKS50ZXh0ICE9PSAnfScpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHRoaXMucGVlaygnfScpKSB7XG4gICAgICAgICAgLy8gU3VwcG9ydCB0cmFpbGluZyBjb21tYXMgcGVyIEVTNS4xLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHByb3BlcnR5ID0ge3R5cGU6IEFTVC5Qcm9wZXJ0eSwga2luZDogJ2luaXQnfTtcbiAgICAgICAgaWYgKHRoaXMucGVlaygpLmNvbnN0YW50KSB7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5jb25zdGFudCgpO1xuICAgICAgICAgIHByb3BlcnR5LmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCc6Jyk7XG4gICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBlZWsoKS5pZGVudGlmaWVyKSB7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5pZGVudGlmaWVyKCk7XG4gICAgICAgICAgcHJvcGVydHkuY29tcHV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAodGhpcy5wZWVrKCc6JykpIHtcbiAgICAgICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvcGVydHkudmFsdWUgPSBwcm9wZXJ0eS5rZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGVlaygnWycpKSB7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCdbJyk7XG4gICAgICAgICAgcHJvcGVydHkua2V5ID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICAgICAgdGhpcy5jb25zdW1lKCddJyk7XG4gICAgICAgICAgcHJvcGVydHkuY29tcHV0ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuY29uc3VtZSgnOicpO1xuICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gdGhpcy5leHByZXNzaW9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy50aHJvd0Vycm9yKCdpbnZhbGlkIGtleScsIHRoaXMucGVlaygpKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpO1xuICAgICAgfSB3aGlsZSAodGhpcy5leHBlY3QoJywnKSk7XG4gICAgfVxuICAgIHRoaXMuY29uc3VtZSgnfScpO1xuXG4gICAgcmV0dXJuIHt0eXBlOiBBU1QuT2JqZWN0RXhwcmVzc2lvbiwgcHJvcGVydGllczogcHJvcGVydGllcyB9O1xuICB9LFxuXG4gIHRocm93RXJyb3I6IGZ1bmN0aW9uKG1zZywgdG9rZW4pIHtcbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ3N5bnRheCcsXG4gICAgICAgICdTeW50YXggRXJyb3I6IFRva2VuIFxcJ3swfVxcJyB7MX0gYXQgY29sdW1uIHsyfSBvZiB0aGUgZXhwcmVzc2lvbiBbezN9XSBzdGFydGluZyBhdCBbezR9XS4nLFxuICAgICAgICAgIHRva2VuLnRleHQsIG1zZywgKHRva2VuLmluZGV4ICsgMSksIHRoaXMudGV4dCwgdGhpcy50ZXh0LnN1YnN0cmluZyh0b2tlbi5pbmRleCkpO1xuICB9LFxuXG4gIGNvbnN1bWU6IGZ1bmN0aW9uKGUxKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCd1ZW9lJywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsIHRoaXMudGV4dCk7XG4gICAgfVxuXG4gICAgdmFyIHRva2VuID0gdGhpcy5leHBlY3QoZTEpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHRoaXMudGhyb3dFcnJvcignaXMgdW5leHBlY3RlZCwgZXhwZWN0aW5nIFsnICsgZTEgKyAnXScsIHRoaXMucGVlaygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRva2VuO1xuICB9LFxuXG4gIHBlZWtUb2tlbjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgJHBhcnNlTWluRXJyKCd1ZW9lJywgJ1VuZXhwZWN0ZWQgZW5kIG9mIGV4cHJlc3Npb246IHswfScsIHRoaXMudGV4dCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRva2Vuc1swXTtcbiAgfSxcblxuICBwZWVrOiBmdW5jdGlvbihlMSwgZTIsIGUzLCBlNCkge1xuICAgIHJldHVybiB0aGlzLnBlZWtBaGVhZCgwLCBlMSwgZTIsIGUzLCBlNCk7XG4gIH0sXG5cbiAgcGVla0FoZWFkOiBmdW5jdGlvbihpLCBlMSwgZTIsIGUzLCBlNCkge1xuICAgIGlmICh0aGlzLnRva2Vucy5sZW5ndGggPiBpKSB7XG4gICAgICB2YXIgdG9rZW4gPSB0aGlzLnRva2Vuc1tpXTtcbiAgICAgIHZhciB0ID0gdG9rZW4udGV4dDtcbiAgICAgIGlmICh0ID09PSBlMSB8fCB0ID09PSBlMiB8fCB0ID09PSBlMyB8fCB0ID09PSBlNCB8fFxuICAgICAgICAgICghZTEgJiYgIWUyICYmICFlMyAmJiAhZTQpKSB7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIGV4cGVjdDogZnVuY3Rpb24oZTEsIGUyLCBlMywgZTQpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLnBlZWsoZTEsIGUyLCBlMywgZTQpO1xuICAgIGlmICh0b2tlbikge1xuICAgICAgdGhpcy50b2tlbnMuc2hpZnQoKTtcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIHNlbGZSZWZlcmVudGlhbDoge1xuICAgICd0aGlzJzoge3R5cGU6IEFTVC5UaGlzRXhwcmVzc2lvbiB9LFxuICAgICckbG9jYWxzJzoge3R5cGU6IEFTVC5Mb2NhbHNFeHByZXNzaW9uIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gaWZEZWZpbmVkKHYsIGQpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ICE9PSAndW5kZWZpbmVkJyA/IHYgOiBkO1xufVxuXG5mdW5jdGlvbiBwbHVzRm4obCwgcikge1xuICBpZiAodHlwZW9mIGwgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gcjtcbiAgaWYgKHR5cGVvZiByID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGw7XG4gIHJldHVybiBsICsgcjtcbn1cblxuZnVuY3Rpb24gaXNTdGF0ZWxlc3MoJGZpbHRlciwgZmlsdGVyTmFtZSkge1xuICB2YXIgZm4gPSAkZmlsdGVyKGZpbHRlck5hbWUpO1xuICByZXR1cm4gIWZuLiRzdGF0ZWZ1bDtcbn1cblxudmFyIFBVUklUWV9BQlNPTFVURSA9IDE7XG52YXIgUFVSSVRZX1JFTEFUSVZFID0gMjtcblxuLy8gRGV0ZWN0IG5vZGVzIHdoaWNoIGNvdWxkIGRlcGVuZCBvbiBub24tc2hhbGxvdyBzdGF0ZSBvZiBvYmplY3RzXG5mdW5jdGlvbiBpc1B1cmUobm9kZSwgcGFyZW50SXNQdXJlKSB7XG4gIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgLy8gQ29tcHV0ZWQgbWVtYmVycyBtaWdodCBpbnZva2UgYSBzdGF0ZWZ1bCB0b1N0cmluZygpXG4gICAgY2FzZSBBU1QuTWVtYmVyRXhwcmVzc2lvbjpcbiAgICAgIGlmIChub2RlLmNvbXB1dGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gVW5hcnkgYWx3YXlzIGNvbnZlcnQgdG8gcHJpbWF0aXZlXG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIFBVUklUWV9BQlNPTFVURTtcblxuICAgIC8vIFRoZSBiaW5hcnkgKyBvcGVyYXRvciBjYW4gaW52b2tlIGEgc3RhdGVmdWwgdG9TdHJpbmcoKS5cbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIG5vZGUub3BlcmF0b3IgIT09ICcrJyA/IFBVUklUWV9BQlNPTFVURSA6IGZhbHNlO1xuXG4gICAgLy8gRnVuY3Rpb25zIC8gZmlsdGVycyBwcm9iYWJseSByZWFkIHN0YXRlIGZyb20gd2l0aGluIG9iamVjdHNcbiAgICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiAodW5kZWZpbmVkID09PSBwYXJlbnRJc1B1cmUpID8gUFVSSVRZX1JFTEFUSVZFIDogcGFyZW50SXNQdXJlO1xufVxuXG5mdW5jdGlvbiBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdCwgJGZpbHRlciwgcGFyZW50SXNQdXJlKSB7XG4gIHZhciBhbGxDb25zdGFudHM7XG4gIHZhciBhcmdzVG9XYXRjaDtcbiAgdmFyIGlzU3RhdGVsZXNzRmlsdGVyO1xuXG4gIHZhciBhc3RJc1B1cmUgPSBhc3QuaXNQdXJlID0gaXNQdXJlKGFzdCwgcGFyZW50SXNQdXJlKTtcblxuICBzd2l0Y2ggKGFzdC50eXBlKSB7XG4gIGNhc2UgQVNULlByb2dyYW06XG4gICAgYWxsQ29uc3RhbnRzID0gdHJ1ZTtcbiAgICBmb3JFYWNoKGFzdC5ib2R5LCBmdW5jdGlvbihleHByKSB7XG4gICAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGV4cHIuZXhwcmVzc2lvbiwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmV4cHJlc3Npb24uY29uc3RhbnQ7XG4gICAgfSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYWxsQ29uc3RhbnRzO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5MaXRlcmFsOlxuICAgIGFzdC5jb25zdGFudCA9IHRydWU7XG4gICAgYXN0LnRvV2F0Y2ggPSBbXTtcbiAgICBicmVhaztcbiAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmFyZ3VtZW50LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC5hcmd1bWVudC5jb25zdGFudDtcbiAgICBhc3QudG9XYXRjaCA9IGFzdC5hcmd1bWVudC50b1dhdGNoO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmxlZnQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3QucmlnaHQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYXN0LmxlZnQuY29uc3RhbnQgJiYgYXN0LnJpZ2h0LmNvbnN0YW50O1xuICAgIGFzdC50b1dhdGNoID0gYXN0LmxlZnQudG9XYXRjaC5jb25jYXQoYXN0LnJpZ2h0LnRvV2F0Y2gpO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5Mb2dpY2FsRXhwcmVzc2lvbjpcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC5sZWZ0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LnJpZ2h0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC5sZWZ0LmNvbnN0YW50ICYmIGFzdC5yaWdodC5jb25zdGFudDtcbiAgICBhc3QudG9XYXRjaCA9IGFzdC5jb25zdGFudCA/IFtdIDogW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkNvbmRpdGlvbmFsRXhwcmVzc2lvbjpcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC50ZXN0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmFsdGVybmF0ZSwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICBmaW5kQ29uc3RhbnRBbmRXYXRjaEV4cHJlc3Npb25zKGFzdC5jb25zZXF1ZW50LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGFzdC5jb25zdGFudCA9IGFzdC50ZXN0LmNvbnN0YW50ICYmIGFzdC5hbHRlcm5hdGUuY29uc3RhbnQgJiYgYXN0LmNvbnNlcXVlbnQuY29uc3RhbnQ7XG4gICAgYXN0LnRvV2F0Y2ggPSBhc3QuY29uc3RhbnQgPyBbXSA6IFthc3RdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5JZGVudGlmaWVyOlxuICAgIGFzdC5jb25zdGFudCA9IGZhbHNlO1xuICAgIGFzdC50b1dhdGNoID0gW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULk1lbWJlckV4cHJlc3Npb246XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3Qub2JqZWN0LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIGlmIChhc3QuY29tcHV0ZWQpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LnByb3BlcnR5LCAkZmlsdGVyLCBhc3RJc1B1cmUpO1xuICAgIH1cbiAgICBhc3QuY29uc3RhbnQgPSBhc3Qub2JqZWN0LmNvbnN0YW50ICYmICghYXN0LmNvbXB1dGVkIHx8IGFzdC5wcm9wZXJ0eS5jb25zdGFudCk7XG4gICAgYXN0LnRvV2F0Y2ggPSBhc3QuY29uc3RhbnQgPyBbXSA6IFthc3RdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICBpc1N0YXRlbGVzc0ZpbHRlciA9IGFzdC5maWx0ZXIgPyBpc1N0YXRlbGVzcygkZmlsdGVyLCBhc3QuY2FsbGVlLm5hbWUpIDogZmFsc2U7XG4gICAgYWxsQ29uc3RhbnRzID0gaXNTdGF0ZWxlc3NGaWx0ZXI7XG4gICAgYXJnc1RvV2F0Y2ggPSBbXTtcbiAgICBmb3JFYWNoKGFzdC5hcmd1bWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoZXhwciwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmNvbnN0YW50O1xuICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgZXhwci50b1dhdGNoKTtcbiAgICB9KTtcbiAgICBhc3QuY29uc3RhbnQgPSBhbGxDb25zdGFudHM7XG4gICAgYXN0LnRvV2F0Y2ggPSBpc1N0YXRlbGVzc0ZpbHRlciA/IGFyZ3NUb1dhdGNoIDogW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkFzc2lnbm1lbnRFeHByZXNzaW9uOlxuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LmxlZnQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgZmluZENvbnN0YW50QW5kV2F0Y2hFeHByZXNzaW9ucyhhc3QucmlnaHQsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgYXN0LmNvbnN0YW50ID0gYXN0LmxlZnQuY29uc3RhbnQgJiYgYXN0LnJpZ2h0LmNvbnN0YW50O1xuICAgIGFzdC50b1dhdGNoID0gW2FzdF07XG4gICAgYnJlYWs7XG4gIGNhc2UgQVNULkFycmF5RXhwcmVzc2lvbjpcbiAgICBhbGxDb25zdGFudHMgPSB0cnVlO1xuICAgIGFyZ3NUb1dhdGNoID0gW107XG4gICAgZm9yRWFjaChhc3QuZWxlbWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoZXhwciwgJGZpbHRlciwgYXN0SXNQdXJlKTtcbiAgICAgIGFsbENvbnN0YW50cyA9IGFsbENvbnN0YW50cyAmJiBleHByLmNvbnN0YW50O1xuICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgZXhwci50b1dhdGNoKTtcbiAgICB9KTtcbiAgICBhc3QuY29uc3RhbnQgPSBhbGxDb25zdGFudHM7XG4gICAgYXN0LnRvV2F0Y2ggPSBhcmdzVG9XYXRjaDtcbiAgICBicmVhaztcbiAgY2FzZSBBU1QuT2JqZWN0RXhwcmVzc2lvbjpcbiAgICBhbGxDb25zdGFudHMgPSB0cnVlO1xuICAgIGFyZ3NUb1dhdGNoID0gW107XG4gICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMocHJvcGVydHkudmFsdWUsICRmaWx0ZXIsIGFzdElzUHVyZSk7XG4gICAgICBhbGxDb25zdGFudHMgPSBhbGxDb25zdGFudHMgJiYgcHJvcGVydHkudmFsdWUuY29uc3RhbnQ7XG4gICAgICBhcmdzVG9XYXRjaC5wdXNoLmFwcGx5KGFyZ3NUb1dhdGNoLCBwcm9wZXJ0eS52YWx1ZS50b1dhdGNoKTtcbiAgICAgIGlmIChwcm9wZXJ0eS5jb21wdXRlZCkge1xuICAgICAgICAvL2B7W2tleV06IHZhbHVlfWAgaW1wbGljaXRseSBkb2VzIGBrZXkudG9TdHJpbmcoKWAgd2hpY2ggbWF5IGJlIG5vbi1wdXJlXG4gICAgICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMocHJvcGVydHkua2V5LCAkZmlsdGVyLCAvKnBhcmVudElzUHVyZT0qL2ZhbHNlKTtcbiAgICAgICAgYWxsQ29uc3RhbnRzID0gYWxsQ29uc3RhbnRzICYmIHByb3BlcnR5LmtleS5jb25zdGFudDtcbiAgICAgICAgYXJnc1RvV2F0Y2gucHVzaC5hcHBseShhcmdzVG9XYXRjaCwgcHJvcGVydHkua2V5LnRvV2F0Y2gpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGFzdC5jb25zdGFudCA9IGFsbENvbnN0YW50cztcbiAgICBhc3QudG9XYXRjaCA9IGFyZ3NUb1dhdGNoO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5UaGlzRXhwcmVzc2lvbjpcbiAgICBhc3QuY29uc3RhbnQgPSBmYWxzZTtcbiAgICBhc3QudG9XYXRjaCA9IFtdO1xuICAgIGJyZWFrO1xuICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgIGFzdC5jb25zdGFudCA9IGZhbHNlO1xuICAgIGFzdC50b1dhdGNoID0gW107XG4gICAgYnJlYWs7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXRzKGJvZHkpIHtcbiAgaWYgKGJvZHkubGVuZ3RoICE9PSAxKSByZXR1cm47XG4gIHZhciBsYXN0RXhwcmVzc2lvbiA9IGJvZHlbMF0uZXhwcmVzc2lvbjtcbiAgdmFyIGNhbmRpZGF0ZSA9IGxhc3RFeHByZXNzaW9uLnRvV2F0Y2g7XG4gIGlmIChjYW5kaWRhdGUubGVuZ3RoICE9PSAxKSByZXR1cm4gY2FuZGlkYXRlO1xuICByZXR1cm4gY2FuZGlkYXRlWzBdICE9PSBsYXN0RXhwcmVzc2lvbiA/IGNhbmRpZGF0ZSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gaXNBc3NpZ25hYmxlKGFzdCkge1xuICByZXR1cm4gYXN0LnR5cGUgPT09IEFTVC5JZGVudGlmaWVyIHx8IGFzdC50eXBlID09PSBBU1QuTWVtYmVyRXhwcmVzc2lvbjtcbn1cblxuZnVuY3Rpb24gYXNzaWduYWJsZUFTVChhc3QpIHtcbiAgaWYgKGFzdC5ib2R5Lmxlbmd0aCA9PT0gMSAmJiBpc0Fzc2lnbmFibGUoYXN0LmJvZHlbMF0uZXhwcmVzc2lvbikpIHtcbiAgICByZXR1cm4ge3R5cGU6IEFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbiwgbGVmdDogYXN0LmJvZHlbMF0uZXhwcmVzc2lvbiwgcmlnaHQ6IHt0eXBlOiBBU1QuTkdWYWx1ZVBhcmFtZXRlcn0sIG9wZXJhdG9yOiAnPSd9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzTGl0ZXJhbChhc3QpIHtcbiAgcmV0dXJuIGFzdC5ib2R5Lmxlbmd0aCA9PT0gMCB8fFxuICAgICAgYXN0LmJvZHkubGVuZ3RoID09PSAxICYmIChcbiAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSA9PT0gQVNULkxpdGVyYWwgfHxcbiAgICAgIGFzdC5ib2R5WzBdLmV4cHJlc3Npb24udHlwZSA9PT0gQVNULkFycmF5RXhwcmVzc2lvbiB8fFxuICAgICAgYXN0LmJvZHlbMF0uZXhwcmVzc2lvbi50eXBlID09PSBBU1QuT2JqZWN0RXhwcmVzc2lvbik7XG59XG5cbmZ1bmN0aW9uIGlzQ29uc3RhbnQoYXN0KSB7XG4gIHJldHVybiBhc3QuY29uc3RhbnQ7XG59XG5cbmZ1bmN0aW9uIEFTVENvbXBpbGVyKCRmaWx0ZXIpIHtcbiAgdGhpcy4kZmlsdGVyID0gJGZpbHRlcjtcbn1cblxuQVNUQ29tcGlsZXIucHJvdG90eXBlID0ge1xuICBjb21waWxlOiBmdW5jdGlvbihhc3QpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5leHRJZDogMCxcbiAgICAgIGZpbHRlcnM6IHt9LFxuICAgICAgZm46IHt2YXJzOiBbXSwgYm9keTogW10sIG93bjoge319LFxuICAgICAgYXNzaWduOiB7dmFyczogW10sIGJvZHk6IFtdLCBvd246IHt9fSxcbiAgICAgIGlucHV0czogW11cbiAgICB9O1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LCBzZWxmLiRmaWx0ZXIpO1xuICAgIHZhciBleHRyYSA9ICcnO1xuICAgIHZhciBhc3NpZ25hYmxlO1xuICAgIHRoaXMuc3RhZ2UgPSAnYXNzaWduJztcbiAgICBpZiAoKGFzc2lnbmFibGUgPSBhc3NpZ25hYmxlQVNUKGFzdCkpKSB7XG4gICAgICB0aGlzLnN0YXRlLmNvbXB1dGluZyA9ICdhc3NpZ24nO1xuICAgICAgdmFyIHJlc3VsdCA9IHRoaXMubmV4dElkKCk7XG4gICAgICB0aGlzLnJlY3Vyc2UoYXNzaWduYWJsZSwgcmVzdWx0KTtcbiAgICAgIHRoaXMucmV0dXJuXyhyZXN1bHQpO1xuICAgICAgZXh0cmEgPSAnZm4uYXNzaWduPScgKyB0aGlzLmdlbmVyYXRlRnVuY3Rpb24oJ2Fzc2lnbicsICdzLHYsbCcpO1xuICAgIH1cbiAgICB2YXIgdG9XYXRjaCA9IGdldElucHV0cyhhc3QuYm9keSk7XG4gICAgc2VsZi5zdGFnZSA9ICdpbnB1dHMnO1xuICAgIGZvckVhY2godG9XYXRjaCwgZnVuY3Rpb24od2F0Y2gsIGtleSkge1xuICAgICAgdmFyIGZuS2V5ID0gJ2ZuJyArIGtleTtcbiAgICAgIHNlbGYuc3RhdGVbZm5LZXldID0ge3ZhcnM6IFtdLCBib2R5OiBbXSwgb3duOiB7fX07XG4gICAgICBzZWxmLnN0YXRlLmNvbXB1dGluZyA9IGZuS2V5O1xuICAgICAgdmFyIGludG9JZCA9IHNlbGYubmV4dElkKCk7XG4gICAgICBzZWxmLnJlY3Vyc2Uod2F0Y2gsIGludG9JZCk7XG4gICAgICBzZWxmLnJldHVybl8oaW50b0lkKTtcbiAgICAgIHNlbGYuc3RhdGUuaW5wdXRzLnB1c2goe25hbWU6IGZuS2V5LCBpc1B1cmU6IHdhdGNoLmlzUHVyZX0pO1xuICAgICAgd2F0Y2gud2F0Y2hJZCA9IGtleTtcbiAgICB9KTtcbiAgICB0aGlzLnN0YXRlLmNvbXB1dGluZyA9ICdmbic7XG4gICAgdGhpcy5zdGFnZSA9ICdtYWluJztcbiAgICB0aGlzLnJlY3Vyc2UoYXN0KTtcbiAgICB2YXIgZm5TdHJpbmcgPVxuICAgICAgLy8gVGhlIGJ1aWxkIGFuZCBtaW5pZmljYXRpb24gc3RlcHMgcmVtb3ZlIHRoZSBzdHJpbmcgXCJ1c2Ugc3RyaWN0XCIgZnJvbSB0aGUgY29kZSwgYnV0IHRoaXMgaXMgZG9uZSB1c2luZyBhIHJlZ2V4LlxuICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgZm9yIHRoaXMgdW50aWwgd2UgZG8gYSBiZXR0ZXIgam9iIGF0IG9ubHkgcmVtb3ZpbmcgdGhlIHByZWZpeCBvbmx5IHdoZW4gd2Ugc2hvdWxkLlxuICAgICAgJ1wiJyArIHRoaXMuVVNFICsgJyAnICsgdGhpcy5TVFJJQ1QgKyAnXCI7XFxuJyArXG4gICAgICB0aGlzLmZpbHRlclByZWZpeCgpICtcbiAgICAgICd2YXIgZm49JyArIHRoaXMuZ2VuZXJhdGVGdW5jdGlvbignZm4nLCAncyxsLGEsaScpICtcbiAgICAgIGV4dHJhICtcbiAgICAgIHRoaXMud2F0Y2hGbnMoKSArXG4gICAgICAncmV0dXJuIGZuOyc7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcbiAgICB2YXIgZm4gPSAobmV3IEZ1bmN0aW9uKCckZmlsdGVyJyxcbiAgICAgICAgJ2dldFN0cmluZ1ZhbHVlJyxcbiAgICAgICAgJ2lmRGVmaW5lZCcsXG4gICAgICAgICdwbHVzJyxcbiAgICAgICAgZm5TdHJpbmcpKShcbiAgICAgICAgICB0aGlzLiRmaWx0ZXIsXG4gICAgICAgICAgZ2V0U3RyaW5nVmFsdWUsXG4gICAgICAgICAgaWZEZWZpbmVkLFxuICAgICAgICAgIHBsdXNGbik7XG4gICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhZ2UgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIFVTRTogJ3VzZScsXG5cbiAgU1RSSUNUOiAnc3RyaWN0JyxcblxuICB3YXRjaEZuczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpbnB1dHMgPSB0aGlzLnN0YXRlLmlucHV0cztcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yRWFjaChpbnB1dHMsIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICByZXN1bHQucHVzaCgndmFyICcgKyBpbnB1dC5uYW1lICsgJz0nICsgc2VsZi5nZW5lcmF0ZUZ1bmN0aW9uKGlucHV0Lm5hbWUsICdzJykpO1xuICAgICAgaWYgKGlucHV0LmlzUHVyZSkge1xuICAgICAgICByZXN1bHQucHVzaChpbnB1dC5uYW1lLCAnLmlzUHVyZT0nICsgSlNPTi5zdHJpbmdpZnkoaW5wdXQuaXNQdXJlKSArICc7Jyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGlucHV0cy5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKCdmbi5pbnB1dHM9WycgKyBpbnB1dHMubWFwKGZ1bmN0aW9uKGkpIHsgcmV0dXJuIGkubmFtZTsgfSkuam9pbignLCcpICsgJ107Jyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuam9pbignJyk7XG4gIH0sXG5cbiAgZ2VuZXJhdGVGdW5jdGlvbjogZnVuY3Rpb24obmFtZSwgcGFyYW1zKSB7XG4gICAgcmV0dXJuICdmdW5jdGlvbignICsgcGFyYW1zICsgJyl7JyArXG4gICAgICAgIHRoaXMudmFyc1ByZWZpeChuYW1lKSArXG4gICAgICAgIHRoaXMuYm9keShuYW1lKSArXG4gICAgICAgICd9Oyc7XG4gIH0sXG5cbiAgZmlsdGVyUHJlZml4OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZm9yRWFjaCh0aGlzLnN0YXRlLmZpbHRlcnMsIGZ1bmN0aW9uKGlkLCBmaWx0ZXIpIHtcbiAgICAgIHBhcnRzLnB1c2goaWQgKyAnPSRmaWx0ZXIoJyArIHNlbGYuZXNjYXBlKGZpbHRlcikgKyAnKScpO1xuICAgIH0pO1xuICAgIGlmIChwYXJ0cy5sZW5ndGgpIHJldHVybiAndmFyICcgKyBwYXJ0cy5qb2luKCcsJykgKyAnOyc7XG4gICAgcmV0dXJuICcnO1xuICB9LFxuXG4gIHZhcnNQcmVmaXg6IGZ1bmN0aW9uKHNlY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZVtzZWN0aW9uXS52YXJzLmxlbmd0aCA/ICd2YXIgJyArIHRoaXMuc3RhdGVbc2VjdGlvbl0udmFycy5qb2luKCcsJykgKyAnOycgOiAnJztcbiAgfSxcblxuICBib2R5OiBmdW5jdGlvbihzZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVbc2VjdGlvbl0uYm9keS5qb2luKCcnKTtcbiAgfSxcblxuICByZWN1cnNlOiBmdW5jdGlvbihhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKSB7XG4gICAgdmFyIGxlZnQsIHJpZ2h0LCBzZWxmID0gdGhpcywgYXJncywgZXhwcmVzc2lvbiwgY29tcHV0ZWQ7XG4gICAgcmVjdXJzaW9uRm4gPSByZWN1cnNpb25GbiB8fCBub29wO1xuICAgIGlmICghc2tpcFdhdGNoSWRDaGVjayAmJiBpc0RlZmluZWQoYXN0LndhdGNoSWQpKSB7XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHRoaXMuaWZfKCdpJyxcbiAgICAgICAgdGhpcy5sYXp5QXNzaWduKGludG9JZCwgdGhpcy5jb21wdXRlZE1lbWJlcignaScsIGFzdC53YXRjaElkKSksXG4gICAgICAgIHRoaXMubGF6eVJlY3Vyc2UoYXN0LCBpbnRvSWQsIG5hbWVJZCwgcmVjdXJzaW9uRm4sIGNyZWF0ZSwgdHJ1ZSlcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAoYXN0LnR5cGUpIHtcbiAgICBjYXNlIEFTVC5Qcm9ncmFtOlxuICAgICAgZm9yRWFjaChhc3QuYm9keSwgZnVuY3Rpb24oZXhwcmVzc2lvbiwgcG9zKSB7XG4gICAgICAgIHNlbGYucmVjdXJzZShleHByZXNzaW9uLmV4cHJlc3Npb24sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmdW5jdGlvbihleHByKSB7IHJpZ2h0ID0gZXhwcjsgfSk7XG4gICAgICAgIGlmIChwb3MgIT09IGFzdC5ib2R5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICBzZWxmLmN1cnJlbnQoKS5ib2R5LnB1c2gocmlnaHQsICc7Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5yZXR1cm5fKHJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5MaXRlcmFsOlxuICAgICAgZXhwcmVzc2lvbiA9IHRoaXMuZXNjYXBlKGFzdC52YWx1ZSk7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8IGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgdGhpcy5yZWN1cnNlKGFzdC5hcmd1bWVudCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGV4cHIpIHsgcmlnaHQgPSBleHByOyB9KTtcbiAgICAgIGV4cHJlc3Npb24gPSBhc3Qub3BlcmF0b3IgKyAnKCcgKyB0aGlzLmlmRGVmaW5lZChyaWdodCwgMCkgKyAnKSc7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oZXhwcmVzc2lvbik7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgdGhpcy5yZWN1cnNlKGFzdC5sZWZ0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikgeyBsZWZ0ID0gZXhwcjsgfSk7XG4gICAgICB0aGlzLnJlY3Vyc2UoYXN0LnJpZ2h0LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikgeyByaWdodCA9IGV4cHI7IH0pO1xuICAgICAgaWYgKGFzdC5vcGVyYXRvciA9PT0gJysnKSB7XG4gICAgICAgIGV4cHJlc3Npb24gPSB0aGlzLnBsdXMobGVmdCwgcmlnaHQpO1xuICAgICAgfSBlbHNlIGlmIChhc3Qub3BlcmF0b3IgPT09ICctJykge1xuICAgICAgICBleHByZXNzaW9uID0gdGhpcy5pZkRlZmluZWQobGVmdCwgMCkgKyBhc3Qub3BlcmF0b3IgKyB0aGlzLmlmRGVmaW5lZChyaWdodCwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHByZXNzaW9uID0gJygnICsgbGVmdCArICcpJyArIGFzdC5vcGVyYXRvciArICcoJyArIHJpZ2h0ICsgJyknO1xuICAgICAgfVxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuTG9naWNhbEV4cHJlc3Npb246XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QubGVmdCwgaW50b0lkKTtcbiAgICAgIHNlbGYuaWZfKGFzdC5vcGVyYXRvciA9PT0gJyYmJyA/IGludG9JZCA6IHNlbGYubm90KGludG9JZCksIHNlbGYubGF6eVJlY3Vyc2UoYXN0LnJpZ2h0LCBpbnRvSWQpKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Db25kaXRpb25hbEV4cHJlc3Npb246XG4gICAgICBpbnRvSWQgPSBpbnRvSWQgfHwgdGhpcy5uZXh0SWQoKTtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QudGVzdCwgaW50b0lkKTtcbiAgICAgIHNlbGYuaWZfKGludG9JZCwgc2VsZi5sYXp5UmVjdXJzZShhc3QuYWx0ZXJuYXRlLCBpbnRvSWQpLCBzZWxmLmxhenlSZWN1cnNlKGFzdC5jb25zZXF1ZW50LCBpbnRvSWQpKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5JZGVudGlmaWVyOlxuICAgICAgaW50b0lkID0gaW50b0lkIHx8IHRoaXMubmV4dElkKCk7XG4gICAgICBpZiAobmFtZUlkKSB7XG4gICAgICAgIG5hbWVJZC5jb250ZXh0ID0gc2VsZi5zdGFnZSA9PT0gJ2lucHV0cycgPyAncycgOiB0aGlzLmFzc2lnbih0aGlzLm5leHRJZCgpLCB0aGlzLmdldEhhc093blByb3BlcnR5KCdsJywgYXN0Lm5hbWUpICsgJz9sOnMnKTtcbiAgICAgICAgbmFtZUlkLmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgIG5hbWVJZC5uYW1lID0gYXN0Lm5hbWU7XG4gICAgICB9XG4gICAgICBzZWxmLmlmXyhzZWxmLnN0YWdlID09PSAnaW5wdXRzJyB8fCBzZWxmLm5vdChzZWxmLmdldEhhc093blByb3BlcnR5KCdsJywgYXN0Lm5hbWUpKSxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5pZl8oc2VsZi5zdGFnZSA9PT0gJ2lucHV0cycgfHwgJ3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuaWZfKFxuICAgICAgICAgICAgICAgIHNlbGYuaXNOdWxsKHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIoJ3MnLCBhc3QubmFtZSkpLFxuICAgICAgICAgICAgICAgIHNlbGYubGF6eUFzc2lnbihzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKCdzJywgYXN0Lm5hbWUpLCAne30nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIoJ3MnLCBhc3QubmFtZSkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBpbnRvSWQgJiYgc2VsZi5sYXp5QXNzaWduKGludG9JZCwgc2VsZi5ub25Db21wdXRlZE1lbWJlcignbCcsIGFzdC5uYW1lKSlcbiAgICAgICAgKTtcbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5NZW1iZXJFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IG5hbWVJZCAmJiAobmFtZUlkLmNvbnRleHQgPSB0aGlzLm5leHRJZCgpKSB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgaW50b0lkID0gaW50b0lkIHx8IHRoaXMubmV4dElkKCk7XG4gICAgICBzZWxmLnJlY3Vyc2UoYXN0Lm9iamVjdCwgbGVmdCwgdW5kZWZpbmVkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5pZl8oc2VsZi5ub3ROdWxsKGxlZnQpLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoYXN0LmNvbXB1dGVkKSB7XG4gICAgICAgICAgICByaWdodCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgICBzZWxmLnJlY3Vyc2UoYXN0LnByb3BlcnR5LCByaWdodCk7XG4gICAgICAgICAgICBzZWxmLmdldFN0cmluZ1ZhbHVlKHJpZ2h0KTtcbiAgICAgICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuaWZfKHNlbGYubm90KHNlbGYuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQpKSwgc2VsZi5sYXp5QXNzaWduKHNlbGYuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQpLCAne30nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHByZXNzaW9uID0gc2VsZi5jb21wdXRlZE1lbWJlcihsZWZ0LCByaWdodCk7XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgICAgICAgaWYgKG5hbWVJZCkge1xuICAgICAgICAgICAgICBuYW1lSWQuY29tcHV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBuYW1lSWQubmFtZSA9IHJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY3JlYXRlICYmIGNyZWF0ZSAhPT0gMSkge1xuICAgICAgICAgICAgICBzZWxmLmlmXyhzZWxmLmlzTnVsbChzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIGFzdC5wcm9wZXJ0eS5uYW1lKSksIHNlbGYubGF6eUFzc2lnbihzZWxmLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIGFzdC5wcm9wZXJ0eS5uYW1lKSwgJ3t9JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHNlbGYubm9uQ29tcHV0ZWRNZW1iZXIobGVmdCwgYXN0LnByb3BlcnR5Lm5hbWUpO1xuICAgICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgICAgICAgIGlmIChuYW1lSWQpIHtcbiAgICAgICAgICAgICAgbmFtZUlkLmNvbXB1dGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIG5hbWVJZC5uYW1lID0gYXN0LnByb3BlcnR5Lm5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsICd1bmRlZmluZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICB9LCAhIWNyZWF0ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5DYWxsRXhwcmVzc2lvbjpcbiAgICAgIGludG9JZCA9IGludG9JZCB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgaWYgKGFzdC5maWx0ZXIpIHtcbiAgICAgICAgcmlnaHQgPSBzZWxmLmZpbHRlcihhc3QuY2FsbGVlLm5hbWUpO1xuICAgICAgICBhcmdzID0gW107XG4gICAgICAgIGZvckVhY2goYXN0LmFyZ3VtZW50cywgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICAgIHZhciBhcmd1bWVudCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgc2VsZi5yZWN1cnNlKGV4cHIsIGFyZ3VtZW50KTtcbiAgICAgICAgICBhcmdzLnB1c2goYXJndW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXhwcmVzc2lvbiA9IHJpZ2h0ICsgJygnICsgYXJncy5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgIHNlbGYuYXNzaWduKGludG9JZCwgZXhwcmVzc2lvbik7XG4gICAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByaWdodCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgIGxlZnQgPSB7fTtcbiAgICAgICAgYXJncyA9IFtdO1xuICAgICAgICBzZWxmLnJlY3Vyc2UoYXN0LmNhbGxlZSwgcmlnaHQsIGxlZnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuaWZfKHNlbGYubm90TnVsbChyaWdodCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yRWFjaChhc3QuYXJndW1lbnRzLCBmdW5jdGlvbihleHByKSB7XG4gICAgICAgICAgICAgIHNlbGYucmVjdXJzZShleHByLCBhc3QuY29uc3RhbnQgPyB1bmRlZmluZWQgOiBzZWxmLm5leHRJZCgpLCB1bmRlZmluZWQsIGZ1bmN0aW9uKGFyZ3VtZW50KSB7XG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKGFyZ3VtZW50KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChsZWZ0Lm5hbWUpIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHNlbGYubWVtYmVyKGxlZnQuY29udGV4dCwgbGVmdC5uYW1lLCBsZWZ0LmNvbXB1dGVkKSArICcoJyArIGFyZ3Muam9pbignLCcpICsgJyknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbiA9IHJpZ2h0ICsgJygnICsgYXJncy5qb2luKCcsJykgKyAnKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCAndW5kZWZpbmVkJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVjdXJzaW9uRm4oaW50b0lkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Bc3NpZ25tZW50RXhwcmVzc2lvbjpcbiAgICAgIHJpZ2h0ID0gdGhpcy5uZXh0SWQoKTtcbiAgICAgIGxlZnQgPSB7fTtcbiAgICAgIHRoaXMucmVjdXJzZShhc3QubGVmdCwgdW5kZWZpbmVkLCBsZWZ0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5pZl8oc2VsZi5ub3ROdWxsKGxlZnQuY29udGV4dCksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYucmVjdXJzZShhc3QucmlnaHQsIHJpZ2h0KTtcbiAgICAgICAgICBleHByZXNzaW9uID0gc2VsZi5tZW1iZXIobGVmdC5jb250ZXh0LCBsZWZ0Lm5hbWUsIGxlZnQuY29tcHV0ZWQpICsgYXN0Lm9wZXJhdG9yICsgcmlnaHQ7XG4gICAgICAgICAgc2VsZi5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgICAgICByZWN1cnNpb25GbihpbnRvSWQgfHwgZXhwcmVzc2lvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSwgMSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5BcnJheUV4cHJlc3Npb246XG4gICAgICBhcmdzID0gW107XG4gICAgICBmb3JFYWNoKGFzdC5lbGVtZW50cywgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICBzZWxmLnJlY3Vyc2UoZXhwciwgYXN0LmNvbnN0YW50ID8gdW5kZWZpbmVkIDogc2VsZi5uZXh0SWQoKSwgdW5kZWZpbmVkLCBmdW5jdGlvbihhcmd1bWVudCkge1xuICAgICAgICAgIGFyZ3MucHVzaChhcmd1bWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBleHByZXNzaW9uID0gJ1snICsgYXJncy5qb2luKCcsJykgKyAnXSc7XG4gICAgICB0aGlzLmFzc2lnbihpbnRvSWQsIGV4cHJlc3Npb24pO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8IGV4cHJlc3Npb24pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBBU1QuT2JqZWN0RXhwcmVzc2lvbjpcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICAgIGNvbXB1dGVkID0gZmFsc2U7XG4gICAgICBmb3JFYWNoKGFzdC5wcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICBpZiAocHJvcGVydHkuY29tcHV0ZWQpIHtcbiAgICAgICAgICBjb21wdXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICAgIGludG9JZCA9IGludG9JZCB8fCB0aGlzLm5leHRJZCgpO1xuICAgICAgICB0aGlzLmFzc2lnbihpbnRvSWQsICd7fScpO1xuICAgICAgICBmb3JFYWNoKGFzdC5wcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wZXJ0eSkge1xuICAgICAgICAgIGlmIChwcm9wZXJ0eS5jb21wdXRlZCkge1xuICAgICAgICAgICAgbGVmdCA9IHNlbGYubmV4dElkKCk7XG4gICAgICAgICAgICBzZWxmLnJlY3Vyc2UocHJvcGVydHkua2V5LCBsZWZ0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGVmdCA9IHByb3BlcnR5LmtleS50eXBlID09PSBBU1QuSWRlbnRpZmllciA/XG4gICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5LmtleS5uYW1lIDpcbiAgICAgICAgICAgICAgICAgICAgICAgKCcnICsgcHJvcGVydHkua2V5LnZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmlnaHQgPSBzZWxmLm5leHRJZCgpO1xuICAgICAgICAgIHNlbGYucmVjdXJzZShwcm9wZXJ0eS52YWx1ZSwgcmlnaHQpO1xuICAgICAgICAgIHNlbGYuYXNzaWduKHNlbGYubWVtYmVyKGludG9JZCwgbGVmdCwgcHJvcGVydHkuY29tcHV0ZWQpLCByaWdodCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgICBzZWxmLnJlY3Vyc2UocHJvcGVydHkudmFsdWUsIGFzdC5jb25zdGFudCA/IHVuZGVmaW5lZCA6IHNlbGYubmV4dElkKCksIHVuZGVmaW5lZCwgZnVuY3Rpb24oZXhwcikge1xuICAgICAgICAgICAgYXJncy5wdXNoKHNlbGYuZXNjYXBlKFxuICAgICAgICAgICAgICAgIHByb3BlcnR5LmtleS50eXBlID09PSBBU1QuSWRlbnRpZmllciA/IHByb3BlcnR5LmtleS5uYW1lIDpcbiAgICAgICAgICAgICAgICAgICgnJyArIHByb3BlcnR5LmtleS52YWx1ZSkpICtcbiAgICAgICAgICAgICAgICAnOicgKyBleHByKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGV4cHJlc3Npb24gPSAneycgKyBhcmdzLmpvaW4oJywnKSArICd9JztcbiAgICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCBleHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICAgIHJlY3Vyc2lvbkZuKGludG9JZCB8fCBleHByZXNzaW9uKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQVNULlRoaXNFeHByZXNzaW9uOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAncycpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICdzJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAnbCcpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICdsJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEFTVC5OR1ZhbHVlUGFyYW1ldGVyOlxuICAgICAgdGhpcy5hc3NpZ24oaW50b0lkLCAndicpO1xuICAgICAgcmVjdXJzaW9uRm4oaW50b0lkIHx8ICd2Jyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH0sXG5cbiAgZ2V0SGFzT3duUHJvcGVydHk6IGZ1bmN0aW9uKGVsZW1lbnQsIHByb3BlcnR5KSB7XG4gICAgdmFyIGtleSA9IGVsZW1lbnQgKyAnLicgKyBwcm9wZXJ0eTtcbiAgICB2YXIgb3duID0gdGhpcy5jdXJyZW50KCkub3duO1xuICAgIGlmICghb3duLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIG93bltrZXldID0gdGhpcy5uZXh0SWQoZmFsc2UsIGVsZW1lbnQgKyAnJiYoJyArIHRoaXMuZXNjYXBlKHByb3BlcnR5KSArICcgaW4gJyArIGVsZW1lbnQgKyAnKScpO1xuICAgIH1cbiAgICByZXR1cm4gb3duW2tleV07XG4gIH0sXG5cbiAgYXNzaWduOiBmdW5jdGlvbihpZCwgdmFsdWUpIHtcbiAgICBpZiAoIWlkKSByZXR1cm47XG4gICAgdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKGlkLCAnPScsIHZhbHVlLCAnOycpO1xuICAgIHJldHVybiBpZDtcbiAgfSxcblxuICBmaWx0ZXI6IGZ1bmN0aW9uKGZpbHRlck5hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShmaWx0ZXJOYW1lKSkge1xuICAgICAgdGhpcy5zdGF0ZS5maWx0ZXJzW2ZpbHRlck5hbWVdID0gdGhpcy5uZXh0SWQodHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN0YXRlLmZpbHRlcnNbZmlsdGVyTmFtZV07XG4gIH0sXG5cbiAgaWZEZWZpbmVkOiBmdW5jdGlvbihpZCwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuICdpZkRlZmluZWQoJyArIGlkICsgJywnICsgdGhpcy5lc2NhcGUoZGVmYXVsdFZhbHVlKSArICcpJztcbiAgfSxcblxuICBwbHVzOiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiAncGx1cygnICsgbGVmdCArICcsJyArIHJpZ2h0ICsgJyknO1xuICB9LFxuXG4gIHJldHVybl86IGZ1bmN0aW9uKGlkKSB7XG4gICAgdGhpcy5jdXJyZW50KCkuYm9keS5wdXNoKCdyZXR1cm4gJywgaWQsICc7Jyk7XG4gIH0sXG5cbiAgaWZfOiBmdW5jdGlvbih0ZXN0LCBhbHRlcm5hdGUsIGNvbnNlcXVlbnQpIHtcbiAgICBpZiAodGVzdCA9PT0gdHJ1ZSkge1xuICAgICAgYWx0ZXJuYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBib2R5ID0gdGhpcy5jdXJyZW50KCkuYm9keTtcbiAgICAgIGJvZHkucHVzaCgnaWYoJywgdGVzdCwgJyl7Jyk7XG4gICAgICBhbHRlcm5hdGUoKTtcbiAgICAgIGJvZHkucHVzaCgnfScpO1xuICAgICAgaWYgKGNvbnNlcXVlbnQpIHtcbiAgICAgICAgYm9keS5wdXNoKCdlbHNleycpO1xuICAgICAgICBjb25zZXF1ZW50KCk7XG4gICAgICAgIGJvZHkucHVzaCgnfScpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBub3Q6IGZ1bmN0aW9uKGV4cHJlc3Npb24pIHtcbiAgICByZXR1cm4gJyEoJyArIGV4cHJlc3Npb24gKyAnKSc7XG4gIH0sXG5cbiAgaXNOdWxsOiBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24gKyAnPT1udWxsJztcbiAgfSxcblxuICBub3ROdWxsOiBmdW5jdGlvbihleHByZXNzaW9uKSB7XG4gICAgcmV0dXJuIGV4cHJlc3Npb24gKyAnIT1udWxsJztcbiAgfSxcblxuICBub25Db21wdXRlZE1lbWJlcjogZnVuY3Rpb24obGVmdCwgcmlnaHQpIHtcbiAgICB2YXIgU0FGRV9JREVOVElGSUVSID0gL15bJF9hLXpBLVpdWyRfYS16QS1aMC05XSokLztcbiAgICB2YXIgVU5TQUZFX0NIQVJBQ1RFUlMgPSAvW14kX2EtekEtWjAtOV0vZztcbiAgICBpZiAoU0FGRV9JREVOVElGSUVSLnRlc3QocmlnaHQpKSB7XG4gICAgICByZXR1cm4gbGVmdCArICcuJyArIHJpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbGVmdCAgKyAnW1wiJyArIHJpZ2h0LnJlcGxhY2UoVU5TQUZFX0NIQVJBQ1RFUlMsIHRoaXMuc3RyaW5nRXNjYXBlRm4pICsgJ1wiXSc7XG4gICAgfVxuICB9LFxuXG4gIGNvbXB1dGVkTWVtYmVyOiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgIHJldHVybiBsZWZ0ICsgJ1snICsgcmlnaHQgKyAnXSc7XG4gIH0sXG5cbiAgbWVtYmVyOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29tcHV0ZWQpIHtcbiAgICBpZiAoY29tcHV0ZWQpIHJldHVybiB0aGlzLmNvbXB1dGVkTWVtYmVyKGxlZnQsIHJpZ2h0KTtcbiAgICByZXR1cm4gdGhpcy5ub25Db21wdXRlZE1lbWJlcihsZWZ0LCByaWdodCk7XG4gIH0sXG5cbiAgZ2V0U3RyaW5nVmFsdWU6IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB0aGlzLmFzc2lnbihpdGVtLCAnZ2V0U3RyaW5nVmFsdWUoJyArIGl0ZW0gKyAnKScpO1xuICB9LFxuXG4gIGxhenlSZWN1cnNlOiBmdW5jdGlvbihhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYucmVjdXJzZShhc3QsIGludG9JZCwgbmFtZUlkLCByZWN1cnNpb25GbiwgY3JlYXRlLCBza2lwV2F0Y2hJZENoZWNrKTtcbiAgICB9O1xuICB9LFxuXG4gIGxhenlBc3NpZ246IGZ1bmN0aW9uKGlkLCB2YWx1ZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmFzc2lnbihpZCwgdmFsdWUpO1xuICAgIH07XG4gIH0sXG5cbiAgc3RyaW5nRXNjYXBlUmVnZXg6IC9bXiBhLXpBLVowLTldL2csXG5cbiAgc3RyaW5nRXNjYXBlRm46IGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gJ1xcXFx1JyArICgnMDAwMCcgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG4gIH0sXG5cbiAgZXNjYXBlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc1N0cmluZyh2YWx1ZSkpIHJldHVybiAnXFwnJyArIHZhbHVlLnJlcGxhY2UodGhpcy5zdHJpbmdFc2NhcGVSZWdleCwgdGhpcy5zdHJpbmdFc2NhcGVGbikgKyAnXFwnJztcbiAgICBpZiAoaXNOdW1iZXIodmFsdWUpKSByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICBpZiAodmFsdWUgPT09IHRydWUpIHJldHVybiAndHJ1ZSc7XG4gICAgaWYgKHZhbHVlID09PSBmYWxzZSkgcmV0dXJuICdmYWxzZSc7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gJ251bGwnO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gJ3VuZGVmaW5lZCc7XG5cbiAgICB0aHJvdyAkcGFyc2VNaW5FcnIoJ2VzYycsICdJTVBPU1NJQkxFJyk7XG4gIH0sXG5cbiAgbmV4dElkOiBmdW5jdGlvbihza2lwLCBpbml0KSB7XG4gICAgdmFyIGlkID0gJ3YnICsgKHRoaXMuc3RhdGUubmV4dElkKyspO1xuICAgIGlmICghc2tpcCkge1xuICAgICAgdGhpcy5jdXJyZW50KCkudmFycy5wdXNoKGlkICsgKGluaXQgPyAnPScgKyBpbml0IDogJycpKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xuICB9LFxuXG4gIGN1cnJlbnQ6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlW3RoaXMuc3RhdGUuY29tcHV0aW5nXTtcbiAgfVxufTtcblxuXG5mdW5jdGlvbiBBU1RJbnRlcnByZXRlcigkZmlsdGVyKSB7XG4gIHRoaXMuJGZpbHRlciA9ICRmaWx0ZXI7XG59XG5cbkFTVEludGVycHJldGVyLnByb3RvdHlwZSA9IHtcbiAgY29tcGlsZTogZnVuY3Rpb24oYXN0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZpbmRDb25zdGFudEFuZFdhdGNoRXhwcmVzc2lvbnMoYXN0LCBzZWxmLiRmaWx0ZXIpO1xuICAgIHZhciBhc3NpZ25hYmxlO1xuICAgIHZhciBhc3NpZ247XG4gICAgaWYgKChhc3NpZ25hYmxlID0gYXNzaWduYWJsZUFTVChhc3QpKSkge1xuICAgICAgYXNzaWduID0gdGhpcy5yZWN1cnNlKGFzc2lnbmFibGUpO1xuICAgIH1cbiAgICB2YXIgdG9XYXRjaCA9IGdldElucHV0cyhhc3QuYm9keSk7XG4gICAgdmFyIGlucHV0cztcbiAgICBpZiAodG9XYXRjaCkge1xuICAgICAgaW5wdXRzID0gW107XG4gICAgICBmb3JFYWNoKHRvV2F0Y2gsIGZ1bmN0aW9uKHdhdGNoLCBrZXkpIHtcbiAgICAgICAgdmFyIGlucHV0ID0gc2VsZi5yZWN1cnNlKHdhdGNoKTtcbiAgICAgICAgaW5wdXQuaXNQdXJlID0gd2F0Y2guaXNQdXJlO1xuICAgICAgICB3YXRjaC5pbnB1dCA9IGlucHV0O1xuICAgICAgICBpbnB1dHMucHVzaChpbnB1dCk7XG4gICAgICAgIHdhdGNoLndhdGNoSWQgPSBrZXk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdmFyIGV4cHJlc3Npb25zID0gW107XG4gICAgZm9yRWFjaChhc3QuYm9keSwgZnVuY3Rpb24oZXhwcmVzc2lvbikge1xuICAgICAgZXhwcmVzc2lvbnMucHVzaChzZWxmLnJlY3Vyc2UoZXhwcmVzc2lvbi5leHByZXNzaW9uKSk7XG4gICAgfSk7XG4gICAgdmFyIGZuID0gYXN0LmJvZHkubGVuZ3RoID09PSAwID8gbm9vcCA6XG4gICAgICAgICAgICAgYXN0LmJvZHkubGVuZ3RoID09PSAxID8gZXhwcmVzc2lvbnNbMF0gOlxuICAgICAgICAgICAgIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgICAgICAgIHZhciBsYXN0VmFsdWU7XG4gICAgICAgICAgICAgICBmb3JFYWNoKGV4cHJlc3Npb25zLCBmdW5jdGlvbihleHApIHtcbiAgICAgICAgICAgICAgICAgbGFzdFZhbHVlID0gZXhwKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICByZXR1cm4gbGFzdFZhbHVlO1xuICAgICAgICAgICAgIH07XG4gICAgaWYgKGFzc2lnbikge1xuICAgICAgZm4uYXNzaWduID0gZnVuY3Rpb24oc2NvcGUsIHZhbHVlLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuIGFzc2lnbihzY29wZSwgbG9jYWxzLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5wdXRzKSB7XG4gICAgICBmbi5pbnB1dHMgPSBpbnB1dHM7XG4gICAgfVxuICAgIHJldHVybiBmbjtcbiAgfSxcblxuICByZWN1cnNlOiBmdW5jdGlvbihhc3QsIGNvbnRleHQsIGNyZWF0ZSkge1xuICAgIHZhciBsZWZ0LCByaWdodCwgc2VsZiA9IHRoaXMsIGFyZ3M7XG4gICAgaWYgKGFzdC5pbnB1dCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5wdXRzKGFzdC5pbnB1dCwgYXN0LndhdGNoSWQpO1xuICAgIH1cbiAgICBzd2l0Y2ggKGFzdC50eXBlKSB7XG4gICAgY2FzZSBBU1QuTGl0ZXJhbDpcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlKGFzdC52YWx1ZSwgY29udGV4dCk7XG4gICAgY2FzZSBBU1QuVW5hcnlFeHByZXNzaW9uOlxuICAgICAgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LmFyZ3VtZW50KTtcbiAgICAgIHJldHVybiB0aGlzWyd1bmFyeScgKyBhc3Qub3BlcmF0b3JdKHJpZ2h0LCBjb250ZXh0KTtcbiAgICBjYXNlIEFTVC5CaW5hcnlFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IHRoaXMucmVjdXJzZShhc3QubGVmdCk7XG4gICAgICByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucmlnaHQpO1xuICAgICAgcmV0dXJuIHRoaXNbJ2JpbmFyeScgKyBhc3Qub3BlcmF0b3JdKGxlZnQsIHJpZ2h0LCBjb250ZXh0KTtcbiAgICBjYXNlIEFTVC5Mb2dpY2FsRXhwcmVzc2lvbjpcbiAgICAgIGxlZnQgPSB0aGlzLnJlY3Vyc2UoYXN0LmxlZnQpO1xuICAgICAgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LnJpZ2h0KTtcbiAgICAgIHJldHVybiB0aGlzWydiaW5hcnknICsgYXN0Lm9wZXJhdG9yXShsZWZ0LCByaWdodCwgY29udGV4dCk7XG4gICAgY2FzZSBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIHRoaXNbJ3Rlcm5hcnk/OiddKFxuICAgICAgICB0aGlzLnJlY3Vyc2UoYXN0LnRlc3QpLFxuICAgICAgICB0aGlzLnJlY3Vyc2UoYXN0LmFsdGVybmF0ZSksXG4gICAgICAgIHRoaXMucmVjdXJzZShhc3QuY29uc2VxdWVudCksXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgY2FzZSBBU1QuSWRlbnRpZmllcjpcbiAgICAgIHJldHVybiBzZWxmLmlkZW50aWZpZXIoYXN0Lm5hbWUsIGNvbnRleHQsIGNyZWF0ZSk7XG4gICAgY2FzZSBBU1QuTWVtYmVyRXhwcmVzc2lvbjpcbiAgICAgIGxlZnQgPSB0aGlzLnJlY3Vyc2UoYXN0Lm9iamVjdCwgZmFsc2UsICEhY3JlYXRlKTtcbiAgICAgIGlmICghYXN0LmNvbXB1dGVkKSB7XG4gICAgICAgIHJpZ2h0ID0gYXN0LnByb3BlcnR5Lm5hbWU7XG4gICAgICB9XG4gICAgICBpZiAoYXN0LmNvbXB1dGVkKSByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucHJvcGVydHkpO1xuICAgICAgcmV0dXJuIGFzdC5jb21wdXRlZCA/XG4gICAgICAgIHRoaXMuY29tcHV0ZWRNZW1iZXIobGVmdCwgcmlnaHQsIGNvbnRleHQsIGNyZWF0ZSkgOlxuICAgICAgICB0aGlzLm5vbkNvbXB1dGVkTWVtYmVyKGxlZnQsIHJpZ2h0LCBjb250ZXh0LCBjcmVhdGUpO1xuICAgIGNhc2UgQVNULkNhbGxFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QuYXJndW1lbnRzLCBmdW5jdGlvbihleHByKSB7XG4gICAgICAgIGFyZ3MucHVzaChzZWxmLnJlY3Vyc2UoZXhwcikpO1xuICAgICAgfSk7XG4gICAgICBpZiAoYXN0LmZpbHRlcikgcmlnaHQgPSB0aGlzLiRmaWx0ZXIoYXN0LmNhbGxlZS5uYW1lKTtcbiAgICAgIGlmICghYXN0LmZpbHRlcikgcmlnaHQgPSB0aGlzLnJlY3Vyc2UoYXN0LmNhbGxlZSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gYXN0LmZpbHRlciA/XG4gICAgICAgIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2goYXJnc1tpXShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdmFsdWUgPSByaWdodC5hcHBseSh1bmRlZmluZWQsIHZhbHVlcywgaW5wdXRzKTtcbiAgICAgICAgICByZXR1cm4gY29udGV4dCA/IHtjb250ZXh0OiB1bmRlZmluZWQsIG5hbWU6IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgICB9IDpcbiAgICAgICAgZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICBpZiAocmhzLnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChhcmdzW2ldKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IHJocy52YWx1ZS5hcHBseShyaHMuY29udGV4dCwgdmFsdWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgICB9O1xuICAgIGNhc2UgQVNULkFzc2lnbm1lbnRFeHByZXNzaW9uOlxuICAgICAgbGVmdCA9IHRoaXMucmVjdXJzZShhc3QubGVmdCwgdHJ1ZSwgMSk7XG4gICAgICByaWdodCA9IHRoaXMucmVjdXJzZShhc3QucmlnaHQpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgIHZhciBsaHMgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgdmFyIHJocyA9IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgbGhzLmNvbnRleHRbbGhzLm5hbWVdID0gcmhzO1xuICAgICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogcmhzfSA6IHJocztcbiAgICAgIH07XG4gICAgY2FzZSBBU1QuQXJyYXlFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QuZWxlbWVudHMsIGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgYXJncy5wdXNoKHNlbGYucmVjdXJzZShleHByKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgdmFsdWUucHVzaChhcmdzW2ldKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHZhbHVlfSA6IHZhbHVlO1xuICAgICAgfTtcbiAgICBjYXNlIEFTVC5PYmplY3RFeHByZXNzaW9uOlxuICAgICAgYXJncyA9IFtdO1xuICAgICAgZm9yRWFjaChhc3QucHJvcGVydGllcywgZnVuY3Rpb24ocHJvcGVydHkpIHtcbiAgICAgICAgaWYgKHByb3BlcnR5LmNvbXB1dGVkKSB7XG4gICAgICAgICAgYXJncy5wdXNoKHtrZXk6IHNlbGYucmVjdXJzZShwcm9wZXJ0eS5rZXkpLFxuICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5yZWN1cnNlKHByb3BlcnR5LnZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFyZ3MucHVzaCh7a2V5OiBwcm9wZXJ0eS5rZXkudHlwZSA9PT0gQVNULklkZW50aWZpZXIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eS5rZXkubmFtZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICgnJyArIHByb3BlcnR5LmtleS52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICBjb21wdXRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5yZWN1cnNlKHByb3BlcnR5LnZhbHVlKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgaWYgKGFyZ3NbaV0uY29tcHV0ZWQpIHtcbiAgICAgICAgICAgIHZhbHVlW2FyZ3NbaV0ua2V5KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKV0gPSBhcmdzW2ldLnZhbHVlKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWVbYXJnc1tpXS5rZXldID0gYXJnc1tpXS52YWx1ZShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiB2YWx1ZX0gOiB2YWx1ZTtcbiAgICAgIH07XG4gICAgY2FzZSBBU1QuVGhpc0V4cHJlc3Npb246XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IHNjb3BlfSA6IHNjb3BlO1xuICAgICAgfTtcbiAgICBjYXNlIEFTVC5Mb2NhbHNFeHByZXNzaW9uOlxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGxvY2Fsc30gOiBsb2NhbHM7XG4gICAgICB9O1xuICAgIGNhc2UgQVNULk5HVmFsdWVQYXJhbWV0ZXI6XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhc3NpZ259IDogYXNzaWduO1xuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgJ3VuYXJ5Kyc6IGZ1bmN0aW9uKGFyZ3VtZW50LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gYXJndW1lbnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgaWYgKGlzRGVmaW5lZChhcmcpKSB7XG4gICAgICAgIGFyZyA9ICthcmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ3VuYXJ5LSc6IGZ1bmN0aW9uKGFyZ3VtZW50LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gYXJndW1lbnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgaWYgKGlzRGVmaW5lZChhcmcpKSB7XG4gICAgICAgIGFyZyA9IC1hcmc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSAtMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICd1bmFyeSEnOiBmdW5jdGlvbihhcmd1bWVudCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9ICFhcmd1bWVudChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Kyc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgbGhzID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIGFyZyA9IHBsdXNGbihsaHMsIHJocyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5LSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgbGhzID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICB2YXIgcmhzID0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIGFyZyA9IChpc0RlZmluZWQobGhzKSA/IGxocyA6IDApIC0gKGlzRGVmaW5lZChyaHMpID8gcmhzIDogMCk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Kic6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgKiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Lyc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgLyByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5JSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgJSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PT09JzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSA9PT0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSE9PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgIT09IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICdiaW5hcnk9PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPT0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSE9JzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSAhPSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PCc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPCByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5Pic6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5PD0nOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIDw9IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICdiaW5hcnk+PSc6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYXJnID0gbGVmdChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgPj0gcmlnaHQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgcmV0dXJuIGNvbnRleHQgPyB7dmFsdWU6IGFyZ30gOiBhcmc7XG4gICAgfTtcbiAgfSxcbiAgJ2JpbmFyeSYmJzogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSAmJiByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICByZXR1cm4gY29udGV4dCA/IHt2YWx1ZTogYXJnfSA6IGFyZztcbiAgICB9O1xuICB9LFxuICAnYmluYXJ5fHwnOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGFyZyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHx8IHJpZ2h0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gICd0ZXJuYXJ5PzonOiBmdW5jdGlvbih0ZXN0LCBhbHRlcm5hdGUsIGNvbnNlcXVlbnQsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBhcmcgPSB0ZXN0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSA/IGFsdGVybmF0ZShzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykgOiBjb25zZXF1ZW50KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIHJldHVybiBjb250ZXh0ID8ge3ZhbHVlOiBhcmd9IDogYXJnO1xuICAgIH07XG4gIH0sXG4gIHZhbHVlOiBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbnRleHQgPyB7Y29udGV4dDogdW5kZWZpbmVkLCBuYW1lOiB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX0gOiB2YWx1ZTsgfTtcbiAgfSxcbiAgaWRlbnRpZmllcjogZnVuY3Rpb24obmFtZSwgY29udGV4dCwgY3JlYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICB2YXIgYmFzZSA9IGxvY2FscyAmJiAobmFtZSBpbiBsb2NhbHMpID8gbG9jYWxzIDogc2NvcGU7XG4gICAgICBpZiAoY3JlYXRlICYmIGNyZWF0ZSAhPT0gMSAmJiBiYXNlICYmIGJhc2VbbmFtZV0gPT0gbnVsbCkge1xuICAgICAgICBiYXNlW25hbWVdID0ge307XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBiYXNlID8gYmFzZVtuYW1lXSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB7Y29udGV4dDogYmFzZSwgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICBjb21wdXRlZE1lbWJlcjogZnVuY3Rpb24obGVmdCwgcmlnaHQsIGNvbnRleHQsIGNyZWF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgdmFyIGxocyA9IGxlZnQoc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgdmFyIHJocztcbiAgICAgIHZhciB2YWx1ZTtcbiAgICAgIGlmIChsaHMgIT0gbnVsbCkge1xuICAgICAgICByaHMgPSByaWdodChzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgIHJocyA9IGdldFN0cmluZ1ZhbHVlKHJocyk7XG4gICAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgICAgaWYgKGxocyAmJiAhKGxoc1tyaHNdKSkge1xuICAgICAgICAgICAgbGhzW3Joc10gPSB7fTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSBsaHNbcmhzXTtcbiAgICAgIH1cbiAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiB7Y29udGV4dDogbGhzLCBuYW1lOiByaHMsIHZhbHVlOiB2YWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgbm9uQ29tcHV0ZWRNZW1iZXI6IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBjb250ZXh0LCBjcmVhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpIHtcbiAgICAgIHZhciBsaHMgPSBsZWZ0KHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKTtcbiAgICAgIGlmIChjcmVhdGUgJiYgY3JlYXRlICE9PSAxKSB7XG4gICAgICAgIGlmIChsaHMgJiYgbGhzW3JpZ2h0XSA9PSBudWxsKSB7XG4gICAgICAgICAgbGhzW3JpZ2h0XSA9IHt9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWUgPSBsaHMgIT0gbnVsbCA/IGxoc1tyaWdodF0gOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICByZXR1cm4ge2NvbnRleHQ6IGxocywgbmFtZTogcmlnaHQsIHZhbHVlOiB2YWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgaW5wdXRzOiBmdW5jdGlvbihpbnB1dCwgd2F0Y2hJZCkge1xuICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgdmFsdWUsIGxvY2FscywgaW5wdXRzKSB7XG4gICAgICBpZiAoaW5wdXRzKSByZXR1cm4gaW5wdXRzW3dhdGNoSWRdO1xuICAgICAgcmV0dXJuIGlucHV0KHNjb3BlLCB2YWx1ZSwgbG9jYWxzKTtcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBQYXJzZXIobGV4ZXIsICRmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgdGhpcy5hc3QgPSBuZXcgQVNUKGxleGVyLCBvcHRpb25zKTtcbiAgdGhpcy5hc3RDb21waWxlciA9IG9wdGlvbnMuY3NwID8gbmV3IEFTVEludGVycHJldGVyKCRmaWx0ZXIpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEFTVENvbXBpbGVyKCRmaWx0ZXIpO1xufVxuXG5QYXJzZXIucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUGFyc2VyLFxuXG4gIHBhcnNlOiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgdmFyIGFzdCA9IHRoaXMuZ2V0QXN0KHRleHQpO1xuICAgIHZhciBmbiA9IHRoaXMuYXN0Q29tcGlsZXIuY29tcGlsZShhc3QuYXN0KTtcbiAgICBmbi5saXRlcmFsID0gaXNMaXRlcmFsKGFzdC5hc3QpO1xuICAgIGZuLmNvbnN0YW50ID0gaXNDb25zdGFudChhc3QuYXN0KTtcbiAgICBmbi5vbmVUaW1lID0gYXN0Lm9uZVRpbWU7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIGdldEFzdDogZnVuY3Rpb24oZXhwKSB7XG4gICAgdmFyIG9uZVRpbWUgPSBmYWxzZTtcbiAgICBleHAgPSBleHAudHJpbSgpO1xuXG4gICAgaWYgKGV4cC5jaGFyQXQoMCkgPT09ICc6JyAmJiBleHAuY2hhckF0KDEpID09PSAnOicpIHtcbiAgICAgIG9uZVRpbWUgPSB0cnVlO1xuICAgICAgZXhwID0gZXhwLnN1YnN0cmluZygyKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFzdDogdGhpcy5hc3QuYXN0KGV4cCksXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0VmFsdWVPZih2YWx1ZSkge1xuICByZXR1cm4gaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKSA/IHZhbHVlLnZhbHVlT2YoKSA6IG9iamVjdFZhbHVlT2YuY2FsbCh2YWx1ZSk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRwYXJzZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBDb252ZXJ0cyBBbmd1bGFyIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGludG8gYSBmdW5jdGlvbi5cbiAqXG4gKiBgYGBqc1xuICogICB2YXIgZ2V0dGVyID0gJHBhcnNlKCd1c2VyLm5hbWUnKTtcbiAqICAgdmFyIHNldHRlciA9IGdldHRlci5hc3NpZ247XG4gKiAgIHZhciBjb250ZXh0ID0ge3VzZXI6e25hbWU6J2FuZ3VsYXInfX07XG4gKiAgIHZhciBsb2NhbHMgPSB7dXNlcjp7bmFtZTonbG9jYWwnfX07XG4gKlxuICogICBleHBlY3QoZ2V0dGVyKGNvbnRleHQpKS50b0VxdWFsKCdhbmd1bGFyJyk7XG4gKiAgIHNldHRlcihjb250ZXh0LCAnbmV3VmFsdWUnKTtcbiAqICAgZXhwZWN0KGNvbnRleHQudXNlci5uYW1lKS50b0VxdWFsKCduZXdWYWx1ZScpO1xuICogICBleHBlY3QoZ2V0dGVyKGNvbnRleHQsIGxvY2FscykpLnRvRXF1YWwoJ2xvY2FsJyk7XG4gKiBgYGBcbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAqIEByZXR1cm5zIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBhIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gKlxuICogICAgKiBgY29udGV4dGAg4oCTIGB7b2JqZWN0fWAg4oCTIGFuIG9iamVjdCBhZ2FpbnN0IHdoaWNoIGFueSBleHByZXNzaW9ucyBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nc1xuICogICAgICBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzIGluXG4gKiAgICAgIGBjb250ZXh0YC5cbiAqXG4gKiAgICBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gYWxzbyBoYXMgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICogICAgICAqIGBsaXRlcmFsYCDigJMgYHtib29sZWFufWAg4oCTIHdoZXRoZXIgdGhlIGV4cHJlc3Npb24ncyB0b3AtbGV2ZWwgbm9kZSBpcyBhIEphdmFTY3JpcHRcbiAqICAgICAgICBsaXRlcmFsLlxuICogICAgICAqIGBjb25zdGFudGAg4oCTIGB7Ym9vbGVhbn1gIOKAkyB3aGV0aGVyIHRoZSBleHByZXNzaW9uIGlzIG1hZGUgZW50aXJlbHkgb2YgSmF2YVNjcmlwdFxuICogICAgICAgIGNvbnN0YW50IGxpdGVyYWxzLlxuICogICAgICAqIGBhc3NpZ25gIOKAkyBgez9mdW5jdGlvbihjb250ZXh0LCB2YWx1ZSl9YCDigJMgaWYgdGhlIGV4cHJlc3Npb24gaXMgYXNzaWduYWJsZSwgdGhpcyB3aWxsIGJlXG4gKiAgICAgICAgc2V0IHRvIGEgZnVuY3Rpb24gdG8gY2hhbmdlIGl0cyB2YWx1ZSBvbiB0aGUgZ2l2ZW4gY29udGV4dC5cbiAqXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJHBhcnNlUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgJHBhcnNlUHJvdmlkZXJgIGNhbiBiZSB1c2VkIGZvciBjb25maWd1cmluZyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUge0BsaW5rIG5nLiRwYXJzZSAkcGFyc2V9XG4gKiAgc2VydmljZS5cbiAqL1xuZnVuY3Rpb24gJFBhcnNlUHJvdmlkZXIoKSB7XG4gIHZhciBjYWNoZSA9IGNyZWF0ZU1hcCgpO1xuICB2YXIgbGl0ZXJhbHMgPSB7XG4gICAgJ3RydWUnOiB0cnVlLFxuICAgICdmYWxzZSc6IGZhbHNlLFxuICAgICdudWxsJzogbnVsbCxcbiAgICAndW5kZWZpbmVkJzogdW5kZWZpbmVkXG4gIH07XG4gIHZhciBpZGVudFN0YXJ0LCBpZGVudENvbnRpbnVlO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRwYXJzZVByb3ZpZGVyI2FkZExpdGVyYWxcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIENvbmZpZ3VyZSAkcGFyc2Ugc2VydmljZSB0byBhZGQgbGl0ZXJhbCB2YWx1ZXMgdGhhdCB3aWxsIGJlIHByZXNlbnQgYXMgbGl0ZXJhbCBhdCBleHByZXNzaW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxpdGVyYWxOYW1lIFRva2VuIGZvciB0aGUgbGl0ZXJhbCB2YWx1ZS4gVGhlIGxpdGVyYWwgbmFtZSB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgbGl0ZXJhbCBuYW1lLlxuICAgKiBAcGFyYW0geyp9IGxpdGVyYWxWYWx1ZSBWYWx1ZSBmb3IgdGhpcyBsaXRlcmFsLiBBbGwgbGl0ZXJhbCB2YWx1ZXMgbXVzdCBiZSBwcmltaXRpdmVzIG9yIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiovXG4gIHRoaXMuYWRkTGl0ZXJhbCA9IGZ1bmN0aW9uKGxpdGVyYWxOYW1lLCBsaXRlcmFsVmFsdWUpIHtcbiAgICBsaXRlcmFsc1tsaXRlcmFsTmFtZV0gPSBsaXRlcmFsVmFsdWU7XG4gIH07XG5cbiAvKipcbiAgKiBAbmdkb2MgbWV0aG9kXG4gICogQG5hbWUgJHBhcnNlUHJvdmlkZXIjc2V0SWRlbnRpZmllckZuc1xuICAqXG4gICogQGRlc2NyaXB0aW9uXG4gICpcbiAgKiBBbGxvd3MgZGVmaW5pbmcgdGhlIHNldCBvZiBjaGFyYWN0ZXJzIHRoYXQgYXJlIGFsbG93ZWQgaW4gQW5ndWxhciBleHByZXNzaW9ucy4gVGhlIGZ1bmN0aW9uXG4gICogYGlkZW50aWZpZXJTdGFydGAgd2lsbCBnZXQgY2FsbGVkIHRvIGtub3cgaWYgYSBnaXZlbiBjaGFyYWN0ZXIgaXMgYSB2YWxpZCBjaGFyYWN0ZXIgdG8gYmUgdGhlXG4gICogZmlyc3QgY2hhcmFjdGVyIGZvciBhbiBpZGVudGlmaWVyLiBUaGUgZnVuY3Rpb24gYGlkZW50aWZpZXJDb250aW51ZWAgd2lsbCBnZXQgY2FsbGVkIHRvIGtub3cgaWZcbiAgKiBhIGdpdmVuIGNoYXJhY3RlciBpcyBhIHZhbGlkIGNoYXJhY3RlciB0byBiZSBhIGZvbGxvdy11cCBpZGVudGlmaWVyIGNoYXJhY3Rlci4gVGhlIGZ1bmN0aW9uc1xuICAqIGBpZGVudGlmaWVyU3RhcnRgIGFuZCBgaWRlbnRpZmllckNvbnRpbnVlYCB3aWxsIHJlY2VpdmUgYXMgYXJndW1lbnRzIHRoZSBzaW5nbGUgY2hhcmFjdGVyIHRvIGJlXG4gICogaWRlbnRpZmllciBhbmQgdGhlIGNoYXJhY3RlciBjb2RlIHBvaW50LiBUaGVzZSBhcmd1bWVudHMgd2lsbCBiZSBgc3RyaW5nYCBhbmQgYG51bWVyaWNgLiBLZWVwIGluXG4gICogbWluZCB0aGF0IHRoZSBgc3RyaW5nYCBwYXJhbWV0ZXIgY2FuIGJlIHR3byBjaGFyYWN0ZXJzIGxvbmcgZGVwZW5kaW5nIG9uIHRoZSBjaGFyYWN0ZXJcbiAgKiByZXByZXNlbnRhdGlvbi4gSXQgaXMgZXhwZWN0ZWQgZm9yIHRoZSBmdW5jdGlvbiB0byByZXR1cm4gYHRydWVgIG9yIGBmYWxzZWAsIHdoZXRoZXIgdGhhdFxuICAqIGNoYXJhY3RlciBpcyBhbGxvd2VkIG9yIG5vdC5cbiAgKlxuICAqIFNpbmNlIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZXh0ZW5zaXZlbHksIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZXNlIGZ1bmN0aW9ucyBmYXN0LFxuICAqIGFzIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGVzZSBmdW5jdGlvbnMgaGF2ZSBhIGRpcmVjdCBpbXBhY3Qgb24gdGhlIGV4cHJlc3Npb25zIHBhcnNpbmcgc3BlZWQuXG4gICpcbiAgKiBAcGFyYW0ge2Z1bmN0aW9uPX0gaWRlbnRpZmllclN0YXJ0IFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgZGVjaWRlIHdoZXRoZXIgdGhlIGdpdmVuIGNoYXJhY3RlciBpc1xuICAqICAgYSB2YWxpZCBpZGVudGlmaWVyIHN0YXJ0IGNoYXJhY3Rlci5cbiAgKiBAcGFyYW0ge2Z1bmN0aW9uPX0gaWRlbnRpZmllckNvbnRpbnVlIFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgZGVjaWRlIHdoZXRoZXIgdGhlIGdpdmVuIGNoYXJhY3RlciBpc1xuICAqICAgYSB2YWxpZCBpZGVudGlmaWVyIGNvbnRpbnVlIGNoYXJhY3Rlci5cbiAgKi9cbiAgdGhpcy5zZXRJZGVudGlmaWVyRm5zID0gZnVuY3Rpb24oaWRlbnRpZmllclN0YXJ0LCBpZGVudGlmaWVyQ29udGludWUpIHtcbiAgICBpZGVudFN0YXJ0ID0gaWRlbnRpZmllclN0YXJ0O1xuICAgIGlkZW50Q29udGludWUgPSBpZGVudGlmaWVyQ29udGludWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gWyckZmlsdGVyJywgZnVuY3Rpb24oJGZpbHRlcikge1xuICAgIHZhciBub1Vuc2FmZUV2YWwgPSBjc3AoKS5ub1Vuc2FmZUV2YWw7XG4gICAgdmFyICRwYXJzZU9wdGlvbnMgPSB7XG4gICAgICAgICAgY3NwOiBub1Vuc2FmZUV2YWwsXG4gICAgICAgICAgbGl0ZXJhbHM6IGNvcHkobGl0ZXJhbHMpLFxuICAgICAgICAgIGlzSWRlbnRpZmllclN0YXJ0OiBpc0Z1bmN0aW9uKGlkZW50U3RhcnQpICYmIGlkZW50U3RhcnQsXG4gICAgICAgICAgaXNJZGVudGlmaWVyQ29udGludWU6IGlzRnVuY3Rpb24oaWRlbnRDb250aW51ZSkgJiYgaWRlbnRDb250aW51ZVxuICAgICAgICB9O1xuICAgICRwYXJzZS4kJGdldEFzdCA9ICQkZ2V0QXN0O1xuICAgIHJldHVybiAkcGFyc2U7XG5cbiAgICBmdW5jdGlvbiAkcGFyc2UoZXhwLCBpbnRlcmNlcHRvckZuKSB7XG4gICAgICB2YXIgcGFyc2VkRXhwcmVzc2lvbiwgY2FjaGVLZXk7XG5cbiAgICAgIHN3aXRjaCAodHlwZW9mIGV4cCkge1xuICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgIGV4cCA9IGV4cC50cmltKCk7XG4gICAgICAgICAgY2FjaGVLZXkgPSBleHA7XG5cbiAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uID0gY2FjaGVbY2FjaGVLZXldO1xuXG4gICAgICAgICAgaWYgKCFwYXJzZWRFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICB2YXIgbGV4ZXIgPSBuZXcgTGV4ZXIoJHBhcnNlT3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgcGFyc2VyID0gbmV3IFBhcnNlcihsZXhlciwgJGZpbHRlciwgJHBhcnNlT3B0aW9ucyk7XG4gICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uID0gcGFyc2VyLnBhcnNlKGV4cCk7XG4gICAgICAgICAgICBpZiAocGFyc2VkRXhwcmVzc2lvbi5jb25zdGFudCkge1xuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSA9IGNvbnN0YW50V2F0Y2hEZWxlZ2F0ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VkRXhwcmVzc2lvbi5vbmVUaW1lKSB7XG4gICAgICAgICAgICAgIHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlID0gcGFyc2VkRXhwcmVzc2lvbi5saXRlcmFsID9cbiAgICAgICAgICAgICAgICAgIG9uZVRpbWVMaXRlcmFsV2F0Y2hEZWxlZ2F0ZSA6IG9uZVRpbWVXYXRjaERlbGVnYXRlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJzZWRFeHByZXNzaW9uLmlucHV0cykge1xuICAgICAgICAgICAgICBwYXJzZWRFeHByZXNzaW9uLiQkd2F0Y2hEZWxlZ2F0ZSA9IGlucHV0c1dhdGNoRGVsZWdhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWNoZVtjYWNoZUtleV0gPSBwYXJzZWRFeHByZXNzaW9uO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYWRkSW50ZXJjZXB0b3IocGFyc2VkRXhwcmVzc2lvbiwgaW50ZXJjZXB0b3JGbik7XG5cbiAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgIHJldHVybiBhZGRJbnRlcmNlcHRvcihleHAsIGludGVyY2VwdG9yRm4pO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGFkZEludGVyY2VwdG9yKG5vb3AsIGludGVyY2VwdG9yRm4pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uICQkZ2V0QXN0KGV4cCkge1xuICAgICAgdmFyIGxleGVyID0gbmV3IExleGVyKCRwYXJzZU9wdGlvbnMpO1xuICAgICAgdmFyIHBhcnNlciA9IG5ldyBQYXJzZXIobGV4ZXIsICRmaWx0ZXIsICRwYXJzZU9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRBc3QoZXhwKS5hc3Q7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayhuZXdWYWx1ZSwgb2xkVmFsdWVPZlZhbHVlLCBjb21wYXJlT2JqZWN0SWRlbnRpdHkpIHtcblxuICAgICAgaWYgKG5ld1ZhbHVlID09IG51bGwgfHwgb2xkVmFsdWVPZlZhbHVlID09IG51bGwpIHsgLy8gbnVsbC91bmRlZmluZWRcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlID09PSBvbGRWYWx1ZU9mVmFsdWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdvYmplY3QnKSB7XG5cbiAgICAgICAgLy8gYXR0ZW1wdCB0byBjb252ZXJ0IHRoZSB2YWx1ZSB0byBhIHByaW1pdGl2ZSB0eXBlXG4gICAgICAgIC8vIFRPRE8oZG9jcyk6IGFkZCBhIG5vdGUgdG8gZG9jcyB0aGF0IGJ5IGltcGxlbWVudGluZyB2YWx1ZU9mIGV2ZW4gb2JqZWN0cyBhbmQgYXJyYXlzIGNhblxuICAgICAgICAvLyAgICAgICAgICAgICBiZSBjaGVhcGx5IGRpcnR5LWNoZWNrZWRcbiAgICAgICAgbmV3VmFsdWUgPSBnZXRWYWx1ZU9mKG5ld1ZhbHVlKTtcblxuICAgICAgICBpZiAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0JyAmJiAhY29tcGFyZU9iamVjdElkZW50aXR5KSB7XG4gICAgICAgICAgLy8gb2JqZWN0cy9hcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWQgLSBkZWVwLXdhdGNoaW5nIHRoZW0gd291bGQgYmUgdG9vIGV4cGVuc2l2ZVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZhbGwtdGhyb3VnaCB0byB0aGUgcHJpbWl0aXZlIGVxdWFsaXR5IGNoZWNrXG4gICAgICB9XG5cbiAgICAgIC8vUHJpbWl0aXZlIG9yIE5hTlxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgcmV0dXJuIG5ld1ZhbHVlID09PSBvbGRWYWx1ZU9mVmFsdWUgfHwgKG5ld1ZhbHVlICE9PSBuZXdWYWx1ZSAmJiBvbGRWYWx1ZU9mVmFsdWUgIT09IG9sZFZhbHVlT2ZWYWx1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5wdXRzV2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uLCBwcmV0dHlQcmludEV4cHJlc3Npb24pIHtcbiAgICAgIHZhciBpbnB1dEV4cHJlc3Npb25zID0gcGFyc2VkRXhwcmVzc2lvbi5pbnB1dHM7XG4gICAgICB2YXIgbGFzdFJlc3VsdDtcblxuICAgICAgaWYgKGlucHV0RXhwcmVzc2lvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHZhciBvbGRJbnB1dFZhbHVlT2YgPSBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrOyAvLyBpbml0IHRvIHNvbWV0aGluZyB1bmlxdWUgc28gdGhhdCBlcXVhbHMgY2hlY2sgZmFpbHNcbiAgICAgICAgaW5wdXRFeHByZXNzaW9ucyA9IGlucHV0RXhwcmVzc2lvbnNbMF07XG4gICAgICAgIHJldHVybiBzY29wZS4kd2F0Y2goZnVuY3Rpb24gZXhwcmVzc2lvbklucHV0V2F0Y2goc2NvcGUpIHtcbiAgICAgICAgICB2YXIgbmV3SW5wdXRWYWx1ZSA9IGlucHV0RXhwcmVzc2lvbnMoc2NvcGUpO1xuICAgICAgICAgIGlmICghZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayhuZXdJbnB1dFZhbHVlLCBvbGRJbnB1dFZhbHVlT2YsIGlucHV0RXhwcmVzc2lvbnMuaXNQdXJlKSkge1xuICAgICAgICAgICAgbGFzdFJlc3VsdCA9IHBhcnNlZEV4cHJlc3Npb24oc2NvcGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBbbmV3SW5wdXRWYWx1ZV0pO1xuICAgICAgICAgICAgb2xkSW5wdXRWYWx1ZU9mID0gbmV3SW5wdXRWYWx1ZSAmJiBnZXRWYWx1ZU9mKG5ld0lucHV0VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwcmV0dHlQcmludEV4cHJlc3Npb24pO1xuICAgICAgfVxuXG4gICAgICB2YXIgb2xkSW5wdXRWYWx1ZU9mVmFsdWVzID0gW107XG4gICAgICB2YXIgb2xkSW5wdXRWYWx1ZXMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0RXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXNbaV0gPSBleHByZXNzaW9uSW5wdXREaXJ0eUNoZWNrOyAvLyBpbml0IHRvIHNvbWV0aGluZyB1bmlxdWUgc28gdGhhdCBlcXVhbHMgY2hlY2sgZmFpbHNcbiAgICAgICAgb2xkSW5wdXRWYWx1ZXNbaV0gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIGV4cHJlc3Npb25JbnB1dHNXYXRjaChzY29wZSkge1xuICAgICAgICB2YXIgY2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0RXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgIHZhciBuZXdJbnB1dFZhbHVlID0gaW5wdXRFeHByZXNzaW9uc1tpXShzY29wZSk7XG4gICAgICAgICAgaWYgKGNoYW5nZWQgfHwgKGNoYW5nZWQgPSAhZXhwcmVzc2lvbklucHV0RGlydHlDaGVjayhuZXdJbnB1dFZhbHVlLCBvbGRJbnB1dFZhbHVlT2ZWYWx1ZXNbaV0sIGlucHV0RXhwcmVzc2lvbnNbaV0uaXNQdXJlKSkpIHtcbiAgICAgICAgICAgIG9sZElucHV0VmFsdWVzW2ldID0gbmV3SW5wdXRWYWx1ZTtcbiAgICAgICAgICAgIG9sZElucHV0VmFsdWVPZlZhbHVlc1tpXSA9IG5ld0lucHV0VmFsdWUgJiYgZ2V0VmFsdWVPZihuZXdJbnB1dFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgIGxhc3RSZXN1bHQgPSBwYXJzZWRFeHByZXNzaW9uKHNjb3BlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb2xkSW5wdXRWYWx1ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgICB9LCBsaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHksIHByZXR0eVByaW50RXhwcmVzc2lvbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25lVGltZVdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbiwgcHJldHR5UHJpbnRFeHByZXNzaW9uKSB7XG4gICAgICB2YXIgdW53YXRjaCwgbGFzdFZhbHVlO1xuICAgICAgaWYgKHBhcnNlZEV4cHJlc3Npb24uaW5wdXRzKSB7XG4gICAgICAgIHVud2F0Y2ggPSBpbnB1dHNXYXRjaERlbGVnYXRlKHNjb3BlLCBvbmVUaW1lTGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uLCBwcmV0dHlQcmludEV4cHJlc3Npb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdW53YXRjaCA9IHNjb3BlLiR3YXRjaChvbmVUaW1lV2F0Y2gsIG9uZVRpbWVMaXN0ZW5lciwgb2JqZWN0RXF1YWxpdHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVud2F0Y2g7XG5cbiAgICAgIGZ1bmN0aW9uIG9uZVRpbWVXYXRjaChzY29wZSkge1xuICAgICAgICByZXR1cm4gcGFyc2VkRXhwcmVzc2lvbihzY29wZSk7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBvbmVUaW1lTGlzdGVuZXIodmFsdWUsIG9sZCwgc2NvcGUpIHtcbiAgICAgICAgbGFzdFZhbHVlID0gdmFsdWU7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVyKSkge1xuICAgICAgICAgIGxpc3RlbmVyKHZhbHVlLCBvbGQsIHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQobGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICB1bndhdGNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUoc2NvcGUsIGxpc3RlbmVyLCBvYmplY3RFcXVhbGl0eSwgcGFyc2VkRXhwcmVzc2lvbikge1xuICAgICAgdmFyIHVud2F0Y2gsIGxhc3RWYWx1ZTtcbiAgICAgIHVud2F0Y2ggPSBzY29wZS4kd2F0Y2goZnVuY3Rpb24gb25lVGltZVdhdGNoKHNjb3BlKSB7XG4gICAgICAgIHJldHVybiBwYXJzZWRFeHByZXNzaW9uKHNjb3BlKTtcbiAgICAgIH0sIGZ1bmN0aW9uIG9uZVRpbWVMaXN0ZW5lcih2YWx1ZSwgb2xkLCBzY29wZSkge1xuICAgICAgICBsYXN0VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXIpKSB7XG4gICAgICAgICAgbGlzdGVuZXIodmFsdWUsIG9sZCwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FsbERlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgc2NvcGUuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGlzQWxsRGVmaW5lZChsYXN0VmFsdWUpKSB1bndhdGNoKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIG9iamVjdEVxdWFsaXR5KTtcblxuICAgICAgcmV0dXJuIHVud2F0Y2g7XG5cbiAgICAgIGZ1bmN0aW9uIGlzQWxsRGVmaW5lZCh2YWx1ZSkge1xuICAgICAgICB2YXIgYWxsRGVmaW5lZCA9IHRydWU7XG4gICAgICAgIGZvckVhY2godmFsdWUsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgIGlmICghaXNEZWZpbmVkKHZhbCkpIGFsbERlZmluZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbGxEZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnN0YW50V2F0Y2hEZWxlZ2F0ZShzY29wZSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwYXJzZWRFeHByZXNzaW9uKSB7XG4gICAgICB2YXIgdW53YXRjaCA9IHNjb3BlLiR3YXRjaChmdW5jdGlvbiBjb25zdGFudFdhdGNoKHNjb3BlKSB7XG4gICAgICAgIHVud2F0Y2goKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb24oc2NvcGUpO1xuICAgICAgfSwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5KTtcbiAgICAgIHJldHVybiB1bndhdGNoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZEludGVyY2VwdG9yKHBhcnNlZEV4cHJlc3Npb24sIGludGVyY2VwdG9yRm4pIHtcbiAgICAgIGlmICghaW50ZXJjZXB0b3JGbikgcmV0dXJuIHBhcnNlZEV4cHJlc3Npb247XG4gICAgICB2YXIgd2F0Y2hEZWxlZ2F0ZSA9IHBhcnNlZEV4cHJlc3Npb24uJCR3YXRjaERlbGVnYXRlO1xuICAgICAgdmFyIHVzZUlucHV0cyA9IGZhbHNlO1xuXG4gICAgICB2YXIgcmVndWxhcldhdGNoID1cbiAgICAgICAgICB3YXRjaERlbGVnYXRlICE9PSBvbmVUaW1lTGl0ZXJhbFdhdGNoRGVsZWdhdGUgJiZcbiAgICAgICAgICB3YXRjaERlbGVnYXRlICE9PSBvbmVUaW1lV2F0Y2hEZWxlZ2F0ZTtcblxuICAgICAgdmFyIGZuID0gcmVndWxhcldhdGNoID8gZnVuY3Rpb24gcmVndWxhckludGVyY2VwdGVkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cykge1xuICAgICAgICB2YXIgdmFsdWUgPSB1c2VJbnB1dHMgJiYgaW5wdXRzID8gaW5wdXRzWzBdIDogcGFyc2VkRXhwcmVzc2lvbihzY29wZSwgbG9jYWxzLCBhc3NpZ24sIGlucHV0cyk7XG4gICAgICAgIHJldHVybiBpbnRlcmNlcHRvckZuKHZhbHVlLCBzY29wZSwgbG9jYWxzKTtcbiAgICAgIH0gOiBmdW5jdGlvbiBvbmVUaW1lSW50ZXJjZXB0ZWRFeHByZXNzaW9uKHNjb3BlLCBsb2NhbHMsIGFzc2lnbiwgaW5wdXRzKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlZEV4cHJlc3Npb24oc2NvcGUsIGxvY2FscywgYXNzaWduLCBpbnB1dHMpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gaW50ZXJjZXB0b3JGbih2YWx1ZSwgc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgIC8vIHdlIG9ubHkgcmV0dXJuIHRoZSBpbnRlcmNlcHRvcidzIHJlc3VsdCBpZiB0aGVcbiAgICAgICAgLy8gaW5pdGlhbCB2YWx1ZSBpcyBkZWZpbmVkIChmb3IgYmluZC1vbmNlKVxuICAgICAgICByZXR1cm4gaXNEZWZpbmVkKHZhbHVlKSA/IHJlc3VsdCA6IHZhbHVlO1xuICAgICAgfTtcblxuICAgICAgLy8gUHJvcGFnYXRlICQkd2F0Y2hEZWxlZ2F0ZXMgb3RoZXIgdGhlbiBpbnB1dHNXYXRjaERlbGVnYXRlXG4gICAgICB1c2VJbnB1dHMgPSAhcGFyc2VkRXhwcmVzc2lvbi5pbnB1dHM7XG4gICAgICBpZiAod2F0Y2hEZWxlZ2F0ZSAmJiB3YXRjaERlbGVnYXRlICE9PSBpbnB1dHNXYXRjaERlbGVnYXRlKSB7XG4gICAgICAgIGZuLiQkd2F0Y2hEZWxlZ2F0ZSA9IHdhdGNoRGVsZWdhdGU7XG4gICAgICAgIGZuLmlucHV0cyA9IHBhcnNlZEV4cHJlc3Npb24uaW5wdXRzO1xuICAgICAgfSBlbHNlIGlmICghaW50ZXJjZXB0b3JGbi4kc3RhdGVmdWwpIHtcbiAgICAgICAgLy8gVHJlYXQgaW50ZXJjZXB0b3IgbGlrZSBmaWx0ZXJzIC0gYXNzdW1lIG5vbi1zdGF0ZWZ1bCBieSBkZWZhdWx0IGFuZCB1c2UgdGhlIGlucHV0c1dhdGNoRGVsZWdhdGVcbiAgICAgICAgZm4uJCR3YXRjaERlbGVnYXRlID0gaW5wdXRzV2F0Y2hEZWxlZ2F0ZTtcbiAgICAgICAgZm4uaW5wdXRzID0gcGFyc2VkRXhwcmVzc2lvbi5pbnB1dHMgPyBwYXJzZWRFeHByZXNzaW9uLmlucHV0cyA6IFtwYXJzZWRFeHByZXNzaW9uXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGZuLmlucHV0cykge1xuICAgICAgICBmbi5pbnB1dHMgPSBmbi5pbnB1dHMubWFwKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBpc1B1cmUgZmxhZyBvZiBpbnB1dHMgd2hlbiBpdCBpcyBub3QgYWJzb2x1dGUgYmVjYXVzZSB0aGV5IGFyZSBub3cgd3JhcHBlZCBpbiBhXG4gICAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IG5vbi1wdXJlIGludGVyY2VwdG9yIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICBpZiAoZS5pc1B1cmUgPT09IFBVUklUWV9SRUxBVElWRSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXB1cmlmaWVyKHMpIHsgcmV0dXJuIGUocyk7IH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuO1xuICAgIH1cbiAgfV07XG59XG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRxXG4gKiBAcmVxdWlyZXMgJHJvb3RTY29wZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBzZXJ2aWNlIHRoYXQgaGVscHMgeW91IHJ1biBmdW5jdGlvbnMgYXN5bmNocm9ub3VzbHksIGFuZCB1c2UgdGhlaXIgcmV0dXJuIHZhbHVlcyAob3IgZXhjZXB0aW9ucylcbiAqIHdoZW4gdGhleSBhcmUgZG9uZSBwcm9jZXNzaW5nLlxuICpcbiAqIFRoaXMgaXMgYSBbUHJvbWlzZXMvQStdKGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vKS1jb21wbGlhbnQgaW1wbGVtZW50YXRpb24gb2YgcHJvbWlzZXMvZGVmZXJyZWRcbiAqIG9iamVjdHMgaW5zcGlyZWQgYnkgW0tyaXMgS293YWwncyBRXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EpLlxuICpcbiAqICRxIGNhbiBiZSB1c2VkIGluIHR3byBmYXNoaW9ucyAtLS0gb25lIHdoaWNoIGlzIG1vcmUgc2ltaWxhciB0byBLcmlzIEtvd2FsJ3MgUSBvciBqUXVlcnkncyBEZWZlcnJlZFxuICogaW1wbGVtZW50YXRpb25zLCBhbmQgdGhlIG90aGVyIHdoaWNoIHJlc2VtYmxlcyBFUzYgKEVTMjAxNSkgcHJvbWlzZXMgdG8gc29tZSBkZWdyZWUuXG4gKlxuICogIyMgJHEgY29uc3RydWN0b3JcbiAqXG4gKiBUaGUgc3RyZWFtbGluZWQgRVM2IHN0eWxlIHByb21pc2UgaXMgZXNzZW50aWFsbHkganVzdCB1c2luZyAkcSBhcyBhIGNvbnN0cnVjdG9yIHdoaWNoIHRha2VzIGEgYHJlc29sdmVyYFxuICogZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50LiBUaGlzIGlzIHNpbWlsYXIgdG8gdGhlIG5hdGl2ZSBQcm9taXNlIGltcGxlbWVudGF0aW9uIGZyb20gRVM2LFxuICogc2VlIFtNRE5dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1Byb21pc2UpLlxuICpcbiAqIFdoaWxlIHRoZSBjb25zdHJ1Y3Rvci1zdHlsZSB1c2UgaXMgc3VwcG9ydGVkLCBub3QgYWxsIG9mIHRoZSBzdXBwb3J0aW5nIG1ldGhvZHMgZnJvbSBFUzYgcHJvbWlzZXMgYXJlXG4gKiBhdmFpbGFibGUgeWV0LlxuICpcbiAqIEl0IGNhbiBiZSB1c2VkIGxpa2Ugc286XG4gKlxuICogYGBganNcbiAqICAgLy8gZm9yIHRoZSBwdXJwb3NlIG9mIHRoaXMgZXhhbXBsZSBsZXQncyBhc3N1bWUgdGhhdCB2YXJpYWJsZXMgYCRxYCBhbmQgYG9rVG9HcmVldGBcbiAqICAgLy8gYXJlIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBsZXhpY2FsIHNjb3BlICh0aGV5IGNvdWxkIGhhdmUgYmVlbiBpbmplY3RlZCBvciBwYXNzZWQgaW4pLlxuICpcbiAqICAgZnVuY3Rpb24gYXN5bmNHcmVldChuYW1lKSB7XG4gKiAgICAgLy8gcGVyZm9ybSBzb21lIGFzeW5jaHJvbm91cyBvcGVyYXRpb24sIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBwcm9taXNlIHdoZW4gYXBwcm9wcmlhdGUuXG4gKiAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICogICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAqICAgICAgICAgaWYgKG9rVG9HcmVldChuYW1lKSkge1xuICogICAgICAgICAgIHJlc29sdmUoJ0hlbGxvLCAnICsgbmFtZSArICchJyk7XG4gKiAgICAgICAgIH0gZWxzZSB7XG4gKiAgICAgICAgICAgcmVqZWN0KCdHcmVldGluZyAnICsgbmFtZSArICcgaXMgbm90IGFsbG93ZWQuJyk7XG4gKiAgICAgICAgIH1cbiAqICAgICAgIH0sIDEwMDApO1xuICogICAgIH0pO1xuICogICB9XG4gKlxuICogICB2YXIgcHJvbWlzZSA9IGFzeW5jR3JlZXQoJ1JvYmluIEhvb2QnKTtcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gKiAgICAgYWxlcnQoJ1N1Y2Nlc3M6ICcgKyBncmVldGluZyk7XG4gKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIE5vdGU6IHByb2dyZXNzL25vdGlmeSBjYWxsYmFja3MgYXJlIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIHZpYSB0aGUgRVM2LXN0eWxlIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiB1bmxpa2UgRVM2IGJlaGF2aW9yLCBhbiBleGNlcHRpb24gdGhyb3duIGluIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiB3aWxsIE5PVCBpbXBsaWNpdGx5IHJlamVjdCB0aGUgcHJvbWlzZS5cbiAqXG4gKiBIb3dldmVyLCB0aGUgbW9yZSB0cmFkaXRpb25hbCBDb21tb25KUy1zdHlsZSB1c2FnZSBpcyBzdGlsbCBhdmFpbGFibGUsIGFuZCBkb2N1bWVudGVkIGJlbG93LlxuICpcbiAqIFtUaGUgQ29tbW9uSlMgUHJvbWlzZSBwcm9wb3NhbF0oaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvUHJvbWlzZXMpIGRlc2NyaWJlcyBhIHByb21pc2UgYXMgYW5cbiAqIGludGVyZmFjZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgYW4gYWN0aW9uIHRoYXQgaXNcbiAqIHBlcmZvcm1lZCBhc3luY2hyb25vdXNseSwgYW5kIG1heSBvciBtYXkgbm90IGJlIGZpbmlzaGVkIGF0IGFueSBnaXZlbiBwb2ludCBpbiB0aW1lLlxuICpcbiAqIEZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIGRlYWxpbmcgd2l0aCBlcnJvciBoYW5kbGluZywgZGVmZXJyZWQgYW5kIHByb21pc2UgQVBJcyBhcmUgdG9cbiAqIGFzeW5jaHJvbm91cyBwcm9ncmFtbWluZyB3aGF0IGB0cnlgLCBgY2F0Y2hgIGFuZCBgdGhyb3dgIGtleXdvcmRzIGFyZSB0byBzeW5jaHJvbm91cyBwcm9ncmFtbWluZy5cbiAqXG4gKiBgYGBqc1xuICogICAvLyBmb3IgdGhlIHB1cnBvc2Ugb2YgdGhpcyBleGFtcGxlIGxldCdzIGFzc3VtZSB0aGF0IHZhcmlhYmxlcyBgJHFgIGFuZCBgb2tUb0dyZWV0YFxuICogICAvLyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGxleGljYWwgc2NvcGUgKHRoZXkgY291bGQgaGF2ZSBiZWVuIGluamVjdGVkIG9yIHBhc3NlZCBpbikuXG4gKlxuICogICBmdW5jdGlvbiBhc3luY0dyZWV0KG5hbWUpIHtcbiAqICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICpcbiAqICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICogICAgICAgZGVmZXJyZWQubm90aWZ5KCdBYm91dCB0byBncmVldCAnICsgbmFtZSArICcuJyk7XG4gKlxuICogICAgICAgaWYgKG9rVG9HcmVldChuYW1lKSkge1xuICogICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCdIZWxsbywgJyArIG5hbWUgKyAnIScpO1xuICogICAgICAgfSBlbHNlIHtcbiAqICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdHcmVldGluZyAnICsgbmFtZSArICcgaXMgbm90IGFsbG93ZWQuJyk7XG4gKiAgICAgICB9XG4gKiAgICAgfSwgMTAwMCk7XG4gKlxuICogICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICogICB9XG4gKlxuICogICB2YXIgcHJvbWlzZSA9IGFzeW5jR3JlZXQoJ1JvYmluIEhvb2QnKTtcbiAqICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGdyZWV0aW5nKSB7XG4gKiAgICAgYWxlcnQoJ1N1Y2Nlc3M6ICcgKyBncmVldGluZyk7XG4gKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICogICAgIGFsZXJ0KCdGYWlsZWQ6ICcgKyByZWFzb24pO1xuICogICB9LCBmdW5jdGlvbih1cGRhdGUpIHtcbiAqICAgICBhbGVydCgnR290IG5vdGlmaWNhdGlvbjogJyArIHVwZGF0ZSk7XG4gKiAgIH0pO1xuICogYGBgXG4gKlxuICogQXQgZmlyc3QgaXQgbWlnaHQgbm90IGJlIG9idmlvdXMgd2h5IHRoaXMgZXh0cmEgY29tcGxleGl0eSBpcyB3b3J0aCB0aGUgdHJvdWJsZS4gVGhlIHBheW9mZlxuICogY29tZXMgaW4gdGhlIHdheSBvZiBndWFyYW50ZWVzIHRoYXQgcHJvbWlzZSBhbmQgZGVmZXJyZWQgQVBJcyBtYWtlLCBzZWVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvdW5jb21tb25qcy9ibG9iL21hc3Rlci9wcm9taXNlcy9zcGVjaWZpY2F0aW9uLm1kLlxuICpcbiAqIEFkZGl0aW9uYWxseSB0aGUgcHJvbWlzZSBhcGkgYWxsb3dzIGZvciBjb21wb3NpdGlvbiB0aGF0IGlzIHZlcnkgaGFyZCB0byBkbyB3aXRoIHRoZVxuICogdHJhZGl0aW9uYWwgY2FsbGJhY2sgKFtDUFNdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29udGludWF0aW9uLXBhc3Npbmdfc3R5bGUpKSBhcHByb2FjaC5cbiAqIEZvciBtb3JlIG9uIHRoaXMgcGxlYXNlIHNlZSB0aGUgW1EgZG9jdW1lbnRhdGlvbl0oaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xKSBlc3BlY2lhbGx5IHRoZVxuICogc2VjdGlvbiBvbiBzZXJpYWwgb3IgcGFyYWxsZWwgam9pbmluZyBvZiBwcm9taXNlcy5cbiAqXG4gKiAjIyBUaGUgRGVmZXJyZWQgQVBJXG4gKlxuICogQSBuZXcgaW5zdGFuY2Ugb2YgZGVmZXJyZWQgaXMgY29uc3RydWN0ZWQgYnkgY2FsbGluZyBgJHEuZGVmZXIoKWAuXG4gKlxuICogVGhlIHB1cnBvc2Ugb2YgdGhlIGRlZmVycmVkIG9iamVjdCBpcyB0byBleHBvc2UgdGhlIGFzc29jaWF0ZWQgUHJvbWlzZSBpbnN0YW5jZSBhcyB3ZWxsIGFzIEFQSXNcbiAqIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHNpZ25hbGluZyB0aGUgc3VjY2Vzc2Z1bCBvciB1bnN1Y2Nlc3NmdWwgY29tcGxldGlvbiwgYXMgd2VsbCBhcyB0aGUgc3RhdHVzXG4gKiBvZiB0aGUgdGFzay5cbiAqXG4gKiAqKk1ldGhvZHMqKlxuICpcbiAqIC0gYHJlc29sdmUodmFsdWUpYCDigJMgcmVzb2x2ZXMgdGhlIGRlcml2ZWQgcHJvbWlzZSB3aXRoIHRoZSBgdmFsdWVgLiBJZiB0aGUgdmFsdWUgaXMgYSByZWplY3Rpb25cbiAqICAgY29uc3RydWN0ZWQgdmlhIGAkcS5yZWplY3RgLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIGluc3RlYWQuXG4gKiAtIGByZWplY3QocmVhc29uKWAg4oCTIHJlamVjdHMgdGhlIGRlcml2ZWQgcHJvbWlzZSB3aXRoIHRoZSBgcmVhc29uYC4gVGhpcyBpcyBlcXVpdmFsZW50IHRvXG4gKiAgIHJlc29sdmluZyBpdCB3aXRoIGEgcmVqZWN0aW9uIGNvbnN0cnVjdGVkIHZpYSBgJHEucmVqZWN0YC5cbiAqIC0gYG5vdGlmeSh2YWx1ZSlgIC0gcHJvdmlkZXMgdXBkYXRlcyBvbiB0aGUgc3RhdHVzIG9mIHRoZSBwcm9taXNlJ3MgZXhlY3V0aW9uLiBUaGlzIG1heSBiZSBjYWxsZWRcbiAqICAgbXVsdGlwbGUgdGltZXMgYmVmb3JlIHRoZSBwcm9taXNlIGlzIGVpdGhlciByZXNvbHZlZCBvciByZWplY3RlZC5cbiAqXG4gKiAqKlByb3BlcnRpZXMqKlxuICpcbiAqIC0gcHJvbWlzZSDigJMgYHtQcm9taXNlfWAg4oCTIHByb21pc2Ugb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGRlZmVycmVkLlxuICpcbiAqXG4gKiAjIyBUaGUgUHJvbWlzZSBBUElcbiAqXG4gKiBBIG5ldyBwcm9taXNlIGluc3RhbmNlIGlzIGNyZWF0ZWQgd2hlbiBhIGRlZmVycmVkIGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIGNhbiBiZSByZXRyaWV2ZWQgYnlcbiAqIGNhbGxpbmcgYGRlZmVycmVkLnByb21pc2VgLlxuICpcbiAqIFRoZSBwdXJwb3NlIG9mIHRoZSBwcm9taXNlIG9iamVjdCBpcyB0byBhbGxvdyBmb3IgaW50ZXJlc3RlZCBwYXJ0aWVzIHRvIGdldCBhY2Nlc3MgdG8gdGhlIHJlc3VsdFxuICogb2YgdGhlIGRlZmVycmVkIHRhc2sgd2hlbiBpdCBjb21wbGV0ZXMuXG4gKlxuICogKipNZXRob2RzKipcbiAqXG4gKiAtIGB0aGVuKHN1Y2Nlc3NDYWxsYmFjaywgW2Vycm9yQ2FsbGJhY2tdLCBbbm90aWZ5Q2FsbGJhY2tdKWAg4oCTIHJlZ2FyZGxlc3Mgb2Ygd2hlbiB0aGUgcHJvbWlzZSB3YXMgb3JcbiAqICAgd2lsbCBiZSByZXNvbHZlZCBvciByZWplY3RlZCwgYHRoZW5gIGNhbGxzIG9uZSBvZiB0aGUgc3VjY2VzcyBvciBlcnJvciBjYWxsYmFja3MgYXN5bmNocm9ub3VzbHlcbiAqICAgYXMgc29vbiBhcyB0aGUgcmVzdWx0IGlzIGF2YWlsYWJsZS4gVGhlIGNhbGxiYWNrcyBhcmUgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQ6IHRoZSByZXN1bHRcbiAqICAgb3IgcmVqZWN0aW9uIHJlYXNvbi4gQWRkaXRpb25hbGx5LCB0aGUgbm90aWZ5IGNhbGxiYWNrIG1heSBiZSBjYWxsZWQgemVybyBvciBtb3JlIHRpbWVzIHRvXG4gKiAgIHByb3ZpZGUgYSBwcm9ncmVzcyBpbmRpY2F0aW9uLCBiZWZvcmUgdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXG4gKlxuICogICBUaGlzIG1ldGhvZCAqcmV0dXJucyBhIG5ldyBwcm9taXNlKiB3aGljaCBpcyByZXNvbHZlZCBvciByZWplY3RlZCB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGVcbiAqICAgYHN1Y2Nlc3NDYWxsYmFja2AsIGBlcnJvckNhbGxiYWNrYCAodW5sZXNzIHRoYXQgdmFsdWUgaXMgYSBwcm9taXNlLCBpbiB3aGljaCBjYXNlIGl0IGlzIHJlc29sdmVkXG4gKiAgIHdpdGggdGhlIHZhbHVlIHdoaWNoIGlzIHJlc29sdmVkIGluIHRoYXQgcHJvbWlzZSB1c2luZ1xuICogICBbcHJvbWlzZSBjaGFpbmluZ10oaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZXM2L3Byb21pc2VzLyN0b2MtcHJvbWlzZXMtcXVldWVzKSkuXG4gKiAgIEl0IGFsc28gbm90aWZpZXMgdmlhIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBub3RpZnlDYWxsYmFja2AgbWV0aG9kLiBUaGUgcHJvbWlzZSBjYW5ub3QgYmVcbiAqICAgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgZnJvbSB0aGUgbm90aWZ5Q2FsbGJhY2sgbWV0aG9kLiBUaGUgZXJyb3JDYWxsYmFjayBhbmQgbm90aWZ5Q2FsbGJhY2tcbiAqICAgYXJndW1lbnRzIGFyZSBvcHRpb25hbC5cbiAqXG4gKiAtIGBjYXRjaChlcnJvckNhbGxiYWNrKWAg4oCTIHNob3J0aGFuZCBmb3IgYHByb21pc2UudGhlbihudWxsLCBlcnJvckNhbGxiYWNrKWBcbiAqXG4gKiAtIGBmaW5hbGx5KGNhbGxiYWNrLCBub3RpZnlDYWxsYmFjaylgIOKAkyBhbGxvd3MgeW91IHRvIG9ic2VydmUgZWl0aGVyIHRoZSBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gb2YgYSBwcm9taXNlLFxuICogICBidXQgdG8gZG8gc28gd2l0aG91dCBtb2RpZnlpbmcgdGhlIGZpbmFsIHZhbHVlLiBUaGlzIGlzIHVzZWZ1bCB0byByZWxlYXNlIHJlc291cmNlcyBvciBkbyBzb21lXG4gKiAgIGNsZWFuLXVwIHRoYXQgbmVlZHMgdG8gYmUgZG9uZSB3aGV0aGVyIHRoZSBwcm9taXNlIHdhcyByZWplY3RlZCBvciByZXNvbHZlZC4gU2VlIHRoZSBbZnVsbFxuICogICBzcGVjaWZpY2F0aW9uXShodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3Evd2lraS9BUEktUmVmZXJlbmNlI3Byb21pc2VmaW5hbGx5Y2FsbGJhY2spIGZvclxuICogICBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqICMjIENoYWluaW5nIHByb21pc2VzXG4gKlxuICogQmVjYXVzZSBjYWxsaW5nIHRoZSBgdGhlbmAgbWV0aG9kIG9mIGEgcHJvbWlzZSByZXR1cm5zIGEgbmV3IGRlcml2ZWQgcHJvbWlzZSwgaXQgaXMgZWFzaWx5XG4gKiBwb3NzaWJsZSB0byBjcmVhdGUgYSBjaGFpbiBvZiBwcm9taXNlczpcbiAqXG4gKiBgYGBqc1xuICogICBwcm9taXNlQiA9IHByb21pc2VBLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gKiAgICAgcmV0dXJuIHJlc3VsdCArIDE7XG4gKiAgIH0pO1xuICpcbiAqICAgLy8gcHJvbWlzZUIgd2lsbCBiZSByZXNvbHZlZCBpbW1lZGlhdGVseSBhZnRlciBwcm9taXNlQSBpcyByZXNvbHZlZCBhbmQgaXRzIHZhbHVlXG4gKiAgIC8vIHdpbGwgYmUgdGhlIHJlc3VsdCBvZiBwcm9taXNlQSBpbmNyZW1lbnRlZCBieSAxXG4gKiBgYGBcbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBjcmVhdGUgY2hhaW5zIG9mIGFueSBsZW5ndGggYW5kIHNpbmNlIGEgcHJvbWlzZSBjYW4gYmUgcmVzb2x2ZWQgd2l0aCBhbm90aGVyXG4gKiBwcm9taXNlICh3aGljaCB3aWxsIGRlZmVyIGl0cyByZXNvbHV0aW9uIGZ1cnRoZXIpLCBpdCBpcyBwb3NzaWJsZSB0byBwYXVzZS9kZWZlciByZXNvbHV0aW9uIG9mXG4gKiB0aGUgcHJvbWlzZXMgYXQgYW55IHBvaW50IGluIHRoZSBjaGFpbi4gVGhpcyBtYWtlcyBpdCBwb3NzaWJsZSB0byBpbXBsZW1lbnQgcG93ZXJmdWwgQVBJcyBsaWtlXG4gKiAkaHR0cCdzIHJlc3BvbnNlIGludGVyY2VwdG9ycy5cbiAqXG4gKlxuICogIyMgRGlmZmVyZW5jZXMgYmV0d2VlbiBLcmlzIEtvd2FsJ3MgUSBhbmQgJHFcbiAqXG4gKiAgVGhlcmUgYXJlIHR3byBtYWluIGRpZmZlcmVuY2VzOlxuICpcbiAqIC0gJHEgaXMgaW50ZWdyYXRlZCB3aXRoIHRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZX0gU2NvcGUgbW9kZWwgb2JzZXJ2YXRpb25cbiAqICAgbWVjaGFuaXNtIGluIGFuZ3VsYXIsIHdoaWNoIG1lYW5zIGZhc3RlciBwcm9wYWdhdGlvbiBvZiByZXNvbHV0aW9uIG9yIHJlamVjdGlvbiBpbnRvIHlvdXJcbiAqICAgbW9kZWxzIGFuZCBhdm9pZGluZyB1bm5lY2Vzc2FyeSBicm93c2VyIHJlcGFpbnRzLCB3aGljaCB3b3VsZCByZXN1bHQgaW4gZmxpY2tlcmluZyBVSS5cbiAqIC0gUSBoYXMgbWFueSBtb3JlIGZlYXR1cmVzIHRoYW4gJHEsIGJ1dCB0aGF0IGNvbWVzIGF0IGEgY29zdCBvZiBieXRlcy4gJHEgaXMgdGlueSwgYnV0IGNvbnRhaW5zXG4gKiAgIGFsbCB0aGUgaW1wb3J0YW50IGZ1bmN0aW9uYWxpdHkgbmVlZGVkIGZvciBjb21tb24gYXN5bmMgdGFza3MuXG4gKlxuICogIyMgVGVzdGluZ1xuICpcbiAqICBgYGBqc1xuICogICAgaXQoJ3Nob3VsZCBzaW11bGF0ZSBwcm9taXNlJywgaW5qZWN0KGZ1bmN0aW9uKCRxLCAkcm9vdFNjb3BlKSB7XG4gKiAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gKiAgICAgIHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcbiAqICAgICAgdmFyIHJlc29sdmVkVmFsdWU7XG4gKlxuICogICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHsgcmVzb2x2ZWRWYWx1ZSA9IHZhbHVlOyB9KTtcbiAqICAgICAgZXhwZWN0KHJlc29sdmVkVmFsdWUpLnRvQmVVbmRlZmluZWQoKTtcbiAqXG4gKiAgICAgIC8vIFNpbXVsYXRlIHJlc29sdmluZyBvZiBwcm9taXNlXG4gKiAgICAgIGRlZmVycmVkLnJlc29sdmUoMTIzKTtcbiAqICAgICAgLy8gTm90ZSB0aGF0IHRoZSAndGhlbicgZnVuY3Rpb24gZG9lcyBub3QgZ2V0IGNhbGxlZCBzeW5jaHJvbm91c2x5LlxuICogICAgICAvLyBUaGlzIGlzIGJlY2F1c2Ugd2Ugd2FudCB0aGUgcHJvbWlzZSBBUEkgdG8gYWx3YXlzIGJlIGFzeW5jLCB3aGV0aGVyIG9yIG5vdFxuICogICAgICAvLyBpdCBnb3QgY2FsbGVkIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3VzbHkuXG4gKiAgICAgIGV4cGVjdChyZXNvbHZlZFZhbHVlKS50b0JlVW5kZWZpbmVkKCk7XG4gKlxuICogICAgICAvLyBQcm9wYWdhdGUgcHJvbWlzZSByZXNvbHV0aW9uIHRvICd0aGVuJyBmdW5jdGlvbnMgdXNpbmcgJGFwcGx5KCkuXG4gKiAgICAgICRyb290U2NvcGUuJGFwcGx5KCk7XG4gKiAgICAgIGV4cGVjdChyZXNvbHZlZFZhbHVlKS50b0VxdWFsKDEyMyk7XG4gKiAgICB9KSk7XG4gKiAgYGBgXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbiwgZnVuY3Rpb24pfSByZXNvbHZlciBGdW5jdGlvbiB3aGljaCBpcyByZXNwb25zaWJsZSBmb3IgcmVzb2x2aW5nIG9yXG4gKiAgIHJlamVjdGluZyB0aGUgbmV3bHkgY3JlYXRlZCBwcm9taXNlLiBUaGUgZmlyc3QgcGFyYW1ldGVyIGlzIGEgZnVuY3Rpb24gd2hpY2ggcmVzb2x2ZXMgdGhlXG4gKiAgIHByb21pc2UsIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIGEgZnVuY3Rpb24gd2hpY2ggcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIG5ld2x5IGNyZWF0ZWQgcHJvbWlzZS5cbiAqL1xuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRxUHJvdmlkZXJcbiAqIEB0aGlzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKi9cbmZ1bmN0aW9uICRRUHJvdmlkZXIoKSB7XG4gIHZhciBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHRydWU7XG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckZXhjZXB0aW9uSGFuZGxlcicsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRleGNlcHRpb25IYW5kbGVyKSB7XG4gICAgcmV0dXJuIHFGYWN0b3J5KGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoY2FsbGJhY2spO1xuICAgIH0sICRleGNlcHRpb25IYW5kbGVyLCBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyk7XG4gIH1dO1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxUHJvdmlkZXIjZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnNcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgd2hldGhlciB0byBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGEgcmVqZWN0ZWQgcHJvbWlzZSBpcyBub3QgaGFuZGxlZC5cbiAgICogVGhpcyBmZWF0dXJlIGlzIGVuYWJsZWQgYnkgZGVmYXVsdC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFuPX0gdmFsdWUgV2hldGhlciB0byBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGEgcmVqZWN0ZWQgcHJvbWlzZSBpcyBub3QgaGFuZGxlZC5cbiAgICogQHJldHVybnMge2Jvb2xlYW58bmcuJHFQcm92aWRlcn0gQ3VycmVudCB2YWx1ZSB3aGVuIGNhbGxlZCB3aXRob3V0IGEgbmV3IHZhbHVlIG9yIHNlbGYgZm9yXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cbiAgICovXG4gIHRoaXMuZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChpc0RlZmluZWQodmFsdWUpKSB7XG4gICAgICBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucztcbiAgICB9XG4gIH07XG59XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJCRRUHJvdmlkZXIoKSB7XG4gIHZhciBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHRydWU7XG4gIHRoaXMuJGdldCA9IFsnJGJyb3dzZXInLCAnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbigkYnJvd3NlciwgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcbiAgICByZXR1cm4gcUZhY3RvcnkoZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRicm93c2VyLmRlZmVyKGNhbGxiYWNrKTtcbiAgICB9LCAkZXhjZXB0aW9uSGFuZGxlciwgZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMpO1xuICB9XTtcblxuICB0aGlzLmVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSkge1xuICAgICAgZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnM7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBwcm9taXNlIG1hbmFnZXIuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbil9IG5leHRUaWNrIEZ1bmN0aW9uIGZvciBleGVjdXRpbmcgZnVuY3Rpb25zIGluIHRoZSBuZXh0IHR1cm4uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLiopfSBleGNlcHRpb25IYW5kbGVyIEZ1bmN0aW9uIGludG8gd2hpY2ggdW5leHBlY3RlZCBleGNlcHRpb25zIGFyZSBwYXNzZWQgZm9yXG4gKiAgICAgZGVidWdnaW5nIHB1cnBvc2VzLlxuICogQHBhcmFtIHtib29sZWFuPX0gZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMgV2hldGhlciBhbiBlcnJvciBzaG91bGQgYmUgZ2VuZXJhdGVkIG9uIHVuaGFuZGxlZFxuICogICAgIHByb21pc2VzIHJlamVjdGlvbnMuXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBQcm9taXNlIG1hbmFnZXIuXG4gKi9cbmZ1bmN0aW9uIHFGYWN0b3J5KG5leHRUaWNrLCBleGNlcHRpb25IYW5kbGVyLCBlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucykge1xuICB2YXIgJHFNaW5FcnIgPSBtaW5FcnIoJyRxJywgVHlwZUVycm9yKTtcbiAgdmFyIHF1ZXVlU2l6ZSA9IDA7XG4gIHZhciBjaGVja1F1ZXVlID0gW107XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmcuJHEjZGVmZXJcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYSBgRGVmZXJyZWRgIG9iamVjdCB3aGljaCByZXByZXNlbnRzIGEgdGFzayB3aGljaCB3aWxsIGZpbmlzaCBpbiB0aGUgZnV0dXJlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7RGVmZXJyZWR9IFJldHVybnMgYSBuZXcgaW5zdGFuY2Ugb2YgZGVmZXJyZWQuXG4gICAqL1xuICBmdW5jdGlvbiBkZWZlcigpIHtcbiAgICByZXR1cm4gbmV3IERlZmVycmVkKCk7XG4gIH1cblxuICBmdW5jdGlvbiBEZWZlcnJlZCgpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCk7XG4gICAgLy9Ob24gcHJvdG90eXBlIG1ldGhvZHMgbmVjZXNzYXJ5IHRvIHN1cHBvcnQgdW5ib3VuZCBleGVjdXRpb24gOi9cbiAgICB0aGlzLnJlc29sdmUgPSBmdW5jdGlvbih2YWwpIHsgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgdmFsKTsgfTtcbiAgICB0aGlzLnJlamVjdCA9IGZ1bmN0aW9uKHJlYXNvbikgeyByZWplY3RQcm9taXNlKHByb21pc2UsIHJlYXNvbik7IH07XG4gICAgdGhpcy5ub3RpZnkgPSBmdW5jdGlvbihwcm9ncmVzcykgeyBub3RpZnlQcm9taXNlKHByb21pc2UsIHByb2dyZXNzKTsgfTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gUHJvbWlzZSgpIHtcbiAgICB0aGlzLiQkc3RhdGUgPSB7IHN0YXR1czogMCB9O1xuICB9XG5cbiAgZXh0ZW5kKFByb21pc2UucHJvdG90eXBlLCB7XG4gICAgdGhlbjogZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb2dyZXNzQmFjaykge1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKG9uRnVsZmlsbGVkKSAmJiBpc1VuZGVmaW5lZChvblJlamVjdGVkKSAmJiBpc1VuZGVmaW5lZChwcm9ncmVzc0JhY2spKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBQcm9taXNlKCk7XG5cbiAgICAgIHRoaXMuJCRzdGF0ZS5wZW5kaW5nID0gdGhpcy4kJHN0YXRlLnBlbmRpbmcgfHwgW107XG4gICAgICB0aGlzLiQkc3RhdGUucGVuZGluZy5wdXNoKFtyZXN1bHQsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBwcm9ncmVzc0JhY2tdKTtcbiAgICAgIGlmICh0aGlzLiQkc3RhdGUuc3RhdHVzID4gMCkgc2NoZWR1bGVQcm9jZXNzUXVldWUodGhpcy4kJHN0YXRlKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgJ2NhdGNoJzogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgY2FsbGJhY2spO1xuICAgIH0sXG5cbiAgICAnZmluYWxseSc6IGZ1bmN0aW9uKGNhbGxiYWNrLCBwcm9ncmVzc0JhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZUNhbGxiYWNrKHZhbHVlLCByZXNvbHZlLCBjYWxsYmFjayk7XG4gICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICByZXR1cm4gaGFuZGxlQ2FsbGJhY2soZXJyb3IsIHJlamVjdCwgY2FsbGJhY2spO1xuICAgICAgfSwgcHJvZ3Jlc3NCYWNrKTtcbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHByb2Nlc3NRdWV1ZShzdGF0ZSkge1xuICAgIHZhciBmbiwgcHJvbWlzZSwgcGVuZGluZztcblxuICAgIHBlbmRpbmcgPSBzdGF0ZS5wZW5kaW5nO1xuICAgIHN0YXRlLnByb2Nlc3NTY2hlZHVsZWQgPSBmYWxzZTtcbiAgICBzdGF0ZS5wZW5kaW5nID0gdW5kZWZpbmVkO1xuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwZW5kaW5nLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgbWFya1FTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQoc3RhdGUpO1xuICAgICAgICBwcm9taXNlID0gcGVuZGluZ1tpXVswXTtcbiAgICAgICAgZm4gPSBwZW5kaW5nW2ldW3N0YXRlLnN0YXR1c107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgICByZXNvbHZlUHJvbWlzZShwcm9taXNlLCBmbihzdGF0ZS52YWx1ZSkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUuc3RhdHVzID09PSAxKSB7XG4gICAgICAgICAgICByZXNvbHZlUHJvbWlzZShwcm9taXNlLCBzdGF0ZS52YWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdFByb21pc2UocHJvbWlzZSwgc3RhdGUudmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJlamVjdFByb21pc2UocHJvbWlzZSwgZSk7XG4gICAgICAgICAgLy8gVGhpcyBlcnJvciBpcyBleHBsaWNpdGx5IG1hcmtlZCBmb3IgYmVpbmcgcGFzc2VkIHRvIHRoZSAkZXhjZXB0aW9uSGFuZGxlclxuICAgICAgICAgIGlmIChlICYmIGUuJCRwYXNzVG9FeGNlcHRpb25IYW5kbGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICBleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICAtLXF1ZXVlU2l6ZTtcbiAgICAgIGlmIChlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyAmJiBxdWV1ZVNpemUgPT09IDApIHtcbiAgICAgICAgbmV4dFRpY2socHJvY2Vzc0NoZWNrcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc0NoZWNrcygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5tb2RpZmllZC1sb29wLWNvbmRpdGlvblxuICAgIHdoaWxlICghcXVldWVTaXplICYmIGNoZWNrUXVldWUubGVuZ3RoKSB7XG4gICAgICB2YXIgdG9DaGVjayA9IGNoZWNrUXVldWUuc2hpZnQoKTtcbiAgICAgIGlmICghaXNTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQodG9DaGVjaykpIHtcbiAgICAgICAgbWFya1FTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQodG9DaGVjayk7XG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAnUG9zc2libHkgdW5oYW5kbGVkIHJlamVjdGlvbjogJyArIHRvRGVidWdTdHJpbmcodG9DaGVjay52YWx1ZSk7XG4gICAgICAgIGlmIChpc0Vycm9yKHRvQ2hlY2sudmFsdWUpKSB7XG4gICAgICAgICAgZXhjZXB0aW9uSGFuZGxlcih0b0NoZWNrLnZhbHVlLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHN0YXRlKSB7XG4gICAgaWYgKGVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zICYmICFzdGF0ZS5wZW5kaW5nICYmIHN0YXRlLnN0YXR1cyA9PT0gMiAmJiAhaXNTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQoc3RhdGUpKSB7XG4gICAgICBpZiAocXVldWVTaXplID09PSAwICYmIGNoZWNrUXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG5leHRUaWNrKHByb2Nlc3NDaGVja3MpO1xuICAgICAgfVxuICAgICAgY2hlY2tRdWV1ZS5wdXNoKHN0YXRlKTtcbiAgICB9XG4gICAgaWYgKHN0YXRlLnByb2Nlc3NTY2hlZHVsZWQgfHwgIXN0YXRlLnBlbmRpbmcpIHJldHVybjtcbiAgICBzdGF0ZS5wcm9jZXNzU2NoZWR1bGVkID0gdHJ1ZTtcbiAgICArK3F1ZXVlU2l6ZTtcbiAgICBuZXh0VGljayhmdW5jdGlvbigpIHsgcHJvY2Vzc1F1ZXVlKHN0YXRlKTsgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNvbHZlUHJvbWlzZShwcm9taXNlLCB2YWwpIHtcbiAgICBpZiAocHJvbWlzZS4kJHN0YXRlLnN0YXR1cykgcmV0dXJuO1xuICAgIGlmICh2YWwgPT09IHByb21pc2UpIHtcbiAgICAgICQkcmVqZWN0KHByb21pc2UsICRxTWluRXJyKFxuICAgICAgICAncWN5Y2xlJyxcbiAgICAgICAgJ0V4cGVjdGVkIHByb21pc2UgdG8gYmUgcmVzb2x2ZWQgd2l0aCB2YWx1ZSBvdGhlciB0aGFuIGl0c2VsZiBcXCd7MH1cXCcnLFxuICAgICAgICB2YWwpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCRyZXNvbHZlKHByb21pc2UsIHZhbCk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiAkJHJlc29sdmUocHJvbWlzZSwgdmFsKSB7XG4gICAgdmFyIHRoZW47XG4gICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgaWYgKGlzT2JqZWN0KHZhbCkgfHwgaXNGdW5jdGlvbih2YWwpKSB0aGVuID0gdmFsLnRoZW47XG4gICAgICBpZiAoaXNGdW5jdGlvbih0aGVuKSkge1xuICAgICAgICBwcm9taXNlLiQkc3RhdGUuc3RhdHVzID0gLTE7XG4gICAgICAgIHRoZW4uY2FsbCh2YWwsIGRvUmVzb2x2ZSwgZG9SZWplY3QsIGRvTm90aWZ5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2UuJCRzdGF0ZS52YWx1ZSA9IHZhbDtcbiAgICAgICAgcHJvbWlzZS4kJHN0YXRlLnN0YXR1cyA9IDE7XG4gICAgICAgIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHByb21pc2UuJCRzdGF0ZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZG9SZWplY3QoZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZG9SZXNvbHZlKHZhbCkge1xuICAgICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgJCRyZXNvbHZlKHByb21pc2UsIHZhbCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRvUmVqZWN0KHZhbCkge1xuICAgICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgJCRyZWplY3QocHJvbWlzZSwgdmFsKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZG9Ob3RpZnkocHJvZ3Jlc3MpIHtcbiAgICAgIG5vdGlmeVByb21pc2UocHJvbWlzZSwgcHJvZ3Jlc3MpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgaWYgKHByb21pc2UuJCRzdGF0ZS5zdGF0dXMpIHJldHVybjtcbiAgICAkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICB9XG5cbiAgZnVuY3Rpb24gJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgcHJvbWlzZS4kJHN0YXRlLnZhbHVlID0gcmVhc29uO1xuICAgIHByb21pc2UuJCRzdGF0ZS5zdGF0dXMgPSAyO1xuICAgIHNjaGVkdWxlUHJvY2Vzc1F1ZXVlKHByb21pc2UuJCRzdGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlQcm9taXNlKHByb21pc2UsIHByb2dyZXNzKSB7XG4gICAgdmFyIGNhbGxiYWNrcyA9IHByb21pc2UuJCRzdGF0ZS5wZW5kaW5nO1xuXG4gICAgaWYgKChwcm9taXNlLiQkc3RhdGUuc3RhdHVzIDw9IDApICYmIGNhbGxiYWNrcyAmJiBjYWxsYmFja3MubGVuZ3RoKSB7XG4gICAgICBuZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrLCByZXN1bHQ7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgcmVzdWx0ID0gY2FsbGJhY2tzW2ldWzBdO1xuICAgICAgICAgIGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldWzNdO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBub3RpZnlQcm9taXNlKHJlc3VsdCwgaXNGdW5jdGlvbihjYWxsYmFjaykgPyBjYWxsYmFjayhwcm9ncmVzcykgOiBwcm9ncmVzcyk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRxI3JlamVjdFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCBhcyByZWplY3RlZCB3aXRoIHRoZSBzcGVjaWZpZWQgYHJlYXNvbmAuIFRoaXMgYXBpIHNob3VsZCBiZVxuICAgKiB1c2VkIHRvIGZvcndhcmQgcmVqZWN0aW9uIGluIGEgY2hhaW4gb2YgcHJvbWlzZXMuIElmIHlvdSBhcmUgZGVhbGluZyB3aXRoIHRoZSBsYXN0IHByb21pc2UgaW5cbiAgICogYSBwcm9taXNlIGNoYWluLCB5b3UgZG9uJ3QgbmVlZCB0byB3b3JyeSBhYm91dCBpdC5cbiAgICpcbiAgICogV2hlbiBjb21wYXJpbmcgZGVmZXJyZWRzL3Byb21pc2VzIHRvIHRoZSBmYW1pbGlhciBiZWhhdmlvciBvZiB0cnkvY2F0Y2gvdGhyb3csIHRoaW5rIG9mXG4gICAqIGByZWplY3RgIGFzIHRoZSBgdGhyb3dgIGtleXdvcmQgaW4gSmF2YVNjcmlwdC4gVGhpcyBhbHNvIG1lYW5zIHRoYXQgaWYgeW91IFwiY2F0Y2hcIiBhbiBlcnJvciB2aWFcbiAgICogYSBwcm9taXNlIGVycm9yIGNhbGxiYWNrIGFuZCB5b3Ugd2FudCB0byBmb3J3YXJkIHRoZSBlcnJvciB0byB0aGUgcHJvbWlzZSBkZXJpdmVkIGZyb20gdGhlXG4gICAqIGN1cnJlbnQgcHJvbWlzZSwgeW91IGhhdmUgdG8gXCJyZXRocm93XCIgdGhlIGVycm9yIGJ5IHJldHVybmluZyBhIHJlamVjdGlvbiBjb25zdHJ1Y3RlZCB2aWFcbiAgICogYHJlamVjdGAuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqICAgcHJvbWlzZUIgPSBwcm9taXNlQS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgKiAgICAgLy8gc3VjY2VzczogZG8gc29tZXRoaW5nIGFuZCByZXNvbHZlIHByb21pc2VCXG4gICAqICAgICAvLyAgICAgICAgICB3aXRoIHRoZSBvbGQgb3IgYSBuZXcgcmVzdWx0XG4gICAqICAgICByZXR1cm4gcmVzdWx0O1xuICAgKiAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgKiAgICAgLy8gZXJyb3I6IGhhbmRsZSB0aGUgZXJyb3IgaWYgcG9zc2libGUgYW5kXG4gICAqICAgICAvLyAgICAgICAgcmVzb2x2ZSBwcm9taXNlQiB3aXRoIG5ld1Byb21pc2VPclZhbHVlLFxuICAgKiAgICAgLy8gICAgICAgIG90aGVyd2lzZSBmb3J3YXJkIHRoZSByZWplY3Rpb24gdG8gcHJvbWlzZUJcbiAgICogICAgIGlmIChjYW5IYW5kbGUocmVhc29uKSkge1xuICAgKiAgICAgIC8vIGhhbmRsZSB0aGUgZXJyb3IgYW5kIHJlY292ZXJcbiAgICogICAgICByZXR1cm4gbmV3UHJvbWlzZU9yVmFsdWU7XG4gICAqICAgICB9XG4gICAqICAgICByZXR1cm4gJHEucmVqZWN0KHJlYXNvbik7XG4gICAqICAgfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0geyp9IHJlYXNvbiBDb25zdGFudCwgbWVzc2FnZSwgZXhjZXB0aW9uIG9yIGFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHJlamVjdGlvbiByZWFzb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdhcyBhbHJlYWR5IHJlc29sdmVkIGFzIHJlamVjdGVkIHdpdGggdGhlIGByZWFzb25gLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgIHZhciByZXN1bHQgPSBuZXcgUHJvbWlzZSgpO1xuICAgIHJlamVjdFByb21pc2UocmVzdWx0LCByZWFzb24pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVDYWxsYmFjayh2YWx1ZSwgcmVzb2x2ZXIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGNhbGxiYWNrT3V0cHV0ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSBjYWxsYmFja091dHB1dCA9IGNhbGxiYWNrKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHJlamVjdChlKTtcbiAgICB9XG4gICAgaWYgKGlzUHJvbWlzZUxpa2UoY2FsbGJhY2tPdXRwdXQpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2tPdXRwdXQudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyKHZhbHVlKTtcbiAgICAgIH0sIHJlamVjdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXNvbHZlcih2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHEjd2hlblxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogV3JhcHMgYW4gb2JqZWN0IHRoYXQgbWlnaHQgYmUgYSB2YWx1ZSBvciBhICgzcmQgcGFydHkpIHRoZW4tYWJsZSBwcm9taXNlIGludG8gYSAkcSBwcm9taXNlLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHlvdSBhcmUgZGVhbGluZyB3aXRoIGFuIG9iamVjdCB0aGF0IG1pZ2h0IG9yIG1pZ2h0IG5vdCBiZSBhIHByb21pc2UsIG9yIGlmXG4gICAqIHRoZSBwcm9taXNlIGNvbWVzIGZyb20gYSBzb3VyY2UgdGhhdCBjYW4ndCBiZSB0cnVzdGVkLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIG9yIGEgcHJvbWlzZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gc3VjY2Vzc0NhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBlcnJvckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBwcm9ncmVzc0NhbGxiYWNrXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgcHJvbWlzZSBvZiB0aGUgcGFzc2VkIHZhbHVlIG9yIHByb21pc2VcbiAgICovXG5cblxuICBmdW5jdGlvbiB3aGVuKHZhbHVlLCBjYWxsYmFjaywgZXJyYmFjaywgcHJvZ3Jlc3NCYWNrKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBQcm9taXNlKCk7XG4gICAgcmVzb2x2ZVByb21pc2UocmVzdWx0LCB2YWx1ZSk7XG4gICAgcmV0dXJuIHJlc3VsdC50aGVuKGNhbGxiYWNrLCBlcnJiYWNrLCBwcm9ncmVzc0JhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHEjcmVzb2x2ZVxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQWxpYXMgb2Yge0BsaW5rIG5nLiRxI3doZW4gd2hlbn0gdG8gbWFpbnRhaW4gbmFtaW5nIGNvbnNpc3RlbmN5IHdpdGggRVM2LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIG9yIGEgcHJvbWlzZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gc3VjY2Vzc0NhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBlcnJvckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBwcm9ncmVzc0NhbGxiYWNrXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgcHJvbWlzZSBvZiB0aGUgcGFzc2VkIHZhbHVlIG9yIHByb21pc2VcbiAgICovXG4gIHZhciByZXNvbHZlID0gd2hlbjtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkcSNhbGxcbiAgICogQGtpbmQgZnVuY3Rpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENvbWJpbmVzIG11bHRpcGxlIHByb21pc2VzIGludG8gYSBzaW5nbGUgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gYWxsIG9mIHRoZSBpbnB1dFxuICAgKiBwcm9taXNlcyBhcmUgcmVzb2x2ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXkuPFByb21pc2U+fE9iamVjdC48UHJvbWlzZT59IHByb21pc2VzIEFuIGFycmF5IG9yIGhhc2ggb2YgcHJvbWlzZXMuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBSZXR1cm5zIGEgc2luZ2xlIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggYW4gYXJyYXkvaGFzaCBvZiB2YWx1ZXMsXG4gICAqICAgZWFjaCB2YWx1ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm9taXNlIGF0IHRoZSBzYW1lIGluZGV4L2tleSBpbiB0aGUgYHByb21pc2VzYCBhcnJheS9oYXNoLlxuICAgKiAgIElmIGFueSBvZiB0aGUgcHJvbWlzZXMgaXMgcmVzb2x2ZWQgd2l0aCBhIHJlamVjdGlvbiwgdGhpcyByZXN1bHRpbmcgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkXG4gICAqICAgd2l0aCB0aGUgc2FtZSByZWplY3Rpb24gdmFsdWUuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuICAgIHZhciByZXN1bHQgPSBuZXcgUHJvbWlzZSgpLFxuICAgICAgICBjb3VudGVyID0gMCxcbiAgICAgICAgcmVzdWx0cyA9IGlzQXJyYXkocHJvbWlzZXMpID8gW10gOiB7fTtcblxuICAgIGZvckVhY2gocHJvbWlzZXMsIGZ1bmN0aW9uKHByb21pc2UsIGtleSkge1xuICAgICAgY291bnRlcisrO1xuICAgICAgd2hlbihwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJlc3VsdHNba2V5XSA9IHZhbHVlO1xuICAgICAgICBpZiAoISgtLWNvdW50ZXIpKSByZXNvbHZlUHJvbWlzZShyZXN1bHQsIHJlc3VsdHMpO1xuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIHJlamVjdFByb21pc2UocmVzdWx0LCByZWFzb24pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoY291bnRlciA9PT0gMCkge1xuICAgICAgcmVzb2x2ZVByb21pc2UocmVzdWx0LCByZXN1bHRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHEjcmFjZVxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvciByZWplY3RzIGFzIHNvb24gYXMgb25lIG9mIHRob3NlIHByb21pc2VzXG4gICAqIHJlc29sdmVzIG9yIHJlamVjdHMsIHdpdGggdGhlIHZhbHVlIG9yIHJlYXNvbiBmcm9tIHRoYXQgcHJvbWlzZS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheS48UHJvbWlzZT58T2JqZWN0LjxQcm9taXNlPn0gcHJvbWlzZXMgQW4gYXJyYXkgb3IgaGFzaCBvZiBwcm9taXNlcy5cbiAgICogQHJldHVybnMge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIG9yIHJlamVjdHMgYXMgc29vbiBhcyBvbmUgb2YgdGhlIGBwcm9taXNlc2BcbiAgICogcmVzb2x2ZXMgb3IgcmVqZWN0cywgd2l0aCB0aGUgdmFsdWUgb3IgcmVhc29uIGZyb20gdGhhdCBwcm9taXNlLlxuICAgKi9cblxuICBmdW5jdGlvbiByYWNlKHByb21pc2VzKSB7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcblxuICAgIGZvckVhY2gocHJvbWlzZXMsIGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgIHdoZW4ocHJvbWlzZSkudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH1cblxuICBmdW5jdGlvbiAkUShyZXNvbHZlcikge1xuICAgIGlmICghaXNGdW5jdGlvbihyZXNvbHZlcikpIHtcbiAgICAgIHRocm93ICRxTWluRXJyKCdub3JzbHZyJywgJ0V4cGVjdGVkIHJlc29sdmVyRm4sIGdvdCBcXCd7MH1cXCcnLCByZXNvbHZlcik7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSgpO1xuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZUZuKHZhbHVlKSB7XG4gICAgICByZXNvbHZlUHJvbWlzZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVqZWN0Rm4ocmVhc29uKSB7XG4gICAgICByZWplY3RQcm9taXNlKHByb21pc2UsIHJlYXNvbik7XG4gICAgfVxuXG4gICAgcmVzb2x2ZXIocmVzb2x2ZUZuLCByZWplY3RGbik7XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIC8vIExldCdzIG1ha2UgdGhlIGluc3RhbmNlb2Ygb3BlcmF0b3Igd29yayBmb3IgcHJvbWlzZXMsIHNvIHRoYXRcbiAgLy8gYG5ldyAkcShmbikgaW5zdGFuY2VvZiAkcWAgd291bGQgZXZhbHVhdGUgdG8gdHJ1ZS5cbiAgJFEucHJvdG90eXBlID0gUHJvbWlzZS5wcm90b3R5cGU7XG5cbiAgJFEuZGVmZXIgPSBkZWZlcjtcbiAgJFEucmVqZWN0ID0gcmVqZWN0O1xuICAkUS53aGVuID0gd2hlbjtcbiAgJFEucmVzb2x2ZSA9IHJlc29sdmU7XG4gICRRLmFsbCA9IGFsbDtcbiAgJFEucmFjZSA9IHJhY2U7XG5cbiAgcmV0dXJuICRRO1xufVxuXG5mdW5jdGlvbiBpc1N0YXRlRXhjZXB0aW9uSGFuZGxlZChzdGF0ZSkge1xuICByZXR1cm4gISFzdGF0ZS5wdXI7XG59XG5mdW5jdGlvbiBtYXJrUVN0YXRlRXhjZXB0aW9uSGFuZGxlZChzdGF0ZSkge1xuICBzdGF0ZS5wdXIgPSB0cnVlO1xufVxuZnVuY3Rpb24gbWFya1FFeGNlcHRpb25IYW5kbGVkKHEpIHtcbiAgbWFya1FTdGF0ZUV4Y2VwdGlvbkhhbmRsZWQocS4kJHN0YXRlKTtcbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJFJBRlByb3ZpZGVyKCkgeyAvL3JBRlxuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbigkd2luZG93LCAkdGltZW91dCkge1xuICAgIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSAkd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZTtcblxuICAgIHZhciBjYW5jZWxBbmltYXRpb25GcmFtZSA9ICR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cbiAgICB2YXIgcmFmU3VwcG9ydGVkID0gISFyZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgdmFyIHJhZiA9IHJhZlN1cHBvcnRlZFxuICAgICAgPyBmdW5jdGlvbihmbikge1xuICAgICAgICAgIHZhciBpZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShmbik7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIDogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICB2YXIgdGltZXIgPSAkdGltZW91dChmbiwgMTYuNjYsIGZhbHNlKTsgLy8gMTAwMCAvIDYwID0gMTYuNjY2XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgcmFmLnN1cHBvcnRlZCA9IHJhZlN1cHBvcnRlZDtcblxuICAgIHJldHVybiByYWY7XG4gIH1dO1xufVxuXG4vKipcbiAqIERFU0lHTiBOT1RFU1xuICpcbiAqIFRoZSBkZXNpZ24gZGVjaXNpb25zIGJlaGluZCB0aGUgc2NvcGUgYXJlIGhlYXZpbHkgZmF2b3JlZCBmb3Igc3BlZWQgYW5kIG1lbW9yeSBjb25zdW1wdGlvbi5cbiAqXG4gKiBUaGUgdHlwaWNhbCB1c2Ugb2Ygc2NvcGUgaXMgdG8gd2F0Y2ggdGhlIGV4cHJlc3Npb25zLCB3aGljaCBtb3N0IG9mIHRoZSB0aW1lIHJldHVybiB0aGUgc2FtZVxuICogdmFsdWUgYXMgbGFzdCB0aW1lIHNvIHdlIG9wdGltaXplIHRoZSBvcGVyYXRpb24uXG4gKlxuICogQ2xvc3VyZXMgY29uc3RydWN0aW9uIGlzIGV4cGVuc2l2ZSBpbiB0ZXJtcyBvZiBzcGVlZCBhcyB3ZWxsIGFzIG1lbW9yeTpcbiAqICAgLSBObyBjbG9zdXJlcywgaW5zdGVhZCB1c2UgcHJvdG90eXBpY2FsIGluaGVyaXRhbmNlIGZvciBBUElcbiAqICAgLSBJbnRlcm5hbCBzdGF0ZSBuZWVkcyB0byBiZSBzdG9yZWQgb24gc2NvcGUgZGlyZWN0bHksIHdoaWNoIG1lYW5zIHRoYXQgcHJpdmF0ZSBzdGF0ZSBpc1xuICogICAgIGV4cG9zZWQgYXMgJCRfX19fIHByb3BlcnRpZXNcbiAqXG4gKiBMb29wIG9wZXJhdGlvbnMgYXJlIG9wdGltaXplZCBieSB1c2luZyB3aGlsZShjb3VudC0tKSB7IC4uLiB9XG4gKiAgIC0gVGhpcyBtZWFucyB0aGF0IGluIG9yZGVyIHRvIGtlZXAgdGhlIHNhbWUgb3JkZXIgb2YgZXhlY3V0aW9uIGFzIGFkZGl0aW9uIHdlIGhhdmUgdG8gYWRkXG4gKiAgICAgaXRlbXMgdG8gdGhlIGFycmF5IGF0IHRoZSBiZWdpbm5pbmcgKHVuc2hpZnQpIGluc3RlYWQgb2YgYXQgdGhlIGVuZCAocHVzaClcbiAqXG4gKiBDaGlsZCBzY29wZXMgYXJlIGNyZWF0ZWQgYW5kIHJlbW92ZWQgb2Z0ZW5cbiAqICAgLSBVc2luZyBhbiBhcnJheSB3b3VsZCBiZSBzbG93IHNpbmNlIGluc2VydHMgaW4gdGhlIG1pZGRsZSBhcmUgZXhwZW5zaXZlOyBzbyB3ZSB1c2UgbGlua2VkIGxpc3RzXG4gKlxuICogVGhlcmUgYXJlIGZld2VyIHdhdGNoZXMgdGhhbiBvYnNlcnZlcnMuIFRoaXMgaXMgd2h5IHlvdSBkb24ndCB3YW50IHRoZSBvYnNlcnZlciB0byBiZSBpbXBsZW1lbnRlZFxuICogaW4gdGhlIHNhbWUgd2F5IGFzIHdhdGNoLiBXYXRjaCByZXF1aXJlcyByZXR1cm4gb2YgdGhlIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uIHdoaWNoIGlzIGV4cGVuc2l2ZVxuICogdG8gY29uc3RydWN0LlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRyb290U2NvcGVQcm92aWRlclxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUHJvdmlkZXIgZm9yIHRoZSAkcm9vdFNjb3BlIHNlcnZpY2UuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSAkcm9vdFNjb3BlUHJvdmlkZXIjZGlnZXN0VHRsXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBTZXRzIHRoZSBudW1iZXIgb2YgYCRkaWdlc3RgIGl0ZXJhdGlvbnMgdGhlIHNjb3BlIHNob3VsZCBhdHRlbXB0IHRvIGV4ZWN1dGUgYmVmb3JlIGdpdmluZyB1cCBhbmRcbiAqIGFzc3VtaW5nIHRoYXQgdGhlIG1vZGVsIGlzIHVuc3RhYmxlLlxuICpcbiAqIFRoZSBjdXJyZW50IGRlZmF1bHQgaXMgMTAgaXRlcmF0aW9ucy5cbiAqXG4gKiBJbiBjb21wbGV4IGFwcGxpY2F0aW9ucyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlIGRlcGVuZGVuY2llcyBiZXR3ZWVuIGAkd2F0Y2hgcyB3aWxsIHJlc3VsdCBpblxuICogc2V2ZXJhbCBkaWdlc3QgaXRlcmF0aW9ucy4gSG93ZXZlciBpZiBhbiBhcHBsaWNhdGlvbiBuZWVkcyBtb3JlIHRoYW4gdGhlIGRlZmF1bHQgMTAgZGlnZXN0XG4gKiBpdGVyYXRpb25zIGZvciBpdHMgbW9kZWwgdG8gc3RhYmlsaXplIHRoZW4geW91IHNob3VsZCBpbnZlc3RpZ2F0ZSB3aGF0IGlzIGNhdXNpbmcgdGhlIG1vZGVsIHRvXG4gKiBjb250aW51b3VzbHkgY2hhbmdlIGR1cmluZyB0aGUgZGlnZXN0LlxuICpcbiAqIEluY3JlYXNpbmcgdGhlIFRUTCBjb3VsZCBoYXZlIHBlcmZvcm1hbmNlIGltcGxpY2F0aW9ucywgc28geW91IHNob3VsZCBub3QgY2hhbmdlIGl0IHdpdGhvdXRcbiAqIHByb3BlciBqdXN0aWZpY2F0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdCBUaGUgbnVtYmVyIG9mIGRpZ2VzdCBpdGVyYXRpb25zLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2Mgc2VydmljZVxuICogQG5hbWUgJHJvb3RTY29wZVxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBFdmVyeSBhcHBsaWNhdGlvbiBoYXMgYSBzaW5nbGUgcm9vdCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBzY29wZX0uXG4gKiBBbGwgb3RoZXIgc2NvcGVzIGFyZSBkZXNjZW5kYW50IHNjb3BlcyBvZiB0aGUgcm9vdCBzY29wZS4gU2NvcGVzIHByb3ZpZGUgc2VwYXJhdGlvblxuICogYmV0d2VlbiB0aGUgbW9kZWwgYW5kIHRoZSB2aWV3LCB2aWEgYSBtZWNoYW5pc20gZm9yIHdhdGNoaW5nIHRoZSBtb2RlbCBmb3IgY2hhbmdlcy5cbiAqIFRoZXkgYWxzbyBwcm92aWRlIGV2ZW50IGVtaXNzaW9uL2Jyb2FkY2FzdCBhbmQgc3Vic2NyaXB0aW9uIGZhY2lsaXR5LiBTZWUgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvc2NvcGUgZGV2ZWxvcGVyIGd1aWRlIG9uIHNjb3Blc30uXG4gKi9cbmZ1bmN0aW9uICRSb290U2NvcGVQcm92aWRlcigpIHtcbiAgdmFyIFRUTCA9IDEwO1xuICB2YXIgJHJvb3RTY29wZU1pbkVyciA9IG1pbkVycignJHJvb3RTY29wZScpO1xuICB2YXIgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuICB2YXIgYXBwbHlBc3luY0lkID0gbnVsbDtcblxuICB0aGlzLmRpZ2VzdFR0bCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIFRUTCA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gVFRMO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNoaWxkU2NvcGVDbGFzcyhwYXJlbnQpIHtcbiAgICBmdW5jdGlvbiBDaGlsZFNjb3BlKCkge1xuICAgICAgdGhpcy4kJHdhdGNoZXJzID0gdGhpcy4kJG5leHRTaWJsaW5nID1cbiAgICAgICAgICB0aGlzLiQkY2hpbGRIZWFkID0gdGhpcy4kJGNoaWxkVGFpbCA9IG51bGw7XG4gICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XG4gICAgICB0aGlzLiQkbGlzdGVuZXJDb3VudCA9IHt9O1xuICAgICAgdGhpcy4kJHdhdGNoZXJzQ291bnQgPSAwO1xuICAgICAgdGhpcy4kaWQgPSBuZXh0VWlkKCk7XG4gICAgICB0aGlzLiQkQ2hpbGRTY29wZSA9IG51bGw7XG4gICAgfVxuICAgIENoaWxkU2NvcGUucHJvdG90eXBlID0gcGFyZW50O1xuICAgIHJldHVybiBDaGlsZFNjb3BlO1xuICB9XG5cbiAgdGhpcy4kZ2V0ID0gWyckZXhjZXB0aW9uSGFuZGxlcicsICckcGFyc2UnLCAnJGJyb3dzZXInLFxuICAgICAgZnVuY3Rpb24oJGV4Y2VwdGlvbkhhbmRsZXIsICRwYXJzZSwgJGJyb3dzZXIpIHtcblxuICAgIGZ1bmN0aW9uIGRlc3Ryb3lDaGlsZFNjb3BlKCRldmVudCkge1xuICAgICAgICAkZXZlbnQuY3VycmVudFNjb3BlLiQkZGVzdHJveWVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhblVwU2NvcGUoJHNjb3BlKSB7XG5cbiAgICAgIC8vIFN1cHBvcnQ6IElFIDkgb25seVxuICAgICAgaWYgKG1zaWUgPT09IDkpIHtcbiAgICAgICAgLy8gVGhlcmUgaXMgYSBtZW1vcnkgbGVhayBpbiBJRTkgaWYgYWxsIGNoaWxkIHNjb3BlcyBhcmUgbm90IGRpc2Nvbm5lY3RlZFxuICAgICAgICAvLyBjb21wbGV0ZWx5IHdoZW4gYSBzY29wZSBpcyBkZXN0cm95ZWQuIFNvIHRoaXMgY29kZSB3aWxsIHJlY3Vyc2UgdXAgdGhyb3VnaFxuICAgICAgICAvLyBhbGwgdGhpcyBzY29wZXMgY2hpbGRyZW5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gU2VlIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzEwNzA2XG4gICAgICAgIGlmICgkc2NvcGUuJCRjaGlsZEhlYWQpIHtcbiAgICAgICAgICBjbGVhblVwU2NvcGUoJHNjb3BlLiQkY2hpbGRIZWFkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHNjb3BlLiQkbmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICBjbGVhblVwU2NvcGUoJHNjb3BlLiQkbmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb2RlIGJlbG93IHdvcmtzIGFyb3VuZCBJRTkgYW5kIFY4J3MgbWVtb3J5IGxlYWtzXG4gICAgICAvL1xuICAgICAgLy8gU2VlOlxuICAgICAgLy8gLSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjA3MyNjMjZcbiAgICAgIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvNjc5NCNpc3N1ZWNvbW1lbnQtMzg2NDg5MDlcbiAgICAgIC8vIC0gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMTMxMyNpc3N1ZWNvbW1lbnQtMTAzNzg0NTFcblxuICAgICAgJHNjb3BlLiRwYXJlbnQgPSAkc2NvcGUuJCRuZXh0U2libGluZyA9ICRzY29wZS4kJHByZXZTaWJsaW5nID0gJHNjb3BlLiQkY2hpbGRIZWFkID1cbiAgICAgICAgICAkc2NvcGUuJCRjaGlsZFRhaWwgPSAkc2NvcGUuJHJvb3QgPSAkc2NvcGUuJCR3YXRjaGVycyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHR5cGVcbiAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBBIHJvb3Qgc2NvcGUgY2FuIGJlIHJldHJpZXZlZCB1c2luZyB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUgJHJvb3RTY29wZX0ga2V5IGZyb20gdGhlXG4gICAgICoge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0uIENoaWxkIHNjb3BlcyBhcmUgY3JlYXRlZCB1c2luZyB0aGVcbiAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkbmV3ICRuZXcoKX0gbWV0aG9kLiAoTW9zdCBzY29wZXMgYXJlIGNyZWF0ZWQgYXV0b21hdGljYWxseSB3aGVuXG4gICAgICogY29tcGlsZWQgSFRNTCB0ZW1wbGF0ZSBpcyBleGVjdXRlZC4pIFNlZSBhbHNvIHRoZSB7QGxpbmsgZ3VpZGUvc2NvcGUgU2NvcGVzIGd1aWRlfSBmb3JcbiAgICAgKiBhbiBpbi1kZXB0aCBpbnRyb2R1Y3Rpb24gYW5kIHVzYWdlIGV4YW1wbGVzLlxuICAgICAqXG4gICAgICpcbiAgICAgKiAjIyBJbmhlcml0YW5jZVxuICAgICAqIEEgc2NvcGUgY2FuIGluaGVyaXQgZnJvbSBhIHBhcmVudCBzY29wZSwgYXMgaW4gdGhpcyBleGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICAgICB2YXIgcGFyZW50ID0gJHJvb3RTY29wZTtcbiAgICAgICAgIHZhciBjaGlsZCA9IHBhcmVudC4kbmV3KCk7XG5cbiAgICAgICAgIHBhcmVudC5zYWx1dGF0aW9uID0gXCJIZWxsb1wiO1xuICAgICAgICAgZXhwZWN0KGNoaWxkLnNhbHV0YXRpb24pLnRvRXF1YWwoJ0hlbGxvJyk7XG5cbiAgICAgICAgIGNoaWxkLnNhbHV0YXRpb24gPSBcIldlbGNvbWVcIjtcbiAgICAgICAgIGV4cGVjdChjaGlsZC5zYWx1dGF0aW9uKS50b0VxdWFsKCdXZWxjb21lJyk7XG4gICAgICAgICBleHBlY3QocGFyZW50LnNhbHV0YXRpb24pLnRvRXF1YWwoJ0hlbGxvJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBXaGVuIGludGVyYWN0aW5nIHdpdGggYFNjb3BlYCBpbiB0ZXN0cywgYWRkaXRpb25hbCBoZWxwZXIgbWV0aG9kcyBhcmUgYXZhaWxhYmxlIG9uIHRoZVxuICAgICAqIGluc3RhbmNlcyBvZiBgU2NvcGVgIHR5cGUuIFNlZSB7QGxpbmsgbmdNb2NrLiRyb290U2NvcGUuU2NvcGUgbmdNb2NrIFNjb3BlfSBmb3IgYWRkaXRpb25hbFxuICAgICAqIGRldGFpbHMuXG4gICAgICpcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsIGZ1bmN0aW9uKCk+PX0gcHJvdmlkZXJzIE1hcCBvZiBzZXJ2aWNlIGZhY3Rvcnkgd2hpY2ggbmVlZCB0byBiZVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZWQgZm9yIHRoZSBjdXJyZW50IHNjb3BlLiBEZWZhdWx0cyB0byB7QGxpbmsgbmd9LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0LjxzdHJpbmcsICo+PX0gaW5zdGFuY2VDYWNoZSBQcm92aWRlcyBwcmUtaW5zdGFudGlhdGVkIHNlcnZpY2VzIHdoaWNoIHNob3VsZFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kL292ZXJyaWRlIHNlcnZpY2VzIHByb3ZpZGVkIGJ5IGBwcm92aWRlcnNgLiBUaGlzIGlzIGhhbmR5XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIHVuaXQtdGVzdGluZyBhbmQgaGF2aW5nIHRoZSBuZWVkIHRvIG92ZXJyaWRlIGEgZGVmYXVsdFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZS5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBOZXdseSBjcmVhdGVkIHNjb3BlLlxuICAgICAqXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2NvcGUoKSB7XG4gICAgICB0aGlzLiRpZCA9IG5leHRVaWQoKTtcbiAgICAgIHRoaXMuJCRwaGFzZSA9IHRoaXMuJHBhcmVudCA9IHRoaXMuJCR3YXRjaGVycyA9XG4gICAgICAgICAgICAgICAgICAgICB0aGlzLiQkbmV4dFNpYmxpbmcgPSB0aGlzLiQkcHJldlNpYmxpbmcgPVxuICAgICAgICAgICAgICAgICAgICAgdGhpcy4kJGNoaWxkSGVhZCA9IHRoaXMuJCRjaGlsZFRhaWwgPSBudWxsO1xuICAgICAgdGhpcy4kcm9vdCA9IHRoaXM7XG4gICAgICB0aGlzLiQkZGVzdHJveWVkID0gZmFsc2U7XG4gICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XG4gICAgICB0aGlzLiQkbGlzdGVuZXJDb3VudCA9IHt9O1xuICAgICAgdGhpcy4kJHdhdGNoZXJzQ291bnQgPSAwO1xuICAgICAgdGhpcy4kJGlzb2xhdGVCaW5kaW5ncyA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkaWRcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFVuaXF1ZSBzY29wZSBJRCAobW9ub3RvbmljYWxseSBpbmNyZWFzaW5nKSB1c2VmdWwgZm9yIGRlYnVnZ2luZy5cbiAgICAgKi9cblxuICAgICAvKipcbiAgICAgICogQG5nZG9jIHByb3BlcnR5XG4gICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHBhcmVudFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogUmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgc2NvcGUuXG4gICAgICAqL1xuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBwcm9wZXJ0eVxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkcm9vdFxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUmVmZXJlbmNlIHRvIHRoZSByb290IHNjb3BlLlxuICAgICAgICovXG5cbiAgICBTY29wZS5wcm90b3R5cGUgPSB7XG4gICAgICBjb25zdHJ1Y3RvcjogU2NvcGUsXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJG5ld1xuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIENyZWF0ZXMgYSBuZXcgY2hpbGQge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUgc2NvcGV9LlxuICAgICAgICpcbiAgICAgICAqIFRoZSBwYXJlbnQgc2NvcGUgd2lsbCBwcm9wYWdhdGUgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBldmVudC5cbiAgICAgICAqIFRoZSBzY29wZSBjYW4gYmUgcmVtb3ZlZCBmcm9tIHRoZSBzY29wZSBoaWVyYXJjaHkgdXNpbmcge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3kgJGRlc3Ryb3koKX0uXG4gICAgICAgKlxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3kgJGRlc3Ryb3koKX0gbXVzdCBiZSBjYWxsZWQgb24gYSBzY29wZSB3aGVuIGl0IGlzXG4gICAgICAgKiBkZXNpcmVkIGZvciB0aGUgc2NvcGUgYW5kIGl0cyBjaGlsZCBzY29wZXMgdG8gYmUgcGVybWFuZW50bHkgZGV0YWNoZWQgZnJvbSB0aGUgcGFyZW50IGFuZFxuICAgICAgICogdGh1cyBzdG9wIHBhcnRpY2lwYXRpbmcgaW4gbW9kZWwgY2hhbmdlIGRldGVjdGlvbiBhbmQgbGlzdGVuZXIgbm90aWZpY2F0aW9uIGJ5IGludm9raW5nLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNvbGF0ZSBJZiB0cnVlLCB0aGVuIHRoZSBzY29wZSBkb2VzIG5vdCBwcm90b3R5cGljYWxseSBpbmhlcml0IGZyb20gdGhlXG4gICAgICAgKiAgICAgICAgIHBhcmVudCBzY29wZS4gVGhlIHNjb3BlIGlzIGlzb2xhdGVkLCBhcyBpdCBjYW4gbm90IHNlZSBwYXJlbnQgc2NvcGUgcHJvcGVydGllcy5cbiAgICAgICAqICAgICAgICAgV2hlbiBjcmVhdGluZyB3aWRnZXRzLCBpdCBpcyB1c2VmdWwgZm9yIHRoZSB3aWRnZXQgdG8gbm90IGFjY2lkZW50YWxseSByZWFkIHBhcmVudFxuICAgICAgICogICAgICAgICBzdGF0ZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge1Njb3BlfSBbcGFyZW50PXRoaXNdIFRoZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSBgU2NvcGVgfSB0aGF0IHdpbGwgYmUgdGhlIGAkcGFyZW50YFxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiB0aGUgbmV3bHkgY3JlYXRlZCBzY29wZS4gRGVmYXVsdHMgdG8gYHRoaXNgIHNjb3BlIGlmIG5vdCBwcm92aWRlZC5cbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhpcyBpcyB1c2VkIHdoZW4gY3JlYXRpbmcgYSB0cmFuc2NsdWRlIHNjb3BlIHRvIGNvcnJlY3RseSBwbGFjZSBpdFxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0aGUgc2NvcGUgaGllcmFyY2h5IHdoaWxlIG1haW50YWluaW5nIHRoZSBjb3JyZWN0IHByb3RvdHlwaWNhbFxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0YW5jZS5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgbmV3bHkgY3JlYXRlZCBjaGlsZCBzY29wZS5cbiAgICAgICAqXG4gICAgICAgKi9cbiAgICAgICRuZXc6IGZ1bmN0aW9uKGlzb2xhdGUsIHBhcmVudCkge1xuICAgICAgICB2YXIgY2hpbGQ7XG5cbiAgICAgICAgcGFyZW50ID0gcGFyZW50IHx8IHRoaXM7XG5cbiAgICAgICAgaWYgKGlzb2xhdGUpIHtcbiAgICAgICAgICBjaGlsZCA9IG5ldyBTY29wZSgpO1xuICAgICAgICAgIGNoaWxkLiRyb290ID0gdGhpcy4kcm9vdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPbmx5IGNyZWF0ZSBhIGNoaWxkIHNjb3BlIGNsYXNzIGlmIHNvbWVib2R5IGFza3MgZm9yIG9uZSxcbiAgICAgICAgICAvLyBidXQgY2FjaGUgaXQgdG8gYWxsb3cgdGhlIFZNIHRvIG9wdGltaXplIGxvb2t1cHMuXG4gICAgICAgICAgaWYgKCF0aGlzLiQkQ2hpbGRTY29wZSkge1xuICAgICAgICAgICAgdGhpcy4kJENoaWxkU2NvcGUgPSBjcmVhdGVDaGlsZFNjb3BlQ2xhc3ModGhpcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNoaWxkID0gbmV3IHRoaXMuJCRDaGlsZFNjb3BlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQuJHBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgY2hpbGQuJCRwcmV2U2libGluZyA9IHBhcmVudC4kJGNoaWxkVGFpbDtcbiAgICAgICAgaWYgKHBhcmVudC4kJGNoaWxkSGVhZCkge1xuICAgICAgICAgIHBhcmVudC4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nID0gY2hpbGQ7XG4gICAgICAgICAgcGFyZW50LiQkY2hpbGRUYWlsID0gY2hpbGQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyZW50LiQkY2hpbGRIZWFkID0gcGFyZW50LiQkY2hpbGRUYWlsID0gY2hpbGQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaGVuIHRoZSBuZXcgc2NvcGUgaXMgbm90IGlzb2xhdGVkIG9yIHdlIGluaGVyaXQgZnJvbSBgdGhpc2AsIGFuZFxuICAgICAgICAvLyB0aGUgcGFyZW50IHNjb3BlIGlzIGRlc3Ryb3llZCwgdGhlIHByb3BlcnR5IGAkJGRlc3Ryb3llZGAgaXMgaW5oZXJpdGVkXG4gICAgICAgIC8vIHByb3RvdHlwaWNhbGx5LiBJbiBhbGwgb3RoZXIgY2FzZXMsIHRoaXMgcHJvcGVydHkgbmVlZHMgdG8gYmUgc2V0XG4gICAgICAgIC8vIHdoZW4gdGhlIHBhcmVudCBzY29wZSBpcyBkZXN0cm95ZWQuXG4gICAgICAgIC8vIFRoZSBsaXN0ZW5lciBuZWVkcyB0byBiZSBhZGRlZCBhZnRlciB0aGUgcGFyZW50IGlzIHNldFxuICAgICAgICBpZiAoaXNvbGF0ZSB8fCBwYXJlbnQgIT09IHRoaXMpIGNoaWxkLiRvbignJGRlc3Ryb3knLCBkZXN0cm95Q2hpbGRTY29wZSk7XG5cbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaFxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJlZ2lzdGVycyBhIGBsaXN0ZW5lcmAgY2FsbGJhY2sgdG8gYmUgZXhlY3V0ZWQgd2hlbmV2ZXIgdGhlIGB3YXRjaEV4cHJlc3Npb25gIGNoYW5nZXMuXG4gICAgICAgKlxuICAgICAgICogLSBUaGUgYHdhdGNoRXhwcmVzc2lvbmAgaXMgY2FsbGVkIG9uIGV2ZXJ5IGNhbGwgdG8ge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdFxuICAgICAgICogICAkZGlnZXN0KCl9IGFuZCBzaG91bGQgcmV0dXJuIHRoZSB2YWx1ZSB0aGF0IHdpbGwgYmUgd2F0Y2hlZC4gKGB3YXRjaEV4cHJlc3Npb25gIHNob3VsZCBub3QgY2hhbmdlXG4gICAgICAgKiAgIGl0cyB2YWx1ZSB3aGVuIGV4ZWN1dGVkIG11bHRpcGxlIHRpbWVzIHdpdGggdGhlIHNhbWUgaW5wdXQgYmVjYXVzZSBpdCBtYXkgYmUgZXhlY3V0ZWQgbXVsdGlwbGVcbiAgICAgICAqICAgdGltZXMgYnkge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0KCl9LiBUaGF0IGlzLCBgd2F0Y2hFeHByZXNzaW9uYCBzaG91bGQgYmVcbiAgICAgICAqICAgW2lkZW1wb3RlbnRdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSWRlbXBvdGVuY2UpLilcbiAgICAgICAqIC0gVGhlIGBsaXN0ZW5lcmAgaXMgY2FsbGVkIG9ubHkgd2hlbiB0aGUgdmFsdWUgZnJvbSB0aGUgY3VycmVudCBgd2F0Y2hFeHByZXNzaW9uYCBhbmQgdGhlXG4gICAgICAgKiAgIHByZXZpb3VzIGNhbGwgdG8gYHdhdGNoRXhwcmVzc2lvbmAgYXJlIG5vdCBlcXVhbCAod2l0aCB0aGUgZXhjZXB0aW9uIG9mIHRoZSBpbml0aWFsIHJ1bixcbiAgICAgICAqICAgc2VlIGJlbG93KS4gSW5lcXVhbGl0eSBpcyBkZXRlcm1pbmVkIGFjY29yZGluZyB0byByZWZlcmVuY2UgaW5lcXVhbGl0eSxcbiAgICAgICAqICAgW3N0cmljdCBjb21wYXJpc29uXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9PcGVyYXRvcnMvQ29tcGFyaXNvbl9PcGVyYXRvcnMpXG4gICAgICAgKiAgICB2aWEgdGhlIGAhPT1gIEphdmFzY3JpcHQgb3BlcmF0b3IsIHVubGVzcyBgb2JqZWN0RXF1YWxpdHkgPT0gdHJ1ZWBcbiAgICAgICAqICAgKHNlZSBuZXh0IHBvaW50KVxuICAgICAgICogLSBXaGVuIGBvYmplY3RFcXVhbGl0eSA9PSB0cnVlYCwgaW5lcXVhbGl0eSBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbmAgaXMgZGV0ZXJtaW5lZFxuICAgICAgICogICBhY2NvcmRpbmcgdG8gdGhlIHtAbGluayBhbmd1bGFyLmVxdWFsc30gZnVuY3Rpb24uIFRvIHNhdmUgdGhlIHZhbHVlIG9mIHRoZSBvYmplY3QgZm9yXG4gICAgICAgKiAgIGxhdGVyIGNvbXBhcmlzb24sIHRoZSB7QGxpbmsgYW5ndWxhci5jb3B5fSBmdW5jdGlvbiBpcyB1c2VkLiBUaGlzIHRoZXJlZm9yZSBtZWFucyB0aGF0XG4gICAgICAgKiAgIHdhdGNoaW5nIGNvbXBsZXggb2JqZWN0cyB3aWxsIGhhdmUgYWR2ZXJzZSBtZW1vcnkgYW5kIHBlcmZvcm1hbmNlIGltcGxpY2F0aW9ucy5cbiAgICAgICAqIC0gVGhpcyBzaG91bGQgbm90IGJlIHVzZWQgdG8gd2F0Y2ggZm9yIGNoYW5nZXMgaW4gb2JqZWN0cyB0aGF0IGFyZVxuICAgICAgICogICBvciBjb250YWluIFtGaWxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRmlsZSkgb2JqZWN0cyBkdWUgdG8gbGltaXRhdGlvbnMgd2l0aCB7QGxpbmsgYW5ndWxhci5jb3B5IGBhbmd1bGFyLmNvcHlgfS5cbiAgICAgICAqIC0gVGhlIHdhdGNoIGBsaXN0ZW5lcmAgbWF5IGNoYW5nZSB0aGUgbW9kZWwsIHdoaWNoIG1heSB0cmlnZ2VyIG90aGVyIGBsaXN0ZW5lcmBzIHRvIGZpcmUuXG4gICAgICAgKiAgIFRoaXMgaXMgYWNoaWV2ZWQgYnkgcmVydW5uaW5nIHRoZSB3YXRjaGVycyB1bnRpbCBubyBjaGFuZ2VzIGFyZSBkZXRlY3RlZC4gVGhlIHJlcnVuXG4gICAgICAgKiAgIGl0ZXJhdGlvbiBsaW1pdCBpcyAxMCB0byBwcmV2ZW50IGFuIGluZmluaXRlIGxvb3AgZGVhZGxvY2suXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIElmIHlvdSB3YW50IHRvIGJlIG5vdGlmaWVkIHdoZW5ldmVyIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdH0gaXMgY2FsbGVkLFxuICAgICAgICogeW91IGNhbiByZWdpc3RlciBhIGB3YXRjaEV4cHJlc3Npb25gIGZ1bmN0aW9uIHdpdGggbm8gYGxpc3RlbmVyYC4gKEJlIHByZXBhcmVkIGZvclxuICAgICAgICogbXVsdGlwbGUgY2FsbHMgdG8geW91ciBgd2F0Y2hFeHByZXNzaW9uYCBiZWNhdXNlIGl0IHdpbGwgZXhlY3V0ZSBtdWx0aXBsZSB0aW1lcyBpbiBhXG4gICAgICAgKiBzaW5nbGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0fSBjeWNsZSBpZiBhIGNoYW5nZSBpcyBkZXRlY3RlZC4pXG4gICAgICAgKlxuICAgICAgICogQWZ0ZXIgYSB3YXRjaGVyIGlzIHJlZ2lzdGVyZWQgd2l0aCB0aGUgc2NvcGUsIHRoZSBgbGlzdGVuZXJgIGZuIGlzIGNhbGxlZCBhc3luY2hyb25vdXNseVxuICAgICAgICogKHZpYSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZXZhbEFzeW5jICRldmFsQXN5bmN9KSB0byBpbml0aWFsaXplIHRoZVxuICAgICAgICogd2F0Y2hlci4gSW4gcmFyZSBjYXNlcywgdGhpcyBpcyB1bmRlc2lyYWJsZSBiZWNhdXNlIHRoZSBsaXN0ZW5lciBpcyBjYWxsZWQgd2hlbiB0aGUgcmVzdWx0XG4gICAgICAgKiBvZiBgd2F0Y2hFeHByZXNzaW9uYCBkaWRuJ3QgY2hhbmdlLiBUbyBkZXRlY3QgdGhpcyBzY2VuYXJpbyB3aXRoaW4gdGhlIGBsaXN0ZW5lcmAgZm4sIHlvdVxuICAgICAgICogY2FuIGNvbXBhcmUgdGhlIGBuZXdWYWxgIGFuZCBgb2xkVmFsYC4gSWYgdGhlc2UgdHdvIHZhbHVlcyBhcmUgaWRlbnRpY2FsIChgPT09YCkgdGhlbiB0aGVcbiAgICAgICAqIGxpc3RlbmVyIHdhcyBjYWxsZWQgZHVlIHRvIGluaXRpYWxpemF0aW9uLlxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogQGV4YW1wbGVcbiAgICAgICAqIGBgYGpzXG4gICAgICAgICAgIC8vIGxldCdzIGFzc3VtZSB0aGF0IHNjb3BlIHdhcyBkZXBlbmRlbmN5IGluamVjdGVkIGFzIHRoZSAkcm9vdFNjb3BlXG4gICAgICAgICAgIHZhciBzY29wZSA9ICRyb290U2NvcGU7XG4gICAgICAgICAgIHNjb3BlLm5hbWUgPSAnbWlza28nO1xuICAgICAgICAgICBzY29wZS5jb3VudGVyID0gMDtcblxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgwKTtcbiAgICAgICAgICAgc2NvcGUuJHdhdGNoKCduYW1lJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgc2NvcGUuY291bnRlciA9IHNjb3BlLmNvdW50ZXIgKyAxO1xuICAgICAgICAgICB9KTtcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyB0aGUgbGlzdGVuZXIgaXMgYWx3YXlzIGNhbGxlZCBkdXJpbmcgdGhlIGZpcnN0ICRkaWdlc3QgbG9vcCBhZnRlciBpdCB3YXMgcmVnaXN0ZXJlZFxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgxKTtcblxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIC8vIGJ1dCBub3cgaXQgd2lsbCBub3QgYmUgY2FsbGVkIHVubGVzcyB0aGUgdmFsdWUgY2hhbmdlc1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgxKTtcblxuICAgICAgICAgICBzY29wZS5uYW1lID0gJ2FkYW0nO1xuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDIpO1xuXG5cblxuICAgICAgICAgICAvLyBVc2luZyBhIGZ1bmN0aW9uIGFzIGEgd2F0Y2hFeHByZXNzaW9uXG4gICAgICAgICAgIHZhciBmb29kO1xuICAgICAgICAgICBzY29wZS5mb29kQ291bnRlciA9IDA7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgwKTtcbiAgICAgICAgICAgc2NvcGUuJHdhdGNoKFxuICAgICAgICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgdmFsdWUgYmVpbmcgd2F0Y2hlZC4gSXQgaXMgY2FsbGVkIGZvciBlYWNoIHR1cm4gb2YgdGhlICRkaWdlc3QgbG9vcFxuICAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gZm9vZDsgfSxcbiAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBjaGFuZ2UgbGlzdGVuZXIsIGNhbGxlZCB3aGVuIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBhYm92ZSBmdW5jdGlvbiBjaGFuZ2VzXG4gICAgICAgICAgICAgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICBpZiAoIG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSApIHtcbiAgICAgICAgICAgICAgICAgLy8gT25seSBpbmNyZW1lbnQgdGhlIGNvdW50ZXIgaWYgdGhlIHZhbHVlIGNoYW5nZWRcbiAgICAgICAgICAgICAgICAgc2NvcGUuZm9vZENvdW50ZXIgPSBzY29wZS5mb29kQ291bnRlciArIDE7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICApO1xuICAgICAgICAgICAvLyBObyBkaWdlc3QgaGFzIGJlZW4gcnVuIHNvIHRoZSBjb3VudGVyIHdpbGwgYmUgemVyb1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuZm9vZENvdW50ZXIpLnRvRXF1YWwoMCk7XG5cbiAgICAgICAgICAgLy8gUnVuIHRoZSBkaWdlc3QgYnV0IHNpbmNlIGZvb2QgaGFzIG5vdCBjaGFuZ2VkIGNvdW50IHdpbGwgc3RpbGwgYmUgemVyb1xuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5mb29kQ291bnRlcikudG9FcXVhbCgwKTtcblxuICAgICAgICAgICAvLyBVcGRhdGUgZm9vZCBhbmQgcnVuIGRpZ2VzdC4gIE5vdyB0aGUgY291bnRlciB3aWxsIGluY3JlbWVudFxuICAgICAgICAgICBmb29kID0gJ2NoZWVzZWJ1cmdlcic7XG4gICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmZvb2RDb3VudGVyKS50b0VxdWFsKDEpO1xuXG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7KGZ1bmN0aW9uKCl8c3RyaW5nKX0gd2F0Y2hFeHByZXNzaW9uIEV4cHJlc3Npb24gdGhhdCBpcyBldmFsdWF0ZWQgb24gZWFjaFxuICAgICAgICogICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCAkZGlnZXN0fSBjeWNsZS4gQSBjaGFuZ2UgaW4gdGhlIHJldHVybiB2YWx1ZSB0cmlnZ2Vyc1xuICAgICAgICogICAgYSBjYWxsIHRvIHRoZSBgbGlzdGVuZXJgLlxuICAgICAgICpcbiAgICAgICAqICAgIC0gYHN0cmluZ2A6IEV2YWx1YXRlZCBhcyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufVxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogY2FsbGVkIHdpdGggY3VycmVudCBgc2NvcGVgIGFzIGEgcGFyYW1ldGVyLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCwgc2NvcGUpfSBsaXN0ZW5lciBDYWxsYmFjayBjYWxsZWQgd2hlbmV2ZXIgdGhlIHZhbHVlXG4gICAgICAgKiAgICBvZiBgd2F0Y2hFeHByZXNzaW9uYCBjaGFuZ2VzLlxuICAgICAgICpcbiAgICAgICAqICAgIC0gYG5ld1ZhbGAgY29udGFpbnMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25gXG4gICAgICAgKiAgICAtIGBvbGRWYWxgIGNvbnRhaW5zIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYHdhdGNoRXhwcmVzc2lvbmBcbiAgICAgICAqICAgIC0gYHNjb3BlYCByZWZlcnMgdG8gdGhlIGN1cnJlbnQgc2NvcGVcbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IFtvYmplY3RFcXVhbGl0eT1mYWxzZV0gQ29tcGFyZSBmb3Igb2JqZWN0IGVxdWFsaXR5IHVzaW5nIHtAbGluayBhbmd1bGFyLmVxdWFsc30gaW5zdGVhZCBvZlxuICAgICAgICogICAgIGNvbXBhcmluZyBmb3IgcmVmZXJlbmNlIGVxdWFsaXR5LlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBsaXN0ZW5lci5cbiAgICAgICAqL1xuICAgICAgJHdhdGNoOiBmdW5jdGlvbih3YXRjaEV4cCwgbGlzdGVuZXIsIG9iamVjdEVxdWFsaXR5LCBwcmV0dHlQcmludEV4cHJlc3Npb24pIHtcbiAgICAgICAgdmFyIGdldCA9ICRwYXJzZSh3YXRjaEV4cCk7XG4gICAgICAgIHZhciBmbiA9IGlzRnVuY3Rpb24obGlzdGVuZXIpID8gbGlzdGVuZXIgOiBub29wO1xuXG4gICAgICAgIGlmIChnZXQuJCR3YXRjaERlbGVnYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIGdldC4kJHdhdGNoRGVsZWdhdGUodGhpcywgZm4sIG9iamVjdEVxdWFsaXR5LCBnZXQsIHdhdGNoRXhwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2NvcGUgPSB0aGlzLFxuICAgICAgICAgICAgYXJyYXkgPSBzY29wZS4kJHdhdGNoZXJzLFxuICAgICAgICAgICAgd2F0Y2hlciA9IHtcbiAgICAgICAgICAgICAgZm46IGZuLFxuICAgICAgICAgICAgICBsYXN0OiBpbml0V2F0Y2hWYWwsXG4gICAgICAgICAgICAgIGdldDogZ2V0LFxuICAgICAgICAgICAgICBleHA6IHByZXR0eVByaW50RXhwcmVzc2lvbiB8fCB3YXRjaEV4cCxcbiAgICAgICAgICAgICAgZXE6ICEhb2JqZWN0RXF1YWxpdHlcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuXG4gICAgICAgIGlmICghYXJyYXkpIHtcbiAgICAgICAgICBhcnJheSA9IHNjb3BlLiQkd2F0Y2hlcnMgPSBbXTtcbiAgICAgICAgICBhcnJheS4kJGRpZ2VzdFdhdGNoSW5kZXggPSAtMTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3ZSB1c2UgdW5zaGlmdCBzaW5jZSB3ZSB1c2UgYSB3aGlsZSBsb29wIGluICRkaWdlc3QgZm9yIHNwZWVkLlxuICAgICAgICAvLyB0aGUgd2hpbGUgbG9vcCByZWFkcyBpbiByZXZlcnNlIG9yZGVyLlxuICAgICAgICBhcnJheS51bnNoaWZ0KHdhdGNoZXIpO1xuICAgICAgICBhcnJheS4kJGRpZ2VzdFdhdGNoSW5kZXgrKztcbiAgICAgICAgaW5jcmVtZW50V2F0Y2hlcnNDb3VudCh0aGlzLCAxKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVyZWdpc3RlcldhdGNoKCkge1xuICAgICAgICAgIHZhciBpbmRleCA9IGFycmF5UmVtb3ZlKGFycmF5LCB3YXRjaGVyKTtcbiAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgaW5jcmVtZW50V2F0Y2hlcnNDb3VudChzY29wZSwgLTEpO1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYXJyYXkuJCRkaWdlc3RXYXRjaEluZGV4KSB7XG4gICAgICAgICAgICAgIGFycmF5LiQkZGlnZXN0V2F0Y2hJbmRleC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBsYXN0RGlydHlXYXRjaCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHdhdGNoR3JvdXBcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBBIHZhcmlhbnQgb2Yge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoICR3YXRjaCgpfSB3aGVyZSBpdCB3YXRjaGVzIGFuIGFycmF5IG9mIGB3YXRjaEV4cHJlc3Npb25zYC5cbiAgICAgICAqIElmIGFueSBvbmUgZXhwcmVzc2lvbiBpbiB0aGUgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBgbGlzdGVuZXJgIGlzIGV4ZWN1dGVkLlxuICAgICAgICpcbiAgICAgICAqIC0gVGhlIGl0ZW1zIGluIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AgYXJyYXkgYXJlIG9ic2VydmVkIHZpYSB0aGUgc3RhbmRhcmQgYCR3YXRjaGAgb3BlcmF0aW9uLiBUaGVpciByZXR1cm5cbiAgICAgICAqICAgdmFsdWVzIGFyZSBleGFtaW5lZCBmb3IgY2hhbmdlcyBvbiBldmVyeSBjYWxsIHRvIGAkZGlnZXN0YC5cbiAgICAgICAqIC0gVGhlIGBsaXN0ZW5lcmAgaXMgY2FsbGVkIHdoZW5ldmVyIGFueSBleHByZXNzaW9uIGluIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AgYXJyYXkgY2hhbmdlcy5cbiAgICAgICAqXG4gICAgICAgKiBgJHdhdGNoR3JvdXBgIGlzIG1vcmUgcGVyZm9ybWFudCB0aGFuIHdhdGNoaW5nIGVhY2ggZXhwcmVzc2lvbiBpbmRpdmlkdWFsbHksIGFuZCBzaG91bGQgYmVcbiAgICAgICAqIHVzZWQgd2hlbiB0aGUgbGlzdGVuZXIgZG9lcyBub3QgbmVlZCB0byBrbm93IHdoaWNoIGV4cHJlc3Npb24gaGFzIGNoYW5nZWQuXG4gICAgICAgKiBJZiB0aGUgbGlzdGVuZXIgbmVlZHMgdG8ga25vdyB3aGljaCBleHByZXNzaW9uIGhhcyBjaGFuZ2VkLFxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoICR3YXRjaCgpfSBvclxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoQ29sbGVjdGlvbiAkd2F0Y2hDb2xsZWN0aW9uKCl9IHNob3VsZCBiZSB1c2VkLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZ3xGdW5jdGlvbihzY29wZSk+fSB3YXRjaEV4cHJlc3Npb25zIEFycmF5IG9mIGV4cHJlc3Npb25zIHRoYXQgd2lsbCBiZSBpbmRpdmlkdWFsbHlcbiAgICAgICAqIHdhdGNoZWQgdXNpbmcge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoICR3YXRjaCgpfVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3VmFsdWVzLCBvbGRWYWx1ZXMsIHNjb3BlKX0gbGlzdGVuZXIgQ2FsbGJhY2sgY2FsbGVkIHdoZW5ldmVyIHRoZSByZXR1cm4gdmFsdWUgb2YgYW55XG4gICAgICAgKiAgICBleHByZXNzaW9uIGluIGB3YXRjaEV4cHJlc3Npb25zYCBjaGFuZ2VzXG4gICAgICAgKiAgICBUaGUgYG5ld1ZhbHVlc2AgYXJyYXkgY29udGFpbnMgdGhlIGN1cnJlbnQgdmFsdWVzIG9mIHRoZSBgd2F0Y2hFeHByZXNzaW9uc2AsIHdpdGggdGhlIGluZGV4ZXMgbWF0Y2hpbmdcbiAgICAgICAqICAgIHRob3NlIG9mIGB3YXRjaEV4cHJlc3Npb25gXG4gICAgICAgKiAgICBhbmQgdGhlIGBvbGRWYWx1ZXNgIGFycmF5IGNvbnRhaW5zIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgdGhlIGB3YXRjaEV4cHJlc3Npb25zYCwgd2l0aCB0aGUgaW5kZXhlcyBtYXRjaGluZ1xuICAgICAgICogICAgdGhvc2Ugb2YgYHdhdGNoRXhwcmVzc2lvbmAuXG4gICAgICAgKlxuICAgICAgICogICAgTm90ZSB0aGF0IGBuZXdWYWx1ZXNgIGFuZCBgb2xkVmFsdWVzYCByZWZsZWN0IHRoZSBkaWZmZXJlbmNlcyBpbiBlYWNoICoqaW5kaXZpZHVhbCoqXG4gICAgICAgKiAgICBleHByZXNzaW9uLCBhbmQgbm90IHRoZSBkaWZmZXJlbmNlIG9mIHRoZSB2YWx1ZXMgYmV0d2VlbiBlYWNoIGNhbGwgb2YgdGhlIGxpc3RlbmVyLlxuICAgICAgICogICAgVGhhdCBtZWFucyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIGBuZXdWYWx1ZXNgIGFuZCBgb2xkVmFsdWVzYCBjYW5ub3QgYmUgdXNlZCB0byBkZXRlcm1pbmVcbiAgICAgICAqICAgIHdoaWNoIGV4cHJlc3Npb24gaGFzIGNoYW5nZWQgLyByZW1haW5lZCBzdGFibGU6XG4gICAgICAgKlxuICAgICAgICogICAgYGBganNcbiAgICAgICAqXG4gICAgICAgKiAgICAkc2NvcGUuJHdhdGNoR3JvdXAoWyd2MScsICd2MiddLCBmdW5jdGlvbihuZXdWYWx1ZXMsIG9sZFZhbHVlcykge1xuICAgICAgICogICAgICBjb25zb2xlLmxvZyhuZXdWYWx1ZXMsIG9sZFZhbHVlcyk7XG4gICAgICAgKiAgICB9KTtcbiAgICAgICAqXG4gICAgICAgKiAgICAvLyBuZXdWYWx1ZXMsIG9sZFZhbHVlcyBpbml0aWFsbHlcbiAgICAgICAqICAgIC8vIFt1bmRlZmluZWQsIHVuZGVmaW5lZF0sIFt1bmRlZmluZWQsIHVuZGVmaW5lZF1cbiAgICAgICAqXG4gICAgICAgKiAgICAkc2NvcGUudjEgPSAnYSc7XG4gICAgICAgKiAgICAkc2NvcGUudjIgPSAnYSc7XG4gICAgICAgKlxuICAgICAgICogICAgLy8gWydhJywgJ2EnXSwgW3VuZGVmaW5lZCwgdW5kZWZpbmVkXVxuICAgICAgICpcbiAgICAgICAqICAgICRzY29wZS52MiA9ICdiJ1xuICAgICAgICpcbiAgICAgICAqICAgIC8vIHYxIGhhc24ndCBjaGFuZ2VkIHNpbmNlIGl0IGJlY2FtZSBgJ2EnYCwgdGhlcmVmb3JlIGl0cyBvbGRWYWx1ZSBpcyBzdGlsbCBgdW5kZWZpbmVkYFxuICAgICAgICogICAgLy8gWydhJywgJ2InXSwgW3VuZGVmaW5lZCwgJ2EnXVxuICAgICAgICpcbiAgICAgICAqICAgIGBgYFxuICAgICAgICpcbiAgICAgICAqICAgIFRoZSBgc2NvcGVgIHJlZmVycyB0byB0aGUgY3VycmVudCBzY29wZS5cbiAgICAgICAqIEByZXR1cm5zIHtmdW5jdGlvbigpfSBSZXR1cm5zIGEgZGUtcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIGZvciBhbGwgbGlzdGVuZXJzLlxuICAgICAgICovXG4gICAgICAkd2F0Y2hHcm91cDogZnVuY3Rpb24od2F0Y2hFeHByZXNzaW9ucywgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIG9sZFZhbHVlcyA9IG5ldyBBcnJheSh3YXRjaEV4cHJlc3Npb25zLmxlbmd0aCk7XG4gICAgICAgIHZhciBuZXdWYWx1ZXMgPSBuZXcgQXJyYXkod2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpO1xuICAgICAgICB2YXIgZGVyZWdpc3RlckZucyA9IFtdO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZmlyc3RSdW4gPSB0cnVlO1xuXG4gICAgICAgIGlmICghd2F0Y2hFeHByZXNzaW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBObyBleHByZXNzaW9ucyBtZWFucyB3ZSBjYWxsIHRoZSBsaXN0ZW5lciBBU0FQXG4gICAgICAgICAgdmFyIHNob3VsZENhbGwgPSB0cnVlO1xuICAgICAgICAgIHNlbGYuJGV2YWxBc3luYyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRDYWxsKSBsaXN0ZW5lcihuZXdWYWx1ZXMsIG5ld1ZhbHVlcywgc2VsZik7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaEdyb3VwKCkge1xuICAgICAgICAgICAgc2hvdWxkQ2FsbCA9IGZhbHNlO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2F0Y2hFeHByZXNzaW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAvLyBTcGVjaWFsIGNhc2Ugc2l6ZSBvZiBvbmVcbiAgICAgICAgICByZXR1cm4gdGhpcy4kd2F0Y2god2F0Y2hFeHByZXNzaW9uc1swXSwgZnVuY3Rpb24gd2F0Y2hHcm91cEFjdGlvbih2YWx1ZSwgb2xkVmFsdWUsIHNjb3BlKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZXNbMF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIG9sZFZhbHVlc1swXSA9IG9sZFZhbHVlO1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWVzLCAodmFsdWUgPT09IG9sZFZhbHVlKSA/IG5ld1ZhbHVlcyA6IG9sZFZhbHVlcywgc2NvcGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yRWFjaCh3YXRjaEV4cHJlc3Npb25zLCBmdW5jdGlvbihleHByLCBpKSB7XG4gICAgICAgICAgdmFyIHVud2F0Y2hGbiA9IHNlbGYuJHdhdGNoKGV4cHIsIGZ1bmN0aW9uIHdhdGNoR3JvdXBTdWJBY3Rpb24odmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZXNbaV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIG9sZFZhbHVlc1tpXSA9IG9sZFZhbHVlO1xuICAgICAgICAgICAgaWYgKCFjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICBjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCA9IHRydWU7XG4gICAgICAgICAgICAgIHNlbGYuJGV2YWxBc3luYyh3YXRjaEdyb3VwQWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBkZXJlZ2lzdGVyRm5zLnB1c2godW53YXRjaEZuKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gd2F0Y2hHcm91cEFjdGlvbigpIHtcbiAgICAgICAgICBjaGFuZ2VSZWFjdGlvblNjaGVkdWxlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgaWYgKGZpcnN0UnVuKSB7XG4gICAgICAgICAgICBmaXJzdFJ1biA9IGZhbHNlO1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWVzLCBuZXdWYWx1ZXMsIHNlbGYpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZXMsIG9sZFZhbHVlcywgc2VsZik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJXYXRjaEdyb3VwKCkge1xuICAgICAgICAgIHdoaWxlIChkZXJlZ2lzdGVyRm5zLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVyZWdpc3RlckZucy5zaGlmdCgpKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSxcblxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJHdhdGNoQ29sbGVjdGlvblxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFNoYWxsb3cgd2F0Y2hlcyB0aGUgcHJvcGVydGllcyBvZiBhbiBvYmplY3QgYW5kIGZpcmVzIHdoZW5ldmVyIGFueSBvZiB0aGUgcHJvcGVydGllcyBjaGFuZ2VcbiAgICAgICAqIChmb3IgYXJyYXlzLCB0aGlzIGltcGxpZXMgd2F0Y2hpbmcgdGhlIGFycmF5IGl0ZW1zOyBmb3Igb2JqZWN0IG1hcHMsIHRoaXMgaW1wbGllcyB3YXRjaGluZ1xuICAgICAgICogdGhlIHByb3BlcnRpZXMpLiBJZiBhIGNoYW5nZSBpcyBkZXRlY3RlZCwgdGhlIGBsaXN0ZW5lcmAgY2FsbGJhY2sgaXMgZmlyZWQuXG4gICAgICAgKlxuICAgICAgICogLSBUaGUgYG9iamAgY29sbGVjdGlvbiBpcyBvYnNlcnZlZCB2aWEgc3RhbmRhcmQgJHdhdGNoIG9wZXJhdGlvbiBhbmQgaXMgZXhhbWluZWQgb24gZXZlcnlcbiAgICAgICAqICAgY2FsbCB0byAkZGlnZXN0KCkgdG8gc2VlIGlmIGFueSBpdGVtcyBoYXZlIGJlZW4gYWRkZWQsIHJlbW92ZWQsIG9yIG1vdmVkLlxuICAgICAgICogLSBUaGUgYGxpc3RlbmVyYCBpcyBjYWxsZWQgd2hlbmV2ZXIgYW55dGhpbmcgd2l0aGluIHRoZSBgb2JqYCBoYXMgY2hhbmdlZC4gRXhhbXBsZXMgaW5jbHVkZVxuICAgICAgICogICBhZGRpbmcsIHJlbW92aW5nLCBhbmQgbW92aW5nIGl0ZW1zIGJlbG9uZ2luZyB0byBhbiBvYmplY3Qgb3IgYXJyYXkuXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICRzY29wZS5uYW1lcyA9IFsnaWdvcicsICdtYXRpYXMnLCAnbWlza28nLCAnamFtZXMnXTtcbiAgICAgICAgICAkc2NvcGUuZGF0YUNvdW50ID0gNDtcblxuICAgICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCduYW1lcycsIGZ1bmN0aW9uKG5ld05hbWVzLCBvbGROYW1lcykge1xuICAgICAgICAgICAgJHNjb3BlLmRhdGFDb3VudCA9IG5ld05hbWVzLmxlbmd0aDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGV4cGVjdCgkc2NvcGUuZGF0YUNvdW50KS50b0VxdWFsKDQpO1xuICAgICAgICAgICRzY29wZS4kZGlnZXN0KCk7XG5cbiAgICAgICAgICAvL3N0aWxsIGF0IDQgLi4uIG5vIGNoYW5nZXNcbiAgICAgICAgICBleHBlY3QoJHNjb3BlLmRhdGFDb3VudCkudG9FcXVhbCg0KTtcblxuICAgICAgICAgICRzY29wZS5uYW1lcy5wb3AoKTtcbiAgICAgICAgICAkc2NvcGUuJGRpZ2VzdCgpO1xuXG4gICAgICAgICAgLy9ub3cgdGhlcmUncyBiZWVuIGEgY2hhbmdlXG4gICAgICAgICAgZXhwZWN0KCRzY29wZS5kYXRhQ291bnQpLnRvRXF1YWwoMyk7XG4gICAgICAgKiBgYGBcbiAgICAgICAqXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb24oc2NvcGUpfSBvYmogRXZhbHVhdGVkIGFzIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LiBUaGVcbiAgICAgICAqICAgIGV4cHJlc3Npb24gdmFsdWUgc2hvdWxkIGV2YWx1YXRlIHRvIGFuIG9iamVjdCBvciBhbiBhcnJheSB3aGljaCBpcyBvYnNlcnZlZCBvbiBlYWNoXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3R9IGN5Y2xlLiBBbnkgc2hhbGxvdyBjaGFuZ2Ugd2l0aGluIHRoZVxuICAgICAgICogICAgY29sbGVjdGlvbiB3aWxsIHRyaWdnZXIgYSBjYWxsIHRvIHRoZSBgbGlzdGVuZXJgLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3Q29sbGVjdGlvbiwgb2xkQ29sbGVjdGlvbiwgc2NvcGUpfSBsaXN0ZW5lciBhIGNhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZFxuICAgICAgICogICAgd2hlbiBhIGNoYW5nZSBpcyBkZXRlY3RlZC5cbiAgICAgICAqICAgIC0gVGhlIGBuZXdDb2xsZWN0aW9uYCBvYmplY3QgaXMgdGhlIG5ld2x5IG1vZGlmaWVkIGRhdGEgb2J0YWluZWQgZnJvbSB0aGUgYG9iamAgZXhwcmVzc2lvblxuICAgICAgICogICAgLSBUaGUgYG9sZENvbGxlY3Rpb25gIG9iamVjdCBpcyBhIGNvcHkgb2YgdGhlIGZvcm1lciBjb2xsZWN0aW9uIGRhdGEuXG4gICAgICAgKiAgICAgIER1ZSB0byBwZXJmb3JtYW5jZSBjb25zaWRlcmF0aW9ucywgdGhlYG9sZENvbGxlY3Rpb25gIHZhbHVlIGlzIGNvbXB1dGVkIG9ubHkgaWYgdGhlXG4gICAgICAgKiAgICAgIGBsaXN0ZW5lcmAgZnVuY3Rpb24gZGVjbGFyZXMgdHdvIG9yIG1vcmUgYXJndW1lbnRzLlxuICAgICAgICogICAgLSBUaGUgYHNjb3BlYCBhcmd1bWVudCByZWZlcnMgdG8gdGhlIGN1cnJlbnQgc2NvcGUuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgbGlzdGVuZXIuIFdoZW4gdGhlXG4gICAgICAgKiAgICBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gaXMgZXhlY3V0ZWQsIHRoZSBpbnRlcm5hbCB3YXRjaCBvcGVyYXRpb24gaXMgdGVybWluYXRlZC5cbiAgICAgICAqL1xuICAgICAgJHdhdGNoQ29sbGVjdGlvbjogZnVuY3Rpb24ob2JqLCBsaXN0ZW5lcikge1xuICAgICAgICAkd2F0Y2hDb2xsZWN0aW9uSW50ZXJjZXB0b3IuJHN0YXRlZnVsID0gdHJ1ZTtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8vIHRoZSBjdXJyZW50IHZhbHVlLCB1cGRhdGVkIG9uIGVhY2ggZGlydHktY2hlY2sgcnVuXG4gICAgICAgIHZhciBuZXdWYWx1ZTtcbiAgICAgICAgLy8gYSBzaGFsbG93IGNvcHkgb2YgdGhlIG5ld1ZhbHVlIGZyb20gdGhlIGxhc3QgZGlydHktY2hlY2sgcnVuLFxuICAgICAgICAvLyB1cGRhdGVkIHRvIG1hdGNoIG5ld1ZhbHVlIGR1cmluZyBkaXJ0eS1jaGVjayBydW5cbiAgICAgICAgdmFyIG9sZFZhbHVlO1xuICAgICAgICAvLyBhIHNoYWxsb3cgY29weSBvZiB0aGUgbmV3VmFsdWUgZnJvbSB3aGVuIHRoZSBsYXN0IGNoYW5nZSBoYXBwZW5lZFxuICAgICAgICB2YXIgdmVyeU9sZFZhbHVlO1xuICAgICAgICAvLyBvbmx5IHRyYWNrIHZlcnlPbGRWYWx1ZSBpZiB0aGUgbGlzdGVuZXIgaXMgYXNraW5nIGZvciBpdFxuICAgICAgICB2YXIgdHJhY2tWZXJ5T2xkVmFsdWUgPSAobGlzdGVuZXIubGVuZ3RoID4gMSk7XG4gICAgICAgIHZhciBjaGFuZ2VEZXRlY3RlZCA9IDA7XG4gICAgICAgIHZhciBjaGFuZ2VEZXRlY3RvciA9ICRwYXJzZShvYmosICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvcik7XG4gICAgICAgIHZhciBpbnRlcm5hbEFycmF5ID0gW107XG4gICAgICAgIHZhciBpbnRlcm5hbE9iamVjdCA9IHt9O1xuICAgICAgICB2YXIgaW5pdFJ1biA9IHRydWU7XG4gICAgICAgIHZhciBvbGRMZW5ndGggPSAwO1xuXG4gICAgICAgIGZ1bmN0aW9uICR3YXRjaENvbGxlY3Rpb25JbnRlcmNlcHRvcihfdmFsdWUpIHtcbiAgICAgICAgICBuZXdWYWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgICB2YXIgbmV3TGVuZ3RoLCBrZXksIGJvdGhOYU4sIG5ld0l0ZW0sIG9sZEl0ZW07XG5cbiAgICAgICAgICAvLyBJZiB0aGUgbmV3IHZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlbiByZXR1cm4gdW5kZWZpbmVkIGFzIHRoZSB3YXRjaCBtYXkgYmUgYSBvbmUtdGltZSB3YXRjaFxuICAgICAgICAgIGlmIChpc1VuZGVmaW5lZChuZXdWYWx1ZSkpIHJldHVybjtcblxuICAgICAgICAgIGlmICghaXNPYmplY3QobmV3VmFsdWUpKSB7IC8vIGlmIHByaW1pdGl2ZVxuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICBvbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheUxpa2UobmV3VmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IGludGVybmFsQXJyYXkpIHtcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBzb21ldGhpbmcgd2hpY2ggd2FzIG5vdCBhbiBhcnJheSBpbnRvIGFycmF5LlxuICAgICAgICAgICAgICBvbGRWYWx1ZSA9IGludGVybmFsQXJyYXk7XG4gICAgICAgICAgICAgIG9sZExlbmd0aCA9IG9sZFZhbHVlLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld0xlbmd0aCA9IG5ld1ZhbHVlLmxlbmd0aDtcblxuICAgICAgICAgICAgaWYgKG9sZExlbmd0aCAhPT0gbmV3TGVuZ3RoKSB7XG4gICAgICAgICAgICAgIC8vIGlmIGxlbmd0aHMgZG8gbm90IG1hdGNoIHdlIG5lZWQgdG8gdHJpZ2dlciBjaGFuZ2Ugbm90aWZpY2F0aW9uXG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICAgIG9sZFZhbHVlLmxlbmd0aCA9IG9sZExlbmd0aCA9IG5ld0xlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvcHkgdGhlIGl0ZW1zIHRvIG9sZFZhbHVlIGFuZCBsb29rIGZvciBjaGFuZ2VzLlxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBvbGRJdGVtID0gb2xkVmFsdWVbaV07XG4gICAgICAgICAgICAgIG5ld0l0ZW0gPSBuZXdWYWx1ZVtpXTtcblxuICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgICAgICAgICAgIGJvdGhOYU4gPSAob2xkSXRlbSAhPT0gb2xkSXRlbSkgJiYgKG5ld0l0ZW0gIT09IG5ld0l0ZW0pO1xuICAgICAgICAgICAgICBpZiAoIWJvdGhOYU4gJiYgKG9sZEl0ZW0gIT09IG5ld0l0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0ZWQrKztcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZVtpXSA9IG5ld0l0ZW07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBpbnRlcm5hbE9iamVjdCkge1xuICAgICAgICAgICAgICAvLyB3ZSBhcmUgdHJhbnNpdGlvbmluZyBmcm9tIHNvbWV0aGluZyB3aGljaCB3YXMgbm90IGFuIG9iamVjdCBpbnRvIG9iamVjdC5cbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSBpbnRlcm5hbE9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICBvbGRMZW5ndGggPSAwO1xuICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY29weSB0aGUgaXRlbXMgdG8gb2xkVmFsdWUgYW5kIGxvb2sgZm9yIGNoYW5nZXMuXG4gICAgICAgICAgICBuZXdMZW5ndGggPSAwO1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwobmV3VmFsdWUsIGtleSkpIHtcbiAgICAgICAgICAgICAgICBuZXdMZW5ndGgrKztcbiAgICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3VmFsdWVba2V5XTtcbiAgICAgICAgICAgICAgICBvbGRJdGVtID0gb2xkVmFsdWVba2V5XTtcblxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmVcbiAgICAgICAgICAgICAgICAgIGJvdGhOYU4gPSAob2xkSXRlbSAhPT0gb2xkSXRlbSkgJiYgKG5ld0l0ZW0gIT09IG5ld0l0ZW0pO1xuICAgICAgICAgICAgICAgICAgaWYgKCFib3RoTmFOICYmIChvbGRJdGVtICE9PSBuZXdJdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3RlZCsrO1xuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZVtrZXldID0gbmV3SXRlbTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgb2xkTGVuZ3RoKys7XG4gICAgICAgICAgICAgICAgICBvbGRWYWx1ZVtrZXldID0gbmV3SXRlbTtcbiAgICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob2xkTGVuZ3RoID4gbmV3TGVuZ3RoKSB7XG4gICAgICAgICAgICAgIC8vIHdlIHVzZWQgdG8gaGF2ZSBtb3JlIGtleXMsIG5lZWQgdG8gZmluZCB0aGVtIGFuZCBkZXN0cm95IHRoZW0uXG4gICAgICAgICAgICAgIGNoYW5nZURldGVjdGVkKys7XG4gICAgICAgICAgICAgIGZvciAoa2V5IGluIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICBvbGRMZW5ndGgtLTtcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvbGRWYWx1ZVtrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gY2hhbmdlRGV0ZWN0ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiAkd2F0Y2hDb2xsZWN0aW9uQWN0aW9uKCkge1xuICAgICAgICAgIGlmIChpbml0UnVuKSB7XG4gICAgICAgICAgICBpbml0UnVuID0gZmFsc2U7XG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZSwgbmV3VmFsdWUsIHNlbGYpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZSwgdmVyeU9sZFZhbHVlLCBzZWxmKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBtYWtlIGEgY29weSBmb3IgdGhlIG5leHQgdGltZSBhIGNvbGxlY3Rpb24gaXMgY2hhbmdlZFxuICAgICAgICAgIGlmICh0cmFja1ZlcnlPbGRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFpc09iamVjdChuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgLy9wcmltaXRpdmVcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlMaWtlKG5ld1ZhbHVlKSkge1xuICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWUgPSBuZXcgQXJyYXkobmV3VmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZlcnlPbGRWYWx1ZVtpXSA9IG5ld1ZhbHVlW2ldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBpZiBvYmplY3RcbiAgICAgICAgICAgICAgdmVyeU9sZFZhbHVlID0ge307XG4gICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG5ld1ZhbHVlLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICB2ZXJ5T2xkVmFsdWVba2V5XSA9IG5ld1ZhbHVlW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuJHdhdGNoKGNoYW5nZURldGVjdG9yLCAkd2F0Y2hDb2xsZWN0aW9uQWN0aW9uKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogUHJvY2Vzc2VzIGFsbCBvZiB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNoZXJzfSBvZiB0aGUgY3VycmVudCBzY29wZSBhbmRcbiAgICAgICAqIGl0cyBjaGlsZHJlbi4gQmVjYXVzZSBhIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyfSdzIGxpc3RlbmVyIGNhbiBjaGFuZ2VcbiAgICAgICAqIHRoZSBtb2RlbCwgdGhlIGAkZGlnZXN0KClgIGtlZXBzIGNhbGxpbmcgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCB3YXRjaGVyc31cbiAgICAgICAqIHVudGlsIG5vIG1vcmUgbGlzdGVuZXJzIGFyZSBmaXJpbmcuIFRoaXMgbWVhbnMgdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBnZXQgaW50byBhbiBpbmZpbml0ZVxuICAgICAgICogbG9vcC4gVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGAnTWF4aW11bSBpdGVyYXRpb24gbGltaXQgZXhjZWVkZWQuJ2AgaWYgdGhlIG51bWJlciBvZlxuICAgICAgICogaXRlcmF0aW9ucyBleGNlZWRzIDEwLlxuICAgICAgICpcbiAgICAgICAqIFVzdWFsbHksIHlvdSBkb24ndCBjYWxsIGAkZGlnZXN0KClgIGRpcmVjdGx5IGluXG4gICAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ29udHJvbGxlciBjb250cm9sbGVyc30gb3IgaW5cbiAgICAgICAqIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyI2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS5cbiAgICAgICAqIEluc3RlYWQsIHlvdSBzaG91bGQgY2FsbCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkYXBwbHkgJGFwcGx5KCl9ICh0eXBpY2FsbHkgZnJvbSB3aXRoaW5cbiAgICAgICAqIGEge0BsaW5rIG5nLiRjb21waWxlUHJvdmlkZXIjZGlyZWN0aXZlIGRpcmVjdGl2ZX0pLCB3aGljaCB3aWxsIGZvcmNlIGEgYCRkaWdlc3QoKWAuXG4gICAgICAgKlxuICAgICAgICogSWYgeW91IHdhbnQgdG8gYmUgbm90aWZpZWQgd2hlbmV2ZXIgYCRkaWdlc3QoKWAgaXMgY2FsbGVkLFxuICAgICAgICogeW91IGNhbiByZWdpc3RlciBhIGB3YXRjaEV4cHJlc3Npb25gIGZ1bmN0aW9uIHdpdGhcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyR3YXRjaCAkd2F0Y2goKX0gd2l0aCBubyBgbGlzdGVuZXJgLlxuICAgICAgICpcbiAgICAgICAqIEluIHVuaXQgdGVzdHMsIHlvdSBtYXkgbmVlZCB0byBjYWxsIGAkZGlnZXN0KClgIHRvIHNpbXVsYXRlIHRoZSBzY29wZSBsaWZlIGN5Y2xlLlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICB2YXIgc2NvcGUgPSAuLi47XG4gICAgICAgICAgIHNjb3BlLm5hbWUgPSAnbWlza28nO1xuICAgICAgICAgICBzY29wZS5jb3VudGVyID0gMDtcblxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgwKTtcbiAgICAgICAgICAgc2NvcGUuJHdhdGNoKCduYW1lJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgc2NvcGUuY291bnRlciA9IHNjb3BlLmNvdW50ZXIgKyAxO1xuICAgICAgICAgICB9KTtcbiAgICAgICAgICAgZXhwZWN0KHNjb3BlLmNvdW50ZXIpLnRvRXF1YWwoMCk7XG5cbiAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAvLyB0aGUgbGlzdGVuZXIgaXMgYWx3YXlzIGNhbGxlZCBkdXJpbmcgdGhlIGZpcnN0ICRkaWdlc3QgbG9vcCBhZnRlciBpdCB3YXMgcmVnaXN0ZXJlZFxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgxKTtcblxuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIC8vIGJ1dCBub3cgaXQgd2lsbCBub3QgYmUgY2FsbGVkIHVubGVzcyB0aGUgdmFsdWUgY2hhbmdlc1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuY291bnRlcikudG9FcXVhbCgxKTtcblxuICAgICAgICAgICBzY29wZS5uYW1lID0gJ2FkYW0nO1xuICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgIGV4cGVjdChzY29wZS5jb3VudGVyKS50b0VxdWFsKDIpO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICovXG4gICAgICAkZGlnZXN0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHdhdGNoLCB2YWx1ZSwgbGFzdCwgZm4sIGdldCxcbiAgICAgICAgICAgIHdhdGNoZXJzLFxuICAgICAgICAgICAgZGlydHksIHR0bCA9IFRUTCxcbiAgICAgICAgICAgIG5leHQsIGN1cnJlbnQsIHRhcmdldCA9IHRoaXMsXG4gICAgICAgICAgICB3YXRjaExvZyA9IFtdLFxuICAgICAgICAgICAgbG9nSWR4LCBhc3luY1Rhc2s7XG5cbiAgICAgICAgYmVnaW5QaGFzZSgnJGRpZ2VzdCcpO1xuICAgICAgICAvLyBDaGVjayBmb3IgY2hhbmdlcyB0byBicm93c2VyIHVybCB0aGF0IGhhcHBlbmVkIGluIHN5bmMgYmVmb3JlIHRoZSBjYWxsIHRvICRkaWdlc3RcbiAgICAgICAgJGJyb3dzZXIuJCRjaGVja1VybENoYW5nZSgpO1xuXG4gICAgICAgIGlmICh0aGlzID09PSAkcm9vdFNjb3BlICYmIGFwcGx5QXN5bmNJZCAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIHJvb3Qgc2NvcGUsIGFuZCAkYXBwbHlBc3luYyBoYXMgc2NoZWR1bGVkIGEgZGVmZXJyZWQgJGFwcGx5KCksIHRoZW5cbiAgICAgICAgICAvLyBjYW5jZWwgdGhlIHNjaGVkdWxlZCAkYXBwbHkgYW5kIGZsdXNoIHRoZSBxdWV1ZSBvZiBleHByZXNzaW9ucyB0byBiZSBldmFsdWF0ZWQuXG4gICAgICAgICAgJGJyb3dzZXIuZGVmZXIuY2FuY2VsKGFwcGx5QXN5bmNJZCk7XG4gICAgICAgICAgZmx1c2hBcHBseUFzeW5jKCk7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0RGlydHlXYXRjaCA9IG51bGw7XG5cbiAgICAgICAgZG8geyAvLyBcIndoaWxlIGRpcnR5XCIgbG9vcFxuICAgICAgICAgIGRpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgY3VycmVudCA9IHRhcmdldDtcblxuICAgICAgICAgIC8vIEl0J3Mgc2FmZSBmb3IgYXN5bmNRdWV1ZVBvc2l0aW9uIHRvIGJlIGEgbG9jYWwgdmFyaWFibGUgaGVyZSBiZWNhdXNlIHRoaXMgbG9vcCBjYW4ndFxuICAgICAgICAgIC8vIGJlIHJlZW50ZXJlZCByZWN1cnNpdmVseS4gQ2FsbGluZyAkZGlnZXN0IGZyb20gYSBmdW5jdGlvbiBwYXNzZWQgdG8gJGV2YWxBc3luYyB3b3VsZFxuICAgICAgICAgIC8vIGxlYWQgdG8gYSAnJGRpZ2VzdCBhbHJlYWR5IGluIHByb2dyZXNzJyBlcnJvci5cbiAgICAgICAgICBmb3IgKHZhciBhc3luY1F1ZXVlUG9zaXRpb24gPSAwOyBhc3luY1F1ZXVlUG9zaXRpb24gPCBhc3luY1F1ZXVlLmxlbmd0aDsgYXN5bmNRdWV1ZVBvc2l0aW9uKyspIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGFzeW5jVGFzayA9IGFzeW5jUXVldWVbYXN5bmNRdWV1ZVBvc2l0aW9uXTtcbiAgICAgICAgICAgICAgZm4gPSBhc3luY1Rhc2suZm47XG4gICAgICAgICAgICAgIGZuKGFzeW5jVGFzay5zY29wZSwgYXN5bmNUYXNrLmxvY2Fscyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGFzdERpcnR5V2F0Y2ggPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhc3luY1F1ZXVlLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICB0cmF2ZXJzZVNjb3Blc0xvb3A6XG4gICAgICAgICAgZG8geyAvLyBcInRyYXZlcnNlIHRoZSBzY29wZXNcIiBsb29wXG4gICAgICAgICAgICBpZiAoKHdhdGNoZXJzID0gY3VycmVudC4kJHdhdGNoZXJzKSkge1xuICAgICAgICAgICAgICAvLyBwcm9jZXNzIG91ciB3YXRjaGVzXG4gICAgICAgICAgICAgIHdhdGNoZXJzLiQkZGlnZXN0V2F0Y2hJbmRleCA9IHdhdGNoZXJzLmxlbmd0aDtcbiAgICAgICAgICAgICAgd2hpbGUgKHdhdGNoZXJzLiQkZGlnZXN0V2F0Y2hJbmRleC0tKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIHdhdGNoID0gd2F0Y2hlcnNbd2F0Y2hlcnMuJCRkaWdlc3RXYXRjaEluZGV4XTtcbiAgICAgICAgICAgICAgICAgIC8vIE1vc3QgY29tbW9uIHdhdGNoZXMgYXJlIG9uIHByaW1pdGl2ZXMsIGluIHdoaWNoIGNhc2Ugd2UgY2FuIHNob3J0XG4gICAgICAgICAgICAgICAgICAvLyBjaXJjdWl0IGl0IHdpdGggPT09IG9wZXJhdG9yLCBvbmx5IHdoZW4gPT09IGZhaWxzIGRvIHdlIHVzZSAuZXF1YWxzXG4gICAgICAgICAgICAgICAgICBpZiAod2F0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0ID0gd2F0Y2guZ2V0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlID0gZ2V0KGN1cnJlbnQpKSAhPT0gKGxhc3QgPSB3YXRjaC5sYXN0KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgISh3YXRjaC5lcVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZXF1YWxzKHZhbHVlLCBsYXN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGlzTnVtYmVyTmFOKHZhbHVlKSAmJiBpc051bWJlck5hTihsYXN0KSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgIGxhc3REaXJ0eVdhdGNoID0gd2F0Y2g7XG4gICAgICAgICAgICAgICAgICAgICAgd2F0Y2gubGFzdCA9IHdhdGNoLmVxID8gY29weSh2YWx1ZSwgbnVsbCkgOiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICBmbiA9IHdhdGNoLmZuO1xuICAgICAgICAgICAgICAgICAgICAgIGZuKHZhbHVlLCAoKGxhc3QgPT09IGluaXRXYXRjaFZhbCkgPyB2YWx1ZSA6IGxhc3QpLCBjdXJyZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodHRsIDwgNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nSWR4ID0gNCAtIHR0bDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2F0Y2hMb2dbbG9nSWR4XSkgd2F0Y2hMb2dbbG9nSWR4XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2F0Y2hMb2dbbG9nSWR4XS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBpc0Z1bmN0aW9uKHdhdGNoLmV4cCkgPyAnZm46ICcgKyAod2F0Y2guZXhwLm5hbWUgfHwgd2F0Y2guZXhwLnRvU3RyaW5nKCkpIDogd2F0Y2guZXhwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWw6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWw6IGxhc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3YXRjaCA9PT0gbGFzdERpcnR5V2F0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbW9zdCByZWNlbnRseSBkaXJ0eSB3YXRjaGVyIGlzIG5vdyBjbGVhbiwgc2hvcnQgY2lyY3VpdCBzaW5jZSB0aGUgcmVtYWluaW5nIHdhdGNoZXJzXG4gICAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSBhbHJlYWR5IGJlZW4gdGVzdGVkLlxuICAgICAgICAgICAgICAgICAgICAgIGRpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWsgdHJhdmVyc2VTY29wZXNMb29wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluc2FuaXR5IFdhcm5pbmc6IHNjb3BlIGRlcHRoLWZpcnN0IHRyYXZlcnNhbFxuICAgICAgICAgICAgLy8geWVzLCB0aGlzIGNvZGUgaXMgYSBiaXQgY3JhenksIGJ1dCBpdCB3b3JrcyBhbmQgd2UgaGF2ZSB0ZXN0cyB0byBwcm92ZSBpdCFcbiAgICAgICAgICAgIC8vIHRoaXMgcGllY2Ugc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSB0cmF2ZXJzYWwgaW4gJGJyb2FkY2FzdFxuICAgICAgICAgICAgaWYgKCEobmV4dCA9ICgoY3VycmVudC4kJHdhdGNoZXJzQ291bnQgJiYgY3VycmVudC4kJGNoaWxkSGVhZCkgfHxcbiAgICAgICAgICAgICAgICAoY3VycmVudCAhPT0gdGFyZ2V0ICYmIGN1cnJlbnQuJCRuZXh0U2libGluZykpKSkge1xuICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gdGFyZ2V0ICYmICEobmV4dCA9IGN1cnJlbnQuJCRuZXh0U2libGluZykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC4kcGFyZW50O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSB3aGlsZSAoKGN1cnJlbnQgPSBuZXh0KSk7XG5cbiAgICAgICAgICAvLyBgYnJlYWsgdHJhdmVyc2VTY29wZXNMb29wO2AgdGFrZXMgdXMgdG8gaGVyZVxuXG4gICAgICAgICAgaWYgKChkaXJ0eSB8fCBhc3luY1F1ZXVlLmxlbmd0aCkgJiYgISh0dGwtLSkpIHtcbiAgICAgICAgICAgIGNsZWFyUGhhc2UoKTtcbiAgICAgICAgICAgIHRocm93ICRyb290U2NvcGVNaW5FcnIoJ2luZmRpZycsXG4gICAgICAgICAgICAgICAgJ3swfSAkZGlnZXN0KCkgaXRlcmF0aW9ucyByZWFjaGVkLiBBYm9ydGluZyFcXG4nICtcbiAgICAgICAgICAgICAgICAnV2F0Y2hlcnMgZmlyZWQgaW4gdGhlIGxhc3QgNSBpdGVyYXRpb25zOiB7MX0nLFxuICAgICAgICAgICAgICAgIFRUTCwgd2F0Y2hMb2cpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9IHdoaWxlIChkaXJ0eSB8fCBhc3luY1F1ZXVlLmxlbmd0aCk7XG5cbiAgICAgICAgY2xlYXJQaGFzZSgpO1xuXG4gICAgICAgIC8vIHBvc3REaWdlc3RRdWV1ZVBvc2l0aW9uIGlzbid0IGxvY2FsIGhlcmUgYmVjYXVzZSB0aGlzIGxvb3AgY2FuIGJlIHJlZW50ZXJlZCByZWN1cnNpdmVseS5cbiAgICAgICAgd2hpbGUgKHBvc3REaWdlc3RRdWV1ZVBvc2l0aW9uIDwgcG9zdERpZ2VzdFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwb3N0RGlnZXN0UXVldWVbcG9zdERpZ2VzdFF1ZXVlUG9zaXRpb24rK10oKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcG9zdERpZ2VzdFF1ZXVlLmxlbmd0aCA9IHBvc3REaWdlc3RRdWV1ZVBvc2l0aW9uID0gMDtcblxuICAgICAgICAvLyBDaGVjayBmb3IgY2hhbmdlcyB0byBicm93c2VyIHVybCB0aGF0IGhhcHBlbmVkIGR1cmluZyB0aGUgJGRpZ2VzdFxuICAgICAgICAvLyAoZm9yIHdoaWNoIG5vIGV2ZW50IGlzIGZpcmVkOyBlLmcuIHZpYSBgaGlzdG9yeS5wdXNoU3RhdGUoKWApXG4gICAgICAgICRicm93c2VyLiQkY2hlY2tVcmxDaGFuZ2UoKTtcbiAgICAgIH0sXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgZXZlbnRcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGRlc3Ryb3lcbiAgICAgICAqIEBldmVudFR5cGUgYnJvYWRjYXN0IG9uIHNjb3BlIGJlaW5nIGRlc3Ryb3llZFxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogQnJvYWRjYXN0ZWQgd2hlbiBhIHNjb3BlIGFuZCBpdHMgY2hpbGRyZW4gYXJlIGJlaW5nIGRlc3Ryb3llZC5cbiAgICAgICAqXG4gICAgICAgKiBOb3RlIHRoYXQsIGluIEFuZ3VsYXJKUywgdGhlcmUgaXMgYWxzbyBhIGAkZGVzdHJveWAgalF1ZXJ5IGV2ZW50LCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAgICogY2xlYW4gdXAgRE9NIGJpbmRpbmdzIGJlZm9yZSBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkZGVzdHJveVxuICAgICAgICogQGtpbmQgZnVuY3Rpb25cbiAgICAgICAqXG4gICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICAqIFJlbW92ZXMgdGhlIGN1cnJlbnQgc2NvcGUgKGFuZCBhbGwgb2YgaXRzIGNoaWxkcmVuKSBmcm9tIHRoZSBwYXJlbnQgc2NvcGUuIFJlbW92YWwgaW1wbGllc1xuICAgICAgICogdGhhdCBjYWxscyB0byB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QoKX0gd2lsbCBubyBsb25nZXJcbiAgICAgICAqIHByb3BhZ2F0ZSB0byB0aGUgY3VycmVudCBzY29wZSBhbmQgaXRzIGNoaWxkcmVuLiBSZW1vdmFsIGFsc28gaW1wbGllcyB0aGF0IHRoZSBjdXJyZW50XG4gICAgICAgKiBzY29wZSBpcyBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBgJGRlc3Ryb3koKWAgaXMgdXN1YWxseSB1c2VkIGJ5IGRpcmVjdGl2ZXMgc3VjaCBhc1xuICAgICAgICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0gZm9yIG1hbmFnaW5nIHRoZVxuICAgICAgICogdW5yb2xsaW5nIG9mIHRoZSBsb29wLlxuICAgICAgICpcbiAgICAgICAqIEp1c3QgYmVmb3JlIGEgc2NvcGUgaXMgZGVzdHJveWVkLCBhIGAkZGVzdHJveWAgZXZlbnQgaXMgYnJvYWRjYXN0ZWQgb24gdGhpcyBzY29wZS5cbiAgICAgICAqIEFwcGxpY2F0aW9uIGNvZGUgY2FuIHJlZ2lzdGVyIGEgYCRkZXN0cm95YCBldmVudCBoYW5kbGVyIHRoYXQgd2lsbCBnaXZlIGl0IGEgY2hhbmNlIHRvXG4gICAgICAgKiBwZXJmb3JtIGFueSBuZWNlc3NhcnkgY2xlYW51cC5cbiAgICAgICAqXG4gICAgICAgKiBOb3RlIHRoYXQsIGluIEFuZ3VsYXJKUywgdGhlcmUgaXMgYWxzbyBhIGAkZGVzdHJveWAgalF1ZXJ5IGV2ZW50LCB3aGljaCBjYW4gYmUgdXNlZCB0b1xuICAgICAgICogY2xlYW4gdXAgRE9NIGJpbmRpbmdzIGJlZm9yZSBhbiBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICAgICAgICovXG4gICAgICAkZGVzdHJveTogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFdlIGNhbid0IGRlc3Ryb3kgYSBzY29wZSB0aGF0IGhhcyBiZWVuIGFscmVhZHkgZGVzdHJveWVkLlxuICAgICAgICBpZiAodGhpcy4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXG4gICAgICAgIHRoaXMuJGJyb2FkY2FzdCgnJGRlc3Ryb3knKTtcbiAgICAgICAgdGhpcy4kJGRlc3Ryb3llZCA9IHRydWU7XG5cbiAgICAgICAgaWYgKHRoaXMgPT09ICRyb290U2NvcGUpIHtcbiAgICAgICAgICAvL1JlbW92ZSBoYW5kbGVycyBhdHRhY2hlZCB0byB3aW5kb3cgd2hlbiAkcm9vdFNjb3BlIGlzIHJlbW92ZWRcbiAgICAgICAgICAkYnJvd3Nlci4kJGFwcGxpY2F0aW9uRGVzdHJveWVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpbmNyZW1lbnRXYXRjaGVyc0NvdW50KHRoaXMsIC10aGlzLiQkd2F0Y2hlcnNDb3VudCk7XG4gICAgICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiB0aGlzLiQkbGlzdGVuZXJDb3VudCkge1xuICAgICAgICAgIGRlY3JlbWVudExpc3RlbmVyQ291bnQodGhpcywgdGhpcy4kJGxpc3RlbmVyQ291bnRbZXZlbnROYW1lXSwgZXZlbnROYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldmVyIGFsbCB0aGUgcmVmZXJlbmNlcyB0byBwYXJlbnQgc2NvcGVzIChhZnRlciB0aGlzIGNsZWFudXAsIHRoZSBjdXJyZW50IHNjb3BlIHNob3VsZFxuICAgICAgICAvLyBub3QgYmUgcmV0YWluZWQgYnkgYW55IG9mIG91ciByZWZlcmVuY2VzIGFuZCBzaG91bGQgYmUgZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbilcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuJCRjaGlsZEhlYWQgPT09IHRoaXMpIHBhcmVudC4kJGNoaWxkSGVhZCA9IHRoaXMuJCRuZXh0U2libGluZztcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuJCRjaGlsZFRhaWwgPT09IHRoaXMpIHBhcmVudC4kJGNoaWxkVGFpbCA9IHRoaXMuJCRwcmV2U2libGluZztcbiAgICAgICAgaWYgKHRoaXMuJCRwcmV2U2libGluZykgdGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmcgPSB0aGlzLiQkbmV4dFNpYmxpbmc7XG4gICAgICAgIGlmICh0aGlzLiQkbmV4dFNpYmxpbmcpIHRoaXMuJCRuZXh0U2libGluZy4kJHByZXZTaWJsaW5nID0gdGhpcy4kJHByZXZTaWJsaW5nO1xuXG4gICAgICAgIC8vIERpc2FibGUgbGlzdGVuZXJzLCB3YXRjaGVycyBhbmQgYXBwbHkvZGlnZXN0IG1ldGhvZHNcbiAgICAgICAgdGhpcy4kZGVzdHJveSA9IHRoaXMuJGRpZ2VzdCA9IHRoaXMuJGFwcGx5ID0gdGhpcy4kZXZhbEFzeW5jID0gdGhpcy4kYXBwbHlBc3luYyA9IG5vb3A7XG4gICAgICAgIHRoaXMuJG9uID0gdGhpcy4kd2F0Y2ggPSB0aGlzLiR3YXRjaEdyb3VwID0gZnVuY3Rpb24oKSB7IHJldHVybiBub29wOyB9O1xuICAgICAgICB0aGlzLiQkbGlzdGVuZXJzID0ge307XG5cbiAgICAgICAgLy8gRGlzY29ubmVjdCB0aGUgbmV4dCBzaWJsaW5nIHRvIHByZXZlbnQgYGNsZWFuVXBTY29wZWAgZGVzdHJveWluZyB0aG9zZSB0b29cbiAgICAgICAgdGhpcy4kJG5leHRTaWJsaW5nID0gbnVsbDtcbiAgICAgICAgY2xlYW5VcFNjb3BlKHRoaXMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRldmFsXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRXhlY3V0ZXMgdGhlIGBleHByZXNzaW9uYCBvbiB0aGUgY3VycmVudCBzY29wZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0LiBBbnkgZXhjZXB0aW9ucyBpblxuICAgICAgICogdGhlIGV4cHJlc3Npb24gYXJlIHByb3BhZ2F0ZWQgKHVuY2F1Z2h0KS4gVGhpcyBpcyB1c2VmdWwgd2hlbiBldmFsdWF0aW5nIEFuZ3VsYXJcbiAgICAgICAqIGV4cHJlc3Npb25zLlxuICAgICAgICpcbiAgICAgICAqIEBleGFtcGxlXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICB2YXIgc2NvcGUgPSBuZy4kcm9vdFNjb3BlLlNjb3BlKCk7XG4gICAgICAgICAgIHNjb3BlLmEgPSAxO1xuICAgICAgICAgICBzY29wZS5iID0gMjtcblxuICAgICAgICAgICBleHBlY3Qoc2NvcGUuJGV2YWwoJ2ErYicpKS50b0VxdWFsKDMpO1xuICAgICAgICAgICBleHBlY3Qoc2NvcGUuJGV2YWwoZnVuY3Rpb24oc2NvcGUpeyByZXR1cm4gc2NvcGUuYSArIHNjb3BlLmI7IH0pKS50b0VxdWFsKDMpO1xuICAgICAgICogYGBgXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwcmVzc2lvbiBBbiBhbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICAgKlxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiAge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0uXG4gICAgICAgKiAgICAtIGBmdW5jdGlvbihzY29wZSlgOiBleGVjdXRlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7KG9iamVjdCk9fSBsb2NhbHMgTG9jYWwgdmFyaWFibGVzIG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlcyBpbiBzY29wZS5cbiAgICAgICAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgdGhlIGV4cHJlc3Npb24uXG4gICAgICAgKi9cbiAgICAgICRldmFsOiBmdW5jdGlvbihleHByLCBsb2NhbHMpIHtcbiAgICAgICAgcmV0dXJuICRwYXJzZShleHByKSh0aGlzLCBsb2NhbHMpO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRldmFsQXN5bmNcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBFeGVjdXRlcyB0aGUgZXhwcmVzc2lvbiBvbiB0aGUgY3VycmVudCBzY29wZSBhdCBhIGxhdGVyIHBvaW50IGluIHRpbWUuXG4gICAgICAgKlxuICAgICAgICogVGhlIGAkZXZhbEFzeW5jYCBtYWtlcyBubyBndWFyYW50ZWVzIGFzIHRvIHdoZW4gdGhlIGBleHByZXNzaW9uYCB3aWxsIGJlIGV4ZWN1dGVkLCBvbmx5XG4gICAgICAgKiB0aGF0OlxuICAgICAgICpcbiAgICAgICAqICAgLSBpdCB3aWxsIGV4ZWN1dGUgYWZ0ZXIgdGhlIGZ1bmN0aW9uIHRoYXQgc2NoZWR1bGVkIHRoZSBldmFsdWF0aW9uIChwcmVmZXJhYmx5IGJlZm9yZSBET01cbiAgICAgICAqICAgICByZW5kZXJpbmcpLlxuICAgICAgICogICAtIGF0IGxlYXN0IG9uZSB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkZGlnZXN0ICRkaWdlc3QgY3ljbGV9IHdpbGwgYmUgcGVyZm9ybWVkIGFmdGVyXG4gICAgICAgKiAgICAgYGV4cHJlc3Npb25gIGV4ZWN1dGlvbi5cbiAgICAgICAqXG4gICAgICAgKiBBbnkgZXhjZXB0aW9ucyBmcm9tIHRoZSBleGVjdXRpb24gb2YgdGhlIGV4cHJlc3Npb24gYXJlIGZvcndhcmRlZCB0byB0aGVcbiAgICAgICAqIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciAkZXhjZXB0aW9uSGFuZGxlcn0gc2VydmljZS5cbiAgICAgICAqXG4gICAgICAgKiBfX05vdGU6X18gaWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGAkZGlnZXN0YCBjeWNsZSwgYSBuZXcgYCRkaWdlc3RgIGN5Y2xlXG4gICAgICAgKiB3aWxsIGJlIHNjaGVkdWxlZC4gSG93ZXZlciwgaXQgaXMgZW5jb3VyYWdlZCB0byBhbHdheXMgY2FsbCBjb2RlIHRoYXQgY2hhbmdlcyB0aGUgbW9kZWxcbiAgICAgICAqIGZyb20gd2l0aGluIGFuIGAkYXBwbHlgIGNhbGwuIFRoYXQgaW5jbHVkZXMgY29kZSBldmFsdWF0ZWQgdmlhIGAkZXZhbEFzeW5jYC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhzdHJpbmd8ZnVuY3Rpb24oKSk9fSBleHByZXNzaW9uIEFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0geyhvYmplY3QpPX0gbG9jYWxzIExvY2FsIHZhcmlhYmxlcyBvYmplY3QsIHVzZWZ1bCBmb3Igb3ZlcnJpZGluZyB2YWx1ZXMgaW4gc2NvcGUuXG4gICAgICAgKi9cbiAgICAgICRldmFsQXN5bmM6IGZ1bmN0aW9uKGV4cHIsIGxvY2Fscykge1xuICAgICAgICAvLyBpZiB3ZSBhcmUgb3V0c2lkZSBvZiBhbiAkZGlnZXN0IGxvb3AgYW5kIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgd2UgYXJlIHNjaGVkdWxpbmcgYXN5bmNcbiAgICAgICAgLy8gdGFzayBhbHNvIHNjaGVkdWxlIGFzeW5jIGF1dG8tZmx1c2hcbiAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UgJiYgIWFzeW5jUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoYXN5bmNRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhc3luY1F1ZXVlLnB1c2goe3Njb3BlOiB0aGlzLCBmbjogJHBhcnNlKGV4cHIpLCBsb2NhbHM6IGxvY2Fsc30pO1xuICAgICAgfSxcblxuICAgICAgJCRwb3N0RGlnZXN0OiBmdW5jdGlvbihmbikge1xuICAgICAgICBwb3N0RGlnZXN0UXVldWUucHVzaChmbik7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGFwcGx5XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogYCRhcHBseSgpYCBpcyB1c2VkIHRvIGV4ZWN1dGUgYW4gZXhwcmVzc2lvbiBpbiBhbmd1bGFyIGZyb20gb3V0c2lkZSBvZiB0aGUgYW5ndWxhclxuICAgICAgICogZnJhbWV3b3JrLiAoRm9yIGV4YW1wbGUgZnJvbSBicm93c2VyIERPTSBldmVudHMsIHNldFRpbWVvdXQsIFhIUiBvciB0aGlyZCBwYXJ0eSBsaWJyYXJpZXMpLlxuICAgICAgICogQmVjYXVzZSB3ZSBhcmUgY2FsbGluZyBpbnRvIHRoZSBhbmd1bGFyIGZyYW1ld29yayB3ZSBuZWVkIHRvIHBlcmZvcm0gcHJvcGVyIHNjb3BlIGxpZmVcbiAgICAgICAqIGN5Y2xlIG9mIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciBleGNlcHRpb24gaGFuZGxpbmd9LFxuICAgICAgICoge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGRpZ2VzdCBleGVjdXRpbmcgd2F0Y2hlc30uXG4gICAgICAgKlxuICAgICAgICogKipMaWZlIGN5Y2xlOiBQc2V1ZG8tQ29kZSBvZiBgJGFwcGx5KClgKipcbiAgICAgICAqXG4gICAgICAgKiBgYGBqc1xuICAgICAgICAgICBmdW5jdGlvbiAkYXBwbHkoZXhwcikge1xuICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICByZXR1cm4gJGV2YWwoZXhwcik7XG4gICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICRyb290LiRkaWdlc3QoKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgIH1cbiAgICAgICAqIGBgYFxuICAgICAgICpcbiAgICAgICAqXG4gICAgICAgKiBTY29wZSdzIGAkYXBwbHkoKWAgbWV0aG9kIHRyYW5zaXRpb25zIHRocm91Z2ggdGhlIGZvbGxvd2luZyBzdGFnZXM6XG4gICAgICAgKlxuICAgICAgICogMS4gVGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIGV4ZWN1dGVkIHVzaW5nIHRoZVxuICAgICAgICogICAge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGV2YWwgJGV2YWwoKX0gbWV0aG9kLlxuICAgICAgICogMi4gQW55IGV4Y2VwdGlvbnMgZnJvbSB0aGUgZXhlY3V0aW9uIG9mIHRoZSBleHByZXNzaW9uIGFyZSBmb3J3YXJkZWQgdG8gdGhlXG4gICAgICAgKiAgICB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKiAzLiBUaGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJHdhdGNoIHdhdGNofSBsaXN0ZW5lcnMgYXJlIGZpcmVkIGltbWVkaWF0ZWx5IGFmdGVyIHRoZVxuICAgICAgICogICAgZXhwcmVzc2lvbiB3YXMgZXhlY3V0ZWQgdXNpbmcgdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRkaWdlc3QgJGRpZ2VzdCgpfSBtZXRob2QuXG4gICAgICAgKlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7KHN0cmluZ3xmdW5jdGlvbigpKT19IGV4cCBBbiBhbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICAgKlxuICAgICAgICogICAgLSBgc3RyaW5nYDogZXhlY3V0ZSB1c2luZyB0aGUgcnVsZXMgYXMgZGVmaW5lZCBpbiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufS5cbiAgICAgICAqICAgIC0gYGZ1bmN0aW9uKHNjb3BlKWA6IGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggY3VycmVudCBgc2NvcGVgIHBhcmFtZXRlci5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uLlxuICAgICAgICovXG4gICAgICAkYXBwbHk6IGZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBiZWdpblBoYXNlKCckYXBwbHknKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGV2YWwoZXhwcik7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNsZWFyUGhhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5zYWZlLWZpbmFsbHlcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJGFwcGx5QXN5bmNcbiAgICAgICAqIEBraW5kIGZ1bmN0aW9uXG4gICAgICAgKlxuICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgKiBTY2hlZHVsZSB0aGUgaW52b2NhdGlvbiBvZiAkYXBwbHkgdG8gb2NjdXIgYXQgYSBsYXRlciB0aW1lLiBUaGUgYWN0dWFsIHRpbWUgZGlmZmVyZW5jZVxuICAgICAgICogdmFyaWVzIGFjcm9zcyBicm93c2VycywgYnV0IGlzIHR5cGljYWxseSBhcm91bmQgfjEwIG1pbGxpc2Vjb25kcy5cbiAgICAgICAqXG4gICAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHVwIG11bHRpcGxlIGV4cHJlc3Npb25zIHdoaWNoIG5lZWQgdG8gYmUgZXZhbHVhdGVkIGluIHRoZSBzYW1lXG4gICAgICAgKiBkaWdlc3QuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHsoc3RyaW5nfGZ1bmN0aW9uKCkpPX0gZXhwIEFuIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgICAqXG4gICAgICAgKiAgICAtIGBzdHJpbmdgOiBleGVjdXRlIHVzaW5nIHRoZSBydWxlcyBhcyBkZWZpbmVkIGluIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259LlxuICAgICAgICogICAgLSBgZnVuY3Rpb24oc2NvcGUpYDogZXhlY3V0ZSB0aGUgZnVuY3Rpb24gd2l0aCBjdXJyZW50IGBzY29wZWAgcGFyYW1ldGVyLlxuICAgICAgICovXG4gICAgICAkYXBwbHlBc3luYzogZnVuY3Rpb24oZXhwcikge1xuICAgICAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgICAgICBpZiAoZXhwcikge1xuICAgICAgICAgIGFwcGx5QXN5bmNRdWV1ZS5wdXNoKCRhcHBseUFzeW5jRXhwcmVzc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgZXhwciA9ICRwYXJzZShleHByKTtcbiAgICAgICAgc2NoZWR1bGVBcHBseUFzeW5jKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gJGFwcGx5QXN5bmNFeHByZXNzaW9uKCkge1xuICAgICAgICAgIHNjb3BlLiRldmFsKGV4cHIpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgICAqIEBuYW1lICRyb290U2NvcGUuU2NvcGUjJG9uXG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogTGlzdGVucyBvbiBldmVudHMgb2YgYSBnaXZlbiB0eXBlLiBTZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJGVtaXQgJGVtaXR9IGZvclxuICAgICAgICogZGlzY3Vzc2lvbiBvZiBldmVudCBsaWZlIGN5Y2xlLlxuICAgICAgICpcbiAgICAgICAqIFRoZSBldmVudCBsaXN0ZW5lciBmdW5jdGlvbiBmb3JtYXQgaXM6IGBmdW5jdGlvbihldmVudCwgYXJncy4uLilgLiBUaGUgYGV2ZW50YCBvYmplY3RcbiAgICAgICAqIHBhc3NlZCBpbnRvIHRoZSBsaXN0ZW5lciBoYXMgdGhlIGZvbGxvd2luZyBhdHRyaWJ1dGVzOlxuICAgICAgICpcbiAgICAgICAqICAgLSBgdGFyZ2V0U2NvcGVgIC0gYHtTY29wZX1gOiB0aGUgc2NvcGUgb24gd2hpY2ggdGhlIGV2ZW50IHdhcyBgJGVtaXRgLWVkIG9yXG4gICAgICAgKiAgICAgYCRicm9hZGNhc3RgLWVkLlxuICAgICAgICogICAtIGBjdXJyZW50U2NvcGVgIC0gYHtTY29wZX1gOiB0aGUgc2NvcGUgdGhhdCBpcyBjdXJyZW50bHkgaGFuZGxpbmcgdGhlIGV2ZW50LiBPbmNlIHRoZVxuICAgICAgICogICAgIGV2ZW50IHByb3BhZ2F0ZXMgdGhyb3VnaCB0aGUgc2NvcGUgaGllcmFyY2h5LCB0aGlzIHByb3BlcnR5IGlzIHNldCB0byBudWxsLlxuICAgICAgICogICAtIGBuYW1lYCAtIGB7c3RyaW5nfWA6IG5hbWUgb2YgdGhlIGV2ZW50LlxuICAgICAgICogICAtIGBzdG9wUHJvcGFnYXRpb25gIC0gYHtmdW5jdGlvbj19YDogY2FsbGluZyBgc3RvcFByb3BhZ2F0aW9uYCBmdW5jdGlvbiB3aWxsIGNhbmNlbFxuICAgICAgICogICAgIGZ1cnRoZXIgZXZlbnQgcHJvcGFnYXRpb24gKGF2YWlsYWJsZSBvbmx5IGZvciBldmVudHMgdGhhdCB3ZXJlIGAkZW1pdGAtZWQpLlxuICAgICAgICogICAtIGBwcmV2ZW50RGVmYXVsdGAgLSBge2Z1bmN0aW9ufWA6IGNhbGxpbmcgYHByZXZlbnREZWZhdWx0YCBzZXRzIGBkZWZhdWx0UHJldmVudGVkYCBmbGFnXG4gICAgICAgKiAgICAgdG8gdHJ1ZS5cbiAgICAgICAqICAgLSBgZGVmYXVsdFByZXZlbnRlZGAgLSBge2Jvb2xlYW59YDogdHJ1ZSBpZiBgcHJldmVudERlZmF1bHRgIHdhcyBjYWxsZWQuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXZlbnQgbmFtZSB0byBsaXN0ZW4gb24uXG4gICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50LCAuLi5hcmdzKX0gbGlzdGVuZXIgRnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBldmVudCBpcyBlbWl0dGVkLlxuICAgICAgICogQHJldHVybnMge2Z1bmN0aW9uKCl9IFJldHVybnMgYSBkZXJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBsaXN0ZW5lci5cbiAgICAgICAqL1xuICAgICAgJG9uOiBmdW5jdGlvbihuYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgbmFtZWRMaXN0ZW5lcnMgPSB0aGlzLiQkbGlzdGVuZXJzW25hbWVdO1xuICAgICAgICBpZiAoIW5hbWVkTGlzdGVuZXJzKSB7XG4gICAgICAgICAgdGhpcy4kJGxpc3RlbmVyc1tuYW1lXSA9IG5hbWVkTGlzdGVuZXJzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgbmFtZWRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgaWYgKCFjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSkge1xuICAgICAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50LiQkbGlzdGVuZXJDb3VudFtuYW1lXSsrO1xuICAgICAgICB9IHdoaWxlICgoY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudCkpO1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBpbmRleE9mTGlzdGVuZXIgPSBuYW1lZExpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgICAgICBpZiAoaW5kZXhPZkxpc3RlbmVyICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gVXNlIGRlbGV0ZSBpbiB0aGUgaG9wZSBvZiB0aGUgYnJvd3NlciBkZWFsbG9jYXRpbmcgdGhlIG1lbW9yeSBmb3IgdGhlIGFycmF5IGVudHJ5LFxuICAgICAgICAgICAgLy8gd2hpbGUgbm90IHNoaWZ0aW5nIHRoZSBhcnJheSBpbmRleGVzIG9mIG90aGVyIGxpc3RlbmVycy5cbiAgICAgICAgICAgIC8vIFNlZSBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNjEzNVxuICAgICAgICAgICAgZGVsZXRlIG5hbWVkTGlzdGVuZXJzW2luZGV4T2ZMaXN0ZW5lcl07XG4gICAgICAgICAgICBkZWNyZW1lbnRMaXN0ZW5lckNvdW50KHNlbGYsIDEsIG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0sXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAgKiBAbmFtZSAkcm9vdFNjb3BlLlNjb3BlIyRlbWl0XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBgbmFtZWAgdXB3YXJkcyB0aHJvdWdoIHRoZSBzY29wZSBoaWVyYXJjaHkgbm90aWZ5aW5nIHRoZVxuICAgICAgICogcmVnaXN0ZXJlZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259IGxpc3RlbmVycy5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgZXZlbnQgbGlmZSBjeWNsZSBzdGFydHMgYXQgdGhlIHNjb3BlIG9uIHdoaWNoIGAkZW1pdGAgd2FzIGNhbGxlZC4gQWxsXG4gICAgICAgKiB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb24gbGlzdGVuZXJzfSBsaXN0ZW5pbmcgZm9yIGBuYW1lYCBldmVudCBvbiB0aGlzIHNjb3BlIGdldFxuICAgICAgICogbm90aWZpZWQuIEFmdGVyd2FyZHMsIHRoZSBldmVudCB0cmF2ZXJzZXMgdXB3YXJkcyB0b3dhcmQgdGhlIHJvb3Qgc2NvcGUgYW5kIGNhbGxzIGFsbFxuICAgICAgICogcmVnaXN0ZXJlZCBsaXN0ZW5lcnMgYWxvbmcgdGhlIHdheS4gVGhlIGV2ZW50IHdpbGwgc3RvcCBwcm9wYWdhdGluZyBpZiBvbmUgb2YgdGhlIGxpc3RlbmVyc1xuICAgICAgICogY2FuY2VscyBpdC5cbiAgICAgICAqXG4gICAgICAgKiBBbnkgZXhjZXB0aW9uIGVtaXR0ZWQgZnJvbSB0aGUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9uIGxpc3RlbmVyc30gd2lsbCBiZSBwYXNzZWRcbiAgICAgICAqIG9udG8gdGhlIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciAkZXhjZXB0aW9uSGFuZGxlcn0gc2VydmljZS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBFdmVudCBuYW1lIHRvIGVtaXQuXG4gICAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgT3B0aW9uYWwgb25lIG9yIG1vcmUgYXJndW1lbnRzIHdoaWNoIHdpbGwgYmUgcGFzc2VkIG9udG8gdGhlIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gRXZlbnQgb2JqZWN0IChzZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufSkuXG4gICAgICAgKi9cbiAgICAgICRlbWl0OiBmdW5jdGlvbihuYW1lLCBhcmdzKSB7XG4gICAgICAgIHZhciBlbXB0eSA9IFtdLFxuICAgICAgICAgICAgbmFtZWRMaXN0ZW5lcnMsXG4gICAgICAgICAgICBzY29wZSA9IHRoaXMsXG4gICAgICAgICAgICBzdG9wUHJvcGFnYXRpb24gPSBmYWxzZSxcbiAgICAgICAgICAgIGV2ZW50ID0ge1xuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICB0YXJnZXRTY29wZTogc2NvcGUsXG4gICAgICAgICAgICAgIHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7c3RvcFByb3BhZ2F0aW9uID0gdHJ1ZTt9LFxuICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRlZmF1bHRQcmV2ZW50ZWQ6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGlzdGVuZXJBcmdzID0gY29uY2F0KFtldmVudF0sIGFyZ3VtZW50cywgMSksXG4gICAgICAgICAgICBpLCBsZW5ndGg7XG5cbiAgICAgICAgZG8ge1xuICAgICAgICAgIG5hbWVkTGlzdGVuZXJzID0gc2NvcGUuJCRsaXN0ZW5lcnNbbmFtZV0gfHwgZW1wdHk7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gbmFtZWRMaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgLy8gaWYgbGlzdGVuZXJzIHdlcmUgZGVyZWdpc3RlcmVkLCBkZWZyYWdtZW50IHRoZSBhcnJheVxuICAgICAgICAgICAgaWYgKCFuYW1lZExpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICBuYW1lZExpc3RlbmVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgLy9hbGxvdyBhbGwgbGlzdGVuZXJzIGF0dGFjaGVkIHRvIHRoZSBjdXJyZW50IHNjb3BlIHRvIHJ1blxuICAgICAgICAgICAgICBuYW1lZExpc3RlbmVyc1tpXS5hcHBseShudWxsLCBsaXN0ZW5lckFyZ3MpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy9pZiBhbnkgbGlzdGVuZXIgb24gdGhlIGN1cnJlbnQgc2NvcGUgc3RvcHMgcHJvcGFnYXRpb24sIHByZXZlbnQgYnViYmxpbmdcbiAgICAgICAgICBpZiAoc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy90cmF2ZXJzZSB1cHdhcmRzXG4gICAgICAgICAgc2NvcGUgPSBzY29wZS4kcGFyZW50O1xuICAgICAgICB9IHdoaWxlIChzY29wZSk7XG5cbiAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAgICogQG5hbWUgJHJvb3RTY29wZS5TY29wZSMkYnJvYWRjYXN0XG4gICAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAgICpcbiAgICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBgbmFtZWAgZG93bndhcmRzIHRvIGFsbCBjaGlsZCBzY29wZXMgKGFuZCB0aGVpciBjaGlsZHJlbikgbm90aWZ5aW5nIHRoZVxuICAgICAgICogcmVnaXN0ZXJlZCB7QGxpbmsgbmcuJHJvb3RTY29wZS5TY29wZSMkb259IGxpc3RlbmVycy5cbiAgICAgICAqXG4gICAgICAgKiBUaGUgZXZlbnQgbGlmZSBjeWNsZSBzdGFydHMgYXQgdGhlIHNjb3BlIG9uIHdoaWNoIGAkYnJvYWRjYXN0YCB3YXMgY2FsbGVkLiBBbGxcbiAgICAgICAqIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IGxpc3RlbmluZyBmb3IgYG5hbWVgIGV2ZW50IG9uIHRoaXMgc2NvcGUgZ2V0XG4gICAgICAgKiBub3RpZmllZC4gQWZ0ZXJ3YXJkcywgdGhlIGV2ZW50IHByb3BhZ2F0ZXMgdG8gYWxsIGRpcmVjdCBhbmQgaW5kaXJlY3Qgc2NvcGVzIG9mIHRoZSBjdXJyZW50XG4gICAgICAgKiBzY29wZSBhbmQgY2FsbHMgYWxsIHJlZ2lzdGVyZWQgbGlzdGVuZXJzIGFsb25nIHRoZSB3YXkuIFRoZSBldmVudCBjYW5ub3QgYmUgY2FuY2VsZWQuXG4gICAgICAgKlxuICAgICAgICogQW55IGV4Y2VwdGlvbiBlbWl0dGVkIGZyb20gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRvbiBsaXN0ZW5lcnN9IHdpbGwgYmUgcGFzc2VkXG4gICAgICAgKiBvbnRvIHRoZSB7QGxpbmsgbmcuJGV4Y2VwdGlvbkhhbmRsZXIgJGV4Y2VwdGlvbkhhbmRsZXJ9IHNlcnZpY2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRXZlbnQgbmFtZSB0byBicm9hZGNhc3QuXG4gICAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgT3B0aW9uYWwgb25lIG9yIG1vcmUgYXJndW1lbnRzIHdoaWNoIHdpbGwgYmUgcGFzc2VkIG9udG8gdGhlIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgICAqIEByZXR1cm4ge09iamVjdH0gRXZlbnQgb2JqZWN0LCBzZWUge0BsaW5rIG5nLiRyb290U2NvcGUuU2NvcGUjJG9ufVxuICAgICAgICovXG4gICAgICAkYnJvYWRjYXN0OiBmdW5jdGlvbihuYW1lLCBhcmdzKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLFxuICAgICAgICAgICAgY3VycmVudCA9IHRhcmdldCxcbiAgICAgICAgICAgIG5leHQgPSB0YXJnZXQsXG4gICAgICAgICAgICBldmVudCA9IHtcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgdGFyZ2V0U2NvcGU6IHRhcmdldCxcbiAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkZWZhdWx0UHJldmVudGVkOiBmYWxzZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICBpZiAoIXRhcmdldC4kJGxpc3RlbmVyQ291bnRbbmFtZV0pIHJldHVybiBldmVudDtcblxuICAgICAgICB2YXIgbGlzdGVuZXJBcmdzID0gY29uY2F0KFtldmVudF0sIGFyZ3VtZW50cywgMSksXG4gICAgICAgICAgICBsaXN0ZW5lcnMsIGksIGxlbmd0aDtcblxuICAgICAgICAvL2Rvd24gd2hpbGUgeW91IGNhbiwgdGhlbiB1cCBhbmQgbmV4dCBzaWJsaW5nIG9yIHVwIGFuZCBuZXh0IHNpYmxpbmcgdW50aWwgYmFjayBhdCByb290XG4gICAgICAgIHdoaWxlICgoY3VycmVudCA9IG5leHQpKSB7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFNjb3BlID0gY3VycmVudDtcbiAgICAgICAgICBsaXN0ZW5lcnMgPSBjdXJyZW50LiQkbGlzdGVuZXJzW25hbWVdIHx8IFtdO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gaWYgbGlzdGVuZXJzIHdlcmUgZGVyZWdpc3RlcmVkLCBkZWZyYWdtZW50IHRoZSBhcnJheVxuICAgICAgICAgICAgaWYgKCFsaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShudWxsLCBsaXN0ZW5lckFyZ3MpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJbnNhbml0eSBXYXJuaW5nOiBzY29wZSBkZXB0aC1maXJzdCB0cmF2ZXJzYWxcbiAgICAgICAgICAvLyB5ZXMsIHRoaXMgY29kZSBpcyBhIGJpdCBjcmF6eSwgYnV0IGl0IHdvcmtzIGFuZCB3ZSBoYXZlIHRlc3RzIHRvIHByb3ZlIGl0IVxuICAgICAgICAgIC8vIHRoaXMgcGllY2Ugc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSB0cmF2ZXJzYWwgaW4gJGRpZ2VzdFxuICAgICAgICAgIC8vICh0aG91Z2ggaXQgZGlmZmVycyBkdWUgdG8gaGF2aW5nIHRoZSBleHRyYSBjaGVjayBmb3IgJCRsaXN0ZW5lckNvdW50KVxuICAgICAgICAgIGlmICghKG5leHQgPSAoKGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdICYmIGN1cnJlbnQuJCRjaGlsZEhlYWQpIHx8XG4gICAgICAgICAgICAgIChjdXJyZW50ICE9PSB0YXJnZXQgJiYgY3VycmVudC4kJG5leHRTaWJsaW5nKSkpKSB7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gdGFyZ2V0ICYmICEobmV4dCA9IGN1cnJlbnQuJCRuZXh0U2libGluZykpIHtcbiAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC5jdXJyZW50U2NvcGUgPSBudWxsO1xuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciAkcm9vdFNjb3BlID0gbmV3IFNjb3BlKCk7XG5cbiAgICAvL1RoZSBpbnRlcm5hbCBxdWV1ZXMuIEV4cG9zZSB0aGVtIG9uIHRoZSAkcm9vdFNjb3BlIGZvciBkZWJ1Z2dpbmcvdGVzdGluZyBwdXJwb3Nlcy5cbiAgICB2YXIgYXN5bmNRdWV1ZSA9ICRyb290U2NvcGUuJCRhc3luY1F1ZXVlID0gW107XG4gICAgdmFyIHBvc3REaWdlc3RRdWV1ZSA9ICRyb290U2NvcGUuJCRwb3N0RGlnZXN0UXVldWUgPSBbXTtcbiAgICB2YXIgYXBwbHlBc3luY1F1ZXVlID0gJHJvb3RTY29wZS4kJGFwcGx5QXN5bmNRdWV1ZSA9IFtdO1xuXG4gICAgdmFyIHBvc3REaWdlc3RRdWV1ZVBvc2l0aW9uID0gMDtcblxuICAgIHJldHVybiAkcm9vdFNjb3BlO1xuXG5cbiAgICBmdW5jdGlvbiBiZWdpblBoYXNlKHBoYXNlKSB7XG4gICAgICBpZiAoJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgIHRocm93ICRyb290U2NvcGVNaW5FcnIoJ2lucHJvZycsICd7MH0gYWxyZWFkeSBpbiBwcm9ncmVzcycsICRyb290U2NvcGUuJCRwaGFzZSk7XG4gICAgICB9XG5cbiAgICAgICRyb290U2NvcGUuJCRwaGFzZSA9IHBoYXNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyUGhhc2UoKSB7XG4gICAgICAkcm9vdFNjb3BlLiQkcGhhc2UgPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluY3JlbWVudFdhdGNoZXJzQ291bnQoY3VycmVudCwgY291bnQpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgY3VycmVudC4kJHdhdGNoZXJzQ291bnQgKz0gY291bnQ7XG4gICAgICB9IHdoaWxlICgoY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY3JlbWVudExpc3RlbmVyQ291bnQoY3VycmVudCwgY291bnQsIG5hbWUpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgY3VycmVudC4kJGxpc3RlbmVyQ291bnRbbmFtZV0gLT0gY291bnQ7XG5cbiAgICAgICAgaWYgKGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdID09PSAwKSB7XG4gICAgICAgICAgZGVsZXRlIGN1cnJlbnQuJCRsaXN0ZW5lckNvdW50W25hbWVdO1xuICAgICAgICB9XG4gICAgICB9IHdoaWxlICgoY3VycmVudCA9IGN1cnJlbnQuJHBhcmVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHVzZWQgYXMgYW4gaW5pdGlhbCB2YWx1ZSBmb3Igd2F0Y2hlcnMuXG4gICAgICogYmVjYXVzZSBpdCdzIHVuaXF1ZSB3ZSBjYW4gZWFzaWx5IHRlbGwgaXQgYXBhcnQgZnJvbSBvdGhlciB2YWx1ZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0V2F0Y2hWYWwoKSB7fVxuXG4gICAgZnVuY3Rpb24gZmx1c2hBcHBseUFzeW5jKCkge1xuICAgICAgd2hpbGUgKGFwcGx5QXN5bmNRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhcHBseUFzeW5jUXVldWUuc2hpZnQoKSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFwcGx5QXN5bmNJZCA9IG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVBcHBseUFzeW5jKCkge1xuICAgICAgaWYgKGFwcGx5QXN5bmNJZCA9PT0gbnVsbCkge1xuICAgICAgICBhcHBseUFzeW5jSWQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmbHVzaEFwcGx5QXN5bmMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1dO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkcm9vdEVsZW1lbnRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSByb290IGVsZW1lbnQgb2YgQW5ndWxhciBhcHBsaWNhdGlvbi4gVGhpcyBpcyBlaXRoZXIgdGhlIGVsZW1lbnQgd2hlcmUge0BsaW5rXG4gKiBuZy5kaXJlY3RpdmU6bmdBcHAgbmdBcHB9IHdhcyBkZWNsYXJlZCBvciB0aGUgZWxlbWVudCBwYXNzZWQgaW50b1xuICoge0BsaW5rIGFuZ3VsYXIuYm9vdHN0cmFwfS4gVGhlIGVsZW1lbnQgcmVwcmVzZW50cyB0aGUgcm9vdCBlbGVtZW50IG9mIGFwcGxpY2F0aW9uLiBJdCBpcyBhbHNvIHRoZVxuICogbG9jYXRpb24gd2hlcmUgdGhlIGFwcGxpY2F0aW9uJ3Mge0BsaW5rIGF1dG8uJGluamVjdG9yICRpbmplY3Rvcn0gc2VydmljZSBnZXRzXG4gKiBwdWJsaXNoZWQsIGFuZCBjYW4gYmUgcmV0cmlldmVkIHVzaW5nIGAkcm9vdEVsZW1lbnQuaW5qZWN0b3IoKWAuXG4gKi9cblxuXG4vLyB0aGUgaW1wbGVtZW50YXRpb24gaXMgaW4gYW5ndWxhci5ib290c3RyYXBcblxuLyoqXG4gKiBAdGhpc1xuICogQGRlc2NyaXB0aW9uXG4gKiBQcml2YXRlIHNlcnZpY2UgdG8gc2FuaXRpemUgdXJpcyBmb3IgbGlua3MgYW5kIGltYWdlcy4gVXNlZCBieSAkY29tcGlsZSBhbmQgJHNhbml0aXplLlxuICovXG5mdW5jdGlvbiAkJFNhbml0aXplVXJpUHJvdmlkZXIoKSB7XG4gIHZhciBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IC9eXFxzKihodHRwcz98cz9mdHB8bWFpbHRvfHRlbHxmaWxlKTovLFxuICAgIGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdCA9IC9eXFxzKigoaHR0cHM/fGZ0cHxmaWxlfGJsb2IpOnxkYXRhOmltYWdlXFwvKS87XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSZXRyaWV2ZXMgb3Igb3ZlcnJpZGVzIHRoZSBkZWZhdWx0IHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgZm9yIHdoaXRlbGlzdGluZyBvZiBzYWZlXG4gICAqIHVybHMgZHVyaW5nIGFbaHJlZl0gc2FuaXRpemF0aW9uLlxuICAgKlxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxuICAgKlxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGFbaHJlZl0gdmlhIGRhdGEtYmluZGluZyBpcyBmaXJzdCBub3JtYWxpemVkIGFuZCB0dXJuZWQgaW50b1xuICAgKiBhbiBhYnNvbHV0ZSB1cmwuIEFmdGVyd2FyZHMsIHRoZSB1cmwgaXMgbWF0Y2hlZCBhZ2FpbnN0IHRoZSBgYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3RgXG4gICAqIHJlZ3VsYXIgZXhwcmVzc2lvbi4gSWYgYSBtYXRjaCBpcyBmb3VuZCwgdGhlIG9yaWdpbmFsIHVybCBpcyB3cml0dGVuIGludG8gdGhlIGRvbS4gT3RoZXJ3aXNlLFxuICAgKiB0aGUgYWJzb2x1dGUgdXJsIGlzIHByZWZpeGVkIHdpdGggYCd1bnNhZmU6J2Agc3RyaW5nIGFuZCBvbmx5IHRoZW4gaXMgaXQgd3JpdHRlbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7UmVnRXhwPX0gcmVnZXhwIE5ldyByZWdleHAgdG8gd2hpdGVsaXN0IHVybHMgd2l0aC5cbiAgICogQHJldHVybnMge1JlZ0V4cHxuZy4kY29tcGlsZVByb3ZpZGVyfSBDdXJyZW50IFJlZ0V4cCBpZiBjYWxsZWQgd2l0aG91dCB2YWx1ZSBvciBzZWxmIGZvclxuICAgKiAgICBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XG4gICAgICBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCA9IHJlZ2V4cDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gIH07XG5cblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHJpZXZlcyBvciBvdmVycmlkZXMgdGhlIGRlZmF1bHQgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCBmb3Igd2hpdGVsaXN0aW5nIG9mIHNhZmVcbiAgICogdXJscyBkdXJpbmcgaW1nW3NyY10gc2FuaXRpemF0aW9uLlxuICAgKlxuICAgKiBUaGUgc2FuaXRpemF0aW9uIGlzIGEgc2VjdXJpdHkgbWVhc3VyZSBhaW1lZCBhdCBwcmV2ZW50IFhTUyBhdHRhY2tzIHZpYSBodG1sIGxpbmtzLlxuICAgKlxuICAgKiBBbnkgdXJsIGFib3V0IHRvIGJlIGFzc2lnbmVkIHRvIGltZ1tzcmNdIHZpYSBkYXRhLWJpbmRpbmcgaXMgZmlyc3Qgbm9ybWFsaXplZCBhbmQgdHVybmVkIGludG9cbiAgICogYW4gYWJzb2x1dGUgdXJsLiBBZnRlcndhcmRzLCB0aGUgdXJsIGlzIG1hdGNoZWQgYWdhaW5zdCB0aGUgYGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdGBcbiAgICogcmVndWxhciBleHByZXNzaW9uLiBJZiBhIG1hdGNoIGlzIGZvdW5kLCB0aGUgb3JpZ2luYWwgdXJsIGlzIHdyaXR0ZW4gaW50byB0aGUgZG9tLiBPdGhlcndpc2UsXG4gICAqIHRoZSBhYnNvbHV0ZSB1cmwgaXMgcHJlZml4ZWQgd2l0aCBgJ3Vuc2FmZTonYCBzdHJpbmcgYW5kIG9ubHkgdGhlbiBpcyBpdCB3cml0dGVuIGludG8gdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWdFeHA9fSByZWdleHAgTmV3IHJlZ2V4cCB0byB3aGl0ZWxpc3QgdXJscyB3aXRoLlxuICAgKiBAcmV0dXJucyB7UmVnRXhwfG5nLiRjb21waWxlUHJvdmlkZXJ9IEN1cnJlbnQgUmVnRXhwIGlmIGNhbGxlZCB3aXRob3V0IHZhbHVlIG9yIHNlbGYgZm9yXG4gICAqICAgIGNoYWluaW5nIG90aGVyd2lzZS5cbiAgICovXG4gIHRoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0ID0gZnVuY3Rpb24ocmVnZXhwKSB7XG4gICAgaWYgKGlzRGVmaW5lZChyZWdleHApKSB7XG4gICAgICBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QgPSByZWdleHA7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIGltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdDtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gc2FuaXRpemVVcmkodXJpLCBpc0ltYWdlKSB7XG4gICAgICB2YXIgcmVnZXggPSBpc0ltYWdlID8gaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0IDogYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q7XG4gICAgICB2YXIgbm9ybWFsaXplZFZhbDtcbiAgICAgIG5vcm1hbGl6ZWRWYWwgPSB1cmxSZXNvbHZlKHVyaSAmJiB1cmkudHJpbSgpKS5ocmVmO1xuICAgICAgaWYgKG5vcm1hbGl6ZWRWYWwgIT09ICcnICYmICFub3JtYWxpemVkVmFsLm1hdGNoKHJlZ2V4KSkge1xuICAgICAgICByZXR1cm4gJ3Vuc2FmZTonICsgbm9ybWFsaXplZFZhbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1cmk7XG4gICAgfTtcbiAgfTtcbn1cblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxuLyogZXhwb3J0ZWQgJFNjZVByb3ZpZGVyLCAkU2NlRGVsZWdhdGVQcm92aWRlciAqL1xuXG52YXIgJHNjZU1pbkVyciA9IG1pbkVycignJHNjZScpO1xuXG52YXIgU0NFX0NPTlRFWFRTID0ge1xuICAvLyBIVE1MIGlzIHVzZWQgd2hlbiB0aGVyZSdzIEhUTUwgcmVuZGVyZWQgKGUuZy4gbmctYmluZC1odG1sLCBpZnJhbWUgc3JjZG9jIGJpbmRpbmcpLlxuICBIVE1MOiAnaHRtbCcsXG5cbiAgLy8gU3R5bGUgc3RhdGVtZW50cyBvciBzdHlsZXNoZWV0cy4gQ3VycmVudGx5IHVudXNlZCBpbiBBbmd1bGFySlMuXG4gIENTUzogJ2NzcycsXG5cbiAgLy8gQW4gVVJMIHVzZWQgaW4gYSBjb250ZXh0IHdoZXJlIGl0IGRvZXMgbm90IHJlZmVyIHRvIGEgcmVzb3VyY2UgdGhhdCBsb2FkcyBjb2RlLiBDdXJyZW50bHlcbiAgLy8gdW51c2VkIGluIEFuZ3VsYXJKUy5cbiAgVVJMOiAndXJsJyxcblxuICAvLyBSRVNPVVJDRV9VUkwgaXMgYSBzdWJ0eXBlIG9mIFVSTCB1c2VkIHdoZXJlIHRoZSByZWZlcnJlZC10byByZXNvdXJjZSBjb3VsZCBiZSBpbnRlcnByZXRlZCBhc1xuICAvLyBjb2RlLiAoZS5nLiBuZy1pbmNsdWRlLCBzY3JpcHQgc3JjIGJpbmRpbmcsIHRlbXBsYXRlVXJsKVxuICBSRVNPVVJDRV9VUkw6ICdyZXNvdXJjZVVybCcsXG5cbiAgLy8gU2NyaXB0LiBDdXJyZW50bHkgdW51c2VkIGluIEFuZ3VsYXJKUy5cbiAgSlM6ICdqcydcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9sbG93LlxuXG52YXIgVU5ERVJTQ09SRV9MT1dFUkNBU0VfUkVHRVhQID0gL18oW2Etel0pL2c7XG5cbmZ1bmN0aW9uIHNuYWtlVG9DYW1lbChuYW1lKSB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoVU5ERVJTQ09SRV9MT1dFUkNBU0VfUkVHRVhQLCBmbkNhbWVsQ2FzZVJlcGxhY2UpO1xufVxuXG5mdW5jdGlvbiBhZGp1c3RNYXRjaGVyKG1hdGNoZXIpIHtcbiAgaWYgKG1hdGNoZXIgPT09ICdzZWxmJykge1xuICAgIHJldHVybiBtYXRjaGVyO1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKG1hdGNoZXIpKSB7XG4gICAgLy8gU3RyaW5ncyBtYXRjaCBleGFjdGx5IGV4Y2VwdCBmb3IgMiB3aWxkY2FyZHMgLSAnKicgYW5kICcqKicuXG4gICAgLy8gJyonIG1hdGNoZXMgYW55IGNoYXJhY3RlciBleGNlcHQgdGhvc2UgZnJvbSB0aGUgc2V0ICc6Ly4/JicuXG4gICAgLy8gJyoqJyBtYXRjaGVzIGFueSBjaGFyYWN0ZXIgKGxpa2UgLiogaW4gYSBSZWdFeHApLlxuICAgIC8vIE1vcmUgdGhhbiAyIConcyByYWlzZXMgYW4gZXJyb3IgYXMgaXQncyBpbGwgZGVmaW5lZC5cbiAgICBpZiAobWF0Y2hlci5pbmRleE9mKCcqKionKSA+IC0xKSB7XG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCdpd2NhcmQnLFxuICAgICAgICAgICdJbGxlZ2FsIHNlcXVlbmNlICoqKiBpbiBzdHJpbmcgbWF0Y2hlci4gIFN0cmluZzogezB9JywgbWF0Y2hlcik7XG4gICAgfVxuICAgIG1hdGNoZXIgPSBlc2NhcGVGb3JSZWdleHAobWF0Y2hlcikuXG4gICAgICAgICAgICAgICAgICByZXBsYWNlKC9cXFxcXFwqXFxcXFxcKi9nLCAnLionKS5cbiAgICAgICAgICAgICAgICAgIHJlcGxhY2UoL1xcXFxcXCovZywgJ1teOi8uPyY7XSonKTtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBtYXRjaGVyICsgJyQnKTtcbiAgfSBlbHNlIGlmIChpc1JlZ0V4cChtYXRjaGVyKSkge1xuICAgIC8vIFRoZSBvbmx5IG90aGVyIHR5cGUgb2YgbWF0Y2hlciBhbGxvd2VkIGlzIGEgUmVnZXhwLlxuICAgIC8vIE1hdGNoIGVudGlyZSBVUkwgLyBkaXNhbGxvdyBwYXJ0aWFsIG1hdGNoZXMuXG4gICAgLy8gRmxhZ3MgYXJlIHJlc2V0IChpLmUuIG5vIGdsb2JhbCwgaWdub3JlQ2FzZSBvciBtdWx0aWxpbmUpXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgbWF0Y2hlci5zb3VyY2UgKyAnJCcpO1xuICB9IGVsc2Uge1xuICAgIHRocm93ICRzY2VNaW5FcnIoJ2ltYXRjaGVyJyxcbiAgICAgICAgJ01hdGNoZXJzIG1heSBvbmx5IGJlIFwic2VsZlwiLCBzdHJpbmcgcGF0dGVybnMgb3IgUmVnRXhwIG9iamVjdHMnKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGFkanVzdE1hdGNoZXJzKG1hdGNoZXJzKSB7XG4gIHZhciBhZGp1c3RlZE1hdGNoZXJzID0gW107XG4gIGlmIChpc0RlZmluZWQobWF0Y2hlcnMpKSB7XG4gICAgZm9yRWFjaChtYXRjaGVycywgZnVuY3Rpb24obWF0Y2hlcikge1xuICAgICAgYWRqdXN0ZWRNYXRjaGVycy5wdXNoKGFkanVzdE1hdGNoZXIobWF0Y2hlcikpO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBhZGp1c3RlZE1hdGNoZXJzO1xufVxuXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRzY2VEZWxlZ2F0ZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBgJHNjZURlbGVnYXRlYCBpcyBhIHNlcnZpY2UgdGhhdCBpcyB1c2VkIGJ5IHRoZSBgJHNjZWAgc2VydmljZSB0byBwcm92aWRlIHtAbGluayBuZy4kc2NlIFN0cmljdFxuICogQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0gc2VydmljZXMgdG8gQW5ndWxhckpTLlxuICpcbiAqIEZvciBhbiBvdmVydmlldyBvZiB0aGlzIHNlcnZpY2UgYW5kIHRoZSBmdW5jdGlvbm5hbGl0eSBpdCBwcm92aWRlcyBpbiBBbmd1bGFySlMsIHNlZSB0aGUgbWFpblxuICogcGFnZSBmb3Ige0BsaW5rIG5nLiRzY2UgU0NFfS4gVGhlIGN1cnJlbnQgcGFnZSBpcyB0YXJnZXRlZCBmb3IgZGV2ZWxvcGVycyB3aG8gbmVlZCB0byBhbHRlciBob3dcbiAqIFNDRSB3b3JrcyBpbiB0aGVpciBhcHBsaWNhdGlvbiwgd2hpY2ggc2hvdWxkbid0IGJlIG5lZWRlZCBpbiBtb3N0IGNhc2VzLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIj5cbiAqIEFuZ3VsYXJKUyBzdHJvbmdseSByZWxpZXMgb24gY29udGV4dHVhbCBlc2NhcGluZyBmb3IgdGhlIHNlY3VyaXR5IG9mIGJpbmRpbmdzOiBkaXNhYmxpbmcgb3JcbiAqIG1vZGlmeWluZyB0aGlzIG1pZ2h0IGNhdXNlIGNyb3NzIHNpdGUgc2NyaXB0aW5nIChYU1MpIHZ1bG5lcmFiaWxpdGllcy4gRm9yIGxpYnJhcmllcyBvd25lcnMsXG4gKiBjaGFuZ2VzIHRvIHRoaXMgc2VydmljZSB3aWxsIGFsc28gaW5mbHVlbmNlIHVzZXJzLCBzbyBiZSBleHRyYSBjYXJlZnVsIGFuZCBkb2N1bWVudCB5b3VyIGNoYW5nZXMuXG4gKiA8L2Rpdj5cbiAqXG4gKiBUeXBpY2FsbHksIHlvdSB3b3VsZCBjb25maWd1cmUgb3Igb3ZlcnJpZGUgdGhlIHtAbGluayBuZy4kc2NlRGVsZWdhdGUgJHNjZURlbGVnYXRlfSBpbnN0ZWFkIG9mXG4gKiB0aGUgYCRzY2VgIHNlcnZpY2UgdG8gY3VzdG9taXplIHRoZSB3YXkgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgd29ya3MgaW4gQW5ndWxhckpTLiAgVGhpcyBpc1xuICogYmVjYXVzZSwgd2hpbGUgdGhlIGAkc2NlYCBwcm92aWRlcyBudW1lcm91cyBzaG9ydGhhbmQgbWV0aG9kcywgZXRjLiwgeW91IHJlYWxseSBvbmx5IG5lZWQgdG9cbiAqIG92ZXJyaWRlIDMgY29yZSBmdW5jdGlvbnMgKGB0cnVzdEFzYCwgYGdldFRydXN0ZWRgIGFuZCBgdmFsdWVPZmApIHRvIHJlcGxhY2UgdGhlIHdheSB0aGluZ3NcbiAqIHdvcmsgYmVjYXVzZSBgJHNjZWAgZGVsZWdhdGVzIHRvIGAkc2NlRGVsZWdhdGVgIGZvciB0aGVzZSBvcGVyYXRpb25zLlxuICpcbiAqIFJlZmVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciAkc2NlRGVsZWdhdGVQcm92aWRlcn0gdG8gY29uZmlndXJlIHRoaXMgc2VydmljZS5cbiAqXG4gKiBUaGUgZGVmYXVsdCBpbnN0YW5jZSBvZiBgJHNjZURlbGVnYXRlYCBzaG91bGQgd29yayBvdXQgb2YgdGhlIGJveCB3aXRoIGxpdHRsZSBwYWluLiAgV2hpbGUgeW91XG4gKiBjYW4gb3ZlcnJpZGUgaXQgY29tcGxldGVseSB0byBjaGFuZ2UgdGhlIGJlaGF2aW9yIG9mIGAkc2NlYCwgdGhlIGNvbW1vbiBjYXNlIHdvdWxkXG4gKiBpbnZvbHZlIGNvbmZpZ3VyaW5nIHRoZSB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIgJHNjZURlbGVnYXRlUHJvdmlkZXJ9IGluc3RlYWQgYnkgc2V0dGluZ1xuICogeW91ciBvd24gd2hpdGVsaXN0cyBhbmQgYmxhY2tsaXN0cyBmb3IgdHJ1c3RpbmcgVVJMcyB1c2VkIGZvciBsb2FkaW5nIEFuZ3VsYXJKUyByZXNvdXJjZXMgc3VjaCBhc1xuICogdGVtcGxhdGVzLiAgUmVmZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0XG4gKiAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdH0gYW5kIHtAbGlua1xuICogbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyXG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFRoZSBgJHNjZURlbGVnYXRlUHJvdmlkZXJgIHByb3ZpZGVyIGFsbG93cyBkZXZlbG9wZXJzIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVxuICogJHNjZURlbGVnYXRlIHNlcnZpY2V9LCB1c2VkIGFzIGEgZGVsZWdhdGUgZm9yIHtAbGluayBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqXG4gKiBUaGUgYCRzY2VEZWxlZ2F0ZVByb3ZpZGVyYCBhbGxvd3Mgb25lIHRvIGdldC9zZXQgdGhlIHdoaXRlbGlzdHMgYW5kIGJsYWNrbGlzdHMgdXNlZCB0byBlbnN1cmVcbiAqIHRoYXQgdGhlIFVSTHMgdXNlZCBmb3Igc291cmNpbmcgQW5ndWxhckpTIHRlbXBsYXRlcyBhbmQgb3RoZXIgc2NyaXB0LXJ1bm5pbmcgVVJMcyBhcmUgc2FmZSAoYWxsXG4gKiBwbGFjZXMgdGhhdCB1c2UgdGhlIGAkc2NlLlJFU09VUkNFX1VSTGAgY29udGV4dCkuIFNlZVxuICoge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0ICRzY2VEZWxlZ2F0ZVByb3ZpZGVyLnJlc291cmNlVXJsV2hpdGVsaXN0fVxuICogYW5kXG4gKiB7QGxpbmsgbmcuJHNjZURlbGVnYXRlUHJvdmlkZXIjcmVzb3VyY2VVcmxCbGFja2xpc3QgJHNjZURlbGVnYXRlUHJvdmlkZXIucmVzb3VyY2VVcmxCbGFja2xpc3R9LFxuICpcbiAqIEZvciB0aGUgZ2VuZXJhbCBkZXRhaWxzIGFib3V0IHRoaXMgc2VydmljZSBpbiBBbmd1bGFyLCByZWFkIHRoZSBtYWluIHBhZ2UgZm9yIHtAbGluayBuZy4kc2NlXG4gKiBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKX0uXG4gKlxuICogKipFeGFtcGxlKio6ICBDb25zaWRlciB0aGUgZm9sbG93aW5nIGNhc2UuIDxhIG5hbWU9XCJleGFtcGxlXCI+PC9hPlxuICpcbiAqIC0geW91ciBhcHAgaXMgaG9zdGVkIGF0IHVybCBgaHR0cDovL215YXBwLmV4YW1wbGUuY29tL2BcbiAqIC0gYnV0IHNvbWUgb2YgeW91ciB0ZW1wbGF0ZXMgYXJlIGhvc3RlZCBvbiBvdGhlciBkb21haW5zIHlvdSBjb250cm9sIHN1Y2ggYXNcbiAqICAgYGh0dHA6Ly9zcnYwMS5hc3NldHMuZXhhbXBsZS5jb20vYCwgYGh0dHA6Ly9zcnYwMi5hc3NldHMuZXhhbXBsZS5jb20vYCwgZXRjLlxuICogLSBhbmQgeW91IGhhdmUgYW4gb3BlbiByZWRpcmVjdCBhdCBgaHR0cDovL215YXBwLmV4YW1wbGUuY29tL2NsaWNrVGhydT8uLi5gLlxuICpcbiAqIEhlcmUgaXMgd2hhdCBhIHNlY3VyZSBjb25maWd1cmF0aW9uIGZvciB0aGlzIHNjZW5hcmlvIG1pZ2h0IGxvb2sgbGlrZTpcbiAqXG4gKiBgYGBcbiAqICBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbXSkuY29uZmlnKGZ1bmN0aW9uKCRzY2VEZWxlZ2F0ZVByb3ZpZGVyKSB7XG4gKiAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybFdoaXRlbGlzdChbXG4gKiAgICAgIC8vIEFsbG93IHNhbWUgb3JpZ2luIHJlc291cmNlIGxvYWRzLlxuICogICAgICAnc2VsZicsXG4gKiAgICAgIC8vIEFsbG93IGxvYWRpbmcgZnJvbSBvdXIgYXNzZXRzIGRvbWFpbi4gIE5vdGljZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuICogYW5kICoqLlxuICogICAgICAnaHR0cDovL3NydiouYXNzZXRzLmV4YW1wbGUuY29tLyoqJ1xuICogICAgXSk7XG4gKlxuICogICAgLy8gVGhlIGJsYWNrbGlzdCBvdmVycmlkZXMgdGhlIHdoaXRlbGlzdCBzbyB0aGUgb3BlbiByZWRpcmVjdCBoZXJlIGlzIGJsb2NrZWQuXG4gKiAgICAkc2NlRGVsZWdhdGVQcm92aWRlci5yZXNvdXJjZVVybEJsYWNrbGlzdChbXG4gKiAgICAgICdodHRwOi8vbXlhcHAuZXhhbXBsZS5jb20vY2xpY2tUaHJ1KionXG4gKiAgICBdKTtcbiAqICB9KTtcbiAqIGBgYFxuICogTm90ZSB0aGF0IGFuIGVtcHR5IHdoaXRlbGlzdCB3aWxsIGJsb2NrIGV2ZXJ5IHJlc291cmNlIFVSTCBmcm9tIGJlaW5nIGxvYWRlZCwgYW5kIHdpbGwgcmVxdWlyZVxuICogeW91IHRvIG1hbnVhbGx5IG1hcmsgZWFjaCBvbmUgYXMgdHJ1c3RlZCB3aXRoIGAkc2NlLnRydXN0QXNSZXNvdXJjZVVybGAuIEhvd2V2ZXIsIHRlbXBsYXRlc1xuICogcmVxdWVzdGVkIGJ5IHtAbGluayBuZy4kdGVtcGxhdGVSZXF1ZXN0ICR0ZW1wbGF0ZVJlcXVlc3R9IHRoYXQgYXJlIHByZXNlbnQgaW5cbiAqIHtAbGluayBuZy4kdGVtcGxhdGVDYWNoZSAkdGVtcGxhdGVDYWNoZX0gd2lsbCBub3QgZ28gdGhyb3VnaCB0aGlzIGNoZWNrLiBJZiB5b3UgaGF2ZSBhIG1lY2hhbmlzbVxuICogdG8gcG9wdWxhdGUgeW91ciB0ZW1wbGF0ZXMgaW4gdGhhdCBjYWNoZSBhdCBjb25maWcgdGltZSwgdGhlbiBpdCBpcyBhIGdvb2QgaWRlYSB0byByZW1vdmUgJ3NlbGYnXG4gKiBmcm9tIHRoYXQgd2hpdGVsaXN0LiBUaGlzIGhlbHBzIHRvIG1pdGlnYXRlIHRoZSBzZWN1cml0eSBpbXBhY3Qgb2YgY2VydGFpbiB0eXBlcyBvZiBpc3N1ZXMsIGxpa2VcbiAqIGZvciBpbnN0YW5jZSBhdHRhY2tlci1jb250cm9sbGVkIGBuZy1pbmNsdWRlc2AuXG4gKi9cblxuZnVuY3Rpb24gJFNjZURlbGVnYXRlUHJvdmlkZXIoKSB7XG4gIHRoaXMuU0NFX0NPTlRFWFRTID0gU0NFX0NPTlRFWFRTO1xuXG4gIC8vIFJlc291cmNlIFVSTHMgY2FuIGFsc28gYmUgdHJ1c3RlZCBieSBwb2xpY3kuXG4gIHZhciByZXNvdXJjZVVybFdoaXRlbGlzdCA9IFsnc2VsZiddLFxuICAgICAgcmVzb3VyY2VVcmxCbGFja2xpc3QgPSBbXTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5PX0gd2hpdGVsaXN0IFdoZW4gcHJvdmlkZWQsIHJlcGxhY2VzIHRoZSByZXNvdXJjZVVybFdoaXRlbGlzdCB3aXRoIHRoZSB2YWx1ZVxuICAgKiAgICAgcHJvdmlkZWQuICBUaGlzIG11c3QgYmUgYW4gYXJyYXkgb3IgbnVsbC4gIEEgc25hcHNob3Qgb2YgdGhpcyBhcnJheSBpcyB1c2VkIHNvIGZ1cnRoZXJcbiAgICogICAgIGNoYW5nZXMgdG8gdGhlIGFycmF5IGFyZSBpZ25vcmVkLlxuICAgKiAgICAgRm9sbG93IHtAbGluayBuZy4kc2NlI3Jlc291cmNlVXJsUGF0dGVybkl0ZW0gdGhpcyBsaW5rfSBmb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaXRlbXNcbiAgICogICAgIGFsbG93ZWQgaW4gdGhpcyBhcnJheS5cbiAgICpcbiAgICogQHJldHVybiB7QXJyYXl9IFRoZSBjdXJyZW50bHkgc2V0IHdoaXRlbGlzdCBhcnJheS5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMvR2V0cyB0aGUgd2hpdGVsaXN0IG9mIHRydXN0ZWQgcmVzb3VyY2UgVVJMcy5cbiAgICpcbiAgICogVGhlICoqZGVmYXVsdCB2YWx1ZSoqIHdoZW4gbm8gd2hpdGVsaXN0IGhhcyBiZWVuIGV4cGxpY2l0bHkgc2V0IGlzIGBbJ3NlbGYnXWAgYWxsb3dpbmcgb25seVxuICAgKiBzYW1lIG9yaWdpbiByZXNvdXJjZSByZXF1ZXN0cy5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogKipOb3RlOioqIHRoZSBkZWZhdWx0IHdoaXRlbGlzdCBvZiAnc2VsZicgaXMgbm90IHJlY29tbWVuZGVkIGlmIHlvdXIgYXBwIHNoYXJlcyBpdHMgb3JpZ2luXG4gICAqIHdpdGggb3RoZXIgYXBwcyEgSXQgaXMgYSBnb29kIGlkZWEgdG8gbGltaXQgaXQgdG8gb25seSB5b3VyIGFwcGxpY2F0aW9uJ3MgZGlyZWN0b3J5LlxuICAgKiA8L2Rpdj5cbiAgICovXG4gIHRoaXMucmVzb3VyY2VVcmxXaGl0ZWxpc3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICByZXNvdXJjZVVybFdoaXRlbGlzdCA9IGFkanVzdE1hdGNoZXJzKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc291cmNlVXJsV2hpdGVsaXN0O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lICRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0XG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXk9fSBibGFja2xpc3QgV2hlbiBwcm92aWRlZCwgcmVwbGFjZXMgdGhlIHJlc291cmNlVXJsQmxhY2tsaXN0IHdpdGggdGhlIHZhbHVlXG4gICAqICAgICBwcm92aWRlZC4gIFRoaXMgbXVzdCBiZSBhbiBhcnJheSBvciBudWxsLiAgQSBzbmFwc2hvdCBvZiB0aGlzIGFycmF5IGlzIHVzZWQgc28gZnVydGhlclxuICAgKiAgICAgY2hhbmdlcyB0byB0aGUgYXJyYXkgYXJlIGlnbm9yZWQuPC9wPjxwPlxuICAgKiAgICAgRm9sbG93IHtAbGluayBuZy4kc2NlI3Jlc291cmNlVXJsUGF0dGVybkl0ZW0gdGhpcyBsaW5rfSBmb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgaXRlbXNcbiAgICogICAgIGFsbG93ZWQgaW4gdGhpcyBhcnJheS48L3A+PHA+XG4gICAqICAgICBUaGUgdHlwaWNhbCB1c2FnZSBmb3IgdGhlIGJsYWNrbGlzdCBpcyB0byAqKmJsb2NrXG4gICAqICAgICBbb3BlbiByZWRpcmVjdHNdKGh0dHA6Ly9jd2UubWl0cmUub3JnL2RhdGEvZGVmaW5pdGlvbnMvNjAxLmh0bWwpKiogc2VydmVkIGJ5IHlvdXIgZG9tYWluIGFzXG4gICAqICAgICB0aGVzZSB3b3VsZCBvdGhlcndpc2UgYmUgdHJ1c3RlZCBidXQgYWN0dWFsbHkgcmV0dXJuIGNvbnRlbnQgZnJvbSB0aGUgcmVkaXJlY3RlZCBkb21haW4uXG4gICAqICAgICA8L3A+PHA+XG4gICAqICAgICBGaW5hbGx5LCAqKnRoZSBibGFja2xpc3Qgb3ZlcnJpZGVzIHRoZSB3aGl0ZWxpc3QqKiBhbmQgaGFzIHRoZSBmaW5hbCBzYXkuXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5fSBUaGUgY3VycmVudGx5IHNldCBibGFja2xpc3QgYXJyYXkuXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzL0dldHMgdGhlIGJsYWNrbGlzdCBvZiB0cnVzdGVkIHJlc291cmNlIFVSTHMuXG4gICAqXG4gICAqIFRoZSAqKmRlZmF1bHQgdmFsdWUqKiB3aGVuIG5vIHdoaXRlbGlzdCBoYXMgYmVlbiBleHBsaWNpdGx5IHNldCBpcyB0aGUgZW1wdHkgYXJyYXkgKGkuZS4gdGhlcmVcbiAgICogaXMgbm8gYmxhY2tsaXN0LilcbiAgICovXG5cbiAgdGhpcy5yZXNvdXJjZVVybEJsYWNrbGlzdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJlc291cmNlVXJsQmxhY2tsaXN0ID0gYWRqdXN0TWF0Y2hlcnModmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb3VyY2VVcmxCbGFja2xpc3Q7XG4gIH07XG5cbiAgdGhpcy4kZ2V0ID0gWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcblxuICAgIHZhciBodG1sU2FuaXRpemVyID0gZnVuY3Rpb24gaHRtbFNhbml0aXplcihodG1sKSB7XG4gICAgICB0aHJvdyAkc2NlTWluRXJyKCd1bnNhZmUnLCAnQXR0ZW1wdGluZyB0byB1c2UgYW4gdW5zYWZlIHZhbHVlIGluIGEgc2FmZSBjb250ZXh0LicpO1xuICAgIH07XG5cbiAgICBpZiAoJGluamVjdG9yLmhhcygnJHNhbml0aXplJykpIHtcbiAgICAgIGh0bWxTYW5pdGl6ZXIgPSAkaW5qZWN0b3IuZ2V0KCckc2FuaXRpemUnKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIG1hdGNoVXJsKG1hdGNoZXIsIHBhcnNlZFVybCkge1xuICAgICAgaWYgKG1hdGNoZXIgPT09ICdzZWxmJykge1xuICAgICAgICByZXR1cm4gdXJsSXNTYW1lT3JpZ2luKHBhcnNlZFVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZWZpbml0ZWx5IGEgcmVnZXguICBTZWUgYWRqdXN0TWF0Y2hlcnMoKVxuICAgICAgICByZXR1cm4gISFtYXRjaGVyLmV4ZWMocGFyc2VkVXJsLmhyZWYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kodXJsKSB7XG4gICAgICB2YXIgcGFyc2VkVXJsID0gdXJsUmVzb2x2ZSh1cmwudG9TdHJpbmcoKSk7XG4gICAgICB2YXIgaSwgbiwgYWxsb3dlZCA9IGZhbHNlO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYXQgbGVhc3Qgb25lIGl0ZW0gZnJvbSB0aGUgd2hpdGVsaXN0IGFsbG93cyB0aGlzIHVybC5cbiAgICAgIGZvciAoaSA9IDAsIG4gPSByZXNvdXJjZVVybFdoaXRlbGlzdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgaWYgKG1hdGNoVXJsKHJlc291cmNlVXJsV2hpdGVsaXN0W2ldLCBwYXJzZWRVcmwpKSB7XG4gICAgICAgICAgYWxsb3dlZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhbGxvd2VkKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IG5vIGl0ZW0gZnJvbSB0aGUgYmxhY2tsaXN0IGJsb2NrZWQgdGhpcyB1cmwuXG4gICAgICAgIGZvciAoaSA9IDAsIG4gPSByZXNvdXJjZVVybEJsYWNrbGlzdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICBpZiAobWF0Y2hVcmwocmVzb3VyY2VVcmxCbGFja2xpc3RbaV0sIHBhcnNlZFVybCkpIHtcbiAgICAgICAgICAgIGFsbG93ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFsbG93ZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVIb2xkZXJUeXBlKEJhc2UpIHtcbiAgICAgIHZhciBob2xkZXJUeXBlID0gZnVuY3Rpb24gVHJ1c3RlZFZhbHVlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWUpIHtcbiAgICAgICAgdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB0cnVzdGVkVmFsdWU7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgaWYgKEJhc2UpIHtcbiAgICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUgPSBuZXcgQmFzZSgpO1xuICAgICAgfVxuICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uIHNjZVZhbHVlT2YoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9O1xuICAgICAgaG9sZGVyVHlwZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiBzY2VUb1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBob2xkZXJUeXBlO1xuICAgIH1cblxuICAgIHZhciB0cnVzdGVkVmFsdWVIb2xkZXJCYXNlID0gZ2VuZXJhdGVIb2xkZXJUeXBlKCksXG4gICAgICAgIGJ5VHlwZSA9IHt9O1xuXG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5IVE1MXSA9IGdlbmVyYXRlSG9sZGVyVHlwZSh0cnVzdGVkVmFsdWVIb2xkZXJCYXNlKTtcbiAgICBieVR5cGVbU0NFX0NPTlRFWFRTLkNTU10gPSBnZW5lcmF0ZUhvbGRlclR5cGUodHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSk7XG4gICAgYnlUeXBlW1NDRV9DT05URVhUUy5VUkxdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuSlNdID0gZ2VuZXJhdGVIb2xkZXJUeXBlKHRydXN0ZWRWYWx1ZUhvbGRlckJhc2UpO1xuICAgIGJ5VHlwZVtTQ0VfQ09OVEVYVFMuUkVTT1VSQ0VfVVJMXSA9IGdlbmVyYXRlSG9sZGVyVHlwZShieVR5cGVbU0NFX0NPTlRFWFRTLlVSTF0pO1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2VEZWxlZ2F0ZSN0cnVzdEFzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIGEgdHJ1c3RlZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgcGFyYW1ldGVyIGZvciB0aGUgc3BlY2lmaWVkIGNvbnRleHQuIFRoaXMgdHJ1c3RlZFxuICAgICAqIG9iamVjdCB3aWxsIGxhdGVyIG9uIGJlIHVzZWQgYXMtaXMsIHdpdGhvdXQgYW55IHNlY3VyaXR5IGNoZWNrLCBieSBiaW5kaW5ncyBvciBkaXJlY3RpdmVzXG4gICAgICogdGhhdCByZXF1aXJlIHRoaXMgc2VjdXJpdHkgY29udGV4dC5cbiAgICAgKiBGb3IgaW5zdGFuY2UsIG1hcmtpbmcgYSBzdHJpbmcgYXMgdHJ1c3RlZCBmb3IgdGhlIGAkc2NlLkhUTUxgIGNvbnRleHQgd2lsbCBlbnRpcmVseSBieXBhc3NcbiAgICAgKiB0aGUgcG90ZW50aWFsIGAkc2FuaXRpemVgIGNhbGwgaW4gY29ycmVzcG9uZGluZyBgJHNjZS5IVE1MYCBiaW5kaW5ncyBvciBkaXJlY3RpdmVzLCBzdWNoIGFzXG4gICAgICogYG5nLWJpbmQtaHRtbGAuIE5vdGUgdGhhdCBpbiBtb3N0IGNhc2VzIHlvdSB3b24ndCBuZWVkIHRvIGNhbGwgdGhpcyBmdW5jdGlvbjogaWYgeW91IGhhdmUgdGhlXG4gICAgICogc2FuaXRpemVyIGxvYWRlZCwgcGFzc2luZyB0aGUgdmFsdWUgaXRzZWxmIHdpbGwgcmVuZGVyIGFsbCB0aGUgSFRNTCB0aGF0IGRvZXMgbm90IHBvc2UgYVxuICAgICAqIHNlY3VyaXR5IHJpc2suXG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGdldFRydXN0ZWR9IGZvciB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIGNvbnN1bWUgdGhvc2VcbiAgICAgKiB0cnVzdGVkIHZhbHVlcywgYW5kIHtAbGluayBuZy4kc2NlICRzY2V9IGZvciBnZW5lcmFsIGRvY3VtZW50YXRpb24gYWJvdXQgc3RyaWN0IGNvbnRleHR1YWxcbiAgICAgKiBlc2NhcGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgc2FmZSBmb3IgdXNlLCBlLmcuIGAkc2NlLlVSTGAsXG4gICAgICogICAgIGAkc2NlLlJFU09VUkNFX1VSTGAsIGAkc2NlLkhUTUxgLCBgJHNjZS5KU2Agb3IgYCRzY2UuQ1NTYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRoYXQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdHJ1c3RlZC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHRydXN0ZWQgcmVwcmVzZW50YXRpb24gb2YgdmFsdWUsIHRoYXQgY2FuIGJlIHVzZWQgaW4gdGhlIGdpdmVuIGNvbnRleHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdHJ1c3RBcyh0eXBlLCB0cnVzdGVkVmFsdWUpIHtcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IChieVR5cGUuaGFzT3duUHJvcGVydHkodHlwZSkgPyBieVR5cGVbdHlwZV0gOiBudWxsKTtcbiAgICAgIGlmICghQ29uc3RydWN0b3IpIHtcbiAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaWNvbnRleHQnLFxuICAgICAgICAgICAgJ0F0dGVtcHRlZCB0byB0cnVzdCBhIHZhbHVlIGluIGludmFsaWQgY29udGV4dC4gQ29udGV4dDogezB9OyBWYWx1ZTogezF9JyxcbiAgICAgICAgICAgIHR5cGUsIHRydXN0ZWRWYWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodHJ1c3RlZFZhbHVlID09PSBudWxsIHx8IGlzVW5kZWZpbmVkKHRydXN0ZWRWYWx1ZSkgfHwgdHJ1c3RlZFZhbHVlID09PSAnJykge1xuICAgICAgICByZXR1cm4gdHJ1c3RlZFZhbHVlO1xuICAgICAgfVxuICAgICAgLy8gQWxsIHRoZSBjdXJyZW50IGNvbnRleHRzIGluIFNDRV9DT05URVhUUyBoYXBwZW4gdG8gYmUgc3RyaW5ncy4gIEluIG9yZGVyIHRvIGF2b2lkIHRydXN0aW5nXG4gICAgICAvLyBtdXRhYmxlIG9iamVjdHMsIHdlIGVuc3VyZSBoZXJlIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbiBpcyBhY3R1YWxseSBhIHN0cmluZy5cbiAgICAgIGlmICh0eXBlb2YgdHJ1c3RlZFZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyAkc2NlTWluRXJyKCdpdHlwZScsXG4gICAgICAgICAgICAnQXR0ZW1wdGVkIHRvIHRydXN0IGEgbm9uLXN0cmluZyB2YWx1ZSBpbiBhIGNvbnRlbnQgcmVxdWlyaW5nIGEgc3RyaW5nOiBDb250ZXh0OiB7MH0nLFxuICAgICAgICAgICAgdHlwZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRydXN0ZWRWYWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2VEZWxlZ2F0ZSN2YWx1ZU9mXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBJZiB0aGUgcGFzc2VkIHBhcmFtZXRlciBoYWQgYmVlbiByZXR1cm5lZCBieSBhIHByaW9yIGNhbGwgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzXG4gICAgICogYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0sIHJldHVybnMgdGhlIHZhbHVlIHRoYXQgaGFkIGJlZW4gcGFzc2VkIHRvIHtAbGlua1xuICAgICAqIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LlxuICAgICAqXG4gICAgICogSWYgdGhlIHBhc3NlZCBwYXJhbWV0ZXIgaXMgbm90IGEgdmFsdWUgdGhhdCBoYWQgYmVlbiByZXR1cm5lZCBieSB7QGxpbmtcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSwgaXQgbXVzdCBiZSByZXR1cm5lZCBhcy1pcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfVxuICAgICAqICAgICBjYWxsIG9yIGFueXRoaW5nIGVsc2UuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGB2YWx1ZWAgdGhhdCB3YXMgb3JpZ2luYWxseSBwcm92aWRlZCB0byB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXNcbiAgICAgKiAgICAgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzYH0gaWYgYHZhbHVlYCBpcyB0aGUgcmVzdWx0IG9mIHN1Y2ggYSBjYWxsLiAgT3RoZXJ3aXNlLCByZXR1cm5zXG4gICAgICogICAgIGB2YWx1ZWAgdW5jaGFuZ2VkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHZhbHVlT2YobWF5YmVUcnVzdGVkKSB7XG4gICAgICBpZiAobWF5YmVUcnVzdGVkIGluc3RhbmNlb2YgdHJ1c3RlZFZhbHVlSG9sZGVyQmFzZSkge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWF5YmVUcnVzdGVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogVGFrZXMgYW55IGlucHV0LCBhbmQgZWl0aGVyIHJldHVybnMgYSB2YWx1ZSB0aGF0J3Mgc2FmZSB0byB1c2UgaW4gdGhlIHNwZWNpZmllZCBjb250ZXh0LCBvclxuICAgICAqIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICpcbiAgICAgKiBJbiBwcmFjdGljZSwgdGhlcmUgYXJlIHNldmVyYWwgY2FzZXMuIFdoZW4gZ2l2ZW4gYSBzdHJpbmcsIHRoaXMgZnVuY3Rpb24gcnVucyBjaGVja3NcbiAgICAgKiBhbmQgc2FuaXRpemF0aW9uIHRvIG1ha2UgaXQgc2FmZSB3aXRob3V0IHByaW9yIGFzc3VtcHRpb25zLiBXaGVuIGdpdmVuIHRoZSByZXN1bHQgb2YgYSB7QGxpbmtcbiAgICAgKiBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBjYWxsLCBpdCByZXR1cm5zIHRoZSBvcmlnaW5hbGx5IHN1cHBsaWVkXG4gICAgICogdmFsdWUgaWYgdGhhdCB2YWx1ZSdzIGNvbnRleHQgaXMgdmFsaWQgZm9yIHRoaXMgY2FsbCdzIGNvbnRleHQuIEZpbmFsbHksIHRoaXMgZnVuY3Rpb24gY2FuXG4gICAgICogYWxzbyB0aHJvdyB3aGVuIHRoZXJlIGlzIG5vIHdheSB0byB0dXJuIGBtYXliZVRydXN0ZWRgIGluIGEgc2FmZSB2YWx1ZSAoZS5nLiwgbm8gc2FuaXRpemF0aW9uXG4gICAgICogaXMgYXZhaWxhYmxlIG9yIHBvc3NpYmxlLilcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBjb250ZXh0IGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgdG8gYmUgdXNlZCAoc3VjaCBhcyBgJHNjZS5IVE1MYCkuXG4gICAgICogQHBhcmFtIHsqfSBtYXliZVRydXN0ZWQgVGhlIHJlc3VsdCBvZiBhIHByaW9yIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBc1xuICAgICAqICAgICBgJHNjZURlbGVnYXRlLnRydXN0QXNgfSBjYWxsLCBvciBhbnl0aGluZyBlbHNlICh3aGljaCB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIHRydXN0ZWQuKVxuICAgICAqIEByZXR1cm4geyp9IEEgdmVyc2lvbiBvZiB0aGUgdmFsdWUgdGhhdCdzIHNhZmUgdG8gdXNlIGluIHRoZSBnaXZlbiBjb250ZXh0LCBvciB0aHJvd3MgYW5cbiAgICAgKiAgICAgZXhjZXB0aW9uIGlmIHRoaXMgaXMgaW1wb3NzaWJsZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRUcnVzdGVkKHR5cGUsIG1heWJlVHJ1c3RlZCkge1xuICAgICAgaWYgKG1heWJlVHJ1c3RlZCA9PT0gbnVsbCB8fCBpc1VuZGVmaW5lZChtYXliZVRydXN0ZWQpIHx8IG1heWJlVHJ1c3RlZCA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIG1heWJlVHJ1c3RlZDtcbiAgICAgIH1cbiAgICAgIHZhciBjb25zdHJ1Y3RvciA9IChieVR5cGUuaGFzT3duUHJvcGVydHkodHlwZSkgPyBieVR5cGVbdHlwZV0gOiBudWxsKTtcbiAgICAgIC8vIElmIG1heWJlVHJ1c3RlZCBpcyBhIHRydXN0ZWQgY2xhc3MgaW5zdGFuY2Ugb3Igc3ViY2xhc3MgaW5zdGFuY2UsIHRoZW4gdW53cmFwIGFuZCByZXR1cm5cbiAgICAgIC8vIGFzLWlzLlxuICAgICAgaWYgKGNvbnN0cnVjdG9yICYmIG1heWJlVHJ1c3RlZCBpbnN0YW5jZW9mIGNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtcbiAgICAgIH1cbiAgICAgIC8vIE90aGVyd2lzZSwgaWYgd2UgZ2V0IGhlcmUsIHRoZW4gd2UgbWF5IGVpdGhlciBtYWtlIGl0IHNhZmUsIG9yIHRocm93IGFuIGV4Y2VwdGlvbi4gVGhpc1xuICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgY29udGV4dDogc29tZSBhcmUgc2FuaXRpemF0aWJsZSAoSFRNTCksIHNvbWUgdXNlIHdoaXRlbGlzdHMgKFJFU09VUkNFX1VSTCksXG4gICAgICAvLyBzb21lIGFyZSBpbXBvc3NpYmxlIHRvIGRvIChKUykuIFRoaXMgc3RlcCBpc24ndCBpbXBsZW1lbnRlZCBmb3IgQ1NTIGFuZCBVUkwsIGFzIEFuZ3VsYXJKU1xuICAgICAgLy8gaGFzIG5vIGNvcnJlc3BvbmRpbmcgc2lua3MuXG4gICAgICBpZiAodHlwZSA9PT0gU0NFX0NPTlRFWFRTLlJFU09VUkNFX1VSTCkge1xuICAgICAgICAvLyBSRVNPVVJDRV9VUkwgdXNlcyBhIHdoaXRlbGlzdC5cbiAgICAgICAgaWYgKGlzUmVzb3VyY2VVcmxBbGxvd2VkQnlQb2xpY3kobWF5YmVUcnVzdGVkKSkge1xuICAgICAgICAgIHJldHVybiBtYXliZVRydXN0ZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgJHNjZU1pbkVycignaW5zZWN1cmwnLFxuICAgICAgICAgICAgICAnQmxvY2tlZCBsb2FkaW5nIHJlc291cmNlIGZyb20gdXJsIG5vdCBhbGxvd2VkIGJ5ICRzY2VEZWxlZ2F0ZSBwb2xpY3kuICBVUkw6IHswfScsXG4gICAgICAgICAgICAgIG1heWJlVHJ1c3RlZC50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBTQ0VfQ09OVEVYVFMuSFRNTCkge1xuICAgICAgICAvLyBodG1sU2FuaXRpemVyIHRocm93cyBpdHMgb3duIGVycm9yIHdoZW4gbm8gc2FuaXRpemVyIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgcmV0dXJuIGh0bWxTYW5pdGl6ZXIobWF5YmVUcnVzdGVkKTtcbiAgICAgIH1cbiAgICAgIC8vIERlZmF1bHQgZXJyb3Igd2hlbiB0aGUgJHNjZSBzZXJ2aWNlIGhhcyBubyB3YXkgdG8gbWFrZSB0aGUgaW5wdXQgc2FmZS5cbiAgICAgIHRocm93ICRzY2VNaW5FcnIoJ3Vuc2FmZScsICdBdHRlbXB0aW5nIHRvIHVzZSBhbiB1bnNhZmUgdmFsdWUgaW4gYSBzYWZlIGNvbnRleHQuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgdHJ1c3RBczogdHJ1c3RBcyxcbiAgICAgICAgICAgICBnZXRUcnVzdGVkOiBnZXRUcnVzdGVkLFxuICAgICAgICAgICAgIHZhbHVlT2Y6IHZhbHVlT2YgfTtcbiAgfV07XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRzY2VQcm92aWRlclxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGUgJHNjZVByb3ZpZGVyIHByb3ZpZGVyIGFsbG93cyBkZXZlbG9wZXJzIHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIG5nLiRzY2UgJHNjZX0gc2VydmljZS5cbiAqIC0gICBlbmFibGUvZGlzYWJsZSBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZyAoU0NFKSBpbiBhIG1vZHVsZVxuICogLSAgIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHdpdGggYSBjdXN0b20gZGVsZWdhdGVcbiAqXG4gKiBSZWFkIG1vcmUgYWJvdXQge0BsaW5rIG5nLiRzY2UgU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgKFNDRSl9LlxuICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRzY2VcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogYCRzY2VgIGlzIGEgc2VydmljZSB0aGF0IHByb3ZpZGVzIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIHNlcnZpY2VzIHRvIEFuZ3VsYXJKUy5cbiAqXG4gKiAjIyBTdHJpY3QgQ29udGV4dHVhbCBFc2NhcGluZ1xuICpcbiAqIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpIGlzIGEgbW9kZSBpbiB3aGljaCBBbmd1bGFySlMgY29uc3RyYWlucyBiaW5kaW5ncyB0byBvbmx5IHJlbmRlclxuICogdHJ1c3RlZCB2YWx1ZXMuIEl0cyBnb2FsIGlzIHRvIGFzc2lzdCBpbiB3cml0aW5nIGNvZGUgaW4gYSB3YXkgdGhhdCAoYSkgaXMgc2VjdXJlIGJ5IGRlZmF1bHQsIGFuZFxuICogKGIpIG1ha2VzIGF1ZGl0aW5nIGZvciBzZWN1cml0eSB2dWxuZXJhYmlsaXRpZXMgc3VjaCBhcyBYU1MsIGNsaWNramFja2luZywgZXRjLiBhIGxvdCBlYXNpZXIuXG4gKlxuICogIyMjIE92ZXJ2aWV3XG4gKlxuICogVG8gc3lzdGVtYXRpY2FsbHkgYmxvY2sgWFNTIHNlY3VyaXR5IGJ1Z3MsIEFuZ3VsYXJKUyB0cmVhdHMgYWxsIHZhbHVlcyBhcyB1bnRydXN0ZWQgYnkgZGVmYXVsdCBpblxuICogSFRNTCBvciBzZW5zaXRpdmUgVVJMIGJpbmRpbmdzLiBXaGVuIGJpbmRpbmcgdW50cnVzdGVkIHZhbHVlcywgQW5ndWxhckpTIHdpbGwgYXV0b21hdGljYWxseVxuICogcnVuIHNlY3VyaXR5IGNoZWNrcyBvbiB0aGVtIChzYW5pdGl6YXRpb25zLCB3aGl0ZWxpc3RzLCBkZXBlbmRpbmcgb24gY29udGV4dCksIG9yIHRocm93IHdoZW4gaXRcbiAqIGNhbm5vdCBndWFyYW50ZWUgdGhlIHNlY3VyaXR5IG9mIHRoZSByZXN1bHQuIFRoYXQgYmVoYXZpb3IgZGVwZW5kcyBzdHJvbmdseSBvbiBjb250ZXh0czogSFRNTFxuICogY2FuIGJlIHNhbml0aXplZCwgYnV0IHRlbXBsYXRlIFVSTHMgY2Fubm90LCBmb3IgaW5zdGFuY2UuXG4gKlxuICogVG8gaWxsdXN0cmF0ZSB0aGlzLCBjb25zaWRlciB0aGUgYG5nLWJpbmQtaHRtbGAgZGlyZWN0aXZlLiBJdCByZW5kZXJzIGl0cyB2YWx1ZSBkaXJlY3RseSBhcyBIVE1MOlxuICogd2UgY2FsbCB0aGF0IHRoZSAqY29udGV4dCouIFdoZW4gZ2l2ZW4gYW4gdW50cnVzdGVkIGlucHV0LCBBbmd1bGFySlMgd2lsbCBhdHRlbXB0IHRvIHNhbml0aXplIGl0XG4gKiBiZWZvcmUgcmVuZGVyaW5nIGlmIGEgc2FuaXRpemVyIGlzIGF2YWlsYWJsZSwgYW5kIHRocm93IG90aGVyd2lzZS4gVG8gYnlwYXNzIHNhbml0aXphdGlvbiBhbmRcbiAqIHJlbmRlciB0aGUgaW5wdXQgYXMtaXMsIHlvdSB3aWxsIG5lZWQgdG8gbWFyayBpdCBhcyB0cnVzdGVkIGZvciB0aGF0IGNvbnRleHQgYmVmb3JlIGF0dGVtcHRpbmdcbiAqIHRvIGJpbmQgaXQuXG4gKlxuICogQXMgb2YgdmVyc2lvbiAxLjIsIEFuZ3VsYXJKUyBzaGlwcyB3aXRoIFNDRSBlbmFibGVkIGJ5IGRlZmF1bHQuXG4gKlxuICogIyMjIEluIHByYWN0aWNlXG4gKlxuICogSGVyZSdzIGFuIGV4YW1wbGUgb2YgYSBiaW5kaW5nIGluIGEgcHJpdmlsZWdlZCBjb250ZXh0OlxuICpcbiAqIGBgYFxuICogPGlucHV0IG5nLW1vZGVsPVwidXNlckh0bWxcIiBhcmlhLWxhYmVsPVwiVXNlciBpbnB1dFwiPlxuICogPGRpdiBuZy1iaW5kLWh0bWw9XCJ1c2VySHRtbFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogTm90aWNlIHRoYXQgYG5nLWJpbmQtaHRtbGAgaXMgYm91bmQgdG8gYHVzZXJIdG1sYCBjb250cm9sbGVkIGJ5IHRoZSB1c2VyLiAgV2l0aCBTQ0VcbiAqIGRpc2FibGVkLCB0aGlzIGFwcGxpY2F0aW9uIGFsbG93cyB0aGUgdXNlciB0byByZW5kZXIgYXJiaXRyYXJ5IEhUTUwgaW50byB0aGUgRElWLCB3aGljaCB3b3VsZFxuICogYmUgYW4gWFNTIHNlY3VyaXR5IGJ1Zy4gSW4gYSBtb3JlIHJlYWxpc3RpYyBleGFtcGxlLCBvbmUgbWF5IGJlIHJlbmRlcmluZyB1c2VyIGNvbW1lbnRzLCBibG9nXG4gKiBhcnRpY2xlcywgZXRjLiB2aWEgYmluZGluZ3MuIChIVE1MIGlzIGp1c3Qgb25lIGV4YW1wbGUgb2YgYSBjb250ZXh0IHdoZXJlIHJlbmRlcmluZyB1c2VyXG4gKiBjb250cm9sbGVkIGlucHV0IGNyZWF0ZXMgc2VjdXJpdHkgdnVsbmVyYWJpbGl0aWVzLilcbiAqXG4gKiBGb3IgdGhlIGNhc2Ugb2YgSFRNTCwgeW91IG1pZ2h0IHVzZSBhIGxpYnJhcnksIGVpdGhlciBvbiB0aGUgY2xpZW50IHNpZGUsIG9yIG9uIHRoZSBzZXJ2ZXIgc2lkZSxcbiAqIHRvIHNhbml0aXplIHVuc2FmZSBIVE1MIGJlZm9yZSBiaW5kaW5nIHRvIHRoZSB2YWx1ZSBhbmQgcmVuZGVyaW5nIGl0IGluIHRoZSBkb2N1bWVudC5cbiAqXG4gKiBIb3cgd291bGQgeW91IGVuc3VyZSB0aGF0IGV2ZXJ5IHBsYWNlIHRoYXQgdXNlZCB0aGVzZSB0eXBlcyBvZiBiaW5kaW5ncyB3YXMgYm91bmQgdG8gYSB2YWx1ZSB0aGF0XG4gKiB3YXMgc2FuaXRpemVkIGJ5IHlvdXIgbGlicmFyeSAob3IgcmV0dXJuZWQgYXMgc2FmZSBmb3IgcmVuZGVyaW5nIGJ5IHlvdXIgc2VydmVyPykgIEhvdyBjYW4geW91XG4gKiBlbnN1cmUgdGhhdCB5b3UgZGlkbid0IGFjY2lkZW50YWxseSBkZWxldGUgdGhlIGxpbmUgdGhhdCBzYW5pdGl6ZWQgdGhlIHZhbHVlLCBvciByZW5hbWVkIHNvbWVcbiAqIHByb3BlcnRpZXMvZmllbGRzIGFuZCBmb3Jnb3QgdG8gdXBkYXRlIHRoZSBiaW5kaW5nIHRvIHRoZSBzYW5pdGl6ZWQgdmFsdWU/XG4gKlxuICogVG8gYmUgc2VjdXJlIGJ5IGRlZmF1bHQsIEFuZ3VsYXJKUyBtYWtlcyBzdXJlIGJpbmRpbmdzIGdvIHRocm91Z2ggdGhhdCBzYW5pdGl6YXRpb24sIG9yXG4gKiBhbnkgc2ltaWxhciB2YWxpZGF0aW9uIHByb2Nlc3MsIHVubGVzcyB0aGVyZSdzIGEgZ29vZCByZWFzb24gdG8gdHJ1c3QgdGhlIGdpdmVuIHZhbHVlIGluIHRoaXNcbiAqIGNvbnRleHQuICBUaGF0IHRydXN0IGlzIGZvcm1hbGl6ZWQgd2l0aCBhIGZ1bmN0aW9uIGNhbGwuIFRoaXMgbWVhbnMgdGhhdCBhcyBhIGRldmVsb3BlciwgeW91XG4gKiBjYW4gYXNzdW1lIGFsbCB1bnRydXN0ZWQgYmluZGluZ3MgYXJlIHNhZmUuIFRoZW4sIHRvIGF1ZGl0IHlvdXIgY29kZSBmb3IgYmluZGluZyBzZWN1cml0eSBpc3N1ZXMsXG4gKiB5b3UganVzdCBuZWVkIHRvIGVuc3VyZSB0aGUgdmFsdWVzIHlvdSBtYXJrIGFzIHRydXN0ZWQgaW5kZWVkIGFyZSBzYWZlIC0gYmVjYXVzZSB0aGV5IHdlcmVcbiAqIHJlY2VpdmVkIGZyb20geW91ciBzZXJ2ZXIsIHNhbml0aXplZCBieSB5b3VyIGxpYnJhcnksIGV0Yy4gWW91IGNhbiBvcmdhbml6ZSB5b3VyIGNvZGViYXNlIHRvXG4gKiBoZWxwIHdpdGggdGhpcyAtIHBlcmhhcHMgYWxsb3dpbmcgb25seSB0aGUgZmlsZXMgaW4gYSBzcGVjaWZpYyBkaXJlY3RvcnkgdG8gZG8gdGhpcy5cbiAqIEVuc3VyaW5nIHRoYXQgdGhlIGludGVybmFsIEFQSSBleHBvc2VkIGJ5IHRoYXQgY29kZSBkb2Vzbid0IG1hcmt1cCBhcmJpdHJhcnkgdmFsdWVzIGFzIHNhZmUgdGhlblxuICogYmVjb21lcyBhIG1vcmUgbWFuYWdlYWJsZSB0YXNrLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIEFuZ3VsYXJKUycgU0NFIHNlcnZpY2UsIG9uZSB1c2VzIHtAbGluayBuZy4kc2NlI3RydXN0QXMgJHNjZS50cnVzdEFzfVxuICogKGFuZCBzaG9ydGhhbmQgbWV0aG9kcyBzdWNoIGFzIHtAbGluayBuZy4kc2NlI3RydXN0QXNIdG1sICRzY2UudHJ1c3RBc0h0bWx9LCBldGMuKSB0b1xuICogYnVpbGQgdGhlIHRydXN0ZWQgdmVyc2lvbnMgb2YgeW91ciB2YWx1ZXMuXG4gKlxuICogIyMjIEhvdyBkb2VzIGl0IHdvcms/XG4gKlxuICogSW4gcHJpdmlsZWdlZCBjb250ZXh0cywgZGlyZWN0aXZlcyBhbmQgY29kZSB3aWxsIGJpbmQgdG8gdGhlIHJlc3VsdCBvZiB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkXG4gKiAkc2NlLmdldFRydXN0ZWQoY29udGV4dCwgdmFsdWUpfSByYXRoZXIgdGhhbiB0byB0aGUgdmFsdWUgZGlyZWN0bHkuICBUaGluayBvZiB0aGlzIGZ1bmN0aW9uIGFzXG4gKiBhIHdheSB0byBlbmZvcmNlIHRoZSByZXF1aXJlZCBzZWN1cml0eSBjb250ZXh0IGluIHlvdXIgZGF0YSBzaW5rLiBEaXJlY3RpdmVzIHVzZSB7QGxpbmtcbiAqIG5nLiRzY2UjcGFyc2VBcyAkc2NlLnBhcnNlQXN9IHJhdGhlciB0aGFuIGAkcGFyc2VgIHRvIHdhdGNoIGF0dHJpYnV0ZSBiaW5kaW5ncywgd2hpY2ggcGVyZm9ybXNcbiAqIHRoZSB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZH0gYmVoaW5kIHRoZSBzY2VuZXMgb24gbm9uLWNvbnN0YW50IGxpdGVyYWxzLiBBbHNvLFxuICogd2hlbiBiaW5kaW5nIHdpdGhvdXQgZGlyZWN0aXZlcywgQW5ndWxhckpTIHdpbGwgdW5kZXJzdGFuZCB0aGUgY29udGV4dCBvZiB5b3VyIGJpbmRpbmdzXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEFzIGFuIGV4YW1wbGUsIHtAbGluayBuZy5kaXJlY3RpdmU6bmdCaW5kSHRtbCBuZ0JpbmRIdG1sfSB1c2VzIHtAbGlua1xuICogbmcuJHNjZSNwYXJzZUFzSHRtbCAkc2NlLnBhcnNlQXNIdG1sKGJpbmRpbmcgZXhwcmVzc2lvbil9LiAgSGVyZSdzIHRoZSBhY3R1YWwgY29kZSAoc2xpZ2h0bHlcbiAqIHNpbXBsaWZpZWQpOlxuICpcbiAqIGBgYFxuICogdmFyIG5nQmluZEh0bWxEaXJlY3RpdmUgPSBbJyRzY2UnLCBmdW5jdGlvbigkc2NlKSB7XG4gKiAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICogICAgIHNjb3BlLiR3YXRjaCgkc2NlLnBhcnNlQXNIdG1sKGF0dHIubmdCaW5kSHRtbCksIGZ1bmN0aW9uKHZhbHVlKSB7XG4gKiAgICAgICBlbGVtZW50Lmh0bWwodmFsdWUgfHwgJycpO1xuICogICAgIH0pO1xuICogICB9O1xuICogfV07XG4gKiBgYGBcbiAqXG4gKiAjIyMgSW1wYWN0IG9uIGxvYWRpbmcgdGVtcGxhdGVzXG4gKlxuICogVGhpcyBhcHBsaWVzIGJvdGggdG8gdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbmNsdWRlIGBuZy1pbmNsdWRlYH0gZGlyZWN0aXZlIGFzIHdlbGwgYXNcbiAqIGB0ZW1wbGF0ZVVybGAncyBzcGVjaWZpZWQgYnkge0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS5cbiAqXG4gKiBCeSBkZWZhdWx0LCBBbmd1bGFyIG9ubHkgbG9hZHMgdGVtcGxhdGVzIGZyb20gdGhlIHNhbWUgZG9tYWluIGFuZCBwcm90b2NvbCBhcyB0aGUgYXBwbGljYXRpb25cbiAqIGRvY3VtZW50LiAgVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXG4gKiAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybH0gb24gdGhlIHRlbXBsYXRlIFVSTC4gIFRvIGxvYWQgdGVtcGxhdGVzIGZyb20gb3RoZXIgZG9tYWlucyBhbmQvb3JcbiAqIHByb3RvY29scywgeW91IG1heSBlaXRoZXIge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHdoaXRlbGlzdFxuICogdGhlbX0gb3Ige0BsaW5rIG5nLiRzY2UjdHJ1c3RBc1Jlc291cmNlVXJsIHdyYXAgaXR9IGludG8gYSB0cnVzdGVkIHZhbHVlLlxuICpcbiAqICpQbGVhc2Ugbm90ZSo6XG4gKiBUaGUgYnJvd3NlcidzXG4gKiBbU2FtZSBPcmlnaW4gUG9saWN5XShodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Jyb3dzZXJzZWMvd2lraS9QYXJ0MiNTYW1lLW9yaWdpbl9wb2xpY3lfZm9yX1hNTEh0dHBSZXF1ZXN0KVxuICogYW5kIFtDcm9zcy1PcmlnaW4gUmVzb3VyY2UgU2hhcmluZyAoQ09SUyldKGh0dHA6Ly93d3cudzMub3JnL1RSL2NvcnMvKVxuICogcG9saWN5IGFwcGx5IGluIGFkZGl0aW9uIHRvIHRoaXMgYW5kIG1heSBmdXJ0aGVyIHJlc3RyaWN0IHdoZXRoZXIgdGhlIHRlbXBsYXRlIGlzIHN1Y2Nlc3NmdWxseVxuICogbG9hZGVkLiAgVGhpcyBtZWFucyB0aGF0IHdpdGhvdXQgdGhlIHJpZ2h0IENPUlMgcG9saWN5LCBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIGEgZGlmZmVyZW50IGRvbWFpblxuICogd29uJ3Qgd29yayBvbiBhbGwgYnJvd3NlcnMuICBBbHNvLCBsb2FkaW5nIHRlbXBsYXRlcyBmcm9tIGBmaWxlOi8vYCBVUkwgZG9lcyBub3Qgd29yayBvbiBzb21lXG4gKiBicm93c2Vycy5cbiAqXG4gKiAjIyMgVGhpcyBmZWVscyBsaWtlIHRvbyBtdWNoIG92ZXJoZWFkXG4gKlxuICogSXQncyBpbXBvcnRhbnQgdG8gcmVtZW1iZXIgdGhhdCBTQ0Ugb25seSBhcHBsaWVzIHRvIGludGVycG9sYXRpb24gZXhwcmVzc2lvbnMuXG4gKlxuICogSWYgeW91ciBleHByZXNzaW9ucyBhcmUgY29uc3RhbnQgbGl0ZXJhbHMsIHRoZXkncmUgYXV0b21hdGljYWxseSB0cnVzdGVkIGFuZCB5b3UgZG9uJ3QgbmVlZCB0b1xuICogY2FsbCBgJHNjZS50cnVzdEFzYCBvbiB0aGVtIChlLmcuXG4gKiBgPGRpdiBuZy1iaW5kLWh0bWw9XCInPGI+aW1wbGljaXRseSB0cnVzdGVkPC9iPidcIj48L2Rpdj5gKSBqdXN0IHdvcmtzLiBUaGUgYCRzY2VEZWxlZ2F0ZWAgd2lsbFxuICogYWxzbyB1c2UgdGhlIGAkc2FuaXRpemVgIHNlcnZpY2UgaWYgaXQgaXMgYXZhaWxhYmxlIHdoZW4gYmluZGluZyB1bnRydXN0ZWQgdmFsdWVzIHRvXG4gKiBgJHNjZS5IVE1MYCBjb250ZXh0LiBBbmd1bGFySlMgcHJvdmlkZXMgYW4gaW1wbGVtZW50YXRpb24gaW4gYGFuZ3VsYXItc2FuaXRpemUuanNgLCBhbmQgaWYgeW91XG4gKiB3aXNoIHRvIHVzZSBpdCwgeW91IHdpbGwgYWxzbyBuZWVkIHRvIGRlcGVuZCBvbiB0aGUge0BsaW5rIG5nU2FuaXRpemUgYG5nU2FuaXRpemVgfSBtb2R1bGUgaW5cbiAqIHlvdXIgYXBwbGljYXRpb24uXG4gKlxuICogVGhlIGluY2x1ZGVkIHtAbGluayBuZy4kc2NlRGVsZWdhdGUgJHNjZURlbGVnYXRlfSBjb21lcyB3aXRoIHNhbmUgZGVmYXVsdHMgdG8gYWxsb3cgeW91IHRvIGxvYWRcbiAqIHRlbXBsYXRlcyBpbiBgbmctaW5jbHVkZWAgZnJvbSB5b3VyIGFwcGxpY2F0aW9uJ3MgZG9tYWluIHdpdGhvdXQgaGF2aW5nIHRvIGV2ZW4ga25vdyBhYm91dCBTQ0UuXG4gKiBJdCBibG9ja3MgbG9hZGluZyB0ZW1wbGF0ZXMgZnJvbSBvdGhlciBkb21haW5zIG9yIGxvYWRpbmcgdGVtcGxhdGVzIG92ZXIgaHR0cCBmcm9tIGFuIGh0dHBzXG4gKiBzZXJ2ZWQgZG9jdW1lbnQuICBZb3UgY2FuIGNoYW5nZSB0aGVzZSBieSBzZXR0aW5nIHlvdXIgb3duIGN1c3RvbSB7QGxpbmtcbiAqIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsV2hpdGVsaXN0IHdoaXRlbGlzdHN9IGFuZCB7QGxpbmtcbiAqIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0IGJsYWNrbGlzdHN9IGZvciBtYXRjaGluZyBzdWNoIFVSTHMuXG4gKlxuICogVGhpcyBzaWduaWZpY2FudGx5IHJlZHVjZXMgdGhlIG92ZXJoZWFkLiAgSXQgaXMgZmFyIGVhc2llciB0byBwYXkgdGhlIHNtYWxsIG92ZXJoZWFkIGFuZCBoYXZlIGFuXG4gKiBhcHBsaWNhdGlvbiB0aGF0J3Mgc2VjdXJlIGFuZCBjYW4gYmUgYXVkaXRlZCB0byB2ZXJpZnkgdGhhdCB3aXRoIG11Y2ggbW9yZSBlYXNlIHRoYW4gYm9sdGluZ1xuICogc2VjdXJpdHkgb250byBhbiBhcHBsaWNhdGlvbiBsYXRlci5cbiAqXG4gKiA8YSBuYW1lPVwiY29udGV4dHNcIj48L2E+XG4gKiAjIyMgV2hhdCB0cnVzdGVkIGNvbnRleHQgdHlwZXMgYXJlIHN1cHBvcnRlZD9cbiAqXG4gKiB8IENvbnRleHQgICAgICAgICAgICAgfCBOb3RlcyAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IGAkc2NlLkhUTUxgICAgICAgICAgfCBGb3IgSFRNTCB0aGF0J3Mgc2FmZSB0byBzb3VyY2UgaW50byB0aGUgYXBwbGljYXRpb24uICBUaGUge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0JpbmRIdG1sIG5nQmluZEh0bWx9IGRpcmVjdGl2ZSB1c2VzIHRoaXMgY29udGV4dCBmb3IgYmluZGluZ3MuIElmIGFuIHVuc2FmZSB2YWx1ZSBpcyBlbmNvdW50ZXJlZCwgYW5kIHRoZSB7QGxpbmsgbmdTYW5pdGl6ZS4kc2FuaXRpemUgJHNhbml0aXplfSBzZXJ2aWNlIGlzIGF2YWlsYWJsZSAoaW1wbGVtZW50ZWQgYnkgdGhlIHtAbGluayBuZ1Nhbml0aXplIG5nU2FuaXRpemV9IG1vZHVsZSkgdGhpcyB3aWxsIHNhbml0aXplIHRoZSB2YWx1ZSBpbnN0ZWFkIG9mIHRocm93aW5nIGFuIGVycm9yLiB8XG4gKiB8IGAkc2NlLkNTU2AgICAgICAgICAgfCBGb3IgQ1NTIHRoYXQncyBzYWZlIHRvIHNvdXJjZSBpbnRvIHRoZSBhcHBsaWNhdGlvbi4gIEN1cnJlbnRseSwgbm8gYmluZGluZ3MgcmVxdWlyZSB0aGlzIGNvbnRleHQuIEZlZWwgZnJlZSB0byB1c2UgaXQgaW4geW91ciBvd24gZGlyZWN0aXZlcy4gfFxuICogfCBgJHNjZS5VUkxgICAgICAgICAgIHwgRm9yIFVSTHMgdGhhdCBhcmUgc2FmZSB0byBmb2xsb3cgYXMgbGlua3MuICBDdXJyZW50bHkgdW51c2VkIChgPGEgaHJlZj1gLCBgPGltZyBzcmM9YCwgYW5kIHNvbWUgb3RoZXJzIHNhbml0aXplIHRoZWlyIHVybHMgYW5kIGRvbid0IGNvbnN0aXR1dGUgYW4gU0NFIGNvbnRleHQuKSB8XG4gKiB8IGAkc2NlLlJFU09VUkNFX1VSTGAgfCBGb3IgVVJMcyB0aGF0IGFyZSBub3Qgb25seSBzYWZlIHRvIGZvbGxvdyBhcyBsaW5rcywgYnV0IHdob3NlIGNvbnRlbnRzIGFyZSBhbHNvIHNhZmUgdG8gaW5jbHVkZSBpbiB5b3VyIGFwcGxpY2F0aW9uLiAgRXhhbXBsZXMgaW5jbHVkZSBgbmctaW5jbHVkZWAsIGBzcmNgIC8gYG5nU3JjYCBiaW5kaW5ncyBmb3IgdGFncyBvdGhlciB0aGFuIGBJTUdgLCBgVklERU9gLCBgQVVESU9gLCBgU09VUkNFYCwgYW5kIGBUUkFDS2AgKGUuZy4gYElGUkFNRWAsIGBPQkpFQ1RgLCBldGMuKSAgPGJyPjxicj5Ob3RlIHRoYXQgYCRzY2UuUkVTT1VSQ0VfVVJMYCBtYWtlcyBhIHN0cm9uZ2VyIHN0YXRlbWVudCBhYm91dCB0aGUgVVJMIHRoYW4gYCRzY2UuVVJMYCBkb2VzIChpdCdzIG5vdCBqdXN0IHRoZSBVUkwgdGhhdCBtYXR0ZXJzLCBidXQgYWxzbyB3aGF0IGlzIGF0IHRoZSBlbmQgb2YgaXQpLCBhbmQgdGhlcmVmb3JlIGNvbnRleHRzIHJlcXVpcmluZyB2YWx1ZXMgdHJ1c3RlZCBmb3IgYCRzY2UuUkVTT1VSQ0VfVVJMYCBjYW4gYmUgdXNlZCBhbnl3aGVyZSB0aGF0IHZhbHVlcyB0cnVzdGVkIGZvciBgJHNjZS5VUkxgIGFyZSByZXF1aXJlZC4gfFxuICogfCBgJHNjZS5KU2AgICAgICAgICAgIHwgRm9yIEphdmFTY3JpcHQgdGhhdCBpcyBzYWZlIHRvIGV4ZWN1dGUgaW4geW91ciBhcHBsaWNhdGlvbidzIGNvbnRleHQuICBDdXJyZW50bHksIG5vIGJpbmRpbmdzIHJlcXVpcmUgdGhpcyBjb250ZXh0LiAgRmVlbCBmcmVlIHRvIHVzZSBpdCBpbiB5b3VyIG93biBkaXJlY3RpdmVzLiB8XG4gKlxuICpcbiAqIEJlIGF3YXJlIHRoYXQgYGFbaHJlZl1gIGFuZCBgaW1nW3NyY11gIGF1dG9tYXRpY2FsbHkgc2FuaXRpemUgdGhlaXIgVVJMcyBhbmQgZG8gbm90IHBhc3MgdGhlbVxuICogdGhyb3VnaCB7QGxpbmsgbmcuJHNjZSNnZXRUcnVzdGVkICRzY2UuZ2V0VHJ1c3RlZH0uIFRoZXJlJ3Mgbm8gQ1NTLSwgVVJMLSwgb3IgSlMtY29udGV4dCBiaW5kaW5nc1xuICogaW4gQW5ndWxhckpTIGN1cnJlbnRseSwgc28gdGhlaXIgY29ycmVzcG9uZGluZyBgJHNjZS50cnVzdEFzYCBmdW5jdGlvbnMgYXJlbid0IHVzZWZ1bCB5ZXQuIFRoaXNcbiAqIG1pZ2h0IGV2b2x2ZS5cbiAqXG4gKiAjIyMgRm9ybWF0IG9mIGl0ZW1zIGluIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCByZXNvdXJjZVVybFdoaXRlbGlzdH0ve0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZVByb3ZpZGVyI3Jlc291cmNlVXJsQmxhY2tsaXN0IEJsYWNrbGlzdH0gPGEgbmFtZT1cInJlc291cmNlVXJsUGF0dGVybkl0ZW1cIj48L2E+XG4gKlxuICogIEVhY2ggZWxlbWVudCBpbiB0aGVzZSBhcnJheXMgbXVzdCBiZSBvbmUgb2YgdGhlIGZvbGxvd2luZzpcbiAqXG4gKiAgLSAqKidzZWxmJyoqXG4gKiAgICAtIFRoZSBzcGVjaWFsICoqc3RyaW5nKiosIGAnc2VsZidgLCBjYW4gYmUgdXNlZCB0byBtYXRjaCBhZ2FpbnN0IGFsbCBVUkxzIG9mIHRoZSAqKnNhbWVcbiAqICAgICAgZG9tYWluKiogYXMgdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50IHVzaW5nIHRoZSAqKnNhbWUgcHJvdG9jb2wqKi5cbiAqICAtICoqU3RyaW5nKiogKGV4Y2VwdCB0aGUgc3BlY2lhbCB2YWx1ZSBgJ3NlbGYnYClcbiAqICAgIC0gVGhlIHN0cmluZyBpcyBtYXRjaGVkIGFnYWluc3QgdGhlIGZ1bGwgKm5vcm1hbGl6ZWQgLyBhYnNvbHV0ZSBVUkwqIG9mIHRoZSByZXNvdXJjZVxuICogICAgICBiZWluZyB0ZXN0ZWQgKHN1YnN0cmluZyBtYXRjaGVzIGFyZSBub3QgZ29vZCBlbm91Z2guKVxuICogICAgLSBUaGVyZSBhcmUgZXhhY3RseSAqKnR3byB3aWxkY2FyZCBzZXF1ZW5jZXMqKiAtIGAqYCBhbmQgYCoqYC4gIEFsbCBvdGhlciBjaGFyYWN0ZXJzXG4gKiAgICAgIG1hdGNoIHRoZW1zZWx2ZXMuXG4gKiAgICAtIGAqYDogbWF0Y2hlcyB6ZXJvIG9yIG1vcmUgb2NjdXJyZW5jZXMgb2YgYW55IGNoYXJhY3RlciBvdGhlciB0aGFuIG9uZSBvZiB0aGUgZm9sbG93aW5nIDZcbiAqICAgICAgY2hhcmFjdGVyczogJ2A6YCcsICdgL2AnLCAnYC5gJywgJ2A/YCcsICdgJmAnIGFuZCAnYDtgJy4gIEl0J3MgYSB1c2VmdWwgd2lsZGNhcmQgZm9yIHVzZVxuICogICAgICBpbiBhIHdoaXRlbGlzdC5cbiAqICAgIC0gYCoqYDogbWF0Y2hlcyB6ZXJvIG9yIG1vcmUgb2NjdXJyZW5jZXMgb2YgKmFueSogY2hhcmFjdGVyLiAgQXMgc3VjaCwgaXQncyBub3RcbiAqICAgICAgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBhIHNjaGVtZSwgZG9tYWluLCBldGMuIGFzIGl0IHdvdWxkIG1hdGNoIHRvbyBtdWNoLiAgKGUuZy5cbiAqICAgICAgaHR0cDovLyoqLmV4YW1wbGUuY29tLyB3b3VsZCBtYXRjaCBodHRwOi8vZXZpbC5jb20vP2lnbm9yZT0uZXhhbXBsZS5jb20vIGFuZCB0aGF0IG1pZ2h0XG4gKiAgICAgIG5vdCBoYXZlIGJlZW4gdGhlIGludGVudGlvbi4pICBJdHMgdXNhZ2UgYXQgdGhlIHZlcnkgZW5kIG9mIHRoZSBwYXRoIGlzIG9rLiAgKGUuZy5cbiAqICAgICAgaHR0cDovL2Zvby5leGFtcGxlLmNvbS90ZW1wbGF0ZXMvKiopLlxuICogIC0gKipSZWdFeHAqKiAoKnNlZSBjYXZlYXQgYmVsb3cqKVxuICogICAgLSAqQ2F2ZWF0KjogIFdoaWxlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgYXJlIHBvd2VyZnVsIGFuZCBvZmZlciBncmVhdCBmbGV4aWJpbGl0eSwgIHRoZWlyIHN5bnRheFxuICogICAgICAoYW5kIGFsbCB0aGUgaW5ldml0YWJsZSBlc2NhcGluZykgbWFrZXMgdGhlbSAqaGFyZGVyIHRvIG1haW50YWluKi4gIEl0J3MgZWFzeSB0b1xuICogICAgICBhY2NpZGVudGFsbHkgaW50cm9kdWNlIGEgYnVnIHdoZW4gb25lIHVwZGF0ZXMgYSBjb21wbGV4IGV4cHJlc3Npb24gKGltaG8sIGFsbCByZWdleGVzIHNob3VsZFxuICogICAgICBoYXZlIGdvb2QgdGVzdCBjb3ZlcmFnZSkuICBGb3IgaW5zdGFuY2UsIHRoZSB1c2Ugb2YgYC5gIGluIHRoZSByZWdleCBpcyBjb3JyZWN0IG9ubHkgaW4gYVxuICogICAgICBzbWFsbCBudW1iZXIgb2YgY2FzZXMuICBBIGAuYCBjaGFyYWN0ZXIgaW4gdGhlIHJlZ2V4IHVzZWQgd2hlbiBtYXRjaGluZyB0aGUgc2NoZW1lIG9yIGFcbiAqICAgICAgc3ViZG9tYWluIGNvdWxkIGJlIG1hdGNoZWQgYWdhaW5zdCBhIGA6YCBvciBsaXRlcmFsIGAuYCB0aGF0IHdhcyBsaWtlbHkgbm90IGludGVuZGVkLiAgIEl0XG4gKiAgICAgIGlzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgdGhlIHN0cmluZyBwYXR0ZXJucyBhbmQgb25seSBmYWxsIGJhY2sgdG8gcmVndWxhciBleHByZXNzaW9uc1xuICogICAgICBhcyBhIGxhc3QgcmVzb3J0LlxuICogICAgLSBUaGUgcmVndWxhciBleHByZXNzaW9uIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgUmVnRXhwIChpLmUuIG5vdCBhIHN0cmluZy4pICBJdCBpc1xuICogICAgICBtYXRjaGVkIGFnYWluc3QgdGhlICoqZW50aXJlKiogKm5vcm1hbGl6ZWQgLyBhYnNvbHV0ZSBVUkwqIG9mIHRoZSByZXNvdXJjZSBiZWluZyB0ZXN0ZWRcbiAqICAgICAgKGV2ZW4gd2hlbiB0aGUgUmVnRXhwIGRpZCBub3QgaGF2ZSB0aGUgYF5gIGFuZCBgJGAgY29kZXMuKSAgSW4gYWRkaXRpb24sIGFueSBmbGFnc1xuICogICAgICBwcmVzZW50IG9uIHRoZSBSZWdFeHAgKHN1Y2ggYXMgbXVsdGlsaW5lLCBnbG9iYWwsIGlnbm9yZUNhc2UpIGFyZSBpZ25vcmVkLlxuICogICAgLSBJZiB5b3UgYXJlIGdlbmVyYXRpbmcgeW91ciBKYXZhU2NyaXB0IGZyb20gc29tZSBvdGhlciB0ZW1wbGF0aW5nIGVuZ2luZSAobm90XG4gKiAgICAgIHJlY29tbWVuZGVkLCBlLmcuIGluIGlzc3VlIFsjNDAwNl0oaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvNDAwNikpLFxuICogICAgICByZW1lbWJlciB0byBlc2NhcGUgeW91ciByZWd1bGFyIGV4cHJlc3Npb24gKGFuZCBiZSBhd2FyZSB0aGF0IHlvdSBtaWdodCBuZWVkIG1vcmUgdGhhblxuICogICAgICBvbmUgbGV2ZWwgb2YgZXNjYXBpbmcgZGVwZW5kaW5nIG9uIHlvdXIgdGVtcGxhdGluZyBlbmdpbmUgYW5kIHRoZSB3YXkgeW91IGludGVycG9sYXRlZFxuICogICAgICB0aGUgdmFsdWUuKSAgRG8gbWFrZSB1c2Ugb2YgeW91ciBwbGF0Zm9ybSdzIGVzY2FwaW5nIG1lY2hhbmlzbSBhcyBpdCBtaWdodCBiZSBnb29kXG4gKiAgICAgIGVub3VnaCBiZWZvcmUgY29kaW5nIHlvdXIgb3duLiAgRS5nLiBSdWJ5IGhhc1xuICogICAgICBbUmVnZXhwLmVzY2FwZShzdHIpXShodHRwOi8vd3d3LnJ1YnktZG9jLm9yZy9jb3JlLTIuMC4wL1JlZ2V4cC5odG1sI21ldGhvZC1jLWVzY2FwZSlcbiAqICAgICAgYW5kIFB5dGhvbiBoYXMgW3JlLmVzY2FwZV0oaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3JlLmh0bWwjcmUuZXNjYXBlKS5cbiAqICAgICAgSmF2YXNjcmlwdCBsYWNrcyBhIHNpbWlsYXIgYnVpbHQgaW4gZnVuY3Rpb24gZm9yIGVzY2FwaW5nLiAgVGFrZSBhIGxvb2sgYXQgR29vZ2xlXG4gKiAgICAgIENsb3N1cmUgbGlicmFyeSdzIFtnb29nLnN0cmluZy5yZWdFeHBFc2NhcGUocyldKFxuICogICAgICBodHRwOi8vZG9jcy5jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vZ2l0L2Nsb3N1cmVfZ29vZ19zdHJpbmdfc3RyaW5nLmpzLnNvdXJjZS5odG1sI2xpbmU5NjIpLlxuICpcbiAqIFJlZmVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciAkc2NlRGVsZWdhdGVQcm92aWRlcn0gZm9yIGFuIGV4YW1wbGUuXG4gKlxuICogIyMjIFNob3cgbWUgYW4gZXhhbXBsZSB1c2luZyBTQ0UuXG4gKlxuICogPGV4YW1wbGUgbW9kdWxlPVwibXlTY2VBcHBcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiIG5hbWU9XCJzY2Utc2VydmljZVwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQXBwQ29udHJvbGxlciBhcyBteUN0cmxcIj5cbiAqICAgICA8aSBuZy1iaW5kLWh0bWw9XCJteUN0cmwuZXhwbGljaXRseVRydXN0ZWRIdG1sXCIgaWQ9XCJleHBsaWNpdGx5VHJ1c3RlZEh0bWxcIj48L2k+PGJyPjxicj5cbiAqICAgICA8Yj5Vc2VyIGNvbW1lbnRzPC9iPjxicj5cbiAqICAgICBCeSBkZWZhdWx0LCBIVE1MIHRoYXQgaXNuJ3QgZXhwbGljaXRseSB0cnVzdGVkIChlLmcuIEFsaWNlJ3MgY29tbWVudCkgaXMgc2FuaXRpemVkIHdoZW5cbiAqICAgICAkc2FuaXRpemUgaXMgYXZhaWxhYmxlLiAgSWYgJHNhbml0aXplIGlzbid0IGF2YWlsYWJsZSwgdGhpcyByZXN1bHRzIGluIGFuIGVycm9yIGluc3RlYWQgb2YgYW5cbiAqICAgICBleHBsb2l0LlxuICogICAgIDxkaXYgY2xhc3M9XCJ3ZWxsXCI+XG4gKiAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInVzZXJDb21tZW50IGluIG15Q3RybC51c2VyQ29tbWVudHNcIj5cbiAqICAgICAgICAgPGI+e3t1c2VyQ29tbWVudC5uYW1lfX08L2I+OlxuICogICAgICAgICA8c3BhbiBuZy1iaW5kLWh0bWw9XCJ1c2VyQ29tbWVudC5odG1sQ29tbWVudFwiIGNsYXNzPVwiaHRtbENvbW1lbnRcIj48L3NwYW4+XG4gKiAgICAgICAgIDxicj5cbiAqICAgICAgIDwvZGl2PlxuICogICAgIDwvZGl2PlxuICogICA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqXG4gKiA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gKiAgIGFuZ3VsYXIubW9kdWxlKCdteVNjZUFwcCcsIFsnbmdTYW5pdGl6ZSddKVxuICogICAgIC5jb250cm9sbGVyKCdBcHBDb250cm9sbGVyJywgWyckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsICckc2NlJyxcbiAqICAgICAgIGZ1bmN0aW9uIEFwcENvbnRyb2xsZXIoJGh0dHAsICR0ZW1wbGF0ZUNhY2hlLCAkc2NlKSB7XG4gKiAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAqICAgICAgICAgJGh0dHAuZ2V0KCd0ZXN0X2RhdGEuanNvbicsIHtjYWNoZTogJHRlbXBsYXRlQ2FjaGV9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gKiAgICAgICAgICAgc2VsZi51c2VyQ29tbWVudHMgPSByZXNwb25zZS5kYXRhO1xuICogICAgICAgICB9KTtcbiAqICAgICAgICAgc2VsZi5leHBsaWNpdGx5VHJ1c3RlZEh0bWwgPSAkc2NlLnRydXN0QXNIdG1sKFxuICogICAgICAgICAgICAgJzxzcGFuIG9ubW91c2VvdmVyPVwidGhpcy50ZXh0Q29udGVudD0mcXVvdDtFeHBsaWNpdGx5IHRydXN0ZWQgSFRNTCBieXBhc3NlcyAnICtcbiAqICAgICAgICAgICAgICdzYW5pdGl6YXRpb24uJnF1b3Q7XCI+SG92ZXIgb3ZlciB0aGlzIHRleHQuPC9zcGFuPicpO1xuICogICAgICAgfV0pO1xuICogPC9maWxlPlxuICpcbiAqIDxmaWxlIG5hbWU9XCJ0ZXN0X2RhdGEuanNvblwiPlxuICogW1xuICogICB7IFwibmFtZVwiOiBcIkFsaWNlXCIsXG4gKiAgICAgXCJodG1sQ29tbWVudFwiOlxuICogICAgICAgICBcIjxzcGFuIG9ubW91c2VvdmVyPSd0aGlzLnRleHRDb250ZW50PVxcXCJQV04zRCFcXFwiJz5JcyA8aT5hbnlvbmU8L2k+IHJlYWRpbmcgdGhpcz88L3NwYW4+XCJcbiAqICAgfSxcbiAqICAgeyBcIm5hbWVcIjogXCJCb2JcIixcbiAqICAgICBcImh0bWxDb21tZW50XCI6IFwiPGk+WWVzITwvaT4gIEFtIEkgdGhlIG9ubHkgb3RoZXIgb25lP1wiXG4gKiAgIH1cbiAqIF1cbiAqIDwvZmlsZT5cbiAqXG4gKiA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgIGRlc2NyaWJlKCdTQ0UgZG9jIGRlbW8nLCBmdW5jdGlvbigpIHtcbiAqICAgICBpdCgnc2hvdWxkIHNhbml0aXplIHVudHJ1c3RlZCB2YWx1ZXMnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJy5odG1sQ29tbWVudCcpKS5maXJzdCgpLmdldEF0dHJpYnV0ZSgnaW5uZXJIVE1MJykpXG4gKiAgICAgICAgICAgLnRvQmUoJzxzcGFuPklzIDxpPmFueW9uZTwvaT4gcmVhZGluZyB0aGlzPzwvc3Bhbj4nKTtcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBOT1Qgc2FuaXRpemUgZXhwbGljaXRseSB0cnVzdGVkIHZhbHVlcycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2V4cGxpY2l0bHlUcnVzdGVkSHRtbCcpKS5nZXRBdHRyaWJ1dGUoJ2lubmVySFRNTCcpKS50b0JlKFxuICogICAgICAgICAgICc8c3BhbiBvbm1vdXNlb3Zlcj1cInRoaXMudGV4dENvbnRlbnQ9JnF1b3Q7RXhwbGljaXRseSB0cnVzdGVkIEhUTUwgYnlwYXNzZXMgJyArXG4gKiAgICAgICAgICAgJ3Nhbml0aXphdGlvbi4mcXVvdDtcIj5Ib3ZlciBvdmVyIHRoaXMgdGV4dC48L3NwYW4+Jyk7XG4gKiAgICAgfSk7XG4gKiAgIH0pO1xuICogPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqXG4gKlxuICogIyMgQ2FuIEkgZGlzYWJsZSBTQ0UgY29tcGxldGVseT9cbiAqXG4gKiBZZXMsIHlvdSBjYW4uICBIb3dldmVyLCB0aGlzIGlzIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkLiAgU0NFIGdpdmVzIHlvdSBhIGxvdCBvZiBzZWN1cml0eSBiZW5lZml0c1xuICogZm9yIGxpdHRsZSBjb2Rpbmcgb3ZlcmhlYWQuICBJdCB3aWxsIGJlIG11Y2ggaGFyZGVyIHRvIHRha2UgYW4gU0NFIGRpc2FibGVkIGFwcGxpY2F0aW9uIGFuZFxuICogZWl0aGVyIHNlY3VyZSBpdCBvbiB5b3VyIG93biBvciBlbmFibGUgU0NFIGF0IGEgbGF0ZXIgc3RhZ2UuICBJdCBtaWdodCBtYWtlIHNlbnNlIHRvIGRpc2FibGUgU0NFXG4gKiBmb3IgY2FzZXMgd2hlcmUgeW91IGhhdmUgYSBsb3Qgb2YgZXhpc3RpbmcgY29kZSB0aGF0IHdhcyB3cml0dGVuIGJlZm9yZSBTQ0Ugd2FzIGludHJvZHVjZWQgYW5kXG4gKiB5b3UncmUgbWlncmF0aW5nIHRoZW0gYSBtb2R1bGUgYXQgYSB0aW1lLiBBbHNvIGRvIG5vdGUgdGhhdCB0aGlzIGlzIGFuIGFwcC13aWRlIHNldHRpbmcsIHNvIGlmXG4gKiB5b3UgYXJlIHdyaXRpbmcgYSBsaWJyYXJ5LCB5b3Ugd2lsbCBjYXVzZSBzZWN1cml0eSBidWdzIGFwcGxpY2F0aW9ucyB1c2luZyBpdC5cbiAqXG4gKiBUaGF0IHNhaWQsIGhlcmUncyBob3cgeW91IGNhbiBjb21wbGV0ZWx5IGRpc2FibGUgU0NFOlxuICpcbiAqIGBgYFxuICogYW5ndWxhci5tb2R1bGUoJ215QXBwV2l0aFNjZURpc2FibGVkbXlBcHAnLCBbXSkuY29uZmlnKGZ1bmN0aW9uKCRzY2VQcm92aWRlcikge1xuICogICAvLyBDb21wbGV0ZWx5IGRpc2FibGUgU0NFLiAgRm9yIGRlbW9uc3RyYXRpb24gcHVycG9zZXMgb25seSFcbiAqICAgLy8gRG8gbm90IHVzZSBpbiBuZXcgcHJvamVjdHMgb3IgbGlicmFyaWVzLlxuICogICAkc2NlUHJvdmlkZXIuZW5hYmxlZChmYWxzZSk7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqL1xuXG5mdW5jdGlvbiAkU2NlUHJvdmlkZXIoKSB7XG4gIHZhciBlbmFibGVkID0gdHJ1ZTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSAkc2NlUHJvdmlkZXIjZW5hYmxlZFxuICAgKiBAa2luZCBmdW5jdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSB2YWx1ZSBJZiBwcm92aWRlZCwgdGhlbiBlbmFibGVzL2Rpc2FibGVzIFNDRSBhcHBsaWNhdGlvbi13aWRlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIFNDRSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBFbmFibGVzL2Rpc2FibGVzIFNDRSBhbmQgcmV0dXJucyB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICovXG4gIHRoaXMuZW5hYmxlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIGVuYWJsZWQgPSAhIXZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZW5hYmxlZDtcbiAgfTtcblxuXG4gIC8qIERlc2lnbiBub3RlcyBvbiB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBmb3IgU0NFLlxuICAgKlxuICAgKiBUaGUgQVBJIGNvbnRyYWN0IGZvciB0aGUgU0NFIGRlbGVnYXRlXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogVGhlIFNDRSBkZWxlZ2F0ZSBvYmplY3QgbXVzdCBwcm92aWRlIHRoZSBmb2xsb3dpbmcgMyBtZXRob2RzOlxuICAgKlxuICAgKiAtIHRydXN0QXMoY29udGV4dEVudW0sIHZhbHVlKVxuICAgKiAgICAgVGhpcyBtZXRob2QgaXMgdXNlZCB0byB0ZWxsIHRoZSBTQ0Ugc2VydmljZSB0aGF0IHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBPSyB0byB1c2UgaW4gdGhlXG4gICAqICAgICBjb250ZXh0cyBzcGVjaWZpZWQgYnkgY29udGV4dEVudW0uICBJdCBtdXN0IHJldHVybiBhbiBvYmplY3QgdGhhdCB3aWxsIGJlIGFjY2VwdGVkIGJ5XG4gICAqICAgICBnZXRUcnVzdGVkKCkgZm9yIGEgY29tcGF0aWJsZSBjb250ZXh0RW51bSBhbmQgcmV0dXJuIHRoaXMgdmFsdWUuXG4gICAqXG4gICAqIC0gdmFsdWVPZih2YWx1ZSlcbiAgICogICAgIEZvciB2YWx1ZXMgdGhhdCB3ZXJlIG5vdCBwcm9kdWNlZCBieSB0cnVzdEFzKCksIHJldHVybiB0aGVtIGFzIGlzLiAgRm9yIHZhbHVlcyB0aGF0IHdlcmVcbiAgICogICAgIHByb2R1Y2VkIGJ5IHRydXN0QXMoKSwgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIGlucHV0IHZhbHVlIHRvIHRydXN0QXMuICBCYXNpY2FsbHksIGlmXG4gICAqICAgICB0cnVzdEFzIGlzIHdyYXBwaW5nIHRoZSBnaXZlbiB2YWx1ZXMgaW50byBzb21lIHR5cGUsIHRoaXMgb3BlcmF0aW9uIHVud3JhcHMgaXQgd2hlbiBnaXZlblxuICAgKiAgICAgc3VjaCBhIHZhbHVlLlxuICAgKlxuICAgKiAtIGdldFRydXN0ZWQoY29udGV4dEVudW0sIHZhbHVlKVxuICAgKiAgICAgVGhpcyBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIHRoZSBhIHZhbHVlIHRoYXQgaXMgc2FmZSB0byB1c2UgaW4gdGhlIGNvbnRleHQgc3BlY2lmaWVkIGJ5XG4gICAqICAgICBjb250ZXh0RW51bSBvciB0aHJvdyBhbmQgZXhjZXB0aW9uIG90aGVyd2lzZS5cbiAgICpcbiAgICogTk9URTogVGhpcyBjb250cmFjdCBkZWxpYmVyYXRlbHkgZG9lcyBOT1Qgc3RhdGUgdGhhdCB2YWx1ZXMgcmV0dXJuZWQgYnkgdHJ1c3RBcygpIG11c3QgYmVcbiAgICogb3BhcXVlIG9yIHdyYXBwZWQgaW4gc29tZSBob2xkZXIgb2JqZWN0LiAgVGhhdCBoYXBwZW5zIHRvIGJlIGFuIGltcGxlbWVudGF0aW9uIGRldGFpbC4gIEZvclxuICAgKiBpbnN0YW5jZSwgYW4gaW1wbGVtZW50YXRpb24gY291bGQgbWFpbnRhaW4gYSByZWdpc3RyeSBvZiBhbGwgdHJ1c3RlZCBvYmplY3RzIGJ5IGNvbnRleHQuICBJblxuICAgKiBzdWNoIGEgY2FzZSwgdHJ1c3RBcygpIHdvdWxkIHJldHVybiB0aGUgc2FtZSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIGluLiAgZ2V0VHJ1c3RlZCgpIHdvdWxkXG4gICAqIHJldHVybiB0aGUgc2FtZSBvYmplY3QgcGFzc2VkIGluIGlmIGl0IHdhcyBmb3VuZCBpbiB0aGUgcmVnaXN0cnkgdW5kZXIgYSBjb21wYXRpYmxlIGNvbnRleHQgb3JcbiAgICogdGhyb3cgYW4gZXhjZXB0aW9uIG90aGVyd2lzZS4gIEFuIGltcGxlbWVudGF0aW9uIG1pZ2h0IG9ubHkgd3JhcCB2YWx1ZXMgc29tZSBvZiB0aGUgdGltZSBiYXNlZFxuICAgKiBvbiBzb21lIGNyaXRlcmlhLiAgZ2V0VHJ1c3RlZCgpIG1pZ2h0IHJldHVybiBhIHZhbHVlIGFuZCBub3QgdGhyb3cgYW4gZXhjZXB0aW9uIGZvciBzcGVjaWFsXG4gICAqIGNvbnN0YW50cyBvciBvYmplY3RzIGV2ZW4gaWYgbm90IHdyYXBwZWQuICBBbGwgc3VjaCBpbXBsZW1lbnRhdGlvbnMgZnVsZmlsbCB0aGlzIGNvbnRyYWN0LlxuICAgKlxuICAgKlxuICAgKiBBIG5vdGUgb24gdGhlIGluaGVyaXRhbmNlIG1vZGVsIGZvciBTQ0UgY29udGV4dHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIEkndmUgdXNlZCBpbmhlcml0YW5jZSBhbmQgbWFkZSBSRVNPVVJDRV9VUkwgd3JhcHBlZCB0eXBlcyBhIHN1YnR5cGUgb2YgVVJMIHdyYXBwZWQgdHlwZXMuICBUaGlzXG4gICAqIGlzIHB1cmVseSBhbiBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLlxuICAgKlxuICAgKiBUaGUgY29udHJhY3QgaXMgc2ltcGx5IHRoaXM6XG4gICAqXG4gICAqICAgICBnZXRUcnVzdGVkKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSkgc3VjY2VlZGluZyBpbXBsaWVzIHRoYXQgZ2V0VHJ1c3RlZCgkc2NlLlVSTCwgdmFsdWUpXG4gICAqICAgICB3aWxsIGFsc28gc3VjY2VlZC5cbiAgICpcbiAgICogSW5oZXJpdGFuY2UgaGFwcGVucyB0byBjYXB0dXJlIHRoaXMgaW4gYSBuYXR1cmFsIHdheS4gSW4gc29tZSBmdXR1cmUsIHdlIG1heSBub3QgdXNlXG4gICAqIGluaGVyaXRhbmNlIGFueW1vcmUuIFRoYXQgaXMgT0sgYmVjYXVzZSBubyBjb2RlIG91dHNpZGUgb2Ygc2NlLmpzIGFuZCBzY2VTcGVjcy5qcyB3b3VsZCBuZWVkIHRvXG4gICAqIGJlIGF3YXJlIG9mIHRoaXMgZGV0YWlsLlxuICAgKi9cblxuICB0aGlzLiRnZXQgPSBbJyRwYXJzZScsICckc2NlRGVsZWdhdGUnLCBmdW5jdGlvbihcbiAgICAgICAgICAgICAgICAkcGFyc2UsICAgJHNjZURlbGVnYXRlKSB7XG4gICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgLy8gUHJlcmVxOiBFbnN1cmUgdGhhdCB3ZSdyZSBub3QgcnVubmluZyBpbiBJRTwxMSBxdWlya3MgbW9kZS4gIEluIHRoYXQgbW9kZSwgSUUgPCAxMSBhbGxvd1xuICAgIC8vIHRoZSBcImV4cHJlc3Npb24oamF2YXNjcmlwdCBleHByZXNzaW9uKVwiIHN5bnRheCB3aGljaCBpcyBpbnNlY3VyZS5cbiAgICBpZiAoZW5hYmxlZCAmJiBtc2llIDwgOCkge1xuICAgICAgdGhyb3cgJHNjZU1pbkVycignaWVxdWlya3MnLFxuICAgICAgICAnU3RyaWN0IENvbnRleHR1YWwgRXNjYXBpbmcgZG9lcyBub3Qgc3VwcG9ydCBJbnRlcm5ldCBFeHBsb3JlciB2ZXJzaW9uIDwgMTEgaW4gcXVpcmtzICcgK1xuICAgICAgICAnbW9kZS4gIFlvdSBjYW4gZml4IHRoaXMgYnkgYWRkaW5nIHRoZSB0ZXh0IDwhZG9jdHlwZSBodG1sPiB0byB0aGUgdG9wIG9mIHlvdXIgSFRNTCAnICtcbiAgICAgICAgJ2RvY3VtZW50LiAgU2VlIGh0dHA6Ly9kb2NzLmFuZ3VsYXJqcy5vcmcvYXBpL25nLiRzY2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIHNjZSA9IHNoYWxsb3dDb3B5KFNDRV9DT05URVhUUyk7XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNpc0VuYWJsZWRcbiAgICAgKiBAa2luZCBmdW5jdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBTQ0UgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLiAgSWYgeW91IHdhbnQgdG8gc2V0IHRoZSB2YWx1ZSwgeW91XG4gICAgICogICAgIGhhdmUgdG8gZG8gaXQgYXQgbW9kdWxlIGNvbmZpZyB0aW1lIG9uIHtAbGluayBuZy4kc2NlUHJvdmlkZXIgJHNjZVByb3ZpZGVyfS5cbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgaWYgU0NFIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgc2NlLmlzRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGVuYWJsZWQ7XG4gICAgfTtcbiAgICBzY2UudHJ1c3RBcyA9ICRzY2VEZWxlZ2F0ZS50cnVzdEFzO1xuICAgIHNjZS5nZXRUcnVzdGVkID0gJHNjZURlbGVnYXRlLmdldFRydXN0ZWQ7XG4gICAgc2NlLnZhbHVlT2YgPSAkc2NlRGVsZWdhdGUudmFsdWVPZjtcblxuICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgc2NlLnRydXN0QXMgPSBzY2UuZ2V0VHJ1c3RlZCA9IGZ1bmN0aW9uKHR5cGUsIHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcbiAgICAgIHNjZS52YWx1ZU9mID0gaWRlbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ29udmVydHMgQW5ndWxhciB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpbnRvIGEgZnVuY3Rpb24uICBUaGlzIGlzIGxpa2Uge0BsaW5rXG4gICAgICogbmcuJHBhcnNlICRwYXJzZX0gYW5kIGlzIGlkZW50aWNhbCB3aGVuIHRoZSBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCBjb25zdGFudC4gIE90aGVyd2lzZSwgaXRcbiAgICAgKiB3cmFwcyB0aGUgZXhwcmVzc2lvbiBpbiBhIGNhbGwgdG8ge0BsaW5rIG5nLiRzY2UjZ2V0VHJ1c3RlZCAkc2NlLmdldFRydXN0ZWQoKnR5cGUqLFxuICAgICAqICpyZXN1bHQqKX1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBTQ0UgY29udGV4dCBpbiB3aGljaCB0aGlzIHJlc3VsdCB3aWxsIGJlIHVzZWQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBBIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gICAgICpcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZVxuICAgICAqICAgICAgc3RyaW5ncyBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlc1xuICAgICAqICAgICAgaW4gYGNvbnRleHRgLlxuICAgICAqL1xuICAgIHNjZS5wYXJzZUFzID0gZnVuY3Rpb24gc2NlUGFyc2VBcyh0eXBlLCBleHByKSB7XG4gICAgICB2YXIgcGFyc2VkID0gJHBhcnNlKGV4cHIpO1xuICAgICAgaWYgKHBhcnNlZC5saXRlcmFsICYmIHBhcnNlZC5jb25zdGFudCkge1xuICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICRwYXJzZShleHByLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBzY2UuZ2V0VHJ1c3RlZCh0eXBlLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBEZWxlZ2F0ZXMgdG8ge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBc2B9LiBBcyBzdWNoLCByZXR1cm5zIGFcbiAgICAgKiB3cmFwcGVkIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgeW91ciB2YWx1ZSwgYW5kIHRoZSB0cnVzdCB5b3UgaGF2ZSBpbiBpdHMgc2FmZXR5IGZvciB0aGUgZ2l2ZW5cbiAgICAgKiBjb250ZXh0LiBBbmd1bGFySlMgY2FuIHRoZW4gdXNlIHRoYXQgdmFsdWUgYXMtaXMgaW4gYmluZGluZ3Mgb2YgdGhlIHNwZWNpZmllZCBzZWN1cmUgY29udGV4dC5cbiAgICAgKiBUaGlzIGlzIHVzZWQgaW4gYmluZGluZ3MgZm9yIGBuZy1iaW5kLWh0bWxgLCBgbmctaW5jbHVkZWAsIGFuZCBtb3N0IGBzcmNgIGF0dHJpYnV0ZVxuICAgICAqIGludGVycG9sYXRpb25zLiBTZWUge0BsaW5rIG5nLiRzY2UgJHNjZX0gZm9yIHN0cmljdCBjb250ZXh0dWFsIGVzY2FwaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGNvbnRleHQgaW4gd2hpY2ggdGhpcyB2YWx1ZSBpcyBzYWZlIGZvciB1c2UsIGUuZy4gYCRzY2UuVVJMYCxcbiAgICAgKiAgICAgYCRzY2UuUkVTT1VSQ0VfVVJMYCwgYCRzY2UuSFRNTGAsIGAkc2NlLkpTYCBvciBgJHNjZS5DU1NgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdGhhdCB0aGF0IHNob3VsZCBiZSBjb25zaWRlcmVkIHRydXN0ZWQuXG4gICAgICogQHJldHVybiB7Kn0gQSB3cmFwcGVkIHZlcnNpb24gb2YgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHRydXN0ZWQgdmFyaWFudCBvZiB5b3VyIGB2YWx1ZWBcbiAgICAgKiAgICAgaW4gdGhlIGNvbnRleHQgeW91IHNwZWNpZmllZC5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNIdG1sXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc0h0bWwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSN0cnVzdEFzIGAkc2NlRGVsZWdhdGUudHJ1c3RBcygkc2NlLkhUTUwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBtYXJrIGFzIHRydXN0ZWQgZm9yIGAkc2NlLkhUTUxgIGNvbnRleHQuXG4gICAgICogQHJldHVybiB7Kn0gQSB3cmFwcGVkIHZlcnNpb24gb2YgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHRydXN0ZWQgdmFyaWFudCBvZiB5b3VyIGB2YWx1ZWBcbiAgICAgKiAgICAgaW4gYCRzY2UuSFRNTGAgY29udGV4dCAobGlrZSBgbmctYmluZC1odG1sYCkuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSN0cnVzdEFzQ3NzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc0Nzcyh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI3RydXN0QXMgYCRzY2VEZWxlZ2F0ZS50cnVzdEFzKCRzY2UuQ1NTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gbWFyayBhcyB0cnVzdGVkIGZvciBgJHNjZS5DU1NgIGNvbnRleHQuXG4gICAgICogQHJldHVybiB7Kn0gQSB3cmFwcGVkIHZlcnNpb24gb2YgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHRydXN0ZWQgdmFyaWFudFxuICAgICAqICAgICBvZiB5b3VyIGB2YWx1ZWAgaW4gYCRzY2UuQ1NTYCBjb250ZXh0LiBUaGlzIGNvbnRleHQgaXMgY3VycmVudGx5IHVudXNlZCwgc28gdGhlcmUgYXJlXG4gICAgICogICAgIGFsbW9zdCBubyByZWFzb25zIHRvIHVzZSB0aGlzIGZ1bmN0aW9uIHNvIGZhci5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI3RydXN0QXNVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS50cnVzdEFzVXJsKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBtYXJrIGFzIHRydXN0ZWQgZm9yIGAkc2NlLlVSTGAgY29udGV4dC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50IG9mIHlvdXIgYHZhbHVlYFxuICAgICAqICAgICBpbiBgJHNjZS5VUkxgIGNvbnRleHQuIFRoYXQgY29udGV4dCBpcyBjdXJyZW50bHkgdW51c2VkLCBzbyB0aGVyZSBhcmUgYWxtb3N0IG5vIHJlYXNvbnNcbiAgICAgKiAgICAgdG8gdXNlIHRoaXMgZnVuY3Rpb24gc28gZmFyLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc1Jlc291cmNlVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBtYXJrIGFzIHRydXN0ZWQgZm9yIGAkc2NlLlJFU09VUkNFX1VSTGAgY29udGV4dC5cbiAgICAgKiBAcmV0dXJuIHsqfSBBIHdyYXBwZWQgdmVyc2lvbiBvZiB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgdHJ1c3RlZCB2YXJpYW50IG9mIHlvdXIgYHZhbHVlYFxuICAgICAqICAgICBpbiBgJHNjZS5SRVNPVVJDRV9VUkxgIGNvbnRleHQgKHRlbXBsYXRlIFVSTHMgaW4gYG5nLWluY2x1ZGVgLCBtb3N0IGBzcmNgIGF0dHJpYnV0ZVxuICAgICAqICAgICBiaW5kaW5ncywgLi4uKVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjdHJ1c3RBc0pzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UudHJ1c3RBc0pzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjdHJ1c3RBcyBgJHNjZURlbGVnYXRlLnRydXN0QXMoJHNjZS5KUywgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIG1hcmsgYXMgdHJ1c3RlZCBmb3IgYCRzY2UuSlNgIGNvbnRleHQuXG4gICAgICogQHJldHVybiB7Kn0gQSB3cmFwcGVkIHZlcnNpb24gb2YgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHRydXN0ZWQgdmFyaWFudCBvZiB5b3VyIGB2YWx1ZWBcbiAgICAgKiAgICAgaW4gYCRzY2UuSlNgIGNvbnRleHQuIFRoYXQgY29udGV4dCBpcyBjdXJyZW50bHkgdW51c2VkLCBzbyB0aGVyZSBhcmUgYWxtb3N0IG5vIHJlYXNvbnMgdG9cbiAgICAgKiAgICAgdXNlIHRoaXMgZnVuY3Rpb24gc28gZmFyLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogRGVsZWdhdGVzIHRvIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWRgfS4gIEFzIHN1Y2gsXG4gICAgICogdGFrZXMgYW55IGlucHV0LCBhbmQgZWl0aGVyIHJldHVybnMgYSB2YWx1ZSB0aGF0J3Mgc2FmZSB0byB1c2UgaW4gdGhlIHNwZWNpZmllZCBjb250ZXh0LFxuICAgICAqIG9yIHRocm93cyBhbiBleGNlcHRpb24uIFRoaXMgZnVuY3Rpb24gaXMgYXdhcmUgb2YgdHJ1c3RlZCB2YWx1ZXMgY3JlYXRlZCBieSB0aGUgYHRydXN0QXNgXG4gICAgICogZnVuY3Rpb24gYW5kIGl0cyBzaG9ydGhhbmRzLCBhbmQgd2hlbiBjb250ZXh0cyBhcmUgYXBwcm9wcmlhdGUsIHJldHVybnMgdGhlIHVud3JhcHBlZCB2YWx1ZVxuICAgICAqIGFzLWlzLiBGaW5hbGx5LCB0aGlzIGZ1bmN0aW9uIGNhbiBhbHNvIHRocm93IHdoZW4gdGhlcmUgaXMgbm8gd2F5IHRvIHR1cm4gYG1heWJlVHJ1c3RlZGAgaW4gYVxuICAgICAqIHNhZmUgdmFsdWUgKGUuZy4sIG5vIHNhbml0aXphdGlvbiBpcyBhdmFpbGFibGUgb3IgcG9zc2libGUuKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGNvbnRleHQgaW4gd2hpY2ggdGhpcyB2YWx1ZSBpcyB0byBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7Kn0gbWF5YmVUcnVzdGVkIFRoZSByZXN1bHQgb2YgYSBwcmlvciB7QGxpbmsgbmcuJHNjZSN0cnVzdEFzXG4gICAgICogICAgIGAkc2NlLnRydXN0QXNgfSBjYWxsLCBvciBhbnl0aGluZyBlbHNlICh3aGljaCB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIHRydXN0ZWQuKVxuICAgICAqIEByZXR1cm4geyp9IEEgdmVyc2lvbiBvZiB0aGUgdmFsdWUgdGhhdCdzIHNhZmUgdG8gdXNlIGluIHRoZSBnaXZlbiBjb250ZXh0LCBvciB0aHJvd3MgYW5cbiAgICAgKiAgICAgZXhjZXB0aW9uIGlmIHRoaXMgaXMgaW1wb3NzaWJsZS5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRIdG1sXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UuZ2V0VHJ1c3RlZEh0bWwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLkhUTUwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlLmdldFRydXN0ZWRgLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLkhUTUwsIHZhbHVlKWBcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRDc3NcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkQ3NzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlRGVsZWdhdGUjZ2V0VHJ1c3RlZCBgJHNjZURlbGVnYXRlLmdldFRydXN0ZWQoJHNjZS5DU1MsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlLmdldFRydXN0ZWRgLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLkNTUywgdmFsdWUpYFxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjZ2V0VHJ1c3RlZFVybFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLlVSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2UuZ2V0VHJ1c3RlZGAuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHJldHVybiB2YWx1ZSBvZiBgJHNjZS5nZXRUcnVzdGVkKCRzY2UuVVJMLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNnZXRUcnVzdGVkUmVzb3VyY2VVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2VEZWxlZ2F0ZSNnZXRUcnVzdGVkIGAkc2NlRGVsZWdhdGUuZ2V0VHJ1c3RlZCgkc2NlLlJFU09VUkNFX1VSTCwgdmFsdWUpYH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHBhc3MgdG8gYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkYC5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGAkc2NlLmdldFRydXN0ZWQoJHNjZS5SRVNPVVJDRV9VUkwsIHZhbHVlKWBcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBuZ2RvYyBtZXRob2RcbiAgICAgKiBAbmFtZSAkc2NlI2dldFRydXN0ZWRKc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLmdldFRydXN0ZWRKcyh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZURlbGVnYXRlI2dldFRydXN0ZWQgYCRzY2VEZWxlZ2F0ZS5nZXRUcnVzdGVkKCRzY2UuSlMsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwYXNzIHRvIGAkc2NlLmdldFRydXN0ZWRgLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSByZXR1cm4gdmFsdWUgb2YgYCRzY2UuZ2V0VHJ1c3RlZCgkc2NlLkpTLCB2YWx1ZSlgXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzSHRtbFxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRoYW5kIG1ldGhvZC4gIGAkc2NlLnBhcnNlQXNIdG1sKGV4cHJlc3Npb24gc3RyaW5nKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlQXMgYCRzY2UucGFyc2VBcygkc2NlLkhUTUwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzQ3NzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0Nzcyh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5DU1MsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzVXJsXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc1VybCh2YWx1ZSlgIOKGklxuICAgICAqICAgICB7QGxpbmsgbmcuJHNjZSNwYXJzZUFzIGAkc2NlLnBhcnNlQXMoJHNjZS5VUkwsIHZhbHVlKWB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBTdHJpbmcgZXhwcmVzc2lvbiB0byBjb21waWxlLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNvbnRleHQsIGxvY2Fscyl9IEEgZnVuY3Rpb24gd2hpY2ggcmVwcmVzZW50cyB0aGUgY29tcGlsZWQgZXhwcmVzc2lvbjpcbiAgICAgKlxuICAgICAqICAgICogYGNvbnRleHRgIOKAkyBge29iamVjdH1gIOKAkyBhbiBvYmplY3QgYWdhaW5zdCB3aGljaCBhbnkgZXhwcmVzc2lvbnMgZW1iZWRkZWQgaW4gdGhlXG4gICAgICogICAgICBzdHJpbmdzIGFyZSBldmFsdWF0ZWQgYWdhaW5zdCAodHlwaWNhbGx5IGEgc2NvcGUgb2JqZWN0KS5cbiAgICAgKiAgICAqIGBsb2NhbHNgIOKAkyBge29iamVjdD19YCDigJMgbG9jYWwgdmFyaWFibGVzIGNvbnRleHQgb2JqZWN0LCB1c2VmdWwgZm9yIG92ZXJyaWRpbmcgdmFsdWVzXG4gICAgICogICAgICBpbiBgY29udGV4dGAuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICogQG5hbWUgJHNjZSNwYXJzZUFzUmVzb3VyY2VVcmxcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0aGFuZCBtZXRob2QuICBgJHNjZS5wYXJzZUFzUmVzb3VyY2VVcmwodmFsdWUpYCDihpJcbiAgICAgKiAgICAge0BsaW5rIG5nLiRzY2UjcGFyc2VBcyBgJHNjZS5wYXJzZUFzKCRzY2UuUkVTT1VSQ0VfVVJMLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBBIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gICAgICpcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZVxuICAgICAqICAgICAgc3RyaW5ncyBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlc1xuICAgICAqICAgICAgaW4gYGNvbnRleHRgLlxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG5nZG9jIG1ldGhvZFxuICAgICAqIEBuYW1lICRzY2UjcGFyc2VBc0pzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBTaG9ydGhhbmQgbWV0aG9kLiAgYCRzY2UucGFyc2VBc0pzKHZhbHVlKWAg4oaSXG4gICAgICogICAgIHtAbGluayBuZy4kc2NlI3BhcnNlQXMgYCRzY2UucGFyc2VBcygkc2NlLkpTLCB2YWx1ZSlgfVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gU3RyaW5nIGV4cHJlc3Npb24gdG8gY29tcGlsZS5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihjb250ZXh0LCBsb2NhbHMpfSBBIGZ1bmN0aW9uIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbXBpbGVkIGV4cHJlc3Npb246XG4gICAgICpcbiAgICAgKiAgICAqIGBjb250ZXh0YCDigJMgYHtvYmplY3R9YCDigJMgYW4gb2JqZWN0IGFnYWluc3Qgd2hpY2ggYW55IGV4cHJlc3Npb25zIGVtYmVkZGVkIGluIHRoZVxuICAgICAqICAgICAgc3RyaW5ncyBhcmUgZXZhbHVhdGVkIGFnYWluc3QgKHR5cGljYWxseSBhIHNjb3BlIG9iamVjdCkuXG4gICAgICogICAgKiBgbG9jYWxzYCDigJMgYHtvYmplY3Q9fWAg4oCTIGxvY2FsIHZhcmlhYmxlcyBjb250ZXh0IG9iamVjdCwgdXNlZnVsIGZvciBvdmVycmlkaW5nIHZhbHVlc1xuICAgICAqICAgICAgaW4gYGNvbnRleHRgLlxuICAgICAqL1xuXG4gICAgLy8gU2hvcnRoYW5kIGRlbGVnYXRpb25zLlxuICAgIHZhciBwYXJzZSA9IHNjZS5wYXJzZUFzLFxuICAgICAgICBnZXRUcnVzdGVkID0gc2NlLmdldFRydXN0ZWQsXG4gICAgICAgIHRydXN0QXMgPSBzY2UudHJ1c3RBcztcblxuICAgIGZvckVhY2goU0NFX0NPTlRFWFRTLCBmdW5jdGlvbihlbnVtVmFsdWUsIG5hbWUpIHtcbiAgICAgIHZhciBsTmFtZSA9IGxvd2VyY2FzZShuYW1lKTtcbiAgICAgIHNjZVtzbmFrZVRvQ2FtZWwoJ3BhcnNlX2FzXycgKyBsTmFtZSldID0gZnVuY3Rpb24oZXhwcikge1xuICAgICAgICByZXR1cm4gcGFyc2UoZW51bVZhbHVlLCBleHByKTtcbiAgICAgIH07XG4gICAgICBzY2Vbc25ha2VUb0NhbWVsKCdnZXRfdHJ1c3RlZF8nICsgbE5hbWUpXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBnZXRUcnVzdGVkKGVudW1WYWx1ZSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIHNjZVtzbmFrZVRvQ2FtZWwoJ3RydXN0X2FzXycgKyBsTmFtZSldID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRydXN0QXMoZW51bVZhbHVlLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjZTtcbiAgfV07XG59XG5cbi8qIGV4cG9ydGVkICRTbmlmZmVyUHJvdmlkZXIgKi9cblxuLyoqXG4gKiAhISEgVGhpcyBpcyBhbiB1bmRvY3VtZW50ZWQgXCJwcml2YXRlXCIgc2VydmljZSAhISFcbiAqXG4gKiBAbmFtZSAkc25pZmZlclxuICogQHJlcXVpcmVzICR3aW5kb3dcbiAqIEByZXF1aXJlcyAkZG9jdW1lbnRcbiAqIEB0aGlzXG4gKlxuICogQHByb3BlcnR5IHtib29sZWFufSBoaXN0b3J5IERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCBodG1sNSBoaXN0b3J5IGFwaSA/XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHRyYW5zaXRpb25zIERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCBDU1MgdHJhbnNpdGlvbiBldmVudHMgP1xuICogQHByb3BlcnR5IHtib29sZWFufSBhbmltYXRpb25zIERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCBDU1MgYW5pbWF0aW9uIGV2ZW50cyA/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIGlzIHZlcnkgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIHRlc3RpbmcgYnJvd3NlcidzIGZlYXR1cmVzLlxuICovXG5mdW5jdGlvbiAkU25pZmZlclByb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSBbJyR3aW5kb3cnLCAnJGRvY3VtZW50JywgZnVuY3Rpb24oJHdpbmRvdywgJGRvY3VtZW50KSB7XG4gICAgdmFyIGV2ZW50U3VwcG9ydCA9IHt9LFxuICAgICAgICAvLyBDaHJvbWUgUGFja2FnZWQgQXBwcyBhcmUgbm90IGFsbG93ZWQgdG8gYWNjZXNzIGBoaXN0b3J5LnB1c2hTdGF0ZWAuXG4gICAgICAgIC8vIElmIG5vdCBzYW5kYm94ZWQsIHRoZXkgY2FuIGJlIGRldGVjdGVkIGJ5IHRoZSBwcmVzZW5jZSBvZiBgY2hyb21lLmFwcC5ydW50aW1lYFxuICAgICAgICAvLyAoc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vYXBwcy9hcGlfaW5kZXgpLiBJZiBzYW5kYm94ZWQsIHRoZXkgY2FuIGJlIGRldGVjdGVkIGJ5XG4gICAgICAgIC8vIHRoZSBwcmVzZW5jZSBvZiBhbiBleHRlbnNpb24gcnVudGltZSBJRCBhbmQgdGhlIGFic2VuY2Ugb2Ygb3RoZXIgQ2hyb21lIHJ1bnRpbWUgQVBJc1xuICAgICAgICAvLyAoc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vYXBwcy9tYW5pZmVzdC9zYW5kYm94KS5cbiAgICAgICAgLy8gKE5XLmpzIGFwcHMgaGF2ZSBhY2Nlc3MgdG8gQ2hyb21lIEFQSXMsIGJ1dCBkbyBzdXBwb3J0IGBoaXN0b3J5YC4pXG4gICAgICAgIGlzTncgPSAkd2luZG93Lm53ICYmICR3aW5kb3cubncucHJvY2VzcyxcbiAgICAgICAgaXNDaHJvbWVQYWNrYWdlZEFwcCA9XG4gICAgICAgICAgICAhaXNOdyAmJlxuICAgICAgICAgICAgJHdpbmRvdy5jaHJvbWUgJiZcbiAgICAgICAgICAgICgkd2luZG93LmNocm9tZS5hcHAgJiYgJHdpbmRvdy5jaHJvbWUuYXBwLnJ1bnRpbWUgfHxcbiAgICAgICAgICAgICAgICAhJHdpbmRvdy5jaHJvbWUuYXBwICYmICR3aW5kb3cuY2hyb21lLnJ1bnRpbWUgJiYgJHdpbmRvdy5jaHJvbWUucnVudGltZS5pZCksXG4gICAgICAgIGhhc0hpc3RvcnlQdXNoU3RhdGUgPSAhaXNDaHJvbWVQYWNrYWdlZEFwcCAmJiAkd2luZG93Lmhpc3RvcnkgJiYgJHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSxcbiAgICAgICAgYW5kcm9pZCA9XG4gICAgICAgICAgdG9JbnQoKC9hbmRyb2lkIChcXGQrKS8uZXhlYyhsb3dlcmNhc2UoKCR3aW5kb3cubmF2aWdhdG9yIHx8IHt9KS51c2VyQWdlbnQpKSB8fCBbXSlbMV0pLFxuICAgICAgICBib3hlZSA9IC9Cb3hlZS9pLnRlc3QoKCR3aW5kb3cubmF2aWdhdG9yIHx8IHt9KS51c2VyQWdlbnQpLFxuICAgICAgICBkb2N1bWVudCA9ICRkb2N1bWVudFswXSB8fCB7fSxcbiAgICAgICAgYm9keVN0eWxlID0gZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LnN0eWxlLFxuICAgICAgICB0cmFuc2l0aW9ucyA9IGZhbHNlLFxuICAgICAgICBhbmltYXRpb25zID0gZmFsc2U7XG5cbiAgICBpZiAoYm9keVN0eWxlKSB7XG4gICAgICAvLyBTdXBwb3J0OiBBbmRyb2lkIDw1LCBCbGFja2JlcnJ5IEJyb3dzZXIgMTAsIGRlZmF1bHQgQ2hyb21lIGluIEFuZHJvaWQgNC40LnhcbiAgICAgIC8vIE1lbnRpb25lZCBicm93c2VycyBuZWVkIGEgLXdlYmtpdC0gcHJlZml4IGZvciB0cmFuc2l0aW9ucyAmIGFuaW1hdGlvbnMuXG4gICAgICB0cmFuc2l0aW9ucyA9ICEhKCd0cmFuc2l0aW9uJyBpbiBib2R5U3R5bGUgfHwgJ3dlYmtpdFRyYW5zaXRpb24nIGluIGJvZHlTdHlsZSk7XG4gICAgICBhbmltYXRpb25zID0gISEoJ2FuaW1hdGlvbicgaW4gYm9keVN0eWxlIHx8ICd3ZWJraXRBbmltYXRpb24nIGluIGJvZHlTdHlsZSk7XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgLy8gQW5kcm9pZCBoYXMgaGlzdG9yeS5wdXNoU3RhdGUsIGJ1dCBpdCBkb2VzIG5vdCB1cGRhdGUgbG9jYXRpb24gY29ycmVjdGx5XG4gICAgICAvLyBzbyBsZXQncyBub3QgdXNlIHRoZSBoaXN0b3J5IEFQSSBhdCBhbGwuXG4gICAgICAvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYW5kcm9pZC9pc3N1ZXMvZGV0YWlsP2lkPTE3NDcxXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy85MDRcblxuICAgICAgLy8gb2xkZXIgd2Via2l0IGJyb3dzZXIgKDUzMy45KSBvbiBCb3hlZSBib3ggaGFzIGV4YWN0bHkgdGhlIHNhbWUgcHJvYmxlbSBhcyBBbmRyb2lkIGhhc1xuICAgICAgLy8gc28gbGV0J3Mgbm90IHVzZSB0aGUgaGlzdG9yeSBBUEkgYWxzb1xuICAgICAgLy8gV2UgYXJlIHB1cnBvc2VmdWxseSB1c2luZyBgIShhbmRyb2lkIDwgNClgIHRvIGNvdmVyIHRoZSBjYXNlIHdoZW4gYGFuZHJvaWRgIGlzIHVuZGVmaW5lZFxuICAgICAgaGlzdG9yeTogISEoaGFzSGlzdG9yeVB1c2hTdGF0ZSAmJiAhKGFuZHJvaWQgPCA0KSAmJiAhYm94ZWUpLFxuICAgICAgaGFzRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seVxuICAgICAgICAvLyBJRTkgaW1wbGVtZW50cyAnaW5wdXQnIGV2ZW50IGl0J3Mgc28gZnViYXJlZCB0aGF0IHdlIHJhdGhlciBwcmV0ZW5kIHRoYXQgaXQgZG9lc24ndCBoYXZlXG4gICAgICAgIC8vIGl0LiBJbiBwYXJ0aWN1bGFyIHRoZSBldmVudCBpcyBub3QgZmlyZWQgd2hlbiBiYWNrc3BhY2Ugb3IgZGVsZXRlIGtleSBhcmUgcHJlc3NlZCBvclxuICAgICAgICAvLyB3aGVuIGN1dCBvcGVyYXRpb24gaXMgcGVyZm9ybWVkLlxuICAgICAgICAvLyBJRTEwKyBpbXBsZW1lbnRzICdpbnB1dCcgZXZlbnQgYnV0IGl0IGVycm9uZW91c2x5IGZpcmVzIHVuZGVyIHZhcmlvdXMgc2l0dWF0aW9ucyxcbiAgICAgICAgLy8gZS5nLiB3aGVuIHBsYWNlaG9sZGVyIGNoYW5nZXMsIG9yIGEgZm9ybSBpcyBmb2N1c2VkLlxuICAgICAgICBpZiAoZXZlbnQgPT09ICdpbnB1dCcgJiYgbXNpZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZChldmVudFN1cHBvcnRbZXZlbnRdKSkge1xuICAgICAgICAgIHZhciBkaXZFbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBldmVudFN1cHBvcnRbZXZlbnRdID0gJ29uJyArIGV2ZW50IGluIGRpdkVsbTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBldmVudFN1cHBvcnRbZXZlbnRdO1xuICAgICAgfSxcbiAgICAgIGNzcDogY3NwKCksXG4gICAgICB0cmFuc2l0aW9uczogdHJhbnNpdGlvbnMsXG4gICAgICBhbmltYXRpb25zOiBhbmltYXRpb25zLFxuICAgICAgYW5kcm9pZDogYW5kcm9pZFxuICAgIH07XG4gIH1dO1xufVxuXG52YXIgJHRlbXBsYXRlUmVxdWVzdE1pbkVyciA9IG1pbkVycignJGNvbXBpbGUnKTtcblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICR0ZW1wbGF0ZVJlcXVlc3RQcm92aWRlclxuICogQHRoaXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFVzZWQgdG8gY29uZmlndXJlIHRoZSBvcHRpb25zIHBhc3NlZCB0byB0aGUge0BsaW5rICRodHRwfSBzZXJ2aWNlIHdoZW4gbWFraW5nIGEgdGVtcGxhdGUgcmVxdWVzdC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgaXQgY2FuIGJlIHVzZWQgZm9yIHNwZWNpZnlpbmcgdGhlIFwiQWNjZXB0XCIgaGVhZGVyIHRoYXQgaXMgc2VudCB0byB0aGUgc2VydmVyLCB3aGVuXG4gKiByZXF1ZXN0aW5nIGEgdGVtcGxhdGUuXG4gKi9cbmZ1bmN0aW9uICRUZW1wbGF0ZVJlcXVlc3RQcm92aWRlcigpIHtcblxuICB2YXIgaHR0cE9wdGlvbnM7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyI2h0dHBPcHRpb25zXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGUgb3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gdGhlIHtAbGluayAkaHR0cH0gc2VydmljZSB3aGVuIG1ha2luZyB0aGUgcmVxdWVzdC5cbiAgICogWW91IGNhbiB1c2UgdGhpcyB0byBvdmVycmlkZSBvcHRpb25zIHN1Y2ggYXMgdGhlIFwiQWNjZXB0XCIgaGVhZGVyIGZvciB0ZW1wbGF0ZSByZXF1ZXN0cy5cbiAgICpcbiAgICogVGhlIHtAbGluayAkdGVtcGxhdGVSZXF1ZXN0fSB3aWxsIHNldCB0aGUgYGNhY2hlYCBhbmQgdGhlIGB0cmFuc2Zvcm1SZXNwb25zZWAgcHJvcGVydGllcyBvZiB0aGVcbiAgICogb3B0aW9ucyBpZiBub3Qgb3ZlcnJpZGRlbiBoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHZhbHVlIG5ldyB2YWx1ZSBmb3IgdGhlIHtAbGluayAkaHR0cH0gb3B0aW9ucy5cbiAgICogQHJldHVybnMge3N0cmluZ3xzZWxmfSBSZXR1cm5zIHRoZSB7QGxpbmsgJGh0dHB9IG9wdGlvbnMgd2hlbiB1c2VkIGFzIGdldHRlciBhbmQgc2VsZiBpZiB1c2VkIGFzIHNldHRlci5cbiAgICovXG4gIHRoaXMuaHR0cE9wdGlvbnMgPSBmdW5jdGlvbih2YWwpIHtcbiAgICBpZiAodmFsKSB7XG4gICAgICBodHRwT3B0aW9ucyA9IHZhbDtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gaHR0cE9wdGlvbnM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXG4gICAqIEBuYW1lICR0ZW1wbGF0ZVJlcXVlc3RcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRoZSBgJHRlbXBsYXRlUmVxdWVzdGAgc2VydmljZSBydW5zIHNlY3VyaXR5IGNoZWNrcyB0aGVuIGRvd25sb2FkcyB0aGUgcHJvdmlkZWQgdGVtcGxhdGUgdXNpbmdcbiAgICogYCRodHRwYCBhbmQsIHVwb24gc3VjY2Vzcywgc3RvcmVzIHRoZSBjb250ZW50cyBpbnNpZGUgb2YgYCR0ZW1wbGF0ZUNhY2hlYC4gSWYgdGhlIEhUVFAgcmVxdWVzdFxuICAgKiBmYWlscyBvciB0aGUgcmVzcG9uc2UgZGF0YSBvZiB0aGUgSFRUUCByZXF1ZXN0IGlzIGVtcHR5LCBhIGAkY29tcGlsZWAgZXJyb3Igd2lsbCBiZSB0aHJvd24gKHRoZVxuICAgKiBleGNlcHRpb24gY2FuIGJlIHRod2FydGVkIGJ5IHNldHRpbmcgdGhlIDJuZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHRvIHRydWUpLiBOb3RlIHRoYXQgdGhlXG4gICAqIGNvbnRlbnRzIG9mIGAkdGVtcGxhdGVDYWNoZWAgYXJlIHRydXN0ZWQsIHNvIHRoZSBjYWxsIHRvIGAkc2NlLmdldFRydXN0ZWRVcmwodHBsKWAgaXMgb21pdHRlZFxuICAgKiB3aGVuIGB0cGxgIGlzIG9mIHR5cGUgc3RyaW5nIGFuZCBgJHRlbXBsYXRlQ2FjaGVgIGhhcyB0aGUgbWF0Y2hpbmcgZW50cnkuXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRvIHBhc3MgY3VzdG9tIG9wdGlvbnMgdG8gdGhlIGAkaHR0cGAgc2VydmljZSwgc3VjaCBhcyBzZXR0aW5nIHRoZSBBY2NlcHQgaGVhZGVyIHlvdVxuICAgKiBjYW4gY29uZmlndXJlIHRoaXMgdmlhIHtAbGluayAkdGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIjaHR0cE9wdGlvbnN9LlxuICAgKlxuICAgKiBgJHRlbXBsYXRlUmVxdWVzdGAgaXMgdXNlZCBpbnRlcm5hbGx5IGJ5IHtAbGluayAkY29tcGlsZX0sIHtAbGluayBuZ1JvdXRlLiRyb3V0ZX0sIGFuZCBkaXJlY3RpdmVzIHN1Y2hcbiAgICogYXMge0BsaW5rIG5nSW5jbHVkZX0gdG8gZG93bmxvYWQgYW5kIGNhY2hlIHRlbXBsYXRlcy5cbiAgICpcbiAgICogM3JkIHBhcnR5IG1vZHVsZXMgc2hvdWxkIHVzZSBgJHRlbXBsYXRlUmVxdWVzdGAgaWYgdGhlaXIgc2VydmljZXMgb3IgZGlyZWN0aXZlcyBhcmUgbG9hZGluZ1xuICAgKiB0ZW1wbGF0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfFRydXN0ZWRSZXNvdXJjZVVybH0gdHBsIFRoZSBIVFRQIHJlcXVlc3QgdGVtcGxhdGUgVVJMXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGlnbm9yZVJlcXVlc3RFcnJvciBXaGV0aGVyIG9yIG5vdCB0byBpZ25vcmUgdGhlIGV4Y2VwdGlvbiB3aGVuIHRoZSByZXF1ZXN0IGZhaWxzIG9yIHRoZSB0ZW1wbGF0ZSBpcyBlbXB0eVxuICAgKlxuICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgZm9yIHRoZSBIVFRQIHJlc3BvbnNlIGRhdGEgb2YgdGhlIGdpdmVuIFVSTC5cbiAgICpcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRvdGFsUGVuZGluZ1JlcXVlc3RzIHRvdGFsIGFtb3VudCBvZiBwZW5kaW5nIHRlbXBsYXRlIHJlcXVlc3RzIGJlaW5nIGRvd25sb2FkZWQuXG4gICAqL1xuICB0aGlzLiRnZXQgPSBbJyRleGNlcHRpb25IYW5kbGVyJywgJyR0ZW1wbGF0ZUNhY2hlJywgJyRodHRwJywgJyRxJywgJyRzY2UnLFxuICAgIGZ1bmN0aW9uKCRleGNlcHRpb25IYW5kbGVyLCAkdGVtcGxhdGVDYWNoZSwgJGh0dHAsICRxLCAkc2NlKSB7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3RGbih0cGwsIGlnbm9yZVJlcXVlc3RFcnJvcikge1xuICAgICAgICBoYW5kbGVSZXF1ZXN0Rm4udG90YWxQZW5kaW5nUmVxdWVzdHMrKztcblxuICAgICAgICAvLyBXZSBjb25zaWRlciB0aGUgdGVtcGxhdGUgY2FjaGUgaG9sZHMgb25seSB0cnVzdGVkIHRlbXBsYXRlcywgc29cbiAgICAgICAgLy8gdGhlcmUncyBubyBuZWVkIHRvIGdvIHRocm91Z2ggd2hpdGVsaXN0aW5nIGFnYWluIGZvciBrZXlzIHRoYXQgYWxyZWFkeVxuICAgICAgICAvLyBhcmUgaW5jbHVkZWQgaW4gdGhlcmUuIFRoaXMgYWxzbyBtYWtlcyBBbmd1bGFyIGFjY2VwdCBhbnkgc2NyaXB0XG4gICAgICAgIC8vIGRpcmVjdGl2ZSwgbm8gbWF0dGVyIGl0cyBuYW1lLiBIb3dldmVyLCB3ZSBzdGlsbCBuZWVkIHRvIHVud3JhcCB0cnVzdGVkXG4gICAgICAgIC8vIHR5cGVzLlxuICAgICAgICBpZiAoIWlzU3RyaW5nKHRwbCkgfHwgaXNVbmRlZmluZWQoJHRlbXBsYXRlQ2FjaGUuZ2V0KHRwbCkpKSB7XG4gICAgICAgICAgdHBsID0gJHNjZS5nZXRUcnVzdGVkUmVzb3VyY2VVcmwodHBsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXNwb25zZSA9ICRodHRwLmRlZmF1bHRzICYmICRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlO1xuXG4gICAgICAgIGlmIChpc0FycmF5KHRyYW5zZm9ybVJlc3BvbnNlKSkge1xuICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlID0gdHJhbnNmb3JtUmVzcG9uc2UuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtZXIgIT09IGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHJhbnNmb3JtUmVzcG9uc2UgPT09IGRlZmF1bHRIdHRwUmVzcG9uc2VUcmFuc2Zvcm0pIHtcbiAgICAgICAgICB0cmFuc2Zvcm1SZXNwb25zZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHRwbCwgZXh0ZW5kKHtcbiAgICAgICAgICAgIGNhY2hlOiAkdGVtcGxhdGVDYWNoZSxcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc3BvbnNlOiB0cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICAgIH0sIGh0dHBPcHRpb25zKSlcbiAgICAgICAgICAuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGhhbmRsZVJlcXVlc3RGbi50b3RhbFBlbmRpbmdSZXF1ZXN0cy0tO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCh0cGwsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSwgaGFuZGxlRXJyb3IpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlc3ApIHtcbiAgICAgICAgICBpZiAoIWlnbm9yZVJlcXVlc3RFcnJvcikge1xuICAgICAgICAgICAgcmVzcCA9ICR0ZW1wbGF0ZVJlcXVlc3RNaW5FcnIoJ3RwbG9hZCcsXG4gICAgICAgICAgICAgICAgJ0ZhaWxlZCB0byBsb2FkIHRlbXBsYXRlOiB7MH0gKEhUVFAgc3RhdHVzOiB7MX0gezJ9KScsXG4gICAgICAgICAgICAgICAgdHBsLCByZXNwLnN0YXR1cywgcmVzcC5zdGF0dXNUZXh0KTtcblxuICAgICAgICAgICAgJGV4Y2VwdGlvbkhhbmRsZXIocmVzcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBoYW5kbGVSZXF1ZXN0Rm4udG90YWxQZW5kaW5nUmVxdWVzdHMgPSAwO1xuXG4gICAgICByZXR1cm4gaGFuZGxlUmVxdWVzdEZuO1xuICAgIH1cbiAgXTtcbn1cblxuLyoqIEB0aGlzICovXG5mdW5jdGlvbiAkJFRlc3RhYmlsaXR5UHJvdmlkZXIoKSB7XG4gIHRoaXMuJGdldCA9IFsnJHJvb3RTY29wZScsICckYnJvd3NlcicsICckbG9jYXRpb24nLFxuICAgICAgIGZ1bmN0aW9uKCRyb290U2NvcGUsICAgJGJyb3dzZXIsICAgJGxvY2F0aW9uKSB7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSAkdGVzdGFiaWxpdHlcbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFRoZSBwcml2YXRlICQkdGVzdGFiaWxpdHkgc2VydmljZSBwcm92aWRlcyBhIGNvbGxlY3Rpb24gb2YgbWV0aG9kcyBmb3IgdXNlIHdoZW4gZGVidWdnaW5nXG4gICAgICogb3IgYnkgYXV0b21hdGVkIHRlc3QgYW5kIGRlYnVnZ2luZyB0b29scy5cbiAgICAgKi9cbiAgICB2YXIgdGVzdGFiaWxpdHkgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZmluZEJpbmRpbmdzXG4gICAgICpcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGVsZW1lbnRzIHRoYXQgYXJlIGJvdW5kICh2aWEgbmctYmluZCBvciB7e319KVxuICAgICAqIHRvIGV4cHJlc3Npb25zIG1hdGNoaW5nIHRoZSBpbnB1dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCByb290IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFRoZSBiaW5kaW5nIGV4cHJlc3Npb24gdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRfZXhhY3RNYXRjaCBJZiB0cnVlLCBvbmx5IHJldHVybnMgZXhhY3QgbWF0Y2hlc1xuICAgICAqICAgICBmb3IgdGhlIGV4cHJlc3Npb24uIEZpbHRlcnMgYW5kIHdoaXRlc3BhY2UgYXJlIGlnbm9yZWQuXG4gICAgICovXG4gICAgdGVzdGFiaWxpdHkuZmluZEJpbmRpbmdzID0gZnVuY3Rpb24oZWxlbWVudCwgZXhwcmVzc2lvbiwgb3B0X2V4YWN0TWF0Y2gpIHtcbiAgICAgIHZhciBiaW5kaW5ncyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmctYmluZGluZycpO1xuICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcbiAgICAgIGZvckVhY2goYmluZGluZ3MsIGZ1bmN0aW9uKGJpbmRpbmcpIHtcbiAgICAgICAgdmFyIGRhdGFCaW5kaW5nID0gYW5ndWxhci5lbGVtZW50KGJpbmRpbmcpLmRhdGEoJyRiaW5kaW5nJyk7XG4gICAgICAgIGlmIChkYXRhQmluZGluZykge1xuICAgICAgICAgIGZvckVhY2goZGF0YUJpbmRpbmcsIGZ1bmN0aW9uKGJpbmRpbmdOYW1lKSB7XG4gICAgICAgICAgICBpZiAob3B0X2V4YWN0TWF0Y2gpIHtcbiAgICAgICAgICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgUmVnRXhwKCcoXnxcXFxccyknICsgZXNjYXBlRm9yUmVnZXhwKGV4cHJlc3Npb24pICsgJyhcXFxcc3xcXFxcfHwkKScpO1xuICAgICAgICAgICAgICBpZiAobWF0Y2hlci50ZXN0KGJpbmRpbmdOYW1lKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChiaW5kaW5nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGJpbmRpbmdOYW1lLmluZGV4T2YoZXhwcmVzc2lvbikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGJpbmRpbmcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZmluZE1vZGVsc1xuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBlbGVtZW50cyB0aGF0IGFyZSB0d28td2F5IGZvdW5kIHZpYSBuZy1tb2RlbCB0b1xuICAgICAqIGV4cHJlc3Npb25zIG1hdGNoaW5nIHRoZSBpbnB1dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCByb290IHRvIHNlYXJjaCBmcm9tLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIFRoZSBtb2RlbCBleHByZXNzaW9uIHRvIG1hdGNoLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0X2V4YWN0TWF0Y2ggSWYgdHJ1ZSwgb25seSByZXR1cm5zIGV4YWN0IG1hdGNoZXNcbiAgICAgKiAgICAgZm9yIHRoZSBleHByZXNzaW9uLlxuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LmZpbmRNb2RlbHMgPSBmdW5jdGlvbihlbGVtZW50LCBleHByZXNzaW9uLCBvcHRfZXhhY3RNYXRjaCkge1xuICAgICAgdmFyIHByZWZpeGVzID0gWyduZy0nLCAnZGF0YS1uZy0nLCAnbmdcXFxcOiddO1xuICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBwcmVmaXhlcy5sZW5ndGg7ICsrcCkge1xuICAgICAgICB2YXIgYXR0cmlidXRlRXF1YWxzID0gb3B0X2V4YWN0TWF0Y2ggPyAnPScgOiAnKj0nO1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSAnWycgKyBwcmVmaXhlc1twXSArICdtb2RlbCcgKyBhdHRyaWJ1dGVFcXVhbHMgKyAnXCInICsgZXhwcmVzc2lvbiArICdcIl0nO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjZ2V0TG9jYXRpb25cbiAgICAgKlxuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIFNob3J0Y3V0IGZvciBnZXR0aW5nIHRoZSBsb2NhdGlvbiBpbiBhIGJyb3dzZXIgYWdub3N0aWMgd2F5LiBSZXR1cm5zXG4gICAgICogICAgIHRoZSBwYXRoLCBzZWFyY2gsIGFuZCBoYXNoLiAoZS5nLiAvcGF0aD9hPWIjaGFzaClcbiAgICAgKi9cbiAgICB0ZXN0YWJpbGl0eS5nZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICRsb2NhdGlvbi51cmwoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgJCR0ZXN0YWJpbGl0eSNzZXRMb2NhdGlvblxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogU2hvcnRjdXQgZm9yIG5hdmlnYXRpbmcgdG8gYSBsb2NhdGlvbiB3aXRob3V0IGRvaW5nIGEgZnVsbCBwYWdlIHJlbG9hZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGxvY2F0aW9uIHVybCAocGF0aCwgc2VhcmNoIGFuZCBoYXNoLFxuICAgICAqICAgICBlLmcuIC9wYXRoP2E9YiNoYXNoKSB0byBnbyB0by5cbiAgICAgKi9cbiAgICB0ZXN0YWJpbGl0eS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgaWYgKHVybCAhPT0gJGxvY2F0aW9uLnVybCgpKSB7XG4gICAgICAgICRsb2NhdGlvbi51cmwodXJsKTtcbiAgICAgICAgJHJvb3RTY29wZS4kZGlnZXN0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lICQkdGVzdGFiaWxpdHkjd2hlblN0YWJsZVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gJHRpbWVvdXQgYW5kICRodHRwIHJlcXVlc3RzIGFyZSBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqL1xuICAgIHRlc3RhYmlsaXR5LndoZW5TdGFibGUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgJGJyb3dzZXIubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cyhjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIHJldHVybiB0ZXN0YWJpbGl0eTtcbiAgfV07XG59XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJFRpbWVvdXRQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gWyckcm9vdFNjb3BlJywgJyRicm93c2VyJywgJyRxJywgJyQkcScsICckZXhjZXB0aW9uSGFuZGxlcicsXG4gICAgICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgICAkYnJvd3NlciwgICAkcSwgICAkJHEsICAgJGV4Y2VwdGlvbkhhbmRsZXIpIHtcblxuICAgIHZhciBkZWZlcnJlZHMgPSB7fTtcblxuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2Mgc2VydmljZVxuICAgICAgKiBAbmFtZSAkdGltZW91dFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogQW5ndWxhcidzIHdyYXBwZXIgZm9yIGB3aW5kb3cuc2V0VGltZW91dGAuIFRoZSBgZm5gIGZ1bmN0aW9uIGlzIHdyYXBwZWQgaW50byBhIHRyeS9jYXRjaFxuICAgICAgKiBibG9jayBhbmQgZGVsZWdhdGVzIGFueSBleGNlcHRpb25zIHRvXG4gICAgICAqIHtAbGluayBuZy4kZXhjZXB0aW9uSGFuZGxlciAkZXhjZXB0aW9uSGFuZGxlcn0gc2VydmljZS5cbiAgICAgICpcbiAgICAgICogVGhlIHJldHVybiB2YWx1ZSBvZiBjYWxsaW5nIGAkdGltZW91dGAgaXMgYSBwcm9taXNlLCB3aGljaCB3aWxsIGJlIHJlc29sdmVkIHdoZW5cbiAgICAgICogdGhlIGRlbGF5IGhhcyBwYXNzZWQgYW5kIHRoZSB0aW1lb3V0IGZ1bmN0aW9uLCBpZiBwcm92aWRlZCwgaXMgZXhlY3V0ZWQuXG4gICAgICAqXG4gICAgICAqIFRvIGNhbmNlbCBhIHRpbWVvdXQgcmVxdWVzdCwgY2FsbCBgJHRpbWVvdXQuY2FuY2VsKHByb21pc2UpYC5cbiAgICAgICpcbiAgICAgICogSW4gdGVzdHMgeW91IGNhbiB1c2Uge0BsaW5rIG5nTW9jay4kdGltZW91dCBgJHRpbWVvdXQuZmx1c2goKWB9IHRvXG4gICAgICAqIHN5bmNocm9ub3VzbHkgZmx1c2ggdGhlIHF1ZXVlIG9mIGRlZmVycmVkIGZ1bmN0aW9ucy5cbiAgICAgICpcbiAgICAgICogSWYgeW91IG9ubHkgd2FudCBhIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGFmdGVyIHNvbWUgc3BlY2lmaWVkIGRlbGF5XG4gICAgICAqIHRoZW4geW91IGNhbiBjYWxsIGAkdGltZW91dGAgd2l0aG91dCB0aGUgYGZuYCBmdW5jdGlvbi5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtmdW5jdGlvbigpPX0gZm4gQSBmdW5jdGlvbiwgd2hvc2UgZXhlY3V0aW9uIHNob3VsZCBiZSBkZWxheWVkLlxuICAgICAgKiBAcGFyYW0ge251bWJlcj19IFtkZWxheT0wXSBEZWxheSBpbiBtaWxsaXNlY29uZHMuXG4gICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IFtpbnZva2VBcHBseT10cnVlXSBJZiBzZXQgdG8gYGZhbHNlYCBza2lwcyBtb2RlbCBkaXJ0eSBjaGVja2luZywgb3RoZXJ3aXNlXG4gICAgICAqICAgd2lsbCBpbnZva2UgYGZuYCB3aXRoaW4gdGhlIHtAbGluayBuZy4kcm9vdFNjb3BlLlNjb3BlIyRhcHBseSAkYXBwbHl9IGJsb2NrLlxuICAgICAgKiBAcGFyYW0gey4uLio9fSBQYXNzIGFkZGl0aW9uYWwgcGFyYW1ldGVycyB0byB0aGUgZXhlY3V0ZWQgZnVuY3Rpb24uXG4gICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aGVuIHRoZSB0aW1lb3V0IGlzIHJlYWNoZWQuIFRoZSBwcm9taXNlXG4gICAgICAqICAgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGBmbmAgZnVuY3Rpb24uXG4gICAgICAqXG4gICAgICAqL1xuICAgIGZ1bmN0aW9uIHRpbWVvdXQoZm4sIGRlbGF5LCBpbnZva2VBcHBseSkge1xuICAgICAgaWYgKCFpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICBpbnZva2VBcHBseSA9IGRlbGF5O1xuICAgICAgICBkZWxheSA9IGZuO1xuICAgICAgICBmbiA9IG5vb3A7XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmdzID0gc2xpY2VBcmdzKGFyZ3VtZW50cywgMyksXG4gICAgICAgICAgc2tpcEFwcGx5ID0gKGlzRGVmaW5lZChpbnZva2VBcHBseSkgJiYgIWludm9rZUFwcGx5KSxcbiAgICAgICAgICBkZWZlcnJlZCA9IChza2lwQXBwbHkgPyAkJHEgOiAkcSkuZGVmZXIoKSxcbiAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSxcbiAgICAgICAgICB0aW1lb3V0SWQ7XG5cbiAgICAgIHRpbWVvdXRJZCA9ICRicm93c2VyLmRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZm4uYXBwbHkobnVsbCwgYXJncykpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGUpO1xuICAgICAgICAgICRleGNlcHRpb25IYW5kbGVyKGUpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGRlbGV0ZSBkZWZlcnJlZHNbcHJvbWlzZS4kJHRpbWVvdXRJZF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNraXBBcHBseSkgJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgIH0sIGRlbGF5KTtcblxuICAgICAgcHJvbWlzZS4kJHRpbWVvdXRJZCA9IHRpbWVvdXRJZDtcbiAgICAgIGRlZmVycmVkc1t0aW1lb3V0SWRdID0gZGVmZXJyZWQ7XG5cbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cblxuXG4gICAgIC8qKlxuICAgICAgKiBAbmdkb2MgbWV0aG9kXG4gICAgICAqIEBuYW1lICR0aW1lb3V0I2NhbmNlbFxuICAgICAgKlxuICAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgICogQ2FuY2VscyBhIHRhc2sgYXNzb2NpYXRlZCB3aXRoIHRoZSBgcHJvbWlzZWAuIEFzIGEgcmVzdWx0IG9mIHRoaXMsIHRoZSBwcm9taXNlIHdpbGwgYmVcbiAgICAgICogcmVzb2x2ZWQgd2l0aCBhIHJlamVjdGlvbi5cbiAgICAgICpcbiAgICAgICogQHBhcmFtIHtQcm9taXNlPX0gcHJvbWlzZSBQcm9taXNlIHJldHVybmVkIGJ5IHRoZSBgJHRpbWVvdXRgIGZ1bmN0aW9uLlxuICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRhc2sgaGFzbid0IGV4ZWN1dGVkIHlldCBhbmQgd2FzIHN1Y2Nlc3NmdWxseVxuICAgICAgKiAgIGNhbmNlbGVkLlxuICAgICAgKi9cbiAgICB0aW1lb3V0LmNhbmNlbCA9IGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgIGlmIChwcm9taXNlICYmIHByb21pc2UuJCR0aW1lb3V0SWQgaW4gZGVmZXJyZWRzKSB7XG4gICAgICAgIC8vIFRpbWVvdXQgY2FuY2VscyBzaG91bGQgbm90IHJlcG9ydCBhbiB1bmhhbmRsZWQgcHJvbWlzZS5cbiAgICAgICAgbWFya1FFeGNlcHRpb25IYW5kbGVkKGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXS5wcm9taXNlKTtcbiAgICAgICAgZGVmZXJyZWRzW3Byb21pc2UuJCR0aW1lb3V0SWRdLnJlamVjdCgnY2FuY2VsZWQnKTtcbiAgICAgICAgZGVsZXRlIGRlZmVycmVkc1twcm9taXNlLiQkdGltZW91dElkXTtcbiAgICAgICAgcmV0dXJuICRicm93c2VyLmRlZmVyLmNhbmNlbChwcm9taXNlLiQkdGltZW91dElkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRpbWVvdXQ7XG4gIH1dO1xufVxuXG4vLyBOT1RFOiAgVGhlIHVzYWdlIG9mIHdpbmRvdyBhbmQgZG9jdW1lbnQgaW5zdGVhZCBvZiAkd2luZG93IGFuZCAkZG9jdW1lbnQgaGVyZSBpc1xuLy8gZGVsaWJlcmF0ZS4gIFRoaXMgc2VydmljZSBkZXBlbmRzIG9uIHRoZSBzcGVjaWZpYyBiZWhhdmlvciBvZiBhbmNob3Igbm9kZXMgY3JlYXRlZCBieSB0aGVcbi8vIGJyb3dzZXIgKHJlc29sdmluZyBhbmQgcGFyc2luZyBVUkxzKSB0aGF0IGlzIHVubGlrZWx5IHRvIGJlIHByb3ZpZGVkIGJ5IG1vY2sgb2JqZWN0cyBhbmRcbi8vIGNhdXNlIHVzIHRvIGJyZWFrIHRlc3RzLiAgSW4gYWRkaXRpb24sIHdoZW4gdGhlIGJyb3dzZXIgcmVzb2x2ZXMgYSBVUkwgZm9yIFhIUiwgaXRcbi8vIGRvZXNuJ3Qga25vdyBhYm91dCBtb2NrZWQgbG9jYXRpb25zIGFuZCByZXNvbHZlcyBVUkxzIHRvIHRoZSByZWFsIGRvY3VtZW50IC0gd2hpY2ggaXNcbi8vIGV4YWN0bHkgdGhlIGJlaGF2aW9yIG5lZWRlZCBoZXJlLiAgVGhlcmUgaXMgbGl0dGxlIHZhbHVlIGlzIG1vY2tpbmcgdGhlc2Ugb3V0IGZvciB0aGlzXG4vLyBzZXJ2aWNlLlxudmFyIHVybFBhcnNpbmdOb2RlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbnZhciBvcmlnaW5VcmwgPSB1cmxSZXNvbHZlKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuXG4vKipcbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBOb3RlcyBmb3Igbm9uLUlFIGJyb3dzZXJzXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBBc3NpZ25pbmcgYSBVUkwgdG8gdGhlIGhyZWYgcHJvcGVydHkgb2YgYW4gYW5jaG9yIERPTSBub2RlLCBldmVuIG9uZSBhdHRhY2hlZCB0byB0aGUgRE9NLFxuICogcmVzdWx0cyBib3RoIGluIHRoZSBub3JtYWxpemluZyBhbmQgcGFyc2luZyBvZiB0aGUgVVJMLiAgTm9ybWFsaXppbmcgbWVhbnMgdGhhdCBhIHJlbGF0aXZlXG4gKiBVUkwgd2lsbCBiZSByZXNvbHZlZCBpbnRvIGFuIGFic29sdXRlIFVSTCBpbiB0aGUgY29udGV4dCBvZiB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQuXG4gKiBQYXJzaW5nIG1lYW5zIHRoYXQgdGhlIGFuY2hvciBub2RlJ3MgaG9zdCwgaG9zdG5hbWUsIHByb3RvY29sLCBwb3J0LCBwYXRobmFtZSBhbmQgcmVsYXRlZFxuICogcHJvcGVydGllcyBhcmUgYWxsIHBvcHVsYXRlZCB0byByZWZsZWN0IHRoZSBub3JtYWxpemVkIFVSTC4gIFRoaXMgYXBwcm9hY2ggaGFzIHdpZGVcbiAqIGNvbXBhdGliaWxpdHkgLSBTYWZhcmkgMSssIE1vemlsbGEgMSsgZXRjLiAgU2VlXG4gKiBodHRwOi8vd3d3LmFwdGFuYS5jb20vcmVmZXJlbmNlL2h0bWwvYXBpL0hUTUxBbmNob3JFbGVtZW50Lmh0bWxcbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBOb3RlcyBmb3IgSUVcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogSUUgPD0gMTAgbm9ybWFsaXplcyB0aGUgVVJMIHdoZW4gYXNzaWduZWQgdG8gdGhlIGFuY2hvciBub2RlIHNpbWlsYXIgdG8gdGhlIG90aGVyXG4gKiBicm93c2Vycy4gIEhvd2V2ZXIsIHRoZSBwYXJzZWQgY29tcG9uZW50cyB3aWxsIG5vdCBiZSBzZXQgaWYgdGhlIFVSTCBhc3NpZ25lZCBkaWQgbm90IHNwZWNpZnlcbiAqIHRoZW0uICAoZS5nLiBpZiB5b3UgYXNzaWduIGEuaHJlZiA9IFwiZm9vXCIsIHRoZW4gYS5wcm90b2NvbCwgYS5ob3N0LCBldGMuIHdpbGwgYmUgZW1wdHkuKSAgV2VcbiAqIHdvcmsgYXJvdW5kIHRoYXQgYnkgcGVyZm9ybWluZyB0aGUgcGFyc2luZyBpbiBhIDJuZCBzdGVwIGJ5IHRha2luZyBhIHByZXZpb3VzbHkgbm9ybWFsaXplZFxuICogVVJMIChlLmcuIGJ5IGFzc2lnbmluZyB0byBhLmhyZWYpIGFuZCBhc3NpZ25pbmcgaXQgYS5ocmVmIGFnYWluLiAgVGhpcyBjb3JyZWN0bHkgcG9wdWxhdGVzIHRoZVxuICogcHJvcGVydGllcyBzdWNoIGFzIHByb3RvY29sLCBob3N0bmFtZSwgcG9ydCwgZXRjLlxuICpcbiAqIFJlZmVyZW5jZXM6XG4gKiAgIGh0dHA6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0hUTUxBbmNob3JFbGVtZW50XG4gKiAgIGh0dHA6Ly93d3cuYXB0YW5hLmNvbS9yZWZlcmVuY2UvaHRtbC9hcGkvSFRNTEFuY2hvckVsZW1lbnQuaHRtbFxuICogICBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAqICAgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9wdWxsLzI5MDJcbiAqICAgaHR0cDovL2phbWVzLnBhZG9sc2V5LmNvbS9qYXZhc2NyaXB0L3BhcnNpbmctdXJscy13aXRoLXRoZS1kb20vXG4gKlxuICogQGtpbmQgZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWQuXG4gKiBAZGVzY3JpcHRpb24gTm9ybWFsaXplcyBhbmQgcGFyc2VzIGEgVVJMLlxuICogQHJldHVybnMge29iamVjdH0gUmV0dXJucyB0aGUgbm9ybWFsaXplZCBVUkwgYXMgYSBkaWN0aW9uYXJ5LlxuICpcbiAqICAgfCBtZW1iZXIgbmFtZSAgIHwgRGVzY3JpcHRpb24gICAgfFxuICogICB8LS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS18XG4gKiAgIHwgaHJlZiAgICAgICAgICB8IEEgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBwcm92aWRlZCBVUkwgaWYgaXQgd2FzIG5vdCBhbiBhYnNvbHV0ZSBVUkwgfFxuICogICB8IHByb3RvY29sICAgICAgfCBUaGUgcHJvdG9jb2wgaW5jbHVkaW5nIHRoZSB0cmFpbGluZyBjb2xvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqICAgfCBob3N0ICAgICAgICAgIHwgVGhlIGhvc3QgYW5kIHBvcnQgKGlmIHRoZSBwb3J0IGlzIG5vbi1kZWZhdWx0KSBvZiB0aGUgbm9ybWFsaXplZFVybCAgICB8XG4gKiAgIHwgc2VhcmNoICAgICAgICB8IFRoZSBzZWFyY2ggcGFyYW1zLCBtaW51cyB0aGUgcXVlc3Rpb24gbWFyayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogICB8IGhhc2ggICAgICAgICAgfCBUaGUgaGFzaCBzdHJpbmcsIG1pbnVzIHRoZSBoYXNoIHN5bWJvbFxuICogICB8IGhvc3RuYW1lICAgICAgfCBUaGUgaG9zdG5hbWVcbiAqICAgfCBwb3J0ICAgICAgICAgIHwgVGhlIHBvcnQsIHdpdGhvdXQgXCI6XCJcbiAqICAgfCBwYXRobmFtZSAgICAgIHwgVGhlIHBhdGhuYW1lLCBiZWdpbm5pbmcgd2l0aCBcIi9cIlxuICpcbiAqL1xuZnVuY3Rpb24gdXJsUmVzb2x2ZSh1cmwpIHtcbiAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gIGlmIChtc2llKSB7XG4gICAgLy8gTm9ybWFsaXplIGJlZm9yZSBwYXJzZS4gIFJlZmVyIEltcGxlbWVudGF0aW9uIE5vdGVzIG9uIHdoeSB0aGlzIGlzXG4gICAgLy8gZG9uZSBpbiB0d28gc3RlcHMgb24gSUUuXG4gICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG4gICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7XG4gIH1cblxuICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblxuICAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXG4gIHJldHVybiB7XG4gICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXG4gICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJylcbiAgICAgID8gdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgICAgIDogJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHJlcXVlc3QgVVJMIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGlzIGlzIGEgc2FtZS1vcmlnaW4gcmVxdWVzdCBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZXF1ZXN0VXJsIFRoZSB1cmwgb2YgdGhlIHJlcXVlc3QgYXMgYSBzdHJpbmcgdGhhdCB3aWxsIGJlIHJlc29sdmVkXG4gKiBvciBhIHBhcnNlZCBVUkwgb2JqZWN0LlxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHJlcXVlc3QgaXMgZm9yIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQuXG4gKi9cbmZ1bmN0aW9uIHVybElzU2FtZU9yaWdpbihyZXF1ZXN0VXJsKSB7XG4gIHZhciBwYXJzZWQgPSAoaXNTdHJpbmcocmVxdWVzdFVybCkpID8gdXJsUmVzb2x2ZShyZXF1ZXN0VXJsKSA6IHJlcXVlc3RVcmw7XG4gIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VcmwucHJvdG9jb2wgJiZcbiAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVXJsLmhvc3QpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBzZXJ2aWNlXG4gKiBAbmFtZSAkd2luZG93XG4gKiBAdGhpc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSByZWZlcmVuY2UgdG8gdGhlIGJyb3dzZXIncyBgd2luZG93YCBvYmplY3QuIFdoaWxlIGB3aW5kb3dgXG4gKiBpcyBnbG9iYWxseSBhdmFpbGFibGUgaW4gSmF2YVNjcmlwdCwgaXQgY2F1c2VzIHRlc3RhYmlsaXR5IHByb2JsZW1zLCBiZWNhdXNlXG4gKiBpdCBpcyBhIGdsb2JhbCB2YXJpYWJsZS4gSW4gYW5ndWxhciB3ZSBhbHdheXMgcmVmZXIgdG8gaXQgdGhyb3VnaCB0aGVcbiAqIGAkd2luZG93YCBzZXJ2aWNlLCBzbyBpdCBtYXkgYmUgb3ZlcnJpZGRlbiwgcmVtb3ZlZCBvciBtb2NrZWQgZm9yIHRlc3RpbmcuXG4gKlxuICogRXhwcmVzc2lvbnMsIGxpa2UgdGhlIG9uZSBkZWZpbmVkIGZvciB0aGUgYG5nQ2xpY2tgIGRpcmVjdGl2ZSBpbiB0aGUgZXhhbXBsZVxuICogYmVsb3csIGFyZSBldmFsdWF0ZWQgd2l0aCByZXNwZWN0IHRvIHRoZSBjdXJyZW50IHNjb3BlLiAgVGhlcmVmb3JlLCB0aGVyZSBpc1xuICogbm8gcmlzayBvZiBpbmFkdmVydGVudGx5IGNvZGluZyBpbiBhIGRlcGVuZGVuY3kgb24gYSBnbG9iYWwgdmFsdWUgaW4gc3VjaCBhblxuICogZXhwcmVzc2lvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwid2luZG93RXhhbXBsZVwiIG5hbWU9XCJ3aW5kb3ctc2VydmljZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnd2luZG93RXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckd2luZG93JywgZnVuY3Rpb24oJHNjb3BlLCAkd2luZG93KSB7XG4gICAgICAgICAgICAgJHNjb3BlLmdyZWV0aW5nID0gJ0hlbGxvLCBXb3JsZCEnO1xuICAgICAgICAgICAgICRzY29wZS5kb0dyZWV0aW5nID0gZnVuY3Rpb24oZ3JlZXRpbmcpIHtcbiAgICAgICAgICAgICAgICR3aW5kb3cuYWxlcnQoZ3JlZXRpbmcpO1xuICAgICAgICAgICAgIH07XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJncmVldGluZ1wiIGFyaWEtbGFiZWw9XCJncmVldGluZ1wiIC8+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZG9HcmVldGluZyhncmVldGluZylcIj5BTEVSVDwvYnV0dG9uPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIGl0KCdzaG91bGQgZGlzcGxheSB0aGUgZ3JlZXRpbmcgaW4gdGhlIGlucHV0IGJveCcsIGZ1bmN0aW9uKCkge1xuICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2dyZWV0aW5nJykpLnNlbmRLZXlzKCdIZWxsbywgRTJFIFRlc3RzJyk7XG4gICAgICAgLy8gSWYgd2UgY2xpY2sgdGhlIGJ1dHRvbiBpdCB3aWxsIGJsb2NrIHRoZSB0ZXN0IHJ1bm5lclxuICAgICAgIC8vIGVsZW1lbnQoJzpidXR0b24nKS5jbGljaygpO1xuICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuZnVuY3Rpb24gJFdpbmRvd1Byb3ZpZGVyKCkge1xuICB0aGlzLiRnZXQgPSB2YWx1ZUZuKHdpbmRvdyk7XG59XG5cbi8qKlxuICogQG5hbWUgJCRjb29raWVSZWFkZXJcbiAqIEByZXF1aXJlcyAkZG9jdW1lbnRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgaXMgYSBwcml2YXRlIHNlcnZpY2UgZm9yIHJlYWRpbmcgY29va2llcyB1c2VkIGJ5ICRodHRwIGFuZCBuZ0Nvb2tpZXNcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IGEga2V5L3ZhbHVlIG1hcCBvZiB0aGUgY3VycmVudCBjb29raWVzXG4gKi9cbmZ1bmN0aW9uICQkQ29va2llUmVhZGVyKCRkb2N1bWVudCkge1xuICB2YXIgcmF3RG9jdW1lbnQgPSAkZG9jdW1lbnRbMF0gfHwge307XG4gIHZhciBsYXN0Q29va2llcyA9IHt9O1xuICB2YXIgbGFzdENvb2tpZVN0cmluZyA9ICcnO1xuXG4gIGZ1bmN0aW9uIHNhZmVHZXRDb29raWUocmF3RG9jdW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHJhd0RvY3VtZW50LmNvb2tpZSB8fCAnJztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2FmZURlY29kZVVSSUNvbXBvbmVudChzdHIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb29raWVBcnJheSwgY29va2llLCBpLCBpbmRleCwgbmFtZTtcbiAgICB2YXIgY3VycmVudENvb2tpZVN0cmluZyA9IHNhZmVHZXRDb29raWUocmF3RG9jdW1lbnQpO1xuXG4gICAgaWYgKGN1cnJlbnRDb29raWVTdHJpbmcgIT09IGxhc3RDb29raWVTdHJpbmcpIHtcbiAgICAgIGxhc3RDb29raWVTdHJpbmcgPSBjdXJyZW50Q29va2llU3RyaW5nO1xuICAgICAgY29va2llQXJyYXkgPSBsYXN0Q29va2llU3RyaW5nLnNwbGl0KCc7ICcpO1xuICAgICAgbGFzdENvb2tpZXMgPSB7fTtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IGNvb2tpZUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvb2tpZSA9IGNvb2tpZUFycmF5W2ldO1xuICAgICAgICBpbmRleCA9IGNvb2tpZS5pbmRleE9mKCc9Jyk7XG4gICAgICAgIGlmIChpbmRleCA+IDApIHsgLy9pZ25vcmUgbmFtZWxlc3MgY29va2llc1xuICAgICAgICAgIG5hbWUgPSBzYWZlRGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcoMCwgaW5kZXgpKTtcbiAgICAgICAgICAvLyB0aGUgZmlyc3QgdmFsdWUgdGhhdCBpcyBzZWVuIGZvciBhIGNvb2tpZSBpcyB0aGUgbW9zdFxuICAgICAgICAgIC8vIHNwZWNpZmljIG9uZS4gIHZhbHVlcyBmb3IgdGhlIHNhbWUgY29va2llIG5hbWUgdGhhdFxuICAgICAgICAgIC8vIGZvbGxvdyBhcmUgZm9yIGxlc3Mgc3BlY2lmaWMgcGF0aHMuXG4gICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKGxhc3RDb29raWVzW25hbWVdKSkge1xuICAgICAgICAgICAgbGFzdENvb2tpZXNbbmFtZV0gPSBzYWZlRGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcoaW5kZXggKyAxKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsYXN0Q29va2llcztcbiAgfTtcbn1cblxuJCRDb29raWVSZWFkZXIuJGluamVjdCA9IFsnJGRvY3VtZW50J107XG5cbi8qKiBAdGhpcyAqL1xuZnVuY3Rpb24gJCRDb29raWVSZWFkZXJQcm92aWRlcigpIHtcbiAgdGhpcy4kZ2V0ID0gJCRDb29raWVSZWFkZXI7XG59XG5cbi8qIGdsb2JhbCBjdXJyZW5jeUZpbHRlcjogdHJ1ZSxcbiBkYXRlRmlsdGVyOiB0cnVlLFxuIGZpbHRlckZpbHRlcjogdHJ1ZSxcbiBqc29uRmlsdGVyOiB0cnVlLFxuIGxpbWl0VG9GaWx0ZXI6IHRydWUsXG4gbG93ZXJjYXNlRmlsdGVyOiB0cnVlLFxuIG51bWJlckZpbHRlcjogdHJ1ZSxcbiBvcmRlckJ5RmlsdGVyOiB0cnVlLFxuIHVwcGVyY2FzZUZpbHRlcjogdHJ1ZSxcbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBwcm92aWRlclxuICogQG5hbWUgJGZpbHRlclByb3ZpZGVyXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBGaWx0ZXJzIGFyZSBqdXN0IGZ1bmN0aW9ucyB3aGljaCB0cmFuc2Zvcm0gaW5wdXQgdG8gYW4gb3V0cHV0LiBIb3dldmVyIGZpbHRlcnMgbmVlZCB0byBiZVxuICogRGVwZW5kZW5jeSBJbmplY3RlZC4gVG8gYWNoaWV2ZSB0aGlzIGEgZmlsdGVyIGRlZmluaXRpb24gY29uc2lzdHMgb2YgYSBmYWN0b3J5IGZ1bmN0aW9uIHdoaWNoIGlzXG4gKiBhbm5vdGF0ZWQgd2l0aCBkZXBlbmRlbmNpZXMgYW5kIGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBhIGZpbHRlciBmdW5jdGlvbi5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipOb3RlOioqIEZpbHRlciBuYW1lcyBtdXN0IGJlIHZhbGlkIGFuZ3VsYXIge0BsaW5rIGV4cHJlc3Npb259IGlkZW50aWZpZXJzLCBzdWNoIGFzIGB1cHBlcmNhc2VgIG9yIGBvcmRlckJ5YC5cbiAqIE5hbWVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGh5cGhlbnMgYW5kIGRvdHMsIGFyZSBub3QgYWxsb3dlZC4gSWYgeW91IHdpc2ggdG8gbmFtZXNwYWNlXG4gKiB5b3VyIGZpbHRlcnMsIHRoZW4geW91IGNhbiB1c2UgY2FwaXRhbGl6YXRpb24gKGBteWFwcFN1YnNlY3Rpb25GaWx0ZXJ4YCkgb3IgdW5kZXJzY29yZXNcbiAqIChgbXlhcHBfc3Vic2VjdGlvbl9maWx0ZXJ4YCkuXG4gKiA8L2Rpdj5cbiAqXG4gKiBgYGBqc1xuICogICAvLyBGaWx0ZXIgcmVnaXN0cmF0aW9uXG4gKiAgIGZ1bmN0aW9uIE15TW9kdWxlKCRwcm92aWRlLCAkZmlsdGVyUHJvdmlkZXIpIHtcbiAqICAgICAvLyBjcmVhdGUgYSBzZXJ2aWNlIHRvIGRlbW9uc3RyYXRlIGluamVjdGlvbiAobm90IGFsd2F5cyBuZWVkZWQpXG4gKiAgICAgJHByb3ZpZGUudmFsdWUoJ2dyZWV0JywgZnVuY3Rpb24obmFtZSl7XG4gKiAgICAgICByZXR1cm4gJ0hlbGxvICcgKyBuYW1lICsgJyEnO1xuICogICAgIH0pO1xuICpcbiAqICAgICAvLyByZWdpc3RlciBhIGZpbHRlciBmYWN0b3J5IHdoaWNoIHVzZXMgdGhlXG4gKiAgICAgLy8gZ3JlZXQgc2VydmljZSB0byBkZW1vbnN0cmF0ZSBESS5cbiAqICAgICAkZmlsdGVyUHJvdmlkZXIucmVnaXN0ZXIoJ2dyZWV0JywgZnVuY3Rpb24oZ3JlZXQpe1xuICogICAgICAgLy8gcmV0dXJuIHRoZSBmaWx0ZXIgZnVuY3Rpb24gd2hpY2ggdXNlcyB0aGUgZ3JlZXQgc2VydmljZVxuICogICAgICAgLy8gdG8gZ2VuZXJhdGUgc2FsdXRhdGlvblxuICogICAgICAgcmV0dXJuIGZ1bmN0aW9uKHRleHQpIHtcbiAqICAgICAgICAgLy8gZmlsdGVycyBuZWVkIHRvIGJlIGZvcmdpdmluZyBzbyBjaGVjayBpbnB1dCB2YWxpZGl0eVxuICogICAgICAgICByZXR1cm4gdGV4dCAmJiBncmVldCh0ZXh0KSB8fCB0ZXh0O1xuICogICAgICAgfTtcbiAqICAgICB9KTtcbiAqICAgfVxuICogYGBgXG4gKlxuICogVGhlIGZpbHRlciBmdW5jdGlvbiBpcyByZWdpc3RlcmVkIHdpdGggdGhlIGAkaW5qZWN0b3JgIHVuZGVyIHRoZSBmaWx0ZXIgbmFtZSBzdWZmaXggd2l0aFxuICogYEZpbHRlcmAuXG4gKlxuICogYGBganNcbiAqICAgaXQoJ3Nob3VsZCBiZSB0aGUgc2FtZSBpbnN0YW5jZScsIGluamVjdChcbiAqICAgICBmdW5jdGlvbigkZmlsdGVyUHJvdmlkZXIpIHtcbiAqICAgICAgICRmaWx0ZXJQcm92aWRlci5yZWdpc3RlcigncmV2ZXJzZScsIGZ1bmN0aW9uKCl7XG4gKiAgICAgICAgIHJldHVybiAuLi47XG4gKiAgICAgICB9KTtcbiAqICAgICB9LFxuICogICAgIGZ1bmN0aW9uKCRmaWx0ZXIsIHJldmVyc2VGaWx0ZXIpIHtcbiAqICAgICAgIGV4cGVjdCgkZmlsdGVyKCdyZXZlcnNlJykpLnRvQmUocmV2ZXJzZUZpbHRlcik7XG4gKiAgICAgfSk7XG4gKiBgYGBcbiAqXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgaG93IGFuZ3VsYXIgZmlsdGVycyB3b3JrLCBhbmQgaG93IHRvIGNyZWF0ZSB5b3VyIG93biBmaWx0ZXJzLCBzZWVcbiAqIHtAbGluayBndWlkZS9maWx0ZXIgRmlsdGVyc30gaW4gdGhlIEFuZ3VsYXIgRGV2ZWxvcGVyIEd1aWRlLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRmaWx0ZXJcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZpbHRlcnMgYXJlIHVzZWQgZm9yIGZvcm1hdHRpbmcgZGF0YSBkaXNwbGF5ZWQgdG8gdGhlIHVzZXIuXG4gKlxuICogVGhleSBjYW4gYmUgdXNlZCBpbiB2aWV3IHRlbXBsYXRlcywgY29udHJvbGxlcnMgb3Igc2VydmljZXMuQW5ndWxhciBjb21lc1xuICogd2l0aCBhIGNvbGxlY3Rpb24gb2YgW2J1aWx0LWluIGZpbHRlcnNdKGFwaS9uZy9maWx0ZXIpLCBidXQgaXQgaXMgZWFzeSB0b1xuICogZGVmaW5lIHlvdXIgb3duIGFzIHdlbGwuXG4gKlxuICogVGhlIGdlbmVyYWwgc3ludGF4IGluIHRlbXBsYXRlcyBpcyBhcyBmb2xsb3dzOlxuICpcbiAqIGBgYGh0bWxcbiAqIHt7IGV4cHJlc3Npb24gW3wgZmlsdGVyX25hbWVbOnBhcmFtZXRlcl92YWx1ZV0gLi4uIF0gfX1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIGZpbHRlciBmdW5jdGlvbiB0byByZXRyaWV2ZVxuICogQHJldHVybiB7RnVuY3Rpb259IHRoZSBmaWx0ZXIgZnVuY3Rpb25cbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwiJGZpbHRlclwiIG1vZHVsZT1cImZpbHRlckV4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJNYWluQ3RybFwiPlxuICAgICAgICA8aDM+e3sgb3JpZ2luYWxUZXh0IH19PC9oMz5cbiAgICAgICAgPGgzPnt7IGZpbHRlcmVkVGV4dCB9fTwvaDM+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cblxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnZmlsdGVyRXhhbXBsZScsIFtdKVxuICAgICAgLmNvbnRyb2xsZXIoJ01haW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkZmlsdGVyKSB7XG4gICAgICAgICRzY29wZS5vcmlnaW5hbFRleHQgPSAnaGVsbG8nO1xuICAgICAgICAkc2NvcGUuZmlsdGVyZWRUZXh0ID0gJGZpbHRlcigndXBwZXJjYXNlJykoJHNjb3BlLm9yaWdpbmFsVGV4dCk7XG4gICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICAqL1xuJEZpbHRlclByb3ZpZGVyLiRpbmplY3QgPSBbJyRwcm92aWRlJ107XG4vKiogQHRoaXMgKi9cbmZ1bmN0aW9uICRGaWx0ZXJQcm92aWRlcigkcHJvdmlkZSkge1xuICB2YXIgc3VmZml4ID0gJ0ZpbHRlcic7XG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJGZpbHRlclByb3ZpZGVyI3JlZ2lzdGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfE9iamVjdH0gbmFtZSBOYW1lIG9mIHRoZSBmaWx0ZXIgZnVuY3Rpb24sIG9yIGFuIG9iamVjdCBtYXAgb2YgZmlsdGVycyB3aGVyZVxuICAgKiAgICB0aGUga2V5cyBhcmUgdGhlIGZpbHRlciBuYW1lcyBhbmQgdGhlIHZhbHVlcyBhcmUgdGhlIGZpbHRlciBmYWN0b3JpZXMuXG4gICAqXG4gICAqICAgIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAqICAgICoqTm90ZToqKiBGaWx0ZXIgbmFtZXMgbXVzdCBiZSB2YWxpZCBhbmd1bGFyIHtAbGluayBleHByZXNzaW9ufSBpZGVudGlmaWVycywgc3VjaCBhcyBgdXBwZXJjYXNlYCBvciBgb3JkZXJCeWAuXG4gICAqICAgIE5hbWVzIHdpdGggc3BlY2lhbCBjaGFyYWN0ZXJzLCBzdWNoIGFzIGh5cGhlbnMgYW5kIGRvdHMsIGFyZSBub3QgYWxsb3dlZC4gSWYgeW91IHdpc2ggdG8gbmFtZXNwYWNlXG4gICAqICAgIHlvdXIgZmlsdGVycywgdGhlbiB5b3UgY2FuIHVzZSBjYXBpdGFsaXphdGlvbiAoYG15YXBwU3Vic2VjdGlvbkZpbHRlcnhgKSBvciB1bmRlcnNjb3Jlc1xuICAgKiAgICAoYG15YXBwX3N1YnNlY3Rpb25fZmlsdGVyeGApLlxuICAgKiAgICA8L2Rpdj5cbiAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3RvcnkgSWYgdGhlIGZpcnN0IGFyZ3VtZW50IHdhcyBhIHN0cmluZywgYSBmYWN0b3J5IGZ1bmN0aW9uIGZvciB0aGUgZmlsdGVyIHRvIGJlIHJlZ2lzdGVyZWQuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJlZ2lzdGVyZWQgZmlsdGVyIGluc3RhbmNlLCBvciBpZiBhIG1hcCBvZiBmaWx0ZXJzIHdhcyBwcm92aWRlZCB0aGVuIGEgbWFwXG4gICAqICAgIG9mIHRoZSByZWdpc3RlcmVkIGZpbHRlciBpbnN0YW5jZXMuXG4gICAqL1xuICBmdW5jdGlvbiByZWdpc3RlcihuYW1lLCBmYWN0b3J5KSB7XG4gICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICB2YXIgZmlsdGVycyA9IHt9O1xuICAgICAgZm9yRWFjaChuYW1lLCBmdW5jdGlvbihmaWx0ZXIsIGtleSkge1xuICAgICAgICBmaWx0ZXJzW2tleV0gPSByZWdpc3RlcihrZXksIGZpbHRlcik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmaWx0ZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJHByb3ZpZGUuZmFjdG9yeShuYW1lICsgc3VmZml4LCBmYWN0b3J5KTtcbiAgICB9XG4gIH1cbiAgdGhpcy5yZWdpc3RlciA9IHJlZ2lzdGVyO1xuXG4gIHRoaXMuJGdldCA9IFsnJGluamVjdG9yJywgZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiAkaW5qZWN0b3IuZ2V0KG5hbWUgKyBzdWZmaXgpO1xuICAgIH07XG4gIH1dO1xuXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKiBnbG9iYWxcbiAgICBjdXJyZW5jeUZpbHRlcjogZmFsc2UsXG4gICAgZGF0ZUZpbHRlcjogZmFsc2UsXG4gICAgZmlsdGVyRmlsdGVyOiBmYWxzZSxcbiAgICBqc29uRmlsdGVyOiBmYWxzZSxcbiAgICBsaW1pdFRvRmlsdGVyOiBmYWxzZSxcbiAgICBsb3dlcmNhc2VGaWx0ZXI6IGZhbHNlLFxuICAgIG51bWJlckZpbHRlcjogZmFsc2UsXG4gICAgb3JkZXJCeUZpbHRlcjogZmFsc2UsXG4gICAgdXBwZXJjYXNlRmlsdGVyOiBmYWxzZVxuICAqL1xuXG4gIHJlZ2lzdGVyKCdjdXJyZW5jeScsIGN1cnJlbmN5RmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ2RhdGUnLCBkYXRlRmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ2ZpbHRlcicsIGZpbHRlckZpbHRlcik7XG4gIHJlZ2lzdGVyKCdqc29uJywganNvbkZpbHRlcik7XG4gIHJlZ2lzdGVyKCdsaW1pdFRvJywgbGltaXRUb0ZpbHRlcik7XG4gIHJlZ2lzdGVyKCdsb3dlcmNhc2UnLCBsb3dlcmNhc2VGaWx0ZXIpO1xuICByZWdpc3RlcignbnVtYmVyJywgbnVtYmVyRmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ29yZGVyQnknLCBvcmRlckJ5RmlsdGVyKTtcbiAgcmVnaXN0ZXIoJ3VwcGVyY2FzZScsIHVwcGVyY2FzZUZpbHRlcik7XG59XG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgZmlsdGVyXG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU2VsZWN0cyBhIHN1YnNldCBvZiBpdGVtcyBmcm9tIGBhcnJheWAgYW5kIHJldHVybnMgaXQgYXMgYSBuZXcgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIHNvdXJjZSBhcnJheS5cbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiAgICoqTm90ZSoqOiBJZiB0aGUgYXJyYXkgY29udGFpbnMgb2JqZWN0cyB0aGF0IHJlZmVyZW5jZSB0aGVtc2VsdmVzLCBmaWx0ZXJpbmcgaXMgbm90IHBvc3NpYmxlLlxuICogPC9kaXY+XG4gKiBAcGFyYW0ge3N0cmluZ3xPYmplY3R8ZnVuY3Rpb24oKX0gZXhwcmVzc2lvbiBUaGUgcHJlZGljYXRlIHRvIGJlIHVzZWQgZm9yIHNlbGVjdGluZyBpdGVtcyBmcm9tXG4gKiAgIGBhcnJheWAuXG4gKlxuICogICBDYW4gYmUgb25lIG9mOlxuICpcbiAqICAgLSBgc3RyaW5nYDogVGhlIHN0cmluZyBpcyB1c2VkIGZvciBtYXRjaGluZyBhZ2FpbnN0IHRoZSBjb250ZW50cyBvZiB0aGUgYGFycmF5YC4gQWxsIHN0cmluZ3Mgb3JcbiAqICAgICBvYmplY3RzIHdpdGggc3RyaW5nIHByb3BlcnRpZXMgaW4gYGFycmF5YCB0aGF0IG1hdGNoIHRoaXMgc3RyaW5nIHdpbGwgYmUgcmV0dXJuZWQuIFRoaXMgYWxzb1xuICogICAgIGFwcGxpZXMgdG8gbmVzdGVkIG9iamVjdCBwcm9wZXJ0aWVzLlxuICogICAgIFRoZSBwcmVkaWNhdGUgY2FuIGJlIG5lZ2F0ZWQgYnkgcHJlZml4aW5nIHRoZSBzdHJpbmcgd2l0aCBgIWAuXG4gKlxuICogICAtIGBPYmplY3RgOiBBIHBhdHRlcm4gb2JqZWN0IGNhbiBiZSB1c2VkIHRvIGZpbHRlciBzcGVjaWZpYyBwcm9wZXJ0aWVzIG9uIG9iamVjdHMgY29udGFpbmVkXG4gKiAgICAgYnkgYGFycmF5YC4gRm9yIGV4YW1wbGUgYHtuYW1lOlwiTVwiLCBwaG9uZTpcIjFcIn1gIHByZWRpY2F0ZSB3aWxsIHJldHVybiBhbiBhcnJheSBvZiBpdGVtc1xuICogICAgIHdoaWNoIGhhdmUgcHJvcGVydHkgYG5hbWVgIGNvbnRhaW5pbmcgXCJNXCIgYW5kIHByb3BlcnR5IGBwaG9uZWAgY29udGFpbmluZyBcIjFcIi4gQSBzcGVjaWFsXG4gKiAgICAgcHJvcGVydHkgbmFtZSAoYCRgIGJ5IGRlZmF1bHQpIGNhbiBiZSB1c2VkIChlLmcuIGFzIGluIGB7JDogXCJ0ZXh0XCJ9YCkgdG8gYWNjZXB0IGEgbWF0Y2hcbiAqICAgICBhZ2FpbnN0IGFueSBwcm9wZXJ0eSBvZiB0aGUgb2JqZWN0IG9yIGl0cyBuZXN0ZWQgb2JqZWN0IHByb3BlcnRpZXMuIFRoYXQncyBlcXVpdmFsZW50IHRvIHRoZVxuICogICAgIHNpbXBsZSBzdWJzdHJpbmcgbWF0Y2ggd2l0aCBhIGBzdHJpbmdgIGFzIGRlc2NyaWJlZCBhYm92ZS4gVGhlIHNwZWNpYWwgcHJvcGVydHkgbmFtZSBjYW4gYmVcbiAqICAgICBvdmVyd3JpdHRlbiwgdXNpbmcgdGhlIGBhbnlQcm9wZXJ0eUtleWAgcGFyYW1ldGVyLlxuICogICAgIFRoZSBwcmVkaWNhdGUgY2FuIGJlIG5lZ2F0ZWQgYnkgcHJlZml4aW5nIHRoZSBzdHJpbmcgd2l0aCBgIWAuXG4gKiAgICAgRm9yIGV4YW1wbGUgYHtuYW1lOiBcIiFNXCJ9YCBwcmVkaWNhdGUgd2lsbCByZXR1cm4gYW4gYXJyYXkgb2YgaXRlbXMgd2hpY2ggaGF2ZSBwcm9wZXJ0eSBgbmFtZWBcbiAqICAgICBub3QgY29udGFpbmluZyBcIk1cIi5cbiAqXG4gKiAgICAgTm90ZSB0aGF0IGEgbmFtZWQgcHJvcGVydHkgd2lsbCBtYXRjaCBwcm9wZXJ0aWVzIG9uIHRoZSBzYW1lIGxldmVsIG9ubHksIHdoaWxlIHRoZSBzcGVjaWFsXG4gKiAgICAgYCRgIHByb3BlcnR5IHdpbGwgbWF0Y2ggcHJvcGVydGllcyBvbiB0aGUgc2FtZSBsZXZlbCBvciBkZWVwZXIuIEUuZy4gYW4gYXJyYXkgaXRlbSBsaWtlXG4gKiAgICAgYHtuYW1lOiB7Zmlyc3Q6ICdKb2huJywgbGFzdDogJ0RvZSd9fWAgd2lsbCAqKm5vdCoqIGJlIG1hdGNoZWQgYnkgYHtuYW1lOiAnSm9obid9YCwgYnV0XG4gKiAgICAgKip3aWxsKiogYmUgbWF0Y2hlZCBieSBgeyQ6ICdKb2huJ31gLlxuICpcbiAqICAgLSBgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBhcnJheSlgOiBBIHByZWRpY2F0ZSBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byB3cml0ZSBhcmJpdHJhcnkgZmlsdGVycy5cbiAqICAgICBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIGZvciBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5LCB3aXRoIHRoZSBlbGVtZW50LCBpdHMgaW5kZXgsIGFuZFxuICogICAgIHRoZSBlbnRpcmUgYXJyYXkgaXRzZWxmIGFzIGFyZ3VtZW50cy5cbiAqXG4gKiAgICAgVGhlIGZpbmFsIHJlc3VsdCBpcyBhbiBhcnJheSBvZiB0aG9zZSBlbGVtZW50cyB0aGF0IHRoZSBwcmVkaWNhdGUgcmV0dXJuZWQgdHJ1ZSBmb3IuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbihhY3R1YWwsIGV4cGVjdGVkKXx0cnVlfGZhbHNlfSBbY29tcGFyYXRvcl0gQ29tcGFyYXRvciB3aGljaCBpcyB1c2VkIGluXG4gKiAgICAgZGV0ZXJtaW5pbmcgaWYgdmFsdWVzIHJldHJpZXZlZCB1c2luZyBgZXhwcmVzc2lvbmAgKHdoZW4gaXQgaXMgbm90IGEgZnVuY3Rpb24pIHNob3VsZCBiZVxuICogICAgIGNvbnNpZGVyZWQgYSBtYXRjaCBiYXNlZCBvbiB0aGUgZXhwZWN0ZWQgdmFsdWUgKGZyb20gdGhlIGZpbHRlciBleHByZXNzaW9uKSBhbmQgYWN0dWFsXG4gKiAgICAgdmFsdWUgKGZyb20gdGhlIG9iamVjdCBpbiB0aGUgYXJyYXkpLlxuICpcbiAqICAgQ2FuIGJlIG9uZSBvZjpcbiAqXG4gKiAgIC0gYGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpYDpcbiAqICAgICBUaGUgZnVuY3Rpb24gd2lsbCBiZSBnaXZlbiB0aGUgb2JqZWN0IHZhbHVlIGFuZCB0aGUgcHJlZGljYXRlIHZhbHVlIHRvIGNvbXBhcmUgYW5kXG4gKiAgICAgc2hvdWxkIHJldHVybiB0cnVlIGlmIGJvdGggdmFsdWVzIHNob3VsZCBiZSBjb25zaWRlcmVkIGVxdWFsLlxuICpcbiAqICAgLSBgdHJ1ZWA6IEEgc2hvcnRoYW5kIGZvciBgZnVuY3Rpb24oYWN0dWFsLCBleHBlY3RlZCkgeyByZXR1cm4gYW5ndWxhci5lcXVhbHMoYWN0dWFsLCBleHBlY3RlZCl9YC5cbiAqICAgICBUaGlzIGlzIGVzc2VudGlhbGx5IHN0cmljdCBjb21wYXJpc29uIG9mIGV4cGVjdGVkIGFuZCBhY3R1YWwuXG4gKlxuICogICAtIGBmYWxzZWA6IEEgc2hvcnQgaGFuZCBmb3IgYSBmdW5jdGlvbiB3aGljaCB3aWxsIGxvb2sgZm9yIGEgc3Vic3RyaW5nIG1hdGNoIGluIGEgY2FzZVxuICogICAgIGluc2Vuc2l0aXZlIHdheS4gUHJpbWl0aXZlIHZhbHVlcyBhcmUgY29udmVydGVkIHRvIHN0cmluZ3MuIE9iamVjdHMgYXJlIG5vdCBjb21wYXJlZCBhZ2FpbnN0XG4gKiAgICAgcHJpbWl0aXZlcywgdW5sZXNzIHRoZXkgaGF2ZSBhIGN1c3RvbSBgdG9TdHJpbmdgIG1ldGhvZCAoZS5nLiBgRGF0ZWAgb2JqZWN0cykuXG4gKlxuICpcbiAqICAgRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gW2FueVByb3BlcnR5S2V5XSBUaGUgc3BlY2lhbCBwcm9wZXJ0eSBuYW1lIHRoYXQgbWF0Y2hlcyBhZ2FpbnN0IGFueSBwcm9wZXJ0eS5cbiAqICAgICBCeSBkZWZhdWx0IGAkYC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cImZpbHRlci1maWx0ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWluaXQ9XCJmcmllbmRzID0gW3tuYW1lOidKb2huJywgcGhvbmU6JzU1NS0xMjc2J30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOidNYXJ5JywgcGhvbmU6JzgwMC1CSUctTUFSWSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonTWlrZScsIHBob25lOic1NTUtNDMyMSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonQWRhbScsIHBob25lOic1NTUtNTY3OCd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTonSnVsaWUnLCBwaG9uZTonNTU1LTg3NjUnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6J0p1bGlldHRlJywgcGhvbmU6JzU1NS01Njc4J31dXCI+PC9kaXY+XG5cbiAgICAgICA8bGFiZWw+U2VhcmNoOiA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2hUZXh0XCI+PC9sYWJlbD5cbiAgICAgICA8dGFibGUgaWQ9XCJzZWFyY2hUZXh0UmVzdWx0c1wiPlxuICAgICAgICAgPHRyPjx0aD5OYW1lPC90aD48dGg+UGhvbmU8L3RoPjwvdHI+XG4gICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBmaWx0ZXI6c2VhcmNoVGV4dFwiPlxuICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kLnBob25lfX08L3RkPlxuICAgICAgICAgPC90cj5cbiAgICAgICA8L3RhYmxlPlxuICAgICAgIDxocj5cbiAgICAgICA8bGFiZWw+QW55OiA8aW5wdXQgbmctbW9kZWw9XCJzZWFyY2guJFwiPjwvbGFiZWw+IDxicj5cbiAgICAgICA8bGFiZWw+TmFtZSBvbmx5IDxpbnB1dCBuZy1tb2RlbD1cInNlYXJjaC5uYW1lXCI+PC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPlBob25lIG9ubHkgPGlucHV0IG5nLW1vZGVsPVwic2VhcmNoLnBob25lXCI+PC9sYWJlbD48YnI+XG4gICAgICAgPGxhYmVsPkVxdWFsaXR5IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cInN0cmljdFwiPjwvbGFiZWw+PGJyPlxuICAgICAgIDx0YWJsZSBpZD1cInNlYXJjaE9ialJlc3VsdHNcIj5cbiAgICAgICAgIDx0cj48dGg+TmFtZTwvdGg+PHRoPlBob25lPC90aD48L3RyPlxuICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZE9iaiBpbiBmcmllbmRzIHwgZmlsdGVyOnNlYXJjaDpzdHJpY3RcIj5cbiAgICAgICAgICAgPHRkPnt7ZnJpZW5kT2JqLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgIDx0ZD57e2ZyaWVuZE9iai5waG9uZX19PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgPC90YWJsZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIGV4cGVjdEZyaWVuZE5hbWVzID0gZnVuY3Rpb24oZXhwZWN0ZWROYW1lcywga2V5KSB7XG4gICAgICAgICBlbGVtZW50LmFsbChieS5yZXBlYXRlcihrZXkgKyAnIGluIGZyaWVuZHMnKS5jb2x1bW4oa2V5ICsgJy5uYW1lJykpLnRoZW4oZnVuY3Rpb24oYXJyKSB7XG4gICAgICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uKHdkLCBpKSB7XG4gICAgICAgICAgICAgZXhwZWN0KHdkLmdldFRleHQoKSkudG9NYXRjaChleHBlY3RlZE5hbWVzW2ldKTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICB9KTtcbiAgICAgICB9O1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggYWNyb3NzIGFsbCBmaWVsZHMgd2hlbiBmaWx0ZXJpbmcgd2l0aCBhIHN0cmluZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNlYXJjaFRleHQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2hUZXh0JykpO1xuICAgICAgICAgc2VhcmNoVGV4dC5jbGVhcigpO1xuICAgICAgICAgc2VhcmNoVGV4dC5zZW5kS2V5cygnbScpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydNYXJ5JywgJ01pa2UnLCAnQWRhbSddLCAnZnJpZW5kJyk7XG5cbiAgICAgICAgIHNlYXJjaFRleHQuY2xlYXIoKTtcbiAgICAgICAgIHNlYXJjaFRleHQuc2VuZEtleXMoJzc2Jyk7XG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ0pvaG4nLCAnSnVsaWUnXSwgJ2ZyaWVuZCcpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzZWFyY2ggaW4gc3BlY2lmaWMgZmllbGRzIHdoZW4gZmlsdGVyaW5nIHdpdGggYSBwcmVkaWNhdGUgb2JqZWN0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgc2VhcmNoQW55ID0gZWxlbWVudChieS5tb2RlbCgnc2VhcmNoLiQnKSk7XG4gICAgICAgICBzZWFyY2hBbnkuY2xlYXIoKTtcbiAgICAgICAgIHNlYXJjaEFueS5zZW5kS2V5cygnaScpO1xuICAgICAgICAgZXhwZWN0RnJpZW5kTmFtZXMoWydNYXJ5JywgJ01pa2UnLCAnSnVsaWUnLCAnSnVsaWV0dGUnXSwgJ2ZyaWVuZE9iaicpO1xuICAgICAgIH0pO1xuICAgICAgIGl0KCdzaG91bGQgdXNlIGEgZXF1YWwgY29tcGFyaXNvbiB3aGVuIGNvbXBhcmF0b3IgaXMgdHJ1ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNlYXJjaE5hbWUgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzZWFyY2gubmFtZScpKTtcbiAgICAgICAgIHZhciBzdHJpY3QgPSBlbGVtZW50KGJ5Lm1vZGVsKCdzdHJpY3QnKSk7XG4gICAgICAgICBzZWFyY2hOYW1lLmNsZWFyKCk7XG4gICAgICAgICBzZWFyY2hOYW1lLnNlbmRLZXlzKCdKdWxpZScpO1xuICAgICAgICAgc3RyaWN0LmNsaWNrKCk7XG4gICAgICAgICBleHBlY3RGcmllbmROYW1lcyhbJ0p1bGllJ10sICdmcmllbmRPYmonKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cbmZ1bmN0aW9uIGZpbHRlckZpbHRlcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBleHByZXNzaW9uLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSkge1xuICAgIGlmICghaXNBcnJheUxpa2UoYXJyYXkpKSB7XG4gICAgICBpZiAoYXJyYXkgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBtaW5FcnIoJ2ZpbHRlcicpKCdub3RhcnJheScsICdFeHBlY3RlZCBhcnJheSBidXQgcmVjZWl2ZWQ6IHswfScsIGFycmF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbnlQcm9wZXJ0eUtleSA9IGFueVByb3BlcnR5S2V5IHx8ICckJztcbiAgICB2YXIgZXhwcmVzc2lvblR5cGUgPSBnZXRUeXBlRm9yRmlsdGVyKGV4cHJlc3Npb24pO1xuICAgIHZhciBwcmVkaWNhdGVGbjtcbiAgICB2YXIgbWF0Y2hBZ2FpbnN0QW55UHJvcDtcblxuICAgIHN3aXRjaCAoZXhwcmVzc2lvblR5cGUpIHtcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgcHJlZGljYXRlRm4gPSBleHByZXNzaW9uO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgY2FzZSAnbnVsbCc6XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgbWF0Y2hBZ2FpbnN0QW55UHJvcCA9IHRydWU7XG4gICAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgIHByZWRpY2F0ZUZuID0gY3JlYXRlUHJlZGljYXRlRm4oZXhwcmVzc2lvbiwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIG1hdGNoQWdhaW5zdEFueVByb3ApO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGFycmF5LCBwcmVkaWNhdGVGbik7XG4gIH07XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGBmaWx0ZXJGaWx0ZXJgXG5mdW5jdGlvbiBjcmVhdGVQcmVkaWNhdGVGbihleHByZXNzaW9uLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgbWF0Y2hBZ2FpbnN0QW55UHJvcCkge1xuICB2YXIgc2hvdWxkTWF0Y2hQcmltaXRpdmVzID0gaXNPYmplY3QoZXhwcmVzc2lvbikgJiYgKGFueVByb3BlcnR5S2V5IGluIGV4cHJlc3Npb24pO1xuICB2YXIgcHJlZGljYXRlRm47XG5cbiAgaWYgKGNvbXBhcmF0b3IgPT09IHRydWUpIHtcbiAgICBjb21wYXJhdG9yID0gZXF1YWxzO1xuICB9IGVsc2UgaWYgKCFpc0Z1bmN0aW9uKGNvbXBhcmF0b3IpKSB7XG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZChhY3R1YWwpKSB7XG4gICAgICAgIC8vIE5vIHN1YnN0cmluZyBtYXRjaGluZyBhZ2FpbnN0IGB1bmRlZmluZWRgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICgoYWN0dWFsID09PSBudWxsKSB8fCAoZXhwZWN0ZWQgPT09IG51bGwpKSB7XG4gICAgICAgIC8vIE5vIHN1YnN0cmluZyBtYXRjaGluZyBhZ2FpbnN0IGBudWxsYDsgb25seSBtYXRjaCBhZ2FpbnN0IGBudWxsYFxuICAgICAgICByZXR1cm4gYWN0dWFsID09PSBleHBlY3RlZDtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdChleHBlY3RlZCkgfHwgKGlzT2JqZWN0KGFjdHVhbCkgJiYgIWhhc0N1c3RvbVRvU3RyaW5nKGFjdHVhbCkpKSB7XG4gICAgICAgIC8vIFNob3VsZCBub3QgY29tcGFyZSBwcmltaXRpdmVzIGFnYWluc3Qgb2JqZWN0cywgdW5sZXNzIHRoZXkgaGF2ZSBjdXN0b20gYHRvU3RyaW5nYCBtZXRob2RcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBhY3R1YWwgPSBsb3dlcmNhc2UoJycgKyBhY3R1YWwpO1xuICAgICAgZXhwZWN0ZWQgPSBsb3dlcmNhc2UoJycgKyBleHBlY3RlZCk7XG4gICAgICByZXR1cm4gYWN0dWFsLmluZGV4T2YoZXhwZWN0ZWQpICE9PSAtMTtcbiAgICB9O1xuICB9XG5cbiAgcHJlZGljYXRlRm4gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgaWYgKHNob3VsZE1hdGNoUHJpbWl0aXZlcyAmJiAhaXNPYmplY3QoaXRlbSkpIHtcbiAgICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHByZXNzaW9uW2FueVByb3BlcnR5S2V5XSwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZXBDb21wYXJlKGl0ZW0sIGV4cHJlc3Npb24sIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgfTtcblxuICByZXR1cm4gcHJlZGljYXRlRm47XG59XG5cbmZ1bmN0aW9uIGRlZXBDb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQsIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wLCBkb250TWF0Y2hXaG9sZU9iamVjdCkge1xuICB2YXIgYWN0dWFsVHlwZSA9IGdldFR5cGVGb3JGaWx0ZXIoYWN0dWFsKTtcbiAgdmFyIGV4cGVjdGVkVHlwZSA9IGdldFR5cGVGb3JGaWx0ZXIoZXhwZWN0ZWQpO1xuXG4gIGlmICgoZXhwZWN0ZWRUeXBlID09PSAnc3RyaW5nJykgJiYgKGV4cGVjdGVkLmNoYXJBdCgwKSA9PT0gJyEnKSkge1xuICAgIHJldHVybiAhZGVlcENvbXBhcmUoYWN0dWFsLCBleHBlY3RlZC5zdWJzdHJpbmcoMSksIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBtYXRjaEFnYWluc3RBbnlQcm9wKTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KGFjdHVhbCkpIHtcbiAgICAvLyBJbiBjYXNlIGBhY3R1YWxgIGlzIGFuIGFycmF5LCBjb25zaWRlciBpdCBhIG1hdGNoXG4gICAgLy8gaWYgQU5ZIG9mIGl0J3MgaXRlbXMgbWF0Y2hlcyBgZXhwZWN0ZWRgXG4gICAgcmV0dXJuIGFjdHVhbC5zb21lKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgIHJldHVybiBkZWVwQ29tcGFyZShpdGVtLCBleHBlY3RlZCwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIG1hdGNoQWdhaW5zdEFueVByb3ApO1xuICAgIH0pO1xuICB9XG5cbiAgc3dpdGNoIChhY3R1YWxUeXBlKSB7XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIHZhciBrZXk7XG4gICAgICBpZiAobWF0Y2hBZ2FpbnN0QW55UHJvcCkge1xuICAgICAgICBmb3IgKGtleSBpbiBhY3R1YWwpIHtcbiAgICAgICAgICAvLyBVbmRlciBjZXJ0YWluLCByYXJlLCBjaXJjdW1zdGFuY2VzLCBrZXkgbWF5IG5vdCBiZSBhIHN0cmluZyBhbmQgYGNoYXJBdGAgd2lsbCBiZSB1bmRlZmluZWRcbiAgICAgICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzE1NjQ0XG4gICAgICAgICAgaWYgKGtleS5jaGFyQXQgJiYgKGtleS5jaGFyQXQoMCkgIT09ICckJykgJiZcbiAgICAgICAgICAgICAgZGVlcENvbXBhcmUoYWN0dWFsW2tleV0sIGV4cGVjdGVkLCBjb21wYXJhdG9yLCBhbnlQcm9wZXJ0eUtleSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9udE1hdGNoV2hvbGVPYmplY3QgPyBmYWxzZSA6IGRlZXBDb21wYXJlKGFjdHVhbCwgZXhwZWN0ZWQsIGNvbXBhcmF0b3IsIGFueVByb3BlcnR5S2V5LCBmYWxzZSk7XG4gICAgICB9IGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZm9yIChrZXkgaW4gZXhwZWN0ZWQpIHtcbiAgICAgICAgICB2YXIgZXhwZWN0ZWRWYWwgPSBleHBlY3RlZFtrZXldO1xuICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGV4cGVjdGVkVmFsKSB8fCBpc1VuZGVmaW5lZChleHBlY3RlZFZhbCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBtYXRjaEFueVByb3BlcnR5ID0ga2V5ID09PSBhbnlQcm9wZXJ0eUtleTtcbiAgICAgICAgICB2YXIgYWN0dWFsVmFsID0gbWF0Y2hBbnlQcm9wZXJ0eSA/IGFjdHVhbCA6IGFjdHVhbFtrZXldO1xuICAgICAgICAgIGlmICghZGVlcENvbXBhcmUoYWN0dWFsVmFsLCBleHBlY3RlZFZhbCwgY29tcGFyYXRvciwgYW55UHJvcGVydHlLZXksIG1hdGNoQW55UHJvcGVydHksIG1hdGNoQW55UHJvcGVydHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoYWN0dWFsLCBleHBlY3RlZCk7XG4gICAgICB9XG4gICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY29tcGFyYXRvcihhY3R1YWwsIGV4cGVjdGVkKTtcbiAgfVxufVxuXG4vLyBVc2VkIGZvciBlYXNpbHkgZGlmZmVyZW50aWF0aW5nIGJldHdlZW4gYG51bGxgIGFuZCBhY3R1YWwgYG9iamVjdGBcbmZ1bmN0aW9uIGdldFR5cGVGb3JGaWx0ZXIodmFsKSB7XG4gIHJldHVybiAodmFsID09PSBudWxsKSA/ICdudWxsJyA6IHR5cGVvZiB2YWw7XG59XG5cbnZhciBNQVhfRElHSVRTID0gMjI7XG52YXIgREVDSU1BTF9TRVAgPSAnLic7XG52YXIgWkVST19DSEFSID0gJzAnO1xuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGN1cnJlbmN5XG4gKiBAa2luZCBmdW5jdGlvblxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRm9ybWF0cyBhIG51bWJlciBhcyBhIGN1cnJlbmN5IChpZSAkMSwyMzQuNTYpLiBXaGVuIG5vIGN1cnJlbmN5IHN5bWJvbCBpcyBwcm92aWRlZCwgZGVmYXVsdFxuICogc3ltYm9sIGZvciBjdXJyZW50IGxvY2FsZSBpcyB1c2VkLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgSW5wdXQgdG8gZmlsdGVyLlxuICogQHBhcmFtIHtzdHJpbmc9fSBzeW1ib2wgQ3VycmVuY3kgc3ltYm9sIG9yIGlkZW50aWZpZXIgdG8gYmUgZGlzcGxheWVkLlxuICogQHBhcmFtIHtudW1iZXI9fSBmcmFjdGlvblNpemUgTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRoZSBhbW91bnQgdG8sIGRlZmF1bHRzIHRvIGRlZmF1bHQgbWF4IGZyYWN0aW9uIHNpemUgZm9yIGN1cnJlbnQgbG9jYWxlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBGb3JtYXR0ZWQgbnVtYmVyLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwiY3VycmVuY3lFeGFtcGxlXCIgbmFtZT1cImN1cnJlbmN5LWZpbHRlclwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnY3VycmVuY3lFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLmFtb3VudCA9IDEyMzQuNTY7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cImFtb3VudFwiIGFyaWEtbGFiZWw9XCJhbW91bnRcIj4gPGJyPlxuICAgICAgICAgZGVmYXVsdCBjdXJyZW5jeSBzeW1ib2wgKCQpOiA8c3BhbiBpZD1cImN1cnJlbmN5LWRlZmF1bHRcIj57e2Ftb3VudCB8IGN1cnJlbmN5fX08L3NwYW4+PGJyPlxuICAgICAgICAgY3VzdG9tIGN1cnJlbmN5IGlkZW50aWZpZXIgKFVTRCQpOiA8c3BhbiBpZD1cImN1cnJlbmN5LWN1c3RvbVwiPnt7YW1vdW50IHwgY3VycmVuY3k6XCJVU0QkXCJ9fTwvc3Bhbj48YnI+XG4gICAgICAgICBubyBmcmFjdGlvbnMgKDApOiA8c3BhbiBpZD1cImN1cnJlbmN5LW5vLWZyYWN0aW9uc1wiPnt7YW1vdW50IHwgY3VycmVuY3k6XCJVU0QkXCI6MH19PC9zcGFuPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGluaXQgd2l0aCAxMjM0LjU2JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY3VycmVuY3ktZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJyQxLDIzNC41NicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWN1c3RvbScpKS5nZXRUZXh0KCkpLnRvQmUoJ1VTRCQxLDIzNC41NicpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LW5vLWZyYWN0aW9ucycpKS5nZXRUZXh0KCkpLnRvQmUoJ1VTRCQxLDIzNScpO1xuICAgICAgIH0pO1xuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ3NhZmFyaScpIHtcbiAgICAgICAgICAgLy8gU2FmYXJpIGRvZXMgbm90IHVuZGVyc3RhbmQgdGhlIG1pbnVzIGtleS4gU2VlXG4gICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzQ4MVxuICAgICAgICAgICByZXR1cm47XG4gICAgICAgICB9XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdhbW91bnQnKSkuY2xlYXIoKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2Ftb3VudCcpKS5zZW5kS2V5cygnLTEyMzQnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1kZWZhdWx0JykpLmdldFRleHQoKSkudG9CZSgnLSQxLDIzNC4wMCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2N1cnJlbmN5LWN1c3RvbScpKS5nZXRUZXh0KCkpLnRvQmUoJy1VU0QkMSwyMzQuMDAnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXJyZW5jeS1uby1mcmFjdGlvbnMnKSkuZ2V0VGV4dCgpKS50b0JlKCctVVNEJDEsMjM0Jyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuY3VycmVuY3lGaWx0ZXIuJGluamVjdCA9IFsnJGxvY2FsZSddO1xuZnVuY3Rpb24gY3VycmVuY3lGaWx0ZXIoJGxvY2FsZSkge1xuICB2YXIgZm9ybWF0cyA9ICRsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7XG4gIHJldHVybiBmdW5jdGlvbihhbW91bnQsIGN1cnJlbmN5U3ltYm9sLCBmcmFjdGlvblNpemUpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQoY3VycmVuY3lTeW1ib2wpKSB7XG4gICAgICBjdXJyZW5jeVN5bWJvbCA9IGZvcm1hdHMuQ1VSUkVOQ1lfU1lNO1xuICAgIH1cblxuICAgIGlmIChpc1VuZGVmaW5lZChmcmFjdGlvblNpemUpKSB7XG4gICAgICBmcmFjdGlvblNpemUgPSBmb3JtYXRzLlBBVFRFUk5TWzFdLm1heEZyYWM7XG4gICAgfVxuXG4gICAgLy8gaWYgbnVsbCBvciB1bmRlZmluZWQgcGFzcyBpdCB0aHJvdWdoXG4gICAgcmV0dXJuIChhbW91bnQgPT0gbnVsbClcbiAgICAgICAgPyBhbW91bnRcbiAgICAgICAgOiBmb3JtYXROdW1iZXIoYW1vdW50LCBmb3JtYXRzLlBBVFRFUk5TWzFdLCBmb3JtYXRzLkdST1VQX1NFUCwgZm9ybWF0cy5ERUNJTUFMX1NFUCwgZnJhY3Rpb25TaXplKS5cbiAgICAgICAgICAgIHJlcGxhY2UoL1xcdTAwQTQvZywgY3VycmVuY3lTeW1ib2wpO1xuICB9O1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIG51bWJlclxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZvcm1hdHMgYSBudW1iZXIgYXMgdGV4dC5cbiAqXG4gKiBJZiB0aGUgaW5wdXQgaXMgbnVsbCBvciB1bmRlZmluZWQsIGl0IHdpbGwganVzdCBiZSByZXR1cm5lZC5cbiAqIElmIHRoZSBpbnB1dCBpcyBpbmZpbml0ZSAoSW5maW5pdHkgb3IgLUluZmluaXR5KSwgdGhlIEluZmluaXR5IHN5bWJvbCAn4oieJyBvciAnLeKInicgaXMgcmV0dXJuZWQsIHJlc3BlY3RpdmVseS5cbiAqIElmIHRoZSBpbnB1dCBpcyBub3QgYSBudW1iZXIgYW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkLlxuICpcbiAqXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IG51bWJlciBOdW1iZXIgdG8gZm9ybWF0LlxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyk9fSBmcmFjdGlvblNpemUgTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRoZSBudW1iZXIgdG8uXG4gKiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCB0aGVuIHRoZSBmcmFjdGlvbiBzaXplIGlzIGNvbXB1dGVkIGZyb20gdGhlIGN1cnJlbnQgbG9jYWxlJ3MgbnVtYmVyXG4gKiBmb3JtYXR0aW5nIHBhdHRlcm4uIEluIHRoZSBjYXNlIG9mIHRoZSBkZWZhdWx0IGxvY2FsZSwgaXQgd2lsbCBiZSAzLlxuICogQHJldHVybnMge3N0cmluZ30gTnVtYmVyIHJvdW5kZWQgdG8gYGZyYWN0aW9uU2l6ZWAgYXBwcm9wcmlhdGVseSBmb3JtYXR0ZWQgYmFzZWQgb24gdGhlIGN1cnJlbnRcbiAqICAgICAgICAgICAgICAgICAgIGxvY2FsZSAoZS5nLiwgaW4gdGhlIGVuX1VTIGxvY2FsZSBpdCB3aWxsIGhhdmUgXCIuXCIgYXMgdGhlIGRlY2ltYWwgc2VwYXJhdG9yIGFuZFxuICogICAgICAgICAgICAgICAgICAgaW5jbHVkZSBcIixcIiBncm91cCBzZXBhcmF0b3JzIGFmdGVyIGVhY2ggdGhpcmQgZGlnaXQpLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJudW1iZXJGaWx0ZXJFeGFtcGxlXCIgbmFtZT1cIm51bWJlci1maWx0ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ251bWJlckZpbHRlckV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUudmFsID0gMTIzNC41Njc4OTtcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8bGFiZWw+RW50ZXIgbnVtYmVyOiA8aW5wdXQgbmctbW9kZWw9J3ZhbCc+PC9sYWJlbD48YnI+XG4gICAgICAgICBEZWZhdWx0IGZvcm1hdHRpbmc6IDxzcGFuIGlkPSdudW1iZXItZGVmYXVsdCc+e3t2YWwgfCBudW1iZXJ9fTwvc3Bhbj48YnI+XG4gICAgICAgICBObyBmcmFjdGlvbnM6IDxzcGFuPnt7dmFsIHwgbnVtYmVyOjB9fTwvc3Bhbj48YnI+XG4gICAgICAgICBOZWdhdGl2ZSBudW1iZXI6IDxzcGFuPnt7LXZhbCB8IG51bWJlcjo0fX08L3NwYW4+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgZm9ybWF0IG51bWJlcnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzEsMjM0LjU2OCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndmFsIHwgbnVtYmVyOjAnKSkuZ2V0VGV4dCgpKS50b0JlKCcxLDIzNScpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnLXZhbCB8IG51bWJlcjo0JykpLmdldFRleHQoKSkudG9CZSgnLTEsMjM0LjU2NzknKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgdXBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd2YWwnKSkuY2xlYXIoKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbCcpKS5zZW5kS2V5cygnMzM3NC4zMzMnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdudW1iZXItZGVmYXVsdCcpKS5nZXRUZXh0KCkpLnRvQmUoJzMsMzc0LjMzMycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndmFsIHwgbnVtYmVyOjAnKSkuZ2V0VGV4dCgpKS50b0JlKCczLDM3NCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnLXZhbCB8IG51bWJlcjo0JykpLmdldFRleHQoKSkudG9CZSgnLTMsMzc0LjMzMzAnKTtcbiAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbm51bWJlckZpbHRlci4kaW5qZWN0ID0gWyckbG9jYWxlJ107XG5mdW5jdGlvbiBudW1iZXJGaWx0ZXIoJGxvY2FsZSkge1xuICB2YXIgZm9ybWF0cyA9ICRsb2NhbGUuTlVNQkVSX0ZPUk1BVFM7XG4gIHJldHVybiBmdW5jdGlvbihudW1iZXIsIGZyYWN0aW9uU2l6ZSkge1xuXG4gICAgLy8gaWYgbnVsbCBvciB1bmRlZmluZWQgcGFzcyBpdCB0aHJvdWdoXG4gICAgcmV0dXJuIChudW1iZXIgPT0gbnVsbClcbiAgICAgICAgPyBudW1iZXJcbiAgICAgICAgOiBmb3JtYXROdW1iZXIobnVtYmVyLCBmb3JtYXRzLlBBVFRFUk5TWzBdLCBmb3JtYXRzLkdST1VQX1NFUCwgZm9ybWF0cy5ERUNJTUFMX1NFUCxcbiAgICAgICAgICAgICAgICAgICAgICAgZnJhY3Rpb25TaXplKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIG51bWJlciAoYXMgYSBzdHJpbmcpIGludG8gdGhyZWUgY29tcG9uZW50cyB0aGF0IGNhbiBiZSB1c2VkXG4gKiBmb3IgZm9ybWF0dGluZyB0aGUgbnVtYmVyLlxuICpcbiAqIChTaWduaWZpY2FudCBiaXRzIG9mIHRoaXMgcGFyc2UgYWxnb3JpdGhtIGNhbWUgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTWlrZU1jbC9iaWcuanMvKVxuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gbnVtU3RyIFRoZSBudW1iZXIgdG8gcGFyc2VcbiAqIEByZXR1cm4ge29iamVjdH0gQW4gb2JqZWN0IGRlc2NyaWJpbmcgdGhpcyBudW1iZXIsIGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyBrZXlzOlxuICogIC0gZCA6IGFuIGFycmF5IG9mIGRpZ2l0cyBjb250YWluaW5nIGxlYWRpbmcgemVyb3MgYXMgbmVjZXNzYXJ5XG4gKiAgLSBpIDogdGhlIG51bWJlciBvZiB0aGUgZGlnaXRzIGluIGBkYCB0aGF0IGFyZSB0byB0aGUgbGVmdCBvZiB0aGUgZGVjaW1hbCBwb2ludFxuICogIC0gZSA6IHRoZSBleHBvbmVudCBmb3IgbnVtYmVycyB0aGF0IHdvdWxkIG5lZWQgbW9yZSB0aGFuIGBNQVhfRElHSVRTYCBkaWdpdHMgaW4gYGRgXG4gKlxuICovXG5mdW5jdGlvbiBwYXJzZShudW1TdHIpIHtcbiAgdmFyIGV4cG9uZW50ID0gMCwgZGlnaXRzLCBudW1iZXJPZkludGVnZXJEaWdpdHM7XG4gIHZhciBpLCBqLCB6ZXJvcztcblxuICAvLyBEZWNpbWFsIHBvaW50P1xuICBpZiAoKG51bWJlck9mSW50ZWdlckRpZ2l0cyA9IG51bVN0ci5pbmRleE9mKERFQ0lNQUxfU0VQKSkgPiAtMSkge1xuICAgIG51bVN0ciA9IG51bVN0ci5yZXBsYWNlKERFQ0lNQUxfU0VQLCAnJyk7XG4gIH1cblxuICAvLyBFeHBvbmVudGlhbCBmb3JtP1xuICBpZiAoKGkgPSBudW1TdHIuc2VhcmNoKC9lL2kpKSA+IDApIHtcbiAgICAvLyBXb3JrIG91dCB0aGUgZXhwb25lbnQuXG4gICAgaWYgKG51bWJlck9mSW50ZWdlckRpZ2l0cyA8IDApIG51bWJlck9mSW50ZWdlckRpZ2l0cyA9IGk7XG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzICs9ICtudW1TdHIuc2xpY2UoaSArIDEpO1xuICAgIG51bVN0ciA9IG51bVN0ci5zdWJzdHJpbmcoMCwgaSk7XG4gIH0gZWxzZSBpZiAobnVtYmVyT2ZJbnRlZ2VyRGlnaXRzIDwgMCkge1xuICAgIC8vIFRoZXJlIHdhcyBubyBkZWNpbWFsIHBvaW50IG9yIGV4cG9uZW50IHNvIGl0IGlzIGFuIGludGVnZXIuXG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzID0gbnVtU3RyLmxlbmd0aDtcbiAgfVxuXG4gIC8vIENvdW50IHRoZSBudW1iZXIgb2YgbGVhZGluZyB6ZXJvcy5cbiAgZm9yIChpID0gMDsgbnVtU3RyLmNoYXJBdChpKSA9PT0gWkVST19DSEFSOyBpKyspIHsgLyogZW1wdHkgKi8gfVxuXG4gIGlmIChpID09PSAoemVyb3MgPSBudW1TdHIubGVuZ3RoKSkge1xuICAgIC8vIFRoZSBkaWdpdHMgYXJlIGFsbCB6ZXJvLlxuICAgIGRpZ2l0cyA9IFswXTtcbiAgICBudW1iZXJPZkludGVnZXJEaWdpdHMgPSAxO1xuICB9IGVsc2Uge1xuICAgIC8vIENvdW50IHRoZSBudW1iZXIgb2YgdHJhaWxpbmcgemVyb3NcbiAgICB6ZXJvcy0tO1xuICAgIHdoaWxlIChudW1TdHIuY2hhckF0KHplcm9zKSA9PT0gWkVST19DSEFSKSB6ZXJvcy0tO1xuXG4gICAgLy8gVHJhaWxpbmcgemVyb3MgYXJlIGluc2lnbmlmaWNhbnQgc28gaWdub3JlIHRoZW1cbiAgICBudW1iZXJPZkludGVnZXJEaWdpdHMgLT0gaTtcbiAgICBkaWdpdHMgPSBbXTtcbiAgICAvLyBDb252ZXJ0IHN0cmluZyB0byBhcnJheSBvZiBkaWdpdHMgd2l0aG91dCBsZWFkaW5nL3RyYWlsaW5nIHplcm9zLlxuICAgIGZvciAoaiA9IDA7IGkgPD0gemVyb3M7IGkrKywgaisrKSB7XG4gICAgICBkaWdpdHNbal0gPSArbnVtU3RyLmNoYXJBdChpKTtcbiAgICB9XG4gIH1cblxuICAvLyBJZiB0aGUgbnVtYmVyIG92ZXJmbG93cyB0aGUgbWF4aW11bSBhbGxvd2VkIGRpZ2l0cyB0aGVuIHVzZSBhbiBleHBvbmVudC5cbiAgaWYgKG51bWJlck9mSW50ZWdlckRpZ2l0cyA+IE1BWF9ESUdJVFMpIHtcbiAgICBkaWdpdHMgPSBkaWdpdHMuc3BsaWNlKDAsIE1BWF9ESUdJVFMgLSAxKTtcbiAgICBleHBvbmVudCA9IG51bWJlck9mSW50ZWdlckRpZ2l0cyAtIDE7XG4gICAgbnVtYmVyT2ZJbnRlZ2VyRGlnaXRzID0gMTtcbiAgfVxuXG4gIHJldHVybiB7IGQ6IGRpZ2l0cywgZTogZXhwb25lbnQsIGk6IG51bWJlck9mSW50ZWdlckRpZ2l0cyB9O1xufVxuXG4vKipcbiAqIFJvdW5kIHRoZSBwYXJzZWQgbnVtYmVyIHRvIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzXG4gKiBUaGlzIGZ1bmN0aW9uIGNoYW5nZWQgdGhlIHBhcnNlZE51bWJlciBpbi1wbGFjZVxuICovXG5mdW5jdGlvbiByb3VuZE51bWJlcihwYXJzZWROdW1iZXIsIGZyYWN0aW9uU2l6ZSwgbWluRnJhYywgbWF4RnJhYykge1xuICAgIHZhciBkaWdpdHMgPSBwYXJzZWROdW1iZXIuZDtcbiAgICB2YXIgZnJhY3Rpb25MZW4gPSBkaWdpdHMubGVuZ3RoIC0gcGFyc2VkTnVtYmVyLmk7XG5cbiAgICAvLyBkZXRlcm1pbmUgZnJhY3Rpb25TaXplIGlmIGl0IGlzIG5vdCBzcGVjaWZpZWQ7IGArZnJhY3Rpb25TaXplYCBjb252ZXJ0cyBpdCB0byBhIG51bWJlclxuICAgIGZyYWN0aW9uU2l6ZSA9IChpc1VuZGVmaW5lZChmcmFjdGlvblNpemUpKSA/IE1hdGgubWluKE1hdGgubWF4KG1pbkZyYWMsIGZyYWN0aW9uTGVuKSwgbWF4RnJhYykgOiArZnJhY3Rpb25TaXplO1xuXG4gICAgLy8gVGhlIGluZGV4IG9mIHRoZSBkaWdpdCB0byB3aGVyZSByb3VuZGluZyBpcyB0byBvY2N1clxuICAgIHZhciByb3VuZEF0ID0gZnJhY3Rpb25TaXplICsgcGFyc2VkTnVtYmVyLmk7XG4gICAgdmFyIGRpZ2l0ID0gZGlnaXRzW3JvdW5kQXRdO1xuXG4gICAgaWYgKHJvdW5kQXQgPiAwKSB7XG4gICAgICAvLyBEcm9wIGZyYWN0aW9uYWwgZGlnaXRzIGJleW9uZCBgcm91bmRBdGBcbiAgICAgIGRpZ2l0cy5zcGxpY2UoTWF0aC5tYXgocGFyc2VkTnVtYmVyLmksIHJvdW5kQXQpKTtcblxuICAgICAgLy8gU2V0IG5vbi1mcmFjdGlvbmFsIGRpZ2l0cyBiZXlvbmQgYHJvdW5kQXRgIHRvIDBcbiAgICAgIGZvciAodmFyIGogPSByb3VuZEF0OyBqIDwgZGlnaXRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRpZ2l0c1tqXSA9IDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdlIHJvdW5kZWQgdG8gemVybyBzbyByZXNldCB0aGUgcGFyc2VkTnVtYmVyXG4gICAgICBmcmFjdGlvbkxlbiA9IE1hdGgubWF4KDAsIGZyYWN0aW9uTGVuKTtcbiAgICAgIHBhcnNlZE51bWJlci5pID0gMTtcbiAgICAgIGRpZ2l0cy5sZW5ndGggPSBNYXRoLm1heCgxLCByb3VuZEF0ID0gZnJhY3Rpb25TaXplICsgMSk7XG4gICAgICBkaWdpdHNbMF0gPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCByb3VuZEF0OyBpKyspIGRpZ2l0c1tpXSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGRpZ2l0ID49IDUpIHtcbiAgICAgIGlmIChyb3VuZEF0IC0gMSA8IDApIHtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPiByb3VuZEF0OyBrLS0pIHtcbiAgICAgICAgICBkaWdpdHMudW5zaGlmdCgwKTtcbiAgICAgICAgICBwYXJzZWROdW1iZXIuaSsrO1xuICAgICAgICB9XG4gICAgICAgIGRpZ2l0cy51bnNoaWZ0KDEpO1xuICAgICAgICBwYXJzZWROdW1iZXIuaSsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlnaXRzW3JvdW5kQXQgLSAxXSsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFBhZCBvdXQgd2l0aCB6ZXJvcyB0byBnZXQgdGhlIHJlcXVpcmVkIGZyYWN0aW9uIGxlbmd0aFxuICAgIGZvciAoOyBmcmFjdGlvbkxlbiA8IE1hdGgubWF4KDAsIGZyYWN0aW9uU2l6ZSk7IGZyYWN0aW9uTGVuKyspIGRpZ2l0cy5wdXNoKDApO1xuXG5cbiAgICAvLyBEbyBhbnkgY2FycnlpbmcsIGUuZy4gYSBkaWdpdCB3YXMgcm91bmRlZCB1cCB0byAxMFxuICAgIHZhciBjYXJyeSA9IGRpZ2l0cy5yZWR1Y2VSaWdodChmdW5jdGlvbihjYXJyeSwgZCwgaSwgZGlnaXRzKSB7XG4gICAgICBkID0gZCArIGNhcnJ5O1xuICAgICAgZGlnaXRzW2ldID0gZCAlIDEwO1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IoZCAvIDEwKTtcbiAgICB9LCAwKTtcbiAgICBpZiAoY2FycnkpIHtcbiAgICAgIGRpZ2l0cy51bnNoaWZ0KGNhcnJ5KTtcbiAgICAgIHBhcnNlZE51bWJlci5pKys7XG4gICAgfVxufVxuXG4vKipcbiAqIEZvcm1hdCBhIG51bWJlciBpbnRvIGEgc3RyaW5nXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAgICAgICBUaGUgbnVtYmVyIHRvIGZvcm1hdFxuICogQHBhcmFtICB7e1xuICogICAgICAgICAgIG1pbkZyYWMsIC8vIHRoZSBtaW5pbXVtIG51bWJlciBvZiBkaWdpdHMgcmVxdWlyZWQgaW4gdGhlIGZyYWN0aW9uIHBhcnQgb2YgdGhlIG51bWJlclxuICogICAgICAgICAgIG1heEZyYWMsIC8vIHRoZSBtYXhpbXVtIG51bWJlciBvZiBkaWdpdHMgcmVxdWlyZWQgaW4gdGhlIGZyYWN0aW9uIHBhcnQgb2YgdGhlIG51bWJlclxuICogICAgICAgICAgIGdTaXplLCAgIC8vIG51bWJlciBvZiBkaWdpdHMgaW4gZWFjaCBncm91cCBvZiBzZXBhcmF0ZWQgZGlnaXRzXG4gKiAgICAgICAgICAgbGdTaXplLCAgLy8gbnVtYmVyIG9mIGRpZ2l0cyBpbiB0aGUgbGFzdCBncm91cCBvZiBkaWdpdHMgYmVmb3JlIHRoZSBkZWNpbWFsIHNlcGFyYXRvclxuICogICAgICAgICAgIG5lZ1ByZSwgIC8vIHRoZSBzdHJpbmcgdG8gZ28gaW4gZnJvbnQgb2YgYSBuZWdhdGl2ZSBudW1iZXIgKGUuZy4gYC1gIG9yIGAoYCkpXG4gKiAgICAgICAgICAgcG9zUHJlLCAgLy8gdGhlIHN0cmluZyB0byBnbyBpbiBmcm9udCBvZiBhIHBvc2l0aXZlIG51bWJlclxuICogICAgICAgICAgIG5lZ1N1ZiwgIC8vIHRoZSBzdHJpbmcgdG8gZ28gYWZ0ZXIgYSBuZWdhdGl2ZSBudW1iZXIgKGUuZy4gYClgKVxuICogICAgICAgICAgIHBvc1N1ZiAgIC8vIHRoZSBzdHJpbmcgdG8gZ28gYWZ0ZXIgYSBwb3NpdGl2ZSBudW1iZXJcbiAqICAgICAgICAgfX0gcGF0dGVyblxuICogQHBhcmFtICB7c3RyaW5nfSBncm91cFNlcCAgICAgVGhlIHN0cmluZyB0byBzZXBhcmF0ZSBncm91cHMgb2YgbnVtYmVyIChlLmcuIGAsYClcbiAqIEBwYXJhbSAge3N0cmluZ30gZGVjaW1hbFNlcCAgIFRoZSBzdHJpbmcgdG8gYWN0IGFzIHRoZSBkZWNpbWFsIHNlcGFyYXRvciAoZS5nLiBgLmApXG4gKiBAcGFyYW0gIHtbdHlwZV19IGZyYWN0aW9uU2l6ZSBUaGUgc2l6ZSBvZiB0aGUgZnJhY3Rpb25hbCBwYXJ0IG9mIHRoZSBudW1iZXJcbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICAgIFRoZSBudW1iZXIgZm9ybWF0dGVkIGFzIGEgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdE51bWJlcihudW1iZXIsIHBhdHRlcm4sIGdyb3VwU2VwLCBkZWNpbWFsU2VwLCBmcmFjdGlvblNpemUpIHtcblxuICBpZiAoIShpc1N0cmluZyhudW1iZXIpIHx8IGlzTnVtYmVyKG51bWJlcikpIHx8IGlzTmFOKG51bWJlcikpIHJldHVybiAnJztcblxuICB2YXIgaXNJbmZpbml0eSA9ICFpc0Zpbml0ZShudW1iZXIpO1xuICB2YXIgaXNaZXJvID0gZmFsc2U7XG4gIHZhciBudW1TdHIgPSBNYXRoLmFicyhudW1iZXIpICsgJycsXG4gICAgICBmb3JtYXR0ZWRUZXh0ID0gJycsXG4gICAgICBwYXJzZWROdW1iZXI7XG5cbiAgaWYgKGlzSW5maW5pdHkpIHtcbiAgICBmb3JtYXR0ZWRUZXh0ID0gJ1xcdTIyMWUnO1xuICB9IGVsc2Uge1xuICAgIHBhcnNlZE51bWJlciA9IHBhcnNlKG51bVN0cik7XG5cbiAgICByb3VuZE51bWJlcihwYXJzZWROdW1iZXIsIGZyYWN0aW9uU2l6ZSwgcGF0dGVybi5taW5GcmFjLCBwYXR0ZXJuLm1heEZyYWMpO1xuXG4gICAgdmFyIGRpZ2l0cyA9IHBhcnNlZE51bWJlci5kO1xuICAgIHZhciBpbnRlZ2VyTGVuID0gcGFyc2VkTnVtYmVyLmk7XG4gICAgdmFyIGV4cG9uZW50ID0gcGFyc2VkTnVtYmVyLmU7XG4gICAgdmFyIGRlY2ltYWxzID0gW107XG4gICAgaXNaZXJvID0gZGlnaXRzLnJlZHVjZShmdW5jdGlvbihpc1plcm8sIGQpIHsgcmV0dXJuIGlzWmVybyAmJiAhZDsgfSwgdHJ1ZSk7XG5cbiAgICAvLyBwYWQgemVyb3MgZm9yIHNtYWxsIG51bWJlcnNcbiAgICB3aGlsZSAoaW50ZWdlckxlbiA8IDApIHtcbiAgICAgIGRpZ2l0cy51bnNoaWZ0KDApO1xuICAgICAgaW50ZWdlckxlbisrO1xuICAgIH1cblxuICAgIC8vIGV4dHJhY3QgZGVjaW1hbHMgZGlnaXRzXG4gICAgaWYgKGludGVnZXJMZW4gPiAwKSB7XG4gICAgICBkZWNpbWFscyA9IGRpZ2l0cy5zcGxpY2UoaW50ZWdlckxlbiwgZGlnaXRzLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlY2ltYWxzID0gZGlnaXRzO1xuICAgICAgZGlnaXRzID0gWzBdO1xuICAgIH1cblxuICAgIC8vIGZvcm1hdCB0aGUgaW50ZWdlciBkaWdpdHMgd2l0aCBncm91cGluZyBzZXBhcmF0b3JzXG4gICAgdmFyIGdyb3VwcyA9IFtdO1xuICAgIGlmIChkaWdpdHMubGVuZ3RoID49IHBhdHRlcm4ubGdTaXplKSB7XG4gICAgICBncm91cHMudW5zaGlmdChkaWdpdHMuc3BsaWNlKC1wYXR0ZXJuLmxnU2l6ZSwgZGlnaXRzLmxlbmd0aCkuam9pbignJykpO1xuICAgIH1cbiAgICB3aGlsZSAoZGlnaXRzLmxlbmd0aCA+IHBhdHRlcm4uZ1NpemUpIHtcbiAgICAgIGdyb3Vwcy51bnNoaWZ0KGRpZ2l0cy5zcGxpY2UoLXBhdHRlcm4uZ1NpemUsIGRpZ2l0cy5sZW5ndGgpLmpvaW4oJycpKTtcbiAgICB9XG4gICAgaWYgKGRpZ2l0cy5sZW5ndGgpIHtcbiAgICAgIGdyb3Vwcy51bnNoaWZ0KGRpZ2l0cy5qb2luKCcnKSk7XG4gICAgfVxuICAgIGZvcm1hdHRlZFRleHQgPSBncm91cHMuam9pbihncm91cFNlcCk7XG5cbiAgICAvLyBhcHBlbmQgdGhlIGRlY2ltYWwgZGlnaXRzXG4gICAgaWYgKGRlY2ltYWxzLmxlbmd0aCkge1xuICAgICAgZm9ybWF0dGVkVGV4dCArPSBkZWNpbWFsU2VwICsgZGVjaW1hbHMuam9pbignJyk7XG4gICAgfVxuXG4gICAgaWYgKGV4cG9uZW50KSB7XG4gICAgICBmb3JtYXR0ZWRUZXh0ICs9ICdlKycgKyBleHBvbmVudDtcbiAgICB9XG4gIH1cbiAgaWYgKG51bWJlciA8IDAgJiYgIWlzWmVybykge1xuICAgIHJldHVybiBwYXR0ZXJuLm5lZ1ByZSArIGZvcm1hdHRlZFRleHQgKyBwYXR0ZXJuLm5lZ1N1ZjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGF0dGVybi5wb3NQcmUgKyBmb3JtYXR0ZWRUZXh0ICsgcGF0dGVybi5wb3NTdWY7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFkTnVtYmVyKG51bSwgZGlnaXRzLCB0cmltLCBuZWdXcmFwKSB7XG4gIHZhciBuZWcgPSAnJztcbiAgaWYgKG51bSA8IDAgfHwgKG5lZ1dyYXAgJiYgbnVtIDw9IDApKSB7XG4gICAgaWYgKG5lZ1dyYXApIHtcbiAgICAgIG51bSA9IC1udW0gKyAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBudW0gPSAtbnVtO1xuICAgICAgbmVnID0gJy0nO1xuICAgIH1cbiAgfVxuICBudW0gPSAnJyArIG51bTtcbiAgd2hpbGUgKG51bS5sZW5ndGggPCBkaWdpdHMpIG51bSA9IFpFUk9fQ0hBUiArIG51bTtcbiAgaWYgKHRyaW0pIHtcbiAgICBudW0gPSBudW0uc3Vic3RyKG51bS5sZW5ndGggLSBkaWdpdHMpO1xuICB9XG4gIHJldHVybiBuZWcgKyBudW07XG59XG5cblxuZnVuY3Rpb24gZGF0ZUdldHRlcihuYW1lLCBzaXplLCBvZmZzZXQsIHRyaW0sIG5lZ1dyYXApIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG4gIHJldHVybiBmdW5jdGlvbihkYXRlKSB7XG4gICAgdmFyIHZhbHVlID0gZGF0ZVsnZ2V0JyArIG5hbWVdKCk7XG4gICAgaWYgKG9mZnNldCA+IDAgfHwgdmFsdWUgPiAtb2Zmc2V0KSB7XG4gICAgICB2YWx1ZSArPSBvZmZzZXQ7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gMCAmJiBvZmZzZXQgPT09IC0xMikgdmFsdWUgPSAxMjtcbiAgICByZXR1cm4gcGFkTnVtYmVyKHZhbHVlLCBzaXplLCB0cmltLCBuZWdXcmFwKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZGF0ZVN0ckdldHRlcihuYW1lLCBzaG9ydEZvcm0sIHN0YW5kQWxvbmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGRhdGUsIGZvcm1hdHMpIHtcbiAgICB2YXIgdmFsdWUgPSBkYXRlWydnZXQnICsgbmFtZV0oKTtcbiAgICB2YXIgcHJvcFByZWZpeCA9IChzdGFuZEFsb25lID8gJ1NUQU5EQUxPTkUnIDogJycpICsgKHNob3J0Rm9ybSA/ICdTSE9SVCcgOiAnJyk7XG4gICAgdmFyIGdldCA9IHVwcGVyY2FzZShwcm9wUHJlZml4ICsgbmFtZSk7XG5cbiAgICByZXR1cm4gZm9ybWF0c1tnZXRdW3ZhbHVlXTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdGltZVpvbmVHZXR0ZXIoZGF0ZSwgZm9ybWF0cywgb2Zmc2V0KSB7XG4gIHZhciB6b25lID0gLTEgKiBvZmZzZXQ7XG4gIHZhciBwYWRkZWRab25lID0gKHpvbmUgPj0gMCkgPyAnKycgOiAnJztcblxuICBwYWRkZWRab25lICs9IHBhZE51bWJlcihNYXRoW3pvbmUgPiAwID8gJ2Zsb29yJyA6ICdjZWlsJ10oem9uZSAvIDYwKSwgMikgK1xuICAgICAgICAgICAgICAgIHBhZE51bWJlcihNYXRoLmFicyh6b25lICUgNjApLCAyKTtcblxuICByZXR1cm4gcGFkZGVkWm9uZTtcbn1cblxuZnVuY3Rpb24gZ2V0Rmlyc3RUaHVyc2RheU9mWWVhcih5ZWFyKSB7XG4gICAgLy8gMCA9IGluZGV4IG9mIEphbnVhcnlcbiAgICB2YXIgZGF5T2ZXZWVrT25GaXJzdCA9IChuZXcgRGF0ZSh5ZWFyLCAwLCAxKSkuZ2V0RGF5KCk7XG4gICAgLy8gNCA9IGluZGV4IG9mIFRodXJzZGF5ICgrMSB0byBhY2NvdW50IGZvciAxc3QgPSA1KVxuICAgIC8vIDExID0gaW5kZXggb2YgKm5leHQqIFRodXJzZGF5ICgrMSBhY2NvdW50IGZvciAxc3QgPSAxMilcbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgMCwgKChkYXlPZldlZWtPbkZpcnN0IDw9IDQpID8gNSA6IDEyKSAtIGRheU9mV2Vla09uRmlyc3QpO1xufVxuXG5mdW5jdGlvbiBnZXRUaHVyc2RheVRoaXNXZWVrKGRhdGV0aW1lKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGRhdGV0aW1lLmdldEZ1bGxZZWFyKCksIGRhdGV0aW1lLmdldE1vbnRoKCksXG4gICAgICAvLyA0ID0gaW5kZXggb2YgVGh1cnNkYXlcbiAgICAgIGRhdGV0aW1lLmdldERhdGUoKSArICg0IC0gZGF0ZXRpbWUuZ2V0RGF5KCkpKTtcbn1cblxuZnVuY3Rpb24gd2Vla0dldHRlcihzaXplKSB7XG4gICByZXR1cm4gZnVuY3Rpb24oZGF0ZSkge1xuICAgICAgdmFyIGZpcnN0VGh1cnMgPSBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSksXG4gICAgICAgICB0aGlzVGh1cnMgPSBnZXRUaHVyc2RheVRoaXNXZWVrKGRhdGUpO1xuXG4gICAgICB2YXIgZGlmZiA9ICt0aGlzVGh1cnMgLSArZmlyc3RUaHVycyxcbiAgICAgICAgIHJlc3VsdCA9IDEgKyBNYXRoLnJvdW5kKGRpZmYgLyA2LjA0OGU4KTsgLy8gNi4wNDhlOCBtcyBwZXIgd2Vla1xuXG4gICAgICByZXR1cm4gcGFkTnVtYmVyKHJlc3VsdCwgc2l6ZSk7XG4gICB9O1xufVxuXG5mdW5jdGlvbiBhbXBtR2V0dGVyKGRhdGUsIGZvcm1hdHMpIHtcbiAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKSA8IDEyID8gZm9ybWF0cy5BTVBNU1swXSA6IGZvcm1hdHMuQU1QTVNbMV07XG59XG5cbmZ1bmN0aW9uIGVyYUdldHRlcihkYXRlLCBmb3JtYXRzKSB7XG4gIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCkgPD0gMCA/IGZvcm1hdHMuRVJBU1swXSA6IGZvcm1hdHMuRVJBU1sxXTtcbn1cblxuZnVuY3Rpb24gbG9uZ0VyYUdldHRlcihkYXRlLCBmb3JtYXRzKSB7XG4gIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCkgPD0gMCA/IGZvcm1hdHMuRVJBTkFNRVNbMF0gOiBmb3JtYXRzLkVSQU5BTUVTWzFdO1xufVxuXG52YXIgREFURV9GT1JNQVRTID0ge1xuICB5eXl5OiBkYXRlR2V0dGVyKCdGdWxsWWVhcicsIDQsIDAsIGZhbHNlLCB0cnVlKSxcbiAgICB5eTogZGF0ZUdldHRlcignRnVsbFllYXInLCAyLCAwLCB0cnVlLCB0cnVlKSxcbiAgICAgeTogZGF0ZUdldHRlcignRnVsbFllYXInLCAxLCAwLCBmYWxzZSwgdHJ1ZSksXG4gIE1NTU06IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJyksXG4gICBNTU06IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJywgdHJ1ZSksXG4gICAgTU06IGRhdGVHZXR0ZXIoJ01vbnRoJywgMiwgMSksXG4gICAgIE06IGRhdGVHZXR0ZXIoJ01vbnRoJywgMSwgMSksXG4gIExMTEw6IGRhdGVTdHJHZXR0ZXIoJ01vbnRoJywgZmFsc2UsIHRydWUpLFxuICAgIGRkOiBkYXRlR2V0dGVyKCdEYXRlJywgMiksXG4gICAgIGQ6IGRhdGVHZXR0ZXIoJ0RhdGUnLCAxKSxcbiAgICBISDogZGF0ZUdldHRlcignSG91cnMnLCAyKSxcbiAgICAgSDogZGF0ZUdldHRlcignSG91cnMnLCAxKSxcbiAgICBoaDogZGF0ZUdldHRlcignSG91cnMnLCAyLCAtMTIpLFxuICAgICBoOiBkYXRlR2V0dGVyKCdIb3VycycsIDEsIC0xMiksXG4gICAgbW06IGRhdGVHZXR0ZXIoJ01pbnV0ZXMnLCAyKSxcbiAgICAgbTogZGF0ZUdldHRlcignTWludXRlcycsIDEpLFxuICAgIHNzOiBkYXRlR2V0dGVyKCdTZWNvbmRzJywgMiksXG4gICAgIHM6IGRhdGVHZXR0ZXIoJ1NlY29uZHMnLCAxKSxcbiAgICAgLy8gd2hpbGUgSVNPIDg2MDEgcmVxdWlyZXMgZnJhY3Rpb25zIHRvIGJlIHByZWZpeGVkIHdpdGggYC5gIG9yIGAsYFxuICAgICAvLyB3ZSBjYW4gYmUganVzdCBzYWZlbHkgcmVseSBvbiB1c2luZyBgc3NzYCBzaW5jZSB3ZSBjdXJyZW50bHkgZG9uJ3Qgc3VwcG9ydCBzaW5nbGUgb3IgdHdvIGRpZ2l0IGZyYWN0aW9uc1xuICAgc3NzOiBkYXRlR2V0dGVyKCdNaWxsaXNlY29uZHMnLCAzKSxcbiAgRUVFRTogZGF0ZVN0ckdldHRlcignRGF5JyksXG4gICBFRUU6IGRhdGVTdHJHZXR0ZXIoJ0RheScsIHRydWUpLFxuICAgICBhOiBhbXBtR2V0dGVyLFxuICAgICBaOiB0aW1lWm9uZUdldHRlcixcbiAgICB3dzogd2Vla0dldHRlcigyKSxcbiAgICAgdzogd2Vla0dldHRlcigxKSxcbiAgICAgRzogZXJhR2V0dGVyLFxuICAgICBHRzogZXJhR2V0dGVyLFxuICAgICBHR0c6IGVyYUdldHRlcixcbiAgICAgR0dHRzogbG9uZ0VyYUdldHRlclxufTtcblxudmFyIERBVEVfRk9STUFUU19TUExJVCA9IC8oKD86W155TUxkSGhtc2FaRXdHJ10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8TCt8ZCt8SCt8aCt8bSt8cyt8YXxafEcrfHcrKSkoW1xcc1xcU10qKS8sXG4gICAgTlVNQkVSX1NUUklORyA9IC9eLT9cXGQrJC87XG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgZGF0ZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICAgRm9ybWF0cyBgZGF0ZWAgdG8gYSBzdHJpbmcgYmFzZWQgb24gdGhlIHJlcXVlc3RlZCBgZm9ybWF0YC5cbiAqXG4gKiAgIGBmb3JtYXRgIHN0cmluZyBjYW4gYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBlbGVtZW50czpcbiAqXG4gKiAgICogYCd5eXl5J2A6IDQgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciAoZS5nLiBBRCAxID0+IDAwMDEsIEFEIDIwMTAgPT4gMjAxMClcbiAqICAgKiBgJ3l5J2A6IDIgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciwgcGFkZGVkICgwMC05OSkuIChlLmcuIEFEIDIwMDEgPT4gMDEsIEFEIDIwMTAgPT4gMTApXG4gKiAgICogYCd5J2A6IDEgZGlnaXQgcmVwcmVzZW50YXRpb24gb2YgeWVhciwgZS5nLiAoQUQgMSA9PiAxLCBBRCAxOTkgPT4gMTk5KVxuICogICAqIGAnTU1NTSdgOiBNb250aCBpbiB5ZWFyIChKYW51YXJ5LURlY2VtYmVyKVxuICogICAqIGAnTU1NJ2A6IE1vbnRoIGluIHllYXIgKEphbi1EZWMpXG4gKiAgICogYCdNTSdgOiBNb250aCBpbiB5ZWFyLCBwYWRkZWQgKDAxLTEyKVxuICogICAqIGAnTSdgOiBNb250aCBpbiB5ZWFyICgxLTEyKVxuICogICAqIGAnTExMTCdgOiBTdGFuZC1hbG9uZSBtb250aCBpbiB5ZWFyIChKYW51YXJ5LURlY2VtYmVyKVxuICogICAqIGAnZGQnYDogRGF5IGluIG1vbnRoLCBwYWRkZWQgKDAxLTMxKVxuICogICAqIGAnZCdgOiBEYXkgaW4gbW9udGggKDEtMzEpXG4gKiAgICogYCdFRUVFJ2A6IERheSBpbiBXZWVrLChTdW5kYXktU2F0dXJkYXkpXG4gKiAgICogYCdFRUUnYDogRGF5IGluIFdlZWssIChTdW4tU2F0KVxuICogICAqIGAnSEgnYDogSG91ciBpbiBkYXksIHBhZGRlZCAoMDAtMjMpXG4gKiAgICogYCdIJ2A6IEhvdXIgaW4gZGF5ICgwLTIzKVxuICogICAqIGAnaGgnYDogSG91ciBpbiBBTS9QTSwgcGFkZGVkICgwMS0xMilcbiAqICAgKiBgJ2gnYDogSG91ciBpbiBBTS9QTSwgKDEtMTIpXG4gKiAgICogYCdtbSdgOiBNaW51dGUgaW4gaG91ciwgcGFkZGVkICgwMC01OSlcbiAqICAgKiBgJ20nYDogTWludXRlIGluIGhvdXIgKDAtNTkpXG4gKiAgICogYCdzcydgOiBTZWNvbmQgaW4gbWludXRlLCBwYWRkZWQgKDAwLTU5KVxuICogICAqIGAncydgOiBTZWNvbmQgaW4gbWludXRlICgwLTU5KVxuICogICAqIGAnc3NzJ2A6IE1pbGxpc2Vjb25kIGluIHNlY29uZCwgcGFkZGVkICgwMDAtOTk5KVxuICogICAqIGAnYSdgOiBBTS9QTSBtYXJrZXJcbiAqICAgKiBgJ1onYDogNCBkaWdpdCAoK3NpZ24pIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0aW1lem9uZSBvZmZzZXQgKC0xMjAwLSsxMjAwKVxuICogICAqIGAnd3cnYDogV2VlayBvZiB5ZWFyLCBwYWRkZWQgKDAwLTUzKS4gV2VlayAwMSBpcyB0aGUgd2VlayB3aXRoIHRoZSBmaXJzdCBUaHVyc2RheSBvZiB0aGUgeWVhclxuICogICAqIGAndydgOiBXZWVrIG9mIHllYXIgKDAtNTMpLiBXZWVrIDEgaXMgdGhlIHdlZWsgd2l0aCB0aGUgZmlyc3QgVGh1cnNkYXkgb2YgdGhlIHllYXJcbiAqICAgKiBgJ0cnYCwgYCdHRydgLCBgJ0dHRydgOiBUaGUgYWJicmV2aWF0ZWQgZm9ybSBvZiB0aGUgZXJhIHN0cmluZyAoZS5nLiAnQUQnKVxuICogICAqIGAnR0dHRydgOiBUaGUgbG9uZyBmb3JtIG9mIHRoZSBlcmEgc3RyaW5nIChlLmcuICdBbm5vIERvbWluaScpXG4gKlxuICogICBgZm9ybWF0YCBzdHJpbmcgY2FuIGFsc28gYmUgb25lIG9mIHRoZSBmb2xsb3dpbmcgcHJlZGVmaW5lZFxuICogICB7QGxpbmsgZ3VpZGUvaTE4biBsb2NhbGl6YWJsZSBmb3JtYXRzfTpcbiAqXG4gKiAgICogYCdtZWRpdW0nYDogZXF1aXZhbGVudCB0byBgJ01NTSBkLCB5IGg6bW06c3MgYSdgIGZvciBlbl9VUyBsb2NhbGVcbiAqICAgICAoZS5nLiBTZXAgMywgMjAxMCAxMjowNTowOCBQTSlcbiAqICAgKiBgJ3Nob3J0J2A6IGVxdWl2YWxlbnQgdG8gYCdNL2QveXkgaDptbSBhJ2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gOS8zLzEwIDEyOjA1IFBNKVxuICogICAqIGAnZnVsbERhdGUnYDogZXF1aXZhbGVudCB0byBgJ0VFRUUsIE1NTU0gZCwgeSdgIGZvciBlbl9VUyAgbG9jYWxlXG4gKiAgICAgKGUuZy4gRnJpZGF5LCBTZXB0ZW1iZXIgMywgMjAxMClcbiAqICAgKiBgJ2xvbmdEYXRlJ2A6IGVxdWl2YWxlbnQgdG8gYCdNTU1NIGQsIHknYCBmb3IgZW5fVVMgIGxvY2FsZSAoZS5nLiBTZXB0ZW1iZXIgMywgMjAxMClcbiAqICAgKiBgJ21lZGl1bURhdGUnYDogZXF1aXZhbGVudCB0byBgJ01NTSBkLCB5J2AgZm9yIGVuX1VTICBsb2NhbGUgKGUuZy4gU2VwIDMsIDIwMTApXG4gKiAgICogYCdzaG9ydERhdGUnYDogZXF1aXZhbGVudCB0byBgJ00vZC95eSdgIGZvciBlbl9VUyBsb2NhbGUgKGUuZy4gOS8zLzEwKVxuICogICAqIGAnbWVkaXVtVGltZSdgOiBlcXVpdmFsZW50IHRvIGAnaDptbTpzcyBhJ2AgZm9yIGVuX1VTIGxvY2FsZSAoZS5nLiAxMjowNTowOCBQTSlcbiAqICAgKiBgJ3Nob3J0VGltZSdgOiBlcXVpdmFsZW50IHRvIGAnaDptbSBhJ2AgZm9yIGVuX1VTIGxvY2FsZSAoZS5nLiAxMjowNSBQTSlcbiAqXG4gKiAgIGBmb3JtYXRgIHN0cmluZyBjYW4gY29udGFpbiBsaXRlcmFsIHZhbHVlcy4gVGhlc2UgbmVlZCB0byBiZSBlc2NhcGVkIGJ5IHN1cnJvdW5kaW5nIHdpdGggc2luZ2xlIHF1b3RlcyAoZS5nLlxuICogICBgXCJoICdpbiB0aGUgbW9ybmluZydcImApLiBJbiBvcmRlciB0byBvdXRwdXQgYSBzaW5nbGUgcXVvdGUsIGVzY2FwZSBpdCAtIGkuZS4sIHR3byBzaW5nbGUgcXVvdGVzIGluIGEgc2VxdWVuY2VcbiAqICAgKGUuZy4gYFwiaCAnbycnY2xvY2snXCJgKS5cbiAqXG4gKiAgIEFueSBvdGhlciBjaGFyYWN0ZXJzIGluIHRoZSBgZm9ybWF0YCBzdHJpbmcgd2lsbCBiZSBvdXRwdXQgYXMtaXMuXG4gKlxuICogQHBhcmFtIHsoRGF0ZXxudW1iZXJ8c3RyaW5nKX0gZGF0ZSBEYXRlIHRvIGZvcm1hdCBlaXRoZXIgYXMgRGF0ZSBvYmplY3QsIG1pbGxpc2Vjb25kcyAoc3RyaW5nIG9yXG4gKiAgICBudW1iZXIpIG9yIHZhcmlvdXMgSVNPIDg2MDEgZGF0ZXRpbWUgc3RyaW5nIGZvcm1hdHMgKGUuZy4geXl5eS1NTS1kZFRISDptbTpzcy5zc3NaIGFuZCBpdHNcbiAqICAgIHNob3J0ZXIgdmVyc2lvbnMgbGlrZSB5eXl5LU1NLWRkVEhIOm1tWiwgeXl5eS1NTS1kZCBvciB5eXl5TU1kZFRISG1tc3NaKS4gSWYgbm8gdGltZXpvbmUgaXNcbiAqICAgIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGlucHV0LCB0aGUgdGltZSBpcyBjb25zaWRlcmVkIHRvIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gZm9ybWF0IEZvcm1hdHRpbmcgcnVsZXMgKHNlZSBEZXNjcmlwdGlvbikuIElmIG5vdCBzcGVjaWZpZWQsXG4gKiAgICBgbWVkaXVtRGF0ZWAgaXMgdXNlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gdGltZXpvbmUgVGltZXpvbmUgdG8gYmUgdXNlZCBmb3IgZm9ybWF0dGluZy4gSXQgdW5kZXJzdGFuZHMgVVRDL0dNVCBhbmQgdGhlXG4gKiAgICBjb250aW5lbnRhbCBVUyB0aW1lIHpvbmUgYWJicmV2aWF0aW9ucywgYnV0IGZvciBnZW5lcmFsIHVzZSwgdXNlIGEgdGltZSB6b25lIG9mZnNldCwgZm9yXG4gKiAgICBleGFtcGxlLCBgJyswNDMwJ2AgKDQgaG91cnMsIDMwIG1pbnV0ZXMgZWFzdCBvZiB0aGUgR3JlZW53aWNoIG1lcmlkaWFuKVxuICogICAgSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWV6b25lIG9mIHRoZSBicm93c2VyIHdpbGwgYmUgdXNlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEZvcm1hdHRlZCBzdHJpbmcgb3IgdGhlIGlucHV0IGlmIGlucHV0IGlzIG5vdCByZWNvZ25pemVkIGFzIGRhdGUvbWlsbGlzLlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwiZmlsdGVyLWRhdGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonbWVkaXVtJ319PC9zcGFuPjpcbiAgICAgICAgICAgPHNwYW4+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTonbWVkaXVtJ319PC9zcGFuPjxicj5cbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ319PC9zcGFuPjpcbiAgICAgICAgICA8c3Bhbj57ezEyODgzMjM2MjMwMDYgfCBkYXRlOid5eXl5LU1NLWRkIEhIOm1tOnNzIFonfX08L3NwYW4+PGJyPlxuICAgICAgIDxzcGFuIG5nLW5vbi1iaW5kYWJsZT57ezEyODgzMjM2MjMwMDYgfCBkYXRlOidNTS9kZC95eXl5IEAgaDptbWEnfX08L3NwYW4+OlxuICAgICAgICAgIDxzcGFuPnt7JzEyODgzMjM2MjMwMDYnIHwgZGF0ZTonTU0vZGQveXl5eSBAIGg6bW1hJ319PC9zcGFuPjxicj5cbiAgICAgICA8c3BhbiBuZy1ub24tYmluZGFibGU+e3sxMjg4MzIzNjIzMDA2IHwgZGF0ZTpcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVwifX08L3NwYW4+OlxuICAgICAgICAgIDxzcGFuPnt7JzEyODgzMjM2MjMwMDYnIHwgZGF0ZTpcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVwifX08L3NwYW4+PGJyPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGZvcm1hdCBkYXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKFwiMTI4ODMyMzYyMzAwNiB8IGRhdGU6J21lZGl1bSdcIikpLmdldFRleHQoKSkuXG4gICAgICAgICAgICB0b01hdGNoKC9PY3QgMlxcZCwgMjAxMCBcXGR7MSwyfTpcXGR7Mn06XFxkezJ9IChBTXxQTSkvKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoXCIxMjg4MzIzNjIzMDA2IHwgZGF0ZToneXl5eS1NTS1kZCBISDptbTpzcyBaJ1wiKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgIHRvTWF0Y2goLzIwMTAtMTAtMlxcZCBcXGR7Mn06XFxkezJ9OlxcZHsyfSAoLXxcXCspP1xcZHs0fS8pO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIicxMjg4MzIzNjIzMDA2JyB8IGRhdGU6J01NL2RkL3l5eXkgQCBoOm1tYSdcIikpLmdldFRleHQoKSkuXG4gICAgICAgICAgICB0b01hdGNoKC8xMFxcLzJcXGRcXC8yMDEwIEAgXFxkezEsMn06XFxkezJ9KEFNfFBNKS8pO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZyhcIicxMjg4MzIzNjIzMDA2JyB8IGRhdGU6XFxcIk1NL2RkL3l5eXkgJ2F0JyBoOm1tYVxcXCJcIikpLmdldFRleHQoKSkuXG4gICAgICAgICAgICB0b01hdGNoKC8xMFxcLzJcXGRcXC8yMDEwIGF0IFxcZHsxLDJ9OlxcZHsyfShBTXxQTSkvKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5kYXRlRmlsdGVyLiRpbmplY3QgPSBbJyRsb2NhbGUnXTtcbmZ1bmN0aW9uIGRhdGVGaWx0ZXIoJGxvY2FsZSkge1xuXG5cbiAgdmFyIFJfSVNPODYwMV9TVFIgPSAvXihcXGR7NH0pLT8oXFxkXFxkKS0/KFxcZFxcZCkoPzpUKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlxcLihcXGQrKSk/KT8pPyhafChbKy1dKShcXGRcXGQpOj8oXFxkXFxkKSk/KT8kLztcbiAgICAgICAgICAgICAgICAgICAgIC8vIDEgICAgICAgIDIgICAgICAgMyAgICAgICAgIDQgICAgICAgICAgNSAgICAgICAgICA2ICAgICAgICAgIDcgICAgICAgICAgOCAgOSAgICAgMTAgICAgICAxMVxuICBmdW5jdGlvbiBqc29uU3RyaW5nVG9EYXRlKHN0cmluZykge1xuICAgIHZhciBtYXRjaDtcbiAgICBpZiAoKG1hdGNoID0gc3RyaW5nLm1hdGNoKFJfSVNPODYwMV9TVFIpKSkge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKSxcbiAgICAgICAgICB0ekhvdXIgPSAwLFxuICAgICAgICAgIHR6TWluICA9IDAsXG4gICAgICAgICAgZGF0ZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENGdWxsWWVhciA6IGRhdGUuc2V0RnVsbFllYXIsXG4gICAgICAgICAgdGltZVNldHRlciA9IG1hdGNoWzhdID8gZGF0ZS5zZXRVVENIb3VycyA6IGRhdGUuc2V0SG91cnM7XG5cbiAgICAgIGlmIChtYXRjaFs5XSkge1xuICAgICAgICB0ekhvdXIgPSB0b0ludChtYXRjaFs5XSArIG1hdGNoWzEwXSk7XG4gICAgICAgIHR6TWluID0gdG9JbnQobWF0Y2hbOV0gKyBtYXRjaFsxMV0pO1xuICAgICAgfVxuICAgICAgZGF0ZVNldHRlci5jYWxsKGRhdGUsIHRvSW50KG1hdGNoWzFdKSwgdG9JbnQobWF0Y2hbMl0pIC0gMSwgdG9JbnQobWF0Y2hbM10pKTtcbiAgICAgIHZhciBoID0gdG9JbnQobWF0Y2hbNF0gfHwgMCkgLSB0ekhvdXI7XG4gICAgICB2YXIgbSA9IHRvSW50KG1hdGNoWzVdIHx8IDApIC0gdHpNaW47XG4gICAgICB2YXIgcyA9IHRvSW50KG1hdGNoWzZdIHx8IDApO1xuICAgICAgdmFyIG1zID0gTWF0aC5yb3VuZChwYXJzZUZsb2F0KCcwLicgKyAobWF0Y2hbN10gfHwgMCkpICogMTAwMCk7XG4gICAgICB0aW1lU2V0dGVyLmNhbGwoZGF0ZSwgaCwgbSwgcywgbXMpO1xuICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxuICAgIHJldHVybiBzdHJpbmc7XG4gIH1cblxuXG4gIHJldHVybiBmdW5jdGlvbihkYXRlLCBmb3JtYXQsIHRpbWV6b25lKSB7XG4gICAgdmFyIHRleHQgPSAnJyxcbiAgICAgICAgcGFydHMgPSBbXSxcbiAgICAgICAgZm4sIG1hdGNoO1xuXG4gICAgZm9ybWF0ID0gZm9ybWF0IHx8ICdtZWRpdW1EYXRlJztcbiAgICBmb3JtYXQgPSAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFNbZm9ybWF0XSB8fCBmb3JtYXQ7XG4gICAgaWYgKGlzU3RyaW5nKGRhdGUpKSB7XG4gICAgICBkYXRlID0gTlVNQkVSX1NUUklORy50ZXN0KGRhdGUpID8gdG9JbnQoZGF0ZSkgOiBqc29uU3RyaW5nVG9EYXRlKGRhdGUpO1xuICAgIH1cblxuICAgIGlmIChpc051bWJlcihkYXRlKSkge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICAgIH1cblxuICAgIGlmICghaXNEYXRlKGRhdGUpIHx8ICFpc0Zpbml0ZShkYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgIHJldHVybiBkYXRlO1xuICAgIH1cblxuICAgIHdoaWxlIChmb3JtYXQpIHtcbiAgICAgIG1hdGNoID0gREFURV9GT1JNQVRTX1NQTElULmV4ZWMoZm9ybWF0KTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBwYXJ0cyA9IGNvbmNhdChwYXJ0cywgbWF0Y2gsIDEpO1xuICAgICAgICBmb3JtYXQgPSBwYXJ0cy5wb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRzLnB1c2goZm9ybWF0KTtcbiAgICAgICAgZm9ybWF0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZGF0ZVRpbWV6b25lT2Zmc2V0ID0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgIGlmICh0aW1lem9uZSkge1xuICAgICAgZGF0ZVRpbWV6b25lT2Zmc2V0ID0gdGltZXpvbmVUb09mZnNldCh0aW1lem9uZSwgZGF0ZVRpbWV6b25lT2Zmc2V0KTtcbiAgICAgIGRhdGUgPSBjb252ZXJ0VGltZXpvbmVUb0xvY2FsKGRhdGUsIHRpbWV6b25lLCB0cnVlKTtcbiAgICB9XG4gICAgZm9yRWFjaChwYXJ0cywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGZuID0gREFURV9GT1JNQVRTW3ZhbHVlXTtcbiAgICAgIHRleHQgKz0gZm4gPyBmbihkYXRlLCAkbG9jYWxlLkRBVEVUSU1FX0ZPUk1BVFMsIGRhdGVUaW1lem9uZU9mZnNldClcbiAgICAgICAgICAgICAgICAgOiB2YWx1ZSA9PT0gJ1xcJ1xcJycgPyAnXFwnJyA6IHZhbHVlLnJlcGxhY2UoLyheJ3wnJCkvZywgJycpLnJlcGxhY2UoLycnL2csICdcXCcnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0ZXh0O1xuICB9O1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUganNvblxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICAgQWxsb3dzIHlvdSB0byBjb252ZXJ0IGEgSmF2YVNjcmlwdCBvYmplY3QgaW50byBKU09OIHN0cmluZy5cbiAqXG4gKiAgIFRoaXMgZmlsdGVyIGlzIG1vc3RseSB1c2VmdWwgZm9yIGRlYnVnZ2luZy4gV2hlbiB1c2luZyB0aGUgZG91YmxlIGN1cmx5IHt7dmFsdWV9fSBub3RhdGlvblxuICogICB0aGUgYmluZGluZyBpcyBhdXRvbWF0aWNhbGx5IGNvbnZlcnRlZCB0byBKU09OLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IEFueSBKYXZhU2NyaXB0IG9iamVjdCAoaW5jbHVkaW5nIGFycmF5cyBhbmQgcHJpbWl0aXZlIHR5cGVzKSB0byBmaWx0ZXIuXG4gKiBAcGFyYW0ge251bWJlcj19IHNwYWNpbmcgVGhlIG51bWJlciBvZiBzcGFjZXMgdG8gdXNlIHBlciBpbmRlbnRhdGlvbiwgZGVmYXVsdHMgdG8gMi5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEpTT04gc3RyaW5nLlxuICpcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cImZpbHRlci1qc29uXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHByZSBpZD1cImRlZmF1bHQtc3BhY2luZ1wiPnt7IHsnbmFtZSc6J3ZhbHVlJ30gfCBqc29uIH19PC9wcmU+XG4gICAgICAgPHByZSBpZD1cImN1c3RvbS1zcGFjaW5nXCI+e3sgeyduYW1lJzondmFsdWUnfSB8IGpzb246NCB9fTwvcHJlPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGpzb25pZnkgZmlsdGVyZWQgb2JqZWN0cycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2RlZmF1bHQtc3BhY2luZycpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL1xce1xcbiB7Mn1cIm5hbWVcIjogP1widmFsdWVcIlxcbn0vKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjdXN0b20tc3BhY2luZycpKS5nZXRUZXh0KCkpLnRvTWF0Y2goL1xce1xcbiB7NH1cIm5hbWVcIjogP1widmFsdWVcIlxcbn0vKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICpcbiAqL1xuZnVuY3Rpb24ganNvbkZpbHRlcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgc3BhY2luZykge1xuICAgIGlmIChpc1VuZGVmaW5lZChzcGFjaW5nKSkge1xuICAgICAgICBzcGFjaW5nID0gMjtcbiAgICB9XG4gICAgcmV0dXJuIHRvSnNvbihvYmplY3QsIHNwYWNpbmcpO1xuICB9O1xufVxuXG5cbi8qKlxuICogQG5nZG9jIGZpbHRlclxuICogQG5hbWUgbG93ZXJjYXNlXG4gKiBAa2luZCBmdW5jdGlvblxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0cyBzdHJpbmcgdG8gbG93ZXJjYXNlLlxuICpcbiAqIFNlZSB0aGUge0BsaW5rIG5nLnVwcGVyY2FzZSB1cHBlcmNhc2UgZmlsdGVyIGRvY3VtZW50YXRpb259IGZvciBhIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgZXhhbXBsZS5cbiAqXG4gKiBAc2VlIGFuZ3VsYXIubG93ZXJjYXNlXG4gKi9cbnZhciBsb3dlcmNhc2VGaWx0ZXIgPSB2YWx1ZUZuKGxvd2VyY2FzZSk7XG5cblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSB1cHBlcmNhc2VcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbnZlcnRzIHN0cmluZyB0byB1cHBlcmNhc2UuXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwidXBwZXJjYXNlRmlsdGVyRXhhbXBsZVwiIG5hbWU9XCJmaWx0ZXItdXBwZXJjYXNlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd1cHBlcmNhc2VGaWx0ZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnRpdGxlID0gJ1RoaXMgaXMgYSB0aXRsZSc7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPCEtLSBUaGlzIHRpdGxlIHNob3VsZCBiZSBmb3JtYXR0ZWQgbm9ybWFsbHkgLS0+XG4gICAgICAgICA8aDE+e3t0aXRsZX19PC9oMT5cbiAgICAgICAgIDwhLS0gVGhpcyB0aXRsZSBzaG91bGQgYmUgY2FwaXRhbGl6ZWQgLS0+XG4gICAgICAgICA8aDE+e3t0aXRsZSB8IHVwcGVyY2FzZX19PC9oMT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgdXBwZXJjYXNlRmlsdGVyID0gdmFsdWVGbih1cHBlcmNhc2UpO1xuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIGxpbWl0VG9cbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGEgbmV3IGFycmF5IG9yIHN0cmluZyBjb250YWluaW5nIG9ubHkgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzLiBUaGUgZWxlbWVudHMgYXJlXG4gKiB0YWtlbiBmcm9tIGVpdGhlciB0aGUgYmVnaW5uaW5nIG9yIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBhcnJheSwgc3RyaW5nIG9yIG51bWJlciwgYXMgc3BlY2lmaWVkIGJ5XG4gKiB0aGUgdmFsdWUgYW5kIHNpZ24gKHBvc2l0aXZlIG9yIG5lZ2F0aXZlKSBvZiBgbGltaXRgLiBPdGhlciBhcnJheS1saWtlIG9iamVjdHMgYXJlIGFsc28gc3VwcG9ydGVkXG4gKiAoZS5nLiBhcnJheSBzdWJjbGFzc2VzLCBOb2RlTGlzdHMsIGpxTGl0ZS9qUXVlcnkgY29sbGVjdGlvbnMgZXRjKS4gSWYgYSBudW1iZXIgaXMgdXNlZCBhcyBpbnB1dCxcbiAqIGl0IGlzIGNvbnZlcnRlZCB0byBhIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fEFycmF5TGlrZXxzdHJpbmd8bnVtYmVyfSBpbnB1dCAtIEFycmF5L2FycmF5LWxpa2UsIHN0cmluZyBvciBudW1iZXIgdG8gYmUgbGltaXRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gbGltaXQgLSBUaGUgbGVuZ3RoIG9mIHRoZSByZXR1cm5lZCBhcnJheSBvciBzdHJpbmcuIElmIHRoZSBgbGltaXRgIG51bWJlclxuICogICAgIGlzIHBvc2l0aXZlLCBgbGltaXRgIG51bWJlciBvZiBpdGVtcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNvdXJjZSBhcnJheS9zdHJpbmcgYXJlIGNvcGllZC5cbiAqICAgICBJZiB0aGUgbnVtYmVyIGlzIG5lZ2F0aXZlLCBgbGltaXRgIG51bWJlciAgb2YgaXRlbXMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2UgYXJyYXkvc3RyaW5nXG4gKiAgICAgYXJlIGNvcGllZC4gVGhlIGBsaW1pdGAgd2lsbCBiZSB0cmltbWVkIGlmIGl0IGV4Y2VlZHMgYGFycmF5Lmxlbmd0aGAuIElmIGBsaW1pdGAgaXMgdW5kZWZpbmVkLFxuICogICAgIHRoZSBpbnB1dCB3aWxsIGJlIHJldHVybmVkIHVuY2hhbmdlZC5cbiAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpPX0gYmVnaW4gLSBJbmRleCBhdCB3aGljaCB0byBiZWdpbiBsaW1pdGF0aW9uLiBBcyBhIG5lZ2F0aXZlIGluZGV4LFxuICogICAgIGBiZWdpbmAgaW5kaWNhdGVzIGFuIG9mZnNldCBmcm9tIHRoZSBlbmQgb2YgYGlucHV0YC4gRGVmYXVsdHMgdG8gYDBgLlxuICogQHJldHVybnMge0FycmF5fHN0cmluZ30gQSBuZXcgc3ViLWFycmF5IG9yIHN1YnN0cmluZyBvZiBsZW5ndGggYGxpbWl0YCBvciBsZXNzIGlmIHRoZSBpbnB1dCBoYWRcbiAqICAgICBsZXNzIHRoYW4gYGxpbWl0YCBlbGVtZW50cy5cbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbW9kdWxlPVwibGltaXRUb0V4YW1wbGVcIiBuYW1lPVwibGltaXQtdG8tZmlsdGVyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdsaW1pdFRvRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5udW1iZXJzID0gWzEsMiwzLDQsNSw2LDcsOCw5XTtcbiAgICAgICAgICAgICAkc2NvcGUubGV0dGVycyA9IFwiYWJjZGVmZ2hpXCI7XG4gICAgICAgICAgICAgJHNjb3BlLmxvbmdOdW1iZXIgPSAyMzQ1NDMyMzQyO1xuICAgICAgICAgICAgICRzY29wZS5udW1MaW1pdCA9IDM7XG4gICAgICAgICAgICAgJHNjb3BlLmxldHRlckxpbWl0ID0gMztcbiAgICAgICAgICAgICAkc2NvcGUubG9uZ051bWJlckxpbWl0ID0gMztcbiAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICBMaW1pdCB7e251bWJlcnN9fSB0bzpcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgc3RlcD1cIjFcIiBuZy1tb2RlbD1cIm51bUxpbWl0XCI+XG4gICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgPHA+T3V0cHV0IG51bWJlcnM6IHt7IG51bWJlcnMgfCBsaW1pdFRvOm51bUxpbWl0IH19PC9wPlxuICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgTGltaXQge3tsZXR0ZXJzfX0gdG86XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIHN0ZXA9XCIxXCIgbmctbW9kZWw9XCJsZXR0ZXJMaW1pdFwiPlxuICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgIDxwPk91dHB1dCBsZXR0ZXJzOiB7eyBsZXR0ZXJzIHwgbGltaXRUbzpsZXR0ZXJMaW1pdCB9fTwvcD5cbiAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgIExpbWl0IHt7bG9uZ051bWJlcn19IHRvOlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBzdGVwPVwiMVwiIG5nLW1vZGVsPVwibG9uZ051bWJlckxpbWl0XCI+XG4gICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgPHA+T3V0cHV0IGxvbmcgbnVtYmVyOiB7eyBsb25nTnVtYmVyIHwgbGltaXRUbzpsb25nTnVtYmVyTGltaXQgfX08L3A+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBudW1MaW1pdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbnVtTGltaXQnKSk7XG4gICAgICAgdmFyIGxldHRlckxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsZXR0ZXJMaW1pdCcpKTtcbiAgICAgICB2YXIgbG9uZ051bWJlckxpbWl0SW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdsb25nTnVtYmVyTGltaXQnKSk7XG4gICAgICAgdmFyIGxpbWl0ZWROdW1iZXJzID0gZWxlbWVudChieS5iaW5kaW5nKCdudW1iZXJzIHwgbGltaXRUbzpudW1MaW1pdCcpKTtcbiAgICAgICB2YXIgbGltaXRlZExldHRlcnMgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xldHRlcnMgfCBsaW1pdFRvOmxldHRlckxpbWl0JykpO1xuICAgICAgIHZhciBsaW1pdGVkTG9uZ051bWJlciA9IGVsZW1lbnQoYnkuYmluZGluZygnbG9uZ051bWJlciB8IGxpbWl0VG86bG9uZ051bWJlckxpbWl0JykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBsaW1pdCB0aGUgbnVtYmVyIGFycmF5IHRvIGZpcnN0IHRocmVlIGl0ZW1zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QobnVtTGltaXRJbnB1dC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJzMnKTtcbiAgICAgICAgIGV4cGVjdChsZXR0ZXJMaW1pdElucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnMycpO1xuICAgICAgICAgZXhwZWN0KGxvbmdOdW1iZXJMaW1pdElucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnMycpO1xuICAgICAgICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFsxLDIsM10nKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTGV0dGVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsZXR0ZXJzOiBhYmMnKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTG9uZ051bWJlci5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsb25nIG51bWJlcjogMjM0Jyk7XG4gICAgICAgfSk7XG5cbiAgICAgICAvLyBUaGVyZSBpcyBhIGJ1ZyBpbiBzYWZhcmkgYW5kIHByb3RyYWN0b3IgdGhhdCBkb2Vzbid0IGxpa2UgdGhlIG1pbnVzIGtleVxuICAgICAgIC8vIGl0KCdzaG91bGQgdXBkYXRlIHRoZSBvdXRwdXQgd2hlbiAtMyBpcyBlbnRlcmVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgLy8gICBudW1MaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgLy8gICBudW1MaW1pdElucHV0LnNlbmRLZXlzKCctMycpO1xuICAgICAgIC8vICAgbGV0dGVyTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgIC8vICAgbGV0dGVyTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcbiAgICAgICAvLyAgIGxvbmdOdW1iZXJMaW1pdElucHV0LmNsZWFyKCk7XG4gICAgICAgLy8gICBsb25nTnVtYmVyTGltaXRJbnB1dC5zZW5kS2V5cygnLTMnKTtcbiAgICAgICAvLyAgIGV4cGVjdChsaW1pdGVkTnVtYmVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBudW1iZXJzOiBbNyw4LDldJyk7XG4gICAgICAgLy8gICBleHBlY3QobGltaXRlZExldHRlcnMuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbGV0dGVyczogZ2hpJyk7XG4gICAgICAgLy8gICBleHBlY3QobGltaXRlZExvbmdOdW1iZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCdPdXRwdXQgbG9uZyBudW1iZXI6IDM0MicpO1xuICAgICAgIC8vIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBub3QgZXhjZWVkIHRoZSBtYXhpbXVtIHNpemUgb2YgaW5wdXQgYXJyYXknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIG51bUxpbWl0SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgIG51bUxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xuICAgICAgICAgbGV0dGVyTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbGV0dGVyTGltaXRJbnB1dC5zZW5kS2V5cygnMTAwJyk7XG4gICAgICAgICBsb25nTnVtYmVyTGltaXRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbG9uZ051bWJlckxpbWl0SW5wdXQuc2VuZEtleXMoJzEwMCcpO1xuICAgICAgICAgZXhwZWN0KGxpbWl0ZWROdW1iZXJzLmdldFRleHQoKSkudG9FcXVhbCgnT3V0cHV0IG51bWJlcnM6IFsxLDIsMyw0LDUsNiw3LDgsOV0nKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTGV0dGVycy5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsZXR0ZXJzOiBhYmNkZWZnaGknKTtcbiAgICAgICAgIGV4cGVjdChsaW1pdGVkTG9uZ051bWJlci5nZXRUZXh0KCkpLnRvRXF1YWwoJ091dHB1dCBsb25nIG51bWJlcjogMjM0NTQzMjM0MicpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4qL1xuZnVuY3Rpb24gbGltaXRUb0ZpbHRlcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0LCBsaW1pdCwgYmVnaW4pIHtcbiAgICBpZiAoTWF0aC5hYnMoTnVtYmVyKGxpbWl0KSkgPT09IEluZmluaXR5KSB7XG4gICAgICBsaW1pdCA9IE51bWJlcihsaW1pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpbWl0ID0gdG9JbnQobGltaXQpO1xuICAgIH1cbiAgICBpZiAoaXNOdW1iZXJOYU4obGltaXQpKSByZXR1cm4gaW5wdXQ7XG5cbiAgICBpZiAoaXNOdW1iZXIoaW5wdXQpKSBpbnB1dCA9IGlucHV0LnRvU3RyaW5nKCk7XG4gICAgaWYgKCFpc0FycmF5TGlrZShpbnB1dCkpIHJldHVybiBpbnB1dDtcblxuICAgIGJlZ2luID0gKCFiZWdpbiB8fCBpc05hTihiZWdpbikpID8gMCA6IHRvSW50KGJlZ2luKTtcbiAgICBiZWdpbiA9IChiZWdpbiA8IDApID8gTWF0aC5tYXgoMCwgaW5wdXQubGVuZ3RoICsgYmVnaW4pIDogYmVnaW47XG5cbiAgICBpZiAobGltaXQgPj0gMCkge1xuICAgICAgcmV0dXJuIHNsaWNlRm4oaW5wdXQsIGJlZ2luLCBiZWdpbiArIGxpbWl0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGJlZ2luID09PSAwKSB7XG4gICAgICAgIHJldHVybiBzbGljZUZuKGlucHV0LCBsaW1pdCwgaW5wdXQubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzbGljZUZuKGlucHV0LCBNYXRoLm1heCgwLCBiZWdpbiArIGxpbWl0KSwgYmVnaW4pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc2xpY2VGbihpbnB1dCwgYmVnaW4sIGVuZCkge1xuICBpZiAoaXNTdHJpbmcoaW5wdXQpKSByZXR1cm4gaW5wdXQuc2xpY2UoYmVnaW4sIGVuZCk7XG5cbiAgcmV0dXJuIHNsaWNlLmNhbGwoaW5wdXQsIGJlZ2luLCBlbmQpO1xufVxuXG4vKipcbiAqIEBuZ2RvYyBmaWx0ZXJcbiAqIEBuYW1lIG9yZGVyQnlcbiAqIEBraW5kIGZ1bmN0aW9uXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGl0ZW1zIGZyb20gdGhlIHNwZWNpZmllZCBgY29sbGVjdGlvbmAsIG9yZGVyZWQgYnkgYSBgY29tcGFyYXRvcmBcbiAqIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSB2YWx1ZXMgY29tcHV0ZWQgdXNpbmcgdGhlIGBleHByZXNzaW9uYCBwcmVkaWNhdGUuXG4gKlxuICogRm9yIGV4YW1wbGUsIGBbe2lkOiAnZm9vJ30sIHtpZDogJ2Jhcid9XSB8IG9yZGVyQnk6J2lkJ2Agd291bGQgcmVzdWx0IGluXG4gKiBgW3tpZDogJ2Jhcid9LCB7aWQ6ICdmb28nfV1gLlxuICpcbiAqIFRoZSBgY29sbGVjdGlvbmAgY2FuIGJlIGFuIEFycmF5IG9yIGFycmF5LWxpa2Ugb2JqZWN0IChlLmcuIE5vZGVMaXN0LCBqUXVlcnkgb2JqZWN0LCBUeXBlZEFycmF5LFxuICogU3RyaW5nLCBldGMpLlxuICpcbiAqIFRoZSBgZXhwcmVzc2lvbmAgY2FuIGJlIGEgc2luZ2xlIHByZWRpY2F0ZSwgb3IgYSBsaXN0IG9mIHByZWRpY2F0ZXMgZWFjaCBzZXJ2aW5nIGFzIGEgdGllLWJyZWFrZXJcbiAqIGZvciB0aGUgcHJlY2VkaW5nIG9uZS4gVGhlIGBleHByZXNzaW9uYCBpcyBldmFsdWF0ZWQgYWdhaW5zdCBlYWNoIGl0ZW0gYW5kIHRoZSBvdXRwdXQgaXMgdXNlZFxuICogZm9yIGNvbXBhcmluZyB3aXRoIG90aGVyIGl0ZW1zLlxuICpcbiAqIFlvdSBjYW4gY2hhbmdlIHRoZSBzb3J0aW5nIG9yZGVyIGJ5IHNldHRpbmcgYHJldmVyc2VgIHRvIGB0cnVlYC4gQnkgZGVmYXVsdCwgaXRlbXMgYXJlIHNvcnRlZCBpblxuICogYXNjZW5kaW5nIG9yZGVyLlxuICpcbiAqIFRoZSBjb21wYXJpc29uIGlzIGRvbmUgdXNpbmcgdGhlIGBjb21wYXJhdG9yYCBmdW5jdGlvbi4gSWYgbm9uZSBpcyBzcGVjaWZpZWQsIGEgZGVmYXVsdCwgYnVpbHQtaW5cbiAqIGNvbXBhcmF0b3IgaXMgdXNlZCAoc2VlIGJlbG93IGZvciBkZXRhaWxzIC0gaW4gYSBudXRzaGVsbCwgaXQgY29tcGFyZXMgbnVtYmVycyBudW1lcmljYWxseSBhbmRcbiAqIHN0cmluZ3MgYWxwaGFiZXRpY2FsbHkpLlxuICpcbiAqICMjIyBVbmRlciB0aGUgaG9vZFxuICpcbiAqIE9yZGVyaW5nIHRoZSBzcGVjaWZpZWQgYGNvbGxlY3Rpb25gIGhhcHBlbnMgaW4gdHdvIHBoYXNlczpcbiAqXG4gKiAxLiBBbGwgaXRlbXMgYXJlIHBhc3NlZCB0aHJvdWdoIHRoZSBwcmVkaWNhdGUgKG9yIHByZWRpY2F0ZXMpLCBhbmQgdGhlIHJldHVybmVkIHZhbHVlcyBhcmUgc2F2ZWRcbiAqICAgIGFsb25nIHdpdGggdGhlaXIgdHlwZSAoYHN0cmluZ2AsIGBudW1iZXJgIGV0YykuIEZvciBleGFtcGxlLCBhbiBpdGVtIGB7bGFiZWw6ICdmb28nfWAsIHBhc3NlZFxuICogICAgdGhyb3VnaCBhIHByZWRpY2F0ZSB0aGF0IGV4dHJhY3RzIHRoZSB2YWx1ZSBvZiB0aGUgYGxhYmVsYCBwcm9wZXJ0eSwgd291bGQgYmUgdHJhbnNmb3JtZWQgdG86XG4gKiAgICBgYGBcbiAqICAgIHtcbiAqICAgICAgdmFsdWU6ICdmb28nLFxuICogICAgICB0eXBlOiAnc3RyaW5nJyxcbiAqICAgICAgaW5kZXg6IC4uLlxuICogICAgfVxuICogICAgYGBgXG4gKiAyLiBUaGUgY29tcGFyYXRvciBmdW5jdGlvbiBpcyB1c2VkIHRvIHNvcnQgdGhlIGl0ZW1zLCBiYXNlZCBvbiB0aGUgZGVyaXZlZCB2YWx1ZXMsIHR5cGVzIGFuZFxuICogICAgaW5kaWNlcy5cbiAqXG4gKiBJZiB5b3UgdXNlIGEgY3VzdG9tIGNvbXBhcmF0b3IsIGl0IHdpbGwgYmUgY2FsbGVkIHdpdGggcGFpcnMgb2Ygb2JqZWN0cyBvZiB0aGUgZm9ybVxuICogYHt2YWx1ZTogLi4uLCB0eXBlOiAnLi4uJywgaW5kZXg6IC4uLn1gIGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYDBgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVhbFxuICogKGFzIGZhciBhcyB0aGUgY29tcGFyYXRvciBpcyBjb25jZXJuZWQpLCBgLTFgIGlmIHRoZSAxc3Qgb25lIHNob3VsZCBiZSByYW5rZWQgaGlnaGVyIHRoYW4gdGhlXG4gKiBzZWNvbmQsIG9yIGAxYCBvdGhlcndpc2UuXG4gKlxuICogSW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgdGhlIHNvcnRpbmcgd2lsbCBiZSBkZXRlcm1pbmlzdGljIGFjcm9zcyBwbGF0Zm9ybXMsIGlmIG5vbmUgb2YgdGhlXG4gKiBzcGVjaWZpZWQgcHJlZGljYXRlcyBjYW4gZGlzdGluZ3Vpc2ggYmV0d2VlbiB0d28gaXRlbXMsIGBvcmRlckJ5YCB3aWxsIGF1dG9tYXRpY2FsbHkgaW50cm9kdWNlIGFcbiAqIGR1bW15IHByZWRpY2F0ZSB0aGF0IHJldHVybnMgdGhlIGl0ZW0ncyBpbmRleCBhcyBgdmFsdWVgLlxuICogKElmIHlvdSBhcmUgdXNpbmcgYSBjdXN0b20gY29tcGFyYXRvciwgbWFrZSBzdXJlIGl0IGNhbiBoYW5kbGUgdGhpcyBwcmVkaWNhdGUgYXMgd2VsbC4pXG4gKlxuICogSWYgYSBjdXN0b20gY29tcGFyYXRvciBzdGlsbCBjYW4ndCBkaXN0aW5ndWlzaCBiZXR3ZWVuIHR3byBpdGVtcywgdGhlbiB0aGV5IHdpbGwgYmUgc29ydGVkIGJhc2VkXG4gKiBvbiB0aGVpciBpbmRleCB1c2luZyB0aGUgYnVpbHQtaW4gY29tcGFyYXRvci5cbiAqXG4gKiBGaW5hbGx5LCBpbiBhbiBhdHRlbXB0IHRvIHNpbXBsaWZ5IHRoaW5ncywgaWYgYSBwcmVkaWNhdGUgcmV0dXJucyBhbiBvYmplY3QgYXMgdGhlIGV4dHJhY3RlZFxuICogdmFsdWUgZm9yIGFuIGl0ZW0sIGBvcmRlckJ5YCB3aWxsIHRyeSB0byBjb252ZXJ0IHRoYXQgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHZhbHVlLCBiZWZvcmUgcGFzc2luZ1xuICogaXQgdG8gdGhlIGNvbXBhcmF0b3IuIFRoZSBmb2xsb3dpbmcgcnVsZXMgZ292ZXJuIHRoZSBjb252ZXJzaW9uOlxuICpcbiAqIDEuIElmIHRoZSBvYmplY3QgaGFzIGEgYHZhbHVlT2YoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhIHByaW1pdGl2ZSwgaXRzIHJldHVybiB2YWx1ZSB3aWxsIGJlXG4gKiAgICB1c2VkIGluc3RlYWQuPGJyIC8+XG4gKiAgICAoSWYgdGhlIG9iamVjdCBoYXMgYSBgdmFsdWVPZigpYCBtZXRob2QgdGhhdCByZXR1cm5zIGFub3RoZXIgb2JqZWN0LCB0aGVuIHRoZSByZXR1cm5lZCBvYmplY3RcbiAqICAgIHdpbGwgYmUgdXNlZCBpbiBzdWJzZXF1ZW50IHN0ZXBzLilcbiAqIDIuIElmIHRoZSBvYmplY3QgaGFzIGEgY3VzdG9tIGB0b1N0cmluZygpYCBtZXRob2QgKGkuZS4gbm90IHRoZSBvbmUgaW5oZXJpdGVkIGZyb20gYE9iamVjdGApIHRoYXRcbiAqICAgIHJldHVybnMgYSBwcmltaXRpdmUsIGl0cyByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkIGluc3RlYWQuPGJyIC8+XG4gKiAgICAoSWYgdGhlIG9iamVjdCBoYXMgYSBgdG9TdHJpbmcoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhbm90aGVyIG9iamVjdCwgdGhlbiB0aGUgcmV0dXJuZWQgb2JqZWN0XG4gKiAgICB3aWxsIGJlIHVzZWQgaW4gc3Vic2VxdWVudCBzdGVwcy4pXG4gKiAzLiBObyBjb252ZXJzaW9uOyB0aGUgb2JqZWN0IGl0c2VsZiBpcyB1c2VkLlxuICpcbiAqICMjIyBUaGUgZGVmYXVsdCBjb21wYXJhdG9yXG4gKlxuICogVGhlIGRlZmF1bHQsIGJ1aWx0LWluIGNvbXBhcmF0b3Igc2hvdWxkIGJlIHN1ZmZpY2llbnQgZm9yIG1vc3QgdXNlY2FzZXMuIEluIHNob3J0LCBpdCBjb21wYXJlc1xuICogbnVtYmVycyBudW1lcmljYWxseSwgc3RyaW5ncyBhbHBoYWJldGljYWxseSAoYW5kIGNhc2UtaW5zZW5zaXRpdmVseSksIGZvciBvYmplY3RzIGZhbGxzIGJhY2sgdG9cbiAqIHVzaW5nIHRoZWlyIGluZGV4IGluIHRoZSBvcmlnaW5hbCBjb2xsZWN0aW9uLCBhbmQgc29ydHMgdmFsdWVzIG9mIGRpZmZlcmVudCB0eXBlcyBieSB0eXBlLlxuICpcbiAqIE1vcmUgc3BlY2lmaWNhbGx5LCBpdCBmb2xsb3dzIHRoZXNlIHN0ZXBzIHRvIGRldGVybWluZSB0aGUgcmVsYXRpdmUgb3JkZXIgb2YgaXRlbXM6XG4gKlxuICogMS4gSWYgdGhlIGNvbXBhcmVkIHZhbHVlcyBhcmUgb2YgZGlmZmVyZW50IHR5cGVzLCBjb21wYXJlIHRoZSB0eXBlcyB0aGVtc2VsdmVzIGFscGhhYmV0aWNhbGx5LlxuICogMi4gSWYgYm90aCB2YWx1ZXMgYXJlIG9mIHR5cGUgYHN0cmluZ2AsIGNvbXBhcmUgdGhlbSBhbHBoYWJldGljYWxseSBpbiBhIGNhc2UtIGFuZFxuICogICAgbG9jYWxlLWluc2Vuc2l0aXZlIHdheS5cbiAqIDMuIElmIGJvdGggdmFsdWVzIGFyZSBvYmplY3RzLCBjb21wYXJlIHRoZWlyIGluZGljZXMgaW5zdGVhZC5cbiAqIDQuIE90aGVyd2lzZSwgcmV0dXJuOlxuICogICAgLSAgYDBgLCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVhbCAoYnkgc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb24sIGkuZS4gdXNpbmcgYD09PWApLlxuICogICAgLSBgLTFgLCBpZiB0aGUgMXN0IHZhbHVlIGlzIFwibGVzcyB0aGFuXCIgdGhlIDJuZCB2YWx1ZSAoY29tcGFyZWQgdXNpbmcgdGhlIGA8YCBvcGVyYXRvcikuXG4gKiAgICAtICBgMWAsIG90aGVyd2lzZS5cbiAqXG4gKiAqKk5vdGU6KiogSWYgeW91IG5vdGljZSBudW1iZXJzIG5vdCBiZWluZyBzb3J0ZWQgYXMgZXhwZWN0ZWQsIG1ha2Ugc3VyZSB0aGV5IGFyZSBhY3R1YWxseSBiZWluZ1xuICogICAgICAgICAgIHNhdmVkIGFzIG51bWJlcnMgYW5kIG5vdCBzdHJpbmdzLlxuICogKipOb3RlOioqIEZvciB0aGUgcHVycG9zZSBvZiBzb3J0aW5nLCBgbnVsbGAgdmFsdWVzIGFyZSB0cmVhdGVkIGFzIHRoZSBzdHJpbmcgYCdudWxsJ2AgKGkuZS5cbiAqICAgICAgICAgICBgdHlwZTogJ3N0cmluZydgLCBgdmFsdWU6ICdudWxsJ2ApLiBUaGlzIG1heSBjYXVzZSB1bmV4cGVjdGVkIHNvcnQgb3JkZXIgcmVsYXRpdmUgdG9cbiAqICAgICAgICAgICBvdGhlciB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheXxBcnJheUxpa2V9IGNvbGxlY3Rpb24gLSBUaGUgY29sbGVjdGlvbiAoYXJyYXkgb3IgYXJyYXktbGlrZSBvYmplY3QpIHRvIHNvcnQuXG4gKiBAcGFyYW0geyhGdW5jdGlvbnxzdHJpbmd8QXJyYXkuPEZ1bmN0aW9ufHN0cmluZz4pPX0gZXhwcmVzc2lvbiAtIEEgcHJlZGljYXRlIChvciBsaXN0IG9mXG4gKiAgICBwcmVkaWNhdGVzKSB0byBiZSB1c2VkIGJ5IHRoZSBjb21wYXJhdG9yIHRvIGRldGVybWluZSB0aGUgb3JkZXIgb2YgZWxlbWVudHMuXG4gKlxuICogICAgQ2FuIGJlIG9uZSBvZjpcbiAqXG4gKiAgICAtIGBGdW5jdGlvbmA6IEEgZ2V0dGVyIGZ1bmN0aW9uLiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggZWFjaCBpdGVtIGFzIGFyZ3VtZW50IGFuZFxuICogICAgICB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgYmUgdXNlZCBmb3Igc29ydGluZy5cbiAqICAgIC0gYHN0cmluZ2A6IEFuIEFuZ3VsYXIgZXhwcmVzc2lvbi4gVGhpcyBleHByZXNzaW9uIHdpbGwgYmUgZXZhbHVhdGVkIGFnYWluc3QgZWFjaCBpdGVtIGFuZCB0aGVcbiAqICAgICAgcmVzdWx0IHdpbGwgYmUgdXNlZCBmb3Igc29ydGluZy4gRm9yIGV4YW1wbGUsIHVzZSBgJ2xhYmVsJ2AgdG8gc29ydCBieSBhIHByb3BlcnR5IGNhbGxlZFxuICogICAgICBgbGFiZWxgIG9yIGAnbGFiZWwuc3Vic3RyaW5nKDAsIDMpJ2AgdG8gc29ydCBieSB0aGUgZmlyc3QgMyBjaGFyYWN0ZXJzIG9mIHRoZSBgbGFiZWxgXG4gKiAgICAgIHByb3BlcnR5LjxiciAvPlxuICogICAgICAoVGhlIHJlc3VsdCBvZiBhIGNvbnN0YW50IGV4cHJlc3Npb24gaXMgaW50ZXJwcmV0ZWQgYXMgYSBwcm9wZXJ0eSBuYW1lIHRvIGJlIHVzZWQgZm9yXG4gKiAgICAgIGNvbXBhcmlzb24uIEZvciBleGFtcGxlLCB1c2UgYCdcInNwZWNpYWwgbmFtZVwiJ2AgKG5vdGUgdGhlIGV4dHJhIHBhaXIgb2YgcXVvdGVzKSB0byBzb3J0IGJ5IGFcbiAqICAgICAgcHJvcGVydHkgY2FsbGVkIGBzcGVjaWFsIG5hbWVgLik8YnIgLz5cbiAqICAgICAgQW4gZXhwcmVzc2lvbiBjYW4gYmUgb3B0aW9uYWxseSBwcmVmaXhlZCB3aXRoIGArYCBvciBgLWAgdG8gY29udHJvbCB0aGUgc29ydGluZyBkaXJlY3Rpb24sXG4gKiAgICAgIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nLiBGb3IgZXhhbXBsZSwgYCcrbGFiZWwnYCBvciBgJy1sYWJlbCdgLiBJZiBubyBwcm9wZXJ0eSBpcyBwcm92aWRlZCxcbiAqICAgICAgKGUuZy4gYCcrJ2Agb3IgYCctJ2ApLCB0aGUgY29sbGVjdGlvbiBlbGVtZW50IGl0c2VsZiBpcyB1c2VkIGluIGNvbXBhcmlzb25zLlxuICogICAgLSBgQXJyYXlgOiBBbiBhcnJheSBvZiBmdW5jdGlvbiBhbmQvb3Igc3RyaW5nIHByZWRpY2F0ZXMuIElmIGEgcHJlZGljYXRlIGNhbm5vdCBkZXRlcm1pbmUgdGhlXG4gKiAgICAgIHJlbGF0aXZlIG9yZGVyIG9mIHR3byBpdGVtcywgdGhlIG5leHQgcHJlZGljYXRlIGlzIHVzZWQgYXMgYSB0aWUtYnJlYWtlci5cbiAqXG4gKiAqKk5vdGU6KiogSWYgdGhlIHByZWRpY2F0ZSBpcyBtaXNzaW5nIG9yIGVtcHR5IHRoZW4gaXQgZGVmYXVsdHMgdG8gYCcrJ2AuXG4gKlxuICogQHBhcmFtIHtib29sZWFuPX0gcmV2ZXJzZSAtIElmIGB0cnVlYCwgcmV2ZXJzZSB0aGUgc29ydGluZyBvcmRlci5cbiAqIEBwYXJhbSB7KEZ1bmN0aW9uKT19IGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmdW5jdGlvbiB1c2VkIHRvIGRldGVybWluZSB0aGUgcmVsYXRpdmUgb3JkZXIgb2ZcbiAqICAgIHZhbHVlIHBhaXJzLiBJZiBvbWl0dGVkLCB0aGUgYnVpbHQtaW4gY29tcGFyYXRvciB3aWxsIGJlIHVzZWQuXG4gKlxuICogQHJldHVybnMge0FycmF5fSAtIFRoZSBzb3J0ZWQgYXJyYXkuXG4gKlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgT3JkZXJpbmcgYSB0YWJsZSB3aXRoIGBuZ1JlcGVhdGBcbiAqXG4gKiBUaGUgZXhhbXBsZSBiZWxvdyBkZW1vbnN0cmF0ZXMgYSBzaW1wbGUge0BsaW5rIG5nUmVwZWF0IG5nUmVwZWF0fSwgd2hlcmUgdGhlIGRhdGEgaXMgc29ydGVkIGJ5XG4gKiBhZ2UgaW4gZGVzY2VuZGluZyBvcmRlciAoZXhwcmVzc2lvbiBpcyBzZXQgdG8gYCctYWdlJ2ApLiBUaGUgYGNvbXBhcmF0b3JgIGlzIG5vdCBzZXQsIHdoaWNoIG1lYW5zXG4gKiBpdCBkZWZhdWx0cyB0byB0aGUgYnVpbHQtaW4gY29tcGFyYXRvci5cbiAqXG4gICA8ZXhhbXBsZSBuYW1lPVwib3JkZXJCeS1zdGF0aWNcIiBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZTFcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgPHRoPk5hbWU8L3RoPlxuICAgICAgICAgICAgIDx0aD5QaG9uZSBOdW1iZXI8L3RoPlxuICAgICAgICAgICAgIDx0aD5BZ2U8L3RoPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBvcmRlckJ5OictYWdlJ1wiPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5uYW1lfX08L3RkPlxuICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5waG9uZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuYWdlfX08L3RkPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ29yZGVyQnlFeGFtcGxlMScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBbXG4gICAgICAgICAgICAge25hbWU6ICdKb2huJywgICBwaG9uZTogJzU1NS0xMjEyJywgIGFnZTogMTB9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgcGhvbmU6ICc1NTUtOTg3NicsICBhZ2U6IDE5fSxcbiAgICAgICAgICAgICB7bmFtZTogJ01pa2UnLCAgIHBob25lOiAnNTU1LTQzMjEnLCAgYWdlOiAyMX0sXG4gICAgICAgICAgICAge25hbWU6ICdBZGFtJywgICBwaG9uZTogJzU1NS01Njc4JywgIGFnZTogMzV9LFxuICAgICAgICAgICAgIHtuYW1lOiAnSnVsaWUnLCAgcGhvbmU6ICc1NTUtODc2NScsICBhZ2U6IDI5fVxuICAgICAgICAgICBdO1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAuZnJpZW5kcyB7XG4gICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgICAgIH1cblxuICAgICAgIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQsIC5mcmllbmRzIHRoIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQ7XG4gICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgICAgICB9XG4gICAgICAgLmZyaWVuZHMgdGQ6Zmlyc3QtY2hpbGQsIC5mcmllbmRzIHRoOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgIGJvcmRlci1sZWZ0OiBub25lO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgLy8gRWxlbWVudCBsb2NhdG9yc1xuICAgICAgIHZhciBuYW1lcyA9IGVsZW1lbnQuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpKTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGJ5IGFnZSBpbiByZXZlcnNlIG9yZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgxKS5nZXRUZXh0KCkpLnRvQmUoJ0p1bGllJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDIpLmdldFRleHQoKSkudG9CZSgnTWlrZScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgzKS5nZXRUZXh0KCkpLnRvQmUoJ01hcnknKTtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoNCkuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqIDxociAvPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQ2hhbmdpbmcgcGFyYW1ldGVycyBkeW5hbWljYWxseVxuICpcbiAqIEFsbCBwYXJhbWV0ZXJzIGNhbiBiZSBjaGFuZ2VkIGR5bmFtaWNhbGx5LiBUaGUgbmV4dCBleGFtcGxlIHNob3dzIGhvdyB5b3UgY2FuIG1ha2UgdGhlIGNvbHVtbnMgb2ZcbiAqIGEgdGFibGUgc29ydGFibGUsIGJ5IGJpbmRpbmcgdGhlIGBleHByZXNzaW9uYCBhbmQgYHJldmVyc2VgIHBhcmFtZXRlcnMgdG8gc2NvcGUgcHJvcGVydGllcy5cbiAqXG4gICA8ZXhhbXBsZSBuYW1lPVwib3JkZXJCeS1keW5hbWljXCIgbW9kdWxlPVwib3JkZXJCeUV4YW1wbGUyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxwcmU+U29ydCBieSA9IHt7cHJvcGVydHlOYW1lfX07IHJldmVyc2UgPSB7e3JldmVyc2V9fTwvcHJlPlxuICAgICAgICAgPGhyLz5cbiAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJwcm9wZXJ0eU5hbWUgPSBudWxsOyByZXZlcnNlID0gZmFsc2VcIj5TZXQgdG8gdW5zb3J0ZWQ8L2J1dHRvbj5cbiAgICAgICAgIDxoci8+XG4gICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCduYW1lJylcIj5OYW1lPC9idXR0b24+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNvcnRvcmRlclwiIG5nLXNob3c9XCJwcm9wZXJ0eU5hbWUgPT09ICduYW1lJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgncGhvbmUnKVwiPlBob25lIE51bWJlcjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAncGhvbmUnXCIgbmctY2xhc3M9XCJ7cmV2ZXJzZTogcmV2ZXJzZX1cIj48L3NwYW4+XG4gICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICA8dGg+XG4gICAgICAgICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KCdhZ2UnKVwiPkFnZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAnYWdlJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgIDx0ciBuZy1yZXBlYXQ9XCJmcmllbmQgaW4gZnJpZW5kcyB8IG9yZGVyQnk6cHJvcGVydHlOYW1lOnJldmVyc2VcIj5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cbiAgICAgICAgICAgPC90cj5cbiAgICAgICAgIDwvdGFibGU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTInLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgIHZhciBmcmllbmRzID0gW1xuICAgICAgICAgICAgIHtuYW1lOiAnSm9obicsICAgcGhvbmU6ICc1NTUtMTIxMicsICBhZ2U6IDEwfSxcbiAgICAgICAgICAgICB7bmFtZTogJ01hcnknLCAgIHBob25lOiAnNTU1LTk4NzYnLCAgYWdlOiAxOX0sXG4gICAgICAgICAgICAge25hbWU6ICdNaWtlJywgICBwaG9uZTogJzU1NS00MzIxJywgIGFnZTogMjF9LFxuICAgICAgICAgICAgIHtuYW1lOiAnQWRhbScsICAgcGhvbmU6ICc1NTUtNTY3OCcsICBhZ2U6IDM1fSxcbiAgICAgICAgICAgICB7bmFtZTogJ0p1bGllJywgIHBob25lOiAnNTU1LTg3NjUnLCAgYWdlOiAyOX1cbiAgICAgICAgICAgXTtcblxuICAgICAgICAgICAkc2NvcGUucHJvcGVydHlOYW1lID0gJ2FnZSc7XG4gICAgICAgICAgICRzY29wZS5yZXZlcnNlID0gdHJ1ZTtcbiAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBmcmllbmRzO1xuXG4gICAgICAgICAgICRzY29wZS5zb3J0QnkgPSBmdW5jdGlvbihwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAkc2NvcGUucmV2ZXJzZSA9ICgkc2NvcGUucHJvcGVydHlOYW1lID09PSBwcm9wZXJ0eU5hbWUpID8gISRzY29wZS5yZXZlcnNlIDogZmFsc2U7XG4gICAgICAgICAgICAgJHNjb3BlLnByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZTtcbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG5cbiAgICAgICAuc29ydG9yZGVyOmFmdGVyIHtcbiAgICAgICAgIGNvbnRlbnQ6ICdcXDI1YjInOyAgIC8vIEJMQUNLIFVQLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICAgIC5zb3J0b3JkZXIucmV2ZXJzZTphZnRlciB7XG4gICAgICAgICBjb250ZW50OiAnXFwyNWJjJzsgICAvLyBCTEFDSyBET1dOLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAvLyBFbGVtZW50IGxvY2F0b3JzXG4gICAgICAgdmFyIHVuc29ydEJ1dHRvbiA9IGVsZW1lbnQoYnkucGFydGlhbEJ1dHRvblRleHQoJ3Vuc29ydGVkJykpO1xuICAgICAgIHZhciBuYW1lSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnTmFtZScpKTtcbiAgICAgICB2YXIgcGhvbmVIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdQaG9uZScpKTtcbiAgICAgICB2YXIgYWdlSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnQWdlJykpO1xuICAgICAgIHZhciBmaXJzdE5hbWUgPSBlbGVtZW50KGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpLnJvdygwKSk7XG4gICAgICAgdmFyIGxhc3ROYW1lID0gZWxlbWVudChieS5yZXBlYXRlcignZnJpZW5kcycpLmNvbHVtbignZnJpZW5kLm5hbWUnKS5yb3coNCkpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgYnkgc29tZSBwcm9wZXJ0eSwgd2hlbiBjbGlja2luZyBvbiB0aGUgY29sdW1uIGhlYWRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgcGhvbmVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNYXJ5Jyk7XG5cbiAgICAgICAgIG5hbWVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGluIHJldmVyc2Ugb3JkZXIsIHdoZW4gY2xpY2tpbmcgb24gdGhlIHNhbWUgY29sdW1uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICBhZ2VIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgcmVzdG9yZSB0aGUgb3JpZ2luYWwgb3JkZXIsIHdoZW4gY2xpY2tpbmcgXCJTZXQgdG8gdW5zb3J0ZWRcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgdW5zb3J0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSnVsaWUnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICogPGhyIC8+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgb3JkZXJCeWAgaW5zaWRlIGEgY29udHJvbGxlclxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gY2FsbCB0aGUgYG9yZGVyQnlgIGZpbHRlciBtYW51YWxseSwgYnkgaW5qZWN0aW5nIGBvcmRlckJ5RmlsdGVyYCwgYW5kXG4gKiBjYWxsaW5nIGl0IHdpdGggdGhlIGRlc2lyZWQgcGFyYW1ldGVycy4gKEFsdGVybmF0aXZlbHksIHlvdSBjb3VsZCBpbmplY3QgdGhlIGAkZmlsdGVyYCBmYWN0b3J5XG4gKiBhbmQgcmV0cmlldmUgdGhlIGBvcmRlckJ5YCBmaWx0ZXIgd2l0aCBgJGZpbHRlcignb3JkZXJCeScpYC4pXG4gKlxuICAgPGV4YW1wbGUgbmFtZT1cIm9yZGVyQnktY2FsbC1tYW51YWxseVwiIG1vZHVsZT1cIm9yZGVyQnlFeGFtcGxlM1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8cHJlPlNvcnQgYnkgPSB7e3Byb3BlcnR5TmFtZX19OyByZXZlcnNlID0ge3tyZXZlcnNlfX08L3ByZT5cbiAgICAgICAgIDxoci8+XG4gICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwic29ydEJ5KG51bGwpXCI+U2V0IHRvIHVuc29ydGVkPC9idXR0b24+XG4gICAgICAgICA8aHIvPlxuICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgnbmFtZScpXCI+TmFtZTwvYnV0dG9uPlxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzb3J0b3JkZXJcIiBuZy1zaG93PVwicHJvcGVydHlOYW1lID09PSAnbmFtZSdcIiBuZy1jbGFzcz1cIntyZXZlcnNlOiByZXZlcnNlfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgIDx0aD5cbiAgICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzb3J0QnkoJ3Bob25lJylcIj5QaG9uZSBOdW1iZXI8L2J1dHRvbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic29ydG9yZGVyXCIgbmctc2hvdz1cInByb3BlcnR5TmFtZSA9PT0gJ3Bob25lJ1wiIG5nLWNsYXNzPVwie3JldmVyc2U6IHJldmVyc2V9XCI+PC9zcGFuPlxuICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgPHRoPlxuICAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNvcnRCeSgnYWdlJylcIj5BZ2U8L2J1dHRvbj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic29ydG9yZGVyXCIgbmctc2hvdz1cInByb3BlcnR5TmFtZSA9PT0gJ2FnZSdcIiBuZy1jbGFzcz1cIntyZXZlcnNlOiByZXZlcnNlfVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHNcIj5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICA8dGQ+e3tmcmllbmQucGhvbmV9fTwvdGQ+XG4gICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLmFnZX19PC90ZD5cbiAgICAgICAgICAgPC90cj5cbiAgICAgICAgIDwvdGFibGU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTMnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ29yZGVyQnlGaWx0ZXInLCBmdW5jdGlvbigkc2NvcGUsIG9yZGVyQnkpIHtcbiAgICAgICAgICAgdmFyIGZyaWVuZHMgPSBbXG4gICAgICAgICAgICAge25hbWU6ICdKb2huJywgICBwaG9uZTogJzU1NS0xMjEyJywgIGFnZTogMTB9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgcGhvbmU6ICc1NTUtOTg3NicsICBhZ2U6IDE5fSxcbiAgICAgICAgICAgICB7bmFtZTogJ01pa2UnLCAgIHBob25lOiAnNTU1LTQzMjEnLCAgYWdlOiAyMX0sXG4gICAgICAgICAgICAge25hbWU6ICdBZGFtJywgICBwaG9uZTogJzU1NS01Njc4JywgIGFnZTogMzV9LFxuICAgICAgICAgICAgIHtuYW1lOiAnSnVsaWUnLCAgcGhvbmU6ICc1NTUtODc2NScsICBhZ2U6IDI5fVxuICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICRzY29wZS5wcm9wZXJ0eU5hbWUgPSAnYWdlJztcbiAgICAgICAgICAgJHNjb3BlLnJldmVyc2UgPSB0cnVlO1xuICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IG9yZGVyQnkoZnJpZW5kcywgJHNjb3BlLnByb3BlcnR5TmFtZSwgJHNjb3BlLnJldmVyc2UpO1xuXG4gICAgICAgICAgICRzY29wZS5zb3J0QnkgPSBmdW5jdGlvbihwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgICAgICAkc2NvcGUucmV2ZXJzZSA9IChwcm9wZXJ0eU5hbWUgIT09IG51bGwgJiYgJHNjb3BlLnByb3BlcnR5TmFtZSA9PT0gcHJvcGVydHlOYW1lKVxuICAgICAgICAgICAgICAgICA/ICEkc2NvcGUucmV2ZXJzZSA6IGZhbHNlO1xuICAgICAgICAgICAgICRzY29wZS5wcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWU7XG4gICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBvcmRlckJ5KGZyaWVuZHMsICRzY29wZS5wcm9wZXJ0eU5hbWUsICRzY29wZS5yZXZlcnNlKTtcbiAgICAgICAgICAgfTtcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG5cbiAgICAgICAuc29ydG9yZGVyOmFmdGVyIHtcbiAgICAgICAgIGNvbnRlbnQ6ICdcXDI1YjInOyAgIC8vIEJMQUNLIFVQLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICAgIC5zb3J0b3JkZXIucmV2ZXJzZTphZnRlciB7XG4gICAgICAgICBjb250ZW50OiAnXFwyNWJjJzsgICAvLyBCTEFDSyBET1dOLVBPSU5USU5HIFRSSUFOR0xFXG4gICAgICAgfVxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAvLyBFbGVtZW50IGxvY2F0b3JzXG4gICAgICAgdmFyIHVuc29ydEJ1dHRvbiA9IGVsZW1lbnQoYnkucGFydGlhbEJ1dHRvblRleHQoJ3Vuc29ydGVkJykpO1xuICAgICAgIHZhciBuYW1lSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnTmFtZScpKTtcbiAgICAgICB2YXIgcGhvbmVIZWFkZXIgPSBlbGVtZW50KGJ5LnBhcnRpYWxCdXR0b25UZXh0KCdQaG9uZScpKTtcbiAgICAgICB2YXIgYWdlSGVhZGVyID0gZWxlbWVudChieS5wYXJ0aWFsQnV0dG9uVGV4dCgnQWdlJykpO1xuICAgICAgIHZhciBmaXJzdE5hbWUgPSBlbGVtZW50KGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpLnJvdygwKSk7XG4gICAgICAgdmFyIGxhc3ROYW1lID0gZWxlbWVudChieS5yZXBlYXRlcignZnJpZW5kcycpLmNvbHVtbignZnJpZW5kLm5hbWUnKS5yb3coNCkpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBzb3J0IGZyaWVuZHMgYnkgc29tZSBwcm9wZXJ0eSwgd2hlbiBjbGlja2luZyBvbiB0aGUgY29sdW1uIGhlYWRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgcGhvbmVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNYXJ5Jyk7XG5cbiAgICAgICAgIG5hbWVIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGluIHJldmVyc2Ugb3JkZXIsIHdoZW4gY2xpY2tpbmcgb24gdGhlIHNhbWUgY29sdW1uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnQWRhbScpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuXG4gICAgICAgICBhZ2VIZWFkZXIuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChmaXJzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdKb2huJyk7XG4gICAgICAgICBleHBlY3QobGFzdE5hbWUuZ2V0VGV4dCgpKS50b0JlKCdBZGFtJyk7XG5cbiAgICAgICAgIGFnZUhlYWRlci5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgcmVzdG9yZSB0aGUgb3JpZ2luYWwgb3JkZXIsIHdoZW4gY2xpY2tpbmcgXCJTZXQgdG8gdW5zb3J0ZWRcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZpcnN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChsYXN0TmFtZS5nZXRUZXh0KCkpLnRvQmUoJ0pvaG4nKTtcblxuICAgICAgICAgdW5zb3J0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoZmlyc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KGxhc3ROYW1lLmdldFRleHQoKSkudG9CZSgnSnVsaWUnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICogPGhyIC8+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBhIGN1c3RvbSBjb21wYXJhdG9yXG4gKlxuICogSWYgeW91IGhhdmUgdmVyeSBzcGVjaWZpYyByZXF1aXJlbWVudHMgYWJvdXQgdGhlIHdheSBpdGVtcyBhcmUgc29ydGVkLCB5b3UgY2FuIHBhc3MgeW91ciBvd25cbiAqIGNvbXBhcmF0b3IgZnVuY3Rpb24uIEZvciBleGFtcGxlLCB5b3UgbWlnaHQgbmVlZCB0byBjb21wYXJlIHNvbWUgc3RyaW5ncyBpbiBhIGxvY2FsZS1zZW5zaXRpdmVcbiAqIHdheS4gKFdoZW4gc3BlY2lmeWluZyBhIGN1c3RvbSBjb21wYXJhdG9yLCB5b3UgYWxzbyBuZWVkIHRvIHBhc3MgYSB2YWx1ZSBmb3IgdGhlIGByZXZlcnNlYFxuICogYXJndW1lbnQgLSBwYXNzaW5nIGBmYWxzZWAgcmV0YWlucyB0aGUgZGVmYXVsdCBzb3J0aW5nIG9yZGVyLCBpLmUuIGFzY2VuZGluZy4pXG4gKlxuICAgPGV4YW1wbGUgbmFtZT1cIm9yZGVyQnktY3VzdG9tLWNvbXBhcmF0b3JcIiBtb2R1bGU9XCJvcmRlckJ5RXhhbXBsZTRcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZyaWVuZHMtY29udGFpbmVyIGN1c3RvbS1jb21wYXJhdG9yXCI+XG4gICAgICAgICAgIDxoMz5Mb2NhbGUtc2Vuc2l0aXZlIENvbXBhcmF0b3I8L2gzPlxuICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJmcmllbmRzXCI+XG4gICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgPHRoPk5hbWU8L3RoPlxuICAgICAgICAgICAgICAgPHRoPkZhdm9yaXRlIExldHRlcjwvdGg+XG4gICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICA8dHIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBvcmRlckJ5OidmYXZvcml0ZUxldHRlcic6ZmFsc2U6bG9jYWxlU2Vuc2l0aXZlQ29tcGFyYXRvclwiPlxuICAgICAgICAgICAgICAgPHRkPnt7ZnJpZW5kLm5hbWV9fTwvdGQ+XG4gICAgICAgICAgICAgICA8dGQ+e3tmcmllbmQuZmF2b3JpdGVMZXR0ZXJ9fTwvdGQ+XG4gICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGRpdiBjbGFzcz1cImZyaWVuZHMtY29udGFpbmVyIGRlZmF1bHQtY29tcGFyYXRvclwiPlxuICAgICAgICAgICA8aDM+RGVmYXVsdCBDb21wYXJhdG9yPC9oMz5cbiAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwiZnJpZW5kc1wiPlxuICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgIDx0aD5OYW1lPC90aD5cbiAgICAgICAgICAgICAgIDx0aD5GYXZvcml0ZSBMZXR0ZXI8L3RoPlxuICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgPHRyIG5nLXJlcGVhdD1cImZyaWVuZCBpbiBmcmllbmRzIHwgb3JkZXJCeTonZmF2b3JpdGVMZXR0ZXInXCI+XG4gICAgICAgICAgICAgICA8dGQ+e3tmcmllbmQubmFtZX19PC90ZD5cbiAgICAgICAgICAgICAgIDx0ZD57e2ZyaWVuZC5mYXZvcml0ZUxldHRlcn19PC90ZD5cbiAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdvcmRlckJ5RXhhbXBsZTQnLCBbXSlcbiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICRzY29wZS5mcmllbmRzID0gW1xuICAgICAgICAgICAgIHtuYW1lOiAnSm9obicsICAgZmF2b3JpdGVMZXR0ZXI6ICfDhCd9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWFyeScsICAgZmF2b3JpdGVMZXR0ZXI6ICfDnCd9LFxuICAgICAgICAgICAgIHtuYW1lOiAnTWlrZScsICAgZmF2b3JpdGVMZXR0ZXI6ICfDlid9LFxuICAgICAgICAgICAgIHtuYW1lOiAnQWRhbScsICAgZmF2b3JpdGVMZXR0ZXI6ICdIJ30sXG4gICAgICAgICAgICAge25hbWU6ICdKdWxpZScsICBmYXZvcml0ZUxldHRlcjogJ1onfVxuICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICRzY29wZS5sb2NhbGVTZW5zaXRpdmVDb21wYXJhdG9yID0gZnVuY3Rpb24odjEsIHYyKSB7XG4gICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgZ2V0IHN0cmluZ3MsIGp1c3QgY29tcGFyZSBieSBpbmRleFxuICAgICAgICAgICAgIGlmICh2MS50eXBlICE9PSAnc3RyaW5nJyB8fCB2Mi50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgcmV0dXJuICh2MS5pbmRleCA8IHYyLmluZGV4KSA/IC0xIDogMTtcbiAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAvLyBDb21wYXJlIHN0cmluZ3MgYWxwaGFiZXRpY2FsbHksIHRha2luZyBsb2NhbGUgaW50byBhY2NvdW50XG4gICAgICAgICAgICAgcmV0dXJuIHYxLnZhbHVlLmxvY2FsZUNvbXBhcmUodjIudmFsdWUpO1xuICAgICAgICAgICB9O1xuICAgICAgICAgfV0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAuZnJpZW5kcy1jb250YWluZXIge1xuICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgbWFyZ2luOiAwIDMwcHg7XG4gICAgICAgfVxuXG4gICAgICAgLmZyaWVuZHMge1xuICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcbiAgICAgICB9XG5cbiAgICAgICAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQ7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkLCAuZnJpZW5kcyB0aCB7XG4gICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkO1xuICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgfVxuICAgICAgIC5mcmllbmRzIHRkOmZpcnN0LWNoaWxkLCAuZnJpZW5kcyB0aDpmaXJzdC1jaGlsZCB7XG4gICAgICAgICBib3JkZXItbGVmdDogbm9uZTtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIC8vIEVsZW1lbnQgbG9jYXRvcnNcbiAgICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5jc3MoJy5jdXN0b20tY29tcGFyYXRvcicpKTtcbiAgICAgICB2YXIgbmFtZXMgPSBjb250YWluZXIuYWxsKGJ5LnJlcGVhdGVyKCdmcmllbmRzJykuY29sdW1uKCdmcmllbmQubmFtZScpKTtcblxuICAgICAgIGl0KCdzaG91bGQgc29ydCBmcmllbmRzIGJ5IGZhdm9yaXRlIGxldHRlciAoaW4gY29ycmVjdCBhbHBoYWJldGljYWwgb3JkZXIpJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDApLmdldFRleHQoKSkudG9CZSgnSm9obicpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCgxKS5nZXRUZXh0KCkpLnRvQmUoJ0FkYW0nKTtcbiAgICAgICAgIGV4cGVjdChuYW1lcy5nZXQoMikuZ2V0VGV4dCgpKS50b0JlKCdNaWtlJyk7XG4gICAgICAgICBleHBlY3QobmFtZXMuZ2V0KDMpLmdldFRleHQoKSkudG9CZSgnTWFyeScpO1xuICAgICAgICAgZXhwZWN0KG5hbWVzLmdldCg0KS5nZXRUZXh0KCkpLnRvQmUoJ0p1bGllJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqXG4gKi9cbm9yZGVyQnlGaWx0ZXIuJGluamVjdCA9IFsnJHBhcnNlJ107XG5mdW5jdGlvbiBvcmRlckJ5RmlsdGVyKCRwYXJzZSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHNvcnRQcmVkaWNhdGUsIHJldmVyc2VPcmRlciwgY29tcGFyZUZuKSB7XG5cbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIGFycmF5O1xuICAgIGlmICghaXNBcnJheUxpa2UoYXJyYXkpKSB7XG4gICAgICB0aHJvdyBtaW5FcnIoJ29yZGVyQnknKSgnbm90YXJyYXknLCAnRXhwZWN0ZWQgYXJyYXkgYnV0IHJlY2VpdmVkOiB7MH0nLCBhcnJheSk7XG4gICAgfVxuXG4gICAgaWYgKCFpc0FycmF5KHNvcnRQcmVkaWNhdGUpKSB7IHNvcnRQcmVkaWNhdGUgPSBbc29ydFByZWRpY2F0ZV07IH1cbiAgICBpZiAoc29ydFByZWRpY2F0ZS5sZW5ndGggPT09IDApIHsgc29ydFByZWRpY2F0ZSA9IFsnKyddOyB9XG5cbiAgICB2YXIgcHJlZGljYXRlcyA9IHByb2Nlc3NQcmVkaWNhdGVzKHNvcnRQcmVkaWNhdGUpO1xuXG4gICAgdmFyIGRlc2NlbmRpbmcgPSByZXZlcnNlT3JkZXIgPyAtMSA6IDE7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGBjb21wYXJlKClgIGZ1bmN0aW9uLiBVc2UgYSBkZWZhdWx0IGNvbXBhcmF0b3IgaWYgbm9uZSBpcyBzcGVjaWZpZWQuXG4gICAgdmFyIGNvbXBhcmUgPSBpc0Z1bmN0aW9uKGNvbXBhcmVGbikgPyBjb21wYXJlRm4gOiBkZWZhdWx0Q29tcGFyZTtcblxuICAgIC8vIFRoZSBuZXh0IHRocmVlIGxpbmVzIGFyZSBhIHZlcnNpb24gb2YgYSBTd2FydHppYW4gVHJhbnNmb3JtIGlkaW9tIGZyb20gUGVybFxuICAgIC8vIChzb21ldGltZXMgY2FsbGVkIHRoZSBEZWNvcmF0ZS1Tb3J0LVVuZGVjb3JhdGUgaWRpb20pXG4gICAgLy8gU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NjaHdhcnR6aWFuX3RyYW5zZm9ybVxuICAgIHZhciBjb21wYXJlVmFsdWVzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGFycmF5LCBnZXRDb21wYXJpc29uT2JqZWN0KTtcbiAgICBjb21wYXJlVmFsdWVzLnNvcnQoZG9Db21wYXJpc29uKTtcbiAgICBhcnJheSA9IGNvbXBhcmVWYWx1ZXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udmFsdWU7IH0pO1xuXG4gICAgcmV0dXJuIGFycmF5O1xuXG4gICAgZnVuY3Rpb24gZ2V0Q29tcGFyaXNvbk9iamVjdCh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIC8vIE5PVEU6IFdlIGFyZSBhZGRpbmcgYW4gZXh0cmEgYHRpZUJyZWFrZXJgIHZhbHVlIGJhc2VkIG9uIHRoZSBlbGVtZW50J3MgaW5kZXguXG4gICAgICAvLyBUaGlzIHdpbGwgYmUgdXNlZCB0byBrZWVwIHRoZSBzb3J0IHN0YWJsZSB3aGVuIG5vbmUgb2YgdGhlIGlucHV0IHByZWRpY2F0ZXMgY2FuXG4gICAgICAvLyBkaXN0aW5ndWlzaCBiZXR3ZWVuIHR3byBlbGVtZW50cy5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdGllQnJlYWtlcjoge3ZhbHVlOiBpbmRleCwgdHlwZTogJ251bWJlcicsIGluZGV4OiBpbmRleH0sXG4gICAgICAgIHByZWRpY2F0ZVZhbHVlczogcHJlZGljYXRlcy5tYXAoZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFByZWRpY2F0ZVZhbHVlKHByZWRpY2F0ZS5nZXQodmFsdWUpLCBpbmRleCk7XG4gICAgICAgIH0pXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRvQ29tcGFyaXNvbih2MSwgdjIpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHByZWRpY2F0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gY29tcGFyZSh2MS5wcmVkaWNhdGVWYWx1ZXNbaV0sIHYyLnByZWRpY2F0ZVZhbHVlc1tpXSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0ICogcHJlZGljYXRlc1tpXS5kZXNjZW5kaW5nICogZGVzY2VuZGluZztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gKGNvbXBhcmUodjEudGllQnJlYWtlciwgdjIudGllQnJlYWtlcikgfHwgZGVmYXVsdENvbXBhcmUodjEudGllQnJlYWtlciwgdjIudGllQnJlYWtlcikpICogZGVzY2VuZGluZztcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gcHJvY2Vzc1ByZWRpY2F0ZXMoc29ydFByZWRpY2F0ZXMpIHtcbiAgICByZXR1cm4gc29ydFByZWRpY2F0ZXMubWFwKGZ1bmN0aW9uKHByZWRpY2F0ZSkge1xuICAgICAgdmFyIGRlc2NlbmRpbmcgPSAxLCBnZXQgPSBpZGVudGl0eTtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ocHJlZGljYXRlKSkge1xuICAgICAgICBnZXQgPSBwcmVkaWNhdGU7XG4gICAgICB9IGVsc2UgaWYgKGlzU3RyaW5nKHByZWRpY2F0ZSkpIHtcbiAgICAgICAgaWYgKChwcmVkaWNhdGUuY2hhckF0KDApID09PSAnKycgfHwgcHJlZGljYXRlLmNoYXJBdCgwKSA9PT0gJy0nKSkge1xuICAgICAgICAgIGRlc2NlbmRpbmcgPSBwcmVkaWNhdGUuY2hhckF0KDApID09PSAnLScgPyAtMSA6IDE7XG4gICAgICAgICAgcHJlZGljYXRlID0gcHJlZGljYXRlLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZGljYXRlICE9PSAnJykge1xuICAgICAgICAgIGdldCA9ICRwYXJzZShwcmVkaWNhdGUpO1xuICAgICAgICAgIGlmIChnZXQuY29uc3RhbnQpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBnZXQoKTtcbiAgICAgICAgICAgIGdldCA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZVtrZXldOyB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHtnZXQ6IGdldCwgZGVzY2VuZGluZzogZGVzY2VuZGluZ307XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1ByaW1pdGl2ZSh2YWx1ZSkge1xuICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICBjYXNlICdudW1iZXInOiAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlICdib29sZWFuJzogLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb2JqZWN0VmFsdWUodmFsdWUpIHtcbiAgICAvLyBJZiBgdmFsdWVPZmAgaXMgYSB2YWxpZCBmdW5jdGlvbiB1c2UgdGhhdFxuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnZhbHVlT2YoKTtcbiAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgLy8gSWYgYHRvU3RyaW5nYCBpcyBhIHZhbGlkIGZ1bmN0aW9uIGFuZCBub3QgdGhlIG9uZSBmcm9tIGBPYmplY3QucHJvdG90eXBlYCB1c2UgdGhhdFxuICAgIGlmIChoYXNDdXN0b21Ub1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIGlmIChpc1ByaW1pdGl2ZSh2YWx1ZSkpIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQcmVkaWNhdGVWYWx1ZSh2YWx1ZSwgaW5kZXgpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHR5cGUgPSAnc3RyaW5nJztcbiAgICAgIHZhbHVlID0gJ251bGwnO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhbHVlID0gb2JqZWN0VmFsdWUodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4ge3ZhbHVlOiB2YWx1ZSwgdHlwZTogdHlwZSwgaW5kZXg6IGluZGV4fTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlZmF1bHRDb21wYXJlKHYxLCB2Mikge1xuICAgIHZhciByZXN1bHQgPSAwO1xuICAgIHZhciB0eXBlMSA9IHYxLnR5cGU7XG4gICAgdmFyIHR5cGUyID0gdjIudHlwZTtcblxuICAgIGlmICh0eXBlMSA9PT0gdHlwZTIpIHtcbiAgICAgIHZhciB2YWx1ZTEgPSB2MS52YWx1ZTtcbiAgICAgIHZhciB2YWx1ZTIgPSB2Mi52YWx1ZTtcblxuICAgICAgaWYgKHR5cGUxID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBDb21wYXJlIHN0cmluZ3MgY2FzZS1pbnNlbnNpdGl2ZWx5XG4gICAgICAgIHZhbHVlMSA9IHZhbHVlMS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB2YWx1ZTIgPSB2YWx1ZTIudG9Mb3dlckNhc2UoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZTEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIEZvciBiYXNpYyBvYmplY3RzLCB1c2UgdGhlIHBvc2l0aW9uIG9mIHRoZSBvYmplY3RcbiAgICAgICAgLy8gaW4gdGhlIGNvbGxlY3Rpb24gaW5zdGVhZCBvZiB0aGUgdmFsdWVcbiAgICAgICAgaWYgKGlzT2JqZWN0KHZhbHVlMSkpIHZhbHVlMSA9IHYxLmluZGV4O1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUyKSkgdmFsdWUyID0gdjIuaW5kZXg7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWx1ZTEgIT09IHZhbHVlMikge1xuICAgICAgICByZXN1bHQgPSB2YWx1ZTEgPCB2YWx1ZTIgPyAtMSA6IDE7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IHR5cGUxIDwgdHlwZTIgPyAtMSA6IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG5mdW5jdGlvbiBuZ0RpcmVjdGl2ZShkaXJlY3RpdmUpIHtcbiAgaWYgKGlzRnVuY3Rpb24oZGlyZWN0aXZlKSkge1xuICAgIGRpcmVjdGl2ZSA9IHtcbiAgICAgIGxpbms6IGRpcmVjdGl2ZVxuICAgIH07XG4gIH1cbiAgZGlyZWN0aXZlLnJlc3RyaWN0ID0gZGlyZWN0aXZlLnJlc3RyaWN0IHx8ICdBQyc7XG4gIHJldHVybiB2YWx1ZUZuKGRpcmVjdGl2ZSk7XG59XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgYVxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIE1vZGlmaWVzIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBodG1sIGEgdGFnIHNvIHRoYXQgdGhlIGRlZmF1bHQgYWN0aW9uIGlzIHByZXZlbnRlZCB3aGVuXG4gKiB0aGUgaHJlZiBhdHRyaWJ1dGUgaXMgZW1wdHkuXG4gKlxuICogRm9yIGR5bmFtaWNhbGx5IGNyZWF0aW5nIGBocmVmYCBhdHRyaWJ1dGVzIGZvciBhIHRhZ3MsIHNlZSB0aGUge0BsaW5rIG5nLm5nSHJlZiBgbmdIcmVmYH0gZGlyZWN0aXZlLlxuICovXG52YXIgaHRtbEFuY2hvckRpcmVjdGl2ZSA9IHZhbHVlRm4oe1xuICByZXN0cmljdDogJ0UnLFxuICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XG4gICAgaWYgKCFhdHRyLmhyZWYgJiYgIWF0dHIueGxpbmtIcmVmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgLy8gSWYgdGhlIGxpbmtlZCBlbGVtZW50IGlzIG5vdCBhbiBhbmNob3IgdGFnIGFueW1vcmUsIGRvIG5vdGhpbmdcbiAgICAgICAgaWYgKGVsZW1lbnRbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2EnKSByZXR1cm47XG5cbiAgICAgICAgLy8gU1ZHQUVsZW1lbnQgZG9lcyBub3QgdXNlIHRoZSBocmVmIGF0dHJpYnV0ZSwgYnV0IHJhdGhlciB0aGUgJ3hsaW5rSHJlZicgYXR0cmlidXRlLlxuICAgICAgICB2YXIgaHJlZiA9IHRvU3RyaW5nLmNhbGwoZWxlbWVudC5wcm9wKCdocmVmJykpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nID9cbiAgICAgICAgICAgICAgICAgICAneGxpbms6aHJlZicgOiAnaHJlZic7XG4gICAgICAgIGVsZW1lbnQub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAvLyBpZiB3ZSBoYXZlIG5vIGhyZWYgdXJsLCB0aGVuIGRvbid0IG5hdmlnYXRlIGFueXdoZXJlLlxuICAgICAgICAgIGlmICghZWxlbWVudC5hdHRyKGhyZWYpKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdIcmVmXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDk5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2luZyBBbmd1bGFyIG1hcmt1cCBsaWtlIGB7e2hhc2h9fWAgaW4gYW4gaHJlZiBhdHRyaWJ1dGUgd2lsbFxuICogbWFrZSB0aGUgbGluayBnbyB0byB0aGUgd3JvbmcgVVJMIGlmIHRoZSB1c2VyIGNsaWNrcyBpdCBiZWZvcmVcbiAqIEFuZ3VsYXIgaGFzIGEgY2hhbmNlIHRvIHJlcGxhY2UgdGhlIGB7e2hhc2h9fWAgbWFya3VwIHdpdGggaXRzXG4gKiB2YWx1ZS4gVW50aWwgQW5ndWxhciByZXBsYWNlcyB0aGUgbWFya3VwIHRoZSBsaW5rIHdpbGwgYmUgYnJva2VuXG4gKiBhbmQgd2lsbCBtb3N0IGxpa2VseSByZXR1cm4gYSA0MDQgZXJyb3IuIFRoZSBgbmdIcmVmYCBkaXJlY3RpdmVcbiAqIHNvbHZlcyB0aGlzIHByb2JsZW0uXG4gKlxuICogVGhlIHdyb25nIHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxhIGhyZWY9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIj5saW5rMTwvYT5cbiAqIGBgYFxuICpcbiAqIFRoZSBjb3JyZWN0IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxhIG5nLWhyZWY9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIj5saW5rMTwvYT5cbiAqIGBgYFxuICpcbiAqIEBlbGVtZW50IEFcbiAqIEBwYXJhbSB7dGVtcGxhdGV9IG5nSHJlZiBhbnkgc3RyaW5nIHdoaWNoIGNhbiBjb250YWluIGB7e319YCBtYXJrdXAuXG4gKlxuICogQGV4YW1wbGVcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyB2YXJpb3VzIGNvbWJpbmF0aW9ucyBvZiBgaHJlZmAsIGBuZy1ocmVmYCBhbmQgYG5nLWNsaWNrYCBhdHRyaWJ1dGVzXG4gKiBpbiBsaW5rcyBhbmQgdGhlaXIgZGlmZmVyZW50IGJlaGF2aW9yczpcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmctaHJlZlwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwidmFsdWVcIiAvPjxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstMVwiIGhyZWYgbmctY2xpY2s9XCJ2YWx1ZSA9IDFcIj5saW5rIDE8L2E+IChsaW5rLCBkb24ndCByZWxvYWQpPGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay0yXCIgaHJlZj1cIlwiIG5nLWNsaWNrPVwidmFsdWUgPSAyXCI+bGluayAyPC9hPiAobGluaywgZG9uJ3QgcmVsb2FkKTxiciAvPlxuICAgICAgICA8YSBpZD1cImxpbmstM1wiIG5nLWhyZWY9XCIve3snMTIzJ319XCI+bGluayAzPC9hPiAobGluaywgcmVsb2FkISk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTRcIiBocmVmPVwiXCIgbmFtZT1cInh4XCIgbmctY2xpY2s9XCJ2YWx1ZSA9IDRcIj5hbmNob3I8L2E+IChsaW5rLCBkb24ndCByZWxvYWQpPGJyIC8+XG4gICAgICAgIDxhIGlkPVwibGluay01XCIgbmFtZT1cInh4eFwiIG5nLWNsaWNrPVwidmFsdWUgPSA1XCI+YW5jaG9yPC9hPiAobm8gbGluayk8YnIgLz5cbiAgICAgICAgPGEgaWQ9XCJsaW5rLTZcIiBuZy1ocmVmPVwie3t2YWx1ZX19XCI+bGluazwvYT4gKGxpbmssIGNoYW5nZSBsb2NhdGlvbilcbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gaHJlZiB3aXRob3V0IHZhbHVlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay0xJykpLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnMScpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTEnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBocmVmIGVtcHR5IHN0cmluZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstMicpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzInKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay0yJykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKCcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGFuZCBjaGFuZ2UgdXJsIHdoZW4gbmctaHJlZiBzcGVjaWZpZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay0zJykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b01hdGNoKC9cXC8xMjMkLyk7XG5cbiAgICAgICAgICBlbGVtZW50KGJ5LmlkKCdsaW5rLTMnKSkuY2xpY2soKTtcblxuICAgICAgICAgIC8vIEF0IHRoaXMgcG9pbnQsIHdlIG5hdmlnYXRlIGF3YXkgZnJvbSBhbiBBbmd1bGFyIHBhZ2UsIHNvIHdlIG5lZWRcbiAgICAgICAgICAvLyB0byB1c2UgYnJvd3Nlci5kcml2ZXIgdG8gZ2V0IHRoZSBiYXNlIHdlYmRyaXZlci5cblxuICAgICAgICAgIGJyb3dzZXIud2FpdChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBicm93c2VyLmRyaXZlci5nZXRDdXJyZW50VXJsKCkudGhlbihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHVybC5tYXRjaCgvXFwvMTIzJC8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC8xMjMnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBleGVjdXRlIG5nLWNsaWNrIGJ1dCBub3QgcmVsb2FkIHdoZW4gaHJlZiBlbXB0eSBzdHJpbmcgYW5kIG5hbWUgc3BlY2lmaWVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay00JykpLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnNCcpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5rLTQnKSkuZ2V0QXR0cmlidXRlKCdocmVmJykpLnRvQmUoJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbmctY2xpY2sgYnV0IG5vdCByZWxvYWQgd2hlbiBubyBocmVmIGJ1dCBuYW1lIHNwZWNpZmllZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2xpbmstNScpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCd2YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvRXF1YWwoJzUnKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay01JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b0JlKG51bGwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG9ubHkgY2hhbmdlIHVybCB3aGVuIG9ubHkgbmctaHJlZicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3ZhbHVlJykpLmNsZWFyKCk7XG4gICAgICAgICAgZWxlbWVudChieS5tb2RlbCgndmFsdWUnKSkuc2VuZEtleXMoJzYnKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGluay02JykpLmdldEF0dHJpYnV0ZSgnaHJlZicpKS50b01hdGNoKC9cXC82JC8pO1xuXG4gICAgICAgICAgZWxlbWVudChieS5pZCgnbGluay02JykpLmNsaWNrKCk7XG5cbiAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB3ZSBuYXZpZ2F0ZSBhd2F5IGZyb20gYW4gQW5ndWxhciBwYWdlLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gdXNlIGJyb3dzZXIuZHJpdmVyIHRvIGdldCB0aGUgYmFzZSB3ZWJkcml2ZXIuXG4gICAgICAgICAgYnJvd3Nlci53YWl0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXIuZHJpdmVyLmdldEN1cnJlbnRVcmwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICByZXR1cm4gdXJsLm1hdGNoKC9cXC82JC8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgNTAwMCwgJ3BhZ2Ugc2hvdWxkIG5hdmlnYXRlIHRvIC82Jyk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nU3JjXG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDk5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBVc2luZyBBbmd1bGFyIG1hcmt1cCBsaWtlIGB7e2hhc2h9fWAgaW4gYSBgc3JjYCBhdHRyaWJ1dGUgZG9lc24ndFxuICogd29yayByaWdodDogVGhlIGJyb3dzZXIgd2lsbCBmZXRjaCBmcm9tIHRoZSBVUkwgd2l0aCB0aGUgbGl0ZXJhbFxuICogdGV4dCBge3toYXNofX1gIHVudGlsIEFuZ3VsYXIgcmVwbGFjZXMgdGhlIGV4cHJlc3Npb24gaW5zaWRlXG4gKiBge3toYXNofX1gLiBUaGUgYG5nU3JjYCBkaXJlY3RpdmUgc29sdmVzIHRoaXMgcHJvYmxlbS5cbiAqXG4gKiBUaGUgYnVnZ3kgd2F5IHRvIHdyaXRlIGl0OlxuICogYGBgaHRtbFxuICogPGltZyBzcmM9XCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIve3toYXNofX1cIiBhbHQ9XCJEZXNjcmlwdGlvblwiLz5cbiAqIGBgYFxuICpcbiAqIFRoZSBjb3JyZWN0IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgbmctc3JjPVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19XCIgYWx0PVwiRGVzY3JpcHRpb25cIiAvPlxuICogYGBgXG4gKlxuICogQGVsZW1lbnQgSU1HXG4gKiBAcGFyYW0ge3RlbXBsYXRlfSBuZ1NyYyBhbnkgc3RyaW5nIHdoaWNoIGNhbiBjb250YWluIGB7e319YCBtYXJrdXAuXG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1NyY3NldFxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSA5OVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVXNpbmcgQW5ndWxhciBtYXJrdXAgbGlrZSBge3toYXNofX1gIGluIGEgYHNyY3NldGAgYXR0cmlidXRlIGRvZXNuJ3RcbiAqIHdvcmsgcmlnaHQ6IFRoZSBicm93c2VyIHdpbGwgZmV0Y2ggZnJvbSB0aGUgVVJMIHdpdGggdGhlIGxpdGVyYWxcbiAqIHRleHQgYHt7aGFzaH19YCB1bnRpbCBBbmd1bGFyIHJlcGxhY2VzIHRoZSBleHByZXNzaW9uIGluc2lkZVxuICogYHt7aGFzaH19YC4gVGhlIGBuZ1NyY3NldGAgZGlyZWN0aXZlIHNvbHZlcyB0aGlzIHByb2JsZW0uXG4gKlxuICogVGhlIGJ1Z2d5IHdheSB0byB3cml0ZSBpdDpcbiAqIGBgYGh0bWxcbiAqIDxpbWcgc3Jjc2V0PVwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL3t7aGFzaH19IDJ4XCIgYWx0PVwiRGVzY3JpcHRpb25cIi8+XG4gKiBgYGBcbiAqXG4gKiBUaGUgY29ycmVjdCB3YXkgdG8gd3JpdGUgaXQ6XG4gKiBgYGBodG1sXG4gKiA8aW1nIG5nLXNyY3NldD1cImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci97e2hhc2h9fSAyeFwiIGFsdD1cIkRlc2NyaXB0aW9uXCIgLz5cbiAqIGBgYFxuICpcbiAqIEBlbGVtZW50IElNR1xuICogQHBhcmFtIHt0ZW1wbGF0ZX0gbmdTcmNzZXQgYW55IHN0cmluZyB3aGljaCBjYW4gY29udGFpbiBge3t9fWAgbWFya3VwLlxuICovXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdEaXNhYmxlZFxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBUaGlzIGRpcmVjdGl2ZSBzZXRzIHRoZSBgZGlzYWJsZWRgIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCAodHlwaWNhbGx5IGEgZm9ybSBjb250cm9sLFxuICogZS5nLiBgaW5wdXRgLCBgYnV0dG9uYCwgYHNlbGVjdGAgZXRjLikgaWYgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpbnNpZGUgYG5nRGlzYWJsZWRgIGV2YWx1YXRlcyB0byB0cnV0aHkuXG4gKlxuICogQSBzcGVjaWFsIGRpcmVjdGl2ZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoZSBgZGlzYWJsZWRgXG4gKiBhdHRyaWJ1dGUuIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbiBndWlkZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1kaXNhYmxlZFwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGxhYmVsPkNsaWNrIG1lIHRvIHRvZ2dsZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiPjwvbGFiZWw+PGJyLz5cbiAgICAgICAgPGJ1dHRvbiBuZy1tb2RlbD1cImJ1dHRvblwiIG5nLWRpc2FibGVkPVwiY2hlY2tlZFwiPkJ1dHRvbjwvYnV0dG9uPlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIHRvZ2dsZSBidXR0b24nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJ2J1dHRvbicpKS5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpLnRvQmVGYWxzeSgpO1xuICAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJ2J1dHRvbicpKS5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICpcbiAqIEBlbGVtZW50IElOUFVUXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nRGlzYWJsZWQgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcbiAqICAgICB0aGVuIHRoZSBgZGlzYWJsZWRgIGF0dHJpYnV0ZSB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NoZWNrZWRcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTZXRzIHRoZSBgY2hlY2tlZGAgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50LCBpZiB0aGUgZXhwcmVzc2lvbiBpbnNpZGUgYG5nQ2hlY2tlZGAgaXMgdHJ1dGh5LlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGRpcmVjdGl2ZSBzaG91bGQgbm90IGJlIHVzZWQgdG9nZXRoZXIgd2l0aCB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LFxuICogYXMgdGhpcyBjYW4gbGVhZCB0byB1bmV4cGVjdGVkIGJlaGF2aW9yLlxuICpcbiAqIEEgc3BlY2lhbCBkaXJlY3RpdmUgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgY2Fubm90IHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGUgYGNoZWNrZWRgXG4gKiBhdHRyaWJ1dGUuIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbiBndWlkZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1jaGVja2VkXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8bGFiZWw+Q2hlY2sgbWUgdG8gY2hlY2sgYm90aDogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwibGVhZGVyXCI+PC9sYWJlbD48YnIvPlxuICAgICAgICA8aW5wdXQgaWQ9XCJjaGVja0ZvbGxvd2VyXCIgdHlwZT1cImNoZWNrYm94XCIgbmctY2hlY2tlZD1cImxlYWRlclwiIGFyaWEtbGFiZWw9XCJGb2xsb3dlciBpbnB1dFwiPlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIGNoZWNrIGJvdGggY2hlY2tCb3hlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdjaGVja0ZvbGxvd2VyJykpLmdldEF0dHJpYnV0ZSgnY2hlY2tlZCcpKS50b0JlRmFsc3koKTtcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdsZWFkZXInKSkuY2xpY2soKTtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnY2hlY2tGb2xsb3dlcicpKS5nZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkudG9CZVRydXRoeSgpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgSU5QVVRcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDaGVja2VkIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXG4gKiAgICAgdGhlbiB0aGUgYGNoZWNrZWRgIGF0dHJpYnV0ZSB3aWxsIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1JlYWRvbmx5XG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFNldHMgdGhlIGByZWFkb25seWAgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50LCBpZiB0aGUgZXhwcmVzc2lvbiBpbnNpZGUgYG5nUmVhZG9ubHlgIGlzIHRydXRoeS5cbiAqIE5vdGUgdGhhdCBgcmVhZG9ubHlgIGFwcGxpZXMgb25seSB0byBgaW5wdXRgIGVsZW1lbnRzIHdpdGggc3BlY2lmaWMgdHlwZXMuIFtTZWUgdGhlIGlucHV0IGRvY3Mgb25cbiAqIE1ETl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2lucHV0I2F0dHItcmVhZG9ubHkpIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIEEgc3BlY2lhbCBkaXJlY3RpdmUgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgY2Fubm90IHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGUgYHJlYWRvbmx5YFxuICogYXR0cmlidXRlLiBTZWUgdGhlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb24gZ3VpZGV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwibmctcmVhZG9ubHlcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxsYWJlbD5DaGVjayBtZSB0byBtYWtlIHRleHQgcmVhZG9ubHk6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIj48L2xhYmVsPjxici8+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLXJlYWRvbmx5PVwiY2hlY2tlZFwiIHZhbHVlPVwiSSdtIEFuZ3VsYXJcIiBhcmlhLWxhYmVsPVwiUmVhZG9ubHkgZmllbGRcIiAvPlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICBpdCgnc2hvdWxkIHRvZ2dsZSByZWFkb25seSBhdHRyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCdbdHlwZT1cInRleHRcIl0nKSkuZ2V0QXR0cmlidXRlKCdyZWFkb25seScpKS50b0JlRmFsc3koKTtcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCdbdHlwZT1cInRleHRcIl0nKSkuZ2V0QXR0cmlidXRlKCdyZWFkb25seScpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIH0pO1xuICAgICAgPC9maWxlPlxuICAgIDwvZXhhbXBsZT5cbiAqXG4gKiBAZWxlbWVudCBJTlBVVFxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1JlYWRvbmx5IElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcInJlYWRvbmx5XCIgd2lsbCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTZWxlY3RlZFxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBTZXRzIHRoZSBgc2VsZWN0ZWRgIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCwgaWYgdGhlIGV4cHJlc3Npb24gaW5zaWRlIGBuZ1NlbGVjdGVkYCBpcyB0cnV0aHkuXG4gKlxuICogQSBzcGVjaWFsIGRpcmVjdGl2ZSBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoZSBgc2VsZWN0ZWRgXG4gKiBhdHRyaWJ1dGUuIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbiBndWlkZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogICAqKk5vdGU6KiogYG5nU2VsZWN0ZWRgIGRvZXMgbm90IGludGVyYWN0IHdpdGggdGhlIGBzZWxlY3RgIGFuZCBgbmdNb2RlbGAgZGlyZWN0aXZlcywgaXQgb25seVxuICogICBzZXRzIHRoZSBgc2VsZWN0ZWRgIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudC4gSWYgeW91IGFyZSB1c2luZyBgbmdNb2RlbGAgb24gdGhlIHNlbGVjdCwgeW91XG4gKiAgIHNob3VsZCBub3QgdXNlIGBuZ1NlbGVjdGVkYCBvbiB0aGUgb3B0aW9ucywgYXMgYG5nTW9kZWxgIHdpbGwgc2V0IHRoZSBzZWxlY3QgdmFsdWUgYW5kXG4gKiAgIHNlbGVjdGVkIG9wdGlvbnMuXG4gKiA8L2Rpdj5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZy1zZWxlY3RlZFwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgPGxhYmVsPkNoZWNrIG1lIHRvIHNlbGVjdDogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRcIj48L2xhYmVsPjxici8+XG4gICAgICAgIDxzZWxlY3QgYXJpYS1sYWJlbD1cIm5nU2VsZWN0ZWQgZGVtb1wiPlxuICAgICAgICAgIDxvcHRpb24+SGVsbG8hPC9vcHRpb24+XG4gICAgICAgICAgPG9wdGlvbiBpZD1cImdyZWV0XCIgbmctc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiPkdyZWV0aW5ncyE8L29wdGlvbj5cbiAgICAgICAgPC9zZWxlY3Q+XG4gICAgICA8L2ZpbGU+XG4gICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIGl0KCdzaG91bGQgc2VsZWN0IEdyZWV0aW5ncyEnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZ3JlZXQnKSkuZ2V0QXR0cmlidXRlKCdzZWxlY3RlZCcpKS50b0JlRmFsc3koKTtcbiAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzZWxlY3RlZCcpKS5jbGljaygpO1xuICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdncmVldCcpKS5nZXRBdHRyaWJ1dGUoJ3NlbGVjdGVkJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICpcbiAqIEBlbGVtZW50IE9QVElPTlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1NlbGVjdGVkIElmIHRoZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBleHByZXNzaW9ufSBpcyB0cnV0aHksXG4gKiAgICAgdGhlbiBzcGVjaWFsIGF0dHJpYnV0ZSBcInNlbGVjdGVkXCIgd2lsbCBiZSBzZXQgb24gdGhlIGVsZW1lbnRcbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nT3BlblxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBTZXRzIHRoZSBgb3BlbmAgYXR0cmlidXRlIG9uIHRoZSBlbGVtZW50LCBpZiB0aGUgZXhwcmVzc2lvbiBpbnNpZGUgYG5nT3BlbmAgaXMgdHJ1dGh5LlxuICpcbiAqIEEgc3BlY2lhbCBkaXJlY3RpdmUgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgY2Fubm90IHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGUgYG9wZW5gXG4gKiBhdHRyaWJ1dGUuIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbiBndWlkZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiAjIyBBIG5vdGUgYWJvdXQgYnJvd3NlciBjb21wYXRpYmlsaXR5XG4gKlxuICogSW50ZXJuZXQgRXhwbG9yZXIgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQgdGhlIGBkZXRhaWxzYCBlbGVtZW50LCBpdCBpc1xuICogcmVjb21tZW5kZWQgdG8gdXNlIHtAbGluayBuZy5uZ1Nob3d9IGFuZCB7QGxpbmsgbmcubmdIaWRlfSBpbnN0ZWFkLlxuICpcbiAqIEBleGFtcGxlXG4gICAgIDxleGFtcGxlIG5hbWU9XCJuZy1vcGVuXCI+XG4gICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxsYWJlbD5Ub2dnbGUgZGV0YWlsczogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwib3BlblwiPjwvbGFiZWw+PGJyLz5cbiAgICAgICAgIDxkZXRhaWxzIGlkPVwiZGV0YWlsc1wiIG5nLW9wZW49XCJvcGVuXCI+XG4gICAgICAgICAgICA8c3VtbWFyeT5MaXN0PC9zdW1tYXJ5PlxuICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICA8bGk+QXBwbGU8L2xpPlxuICAgICAgICAgICAgICA8bGk+T3JhbmdlPC9saT5cbiAgICAgICAgICAgICAgPGxpPkR1cmlhbjwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgPC9kZXRhaWxzPlxuICAgICAgIDwvZmlsZT5cbiAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICBpdCgnc2hvdWxkIHRvZ2dsZSBvcGVuJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdkZXRhaWxzJykpLmdldEF0dHJpYnV0ZSgnb3BlbicpKS50b0JlRmFsc3koKTtcbiAgICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnb3BlbicpKS5jbGljaygpO1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnZGV0YWlscycpKS5nZXRBdHRyaWJ1dGUoJ29wZW4nKSkudG9CZVRydXRoeSgpO1xuICAgICAgICAgfSk7XG4gICAgICAgPC9maWxlPlxuICAgICA8L2V4YW1wbGU+XG4gKlxuICogQGVsZW1lbnQgREVUQUlMU1xuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ09wZW4gSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeSxcbiAqICAgICB0aGVuIHNwZWNpYWwgYXR0cmlidXRlIFwib3BlblwiIHdpbGwgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKi9cblxudmFyIG5nQXR0cmlidXRlQWxpYXNEaXJlY3RpdmVzID0ge307XG5cbi8vIGJvb2xlYW4gYXR0cnMgYXJlIGV2YWx1YXRlZFxuZm9yRWFjaChCT09MRUFOX0FUVFIsIGZ1bmN0aW9uKHByb3BOYW1lLCBhdHRyTmFtZSkge1xuICAvLyBiaW5kaW5nIHRvIG11bHRpcGxlIGlzIG5vdCBzdXBwb3J0ZWRcbiAgaWYgKHByb3BOYW1lID09PSAnbXVsdGlwbGUnKSByZXR1cm47XG5cbiAgZnVuY3Rpb24gZGVmYXVsdExpbmtGbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgIHNjb3BlLiR3YXRjaChhdHRyW25vcm1hbGl6ZWRdLCBmdW5jdGlvbiBuZ0Jvb2xlYW5BdHRyV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgIGF0dHIuJHNldChhdHRyTmFtZSwgISF2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgbm9ybWFsaXplZCA9IGRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJyArIGF0dHJOYW1lKTtcbiAgdmFyIGxpbmtGbiA9IGRlZmF1bHRMaW5rRm47XG5cbiAgaWYgKHByb3BOYW1lID09PSAnY2hlY2tlZCcpIHtcbiAgICBsaW5rRm4gPSBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgLy8gZW5zdXJpbmcgbmdDaGVja2VkIGRvZXNuJ3QgaW50ZXJmZXJlIHdpdGggbmdNb2RlbCB3aGVuIGJvdGggYXJlIHNldCBvbiB0aGUgc2FtZSBpbnB1dFxuICAgICAgaWYgKGF0dHIubmdNb2RlbCAhPT0gYXR0cltub3JtYWxpemVkXSkge1xuICAgICAgICBkZWZhdWx0TGlua0ZuKHNjb3BlLCBlbGVtZW50LCBhdHRyKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXNbbm9ybWFsaXplZF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHByaW9yaXR5OiAxMDAsXG4gICAgICBsaW5rOiBsaW5rRm5cbiAgICB9O1xuICB9O1xufSk7XG5cbi8vIGFsaWFzZWQgaW5wdXQgYXR0cnMgYXJlIGV2YWx1YXRlZFxuZm9yRWFjaChBTElBU0VEX0FUVFIsIGZ1bmN0aW9uKGh0bWxBdHRyLCBuZ0F0dHIpIHtcbiAgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXNbbmdBdHRyXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcmlvcml0eTogMTAwLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgLy9zcGVjaWFsIGNhc2UgbmdQYXR0ZXJuIHdoZW4gYSBsaXRlcmFsIHJlZ3VsYXIgZXhwcmVzc2lvbiB2YWx1ZVxuICAgICAgICAvL2lzIHVzZWQgYXMgdGhlIGV4cHJlc3Npb24gKHRoaXMgd2F5IHdlIGRvbid0IGhhdmUgdG8gd2F0Y2ggYW55dGhpbmcpLlxuICAgICAgICBpZiAobmdBdHRyID09PSAnbmdQYXR0ZXJuJyAmJiBhdHRyLm5nUGF0dGVybi5jaGFyQXQoMCkgPT09ICcvJykge1xuICAgICAgICAgIHZhciBtYXRjaCA9IGF0dHIubmdQYXR0ZXJuLm1hdGNoKFJFR0VYX1NUUklOR19SRUdFWFApO1xuICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgYXR0ci4kc2V0KCduZ1BhdHRlcm4nLCBuZXcgUmVnRXhwKG1hdGNoWzFdLCBtYXRjaFsyXSkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLiR3YXRjaChhdHRyW25nQXR0cl0sIGZ1bmN0aW9uIG5nQXR0ckFsaWFzV2F0Y2hBY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBhdHRyLiRzZXQobmdBdHRyLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59KTtcblxuLy8gbmctc3JjLCBuZy1zcmNzZXQsIG5nLWhyZWYgYXJlIGludGVycG9sYXRlZFxuZm9yRWFjaChbJ3NyYycsICdzcmNzZXQnLCAnaHJlZiddLCBmdW5jdGlvbihhdHRyTmFtZSkge1xuICB2YXIgbm9ybWFsaXplZCA9IGRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJyArIGF0dHJOYW1lKTtcbiAgbmdBdHRyaWJ1dGVBbGlhc0RpcmVjdGl2ZXNbbm9ybWFsaXplZF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJpb3JpdHk6IDk5LCAvLyBpdCBuZWVkcyB0byBydW4gYWZ0ZXIgdGhlIGF0dHJpYnV0ZXMgYXJlIGludGVycG9sYXRlZFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gYXR0ck5hbWUsXG4gICAgICAgICAgICBuYW1lID0gYXR0ck5hbWU7XG5cbiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAnaHJlZicgJiZcbiAgICAgICAgICAgIHRvU3RyaW5nLmNhbGwoZWxlbWVudC5wcm9wKCdocmVmJykpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nKSB7XG4gICAgICAgICAgbmFtZSA9ICd4bGlua0hyZWYnO1xuICAgICAgICAgIGF0dHIuJGF0dHJbbmFtZV0gPSAneGxpbms6aHJlZic7XG4gICAgICAgICAgcHJvcE5hbWUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgYXR0ci4kb2JzZXJ2ZShub3JtYWxpemVkLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ2hyZWYnKSB7XG4gICAgICAgICAgICAgIGF0dHIuJHNldChuYW1lLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhdHRyLiRzZXQobmFtZSwgdmFsdWUpO1xuXG4gICAgICAgICAgLy8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG4gICAgICAgICAgLy8gT24gSUUsIGlmIFwibmc6c3JjXCIgZGlyZWN0aXZlIGRlY2xhcmF0aW9uIGlzIHVzZWQgYW5kIFwic3JjXCIgYXR0cmlidXRlIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAvLyB0aGVuIGNhbGxpbmcgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsICdmb28nKSBkb2Vzbid0IGRvIGFueXRoaW5nLCBzbyB3ZSBuZWVkXG4gICAgICAgICAgLy8gdG8gc2V0IHRoZSBwcm9wZXJ0eSBhcyB3ZWxsIHRvIGFjaGlldmUgdGhlIGRlc2lyZWQgZWZmZWN0LlxuICAgICAgICAgIC8vIFdlIHVzZSBhdHRyW2F0dHJOYW1lXSB2YWx1ZSBzaW5jZSAkc2V0IGNhbiBzYW5pdGl6ZSB0aGUgdXJsLlxuICAgICAgICAgIGlmIChtc2llICYmIHByb3BOYW1lKSBlbGVtZW50LnByb3AocHJvcE5hbWUsIGF0dHJbbmFtZV0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufSk7XG5cbi8qIGdsb2JhbCAtbnVsbEZvcm1DdHJsLCAtUEVORElOR19DTEFTUywgLVNVQk1JVFRFRF9DTEFTU1xuICovXG52YXIgbnVsbEZvcm1DdHJsID0ge1xuICAkYWRkQ29udHJvbDogbm9vcCxcbiAgJCRyZW5hbWVDb250cm9sOiBudWxsRm9ybVJlbmFtZUNvbnRyb2wsXG4gICRyZW1vdmVDb250cm9sOiBub29wLFxuICAkc2V0VmFsaWRpdHk6IG5vb3AsXG4gICRzZXREaXJ0eTogbm9vcCxcbiAgJHNldFByaXN0aW5lOiBub29wLFxuICAkc2V0U3VibWl0dGVkOiBub29wXG59LFxuUEVORElOR19DTEFTUyA9ICduZy1wZW5kaW5nJyxcblNVQk1JVFRFRF9DTEFTUyA9ICduZy1zdWJtaXR0ZWQnO1xuXG5mdW5jdGlvbiBudWxsRm9ybVJlbmFtZUNvbnRyb2woY29udHJvbCwgbmFtZSkge1xuICBjb250cm9sLiRuYW1lID0gbmFtZTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlclxuICpcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHByaXN0aW5lIFRydWUgaWYgdXNlciBoYXMgbm90IGludGVyYWN0ZWQgd2l0aCB0aGUgZm9ybSB5ZXQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRkaXJ0eSBUcnVlIGlmIHVzZXIgaGFzIGFscmVhZHkgaW50ZXJhY3RlZCB3aXRoIHRoZSBmb3JtLlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdmFsaWQgVHJ1ZSBpZiBhbGwgb2YgdGhlIGNvbnRhaW5pbmcgZm9ybXMgYW5kIGNvbnRyb2xzIGFyZSB2YWxpZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJGludmFsaWQgVHJ1ZSBpZiBhdCBsZWFzdCBvbmUgY29udGFpbmluZyBjb250cm9sIG9yIGZvcm0gaXMgaW52YWxpZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHN1Ym1pdHRlZCBUcnVlIGlmIHVzZXIgaGFzIHN1Ym1pdHRlZCB0aGUgZm9ybSBldmVuIGlmIGl0cyBpbnZhbGlkLlxuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkcGVuZGluZyBBbiBvYmplY3QgaGFzaCwgY29udGFpbmluZyByZWZlcmVuY2VzIHRvIGNvbnRyb2xzIG9yIGZvcm1zIHdpdGhcbiAqICBwZW5kaW5nIHZhbGlkYXRvcnMsIHdoZXJlOlxuICpcbiAqICAtIGtleXMgYXJlIHZhbGlkYXRpb25zIHRva2VucyAoZXJyb3IgbmFtZXMpLlxuICogIC0gdmFsdWVzIGFyZSBhcnJheXMgb2YgY29udHJvbHMgb3IgZm9ybXMgdGhhdCBoYXZlIGEgcGVuZGluZyB2YWxpZGF0b3IgZm9yIHRoZSBnaXZlbiBlcnJvciBuYW1lLlxuICpcbiAqIFNlZSB7QGxpbmsgZm9ybS5Gb3JtQ29udHJvbGxlciMkZXJyb3IgJGVycm9yfSBmb3IgYSBsaXN0IG9mIGJ1aWx0LWluIHZhbGlkYXRpb24gdG9rZW5zLlxuICpcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkZXJyb3IgQW4gb2JqZWN0IGhhc2gsIGNvbnRhaW5pbmcgcmVmZXJlbmNlcyB0byBjb250cm9scyBvciBmb3JtcyB3aXRoIGZhaWxpbmdcbiAqICB2YWxpZGF0b3JzLCB3aGVyZTpcbiAqXG4gKiAgLSBrZXlzIGFyZSB2YWxpZGF0aW9uIHRva2VucyAoZXJyb3IgbmFtZXMpLFxuICogIC0gdmFsdWVzIGFyZSBhcnJheXMgb2YgY29udHJvbHMgb3IgZm9ybXMgdGhhdCBoYXZlIGEgZmFpbGluZyB2YWxpZGF0b3IgZm9yIHRoZSBnaXZlbiBlcnJvciBuYW1lLlxuICpcbiAqICBCdWlsdC1pbiB2YWxpZGF0aW9uIHRva2VuczpcbiAqICAtIGBlbWFpbGBcbiAqICAtIGBtYXhgXG4gKiAgLSBgbWF4bGVuZ3RoYFxuICogIC0gYG1pbmBcbiAqICAtIGBtaW5sZW5ndGhgXG4gKiAgLSBgbnVtYmVyYFxuICogIC0gYHBhdHRlcm5gXG4gKiAgLSBgcmVxdWlyZWRgXG4gKiAgLSBgdXJsYFxuICogIC0gYGRhdGVgXG4gKiAgLSBgZGF0ZXRpbWVsb2NhbGBcbiAqICAtIGB0aW1lYFxuICogIC0gYHdlZWtgXG4gKiAgLSBgbW9udGhgXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgRm9ybUNvbnRyb2xsZXJgIGtlZXBzIHRyYWNrIG9mIGFsbCBpdHMgY29udHJvbHMgYW5kIG5lc3RlZCBmb3JtcyBhcyB3ZWxsIGFzIHRoZSBzdGF0ZSBvZiB0aGVtLFxuICogc3VjaCBhcyBiZWluZyB2YWxpZC9pbnZhbGlkIG9yIGRpcnR5L3ByaXN0aW5lLlxuICpcbiAqIEVhY2gge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGZvcm19IGRpcmVjdGl2ZSBjcmVhdGVzIGFuIGluc3RhbmNlXG4gKiBvZiBgRm9ybUNvbnRyb2xsZXJgLlxuICpcbiAqL1xuLy9hc2tzIGZvciAkc2NvcGUgdG8gZm9vbCB0aGUgQkMgY29udHJvbGxlciBtb2R1bGVcbkZvcm1Db250cm9sbGVyLiRpbmplY3QgPSBbJyRlbGVtZW50JywgJyRhdHRycycsICckc2NvcGUnLCAnJGFuaW1hdGUnLCAnJGludGVycG9sYXRlJ107XG5mdW5jdGlvbiBGb3JtQ29udHJvbGxlcigkZWxlbWVudCwgJGF0dHJzLCAkc2NvcGUsICRhbmltYXRlLCAkaW50ZXJwb2xhdGUpIHtcbiAgdGhpcy4kJGNvbnRyb2xzID0gW107XG5cbiAgLy8gaW5pdCBzdGF0ZVxuICB0aGlzLiRlcnJvciA9IHt9O1xuICB0aGlzLiQkc3VjY2VzcyA9IHt9O1xuICB0aGlzLiRwZW5kaW5nID0gdW5kZWZpbmVkO1xuICB0aGlzLiRuYW1lID0gJGludGVycG9sYXRlKCRhdHRycy5uYW1lIHx8ICRhdHRycy5uZ0Zvcm0gfHwgJycpKCRzY29wZSk7XG4gIHRoaXMuJGRpcnR5ID0gZmFsc2U7XG4gIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcbiAgdGhpcy4kdmFsaWQgPSB0cnVlO1xuICB0aGlzLiRpbnZhbGlkID0gZmFsc2U7XG4gIHRoaXMuJHN1Ym1pdHRlZCA9IGZhbHNlO1xuICB0aGlzLiQkcGFyZW50Rm9ybSA9IG51bGxGb3JtQ3RybDtcblxuICB0aGlzLiQkZWxlbWVudCA9ICRlbGVtZW50O1xuICB0aGlzLiQkYW5pbWF0ZSA9ICRhbmltYXRlO1xuXG4gIHNldHVwVmFsaWRpdHkodGhpcyk7XG59XG5cbkZvcm1Db250cm9sbGVyLnByb3RvdHlwZSA9IHtcbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJvbGxiYWNrIGFsbCBmb3JtIGNvbnRyb2xzIHBlbmRpbmcgdXBkYXRlcyB0byB0aGUgYCRtb2RlbFZhbHVlYC5cbiAgICpcbiAgICogVXBkYXRlcyBtYXkgYmUgcGVuZGluZyBieSBhIGRlYm91bmNlZCBldmVudCBvciBiZWNhdXNlIHRoZSBpbnB1dCBpcyB3YWl0aW5nIGZvciBhIHNvbWUgZnV0dXJlXG4gICAqIGV2ZW50IGRlZmluZWQgaW4gYG5nLW1vZGVsLW9wdGlvbnNgLiBUaGlzIG1ldGhvZCBpcyB0eXBpY2FsbHkgbmVlZGVkIGJ5IHRoZSByZXNldCBidXR0b24gb2ZcbiAgICogYSBmb3JtIHRoYXQgdXNlcyBgbmctbW9kZWwtb3B0aW9uc2AgdG8gcGVuZCB1cGRhdGVzLlxuICAgKi9cbiAgJHJvbGxiYWNrVmlld1ZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICBmb3JFYWNoKHRoaXMuJCRjb250cm9scywgZnVuY3Rpb24oY29udHJvbCkge1xuICAgICAgY29udHJvbC4kcm9sbGJhY2tWaWV3VmFsdWUoKTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRjb21taXRWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENvbW1pdCBhbGwgZm9ybSBjb250cm9scyBwZW5kaW5nIHVwZGF0ZXMgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gVGhpcyBtZXRob2QgaXMgcmFyZWx5IG5lZWRlZCBhcyBgTmdNb2RlbENvbnRyb2xsZXJgXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxuICAgKi9cbiAgJGNvbW1pdFZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgZm9yRWFjaCh0aGlzLiQkY29udHJvbHMsIGZ1bmN0aW9uKGNvbnRyb2wpIHtcbiAgICAgIGNvbnRyb2wuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJGFkZENvbnRyb2xcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRyb2wgY29udHJvbCBvYmplY3QsIGVpdGhlciBhIHtAbGluayBmb3JtLkZvcm1Db250cm9sbGVyfSBvciBhblxuICAgKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlcn1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJlZ2lzdGVyIGEgY29udHJvbCB3aXRoIHRoZSBmb3JtLiBJbnB1dCBlbGVtZW50cyB1c2luZyBuZ01vZGVsQ29udHJvbGxlciBkbyB0aGlzIGF1dG9tYXRpY2FsbHlcbiAgICogd2hlbiB0aGV5IGFyZSBsaW5rZWQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY29udHJvbCB3aWxsIG5vdCBiZSByZWZsZWN0ZWQgb24gdGhlIG5ldyBwYXJlbnQgZm9ybS4gVGhpc1xuICAgKiBpcyBub3QgYW4gaXNzdWUgd2l0aCBub3JtYWwgdXNlLCBhcyBmcmVzaGx5IGNvbXBpbGVkIGFuZCBsaW5rZWQgY29udHJvbHMgYXJlIGluIGEgYCRwcmlzdGluZWBcbiAgICogc3RhdGUuXG4gICAqXG4gICAqIEhvd2V2ZXIsIGlmIHRoZSBtZXRob2QgaXMgdXNlZCBwcm9ncmFtbWF0aWNhbGx5LCBmb3IgZXhhbXBsZSBieSBhZGRpbmcgZHluYW1pY2FsbHkgY3JlYXRlZCBjb250cm9scyxcbiAgICogb3IgY29udHJvbHMgdGhhdCBoYXZlIGJlZW4gcHJldmlvdXNseSByZW1vdmVkIHdpdGhvdXQgZGVzdHJveWluZyB0aGVpciBjb3JyZXNwb25kaW5nIERPTSBlbGVtZW50LFxuICAgKiBpdCdzIHRoZSBkZXZlbG9wZXJzIHJlc3BvbnNpYmlsaXR5IHRvIG1ha2Ugc3VyZSB0aGUgY3VycmVudCBzdGF0ZSBwcm9wYWdhdGVzIHRvIHRoZSBwYXJlbnQgZm9ybS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIGFuIGlucHV0IGNvbnRyb2wgaXMgYWRkZWQgdGhhdCBpcyBhbHJlYWR5IGAkZGlydHlgIGFuZCBoYXMgYCRlcnJvcmAgcHJvcGVydGllcyxcbiAgICogY2FsbGluZyBgJHNldERpcnR5KClgIGFuZCBgJHZhbGlkYXRlKClgIGFmdGVyd2FyZHMgd2lsbCBwcm9wYWdhdGUgdGhlIHN0YXRlIHRvIHRoZSBwYXJlbnQgZm9ybS5cbiAgICovXG4gICRhZGRDb250cm9sOiBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgLy8gQnJlYWtpbmcgY2hhbmdlIC0gYmVmb3JlLCBpbnB1dHMgd2hvc2UgbmFtZSB3YXMgXCJoYXNPd25Qcm9wZXJ0eVwiIHdlcmUgcXVpZXRseSBpZ25vcmVkXG4gICAgLy8gYW5kIG5vdCBhZGRlZCB0byB0aGUgc2NvcGUuICBOb3cgd2UgdGhyb3cgYW4gZXJyb3IuXG4gICAgYXNzZXJ0Tm90SGFzT3duUHJvcGVydHkoY29udHJvbC4kbmFtZSwgJ2lucHV0Jyk7XG4gICAgdGhpcy4kJGNvbnRyb2xzLnB1c2goY29udHJvbCk7XG5cbiAgICBpZiAoY29udHJvbC4kbmFtZSkge1xuICAgICAgdGhpc1tjb250cm9sLiRuYW1lXSA9IGNvbnRyb2w7XG4gICAgfVxuXG4gICAgY29udHJvbC4kJHBhcmVudEZvcm0gPSB0aGlzO1xuICB9LFxuXG4gIC8vIFByaXZhdGUgQVBJOiByZW5hbWUgYSBmb3JtIGNvbnRyb2xcbiAgJCRyZW5hbWVDb250cm9sOiBmdW5jdGlvbihjb250cm9sLCBuZXdOYW1lKSB7XG4gICAgdmFyIG9sZE5hbWUgPSBjb250cm9sLiRuYW1lO1xuXG4gICAgaWYgKHRoaXNbb2xkTmFtZV0gPT09IGNvbnRyb2wpIHtcbiAgICAgIGRlbGV0ZSB0aGlzW29sZE5hbWVdO1xuICAgIH1cbiAgICB0aGlzW25ld05hbWVdID0gY29udHJvbDtcbiAgICBjb250cm9sLiRuYW1lID0gbmV3TmFtZTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBmb3JtLkZvcm1Db250cm9sbGVyIyRyZW1vdmVDb250cm9sXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250cm9sIGNvbnRyb2wgb2JqZWN0LCBlaXRoZXIgYSB7QGxpbmsgZm9ybS5Gb3JtQ29udHJvbGxlcn0gb3IgYW5cbiAgICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJ9XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBEZXJlZ2lzdGVyIGEgY29udHJvbCBmcm9tIHRoZSBmb3JtLlxuICAgKlxuICAgKiBJbnB1dCBlbGVtZW50cyB1c2luZyBuZ01vZGVsQ29udHJvbGxlciBkbyB0aGlzIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGV5IGFyZSBkZXN0cm95ZWQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBvbmx5IHRoZSByZW1vdmVkIGNvbnRyb2wncyB2YWxpZGF0aW9uIHN0YXRlIChgJGVycm9yc2BldGMuKSB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGVcbiAgICogZm9ybS4gYCRkaXJ0eWAsIGAkc3VibWl0dGVkYCBzdGF0ZXMgd2lsbCBub3QgYmUgY2hhbmdlZCwgYmVjYXVzZSB0aGUgZXhwZWN0ZWQgYmVoYXZpb3IgY2FuIGJlXG4gICAqIGRpZmZlcmVudCBmcm9tIGNhc2UgdG8gY2FzZS4gRm9yIGV4YW1wbGUsIHJlbW92aW5nIHRoZSBvbmx5IGAkZGlydHlgIGNvbnRyb2wgZnJvbSBhIGZvcm0gbWF5IG9yXG4gICAqIG1heSBub3QgbWVhbiB0aGF0IHRoZSBmb3JtIGlzIHN0aWxsIGAkZGlydHlgLlxuICAgKi9cbiAgJHJlbW92ZUNvbnRyb2w6IGZ1bmN0aW9uKGNvbnRyb2wpIHtcbiAgICBpZiAoY29udHJvbC4kbmFtZSAmJiB0aGlzW2NvbnRyb2wuJG5hbWVdID09PSBjb250cm9sKSB7XG4gICAgICBkZWxldGUgdGhpc1tjb250cm9sLiRuYW1lXTtcbiAgICB9XG4gICAgZm9yRWFjaCh0aGlzLiRwZW5kaW5nLCBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgICAgdGhpcy4kc2V0VmFsaWRpdHkobmFtZSwgbnVsbCwgY29udHJvbCk7XG4gICAgfSwgdGhpcyk7XG4gICAgZm9yRWFjaCh0aGlzLiRlcnJvciwgZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnZhbGlkLXRoaXNcbiAgICAgIHRoaXMuJHNldFZhbGlkaXR5KG5hbWUsIG51bGwsIGNvbnRyb2wpO1xuICAgIH0sIHRoaXMpO1xuICAgIGZvckVhY2godGhpcy4kJHN1Y2Nlc3MsIGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW52YWxpZC10aGlzXG4gICAgICB0aGlzLiRzZXRWYWxpZGl0eShuYW1lLCBudWxsLCBjb250cm9sKTtcbiAgICB9LCB0aGlzKTtcblxuICAgIGFycmF5UmVtb3ZlKHRoaXMuJCRjb250cm9scywgY29udHJvbCk7XG4gICAgY29udHJvbC4kJHBhcmVudEZvcm0gPSBudWxsRm9ybUN0cmw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkc2V0RGlydHlcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gYSBkaXJ0eSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byBhZGQgdGhlICduZy1kaXJ0eScgY2xhc3MgYW5kIHNldCB0aGUgZm9ybSB0byBhIGRpcnR5XG4gICAqIHN0YXRlIChuZy1kaXJ0eSBjbGFzcykuIFRoaXMgbWV0aG9kIHdpbGwgYWxzbyBwcm9wYWdhdGUgdG8gcGFyZW50IGZvcm1zLlxuICAgKi9cbiAgJHNldERpcnR5OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgUFJJU1RJTkVfQ0xBU1MpO1xuICAgIHRoaXMuJCRhbmltYXRlLmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LCBESVJUWV9DTEFTUyk7XG4gICAgdGhpcy4kZGlydHkgPSB0cnVlO1xuICAgIHRoaXMuJHByaXN0aW5lID0gZmFsc2U7XG4gICAgdGhpcy4kJHBhcmVudEZvcm0uJHNldERpcnR5KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkc2V0UHJpc3RpbmVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGZvcm0gdG8gaXRzIHByaXN0aW5lIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBzZXRzIHRoZSBmb3JtJ3MgYCRwcmlzdGluZWAgc3RhdGUgdG8gdHJ1ZSwgdGhlIGAkZGlydHlgIHN0YXRlIHRvIGZhbHNlLCByZW1vdmVzXG4gICAqIHRoZSBgbmctZGlydHlgIGNsYXNzIGFuZCBhZGRzIHRoZSBgbmctcHJpc3RpbmVgIGNsYXNzLiBBZGRpdGlvbmFsbHksIGl0IHNldHMgdGhlIGAkc3VibWl0dGVkYFxuICAgKiBzdGF0ZSB0byBmYWxzZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCBhbHNvIHByb3BhZ2F0ZSB0byBhbGwgdGhlIGNvbnRyb2xzIGNvbnRhaW5lZCBpbiB0aGlzIGZvcm0uXG4gICAqXG4gICAqIFNldHRpbmcgYSBmb3JtIGJhY2sgdG8gYSBwcmlzdGluZSBzdGF0ZSBpcyBvZnRlbiB1c2VmdWwgd2hlbiB3ZSB3YW50IHRvICdyZXVzZScgYSBmb3JtIGFmdGVyXG4gICAqIHNhdmluZyBvciByZXNldHRpbmcgaXQuXG4gICAqL1xuICAkc2V0UHJpc3RpbmU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJCRhbmltYXRlLnNldENsYXNzKHRoaXMuJCRlbGVtZW50LCBQUklTVElORV9DTEFTUywgRElSVFlfQ0xBU1MgKyAnICcgKyBTVUJNSVRURURfQ0xBU1MpO1xuICAgIHRoaXMuJGRpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy4kcHJpc3RpbmUgPSB0cnVlO1xuICAgIHRoaXMuJHN1Ym1pdHRlZCA9IGZhbHNlO1xuICAgIGZvckVhY2godGhpcy4kJGNvbnRyb2xzLCBmdW5jdGlvbihjb250cm9sKSB7XG4gICAgICBjb250cm9sLiRzZXRQcmlzdGluZSgpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFVudG91Y2hlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgZm9ybSB0byBpdHMgdW50b3VjaGVkIHN0YXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHRvIHJlbW92ZSB0aGUgJ25nLXRvdWNoZWQnIGNsYXNzIGFuZCBzZXQgdGhlIGZvcm0gY29udHJvbHMgdG8gdGhlaXJcbiAgICogdW50b3VjaGVkIHN0YXRlIChuZy11bnRvdWNoZWQgY2xhc3MpLlxuICAgKlxuICAgKiBTZXR0aW5nIGEgZm9ybSBjb250cm9scyBiYWNrIHRvIHRoZWlyIHVudG91Y2hlZCBzdGF0ZSBpcyBvZnRlbiB1c2VmdWwgd2hlbiBzZXR0aW5nIHRoZSBmb3JtXG4gICAqIGJhY2sgdG8gaXRzIHByaXN0aW5lIHN0YXRlLlxuICAgKi9cbiAgJHNldFVudG91Y2hlZDogZnVuY3Rpb24oKSB7XG4gICAgZm9yRWFjaCh0aGlzLiQkY29udHJvbHMsIGZ1bmN0aW9uKGNvbnRyb2wpIHtcbiAgICAgIGNvbnRyb2wuJHNldFVudG91Y2hlZCgpO1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIGZvcm0uRm9ybUNvbnRyb2xsZXIjJHNldFN1Ym1pdHRlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgZm9ybSB0byBpdHMgc3VibWl0dGVkIHN0YXRlLlxuICAgKi9cbiAgJHNldFN1Ym1pdHRlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFNVQk1JVFRFRF9DTEFTUyk7XG4gICAgdGhpcy4kc3VibWl0dGVkID0gdHJ1ZTtcbiAgICB0aGlzLiQkcGFyZW50Rm9ybS4kc2V0U3VibWl0dGVkKCk7XG4gIH1cbn07XG5cbi8qKlxuICogQG5nZG9jIG1ldGhvZFxuICogQG5hbWUgZm9ybS5Gb3JtQ29udHJvbGxlciMkc2V0VmFsaWRpdHlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIENoYW5nZSB0aGUgdmFsaWRpdHkgc3RhdGUgb2YgdGhlIGZvcm0sIGFuZCBub3RpZnkgdGhlIHBhcmVudCBmb3JtIChpZiBhbnkpLlxuICpcbiAqIEFwcGxpY2F0aW9uIGRldmVsb3BlcnMgd2lsbCByYXJlbHkgbmVlZCB0byBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5LiBJdCBpcyB1c2VkIGludGVybmFsbHksIGJ5XG4gKiB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0VmFsaWRpdHkgTmdNb2RlbENvbnRyb2xsZXIuJHNldFZhbGlkaXR5KCl9LCB0byBwcm9wYWdhdGUgYVxuICogY29udHJvbCdzIHZhbGlkaXR5IHN0YXRlIHRvIHRoZSBwYXJlbnQgYEZvcm1Db250cm9sbGVyYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsaWRhdGlvbkVycm9yS2V5IE5hbWUgb2YgdGhlIHZhbGlkYXRvci4gVGhlIGB2YWxpZGF0aW9uRXJyb3JLZXlgIHdpbGwgYmVcbiAqICAgICAgICBhc3NpZ25lZCB0byBlaXRoZXIgYCRlcnJvclt2YWxpZGF0aW9uRXJyb3JLZXldYCBvciBgJHBlbmRpbmdbdmFsaWRhdGlvbkVycm9yS2V5XWAgKGZvclxuICogICAgICAgIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYCksIHNvIHRoYXQgaXQgaXMgYXZhaWxhYmxlIGZvciBkYXRhLWJpbmRpbmcuIFRoZVxuICogICAgICAgIGB2YWxpZGF0aW9uRXJyb3JLZXlgIHNob3VsZCBiZSBpbiBjYW1lbENhc2UgYW5kIHdpbGwgZ2V0IGNvbnZlcnRlZCBpbnRvIGRhc2gtY2FzZSBmb3JcbiAqICAgICAgICBjbGFzcyBuYW1lLiBFeGFtcGxlOiBgbXlFcnJvcmAgd2lsbCByZXN1bHQgaW4gYG5nLXZhbGlkLW15LWVycm9yYCBhbmRcbiAqICAgICAgICBgbmctaW52YWxpZC1teS1lcnJvcmAgY2xhc3NlcyBhbmQgY2FuIGJlIGJvdW5kIHRvIGFzIGB7eyBzb21lRm9ybS4kZXJyb3IubXlFcnJvciB9fWAuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmFsaWQgV2hldGhlciB0aGUgY3VycmVudCBzdGF0ZSBpcyB2YWxpZCAodHJ1ZSksIGludmFsaWQgKGZhbHNlKSwgcGVuZGluZ1xuICogICAgICAgICh1bmRlZmluZWQpLCAgb3Igc2tpcHBlZCAobnVsbCkuIFBlbmRpbmcgaXMgdXNlZCBmb3IgdW5mdWxmaWxsZWQgYCRhc3luY1ZhbGlkYXRvcnNgLlxuICogICAgICAgIFNraXBwZWQgaXMgdXNlZCBieSBBbmd1bGFySlMgd2hlbiB2YWxpZGF0b3JzIGRvIG5vdCBydW4gYmVjYXVzZSBvZiBwYXJzZSBlcnJvcnMgYW5kIHdoZW5cbiAqICAgICAgICBgJGFzeW5jVmFsaWRhdG9yc2AgZG8gbm90IHJ1biBiZWNhdXNlIGFueSBvZiB0aGUgYCR2YWxpZGF0b3JzYCBmYWlsZWQuXG4gKiBAcGFyYW0ge05nTW9kZWxDb250cm9sbGVyIHwgRm9ybUNvbnRyb2xsZXJ9IGNvbnRyb2xsZXIgLSBUaGUgY29udHJvbGxlciB3aG9zZSB2YWxpZGl0eSBzdGF0ZSBpc1xuICogICAgICAgIHRyaWdnZXJpbmcgdGhlIGNoYW5nZS5cbiAqL1xuYWRkU2V0VmFsaWRpdHlNZXRob2Qoe1xuICBjbGF6ejogRm9ybUNvbnRyb2xsZXIsXG4gIHNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSwgY29udHJvbGxlcikge1xuICAgIHZhciBsaXN0ID0gb2JqZWN0W3Byb3BlcnR5XTtcbiAgICBpZiAoIWxpc3QpIHtcbiAgICAgIG9iamVjdFtwcm9wZXJ0eV0gPSBbY29udHJvbGxlcl07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpbmRleCA9IGxpc3QuaW5kZXhPZihjb250cm9sbGVyKTtcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgbGlzdC5wdXNoKGNvbnRyb2xsZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgdW5zZXQ6IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGNvbnRyb2xsZXIpIHtcbiAgICB2YXIgbGlzdCA9IG9iamVjdFtwcm9wZXJ0eV07XG4gICAgaWYgKCFsaXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGFycmF5UmVtb3ZlKGxpc3QsIGNvbnRyb2xsZXIpO1xuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0Zvcm1cbiAqIEByZXN0cmljdCBFQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIE5lc3RhYmxlIGFsaWFzIG9mIHtAbGluayBuZy5kaXJlY3RpdmU6Zm9ybSBgZm9ybWB9IGRpcmVjdGl2ZS4gSFRNTFxuICogZG9lcyBub3QgYWxsb3cgbmVzdGluZyBvZiBmb3JtIGVsZW1lbnRzLiBJdCBpcyB1c2VmdWwgdG8gbmVzdCBmb3JtcywgZm9yIGV4YW1wbGUgaWYgdGhlIHZhbGlkaXR5IG9mIGFcbiAqIHN1Yi1ncm91cCBvZiBjb250cm9scyBuZWVkcyB0byBiZSBkZXRlcm1pbmVkLlxuICpcbiAqIE5vdGU6IHRoZSBwdXJwb3NlIG9mIGBuZ0Zvcm1gIGlzIHRvIGdyb3VwIGNvbnRyb2xzLFxuICogYnV0IG5vdCB0byBiZSBhIHJlcGxhY2VtZW50IGZvciB0aGUgYDxmb3JtPmAgdGFnIHdpdGggYWxsIG9mIGl0cyBjYXBhYmlsaXRpZXNcbiAqIChlLmcuIHBvc3RpbmcgdG8gdGhlIHNlcnZlciwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nRm9ybXxuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCBpbnRvXG4gKiAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZCBzY29wZSwgdW5kZXIgdGhpcyBuYW1lLlxuICpcbiAqL1xuXG4gLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBmb3JtXG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRGlyZWN0aXZlIHRoYXQgaW5zdGFudGlhdGVzXG4gKiB7QGxpbmsgZm9ybS5Gb3JtQ29udHJvbGxlciBGb3JtQ29udHJvbGxlcn0uXG4gKlxuICogSWYgdGhlIGBuYW1lYCBhdHRyaWJ1dGUgaXMgc3BlY2lmaWVkLCB0aGUgZm9ybSBjb250cm9sbGVyIGlzIHB1Ymxpc2hlZCBvbnRvIHRoZSBjdXJyZW50IHNjb3BlIHVuZGVyXG4gKiB0aGlzIG5hbWUuXG4gKlxuICogIyMgQWxpYXM6IHtAbGluayBuZy5kaXJlY3RpdmU6bmdGb3JtIGBuZ0Zvcm1gfVxuICpcbiAqIEluIEFuZ3VsYXIsIGZvcm1zIGNhbiBiZSBuZXN0ZWQuIFRoaXMgbWVhbnMgdGhhdCB0aGUgb3V0ZXIgZm9ybSBpcyB2YWxpZCB3aGVuIGFsbCBvZiB0aGUgY2hpbGRcbiAqIGZvcm1zIGFyZSB2YWxpZCBhcyB3ZWxsLiBIb3dldmVyLCBicm93c2VycyBkbyBub3QgYWxsb3cgbmVzdGluZyBvZiBgPGZvcm0+YCBlbGVtZW50cywgc29cbiAqIEFuZ3VsYXIgcHJvdmlkZXMgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdGb3JtIGBuZ0Zvcm1gfSBkaXJlY3RpdmUsIHdoaWNoIGJlaGF2ZXMgaWRlbnRpY2FsbHkgdG9cbiAqIGBmb3JtYCBidXQgY2FuIGJlIG5lc3RlZC4gTmVzdGVkIGZvcm1zIGNhbiBiZSB1c2VmdWwsIGZvciBleGFtcGxlLCBpZiB0aGUgdmFsaWRpdHkgb2YgYSBzdWItZ3JvdXBcbiAqIG9mIGNvbnRyb2xzIG5lZWRzIHRvIGJlIGRldGVybWluZWQuXG4gKlxuICogIyMgQ1NTIGNsYXNzZXNcbiAqICAtIGBuZy12YWxpZGAgaXMgc2V0IGlmIHRoZSBmb3JtIGlzIHZhbGlkLlxuICogIC0gYG5nLWludmFsaWRgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBpbnZhbGlkLlxuICogIC0gYG5nLXBlbmRpbmdgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBwZW5kaW5nLlxuICogIC0gYG5nLXByaXN0aW5lYCBpcyBzZXQgaWYgdGhlIGZvcm0gaXMgcHJpc3RpbmUuXG4gKiAgLSBgbmctZGlydHlgIGlzIHNldCBpZiB0aGUgZm9ybSBpcyBkaXJ0eS5cbiAqICAtIGBuZy1zdWJtaXR0ZWRgIGlzIHNldCBpZiB0aGUgZm9ybSB3YXMgc3VibWl0dGVkLlxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0IG5nQW5pbWF0ZSBjYW4gZGV0ZWN0IGVhY2ggb2YgdGhlc2UgY2xhc3NlcyB3aGVuIGFkZGVkIGFuZCByZW1vdmVkLlxuICpcbiAqXG4gKiAjIyBTdWJtaXR0aW5nIGEgZm9ybSBhbmQgcHJldmVudGluZyB0aGUgZGVmYXVsdCBhY3Rpb25cbiAqXG4gKiBTaW5jZSB0aGUgcm9sZSBvZiBmb3JtcyBpbiBjbGllbnQtc2lkZSBBbmd1bGFyIGFwcGxpY2F0aW9ucyBpcyBkaWZmZXJlbnQgdGhhbiBpbiBjbGFzc2ljYWxcbiAqIHJvdW5kdHJpcCBhcHBzLCBpdCBpcyBkZXNpcmFibGUgZm9yIHRoZSBicm93c2VyIG5vdCB0byB0cmFuc2xhdGUgdGhlIGZvcm0gc3VibWlzc2lvbiBpbnRvIGEgZnVsbFxuICogcGFnZSByZWxvYWQgdGhhdCBzZW5kcyB0aGUgZGF0YSB0byB0aGUgc2VydmVyLiBJbnN0ZWFkIHNvbWUgamF2YXNjcmlwdCBsb2dpYyBzaG91bGQgYmUgdHJpZ2dlcmVkXG4gKiB0byBoYW5kbGUgdGhlIGZvcm0gc3VibWlzc2lvbiBpbiBhbiBhcHBsaWNhdGlvbi1zcGVjaWZpYyB3YXkuXG4gKlxuICogRm9yIHRoaXMgcmVhc29uLCBBbmd1bGFyIHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbiAoZm9ybSBzdWJtaXNzaW9uIHRvIHRoZSBzZXJ2ZXIpIHVubGVzcyB0aGVcbiAqIGA8Zm9ybT5gIGVsZW1lbnQgaGFzIGFuIGBhY3Rpb25gIGF0dHJpYnV0ZSBzcGVjaWZpZWQuXG4gKlxuICogWW91IGNhbiB1c2Ugb25lIG9mIHRoZSBmb2xsb3dpbmcgdHdvIHdheXMgdG8gc3BlY2lmeSB3aGF0IGphdmFzY3JpcHQgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgd2hlblxuICogYSBmb3JtIGlzIHN1Ym1pdHRlZDpcbiAqXG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdTdWJtaXQgbmdTdWJtaXR9IGRpcmVjdGl2ZSBvbiB0aGUgZm9ybSBlbGVtZW50XG4gKiAtIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDbGljayBuZ0NsaWNrfSBkaXJlY3RpdmUgb24gdGhlIGZpcnN0XG4gICogIGJ1dHRvbiBvciBpbnB1dCBmaWVsZCBvZiB0eXBlIHN1Ym1pdCAoaW5wdXRbdHlwZT1zdWJtaXRdKVxuICpcbiAqIFRvIHByZXZlbnQgZG91YmxlIGV4ZWN1dGlvbiBvZiB0aGUgaGFuZGxlciwgdXNlIG9ubHkgb25lIG9mIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nU3VibWl0IG5nU3VibWl0fVxuICogb3Ige0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsaWNrIG5nQ2xpY2t9IGRpcmVjdGl2ZXMuXG4gKiBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIGZvbGxvd2luZyBmb3JtIHN1Ym1pc3Npb24gcnVsZXMgaW4gdGhlIEhUTUwgc3BlY2lmaWNhdGlvbjpcbiAqXG4gKiAtIElmIGEgZm9ybSBoYXMgb25seSBvbmUgaW5wdXQgZmllbGQgdGhlbiBoaXR0aW5nIGVudGVyIGluIHRoaXMgZmllbGQgdHJpZ2dlcnMgZm9ybSBzdWJtaXRcbiAqIChgbmdTdWJtaXRgKVxuICogLSBpZiBhIGZvcm0gaGFzIDIrIGlucHV0IGZpZWxkcyBhbmQgbm8gYnV0dG9ucyBvciBpbnB1dFt0eXBlPXN1Ym1pdF0gdGhlbiBoaXR0aW5nIGVudGVyXG4gKiBkb2Vzbid0IHRyaWdnZXIgc3VibWl0XG4gKiAtIGlmIGEgZm9ybSBoYXMgb25lIG9yIG1vcmUgaW5wdXQgZmllbGRzIGFuZCBvbmUgb3IgbW9yZSBidXR0b25zIG9yIGlucHV0W3R5cGU9c3VibWl0XSB0aGVuXG4gKiBoaXR0aW5nIGVudGVyIGluIGFueSBvZiB0aGUgaW5wdXQgZmllbGRzIHdpbGwgdHJpZ2dlciB0aGUgY2xpY2sgaGFuZGxlciBvbiB0aGUgKmZpcnN0KiBidXR0b24gb3JcbiAqIGlucHV0W3R5cGU9c3VibWl0XSAoYG5nQ2xpY2tgKSAqYW5kKiBhIHN1Ym1pdCBoYW5kbGVyIG9uIHRoZSBlbmNsb3NpbmcgZm9ybSAoYG5nU3VibWl0YClcbiAqXG4gKiBBbnkgcGVuZGluZyBgbmdNb2RlbE9wdGlvbnNgIGNoYW5nZXMgd2lsbCB0YWtlIHBsYWNlIGltbWVkaWF0ZWx5IHdoZW4gYW4gZW5jbG9zaW5nIGZvcm0gaXNcbiAqIHN1Ym1pdHRlZC4gTm90ZSB0aGF0IGBuZ0NsaWNrYCBldmVudHMgd2lsbCBvY2N1ciBiZWZvcmUgdGhlIG1vZGVsIGlzIHVwZGF0ZWQuIFVzZSBgbmdTdWJtaXRgXG4gKiB0byBoYXZlIGFjY2VzcyB0byB0aGUgdXBkYXRlZCBtb2RlbC5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogQW5pbWF0aW9ucyBpbiBuZ0Zvcm0gYXJlIHRyaWdnZXJlZCB3aGVuIGFueSBvZiB0aGUgYXNzb2NpYXRlZCBDU1MgY2xhc3NlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWQuXG4gKiBUaGVzZSBjbGFzc2VzIGFyZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLCBgLm5nLWludmFsaWRgIGFuZCBgLm5nLXZhbGlkYCBhcyB3ZWxsIGFzIGFueVxuICogb3RoZXIgdmFsaWRhdGlvbnMgdGhhdCBhcmUgcGVyZm9ybWVkIHdpdGhpbiB0aGUgZm9ybS4gQW5pbWF0aW9ucyBpbiBuZ0Zvcm0gYXJlIHNpbWlsYXIgdG8gaG93XG4gKiB0aGV5IHdvcmsgaW4gbmdDbGFzcyBhbmQgYW5pbWF0aW9ucyBjYW4gYmUgaG9va2VkIGludG8gdXNpbmcgQ1NTIHRyYW5zaXRpb25zLCBrZXlmcmFtZXMgYXMgd2VsbFxuICogYXMgSlMgYW5pbWF0aW9ucy5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgYSBzaW1wbGUgd2F5IHRvIHV0aWxpemUgQ1NTIHRyYW5zaXRpb25zIHRvIHN0eWxlIGEgZm9ybSBlbGVtZW50XG4gKiB0aGF0IGhhcyBiZWVuIHJlbmRlcmVkIGFzIGludmFsaWQgYWZ0ZXIgaXQgaGFzIGJlZW4gdmFsaWRhdGVkOlxuICpcbiAqIDxwcmU+XG4gKiAvL2JlIHN1cmUgdG8gaW5jbHVkZSBuZ0FuaW1hdGUgYXMgYSBtb2R1bGUgdG8gaG9vayBpbnRvIG1vcmVcbiAqIC8vYWR2YW5jZWQgYW5pbWF0aW9uc1xuICogLm15LWZvcm0ge1xuICogICB0cmFuc2l0aW9uOjAuNXMgbGluZWFyIGFsbDtcbiAqICAgYmFja2dyb3VuZDogd2hpdGU7XG4gKiB9XG4gKiAubXktZm9ybS5uZy1pbnZhbGlkIHtcbiAqICAgYmFja2dyb3VuZDogcmVkO1xuICogICBjb2xvcjp3aGl0ZTtcbiAqIH1cbiAqIDwvcHJlPlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIm5nLWZvcm1cIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBmaXhCYXNlPVwidHJ1ZVwiIG1vZHVsZT1cImZvcm1FeGFtcGxlXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZm9ybUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0Zvcm1Db250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAkc2NvcGUudXNlclR5cGUgPSAnZ3Vlc3QnO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPHN0eWxlPlxuICAgICAgICAubXktZm9ybSB7XG4gICAgICAgICAgdHJhbnNpdGlvbjphbGwgbGluZWFyIDAuNXM7XG4gICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLm15LWZvcm0ubmctaW52YWxpZCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogcmVkO1xuICAgICAgICB9XG4gICAgICAgPC9zdHlsZT5cbiAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkZvcm1Db250cm9sbGVyXCIgY2xhc3M9XCJteS1mb3JtXCI+XG4gICAgICAgICB1c2VyVHlwZTogPGlucHV0IG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwidXNlclR5cGVcIiByZXF1aXJlZD5cbiAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlJlcXVpcmVkITwvc3Bhbj48YnI+XG4gICAgICAgICA8Y29kZT51c2VyVHlwZSA9IHt7dXNlclR5cGV9fTwvY29kZT48YnI+XG4gICAgICAgICA8Y29kZT5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L2NvZGU+PGJyPlxuICAgICAgICAgPGNvZGU+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC9jb2RlPjxicj5cbiAgICAgICAgIDxjb2RlPm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvY29kZT48YnI+XG4gICAgICAgICA8Y29kZT5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvY29kZT48YnI+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHVzZXJUeXBlID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyVHlwZScpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2d1ZXN0Jyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB1c2VyVHlwZSA9IGVsZW1lbnQoYnkuYmluZGluZygndXNlclR5cGUnKSk7XG4gICAgICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuICAgICAgICAgIHZhciB1c2VySW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyVHlwZScpKTtcblxuICAgICAgICAgIHVzZXJJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJJbnB1dC5zZW5kS2V5cygnJyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlclR5cGUuZ2V0VGV4dCgpKS50b0VxdWFsKCd1c2VyVHlwZSA9Jyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIE5hbWUgb2YgdGhlIGZvcm0uIElmIHNwZWNpZmllZCwgdGhlIGZvcm0gY29udHJvbGxlciB3aWxsIGJlIHB1Ymxpc2hlZCBpbnRvXG4gKiAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZCBzY29wZSwgdW5kZXIgdGhpcyBuYW1lLlxuICovXG52YXIgZm9ybURpcmVjdGl2ZUZhY3RvcnkgPSBmdW5jdGlvbihpc05nRm9ybSkge1xuICByZXR1cm4gWyckdGltZW91dCcsICckcGFyc2UnLCBmdW5jdGlvbigkdGltZW91dCwgJHBhcnNlKSB7XG4gICAgdmFyIGZvcm1EaXJlY3RpdmUgPSB7XG4gICAgICBuYW1lOiAnZm9ybScsXG4gICAgICByZXN0cmljdDogaXNOZ0Zvcm0gPyAnRUFDJyA6ICdFJyxcbiAgICAgIHJlcXVpcmU6IFsnZm9ybScsICdeXj9mb3JtJ10sIC8vZmlyc3QgaXMgdGhlIGZvcm0ncyBvd24gY3RybCwgc2Vjb25kIGlzIGFuIG9wdGlvbmFsIHBhcmVudCBmb3JtXG4gICAgICBjb250cm9sbGVyOiBGb3JtQ29udHJvbGxlcixcbiAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nRm9ybUNvbXBpbGUoZm9ybUVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgLy8gU2V0dXAgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgY29udHJvbFxuICAgICAgICBmb3JtRWxlbWVudC5hZGRDbGFzcyhQUklTVElORV9DTEFTUykuYWRkQ2xhc3MoVkFMSURfQ0xBU1MpO1xuXG4gICAgICAgIHZhciBuYW1lQXR0ciA9IGF0dHIubmFtZSA/ICduYW1lJyA6IChpc05nRm9ybSAmJiBhdHRyLm5nRm9ybSA/ICduZ0Zvcm0nIDogZmFsc2UpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcHJlOiBmdW5jdGlvbiBuZ0Zvcm1QcmVMaW5rKHNjb3BlLCBmb3JtRWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gY3RybHNbMF07XG5cbiAgICAgICAgICAgIC8vIGlmIGBhY3Rpb25gIGF0dHIgaXMgbm90IHByZXNlbnQgb24gdGhlIGZvcm0sIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uIChzdWJtaXNzaW9uKVxuICAgICAgICAgICAgaWYgKCEoJ2FjdGlvbicgaW4gYXR0cikpIHtcbiAgICAgICAgICAgICAgLy8gd2UgY2FuJ3QgdXNlIGpxIGV2ZW50cyBiZWNhdXNlIGlmIGEgZm9ybSBpcyBkZXN0cm95ZWQgZHVyaW5nIHN1Ym1pc3Npb24gdGhlIGRlZmF1bHRcbiAgICAgICAgICAgICAgLy8gYWN0aW9uIGlzIG5vdCBwcmV2ZW50ZWQuIHNlZSAjMTIzOFxuICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAvLyBJRSA5IGlzIG5vdCBhZmZlY3RlZCBiZWNhdXNlIGl0IGRvZXNuJ3QgZmlyZSBhIHN1Ym1pdCBldmVudCBhbmQgdHJ5IHRvIGRvIGEgZnVsbFxuICAgICAgICAgICAgICAvLyBwYWdlIHJlbG9hZCBpZiB0aGUgZm9ybSB3YXMgZGVzdHJveWVkIGJ5IHN1Ym1pc3Npb24gb2YgdGhlIGZvcm0gdmlhIGEgY2xpY2sgaGFuZGxlclxuICAgICAgICAgICAgICAvLyBvbiBhIGJ1dHRvbiBpbiB0aGUgZm9ybS4gTG9va3MgbGlrZSBhbiBJRTkgc3BlY2lmaWMgYnVnLlxuICAgICAgICAgICAgICB2YXIgaGFuZGxlRm9ybVN1Ym1pc3Npb24gPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuJGNvbW1pdFZpZXdWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci4kc2V0U3VibWl0dGVkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGZvcm1FbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUZvcm1TdWJtaXNzaW9uKTtcblxuICAgICAgICAgICAgICAvLyB1bnJlZ2lzdGVyIHRoZSBwcmV2ZW50RGVmYXVsdCBsaXN0ZW5lciBzbyB0aGF0IHdlIGRvbid0IG5vdCBsZWFrIG1lbW9yeSBidXQgaW4gYVxuICAgICAgICAgICAgICAvLyB3YXkgdGhhdCB3aWxsIGFjaGlldmUgdGhlIHByZXZlbnRpb24gb2YgdGhlIGRlZmF1bHQgYWN0aW9uLlxuICAgICAgICAgICAgICBmb3JtRWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIGZvcm1FbGVtZW50WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZUZvcm1TdWJtaXNzaW9uKTtcbiAgICAgICAgICAgICAgICB9LCAwLCBmYWxzZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcGFyZW50Rm9ybUN0cmwgPSBjdHJsc1sxXSB8fCBjb250cm9sbGVyLiQkcGFyZW50Rm9ybTtcbiAgICAgICAgICAgIHBhcmVudEZvcm1DdHJsLiRhZGRDb250cm9sKGNvbnRyb2xsZXIpO1xuXG4gICAgICAgICAgICB2YXIgc2V0dGVyID0gbmFtZUF0dHIgPyBnZXRTZXR0ZXIoY29udHJvbGxlci4kbmFtZSkgOiBub29wO1xuXG4gICAgICAgICAgICBpZiAobmFtZUF0dHIpIHtcbiAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgYXR0ci4kb2JzZXJ2ZShuYW1lQXR0ciwgZnVuY3Rpb24obmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlci4kbmFtZSA9PT0gbmV3VmFsdWUpIHJldHVybjtcbiAgICAgICAgICAgICAgICBzZXR0ZXIoc2NvcGUsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci4kJHBhcmVudEZvcm0uJCRyZW5hbWVDb250cm9sKGNvbnRyb2xsZXIsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICBzZXR0ZXIgPSBnZXRTZXR0ZXIoY29udHJvbGxlci4kbmFtZSk7XG4gICAgICAgICAgICAgICAgc2V0dGVyKHNjb3BlLCBjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JtRWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci4kJHBhcmVudEZvcm0uJHJlbW92ZUNvbnRyb2woY29udHJvbGxlcik7XG4gICAgICAgICAgICAgIHNldHRlcihzY29wZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgZXh0ZW5kKGNvbnRyb2xsZXIsIG51bGxGb3JtQ3RybCk7IC8vc3RvcCBwcm9wYWdhdGluZyBjaGlsZCBkZXN0cnVjdGlvbiBoYW5kbGVycyB1cHdhcmRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBmb3JtRGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gZ2V0U2V0dGVyKGV4cHJlc3Npb24pIHtcbiAgICAgIGlmIChleHByZXNzaW9uID09PSAnJykge1xuICAgICAgICAvL2NyZWF0ZSBhbiBhc3NpZ25hYmxlIGV4cHJlc3Npb24sIHNvIGZvcm1zIHdpdGggYW4gZW1wdHkgbmFtZSBjYW4gYmUgcmVuYW1lZCBsYXRlclxuICAgICAgICByZXR1cm4gJHBhcnNlKCd0aGlzW1wiXCJdJykuYXNzaWduO1xuICAgICAgfVxuICAgICAgcmV0dXJuICRwYXJzZShleHByZXNzaW9uKS5hc3NpZ24gfHwgbm9vcDtcbiAgICB9XG4gIH1dO1xufTtcblxudmFyIGZvcm1EaXJlY3RpdmUgPSBmb3JtRGlyZWN0aXZlRmFjdG9yeSgpO1xudmFyIG5nRm9ybURpcmVjdGl2ZSA9IGZvcm1EaXJlY3RpdmVGYWN0b3J5KHRydWUpO1xuXG5cblxuLy8gaGVscGVyIG1ldGhvZHNcbmZ1bmN0aW9uIHNldHVwVmFsaWRpdHkoaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UuJCRjbGFzc0NhY2hlID0ge307XG4gIGluc3RhbmNlLiQkY2xhc3NDYWNoZVtJTlZBTElEX0NMQVNTXSA9ICEoaW5zdGFuY2UuJCRjbGFzc0NhY2hlW1ZBTElEX0NMQVNTXSA9IGluc3RhbmNlLiQkZWxlbWVudC5oYXNDbGFzcyhWQUxJRF9DTEFTUykpO1xufVxuZnVuY3Rpb24gYWRkU2V0VmFsaWRpdHlNZXRob2QoY29udGV4dCkge1xuICB2YXIgY2xhenogPSBjb250ZXh0LmNsYXp6LFxuICAgICAgc2V0ID0gY29udGV4dC5zZXQsXG4gICAgICB1bnNldCA9IGNvbnRleHQudW5zZXQ7XG5cbiAgY2xhenoucHJvdG90eXBlLiRzZXRWYWxpZGl0eSA9IGZ1bmN0aW9uKHZhbGlkYXRpb25FcnJvcktleSwgc3RhdGUsIGNvbnRyb2xsZXIpIHtcbiAgICBpZiAoaXNVbmRlZmluZWQoc3RhdGUpKSB7XG4gICAgICBjcmVhdGVBbmRTZXQodGhpcywgJyRwZW5kaW5nJywgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5zZXRBbmRDbGVhbnVwKHRoaXMsICckcGVuZGluZycsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgfVxuICAgIGlmICghaXNCb29sZWFuKHN0YXRlKSkge1xuICAgICAgdW5zZXQodGhpcy4kZXJyb3IsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgICB1bnNldCh0aGlzLiQkc3VjY2VzcywgdmFsaWRhdGlvbkVycm9yS2V5LCBjb250cm9sbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgIHVuc2V0KHRoaXMuJGVycm9yLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgICBzZXQodGhpcy4kJHN1Y2Nlc3MsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXQodGhpcy4kZXJyb3IsIHZhbGlkYXRpb25FcnJvcktleSwgY29udHJvbGxlcik7XG4gICAgICAgIHVuc2V0KHRoaXMuJCRzdWNjZXNzLCB2YWxpZGF0aW9uRXJyb3JLZXksIGNvbnRyb2xsZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy4kcGVuZGluZykge1xuICAgICAgY2FjaGVkVG9nZ2xlQ2xhc3ModGhpcywgUEVORElOR19DTEFTUywgdHJ1ZSk7XG4gICAgICB0aGlzLiR2YWxpZCA9IHRoaXMuJGludmFsaWQgPSB1bmRlZmluZWQ7XG4gICAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKHRoaXMsICcnLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FjaGVkVG9nZ2xlQ2xhc3ModGhpcywgUEVORElOR19DTEFTUywgZmFsc2UpO1xuICAgICAgdGhpcy4kdmFsaWQgPSBpc09iamVjdEVtcHR5KHRoaXMuJGVycm9yKTtcbiAgICAgIHRoaXMuJGludmFsaWQgPSAhdGhpcy4kdmFsaWQ7XG4gICAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKHRoaXMsICcnLCB0aGlzLiR2YWxpZCk7XG4gICAgfVxuXG4gICAgLy8gcmUtcmVhZCB0aGUgc3RhdGUgYXMgdGhlIHNldC91bnNldCBtZXRob2RzIGNvdWxkIGhhdmVcbiAgICAvLyBjb21iaW5lZCBzdGF0ZSBpbiB0aGlzLiRlcnJvclt2YWxpZGF0aW9uRXJyb3JdICh1c2VkIGZvciBmb3JtcyksXG4gICAgLy8gd2hlcmUgc2V0dGluZy91bnNldHRpbmcgb25seSBpbmNyZW1lbnRzL2RlY3JlbWVudHMgdGhlIHZhbHVlLFxuICAgIC8vIGFuZCBkb2VzIG5vdCByZXBsYWNlIGl0LlxuICAgIHZhciBjb21iaW5lZFN0YXRlO1xuICAgIGlmICh0aGlzLiRwZW5kaW5nICYmIHRoaXMuJHBlbmRpbmdbdmFsaWRhdGlvbkVycm9yS2V5XSkge1xuICAgICAgY29tYmluZWRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuJGVycm9yW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuJCRzdWNjZXNzW3ZhbGlkYXRpb25FcnJvcktleV0pIHtcbiAgICAgIGNvbWJpbmVkU3RhdGUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb21iaW5lZFN0YXRlID0gbnVsbDtcbiAgICB9XG5cbiAgICB0b2dnbGVWYWxpZGF0aW9uQ3NzKHRoaXMsIHZhbGlkYXRpb25FcnJvcktleSwgY29tYmluZWRTdGF0ZSk7XG4gICAgdGhpcy4kJHBhcmVudEZvcm0uJHNldFZhbGlkaXR5KHZhbGlkYXRpb25FcnJvcktleSwgY29tYmluZWRTdGF0ZSwgdGhpcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlQW5kU2V0KGN0cmwsIG5hbWUsIHZhbHVlLCBjb250cm9sbGVyKSB7XG4gICAgaWYgKCFjdHJsW25hbWVdKSB7XG4gICAgICBjdHJsW25hbWVdID0ge307XG4gICAgfVxuICAgIHNldChjdHJsW25hbWVdLCB2YWx1ZSwgY29udHJvbGxlcik7XG4gIH1cblxuICBmdW5jdGlvbiB1bnNldEFuZENsZWFudXAoY3RybCwgbmFtZSwgdmFsdWUsIGNvbnRyb2xsZXIpIHtcbiAgICBpZiAoY3RybFtuYW1lXSkge1xuICAgICAgdW5zZXQoY3RybFtuYW1lXSwgdmFsdWUsIGNvbnRyb2xsZXIpO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3RFbXB0eShjdHJsW25hbWVdKSkge1xuICAgICAgY3RybFtuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYWNoZWRUb2dnbGVDbGFzcyhjdHJsLCBjbGFzc05hbWUsIHN3aXRjaFZhbHVlKSB7XG4gICAgaWYgKHN3aXRjaFZhbHVlICYmICFjdHJsLiQkY2xhc3NDYWNoZVtjbGFzc05hbWVdKSB7XG4gICAgICBjdHJsLiQkYW5pbWF0ZS5hZGRDbGFzcyhjdHJsLiQkZWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgIGN0cmwuJCRjbGFzc0NhY2hlW2NsYXNzTmFtZV0gPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXN3aXRjaFZhbHVlICYmIGN0cmwuJCRjbGFzc0NhY2hlW2NsYXNzTmFtZV0pIHtcbiAgICAgIGN0cmwuJCRhbmltYXRlLnJlbW92ZUNsYXNzKGN0cmwuJCRlbGVtZW50LCBjbGFzc05hbWUpO1xuICAgICAgY3RybC4kJGNsYXNzQ2FjaGVbY2xhc3NOYW1lXSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZVZhbGlkYXRpb25Dc3MoY3RybCwgdmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkKSB7XG4gICAgdmFsaWRhdGlvbkVycm9yS2V5ID0gdmFsaWRhdGlvbkVycm9yS2V5ID8gJy0nICsgc25ha2VfY2FzZSh2YWxpZGF0aW9uRXJyb3JLZXksICctJykgOiAnJztcblxuICAgIGNhY2hlZFRvZ2dsZUNsYXNzKGN0cmwsIFZBTElEX0NMQVNTICsgdmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkID09PSB0cnVlKTtcbiAgICBjYWNoZWRUb2dnbGVDbGFzcyhjdHJsLCBJTlZBTElEX0NMQVNTICsgdmFsaWRhdGlvbkVycm9yS2V5LCBpc1ZhbGlkID09PSBmYWxzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNPYmplY3RFbXB0eShvYmopIHtcbiAgaWYgKG9iaikge1xuICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qIGdsb2JhbFxuICBWQUxJRF9DTEFTUzogZmFsc2UsXG4gIElOVkFMSURfQ0xBU1M6IGZhbHNlLFxuICBQUklTVElORV9DTEFTUzogZmFsc2UsXG4gIERJUlRZX0NMQVNTOiBmYWxzZSxcbiAgbmdNb2RlbE1pbkVycjogZmFsc2VcbiovXG5cbi8vIFJlZ2V4IGNvZGUgd2FzIGluaXRpYWxseSBvYnRhaW5lZCBmcm9tIFNPIHByaW9yIHRvIG1vZGlmaWNhdGlvbjogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzE0MzA3MC9qYXZhc2NyaXB0LXJlZ2V4LWlzby1kYXRldGltZSNhbnN3ZXItMzE0MzIzMVxudmFyIElTT19EQVRFX1JFR0VYUCA9IC9eXFxkezQsfS1bMDFdXFxkLVswLTNdXFxkVFswLTJdXFxkOlswLTVdXFxkOlswLTVdXFxkXFwuXFxkKyg/OlsrLV1bMC0yXVxcZDpbMC01XVxcZHxaKSQvO1xuLy8gU2VlIHZhbGlkIFVSTHMgaW4gUkZDMzk4NyAoaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4Nylcbi8vIE5vdGU6IFdlIGFyZSBiZWluZyBtb3JlIGxlbmllbnQsIGJlY2F1c2UgYnJvd3NlcnMgYXJlIHRvby5cbi8vICAgMS4gU2NoZW1lXG4vLyAgIDIuIFNsYXNoZXNcbi8vICAgMy4gVXNlcm5hbWVcbi8vICAgNC4gUGFzc3dvcmRcbi8vICAgNS4gSG9zdG5hbWVcbi8vICAgNi4gUG9ydFxuLy8gICA3LiBQYXRoXG4vLyAgIDguIFF1ZXJ5XG4vLyAgIDkuIEZyYWdtZW50XG4vLyAgICAgICAgICAgICAgICAgMTExMTExMTExMTExMTExMSAyMjIgICAzMzMzMzMgICAgNDQ0NDQgICAgICAgIDU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1ICAgICA2NjYgICAgIDc3Nzc3Nzc3ICAgICA4ODg4ODg4ICAgICA5OTlcbnZhciBVUkxfUkVHRVhQID0gL15bYS16XVthLXpcXGQuKy1dKjpcXC8qKD86W146QF0rKD86OlteQF0rKT9AKT8oPzpbXlxcczovPyNdK3xcXFtbYS1mXFxkOl0rXSkoPzo6XFxkKyk/KD86XFwvW14/I10qKT8oPzpcXD9bXiNdKik/KD86Iy4qKT8kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxudmFyIEVNQUlMX1JFR0VYUCA9IC9eKD89LnsxLDI1NH0kKSg/PS57MSw2NH1AKVstISMkJSYnKisvMC05PT9BLVpeX2BhLXp7fH1+XSsoXFwuWy0hIyQlJicqKy8wLTk9P0EtWl5fYGEtent8fX5dKykqQFtBLVphLXowLTldKFtBLVphLXowLTktXXswLDYxfVtBLVphLXowLTldKT8oXFwuW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dezAsNjF9W0EtWmEtejAtOV0pPykqJC87XG52YXIgTlVNQkVSX1JFR0VYUCA9IC9eXFxzKigtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKShbZUVdWystXT9cXGQrKT9cXHMqJC87XG52YXIgREFURV9SRUdFWFAgPSAvXihcXGR7NCx9KS0oXFxkezJ9KS0oXFxkezJ9KSQvO1xudmFyIERBVEVUSU1FTE9DQUxfUkVHRVhQID0gL14oXFxkezQsfSktKFxcZFxcZCktKFxcZFxcZClUKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkoXFwuXFxkezEsM30pPyk/JC87XG52YXIgV0VFS19SRUdFWFAgPSAvXihcXGR7NCx9KS1XKFxcZFxcZCkkLztcbnZhciBNT05USF9SRUdFWFAgPSAvXihcXGR7NCx9KS0oXFxkXFxkKSQvO1xudmFyIFRJTUVfUkVHRVhQID0gL14oXFxkXFxkKTooXFxkXFxkKSg/OjooXFxkXFxkKShcXC5cXGR7MSwzfSk/KT8kLztcblxudmFyIFBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMgPSAna2V5ZG93biB3aGVlbCBtb3VzZWRvd24nO1xudmFyIFBBUlRJQUxfVkFMSURBVElPTl9UWVBFUyA9IGNyZWF0ZU1hcCgpO1xuZm9yRWFjaCgnZGF0ZSxkYXRldGltZS1sb2NhbCxtb250aCx0aW1lLHdlZWsnLnNwbGl0KCcsJyksIGZ1bmN0aW9uKHR5cGUpIHtcbiAgUEFSVElBTF9WQUxJREFUSU9OX1RZUEVTW3R5cGVdID0gdHJ1ZTtcbn0pO1xuXG52YXIgaW5wdXRUeXBlID0ge1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbdGV4dF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFN0YW5kYXJkIEhUTUwgdGV4dCBpbnB1dCB3aXRoIGFuZ3VsYXIgZGF0YSBiaW5kaW5nLCBpbmhlcml0ZWQgYnkgbW9zdCBvZiB0aGUgYGlucHV0YCBlbGVtZW50cy5cbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWlubGVuZ3RoIFNldHMgYG1pbmxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIHNob3J0ZXIgdGhhblxuICAgKiAgICBtaW5sZW5ndGguXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNYXhsZW5ndGggU2V0cyBgbWF4bGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbG9uZ2VyIHRoYW5cbiAgICogICAgbWF4bGVuZ3RoLiBTZXR0aW5nIHRoZSBhdHRyaWJ1dGUgdG8gYSBuZWdhdGl2ZSBvciBub24tbnVtZXJpYyB2YWx1ZSwgYWxsb3dzIHZpZXcgdmFsdWVzIG9mXG4gICAqICAgIGFueSBsZW5ndGguXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcGF0dGVybiBTaW1pbGFyIHRvIGBuZ1BhdHRlcm5gIGV4Y2VwdCB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgaXMgdGhlIGFjdHVhbCBzdHJpbmdcbiAgICogICAgdGhhdCBjb250YWlucyB0aGUgcmVndWxhciBleHByZXNzaW9uIGJvZHkgdGhhdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHJlZ3VsYXIgZXhwcmVzc2lvblxuICAgKiAgICBhcyBpbiB0aGUgbmdQYXR0ZXJuIGRpcmVjdGl2ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1BhdHRlcm4gU2V0cyBgcGF0dGVybmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIG5nTW9kZWwge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSAkdmlld1ZhbHVlfVxuICAgKiAgICBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFyIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHN0cmluZywgdGhlbiBpdCB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIFJlZ0V4cFxuICAgKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAgKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gICAqICAgICoqTm90ZToqKiBBdm9pZCB1c2luZyB0aGUgYGdgIGZsYWcgb24gdGhlIFJlZ0V4cCwgYXMgaXQgd2lsbCBjYXVzZSBlYWNoIHN1Y2Nlc3NpdmUgc2VhcmNoIHRvXG4gICAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gICAqICAgIGFjY291bnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFyIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgdHJpbSB0aGUgaW5wdXQuXG4gICAqICAgIFRoaXMgcGFyYW1ldGVyIGlzIGlnbm9yZWQgZm9yIGlucHV0W3R5cGU9cGFzc3dvcmRdIGNvbnRyb2xzLCB3aGljaCB3aWxsIG5ldmVyIHRyaW0gdGhlXG4gICAqICAgIGlucHV0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgICAgPGV4YW1wbGUgbmFtZT1cInRleHQtaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwidGV4dElucHV0RXhhbXBsZVwiPlxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgPHNjcmlwdD5cbiAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3RleHRJbnB1dEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XG4gICAgICAgICAgICAgICAgIHRleHQ6ICdndWVzdCcsXG4gICAgICAgICAgICAgICAgIHdvcmQ6IC9eXFxzKlxcdypcXHMqJC9cbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5TaW5nbGUgd29yZDpcbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudGV4dFwiXG4gICAgICAgICAgICAgICAgICAgIG5nLXBhdHRlcm49XCJleGFtcGxlLndvcmRcIiByZXF1aXJlZCBuZy10cmltPVwiZmFsc2VcIj5cbiAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucGF0dGVyblwiPlxuICAgICAgICAgICAgICAgU2luZ2xlIHdvcmQgb25seSE8L3NwYW4+XG4gICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICA8Y29kZT50ZXh0ID0ge3tleGFtcGxlLnRleHR9fTwvY29kZT48YnIvPlxuICAgICAgICAgICA8Y29kZT5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L2NvZGU+PGJyLz5cbiAgICAgICAgICAgPGNvZGU+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC9jb2RlPjxici8+XG4gICAgICAgICAgIDxjb2RlPm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvY29kZT48YnIvPlxuICAgICAgICAgICA8Y29kZT5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvY29kZT48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2V4YW1wbGUudGV4dCcpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG4gICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS50ZXh0JykpO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignZ3Vlc3QnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xuXG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvRXF1YWwoJ3RleHQgPScpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG11bHRpIHdvcmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnaGVsbG8gd29ybGQnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdmYWxzZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgICA8L2ZpbGU+XG4gICAgICA8L2V4YW1wbGU+XG4gICAqL1xuICAndGV4dCc6IHRleHRJbnB1dFR5cGUsXG5cbiAgICAvKipcbiAgICAgKiBAbmdkb2MgaW5wdXRcbiAgICAgKiBAbmFtZSBpbnB1dFtkYXRlXVxuICAgICAqXG4gICAgICogQGRlc2NyaXB0aW9uXG4gICAgICogSW5wdXQgd2l0aCBkYXRlIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxuICAgICAqIHRoZSBIVE1MNSBkYXRlIGlucHV0LCBhIHRleHQgZWxlbWVudCB3aWxsIGJlIHVzZWQuIEluIHRoYXQgY2FzZSwgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxuICAgICAqIGRhdGUgZm9ybWF0ICh5eXl5LU1NLWRkKSwgZm9yIGV4YW1wbGU6IGAyMDA5LTAxLTA2YC4gU2luY2UgbWFueVxuICAgICAqIG1vZGVybiBicm93c2VycyBkbyBub3QgeWV0IHN1cHBvcnQgdGhpcyBpbnB1dCB0eXBlLCBpdCBpcyBpbXBvcnRhbnQgdG8gcHJvdmlkZSBjdWVzIHRvIHVzZXJzIG9uIHRoZVxuICAgICAqIGV4cGVjdGVkIGlucHV0IGZvcm1hdCB2aWEgYSBwbGFjZWhvbGRlciBvciBsYWJlbC5cbiAgICAgKlxuICAgICAqIFRoZSBtb2RlbCBtdXN0IGFsd2F5cyBiZSBhIERhdGUgb2JqZWN0LCBvdGhlcndpc2UgQW5ndWxhciB3aWxsIHRocm93IGFuIGVycm9yLlxuICAgICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoZSB0aW1lem9uZSB0byBiZSB1c2VkIHRvIHJlYWQvd3JpdGUgdGhlIGBEYXRlYCBpbnN0YW5jZSBpbiB0aGUgbW9kZWwgY2FuIGJlIGRlZmluZWQgdXNpbmdcbiAgICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC4gVGhpcyBtdXN0IGJlIGFcbiAgICAgKiAgIHZhbGlkIElTTyBkYXRlIHN0cmluZyAoeXl5eS1NTS1kZCkuIFlvdSBjYW4gYWxzbyB1c2UgaW50ZXJwb2xhdGlvbiBpbnNpZGUgdGhpcyBhdHRyaWJ1dGVcbiAgICAgKiAgIChlLmcuIGBtaW49XCJ7e21pbkRhdGUgfCBkYXRlOid5eXl5LU1NLWRkJ319XCJgKS4gTm90ZSB0aGF0IGBtaW5gIHdpbGwgYWxzbyBhZGQgbmF0aXZlIEhUTUw1XG4gICAgICogICBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLiBUaGlzIG11c3QgYmVcbiAgICAgKiAgIGEgdmFsaWQgSVNPIGRhdGUgc3RyaW5nICh5eXl5LU1NLWRkKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAqICAgKGUuZy4gYG1heD1cInt7bWF4RGF0ZSB8IGRhdGU6J3l5eXktTU0tZGQnfX1cImApLiBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZCBuYXRpdmUgSFRNTDVcbiAgICAgKiAgIGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gZGF0ZSBzdHJpbmdcbiAgICAgKiAgIHRoZSBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHsoZGF0ZXxzdHJpbmcpPX0gbmdNYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvIHRoZSBEYXRlIC8gSVNPIGRhdGUgc3RyaW5nXG4gICAgICogICB0aGUgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICA8ZXhhbXBsZSBuYW1lPVwiZGF0ZS1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJkYXRlSW5wdXRFeGFtcGxlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgnZGF0ZUlucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0RhdGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTMsIDksIDIyKVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfV0pO1xuICAgICAgIDwvc2NyaXB0PlxuICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRGF0ZUNvbnRyb2xsZXIgYXMgZGF0ZUN0cmxcIj5cbiAgICAgICAgICA8bGFiZWwgZm9yPVwiZXhhbXBsZUlucHV0XCI+UGljayBhIGRhdGUgaW4gMjAxMzo8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZGF0ZVwiIGlkPVwiZXhhbXBsZUlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnZhbHVlXCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NLWRkXCIgbWluPVwiMjAxMy0wMS0wMVwiIG1heD1cIjIwMTMtMTItMzFcIiByZXF1aXJlZCAvPlxuICAgICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZGF0ZVwiPlxuICAgICAgICAgICAgICAgIE5vdCBhIHZhbGlkIGRhdGUhPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NLWRkXCJ9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5pbnB1dC4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICAgIDwvZm9ybT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFwiJykpO1xuICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG5cbiAgICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgICAgLy8gc2VuZGluZyBrZXlzIHRvIGFsbCBrbm93biBIVE1MNSBpbnB1dCBjb250cm9sc1xuICAgICAgICAvLyBmb3IgdmFyaW91cyBicm93c2VycyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXG4gICAgICAgIGZ1bmN0aW9uIHNldElucHV0KHZhbCkge1xuICAgICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xuICAgICAgICAgIFwiaXB0LnZhbHVlID0gJ1wiICsgdmFsICsgXCInO1wiICtcbiAgICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XG4gICAgICAgIH1cblxuICAgICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzIwMTMtMTAtMjInKTtcbiAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNldElucHV0KCcnKTtcbiAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0SW5wdXQoJzIwMTUtMDEtMDEnKTtcbiAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xuICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICAgIDwvZXhhbXBsZT5cbiAgICAgKi9cbiAgJ2RhdGUnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCdkYXRlJywgREFURV9SRUdFWFAsXG4gICAgICAgICBjcmVhdGVEYXRlUGFyc2VyKERBVEVfUkVHRVhQLCBbJ3l5eXknLCAnTU0nLCAnZGQnXSksXG4gICAgICAgICAneXl5eS1NTS1kZCcpLFxuXG4gICAvKipcbiAgICAqIEBuZ2RvYyBpbnB1dFxuICAgICogQG5hbWUgaW5wdXRbZGF0ZXRpbWUtbG9jYWxdXG4gICAgKlxuICAgICogQGRlc2NyaXB0aW9uXG4gICAgKiBJbnB1dCB3aXRoIGRhdGV0aW1lIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxuICAgICogdGhlIEhUTUw1IGRhdGUgaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0aGUgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxuICAgICogbG9jYWwgZGF0ZXRpbWUgZm9ybWF0ICh5eXl5LU1NLWRkVEhIOm1tOnNzKSwgZm9yIGV4YW1wbGU6IGAyMDEwLTEyLTI4VDE0OjU3OjAwYC5cbiAgICAqXG4gICAgKiBUaGUgbW9kZWwgbXVzdCBhbHdheXMgYmUgYSBEYXRlIG9iamVjdCwgb3RoZXJ3aXNlIEFuZ3VsYXIgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICAqXG4gICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgKlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxuICAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gZGF0ZXRpbWUgZm9ybWF0ICh5eXl5LU1NLWRkVEhIOm1tOnNzKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uXG4gICAgKiAgIGluc2lkZSB0aGlzIGF0dHJpYnV0ZSAoZS5nLiBgbWluPVwie3ttaW5EYXRldGltZUxvY2FsIHwgZGF0ZToneXl5eS1NTS1kZFRISDptbTpzcyd9fVwiYCkuXG4gICAgKiAgIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkIG5hdGl2ZSBIVE1MNSBjb25zdHJhaW50IHZhbGlkYXRpb24uXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG1heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyIHRoYW4gYG1heGAuXG4gICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyBkYXRldGltZSBmb3JtYXQgKHl5eXktTU0tZGRUSEg6bW06c3MpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb25cbiAgICAqICAgaW5zaWRlIHRoaXMgYXR0cmlidXRlIChlLmcuIGBtYXg9XCJ7e21heERhdGV0aW1lTG9jYWwgfCBkYXRlOid5eXl5LU1NLWRkVEhIOm1tOnNzJ319XCJgKS5cbiAgICAqICAgTm90ZSB0aGF0IGBtYXhgIHdpbGwgYWxzbyBhZGQgbmF0aXZlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICAqIEBwYXJhbSB7KGRhdGV8c3RyaW5nKT19IG5nTWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IHRvIHRoZSBEYXRlIC8gSVNPIGRhdGV0aW1lIHN0cmluZ1xuICAgICogICB0aGUgYG5nTWluYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1pbmAgYXR0cmlidXRlLlxuICAgICogQHBhcmFtIHsoZGF0ZXxzdHJpbmcpPX0gbmdNYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgdG8gdGhlIERhdGUgLyBJU08gZGF0ZXRpbWUgc3RyaW5nXG4gICAgKiAgIHRoZSBgbmdNYXhgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWF4YCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAqXG4gICAgKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJkYXRldGltZWxvY2FsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cImRhdGVFeGFtcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxzY3JpcHQ+XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdkYXRlRXhhbXBsZScsIFtdKVxuICAgICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXhhbXBsZSA9IHtcbiAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTAsIDExLCAyOCwgMTQsIDU3KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XSk7XG4gICAgICA8L3NjcmlwdD5cbiAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRGF0ZUNvbnRyb2xsZXIgYXMgZGF0ZUN0cmxcIj5cbiAgICAgICAgPGxhYmVsIGZvcj1cImV4YW1wbGVJbnB1dFwiPlBpY2sgYSBkYXRlIGJldHdlZW4gaW4gMjAxMzo8L2xhYmVsPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGV0aW1lLWxvY2FsXCIgaWQ9XCJleGFtcGxlSW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ5eXl5LU1NLWRkVEhIOm1tOnNzXCIgbWluPVwiMjAwMS0wMS0wMVQwMDowMDowMFwiIG1heD1cIjIwMTMtMTItMzFUMDA6MDA6MDBcIiByZXF1aXJlZCAvPlxuICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLmRhdGV0aW1lbG9jYWxcIj5cbiAgICAgICAgICAgICAgTm90IGEgdmFsaWQgZGF0ZSE8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8dHQ+dmFsdWUgPSB7e2V4YW1wbGUudmFsdWUgfCBkYXRlOiBcInl5eXktTU0tZGRUSEg6bW06c3NcIn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTS1kZFRISDptbTpzc1wiJykpO1xuICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuXG4gICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAgLy8gc2VuZGluZyBrZXlzIHRvIGFsbCBrbm93biBIVE1MNSBpbnB1dCBjb250cm9sc1xuICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXG4gICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcbiAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cbiAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xuICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXG4gICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcbiAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XG4gICAgICB9XG5cbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzIwMTAtMTItMjhUMTQ6NTc6MDAnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIwMTUtMDEtMDFUMjM6NTk6MDAnKTtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gICAgKi9cbiAgJ2RhdGV0aW1lLWxvY2FsJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnZGF0ZXRpbWVsb2NhbCcsIERBVEVUSU1FTE9DQUxfUkVHRVhQLFxuICAgICAgY3JlYXRlRGF0ZVBhcnNlcihEQVRFVElNRUxPQ0FMX1JFR0VYUCwgWyd5eXl5JywgJ01NJywgJ2RkJywgJ0hIJywgJ21tJywgJ3NzJywgJ3NzcyddKSxcbiAgICAgICd5eXl5LU1NLWRkVEhIOm1tOnNzLnNzcycpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbdGltZV1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIElucHV0IHdpdGggdGltZSB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi4gSW4gYnJvd3NlcnMgdGhhdCBkbyBub3QgeWV0IHN1cHBvcnRcbiAgICogdGhlIEhUTUw1IHRpbWUgaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0aGUgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxuICAgKiBsb2NhbCB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLCBmb3IgZXhhbXBsZTogYDE0OjU3OjAwYC4gTW9kZWwgbXVzdCBiZSBhIERhdGUgb2JqZWN0LiBUaGlzIGJpbmRpbmcgd2lsbCBhbHdheXMgb3V0cHV0IGFcbiAgICogRGF0ZSBvYmplY3QgdG8gdGhlIG1vZGVsIG9mIEphbnVhcnkgMSwgMTk3MCwgb3IgbG9jYWwgZGF0ZSBgbmV3IERhdGUoMTk3MCwgMCwgMSwgSEgsIG1tLCBzcylgLlxuICAgKlxuICAgKiBUaGUgbW9kZWwgbXVzdCBhbHdheXMgYmUgYSBEYXRlIG9iamVjdCwgb3RoZXJ3aXNlIEFuZ3VsYXIgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogSW52YWxpZCBgRGF0ZWAgb2JqZWN0cyAoZGF0ZXMgd2hvc2UgYGdldFRpbWUoKWAgaXMgYE5hTmApIHdpbGwgYmUgcmVuZGVyZWQgYXMgYW4gZW1wdHkgc3RyaW5nLlxuICAgKlxuICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cbiAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gdGltZSBmb3JtYXQgKEhIOm1tOnNzKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzXG4gICAqICAgYXR0cmlidXRlIChlLmcuIGBtaW49XCJ7e21pblRpbWUgfCBkYXRlOidISDptbTpzcyd9fVwiYCkuIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkXG4gICAqICAgbmF0aXZlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyB0aW1lIGZvcm1hdCAoSEg6bW06c3MpLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICogICBhdHRyaWJ1dGUgKGUuZy4gYG1heD1cInt7bWF4VGltZSB8IGRhdGU6J0hIOm1tOnNzJ319XCJgKS4gTm90ZSB0aGF0IGBtYXhgIHdpbGwgYWxzbyBhZGRcbiAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gdGltZSBzdHJpbmcgdGhlXG4gICAqICAgYG5nTWluYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1pbmAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gdGltZSBzdHJpbmcgdGhlXG4gICAqICAgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwidGltZS1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJ0aW1lRXhhbXBsZVwiPlxuICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgPHNjcmlwdD5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCd0aW1lRXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDE5NzAsIDAsIDEsIDE0LCA1NywgMClcbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgIDwvc2NyaXB0PlxuICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XG4gICAgICAgIDxsYWJlbCBmb3I9XCJleGFtcGxlSW5wdXRcIj5QaWNrIGEgdGltZSBiZXR3ZWVuIDhhbSBhbmQgNXBtOjwvbGFiZWw+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGltZVwiIGlkPVwiZXhhbXBsZUlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnZhbHVlXCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiSEg6bW06c3NcIiBtaW49XCIwODowMDowMFwiIG1heD1cIjE3OjAwOjAwXCIgcmVxdWlyZWQgLz5cbiAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci50aW1lXCI+XG4gICAgICAgICAgICAgIE5vdCBhIHZhbGlkIGRhdGUhPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJISDptbTpzc1wifX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgPC9mb3JtPlxuICAgPC9maWxlPlxuICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIHZhbHVlID0gZWxlbWVudChieS5iaW5kaW5nKCdleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJISDptbTpzc1wiJykpO1xuICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuXG4gICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAgLy8gc2VuZGluZyBrZXlzIHRvIGFsbCBrbm93biBIVE1MNSBpbnB1dCBjb250cm9sc1xuICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXG4gICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcbiAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cbiAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xuICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXG4gICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcbiAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XG4gICAgICB9XG5cbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzE0OjU3OjAwJyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IHRydWUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJycpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignbXlGb3JtLmlucHV0LiR2YWxpZCA9IGZhbHNlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIG92ZXIgbWF4JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcyMzo1OTowMCcpO1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJycpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgfSk7XG4gICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gICAqL1xuICAndGltZSc6IGNyZWF0ZURhdGVJbnB1dFR5cGUoJ3RpbWUnLCBUSU1FX1JFR0VYUCxcbiAgICAgIGNyZWF0ZURhdGVQYXJzZXIoVElNRV9SRUdFWFAsIFsnSEgnLCAnbW0nLCAnc3MnLCAnc3NzJ10pLFxuICAgICAnSEg6bW06c3Muc3NzJyksXG5cbiAgIC8qKlxuICAgICogQG5nZG9jIGlucHV0XG4gICAgKiBAbmFtZSBpbnB1dFt3ZWVrXVxuICAgICpcbiAgICAqIEBkZXNjcmlwdGlvblxuICAgICogSW5wdXQgd2l0aCB3ZWVrLW9mLXRoZS15ZWFyIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uIHRvIERhdGUuIEluIGJyb3dzZXJzIHRoYXQgZG8gbm90IHlldCBzdXBwb3J0XG4gICAgKiB0aGUgSFRNTDUgd2VlayBpbnB1dCwgYSB0ZXh0IGVsZW1lbnQgd2lsbCBiZSB1c2VkLiBJbiB0aGF0IGNhc2UsIHRoZSB0ZXh0IG11c3QgYmUgZW50ZXJlZCBpbiBhIHZhbGlkIElTTy04NjAxXG4gICAgKiB3ZWVrIGZvcm1hdCAoeXl5eS1XIyMpLCBmb3IgZXhhbXBsZTogYDIwMTMtVzAyYC5cbiAgICAqXG4gICAgKiBUaGUgbW9kZWwgbXVzdCBhbHdheXMgYmUgYSBEYXRlIG9iamVjdCwgb3RoZXJ3aXNlIEFuZ3VsYXIgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICAqIEludmFsaWQgYERhdGVgIG9iamVjdHMgKGRhdGVzIHdob3NlIGBnZXRUaW1lKClgIGlzIGBOYU5gKSB3aWxsIGJlIHJlbmRlcmVkIGFzIGFuIGVtcHR5IHN0cmluZy5cbiAgICAqXG4gICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAgKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfS4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgdGltZXpvbmUgb2YgdGhlIGJyb3dzZXIuXG4gICAgKlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgbGVzcyB0aGFuIGBtaW5gLlxuICAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gd2VlayBmb3JtYXQgKHl5eXktVyMjKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzXG4gICAgKiAgIGF0dHJpYnV0ZSAoZS5nLiBgbWluPVwie3ttaW5XZWVrIHwgZGF0ZToneXl5eS1Xd3cnfX1cImApLiBOb3RlIHRoYXQgYG1pbmAgd2lsbCBhbHNvIGFkZFxuICAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gd2VlayBmb3JtYXQgKHl5eXktVyMjKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzXG4gICAgKiAgIGF0dHJpYnV0ZSAoZS5nLiBgbWF4PVwie3ttYXhXZWVrIHwgZGF0ZToneXl5eS1Xd3cnfX1cImApLiBOb3RlIHRoYXQgYG1heGAgd2lsbCBhbHNvIGFkZFxuICAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgICogQHBhcmFtIHsoZGF0ZXxzdHJpbmcpPX0gbmdNaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvIHRoZSBEYXRlIC8gSVNPIHdlZWsgc3RyaW5nXG4gICAgKiAgIHRoZSBgbmdNaW5gIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvLiBOb3RlIHRoYXQgaXQgZG9lcyBub3Qgc2V0IHRoZSBgbWluYCBhdHRyaWJ1dGUuXG4gICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gd2VlayBzdHJpbmdcbiAgICAqICAgdGhlIGBuZ01heGAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8uIE5vdGUgdGhhdCBpdCBkb2VzIG5vdCBzZXQgdGhlIGBtYXhgIGF0dHJpYnV0ZS5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgICpcbiAgICAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbmFtZT1cIndlZWstaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwid2Vla0V4YW1wbGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPHNjcmlwdD5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCd3ZWVrRXhhbXBsZScsIFtdKVxuICAgICAgICAuY29udHJvbGxlcignRGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKDIwMTMsIDAsIDMpXG4gICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuICAgICAgPC9zY3JpcHQ+XG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XG4gICAgICAgIDxsYWJlbD5QaWNrIGEgZGF0ZSBiZXR3ZWVuIGluIDIwMTM6XG4gICAgICAgICAgPGlucHV0IGlkPVwiZXhhbXBsZUlucHV0XCIgdHlwZT1cIndlZWtcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIllZWVktVyMjXCIgbWluPVwiMjAxMi1XMzJcIlxuICAgICAgICAgICAgICAgICBtYXg9XCIyMDEzLVc1MlwiIHJlcXVpcmVkIC8+XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLnJlcXVpcmVkXCI+XG4gICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3Iud2Vla1wiPlxuICAgICAgICAgICAgICBOb3QgYSB2YWxpZCBkYXRlITwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDx0dD52YWx1ZSA9IHt7ZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1Xd3dcIn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1Xd3dcIicpKTtcbiAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcblxuICAgICAgLy8gY3VycmVudGx5IHByb3RyYWN0b3Ivd2ViZHJpdmVyIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgIC8vIHNlbmRpbmcga2V5cyB0byBhbGwga25vd24gSFRNTDUgaW5wdXQgY29udHJvbHNcbiAgICAgIC8vIGZvciB2YXJpb3VzIGJyb3dzZXJzIChodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy81NjIpLlxuICAgICAgZnVuY3Rpb24gc2V0SW5wdXQodmFsKSB7XG4gICAgICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQgYW5kIGZvcmNlIHZhbGlkYXRpb24uXG4gICAgICAgIHZhciBzY3IgPSBcInZhciBpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZUlucHV0Jyk7IFwiICtcbiAgICAgICAgXCJpcHQudmFsdWUgPSAnXCIgKyB2YWwgKyBcIic7XCIgK1xuICAgICAgICBcImFuZ3VsYXIuZWxlbWVudChpcHQpLnNjb3BlKCkuJGFwcGx5KGZ1bmN0aW9uKHMpIHsgcy5teUZvcm1baXB0Lm5hbWVdLiRzZXRWaWV3VmFsdWUoJ1wiICsgdmFsICsgXCInKTsgfSk7XCI7XG4gICAgICAgIGJyb3dzZXIuZXhlY3V0ZVNjcmlwdChzY3IpO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcyMDEzLVcwMScpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSB0cnVlJyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldElucHV0KCcnKTtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9FcXVhbCgndmFsdWUgPScpO1xuICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ215Rm9ybS5pbnB1dC4kdmFsaWQgPSBmYWxzZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBvdmVyIG1heCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnMjAxNS1XMDEnKTtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gICAgKi9cbiAgJ3dlZWsnOiBjcmVhdGVEYXRlSW5wdXRUeXBlKCd3ZWVrJywgV0VFS19SRUdFWFAsIHdlZWtQYXJzZXIsICd5eXl5LVd3dycpLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbbW9udGhdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBJbnB1dCB3aXRoIG1vbnRoIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBJbiBicm93c2VycyB0aGF0IGRvIG5vdCB5ZXQgc3VwcG9ydFxuICAgKiB0aGUgSFRNTDUgbW9udGggaW5wdXQsIGEgdGV4dCBlbGVtZW50IHdpbGwgYmUgdXNlZC4gSW4gdGhhdCBjYXNlLCB0aGUgdGV4dCBtdXN0IGJlIGVudGVyZWQgaW4gYSB2YWxpZCBJU08tODYwMVxuICAgKiBtb250aCBmb3JtYXQgKHl5eXktTU0pLCBmb3IgZXhhbXBsZTogYDIwMDktMDFgLlxuICAgKlxuICAgKiBUaGUgbW9kZWwgbXVzdCBhbHdheXMgYmUgYSBEYXRlIG9iamVjdCwgb3RoZXJ3aXNlIEFuZ3VsYXIgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogSW52YWxpZCBgRGF0ZWAgb2JqZWN0cyAoZGF0ZXMgd2hvc2UgYGdldFRpbWUoKWAgaXMgYE5hTmApIHdpbGwgYmUgcmVuZGVyZWQgYXMgYW4gZW1wdHkgc3RyaW5nLlxuICAgKiBJZiB0aGUgbW9kZWwgaXMgbm90IHNldCB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLCB0aGUgbmV4dCB2aWV3IHRvIG1vZGVsIHVwZGF0ZSB3aWxsIHNldCBpdFxuICAgKiB0byB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoLlxuICAgKlxuICAgKiBUaGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGNhbiBiZSBkZWZpbmVkIHVzaW5nXG4gICAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9LiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3Nlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBhbmd1bGFyIGV4cHJlc3Npb24gdG8gZGF0YS1iaW5kIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWluIFNldHMgdGhlIGBtaW5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGxlc3MgdGhhbiBgbWluYC5cbiAgICogICBUaGlzIG11c3QgYmUgYSB2YWxpZCBJU08gbW9udGggZm9ybWF0ICh5eXl5LU1NKS4gWW91IGNhbiBhbHNvIHVzZSBpbnRlcnBvbGF0aW9uIGluc2lkZSB0aGlzXG4gICAqICAgYXR0cmlidXRlIChlLmcuIGBtaW49XCJ7e21pbk1vbnRoIHwgZGF0ZToneXl5eS1NTSd9fVwiYCkuIE5vdGUgdGhhdCBgbWluYCB3aWxsIGFsc28gYWRkXG4gICAqICAgbmF0aXZlIEhUTUw1IGNvbnN0cmFpbnQgdmFsaWRhdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBtYXhgLlxuICAgKiAgIFRoaXMgbXVzdCBiZSBhIHZhbGlkIElTTyBtb250aCBmb3JtYXQgKHl5eXktTU0pLiBZb3UgY2FuIGFsc28gdXNlIGludGVycG9sYXRpb24gaW5zaWRlIHRoaXNcbiAgICogICBhdHRyaWJ1dGUgKGUuZy4gYG1heD1cInt7bWF4TW9udGggfCBkYXRlOid5eXl5LU1NJ319XCJgKS4gTm90ZSB0aGF0IGBtYXhgIHdpbGwgYWxzbyBhZGRcbiAgICogICBuYXRpdmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uLlxuICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gd2VlayBzdHJpbmdcbiAgICogICB0aGUgYG5nTWluYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1pbmAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0geyhkYXRlfHN0cmluZyk9fSBuZ01heCBTZXRzIHRoZSBgbWF4YCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG8gdGhlIERhdGUgLyBJU08gd2VlayBzdHJpbmdcbiAgICogICB0aGUgYG5nTWF4YCBleHByZXNzaW9uIGV2YWx1YXRlcyB0by4gTm90ZSB0aGF0IGl0IGRvZXMgbm90IHNldCB0aGUgYG1heGAgYXR0cmlidXRlLlxuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ1JlcXVpcmVkIEFkZHMgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgYW5kIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gICAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gICAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJtb250aC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJtb250aEV4YW1wbGVcIj5cbiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgIDxzY3JpcHQ+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnbW9udGhFeGFtcGxlJywgW10pXG4gICAgICAgIC5jb250cm9sbGVyKCdEYXRlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgJHNjb3BlLmV4YW1wbGUgPSB7XG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoMjAxMywgOSwgMSlcbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgIDwvc2NyaXB0PlxuICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkRhdGVDb250cm9sbGVyIGFzIGRhdGVDdHJsXCI+XG4gICAgICAgPGxhYmVsIGZvcj1cImV4YW1wbGVJbnB1dFwiPlBpY2sgYSBtb250aCBpbiAyMDEzOjwvbGFiZWw+XG4gICAgICAgPGlucHV0IGlkPVwiZXhhbXBsZUlucHV0XCIgdHlwZT1cIm1vbnRoXCIgbmFtZT1cImlucHV0XCIgbmctbW9kZWw9XCJleGFtcGxlLnZhbHVlXCJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cInl5eXktTU1cIiBtaW49XCIyMDEzLTAxXCIgbWF4PVwiMjAxMy0xMlwiIHJlcXVpcmVkIC8+XG4gICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0uaW5wdXQuJGVycm9yLm1vbnRoXCI+XG4gICAgICAgICAgICBOb3QgYSB2YWxpZCBtb250aCE8L3NwYW4+XG4gICAgICAgPC9kaXY+XG4gICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlIHwgZGF0ZTogXCJ5eXl5LU1NXCJ9fTwvdHQ+PGJyLz5cbiAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgIDwvZm9ybT5cbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZSB8IGRhdGU6IFwieXl5eS1NTVwiJykpO1xuICAgICAgdmFyIHZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0uaW5wdXQuJHZhbGlkJykpO1xuXG4gICAgICAvLyBjdXJyZW50bHkgcHJvdHJhY3Rvci93ZWJkcml2ZXIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAgLy8gc2VuZGluZyBrZXlzIHRvIGFsbCBrbm93biBIVE1MNSBpbnB1dCBjb250cm9sc1xuICAgICAgLy8gZm9yIHZhcmlvdXMgYnJvd3NlcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3Byb3RyYWN0b3IvaXNzdWVzLzU2MikuXG4gICAgICBmdW5jdGlvbiBzZXRJbnB1dCh2YWwpIHtcbiAgICAgICAgLy8gc2V0IHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhbmQgZm9yY2UgdmFsaWRhdGlvbi5cbiAgICAgICAgdmFyIHNjciA9IFwidmFyIGlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlSW5wdXQnKTsgXCIgK1xuICAgICAgICBcImlwdC52YWx1ZSA9ICdcIiArIHZhbCArIFwiJztcIiArXG4gICAgICAgIFwiYW5ndWxhci5lbGVtZW50KGlwdCkuc2NvcGUoKS4kYXBwbHkoZnVuY3Rpb24ocykgeyBzLm15Rm9ybVtpcHQubmFtZV0uJHNldFZpZXdWYWx1ZSgnXCIgKyB2YWwgKyBcIicpOyB9KTtcIjtcbiAgICAgICAgYnJvd3Nlci5leGVjdXRlU2NyaXB0KHNjcik7XG4gICAgICB9XG5cbiAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJzIwMTMtMTAnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gdHJ1ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRJbnB1dCgnJyk7XG4gICAgICAgIGV4cGVjdCh2YWx1ZS5nZXRUZXh0KCkpLnRvRXF1YWwoJ3ZhbHVlID0nKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0SW5wdXQoJzIwMTUtMDEnKTtcbiAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCdteUZvcm0uaW5wdXQuJHZhbGlkID0gZmFsc2UnKTtcbiAgICAgIH0pO1xuICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ21vbnRoJzogY3JlYXRlRGF0ZUlucHV0VHlwZSgnbW9udGgnLCBNT05USF9SRUdFWFAsXG4gICAgIGNyZWF0ZURhdGVQYXJzZXIoTU9OVEhfUkVHRVhQLCBbJ3l5eXknLCAnTU0nXSksXG4gICAgICd5eXl5LU1NJyksXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBpbnB1dFxuICAgKiBAbmFtZSBpbnB1dFtudW1iZXJdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUZXh0IGlucHV0IHdpdGggbnVtYmVyIHZhbGlkYXRpb24gYW5kIHRyYW5zZm9ybWF0aW9uLiBTZXRzIHRoZSBgbnVtYmVyYCB2YWxpZGF0aW9uXG4gICAqIGVycm9yIGlmIG5vdCBhIHZhbGlkIG51bWJlci5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogVGhlIG1vZGVsIG11c3QgYWx3YXlzIGJlIG9mIHR5cGUgYG51bWJlcmAgb3RoZXJ3aXNlIEFuZ3VsYXIgd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICogQmUgYXdhcmUgdGhhdCBhIHN0cmluZyBjb250YWluaW5nIGEgbnVtYmVyIGlzIG5vdCBlbm91Z2guIFNlZSB0aGUge0BsaW5rIG5nTW9kZWw6bnVtZm10fVxuICAgKiBlcnJvciBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9uIGFuZCBhbiBleGFtcGxlIG9mIGhvdyB0byBjb252ZXJ0IHlvdXIgbW9kZWwgaWYgbmVjZXNzYXJ5LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogIyMgSXNzdWVzIHdpdGggSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uXG4gICAqXG4gICAqIEluIGJyb3dzZXJzIHRoYXQgZm9sbG93IHRoZVxuICAgKiBbSFRNTDUgc3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNudW1iZXItc3RhdGUtJTI4dHlwZT1udW1iZXIlMjkpLFxuICAgKiBgaW5wdXRbbnVtYmVyXWAgZG9lcyBub3Qgd29yayBhcyBleHBlY3RlZCB3aXRoIHtAbGluayBuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnMuYWxsb3dJbnZhbGlkYH0uXG4gICAqIElmIGEgbm9uLW51bWJlciBpcyBlbnRlcmVkIGluIHRoZSBpbnB1dCwgdGhlIGJyb3dzZXIgd2lsbCByZXBvcnQgdGhlIHZhbHVlIGFzIGFuIGVtcHR5IHN0cmluZyxcbiAgICogd2hpY2ggbWVhbnMgdGhlIHZpZXcgLyBtb2RlbCB2YWx1ZXMgaW4gYG5nTW9kZWxgIGFuZCBzdWJzZXF1ZW50bHkgdGhlIHNjb3BlIHZhbHVlXG4gICAqIHdpbGwgYWxzbyBiZSBhbiBlbXB0eSBzdHJpbmcuXG4gICAqXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG1pbiBTZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1pbmAuXG4gICAqICAgIENhbiBiZSBpbnRlcnBvbGF0ZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbWF4IFNldHMgdGhlIGBtYXhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGlzIGdyZWF0ZXIgdGhhbiBgbWF4YC5cbiAgICogICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ01pbiBMaWtlIGBtaW5gLCBzZXRzIHRoZSBgbWluYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG5nTWluYCxcbiAgICogICAgYnV0IGRvZXMgbm90IHRyaWdnZXIgSFRNTDUgbmF0aXZlIHZhbGlkYXRpb24uIFRha2VzIGFuIGV4cHJlc3Npb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdNYXggTGlrZSBgbWF4YCwgc2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgaXMgZ3JlYXRlciB0aGFuIGBuZ01heGAsXG4gICAqICAgIGJ1dCBkb2VzIG5vdCB0cmlnZ2VyIEhUTUw1IG5hdGl2ZSB2YWxpZGF0aW9uLiBUYWtlcyBhbiBleHByZXNzaW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHN0ZXAgU2V0cyB0aGUgYHN0ZXBgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBlbnRlcmVkIGRvZXMgbm90IGZpdCB0aGUgYHN0ZXBgIGNvbnN0cmFpbnQuXG4gICAqICAgIENhbiBiZSBpbnRlcnBvbGF0ZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdTdGVwIExpa2UgYHN0ZXBgLCBzZXRzIHRoZSBgc3RlcGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGVudGVyZWQgZG9lcyBub3QgZml0IHRoZSBgbmdTdGVwYCBjb25zdHJhaW50LFxuICAgKiAgICBidXQgZG9lcyBub3QgdHJpZ2dlciBIVE1MNSBuYXRpdmUgdmFsaWRhdGlvbi4gVGFrZXMgYW4gZXhwcmVzc2lvbi5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gICAqICAgIG1pbmxlbmd0aC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxuICAgKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2ZcbiAgICogICAgYW55IGxlbmd0aC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBwYXR0ZXJuIFNpbWlsYXIgdG8gYG5nUGF0dGVybmAgZXhjZXB0IHRoYXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBpcyB0aGUgYWN0dWFsIHN0cmluZ1xuICAgKiAgICB0aGF0IGNvbnRhaW5zIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gYm9keSB0aGF0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgcmVndWxhciBleHByZXNzaW9uXG4gICAqICAgIGFzIGluIHRoZSBuZ1BhdHRlcm4gZGlyZWN0aXZlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gICAqICAgIGRvZXMgbm90IG1hdGNoIGEgUmVnRXhwIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBSZWdFeHAgb2JqZWN0LCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwXG4gICAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gICAqICAgIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC48YnIgLz5cbiAgICogICAgKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAgICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAgICogICAgYWNjb3VudC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwibnVtYmVyLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cIm51bWJlckV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdudW1iZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5leGFtcGxlID0ge1xuICAgICAgICAgICAgICAgICB2YWx1ZTogMTJcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5OdW1iZXI6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cImV4YW1wbGUudmFsdWVcIlxuICAgICAgICAgICAgICAgICAgICBtaW49XCIwXCIgbWF4PVwiOTlcIiByZXF1aXJlZD5cbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICA8ZGl2IHJvbGU9XCJhbGVydFwiPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5udW1iZXJcIj5cbiAgICAgICAgICAgICAgIE5vdCB2YWxpZCBudW1iZXIhPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgPHR0PnZhbHVlID0ge3tleGFtcGxlLnZhbHVlfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJGVycm9yID0ge3tteUZvcm0uaW5wdXQuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJHZhbGlkID0ge3tteUZvcm0uJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQoYnkuYmluZGluZygnZXhhbXBsZS52YWx1ZScpKTtcbiAgICAgICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5pbnB1dC4kdmFsaWQnKSk7XG4gICAgICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnZXhhbXBsZS52YWx1ZScpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHZhbHVlLmdldFRleHQoKSkudG9Db250YWluKCcxMicpO1xuICAgICAgICAgICAgZXhwZWN0KHZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgb3ZlciBtYXgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnMTIzJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsdWUuZ2V0VGV4dCgpKS50b0VxdWFsKCd2YWx1ZSA9Jyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdudW1iZXInOiBudW1iZXJJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3VybF1cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFRleHQgaW5wdXQgd2l0aCBVUkwgdmFsaWRhdGlvbi4gU2V0cyB0aGUgYHVybGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIGNvbnRlbnQgaXMgbm90IGFcbiAgICogdmFsaWQgVVJMLlxuICAgKlxuICAgKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICAgKiAqKk5vdGU6KiogYGlucHV0W3VybF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSB1cmxzIHRoYXQgaXMgZGVyaXZlZCBmcm9tIHRoZSByZWdleFxuICAgKiB1c2VkIGluIENocm9taXVtLiBJZiB5b3UgbmVlZCBzdHJpY3RlciB2YWxpZGF0aW9uLCB5b3UgY2FuIHVzZSBgbmctcGF0dGVybmAgb3IgbW9kaWZ5XG4gICAqIHRoZSBidWlsdC1pbiB2YWxpZGF0b3JzIChzZWUgdGhlIHtAbGluayBndWlkZS9mb3JtcyBGb3JtcyBndWlkZX0pXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBTZXRzIGByZXF1aXJlZGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIG5vdCBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAgICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAgICogICAgYHJlcXVpcmVkYCB3aGVuIHlvdSB3YW50IHRvIGRhdGEtYmluZCB0byB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gICAqICAgIG1pbmxlbmd0aC5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01heGxlbmd0aCBTZXRzIGBtYXhsZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBsb25nZXIgdGhhblxuICAgKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2ZcbiAgICogICAgYW55IGxlbmd0aC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBwYXR0ZXJuIFNpbWlsYXIgdG8gYG5nUGF0dGVybmAgZXhjZXB0IHRoYXQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBpcyB0aGUgYWN0dWFsIHN0cmluZ1xuICAgKiAgICB0aGF0IGNvbnRhaW5zIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gYm9keSB0aGF0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgcmVndWxhciBleHByZXNzaW9uXG4gICAqICAgIGFzIGluIHRoZSBuZ1BhdHRlcm4gZGlyZWN0aXZlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gICAqICAgIGRvZXMgbm90IG1hdGNoIGEgUmVnRXhwIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBSZWdFeHAgb2JqZWN0LCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cbiAgICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwXG4gICAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gICAqICAgIGBuZXcgUmVnRXhwKCdeYWJjJCcpYC48YnIgLz5cbiAgICogICAgKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAgICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAgICogICAgYWNjb3VudC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gICAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwidXJsLWlucHV0LWRpcmVjdGl2ZVwiIG1vZHVsZT1cInVybEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd1cmxFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS51cmwgPSB7XG4gICAgICAgICAgICAgICAgIHRleHQ6ICdodHRwOi8vZ29vZ2xlLmNvbSdcbiAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgfV0pO1xuICAgICAgICAgPC9zY3JpcHQ+XG4gICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgIDxsYWJlbD5VUkw6XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ1cmxcIiBuYW1lPVwiaW5wdXRcIiBuZy1tb2RlbD1cInVybC50ZXh0XCIgcmVxdWlyZWQ+XG4gICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgIFJlcXVpcmVkITwvc3Bhbj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IudXJsXCI+XG4gICAgICAgICAgICAgICBOb3QgdmFsaWQgdXJsITwvc3Bhbj5cbiAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIDx0dD50ZXh0ID0ge3t1cmwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiR2YWxpZCA9IHt7bXlGb3JtLmlucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLmlucHV0LiRlcnJvciA9IHt7bXlGb3JtLmlucHV0LiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5yZXF1aXJlZCA9IHt7ISFteUZvcm0uJGVycm9yLnJlcXVpcmVkfX08L3R0Pjxici8+XG4gICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnVybCA9IHt7ISFteUZvcm0uJGVycm9yLnVybH19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgdmFyIHRleHQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ3VybC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1cmwudGV4dCcpKTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2h0dHA6Ly9nb29nbGUuY29tJyk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBlbXB0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgdXJsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2JveCcpO1xuXG4gICAgICAgICAgICBleHBlY3QodmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICd1cmwnOiB1cmxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W2VtYWlsXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogVGV4dCBpbnB1dCB3aXRoIGVtYWlsIHZhbGlkYXRpb24uIFNldHMgdGhlIGBlbWFpbGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgbm90IGEgdmFsaWQgZW1haWxcbiAgICogYWRkcmVzcy5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogKipOb3RlOioqIGBpbnB1dFtlbWFpbF1gIHVzZXMgYSByZWdleCB0byB2YWxpZGF0ZSBlbWFpbCBhZGRyZXNzZXMgdGhhdCBpcyBkZXJpdmVkIGZyb20gdGhlIHJlZ2V4XG4gICAqIHVzZWQgaW4gQ2hyb21pdW0uIElmIHlvdSBuZWVkIHN0cmljdGVyIHZhbGlkYXRpb24gKGUuZy4gcmVxdWlyaW5nIGEgdG9wLWxldmVsIGRvbWFpbiksIHlvdSBjYW5cbiAgICogdXNlIGBuZy1wYXR0ZXJuYCBvciBtb2RpZnkgdGhlIGJ1aWx0LWluIHZhbGlkYXRvcnMgKHNlZSB0aGUge0BsaW5rIGd1aWRlL2Zvcm1zIEZvcm1zIGd1aWRlfSlcbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICAgKiAgICB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBgbmdSZXF1aXJlZGAgaW5zdGVhZCBvZlxuICAgKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAgICogICAgbWlubGVuZ3RoLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gICAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZlxuICAgKiAgICBhbnkgbGVuZ3RoLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IHBhdHRlcm4gU2ltaWxhciB0byBgbmdQYXR0ZXJuYCBleGNlcHQgdGhhdCB0aGUgYXR0cmlidXRlIHZhbHVlIGlzIHRoZSBhY3R1YWwgc3RyaW5nXG4gICAqICAgIHRoYXQgY29udGFpbnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiBib2R5IHRoYXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICogICAgYXMgaW4gdGhlIG5nUGF0dGVybiBkaXJlY3RpdmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogICAgZG9lcyBub3QgbWF0Y2ggYSBSZWdFeHAgZm91bmQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhciBleHByZXNzaW9uIGdpdmVuIGluIHRoZSBhdHRyaWJ1dGUgdmFsdWUuXG4gICAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QsIHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICAgKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHBcbiAgICogICAgYWZ0ZXIgd3JhcHBpbmcgaXQgaW4gYF5gIGFuZCBgJGAgY2hhcmFjdGVycy4gRm9yIGluc3RhbmNlLCBgXCJhYmNcImAgd2lsbCBiZSBjb252ZXJ0ZWQgdG9cbiAgICogICAgYG5ldyBSZWdFeHAoJ15hYmMkJylgLjxiciAvPlxuICAgKiAgICAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICAgKiAgICBzdGFydCBhdCB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgc2VhcmNoJ3MgbWF0Y2gsIHRodXMgbm90IHRha2luZyB0aGUgd2hvbGUgaW5wdXQgdmFsdWUgaW50b1xuICAgKiAgICBhY2NvdW50LlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJlbWFpbC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJlbWFpbEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdlbWFpbEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmVtYWlsID0ge1xuICAgICAgICAgICAgICAgICB0ZXh0OiAnbWVAZXhhbXBsZS5jb20nXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgICAgPGxhYmVsPkVtYWlsOlxuICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJlbWFpbFwiIG5hbWU9XCJpbnB1dFwiIG5nLW1vZGVsPVwiZW1haWwudGV4dFwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1zaG93PVwibXlGb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZFwiPlxuICAgICAgICAgICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5pbnB1dC4kZXJyb3IuZW1haWxcIj5cbiAgICAgICAgICAgICAgICAgTm90IHZhbGlkIGVtYWlsITwvc3Bhbj5cbiAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICA8dHQ+dGV4dCA9IHt7ZW1haWwudGV4dH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uaW5wdXQuJHZhbGlkID0ge3tteUZvcm0uaW5wdXQuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICAgICAgPHR0Pm15Rm9ybS5pbnB1dC4kZXJyb3IgPSB7e215Rm9ybS5pbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgICAgIDx0dD5teUZvcm0uJGVycm9yLnJlcXVpcmVkID0ge3shIW15Rm9ybS4kZXJyb3IucmVxdWlyZWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5lbWFpbCA9IHt7ISFteUZvcm0uJGVycm9yLmVtYWlsfX08L3R0Pjxici8+XG4gICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIHZhciB0ZXh0ID0gZWxlbWVudChieS5iaW5kaW5nKCdlbWFpbC50ZXh0JykpO1xuICAgICAgICAgIHZhciB2YWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmlucHV0LiR2YWxpZCcpKTtcbiAgICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCdlbWFpbC50ZXh0JykpO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBleHBlY3QodGV4dC5nZXRUZXh0KCkpLnRvQ29udGFpbignbWVAZXhhbXBsZS5jb20nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbnB1dC5jbGVhcigpO1xuICAgICAgICAgICAgaW5wdXQuc2VuZEtleXMoJycpO1xuICAgICAgICAgICAgZXhwZWN0KHRleHQuZ2V0VGV4dCgpKS50b0VxdWFsKCd0ZXh0ID0nKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGl0KCdzaG91bGQgYmUgaW52YWxpZCBpZiBub3QgZW1haWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlucHV0LmNsZWFyKCk7XG4gICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygneHh4Jyk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgPC9maWxlPlxuICAgICAgPC9leGFtcGxlPlxuICAgKi9cbiAgJ2VtYWlsJzogZW1haWxJbnB1dFR5cGUsXG5cblxuICAvKipcbiAgICogQG5nZG9jIGlucHV0XG4gICAqIEBuYW1lIGlucHV0W3JhZGlvXVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogSFRNTCByYWRpbyBidXR0b24uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgYG5nTW9kZWxgIGV4cHJlc3Npb24gc2hvdWxkIGJlIHNldCB3aGVuIHNlbGVjdGVkLlxuICAgKiAgICBOb3RlIHRoYXQgYHZhbHVlYCBvbmx5IHN1cHBvcnRzIGBzdHJpbmdgIHZhbHVlcywgaS5lLiB0aGUgc2NvcGUgbW9kZWwgbmVlZHMgdG8gYmUgYSBzdHJpbmcsXG4gICAqICAgIHRvby4gVXNlIGBuZ1ZhbHVlYCBpZiB5b3UgbmVlZCBjb21wbGV4IG1vZGVscyAoYG51bWJlcmAsIGBvYmplY3RgLCAuLi4pLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmdDaGFuZ2UgQW5ndWxhciBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gaW5wdXQgY2hhbmdlcyBkdWUgdG8gdXNlclxuICAgKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdWYWx1ZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gd2hpY2ggYG5nTW9kZWxgIHdpbGwgYmUgYmUgc2V0IHdoZW4gdGhlIHJhZGlvXG4gICAqICAgIGlzIHNlbGVjdGVkLiBTaG91bGQgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBgdmFsdWVgIGF0dHJpYnV0ZSBpZiB5b3UgbmVlZFxuICAgKiAgICBhIG5vbi1zdHJpbmcgYG5nTW9kZWxgIChgYm9vbGVhbmAsIGBhcnJheWAsIC4uLikuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAgICA8ZXhhbXBsZSBuYW1lPVwicmFkaW8taW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwicmFkaW9FeGFtcGxlXCI+XG4gICAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgncmFkaW9FeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgICRzY29wZS5jb2xvciA9IHtcbiAgICAgICAgICAgICAgICAgbmFtZTogJ2JsdWUnXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgJHNjb3BlLnNwZWNpYWxWYWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgXCJpZFwiOiBcIjEyMzQ1XCIsXG4gICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJncmVlblwiXG4gICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5nLW1vZGVsPVwiY29sb3IubmFtZVwiIHZhbHVlPVwicmVkXCI+XG4gICAgICAgICAgICAgUmVkXG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiBuZy12YWx1ZT1cInNwZWNpYWxWYWx1ZVwiPlxuICAgICAgICAgICAgIEdyZWVuXG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuZy1tb2RlbD1cImNvbG9yLm5hbWVcIiB2YWx1ZT1cImJsdWVcIj5cbiAgICAgICAgICAgICBCbHVlXG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPHR0PmNvbG9yID0ge3tjb2xvci5uYW1lIHwganNvbn19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICBOb3RlIHRoYXQgYG5nLXZhbHVlPVwic3BlY2lhbFZhbHVlXCJgIHNldHMgcmFkaW8gaXRlbSdzIHZhbHVlIHRvIGJlIHRoZSB2YWx1ZSBvZiBgJHNjb3BlLnNwZWNpYWxWYWx1ZWAuXG4gICAgICAgIDwvZmlsZT5cbiAgICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHN0YXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRzID0gZWxlbWVudC5hbGwoYnkubW9kZWwoJ2NvbG9yLm5hbWUnKSk7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvbG9yLm5hbWUnKSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChjb2xvci5nZXRUZXh0KCkpLnRvQ29udGFpbignYmx1ZScpO1xuXG4gICAgICAgICAgICBpbnB1dHMuZ2V0KDApLmNsaWNrKCk7XG4gICAgICAgICAgICBleHBlY3QoY29sb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3JlZCcpO1xuXG4gICAgICAgICAgICBpbnB1dHMuZ2V0KDEpLmNsaWNrKCk7XG4gICAgICAgICAgICBleHBlY3QoY29sb3IuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2dyZWVuJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdyYWRpbyc6IHJhZGlvSW5wdXRUeXBlLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbcmFuZ2VdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBOYXRpdmUgcmFuZ2UgaW5wdXQgd2l0aCB2YWxpZGF0aW9uIGFuZCB0cmFuc2Zvcm1hdGlvbi5cbiAgICpcbiAgICogVGhlIG1vZGVsIGZvciB0aGUgcmFuZ2UgaW5wdXQgbXVzdCBhbHdheXMgYmUgYSBgTnVtYmVyYC5cbiAgICpcbiAgICogSUU5IGFuZCBvdGhlciBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IHRoZSBgcmFuZ2VgIHR5cGUgZmFsbCBiYWNrXG4gICAqIHRvIGEgdGV4dCBpbnB1dCB3aXRob3V0IGFueSBkZWZhdWx0IHZhbHVlcyBmb3IgYG1pbmAsIGBtYXhgIGFuZCBgc3RlcGAuIE1vZGVsIGJpbmRpbmcsXG4gICAqIHZhbGlkYXRpb24gYW5kIG51bWJlciBwYXJzaW5nIGFyZSBuZXZlcnRoZWxlc3Mgc3VwcG9ydGVkLlxuICAgKlxuICAgKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgcmFuZ2UgKGxhdGVzdCBDaHJvbWUsIFNhZmFyaSwgRmlyZWZveCwgRWRnZSkgdHJlYXQgYGlucHV0W3JhbmdlXWBcbiAgICogaW4gYSB3YXkgdGhhdCBuZXZlciBhbGxvd3MgdGhlIGlucHV0IHRvIGhvbGQgYW4gaW52YWxpZCB2YWx1ZS4gVGhhdCBtZWFuczpcbiAgICogLSBhbnkgbm9uLW51bWVyaWNhbCB2YWx1ZSBpcyBzZXQgdG8gYChtYXggKyBtaW4pIC8gMmAuXG4gICAqIC0gYW55IG51bWVyaWNhbCB2YWx1ZSB0aGF0IGlzIGxlc3MgdGhhbiB0aGUgY3VycmVudCBtaW4gdmFsLCBvciBncmVhdGVyIHRoYW4gdGhlIGN1cnJlbnQgbWF4IHZhbFxuICAgKiBpcyBzZXQgdG8gdGhlIG1pbiAvIG1heCB2YWwgcmVzcGVjdGl2ZWx5LlxuICAgKiAtIGFkZGl0aW9uYWxseSwgdGhlIGN1cnJlbnQgYHN0ZXBgIGlzIHJlc3BlY3RlZCwgc28gdGhlIG5lYXJlc3QgdmFsdWUgdGhhdCBzYXRpc2ZpZXMgYSBzdGVwXG4gICAqIGlzIHVzZWQuXG4gICAqXG4gICAqIFNlZSB0aGUgW0hUTUwgU3BlYyBvbiBpbnB1dFt0eXBlPXJhbmdlXV0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjcmFuZ2Utc3RhdGUtKHR5cGU9cmFuZ2UpKVxuICAgKiBmb3IgbW9yZSBpbmZvLlxuICAgKlxuICAgKiBUaGlzIGhhcyB0aGUgZm9sbG93aW5nIGNvbnNlcXVlbmNlcyBmb3IgQW5ndWxhcjpcbiAgICpcbiAgICogU2luY2UgdGhlIGVsZW1lbnQgdmFsdWUgc2hvdWxkIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IG1vZGVsIHZhbHVlLCBhIHJhbmdlIGlucHV0XG4gICAqIHdpbGwgc2V0IHRoZSBib3VuZCBuZ01vZGVsIGV4cHJlc3Npb24gdG8gdGhlIHZhbHVlIHRoYXQgdGhlIGJyb3dzZXIgaGFzIHNldCBmb3IgdGhlXG4gICAqIGlucHV0IGVsZW1lbnQuIEZvciBleGFtcGxlLCBpbiB0aGUgZm9sbG93aW5nIGlucHV0IGA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbmctbW9kZWw9XCJtb2RlbC52YWx1ZVwiPmAsXG4gICAqIGlmIHRoZSBhcHBsaWNhdGlvbiBzZXRzIGBtb2RlbC52YWx1ZSA9IG51bGxgLCB0aGUgYnJvd3NlciB3aWxsIHNldCB0aGUgaW5wdXQgdG8gYCc1MCdgLlxuICAgKiBBbmd1bGFyIHdpbGwgdGhlbiBzZXQgdGhlIG1vZGVsIHRvIGA1MGAsIHRvIHByZXZlbnQgaW5wdXQgYW5kIG1vZGVsIHZhbHVlIGJlaW5nIG91dCBvZiBzeW5jLlxuICAgKlxuICAgKiBUaGF0IG1lYW5zIHRoZSBtb2RlbCBmb3IgcmFuZ2Ugd2lsbCBpbW1lZGlhdGVseSBiZSBzZXQgdG8gYDUwYCBhZnRlciBgbmdNb2RlbGAgaGFzIGJlZW5cbiAgICogaW5pdGlhbGl6ZWQuIEl0IGFsc28gbWVhbnMgYSByYW5nZSBpbnB1dCBjYW4gbmV2ZXIgaGF2ZSB0aGUgcmVxdWlyZWQgZXJyb3IuXG4gICAqXG4gICAqIFRoaXMgZG9lcyBub3Qgb25seSBhZmZlY3QgY2hhbmdlcyB0byB0aGUgbW9kZWwgdmFsdWUsIGJ1dCBhbHNvIHRvIHRoZSB2YWx1ZXMgb2YgdGhlIGBtaW5gLFxuICAgKiBgbWF4YCwgYW5kIGBzdGVwYCBhdHRyaWJ1dGVzLiBXaGVuIHRoZXNlIGNoYW5nZSBpbiBhIHdheSB0aGF0IHdpbGwgY2F1c2UgdGhlIGJyb3dzZXIgdG8gbW9kaWZ5XG4gICAqIHRoZSBpbnB1dCB2YWx1ZSwgQW5ndWxhciB3aWxsIGFsc28gdXBkYXRlIHRoZSBtb2RlbCB2YWx1ZS5cbiAgICpcbiAgICogQXV0b21hdGljIHZhbHVlIGFkanVzdG1lbnQgYWxzbyBtZWFucyB0aGF0IGEgcmFuZ2UgaW5wdXQgZWxlbWVudCBjYW4gbmV2ZXIgaGF2ZSB0aGUgYHJlcXVpcmVkYCxcbiAgICogYG1pbmAsIG9yIGBtYXhgIGVycm9ycy5cbiAgICpcbiAgICogSG93ZXZlciwgYHN0ZXBgIGlzIGN1cnJlbnRseSBvbmx5IGZ1bGx5IGltcGxlbWVudGVkIGJ5IEZpcmVmb3guIE90aGVyIGJyb3dzZXJzIGhhdmUgcHJvYmxlbXNcbiAgICogd2hlbiB0aGUgc3RlcCB2YWx1ZSBjaGFuZ2VzIGR5bmFtaWNhbGx5IC0gdGhleSBkbyBub3QgYWRqdXN0IHRoZSBlbGVtZW50IHZhbHVlIGNvcnJlY3RseSwgYnV0XG4gICAqIGluc3RlYWQgbWF5IHNldCB0aGUgYHN0ZXBNaXNtYXRjaGAgZXJyb3IuIElmIHRoYXQncyB0aGUgY2FzZSwgdGhlIEFuZ3VsYXIgd2lsbCBzZXQgdGhlIGBzdGVwYFxuICAgKiBlcnJvciBvbiB0aGUgaW5wdXQsIGFuZCBzZXQgdGhlIG1vZGVsIHRvIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgYGlucHV0W3JhbmdlXWAgaXMgbm90IGNvbXBhdGlibGUgd2l0aGBuZ01heGAsIGBuZ01pbmAsIGFuZCBgbmdTdGVwYCwgYmVjYXVzZSB0aGV5IGRvXG4gICAqIG5vdCBzZXQgdGhlIGBtaW5gIGFuZCBgbWF4YCBhdHRyaWJ1dGVzLCB3aGljaCBtZWFucyB0aGF0IHRoZSBicm93c2VyIHdvbid0IGF1dG9tYXRpY2FsbHkgYWRqdXN0XG4gICAqIHRoZSBpbnB1dCB2YWx1ZSBiYXNlZCBvbiB0aGVpciB2YWx1ZXMsIGFuZCB3aWxsIGFsd2F5cyBhc3N1bWUgbWluID0gMCwgbWF4ID0gMTAwLCBhbmQgc3RlcCA9IDEuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSAgbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtaW4gU2V0cyB0aGUgYG1pbmAgdmFsaWRhdGlvbiB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgZW50ZXJlZCBpcyBncmVhdGVyXG4gICAqICAgICAgICAgICAgICAgICAgdGhhbiBgbWluYC4gQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBtYXggU2V0cyB0aGUgYG1heGAgdmFsaWRhdGlvbiB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgZW50ZXJlZCBpcyBsZXNzIHRoYW4gYG1heGAuXG4gICAqICAgICAgICAgICAgICAgICAgQ2FuIGJlIGludGVycG9sYXRlZC5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBzdGVwIFNldHMgdGhlIGBzdGVwYCB2YWxpZGF0aW9uIHRvIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSBlbnRlcmVkIG1hdGNoZXMgdGhlIGBzdGVwYFxuICAgKiAgICAgICAgICAgICAgICAgIENhbiBiZSBpbnRlcnBvbGF0ZWQuXG4gICAqIEBwYXJhbSB7ZXhwcmVzc2lvbj19IG5nQ2hhbmdlIEFuZ3VsYXJKUyBleHByZXNzaW9uIHRvIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIG5nTW9kZWwgdmFsdWUgY2hhbmdlcyBkdWVcbiAgICogICAgICAgICAgICAgICAgICAgICAgdG8gdXNlciBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2V4cHJlc3Npb249fSBuZ0NoZWNrZWQgSWYgdGhlIGV4cHJlc3Npb24gaXMgdHJ1dGh5LCB0aGVuIHRoZSBgY2hlY2tlZGAgYXR0cmlidXRlIHdpbGwgYmUgc2V0IG9uIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LiAqKk5vdGUqKiA6IGBuZ0NoZWNrZWRgIHNob3VsZCBub3QgYmUgdXNlZCBhbG9uZ3NpZGUgYG5nTW9kZWxgLlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBDaGVja291dCB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2hlY2tlZCBuZ0NoZWNrZWR9IGZvciB1c2FnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJyYW5nZS1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJyYW5nZUV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3JhbmdlRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS52YWx1ZSA9IDc1O1xuICAgICAgICAgICAgICAgICRzY29wZS5taW4gPSAxMDtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWF4ID0gOTA7XG4gICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG5cbiAgICAgICAgICAgIE1vZGVsIGFzIHJhbmdlOiA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbmFtZT1cInJhbmdlXCIgbmctbW9kZWw9XCJ2YWx1ZVwiIG1pbj1cInt7bWlufX1cIiAgbWF4PVwie3ttYXh9fVwiPlxuICAgICAgICAgICAgPGhyPlxuICAgICAgICAgICAgTW9kZWwgYXMgbnVtYmVyOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwidmFsdWVcIj48YnI+XG4gICAgICAgICAgICBNaW46IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJtaW5cIj48YnI+XG4gICAgICAgICAgICBNYXg6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJtYXhcIj48YnI+XG4gICAgICAgICAgICB2YWx1ZSA9IDxjb2RlPnt7dmFsdWV9fTwvY29kZT48YnIvPlxuICAgICAgICAgICAgbXlGb3JtLnJhbmdlLiR2YWxpZCA9IDxjb2RlPnt7bXlGb3JtLnJhbmdlLiR2YWxpZH19PC9jb2RlPjxici8+XG4gICAgICAgICAgICBteUZvcm0ucmFuZ2UuJGVycm9yID0gPGNvZGU+e3tteUZvcm0ucmFuZ2UuJGVycm9yfX08L2NvZGU+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2ZpbGU+XG4gICAgICA8L2V4YW1wbGU+XG5cbiAgICogIyMgUmFuZ2UgSW5wdXQgd2l0aCBuZ01pbiAmIG5nTWF4IGF0dHJpYnV0ZXNcblxuICAgKiBAZXhhbXBsZVxuICAgICAgPGV4YW1wbGUgbmFtZT1cInJhbmdlLWlucHV0LWRpcmVjdGl2ZS1uZ1wiIG1vZHVsZT1cInJhbmdlRXhhbXBsZVwiPlxuICAgICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgICBhbmd1bGFyLm1vZHVsZSgncmFuZ2VFeGFtcGxlJywgW10pXG4gICAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnZhbHVlID0gNzU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1pbiA9IDEwO1xuICAgICAgICAgICAgICAgICRzY29wZS5tYXggPSA5MDtcbiAgICAgICAgICAgICAgfV0pO1xuICAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICAgIE1vZGVsIGFzIHJhbmdlOiA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbmFtZT1cInJhbmdlXCIgbmctbW9kZWw9XCJ2YWx1ZVwiIG5nLW1pbj1cIm1pblwiIG5nLW1heD1cIm1heFwiPlxuICAgICAgICAgICAgPGhyPlxuICAgICAgICAgICAgTW9kZWwgYXMgbnVtYmVyOiA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwidmFsdWVcIj48YnI+XG4gICAgICAgICAgICBNaW46IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJtaW5cIj48YnI+XG4gICAgICAgICAgICBNYXg6IDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJtYXhcIj48YnI+XG4gICAgICAgICAgICB2YWx1ZSA9IDxjb2RlPnt7dmFsdWV9fTwvY29kZT48YnIvPlxuICAgICAgICAgICAgbXlGb3JtLnJhbmdlLiR2YWxpZCA9IDxjb2RlPnt7bXlGb3JtLnJhbmdlLiR2YWxpZH19PC9jb2RlPjxici8+XG4gICAgICAgICAgICBteUZvcm0ucmFuZ2UuJGVycm9yID0gPGNvZGU+e3tteUZvcm0ucmFuZ2UuJGVycm9yfX08L2NvZGU+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2ZpbGU+XG4gICAgICA8L2V4YW1wbGU+XG5cbiAgICovXG4gICdyYW5nZSc6IHJhbmdlSW5wdXRUeXBlLFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgaW5wdXRcbiAgICogQG5hbWUgaW5wdXRbY2hlY2tib3hdXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBIVE1MIGNoZWNrYm94LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAgICogQHBhcmFtIHtleHByZXNzaW9uPX0gbmdUcnVlVmFsdWUgVGhlIHZhbHVlIHRvIHdoaWNoIHRoZSBleHByZXNzaW9uIHNob3VsZCBiZSBzZXQgd2hlbiBzZWxlY3RlZC5cbiAgICogQHBhcmFtIHtleHByZXNzaW9uPX0gbmdGYWxzZVZhbHVlIFRoZSB2YWx1ZSB0byB3aGljaCB0aGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgc2V0IHdoZW4gbm90IHNlbGVjdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAgICogICAgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICAgIDxleGFtcGxlIG5hbWU9XCJjaGVja2JveC1pbnB1dC1kaXJlY3RpdmVcIiBtb2R1bGU9XCJjaGVja2JveEV4YW1wbGVcIj5cbiAgICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdjaGVja2JveEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrYm94TW9kZWwgPSB7XG4gICAgICAgICAgICAgICAgdmFsdWUxIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTIgOiAnWUVTJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgIDwvc2NyaXB0PlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgICA8bGFiZWw+VmFsdWUxOlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrYm94TW9kZWwudmFsdWUxXCI+XG4gICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICAgPGxhYmVsPlZhbHVlMjpcbiAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2JveE1vZGVsLnZhbHVlMlwiXG4gICAgICAgICAgICAgICAgICAgIG5nLXRydWUtdmFsdWU9XCInWUVTJ1wiIG5nLWZhbHNlLXZhbHVlPVwiJ05PJ1wiPlxuICAgICAgICAgICAgPC9sYWJlbD48YnIvPlxuICAgICAgICAgICA8dHQ+dmFsdWUxID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMX19PC90dD48YnIvPlxuICAgICAgICAgICA8dHQ+dmFsdWUyID0ge3tjaGVja2JveE1vZGVsLnZhbHVlMn19PC90dD48YnIvPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9maWxlPlxuICAgICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2Ugc3RhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZTEgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NoZWNrYm94TW9kZWwudmFsdWUxJykpO1xuICAgICAgICAgICAgdmFyIHZhbHVlMiA9IGVsZW1lbnQoYnkuYmluZGluZygnY2hlY2tib3hNb2RlbC52YWx1ZTInKSk7XG5cbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTEuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1lFUycpO1xuXG4gICAgICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2JveE1vZGVsLnZhbHVlMScpKS5jbGljaygpO1xuICAgICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnY2hlY2tib3hNb2RlbC52YWx1ZTInKSkuY2xpY2soKTtcblxuICAgICAgICAgICAgZXhwZWN0KHZhbHVlMS5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWx1ZTIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ05PJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIDwvZmlsZT5cbiAgICAgIDwvZXhhbXBsZT5cbiAgICovXG4gICdjaGVja2JveCc6IGNoZWNrYm94SW5wdXRUeXBlLFxuXG4gICdoaWRkZW4nOiBub29wLFxuICAnYnV0dG9uJzogbm9vcCxcbiAgJ3N1Ym1pdCc6IG5vb3AsXG4gICdyZXNldCc6IG5vb3AsXG4gICdmaWxlJzogbm9vcFxufTtcblxuZnVuY3Rpb24gc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCkge1xuICBjdHJsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgPyB2YWx1ZSA6IHZhbHVlLnRvU3RyaW5nKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB0ZXh0SW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgYmFzZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyKTtcbiAgc3RyaW5nQmFzZWRJbnB1dFR5cGUoY3RybCk7XG59XG5cbmZ1bmN0aW9uIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICB2YXIgdHlwZSA9IGxvd2VyY2FzZShlbGVtZW50WzBdLnR5cGUpO1xuXG4gIC8vIEluIGNvbXBvc2l0aW9uIG1vZGUsIHVzZXJzIGFyZSBzdGlsbCBpbnB1dHRpbmcgaW50ZXJtZWRpYXRlIHRleHQgYnVmZmVyLFxuICAvLyBob2xkIHRoZSBsaXN0ZW5lciB1bnRpbCBjb21wb3NpdGlvbiBpcyBkb25lLlxuICAvLyBNb3JlIGFib3V0IGNvbXBvc2l0aW9uIGV2ZW50czogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0NvbXBvc2l0aW9uRXZlbnRcbiAgaWYgKCEkc25pZmZlci5hbmRyb2lkKSB7XG4gICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuXG4gICAgZWxlbWVudC5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGVsZW1lbnQub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdGltZW91dDtcblxuICB2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAkYnJvd3Nlci5kZWZlci5jYW5jZWwodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKGNvbXBvc2luZykgcmV0dXJuO1xuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsKCksXG4gICAgICAgIGV2ZW50ID0gZXYgJiYgZXYudHlwZTtcblxuICAgIC8vIEJ5IGRlZmF1bHQgd2Ugd2lsbCB0cmltIHRoZSB2YWx1ZVxuICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgbmctdHJpbSBleGlzdHMgd2Ugd2lsbCBhdm9pZCB0cmltbWluZ1xuICAgIC8vIElmIGlucHV0IHR5cGUgaXMgJ3Bhc3N3b3JkJywgdGhlIHZhbHVlIGlzIG5ldmVyIHRyaW1tZWRcbiAgICBpZiAodHlwZSAhPT0gJ3Bhc3N3b3JkJyAmJiAoIWF0dHIubmdUcmltIHx8IGF0dHIubmdUcmltICE9PSAnZmFsc2UnKSkge1xuICAgICAgdmFsdWUgPSB0cmltKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBJZiBhIGNvbnRyb2wgaXMgc3VmZmVyaW5nIGZyb20gYmFkIGlucHV0IChkdWUgdG8gbmF0aXZlIHZhbGlkYXRvcnMpLCBicm93c2VycyBkaXNjYXJkIGl0c1xuICAgIC8vIHZhbHVlLCBzbyBpdCBtYXkgYmUgbmVjZXNzYXJ5IHRvIHJldmFsaWRhdGUgKGJ5IGNhbGxpbmcgJHNldFZpZXdWYWx1ZSBhZ2FpbikgZXZlbiBpZiB0aGVcbiAgICAvLyBjb250cm9sJ3MgdmFsdWUgaXMgdGhlIHNhbWUgZW1wdHkgdmFsdWUgdHdpY2UgaW4gYSByb3cuXG4gICAgaWYgKGN0cmwuJHZpZXdWYWx1ZSAhPT0gdmFsdWUgfHwgKHZhbHVlID09PSAnJyAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycykpIHtcbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZSh2YWx1ZSwgZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvLyBpZiB0aGUgYnJvd3NlciBkb2VzIHN1cHBvcnQgXCJpbnB1dFwiIGV2ZW50LCB3ZSBhcmUgZmluZSAtIGV4Y2VwdCBvbiBJRTkgd2hpY2ggZG9lc24ndCBmaXJlIHRoZVxuICAvLyBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UsIGRlbGV0ZSBvciBjdXRcbiAgaWYgKCRzbmlmZmVyLmhhc0V2ZW50KCdpbnB1dCcpKSB7XG4gICAgZWxlbWVudC5vbignaW5wdXQnLCBsaXN0ZW5lcik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRlZmVyTGlzdGVuZXIgPSBmdW5jdGlvbihldiwgaW5wdXQsIG9yaWdWYWx1ZSkge1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHRpbWVvdXQgPSAkYnJvd3Nlci5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWlucHV0IHx8IGlucHV0LnZhbHVlICE9PSBvcmlnVmFsdWUpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgLyoqIEB0aGlzICovIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIga2V5ID0gZXZlbnQua2V5Q29kZTtcblxuICAgICAgLy8gaWdub3JlXG4gICAgICAvLyAgICBjb21tYW5kICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgICAgICAgICAgIGFycm93c1xuICAgICAgaWYgKGtleSA9PT0gOTEgfHwgKDE1IDwga2V5ICYmIGtleSA8IDE5KSB8fCAoMzcgPD0ga2V5ICYmIGtleSA8PSA0MCkpIHJldHVybjtcblxuICAgICAgZGVmZXJMaXN0ZW5lcihldmVudCwgdGhpcywgdGhpcy52YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvLyBpZiB1c2VyIG1vZGlmaWVzIGlucHV0IHZhbHVlIHVzaW5nIGNvbnRleHQgbWVudSBpbiBJRSwgd2UgbmVlZCBcInBhc3RlXCIgYW5kIFwiY3V0XCIgZXZlbnRzIHRvIGNhdGNoIGl0XG4gICAgaWYgKCRzbmlmZmVyLmhhc0V2ZW50KCdwYXN0ZScpKSB7XG4gICAgICBlbGVtZW50Lm9uKCdwYXN0ZSBjdXQnLCBkZWZlckxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB1c2VyIHBhc3RlIGludG8gaW5wdXQgdXNpbmcgbW91c2Ugb24gb2xkZXIgYnJvd3NlclxuICAvLyBvciBmb3JtIGF1dG9jb21wbGV0ZSBvbiBuZXdlciBicm93c2VyLCB3ZSBuZWVkIFwiY2hhbmdlXCIgZXZlbnQgdG8gY2F0Y2ggaXRcbiAgZWxlbWVudC5vbignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gIC8vIFNvbWUgbmF0aXZlIGlucHV0IHR5cGVzIChkYXRlLWZhbWlseSkgaGF2ZSB0aGUgYWJpbGl0eSB0byBjaGFuZ2UgdmFsaWRpdHkgd2l0aG91dFxuICAvLyBmaXJpbmcgYW55IGlucHV0L2NoYW5nZSBldmVudHMuXG4gIC8vIEZvciB0aGVzZSBldmVudCB0eXBlcywgd2hlbiBuYXRpdmUgdmFsaWRhdG9ycyBhcmUgcHJlc2VudCBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhlIHR5cGUsXG4gIC8vIGNoZWNrIGZvciB2YWxpZGl0eSBjaGFuZ2VzIG9uIHZhcmlvdXMgRE9NIGV2ZW50cy5cbiAgaWYgKFBBUlRJQUxfVkFMSURBVElPTl9UWVBFU1t0eXBlXSAmJiBjdHJsLiQkaGFzTmF0aXZlVmFsaWRhdG9ycyAmJiB0eXBlID09PSBhdHRyLnR5cGUpIHtcbiAgICBlbGVtZW50Lm9uKFBBUlRJQUxfVkFMSURBVElPTl9FVkVOVFMsIC8qKiBAdGhpcyAqLyBmdW5jdGlvbihldikge1xuICAgICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgIHZhciB2YWxpZGl0eSA9IHRoaXNbVkFMSURJVFlfU1RBVEVfUFJPUEVSVFldO1xuICAgICAgICB2YXIgb3JpZ0JhZElucHV0ID0gdmFsaWRpdHkuYmFkSW5wdXQ7XG4gICAgICAgIHZhciBvcmlnVHlwZU1pc21hdGNoID0gdmFsaWRpdHkudHlwZU1pc21hdGNoO1xuICAgICAgICB0aW1lb3V0ID0gJGJyb3dzZXIuZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgaWYgKHZhbGlkaXR5LmJhZElucHV0ICE9PSBvcmlnQmFkSW5wdXQgfHwgdmFsaWRpdHkudHlwZU1pc21hdGNoICE9PSBvcmlnVHlwZU1pc21hdGNoKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcihldik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGN0cmwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIFdvcmthcm91bmQgZm9yIEZpcmVmb3ggdmFsaWRhdGlvbiAjMTIxMDIuXG4gICAgdmFyIHZhbHVlID0gY3RybC4kaXNFbXB0eShjdHJsLiR2aWV3VmFsdWUpID8gJycgOiBjdHJsLiR2aWV3VmFsdWU7XG4gICAgaWYgKGVsZW1lbnQudmFsKCkgIT09IHZhbHVlKSB7XG4gICAgICBlbGVtZW50LnZhbCh2YWx1ZSk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiB3ZWVrUGFyc2VyKGlzb1dlZWssIGV4aXN0aW5nRGF0ZSkge1xuICBpZiAoaXNEYXRlKGlzb1dlZWspKSB7XG4gICAgcmV0dXJuIGlzb1dlZWs7XG4gIH1cblxuICBpZiAoaXNTdHJpbmcoaXNvV2VlaykpIHtcbiAgICBXRUVLX1JFR0VYUC5sYXN0SW5kZXggPSAwO1xuICAgIHZhciBwYXJ0cyA9IFdFRUtfUkVHRVhQLmV4ZWMoaXNvV2Vlayk7XG4gICAgaWYgKHBhcnRzKSB7XG4gICAgICB2YXIgeWVhciA9ICtwYXJ0c1sxXSxcbiAgICAgICAgICB3ZWVrID0gK3BhcnRzWzJdLFxuICAgICAgICAgIGhvdXJzID0gMCxcbiAgICAgICAgICBtaW51dGVzID0gMCxcbiAgICAgICAgICBzZWNvbmRzID0gMCxcbiAgICAgICAgICBtaWxsaXNlY29uZHMgPSAwLFxuICAgICAgICAgIGZpcnN0VGh1cnMgPSBnZXRGaXJzdFRodXJzZGF5T2ZZZWFyKHllYXIpLFxuICAgICAgICAgIGFkZERheXMgPSAod2VlayAtIDEpICogNztcblxuICAgICAgaWYgKGV4aXN0aW5nRGF0ZSkge1xuICAgICAgICBob3VycyA9IGV4aXN0aW5nRGF0ZS5nZXRIb3VycygpO1xuICAgICAgICBtaW51dGVzID0gZXhpc3RpbmdEYXRlLmdldE1pbnV0ZXMoKTtcbiAgICAgICAgc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICAgIG1pbGxpc2Vjb25kcyA9IGV4aXN0aW5nRGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIDAsIGZpcnN0VGh1cnMuZ2V0RGF0ZSgpICsgYWRkRGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG1pbGxpc2Vjb25kcyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIE5hTjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihyZWdleHAsIG1hcHBpbmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGlzbywgZGF0ZSkge1xuICAgIHZhciBwYXJ0cywgbWFwO1xuXG4gICAgaWYgKGlzRGF0ZShpc28pKSB7XG4gICAgICByZXR1cm4gaXNvO1xuICAgIH1cblxuICAgIGlmIChpc1N0cmluZyhpc28pKSB7XG4gICAgICAvLyBXaGVuIGEgZGF0ZSBpcyBKU09OJ2lmaWVkIHRvIHdyYXBzIGl0c2VsZiBpbnNpZGUgb2YgYW4gZXh0cmFcbiAgICAgIC8vIHNldCBvZiBkb3VibGUgcXVvdGVzLiBUaGlzIG1ha2VzIHRoZSBkYXRlIHBhcnNpbmcgY29kZSB1bmFibGVcbiAgICAgIC8vIHRvIG1hdGNoIHRoZSBkYXRlIHN0cmluZyBhbmQgcGFyc2UgaXQgYXMgYSBkYXRlLlxuICAgICAgaWYgKGlzby5jaGFyQXQoMCkgPT09ICdcIicgJiYgaXNvLmNoYXJBdChpc28ubGVuZ3RoIC0gMSkgPT09ICdcIicpIHtcbiAgICAgICAgaXNvID0gaXNvLnN1YnN0cmluZygxLCBpc28ubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoSVNPX0RBVEVfUkVHRVhQLnRlc3QoaXNvKSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoaXNvKTtcbiAgICAgIH1cbiAgICAgIHJlZ2V4cC5sYXN0SW5kZXggPSAwO1xuICAgICAgcGFydHMgPSByZWdleHAuZXhlYyhpc28pO1xuXG4gICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgcGFydHMuc2hpZnQoKTtcbiAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICBtYXAgPSB7XG4gICAgICAgICAgICB5eXl5OiBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICBNTTogZGF0ZS5nZXRNb250aCgpICsgMSxcbiAgICAgICAgICAgIGRkOiBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgICAgIEhIOiBkYXRlLmdldEhvdXJzKCksXG4gICAgICAgICAgICBtbTogZGF0ZS5nZXRNaW51dGVzKCksXG4gICAgICAgICAgICBzczogZGF0ZS5nZXRTZWNvbmRzKCksXG4gICAgICAgICAgICBzc3M6IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMDAwXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXAgPSB7IHl5eXk6IDE5NzAsIE1NOiAxLCBkZDogMSwgSEg6IDAsIG1tOiAwLCBzczogMCwgc3NzOiAwIH07XG4gICAgICAgIH1cblxuICAgICAgICBmb3JFYWNoKHBhcnRzLCBmdW5jdGlvbihwYXJ0LCBpbmRleCkge1xuICAgICAgICAgIGlmIChpbmRleCA8IG1hcHBpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBtYXBbbWFwcGluZ1tpbmRleF1dID0gK3BhcnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKG1hcC55eXl5LCBtYXAuTU0gLSAxLCBtYXAuZGQsIG1hcC5ISCwgbWFwLm1tLCBtYXAuc3MgfHwgMCwgbWFwLnNzcyAqIDEwMDAgfHwgMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE5hTjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGF0ZUlucHV0VHlwZSh0eXBlLCByZWdleHAsIHBhcnNlRGF0ZSwgZm9ybWF0KSB7XG4gIHJldHVybiBmdW5jdGlvbiBkeW5hbWljRGF0ZUlucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHNuaWZmZXIsICRicm93c2VyLCAkZmlsdGVyKSB7XG4gICAgYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKTtcbiAgICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuICAgIHZhciB0aW1lem9uZSA9IGN0cmwgJiYgY3RybC4kb3B0aW9ucy5nZXRPcHRpb24oJ3RpbWV6b25lJyk7XG4gICAgdmFyIHByZXZpb3VzRGF0ZTtcblxuICAgIGN0cmwuJCRwYXJzZXJOYW1lID0gdHlwZTtcbiAgICBjdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmIChjdHJsLiRpc0VtcHR5KHZhbHVlKSkgcmV0dXJuIG51bGw7XG4gICAgICBpZiAocmVnZXhwLnRlc3QodmFsdWUpKSB7XG4gICAgICAgIC8vIE5vdGU6IFdlIGNhbm5vdCByZWFkIGN0cmwuJG1vZGVsVmFsdWUsIGFzIHRoZXJlIG1pZ2h0IGJlIGEgZGlmZmVyZW50XG4gICAgICAgIC8vIHBhcnNlci9mb3JtYXR0ZXIgaW4gdGhlIHByb2Nlc3NpbmcgY2hhaW4gc28gdGhhdCB0aGUgbW9kZWxcbiAgICAgICAgLy8gY29udGFpbnMgc29tZSBkaWZmZXJlbnQgZGF0YSBmb3JtYXQhXG4gICAgICAgIHZhciBwYXJzZWREYXRlID0gcGFyc2VEYXRlKHZhbHVlLCBwcmV2aW91c0RhdGUpO1xuICAgICAgICBpZiAodGltZXpvbmUpIHtcbiAgICAgICAgICBwYXJzZWREYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChwYXJzZWREYXRlLCB0aW1lem9uZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZERhdGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0pO1xuXG4gICAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgJiYgIWlzRGF0ZSh2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmdNb2RlbE1pbkVycignZGF0ZWZtdCcsICdFeHBlY3RlZCBgezB9YCB0byBiZSBhIGRhdGUnLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNWYWxpZERhdGUodmFsdWUpKSB7XG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IHZhbHVlO1xuICAgICAgICBpZiAocHJldmlvdXNEYXRlICYmIHRpbWV6b25lKSB7XG4gICAgICAgICAgcHJldmlvdXNEYXRlID0gY29udmVydFRpbWV6b25lVG9Mb2NhbChwcmV2aW91c0RhdGUsIHRpbWV6b25lLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJGZpbHRlcignZGF0ZScpKHZhbHVlLCBmb3JtYXQsIHRpbWV6b25lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXZpb3VzRGF0ZSA9IG51bGw7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChpc0RlZmluZWQoYXR0ci5taW4pIHx8IGF0dHIubmdNaW4pIHtcbiAgICAgIHZhciBtaW5WYWw7XG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhaXNWYWxpZERhdGUodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1pblZhbCkgfHwgcGFyc2VEYXRlKHZhbHVlKSA+PSBtaW5WYWw7XG4gICAgICB9O1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWluJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIG1pblZhbCA9IHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKTtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChpc0RlZmluZWQoYXR0ci5tYXgpIHx8IGF0dHIubmdNYXgpIHtcbiAgICAgIHZhciBtYXhWYWw7XG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhaXNWYWxpZERhdGUodmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgcGFyc2VEYXRlKHZhbHVlKSA8PSBtYXhWYWw7XG4gICAgICB9O1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4JywgZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIG1heFZhbCA9IHBhcnNlT2JzZXJ2ZWREYXRlVmFsdWUodmFsKTtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVmFsaWREYXRlKHZhbHVlKSB7XG4gICAgICAvLyBJbnZhbGlkIERhdGU6IGdldFRpbWUoKSByZXR1cm5zIE5hTlxuICAgICAgcmV0dXJuIHZhbHVlICYmICEodmFsdWUuZ2V0VGltZSAmJiB2YWx1ZS5nZXRUaW1lKCkgIT09IHZhbHVlLmdldFRpbWUoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VPYnNlcnZlZERhdGVWYWx1ZSh2YWwpIHtcbiAgICAgIHJldHVybiBpc0RlZmluZWQodmFsKSAmJiAhaXNEYXRlKHZhbCkgPyBwYXJzZURhdGUodmFsKSB8fCB1bmRlZmluZWQgOiB2YWw7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBiYWRJbnB1dENoZWNrZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgdmFyIG5vZGUgPSBlbGVtZW50WzBdO1xuICB2YXIgbmF0aXZlVmFsaWRhdGlvbiA9IGN0cmwuJCRoYXNOYXRpdmVWYWxpZGF0b3JzID0gaXNPYmplY3Qobm9kZS52YWxpZGl0eSk7XG4gIGlmIChuYXRpdmVWYWxpZGF0aW9uKSB7XG4gICAgY3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgdmFsaWRpdHkgPSBlbGVtZW50LnByb3AoVkFMSURJVFlfU1RBVEVfUFJPUEVSVFkpIHx8IHt9O1xuICAgICAgcmV0dXJuIHZhbGlkaXR5LmJhZElucHV0IHx8IHZhbGlkaXR5LnR5cGVNaXNtYXRjaCA/IHVuZGVmaW5lZCA6IHZhbHVlO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIG51bWJlckZvcm1hdHRlclBhcnNlcihjdHJsKSB7XG4gIGN0cmwuJCRwYXJzZXJOYW1lID0gJ251bWJlcic7XG4gIGN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmIChjdHJsLiRpc0VtcHR5KHZhbHVlKSkgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoTlVNQkVSX1JFR0VYUC50ZXN0KHZhbHVlKSkgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0pO1xuXG4gIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICghY3RybC4kaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgIGlmICghaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5nTW9kZWxNaW5FcnIoJ251bWZtdCcsICdFeHBlY3RlZCBgezB9YCB0byBiZSBhIG51bWJlcicsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCkge1xuICBpZiAoaXNEZWZpbmVkKHZhbCkgJiYgIWlzTnVtYmVyKHZhbCkpIHtcbiAgICB2YWwgPSBwYXJzZUZsb2F0KHZhbCk7XG4gIH1cbiAgcmV0dXJuICFpc051bWJlck5hTih2YWwpID8gdmFsIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBpc051bWJlckludGVnZXIobnVtKSB7XG4gIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0NjM2NTM2L2hvdy10by1jaGVjay1pZi1hLXZhcmlhYmxlLWlzLWFuLWludGVnZXItaW4tamF2YXNjcmlwdCMxNDc5NDA2NlxuICAvLyAobWludXMgdGhlIGFzc3VtcHRpb24gdGhhdCBgbnVtYCBpcyBhIG51bWJlcilcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuICByZXR1cm4gKG51bSB8IDApID09PSBudW07XG59XG5cbmZ1bmN0aW9uIGNvdW50RGVjaW1hbHMobnVtKSB7XG4gIHZhciBudW1TdHJpbmcgPSBudW0udG9TdHJpbmcoKTtcbiAgdmFyIGRlY2ltYWxTeW1ib2xJbmRleCA9IG51bVN0cmluZy5pbmRleE9mKCcuJyk7XG5cbiAgaWYgKGRlY2ltYWxTeW1ib2xJbmRleCA9PT0gLTEpIHtcbiAgICBpZiAoLTEgPCBudW0gJiYgbnVtIDwgMSkge1xuICAgICAgLy8gSXQgbWF5IGJlIGluIHRoZSBleHBvbmVudGlhbCBub3RhdGlvbiBmb3JtYXQgKGAxZS1YYClcbiAgICAgIHZhciBtYXRjaCA9IC9lLShcXGQrKSQvLmV4ZWMobnVtU3RyaW5nKTtcblxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIobWF0Y2hbMV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIG51bVN0cmluZy5sZW5ndGggLSBkZWNpbWFsU3ltYm9sSW5kZXggLSAxO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkRm9yU3RlcCh2aWV3VmFsdWUsIHN0ZXBCYXNlLCBzdGVwKSB7XG4gIC8vIEF0IHRoaXMgcG9pbnQgYHN0ZXBCYXNlYCBhbmQgYHN0ZXBgIGFyZSBleHBlY3RlZCB0byBiZSBub24tTmFOIHZhbHVlc1xuICAvLyBhbmQgYHZpZXdWYWx1ZWAgaXMgZXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBzdHJpbmdpZmllZCBudW1iZXIuXG4gIHZhciB2YWx1ZSA9IE51bWJlcih2aWV3VmFsdWUpO1xuXG4gIHZhciBpc05vbkludGVnZXJWYWx1ZSA9ICFpc051bWJlckludGVnZXIodmFsdWUpO1xuICB2YXIgaXNOb25JbnRlZ2VyU3RlcEJhc2UgPSAhaXNOdW1iZXJJbnRlZ2VyKHN0ZXBCYXNlKTtcbiAgdmFyIGlzTm9uSW50ZWdlclN0ZXAgPSAhaXNOdW1iZXJJbnRlZ2VyKHN0ZXApO1xuXG4gIC8vIER1ZSB0byBsaW1pdGF0aW9ucyBpbiBGbG9hdGluZyBQb2ludCBBcml0aG1ldGljIChlLmcuIGAwLjMgLSAwLjIgIT09IDAuMWAgb3JcbiAgLy8gYDAuNSAlIDAuMSAhPT0gMGApLCB3ZSBuZWVkIHRvIGNvbnZlcnQgYWxsIG51bWJlcnMgdG8gaW50ZWdlcnMuXG4gIGlmIChpc05vbkludGVnZXJWYWx1ZSB8fCBpc05vbkludGVnZXJTdGVwQmFzZSB8fCBpc05vbkludGVnZXJTdGVwKSB7XG4gICAgdmFyIHZhbHVlRGVjaW1hbHMgPSBpc05vbkludGVnZXJWYWx1ZSA/IGNvdW50RGVjaW1hbHModmFsdWUpIDogMDtcbiAgICB2YXIgc3RlcEJhc2VEZWNpbWFscyA9IGlzTm9uSW50ZWdlclN0ZXBCYXNlID8gY291bnREZWNpbWFscyhzdGVwQmFzZSkgOiAwO1xuICAgIHZhciBzdGVwRGVjaW1hbHMgPSBpc05vbkludGVnZXJTdGVwID8gY291bnREZWNpbWFscyhzdGVwKSA6IDA7XG5cbiAgICB2YXIgZGVjaW1hbENvdW50ID0gTWF0aC5tYXgodmFsdWVEZWNpbWFscywgc3RlcEJhc2VEZWNpbWFscywgc3RlcERlY2ltYWxzKTtcbiAgICB2YXIgbXVsdGlwbGllciA9IE1hdGgucG93KDEwLCBkZWNpbWFsQ291bnQpO1xuXG4gICAgdmFsdWUgPSB2YWx1ZSAqIG11bHRpcGxpZXI7XG4gICAgc3RlcEJhc2UgPSBzdGVwQmFzZSAqIG11bHRpcGxpZXI7XG4gICAgc3RlcCA9IHN0ZXAgKiBtdWx0aXBsaWVyO1xuXG4gICAgaWYgKGlzTm9uSW50ZWdlclZhbHVlKSB2YWx1ZSA9IE1hdGgucm91bmQodmFsdWUpO1xuICAgIGlmIChpc05vbkludGVnZXJTdGVwQmFzZSkgc3RlcEJhc2UgPSBNYXRoLnJvdW5kKHN0ZXBCYXNlKTtcbiAgICBpZiAoaXNOb25JbnRlZ2VyU3RlcCkgc3RlcCA9IE1hdGgucm91bmQoc3RlcCk7XG4gIH1cblxuICByZXR1cm4gKHZhbHVlIC0gc3RlcEJhc2UpICUgc3RlcCA9PT0gMDtcbn1cblxuZnVuY3Rpb24gbnVtYmVySW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKTtcbiAgbnVtYmVyRm9ybWF0dGVyUGFyc2VyKGN0cmwpO1xuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuXG4gIHZhciBtaW5WYWw7XG4gIHZhciBtYXhWYWw7XG5cbiAgaWYgKGlzRGVmaW5lZChhdHRyLm1pbikgfHwgYXR0ci5uZ01pbikge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWluID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHZhbHVlID49IG1pblZhbDtcbiAgICB9O1xuXG4gICAgYXR0ci4kb2JzZXJ2ZSgnbWluJywgZnVuY3Rpb24odmFsKSB7XG4gICAgICBtaW5WYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChpc0RlZmluZWQoYXR0ci5tYXgpIHx8IGF0dHIubmdNYXgpIHtcbiAgICBjdHJsLiR2YWxpZGF0b3JzLm1heCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgaXNVbmRlZmluZWQobWF4VmFsKSB8fCB2YWx1ZSA8PSBtYXhWYWw7XG4gICAgfTtcblxuICAgIGF0dHIuJG9ic2VydmUoJ21heCcsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgbWF4VmFsID0gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCk7XG4gICAgICAvLyBUT0RPKG1hdHNrbyk6IGltcGxlbWVudCB2YWxpZGF0ZUxhdGVyIHRvIHJlZHVjZSBudW1iZXIgb2YgdmFsaWRhdGlvbnNcbiAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoaXNEZWZpbmVkKGF0dHIuc3RlcCkgfHwgYXR0ci5uZ1N0ZXApIHtcbiAgICB2YXIgc3RlcFZhbDtcbiAgICBjdHJsLiR2YWxpZGF0b3JzLnN0ZXAgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQoc3RlcFZhbCkgfHxcbiAgICAgICAgICAgICBpc1ZhbGlkRm9yU3RlcCh2aWV3VmFsdWUsIG1pblZhbCB8fCAwLCBzdGVwVmFsKTtcbiAgICB9O1xuXG4gICAgYXR0ci4kb2JzZXJ2ZSgnc3RlcCcsIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgc3RlcFZhbCA9IHBhcnNlTnVtYmVyQXR0clZhbCh2YWwpO1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJhbmdlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgYmFkSW5wdXRDaGVja2VyKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKTtcbiAgbnVtYmVyRm9ybWF0dGVyUGFyc2VyKGN0cmwpO1xuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuXG4gIHZhciBzdXBwb3J0c1JhbmdlID0gY3RybC4kJGhhc05hdGl2ZVZhbGlkYXRvcnMgJiYgZWxlbWVudFswXS50eXBlID09PSAncmFuZ2UnLFxuICAgICAgbWluVmFsID0gc3VwcG9ydHNSYW5nZSA/IDAgOiB1bmRlZmluZWQsXG4gICAgICBtYXhWYWwgPSBzdXBwb3J0c1JhbmdlID8gMTAwIDogdW5kZWZpbmVkLFxuICAgICAgc3RlcFZhbCA9IHN1cHBvcnRzUmFuZ2UgPyAxIDogdW5kZWZpbmVkLFxuICAgICAgdmFsaWRpdHkgPSBlbGVtZW50WzBdLnZhbGlkaXR5LFxuICAgICAgaGFzTWluQXR0ciA9IGlzRGVmaW5lZChhdHRyLm1pbiksXG4gICAgICBoYXNNYXhBdHRyID0gaXNEZWZpbmVkKGF0dHIubWF4KSxcbiAgICAgIGhhc1N0ZXBBdHRyID0gaXNEZWZpbmVkKGF0dHIuc3RlcCk7XG5cbiAgdmFyIG9yaWdpbmFsUmVuZGVyID0gY3RybC4kcmVuZGVyO1xuXG4gIGN0cmwuJHJlbmRlciA9IHN1cHBvcnRzUmFuZ2UgJiYgaXNEZWZpbmVkKHZhbGlkaXR5LnJhbmdlVW5kZXJmbG93KSAmJiBpc0RlZmluZWQodmFsaWRpdHkucmFuZ2VPdmVyZmxvdykgP1xuICAgIC8vQnJvd3NlcnMgdGhhdCBpbXBsZW1lbnQgcmFuZ2Ugd2lsbCBzZXQgdGhlc2UgdmFsdWVzIGF1dG9tYXRpY2FsbHksIGJ1dCByZWFkaW5nIHRoZSBhZGp1c3RlZCB2YWx1ZXMgYWZ0ZXJcbiAgICAvLyRyZW5kZXIgd291bGQgY2F1c2UgdGhlIG1pbiAvIG1heCB2YWxpZGF0b3JzIHRvIGJlIGFwcGxpZWQgd2l0aCB0aGUgd3JvbmcgdmFsdWVcbiAgICBmdW5jdGlvbiByYW5nZVJlbmRlcigpIHtcbiAgICAgIG9yaWdpbmFsUmVuZGVyKCk7XG4gICAgICBjdHJsLiRzZXRWaWV3VmFsdWUoZWxlbWVudC52YWwoKSk7XG4gICAgfSA6XG4gICAgb3JpZ2luYWxSZW5kZXI7XG5cbiAgaWYgKGhhc01pbkF0dHIpIHtcbiAgICBjdHJsLiR2YWxpZGF0b3JzLm1pbiA9IHN1cHBvcnRzUmFuZ2UgP1xuICAgICAgLy8gU2luY2UgYWxsIGJyb3dzZXJzIHNldCB0aGUgaW5wdXQgdG8gYSB2YWxpZCB2YWx1ZSwgd2UgZG9uJ3QgbmVlZCB0byBjaGVjayB2YWxpZGl0eVxuICAgICAgZnVuY3Rpb24gbm9vcE1pblZhbGlkYXRvcigpIHsgcmV0dXJuIHRydWU7IH0gOlxuICAgICAgLy8gbm9uLXN1cHBvcnQgYnJvd3NlcnMgdmFsaWRhdGUgdGhlIG1pbiB2YWxcbiAgICAgIGZ1bmN0aW9uIG1pblZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCBpc1VuZGVmaW5lZChtaW5WYWwpIHx8IHZpZXdWYWx1ZSA+PSBtaW5WYWw7XG4gICAgICB9O1xuXG4gICAgc2V0SW5pdGlhbFZhbHVlQW5kT2JzZXJ2ZXIoJ21pbicsIG1pbkNoYW5nZSk7XG4gIH1cblxuICBpZiAoaGFzTWF4QXR0cikge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMubWF4ID0gc3VwcG9ydHNSYW5nZSA/XG4gICAgICAvLyBTaW5jZSBhbGwgYnJvd3NlcnMgc2V0IHRoZSBpbnB1dCB0byBhIHZhbGlkIHZhbHVlLCB3ZSBkb24ndCBuZWVkIHRvIGNoZWNrIHZhbGlkaXR5XG4gICAgICBmdW5jdGlvbiBub29wTWF4VmFsaWRhdG9yKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG4gICAgICAvLyBub24tc3VwcG9ydCBicm93c2VycyB2YWxpZGF0ZSB0aGUgbWF4IHZhbFxuICAgICAgZnVuY3Rpb24gbWF4VmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpIHx8IGlzVW5kZWZpbmVkKG1heFZhbCkgfHwgdmlld1ZhbHVlIDw9IG1heFZhbDtcbiAgICAgIH07XG5cbiAgICBzZXRJbml0aWFsVmFsdWVBbmRPYnNlcnZlcignbWF4JywgbWF4Q2hhbmdlKTtcbiAgfVxuXG4gIGlmIChoYXNTdGVwQXR0cikge1xuICAgIGN0cmwuJHZhbGlkYXRvcnMuc3RlcCA9IHN1cHBvcnRzUmFuZ2UgP1xuICAgICAgZnVuY3Rpb24gbmF0aXZlU3RlcFZhbGlkYXRvcigpIHtcbiAgICAgICAgLy8gQ3VycmVudGx5LCBvbmx5IEZGIGltcGxlbWVudHMgdGhlIHNwZWMgb24gc3RlcCBjaGFuZ2UgY29ycmVjdGx5IChpLmUuIGFkanVzdGluZyB0aGVcbiAgICAgICAgLy8gaW5wdXQgZWxlbWVudCB2YWx1ZSB0byBhIHZhbGlkIHZhbHVlKS4gSXQncyBwb3NzaWJsZSB0aGF0IG90aGVyIGJyb3dzZXJzIHNldCB0aGUgc3RlcE1pc21hdGNoXG4gICAgICAgIC8vIHZhbGlkaXR5IGVycm9yIGluc3RlYWQsIHNvIHdlIGNhbiBhdCBsZWFzdCByZXBvcnQgYW4gZXJyb3IgaW4gdGhhdCBjYXNlLlxuICAgICAgICByZXR1cm4gIXZhbGlkaXR5LnN0ZXBNaXNtYXRjaDtcbiAgICAgIH0gOlxuICAgICAgLy8gbmdTdGVwIGRvZXNuJ3Qgc2V0IHRoZSBzZXRwIGF0dHIsIHNvIHRoZSBicm93c2VyIGRvZXNuJ3QgYWRqdXN0IHRoZSBpbnB1dCB2YWx1ZSBhcyBzZXR0aW5nIHN0ZXAgd291bGRcbiAgICAgIGZ1bmN0aW9uIHN0ZXBWYWxpZGF0b3IobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgaXNVbmRlZmluZWQoc3RlcFZhbCkgfHxcbiAgICAgICAgICAgICAgIGlzVmFsaWRGb3JTdGVwKHZpZXdWYWx1ZSwgbWluVmFsIHx8IDAsIHN0ZXBWYWwpO1xuICAgICAgfTtcblxuICAgIHNldEluaXRpYWxWYWx1ZUFuZE9ic2VydmVyKCdzdGVwJywgc3RlcENoYW5nZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRJbml0aWFsVmFsdWVBbmRPYnNlcnZlcihodG1sQXR0ck5hbWUsIGNoYW5nZUZuKSB7XG4gICAgLy8gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZXMgc2V0IHRoZSBhdHRyaWJ1dGUgdmFsdWUgb25seSBhZnRlciBhIGRpZ2VzdCwgYnV0IHdlIG5lZWQgdGhlXG4gICAgLy8gYXR0cmlidXRlIHZhbHVlIHdoZW4gdGhlIGlucHV0IGlzIGZpcnN0IHJlbmRlcmVkLCBzbyB0aGF0IHRoZSBicm93c2VyIGNhbiBhZGp1c3QgdGhlXG4gICAgLy8gaW5wdXQgdmFsdWUgYmFzZWQgb24gdGhlIG1pbi9tYXggdmFsdWVcbiAgICBlbGVtZW50LmF0dHIoaHRtbEF0dHJOYW1lLCBhdHRyW2h0bWxBdHRyTmFtZV0pO1xuICAgIGF0dHIuJG9ic2VydmUoaHRtbEF0dHJOYW1lLCBjaGFuZ2VGbik7XG4gIH1cblxuICBmdW5jdGlvbiBtaW5DaGFuZ2UodmFsKSB7XG4gICAgbWluVmFsID0gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCk7XG4gICAgLy8gaWdub3JlIGNoYW5nZXMgYmVmb3JlIG1vZGVsIGlzIGluaXRpYWxpemVkXG4gICAgaWYgKGlzTnVtYmVyTmFOKGN0cmwuJG1vZGVsVmFsdWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnRzUmFuZ2UpIHtcbiAgICAgIHZhciBlbFZhbCA9IGVsZW1lbnQudmFsKCk7XG4gICAgICAvLyBJRTExIGRvZXNuJ3Qgc2V0IHRoZSBlbCB2YWwgY29ycmVjdGx5IGlmIHRoZSBtaW5WYWwgaXMgZ3JlYXRlciB0aGFuIHRoZSBlbGVtZW50IHZhbHVlXG4gICAgICBpZiAobWluVmFsID4gZWxWYWwpIHtcbiAgICAgICAgZWxWYWwgPSBtaW5WYWw7XG4gICAgICAgIGVsZW1lbnQudmFsKGVsVmFsKTtcbiAgICAgIH1cbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbFZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYXhDaGFuZ2UodmFsKSB7XG4gICAgbWF4VmFsID0gcGFyc2VOdW1iZXJBdHRyVmFsKHZhbCk7XG4gICAgLy8gaWdub3JlIGNoYW5nZXMgYmVmb3JlIG1vZGVsIGlzIGluaXRpYWxpemVkXG4gICAgaWYgKGlzTnVtYmVyTmFOKGN0cmwuJG1vZGVsVmFsdWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnRzUmFuZ2UpIHtcbiAgICAgIHZhciBlbFZhbCA9IGVsZW1lbnQudmFsKCk7XG4gICAgICAvLyBJRTExIGRvZXNuJ3Qgc2V0IHRoZSBlbCB2YWwgY29ycmVjdGx5IGlmIHRoZSBtYXhWYWwgaXMgbGVzcyB0aGFuIHRoZSBlbGVtZW50IHZhbHVlXG4gICAgICBpZiAobWF4VmFsIDwgZWxWYWwpIHtcbiAgICAgICAgZWxlbWVudC52YWwobWF4VmFsKTtcbiAgICAgICAgLy8gSUUxMSBhbmQgQ2hyb21lIGRvbid0IHNldCB0aGUgdmFsdWUgdG8gdGhlIG1pblZhbCB3aGVuIG1heCA8IG1pblxuICAgICAgICBlbFZhbCA9IG1heFZhbCA8IG1pblZhbCA/IG1pblZhbCA6IG1heFZhbDtcbiAgICAgIH1cbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbFZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRPRE8obWF0c2tvKTogaW1wbGVtZW50IHZhbGlkYXRlTGF0ZXIgdG8gcmVkdWNlIG51bWJlciBvZiB2YWxpZGF0aW9uc1xuICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGVwQ2hhbmdlKHZhbCkge1xuICAgIHN0ZXBWYWwgPSBwYXJzZU51bWJlckF0dHJWYWwodmFsKTtcbiAgICAvLyBpZ25vcmUgY2hhbmdlcyBiZWZvcmUgbW9kZWwgaXMgaW5pdGlhbGl6ZWRcbiAgICBpZiAoaXNOdW1iZXJOYU4oY3RybC4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTb21lIGJyb3dzZXJzIGRvbid0IGFkanVzdCB0aGUgaW5wdXQgdmFsdWUgY29ycmVjdGx5LCBidXQgc2V0IHRoZSBzdGVwTWlzbWF0Y2ggZXJyb3JcbiAgICBpZiAoc3VwcG9ydHNSYW5nZSAmJiBjdHJsLiR2aWV3VmFsdWUgIT09IGVsZW1lbnQudmFsKCkpIHtcbiAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShlbGVtZW50LnZhbCgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETyhtYXRza28pOiBpbXBsZW1lbnQgdmFsaWRhdGVMYXRlciB0byByZWR1Y2UgbnVtYmVyIG9mIHZhbGlkYXRpb25zXG4gICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiB1cmxJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICAvLyBOb3RlOiBubyBiYWRJbnB1dENoZWNrZXIgaGVyZSBieSBwdXJwb3NlIGFzIGB1cmxgIGlzIG9ubHkgYSB2YWxpZGF0aW9uXG4gIC8vIGluIGJyb3dzZXJzLCBpLmUuIHdlIGNhbiBhbHdheXMgcmVhZCBvdXQgaW5wdXQudmFsdWUgZXZlbiBpZiBpdCBpcyBub3QgdmFsaWQhXG4gIGJhc2VJbnB1dFR5cGUoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwsICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gIHN0cmluZ0Jhc2VkSW5wdXRUeXBlKGN0cmwpO1xuXG4gIGN0cmwuJCRwYXJzZXJOYW1lID0gJ3VybCc7XG4gIGN0cmwuJHZhbGlkYXRvcnMudXJsID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmFsdWUpIHx8IFVSTF9SRUdFWFAudGVzdCh2YWx1ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGVtYWlsSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpIHtcbiAgLy8gTm90ZTogbm8gYmFkSW5wdXRDaGVja2VyIGhlcmUgYnkgcHVycG9zZSBhcyBgdXJsYCBpcyBvbmx5IGEgdmFsaWRhdGlvblxuICAvLyBpbiBicm93c2VycywgaS5lLiB3ZSBjYW4gYWx3YXlzIHJlYWQgb3V0IGlucHV0LnZhbHVlIGV2ZW4gaWYgaXQgaXMgbm90IHZhbGlkIVxuICBiYXNlSW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIpO1xuICBzdHJpbmdCYXNlZElucHV0VHlwZShjdHJsKTtcblxuICBjdHJsLiQkcGFyc2VyTmFtZSA9ICdlbWFpbCc7XG4gIGN0cmwuJHZhbGlkYXRvcnMuZW1haWwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcbiAgICByZXR1cm4gY3RybC4kaXNFbXB0eSh2YWx1ZSkgfHwgRU1BSUxfUkVHRVhQLnRlc3QodmFsdWUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiByYWRpb0lucHV0VHlwZShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xuICB2YXIgZG9UcmltID0gIWF0dHIubmdUcmltIHx8IHRyaW0oYXR0ci5uZ1RyaW0pICE9PSAnZmFsc2UnO1xuICAvLyBtYWtlIHRoZSBuYW1lIHVuaXF1ZSwgaWYgbm90IGRlZmluZWRcbiAgaWYgKGlzVW5kZWZpbmVkKGF0dHIubmFtZSkpIHtcbiAgICBlbGVtZW50LmF0dHIoJ25hbWUnLCBuZXh0VWlkKCkpO1xuICB9XG5cbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICB2YXIgdmFsdWU7XG4gICAgaWYgKGVsZW1lbnRbMF0uY2hlY2tlZCkge1xuICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgaWYgKGRvVHJpbSkge1xuICAgICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xuICAgICAgfVxuICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKHZhbHVlLCBldiAmJiBldi50eXBlKTtcbiAgICB9XG4gIH07XG5cbiAgZWxlbWVudC5vbignY2xpY2snLCBsaXN0ZW5lcik7XG5cbiAgY3RybC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICBpZiAoZG9UcmltKSB7XG4gICAgICB2YWx1ZSA9IHRyaW0odmFsdWUpO1xuICAgIH1cbiAgICBlbGVtZW50WzBdLmNoZWNrZWQgPSAodmFsdWUgPT09IGN0cmwuJHZpZXdWYWx1ZSk7XG4gIH07XG5cbiAgYXR0ci4kb2JzZXJ2ZSgndmFsdWUnLCBjdHJsLiRyZW5kZXIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNvbnN0YW50RXhwcigkcGFyc2UsIGNvbnRleHQsIG5hbWUsIGV4cHJlc3Npb24sIGZhbGxiYWNrKSB7XG4gIHZhciBwYXJzZUZuO1xuICBpZiAoaXNEZWZpbmVkKGV4cHJlc3Npb24pKSB7XG4gICAgcGFyc2VGbiA9ICRwYXJzZShleHByZXNzaW9uKTtcbiAgICBpZiAoIXBhcnNlRm4uY29uc3RhbnQpIHtcbiAgICAgIHRocm93IG5nTW9kZWxNaW5FcnIoJ2NvbnN0ZXhwcicsICdFeHBlY3RlZCBjb25zdGFudCBleHByZXNzaW9uIGZvciBgezB9YCwgYnV0IHNhdyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2B7MX1gLicsIG5hbWUsIGV4cHJlc3Npb24pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VGbihjb250ZXh0KTtcbiAgfVxuICByZXR1cm4gZmFsbGJhY2s7XG59XG5cbmZ1bmN0aW9uIGNoZWNrYm94SW5wdXRUeXBlKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsLCAkc25pZmZlciwgJGJyb3dzZXIsICRmaWx0ZXIsICRwYXJzZSkge1xuICB2YXIgdHJ1ZVZhbHVlID0gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBzY29wZSwgJ25nVHJ1ZVZhbHVlJywgYXR0ci5uZ1RydWVWYWx1ZSwgdHJ1ZSk7XG4gIHZhciBmYWxzZVZhbHVlID0gcGFyc2VDb25zdGFudEV4cHIoJHBhcnNlLCBzY29wZSwgJ25nRmFsc2VWYWx1ZScsIGF0dHIubmdGYWxzZVZhbHVlLCBmYWxzZSk7XG5cbiAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICBjdHJsLiRzZXRWaWV3VmFsdWUoZWxlbWVudFswXS5jaGVja2VkLCBldiAmJiBldi50eXBlKTtcbiAgfTtcblxuICBlbGVtZW50Lm9uKCdjbGljaycsIGxpc3RlbmVyKTtcblxuICBjdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICBlbGVtZW50WzBdLmNoZWNrZWQgPSBjdHJsLiR2aWV3VmFsdWU7XG4gIH07XG5cbiAgLy8gT3ZlcnJpZGUgdGhlIHN0YW5kYXJkIGAkaXNFbXB0eWAgYmVjYXVzZSB0aGUgJHZpZXdWYWx1ZSBvZiBhbiBlbXB0eSBjaGVja2JveCBpcyBhbHdheXMgc2V0IHRvIGBmYWxzZWBcbiAgLy8gVGhpcyBpcyBiZWNhdXNlIG9mIHRoZSBwYXJzZXIgYmVsb3csIHdoaWNoIGNvbXBhcmVzIHRoZSBgJG1vZGVsVmFsdWVgIHdpdGggYHRydWVWYWx1ZWAgdG8gY29udmVydFxuICAvLyBpdCB0byBhIGJvb2xlYW4uXG4gIGN0cmwuJGlzRW1wdHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gZmFsc2U7XG4gIH07XG5cbiAgY3RybC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVxdWFscyh2YWx1ZSwgdHJ1ZVZhbHVlKTtcbiAgfSk7XG5cbiAgY3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID8gdHJ1ZVZhbHVlIDogZmFsc2VWYWx1ZTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSB0ZXh0YXJlYVxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEhUTUwgdGV4dGFyZWEgZWxlbWVudCBjb250cm9sIHdpdGggYW5ndWxhciBkYXRhLWJpbmRpbmcuIFRoZSBkYXRhLWJpbmRpbmcgYW5kIHZhbGlkYXRpb25cbiAqIHByb3BlcnRpZXMgb2YgdGhpcyBlbGVtZW50IGFyZSBleGFjdGx5IHRoZSBzYW1lIGFzIHRob3NlIG9mIHRoZVxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTppbnB1dCBpbnB1dCBlbGVtZW50fS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdNb2RlbCBBc3NpZ25hYmxlIGFuZ3VsYXIgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgUHJvcGVydHkgbmFtZSBvZiB0aGUgZm9ybSB1bmRlciB3aGljaCB0aGUgY29udHJvbCBpcyBwdWJsaXNoZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHJlcXVpcmVkIFNldHMgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbm90IGVudGVyZWQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUmVxdWlyZWQgQWRkcyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBhbmQgYHJlcXVpcmVkYCB2YWxpZGF0aW9uIGNvbnN0cmFpbnQgdG9cbiAqICAgIHRoZSBlbGVtZW50IHdoZW4gdGhlIG5nUmVxdWlyZWQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZS4gVXNlIGBuZ1JlcXVpcmVkYCBpbnN0ZWFkIG9mXG4gKiAgICBgcmVxdWlyZWRgIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSBgcmVxdWlyZWRgIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNaW5sZW5ndGggU2V0cyBgbWlubGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgc2hvcnRlciB0aGFuXG4gKiAgICBtaW5sZW5ndGguXG4gKiBAcGFyYW0ge251bWJlcj19IG5nTWF4bGVuZ3RoIFNldHMgYG1heGxlbmd0aGAgdmFsaWRhdGlvbiBlcnJvciBrZXkgaWYgdGhlIHZhbHVlIGlzIGxvbmdlciB0aGFuXG4gKiAgICBtYXhsZW5ndGguIFNldHRpbmcgdGhlIGF0dHJpYnV0ZSB0byBhIG5lZ2F0aXZlIG9yIG5vbi1udW1lcmljIHZhbHVlLCBhbGxvd3MgdmlldyB2YWx1ZXMgb2YgYW55XG4gKiAgICBsZW5ndGguXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nUGF0dGVybiBTZXRzIGBwYXR0ZXJuYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgbmdNb2RlbCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlICR2aWV3VmFsdWV9XG4gKiAgICBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFyIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqICAgIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIFJlZ0V4cCBvYmplY3QsIHRoZW4gdGhpcyBpcyB1c2VkIGRpcmVjdGx5LlxuICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGVuIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIGEgUmVnRXhwXG4gKiAgICBhZnRlciB3cmFwcGluZyBpdCBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICogICAgYG5ldyBSZWdFeHAoJ15hYmMkJylgLjxiciAvPlxuICogICAgKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAqICAgIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gKiAgICBhY2NvdW50LlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0NoYW5nZSBBbmd1bGFyIGV4cHJlc3Npb24gdG8gYmUgZXhlY3V0ZWQgd2hlbiBpbnB1dCBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbnB1dCBlbGVtZW50LlxuICogQHBhcmFtIHtib29sZWFuPX0gW25nVHJpbT10cnVlXSBJZiBzZXQgdG8gZmFsc2UgQW5ndWxhciB3aWxsIG5vdCBhdXRvbWF0aWNhbGx5IHRyaW0gdGhlIGlucHV0LlxuICpcbiAqIEBrbm93bklzc3VlXG4gKlxuICogV2hlbiBzcGVjaWZ5aW5nIHRoZSBgcGxhY2Vob2xkZXJgIGF0dHJpYnV0ZSBvZiBgPHRleHRhcmVhPmAsIEludGVybmV0IEV4cGxvcmVyIHdpbGwgdGVtcG9yYXJpbHlcbiAqIGluc2VydCB0aGUgcGxhY2Vob2xkZXIgdmFsdWUgYXMgdGhlIHRleHRhcmVhJ3MgY29udGVudC4gSWYgdGhlIHBsYWNlaG9sZGVyIHZhbHVlIGNvbnRhaW5zXG4gKiBpbnRlcnBvbGF0aW9uIChge3sgLi4uIH19YCksIGFuIGVycm9yIHdpbGwgYmUgbG9nZ2VkIGluIHRoZSBjb25zb2xlIHdoZW4gQW5ndWxhciB0cmllcyB0byB1cGRhdGVcbiAqIHRoZSB2YWx1ZSBvZiB0aGUgYnktdGhlbi1yZW1vdmVkIHRleHQgbm9kZS4gVGhpcyBkb2Vzbid0IGFmZmVjdCB0aGUgZnVuY3Rpb25hbGl0eSBvZiB0aGVcbiAqIHRleHRhcmVhLCBidXQgY2FuIGJlIHVuZGVzaXJhYmxlLlxuICpcbiAqIFlvdSBjYW4gd29yayBhcm91bmQgdGhpcyBJbnRlcm5ldCBFeHBsb3JlciBpc3N1ZSBieSB1c2luZyBgbmctYXR0ci1wbGFjZWhvbGRlcmAgaW5zdGVhZCBvZlxuICogYHBsYWNlaG9sZGVyYCBvbiB0ZXh0YXJlYXMsIHdoZW5ldmVyIHlvdSBuZWVkIGludGVycG9sYXRpb24gaW4gdGhlIHBsYWNlaG9sZGVyIHZhbHVlLiBZb3UgY2FuXG4gKiBmaW5kIG1vcmUgZGV0YWlscyBvbiBgbmdBdHRyYCBpbiB0aGVcbiAqIFtJbnRlcnBvbGF0aW9uXShndWlkZS9pbnRlcnBvbGF0aW9uIy1uZ2F0dHItZm9yLWJpbmRpbmctdG8tYXJiaXRyYXJ5LWF0dHJpYnV0ZXMpIHNlY3Rpb24gb2YgdGhlXG4gKiBEZXZlbG9wZXIgR3VpZGUuXG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIGlucHV0XG4gKiBAcmVzdHJpY3QgRVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSFRNTCBpbnB1dCBlbGVtZW50IGNvbnRyb2wuIFdoZW4gdXNlZCB0b2dldGhlciB3aXRoIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0sIGl0IHByb3ZpZGVzIGRhdGEtYmluZGluZyxcbiAqIGlucHV0IHN0YXRlIGNvbnRyb2wsIGFuZCB2YWxpZGF0aW9uLlxuICogSW5wdXQgY29udHJvbCBmb2xsb3dzIEhUTUw1IGlucHV0IHR5cGVzIGFuZCBwb2x5ZmlsbHMgdGhlIEhUTUw1IHZhbGlkYXRpb24gYmVoYXZpb3IgZm9yIG9sZGVyIGJyb3dzZXJzLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGU6KiogTm90IGV2ZXJ5IGZlYXR1cmUgb2ZmZXJlZCBpcyBhdmFpbGFibGUgZm9yIGFsbCBpbnB1dCB0eXBlcy5cbiAqIFNwZWNpZmljYWxseSwgZGF0YSBiaW5kaW5nIGFuZCBldmVudCBoYW5kbGluZyB2aWEgYG5nLW1vZGVsYCBpcyB1bnN1cHBvcnRlZCBmb3IgYGlucHV0W2ZpbGVdYC5cbiAqIDwvZGl2PlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG5nUmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIGF0dHJpYnV0ZSBpZiBzZXQgdG8gdHJ1ZVxuICogQHBhcmFtIHtudW1iZXI9fSBuZ01pbmxlbmd0aCBTZXRzIGBtaW5sZW5ndGhgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBzaG9ydGVyIHRoYW5cbiAqICAgIG1pbmxlbmd0aC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gbmdNYXhsZW5ndGggU2V0cyBgbWF4bGVuZ3RoYCB2YWxpZGF0aW9uIGVycm9yIGtleSBpZiB0aGUgdmFsdWUgaXMgbG9uZ2VyIHRoYW5cbiAqICAgIG1heGxlbmd0aC4gU2V0dGluZyB0aGUgYXR0cmlidXRlIHRvIGEgbmVnYXRpdmUgb3Igbm9uLW51bWVyaWMgdmFsdWUsIGFsbG93cyB2aWV3IHZhbHVlcyBvZiBhbnlcbiAqICAgIGxlbmd0aC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdQYXR0ZXJuIFNldHMgYHBhdHRlcm5gIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSBuZ01vZGVsIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAqICAgIHZhbHVlIGRvZXMgbm90IG1hdGNoIGEgUmVnRXhwIGZvdW5kIGJ5IGV2YWx1YXRpbmcgdGhlIEFuZ3VsYXIgZXhwcmVzc2lvbiBnaXZlbiBpbiB0aGUgYXR0cmlidXRlIHZhbHVlLlxuICogICAgSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgUmVnRXhwIG9iamVjdCwgdGhlbiB0aGlzIGlzIHVzZWQgZGlyZWN0bHkuXG4gKiAgICBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHBcbiAqICAgIGFmdGVyIHdyYXBwaW5nIGl0IGluIGBeYCBhbmQgYCRgIGNoYXJhY3RlcnMuIEZvciBpbnN0YW5jZSwgYFwiYWJjXCJgIHdpbGwgYmUgY29udmVydGVkIHRvXG4gKiAgICBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuPGJyIC8+XG4gKiAgICAqKk5vdGU6KiogQXZvaWQgdXNpbmcgdGhlIGBnYCBmbGFnIG9uIHRoZSBSZWdFeHAsIGFzIGl0IHdpbGwgY2F1c2UgZWFjaCBzdWNjZXNzaXZlIHNlYXJjaCB0b1xuICogICAgc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IHNlYXJjaCdzIG1hdGNoLCB0aHVzIG5vdCB0YWtpbmcgdGhlIHdob2xlIGlucHV0IHZhbHVlIGludG9cbiAqICAgIGFjY291bnQuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXJcbiAqICAgIGludGVyYWN0aW9uIHdpdGggdGhlIGlucHV0IGVsZW1lbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBbbmdUcmltPXRydWVdIElmIHNldCB0byBmYWxzZSBBbmd1bGFyIHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgdHJpbSB0aGUgaW5wdXQuXG4gKiAgICBUaGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkIGZvciBpbnB1dFt0eXBlPXBhc3N3b3JkXSBjb250cm9scywgd2hpY2ggd2lsbCBuZXZlciB0cmltIHRoZVxuICogICAgaW5wdXQuXG4gKlxuICogQGV4YW1wbGVcbiAgICA8ZXhhbXBsZSBuYW1lPVwiaW5wdXQtZGlyZWN0aXZlXCIgbW9kdWxlPVwiaW5wdXRFeGFtcGxlXCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2lucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLnVzZXIgPSB7bmFtZTogJ2d1ZXN0JywgbGFzdDogJ3Zpc2l0b3InfTtcbiAgICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiPlxuICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgIFVzZXIgbmFtZTpcbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCIgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIiByZXF1aXJlZD5cbiAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgPGRpdiByb2xlPVwiYWxlcnRcIj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS51c2VyTmFtZS4kZXJyb3IucmVxdWlyZWRcIj5cbiAgICAgICAgICAgICAgUmVxdWlyZWQhPC9zcGFuPlxuICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICBMYXN0IG5hbWU6XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJsYXN0TmFtZVwiIG5nLW1vZGVsPVwidXNlci5sYXN0XCJcbiAgICAgICAgICAgICAgbmctbWlubGVuZ3RoPVwiM1wiIG5nLW1heGxlbmd0aD1cIjEwXCI+XG4gICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgIDxkaXYgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubGFzdE5hbWUuJGVycm9yLm1pbmxlbmd0aFwiPlxuICAgICAgICAgICAgICAgVG9vIHNob3J0ITwvc3Bhbj5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yXCIgbmctc2hvdz1cIm15Rm9ybS5sYXN0TmFtZS4kZXJyb3IubWF4bGVuZ3RoXCI+XG4gICAgICAgICAgICAgICBUb28gbG9uZyE8L3NwYW4+XG4gICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgPGhyPlxuICAgICAgICAgPHR0PnVzZXIgPSB7e3VzZXJ9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0udXNlck5hbWUuJHZhbGlkID0ge3tteUZvcm0udXNlck5hbWUuJHZhbGlkfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLnVzZXJOYW1lLiRlcnJvciA9IHt7bXlGb3JtLnVzZXJOYW1lLiRlcnJvcn19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS5sYXN0TmFtZS4kdmFsaWQgPSB7e215Rm9ybS5sYXN0TmFtZS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAgICAgICAgIDx0dD5teUZvcm0ubGFzdE5hbWUuJGVycm9yID0ge3tteUZvcm0ubGFzdE5hbWUuJGVycm9yfX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLiR2YWxpZCA9IHt7bXlGb3JtLiR2YWxpZH19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICAgICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IubWlubGVuZ3RoID0ge3shIW15Rm9ybS4kZXJyb3IubWlubGVuZ3RofX08L3R0Pjxici8+XG4gICAgICAgICA8dHQ+bXlGb3JtLiRlcnJvci5tYXhsZW5ndGggPSB7eyEhbXlGb3JtLiRlcnJvci5tYXhsZW5ndGh9fTwvdHQ+PGJyLz5cbiAgICAgICA8L2Rpdj5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgdmFyIHVzZXIgPSBlbGVtZW50KGJ5LmV4YWN0QmluZGluZygndXNlcicpKTtcbiAgICAgICAgdmFyIHVzZXJOYW1lVmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS51c2VyTmFtZS4kdmFsaWQnKSk7XG4gICAgICAgIHZhciBsYXN0TmFtZVZhbGlkID0gZWxlbWVudChieS5iaW5kaW5nKCdteUZvcm0ubGFzdE5hbWUuJHZhbGlkJykpO1xuICAgICAgICB2YXIgbGFzdE5hbWVFcnJvciA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLmxhc3ROYW1lLiRlcnJvcicpKTtcbiAgICAgICAgdmFyIGZvcm1WYWxpZCA9IGVsZW1lbnQoYnkuYmluZGluZygnbXlGb3JtLiR2YWxpZCcpKTtcbiAgICAgICAgdmFyIHVzZXJOYW1lSW5wdXQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd1c2VyLm5hbWUnKSk7XG4gICAgICAgIHZhciB1c2VyTGFzdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlci5sYXN0JykpO1xuXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJuYW1lXCI6XCJndWVzdFwiLFwibGFzdFwiOlwidmlzaXRvclwifScpO1xuICAgICAgICAgIGV4cGVjdCh1c2VyTmFtZVZhbGlkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGJlIGludmFsaWQgaWYgZW1wdHkgd2hlbiByZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHVzZXJOYW1lSW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICB1c2VyTmFtZUlucHV0LnNlbmRLZXlzKCcnKTtcblxuICAgICAgICAgIGV4cGVjdCh1c2VyLmdldFRleHQoKSkudG9Db250YWluKCd7XCJsYXN0XCI6XCJ2aXNpdG9yXCJ9Jyk7XG4gICAgICAgICAgZXhwZWN0KHVzZXJOYW1lVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2ZhbHNlJyk7XG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBiZSB2YWxpZCBpZiBlbXB0eSB3aGVuIG1pbiBsZW5ndGggaXMgc2V0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuc2VuZEtleXMoJycpO1xuXG4gICAgICAgICAgZXhwZWN0KHVzZXIuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3tcIm5hbWVcIjpcImd1ZXN0XCIsXCJsYXN0XCI6XCJcIn0nKTtcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICAgICAgICAgIGV4cGVjdChmb3JtVmFsaWQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGxlc3MgdGhhbiByZXF1aXJlZCBtaW4gbGVuZ3RoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIHVzZXJMYXN0SW5wdXQuc2VuZEtleXMoJ3h4Jyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIn0nKTtcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVFcnJvci5nZXRUZXh0KCkpLnRvQ29udGFpbignbWlubGVuZ3RoJyk7XG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGxvbmdlciB0aGFuIG1heCBsZW5ndGgnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB1c2VyTGFzdElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgdXNlckxhc3RJbnB1dC5zZW5kS2V5cygnc29tZSByaWRpY3Vsb3VzbHkgbG9uZyBuYW1lJyk7XG5cbiAgICAgICAgICBleHBlY3QodXNlci5nZXRUZXh0KCkpLnRvQ29udGFpbigne1wibmFtZVwiOlwiZ3Vlc3RcIn0nKTtcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVWYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgICBleHBlY3QobGFzdE5hbWVFcnJvci5nZXRUZXh0KCkpLnRvQ29udGFpbignbWF4bGVuZ3RoJyk7XG4gICAgICAgICAgZXhwZWN0KGZvcm1WYWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgaW5wdXREaXJlY3RpdmUgPSBbJyRicm93c2VyJywgJyRzbmlmZmVyJywgJyRmaWx0ZXInLCAnJHBhcnNlJyxcbiAgICBmdW5jdGlvbigkYnJvd3NlciwgJHNuaWZmZXIsICRmaWx0ZXIsICRwYXJzZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogWyc/bmdNb2RlbCddLFxuICAgIGxpbms6IHtcbiAgICAgIHByZTogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG4gICAgICAgIGlmIChjdHJsc1swXSkge1xuICAgICAgICAgIChpbnB1dFR5cGVbbG93ZXJjYXNlKGF0dHIudHlwZSldIHx8IGlucHV0VHlwZS50ZXh0KShzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHNbMF0sICRzbmlmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYnJvd3NlciwgJGZpbHRlciwgJHBhcnNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1dO1xuXG5cblxudmFyIENPTlNUQU5UX1ZBTFVFX1JFR0VYUCA9IC9eKHRydWV8ZmFsc2V8XFxkKykkLztcbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdWYWx1ZVxuICogQHJlc3RyaWN0IEFcbiAqIEBwcmlvcml0eSAxMDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEJpbmRzIHRoZSBnaXZlbiBleHByZXNzaW9uIHRvIHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudC5cbiAqXG4gKiBJdCBpcyBtYWlubHkgdXNlZCBvbiB7QGxpbmsgaW5wdXRbcmFkaW9dIGBpbnB1dFtyYWRpb11gfSBhbmQgb3B0aW9uIGVsZW1lbnRzLFxuICogc28gdGhhdCB3aGVuIHRoZSBlbGVtZW50IGlzIHNlbGVjdGVkLCB0aGUge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSBvZiB0aGF0IGVsZW1lbnQgKG9yIGl0c1xuICoge0BsaW5rIHNlbGVjdCBgc2VsZWN0YH0gcGFyZW50IGVsZW1lbnQpIGlzIHNldCB0byB0aGUgYm91bmQgdmFsdWUuIEl0IGlzIGVzcGVjaWFsbHkgdXNlZnVsXG4gKiBmb3IgZHluYW1pY2FsbHkgZ2VuZXJhdGVkIGxpc3RzIHVzaW5nIHtAbGluayBuZ1JlcGVhdCBgbmdSZXBlYXRgfSwgYXMgc2hvd24gYmVsb3cuXG4gKlxuICogSXQgY2FuIGFsc28gYmUgdXNlZCB0byBhY2hpZXZlIG9uZS13YXkgYmluZGluZyBvZiBhIGdpdmVuIGV4cHJlc3Npb24gdG8gYW4gaW5wdXQgZWxlbWVudFxuICogc3VjaCBhcyBhbiBgaW5wdXRbdGV4dF1gIG9yIGEgYHRleHRhcmVhYCwgd2hlbiB0aGF0IGVsZW1lbnQgZG9lcyBub3QgdXNlIG5nTW9kZWwuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nVmFsdWUgQW5ndWxhckpTIGV4cHJlc3Npb24sIHdob3NlIHZhbHVlIHdpbGwgYmUgYm91bmQgdG8gdGhlIGB2YWx1ZWAgYXR0cmlidXRlXG4gKiBhbmQgYHZhbHVlYCBwcm9wZXJ0eSBvZiB0aGUgZWxlbWVudC5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG5hbWU9XCJuZ1ZhbHVlLWRpcmVjdGl2ZVwiIG1vZHVsZT1cInZhbHVlRXhhbXBsZVwiPlxuICAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8c2NyaXB0PlxuICAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCd2YWx1ZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5uYW1lcyA9IFsncGl6emEnLCAndW5pY29ybnMnLCAncm9ib3RzJ107XG4gICAgICAgICAgICAgICRzY29wZS5teSA9IHsgZmF2b3JpdGU6ICd1bmljb3JucycgfTtcbiAgICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgPGZvcm0gbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICAgPGgyPldoaWNoIGlzIHlvdXIgZmF2b3JpdGU/PC9oMj5cbiAgICAgICAgICAgIDxsYWJlbCBuZy1yZXBlYXQ9XCJuYW1lIGluIG5hbWVzXCIgZm9yPVwie3tuYW1lfX1cIj5cbiAgICAgICAgICAgICAge3tuYW1lfX1cbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cIm15LmZhdm9yaXRlXCJcbiAgICAgICAgICAgICAgICAgICAgIG5nLXZhbHVlPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICBpZD1cInt7bmFtZX19XCJcbiAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJmYXZvcml0ZVwiPlxuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8ZGl2PllvdSBjaG9zZSB7e215LmZhdm9yaXRlfX08L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICB2YXIgZmF2b3JpdGUgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215LmZhdm9yaXRlJykpO1xuXG4gICAgICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB0byBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGV4cGVjdChmYXZvcml0ZS5nZXRUZXh0KCkpLnRvQ29udGFpbigndW5pY29ybnMnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KCdzaG91bGQgYmluZCB0aGUgdmFsdWVzIHRvIHRoZSBpbnB1dHMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbGVtZW50LmFsbChieS5tb2RlbCgnbXkuZmF2b3JpdGUnKSkuZ2V0KDApLmNsaWNrKCk7XG4gICAgICAgICAgZXhwZWN0KGZhdm9yaXRlLmdldFRleHQoKSkudG9Db250YWluKCdwaXp6YScpO1xuICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1ZhbHVlRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gIC8qKlxuICAgKiAgaW5wdXRzIHVzZSB0aGUgdmFsdWUgYXR0cmlidXRlIGFzIHRoZWlyIGRlZmF1bHQgdmFsdWUgaWYgdGhlIHZhbHVlIHByb3BlcnR5IGlzIG5vdCBzZXQuXG4gICAqICBPbmNlIHRoZSB2YWx1ZSBwcm9wZXJ0eSBoYXMgYmVlbiBzZXQgKGJ5IGFkZGluZyBpbnB1dCksIGl0IHdpbGwgbm90IHJlYWN0IHRvIGNoYW5nZXMgdG9cbiAgICogIHRoZSB2YWx1ZSBhdHRyaWJ1dGUgYW55bW9yZS4gU2V0dGluZyBib3RoIGF0dHJpYnV0ZSBhbmQgcHJvcGVydHkgZml4ZXMgdGhpcyBiZWhhdmlvciwgYW5kXG4gICAqICBtYWtlcyBpdCBwb3NzaWJsZSB0byB1c2UgbmdWYWx1ZSBhcyBhIHNvcnQgb2Ygb25lLXdheSBiaW5kLlxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlRWxlbWVudFZhbHVlKGVsZW1lbnQsIGF0dHIsIHZhbHVlKSB7XG4gICAgLy8gU3VwcG9ydDogSUU5IG9ubHlcbiAgICAvLyBJbiBJRTkgdmFsdWVzIGFyZSBjb252ZXJ0ZWQgdG8gc3RyaW5nIChlLmcuIGBpbnB1dC52YWx1ZSA9IG51bGxgIHJlc3VsdHMgaW4gYGlucHV0LnZhbHVlID09PSAnbnVsbCdgKS5cbiAgICB2YXIgcHJvcFZhbHVlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogKG1zaWUgPT09IDkpID8gJycgOiBudWxsO1xuICAgIGVsZW1lbnQucHJvcCgndmFsdWUnLCBwcm9wVmFsdWUpO1xuICAgIGF0dHIuJHNldCgndmFsdWUnLCB2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcHJpb3JpdHk6IDEwMCxcbiAgICBjb21waWxlOiBmdW5jdGlvbih0cGwsIHRwbEF0dHIpIHtcbiAgICAgIGlmIChDT05TVEFOVF9WQUxVRV9SRUdFWFAudGVzdCh0cGxBdHRyLm5nVmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1ZhbHVlQ29uc3RhbnRMaW5rKHNjb3BlLCBlbG0sIGF0dHIpIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBzY29wZS4kZXZhbChhdHRyLm5nVmFsdWUpO1xuICAgICAgICAgIHVwZGF0ZUVsZW1lbnRWYWx1ZShlbG0sIGF0dHIsIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1ZhbHVlTGluayhzY29wZSwgZWxtLCBhdHRyKSB7XG4gICAgICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdWYWx1ZSwgZnVuY3Rpb24gdmFsdWVXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgdXBkYXRlRWxlbWVudFZhbHVlKGVsbSwgYXR0ciwgdmFsdWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdCaW5kXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdCaW5kYCBhdHRyaWJ1dGUgdGVsbHMgQW5ndWxhciB0byByZXBsYWNlIHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIHNwZWNpZmllZCBIVE1MIGVsZW1lbnRcbiAqIHdpdGggdGhlIHZhbHVlIG9mIGEgZ2l2ZW4gZXhwcmVzc2lvbiwgYW5kIHRvIHVwZGF0ZSB0aGUgdGV4dCBjb250ZW50IHdoZW4gdGhlIHZhbHVlIG9mIHRoYXRcbiAqIGV4cHJlc3Npb24gY2hhbmdlcy5cbiAqXG4gKiBUeXBpY2FsbHksIHlvdSBkb24ndCB1c2UgYG5nQmluZGAgZGlyZWN0bHksIGJ1dCBpbnN0ZWFkIHlvdSB1c2UgdGhlIGRvdWJsZSBjdXJseSBtYXJrdXAgbGlrZVxuICogYHt7IGV4cHJlc3Npb24gfX1gIHdoaWNoIGlzIHNpbWlsYXIgYnV0IGxlc3MgdmVyYm9zZS5cbiAqXG4gKiBJdCBpcyBwcmVmZXJhYmxlIHRvIHVzZSBgbmdCaW5kYCBpbnN0ZWFkIG9mIGB7eyBleHByZXNzaW9uIH19YCBpZiBhIHRlbXBsYXRlIGlzIG1vbWVudGFyaWx5XG4gKiBkaXNwbGF5ZWQgYnkgdGhlIGJyb3dzZXIgaW4gaXRzIHJhdyBzdGF0ZSBiZWZvcmUgQW5ndWxhciBjb21waWxlcyBpdC4gU2luY2UgYG5nQmluZGAgaXMgYW5cbiAqIGVsZW1lbnQgYXR0cmlidXRlLCBpdCBtYWtlcyB0aGUgYmluZGluZ3MgaW52aXNpYmxlIHRvIHRoZSB1c2VyIHdoaWxlIHRoZSBwYWdlIGlzIGxvYWRpbmcuXG4gKlxuICogQW4gYWx0ZXJuYXRpdmUgc29sdXRpb24gdG8gdGhpcyBwcm9ibGVtIHdvdWxkIGJlIHVzaW5nIHRoZVxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0Nsb2FrIG5nQ2xvYWt9IGRpcmVjdGl2ZS5cbiAqXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQmluZCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogRW50ZXIgYSBuYW1lIGluIHRoZSBMaXZlIFByZXZpZXcgdGV4dCBib3g7IHRoZSBncmVldGluZyBiZWxvdyB0aGUgdGV4dCBib3ggY2hhbmdlcyBpbnN0YW50bHkuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kRXhhbXBsZVwiIG5hbWU9XCJuZy1iaW5kXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJ1doaXJsZWQnO1xuICAgICAgICAgICB9XSk7XG4gICAgICAgPC9zY3JpcHQ+XG4gICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgIDxsYWJlbD5FbnRlciBuYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm5hbWVcIj48L2xhYmVsPjxicj5cbiAgICAgICAgIEhlbGxvIDxzcGFuIG5nLWJpbmQ9XCJuYW1lXCI+PC9zcGFuPiFcbiAgICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1iaW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICB2YXIgbmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZScpKTtcblxuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbmFtZScpKS5nZXRUZXh0KCkpLnRvQmUoJ1doaXJsZWQnKTtcbiAgICAgICAgIG5hbWVJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbmFtZUlucHV0LnNlbmRLZXlzKCd3b3JsZCcpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbmFtZScpKS5nZXRUZXh0KCkpLnRvQmUoJ3dvcmxkJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQmluZERpcmVjdGl2ZSA9IFsnJGNvbXBpbGUnLCBmdW5jdGlvbigkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQUMnLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZENvbXBpbGUodGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAkY29tcGlsZS4kJGFkZEJpbmRpbmdDbGFzcyh0ZW1wbGF0ZUVsZW1lbnQpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nQmluZExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBhdHRyLm5nQmluZCk7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0JpbmQsIGZ1bmN0aW9uIG5nQmluZFdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmluZFRlbXBsYXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQmluZFRlbXBsYXRlYCBkaXJlY3RpdmUgc3BlY2lmaWVzIHRoYXQgdGhlIGVsZW1lbnRcbiAqIHRleHQgY29udGVudCBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCB0aGUgaW50ZXJwb2xhdGlvbiBvZiB0aGUgdGVtcGxhdGVcbiAqIGluIHRoZSBgbmdCaW5kVGVtcGxhdGVgIGF0dHJpYnV0ZS5cbiAqIFVubGlrZSBgbmdCaW5kYCwgdGhlIGBuZ0JpbmRUZW1wbGF0ZWAgY2FuIGNvbnRhaW4gbXVsdGlwbGUgYHt7YCBgfX1gXG4gKiBleHByZXNzaW9ucy4gVGhpcyBkaXJlY3RpdmUgaXMgbmVlZGVkIHNpbmNlIHNvbWUgSFRNTCBlbGVtZW50c1xuICogKHN1Y2ggYXMgVElUTEUgYW5kIE9QVElPTikgY2Fubm90IGNvbnRhaW4gU1BBTiBlbGVtZW50cy5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ0JpbmRUZW1wbGF0ZSB0ZW1wbGF0ZSBvZiBmb3JtXG4gKiAgIDx0dD57ezwvdHQ+IDx0dD5leHByZXNzaW9uPC90dD4gPHR0Pn19PC90dD4gdG8gZXZhbC5cbiAqXG4gKiBAZXhhbXBsZVxuICogVHJ5IGl0IGhlcmU6IGVudGVyIHRleHQgaW4gdGV4dCBib3ggYW5kIHdhdGNoIHRoZSBncmVldGluZyBjaGFuZ2UuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kRXhhbXBsZVwiIG5hbWU9XCJuZy1iaW5kLXRlbXBsYXRlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgIGFuZ3VsYXIubW9kdWxlKCdiaW5kRXhhbXBsZScsIFtdKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgICRzY29wZS5zYWx1dGF0aW9uID0gJ0hlbGxvJztcbiAgICAgICAgICAgICAkc2NvcGUubmFtZSA9ICdXb3JsZCc7XG4gICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8bGFiZWw+U2FsdXRhdGlvbjogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzYWx1dGF0aW9uXCI+PC9sYWJlbD48YnI+XG4gICAgICAgIDxsYWJlbD5OYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm5hbWVcIj48L2xhYmVsPjxicj5cbiAgICAgICAgPHByZSBuZy1iaW5kLXRlbXBsYXRlPVwie3tzYWx1dGF0aW9ufX0ge3tuYW1lfX0hXCI+PC9wcmU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctYmluZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgdmFyIHNhbHV0YXRpb25FbGVtID0gZWxlbWVudChieS5iaW5kaW5nKCdzYWx1dGF0aW9uJykpO1xuICAgICAgICAgdmFyIHNhbHV0YXRpb25JbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NhbHV0YXRpb24nKSk7XG4gICAgICAgICB2YXIgbmFtZUlucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbmFtZScpKTtcblxuICAgICAgICAgZXhwZWN0KHNhbHV0YXRpb25FbGVtLmdldFRleHQoKSkudG9CZSgnSGVsbG8gV29ybGQhJyk7XG5cbiAgICAgICAgIHNhbHV0YXRpb25JbnB1dC5jbGVhcigpO1xuICAgICAgICAgc2FsdXRhdGlvbklucHV0LnNlbmRLZXlzKCdHcmVldGluZ3MnKTtcbiAgICAgICAgIG5hbWVJbnB1dC5jbGVhcigpO1xuICAgICAgICAgbmFtZUlucHV0LnNlbmRLZXlzKCd1c2VyJyk7XG5cbiAgICAgICAgIGV4cGVjdChzYWx1dGF0aW9uRWxlbS5nZXRUZXh0KCkpLnRvQmUoJ0dyZWV0aW5ncyB1c2VyIScpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0JpbmRUZW1wbGF0ZURpcmVjdGl2ZSA9IFsnJGludGVycG9sYXRlJywgJyRjb21waWxlJywgZnVuY3Rpb24oJGludGVycG9sYXRlLCAkY29tcGlsZSkge1xuICByZXR1cm4ge1xuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZFRlbXBsYXRlQ29tcGlsZSh0ZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0NsYXNzKHRlbXBsYXRlRWxlbWVudCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdCaW5kVGVtcGxhdGVMaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZUZuID0gJGludGVycG9sYXRlKGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyLm5nQmluZFRlbXBsYXRlKSk7XG4gICAgICAgICRjb21waWxlLiQkYWRkQmluZGluZ0luZm8oZWxlbWVudCwgaW50ZXJwb2xhdGVGbi5leHByZXNzaW9ucyk7XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICBhdHRyLiRvYnNlcnZlKCduZ0JpbmRUZW1wbGF0ZScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGlzVW5kZWZpbmVkKHZhbHVlKSA/ICcnIDogdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmluZEh0bWxcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEV2YWx1YXRlcyB0aGUgZXhwcmVzc2lvbiBhbmQgaW5zZXJ0cyB0aGUgcmVzdWx0aW5nIEhUTUwgaW50byB0aGUgZWxlbWVudCBpbiBhIHNlY3VyZSB3YXkuIEJ5IGRlZmF1bHQsXG4gKiB0aGUgcmVzdWx0aW5nIEhUTUwgY29udGVudCB3aWxsIGJlIHNhbml0aXplZCB1c2luZyB0aGUge0BsaW5rIG5nU2FuaXRpemUuJHNhbml0aXplICRzYW5pdGl6ZX0gc2VydmljZS5cbiAqIFRvIHV0aWxpemUgdGhpcyBmdW5jdGlvbmFsaXR5LCBlbnN1cmUgdGhhdCBgJHNhbml0aXplYCBpcyBhdmFpbGFibGUsIGZvciBleGFtcGxlLCBieSBpbmNsdWRpbmcge0BsaW5rXG4gKiBuZ1Nhbml0aXplfSBpbiB5b3VyIG1vZHVsZSdzIGRlcGVuZGVuY2llcyAobm90IGluIGNvcmUgQW5ndWxhcikuIEluIG9yZGVyIHRvIHVzZSB7QGxpbmsgbmdTYW5pdGl6ZX1cbiAqIGluIHlvdXIgbW9kdWxlJ3MgZGVwZW5kZW5jaWVzLCB5b3UgbmVlZCB0byBpbmNsdWRlIFwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiIGluIHlvdXIgYXBwbGljYXRpb24uXG4gKlxuICogWW91IG1heSBhbHNvIGJ5cGFzcyBzYW5pdGl6YXRpb24gZm9yIHZhbHVlcyB5b3Uga25vdyBhcmUgc2FmZS4gVG8gZG8gc28sIGJpbmQgdG9cbiAqIGFuIGV4cGxpY2l0bHkgdHJ1c3RlZCB2YWx1ZSB2aWEge0BsaW5rIG5nLiRzY2UjdHJ1c3RBc0h0bWwgJHNjZS50cnVzdEFzSHRtbH0uICBTZWUgdGhlIGV4YW1wbGVcbiAqIHVuZGVyIHtAbGluayBuZy4kc2NlI3Nob3ctbWUtYW4tZXhhbXBsZS11c2luZy1zY2UtIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nIChTQ0UpfS5cbiAqXG4gKiBOb3RlOiBJZiBhIGAkc2FuaXRpemVgIHNlcnZpY2UgaXMgdW5hdmFpbGFibGUgYW5kIHRoZSBib3VuZCB2YWx1ZSBpc24ndCBleHBsaWNpdGx5IHRydXN0ZWQsIHlvdVxuICogd2lsbCBoYXZlIGFuIGV4Y2VwdGlvbiAoaW5zdGVhZCBvZiBhbiBleHBsb2l0LilcbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdCaW5kSHRtbCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZS5cbiAqXG4gKiBAZXhhbXBsZVxuXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJiaW5kSHRtbEV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiIG5hbWU9XCJuZy1iaW5kLWh0bWxcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICA8cCBuZy1iaW5kLWh0bWw9XCJteUhUTUxcIj48L3A+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cblxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2JpbmRIdG1sRXhhbXBsZScsIFsnbmdTYW5pdGl6ZSddKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgJHNjb3BlLm15SFRNTCA9XG4gICAgICAgICAgICAgICdJIGFtIGFuIDxjb2RlPkhUTUw8L2NvZGU+c3RyaW5nIHdpdGggJyArXG4gICAgICAgICAgICAgICc8YSBocmVmPVwiI1wiPmxpbmtzITwvYT4gYW5kIG90aGVyIDxlbT5zdHVmZjwvZW0+JztcbiAgICAgICAgIH1dKTtcbiAgICAgPC9maWxlPlxuXG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nLWJpbmQtaHRtbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnbXlIVE1MJykpLmdldFRleHQoKSkudG9CZShcbiAgICAgICAgICAgICAnSSBhbSBhbiBIVE1Mc3RyaW5nIHdpdGggbGlua3MhIGFuZCBvdGhlciBzdHVmZicpO1xuICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ0JpbmRIdG1sRGlyZWN0aXZlID0gWyckc2NlJywgJyRwYXJzZScsICckY29tcGlsZScsIGZ1bmN0aW9uKCRzY2UsICRwYXJzZSwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nQmluZEh0bWxDb21waWxlKHRFbGVtZW50LCB0QXR0cnMpIHtcbiAgICAgIHZhciBuZ0JpbmRIdG1sR2V0dGVyID0gJHBhcnNlKHRBdHRycy5uZ0JpbmRIdG1sKTtcbiAgICAgIHZhciBuZ0JpbmRIdG1sV2F0Y2ggPSAkcGFyc2UodEF0dHJzLm5nQmluZEh0bWwsIGZ1bmN0aW9uIHNjZVZhbHVlT2YodmFsKSB7XG4gICAgICAgIC8vIFVud3JhcCB0aGUgdmFsdWUgdG8gY29tcGFyZSB0aGUgYWN0dWFsIGlubmVyIHNhZmUgdmFsdWUsIG5vdCB0aGUgd3JhcHBlciBvYmplY3QuXG4gICAgICAgIHJldHVybiAkc2NlLnZhbHVlT2YodmFsKTtcbiAgICAgIH0pO1xuICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nQ2xhc3ModEVsZW1lbnQpO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdCaW5kSHRtbExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgJGNvbXBpbGUuJCRhZGRCaW5kaW5nSW5mbyhlbGVtZW50LCBhdHRyLm5nQmluZEh0bWwpO1xuXG4gICAgICAgIHNjb3BlLiR3YXRjaChuZ0JpbmRIdG1sV2F0Y2gsIGZ1bmN0aW9uIG5nQmluZEh0bWxXYXRjaEFjdGlvbigpIHtcbiAgICAgICAgICAvLyBUaGUgd2F0Y2hlZCB2YWx1ZSBpcyB0aGUgdW53cmFwcGVkIHZhbHVlLiBUbyBhdm9pZCByZS1lc2NhcGluZywgdXNlIHRoZSBkaXJlY3QgZ2V0dGVyLlxuICAgICAgICAgIHZhciB2YWx1ZSA9IG5nQmluZEh0bWxHZXR0ZXIoc2NvcGUpO1xuICAgICAgICAgIGVsZW1lbnQuaHRtbCgkc2NlLmdldFRydXN0ZWRIdG1sKHZhbHVlKSB8fCAnJyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NoYW5nZVxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEV2YWx1YXRlIHRoZSBnaXZlbiBleHByZXNzaW9uIHdoZW4gdGhlIHVzZXIgY2hhbmdlcyB0aGUgaW5wdXQuXG4gKiBUaGUgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQgaW1tZWRpYXRlbHksIHVubGlrZSB0aGUgSmF2YVNjcmlwdCBvbmNoYW5nZSBldmVudFxuICogd2hpY2ggb25seSB0cmlnZ2VycyBhdCB0aGUgZW5kIG9mIGEgY2hhbmdlICh1c3VhbGx5LCB3aGVuIHRoZSB1c2VyIGxlYXZlcyB0aGVcbiAqIGZvcm0gZWxlbWVudCBvciBwcmVzc2VzIHRoZSByZXR1cm4ga2V5KS5cbiAqXG4gKiBUaGUgYG5nQ2hhbmdlYCBleHByZXNzaW9uIGlzIG9ubHkgZXZhbHVhdGVkIHdoZW4gYSBjaGFuZ2UgaW4gdGhlIGlucHV0IHZhbHVlIGNhdXNlc1xuICogYSBuZXcgdmFsdWUgdG8gYmUgY29tbWl0dGVkIHRvIHRoZSBtb2RlbC5cbiAqXG4gKiBJdCB3aWxsIG5vdCBiZSBldmFsdWF0ZWQ6XG4gKiAqIGlmIHRoZSB2YWx1ZSByZXR1cm5lZCBmcm9tIHRoZSBgJHBhcnNlcnNgIHRyYW5zZm9ybWF0aW9uIHBpcGVsaW5lIGhhcyBub3QgY2hhbmdlZFxuICogKiBpZiB0aGUgaW5wdXQgaGFzIGNvbnRpbnVlZCB0byBiZSBpbnZhbGlkIHNpbmNlIHRoZSBtb2RlbCB3aWxsIHN0YXkgYG51bGxgXG4gKiAqIGlmIHRoZSBtb2RlbCBpcyBjaGFuZ2VkIHByb2dyYW1tYXRpY2FsbHkgYW5kIG5vdCBieSBhIGNoYW5nZSB0byB0aGUgaW5wdXQgdmFsdWVcbiAqXG4gKlxuICogTm90ZSwgdGhpcyBkaXJlY3RpdmUgcmVxdWlyZXMgYG5nTW9kZWxgIHRvIGJlIHByZXNlbnQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2hhbmdlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb24gY2hhbmdlXG4gKiBpbiBpbnB1dCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nQ2hhbmdlLWRpcmVjdGl2ZVwiIG1vZHVsZT1cImNoYW5nZUV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ2NoYW5nZUV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUuY291bnRlciA9IDA7XG4gKiAgICAgICAgICAgJHNjb3BlLmNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgICAgJHNjb3BlLmNvdW50ZXIrKztcbiAqICAgICAgICAgICB9O1xuICogICAgICAgICB9XSk7XG4gKiAgICAgPC9zY3JpcHQ+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbmZpcm1lZFwiIG5nLWNoYW5nZT1cImNoYW5nZSgpXCIgaWQ9XCJuZy1jaGFuZ2UtZXhhbXBsZTFcIiAvPlxuICogICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY29uZmlybWVkXCIgaWQ9XCJuZy1jaGFuZ2UtZXhhbXBsZTJcIiAvPlxuICogICAgICAgPGxhYmVsIGZvcj1cIm5nLWNoYW5nZS1leGFtcGxlMlwiPkNvbmZpcm1lZDwvbGFiZWw+PGJyIC8+XG4gKiAgICAgICA8dHQ+ZGVidWcgPSB7e2NvbmZpcm1lZH19PC90dD48YnIvPlxuICogICAgICAgPHR0PmNvdW50ZXIgPSB7e2NvdW50ZXJ9fTwvdHQ+PGJyLz5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgdmFyIGNvdW50ZXIgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50ZXInKSk7XG4gKiAgICAgdmFyIGRlYnVnID0gZWxlbWVudChieS5iaW5kaW5nKCdjb25maXJtZWQnKSk7XG4gKlxuICogICAgIGl0KCdzaG91bGQgZXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gaWYgY2hhbmdpbmcgZnJvbSB2aWV3JywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QoY291bnRlci5nZXRUZXh0KCkpLnRvQ29udGFpbignMCcpO1xuICpcbiAqICAgICAgIGVsZW1lbnQoYnkuaWQoJ25nLWNoYW5nZS1leGFtcGxlMScpKS5jbGljaygpO1xuICpcbiAqICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9Db250YWluKCcxJyk7XG4gKiAgICAgICBleHBlY3QoZGVidWcuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBub3QgZXZhbHVhdGUgdGhlIGV4cHJlc3Npb24gaWYgY2hhbmdpbmcgZnJvbSBtb2RlbCcsIGZ1bmN0aW9uKCkge1xuICogICAgICAgZWxlbWVudChieS5pZCgnbmctY2hhbmdlLWV4YW1wbGUyJykpLmNsaWNrKCk7XG5cbiAqICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9Db250YWluKCcwJyk7XG4gKiAgICAgICBleHBlY3QoZGVidWcuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ3RydWUnKTtcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgbmdDaGFuZ2VEaXJlY3RpdmUgPSB2YWx1ZUZuKHtcbiAgcmVzdHJpY3Q6ICdBJyxcbiAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xuICAgIGN0cmwuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMucHVzaChmdW5jdGlvbigpIHtcbiAgICAgIHNjb3BlLiRldmFsKGF0dHIubmdDaGFuZ2UpO1xuICAgIH0pO1xuICB9XG59KTtcblxuLyogZXhwb3J0ZWRcbiAgbmdDbGFzc0RpcmVjdGl2ZSxcbiAgbmdDbGFzc0V2ZW5EaXJlY3RpdmUsXG4gIG5nQ2xhc3NPZGREaXJlY3RpdmVcbiovXG5cbmZ1bmN0aW9uIGNsYXNzRGlyZWN0aXZlKG5hbWUsIHNlbGVjdG9yKSB7XG4gIG5hbWUgPSAnbmdDbGFzcycgKyBuYW1lO1xuICB2YXIgaW5kZXhXYXRjaEV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFsnJHBhcnNlJywgZnVuY3Rpb24oJHBhcnNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQUMnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgdmFyIGV4cHJlc3Npb24gPSBhdHRyW25hbWVdLnRyaW0oKTtcbiAgICAgICAgdmFyIGlzT25lVGltZSA9IChleHByZXNzaW9uLmNoYXJBdCgwKSA9PT0gJzonKSAmJiAoZXhwcmVzc2lvbi5jaGFyQXQoMSkgPT09ICc6Jyk7XG5cbiAgICAgICAgdmFyIHdhdGNoSW50ZXJjZXB0b3IgPSBpc09uZVRpbWUgPyB0b0ZsYXRWYWx1ZSA6IHRvQ2xhc3NTdHJpbmc7XG4gICAgICAgIHZhciB3YXRjaEV4cHJlc3Npb24gPSAkcGFyc2UoZXhwcmVzc2lvbiwgd2F0Y2hJbnRlcmNlcHRvcik7XG4gICAgICAgIHZhciB3YXRjaEFjdGlvbiA9IGlzT25lVGltZSA/IG5nQ2xhc3NPbmVUaW1lV2F0Y2hBY3Rpb24gOiBuZ0NsYXNzV2F0Y2hBY3Rpb247XG5cbiAgICAgICAgdmFyIGNsYXNzQ291bnRzID0gZWxlbWVudC5kYXRhKCckY2xhc3NDb3VudHMnKTtcbiAgICAgICAgdmFyIG9sZE1vZHVsbyA9IHRydWU7XG4gICAgICAgIHZhciBvbGRDbGFzc1N0cmluZztcblxuICAgICAgICBpZiAoIWNsYXNzQ291bnRzKSB7XG4gICAgICAgICAgLy8gVXNlIGNyZWF0ZU1hcCgpIHRvIHByZXZlbnQgY2xhc3MgYXNzdW1wdGlvbnMgaW52b2x2aW5nIHByb3BlcnR5XG4gICAgICAgICAgLy8gbmFtZXMgaW4gT2JqZWN0LnByb3RvdHlwZVxuICAgICAgICAgIGNsYXNzQ291bnRzID0gY3JlYXRlTWFwKCk7XG4gICAgICAgICAgZWxlbWVudC5kYXRhKCckY2xhc3NDb3VudHMnLCBjbGFzc0NvdW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZSAhPT0gJ25nQ2xhc3MnKSB7XG4gICAgICAgICAgaWYgKCFpbmRleFdhdGNoRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgaW5kZXhXYXRjaEV4cHJlc3Npb24gPSAkcGFyc2UoJyRpbmRleCcsIGZ1bmN0aW9uIG1vZHVsb1R3bygkaW5kZXgpIHtcbiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICAgICAgICAgICAgcmV0dXJuICRpbmRleCAmIDE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzY29wZS4kd2F0Y2goaW5kZXhXYXRjaEV4cHJlc3Npb24sIG5nQ2xhc3NJbmRleFdhdGNoQWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLiR3YXRjaCh3YXRjaEV4cHJlc3Npb24sIHdhdGNoQWN0aW9uLCBpc09uZVRpbWUpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZENsYXNzZXMoY2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICBjbGFzc1N0cmluZyA9IGRpZ2VzdENsYXNzQ291bnRzKHNwbGl0KGNsYXNzU3RyaW5nKSwgMSk7XG4gICAgICAgICAgYXR0ci4kYWRkQ2xhc3MoY2xhc3NTdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3NlcyhjbGFzc1N0cmluZykge1xuICAgICAgICAgIGNsYXNzU3RyaW5nID0gZGlnZXN0Q2xhc3NDb3VudHMoc3BsaXQoY2xhc3NTdHJpbmcpLCAtMSk7XG4gICAgICAgICAgYXR0ci4kcmVtb3ZlQ2xhc3MoY2xhc3NTdHJpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhvbGRDbGFzc1N0cmluZywgbmV3Q2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICB2YXIgb2xkQ2xhc3NBcnJheSA9IHNwbGl0KG9sZENsYXNzU3RyaW5nKTtcbiAgICAgICAgICB2YXIgbmV3Q2xhc3NBcnJheSA9IHNwbGl0KG5ld0NsYXNzU3RyaW5nKTtcblxuICAgICAgICAgIHZhciB0b1JlbW92ZUFycmF5ID0gYXJyYXlEaWZmZXJlbmNlKG9sZENsYXNzQXJyYXksIG5ld0NsYXNzQXJyYXkpO1xuICAgICAgICAgIHZhciB0b0FkZEFycmF5ID0gYXJyYXlEaWZmZXJlbmNlKG5ld0NsYXNzQXJyYXksIG9sZENsYXNzQXJyYXkpO1xuXG4gICAgICAgICAgdmFyIHRvUmVtb3ZlU3RyaW5nID0gZGlnZXN0Q2xhc3NDb3VudHModG9SZW1vdmVBcnJheSwgLTEpO1xuICAgICAgICAgIHZhciB0b0FkZFN0cmluZyA9IGRpZ2VzdENsYXNzQ291bnRzKHRvQWRkQXJyYXksIDEpO1xuXG4gICAgICAgICAgYXR0ci4kYWRkQ2xhc3ModG9BZGRTdHJpbmcpO1xuICAgICAgICAgIGF0dHIuJHJlbW92ZUNsYXNzKHRvUmVtb3ZlU3RyaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRpZ2VzdENsYXNzQ291bnRzKGNsYXNzQXJyYXksIGNvdW50KSB7XG4gICAgICAgICAgdmFyIGNsYXNzZXNUb1VwZGF0ZSA9IFtdO1xuXG4gICAgICAgICAgZm9yRWFjaChjbGFzc0FycmF5LCBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDAgfHwgY2xhc3NDb3VudHNbY2xhc3NOYW1lXSkge1xuICAgICAgICAgICAgICBjbGFzc0NvdW50c1tjbGFzc05hbWVdID0gKGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gfHwgMCkgKyBjb3VudDtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzQ291bnRzW2NsYXNzTmFtZV0gPT09ICsoY291bnQgPiAwKSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXNUb1VwZGF0ZS5wdXNoKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBjbGFzc2VzVG9VcGRhdGUuam9pbignICcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbmdDbGFzc0luZGV4V2F0Y2hBY3Rpb24obmV3TW9kdWxvKSB7XG4gICAgICAgICAgLy8gVGhpcyB3YXRjaC1hY3Rpb24gc2hvdWxkIHJ1biBiZWZvcmUgdGhlIGBuZ0NsYXNzW09uZVRpbWVdV2F0Y2hBY3Rpb24oKWAsIHRodXMgaXRcbiAgICAgICAgICAvLyBhZGRzL3JlbW92ZXMgYG9sZENsYXNzU3RyaW5nYC4gSWYgdGhlIGBuZ0NsYXNzYCBleHByZXNzaW9uIGhhcyBjaGFuZ2VkIGFzIHdlbGwsIHRoZVxuICAgICAgICAgIC8vIGBuZ0NsYXNzW09uZVRpbWVdV2F0Y2hBY3Rpb24oKWAgd2lsbCB1cGRhdGUgdGhlIGNsYXNzZXMuXG4gICAgICAgICAgaWYgKG5ld01vZHVsbyA9PT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGFkZENsYXNzZXMob2xkQ2xhc3NTdHJpbmcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW1vdmVDbGFzc2VzKG9sZENsYXNzU3RyaW5nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvbGRNb2R1bG8gPSBuZXdNb2R1bG87XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBuZ0NsYXNzT25lVGltZVdhdGNoQWN0aW9uKG5ld0NsYXNzVmFsdWUpIHtcbiAgICAgICAgICB2YXIgbmV3Q2xhc3NTdHJpbmcgPSB0b0NsYXNzU3RyaW5nKG5ld0NsYXNzVmFsdWUpO1xuXG4gICAgICAgICAgaWYgKG5ld0NsYXNzU3RyaW5nICE9PSBvbGRDbGFzc1N0cmluZykge1xuICAgICAgICAgICAgbmdDbGFzc1dhdGNoQWN0aW9uKG5ld0NsYXNzU3RyaW5nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBuZ0NsYXNzV2F0Y2hBY3Rpb24obmV3Q2xhc3NTdHJpbmcpIHtcbiAgICAgICAgICBpZiAob2xkTW9kdWxvID09PSBzZWxlY3Rvcikge1xuICAgICAgICAgICAgdXBkYXRlQ2xhc3NlcyhvbGRDbGFzc1N0cmluZywgbmV3Q2xhc3NTdHJpbmcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9sZENsYXNzU3RyaW5nID0gbmV3Q2xhc3NTdHJpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XTtcblxuICAvLyBIZWxwZXJzXG4gIGZ1bmN0aW9uIGFycmF5RGlmZmVyZW5jZSh0b2tlbnMxLCB0b2tlbnMyKSB7XG4gICAgaWYgKCF0b2tlbnMxIHx8ICF0b2tlbnMxLmxlbmd0aCkgcmV0dXJuIFtdO1xuICAgIGlmICghdG9rZW5zMiB8fCAhdG9rZW5zMi5sZW5ndGgpIHJldHVybiB0b2tlbnMxO1xuXG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgb3V0ZXI6XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMxLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdG9rZW4gPSB0b2tlbnMxW2ldO1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0b2tlbnMyLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gdG9rZW5zMltqXSkgY29udGludWUgb3V0ZXI7XG4gICAgICB9XG4gICAgICB2YWx1ZXMucHVzaCh0b2tlbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwbGl0KGNsYXNzU3RyaW5nKSB7XG4gICAgcmV0dXJuIGNsYXNzU3RyaW5nICYmIGNsYXNzU3RyaW5nLnNwbGl0KCcgJyk7XG4gIH1cblxuICBmdW5jdGlvbiB0b0NsYXNzU3RyaW5nKGNsYXNzVmFsdWUpIHtcbiAgICB2YXIgY2xhc3NTdHJpbmcgPSBjbGFzc1ZhbHVlO1xuXG4gICAgaWYgKGlzQXJyYXkoY2xhc3NWYWx1ZSkpIHtcbiAgICAgIGNsYXNzU3RyaW5nID0gY2xhc3NWYWx1ZS5tYXAodG9DbGFzc1N0cmluZykuam9pbignICcpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoY2xhc3NWYWx1ZSkpIHtcbiAgICAgIGNsYXNzU3RyaW5nID0gT2JqZWN0LmtleXMoY2xhc3NWYWx1ZSkuXG4gICAgICAgIGZpbHRlcihmdW5jdGlvbihrZXkpIHsgcmV0dXJuIGNsYXNzVmFsdWVba2V5XTsgfSkuXG4gICAgICAgIGpvaW4oJyAnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xhc3NTdHJpbmc7XG4gIH1cblxuICBmdW5jdGlvbiB0b0ZsYXRWYWx1ZShjbGFzc1ZhbHVlKSB7XG4gICAgdmFyIGZsYXRWYWx1ZSA9IGNsYXNzVmFsdWU7XG5cbiAgICBpZiAoaXNBcnJheShjbGFzc1ZhbHVlKSkge1xuICAgICAgZmxhdFZhbHVlID0gY2xhc3NWYWx1ZS5tYXAodG9GbGF0VmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoY2xhc3NWYWx1ZSkpIHtcbiAgICAgIHZhciBoYXNVbmRlZmluZWQgPSBmYWxzZTtcblxuICAgICAgZmxhdFZhbHVlID0gT2JqZWN0LmtleXMoY2xhc3NWYWx1ZSkuZmlsdGVyKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBjbGFzc1ZhbHVlW2tleV07XG5cbiAgICAgICAgaWYgKCFoYXNVbmRlZmluZWQgJiYgaXNVbmRlZmluZWQodmFsdWUpKSB7XG4gICAgICAgICAgaGFzVW5kZWZpbmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaGFzVW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFByZXZlbnQgdGhlIGBvbmVUaW1lTGl0ZXJhbFdhdGNoSW50ZXJjZXB0b3JgIGZyb20gdW5yZWdpc3RlcmluZ1xuICAgICAgICAvLyB0aGUgd2F0Y2hlciwgYnkgaW5jbHVkaW5nIGF0IGxlYXN0IG9uZSBgdW5kZWZpbmVkYCB2YWx1ZS5cbiAgICAgICAgZmxhdFZhbHVlLnB1c2godW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmxhdFZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDbGFzc1xuICogQHJlc3RyaWN0IEFDXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbGFzc2AgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gZHluYW1pY2FsbHkgc2V0IENTUyBjbGFzc2VzIG9uIGFuIEhUTUwgZWxlbWVudCBieSBkYXRhYmluZGluZ1xuICogYW4gZXhwcmVzc2lvbiB0aGF0IHJlcHJlc2VudHMgYWxsIGNsYXNzZXMgdG8gYmUgYWRkZWQuXG4gKlxuICogVGhlIGRpcmVjdGl2ZSBvcGVyYXRlcyBpbiB0aHJlZSBkaWZmZXJlbnQgd2F5cywgZGVwZW5kaW5nIG9uIHdoaWNoIG9mIHRocmVlIHR5cGVzIHRoZSBleHByZXNzaW9uXG4gKiBldmFsdWF0ZXMgdG86XG4gKlxuICogMS4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgc3RyaW5nLCB0aGUgc3RyaW5nIHNob3VsZCBiZSBvbmUgb3IgbW9yZSBzcGFjZS1kZWxpbWl0ZWQgY2xhc3NcbiAqIG5hbWVzLlxuICpcbiAqIDIuIElmIHRoZSBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhbiBvYmplY3QsIHRoZW4gZm9yIGVhY2gga2V5LXZhbHVlIHBhaXIgb2YgdGhlXG4gKiBvYmplY3Qgd2l0aCBhIHRydXRoeSB2YWx1ZSB0aGUgY29ycmVzcG9uZGluZyBrZXkgaXMgdXNlZCBhcyBhIGNsYXNzIG5hbWUuXG4gKlxuICogMy4gSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGFuIGFycmF5LCBlYWNoIGVsZW1lbnQgb2YgdGhlIGFycmF5IHNob3VsZCBlaXRoZXIgYmUgYSBzdHJpbmcgYXMgaW5cbiAqIHR5cGUgMSBvciBhbiBvYmplY3QgYXMgaW4gdHlwZSAyLiBUaGlzIG1lYW5zIHRoYXQgeW91IGNhbiBtaXggc3RyaW5ncyBhbmQgb2JqZWN0cyB0b2dldGhlciBpbiBhbiBhcnJheVxuICogdG8gZ2l2ZSB5b3UgbW9yZSBjb250cm9sIG92ZXIgd2hhdCBDU1MgY2xhc3NlcyBhcHBlYXIuIFNlZSB0aGUgY29kZSBiZWxvdyBmb3IgYW4gZXhhbXBsZSBvZiB0aGlzLlxuICpcbiAqXG4gKiBUaGUgZGlyZWN0aXZlIHdvbid0IGFkZCBkdXBsaWNhdGUgY2xhc3NlcyBpZiBhIHBhcnRpY3VsYXIgY2xhc3Mgd2FzIGFscmVhZHkgc2V0LlxuICpcbiAqIFdoZW4gdGhlIGV4cHJlc3Npb24gY2hhbmdlcywgdGhlIHByZXZpb3VzbHkgYWRkZWQgY2xhc3NlcyBhcmUgcmVtb3ZlZCBhbmQgb25seSB0aGVuIGFyZSB0aGVcbiAqIG5ldyBjbGFzc2VzIGFkZGVkLlxuICpcbiAqIEBrbm93bklzc3VlXG4gKiBZb3Ugc2hvdWxkIG5vdCB1c2Uge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbn0gaW4gdGhlIHZhbHVlIG9mIHRoZSBgY2xhc3NgXG4gKiBhdHRyaWJ1dGUsIHdoZW4gdXNpbmcgdGhlIGBuZ0NsYXNzYCBkaXJlY3RpdmUgb24gdGhlIHNhbWUgZWxlbWVudC5cbiAqIFNlZSB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiNrbm93bi1pc3N1ZXMgaGVyZX0gZm9yIG1vcmUgaW5mby5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogfCBBbmltYXRpb24gICAgICAgICAgICAgICAgICAgICAgICB8IE9jY3VycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNhZGRDbGFzcyBhZGRDbGFzc30gICAgICAgfCBqdXN0IGJlZm9yZSB0aGUgY2xhc3MgaXMgYXBwbGllZCB0byB0aGUgZWxlbWVudCAgIHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI3JlbW92ZUNsYXNzIHJlbW92ZUNsYXNzfSB8IGp1c3QgYmVmb3JlIHRoZSBjbGFzcyBpcyByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnQgfFxuICpcbiAqICMjIyBuZ0NsYXNzIGFuZCBwcmUtZXhpc3RpbmcgQ1NTMyBUcmFuc2l0aW9ucy9BbmltYXRpb25zXG4gICBUaGUgbmdDbGFzcyBkaXJlY3RpdmUgc3RpbGwgc3VwcG9ydHMgQ1NTMyBUcmFuc2l0aW9ucy9BbmltYXRpb25zIGV2ZW4gaWYgdGhleSBkbyBub3QgZm9sbG93IHRoZSBuZ0FuaW1hdGUgQ1NTIG5hbWluZyBzdHJ1Y3R1cmUuXG4gICBVcG9uIGFuaW1hdGlvbiBuZ0FuaW1hdGUgd2lsbCBhcHBseSBzdXBwbGVtZW50YXJ5IENTUyBjbGFzc2VzIHRvIHRyYWNrIHRoZSBzdGFydCBhbmQgZW5kIG9mIGFuIGFuaW1hdGlvbiwgYnV0IHRoaXMgd2lsbCBub3QgaGluZGVyXG4gICBhbnkgcHJlLWV4aXN0aW5nIENTUyB0cmFuc2l0aW9ucyBhbHJlYWR5IG9uIHRoZSBlbGVtZW50LiBUbyBnZXQgYW4gaWRlYSBvZiB3aGF0IGhhcHBlbnMgZHVyaW5nIGEgY2xhc3MtYmFzZWQgYW5pbWF0aW9uLCBiZSBzdXJlXG4gICB0byB2aWV3IHRoZSBzdGVwIGJ5IHN0ZXAgZGV0YWlscyBvZiB7QGxpbmsgJGFuaW1hdGUjYWRkQ2xhc3MgJGFuaW1hdGUuYWRkQ2xhc3N9IGFuZFxuICAge0BsaW5rICRhbmltYXRlI3JlbW92ZUNsYXNzICRhbmltYXRlLnJlbW92ZUNsYXNzfS5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3Mge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC4gVGhlIHJlc3VsdFxuICogICBvZiB0aGUgZXZhbHVhdGlvbiBjYW4gYmUgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHNwYWNlIGRlbGltaXRlZCBjbGFzc1xuICogICBuYW1lcywgYW4gYXJyYXksIG9yIGEgbWFwIG9mIGNsYXNzIG5hbWVzIHRvIGJvb2xlYW4gdmFsdWVzLiBJbiB0aGUgY2FzZSBvZiBhIG1hcCwgdGhlXG4gKiAgIG5hbWVzIG9mIHRoZSBwcm9wZXJ0aWVzIHdob3NlIHZhbHVlcyBhcmUgdHJ1dGh5IHdpbGwgYmUgYWRkZWQgYXMgY3NzIGNsYXNzZXMgdG8gdGhlXG4gKiAgIGVsZW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBCYXNpY1xuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNsYXNzXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHAgbmctY2xhc3M9XCJ7c3RyaWtlOiBkZWxldGVkLCBib2xkOiBpbXBvcnRhbnQsICdoYXMtZXJyb3InOiBlcnJvcn1cIj5NYXAgU3ludGF4IEV4YW1wbGU8L3A+XG4gICAgICAgPGxhYmVsPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImRlbGV0ZWRcIj5cbiAgICAgICAgICBkZWxldGVkIChhcHBseSBcInN0cmlrZVwiIGNsYXNzKVxuICAgICAgIDwvbGFiZWw+PGJyPlxuICAgICAgIDxsYWJlbD5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJpbXBvcnRhbnRcIj5cbiAgICAgICAgICBpbXBvcnRhbnQgKGFwcGx5IFwiYm9sZFwiIGNsYXNzKVxuICAgICAgIDwvbGFiZWw+PGJyPlxuICAgICAgIDxsYWJlbD5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJlcnJvclwiPlxuICAgICAgICAgIGVycm9yIChhcHBseSBcImhhcy1lcnJvclwiIGNsYXNzKVxuICAgICAgIDwvbGFiZWw+XG4gICAgICAgPGhyPlxuICAgICAgIDxwIG5nLWNsYXNzPVwic3R5bGVcIj5Vc2luZyBTdHJpbmcgU3ludGF4PC9wPlxuICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwic3R5bGVcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQgc3RyaWtlIHJlZFwiIGFyaWEtbGFiZWw9XCJUeXBlOiBib2xkIHN0cmlrZSByZWRcIj5cbiAgICAgICA8aHI+XG4gICAgICAgPHAgbmctY2xhc3M9XCJbc3R5bGUxLCBzdHlsZTIsIHN0eWxlM11cIj5Vc2luZyBBcnJheSBTeW50YXg8L3A+XG4gICAgICAgPGlucHV0IG5nLW1vZGVsPVwic3R5bGUxXCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJUeXBlOiBib2xkLCBzdHJpa2Ugb3IgcmVkXCIgYXJpYS1sYWJlbD1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIj48YnI+XG4gICAgICAgPGlucHV0IG5nLW1vZGVsPVwic3R5bGUyXCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJUeXBlOiBib2xkLCBzdHJpa2Ugb3IgcmVkXCIgYXJpYS1sYWJlbD1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWQgMlwiPjxicj5cbiAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJzdHlsZTNcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGU6IGJvbGQsIHN0cmlrZSBvciByZWRcIiBhcmlhLWxhYmVsPVwiVHlwZTogYm9sZCwgc3RyaWtlIG9yIHJlZCAzXCI+PGJyPlxuICAgICAgIDxocj5cbiAgICAgICA8cCBuZy1jbGFzcz1cIltzdHlsZTQsIHtvcmFuZ2U6IHdhcm5pbmd9XVwiPlVzaW5nIEFycmF5IGFuZCBNYXAgU3ludGF4PC9wPlxuICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInN0eWxlNFwiIHBsYWNlaG9sZGVyPVwiVHlwZTogYm9sZCwgc3RyaWtlXCIgYXJpYS1sYWJlbD1cIlR5cGU6IGJvbGQsIHN0cmlrZVwiPjxicj5cbiAgICAgICA8bGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwid2FybmluZ1wiPiB3YXJuaW5nIChhcHBseSBcIm9yYW5nZVwiIGNsYXNzKTwvbGFiZWw+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIC5zdHJpa2Uge1xuICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgICAgICB9XG4gICAgICAgLmJvbGQge1xuICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICB9XG4gICAgICAgLnJlZCB7XG4gICAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgfVxuICAgICAgIC5oYXMtZXJyb3Ige1xuICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7XG4gICAgICAgfVxuICAgICAgIC5vcmFuZ2Uge1xuICAgICAgICAgICBjb2xvcjogb3JhbmdlO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIHBzID0gZWxlbWVudC5hbGwoYnkuY3NzKCdwJykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBsZXQgeW91IHRvZ2dsZSB0aGUgY2xhc3MnLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgZXhwZWN0KHBzLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5ub3QudG9NYXRjaCgvYm9sZC8pO1xuICAgICAgICAgZXhwZWN0KHBzLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5ub3QudG9NYXRjaCgvaGFzLWVycm9yLyk7XG5cbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2ltcG9ydGFudCcpKS5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KHBzLmZpcnN0KCkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9ib2xkLyk7XG5cbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ2Vycm9yJykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QocHMuZmlyc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvTWF0Y2goL2hhcy1lcnJvci8pO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCBsZXQgeW91IHRvZ2dsZSBzdHJpbmcgZXhhbXBsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgxKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJycpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUnKSkuY2xlYXIoKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3N0eWxlJykpLnNlbmRLZXlzKCdyZWQnKTtcbiAgICAgICAgIGV4cGVjdChwcy5nZXQoMSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b0JlKCdyZWQnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdhcnJheSBleGFtcGxlIHNob3VsZCBoYXZlIDMgY2xhc3NlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KHBzLmdldCgyKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJycpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUxJykpLnNlbmRLZXlzKCdib2xkJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzdHlsZTInKSkuc2VuZEtleXMoJ3N0cmlrZScpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGUzJykpLnNlbmRLZXlzKCdyZWQnKTtcbiAgICAgICAgIGV4cGVjdChwcy5nZXQoMikuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b0JlKCdib2xkIHN0cmlrZSByZWQnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdhcnJheSB3aXRoIG1hcCBleGFtcGxlIHNob3VsZCBoYXZlIDIgY2xhc3NlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KHBzLmxhc3QoKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLnRvQmUoJycpO1xuICAgICAgICAgZWxlbWVudChieS5tb2RlbCgnc3R5bGU0JykpLnNlbmRLZXlzKCdib2xkJyk7XG4gICAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCd3YXJuaW5nJykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QocHMubGFzdCgpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkudG9CZSgnYm9sZCBvcmFuZ2UnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuXG4gICBAZXhhbXBsZVxuICAgIyMjIEFuaW1hdGlvbnNcblxuICAgVGhlIGV4YW1wbGUgYmVsb3cgZGVtb25zdHJhdGVzIGhvdyB0byBwZXJmb3JtIGFuaW1hdGlvbnMgdXNpbmcgbmdDbGFzcy5cblxuICAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLWNsYXNzXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgaWQ9XCJzZXRidG5cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJzZXRcIiBuZy1jbGljaz1cIm15VmFyPSdteS1jbGFzcydcIj5cbiAgICAgIDxpbnB1dCBpZD1cImNsZWFyYnRuXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiY2xlYXJcIiBuZy1jbGljaz1cIm15VmFyPScnXCI+XG4gICAgICA8YnI+XG4gICAgICA8c3BhbiBjbGFzcz1cImJhc2UtY2xhc3NcIiBuZy1jbGFzcz1cIm15VmFyXCI+U2FtcGxlIFRleHQ8L3NwYW4+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInN0eWxlLmNzc1wiPlxuICAgICAgIC5iYXNlLWNsYXNzIHtcbiAgICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcbiAgICAgICB9XG5cbiAgICAgICAuYmFzZS1jbGFzcy5teS1jbGFzcyB7XG4gICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgZm9udC1zaXplOjNlbTtcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xhc3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmJhc2UtY2xhc3MnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5ub3QuXG4gICAgICAgICAgIHRvTWF0Y2goL215LWNsYXNzLyk7XG5cbiAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ3NldGJ0bicpKS5jbGljaygpO1xuXG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJy5iYXNlLWNsYXNzJykpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSkuXG4gICAgICAgICAgIHRvTWF0Y2goL215LWNsYXNzLyk7XG5cbiAgICAgICAgIGVsZW1lbnQoYnkuaWQoJ2NsZWFyYnRuJykpLmNsaWNrKCk7XG5cbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmJhc2UtY2xhc3MnKSkuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS5ub3QuXG4gICAgICAgICAgIHRvTWF0Y2goL215LWNsYXNzLyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQ2xhc3NEaXJlY3RpdmUgPSBjbGFzc0RpcmVjdGl2ZSgnJywgdHJ1ZSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDbGFzc09kZFxuICogQHJlc3RyaWN0IEFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nQ2xhc3NPZGRgIGFuZCBgbmdDbGFzc0V2ZW5gIGRpcmVjdGl2ZXMgd29yayBleGFjdGx5IGFzXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xhc3MgbmdDbGFzc30sIGV4Y2VwdCB0aGV5IHdvcmsgaW5cbiAqIGNvbmp1bmN0aW9uIHdpdGggYG5nUmVwZWF0YCBhbmQgdGFrZSBlZmZlY3Qgb25seSBvbiBvZGQgKGV2ZW4pIHJvd3MuXG4gKlxuICogVGhpcyBkaXJlY3RpdmUgY2FuIGJlIGFwcGxpZWQgb25seSB3aXRoaW4gdGhlIHNjb3BlIG9mIGFuXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nUmVwZWF0IG5nUmVwZWF0fS5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGFzc09kZCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsLiBUaGUgcmVzdWx0XG4gKiAgIG9mIHRoZSBldmFsdWF0aW9uIGNhbiBiZSBhIHN0cmluZyByZXByZXNlbnRpbmcgc3BhY2UgZGVsaW1pdGVkIGNsYXNzIG5hbWVzIG9yIGFuIGFycmF5LlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY2xhc3Mtb2RkXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxvbCBuZy1pbml0PVwibmFtZXM9WydKb2huJywgJ01hcnknLCAnQ2F0ZScsICdTdXonXVwiPlxuICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJuYW1lIGluIG5hbWVzXCI+XG4gICAgICAgICAgIDxzcGFuIG5nLWNsYXNzLW9kZD1cIidvZGQnXCIgbmctY2xhc3MtZXZlbj1cIidldmVuJ1wiPlxuICAgICAgICAgICAgIHt7bmFtZX19XG4gICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L29sPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAub2RkIHtcbiAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgfVxuICAgICAgIC5ldmVuIHtcbiAgICAgICAgIGNvbG9yOiBibHVlO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcy1vZGQgYW5kIG5nLWNsYXNzLWV2ZW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDApLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxuICAgICAgICAgICB0b01hdGNoKC9vZGQvKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDEpLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxuICAgICAgICAgICB0b01hdGNoKC9ldmVuLyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQ2xhc3NPZGREaXJlY3RpdmUgPSBjbGFzc0RpcmVjdGl2ZSgnT2RkJywgMCk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDbGFzc0V2ZW5cbiAqIEByZXN0cmljdCBBQ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0NsYXNzT2RkYCBhbmQgYG5nQ2xhc3NFdmVuYCBkaXJlY3RpdmVzIHdvcmsgZXhhY3RseSBhc1xuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NsYXNzIG5nQ2xhc3N9LCBleGNlcHQgdGhleSB3b3JrIGluXG4gKiBjb25qdW5jdGlvbiB3aXRoIGBuZ1JlcGVhdGAgYW5kIHRha2UgZWZmZWN0IG9ubHkgb24gb2RkIChldmVuKSByb3dzLlxuICpcbiAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSBhcHBsaWVkIG9ubHkgd2l0aGluIHRoZSBzY29wZSBvZiBhblxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ1JlcGVhdCBuZ1JlcGVhdH0uXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nQ2xhc3NFdmVuIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWwuIFRoZVxuICogICByZXN1bHQgb2YgdGhlIGV2YWx1YXRpb24gY2FuIGJlIGEgc3RyaW5nIHJlcHJlc2VudGluZyBzcGFjZSBkZWxpbWl0ZWQgY2xhc3MgbmFtZXMgb3IgYW4gYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1jbGFzcy1ldmVuXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxvbCBuZy1pbml0PVwibmFtZXM9WydKb2huJywgJ01hcnknLCAnQ2F0ZScsICdTdXonXVwiPlxuICAgICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJuYW1lIGluIG5hbWVzXCI+XG4gICAgICAgICAgIDxzcGFuIG5nLWNsYXNzLW9kZD1cIidvZGQnXCIgbmctY2xhc3MtZXZlbj1cIidldmVuJ1wiPlxuICAgICAgICAgICAgIHt7bmFtZX19ICZuYnNwOyAmbmJzcDsgJm5ic3A7XG4gICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L29sPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAub2RkIHtcbiAgICAgICAgIGNvbG9yOiByZWQ7XG4gICAgICAgfVxuICAgICAgIC5ldmVuIHtcbiAgICAgICAgIGNvbG9yOiBibHVlO1xuICAgICAgIH1cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1jbGFzcy1vZGQgYW5kIG5nLWNsYXNzLWV2ZW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDApLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxuICAgICAgICAgICB0b01hdGNoKC9vZGQvKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LnJlcGVhdGVyKCduYW1lIGluIG5hbWVzJykucm93KDEpLmNvbHVtbignbmFtZScpKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykpLlxuICAgICAgICAgICB0b01hdGNoKC9ldmVuLyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nQ2xhc3NFdmVuRGlyZWN0aXZlID0gY2xhc3NEaXJlY3RpdmUoJ0V2ZW4nLCAxKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0Nsb2FrXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdDbG9ha2AgZGlyZWN0aXZlIGlzIHVzZWQgdG8gcHJldmVudCB0aGUgQW5ndWxhciBodG1sIHRlbXBsYXRlIGZyb20gYmVpbmcgYnJpZWZseVxuICogZGlzcGxheWVkIGJ5IHRoZSBicm93c2VyIGluIGl0cyByYXcgKHVuY29tcGlsZWQpIGZvcm0gd2hpbGUgeW91ciBhcHBsaWNhdGlvbiBpcyBsb2FkaW5nLiBVc2UgdGhpc1xuICogZGlyZWN0aXZlIHRvIGF2b2lkIHRoZSB1bmRlc2lyYWJsZSBmbGlja2VyIGVmZmVjdCBjYXVzZWQgYnkgdGhlIGh0bWwgdGVtcGxhdGUgZGlzcGxheS5cbiAqXG4gKiBUaGUgZGlyZWN0aXZlIGNhbiBiZSBhcHBsaWVkIHRvIHRoZSBgPGJvZHk+YCBlbGVtZW50LCBidXQgdGhlIHByZWZlcnJlZCB1c2FnZSBpcyB0byBhcHBseVxuICogbXVsdGlwbGUgYG5nQ2xvYWtgIGRpcmVjdGl2ZXMgdG8gc21hbGwgcG9ydGlvbnMgb2YgdGhlIHBhZ2UgdG8gcGVybWl0IHByb2dyZXNzaXZlIHJlbmRlcmluZ1xuICogb2YgdGhlIGJyb3dzZXIgdmlldy5cbiAqXG4gKiBgbmdDbG9ha2Agd29ya3MgaW4gY29vcGVyYXRpb24gd2l0aCB0aGUgZm9sbG93aW5nIGNzcyBydWxlIGVtYmVkZGVkIHdpdGhpbiBgYW5ndWxhci5qc2AgYW5kXG4gKiBgYW5ndWxhci5taW4uanNgLlxuICogRm9yIENTUCBtb2RlIHBsZWFzZSBhZGQgYGFuZ3VsYXItY3NwLmNzc2AgdG8geW91ciBodG1sIGZpbGUgKHNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ3NwIG5nQ3NwfSkuXG4gKlxuICogYGBgY3NzXG4gKiBbbmdcXDpjbG9ha10sIFtuZy1jbG9ha10sIFtkYXRhLW5nLWNsb2FrXSwgW3gtbmctY2xvYWtdLCAubmctY2xvYWssIC54LW5nLWNsb2FrIHtcbiAqICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICogfVxuICogYGBgXG4gKlxuICogV2hlbiB0aGlzIGNzcyBydWxlIGlzIGxvYWRlZCBieSB0aGUgYnJvd3NlciwgYWxsIGh0bWwgZWxlbWVudHMgKGluY2x1ZGluZyB0aGVpciBjaGlsZHJlbikgdGhhdFxuICogYXJlIHRhZ2dlZCB3aXRoIHRoZSBgbmdDbG9ha2AgZGlyZWN0aXZlIGFyZSBoaWRkZW4uIFdoZW4gQW5ndWxhciBlbmNvdW50ZXJzIHRoaXMgZGlyZWN0aXZlXG4gKiBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uIG9mIHRoZSB0ZW1wbGF0ZSBpdCBkZWxldGVzIHRoZSBgbmdDbG9ha2AgZWxlbWVudCBhdHRyaWJ1dGUsIG1ha2luZ1xuICogdGhlIGNvbXBpbGVkIGVsZW1lbnQgdmlzaWJsZS5cbiAqXG4gKiBGb3IgdGhlIGJlc3QgcmVzdWx0LCB0aGUgYGFuZ3VsYXIuanNgIHNjcmlwdCBtdXN0IGJlIGxvYWRlZCBpbiB0aGUgaGVhZCBzZWN0aW9uIG9mIHRoZSBodG1sXG4gKiBkb2N1bWVudDsgYWx0ZXJuYXRpdmVseSwgdGhlIGNzcyBydWxlIGFib3ZlIG11c3QgYmUgaW5jbHVkZWQgaW4gdGhlIGV4dGVybmFsIHN0eWxlc2hlZXQgb2YgdGhlXG4gKiBhcHBsaWNhdGlvbi5cbiAqXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWNsb2FrXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxkaXYgaWQ9XCJ0ZW1wbGF0ZTFcIiBuZy1jbG9haz57eyAnaGVsbG8nIH19PC9kaXY+XG4gICAgICAgIDxkaXYgaWQ9XCJ0ZW1wbGF0ZTJcIiBjbGFzcz1cIm5nLWNsb2FrXCI+e3sgJ3dvcmxkJyB9fTwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICBpdCgnc2hvdWxkIHJlbW92ZSB0aGUgdGVtcGxhdGUgZGlyZWN0aXZlIGFuZCBjc3MgY2xhc3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdCgkKCcjdGVtcGxhdGUxJykuZ2V0QXR0cmlidXRlKCduZy1jbG9haycpKS5cbiAgICAgICAgICAgdG9CZU51bGwoKTtcbiAgICAgICAgIGV4cGVjdCgkKCcjdGVtcGxhdGUyJykuZ2V0QXR0cmlidXRlKCduZy1jbG9haycpKS5cbiAgICAgICAgICAgdG9CZU51bGwoKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICpcbiAqL1xudmFyIG5nQ2xvYWtEaXJlY3RpdmUgPSBuZ0RpcmVjdGl2ZSh7XG4gIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICBhdHRyLiRzZXQoJ25nQ2xvYWsnLCB1bmRlZmluZWQpO1xuICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ25nLWNsb2FrJyk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ29udHJvbGxlclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZSBhdHRhY2hlcyBhIGNvbnRyb2xsZXIgY2xhc3MgdG8gdGhlIHZpZXcuIFRoaXMgaXMgYSBrZXkgYXNwZWN0IG9mIGhvdyBhbmd1bGFyXG4gKiBzdXBwb3J0cyB0aGUgcHJpbmNpcGxlcyBiZWhpbmQgdGhlIE1vZGVsLVZpZXctQ29udHJvbGxlciBkZXNpZ24gcGF0dGVybi5cbiAqXG4gKiBNVkMgY29tcG9uZW50cyBpbiBhbmd1bGFyOlxuICpcbiAqICogTW9kZWwg4oCUIE1vZGVscyBhcmUgdGhlIHByb3BlcnRpZXMgb2YgYSBzY29wZTsgc2NvcGVzIGFyZSBhdHRhY2hlZCB0byB0aGUgRE9NIHdoZXJlIHNjb3BlIHByb3BlcnRpZXNcbiAqICAgYXJlIGFjY2Vzc2VkIHRocm91Z2ggYmluZGluZ3MuXG4gKiAqIFZpZXcg4oCUIFRoZSB0ZW1wbGF0ZSAoSFRNTCB3aXRoIGRhdGEgYmluZGluZ3MpIHRoYXQgaXMgcmVuZGVyZWQgaW50byB0aGUgVmlldy5cbiAqICogQ29udHJvbGxlciDigJQgVGhlIGBuZ0NvbnRyb2xsZXJgIGRpcmVjdGl2ZSBzcGVjaWZpZXMgYSBDb250cm9sbGVyIGNsYXNzOyB0aGUgY2xhc3MgY29udGFpbnMgYnVzaW5lc3NcbiAqICAgbG9naWMgYmVoaW5kIHRoZSBhcHBsaWNhdGlvbiB0byBkZWNvcmF0ZSB0aGUgc2NvcGUgd2l0aCBmdW5jdGlvbnMgYW5kIHZhbHVlc1xuICpcbiAqIE5vdGUgdGhhdCB5b3UgY2FuIGFsc28gYXR0YWNoIGNvbnRyb2xsZXJzIHRvIHRoZSBET00gYnkgZGVjbGFyaW5nIGl0IGluIGEgcm91dGUgZGVmaW5pdGlvblxuICogdmlhIHRoZSB7QGxpbmsgbmdSb3V0ZS4kcm91dGUgJHJvdXRlfSBzZXJ2aWNlLiBBIGNvbW1vbiBtaXN0YWtlIGlzIHRvIGRlY2xhcmUgdGhlIGNvbnRyb2xsZXJcbiAqIGFnYWluIHVzaW5nIGBuZy1jb250cm9sbGVyYCBpbiB0aGUgdGVtcGxhdGUgaXRzZWxmLiAgVGhpcyB3aWxsIGNhdXNlIHRoZSBjb250cm9sbGVyIHRvIGJlIGF0dGFjaGVkXG4gKiBhbmQgZXhlY3V0ZWQgdHdpY2UuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSA1MDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDb250cm9sbGVyIE5hbWUgb2YgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiByZWdpc3RlcmVkIHdpdGggdGhlIGN1cnJlbnRcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyICRjb250cm9sbGVyUHJvdmlkZXJ9IG9yIGFuIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259XG4gKiB0aGF0IG9uIHRoZSBjdXJyZW50IHNjb3BlIGV2YWx1YXRlcyB0byBhIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICpcbiAqIFRoZSBjb250cm9sbGVyIGluc3RhbmNlIGNhbiBiZSBwdWJsaXNoZWQgaW50byBhIHNjb3BlIHByb3BlcnR5IGJ5IHNwZWNpZnlpbmdcbiAqIGBuZy1jb250cm9sbGVyPVwiYXMgcHJvcGVydHlOYW1lXCJgLlxuICpcbiAqIElmIHRoZSBjdXJyZW50IGAkY29udHJvbGxlclByb3ZpZGVyYCBpcyBjb25maWd1cmVkIHRvIHVzZSBnbG9iYWxzICh2aWFcbiAqIHtAbGluayBuZy4kY29udHJvbGxlclByb3ZpZGVyI2FsbG93R2xvYmFscyBgJGNvbnRyb2xsZXJQcm92aWRlci5hbGxvd0dsb2JhbHMoKWAgfSksIHRoaXMgbWF5XG4gKiBhbHNvIGJlIHRoZSBuYW1lIG9mIGEgZ2xvYmFsbHkgYWNjZXNzaWJsZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiAoZGVwcmVjYXRlZCwgbm90IHJlY29tbWVuZGVkKS5cbiAqXG4gKiBAZXhhbXBsZVxuICogSGVyZSBpcyBhIHNpbXBsZSBmb3JtIGZvciBlZGl0aW5nIHVzZXIgY29udGFjdCBpbmZvcm1hdGlvbi4gQWRkaW5nLCByZW1vdmluZywgY2xlYXJpbmcsIGFuZFxuICogZ3JlZXRpbmcgYXJlIG1ldGhvZHMgZGVjbGFyZWQgb24gdGhlIGNvbnRyb2xsZXIgKHNlZSBzb3VyY2UgdGFiKS4gVGhlc2UgbWV0aG9kcyBjYW5cbiAqIGVhc2lseSBiZSBjYWxsZWQgZnJvbSB0aGUgYW5ndWxhciBtYXJrdXAuIEFueSBjaGFuZ2VzIHRvIHRoZSBkYXRhIGFyZSBhdXRvbWF0aWNhbGx5IHJlZmxlY3RlZFxuICogaW4gdGhlIFZpZXcgd2l0aG91dCB0aGUgbmVlZCBmb3IgYSBtYW51YWwgdXBkYXRlLlxuICpcbiAqIFR3byBkaWZmZXJlbnQgZGVjbGFyYXRpb24gc3R5bGVzIGFyZSBpbmNsdWRlZCBiZWxvdzpcbiAqXG4gKiAqIG9uZSBiaW5kcyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGRpcmVjdGx5IG9udG8gdGhlIGNvbnRyb2xsZXIgdXNpbmcgYHRoaXNgOlxuICogYG5nLWNvbnRyb2xsZXI9XCJTZXR0aW5nc0NvbnRyb2xsZXIxIGFzIHNldHRpbmdzXCJgXG4gKiAqIG9uZSBpbmplY3RzIGAkc2NvcGVgIGludG8gdGhlIGNvbnRyb2xsZXI6XG4gKiBgbmctY29udHJvbGxlcj1cIlNldHRpbmdzQ29udHJvbGxlcjJcImBcbiAqXG4gKiBUaGUgc2Vjb25kIG9wdGlvbiBpcyBtb3JlIGNvbW1vbiBpbiB0aGUgQW5ndWxhciBjb21tdW5pdHksIGFuZCBpcyBnZW5lcmFsbHkgdXNlZCBpbiBib2lsZXJwbGF0ZXNcbiAqIGFuZCBpbiB0aGlzIGd1aWRlLiBIb3dldmVyLCB0aGVyZSBhcmUgYWR2YW50YWdlcyB0byBiaW5kaW5nIHByb3BlcnRpZXMgZGlyZWN0bHkgdG8gdGhlIGNvbnRyb2xsZXJcbiAqIGFuZCBhdm9pZGluZyBzY29wZS5cbiAqXG4gKiAqIFVzaW5nIGBjb250cm9sbGVyIGFzYCBtYWtlcyBpdCBvYnZpb3VzIHdoaWNoIGNvbnRyb2xsZXIgeW91IGFyZSBhY2Nlc3NpbmcgaW4gdGhlIHRlbXBsYXRlIHdoZW5cbiAqIG11bHRpcGxlIGNvbnRyb2xsZXJzIGFwcGx5IHRvIGFuIGVsZW1lbnQuXG4gKiAqIElmIHlvdSBhcmUgd3JpdGluZyB5b3VyIGNvbnRyb2xsZXJzIGFzIGNsYXNzZXMgeW91IGhhdmUgZWFzaWVyIGFjY2VzcyB0byB0aGUgcHJvcGVydGllcyBhbmRcbiAqIG1ldGhvZHMsIHdoaWNoIHdpbGwgYXBwZWFyIG9uIHRoZSBzY29wZSwgZnJvbSBpbnNpZGUgdGhlIGNvbnRyb2xsZXIgY29kZS5cbiAqICogU2luY2UgdGhlcmUgaXMgYWx3YXlzIGEgYC5gIGluIHRoZSBiaW5kaW5ncywgeW91IGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgcHJvdG90eXBhbFxuICogaW5oZXJpdGFuY2UgbWFza2luZyBwcmltaXRpdmVzLlxuICpcbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdGhlIGBjb250cm9sbGVyIGFzYCBzeW50YXguXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nQ29udHJvbGxlckFzXCIgbW9kdWxlPVwiY29udHJvbGxlckFzRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgPGRpdiBpZD1cImN0cmwtYXMtZXhtcGxcIiBuZy1jb250cm9sbGVyPVwiU2V0dGluZ3NDb250cm9sbGVyMSBhcyBzZXR0aW5nc1wiPlxuICogICAgICA8bGFiZWw+TmFtZTogPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJzZXR0aW5ncy5uYW1lXCIvPjwvbGFiZWw+XG4gKiAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzZXR0aW5ncy5ncmVldCgpXCI+Z3JlZXQ8L2J1dHRvbj48YnIvPlxuICogICAgICBDb250YWN0OlxuICogICAgICA8dWw+XG4gKiAgICAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHNcIj5cbiAqICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJjb250YWN0LnR5cGVcIiBhcmlhLWxhYmVsPVwiQ29udGFjdCBtZXRob2RcIiBpZD1cInNlbGVjdF97eyRpbmRleH19XCI+XG4gKiAgICAgICAgICAgICA8b3B0aW9uPnBob25lPC9vcHRpb24+XG4gKiAgICAgICAgICAgICA8b3B0aW9uPmVtYWlsPC9vcHRpb24+XG4gKiAgICAgICAgICA8L3NlbGVjdD5cbiAqICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiY29udGFjdC52YWx1ZVwiIGFyaWEtbGFiZWxsZWRieT1cInNlbGVjdF97eyRpbmRleH19XCIgLz5cbiAqICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJzZXR0aW5ncy5jbGVhckNvbnRhY3QoY29udGFjdClcIj5jbGVhcjwvYnV0dG9uPlxuICogICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInNldHRpbmdzLnJlbW92ZUNvbnRhY3QoY29udGFjdClcIiBhcmlhLWxhYmVsPVwiUmVtb3ZlXCI+WDwvYnV0dG9uPlxuICogICAgICAgIDwvbGk+XG4gKiAgICAgICAgPGxpPjxidXR0b24gbmctY2xpY2s9XCJzZXR0aW5ncy5hZGRDb250YWN0KClcIj5hZGQ8L2J1dHRvbj48L2xpPlxuICogICAgIDwvdWw+XG4gKiAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICBhbmd1bGFyLm1vZHVsZSgnY29udHJvbGxlckFzRXhhbXBsZScsIFtdKVxuICogICAgICAuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyMScsIFNldHRpbmdzQ29udHJvbGxlcjEpO1xuICpcbiAqICAgIGZ1bmN0aW9uIFNldHRpbmdzQ29udHJvbGxlcjEoKSB7XG4gKiAgICAgIHRoaXMubmFtZSA9ICdKb2huIFNtaXRoJztcbiAqICAgICAgdGhpcy5jb250YWN0cyA9IFtcbiAqICAgICAgICB7dHlwZTogJ3Bob25lJywgdmFsdWU6ICc0MDggNTU1IDEyMTInfSxcbiAqICAgICAgICB7dHlwZTogJ2VtYWlsJywgdmFsdWU6ICdqb2huLnNtaXRoQGV4YW1wbGUub3JnJ31cbiAqICAgICAgXTtcbiAqICAgIH1cbiAqXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5ncmVldCA9IGZ1bmN0aW9uKCkge1xuICogICAgICBhbGVydCh0aGlzLm5hbWUpO1xuICogICAgfTtcbiAqXG4gKiAgICBTZXR0aW5nc0NvbnRyb2xsZXIxLnByb3RvdHlwZS5hZGRDb250YWN0ID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgIHRoaXMuY29udGFjdHMucHVzaCh7dHlwZTogJ2VtYWlsJywgdmFsdWU6ICd5b3VybmFtZUBleGFtcGxlLm9yZyd9KTtcbiAqICAgIH07XG4gKlxuICogICAgU2V0dGluZ3NDb250cm9sbGVyMS5wcm90b3R5cGUucmVtb3ZlQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3RUb1JlbW92ZSkge1xuICogICAgIHZhciBpbmRleCA9IHRoaXMuY29udGFjdHMuaW5kZXhPZihjb250YWN0VG9SZW1vdmUpO1xuICogICAgICB0aGlzLmNvbnRhY3RzLnNwbGljZShpbmRleCwgMSk7XG4gKiAgICB9O1xuICpcbiAqICAgIFNldHRpbmdzQ29udHJvbGxlcjEucHJvdG90eXBlLmNsZWFyQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3QpIHtcbiAqICAgICAgY29udGFjdC50eXBlID0gJ3Bob25lJztcbiAqICAgICAgY29udGFjdC52YWx1ZSA9ICcnO1xuICogICAgfTtcbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgaXQoJ3Nob3VsZCBjaGVjayBjb250cm9sbGVyIGFzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICB2YXIgY29udGFpbmVyID0gZWxlbWVudChieS5pZCgnY3RybC1hcy1leG1wbCcpKTtcbiAqICAgICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5Lm1vZGVsKCdzZXR0aW5ncy5uYW1lJykpXG4gKiAgICAgICAgICAgLmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9CZSgnSm9obiBTbWl0aCcpO1xuICpcbiAqICAgICAgIHZhciBmaXJzdFJlcGVhdCA9XG4gKiAgICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHMnKS5yb3coMCkpO1xuICogICAgICAgdmFyIHNlY29uZFJlcGVhdCA9XG4gKiAgICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gc2V0dGluZ3MuY29udGFjdHMnKS5yb3coMSkpO1xuICpcbiAqICAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgICAudG9CZSgnNDA4IDU1NSAxMjEyJyk7XG4gKlxuICogICAgICAgZXhwZWN0KHNlY29uZFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgICAudG9CZSgnam9obi5zbWl0aEBleGFtcGxlLm9yZycpO1xuICpcbiAqICAgICAgIGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnY2xlYXInKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgICBleHBlY3QoZmlyc3RSZXBlYXQuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAgLnRvQmUoJycpO1xuICpcbiAqICAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LmJ1dHRvblRleHQoJ2FkZCcpKS5jbGljaygpO1xuICpcbiAqICAgICAgIGV4cGVjdChjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBzZXR0aW5ncy5jb250YWN0cycpLnJvdygyKSlcbiAqICAgICAgICAgICAuZWxlbWVudChieS5tb2RlbCgnY29udGFjdC52YWx1ZScpKVxuICogICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAgLnRvQmUoJ3lvdXJuYW1lQGV4YW1wbGUub3JnJyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiBUaGlzIGV4YW1wbGUgZGVtb25zdHJhdGVzIHRoZSBcImF0dGFjaCB0byBgJHNjb3BlYFwiIHN0eWxlIG9mIGNvbnRyb2xsZXIuXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nQ29udHJvbGxlclwiIG1vZHVsZT1cImNvbnRyb2xsZXJFeGFtcGxlXCI+XG4gKiAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgPGRpdiBpZD1cImN0cmwtZXhtcGxcIiBuZy1jb250cm9sbGVyPVwiU2V0dGluZ3NDb250cm9sbGVyMlwiPlxuICogICAgIDxsYWJlbD5OYW1lOiA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm5hbWVcIi8+PC9sYWJlbD5cbiAqICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZ3JlZXQoKVwiPmdyZWV0PC9idXR0b24+PGJyLz5cbiAqICAgICBDb250YWN0OlxuICogICAgIDx1bD5cbiAqICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJjb250YWN0IGluIGNvbnRhY3RzXCI+XG4gKiAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJjb250YWN0LnR5cGVcIiBpZD1cInNlbGVjdF97eyRpbmRleH19XCI+XG4gKiAgICAgICAgICAgIDxvcHRpb24+cGhvbmU8L29wdGlvbj5cbiAqICAgICAgICAgICAgPG9wdGlvbj5lbWFpbDwvb3B0aW9uPlxuICogICAgICAgICA8L3NlbGVjdD5cbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJjb250YWN0LnZhbHVlXCIgYXJpYS1sYWJlbGxlZGJ5PVwic2VsZWN0X3t7JGluZGV4fX1cIiAvPlxuICogICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiY2xlYXJDb250YWN0KGNvbnRhY3QpXCI+Y2xlYXI8L2J1dHRvbj5cbiAqICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cInJlbW92ZUNvbnRhY3QoY29udGFjdClcIj5YPC9idXR0b24+XG4gKiAgICAgICA8L2xpPlxuICogICAgICAgPGxpPlsgPGJ1dHRvbiBuZy1jbGljaz1cImFkZENvbnRhY3QoKVwiPmFkZDwvYnV0dG9uPiBdPC9saT5cbiAqICAgIDwvdWw+XG4gKiAgIDwvZGl2PlxuICogIDwvZmlsZT5cbiAqICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgIGFuZ3VsYXIubW9kdWxlKCdjb250cm9sbGVyRXhhbXBsZScsIFtdKVxuICogICAgIC5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXIyJywgWyckc2NvcGUnLCBTZXR0aW5nc0NvbnRyb2xsZXIyXSk7XG4gKlxuICogICBmdW5jdGlvbiBTZXR0aW5nc0NvbnRyb2xsZXIyKCRzY29wZSkge1xuICogICAgICRzY29wZS5uYW1lID0gJ0pvaG4gU21pdGgnO1xuICogICAgICRzY29wZS5jb250YWN0cyA9IFtcbiAqICAgICAgIHt0eXBlOidwaG9uZScsIHZhbHVlOic0MDggNTU1IDEyMTInfSxcbiAqICAgICAgIHt0eXBlOidlbWFpbCcsIHZhbHVlOidqb2huLnNtaXRoQGV4YW1wbGUub3JnJ31cbiAqICAgICBdO1xuICpcbiAqICAgICAkc2NvcGUuZ3JlZXQgPSBmdW5jdGlvbigpIHtcbiAqICAgICAgIGFsZXJ0KCRzY29wZS5uYW1lKTtcbiAqICAgICB9O1xuICpcbiAqICAgICAkc2NvcGUuYWRkQ29udGFjdCA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgJHNjb3BlLmNvbnRhY3RzLnB1c2goe3R5cGU6J2VtYWlsJywgdmFsdWU6J3lvdXJuYW1lQGV4YW1wbGUub3JnJ30pO1xuICogICAgIH07XG4gKlxuICogICAgICRzY29wZS5yZW1vdmVDb250YWN0ID0gZnVuY3Rpb24oY29udGFjdFRvUmVtb3ZlKSB7XG4gKiAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY29udGFjdHMuaW5kZXhPZihjb250YWN0VG9SZW1vdmUpO1xuICogICAgICAgJHNjb3BlLmNvbnRhY3RzLnNwbGljZShpbmRleCwgMSk7XG4gKiAgICAgfTtcbiAqXG4gKiAgICAgJHNjb3BlLmNsZWFyQ29udGFjdCA9IGZ1bmN0aW9uKGNvbnRhY3QpIHtcbiAqICAgICAgIGNvbnRhY3QudHlwZSA9ICdwaG9uZSc7XG4gKiAgICAgICBjb250YWN0LnZhbHVlID0gJyc7XG4gKiAgICAgfTtcbiAqICAgfVxuICogIDwvZmlsZT5cbiAqICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICBpdCgnc2hvdWxkIGNoZWNrIGNvbnRyb2xsZXInLCBmdW5jdGlvbigpIHtcbiAqICAgICAgdmFyIGNvbnRhaW5lciA9IGVsZW1lbnQoYnkuaWQoJ2N0cmwtZXhtcGwnKSk7XG4gKlxuICogICAgICBleHBlY3QoY29udGFpbmVyLmVsZW1lbnQoYnkubW9kZWwoJ25hbWUnKSlcbiAqICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJ0pvaG4gU21pdGgnKTtcbiAqXG4gKiAgICAgIHZhciBmaXJzdFJlcGVhdCA9XG4gKiAgICAgICAgICBjb250YWluZXIuZWxlbWVudChieS5yZXBlYXRlcignY29udGFjdCBpbiBjb250YWN0cycpLnJvdygwKSk7XG4gKiAgICAgIHZhciBzZWNvbmRSZXBlYXQgPVxuICogICAgICAgICAgY29udGFpbmVyLmVsZW1lbnQoYnkucmVwZWF0ZXIoJ2NvbnRhY3QgaW4gY29udGFjdHMnKS5yb3coMSkpO1xuICpcbiAqICAgICAgZXhwZWN0KGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgLnRvQmUoJzQwOCA1NTUgMTIxMicpO1xuICogICAgICBleHBlY3Qoc2Vjb25kUmVwZWF0LmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSkuZ2V0QXR0cmlidXRlKCd2YWx1ZScpKVxuICogICAgICAgICAgLnRvQmUoJ2pvaG4uc21pdGhAZXhhbXBsZS5vcmcnKTtcbiAqXG4gKiAgICAgIGZpcnN0UmVwZWF0LmVsZW1lbnQoYnkuYnV0dG9uVGV4dCgnY2xlYXInKSkuY2xpY2soKTtcbiAqXG4gKiAgICAgIGV4cGVjdChmaXJzdFJlcGVhdC5lbGVtZW50KGJ5Lm1vZGVsKCdjb250YWN0LnZhbHVlJykpLmdldEF0dHJpYnV0ZSgndmFsdWUnKSlcbiAqICAgICAgICAgIC50b0JlKCcnKTtcbiAqXG4gKiAgICAgIGNvbnRhaW5lci5lbGVtZW50KGJ5LmJ1dHRvblRleHQoJ2FkZCcpKS5jbGljaygpO1xuICpcbiAqICAgICAgZXhwZWN0KGNvbnRhaW5lci5lbGVtZW50KGJ5LnJlcGVhdGVyKCdjb250YWN0IGluIGNvbnRhY3RzJykucm93KDIpKVxuICogICAgICAgICAgLmVsZW1lbnQoYnkubW9kZWwoJ2NvbnRhY3QudmFsdWUnKSlcbiAqICAgICAgICAgIC5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpXG4gKiAgICAgICAgICAudG9CZSgneW91cm5hbWVAZXhhbXBsZS5vcmcnKTtcbiAqICAgIH0pO1xuICogIDwvZmlsZT5cbiAqPC9leGFtcGxlPlxuXG4gKi9cbnZhciBuZ0NvbnRyb2xsZXJEaXJlY3RpdmUgPSBbZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBzY29wZTogdHJ1ZSxcbiAgICBjb250cm9sbGVyOiAnQCcsXG4gICAgcHJpb3JpdHk6IDUwMFxuICB9O1xufV07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdDc3BcbiAqXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBBbmd1bGFyIGhhcyBzb21lIGZlYXR1cmVzIHRoYXQgY2FuIGNvbmZsaWN0IHdpdGggY2VydGFpbiByZXN0cmljdGlvbnMgdGhhdCBhcmUgYXBwbGllZCB3aGVuIHVzaW5nXG4gKiBbQ1NQIChDb250ZW50IFNlY3VyaXR5IFBvbGljeSldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL1NlY3VyaXR5L0NTUCkgcnVsZXMuXG4gKlxuICogSWYgeW91IGludGVuZCB0byBpbXBsZW1lbnQgQ1NQIHdpdGggdGhlc2UgcnVsZXMgdGhlbiB5b3UgbXVzdCB0ZWxsIEFuZ3VsYXIgbm90IHRvIHVzZSB0aGVzZVxuICogZmVhdHVyZXMuXG4gKlxuICogVGhpcyBpcyBuZWNlc3Nhcnkgd2hlbiBkZXZlbG9waW5nIHRoaW5ncyBsaWtlIEdvb2dsZSBDaHJvbWUgRXh0ZW5zaW9ucyBvciBVbml2ZXJzYWwgV2luZG93cyBBcHBzLlxuICpcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGRlZmF1bHQgcnVsZXMgaW4gQ1NQIGFmZmVjdCBBbmd1bGFyOlxuICpcbiAqICogVGhlIHVzZSBvZiBgZXZhbCgpYCwgYEZ1bmN0aW9uKHN0cmluZylgIGFuZCBzaW1pbGFyIGZ1bmN0aW9ucyB0byBkeW5hbWljYWxseSBjcmVhdGUgYW5kIGV4ZWN1dGVcbiAqIGNvZGUgZnJvbSBzdHJpbmdzIGlzIGZvcmJpZGRlbi4gQW5ndWxhciBtYWtlcyB1c2Ugb2YgdGhpcyBpbiB0aGUge0BsaW5rICRwYXJzZX0gc2VydmljZSB0b1xuICogcHJvdmlkZSBhIDMwJSBpbmNyZWFzZSBpbiB0aGUgc3BlZWQgb2YgZXZhbHVhdGluZyBBbmd1bGFyIGV4cHJlc3Npb25zLiAoVGhpcyBDU1AgcnVsZSBjYW4gYmVcbiAqIGRpc2FibGVkIHdpdGggdGhlIENTUCBrZXl3b3JkIGB1bnNhZmUtZXZhbGAsIGJ1dCBpdCBpcyBnZW5lcmFsbHkgbm90IHJlY29tbWVuZGVkIGFzIGl0IHdvdWxkXG4gKiB3ZWFrZW4gdGhlIHByb3RlY3Rpb25zIG9mZmVyZWQgYnkgQ1NQLilcbiAqXG4gKiAqIFRoZSB1c2Ugb2YgaW5saW5lIHJlc291cmNlcywgc3VjaCBhcyBpbmxpbmUgYDxzY3JpcHQ+YCBhbmQgYDxzdHlsZT5gIGVsZW1lbnRzLCBhcmUgZm9yYmlkZGVuLlxuICogVGhpcyBwcmV2ZW50cyBhcHBzIGZyb20gaW5qZWN0aW5nIGN1c3RvbSBzdHlsZXMgZGlyZWN0bHkgaW50byB0aGUgZG9jdW1lbnQuIEFuZ3VsYXIgbWFrZXMgdXNlIG9mXG4gKiB0aGlzIHRvIGluY2x1ZGUgc29tZSBDU1MgcnVsZXMgKGUuZy4ge0BsaW5rIG5nQ2xvYWt9IGFuZCB7QGxpbmsgbmdIaWRlfSkuIFRvIG1ha2UgdGhlc2VcbiAqIGRpcmVjdGl2ZXMgd29yayB3aGVuIGEgQ1NQIHJ1bGUgaXMgYmxvY2tpbmcgaW5saW5lIHN0eWxlcywgeW91IG11c3QgbGluayB0byB0aGUgYGFuZ3VsYXItY3NwLmNzc2BcbiAqIGluIHlvdXIgSFRNTCBtYW51YWxseS4gKFRoaXMgQ1NQIHJ1bGUgY2FuIGJlIGRpc2FibGVkIHdpdGggdGhlIENTUCBrZXl3b3JkIGB1bnNhZmUtaW5saW5lYCwgYnV0XG4gKiBpdCBpcyBnZW5lcmFsbHkgbm90IHJlY29tbWVuZGVkIGFzIGl0IHdvdWxkIHdlYWtlbiB0aGUgcHJvdGVjdGlvbnMgb2ZmZXJlZCBieSBDU1AuKVxuICpcbiAqIElmIHlvdSBkbyBub3QgcHJvdmlkZSBgbmdDc3BgIHRoZW4gQW5ndWxhciB0cmllcyB0byBhdXRvZGV0ZWN0IGlmIENTUCBpcyBibG9ja2luZyBkeW5hbWljIGNvZGVcbiAqIGNyZWF0aW9uIGZyb20gc3RyaW5ncyAoZS5nLiwgYHVuc2FmZS1ldmFsYCBub3Qgc3BlY2lmaWVkIGluIENTUCBoZWFkZXIpIGFuZCBhdXRvbWF0aWNhbGx5XG4gKiBkZWFjdGl2YXRlcyB0aGlzIGZlYXR1cmUgaW4gdGhlIHtAbGluayAkcGFyc2V9IHNlcnZpY2UuIFRoaXMgYXV0b2RldGVjdGlvbiwgaG93ZXZlciwgdHJpZ2dlcnMgYVxuICogQ1NQIGVycm9yIHRvIGJlIGxvZ2dlZCBpbiB0aGUgY29uc29sZTpcbiAqXG4gKiBgYGBcbiAqIFJlZnVzZWQgdG8gZXZhbHVhdGUgYSBzdHJpbmcgYXMgSmF2YVNjcmlwdCBiZWNhdXNlICd1bnNhZmUtZXZhbCcgaXMgbm90IGFuIGFsbG93ZWQgc291cmNlIG9mXG4gKiBzY3JpcHQgaW4gdGhlIGZvbGxvd2luZyBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBkaXJlY3RpdmU6IFwiZGVmYXVsdC1zcmMgJ3NlbGYnXCIuIE5vdGUgdGhhdFxuICogJ3NjcmlwdC1zcmMnIHdhcyBub3QgZXhwbGljaXRseSBzZXQsIHNvICdkZWZhdWx0LXNyYycgaXMgdXNlZCBhcyBhIGZhbGxiYWNrLlxuICogYGBgXG4gKlxuICogVGhpcyBlcnJvciBpcyBoYXJtbGVzcyBidXQgYW5ub3lpbmcuIFRvIHByZXZlbnQgdGhlIGVycm9yIGZyb20gc2hvd2luZyB1cCwgcHV0IHRoZSBgbmdDc3BgXG4gKiBkaXJlY3RpdmUgb24gYW4gZWxlbWVudCBvZiB0aGUgSFRNTCBkb2N1bWVudCB0aGF0IGFwcGVhcnMgYmVmb3JlIHRoZSBgPHNjcmlwdD5gIHRhZyB0aGF0IGxvYWRzXG4gKiB0aGUgYGFuZ3VsYXIuanNgIGZpbGUuXG4gKlxuICogKk5vdGU6IFRoaXMgZGlyZWN0aXZlIGlzIG9ubHkgYXZhaWxhYmxlIGluIHRoZSBgbmctY3NwYCBhbmQgYGRhdGEtbmctY3NwYCBhdHRyaWJ1dGUgZm9ybS4qXG4gKlxuICogWW91IGNhbiBzcGVjaWZ5IHdoaWNoIG9mIHRoZSBDU1AgcmVsYXRlZCBBbmd1bGFyIGZlYXR1cmVzIHNob3VsZCBiZSBkZWFjdGl2YXRlZCBieSBwcm92aWRpbmdcbiAqIGEgdmFsdWUgZm9yIHRoZSBgbmctY3NwYCBhdHRyaWJ1dGUuIFRoZSBvcHRpb25zIGFyZSBhcyBmb2xsb3dzOlxuICpcbiAqICogbm8taW5saW5lLXN0eWxlOiB0aGlzIHN0b3BzIEFuZ3VsYXIgZnJvbSBpbmplY3RpbmcgQ1NTIHN0eWxlcyBpbnRvIHRoZSBET01cbiAqXG4gKiAqIG5vLXVuc2FmZS1ldmFsOiB0aGlzIHN0b3BzIEFuZ3VsYXIgZnJvbSBvcHRpbWl6aW5nICRwYXJzZSB3aXRoIHVuc2FmZSBldmFsIG9mIHN0cmluZ3NcbiAqXG4gKiBZb3UgY2FuIHVzZSB0aGVzZSB2YWx1ZXMgaW4gdGhlIGZvbGxvd2luZyBjb21iaW5hdGlvbnM6XG4gKlxuICpcbiAqICogTm8gZGVjbGFyYXRpb24gbWVhbnMgdGhhdCBBbmd1bGFyIHdpbGwgYXNzdW1lIHRoYXQgeW91IGNhbiBkbyBpbmxpbmUgc3R5bGVzLCBidXQgaXQgd2lsbCBkb1xuICogYSBydW50aW1lIGNoZWNrIGZvciB1bnNhZmUtZXZhbC4gRS5nLiBgPGJvZHk+YC4gVGhpcyBpcyBiYWNrd2FyZGx5IGNvbXBhdGlibGUgd2l0aCBwcmV2aW91c1xuICogdmVyc2lvbnMgb2YgQW5ndWxhci5cbiAqXG4gKiAqIEEgc2ltcGxlIGBuZy1jc3BgIChvciBgZGF0YS1uZy1jc3BgKSBhdHRyaWJ1dGUgd2lsbCB0ZWxsIEFuZ3VsYXIgdG8gZGVhY3RpdmF0ZSBib3RoIGlubGluZVxuICogc3R5bGVzIGFuZCB1bnNhZmUgZXZhbC4gRS5nLiBgPGJvZHkgbmctY3NwPmAuIFRoaXMgaXMgYmFja3dhcmRseSBjb21wYXRpYmxlIHdpdGggcHJldmlvdXNcbiAqIHZlcnNpb25zIG9mIEFuZ3VsYXIuXG4gKlxuICogKiBTcGVjaWZ5aW5nIG9ubHkgYG5vLXVuc2FmZS1ldmFsYCB0ZWxscyBBbmd1bGFyIHRoYXQgd2UgbXVzdCBub3QgdXNlIGV2YWwsIGJ1dCB0aGF0IHdlIGNhblxuICogaW5qZWN0IGlubGluZSBzdHlsZXMuIEUuZy4gYDxib2R5IG5nLWNzcD1cIm5vLXVuc2FmZS1ldmFsXCI+YC5cbiAqXG4gKiAqIFNwZWNpZnlpbmcgb25seSBgbm8taW5saW5lLXN0eWxlYCB0ZWxscyBBbmd1bGFyIHRoYXQgd2UgbXVzdCBub3QgaW5qZWN0IHN0eWxlcywgYnV0IHRoYXQgd2UgY2FuXG4gKiBydW4gZXZhbCAtIG5vIGF1dG9tYXRpYyBjaGVjayBmb3IgdW5zYWZlIGV2YWwgd2lsbCBvY2N1ci4gRS5nLiBgPGJvZHkgbmctY3NwPVwibm8taW5saW5lLXN0eWxlXCI+YFxuICpcbiAqICogU3BlY2lmeWluZyBib3RoIGBuby11bnNhZmUtZXZhbGAgYW5kIGBuby1pbmxpbmUtc3R5bGVgIHRlbGxzIEFuZ3VsYXIgdGhhdCB3ZSBtdXN0IG5vdCBpbmplY3RcbiAqIHN0eWxlcyBub3IgdXNlIGV2YWwsIHdoaWNoIGlzIHRoZSBzYW1lIGFzIGFuIGVtcHR5OiBuZy1jc3AuXG4gKiBFLmcuYDxib2R5IG5nLWNzcD1cIm5vLWlubGluZS1zdHlsZTtuby11bnNhZmUtZXZhbFwiPmBcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gYXBwbHkgdGhlIGBuZ0NzcGAgZGlyZWN0aXZlIHRvIHRoZSBgaHRtbGAgdGFnLlxuICAgYGBgaHRtbFxuICAgICA8IWRvY3R5cGUgaHRtbD5cbiAgICAgPGh0bWwgbmctYXBwIG5nLWNzcD5cbiAgICAgLi4uXG4gICAgIC4uLlxuICAgICA8L2h0bWw+XG4gICBgYGBcblxuICA8IS0tIE5vdGU6IHRoZSBgLmNzcGAgc3VmZml4IGluIHRoZSBleGFtcGxlIG5hbWUgdHJpZ2dlcnMgQ1NQIG1vZGUgaW4gb3VyIGh0dHAgc2VydmVyISAtLT5cbiAgPGV4YW1wbGUgbmFtZT1cImV4YW1wbGUuY3NwXCIgbW9kdWxlPVwiY3NwRXhhbXBsZVwiIG5nLWNzcD1cInRydWVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiTWFpbkNvbnRyb2xsZXIgYXMgY3RybFwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjdHJsLmluYygpXCIgaWQ9XCJpbmNcIj5JbmNyZW1lbnQ8L2J1dHRvbj5cbiAgICAgICAgICA8c3BhbiBpZD1cImNvdW50ZXJcIj5cbiAgICAgICAgICAgIHt7Y3RybC5jb3VudGVyfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImN0cmwuZXZpbCgpXCIgaWQ9XCJldmlsXCI+RXZpbDwvYnV0dG9uPlxuICAgICAgICAgIDxzcGFuIGlkPVwiZXZpbEVycm9yXCI+XG4gICAgICAgICAgICB7e2N0cmwuZXZpbEVycm9yfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgICBhbmd1bGFyLm1vZHVsZSgnY3NwRXhhbXBsZScsIFtdKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ01haW5Db250cm9sbGVyJywgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbmMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb3VudGVyKys7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5ldmlsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZXZhbCgnMSsyJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZXZhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmlsRXJyb3IgPSBlLm1lc3NhZ2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciB1dGlsLCB3ZWJkcml2ZXI7XG5cbiAgICAgIHZhciBpbmNCdG4gPSBlbGVtZW50KGJ5LmlkKCdpbmMnKSk7XG4gICAgICB2YXIgY291bnRlciA9IGVsZW1lbnQoYnkuaWQoJ2NvdW50ZXInKSk7XG4gICAgICB2YXIgZXZpbEJ0biA9IGVsZW1lbnQoYnkuaWQoJ2V2aWwnKSk7XG4gICAgICB2YXIgZXZpbEVycm9yID0gZWxlbWVudChieS5pZCgnZXZpbEVycm9yJykpO1xuXG4gICAgICBmdW5jdGlvbiBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIGJyb3dzZXIubWFuYWdlKCkubG9ncygpLmdldCgnYnJvd3NlcicpLnRoZW4oZnVuY3Rpb24oYnJvd3NlckxvZykge1xuICAgICAgICAgIHJldHVybiBicm93c2VyTG9nLmZpbHRlcihmdW5jdGlvbihsb2dFbnRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ0VudHJ5LmxldmVsLnZhbHVlID4gd2ViZHJpdmVyLmxvZ2dpbmcuTGV2ZWwuV0FSTklORy52YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFyRXJyb3JzKCkge1xuICAgICAgICBnZXRBbmRDbGVhclNldmVyZUVycm9ycygpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBleHBlY3ROb0Vycm9ycygpIHtcbiAgICAgICAgZ2V0QW5kQ2xlYXJTZXZlcmVFcnJvcnMoKS50aGVuKGZ1bmN0aW9uKGZpbHRlcmVkTG9nKSB7XG4gICAgICAgICAgZXhwZWN0KGZpbHRlcmVkTG9nLmxlbmd0aCkudG9FcXVhbCgwKTtcbiAgICAgICAgICBpZiAoZmlsdGVyZWRMb2cubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYnJvd3NlciBjb25zb2xlIGVycm9yczogJyArIHV0aWwuaW5zcGVjdChmaWx0ZXJlZExvZykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGV4cGVjdEVycm9yKHJlZ2V4KSB7XG4gICAgICAgIGdldEFuZENsZWFyU2V2ZXJlRXJyb3JzKCkudGhlbihmdW5jdGlvbihmaWx0ZXJlZExvZykge1xuICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgIGZpbHRlcmVkTG9nLmZvckVhY2goZnVuY3Rpb24obG9nKSB7XG4gICAgICAgICAgICBpZiAobG9nLm1lc3NhZ2UubWF0Y2gocmVnZXgpKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4cGVjdGVkIGFuIGVycm9yIHRoYXQgbWF0Y2hlcyAnICsgcmVnZXgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG4gICAgICAgIHdlYmRyaXZlciA9IHJlcXVpcmUoJ3NlbGVuaXVtLXdlYmRyaXZlcicpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZvciBub3csIHdlIG9ubHkgdGVzdCBvbiBDaHJvbWUsXG4gICAgICAvLyBhcyBTYWZhcmkgZG9lcyBub3QgbG9hZCB0aGUgcGFnZSB3aXRoIFByb3RyYWN0b3IncyBpbmplY3RlZCBzY3JpcHRzLFxuICAgICAgLy8gYW5kIEZpcmVmb3ggd2ViZHJpdmVyIGFsd2F5cyBkaXNhYmxlcyBjb250ZW50IHNlY3VyaXR5IHBvbGljeSAoIzYzNTgpXG4gICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciAhPT0gJ2Nocm9tZScpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpdCgnc2hvdWxkIG5vdCByZXBvcnQgZXJyb3JzIHdoZW4gdGhlIHBhZ2UgaXMgbG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNsZWFyIGVycm9ycyBzbyB3ZSBhcmUgbm90IGRlcGVuZGVudCBvbiBwcmV2aW91cyB0ZXN0c1xuICAgICAgICBjbGVhckVycm9ycygpO1xuICAgICAgICAvLyBOZWVkIHRvIHJlbG9hZCB0aGUgcGFnZSBhcyB0aGUgcGFnZSBpcyBhbHJlYWR5IGxvYWRlZCB3aGVuXG4gICAgICAgIC8vIHdlIGNvbWUgaGVyZVxuICAgICAgICBicm93c2VyLmRyaXZlci5nZXRDdXJyZW50VXJsKCkudGhlbihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICBicm93c2VyLmdldCh1cmwpO1xuICAgICAgICB9KTtcbiAgICAgICAgZXhwZWN0Tm9FcnJvcnMoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnc2hvdWxkIGV2YWx1YXRlIGV4cHJlc3Npb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChjb3VudGVyLmdldFRleHQoKSkudG9FcXVhbCgnMCcpO1xuICAgICAgICBpbmNCdG4uY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNvdW50ZXIuZ2V0VGV4dCgpKS50b0VxdWFsKCcxJyk7XG4gICAgICAgIGV4cGVjdE5vRXJyb3JzKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBhbmQgcmVwb3J0IGFuIGVycm9yIHdoZW4gdXNpbmcgXCJldmFsXCInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXZpbEJ0bi5jbGljaygpO1xuICAgICAgICBleHBlY3QoZXZpbEVycm9yLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBTZWN1cml0eSBQb2xpY3kvKTtcbiAgICAgICAgZXhwZWN0RXJyb3IoL0NvbnRlbnQgU2VjdXJpdHkgUG9saWN5Lyk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAgKi9cblxuLy8gYG5nQ3NwYCBpcyBub3QgaW1wbGVtZW50ZWQgYXMgYSBwcm9wZXIgZGlyZWN0aXZlIGFueSBtb3JlLCBiZWNhdXNlIHdlIG5lZWQgaXQgYmUgcHJvY2Vzc2VkIHdoaWxlXG4vLyB3ZSBib290c3RyYXAgdGhlIGFwcCAoYmVmb3JlIGAkcGFyc2VgIGlzIGluc3RhbnRpYXRlZCkuIEZvciB0aGlzIHJlYXNvbiwgd2UganVzdCBoYXZlIHRoZSBgY3NwKClgXG4vLyBmbiB0aGF0IGxvb2tzIGZvciB0aGUgYG5nLWNzcGAgYXR0cmlidXRlIGFueXdoZXJlIGluIHRoZSBjdXJyZW50IGRvYy5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0NsaWNrXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIG5nQ2xpY2sgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igd2hlblxuICogYW4gZWxlbWVudCBpcyBjbGlja2VkLlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDbGljayB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjbGljay4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1jbGlja1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxzcGFuPlxuICAgICAgICBjb3VudDoge3tjb3VudH19XG4gICAgICA8L3NwYW4+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2NvdW50JykpLmdldFRleHQoKSkudG9NYXRjaCgnMCcpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJ2J1dHRvbicpKS5jbGljaygpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnY291bnQnKSkuZ2V0VGV4dCgpKS50b01hdGNoKCcxJyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuLypcbiAqIEEgY29sbGVjdGlvbiBvZiBkaXJlY3RpdmVzIHRoYXQgYWxsb3dzIGNyZWF0aW9uIG9mIGN1c3RvbSBldmVudCBoYW5kbGVycyB0aGF0IGFyZSBkZWZpbmVkIGFzXG4gKiBhbmd1bGFyIGV4cHJlc3Npb25zIGFuZCBhcmUgY29tcGlsZWQgYW5kIGV4ZWN1dGVkIHdpdGhpbiB0aGUgY3VycmVudCBzY29wZS5cbiAqL1xudmFyIG5nRXZlbnREaXJlY3RpdmVzID0ge307XG5cbi8vIEZvciBldmVudHMgdGhhdCBtaWdodCBmaXJlIHN5bmNocm9ub3VzbHkgZHVyaW5nIERPTSBtYW5pcHVsYXRpb25cbi8vIHdlIG5lZWQgdG8gZXhlY3V0ZSB0aGVpciBldmVudCBoYW5kbGVycyBhc3luY2hyb25vdXNseSB1c2luZyAkZXZhbEFzeW5jLFxuLy8gc28gdGhhdCB0aGV5IGFyZSBub3QgZXhlY3V0ZWQgaW4gYW4gaW5jb25zaXN0ZW50IHN0YXRlLlxudmFyIGZvcmNlQXN5bmNFdmVudHMgPSB7XG4gICdibHVyJzogdHJ1ZSxcbiAgJ2ZvY3VzJzogdHJ1ZVxufTtcbmZvckVhY2goXG4gICdjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBrZXlkb3duIGtleXVwIGtleXByZXNzIHN1Ym1pdCBmb2N1cyBibHVyIGNvcHkgY3V0IHBhc3RlJy5zcGxpdCgnICcpLFxuICBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgICB2YXIgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZU5vcm1hbGl6ZSgnbmctJyArIGV2ZW50TmFtZSk7XG4gICAgbmdFdmVudERpcmVjdGl2ZXNbZGlyZWN0aXZlTmFtZV0gPSBbJyRwYXJzZScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24oJHBhcnNlLCAkcm9vdFNjb3BlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBjb21waWxlOiBmdW5jdGlvbigkZWxlbWVudCwgYXR0cikge1xuICAgICAgICAgIC8vIE5PVEU6XG4gICAgICAgICAgLy8gV2UgZXhwb3NlIHRoZSBwb3dlcmZ1bCBgJGV2ZW50YCBvYmplY3Qgb24gdGhlIHNjb3BlIHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBXaW5kb3csXG4gICAgICAgICAgLy8gZXRjLiBUaGlzIGlzIE9LLCBiZWNhdXNlIGV4cHJlc3Npb25zIGFyZSBub3Qgc2FuZGJveGVkIGFueSBtb3JlIChhbmQgdGhlIGV4cHJlc3Npb25cbiAgICAgICAgICAvLyBzYW5kYm94IHdhcyBuZXZlciBtZWFudCB0byBiZSBhIHNlY3VyaXR5IGZlYXR1cmUgYW55d2F5KS5cbiAgICAgICAgICB2YXIgZm4gPSAkcGFyc2UoYXR0cltkaXJlY3RpdmVOYW1lXSk7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIG5nRXZlbnRIYW5kbGVyKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZm4oc2NvcGUsIHskZXZlbnQ6IGV2ZW50fSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGlmIChmb3JjZUFzeW5jRXZlbnRzW2V2ZW50TmFtZV0gJiYgJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XTtcbiAgfVxuKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0RibGNsaWNrXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0RibGNsaWNrYCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBhIGRibGNsaWNrIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdEYmxjbGljayB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBhIGRibGNsaWNrLiAoVGhlIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGApXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1kYmxjbGlja1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1kYmxjbGljaz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50IChvbiBkb3VibGUgY2xpY2spXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNlZG93blxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBuZ01vdXNlZG93biBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBzcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZWRvd24gZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlZG93biB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBtb3VzZWRvd24uICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctbW91c2Vkb3duXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNlZG93bj1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50IChvbiBtb3VzZSBkb3duKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZXVwXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24gbW91c2V1cCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2V1cCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBtb3VzZXVwLiAoe0BsaW5rIGd1aWRlL2V4cHJlc3Npb24jLWV2ZW50LSBFdmVudCBvYmplY3QgaXMgYXZhaWxhYmxlIGFzIGAkZXZlbnRgfSlcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLW1vdXNldXBcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2V1cD1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50IChvbiBtb3VzZSB1cClcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNlb3ZlclxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlb3ZlciBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nTW91c2VvdmVyIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNlb3Zlci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZW92ZXJcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxidXR0b24gbmctbW91c2VvdmVyPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgaXMgb3ZlcilcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgY291bnQ6IHt7Y291bnR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW91c2VlbnRlclxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIG1vdXNlZW50ZXIgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlZW50ZXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogbW91c2VlbnRlci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1tb3VzZWVudGVyXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNlZW50ZXI9XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICAgIEluY3JlbWVudCAod2hlbiBtb3VzZSBlbnRlcnMpXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIGNvdW50OiB7e2NvdW50fX1cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ01vdXNlbGVhdmVcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZWxlYXZlIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNb3VzZWxlYXZlIHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIG1vdXNlbGVhdmUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctbW91c2VsZWF2ZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGJ1dHRvbiBuZy1tb3VzZWxlYXZlPVwiY291bnQgPSBjb3VudCArIDFcIiBuZy1pbml0PVwiY291bnQ9MFwiPlxuICAgICAgICBJbmNyZW1lbnQgKHdoZW4gbW91c2UgbGVhdmVzKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb3VzZW1vdmVcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBBTllcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBtb3VzZW1vdmUgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vdXNlbW92ZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBtb3VzZW1vdmUuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctbW91c2Vtb3ZlXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8YnV0dG9uIG5nLW1vdXNlbW92ZT1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgICAgSW5jcmVtZW50ICh3aGVuIG1vdXNlIG1vdmVzKVxuICAgICAgPC9idXR0b24+XG4gICAgICBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdLZXlkb3duXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogU3BlY2lmeSBjdXN0b20gYmVoYXZpb3Igb24ga2V5ZG93biBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nS2V5ZG93biB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBrZXlkb3duLiAoRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YCBhbmQgY2FuIGJlIGludGVycm9nYXRlZCBmb3Iga2V5Q29kZSwgYWx0S2V5LCBldGMuKVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmcta2V5ZG93blwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLWtleWRvd249XCJjb3VudCA9IGNvdW50ICsgMVwiIG5nLWluaXQ9XCJjb3VudD0wXCI+XG4gICAgICBrZXkgZG93biBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdLZXl1cFxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IEFOWVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGtleXVwIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdLZXl1cCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBrZXl1cC4gKEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGAgYW5kIGNhbiBiZSBpbnRlcnJvZ2F0ZWQgZm9yIGtleUNvZGUsIGFsdEtleSwgZXRjLilcbiAqXG4gKiBAZXhhbXBsZVxuICAgPGV4YW1wbGUgbmFtZT1cIm5nLWtleXVwXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHA+VHlwaW5nIGluIHRoZSBpbnB1dCBib3ggYmVsb3cgdXBkYXRlcyB0aGUga2V5IGNvdW50PC9wPlxuICAgICAgIDxpbnB1dCBuZy1rZXl1cD1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj4ga2V5IHVwIGNvdW50OiB7e2NvdW50fX1cblxuICAgICAgIDxwPlR5cGluZyBpbiB0aGUgaW5wdXQgYm94IGJlbG93IHVwZGF0ZXMgdGhlIGtleWNvZGU8L3A+XG4gICAgICAgPGlucHV0IG5nLWtleXVwPVwiZXZlbnQ9JGV2ZW50XCI+XG4gICAgICAgPHA+ZXZlbnQga2V5Q29kZToge3sgZXZlbnQua2V5Q29kZSB9fTwvcD5cbiAgICAgICA8cD5ldmVudCBhbHRLZXk6IHt7IGV2ZW50LmFsdEtleSB9fTwvcD5cbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0tleXByZXNzXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBrZXlwcmVzcyBldmVudC5cbiAqXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nS2V5cHJlc3Mge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICoga2V5cHJlc3MuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9XG4gKiBhbmQgY2FuIGJlIGludGVycm9nYXRlZCBmb3Iga2V5Q29kZSwgYWx0S2V5LCBldGMuKVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmcta2V5cHJlc3NcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxpbnB1dCBuZy1rZXlwcmVzcz1cImNvdW50ID0gY291bnQgKyAxXCIgbmctaW5pdD1cImNvdW50PTBcIj5cbiAgICAgIGtleSBwcmVzcyBjb3VudDoge3tjb3VudH19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdTdWJtaXRcbiAqIEByZXN0cmljdCBBXG4gKiBAZWxlbWVudCBmb3JtXG4gKiBAcHJpb3JpdHkgMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRW5hYmxlcyBiaW5kaW5nIGFuZ3VsYXIgZXhwcmVzc2lvbnMgdG8gb25zdWJtaXQgZXZlbnRzLlxuICpcbiAqIEFkZGl0aW9uYWxseSBpdCBwcmV2ZW50cyB0aGUgZGVmYXVsdCBhY3Rpb24gKHdoaWNoIGZvciBmb3JtIG1lYW5zIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlXG4gKiBzZXJ2ZXIgYW5kIHJlbG9hZGluZyB0aGUgY3VycmVudCBwYWdlKSwgYnV0IG9ubHkgaWYgdGhlIGZvcm0gZG9lcyBub3QgY29udGFpbiBgYWN0aW9uYCxcbiAqIGBkYXRhLWFjdGlvbmAsIG9yIGB4LWFjdGlvbmAgYXR0cmlidXRlcy5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogKipXYXJuaW5nOioqIEJlIGNhcmVmdWwgbm90IHRvIGNhdXNlIFwiZG91YmxlLXN1Ym1pc3Npb25cIiBieSB1c2luZyBib3RoIHRoZSBgbmdDbGlja2AgYW5kXG4gKiBgbmdTdWJtaXRgIGhhbmRsZXJzIHRvZ2V0aGVyLiBTZWUgdGhlXG4gKiB7QGxpbmsgZm9ybSNzdWJtaXR0aW5nLWEtZm9ybS1hbmQtcHJldmVudGluZy10aGUtZGVmYXVsdC1hY3Rpb24gYGZvcm1gIGRpcmVjdGl2ZSBkb2N1bWVudGF0aW9ufVxuICogZm9yIGEgZGV0YWlsZWQgZGlzY3Vzc2lvbiBvZiB3aGVuIGBuZ1N1Ym1pdGAgbWF5IGJlIHRyaWdnZXJlZC5cbiAqIDwvZGl2PlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdTdWJtaXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC5cbiAqICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJzdWJtaXRFeGFtcGxlXCIgbmFtZT1cIm5nLXN1Ym1pdFwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPHNjcmlwdD5cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3N1Ym1pdEV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBbXTtcbiAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJ2hlbGxvJztcbiAgICAgICAgICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCRzY29wZS50ZXh0KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpc3QucHVzaCh0aGlzLnRleHQpO1xuICAgICAgICAgICAgICAgICRzY29wZS50ZXh0ID0gJyc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfV0pO1xuICAgICAgPC9zY3JpcHQ+XG4gICAgICA8Zm9ybSBuZy1zdWJtaXQ9XCJzdWJtaXQoKVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICBFbnRlciB0ZXh0IGFuZCBoaXQgZW50ZXI6XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwidGV4dFwiIG5hbWU9XCJ0ZXh0XCIgLz5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiBpZD1cInN1Ym1pdFwiIHZhbHVlPVwiU3VibWl0XCIgLz5cbiAgICAgICAgPHByZT5saXN0PXt7bGlzdH19PC9wcmU+XG4gICAgICA8L2Zvcm0+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctc3VibWl0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCdsaXN0JykpLmdldFRleHQoKSkudG9CZSgnbGlzdD1bXScpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJyNzdWJtaXQnKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2hlbGxvJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudChieS5tb2RlbCgndGV4dCcpKS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpLnRvQmUoJycpO1xuICAgICAgIH0pO1xuICAgICAgIGl0KCdzaG91bGQgaWdub3JlIGVtcHR5IHN0cmluZ3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0PVtdJyk7XG4gICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3N1Ym1pdCcpKS5jbGljaygpO1xuICAgICAgICAgZWxlbWVudChieS5jc3MoJyNzdWJtaXQnKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QnKSkuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2hlbGxvJyk7XG4gICAgICAgIH0pO1xuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0ZvY3VzXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIGZvY3VzIGV2ZW50LlxuICpcbiAqIE5vdGU6IEFzIHRoZSBgZm9jdXNgIGV2ZW50IGlzIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBjYWxsaW5nIGBpbnB1dC5mb2N1cygpYFxuICogQW5ndWxhckpTIGV4ZWN1dGVzIHRoZSBleHByZXNzaW9uIHVzaW5nIGBzY29wZS4kZXZhbEFzeW5jYCBpZiB0aGUgZXZlbnQgaXMgZmlyZWRcbiAqIGR1cmluZyBhbiBgJGFwcGx5YCB0byBlbnN1cmUgYSBjb25zaXN0ZW50IHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdGb2N1cyB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBmb2N1cy4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAqIFNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja31cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQmx1clxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBibHVyIGV2ZW50LlxuICpcbiAqIEEgW2JsdXIgZXZlbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0V2ZW50cy9ibHVyKSBmaXJlcyB3aGVuXG4gKiBhbiBlbGVtZW50IGhhcyBsb3N0IGZvY3VzLlxuICpcbiAqIE5vdGU6IEFzIHRoZSBgYmx1cmAgZXZlbnQgaXMgZXhlY3V0ZWQgc3luY2hyb25vdXNseSBhbHNvIGR1cmluZyBET00gbWFuaXB1bGF0aW9uc1xuICogKGUuZy4gcmVtb3ZpbmcgYSBmb2N1c3NlZCBpbnB1dCksXG4gKiBBbmd1bGFySlMgZXhlY3V0ZXMgdGhlIGV4cHJlc3Npb24gdXNpbmcgYHNjb3BlLiRldmFsQXN5bmNgIGlmIHRoZSBldmVudCBpcyBmaXJlZFxuICogZHVyaW5nIGFuIGAkYXBwbHlgIHRvIGVuc3VyZSBhIGNvbnNpc3RlbnQgc3RhdGUuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0JsdXIge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbHVhdGUgdXBvblxuICogYmx1ci4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAqIFNlZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nQ2xpY2sgbmdDbGlja31cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nQ29weVxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBjb3B5IGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdDb3B5IHtAbGluayBndWlkZS9leHByZXNzaW9uIEV4cHJlc3Npb259IHRvIGV2YWx1YXRlIHVwb25cbiAqIGNvcHkuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY29weVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLWNvcHk9XCJjb3BpZWQ9dHJ1ZVwiIG5nLWluaXQ9XCJjb3BpZWQ9ZmFsc2U7IHZhbHVlPSdjb3B5IG1lJ1wiIG5nLW1vZGVsPVwidmFsdWVcIj5cbiAgICAgIGNvcGllZDoge3tjb3BpZWR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0N1dFxuICogQHJlc3RyaWN0IEFcbiAqIEBlbGVtZW50IHdpbmRvdywgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGFcbiAqIEBwcmlvcml0eSAwXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBTcGVjaWZ5IGN1c3RvbSBiZWhhdmlvciBvbiBjdXQgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0N1dCB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBjdXQuICh7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiMtZXZlbnQtIEV2ZW50IG9iamVjdCBpcyBhdmFpbGFibGUgYXMgYCRldmVudGB9KVxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBuYW1lPVwibmctY3V0XCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8aW5wdXQgbmctY3V0PVwiY3V0PXRydWVcIiBuZy1pbml0PVwiY3V0PWZhbHNlOyB2YWx1ZT0nY3V0IG1lJ1wiIG5nLW1vZGVsPVwidmFsdWVcIj5cbiAgICAgIGN1dDoge3tjdXR9fVxuICAgICA8L2ZpbGU+XG4gICA8L2V4YW1wbGU+XG4gKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1Bhc3RlXG4gKiBAcmVzdHJpY3QgQVxuICogQGVsZW1lbnQgd2luZG93LCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYVxuICogQHByaW9yaXR5IDBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFNwZWNpZnkgY3VzdG9tIGJlaGF2aW9yIG9uIHBhc3RlIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdQYXN0ZSB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB0byBldmFsdWF0ZSB1cG9uXG4gKiBwYXN0ZS4gKHtAbGluayBndWlkZS9leHByZXNzaW9uIy1ldmVudC0gRXZlbnQgb2JqZWN0IGlzIGF2YWlsYWJsZSBhcyBgJGV2ZW50YH0pXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1wYXN0ZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGlucHV0IG5nLXBhc3RlPVwicGFzdGU9dHJ1ZVwiIG5nLWluaXQ9XCJwYXN0ZT1mYWxzZVwiIHBsYWNlaG9sZGVyPSdwYXN0ZSBoZXJlJz5cbiAgICAgIHBhc3RlZDoge3twYXN0ZX19XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSWZcbiAqIEByZXN0cmljdCBBXG4gKiBAbXVsdGlFbGVtZW50XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nSWZgIGRpcmVjdGl2ZSByZW1vdmVzIG9yIHJlY3JlYXRlcyBhIHBvcnRpb24gb2YgdGhlIERPTSB0cmVlIGJhc2VkIG9uIGFuXG4gKiB7ZXhwcmVzc2lvbn0uIElmIHRoZSBleHByZXNzaW9uIGFzc2lnbmVkIHRvIGBuZ0lmYCBldmFsdWF0ZXMgdG8gYSBmYWxzZVxuICogdmFsdWUgdGhlbiB0aGUgZWxlbWVudCBpcyByZW1vdmVkIGZyb20gdGhlIERPTSwgb3RoZXJ3aXNlIGEgY2xvbmUgb2YgdGhlXG4gKiBlbGVtZW50IGlzIHJlaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxuICpcbiAqIGBuZ0lmYCBkaWZmZXJzIGZyb20gYG5nU2hvd2AgYW5kIGBuZ0hpZGVgIGluIHRoYXQgYG5nSWZgIGNvbXBsZXRlbHkgcmVtb3ZlcyBhbmQgcmVjcmVhdGVzIHRoZVxuICogZWxlbWVudCBpbiB0aGUgRE9NIHJhdGhlciB0aGFuIGNoYW5naW5nIGl0cyB2aXNpYmlsaXR5IHZpYSB0aGUgYGRpc3BsYXlgIGNzcyBwcm9wZXJ0eS4gIEEgY29tbW9uXG4gKiBjYXNlIHdoZW4gdGhpcyBkaWZmZXJlbmNlIGlzIHNpZ25pZmljYW50IGlzIHdoZW4gdXNpbmcgY3NzIHNlbGVjdG9ycyB0aGF0IHJlbHkgb24gYW4gZWxlbWVudCdzXG4gKiBwb3NpdGlvbiB3aXRoaW4gdGhlIERPTSwgc3VjaCBhcyB0aGUgYDpmaXJzdC1jaGlsZGAgb3IgYDpsYXN0LWNoaWxkYCBwc2V1ZG8tY2xhc3Nlcy5cbiAqXG4gKiBOb3RlIHRoYXQgd2hlbiBhbiBlbGVtZW50IGlzIHJlbW92ZWQgdXNpbmcgYG5nSWZgIGl0cyBzY29wZSBpcyBkZXN0cm95ZWQgYW5kIGEgbmV3IHNjb3BlXG4gKiBpcyBjcmVhdGVkIHdoZW4gdGhlIGVsZW1lbnQgaXMgcmVzdG9yZWQuICBUaGUgc2NvcGUgY3JlYXRlZCB3aXRoaW4gYG5nSWZgIGluaGVyaXRzIGZyb21cbiAqIGl0cyBwYXJlbnQgc2NvcGUgdXNpbmdcbiAqIFtwcm90b3R5cGFsIGluaGVyaXRhbmNlXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3dpa2kvVW5kZXJzdGFuZGluZy1TY29wZXMjamF2YXNjcmlwdC1wcm90b3R5cGFsLWluaGVyaXRhbmNlKS5cbiAqIEFuIGltcG9ydGFudCBpbXBsaWNhdGlvbiBvZiB0aGlzIGlzIGlmIGBuZ01vZGVsYCBpcyB1c2VkIHdpdGhpbiBgbmdJZmAgdG8gYmluZCB0b1xuICogYSBqYXZhc2NyaXB0IHByaW1pdGl2ZSBkZWZpbmVkIGluIHRoZSBwYXJlbnQgc2NvcGUuIEluIHRoaXMgY2FzZSBhbnkgbW9kaWZpY2F0aW9ucyBtYWRlIHRvIHRoZVxuICogdmFyaWFibGUgd2l0aGluIHRoZSBjaGlsZCBzY29wZSB3aWxsIG92ZXJyaWRlIChoaWRlKSB0aGUgdmFsdWUgaW4gdGhlIHBhcmVudCBzY29wZS5cbiAqXG4gKiBBbHNvLCBgbmdJZmAgcmVjcmVhdGVzIGVsZW1lbnRzIHVzaW5nIHRoZWlyIGNvbXBpbGVkIHN0YXRlLiBBbiBleGFtcGxlIG9mIHRoaXMgYmVoYXZpb3JcbiAqIGlzIGlmIGFuIGVsZW1lbnQncyBjbGFzcyBhdHRyaWJ1dGUgaXMgZGlyZWN0bHkgbW9kaWZpZWQgYWZ0ZXIgaXQncyBjb21waWxlZCwgdXNpbmcgc29tZXRoaW5nIGxpa2VcbiAqIGpRdWVyeSdzIGAuYWRkQ2xhc3MoKWAgbWV0aG9kLCBhbmQgdGhlIGVsZW1lbnQgaXMgbGF0ZXIgcmVtb3ZlZC4gV2hlbiBgbmdJZmAgcmVjcmVhdGVzIHRoZSBlbGVtZW50XG4gKiB0aGUgYWRkZWQgY2xhc3Mgd2lsbCBiZSBsb3N0IGJlY2F1c2UgdGhlIG9yaWdpbmFsIGNvbXBpbGVkIHN0YXRlIGlzIHVzZWQgdG8gcmVnZW5lcmF0ZSB0aGUgZWxlbWVudC5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHlvdSBjYW4gcHJvdmlkZSBhbmltYXRpb25zIHZpYSB0aGUgYG5nQW5pbWF0ZWAgbW9kdWxlIHRvIGFuaW1hdGUgdGhlIGBlbnRlcmBcbiAqIGFuZCBgbGVhdmVgIGVmZmVjdHMuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2VudGVyIGVudGVyfSAgfCBqdXN0IGFmdGVyIHRoZSBgbmdJZmAgY29udGVudHMgY2hhbmdlIGFuZCBhIG5ldyBET00gZWxlbWVudCBpcyBjcmVhdGVkIGFuZCBpbmplY3RlZCBpbnRvIHRoZSBgbmdJZmAgY29udGFpbmVyIHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2xlYXZlIGxlYXZlfSAgfCBqdXN0IGJlZm9yZSB0aGUgYG5nSWZgIGNvbnRlbnRzIGFyZSByZW1vdmVkIGZyb20gdGhlIERPTSB8XG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAc2NvcGVcbiAqIEBwcmlvcml0eSA2MDBcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdJZiBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgZmFsc3kgdGhlblxuICogICAgIHRoZSBlbGVtZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NIHRyZWUuIElmIGl0IGlzIHRydXRoeSBhIGNvcHkgb2YgdGhlIGNvbXBpbGVkXG4gKiAgICAgZWxlbWVudCBpcyBhZGRlZCB0byB0aGUgRE9NIHRyZWUuXG4gKlxuICogQGV4YW1wbGVcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLWlmXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxsYWJlbD5DbGljayBtZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIG5nLWluaXQ9XCJjaGVja2VkPXRydWVcIiAvPjwvbGFiZWw+PGJyLz5cbiAgICAgIFNob3cgd2hlbiBjaGVja2VkOlxuICAgICAgPHNwYW4gbmctaWY9XCJjaGVja2VkXCIgY2xhc3M9XCJhbmltYXRlLWlmXCI+XG4gICAgICAgIFRoaXMgaXMgcmVtb3ZlZCB3aGVuIHRoZSBjaGVja2JveCBpcyB1bmNoZWNrZWQuXG4gICAgICA8L3NwYW4+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLmFuaW1hdGUtaWYge1xuICAgICAgICBiYWNrZ3JvdW5kOndoaXRlO1xuICAgICAgICBib3JkZXI6MXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLWlmLm5nLWVudGVyLCAuYW5pbWF0ZS1pZi5uZy1sZWF2ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtaWYubmctZW50ZXIsXG4gICAgICAuYW5pbWF0ZS1pZi5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xuICAgICAgICBvcGFjaXR5OjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLWlmLm5nLWxlYXZlLFxuICAgICAgLmFuaW1hdGUtaWYubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgb3BhY2l0eToxO1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG52YXIgbmdJZkRpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkYW5pbWF0ZSwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICBtdWx0aUVsZW1lbnQ6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxuICAgIHByaW9yaXR5OiA2MDAsXG4gICAgdGVybWluYWw6IHRydWUsXG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAkJHRsYjogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcbiAgICAgICAgdmFyIGJsb2NrLCBjaGlsZFNjb3BlLCBwcmV2aW91c0VsZW1lbnRzO1xuICAgICAgICAkc2NvcGUuJHdhdGNoKCRhdHRyLm5nSWYsIGZ1bmN0aW9uIG5nSWZXYXRjaEFjdGlvbih2YWx1ZSkge1xuXG4gICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIWNoaWxkU2NvcGUpIHtcbiAgICAgICAgICAgICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24oY2xvbmUsIG5ld1Njb3BlKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRTY29wZSA9IG5ld1Njb3BlO1xuICAgICAgICAgICAgICAgIGNsb25lW2Nsb25lLmxlbmd0aCsrXSA9ICRjb21waWxlLiQkY3JlYXRlQ29tbWVudCgnZW5kIG5nSWYnLCAkYXR0ci5uZ0lmKTtcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBvbmx5IG5lZWQgdGhlIGZpcnN0L2xhc3Qgbm9kZSBvZiB0aGUgY2xvbmVkIG5vZGVzLlxuICAgICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHdlIG5lZWQgdG8ga2VlcCB0aGUgcmVmZXJlbmNlIHRvIHRoZSBqcWxpdGUgd3JhcHBlciBhcyBpdCBtaWdodCBiZSBjaGFuZ2VkIGxhdGVyXG4gICAgICAgICAgICAgICAgLy8gYnkgYSBkaXJlY3RpdmUgd2l0aCB0ZW1wbGF0ZVVybCB3aGVuIGl0cyB0ZW1wbGF0ZSBhcnJpdmVzLlxuICAgICAgICAgICAgICAgIGJsb2NrID0ge1xuICAgICAgICAgICAgICAgICAgY2xvbmU6IGNsb25lXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjbG9uZSwgJGVsZW1lbnQucGFyZW50KCksICRlbGVtZW50KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0VsZW1lbnRzKSB7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudHMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoaWxkU2NvcGUpIHtcbiAgICAgICAgICAgICAgY2hpbGRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgICBjaGlsZFNjb3BlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChibG9jaykge1xuICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnRzID0gZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSk7XG4gICAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKHByZXZpb3VzRWxlbWVudHMpLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlKSBwcmV2aW91c0VsZW1lbnRzID0gbnVsbDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJsb2NrID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSW5jbHVkZVxuICogQHJlc3RyaWN0IEVDQVxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgLTQwMFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogRmV0Y2hlcywgY29tcGlsZXMgYW5kIGluY2x1ZGVzIGFuIGV4dGVybmFsIEhUTUwgZnJhZ21lbnQuXG4gKlxuICogQnkgZGVmYXVsdCwgdGhlIHRlbXBsYXRlIFVSTCBpcyByZXN0cmljdGVkIHRvIHRoZSBzYW1lIGRvbWFpbiBhbmQgcHJvdG9jb2wgYXMgdGhlXG4gKiBhcHBsaWNhdGlvbiBkb2N1bWVudC4gVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcge0BsaW5rICRzY2UjZ2V0VHJ1c3RlZFJlc291cmNlVXJsXG4gKiAkc2NlLmdldFRydXN0ZWRSZXNvdXJjZVVybH0gb24gaXQuIFRvIGxvYWQgdGVtcGxhdGVzIGZyb20gb3RoZXIgZG9tYWlucyBvciBwcm90b2NvbHNcbiAqIHlvdSBtYXkgZWl0aGVyIHtAbGluayBuZy4kc2NlRGVsZWdhdGVQcm92aWRlciNyZXNvdXJjZVVybFdoaXRlbGlzdCB3aGl0ZWxpc3QgdGhlbX0gb3JcbiAqIHtAbGluayAkc2NlI3RydXN0QXNSZXNvdXJjZVVybCB3cmFwIHRoZW19IGFzIHRydXN0ZWQgdmFsdWVzLiBSZWZlciB0byBBbmd1bGFyJ3Mge0BsaW5rXG4gKiBuZy4kc2NlIFN0cmljdCBDb250ZXh0dWFsIEVzY2FwaW5nfS5cbiAqXG4gKiBJbiBhZGRpdGlvbiwgdGhlIGJyb3dzZXInc1xuICogW1NhbWUgT3JpZ2luIFBvbGljeV0oaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9icm93c2Vyc2VjL3dpa2kvUGFydDIjU2FtZS1vcmlnaW5fcG9saWN5X2Zvcl9YTUxIdHRwUmVxdWVzdClcbiAqIGFuZCBbQ3Jvc3MtT3JpZ2luIFJlc291cmNlIFNoYXJpbmcgKENPUlMpXShodHRwOi8vd3d3LnczLm9yZy9UUi9jb3JzLylcbiAqIHBvbGljeSBtYXkgZnVydGhlciByZXN0cmljdCB3aGV0aGVyIHRoZSB0ZW1wbGF0ZSBpcyBzdWNjZXNzZnVsbHkgbG9hZGVkLlxuICogRm9yIGV4YW1wbGUsIGBuZ0luY2x1ZGVgIHdvbid0IHdvcmsgZm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cyBvbiBhbGwgYnJvd3NlcnMgYW5kIGZvciBgZmlsZTovL2BcbiAqIGFjY2VzcyBvbiBzb21lIGJyb3dzZXJzLlxuICpcbiAqIEBhbmltYXRpb25zXG4gKiB8IEFuaW1hdGlvbiAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2VudGVyIGVudGVyfSAgfCB3aGVuIHRoZSBleHByZXNzaW9uIGNoYW5nZXMsIG9uIHRoZSBuZXcgaW5jbHVkZSB8XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNsZWF2ZSBsZWF2ZX0gIHwgd2hlbiB0aGUgZXhwcmVzc2lvbiBjaGFuZ2VzLCBvbiB0aGUgb2xkIGluY2x1ZGUgfFxuICpcbiAqIFRoZSBlbnRlciBhbmQgbGVhdmUgYW5pbWF0aW9uIG9jY3VyIGNvbmN1cnJlbnRseS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmdJbmNsdWRlfHNyYyBBbmd1bGFySlMgZXhwcmVzc2lvbiBldmFsdWF0aW5nIHRvIFVSTC4gSWYgdGhlIHNvdXJjZSBpcyBhIHN0cmluZyBjb25zdGFudCxcbiAqICAgICAgICAgICAgICAgICBtYWtlIHN1cmUgeW91IHdyYXAgaXQgaW4gKipzaW5nbGUqKiBxdW90ZXMsIGUuZy4gYHNyYz1cIidteVBhcnRpYWxUZW1wbGF0ZS5odG1sJ1wiYC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb25sb2FkIEV4cHJlc3Npb24gdG8gZXZhbHVhdGUgd2hlbiBhIG5ldyBwYXJ0aWFsIGlzIGxvYWRlZC5cbiAqICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgICAgICAgICAgICAgICAgKipOb3RlOioqIFdoZW4gdXNpbmcgb25sb2FkIG9uIFNWRyBlbGVtZW50cyBpbiBJRTExLCB0aGUgYnJvd3NlciB3aWxsIHRyeSB0byBjYWxsXG4gKiAgICAgICAgICAgICAgICAgIGEgZnVuY3Rpb24gd2l0aCB0aGUgbmFtZSBvbiB0aGUgd2luZG93IGVsZW1lbnQsIHdoaWNoIHdpbGwgdXN1YWxseSB0aHJvdyBhXG4gKiAgICAgICAgICAgICAgICAgIFwiZnVuY3Rpb24gaXMgdW5kZWZpbmVkXCIgZXJyb3IuIFRvIGZpeCB0aGlzLCB5b3UgY2FuIGluc3RlYWQgdXNlIGBkYXRhLW9ubG9hZGAgb3IgYVxuICogICAgICAgICAgICAgICAgICBkaWZmZXJlbnQgZm9ybSB0aGF0IHtAbGluayBndWlkZS9kaXJlY3RpdmUjbm9ybWFsaXphdGlvbiBtYXRjaGVzfSBgb25sb2FkYC5cbiAqICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAqXG4gKiBAcGFyYW0ge3N0cmluZz19IGF1dG9zY3JvbGwgV2hldGhlciBgbmdJbmNsdWRlYCBzaG91bGQgY2FsbCB7QGxpbmsgbmcuJGFuY2hvclNjcm9sbFxuICogICAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsfSB0byBzY3JvbGwgdGhlIHZpZXdwb3J0IGFmdGVyIHRoZSBjb250ZW50IGlzIGxvYWRlZC5cbiAqXG4gKiAgICAgICAgICAgICAgICAgIC0gSWYgdGhlIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LCBkaXNhYmxlIHNjcm9sbGluZy5cbiAqICAgICAgICAgICAgICAgICAgLSBJZiB0aGUgYXR0cmlidXRlIGlzIHNldCB3aXRob3V0IHZhbHVlLCBlbmFibGUgc2Nyb2xsaW5nLlxuICogICAgICAgICAgICAgICAgICAtIE90aGVyd2lzZSBlbmFibGUgc2Nyb2xsaW5nIG9ubHkgaWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydXRoeSB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICA8ZXhhbXBsZSBtb2R1bGU9XCJpbmNsdWRlRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1pbmNsdWRlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwidGVtcGxhdGVcIiBuZy1vcHRpb25zPVwidC5uYW1lIGZvciB0IGluIHRlbXBsYXRlc1wiPlxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+KGJsYW5rKTwvb3B0aW9uPlxuICAgICAgIDwvc2VsZWN0PlxuICAgICAgIHVybCBvZiB0aGUgdGVtcGxhdGU6IDxjb2RlPnt7dGVtcGxhdGUudXJsfX08L2NvZGU+XG4gICAgICAgPGhyLz5cbiAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGUtYW5pbWF0ZS1jb250YWluZXJcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZS1hbmltYXRlXCIgbmctaW5jbHVkZT1cInRlbXBsYXRlLnVybFwiPjwvZGl2PlxuICAgICAgIDwvZGl2PlxuICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2luY2x1ZGVFeGFtcGxlJywgWyduZ0FuaW1hdGUnXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGVzID1cbiAgICAgICAgICAgIFt7IG5hbWU6ICd0ZW1wbGF0ZTEuaHRtbCcsIHVybDogJ3RlbXBsYXRlMS5odG1sJ30sXG4gICAgICAgICAgICAgeyBuYW1lOiAndGVtcGxhdGUyLmh0bWwnLCB1cmw6ICd0ZW1wbGF0ZTIuaHRtbCd9XTtcbiAgICAgICAgICAkc2NvcGUudGVtcGxhdGUgPSAkc2NvcGUudGVtcGxhdGVzWzBdO1xuICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwidGVtcGxhdGUxLmh0bWxcIj5cbiAgICAgIENvbnRlbnQgb2YgdGVtcGxhdGUxLmh0bWxcbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInRlbXBsYXRlMi5odG1sXCI+XG4gICAgICBDb250ZW50IG9mIHRlbXBsYXRlMi5odG1sXG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgLnNsaWRlLWFuaW1hdGUtY29udGFpbmVyIHtcbiAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XG4gICAgICAgIGJhY2tncm91bmQ6d2hpdGU7XG4gICAgICAgIGJvcmRlcjoxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGhlaWdodDo0MHB4O1xuICAgICAgICBvdmVyZmxvdzpoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlIHtcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1lbnRlciwgLnNsaWRlLWFuaW1hdGUubmctbGVhdmUge1xuICAgICAgICB0cmFuc2l0aW9uOmFsbCBjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApIDAuNXM7XG5cbiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgIHRvcDowO1xuICAgICAgICBsZWZ0OjA7XG4gICAgICAgIHJpZ2h0OjA7XG4gICAgICAgIGJvdHRvbTowO1xuICAgICAgICBkaXNwbGF5OmJsb2NrO1xuICAgICAgICBwYWRkaW5nOjEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWVudGVyIHtcbiAgICAgICAgdG9wOi01MHB4O1xuICAgICAgfVxuICAgICAgLnNsaWRlLWFuaW1hdGUubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG5cbiAgICAgIC5zbGlkZS1hbmltYXRlLm5nLWxlYXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG4gICAgICAuc2xpZGUtYW5pbWF0ZS5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUge1xuICAgICAgICB0b3A6NTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgdmFyIHRlbXBsYXRlU2VsZWN0ID0gZWxlbWVudChieS5tb2RlbCgndGVtcGxhdGUnKSk7XG4gICAgICB2YXIgaW5jbHVkZUVsZW0gPSBlbGVtZW50KGJ5LmNzcygnW25nLWluY2x1ZGVdJykpO1xuXG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUxLmh0bWwnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KGluY2x1ZGVFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0ZW1wbGF0ZTEuaHRtbC8pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbG9hZCB0ZW1wbGF0ZTIuaHRtbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgICAgLy8gRmlyZWZveCBjYW4ndCBoYW5kbGUgdXNpbmcgc2VsZWN0c1xuICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9wcm90cmFjdG9yL2lzc3Vlcy80ODBcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uZ2V0VGV4dCgpKS50b01hdGNoKC9Db250ZW50IG9mIHRlbXBsYXRlMi5odG1sLyk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3Nob3VsZCBjaGFuZ2UgdG8gYmxhbmsnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGJyb3dzZXIucGFyYW1zLmJyb3dzZXIgPT09ICdmaXJlZm94Jykge1xuICAgICAgICAgIC8vIEZpcmVmb3ggY2FuJ3QgaGFuZGxlIHVzaW5nIHNlbGVjdHNcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuY2xpY2soKTtcbiAgICAgICAgdGVtcGxhdGVTZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgwKS5jbGljaygpO1xuICAgICAgICBleHBlY3QoaW5jbHVkZUVsZW0uaXNQcmVzZW50KCkpLnRvQmUoZmFsc2UpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cblxuXG4vKipcbiAqIEBuZ2RvYyBldmVudFxuICogQG5hbWUgbmdJbmNsdWRlIyRpbmNsdWRlQ29udGVudFJlcXVlc3RlZFxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBzY29wZSBuZ0luY2x1ZGUgd2FzIGRlY2xhcmVkIGluXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgZXZlcnkgdGltZSB0aGUgbmdJbmNsdWRlIGNvbnRlbnQgaXMgcmVxdWVzdGVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgVVJMIG9mIGNvbnRlbnQgdG8gbG9hZC5cbiAqL1xuXG5cbi8qKlxuICogQG5nZG9jIGV2ZW50XG4gKiBAbmFtZSBuZ0luY2x1ZGUjJGluY2x1ZGVDb250ZW50TG9hZGVkXG4gKiBAZXZlbnRUeXBlIGVtaXQgb24gdGhlIGN1cnJlbnQgbmdJbmNsdWRlIHNjb3BlXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgZXZlcnkgdGltZSB0aGUgbmdJbmNsdWRlIGNvbnRlbnQgaXMgcmVsb2FkZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFuZ3VsYXJFdmVudCBTeW50aGV0aWMgZXZlbnQgb2JqZWN0LlxuICogQHBhcmFtIHtTdHJpbmd9IHNyYyBVUkwgb2YgY29udGVudCB0byBsb2FkLlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgZXZlbnRcbiAqIEBuYW1lIG5nSW5jbHVkZSMkaW5jbHVkZUNvbnRlbnRFcnJvclxuICogQGV2ZW50VHlwZSBlbWl0IG9uIHRoZSBzY29wZSBuZ0luY2x1ZGUgd2FzIGRlY2xhcmVkIGluXG4gKiBAZGVzY3JpcHRpb25cbiAqIEVtaXR0ZWQgd2hlbiBhIHRlbXBsYXRlIEhUVFAgcmVxdWVzdCB5aWVsZHMgYW4gZXJyb25lb3VzIHJlc3BvbnNlIChzdGF0dXMgPCAyMDAgfHwgc3RhdHVzID4gMjk5KVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbmd1bGFyRXZlbnQgU3ludGhldGljIGV2ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBzcmMgVVJMIG9mIGNvbnRlbnQgdG8gbG9hZC5cbiAqL1xudmFyIG5nSW5jbHVkZURpcmVjdGl2ZSA9IFsnJHRlbXBsYXRlUmVxdWVzdCcsICckYW5jaG9yU2Nyb2xsJywgJyRhbmltYXRlJyxcbiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCR0ZW1wbGF0ZVJlcXVlc3QsICAgJGFuY2hvclNjcm9sbCwgICAkYW5pbWF0ZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICBwcmlvcml0eTogNDAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6ICdlbGVtZW50JyxcbiAgICBjb250cm9sbGVyOiBhbmd1bGFyLm5vb3AsXG4gICAgY29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIHNyY0V4cCA9IGF0dHIubmdJbmNsdWRlIHx8IGF0dHIuc3JjLFxuICAgICAgICAgIG9ubG9hZEV4cCA9IGF0dHIub25sb2FkIHx8ICcnLFxuICAgICAgICAgIGF1dG9TY3JvbGxFeHAgPSBhdHRyLmF1dG9zY3JvbGw7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuICAgICAgICB2YXIgY2hhbmdlQ291bnRlciA9IDAsXG4gICAgICAgICAgICBjdXJyZW50U2NvcGUsXG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQsXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudDtcblxuICAgICAgICB2YXIgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZGVzdHJveSgpO1xuICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShjdXJyZW50RWxlbWVudCkuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlKSBwcmV2aW91c0VsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBjdXJyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NvcGUuJHdhdGNoKHNyY0V4cCwgZnVuY3Rpb24gbmdJbmNsdWRlV2F0Y2hBY3Rpb24oc3JjKSB7XG4gICAgICAgICAgdmFyIGFmdGVyQW5pbWF0aW9uID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSAhPT0gZmFsc2UgJiYgaXNEZWZpbmVkKGF1dG9TY3JvbGxFeHApICYmXG4gICAgICAgICAgICAgICghYXV0b1Njcm9sbEV4cCB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkpIHtcbiAgICAgICAgICAgICAgICAkYW5jaG9yU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB2YXIgdGhpc0NoYW5nZUlkID0gKytjaGFuZ2VDb3VudGVyO1xuXG4gICAgICAgICAgaWYgKHNyYykge1xuICAgICAgICAgICAgLy9zZXQgdGhlIDJuZCBwYXJhbSB0byB0cnVlIHRvIGlnbm9yZSB0aGUgdGVtcGxhdGUgcmVxdWVzdCBlcnJvciBzbyB0aGF0IHRoZSBpbm5lclxuICAgICAgICAgICAgLy9jb250ZW50cyBhbmQgc2NvcGUgY2FuIGJlIGNsZWFuZWQgdXAuXG4gICAgICAgICAgICAkdGVtcGxhdGVSZXF1ZXN0KHNyYywgdHJ1ZSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBpZiAoc2NvcGUuJCRkZXN0cm95ZWQpIHJldHVybjtcblxuICAgICAgICAgICAgICBpZiAodGhpc0NoYW5nZUlkICE9PSBjaGFuZ2VDb3VudGVyKSByZXR1cm47XG4gICAgICAgICAgICAgIHZhciBuZXdTY29wZSA9IHNjb3BlLiRuZXcoKTtcbiAgICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IHJlc3BvbnNlO1xuXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFRoaXMgd2lsbCBhbHNvIGxpbmsgYWxsIGNoaWxkcmVuIG9mIG5nLWluY2x1ZGUgdGhhdCB3ZXJlIGNvbnRhaW5lZCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgICAgICAgICAgLy8gaHRtbC4gSWYgdGhhdCBjb250ZW50IGNvbnRhaW5zIGNvbnRyb2xsZXJzLCAuLi4gdGhleSBjb3VsZCBwb2xsdXRlL2NoYW5nZSB0aGUgc2NvcGUuXG4gICAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHVzaW5nIG5nLWluY2x1ZGUgb24gYW4gZWxlbWVudCB3aXRoIGFkZGl0aW9uYWwgY29udGVudCBkb2VzIG5vdCBtYWtlIHNlbnNlLi4uXG4gICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbid0IHJlbW92ZSB0aGVtIGluIHRoZSBjbG9uZUF0dGNoRm4gb2YgJHRyYW5zY2x1ZGUgYXMgdGhhdFxuICAgICAgICAgICAgICAvLyBmdW5jdGlvbiBpcyBjYWxsZWQgYmVmb3JlIGxpbmtpbmcgdGhlIGNvbnRlbnQsIHdoaWNoIHdvdWxkIGFwcGx5IGNoaWxkXG4gICAgICAgICAgICAgIC8vIGRpcmVjdGl2ZXMgdG8gbm9uIGV4aXN0aW5nIGVsZW1lbnRzLlxuICAgICAgICAgICAgICB2YXIgY2xvbmUgPSAkdHJhbnNjbHVkZShuZXdTY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgJGFuaW1hdGUuZW50ZXIoY2xvbmUsIG51bGwsICRlbGVtZW50KS5kb25lKGFmdGVyQW5pbWF0aW9uKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbmV3U2NvcGU7XG4gICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY2xvbmU7XG5cbiAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRlbWl0KCckaW5jbHVkZUNvbnRlbnRMb2FkZWQnLCBzcmMpO1xuICAgICAgICAgICAgICBzY29wZS4kZXZhbChvbmxvYWRFeHApO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmIChzY29wZS4kJGRlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIGlmICh0aGlzQ2hhbmdlSWQgPT09IGNoYW5nZUNvdW50ZXIpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdEluY2x1ZGVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJyRpbmNsdWRlQ29udGVudEVycm9yJywgc3JjKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzY29wZS4kZW1pdCgnJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkJywgc3JjKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xlYW51cExhc3RJbmNsdWRlQ29udGVudCgpO1xuICAgICAgICAgICAgY3RybC50ZW1wbGF0ZSA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV07XG5cbi8vIFRoaXMgZGlyZWN0aXZlIGlzIGNhbGxlZCBkdXJpbmcgdGhlICR0cmFuc2NsdWRlIGNhbGwgb2YgdGhlIGZpcnN0IGBuZ0luY2x1ZGVgIGRpcmVjdGl2ZS5cbi8vIEl0IHdpbGwgcmVwbGFjZSBhbmQgY29tcGlsZSB0aGUgY29udGVudCBvZiB0aGUgZWxlbWVudCB3aXRoIHRoZSBsb2FkZWQgdGVtcGxhdGUuXG4vLyBXZSBuZWVkIHRoaXMgZGlyZWN0aXZlIHNvIHRoYXQgdGhlIGVsZW1lbnQgY29udGVudCBpcyBhbHJlYWR5IGZpbGxlZCB3aGVuXG4vLyB0aGUgbGluayBmdW5jdGlvbiBvZiBhbm90aGVyIGRpcmVjdGl2ZSBvbiB0aGUgc2FtZSBlbGVtZW50IGFzIG5nSW5jbHVkZVxuLy8gaXMgY2FsbGVkLlxudmFyIG5nSW5jbHVkZUZpbGxDb250ZW50RGlyZWN0aXZlID0gWyckY29tcGlsZScsXG4gIGZ1bmN0aW9uKCRjb21waWxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRUNBJyxcbiAgICAgIHByaW9yaXR5OiAtNDAwLFxuICAgICAgcmVxdWlyZTogJ25nSW5jbHVkZScsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsKSB7XG4gICAgICAgIGlmICh0b1N0cmluZy5jYWxsKCRlbGVtZW50WzBdKS5tYXRjaCgvU1ZHLykpIHtcbiAgICAgICAgICAvLyBXZWJLaXQ6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzU2OTggLS0tIFNWRyBlbGVtZW50cyBkbyBub3RcbiAgICAgICAgICAvLyBzdXBwb3J0IGlubmVySFRNTCwgc28gZGV0ZWN0IHRoaXMgaGVyZSBhbmQgdHJ5IHRvIGdlbmVyYXRlIHRoZSBjb250ZW50c1xuICAgICAgICAgIC8vIHNwZWNpYWxseS5cbiAgICAgICAgICAkZWxlbWVudC5lbXB0eSgpO1xuICAgICAgICAgICRjb21waWxlKGpxTGl0ZUJ1aWxkRnJhZ21lbnQoY3RybC50ZW1wbGF0ZSwgd2luZG93LmRvY3VtZW50KS5jaGlsZE5vZGVzKShzY29wZSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gbmFtZXNwYWNlQWRhcHRlZENsb25lKGNsb25lKSB7XG4gICAgICAgICAgICAkZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xuICAgICAgICAgIH0sIHtmdXR1cmVQYXJlbnRFbGVtZW50OiAkZWxlbWVudH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRlbGVtZW50Lmh0bWwoY3RybC50ZW1wbGF0ZSk7XG4gICAgICAgICRjb21waWxlKCRlbGVtZW50LmNvbnRlbnRzKCkpKHNjb3BlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ0luaXRcbiAqIEByZXN0cmljdCBBQ1xuICogQHByaW9yaXR5IDQ1MFxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ0luaXQge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gZXZhbC5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdJbml0YCBkaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBldmFsdWF0ZSBhbiBleHByZXNzaW9uIGluIHRoZVxuICogY3VycmVudCBzY29wZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyXCI+XG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgYWJ1c2VkIHRvIGFkZCB1bm5lY2Vzc2FyeSBhbW91bnRzIG9mIGxvZ2ljIGludG8geW91ciB0ZW1wbGF0ZXMuXG4gKiBUaGVyZSBhcmUgb25seSBhIGZldyBhcHByb3ByaWF0ZSB1c2VzIG9mIGBuZ0luaXRgOlxuICogPHVsPlxuICogICA8bGk+YWxpYXNpbmcgc3BlY2lhbCBwcm9wZXJ0aWVzIG9mIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgYG5nUmVwZWF0YH0sXG4gKiAgICAgYXMgc2VlbiBpbiB0aGUgZGVtbyBiZWxvdy48L2xpPlxuICogICA8bGk+aW5pdGlhbGl6aW5nIGRhdGEgZHVyaW5nIGRldmVsb3BtZW50LCBvciBmb3IgZXhhbXBsZXMsIGFzIHNlZW4gdGhyb3VnaG91dCB0aGVzZSBkb2NzLjwvbGk+XG4gKiAgIDxsaT5pbmplY3RpbmcgZGF0YSB2aWEgc2VydmVyIHNpZGUgc2NyaXB0aW5nLjwvbGk+XG4gKiA8L3VsPlxuICpcbiAqIEJlc2lkZXMgdGhlc2UgZmV3IGNhc2VzLCB5b3Ugc2hvdWxkIHVzZSB7QGxpbmsgZ3VpZGUvY29tcG9uZW50IENvbXBvbmVudHN9IG9yXG4gKiB7QGxpbmsgZ3VpZGUvY29udHJvbGxlciBDb250cm9sbGVyc30gcmF0aGVyIHRoYW4gYG5nSW5pdGAgdG8gaW5pdGlhbGl6ZSB2YWx1ZXMgb24gYSBzY29wZS5cbiAqIDwvZGl2PlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiAqKk5vdGUqKjogSWYgeW91IGhhdmUgYXNzaWdubWVudCBpbiBgbmdJbml0YCBhbG9uZyB3aXRoIGEge0BsaW5rIG5nLiRmaWx0ZXIgYGZpbHRlcmB9LCBtYWtlXG4gKiBzdXJlIHlvdSBoYXZlIHBhcmVudGhlc2VzIHRvIGVuc3VyZSBjb3JyZWN0IG9wZXJhdG9yIHByZWNlZGVuY2U6XG4gKiA8cHJlIGNsYXNzPVwicHJldHR5cHJpbnRcIj5cbiAqIGA8ZGl2IG5nLWluaXQ9XCJ0ZXN0MSA9ICgkaW5kZXggfCB0b1N0cmluZylcIj48L2Rpdj5gXG4gKiA8L3ByZT5cbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJpbml0RXhhbXBsZVwiIG5hbWU9XCJuZy1pbml0XCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICA8c2NyaXB0PlxuICAgICBhbmd1bGFyLm1vZHVsZSgnaW5pdEV4YW1wbGUnLCBbXSlcbiAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgJHNjb3BlLmxpc3QgPSBbWydhJywgJ2InXSwgWydjJywgJ2QnXV07XG4gICAgICAgfV0pO1xuICAgPC9zY3JpcHQ+XG4gICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICA8ZGl2IG5nLXJlcGVhdD1cImlubmVyTGlzdCBpbiBsaXN0XCIgbmctaW5pdD1cIm91dGVySW5kZXggPSAkaW5kZXhcIj5cbiAgICAgICA8ZGl2IG5nLXJlcGVhdD1cInZhbHVlIGluIGlubmVyTGlzdFwiIG5nLWluaXQ9XCJpbm5lckluZGV4ID0gJGluZGV4XCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJleGFtcGxlLWluaXRcIj5saXN0WyB7e291dGVySW5kZXh9fSBdWyB7e2lubmVySW5kZXh9fSBdID0ge3t2YWx1ZX19Ozwvc3Bhbj5cbiAgICAgICA8L2Rpdj5cbiAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgaXQoJ3Nob3VsZCBhbGlhcyBpbmRleCBwb3NpdGlvbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIHZhciBlbGVtZW50cyA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnLmV4YW1wbGUtaW5pdCcpKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMCkuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAwIF1bIDAgXSA9IGE7Jyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudHMuZ2V0KDEpLmdldFRleHQoKSkudG9CZSgnbGlzdFsgMCBdWyAxIF0gPSBiOycpO1xuICAgICAgICAgZXhwZWN0KGVsZW1lbnRzLmdldCgyKS5nZXRUZXh0KCkpLnRvQmUoJ2xpc3RbIDEgXVsgMCBdID0gYzsnKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50cy5nZXQoMykuZ2V0VGV4dCgpKS50b0JlKCdsaXN0WyAxIF1bIDEgXSA9IGQ7Jyk7XG4gICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nSW5pdERpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHtcbiAgcHJpb3JpdHk6IDQ1MCxcbiAgY29tcGlsZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByZTogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIHNjb3BlLiRldmFsKGF0dHJzLm5nSW5pdCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdMaXN0XG4gKiBAcmVzdHJpY3QgQVxuICogQHByaW9yaXR5IDEwMFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdMaXN0IG9wdGlvbmFsIGRlbGltaXRlciB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHNwbGl0IHRoZSB2YWx1ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRleHQgaW5wdXQgdGhhdCBjb252ZXJ0cyBiZXR3ZWVuIGEgZGVsaW1pdGVkIHN0cmluZyBhbmQgYW4gYXJyYXkgb2Ygc3RyaW5ncy4gVGhlIGRlZmF1bHRcbiAqIGRlbGltaXRlciBpcyBhIGNvbW1hIGZvbGxvd2VkIGJ5IGEgc3BhY2UgLSBlcXVpdmFsZW50IHRvIGBuZy1saXN0PVwiLCBcImAuIFlvdSBjYW4gc3BlY2lmeSBhIGN1c3RvbVxuICogZGVsaW1pdGVyIGFzIHRoZSB2YWx1ZSBvZiB0aGUgYG5nTGlzdGAgYXR0cmlidXRlIC0gZm9yIGV4YW1wbGUsIGBuZy1saXN0PVwiIHwgXCJgLlxuICpcbiAqIFRoZSBiZWhhdmlvdXIgb2YgdGhlIGRpcmVjdGl2ZSBpcyBhZmZlY3RlZCBieSB0aGUgdXNlIG9mIHRoZSBgbmdUcmltYCBhdHRyaWJ1dGUuXG4gKiAqIElmIGBuZ1RyaW1gIGlzIHNldCB0byBgXCJmYWxzZVwiYCB0aGVuIHdoaXRlc3BhY2UgYXJvdW5kIGJvdGggdGhlIHNlcGFyYXRvciBhbmQgZWFjaFxuICogICBsaXN0IGl0ZW0gaXMgcmVzcGVjdGVkLiBUaGlzIGltcGxpZXMgdGhhdCB0aGUgdXNlciBvZiB0aGUgZGlyZWN0aXZlIGlzIHJlc3BvbnNpYmxlIGZvclxuICogICBkZWFsaW5nIHdpdGggd2hpdGVzcGFjZSBidXQgYWxzbyBhbGxvd3MgeW91IHRvIHVzZSB3aGl0ZXNwYWNlIGFzIGEgZGVsaW1pdGVyLCBzdWNoIGFzIGFcbiAqICAgdGFiIG9yIG5ld2xpbmUgY2hhcmFjdGVyLlxuICogKiBPdGhlcndpc2Ugd2hpdGVzcGFjZSBhcm91bmQgdGhlIGRlbGltaXRlciBpcyBpZ25vcmVkIHdoZW4gc3BsaXR0aW5nIChhbHRob3VnaCBpdCBpcyByZXNwZWN0ZWRcbiAqICAgd2hlbiBqb2luaW5nIHRoZSBsaXN0IGl0ZW1zIGJhY2sgdG9nZXRoZXIpIGFuZCB3aGl0ZXNwYWNlIGFyb3VuZCBlYWNoIGxpc3QgaXRlbSBpcyBzdHJpcHBlZFxuICogICBiZWZvcmUgaXQgaXMgYWRkZWQgdG8gdGhlIG1vZGVsLlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgVmFsaWRhdGlvblxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0xpc3QtZGlyZWN0aXZlXCIgbW9kdWxlPVwibGlzdEV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgICBhbmd1bGFyLm1vZHVsZSgnbGlzdEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgJHNjb3BlLm5hbWVzID0gWydtb3JwaGV1cycsICduZW8nLCAndHJpbml0eSddO1xuICogICAgICAgIH1dKTtcbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiIG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICA8bGFiZWw+TGlzdDogPGlucHV0IG5hbWU9XCJuYW1lc0lucHV0XCIgbmctbW9kZWw9XCJuYW1lc1wiIG5nLWxpc3QgcmVxdWlyZWQ+PC9sYWJlbD5cbiAqICAgICAgPHNwYW4gcm9sZT1cImFsZXJ0XCI+XG4gKiAgICAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLXNob3c9XCJteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3IucmVxdWlyZWRcIj5cbiAqICAgICAgICBSZXF1aXJlZCE8L3NwYW4+XG4gKiAgICAgIDwvc3Bhbj5cbiAqICAgICAgPGJyPlxuICogICAgICA8dHQ+bmFtZXMgPSB7e25hbWVzfX08L3R0Pjxici8+XG4gKiAgICAgIDx0dD5teUZvcm0ubmFtZXNJbnB1dC4kdmFsaWQgPSB7e215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZH19PC90dD48YnIvPlxuICogICAgICA8dHQ+bXlGb3JtLm5hbWVzSW5wdXQuJGVycm9yID0ge3tteUZvcm0ubmFtZXNJbnB1dC4kZXJyb3J9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS4kdmFsaWQgPSB7e215Rm9ybS4kdmFsaWR9fTwvdHQ+PGJyLz5cbiAqICAgICAgPHR0Pm15Rm9ybS4kZXJyb3IucmVxdWlyZWQgPSB7eyEhbXlGb3JtLiRlcnJvci5yZXF1aXJlZH19PC90dD48YnIvPlxuICogICAgIDwvZm9ybT5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgdmFyIGxpc3RJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ25hbWVzJykpO1xuICogICAgIHZhciBuYW1lcyA9IGVsZW1lbnQoYnkuZXhhY3RCaW5kaW5nKCduYW1lcycpKTtcbiAqICAgICB2YXIgdmFsaWQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ215Rm9ybS5uYW1lc0lucHV0LiR2YWxpZCcpKTtcbiAqICAgICB2YXIgZXJyb3IgPSBlbGVtZW50KGJ5LmNzcygnc3Bhbi5lcnJvcicpKTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHRvIG1vZGVsJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBleHBlY3QobmFtZXMuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1tcIm1vcnBoZXVzXCIsXCJuZW9cIixcInRyaW5pdHlcIl0nKTtcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbigndHJ1ZScpO1xuICogICAgICAgZXhwZWN0KGVycm9yLmdldENzc1ZhbHVlKCdkaXNwbGF5JykpLnRvQmUoJ25vbmUnKTtcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBiZSBpbnZhbGlkIGlmIGVtcHR5JywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBsaXN0SW5wdXQuY2xlYXIoKTtcbiAqICAgICAgIGxpc3RJbnB1dC5zZW5kS2V5cygnJyk7XG4gKlxuICogICAgICAgZXhwZWN0KG5hbWVzLmdldFRleHQoKSkudG9Db250YWluKCcnKTtcbiAqICAgICAgIGV4cGVjdCh2YWxpZC5nZXRUZXh0KCkpLnRvQ29udGFpbignZmFsc2UnKTtcbiAqICAgICAgIGV4cGVjdChlcnJvci5nZXRDc3NWYWx1ZSgnZGlzcGxheScpKS5ub3QudG9CZSgnbm9uZScpO1xuICogICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTcGxpdHRpbmcgb24gbmV3bGluZVxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ0xpc3QtZGlyZWN0aXZlLW5ld2xpbmVzXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJsaXN0XCIgbmctbGlzdD1cIiYjMTA7XCIgbmctdHJpbT1cImZhbHNlXCI+PC90ZXh0YXJlYT5cbiAqICAgIDxwcmU+e3sgbGlzdCB8IGpzb24gfX08L3ByZT5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgaXQoXCJzaG91bGQgc3BsaXQgdGhlIHRleHQgYnkgbmV3bGluZXNcIiwgZnVuY3Rpb24oKSB7XG4gKiAgICAgICB2YXIgbGlzdElucHV0ID0gZWxlbWVudChieS5tb2RlbCgnbGlzdCcpKTtcbiAqICAgICAgIHZhciBvdXRwdXQgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ2xpc3QgfCBqc29uJykpO1xuICogICAgICAgbGlzdElucHV0LnNlbmRLZXlzKCdhYmNcXG5kZWZcXG5naGknKTtcbiAqICAgICAgIGV4cGVjdChvdXRwdXQuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ1tcXG4gIFwiYWJjXCIsXFxuICBcImRlZlwiLFxcbiAgXCJnaGlcIlxcbl0nKTtcbiAqICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqL1xudmFyIG5nTGlzdERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcHJpb3JpdHk6IDEwMCxcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcbiAgICAgIHZhciBuZ0xpc3QgPSBhdHRyLm5nTGlzdCB8fCAnLCAnO1xuICAgICAgdmFyIHRyaW1WYWx1ZXMgPSBhdHRyLm5nVHJpbSAhPT0gJ2ZhbHNlJztcbiAgICAgIHZhciBzZXBhcmF0b3IgPSB0cmltVmFsdWVzID8gdHJpbShuZ0xpc3QpIDogbmdMaXN0O1xuXG4gICAgICB2YXIgcGFyc2UgPSBmdW5jdGlvbih2aWV3VmFsdWUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHZpZXdWYWx1ZSBpcyBpbnZhbGlkIChzYXkgcmVxdWlyZWQgYnV0IGVtcHR5KSBpdCB3aWxsIGJlIGB1bmRlZmluZWRgXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh2aWV3VmFsdWUpKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGxpc3QgPSBbXTtcblxuICAgICAgICBpZiAodmlld1ZhbHVlKSB7XG4gICAgICAgICAgZm9yRWFjaCh2aWV3VmFsdWUuc3BsaXQoc2VwYXJhdG9yKSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSkgbGlzdC5wdXNoKHRyaW1WYWx1ZXMgPyB0cmltKHZhbHVlKSA6IHZhbHVlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgfTtcblxuICAgICAgY3RybC4kcGFyc2Vycy5wdXNoKHBhcnNlKTtcbiAgICAgIGN0cmwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuam9pbihuZ0xpc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPdmVycmlkZSB0aGUgc3RhbmRhcmQgJGlzRW1wdHkgYmVjYXVzZSBhbiBlbXB0eSBhcnJheSBtZWFucyB0aGUgaW5wdXQgaXMgZW1wdHkuXG4gICAgICBjdHJsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCAhdmFsdWUubGVuZ3RoO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgVkFMSURfQ0xBU1M6IHRydWUsXG4gIElOVkFMSURfQ0xBU1M6IHRydWUsXG4gIFBSSVNUSU5FX0NMQVNTOiB0cnVlLFxuICBESVJUWV9DTEFTUzogdHJ1ZSxcbiAgVU5UT1VDSEVEX0NMQVNTOiB0cnVlLFxuICBUT1VDSEVEX0NMQVNTOiB0cnVlLFxuICBQRU5ESU5HX0NMQVNTOiB0cnVlLFxuICBhZGRTZXRWYWxpZGl0eU1ldGhvZDogdHJ1ZSxcbiAgc2V0dXBWYWxpZGl0eTogdHJ1ZSxcbiAgZGVmYXVsdE1vZGVsT3B0aW9uczogZmFsc2VcbiovXG5cblxudmFyIFZBTElEX0NMQVNTID0gJ25nLXZhbGlkJyxcbiAgICBJTlZBTElEX0NMQVNTID0gJ25nLWludmFsaWQnLFxuICAgIFBSSVNUSU5FX0NMQVNTID0gJ25nLXByaXN0aW5lJyxcbiAgICBESVJUWV9DTEFTUyA9ICduZy1kaXJ0eScsXG4gICAgVU5UT1VDSEVEX0NMQVNTID0gJ25nLXVudG91Y2hlZCcsXG4gICAgVE9VQ0hFRF9DTEFTUyA9ICduZy10b3VjaGVkJyxcbiAgICBFTVBUWV9DTEFTUyA9ICduZy1lbXB0eScsXG4gICAgTk9UX0VNUFRZX0NMQVNTID0gJ25nLW5vdC1lbXB0eSc7XG5cbnZhciBuZ01vZGVsTWluRXJyID0gbWluRXJyKCduZ01vZGVsJyk7XG5cbi8qKlxuICogQG5nZG9jIHR5cGVcbiAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJcbiAqIEBwcm9wZXJ0eSB7Kn0gJHZpZXdWYWx1ZSBUaGUgYWN0dWFsIHZhbHVlIGZyb20gdGhlIGNvbnRyb2wncyB2aWV3LiBGb3IgYGlucHV0YCBlbGVtZW50cywgdGhpcyBpcyBhXG4gKiBTdHJpbmcuIFNlZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkc2V0Vmlld1ZhbHVlfSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgd2hlbiB0aGUgJHZpZXdWYWx1ZVxuICogaXMgc2V0LlxuICpcbiAqIEBwcm9wZXJ0eSB7Kn0gJG1vZGVsVmFsdWUgVGhlIHZhbHVlIGluIHRoZSBtb2RlbCB0aGF0IHRoZSBjb250cm9sIGlzIGJvdW5kIHRvLlxuICpcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJHBhcnNlcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUsIGFzIGEgcGlwZWxpbmUsIHdoZW5ldmVyXG4gKiAgdGhlIGNvbnRyb2wgdXBkYXRlcyB0aGUgbmdNb2RlbENvbnRyb2xsZXIgd2l0aCBhIG5ldyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlXG4gICAgYCR2aWV3VmFsdWVgfSBmcm9tIHRoZSBET00sIHVzdWFsbHkgdmlhIHVzZXIgaW5wdXQuXG4gICAgU2VlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWaWV3VmFsdWUgYCRzZXRWaWV3VmFsdWUoKWB9IGZvciBhIGRldGFpbGVkIGxpZmVjeWNsZSBleHBsYW5hdGlvbi5cbiAgICBOb3RlIHRoYXQgdGhlIGAkcGFyc2Vyc2AgYXJlIG5vdCBjYWxsZWQgd2hlbiB0aGUgYm91bmQgbmdNb2RlbCBleHByZXNzaW9uIGNoYW5nZXMgcHJvZ3JhbW1hdGljYWxseS5cblxuICBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gYXJyYXkgb3JkZXIsIGVhY2ggcGFzc2luZ1xuICAgIGl0cyByZXR1cm4gdmFsdWUgdGhyb3VnaCB0byB0aGUgbmV4dC4gVGhlIGxhc3QgcmV0dXJuIHZhbHVlIGlzIGZvcndhcmRlZCB0byB0aGVcbiAgICB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgJHZhbGlkYXRvcnNgfSBjb2xsZWN0aW9uLlxuXG4gIFBhcnNlcnMgYXJlIHVzZWQgdG8gc2FuaXRpemUgLyBjb252ZXJ0IHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlXG4gICAgYCR2aWV3VmFsdWVgfS5cblxuICBSZXR1cm5pbmcgYHVuZGVmaW5lZGAgZnJvbSBhIHBhcnNlciBtZWFucyBhIHBhcnNlIGVycm9yIG9jY3VycmVkLiBJbiB0aGF0IGNhc2UsXG4gICAgbm8ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYCR2YWxpZGF0b3JzYH0gd2lsbCBydW4gYW5kIHRoZSBgbmdNb2RlbGBcbiAgICB3aWxsIGJlIHNldCB0byBgdW5kZWZpbmVkYCB1bmxlc3Mge0BsaW5rIG5nTW9kZWxPcHRpb25zIGBuZ01vZGVsT3B0aW9ucy5hbGxvd0ludmFsaWRgfVxuICAgIGlzIHNldCB0byBgdHJ1ZWAuIFRoZSBwYXJzZSBlcnJvciBpcyBzdG9yZWQgaW4gYG5nTW9kZWwuJGVycm9yLnBhcnNlYC5cblxuICBUaGlzIHNpbXBsZSBleGFtcGxlIHNob3dzIGEgcGFyc2VyIHRoYXQgd291bGQgY29udmVydCB0ZXh0IGlucHV0IHZhbHVlIHRvIGxvd2VyY2FzZTpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBwYXJzZSh2YWx1ZSkge1xuICogICBpZiAodmFsdWUpIHtcbiAqICAgICByZXR1cm4gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAqICAgfVxuICogfVxuICogbmdNb2RlbENvbnRyb2xsZXIuJHBhcnNlcnMucHVzaChwYXJzZSk7XG4gKiBgYGBcblxuICpcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPEZ1bmN0aW9uPn0gJGZvcm1hdHRlcnMgQXJyYXkgb2YgZnVuY3Rpb25zIHRvIGV4ZWN1dGUsIGFzIGEgcGlwZWxpbmUsIHdoZW5ldmVyXG4gICAgdGhlIGJvdW5kIG5nTW9kZWwgZXhwcmVzc2lvbiBjaGFuZ2VzIHByb2dyYW1tYXRpY2FsbHkuIFRoZSBgJGZvcm1hdHRlcnNgIGFyZSBub3QgY2FsbGVkIHdoZW4gdGhlXG4gICAgdmFsdWUgb2YgdGhlIGNvbnRyb2wgaXMgY2hhbmdlZCBieSB1c2VyIGludGVyYWN0aW9uLlxuXG4gIEZvcm1hdHRlcnMgYXJlIHVzZWQgdG8gZm9ybWF0IC8gY29udmVydCB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJG1vZGVsVmFsdWVcbiAgICBgJG1vZGVsVmFsdWVgfSBmb3IgZGlzcGxheSBpbiB0aGUgY29udHJvbC5cblxuICBUaGUgZnVuY3Rpb25zIGFyZSBjYWxsZWQgaW4gcmV2ZXJzZSBhcnJheSBvcmRlciwgZWFjaCBwYXNzaW5nIHRoZSB2YWx1ZSB0aHJvdWdoIHRvIHRoZVxuICAgIG5leHQuIFRoZSBsYXN0IHJldHVybiB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBhY3R1YWwgRE9NIHZhbHVlLlxuXG4gIFRoaXMgc2ltcGxlIGV4YW1wbGUgc2hvd3MgYSBmb3JtYXR0ZXIgdGhhdCB3b3VsZCBjb252ZXJ0IHRoZSBtb2RlbCB2YWx1ZSB0byB1cHBlcmNhc2U6XG5cbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBmb3JtYXQodmFsdWUpIHtcbiAqICAgaWYgKHZhbHVlKSB7XG4gKiAgICAgcmV0dXJuIHZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gKiAgIH1cbiAqIH1cbiAqIG5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmb3JtYXQpO1xuICogYGBgXG4gKlxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSAkdmFsaWRhdG9ycyBBIGNvbGxlY3Rpb24gb2YgdmFsaWRhdG9ycyB0aGF0IGFyZSBhcHBsaWVkXG4gKiAgICAgIHdoZW5ldmVyIHRoZSBtb2RlbCB2YWx1ZSBjaGFuZ2VzLiBUaGUga2V5IHZhbHVlIHdpdGhpbiB0aGUgb2JqZWN0IHJlZmVycyB0byB0aGUgbmFtZSBvZiB0aGVcbiAqICAgICAgdmFsaWRhdG9yIHdoaWxlIHRoZSBmdW5jdGlvbiByZWZlcnMgdG8gdGhlIHZhbGlkYXRpb24gb3BlcmF0aW9uLiBUaGUgdmFsaWRhdGlvbiBvcGVyYXRpb24gaXNcbiAqICAgICAgcHJvdmlkZWQgd2l0aCB0aGUgbW9kZWwgdmFsdWUgYXMgYW4gYXJndW1lbnQgYW5kIG11c3QgcmV0dXJuIGEgdHJ1ZSBvciBmYWxzZSB2YWx1ZSBkZXBlbmRpbmdcbiAqICAgICAgb24gdGhlIHJlc3BvbnNlIG9mIHRoYXQgdmFsaWRhdGlvbi5cbiAqXG4gKiBgYGBqc1xuICogbmdNb2RlbC4kdmFsaWRhdG9ycy52YWxpZENoYXJhY3RlcnMgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAqICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gKiAgIHJldHVybiAvWzAtOV0rLy50ZXN0KHZhbHVlKSAmJlxuICogICAgICAgICAgL1thLXpdKy8udGVzdCh2YWx1ZSkgJiZcbiAqICAgICAgICAgIC9bQS1aXSsvLnRlc3QodmFsdWUpICYmXG4gKiAgICAgICAgICAvXFxXKy8udGVzdCh2YWx1ZSk7XG4gKiB9O1xuICogYGBgXG4gKlxuICogQHByb3BlcnR5IHtPYmplY3QuPHN0cmluZywgZnVuY3Rpb24+fSAkYXN5bmNWYWxpZGF0b3JzIEEgY29sbGVjdGlvbiBvZiB2YWxpZGF0aW9ucyB0aGF0IGFyZSBleHBlY3RlZCB0b1xuICogICAgICBwZXJmb3JtIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0aW9uIChlLmcuIGEgSFRUUCByZXF1ZXN0KS4gVGhlIHZhbGlkYXRpb24gZnVuY3Rpb24gdGhhdCBpcyBwcm92aWRlZFxuICogICAgICBpcyBleHBlY3RlZCB0byByZXR1cm4gYSBwcm9taXNlIHdoZW4gaXQgaXMgcnVuIGR1cmluZyB0aGUgbW9kZWwgdmFsaWRhdGlvbiBwcm9jZXNzLiBPbmNlIHRoZSBwcm9taXNlXG4gKiAgICAgIGlzIGRlbGl2ZXJlZCB0aGVuIHRoZSB2YWxpZGF0aW9uIHN0YXR1cyB3aWxsIGJlIHNldCB0byB0cnVlIHdoZW4gZnVsZmlsbGVkIGFuZCBmYWxzZSB3aGVuIHJlamVjdGVkLlxuICogICAgICBXaGVuIHRoZSBhc3luY2hyb25vdXMgdmFsaWRhdG9ycyBhcmUgdHJpZ2dlcmVkLCBlYWNoIG9mIHRoZSB2YWxpZGF0b3JzIHdpbGwgcnVuIGluIHBhcmFsbGVsIGFuZCB0aGUgbW9kZWxcbiAqICAgICAgdmFsdWUgd2lsbCBvbmx5IGJlIHVwZGF0ZWQgb25jZSBhbGwgdmFsaWRhdG9ycyBoYXZlIGJlZW4gZnVsZmlsbGVkLiBBcyBsb25nIGFzIGFuIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JcbiAqICAgICAgaXMgdW5mdWxmaWxsZWQsIGl0cyBrZXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgY29udHJvbGxlcnMgYCRwZW5kaW5nYCBwcm9wZXJ0eS4gQWxzbywgYWxsIGFzeW5jaHJvbm91cyB2YWxpZGF0b3JzXG4gKiAgICAgIHdpbGwgb25seSBydW4gb25jZSBhbGwgc3luY2hyb25vdXMgdmFsaWRhdG9ycyBoYXZlIHBhc3NlZC5cbiAqXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IGlmICRodHRwIGlzIHVzZWQgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdGhhdCB0aGUgc2VydmVyIHJldHVybnMgYSBzdWNjZXNzIEhUVFAgcmVzcG9uc2UgY29kZVxuICogaW4gb3JkZXIgdG8gZnVsZmlsbCB0aGUgdmFsaWRhdGlvbiBhbmQgYSBzdGF0dXMgbGV2ZWwgb2YgYDR4eGAgaW4gb3JkZXIgdG8gcmVqZWN0IHRoZSB2YWxpZGF0aW9uLlxuICpcbiAqIGBgYGpzXG4gKiBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnMudW5pcXVlVXNlcm5hbWUgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAqICAgdmFyIHZhbHVlID0gbW9kZWxWYWx1ZSB8fCB2aWV3VmFsdWU7XG4gKlxuICogICAvLyBMb29rdXAgdXNlciBieSB1c2VybmFtZVxuICogICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyB2YWx1ZSkuXG4gKiAgICAgIHRoZW4oZnVuY3Rpb24gcmVzb2x2ZWQoKSB7XG4gKiAgICAgICAgLy91c2VybmFtZSBleGlzdHMsIHRoaXMgbWVhbnMgdmFsaWRhdGlvbiBmYWlsc1xuICogICAgICAgIHJldHVybiAkcS5yZWplY3QoJ2V4aXN0cycpO1xuICogICAgICB9LCBmdW5jdGlvbiByZWplY3RlZCgpIHtcbiAqICAgICAgICAvL3VzZXJuYW1lIGRvZXMgbm90IGV4aXN0LCB0aGVyZWZvcmUgdGhpcyB2YWxpZGF0aW9uIHBhc3Nlc1xuICogICAgICAgIHJldHVybiB0cnVlO1xuICogICAgICB9KTtcbiAqIH07XG4gKiBgYGBcbiAqXG4gKiBAcHJvcGVydHkge0FycmF5LjxGdW5jdGlvbj59ICR2aWV3Q2hhbmdlTGlzdGVuZXJzIEFycmF5IG9mIGZ1bmN0aW9ucyB0byBleGVjdXRlIHdoZW5ldmVyIHRoZVxuICogICAgIHZpZXcgdmFsdWUgaGFzIGNoYW5nZWQuIEl0IGlzIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgYW5kIGl0cyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAqICAgICBUaGlzIGNhbiBiZSB1c2VkIGluIHBsYWNlIG9mIGFkZGl0aW9uYWwgJHdhdGNoZXMgYWdhaW5zdCB0aGUgbW9kZWwgdmFsdWUuXG4gKlxuICogQHByb3BlcnR5IHtPYmplY3R9ICRlcnJvciBBbiBvYmplY3QgaGFzaCB3aXRoIGFsbCBmYWlsaW5nIHZhbGlkYXRvciBpZHMgYXMga2V5cy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSAkcGVuZGluZyBBbiBvYmplY3QgaGFzaCB3aXRoIGFsbCBwZW5kaW5nIHZhbGlkYXRvciBpZHMgYXMga2V5cy5cbiAqXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR1bnRvdWNoZWQgVHJ1ZSBpZiBjb250cm9sIGhhcyBub3QgbG9zdCBmb2N1cyB5ZXQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICR0b3VjaGVkIFRydWUgaWYgY29udHJvbCBoYXMgbG9zdCBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJHByaXN0aW5lIFRydWUgaWYgdXNlciBoYXMgbm90IGludGVyYWN0ZWQgd2l0aCB0aGUgY29udHJvbCB5ZXQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59ICRkaXJ0eSBUcnVlIGlmIHVzZXIgaGFzIGFscmVhZHkgaW50ZXJhY3RlZCB3aXRoIHRoZSBjb250cm9sLlxuICogQHByb3BlcnR5IHtib29sZWFufSAkdmFsaWQgVHJ1ZSBpZiB0aGVyZSBpcyBubyBlcnJvci5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gJGludmFsaWQgVHJ1ZSBpZiBhdCBsZWFzdCBvbmUgZXJyb3Igb24gdGhlIGNvbnRyb2wuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gJG5hbWUgVGhlIG5hbWUgYXR0cmlidXRlIG9mIHRoZSBjb250cm9sLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIGBOZ01vZGVsQ29udHJvbGxlcmAgcHJvdmlkZXMgQVBJIGZvciB0aGUge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfSBkaXJlY3RpdmUuXG4gKiBUaGUgY29udHJvbGxlciBjb250YWlucyBzZXJ2aWNlcyBmb3IgZGF0YS1iaW5kaW5nLCB2YWxpZGF0aW9uLCBDU1MgdXBkYXRlcywgYW5kIHZhbHVlIGZvcm1hdHRpbmdcbiAqIGFuZCBwYXJzaW5nLiBJdCBwdXJwb3NlZnVsbHkgZG9lcyBub3QgY29udGFpbiBhbnkgbG9naWMgd2hpY2ggZGVhbHMgd2l0aCBET00gcmVuZGVyaW5nIG9yXG4gKiBsaXN0ZW5pbmcgdG8gRE9NIGV2ZW50cy5cbiAqIFN1Y2ggRE9NIHJlbGF0ZWQgbG9naWMgc2hvdWxkIGJlIHByb3ZpZGVkIGJ5IG90aGVyIGRpcmVjdGl2ZXMgd2hpY2ggbWFrZSB1c2Ugb2ZcbiAqIGBOZ01vZGVsQ29udHJvbGxlcmAgZm9yIGRhdGEtYmluZGluZyB0byBjb250cm9sIGVsZW1lbnRzLlxuICogQW5ndWxhciBwcm92aWRlcyB0aGlzIERPTSBsb2dpYyBmb3IgbW9zdCB7QGxpbmsgaW5wdXQgYGlucHV0YH0gZWxlbWVudHMuXG4gKiBBdCB0aGUgZW5kIG9mIHRoaXMgcGFnZSB5b3UgY2FuIGZpbmQgYSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciNjdXN0b20tY29udHJvbC1leGFtcGxlXG4gKiBjdXN0b20gY29udHJvbCBleGFtcGxlfSB0aGF0IHVzZXMgYG5nTW9kZWxDb250cm9sbGVyYCB0byBiaW5kIHRvIGBjb250ZW50ZWRpdGFibGVgIGVsZW1lbnRzLlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQ3VzdG9tIENvbnRyb2wgRXhhbXBsZVxuICogVGhpcyBleGFtcGxlIHNob3dzIGhvdyB0byB1c2UgYE5nTW9kZWxDb250cm9sbGVyYCB3aXRoIGEgY3VzdG9tIGNvbnRyb2wgdG8gYWNoaWV2ZVxuICogZGF0YS1iaW5kaW5nLiBOb3RpY2UgaG93IGRpZmZlcmVudCBkaXJlY3RpdmVzIChgY29udGVudGVkaXRhYmxlYCwgYG5nLW1vZGVsYCwgYW5kIGByZXF1aXJlZGApXG4gKiBjb2xsYWJvcmF0ZSB0b2dldGhlciB0byBhY2hpZXZlIHRoZSBkZXNpcmVkIHJlc3VsdC5cbiAqXG4gKiBgY29udGVudGVkaXRhYmxlYCBpcyBhbiBIVE1MNSBhdHRyaWJ1dGUsIHdoaWNoIHRlbGxzIHRoZSBicm93c2VyIHRvIGxldCB0aGUgZWxlbWVudFxuICogY29udGVudHMgYmUgZWRpdGVkIGluIHBsYWNlIGJ5IHRoZSB1c2VyLlxuICpcbiAqIFdlIGFyZSB1c2luZyB0aGUge0BsaW5rIG5nLnNlcnZpY2U6JHNjZSAkc2NlfSBzZXJ2aWNlIGhlcmUgYW5kIGluY2x1ZGUgdGhlIHtAbGluayBuZ1Nhbml0aXplICRzYW5pdGl6ZX1cbiAqIG1vZHVsZSB0byBhdXRvbWF0aWNhbGx5IHJlbW92ZSBcImJhZFwiIGNvbnRlbnQgbGlrZSBpbmxpbmUgZXZlbnQgbGlzdGVuZXIgKGUuZy4gYDxzcGFuIG9uY2xpY2s9XCIuLi5cIj5gKS5cbiAqIEhvd2V2ZXIsIGFzIHdlIGFyZSB1c2luZyBgJHNjZWAgdGhlIG1vZGVsIGNhbiBzdGlsbCBkZWNpZGUgdG8gcHJvdmlkZSB1bnNhZmUgY29udGVudCBpZiBpdCBtYXJrc1xuICogdGhhdCBjb250ZW50IHVzaW5nIHRoZSBgJHNjZWAgc2VydmljZS5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwiTmdNb2RlbENvbnRyb2xsZXJcIiBtb2R1bGU9XCJjdXN0b21Db250cm9sXCIgZGVwcz1cImFuZ3VsYXItc2FuaXRpemUuanNcIj5cbiAgICA8ZmlsZSBuYW1lPVwic3R5bGUuY3NzXCI+XG4gICAgICBbY29udGVudGVkaXRhYmxlXSB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgbWluLWhlaWdodDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLm5nLWludmFsaWQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7XG4gICAgICB9XG5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbUNvbnRyb2wnLCBbJ25nU2FuaXRpemUnXSkuXG4gICAgICAgIGRpcmVjdGl2ZSgnY29udGVudGVkaXRhYmxlJywgWyckc2NlJywgZnVuY3Rpb24oJHNjZSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLCAvLyBvbmx5IGFjdGl2YXRlIG9uIGVsZW1lbnQgYXR0cmlidXRlXG4gICAgICAgICAgICByZXF1aXJlOiAnP25nTW9kZWwnLCAvLyBnZXQgYSBob2xkIG9mIE5nTW9kZWxDb250cm9sbGVyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgICAgaWYgKCFuZ01vZGVsKSByZXR1cm47IC8vIGRvIG5vdGhpbmcgaWYgbm8gbmctbW9kZWxcblxuICAgICAgICAgICAgICAvLyBTcGVjaWZ5IGhvdyBVSSBzaG91bGQgYmUgdXBkYXRlZFxuICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Lmh0bWwoJHNjZS5nZXRUcnVzdGVkSHRtbChuZ01vZGVsLiR2aWV3VmFsdWUgfHwgJycpKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNoYW5nZSBldmVudHMgdG8gZW5hYmxlIGJpbmRpbmdcbiAgICAgICAgICAgICAgZWxlbWVudC5vbignYmx1ciBrZXl1cCBjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKHJlYWQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmVhZCgpOyAvLyBpbml0aWFsaXplXG5cbiAgICAgICAgICAgICAgLy8gV3JpdGUgZGF0YSB0byB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gcmVhZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGVsZW1lbnQuaHRtbCgpO1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gd2UgY2xlYXIgdGhlIGNvbnRlbnQgZWRpdGFibGUgdGhlIGJyb3dzZXIgbGVhdmVzIGEgPGJyPiBiZWhpbmRcbiAgICAgICAgICAgICAgICAvLyBJZiBzdHJpcC1iciBhdHRyaWJ1dGUgaXMgcHJvdmlkZWQgdGhlbiB3ZSBzdHJpcCB0aGlzIG91dFxuICAgICAgICAgICAgICAgIGlmIChhdHRycy5zdHJpcEJyICYmIGh0bWwgPT09ICc8YnI+Jykge1xuICAgICAgICAgICAgICAgICAgaHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUoaHRtbCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gICAgICAgPGRpdiBjb250ZW50ZWRpdGFibGVcbiAgICAgICAgICAgIG5hbWU9XCJteVdpZGdldFwiIG5nLW1vZGVsPVwidXNlckNvbnRlbnRcIlxuICAgICAgICAgICAgc3RyaXAtYnI9XCJ0cnVlXCJcbiAgICAgICAgICAgIHJlcXVpcmVkPkNoYW5nZSBtZSE8L2Rpdj5cbiAgICAgICAgPHNwYW4gbmctc2hvdz1cIm15Rm9ybS5teVdpZGdldC4kZXJyb3IucmVxdWlyZWRcIj5SZXF1aXJlZCE8L3NwYW4+XG4gICAgICAgPGhyPlxuICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInVzZXJDb250ZW50XCIgYXJpYS1sYWJlbD1cIkR5bmFtaWMgdGV4dGFyZWFcIj48L3RleHRhcmVhPlxuICAgICAgPC9mb3JtPlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgaXQoJ3Nob3VsZCBkYXRhLWJpbmQgYW5kIGJlY29tZSBpbnZhbGlkJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ3NhZmFyaScgfHwgYnJvd3Nlci5wYXJhbXMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnKSB7XG4gICAgICAgIC8vIFNhZmFyaURyaXZlciBjYW4ndCBoYW5kbGUgY29udGVudGVkaXRhYmxlXG4gICAgICAgIC8vIGFuZCBGaXJlZm94IGRyaXZlciBjYW4ndCBjbGVhciBjb250ZW50ZWRpdGFibGVzIHZlcnkgd2VsbFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgY29udGVudEVkaXRhYmxlID0gZWxlbWVudChieS5jc3MoJ1tjb250ZW50ZWRpdGFibGVdJykpO1xuICAgICAgdmFyIGNvbnRlbnQgPSAnQ2hhbmdlIG1lISc7XG5cbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0VGV4dCgpKS50b0VxdWFsKGNvbnRlbnQpO1xuXG4gICAgICBjb250ZW50RWRpdGFibGUuY2xlYXIoKTtcbiAgICAgIGNvbnRlbnRFZGl0YWJsZS5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5CQUNLX1NQQUNFKTtcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0VGV4dCgpKS50b0VxdWFsKCcnKTtcbiAgICAgIGV4cGVjdChjb250ZW50RWRpdGFibGUuZ2V0QXR0cmlidXRlKCdjbGFzcycpKS50b01hdGNoKC9uZy1pbnZhbGlkLXJlcXVpcmVkLyk7XG4gICAgfSk7XG4gICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqXG4gKi9cbk5nTW9kZWxDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckZXhjZXB0aW9uSGFuZGxlcicsICckYXR0cnMnLCAnJGVsZW1lbnQnLCAnJHBhcnNlJywgJyRhbmltYXRlJywgJyR0aW1lb3V0JywgJyRxJywgJyRpbnRlcnBvbGF0ZSddO1xuZnVuY3Rpb24gTmdNb2RlbENvbnRyb2xsZXIoJHNjb3BlLCAkZXhjZXB0aW9uSGFuZGxlciwgJGF0dHIsICRlbGVtZW50LCAkcGFyc2UsICRhbmltYXRlLCAkdGltZW91dCwgJHEsICRpbnRlcnBvbGF0ZSkge1xuICB0aGlzLiR2aWV3VmFsdWUgPSBOdW1iZXIuTmFOO1xuICB0aGlzLiRtb2RlbFZhbHVlID0gTnVtYmVyLk5hTjtcbiAgdGhpcy4kJHJhd01vZGVsVmFsdWUgPSB1bmRlZmluZWQ7IC8vIHN0b3JlcyB0aGUgcGFyc2VkIG1vZGVsVmFsdWUgLyBtb2RlbCBzZXQgZnJvbSBzY29wZSByZWdhcmRsZXNzIG9mIHZhbGlkaXR5LlxuICB0aGlzLiR2YWxpZGF0b3JzID0ge307XG4gIHRoaXMuJGFzeW5jVmFsaWRhdG9ycyA9IHt9O1xuICB0aGlzLiRwYXJzZXJzID0gW107XG4gIHRoaXMuJGZvcm1hdHRlcnMgPSBbXTtcbiAgdGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycyA9IFtdO1xuICB0aGlzLiR1bnRvdWNoZWQgPSB0cnVlO1xuICB0aGlzLiR0b3VjaGVkID0gZmFsc2U7XG4gIHRoaXMuJHByaXN0aW5lID0gdHJ1ZTtcbiAgdGhpcy4kZGlydHkgPSBmYWxzZTtcbiAgdGhpcy4kdmFsaWQgPSB0cnVlO1xuICB0aGlzLiRpbnZhbGlkID0gZmFsc2U7XG4gIHRoaXMuJGVycm9yID0ge307IC8vIGtlZXAgaW52YWxpZCBrZXlzIGhlcmVcbiAgdGhpcy4kJHN1Y2Nlc3MgPSB7fTsgLy8ga2VlcCB2YWxpZCBrZXlzIGhlcmVcbiAgdGhpcy4kcGVuZGluZyA9IHVuZGVmaW5lZDsgLy8ga2VlcCBwZW5kaW5nIGtleXMgaGVyZVxuICB0aGlzLiRuYW1lID0gJGludGVycG9sYXRlKCRhdHRyLm5hbWUgfHwgJycsIGZhbHNlKSgkc2NvcGUpO1xuICB0aGlzLiQkcGFyZW50Rm9ybSA9IG51bGxGb3JtQ3RybDtcbiAgdGhpcy4kb3B0aW9ucyA9IGRlZmF1bHRNb2RlbE9wdGlvbnM7XG4gIHRoaXMuJCR1cGRhdGVFdmVudHMgPSAnJztcbiAgLy8gQXR0YWNoIHRoZSBjb3JyZWN0IGNvbnRleHQgdG8gdGhlIGV2ZW50IGhhbmRsZXIgZnVuY3Rpb24gZm9yIHVwZGF0ZU9uXG4gIHRoaXMuJCR1cGRhdGVFdmVudEhhbmRsZXIgPSB0aGlzLiQkdXBkYXRlRXZlbnRIYW5kbGVyLmJpbmQodGhpcyk7XG5cbiAgdGhpcy4kJHBhcnNlZE5nTW9kZWwgPSAkcGFyc2UoJGF0dHIubmdNb2RlbCk7XG4gIHRoaXMuJCRwYXJzZWROZ01vZGVsQXNzaWduID0gdGhpcy4kJHBhcnNlZE5nTW9kZWwuYXNzaWduO1xuICB0aGlzLiQkbmdNb2RlbEdldCA9IHRoaXMuJCRwYXJzZWROZ01vZGVsO1xuICB0aGlzLiQkbmdNb2RlbFNldCA9IHRoaXMuJCRwYXJzZWROZ01vZGVsQXNzaWduO1xuICB0aGlzLiQkcGVuZGluZ0RlYm91bmNlID0gbnVsbDtcbiAgdGhpcy4kJHBhcnNlclZhbGlkID0gdW5kZWZpbmVkO1xuXG4gIHRoaXMuJCRjdXJyZW50VmFsaWRhdGlvblJ1bklkID0gMDtcblxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNTgzM1xuICAvLyBQcmV2ZW50IGAkJHNjb3BlYCBmcm9tIGJlaW5nIGl0ZXJhdGVkIG92ZXIgYnkgYGNvcHlgIHdoZW4gTmdNb2RlbENvbnRyb2xsZXIgaXMgZGVlcCB3YXRjaGVkXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnJCRzY29wZScsIHt2YWx1ZTogJHNjb3BlfSk7XG4gIHRoaXMuJCRhdHRyID0gJGF0dHI7XG4gIHRoaXMuJCRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gIHRoaXMuJCRhbmltYXRlID0gJGFuaW1hdGU7XG4gIHRoaXMuJCR0aW1lb3V0ID0gJHRpbWVvdXQ7XG4gIHRoaXMuJCRwYXJzZSA9ICRwYXJzZTtcbiAgdGhpcy4kJHEgPSAkcTtcbiAgdGhpcy4kJGV4Y2VwdGlvbkhhbmRsZXIgPSAkZXhjZXB0aW9uSGFuZGxlcjtcblxuICBzZXR1cFZhbGlkaXR5KHRoaXMpO1xuICBzZXR1cE1vZGVsV2F0Y2hlcih0aGlzKTtcbn1cblxuTmdNb2RlbENvbnRyb2xsZXIucHJvdG90eXBlID0ge1xuICAkJGluaXRHZXR0ZXJTZXR0ZXJzOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ2dldHRlclNldHRlcicpKSB7XG4gICAgICB2YXIgaW52b2tlTW9kZWxHZXR0ZXIgPSB0aGlzLiQkcGFyc2UodGhpcy4kJGF0dHIubmdNb2RlbCArICcoKScpLFxuICAgICAgICAgIGludm9rZU1vZGVsU2V0dGVyID0gdGhpcy4kJHBhcnNlKHRoaXMuJCRhdHRyLm5nTW9kZWwgKyAnKCQkJHApJyk7XG5cbiAgICAgIHRoaXMuJCRuZ01vZGVsR2V0ID0gZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgIHZhciBtb2RlbFZhbHVlID0gdGhpcy4kJHBhcnNlZE5nTW9kZWwoJHNjb3BlKTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24obW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgICBtb2RlbFZhbHVlID0gaW52b2tlTW9kZWxHZXR0ZXIoJHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW9kZWxWYWx1ZTtcbiAgICAgIH07XG4gICAgICB0aGlzLiQkbmdNb2RlbFNldCA9IGZ1bmN0aW9uKCRzY29wZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy4kJHBhcnNlZE5nTW9kZWwoJHNjb3BlKSkpIHtcbiAgICAgICAgICBpbnZva2VNb2RlbFNldHRlcigkc2NvcGUsIHskJCRwOiBuZXdWYWx1ZX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuJCRwYXJzZWROZ01vZGVsQXNzaWduKCRzY29wZSwgbmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuJCRwYXJzZWROZ01vZGVsLmFzc2lnbikge1xuICAgICAgdGhyb3cgbmdNb2RlbE1pbkVycignbm9uYXNzaWduJywgJ0V4cHJlc3Npb24gXFwnezB9XFwnIGlzIG5vbi1hc3NpZ25hYmxlLiBFbGVtZW50OiB7MX0nLFxuICAgICAgICAgIHRoaXMuJCRhdHRyLm5nTW9kZWwsIHN0YXJ0aW5nVGFnKHRoaXMuJCRlbGVtZW50KSk7XG4gICAgfVxuICB9LFxuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcmVuZGVyXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYWxsZWQgd2hlbiB0aGUgdmlldyBuZWVkcyB0byBiZSB1cGRhdGVkLiBJdCBpcyBleHBlY3RlZCB0aGF0IHRoZSB1c2VyIG9mIHRoZSBuZy1tb2RlbFxuICAgKiBkaXJlY3RpdmUgd2lsbCBpbXBsZW1lbnQgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIFRoZSBgJHJlbmRlcigpYCBtZXRob2QgaXMgaW52b2tlZCBpbiB0aGUgZm9sbG93aW5nIHNpdHVhdGlvbnM6XG4gICAqXG4gICAqICogYCRyb2xsYmFja1ZpZXdWYWx1ZSgpYCBpcyBjYWxsZWQuICBJZiB3ZSBhcmUgcm9sbGluZyBiYWNrIHRoZSB2aWV3IHZhbHVlIHRvIHRoZSBsYXN0XG4gICAqICAgY29tbWl0dGVkIHZhbHVlIHRoZW4gYCRyZW5kZXIoKWAgaXMgY2FsbGVkIHRvIHVwZGF0ZSB0aGUgaW5wdXQgY29udHJvbC5cbiAgICogKiBUaGUgdmFsdWUgcmVmZXJlbmNlZCBieSBgbmctbW9kZWxgIGlzIGNoYW5nZWQgcHJvZ3JhbW1hdGljYWxseSBhbmQgYm90aCB0aGUgYCRtb2RlbFZhbHVlYCBhbmRcbiAgICogICB0aGUgYCR2aWV3VmFsdWVgIGFyZSBkaWZmZXJlbnQgZnJvbSBsYXN0IHRpbWUuXG4gICAqXG4gICAqIFNpbmNlIGBuZy1tb2RlbGAgZG9lcyBub3QgZG8gYSBkZWVwIHdhdGNoLCBgJHJlbmRlcigpYCBpcyBvbmx5IGludm9rZWQgaWYgdGhlIHZhbHVlcyBvZlxuICAgKiBgJG1vZGVsVmFsdWVgIGFuZCBgJHZpZXdWYWx1ZWAgYXJlIGFjdHVhbGx5IGRpZmZlcmVudCBmcm9tIHRoZWlyIHByZXZpb3VzIHZhbHVlcy4gSWYgYCRtb2RlbFZhbHVlYFxuICAgKiBvciBgJHZpZXdWYWx1ZWAgYXJlIG9iamVjdHMgKHJhdGhlciB0aGFuIGEgc3RyaW5nIG9yIG51bWJlcikgdGhlbiBgJHJlbmRlcigpYCB3aWxsIG5vdCBiZVxuICAgKiBpbnZva2VkIGlmIHlvdSBvbmx5IGNoYW5nZSBhIHByb3BlcnR5IG9uIHRoZSBvYmplY3RzLlxuICAgKi9cbiAgJHJlbmRlcjogbm9vcCxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRpc0VtcHR5XG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBUaGlzIGlzIGNhbGxlZCB3aGVuIHdlIG5lZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSB2YWx1ZSBvZiBhbiBpbnB1dCBpcyBlbXB0eS5cbiAgICpcbiAgICogRm9yIGluc3RhbmNlLCB0aGUgcmVxdWlyZWQgZGlyZWN0aXZlIGRvZXMgdGhpcyB0byB3b3JrIG91dCBpZiB0aGUgaW5wdXQgaGFzIGRhdGEgb3Igbm90LlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCBgJGlzRW1wdHlgIGZ1bmN0aW9uIGNoZWNrcyB3aGV0aGVyIHRoZSB2YWx1ZSBpcyBgdW5kZWZpbmVkYCwgYCcnYCwgYG51bGxgIG9yIGBOYU5gLlxuICAgKlxuICAgKiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgZm9yIGlucHV0IGRpcmVjdGl2ZXMgd2hvc2UgY29uY2VwdCBvZiBiZWluZyBlbXB0eSBpcyBkaWZmZXJlbnQgZnJvbSB0aGVcbiAgICogZGVmYXVsdC4gVGhlIGBjaGVja2JveElucHV0VHlwZWAgZGlyZWN0aXZlIGRvZXMgdGhpcyBiZWNhdXNlIGluIGl0cyBjYXNlIGEgdmFsdWUgb2YgYGZhbHNlYFxuICAgKiBpbXBsaWVzIGVtcHR5LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgdG8gY2hlY2sgZm9yIGVtcHRpbmVzcy5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyBcImVtcHR5XCIuXG4gICAqL1xuICAkaXNFbXB0eTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlXG4gICAgcmV0dXJuIGlzVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgIT09IHZhbHVlO1xuICB9LFxuXG4gICQkdXBkYXRlRW1wdHlDbGFzc2VzOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICh0aGlzLiRpc0VtcHR5KHZhbHVlKSkge1xuICAgICAgdGhpcy4kJGFuaW1hdGUucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsIE5PVF9FTVBUWV9DTEFTUyk7XG4gICAgICB0aGlzLiQkYW5pbWF0ZS5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCwgRU1QVFlfQ0xBU1MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiQkYW5pbWF0ZS5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCwgRU1QVFlfQ0xBU1MpO1xuICAgICAgdGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIE5PVF9FTVBUWV9DTEFTUyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFByaXN0aW5lXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBTZXRzIHRoZSBjb250cm9sIHRvIGl0cyBwcmlzdGluZSBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy1kaXJ0eWAgY2xhc3MgYW5kIHNldCB0aGUgY29udHJvbCB0byBpdHMgcHJpc3RpbmVcbiAgICogc3RhdGUgKGBuZy1wcmlzdGluZWAgY2xhc3MpLiBBIG1vZGVsIGlzIGNvbnNpZGVyZWQgdG8gYmUgcHJpc3RpbmUgd2hlbiB0aGUgY29udHJvbFxuICAgKiBoYXMgbm90IGJlZW4gY2hhbmdlZCBmcm9tIHdoZW4gZmlyc3QgY29tcGlsZWQuXG4gICAqL1xuICAkc2V0UHJpc3RpbmU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGRpcnR5ID0gZmFsc2U7XG4gICAgdGhpcy4kcHJpc3RpbmUgPSB0cnVlO1xuICAgIHRoaXMuJCRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBESVJUWV9DTEFTUyk7XG4gICAgdGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIFBSSVNUSU5FX0NMQVNTKTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXREaXJ0eVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogU2V0cyB0aGUgY29udHJvbCB0byBpdHMgZGlydHkgc3RhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSBgbmctcHJpc3RpbmVgIGNsYXNzIGFuZCBzZXQgdGhlIGNvbnRyb2wgdG8gaXRzIGRpcnR5XG4gICAqIHN0YXRlIChgbmctZGlydHlgIGNsYXNzKS4gQSBtb2RlbCBpcyBjb25zaWRlcmVkIHRvIGJlIGRpcnR5IHdoZW4gdGhlIGNvbnRyb2wgaGFzIGJlZW4gY2hhbmdlZFxuICAgKiBmcm9tIHdoZW4gZmlyc3QgY29tcGlsZWQuXG4gICAqL1xuICAkc2V0RGlydHk6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJGRpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLiRwcmlzdGluZSA9IGZhbHNlO1xuICAgIHRoaXMuJCRhbmltYXRlLnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LCBQUklTVElORV9DTEFTUyk7XG4gICAgdGhpcy4kJGFuaW1hdGUuYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsIERJUlRZX0NMQVNTKTtcbiAgICB0aGlzLiQkcGFyZW50Rm9ybS4kc2V0RGlydHkoKTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRVbnRvdWNoZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGNvbnRyb2wgdG8gaXRzIHVudG91Y2hlZCBzdGF0ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgY2FuIGJlIGNhbGxlZCB0byByZW1vdmUgdGhlIGBuZy10b3VjaGVkYCBjbGFzcyBhbmQgc2V0IHRoZSBjb250cm9sIHRvIGl0c1xuICAgKiB1bnRvdWNoZWQgc3RhdGUgKGBuZy11bnRvdWNoZWRgIGNsYXNzKS4gVXBvbiBjb21waWxhdGlvbiwgYSBtb2RlbCBpcyBzZXQgYXMgdW50b3VjaGVkXG4gICAqIGJ5IGRlZmF1bHQsIGhvd2V2ZXIgdGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byByZXN0b3JlIHRoYXQgc3RhdGUgaWYgdGhlIG1vZGVsIGhhc1xuICAgKiBhbHJlYWR5IGJlZW4gdG91Y2hlZCBieSB0aGUgdXNlci5cbiAgICovXG4gICRzZXRVbnRvdWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJHRvdWNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLiR1bnRvdWNoZWQgPSB0cnVlO1xuICAgIHRoaXMuJCRhbmltYXRlLnNldENsYXNzKHRoaXMuJCRlbGVtZW50LCBVTlRPVUNIRURfQ0xBU1MsIFRPVUNIRURfQ0xBU1MpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHNldFRvdWNoZWRcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFNldHMgdGhlIGNvbnRyb2wgdG8gaXRzIHRvdWNoZWQgc3RhdGUuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgdG8gcmVtb3ZlIHRoZSBgbmctdW50b3VjaGVkYCBjbGFzcyBhbmQgc2V0IHRoZSBjb250cm9sIHRvIGl0c1xuICAgKiB0b3VjaGVkIHN0YXRlIChgbmctdG91Y2hlZGAgY2xhc3MpLiBBIG1vZGVsIGlzIGNvbnNpZGVyZWQgdG8gYmUgdG91Y2hlZCB3aGVuIHRoZSB1c2VyIGhhc1xuICAgKiBmaXJzdCBmb2N1c2VkIHRoZSBjb250cm9sIGVsZW1lbnQgYW5kIHRoZW4gc2hpZnRlZCBmb2N1cyBhd2F5IGZyb20gdGhlIGNvbnRyb2wgKGJsdXIgZXZlbnQpLlxuICAgKi9cbiAgJHNldFRvdWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJHRvdWNoZWQgPSB0cnVlO1xuICAgIHRoaXMuJHVudG91Y2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuJCRhbmltYXRlLnNldENsYXNzKHRoaXMuJCRlbGVtZW50LCBUT1VDSEVEX0NMQVNTLCBVTlRPVUNIRURfQ0xBU1MpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHJvbGxiYWNrVmlld1ZhbHVlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBDYW5jZWwgYW4gdXBkYXRlIGFuZCByZXNldCB0aGUgaW5wdXQgZWxlbWVudCdzIHZhbHVlIHRvIHByZXZlbnQgYW4gdXBkYXRlIHRvIHRoZSBgJG1vZGVsVmFsdWVgLFxuICAgKiB3aGljaCBtYXkgYmUgY2F1c2VkIGJ5IGEgcGVuZGluZyBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3Igc29tZVxuICAgKiBmdXR1cmUgZXZlbnQuXG4gICAqXG4gICAqIElmIHlvdSBoYXZlIGFuIGlucHV0IHRoYXQgdXNlcyBgbmctbW9kZWwtb3B0aW9uc2AgdG8gc2V0IHVwIGRlYm91bmNlZCB1cGRhdGVzIG9yIHVwZGF0ZXMgdGhhdFxuICAgKiBkZXBlbmQgb24gc3BlY2lhbCBldmVudHMgc3VjaCBhcyBgYmx1cmAsIHRoZXJlIGNhbiBiZSBhIHBlcmlvZCB3aGVuIHRoZSBgJHZpZXdWYWx1ZWAgaXMgb3V0IG9mXG4gICAqIHN5bmMgd2l0aCB0aGUgbmdNb2RlbCdzIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIEluIHRoaXMgY2FzZSwgeW91IGNhbiB1c2UgYCRyb2xsYmFja1ZpZXdWYWx1ZSgpYCB0byBtYW51YWxseSBjYW5jZWwgdGhlIGRlYm91bmNlZCAvIGZ1dHVyZSB1cGRhdGVcbiAgICogYW5kIHJlc2V0IHRoZSBpbnB1dCB0byB0aGUgbGFzdCBjb21taXR0ZWQgdmlldyB2YWx1ZS5cbiAgICpcbiAgICogSXQgaXMgYWxzbyBwb3NzaWJsZSB0aGF0IHlvdSBydW4gaW50byBkaWZmaWN1bHRpZXMgaWYgeW91IHRyeSB0byB1cGRhdGUgdGhlIG5nTW9kZWwncyBgJG1vZGVsVmFsdWVgXG4gICAqIHByb2dyYW1tYXRpY2FsbHkgYmVmb3JlIHRoZXNlIGRlYm91bmNlZC9mdXR1cmUgZXZlbnRzIGhhdmUgcmVzb2x2ZWQvb2NjdXJyZWQsIGJlY2F1c2UgQW5ndWxhcidzXG4gICAqIGRpcnR5IGNoZWNraW5nIG1lY2hhbmlzbSBpcyBub3QgYWJsZSB0byB0ZWxsIHdoZXRoZXIgdGhlIG1vZGVsIGhhcyBhY3R1YWxseSBjaGFuZ2VkIG9yIG5vdC5cbiAgICpcbiAgICogVGhlIGAkcm9sbGJhY2tWaWV3VmFsdWUoKWAgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIHByb2dyYW1tYXRpY2FsbHkgY2hhbmdpbmcgdGhlIG1vZGVsIG9mIGFuXG4gICAqIGlucHV0IHdoaWNoIG1heSBoYXZlIHN1Y2ggZXZlbnRzIHBlbmRpbmcuIFRoaXMgaXMgaW1wb3J0YW50IGluIG9yZGVyIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZVxuICAgKiBpbnB1dCBmaWVsZCB3aWxsIGJlIHVwZGF0ZWQgd2l0aCB0aGUgbmV3IG1vZGVsIHZhbHVlIGFuZCBhbnkgcGVuZGluZyBvcGVyYXRpb25zIGFyZSBjYW5jZWxsZWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIDxleGFtcGxlIG5hbWU9XCJuZy1tb2RlbC1jYW5jZWwtdXBkYXRlXCIgbW9kdWxlPVwiY2FuY2VsLXVwZGF0ZS1leGFtcGxlXCI+XG4gICAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgKiAgICAgYW5ndWxhci5tb2R1bGUoJ2NhbmNlbC11cGRhdGUtZXhhbXBsZScsIFtdKVxuICAgKlxuICAgKiAgICAgLmNvbnRyb2xsZXIoJ0NhbmNlbFVwZGF0ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgKiAgICAgICAkc2NvcGUubW9kZWwgPSB7dmFsdWUxOiAnJywgdmFsdWUyOiAnJ307XG4gICAqXG4gICAqICAgICAgICRzY29wZS5zZXRFbXB0eSA9IGZ1bmN0aW9uKGUsIHZhbHVlLCByb2xsYmFjaykge1xuICAgKiAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7XG4gICAqICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAqICAgICAgICAgICBpZiAocm9sbGJhY2spIHtcbiAgICogICAgICAgICAgICAgJHNjb3BlLm15Rm9ybVt2YWx1ZV0uJHJvbGxiYWNrVmlld1ZhbHVlKCk7XG4gICAqICAgICAgICAgICB9XG4gICAqICAgICAgICAgICAkc2NvcGUubW9kZWxbdmFsdWVdID0gJyc7XG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9O1xuICAgKiAgICAgfV0pO1xuICAgKiAgIDwvZmlsZT5cbiAgICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiQ2FuY2VsVXBkYXRlQ29udHJvbGxlclwiPlxuICAgKiAgICAgICA8cD5Cb3RoIG9mIHRoZXNlIGlucHV0cyBhcmUgb25seSB1cGRhdGVkIGlmIHRoZXkgYXJlIGJsdXJyZWQuIEhpdHRpbmcgZXNjYXBlIHNob3VsZFxuICAgKiAgICAgICBlbXB0eSB0aGVtLiBGb2xsb3cgdGhlc2Ugc3RlcHMgYW5kIG9ic2VydmUgdGhlIGRpZmZlcmVuY2U6PC9wPlxuICAgKiAgICAgICA8b2w+XG4gICAqICAgICAgICAgPGxpPlR5cGUgc29tZXRoaW5nIGluIHRoZSBpbnB1dC4gWW91IHdpbGwgc2VlIHRoYXQgdGhlIG1vZGVsIGlzIG5vdCB5ZXQgdXBkYXRlZDwvbGk+XG4gICAqICAgICAgICAgPGxpPlByZXNzIHRoZSBFc2NhcGUga2V5LlxuICAgKiAgICAgICAgICAgPG9sPlxuICAgKiAgICAgICAgICAgICA8bGk+IEluIHRoZSBmaXJzdCBleGFtcGxlLCBub3RoaW5nIGhhcHBlbnMsIGJlY2F1c2UgdGhlIG1vZGVsIGlzIGFscmVhZHkgJycsIGFuZCBub1xuICAgKiAgICAgICAgICAgICB1cGRhdGUgaXMgZGV0ZWN0ZWQuIElmIHlvdSBibHVyIHRoZSBpbnB1dCwgdGhlIG1vZGVsIHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IHZpZXcuXG4gICAqICAgICAgICAgICAgIDwvbGk+XG4gICAqICAgICAgICAgICAgIDxsaT4gSW4gdGhlIHNlY29uZCBleGFtcGxlLCB0aGUgcGVuZGluZyB1cGRhdGUgaXMgY2FuY2VsbGVkLCBhbmQgdGhlIGlucHV0IGlzIHNldCBiYWNrXG4gICAqICAgICAgICAgICAgIHRvIHRoZSBsYXN0IGNvbW1pdHRlZCB2aWV3IHZhbHVlICgnJykuIEJsdXJyaW5nIHRoZSBpbnB1dCBkb2VzIG5vdGhpbmcuXG4gICAqICAgICAgICAgICAgIDwvbGk+XG4gICAqICAgICAgICAgICA8L29sPlxuICAgKiAgICAgICAgIDwvbGk+XG4gICAqICAgICAgIDwvb2w+XG4gICAqXG4gICAqICAgICAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIiBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2JsdXInIH1cIj5cbiAgICogICAgICAgICA8ZGl2PlxuICAgKiAgICAgICAgICAgPHAgaWQ9XCJpbnB1dERlc2NyaXB0aW9uMVwiPldpdGhvdXQgJHJvbGxiYWNrVmlld1ZhbHVlKCk6PC9wPlxuICAgKiAgICAgICAgICAgPGlucHV0IG5hbWU9XCJ2YWx1ZTFcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiaW5wdXREZXNjcmlwdGlvbjFcIiBuZy1tb2RlbD1cIm1vZGVsLnZhbHVlMVwiXG4gICAqICAgICAgICAgICAgICAgICAgbmcta2V5ZG93bj1cInNldEVtcHR5KCRldmVudCwgJ3ZhbHVlMScpXCI+XG4gICAqICAgICAgICAgICB2YWx1ZTE6IFwie3sgbW9kZWwudmFsdWUxIH19XCJcbiAgICogICAgICAgICA8L2Rpdj5cbiAgICpcbiAgICogICAgICAgICA8ZGl2PlxuICAgKiAgICAgICAgICAgPHAgaWQ9XCJpbnB1dERlc2NyaXB0aW9uMlwiPldpdGggJHJvbGxiYWNrVmlld1ZhbHVlKCk6PC9wPlxuICAgKiAgICAgICAgICAgPGlucHV0IG5hbWU9XCJ2YWx1ZTJcIiBhcmlhLWRlc2NyaWJlZGJ5PVwiaW5wdXREZXNjcmlwdGlvbjJcIiBuZy1tb2RlbD1cIm1vZGVsLnZhbHVlMlwiXG4gICAqICAgICAgICAgICAgICAgICAgbmcta2V5ZG93bj1cInNldEVtcHR5KCRldmVudCwgJ3ZhbHVlMicsIHRydWUpXCI+XG4gICAqICAgICAgICAgICB2YWx1ZTI6IFwie3sgbW9kZWwudmFsdWUyIH19XCJcbiAgICogICAgICAgICA8L2Rpdj5cbiAgICogICAgICAgPC9mb3JtPlxuICAgKiAgICAgPC9kaXY+XG4gICAqICAgPC9maWxlPlxuICAgICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICAgICBkaXYge1xuICAgICAgICAgICAgZGlzcGxheTogdGFibGUtY2VsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZGl2Om50aC1jaGlsZCgxKSB7XG4gICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAzMHB4O1xuICAgICAgICAgIH1cblxuICAgICAgICA8L2ZpbGU+XG4gICAqIDwvZXhhbXBsZT5cbiAgICovXG4gICRyb2xsYmFja1ZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kJHRpbWVvdXQuY2FuY2VsKHRoaXMuJCRwZW5kaW5nRGVib3VuY2UpO1xuICAgIHRoaXMuJHZpZXdWYWx1ZSA9IHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlO1xuICAgIHRoaXMuJHJlbmRlcigpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRlXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBSdW5zIGVhY2ggb2YgdGhlIHJlZ2lzdGVyZWQgdmFsaWRhdG9ycyAoZmlyc3Qgc3luY2hyb25vdXMgdmFsaWRhdG9ycyBhbmQgdGhlblxuICAgKiBhc3luY2hyb25vdXMgdmFsaWRhdG9ycykuXG4gICAqIElmIHRoZSB2YWxpZGl0eSBjaGFuZ2VzIHRvIGludmFsaWQsIHRoZSBtb2RlbCB3aWxsIGJlIHNldCB0byBgdW5kZWZpbmVkYCxcbiAgICogdW5sZXNzIHtAbGluayBuZ01vZGVsT3B0aW9ucyBgbmdNb2RlbE9wdGlvbnMuYWxsb3dJbnZhbGlkYH0gaXMgYHRydWVgLlxuICAgKiBJZiB0aGUgdmFsaWRpdHkgY2hhbmdlcyB0byB2YWxpZCwgaXQgd2lsbCBzZXQgdGhlIG1vZGVsIHRvIHRoZSBsYXN0IGF2YWlsYWJsZSB2YWxpZFxuICAgKiBgJG1vZGVsVmFsdWVgLCBpLmUuIGVpdGhlciB0aGUgbGFzdCBwYXJzZWQgdmFsdWUgb3IgdGhlIGxhc3QgdmFsdWUgc2V0IGZyb20gdGhlIHNjb3BlLlxuICAgKi9cbiAgJHZhbGlkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAvLyBpZ25vcmUgJHZhbGlkYXRlIGJlZm9yZSBtb2RlbCBpcyBpbml0aWFsaXplZFxuICAgIGlmIChpc051bWJlck5hTih0aGlzLiRtb2RlbFZhbHVlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2aWV3VmFsdWUgPSB0aGlzLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtcbiAgICAvLyBOb3RlOiB3ZSB1c2UgdGhlICQkcmF3TW9kZWxWYWx1ZSBhcyAkbW9kZWxWYWx1ZSBtaWdodCBoYXZlIGJlZW5cbiAgICAvLyBzZXQgdG8gdW5kZWZpbmVkIGR1cmluZyBhIHZpZXcgLT4gbW9kZWwgdXBkYXRlIHRoYXQgZm91bmQgdmFsaWRhdGlvblxuICAgIC8vIGVycm9ycy4gV2UgY2FuJ3QgcGFyc2UgdGhlIHZpZXcgaGVyZSwgc2luY2UgdGhhdCBjb3VsZCBjaGFuZ2VcbiAgICAvLyB0aGUgbW9kZWwgYWx0aG91Z2ggbmVpdGhlciB2aWV3VmFsdWUgbm9yIHRoZSBtb2RlbCBvbiB0aGUgc2NvcGUgY2hhbmdlZFxuICAgIHZhciBtb2RlbFZhbHVlID0gdGhpcy4kJHJhd01vZGVsVmFsdWU7XG5cbiAgICB2YXIgcHJldlZhbGlkID0gdGhpcy4kdmFsaWQ7XG4gICAgdmFyIHByZXZNb2RlbFZhbHVlID0gdGhpcy4kbW9kZWxWYWx1ZTtcblxuICAgIHZhciBhbGxvd0ludmFsaWQgPSB0aGlzLiRvcHRpb25zLmdldE9wdGlvbignYWxsb3dJbnZhbGlkJyk7XG5cbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy4kJHJ1blZhbGlkYXRvcnMobW9kZWxWYWx1ZSwgdmlld1ZhbHVlLCBmdW5jdGlvbihhbGxWYWxpZCkge1xuICAgICAgLy8gSWYgdGhlcmUgd2FzIG5vIGNoYW5nZSBpbiB2YWxpZGl0eSwgZG9uJ3QgdXBkYXRlIHRoZSBtb2RlbFxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyBjaGFuZ2luZyBhbiBpbnZhbGlkIG1vZGVsVmFsdWUgdG8gdW5kZWZpbmVkXG4gICAgICBpZiAoIWFsbG93SW52YWxpZCAmJiBwcmV2VmFsaWQgIT09IGFsbFZhbGlkKSB7XG4gICAgICAgIC8vIE5vdGU6IERvbid0IGNoZWNrIHRoaXMuJHZhbGlkIGhlcmUsIGFzIHdlIGNvdWxkIGhhdmVcbiAgICAgICAgLy8gZXh0ZXJuYWwgdmFsaWRhdG9ycyAoZS5nLiBjYWxjdWxhdGVkIG9uIHRoZSBzZXJ2ZXIpLFxuICAgICAgICAvLyB0aGF0IGp1c3QgY2FsbCAkc2V0VmFsaWRpdHkgYW5kIG5lZWQgdGhlIG1vZGVsIHZhbHVlXG4gICAgICAgIC8vIHRvIGNhbGN1bGF0ZSB0aGVpciB2YWxpZGl0eS5cbiAgICAgICAgdGhhdC4kbW9kZWxWYWx1ZSA9IGFsbFZhbGlkID8gbW9kZWxWYWx1ZSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGhhdC4kbW9kZWxWYWx1ZSAhPT0gcHJldk1vZGVsVmFsdWUpIHtcbiAgICAgICAgICB0aGF0LiQkd3JpdGVNb2RlbFRvU2NvcGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gICQkcnVuVmFsaWRhdG9yczogZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlLCBkb25lQ2FsbGJhY2spIHtcbiAgICB0aGlzLiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCsrO1xuICAgIHZhciBsb2NhbFZhbGlkYXRpb25SdW5JZCA9IHRoaXMuJCRjdXJyZW50VmFsaWRhdGlvblJ1bklkO1xuICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgIC8vIGNoZWNrIHBhcnNlciBlcnJvclxuICAgIGlmICghcHJvY2Vzc1BhcnNlRXJyb3JzKCkpIHtcbiAgICAgIHZhbGlkYXRpb25Eb25lKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFwcm9jZXNzU3luY1ZhbGlkYXRvcnMoKSkge1xuICAgICAgdmFsaWRhdGlvbkRvbmUoZmFsc2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwcm9jZXNzQXN5bmNWYWxpZGF0b3JzKCk7XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzUGFyc2VFcnJvcnMoKSB7XG4gICAgICB2YXIgZXJyb3JLZXkgPSB0aGF0LiQkcGFyc2VyTmFtZSB8fCAncGFyc2UnO1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKHRoYXQuJCRwYXJzZXJWYWxpZCkpIHtcbiAgICAgICAgc2V0VmFsaWRpdHkoZXJyb3JLZXksIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGF0LiQkcGFyc2VyVmFsaWQpIHtcbiAgICAgICAgICBmb3JFYWNoKHRoYXQuJHZhbGlkYXRvcnMsIGZ1bmN0aW9uKHYsIG5hbWUpIHtcbiAgICAgICAgICAgIHNldFZhbGlkaXR5KG5hbWUsIG51bGwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZvckVhY2godGhhdC4kYXN5bmNWYWxpZGF0b3JzLCBmdW5jdGlvbih2LCBuYW1lKSB7XG4gICAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgdGhlIHBhcnNlIGVycm9yIGxhc3QsIHRvIHByZXZlbnQgdW5zZXR0aW5nIGl0LCBzaG91bGQgYSAkdmFsaWRhdG9ycyBrZXkgPT0gcGFyc2VyTmFtZVxuICAgICAgICBzZXRWYWxpZGl0eShlcnJvcktleSwgdGhhdC4kJHBhcnNlclZhbGlkKTtcbiAgICAgICAgcmV0dXJuIHRoYXQuJCRwYXJzZXJWYWxpZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb2Nlc3NTeW5jVmFsaWRhdG9ycygpIHtcbiAgICAgIHZhciBzeW5jVmFsaWRhdG9yc1ZhbGlkID0gdHJ1ZTtcbiAgICAgIGZvckVhY2godGhhdC4kdmFsaWRhdG9ycywgZnVuY3Rpb24odmFsaWRhdG9yLCBuYW1lKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBCb29sZWFuKHZhbGlkYXRvcihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpKTtcbiAgICAgICAgc3luY1ZhbGlkYXRvcnNWYWxpZCA9IHN5bmNWYWxpZGF0b3JzVmFsaWQgJiYgcmVzdWx0O1xuICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCByZXN1bHQpO1xuICAgICAgfSk7XG4gICAgICBpZiAoIXN5bmNWYWxpZGF0b3JzVmFsaWQpIHtcbiAgICAgICAgZm9yRWFjaCh0aGF0LiRhc3luY1ZhbGlkYXRvcnMsIGZ1bmN0aW9uKHYsIG5hbWUpIHtcbiAgICAgICAgICBzZXRWYWxpZGl0eShuYW1lLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByb2Nlc3NBc3luY1ZhbGlkYXRvcnMoKSB7XG4gICAgICB2YXIgdmFsaWRhdG9yUHJvbWlzZXMgPSBbXTtcbiAgICAgIHZhciBhbGxWYWxpZCA9IHRydWU7XG4gICAgICBmb3JFYWNoKHRoYXQuJGFzeW5jVmFsaWRhdG9ycywgZnVuY3Rpb24odmFsaWRhdG9yLCBuYW1lKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gdmFsaWRhdG9yKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSk7XG4gICAgICAgIGlmICghaXNQcm9taXNlTGlrZShwcm9taXNlKSkge1xuICAgICAgICAgIHRocm93IG5nTW9kZWxNaW5FcnIoJ25vcHJvbWlzZScsXG4gICAgICAgICAgICAnRXhwZWN0ZWQgYXN5bmNocm9ub3VzIHZhbGlkYXRvciB0byByZXR1cm4gYSBwcm9taXNlIGJ1dCBnb3QgXFwnezB9XFwnIGluc3RlYWQuJywgcHJvbWlzZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgdmFsaWRhdG9yUHJvbWlzZXMucHVzaChwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgdHJ1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFsbFZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgc2V0VmFsaWRpdHkobmFtZSwgZmFsc2UpO1xuICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICAgIGlmICghdmFsaWRhdG9yUHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICAgIHZhbGlkYXRpb25Eb25lKHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhhdC4kJHEuYWxsKHZhbGlkYXRvclByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhbGlkYXRpb25Eb25lKGFsbFZhbGlkKTtcbiAgICAgICAgfSwgbm9vcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0VmFsaWRpdHkobmFtZSwgaXNWYWxpZCkge1xuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSB0aGF0LiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCkge1xuICAgICAgICB0aGF0LiRzZXRWYWxpZGl0eShuYW1lLCBpc1ZhbGlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2YWxpZGF0aW9uRG9uZShhbGxWYWxpZCkge1xuICAgICAgaWYgKGxvY2FsVmFsaWRhdGlvblJ1bklkID09PSB0aGF0LiQkY3VycmVudFZhbGlkYXRpb25SdW5JZCkge1xuXG4gICAgICAgIGRvbmVDYWxsYmFjayhhbGxWYWxpZCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJGNvbW1pdFZpZXdWYWx1ZVxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ29tbWl0IGEgcGVuZGluZyB1cGRhdGUgdG8gdGhlIGAkbW9kZWxWYWx1ZWAuXG4gICAqXG4gICAqIFVwZGF0ZXMgbWF5IGJlIHBlbmRpbmcgYnkgYSBkZWJvdW5jZWQgZXZlbnQgb3IgYmVjYXVzZSB0aGUgaW5wdXQgaXMgd2FpdGluZyBmb3IgYSBzb21lIGZ1dHVyZVxuICAgKiBldmVudCBkZWZpbmVkIGluIGBuZy1tb2RlbC1vcHRpb25zYC4gdGhpcyBtZXRob2QgaXMgcmFyZWx5IG5lZWRlZCBhcyBgTmdNb2RlbENvbnRyb2xsZXJgXG4gICAqIHVzdWFsbHkgaGFuZGxlcyBjYWxsaW5nIHRoaXMgaW4gcmVzcG9uc2UgdG8gaW5wdXQgZXZlbnRzLlxuICAgKi9cbiAgJGNvbW1pdFZpZXdWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXdWYWx1ZSA9IHRoaXMuJHZpZXdWYWx1ZTtcblxuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcblxuICAgIC8vIElmIHRoZSB2aWV3IHZhbHVlIGhhcyBub3QgY2hhbmdlZCB0aGVuIHdlIHNob3VsZCBqdXN0IGV4aXQsIGV4Y2VwdCBpbiB0aGUgY2FzZSB3aGVyZSB0aGVyZSBpc1xuICAgIC8vIGEgbmF0aXZlIHZhbGlkYXRvciBvbiB0aGUgZWxlbWVudC4gSW4gdGhpcyBjYXNlIHRoZSB2YWxpZGF0aW9uIHN0YXRlIG1heSBoYXZlIGNoYW5nZWQgZXZlbiB0aG91Z2hcbiAgICAvLyB0aGUgdmlld1ZhbHVlIGhhcyBzdGF5ZWQgZW1wdHkuXG4gICAgaWYgKHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlID09PSB2aWV3VmFsdWUgJiYgKHZpZXdWYWx1ZSAhPT0gJycgfHwgIXRoaXMuJCRoYXNOYXRpdmVWYWxpZGF0b3JzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLiQkdXBkYXRlRW1wdHlDbGFzc2VzKHZpZXdWYWx1ZSk7XG4gICAgdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPSB2aWV3VmFsdWU7XG5cbiAgICAvLyBjaGFuZ2UgdG8gZGlydHlcbiAgICBpZiAodGhpcy4kcHJpc3RpbmUpIHtcbiAgICAgIHRoaXMuJHNldERpcnR5KCk7XG4gICAgfVxuICAgIHRoaXMuJCRwYXJzZUFuZFZhbGlkYXRlKCk7XG4gIH0sXG5cbiAgJCRwYXJzZUFuZFZhbGlkYXRlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgdmlld1ZhbHVlID0gdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU7XG4gICAgdmFyIG1vZGVsVmFsdWUgPSB2aWV3VmFsdWU7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgdGhpcy4kJHBhcnNlclZhbGlkID0gaXNVbmRlZmluZWQobW9kZWxWYWx1ZSkgPyB1bmRlZmluZWQgOiB0cnVlO1xuXG4gICAgaWYgKHRoaXMuJCRwYXJzZXJWYWxpZCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLiRwYXJzZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1vZGVsVmFsdWUgPSB0aGlzLiRwYXJzZXJzW2ldKG1vZGVsVmFsdWUpO1xuICAgICAgICBpZiAoaXNVbmRlZmluZWQobW9kZWxWYWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLiQkcGFyc2VyVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNOdW1iZXJOYU4odGhpcy4kbW9kZWxWYWx1ZSkpIHtcbiAgICAgIC8vIHRoaXMuJG1vZGVsVmFsdWUgaGFzIG5vdCBiZWVuIHRvdWNoZWQgeWV0Li4uXG4gICAgICB0aGlzLiRtb2RlbFZhbHVlID0gdGhpcy4kJG5nTW9kZWxHZXQodGhpcy4kJHNjb3BlKTtcbiAgICB9XG4gICAgdmFyIHByZXZNb2RlbFZhbHVlID0gdGhpcy4kbW9kZWxWYWx1ZTtcbiAgICB2YXIgYWxsb3dJbnZhbGlkID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ2FsbG93SW52YWxpZCcpO1xuICAgIHRoaXMuJCRyYXdNb2RlbFZhbHVlID0gbW9kZWxWYWx1ZTtcblxuICAgIGlmIChhbGxvd0ludmFsaWQpIHtcbiAgICAgIHRoaXMuJG1vZGVsVmFsdWUgPSBtb2RlbFZhbHVlO1xuICAgICAgd3JpdGVUb01vZGVsSWZOZWVkZWQoKTtcbiAgICB9XG5cbiAgICAvLyBQYXNzIHRoZSAkJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgaGVyZSwgYmVjYXVzZSB0aGUgY2FjaGVkIHZpZXdWYWx1ZSBtaWdodCBiZSBvdXQgb2YgZGF0ZS5cbiAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgZS5nLiAkc2V0Vmlld1ZhbHVlIGlzIGNhbGxlZCBmcm9tIGluc2lkZSBhIHBhcnNlclxuICAgIHRoaXMuJCRydW5WYWxpZGF0b3JzKG1vZGVsVmFsdWUsIHRoaXMuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlLCBmdW5jdGlvbihhbGxWYWxpZCkge1xuICAgICAgaWYgKCFhbGxvd0ludmFsaWQpIHtcbiAgICAgICAgLy8gTm90ZTogRG9uJ3QgY2hlY2sgdGhpcy4kdmFsaWQgaGVyZSwgYXMgd2UgY291bGQgaGF2ZVxuICAgICAgICAvLyBleHRlcm5hbCB2YWxpZGF0b3JzIChlLmcuIGNhbGN1bGF0ZWQgb24gdGhlIHNlcnZlciksXG4gICAgICAgIC8vIHRoYXQganVzdCBjYWxsICRzZXRWYWxpZGl0eSBhbmQgbmVlZCB0aGUgbW9kZWwgdmFsdWVcbiAgICAgICAgLy8gdG8gY2FsY3VsYXRlIHRoZWlyIHZhbGlkaXR5LlxuICAgICAgICB0aGF0LiRtb2RlbFZhbHVlID0gYWxsVmFsaWQgPyBtb2RlbFZhbHVlIDogdW5kZWZpbmVkO1xuICAgICAgICB3cml0ZVRvTW9kZWxJZk5lZWRlZCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gd3JpdGVUb01vZGVsSWZOZWVkZWQoKSB7XG4gICAgICBpZiAodGhhdC4kbW9kZWxWYWx1ZSAhPT0gcHJldk1vZGVsVmFsdWUpIHtcbiAgICAgICAgdGhhdC4kJHdyaXRlTW9kZWxUb1Njb3BlKCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gICQkd3JpdGVNb2RlbFRvU2NvcGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJCRuZ01vZGVsU2V0KHRoaXMuJCRzY29wZSwgdGhpcy4kbW9kZWxWYWx1ZSk7XG4gICAgZm9yRWFjaCh0aGlzLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLCBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGlzdGVuZXIoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWludmFsaWQtdGhpc1xuICAgICAgICB0aGlzLiQkZXhjZXB0aW9uSGFuZGxlcihlKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWaWV3VmFsdWVcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFVwZGF0ZSB0aGUgdmlldyB2YWx1ZS5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCB3aGVuIGEgY29udHJvbCB3YW50cyB0byBjaGFuZ2UgdGhlIHZpZXcgdmFsdWU7IHR5cGljYWxseSxcbiAgICogdGhpcyBpcyBkb25lIGZyb20gd2l0aGluIGEgRE9NIGV2ZW50IGhhbmRsZXIuIEZvciBleGFtcGxlLCB0aGUge0BsaW5rIG5nLmRpcmVjdGl2ZTppbnB1dCBpbnB1dH1cbiAgICogZGlyZWN0aXZlIGNhbGxzIGl0IHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBpbnB1dCBjaGFuZ2VzIGFuZCB7QGxpbmsgbmcuZGlyZWN0aXZlOnNlbGVjdCBzZWxlY3R9XG4gICAqIGNhbGxzIGl0IHdoZW4gYW4gb3B0aW9uIGlzIHNlbGVjdGVkLlxuICAgKlxuICAgKiBXaGVuIGAkc2V0Vmlld1ZhbHVlYCBpcyBjYWxsZWQsIHRoZSBuZXcgYHZhbHVlYCB3aWxsIGJlIHN0YWdlZCBmb3IgY29tbWl0dGluZyB0aHJvdWdoIHRoZSBgJHBhcnNlcnNgXG4gICAqIGFuZCBgJHZhbGlkYXRvcnNgIHBpcGVsaW5lcy4gSWYgdGhlcmUgYXJlIG5vIHNwZWNpYWwge0BsaW5rIG5nTW9kZWxPcHRpb25zfSBzcGVjaWZpZWQgdGhlbiB0aGUgc3RhZ2VkXG4gICAqIHZhbHVlIGlzIHNlbnQgZGlyZWN0bHkgZm9yIHByb2Nlc3NpbmcgdGhyb3VnaCB0aGUgYCRwYXJzZXJzYCBwaXBlbGluZS4gQWZ0ZXIgdGhpcywgdGhlIGAkdmFsaWRhdG9yc2AgYW5kXG4gICAqIGAkYXN5bmNWYWxpZGF0b3JzYCBhcmUgY2FsbGVkIGFuZCB0aGUgdmFsdWUgaXMgYXBwbGllZCB0byBgJG1vZGVsVmFsdWVgLlxuICAgKiBGaW5hbGx5LCB0aGUgdmFsdWUgaXMgc2V0IHRvIHRoZSAqKmV4cHJlc3Npb24qKiBzcGVjaWZpZWQgaW4gdGhlIGBuZy1tb2RlbGAgYXR0cmlidXRlIGFuZFxuICAgKiBhbGwgdGhlIHJlZ2lzdGVyZWQgY2hhbmdlIGxpc3RlbmVycywgaW4gdGhlIGAkdmlld0NoYW5nZUxpc3RlbmVyc2AgbGlzdCBhcmUgY2FsbGVkLlxuICAgKlxuICAgKiBJbiBjYXNlIHRoZSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIG5nTW9kZWxPcHRpb25zfSBkaXJlY3RpdmUgaXMgdXNlZCB3aXRoIGB1cGRhdGVPbmBcbiAgICogYW5kIHRoZSBgZGVmYXVsdGAgdHJpZ2dlciBpcyBub3QgbGlzdGVkLCBhbGwgdGhvc2UgYWN0aW9ucyB3aWxsIHJlbWFpbiBwZW5kaW5nIHVudGlsIG9uZSBvZiB0aGVcbiAgICogYHVwZGF0ZU9uYCBldmVudHMgaXMgdHJpZ2dlcmVkIG9uIHRoZSBET00gZWxlbWVudC5cbiAgICogQWxsIHRoZXNlIGFjdGlvbnMgd2lsbCBiZSBkZWJvdW5jZWQgaWYgdGhlIHtAbGluayBuZy5kaXJlY3RpdmU6bmdNb2RlbE9wdGlvbnMgbmdNb2RlbE9wdGlvbnN9XG4gICAqIGRpcmVjdGl2ZSBpcyB1c2VkIHdpdGggYSBjdXN0b20gZGVib3VuY2UgZm9yIHRoaXMgcGFydGljdWxhciBldmVudC5cbiAgICogTm90ZSB0aGF0IGEgYCRkaWdlc3RgIGlzIG9ubHkgdHJpZ2dlcmVkIG9uY2UgdGhlIGB1cGRhdGVPbmAgZXZlbnRzIGFyZSBmaXJlZCwgb3IgaWYgYGRlYm91bmNlYFxuICAgKiBpcyBzcGVjaWZpZWQsIG9uY2UgdGhlIHRpbWVyIHJ1bnMgb3V0LlxuICAgKlxuICAgKiBXaGVuIHVzZWQgd2l0aCBzdGFuZGFyZCBpbnB1dHMsIHRoZSB2aWV3IHZhbHVlIHdpbGwgYWx3YXlzIGJlIGEgc3RyaW5nICh3aGljaCBpcyBpbiBzb21lIGNhc2VzXG4gICAqIHBhcnNlZCBpbnRvIGFub3RoZXIgdHlwZSwgc3VjaCBhcyBhIGBEYXRlYCBvYmplY3QgZm9yIGBpbnB1dFtkYXRlXWAuKVxuICAgKiBIb3dldmVyLCBjdXN0b20gY29udHJvbHMgbWlnaHQgYWxzbyBwYXNzIG9iamVjdHMgdG8gdGhpcyBtZXRob2QuIEluIHRoaXMgY2FzZSwgd2Ugc2hvdWxkIG1ha2VcbiAgICogYSBjb3B5IG9mIHRoZSBvYmplY3QgYmVmb3JlIHBhc3NpbmcgaXQgdG8gYCRzZXRWaWV3VmFsdWVgLiBUaGlzIGlzIGJlY2F1c2UgYG5nTW9kZWxgIGRvZXMgbm90XG4gICAqIHBlcmZvcm0gYSBkZWVwIHdhdGNoIG9mIG9iamVjdHMsIGl0IG9ubHkgbG9va3MgZm9yIGEgY2hhbmdlIG9mIGlkZW50aXR5LiBJZiB5b3Ugb25seSBjaGFuZ2VcbiAgICogdGhlIHByb3BlcnR5IG9mIHRoZSBvYmplY3QgdGhlbiBuZ01vZGVsIHdpbGwgbm90IHJlYWxpemUgdGhhdCB0aGUgb2JqZWN0IGhhcyBjaGFuZ2VkIGFuZFxuICAgKiB3aWxsIG5vdCBpbnZva2UgdGhlIGAkcGFyc2Vyc2AgYW5kIGAkdmFsaWRhdG9yc2AgcGlwZWxpbmVzLiBGb3IgdGhpcyByZWFzb24sIHlvdSBzaG91bGRcbiAgICogbm90IGNoYW5nZSBwcm9wZXJ0aWVzIG9mIHRoZSBjb3B5IG9uY2UgaXQgaGFzIGJlZW4gcGFzc2VkIHRvIGAkc2V0Vmlld1ZhbHVlYC5cbiAgICogT3RoZXJ3aXNlIHlvdSBtYXkgY2F1c2UgdGhlIG1vZGVsIHZhbHVlIG9uIHRoZSBzY29wZSB0byBjaGFuZ2UgaW5jb3JyZWN0bHkuXG4gICAqXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gICAqIEluIGFueSBjYXNlLCB0aGUgdmFsdWUgcGFzc2VkIHRvIHRoZSBtZXRob2Qgc2hvdWxkIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHZhbHVlXG4gICAqIG9mIHRoZSBjb250cm9sLiBGb3IgZXhhbXBsZSwgaWYgeW91IGFyZSBjYWxsaW5nIGAkc2V0Vmlld1ZhbHVlYCBmb3IgYW4gaW5wdXQgZWxlbWVudCxcbiAgICogeW91IHNob3VsZCBwYXNzIHRoZSBpbnB1dCBET00gdmFsdWUuIE90aGVyd2lzZSwgdGhlIGNvbnRyb2wgYW5kIHRoZSBzY29wZSBtb2RlbCBiZWNvbWVcbiAgICogb3V0IG9mIHN5bmMuIEl0J3MgYWxzbyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IGAkc2V0Vmlld1ZhbHVlYCBkb2VzIG5vdCBjYWxsIGAkcmVuZGVyYCBvciBjaGFuZ2VcbiAgICogdGhlIGNvbnRyb2wncyBET00gdmFsdWUgaW4gYW55IHdheS4gSWYgd2Ugd2FudCB0byBjaGFuZ2UgdGhlIGNvbnRyb2wncyBET00gdmFsdWVcbiAgICogcHJvZ3JhbW1hdGljYWxseSwgd2Ugc2hvdWxkIHVwZGF0ZSB0aGUgYG5nTW9kZWxgIHNjb3BlIGV4cHJlc3Npb24uIEl0cyBuZXcgdmFsdWUgd2lsbCBiZVxuICAgKiBwaWNrZWQgdXAgYnkgdGhlIG1vZGVsIGNvbnRyb2xsZXIsIHdoaWNoIHdpbGwgcnVuIGl0IHRocm91Z2ggdGhlIGAkZm9ybWF0dGVyc2AsIGAkcmVuZGVyYCBpdFxuICAgKiB0byB1cGRhdGUgdGhlIERPTSwgYW5kIGZpbmFsbHkgY2FsbCBgJHZhbGlkYXRlYCBvbiBpdC5cbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgdmFsdWUgZnJvbSB0aGUgdmlldy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyaWdnZXIgRXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhlIHVwZGF0ZS5cbiAgICovXG4gICRzZXRWaWV3VmFsdWU6IGZ1bmN0aW9uKHZhbHVlLCB0cmlnZ2VyKSB7XG4gICAgdGhpcy4kdmlld1ZhbHVlID0gdmFsdWU7XG4gICAgaWYgKHRoaXMuJG9wdGlvbnMuZ2V0T3B0aW9uKCd1cGRhdGVPbkRlZmF1bHQnKSkge1xuICAgICAgdGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KHRyaWdnZXIpO1xuICAgIH1cbiAgfSxcblxuICAkJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0OiBmdW5jdGlvbih0cmlnZ2VyKSB7XG4gICAgdmFyIGRlYm91bmNlRGVsYXkgPSB0aGlzLiRvcHRpb25zLmdldE9wdGlvbignZGVib3VuY2UnKTtcblxuICAgIGlmIChpc051bWJlcihkZWJvdW5jZURlbGF5W3RyaWdnZXJdKSkge1xuICAgICAgZGVib3VuY2VEZWxheSA9IGRlYm91bmNlRGVsYXlbdHJpZ2dlcl07XG4gICAgfSBlbHNlIGlmIChpc051bWJlcihkZWJvdW5jZURlbGF5WydkZWZhdWx0J10pKSB7XG4gICAgICBkZWJvdW5jZURlbGF5ID0gZGVib3VuY2VEZWxheVsnZGVmYXVsdCddO1xuICAgIH1cblxuICAgIHRoaXMuJCR0aW1lb3V0LmNhbmNlbCh0aGlzLiQkcGVuZGluZ0RlYm91bmNlKTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgaWYgKGRlYm91bmNlRGVsYXkgPiAwKSB7IC8vIHRoaXMgZmFpbHMgaWYgZGVib3VuY2VEZWxheSBpcyBhbiBvYmplY3RcbiAgICAgIHRoaXMuJCRwZW5kaW5nRGVib3VuY2UgPSB0aGlzLiQkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICB9LCBkZWJvdW5jZURlbGF5KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuJCRzY29wZS4kcm9vdC4kJHBoYXNlKSB7XG4gICAgICB0aGlzLiRjb21taXRWaWV3VmFsdWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgdGhhdC4kY29tbWl0Vmlld1ZhbHVlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICpcbiAgICogQG5hbWUgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkb3ZlcnJpZGVNb2RlbE9wdGlvbnNcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIE92ZXJyaWRlIHRoZSBjdXJyZW50IG1vZGVsIG9wdGlvbnMgc2V0dGluZ3MgcHJvZ3JhbW1hdGljYWxseS5cbiAgICpcbiAgICogVGhlIHByZXZpb3VzIGBNb2RlbE9wdGlvbnNgIHZhbHVlIHdpbGwgbm90IGJlIG1vZGlmaWVkLiBJbnN0ZWFkLCBhXG4gICAqIG5ldyBgTW9kZWxPcHRpb25zYCBvYmplY3Qgd2lsbCBpbmhlcml0IGZyb20gdGhlIHByZXZpb3VzIG9uZSBvdmVycmlkaW5nXG4gICAqIG9yIGluaGVyaXRpbmcgc2V0dGluZ3MgdGhhdCBhcmUgZGVmaW5lZCBpbiB0aGUgZ2l2ZW4gcGFyYW1ldGVyLlxuICAgKlxuICAgKiBTZWUge0BsaW5rIG5nTW9kZWxPcHRpb25zfSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgd2hhdCBvcHRpb25zIGNhbiBiZSBzcGVjaWZpZWRcbiAgICogYW5kIGhvdyBtb2RlbCBvcHRpb24gaW5oZXJpdGFuY2Ugd29ya3MuXG4gICAqXG4gICAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gICAqICoqTm90ZToqKiB0aGlzIGZ1bmN0aW9uIG9ubHkgYWZmZWN0cyB0aGUgb3B0aW9ucyBzZXQgb24gdGhlIGBuZ01vZGVsQ29udHJvbGxlcmAsXG4gICAqIGFuZCBub3QgdGhlIG9wdGlvbnMgb24gdGhlIHtAbGluayBuZ01vZGVsT3B0aW9uc30gZGlyZWN0aXZlIGZyb20gd2hpY2ggdGhleSBtaWdodCBoYXZlIGJlZW5cbiAgICogb2J0YWluZWQgaW5pdGlhbGx5LlxuICAgKiA8L2Rpdj5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlclwiPlxuICAgKiAqKk5vdGU6KiogaXQgaXMgbm90IHBvc3NpYmxlIHRvIG92ZXJyaWRlIHRoZSBgZ2V0dGVyU2V0dGVyYCBvcHRpb24uXG4gICAqIDwvZGl2PlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBhIGhhc2ggb2Ygc2V0dGluZ3MgdG8gb3ZlcnJpZGUgdGhlIHByZXZpb3VzIG9wdGlvbnNcbiAgICpcbiAgICovXG4gICRvdmVycmlkZU1vZGVsT3B0aW9uczogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHRoaXMuJG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zLmNyZWF0ZUNoaWxkKG9wdGlvbnMpO1xuICAgIHRoaXMuJCRzZXRVcGRhdGVPbkV2ZW50cygpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqXG4gICAqIEBuYW1lICBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRwcm9jZXNzTW9kZWxWYWx1ZVxuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBSdW5zIHRoZSBtb2RlbCAtPiB2aWV3IHBpcGVsaW5lIG9uIHRoZSBjdXJyZW50XG4gICAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRtb2RlbFZhbHVlICRtb2RlbFZhbHVlfS5cbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgYnkgdGhpcyBtZXRob2Q6XG4gICAqXG4gICAqIC0gdGhlIGAkbW9kZWxWYWx1ZWAgaXMgcnVuIHRocm91Z2ggdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRmb3JtYXR0ZXJzICRmb3JtYXR0ZXJzfVxuICAgKiBhbmQgdGhlIHJlc3VsdCBpcyBzZXQgdG8gdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgJHZpZXdWYWx1ZX1cbiAgICogLSB0aGUgYG5nLWVtcHR5YCBvciBgbmctbm90LWVtcHR5YCBjbGFzcyBpcyBzZXQgb24gdGhlIGVsZW1lbnRcbiAgICogLSBpZiB0aGUgYCR2aWV3VmFsdWVgIGhhcyBjaGFuZ2VkOlxuICAgKiAgIC0ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHJlbmRlciAkcmVuZGVyfSBpcyBjYWxsZWQgb24gdGhlIGNvbnRyb2xcbiAgICogICAtIHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyAkdmFsaWRhdG9yc30gYXJlIHJ1biBhbmRcbiAgICogICB0aGUgdmFsaWRhdGlvbiBzdGF0dXMgaXMgc2V0LlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgbmdNb2RlbCBpbnRlcm5hbGx5IHdoZW4gdGhlIGJvdW5kIHNjb3BlIHZhbHVlIGNoYW5nZXMuXG4gICAqIEFwcGxpY2F0aW9uIGRldmVsb3BlcnMgdXN1YWxseSBkbyBub3QgaGF2ZSB0byBjYWxsIHRoaXMgZnVuY3Rpb24gdGhlbXNlbHZlcy5cbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgdXNlZCB3aGVuIHRoZSBgJHZpZXdWYWx1ZWAgb3IgdGhlIHJlbmRlcmVkIERPTSB2YWx1ZSBhcmUgbm90IGNvcnJlY3RseVxuICAgKiBmb3JtYXR0ZWQgYW5kIHRoZSBgJG1vZGVsVmFsdWVgIG11c3QgYmUgcnVuIHRocm91Z2ggdGhlIGAkZm9ybWF0dGVyc2AgYWdhaW4uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIENvbnNpZGVyIGEgdGV4dCBpbnB1dCB3aXRoIGFuIGF1dG9jb21wbGV0ZSBsaXN0IChmb3IgZnJ1aXQpLCB3aGVyZSB0aGUgaXRlbXMgYXJlXG4gICAqIG9iamVjdHMgd2l0aCBhIG5hbWUgYW5kIGFuIGlkLlxuICAgKiBBIHVzZXIgZW50ZXJzIGBhcGAgYW5kIHRoZW4gc2VsZWN0cyBgQXByaWNvdGAgZnJvbSB0aGUgbGlzdC5cbiAgICogQmFzZWQgb24gdGhpcywgdGhlIGF1dG9jb21wbGV0ZSB3aWRnZXQgd2lsbCBjYWxsIGAkc2V0Vmlld1ZhbHVlKHtuYW1lOiAnQXByaWNvdCcsIGlkOiA0NDN9KWAsXG4gICAqIGJ1dCB0aGUgcmVuZGVyZWQgdmFsdWUgd2lsbCBzdGlsbCBiZSBgYXBgLlxuICAgKiBUaGUgd2lkZ2V0IGNhbiB0aGVuIGNhbGwgYGN0cmwuJHByb2Nlc3NNb2RlbFZhbHVlKClgIHRvIHJ1biB0aGUgbW9kZWwgLT4gdmlld1xuICAgKiBwaXBlbGluZSBhZ2Fpbiwgd2hpY2ggZm9ybWF0cyB0aGUgb2JqZWN0IHRvIHRoZSBzdHJpbmcgYEFwcmljb3RgLFxuICAgKiB0aGVuIHVwZGF0ZXMgdGhlIGAkdmlld1ZhbHVlYCwgYW5kIGZpbmFsbHkgcmVuZGVycyBpdCBpbiB0aGUgRE9NLlxuICAgKlxuICAgKiA8ZXhhbXBsZSBtb2R1bGU9XCJpbnB1dEV4YW1wbGVcIiBuYW1lPVwibmctbW9kZWwtcHJvY2Vzc1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiaW5wdXRDb250cm9sbGVyXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4O1wiPlxuICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLXJpZ2h0OiAzMHB4O1wiPlxuICAgICAgICAgIFNlYXJjaCBGcnVpdDpcbiAgICAgICAgICA8YmFzaWMtYXV0b2NvbXBsZXRlIGl0ZW1zPVwiaXRlbXNcIiBvbi1zZWxlY3Q9XCJzZWxlY3RlZEZydWl0ID0gaXRlbVwiPjwvYmFzaWMtYXV0b2NvbXBsZXRlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICBNb2RlbDo8YnI+XG4gICAgICAgICAgPHByZT57e3NlbGVjdGVkRnJ1aXQgfCBqc29ufX08L3ByZT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gICAgICBhbmd1bGFyLm1vZHVsZSgnaW5wdXRFeGFtcGxlJywgW10pXG4gICAgICAgIC5jb250cm9sbGVyKCdpbnB1dENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAkc2NvcGUuaXRlbXMgPSBbXG4gICAgICAgICAgICB7bmFtZTogJ0Fwcmljb3QnLCBpZDogNDQzfSxcbiAgICAgICAgICAgIHtuYW1lOiAnQ2xlbWVudGluZScsIGlkOiA5NzJ9LFxuICAgICAgICAgICAge25hbWU6ICdEdXJpYW4nLCBpZDogMTY5fSxcbiAgICAgICAgICAgIHtuYW1lOiAnSmFja2ZydWl0JywgaWQ6IDk4Mn0sXG4gICAgICAgICAgICB7bmFtZTogJ1N0cmF3YmVycnknLCBpZDogODYzfVxuICAgICAgICAgIF07XG4gICAgICAgIH0pXG4gICAgICAgIC5jb21wb25lbnQoJ2Jhc2ljQXV0b2NvbXBsZXRlJywge1xuICAgICAgICAgIGJpbmRpbmdzOiB7XG4gICAgICAgICAgICBpdGVtczogJzwnLFxuICAgICAgICAgICAgb25TZWxlY3Q6ICcmJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRvY29tcGxldGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJGVsZW1lbnQsICRzY29wZSkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG5nTW9kZWw7XG5cbiAgICAgICAgICAgIHRoYXQuJHBvc3RMaW5rID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIG5nTW9kZWwgPSAkZWxlbWVudC5maW5kKCdpbnB1dCcpLmNvbnRyb2xsZXIoJ25nTW9kZWwnKTtcblxuICAgICAgICAgICAgICBuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlICYmIHZhbHVlLm5hbWUpIHx8IHZhbHVlO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBuZ01vZGVsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoYXQuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0aGF0Lml0ZW1zW2ldLm5hbWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gdGhhdC5pdGVtc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoYXQuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKGl0ZW0pO1xuICAgICAgICAgICAgICBuZ01vZGVsLiRwcm9jZXNzTW9kZWxWYWx1ZSgpO1xuICAgICAgICAgICAgICB0aGF0Lm9uU2VsZWN0KHtpdGVtOiBpdGVtfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImF1dG9jb21wbGV0ZS5odG1sXCI+XG4gICAgICAgPGRpdj5cbiAgICAgICAgIDxpbnB1dCB0eXBlPVwic2VhcmNoXCIgbmctbW9kZWw9XCIkY3RybC5zZWFyY2hUZXJtXCIgLz5cbiAgICAgICAgIDx1bD5cbiAgICAgICAgICAgPGxpIG5nLXJlcGVhdD1cIml0ZW0gaW4gJGN0cmwuaXRlbXMgfCBmaWx0ZXI6JGN0cmwuc2VhcmNoVGVybVwiPlxuICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCIkY3RybC5zZWxlY3RJdGVtKGl0ZW0pXCI+e3sgaXRlbS5uYW1lIH19PC9idXR0b24+XG4gICAgICAgICAgIDwvbGk+XG4gICAgICAgICA8L3VsPlxuICAgICAgIDwvZGl2PlxuICAgICA8L2ZpbGU+XG4gICAqIDwvZXhhbXBsZT5cbiAgICpcbiAgICovXG4gICRwcm9jZXNzTW9kZWxWYWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZpZXdWYWx1ZSA9IHRoaXMuJCRmb3JtYXQoKTtcblxuICAgIGlmICh0aGlzLiR2aWV3VmFsdWUgIT09IHZpZXdWYWx1ZSkge1xuICAgICAgdGhpcy4kJHVwZGF0ZUVtcHR5Q2xhc3Nlcyh2aWV3VmFsdWUpO1xuICAgICAgdGhpcy4kdmlld1ZhbHVlID0gdGhpcy4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUgPSB2aWV3VmFsdWU7XG4gICAgICB0aGlzLiRyZW5kZXIoKTtcbiAgICAgIC8vIEl0IGlzIHBvc3NpYmxlIHRoYXQgbW9kZWwgYW5kIHZpZXcgdmFsdWUgaGF2ZSBiZWVuIHVwZGF0ZWQgZHVyaW5nIHJlbmRlclxuICAgICAgdGhpcy4kJHJ1blZhbGlkYXRvcnModGhpcy4kbW9kZWxWYWx1ZSwgdGhpcy4kdmlld1ZhbHVlLCBub29wKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBpbnRlcm5hbGx5IHRvIHJ1biB0aGUgJGZvcm1hdHRlcnMgb24gdGhlICRtb2RlbFZhbHVlXG4gICAqL1xuICAkJGZvcm1hdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZvcm1hdHRlcnMgPSB0aGlzLiRmb3JtYXR0ZXJzLFxuICAgICAgICBpZHggPSBmb3JtYXR0ZXJzLmxlbmd0aDtcblxuICAgIHZhciB2aWV3VmFsdWUgPSB0aGlzLiRtb2RlbFZhbHVlO1xuICAgIHdoaWxlIChpZHgtLSkge1xuICAgICAgdmlld1ZhbHVlID0gZm9ybWF0dGVyc1tpZHhdKHZpZXdWYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZpZXdWYWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIGludGVybmFsbHkgd2hlbiB0aGUgYm91bmQgc2NvcGUgdmFsdWUgY2hhbmdlcy5cbiAgICovXG4gICQkc2V0TW9kZWxWYWx1ZTogZnVuY3Rpb24obW9kZWxWYWx1ZSkge1xuICAgIHRoaXMuJG1vZGVsVmFsdWUgPSB0aGlzLiQkcmF3TW9kZWxWYWx1ZSA9IG1vZGVsVmFsdWU7XG4gICAgdGhpcy4kJHBhcnNlclZhbGlkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuJHByb2Nlc3NNb2RlbFZhbHVlKCk7XG4gIH0sXG5cbiAgJCRzZXRVcGRhdGVPbkV2ZW50czogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuJCR1cGRhdGVFdmVudHMpIHtcbiAgICAgIHRoaXMuJCRlbGVtZW50Lm9mZih0aGlzLiQkdXBkYXRlRXZlbnRzLCB0aGlzLiQkdXBkYXRlRXZlbnRIYW5kbGVyKTtcbiAgICB9XG5cbiAgICB0aGlzLiQkdXBkYXRlRXZlbnRzID0gdGhpcy4kb3B0aW9ucy5nZXRPcHRpb24oJ3VwZGF0ZU9uJyk7XG4gICAgaWYgKHRoaXMuJCR1cGRhdGVFdmVudHMpIHtcbiAgICAgIHRoaXMuJCRlbGVtZW50Lm9uKHRoaXMuJCR1cGRhdGVFdmVudHMsIHRoaXMuJCR1cGRhdGVFdmVudEhhbmRsZXIpO1xuICAgIH1cbiAgfSxcblxuICAkJHVwZGF0ZUV2ZW50SGFuZGxlcjogZnVuY3Rpb24oZXYpIHtcbiAgICB0aGlzLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoZXYgJiYgZXYudHlwZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNldHVwTW9kZWxXYXRjaGVyKGN0cmwpIHtcbiAgLy8gbW9kZWwgLT4gdmFsdWVcbiAgLy8gTm90ZTogd2UgY2Fubm90IHVzZSBhIG5vcm1hbCBzY29wZS4kd2F0Y2ggYXMgd2Ugd2FudCB0byBkZXRlY3QgdGhlIGZvbGxvd2luZzpcbiAgLy8gMS4gc2NvcGUgdmFsdWUgaXMgJ2EnXG4gIC8vIDIuIHVzZXIgZW50ZXJzICdiJ1xuICAvLyAzLiBuZy1jaGFuZ2Uga2lja3MgaW4gYW5kIHJldmVydHMgc2NvcGUgdmFsdWUgdG8gJ2EnXG4gIC8vICAgIC0+IHNjb3BlIHZhbHVlIGRpZCBub3QgY2hhbmdlIHNpbmNlIHRoZSBsYXN0IGRpZ2VzdCBhc1xuICAvLyAgICAgICBuZy1jaGFuZ2UgZXhlY3V0ZXMgaW4gYXBwbHkgcGhhc2VcbiAgLy8gNC4gdmlldyBzaG91bGQgYmUgY2hhbmdlZCBiYWNrIHRvICdhJ1xuICBjdHJsLiQkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIG5nTW9kZWxXYXRjaChzY29wZSkge1xuICAgIHZhciBtb2RlbFZhbHVlID0gY3RybC4kJG5nTW9kZWxHZXQoc2NvcGUpO1xuXG4gICAgLy8gaWYgc2NvcGUgbW9kZWwgdmFsdWUgYW5kIG5nTW9kZWwgdmFsdWUgYXJlIG91dCBvZiBzeW5jXG4gICAgLy8gVGhpcyBjYW5ub3QgYmUgbW92ZWQgdG8gdGhlIGFjdGlvbiBmdW5jdGlvbiwgYmVjYXVzZSBpdCB3b3VsZCBub3QgY2F0Y2ggdGhlXG4gICAgLy8gY2FzZSB3aGVyZSB0aGUgbW9kZWwgaXMgY2hhbmdlZCBpbiB0aGUgbmdDaGFuZ2UgZnVuY3Rpb24gb3IgdGhlIG1vZGVsIHNldHRlclxuICAgIGlmIChtb2RlbFZhbHVlICE9PSBjdHJsLiRtb2RlbFZhbHVlICYmXG4gICAgICAvLyBjaGVja3MgZm9yIE5hTiBpcyBuZWVkZWQgdG8gYWxsb3cgc2V0dGluZyB0aGUgbW9kZWwgdG8gTmFOIHdoZW4gdGhlcmUncyBhbiBhc3luY1ZhbGlkYXRvclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZVxuICAgICAgKGN0cmwuJG1vZGVsVmFsdWUgPT09IGN0cmwuJG1vZGVsVmFsdWUgfHwgbW9kZWxWYWx1ZSA9PT0gbW9kZWxWYWx1ZSlcbiAgICApIHtcbiAgICAgIGN0cmwuJCRzZXRNb2RlbFZhbHVlKG1vZGVsVmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBtb2RlbFZhbHVlO1xuICB9KTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgbWV0aG9kXG4gKiBAbmFtZSBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRzZXRWYWxpZGl0eVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ2hhbmdlIHRoZSB2YWxpZGl0eSBzdGF0ZSwgYW5kIG5vdGlmeSB0aGUgZm9ybS5cbiAqXG4gKiBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIHdpdGhpbiAkcGFyc2Vycy8kZm9ybWF0dGVycyBvciBhIGN1c3RvbSB2YWxpZGF0aW9uIGltcGxlbWVudGF0aW9uLlxuICogSG93ZXZlciwgaW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgc3VmZmljaWVudCB0byB1c2UgdGhlIGBuZ01vZGVsLiR2YWxpZGF0b3JzYCBhbmRcbiAqIGBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnNgIGNvbGxlY3Rpb25zIHdoaWNoIHdpbGwgY2FsbCBgJHNldFZhbGlkaXR5YCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWxpZGF0aW9uRXJyb3JLZXkgTmFtZSBvZiB0aGUgdmFsaWRhdG9yLiBUaGUgYHZhbGlkYXRpb25FcnJvcktleWAgd2lsbCBiZSBhc3NpZ25lZFxuICogICAgICAgIHRvIGVpdGhlciBgJGVycm9yW3ZhbGlkYXRpb25FcnJvcktleV1gIG9yIGAkcGVuZGluZ1t2YWxpZGF0aW9uRXJyb3JLZXldYFxuICogICAgICAgIChmb3IgdW5mdWxmaWxsZWQgYCRhc3luY1ZhbGlkYXRvcnNgKSwgc28gdGhhdCBpdCBpcyBhdmFpbGFibGUgZm9yIGRhdGEtYmluZGluZy5cbiAqICAgICAgICBUaGUgYHZhbGlkYXRpb25FcnJvcktleWAgc2hvdWxkIGJlIGluIGNhbWVsQ2FzZSBhbmQgd2lsbCBnZXQgY29udmVydGVkIGludG8gZGFzaC1jYXNlXG4gKiAgICAgICAgZm9yIGNsYXNzIG5hbWUuIEV4YW1wbGU6IGBteUVycm9yYCB3aWxsIHJlc3VsdCBpbiBgbmctdmFsaWQtbXktZXJyb3JgIGFuZCBgbmctaW52YWxpZC1teS1lcnJvcmBcbiAqICAgICAgICBjbGFzc2VzIGFuZCBjYW4gYmUgYm91bmQgdG8gYXMgYHt7IHNvbWVGb3JtLnNvbWVDb250cm9sLiRlcnJvci5teUVycm9yIH19YC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNWYWxpZCBXaGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIGlzIHZhbGlkICh0cnVlKSwgaW52YWxpZCAoZmFsc2UpLCBwZW5kaW5nICh1bmRlZmluZWQpLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgIG9yIHNraXBwZWQgKG51bGwpLiBQZW5kaW5nIGlzIHVzZWQgZm9yIHVuZnVsZmlsbGVkIGAkYXN5bmNWYWxpZGF0b3JzYC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBTa2lwcGVkIGlzIHVzZWQgYnkgQW5ndWxhciB3aGVuIHZhbGlkYXRvcnMgZG8gbm90IHJ1biBiZWNhdXNlIG9mIHBhcnNlIGVycm9ycyBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVuIGAkYXN5bmNWYWxpZGF0b3JzYCBkbyBub3QgcnVuIGJlY2F1c2UgYW55IG9mIHRoZSBgJHZhbGlkYXRvcnNgIGZhaWxlZC5cbiAqL1xuYWRkU2V0VmFsaWRpdHlNZXRob2Qoe1xuICBjbGF6ejogTmdNb2RlbENvbnRyb2xsZXIsXG4gIHNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIG9iamVjdFtwcm9wZXJ0eV0gPSB0cnVlO1xuICB9LFxuICB1bnNldDogZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkge1xuICAgIGRlbGV0ZSBvYmplY3RbcHJvcGVydHldO1xuICB9XG59KTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTW9kZWxcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01vZGVsIGFzc2lnbmFibGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gRXhwcmVzc2lvbn0gdG8gYmluZCB0by5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdNb2RlbGAgZGlyZWN0aXZlIGJpbmRzIGFuIGBpbnB1dGAsYHNlbGVjdGAsIGB0ZXh0YXJlYWAgKG9yIGN1c3RvbSBmb3JtIGNvbnRyb2wpIHRvIGFcbiAqIHByb3BlcnR5IG9uIHRoZSBzY29wZSB1c2luZyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciBOZ01vZGVsQ29udHJvbGxlcn0sXG4gKiB3aGljaCBpcyBjcmVhdGVkIGFuZCBleHBvc2VkIGJ5IHRoaXMgZGlyZWN0aXZlLlxuICpcbiAqIGBuZ01vZGVsYCBpcyByZXNwb25zaWJsZSBmb3I6XG4gKlxuICogLSBCaW5kaW5nIHRoZSB2aWV3IGludG8gdGhlIG1vZGVsLCB3aGljaCBvdGhlciBkaXJlY3RpdmVzIHN1Y2ggYXMgYGlucHV0YCwgYHRleHRhcmVhYCBvciBgc2VsZWN0YFxuICogICByZXF1aXJlLlxuICogLSBQcm92aWRpbmcgdmFsaWRhdGlvbiBiZWhhdmlvciAoaS5lLiByZXF1aXJlZCwgbnVtYmVyLCBlbWFpbCwgdXJsKS5cbiAqIC0gS2VlcGluZyB0aGUgc3RhdGUgb2YgdGhlIGNvbnRyb2wgKHZhbGlkL2ludmFsaWQsIGRpcnR5L3ByaXN0aW5lLCB0b3VjaGVkL3VudG91Y2hlZCwgdmFsaWRhdGlvbiBlcnJvcnMpLlxuICogLSBTZXR0aW5nIHJlbGF0ZWQgY3NzIGNsYXNzZXMgb24gdGhlIGVsZW1lbnQgKGBuZy12YWxpZGAsIGBuZy1pbnZhbGlkYCwgYG5nLWRpcnR5YCwgYG5nLXByaXN0aW5lYCwgYG5nLXRvdWNoZWRgLFxuICogICBgbmctdW50b3VjaGVkYCwgYG5nLWVtcHR5YCwgYG5nLW5vdC1lbXB0eWApIGluY2x1ZGluZyBhbmltYXRpb25zLlxuICogLSBSZWdpc3RlcmluZyB0aGUgY29udHJvbCB3aXRoIGl0cyBwYXJlbnQge0BsaW5rIG5nLmRpcmVjdGl2ZTpmb3JtIGZvcm19LlxuICpcbiAqIE5vdGU6IGBuZ01vZGVsYCB3aWxsIHRyeSB0byBiaW5kIHRvIHRoZSBwcm9wZXJ0eSBnaXZlbiBieSBldmFsdWF0aW5nIHRoZSBleHByZXNzaW9uIG9uIHRoZVxuICogY3VycmVudCBzY29wZS4gSWYgdGhlIHByb3BlcnR5IGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBvbiB0aGlzIHNjb3BlLCBpdCB3aWxsIGJlIGNyZWF0ZWRcbiAqIGltcGxpY2l0bHkgYW5kIGFkZGVkIHRvIHRoZSBzY29wZS5cbiAqXG4gKiBGb3IgYmVzdCBwcmFjdGljZXMgb24gdXNpbmcgYG5nTW9kZWxgLCBzZWU6XG4gKlxuICogIC0gW1VuZGVyc3RhbmRpbmcgU2NvcGVzXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3dpa2kvVW5kZXJzdGFuZGluZy1TY29wZXMpXG4gKlxuICogRm9yIGJhc2ljIGV4YW1wbGVzLCBob3cgdG8gdXNlIGBuZ01vZGVsYCwgc2VlOlxuICpcbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6aW5wdXQgaW5wdXR9XG4gKiAgICAtIHtAbGluayBpbnB1dFt0ZXh0XSB0ZXh0fVxuICogICAgLSB7QGxpbmsgaW5wdXRbY2hlY2tib3hdIGNoZWNrYm94fVxuICogICAgLSB7QGxpbmsgaW5wdXRbcmFkaW9dIHJhZGlvfVxuICogICAgLSB7QGxpbmsgaW5wdXRbbnVtYmVyXSBudW1iZXJ9XG4gKiAgICAtIHtAbGluayBpbnB1dFtlbWFpbF0gZW1haWx9XG4gKiAgICAtIHtAbGluayBpbnB1dFt1cmxdIHVybH1cbiAqICAgIC0ge0BsaW5rIGlucHV0W2RhdGVdIGRhdGV9XG4gKiAgICAtIHtAbGluayBpbnB1dFtkYXRldGltZS1sb2NhbF0gZGF0ZXRpbWUtbG9jYWx9XG4gKiAgICAtIHtAbGluayBpbnB1dFt0aW1lXSB0aW1lfVxuICogICAgLSB7QGxpbmsgaW5wdXRbbW9udGhdIG1vbnRofVxuICogICAgLSB7QGxpbmsgaW5wdXRbd2Vla10gd2Vla31cbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6c2VsZWN0IHNlbGVjdH1cbiAqICAtIHtAbGluayBuZy5kaXJlY3RpdmU6dGV4dGFyZWEgdGV4dGFyZWF9XG4gKlxuICogIyMgQ29tcGxleCBNb2RlbHMgKG9iamVjdHMgb3IgY29sbGVjdGlvbnMpXG4gKlxuICogQnkgZGVmYXVsdCwgYG5nTW9kZWxgIHdhdGNoZXMgdGhlIG1vZGVsIGJ5IHJlZmVyZW5jZSwgbm90IHZhbHVlLiBUaGlzIGlzIGltcG9ydGFudCB0byBrbm93IHdoZW5cbiAqIGJpbmRpbmcgaW5wdXRzIHRvIG1vZGVscyB0aGF0IGFyZSBvYmplY3RzIChlLmcuIGBEYXRlYCkgb3IgY29sbGVjdGlvbnMgKGUuZy4gYXJyYXlzKS4gSWYgb25seSBwcm9wZXJ0aWVzIG9mIHRoZVxuICogb2JqZWN0IG9yIGNvbGxlY3Rpb24gY2hhbmdlLCBgbmdNb2RlbGAgd2lsbCBub3QgYmUgbm90aWZpZWQgYW5kIHNvIHRoZSBpbnB1dCB3aWxsIG5vdCBiZSAgcmUtcmVuZGVyZWQuXG4gKlxuICogVGhlIG1vZGVsIG11c3QgYmUgYXNzaWduZWQgYW4gZW50aXJlbHkgbmV3IG9iamVjdCBvciBjb2xsZWN0aW9uIGJlZm9yZSBhIHJlLXJlbmRlcmluZyB3aWxsIG9jY3VyLlxuICpcbiAqIFNvbWUgZGlyZWN0aXZlcyBoYXZlIG9wdGlvbnMgdGhhdCB3aWxsIGNhdXNlIHRoZW0gdG8gdXNlIGEgY3VzdG9tIGAkd2F0Y2hDb2xsZWN0aW9uYCBvbiB0aGUgbW9kZWwgZXhwcmVzc2lvblxuICogLSBmb3IgZXhhbXBsZSwgYG5nT3B0aW9uc2Agd2lsbCBkbyBzbyB3aGVuIGEgYHRyYWNrIGJ5YCBjbGF1c2UgaXMgaW5jbHVkZWQgaW4gdGhlIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvbiBvclxuICogaWYgdGhlIHNlbGVjdCBpcyBnaXZlbiB0aGUgYG11bHRpcGxlYCBhdHRyaWJ1dGUuXG4gKlxuICogVGhlIGAkd2F0Y2hDb2xsZWN0aW9uKClgIG1ldGhvZCBvbmx5IGRvZXMgYSBzaGFsbG93IGNvbXBhcmlzb24sIG1lYW5pbmcgdGhhdCBjaGFuZ2luZyBwcm9wZXJ0aWVzIGRlZXBlciB0aGFuIHRoZVxuICogZmlyc3QgbGV2ZWwgb2YgdGhlIG9iamVjdCAob3Igb25seSBjaGFuZ2luZyB0aGUgcHJvcGVydGllcyBvZiBhbiBpdGVtIGluIHRoZSBjb2xsZWN0aW9uIGlmIGl0J3MgYW4gYXJyYXkpIHdpbGwgc3RpbGxcbiAqIG5vdCB0cmlnZ2VyIGEgcmUtcmVuZGVyaW5nIG9mIHRoZSBtb2RlbC5cbiAqXG4gKiAjIyBDU1MgY2xhc3Nlc1xuICogVGhlIGZvbGxvd2luZyBDU1MgY2xhc3NlcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWQgb24gdGhlIGFzc29jaWF0ZWQgaW5wdXQvc2VsZWN0L3RleHRhcmVhIGVsZW1lbnRcbiAqIGRlcGVuZGluZyBvbiB0aGUgdmFsaWRpdHkgb2YgdGhlIG1vZGVsLlxuICpcbiAqICAtIGBuZy12YWxpZGA6IHRoZSBtb2RlbCBpcyB2YWxpZFxuICogIC0gYG5nLWludmFsaWRgOiB0aGUgbW9kZWwgaXMgaW52YWxpZFxuICogIC0gYG5nLXZhbGlkLVtrZXldYDogZm9yIGVhY2ggdmFsaWQga2V5IGFkZGVkIGJ5IGAkc2V0VmFsaWRpdHlgXG4gKiAgLSBgbmctaW52YWxpZC1ba2V5XWA6IGZvciBlYWNoIGludmFsaWQga2V5IGFkZGVkIGJ5IGAkc2V0VmFsaWRpdHlgXG4gKiAgLSBgbmctcHJpc3RpbmVgOiB0aGUgY29udHJvbCBoYXNuJ3QgYmVlbiBpbnRlcmFjdGVkIHdpdGggeWV0XG4gKiAgLSBgbmctZGlydHlgOiB0aGUgY29udHJvbCBoYXMgYmVlbiBpbnRlcmFjdGVkIHdpdGhcbiAqICAtIGBuZy10b3VjaGVkYDogdGhlIGNvbnRyb2wgaGFzIGJlZW4gYmx1cnJlZFxuICogIC0gYG5nLXVudG91Y2hlZGA6IHRoZSBjb250cm9sIGhhc24ndCBiZWVuIGJsdXJyZWRcbiAqICAtIGBuZy1wZW5kaW5nYDogYW55IGAkYXN5bmNWYWxpZGF0b3JzYCBhcmUgdW5mdWxmaWxsZWRcbiAqICAtIGBuZy1lbXB0eWA6IHRoZSB2aWV3IGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZSBvciB0aGUgdmFsdWUgaXMgZGVlbWVkIFwiZW1wdHlcIiwgYXMgZGVmaW5lZFxuICogICAgIGJ5IHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkaXNFbXB0eX0gbWV0aG9kXG4gKiAgLSBgbmctbm90LWVtcHR5YDogdGhlIHZpZXcgY29udGFpbnMgYSBub24tZW1wdHkgdmFsdWVcbiAqXG4gKiBLZWVwIGluIG1pbmQgdGhhdCBuZ0FuaW1hdGUgY2FuIGRldGVjdCBlYWNoIG9mIHRoZXNlIGNsYXNzZXMgd2hlbiBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogQW5pbWF0aW9ucyB3aXRoaW4gbW9kZWxzIGFyZSB0cmlnZ2VyZWQgd2hlbiBhbnkgb2YgdGhlIGFzc29jaWF0ZWQgQ1NTIGNsYXNzZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkXG4gKiBvbiB0aGUgaW5wdXQgZWxlbWVudCB3aGljaCBpcyBhdHRhY2hlZCB0byB0aGUgbW9kZWwuIFRoZXNlIGNsYXNzZXMgaW5jbHVkZTogYC5uZy1wcmlzdGluZWAsIGAubmctZGlydHlgLFxuICogYC5uZy1pbnZhbGlkYCBhbmQgYC5uZy12YWxpZGAgYXMgd2VsbCBhcyBhbnkgb3RoZXIgdmFsaWRhdGlvbnMgdGhhdCBhcmUgcGVyZm9ybWVkIG9uIHRoZSBtb2RlbCBpdHNlbGYuXG4gKiBUaGUgYW5pbWF0aW9ucyB0aGF0IGFyZSB0cmlnZ2VyZWQgd2l0aGluIG5nTW9kZWwgYXJlIHNpbWlsYXIgdG8gaG93IHRoZXkgd29yayBpbiBuZ0NsYXNzIGFuZFxuICogYW5pbWF0aW9ucyBjYW4gYmUgaG9va2VkIGludG8gdXNpbmcgQ1NTIHRyYW5zaXRpb25zLCBrZXlmcmFtZXMgYXMgd2VsbCBhcyBKUyBhbmltYXRpb25zLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBhIHNpbXBsZSB3YXkgdG8gdXRpbGl6ZSBDU1MgdHJhbnNpdGlvbnMgdG8gc3R5bGUgYW4gaW5wdXQgZWxlbWVudFxuICogdGhhdCBoYXMgYmVlbiByZW5kZXJlZCBhcyBpbnZhbGlkIGFmdGVyIGl0IGhhcyBiZWVuIHZhbGlkYXRlZDpcbiAqXG4gKiA8cHJlPlxuICogLy9iZSBzdXJlIHRvIGluY2x1ZGUgbmdBbmltYXRlIGFzIGEgbW9kdWxlIHRvIGhvb2sgaW50byBtb3JlXG4gKiAvL2FkdmFuY2VkIGFuaW1hdGlvbnNcbiAqIC5teS1pbnB1dCB7XG4gKiAgIHRyYW5zaXRpb246MC41cyBsaW5lYXIgYWxsO1xuICogICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAqIH1cbiAqIC5teS1pbnB1dC5uZy1pbnZhbGlkIHtcbiAqICAgYmFja2dyb3VuZDogcmVkO1xuICogICBjb2xvcjp3aGl0ZTtcbiAqIH1cbiAqIDwvcHJlPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgQmFzaWMgVXNhZ2VcbiAqIDxleGFtcGxlIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIGZpeEJhc2U9XCJ0cnVlXCIgbW9kdWxlPVwiaW5wdXRFeGFtcGxlXCIgbmFtZT1cIm5nLW1vZGVsXCI+XG4gICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgPHNjcmlwdD5cbiAgICAgICAgYW5ndWxhci5tb2R1bGUoJ2lucHV0RXhhbXBsZScsIFtdKVxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUudmFsID0gJzEnO1xuICAgICAgICAgIH1dKTtcbiAgICAgICA8L3NjcmlwdD5cbiAgICAgICA8c3R5bGU+XG4gICAgICAgICAubXktaW5wdXQge1xuICAgICAgICAgICB0cmFuc2l0aW9uOmFsbCBsaW5lYXIgMC41cztcbiAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICB9XG4gICAgICAgICAubXktaW5wdXQubmctaW52YWxpZCB7XG4gICAgICAgICAgIGNvbG9yOndoaXRlO1xuICAgICAgICAgICBiYWNrZ3JvdW5kOiByZWQ7XG4gICAgICAgICB9XG4gICAgICAgPC9zdHlsZT5cbiAgICAgICA8cCBpZD1cImlucHV0RGVzY3JpcHRpb25cIj5cbiAgICAgICAgVXBkYXRlIGlucHV0IHRvIHNlZSB0cmFuc2l0aW9ucyB3aGVuIHZhbGlkL2ludmFsaWQuXG4gICAgICAgIEludGVnZXIgaXMgYSB2YWxpZCB2YWx1ZS5cbiAgICAgICA8L3A+XG4gICAgICAgPGZvcm0gbmFtZT1cInRlc3RGb3JtXCIgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ2YWxcIiBuZy1wYXR0ZXJuPVwiL15cXGQrJC9cIiBuYW1lPVwiYW5pbVwiIGNsYXNzPVwibXktaW5wdXRcIlxuICAgICAgICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9XCJpbnB1dERlc2NyaXB0aW9uXCIgLz5cbiAgICAgICA8L2Zvcm0+XG4gICAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJpbmRpbmcgdG8gYSBnZXR0ZXIvc2V0dGVyXG4gKlxuICogU29tZXRpbWVzIGl0J3MgaGVscGZ1bCB0byBiaW5kIGBuZ01vZGVsYCB0byBhIGdldHRlci9zZXR0ZXIgZnVuY3Rpb24uICBBIGdldHRlci9zZXR0ZXIgaXMgYVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1vZGVsIHdoZW4gY2FsbGVkIHdpdGggemVybyBhcmd1bWVudHMsIGFuZCBzZXRzXG4gKiB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBtb2RlbCB3aGVuIGNhbGxlZCB3aXRoIGFuIGFyZ3VtZW50LiBJdCdzIHNvbWV0aW1lcyB1c2VmdWwgdG8gdXNlIHRoaXNcbiAqIGZvciBtb2RlbHMgdGhhdCBoYXZlIGFuIGludGVybmFsIHJlcHJlc2VudGF0aW9uIHRoYXQncyBkaWZmZXJlbnQgZnJvbSB3aGF0IHRoZSBtb2RlbCBleHBvc2VzXG4gKiB0byB0aGUgdmlldy5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtc3VjY2Vzc1wiPlxuICogKipCZXN0IFByYWN0aWNlOioqIEl0J3MgYmVzdCB0byBrZWVwIGdldHRlcnMgZmFzdCBiZWNhdXNlIEFuZ3VsYXIgaXMgbGlrZWx5IHRvIGNhbGwgdGhlbSBtb3JlXG4gKiBmcmVxdWVudGx5IHRoYW4gb3RoZXIgcGFydHMgb2YgeW91ciBjb2RlLlxuICogPC9kaXY+XG4gKlxuICogWW91IHVzZSB0aGlzIGJlaGF2aW9yIGJ5IGFkZGluZyBgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cImAgdG8gYW4gZWxlbWVudCB0aGF0XG4gKiBoYXMgYG5nLW1vZGVsYCBhdHRhY2hlZCB0byBpdC4gWW91IGNhbiBhbHNvIGFkZCBgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cImAgdG9cbiAqIGEgYDxmb3JtPmAsIHdoaWNoIHdpbGwgZW5hYmxlIHRoaXMgYmVoYXZpb3IgZm9yIGFsbCBgPGlucHV0PmBzIHdpdGhpbiBpdC4gU2VlXG4gKiB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nTW9kZWxPcHRpb25zIGBuZ01vZGVsT3B0aW9uc2B9IGZvciBtb3JlLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gdXNlIGBuZ01vZGVsYCB3aXRoIGEgZ2V0dGVyL3NldHRlcjpcbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWwtZ2V0dGVyLXNldHRlclwiIG1vZHVsZT1cImdldHRlclNldHRlckV4YW1wbGVcIj5cbiAgICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgPGZvcm0gbmFtZT1cInVzZXJGb3JtXCI+XG4gICAgICAgICAgIDxsYWJlbD5OYW1lOlxuICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1c2VyTmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgbmctbW9kZWwtb3B0aW9ucz1cInsgZ2V0dGVyU2V0dGVyOiB0cnVlIH1cIiAvPlxuICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgPHByZT51c2VyLm5hbWUgPSA8c3BhbiBuZy1iaW5kPVwidXNlci5uYW1lKClcIj48L3NwYW4+PC9wcmU+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICAgICAgIGFuZ3VsYXIubW9kdWxlKCdnZXR0ZXJTZXR0ZXJFeGFtcGxlJywgW10pXG4gICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICB2YXIgX25hbWUgPSAnQnJpYW4nO1xuICAgICAgICAgICAkc2NvcGUudXNlciA9IHtcbiAgICAgICAgICAgICBuYW1lOiBmdW5jdGlvbihuZXdOYW1lKSB7XG4gICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBuZXdOYW1lIGNhbiBiZSB1bmRlZmluZWQgZm9yIHR3byByZWFzb25zOlxuICAgICAgICAgICAgICAvLyAxLiBCZWNhdXNlIGl0IGlzIGNhbGxlZCBhcyBhIGdldHRlciBhbmQgdGh1cyBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHNcbiAgICAgICAgICAgICAgLy8gMi4gQmVjYXVzZSB0aGUgcHJvcGVydHkgc2hvdWxkIGFjdHVhbGx5IGJlIHNldCB0byB1bmRlZmluZWQuIFRoaXMgaGFwcGVucyBlLmcuIGlmIHRoZVxuICAgICAgICAgICAgICAvLyAgICBpbnB1dCBpcyBpbnZhbGlkXG4gICAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID8gKF9uYW1lID0gbmV3TmFtZSkgOiBfbmFtZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgIH07XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nTW9kZWxEaXJlY3RpdmUgPSBbJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiBbJ25nTW9kZWwnLCAnXj9mb3JtJywgJ14/bmdNb2RlbE9wdGlvbnMnXSxcbiAgICBjb250cm9sbGVyOiBOZ01vZGVsQ29udHJvbGxlcixcbiAgICAvLyBQcmVsaW5rIG5lZWRzIHRvIHJ1biBiZWZvcmUgYW55IGlucHV0IGRpcmVjdGl2ZVxuICAgIC8vIHNvIHRoYXQgd2UgY2FuIHNldCB0aGUgTmdNb2RlbE9wdGlvbnMgaW4gTmdNb2RlbENvbnRyb2xsZXJcbiAgICAvLyBiZWZvcmUgYW55b25lIGVsc2UgdXNlcyBpdC5cbiAgICBwcmlvcml0eTogMSxcbiAgICBjb21waWxlOiBmdW5jdGlvbiBuZ01vZGVsQ29tcGlsZShlbGVtZW50KSB7XG4gICAgICAvLyBTZXR1cCBpbml0aWFsIHN0YXRlIG9mIHRoZSBjb250cm9sXG4gICAgICBlbGVtZW50LmFkZENsYXNzKFBSSVNUSU5FX0NMQVNTKS5hZGRDbGFzcyhVTlRPVUNIRURfQ0xBU1MpLmFkZENsYXNzKFZBTElEX0NMQVNTKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJlOiBmdW5jdGlvbiBuZ01vZGVsUHJlTGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICAgICAgICB2YXIgbW9kZWxDdHJsID0gY3RybHNbMF0sXG4gICAgICAgICAgICAgIGZvcm1DdHJsID0gY3RybHNbMV0gfHwgbW9kZWxDdHJsLiQkcGFyZW50Rm9ybSxcbiAgICAgICAgICAgICAgb3B0aW9uc0N0cmwgPSBjdHJsc1syXTtcblxuICAgICAgICAgIGlmIChvcHRpb25zQ3RybCkge1xuICAgICAgICAgICAgbW9kZWxDdHJsLiRvcHRpb25zID0gb3B0aW9uc0N0cmwuJG9wdGlvbnM7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbW9kZWxDdHJsLiQkaW5pdEdldHRlclNldHRlcnMoKTtcblxuICAgICAgICAgIC8vIG5vdGlmeSBvdGhlcnMsIGVzcGVjaWFsbHkgcGFyZW50IGZvcm1zXG4gICAgICAgICAgZm9ybUN0cmwuJGFkZENvbnRyb2wobW9kZWxDdHJsKTtcblxuICAgICAgICAgIGF0dHIuJG9ic2VydmUoJ25hbWUnLCBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKG1vZGVsQ3RybC4kbmFtZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgbW9kZWxDdHJsLiQkcGFyZW50Rm9ybS4kJHJlbmFtZUNvbnRyb2wobW9kZWxDdHJsLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJCRwYXJlbnRGb3JtLiRyZW1vdmVDb250cm9sKG1vZGVsQ3RybCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc3Q6IGZ1bmN0aW9uIG5nTW9kZWxQb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybHMpIHtcbiAgICAgICAgICB2YXIgbW9kZWxDdHJsID0gY3RybHNbMF07XG4gICAgICAgICAgbW9kZWxDdHJsLiQkc2V0VXBkYXRlT25FdmVudHMoKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIHNldFRvdWNoZWQoKSB7XG4gICAgICAgICAgICBtb2RlbEN0cmwuJHNldFRvdWNoZWQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlbGVtZW50Lm9uKCdibHVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAobW9kZWxDdHJsLiR0b3VjaGVkKSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmICgkcm9vdFNjb3BlLiQkcGhhc2UpIHtcbiAgICAgICAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhzZXRUb3VjaGVkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNjb3BlLiRhcHBseShzZXRUb3VjaGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuLyogZXhwb3J0ZWQgZGVmYXVsdE1vZGVsT3B0aW9ucyAqL1xudmFyIGRlZmF1bHRNb2RlbE9wdGlvbnM7XG52YXIgREVGQVVMVF9SRUdFWFAgPSAvKFxccyt8XilkZWZhdWx0KFxccyt8JCkvO1xuXG4vKipcbiAqIEBuZ2RvYyB0eXBlXG4gKiBAbmFtZSBNb2RlbE9wdGlvbnNcbiAqIEBkZXNjcmlwdGlvblxuICogQSBjb250YWluZXIgZm9yIHRoZSBvcHRpb25zIHNldCBieSB0aGUge0BsaW5rIG5nTW9kZWxPcHRpb25zfSBkaXJlY3RpdmVcbiAqL1xuZnVuY3Rpb24gTW9kZWxPcHRpb25zKG9wdGlvbnMpIHtcbiAgdGhpcy4kJG9wdGlvbnMgPSBvcHRpb25zO1xufVxuXG5Nb2RlbE9wdGlvbnMucHJvdG90eXBlID0ge1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIE1vZGVsT3B0aW9ucyNnZXRPcHRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgdGhlIG5hbWUgb2YgdGhlIG9wdGlvbiB0byByZXRyaWV2ZVxuICAgKiBAcmV0dXJucyB7Kn0gdGhlIHZhbHVlIG9mIHRoZSBvcHRpb25cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBvcHRpb25cbiAgICovXG4gIGdldE9wdGlvbjogZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLiQkb3B0aW9uc1tuYW1lXTtcbiAgfSxcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBNb2RlbE9wdGlvbnMjY3JlYXRlQ2hpbGRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgYSBoYXNoIG9mIG9wdGlvbnMgZm9yIHRoZSBuZXcgY2hpbGQgdGhhdCB3aWxsIG92ZXJyaWRlIHRoZSBwYXJlbnQncyBvcHRpb25zXG4gICAqIEByZXR1cm4ge01vZGVsT3B0aW9uc30gYSBuZXcgYE1vZGVsT3B0aW9uc2Agb2JqZWN0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG4gICAqL1xuICBjcmVhdGVDaGlsZDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHZhciBpbmhlcml0QWxsID0gZmFsc2U7XG5cbiAgICAvLyBtYWtlIGEgc2hhbGxvdyBjb3B5XG4gICAgb3B0aW9ucyA9IGV4dGVuZCh7fSwgb3B0aW9ucyk7XG5cbiAgICAvLyBJbmhlcml0IG9wdGlvbnMgZnJvbSB0aGUgcGFyZW50IGlmIHNwZWNpZmllZCBieSB0aGUgdmFsdWUgYFwiJGluaGVyaXRcImBcbiAgICBmb3JFYWNoKG9wdGlvbnMsIC8qIEB0aGlzICovIGZ1bmN0aW9uKG9wdGlvbiwga2V5KSB7XG4gICAgICBpZiAob3B0aW9uID09PSAnJGluaGVyaXQnKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICcqJykge1xuICAgICAgICAgIGluaGVyaXRBbGwgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9wdGlvbnNba2V5XSA9IHRoaXMuJCRvcHRpb25zW2tleV07XG4gICAgICAgICAgLy8gYHVwZGF0ZU9uYCBpcyBzcGVjaWFsIHNvIHdlIG11c3QgYWxzbyBpbmhlcml0IHRoZSBgdXBkYXRlT25EZWZhdWx0YCBvcHRpb25cbiAgICAgICAgICBpZiAoa2V5ID09PSAndXBkYXRlT24nKSB7XG4gICAgICAgICAgICBvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdCA9IHRoaXMuJCRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChrZXkgPT09ICd1cGRhdGVPbicpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgYHVwZGF0ZU9uYCBwcm9wZXJ0eSBjb250YWlucyB0aGUgYGRlZmF1bHRgIGV2ZW50IHRoZW4gd2UgaGF2ZSB0byByZW1vdmVcbiAgICAgICAgICAvLyBpdCBmcm9tIHRoZSBldmVudCBsaXN0IGFuZCBzZXQgdGhlIGB1cGRhdGVPbkRlZmF1bHRgIGZsYWcuXG4gICAgICAgICAgb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQgPSBmYWxzZTtcbiAgICAgICAgICBvcHRpb25zW2tleV0gPSB0cmltKG9wdGlvbi5yZXBsYWNlKERFRkFVTFRfUkVHRVhQLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudXBkYXRlT25EZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiAnICc7XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgdGhpcyk7XG5cbiAgICBpZiAoaW5oZXJpdEFsbCkge1xuICAgICAgLy8gV2UgaGF2ZSBhIHByb3BlcnR5IG9mIHRoZSBmb3JtOiBgXCIqXCI6IFwiJGluaGVyaXRcImBcbiAgICAgIGRlbGV0ZSBvcHRpb25zWycqJ107XG4gICAgICBkZWZhdWx0cyhvcHRpb25zLCB0aGlzLiQkb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gRmluYWxseSBhZGQgaW4gYW55IG1pc3NpbmcgZGVmYXVsdHNcbiAgICBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0TW9kZWxPcHRpb25zLiQkb3B0aW9ucyk7XG5cbiAgICByZXR1cm4gbmV3IE1vZGVsT3B0aW9ucyhvcHRpb25zKTtcbiAgfVxufTtcblxuXG5kZWZhdWx0TW9kZWxPcHRpb25zID0gbmV3IE1vZGVsT3B0aW9ucyh7XG4gIHVwZGF0ZU9uOiAnJyxcbiAgdXBkYXRlT25EZWZhdWx0OiB0cnVlLFxuICBkZWJvdW5jZTogMCxcbiAgZ2V0dGVyU2V0dGVyOiBmYWxzZSxcbiAgYWxsb3dJbnZhbGlkOiBmYWxzZSxcbiAgdGltZXpvbmU6IG51bGxcbn0pO1xuXG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNb2RlbE9wdGlvbnNcbiAqIEByZXN0cmljdCBBXG4gKiBAcHJpb3JpdHkgMTBcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoaXMgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gbW9kaWZ5IHRoZSBiZWhhdmlvdXIgb2Yge0BsaW5rIG5nTW9kZWx9IGRpcmVjdGl2ZXMgd2l0aGluIHlvdXJcbiAqIGFwcGxpY2F0aW9uLiBZb3UgY2FuIHNwZWNpZnkgYW4gYG5nTW9kZWxPcHRpb25zYCBkaXJlY3RpdmUgb24gYW55IGVsZW1lbnQuIEFsbCB7QGxpbmsgbmdNb2RlbH1cbiAqIGRpcmVjdGl2ZXMgd2lsbCB1c2UgdGhlIG9wdGlvbnMgb2YgdGhlaXIgbmVhcmVzdCBgbmdNb2RlbE9wdGlvbnNgIGFuY2VzdG9yLlxuICpcbiAqIFRoZSBgbmdNb2RlbE9wdGlvbnNgIHNldHRpbmdzIGFyZSBmb3VuZCBieSBldmFsdWF0aW5nIHRoZSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlIGRpcmVjdGl2ZSBhc1xuICogYW4gQW5ndWxhciBleHByZXNzaW9uLiBUaGlzIGV4cHJlc3Npb24gc2hvdWxkIGV2YWx1YXRlIHRvIGFuIG9iamVjdCwgd2hvc2UgcHJvcGVydGllcyBjb250YWluXG4gKiB0aGUgc2V0dGluZ3MuIEZvciBleGFtcGxlOiBgPGRpdiBuZy1tb2RlbC1vcHRpb25zPVwieyBkZWJvdW5jZTogMTAwIH1cImAuXG4gKlxuICogIyMgSW5oZXJpdGluZyBPcHRpb25zXG4gKlxuICogWW91IGNhbiBzcGVjaWZ5IHRoYXQgYW4gYG5nTW9kZWxPcHRpb25zYCBzZXR0aW5nIHNob3VsZCBiZSBpbmhlcml0ZWQgZnJvbSBhIHBhcmVudCBgbmdNb2RlbE9wdGlvbnNgXG4gKiBkaXJlY3RpdmUgYnkgZ2l2aW5nIGl0IHRoZSB2YWx1ZSBvZiBgXCIkaW5oZXJpdFwiYC5cbiAqIFRoZW4gaXQgd2lsbCBpbmhlcml0IHRoYXQgc2V0dGluZyBmcm9tIHRoZSBmaXJzdCBgbmdNb2RlbE9wdGlvbnNgIGRpcmVjdGl2ZSBmb3VuZCBieSB0cmF2ZXJzaW5nIHVwIHRoZVxuICogRE9NIHRyZWUuIElmIHRoZXJlIGlzIG5vIGFuY2VzdG9yIGVsZW1lbnQgY29udGFpbmluZyBhbiBgbmdNb2RlbE9wdGlvbnNgIGRpcmVjdGl2ZSB0aGVuIGRlZmF1bHQgc2V0dGluZ3NcbiAqIHdpbGwgYmUgdXNlZC5cbiAqXG4gKiBGb3IgZXhhbXBsZSBnaXZlbiB0aGUgZm9sbG93aW5nIGZyYWdtZW50IG9mIEhUTUxcbiAqXG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1tb2RlbC1vcHRpb25zPVwieyBhbGxvd0ludmFsaWQ6IHRydWUsIGRlYm91bmNlOiAyMDAgfVwiPlxuICogICA8Zm9ybSBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2JsdXInLCBhbGxvd0ludmFsaWQ6ICckaW5oZXJpdCcgfVwiPlxuICogICAgIDxpbnB1dCBuZy1tb2RlbC1vcHRpb25zPVwieyB1cGRhdGVPbjogJ2RlZmF1bHQnLCBhbGxvd0ludmFsaWQ6ICckaW5oZXJpdCcgfVwiIC8+XG4gKiAgIDwvZm9ybT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogdGhlIGBpbnB1dGAgZWxlbWVudCB3aWxsIGhhdmUgdGhlIGZvbGxvd2luZyBzZXR0aW5nc1xuICpcbiAqIGBgYGpzXG4gKiB7IGFsbG93SW52YWxpZDogdHJ1ZSwgdXBkYXRlT246ICdkZWZhdWx0JywgZGVib3VuY2U6IDAgfVxuICogYGBgXG4gKlxuICogTm90aWNlIHRoYXQgdGhlIGBkZWJvdW5jZWAgc2V0dGluZyB3YXMgbm90IGluaGVyaXRlZCBhbmQgdXNlZCB0aGUgZGVmYXVsdCB2YWx1ZSBpbnN0ZWFkLlxuICpcbiAqIFlvdSBjYW4gc3BlY2lmeSB0aGF0IGFsbCB1bmRlZmluZWQgc2V0dGluZ3MgYXJlIGF1dG9tYXRpY2FsbHkgaW5oZXJpdGVkIGZyb20gYW4gYW5jZXN0b3IgYnlcbiAqIGluY2x1ZGluZyBhIHByb3BlcnR5IHdpdGgga2V5IG9mIGBcIipcImAgYW5kIHZhbHVlIG9mIGBcIiRpbmhlcml0XCJgLlxuICpcbiAqIEZvciBleGFtcGxlIGdpdmVuIHRoZSBmb2xsb3dpbmcgZnJhZ21lbnQgb2YgSFRNTFxuICpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGFsbG93SW52YWxpZDogdHJ1ZSwgZGVib3VuY2U6IDIwMCB9XCI+XG4gKiAgIDxmb3JtIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnYmx1cicsIFwiKlwiOiAnJGluaGVyaXQnIH1cIj5cbiAqICAgICA8aW5wdXQgbmctbW9kZWwtb3B0aW9ucz1cInsgdXBkYXRlT246ICdkZWZhdWx0JywgXCIqXCI6ICckaW5oZXJpdCcgfVwiIC8+XG4gKiAgIDwvZm9ybT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogdGhlIGBpbnB1dGAgZWxlbWVudCB3aWxsIGhhdmUgdGhlIGZvbGxvd2luZyBzZXR0aW5nc1xuICpcbiAqIGBgYGpzXG4gKiB7IGFsbG93SW52YWxpZDogdHJ1ZSwgdXBkYXRlT246ICdkZWZhdWx0JywgZGVib3VuY2U6IDIwMCB9XG4gKiBgYGBcbiAqXG4gKiBOb3RpY2UgdGhhdCB0aGUgYGRlYm91bmNlYCBzZXR0aW5nIG5vdyBpbmhlcml0cyB0aGUgdmFsdWUgZnJvbSB0aGUgb3V0ZXIgYDxkaXY+YCBlbGVtZW50LlxuICpcbiAqIElmIHlvdSBhcmUgY3JlYXRpbmcgYSByZXVzYWJsZSBjb21wb25lbnQgdGhlbiB5b3Ugc2hvdWxkIGJlIGNhcmVmdWwgd2hlbiB1c2luZyBgXCIqXCI6IFwiJGluaGVyaXRcImBcbiAqIHNpbmNlIHlvdSBtYXkgaW5hZHZlcnRlbnRseSBpbmhlcml0IGEgc2V0dGluZyBpbiB0aGUgZnV0dXJlIHRoYXQgY2hhbmdlcyB0aGUgYmVoYXZpb3Igb2YgeW91ciBjb21wb25lbnQuXG4gKlxuICpcbiAqICMjIFRyaWdnZXJpbmcgYW5kIGRlYm91bmNpbmcgbW9kZWwgdXBkYXRlc1xuICpcbiAqIFRoZSBgdXBkYXRlT25gIGFuZCBgZGVib3VuY2VgIHByb3BlcnRpZXMgYWxsb3cgeW91IHRvIHNwZWNpZnkgYSBjdXN0b20gbGlzdCBvZiBldmVudHMgdGhhdCB3aWxsXG4gKiB0cmlnZ2VyIGEgbW9kZWwgdXBkYXRlIGFuZC9vciBhIGRlYm91bmNpbmcgZGVsYXkgc28gdGhhdCB0aGUgYWN0dWFsIHVwZGF0ZSBvbmx5IHRha2VzIHBsYWNlIHdoZW5cbiAqIGEgdGltZXIgZXhwaXJlczsgdGhpcyB0aW1lciB3aWxsIGJlIHJlc2V0IGFmdGVyIGFub3RoZXIgY2hhbmdlIHRha2VzIHBsYWNlLlxuICpcbiAqIEdpdmVuIHRoZSBuYXR1cmUgb2YgYG5nTW9kZWxPcHRpb25zYCwgdGhlIHZhbHVlIGRpc3BsYXllZCBpbnNpZGUgaW5wdXQgZmllbGRzIGluIHRoZSB2aWV3IG1pZ2h0XG4gKiBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgdmFsdWUgaW4gdGhlIGFjdHVhbCBtb2RlbC4gVGhpcyBtZWFucyB0aGF0IGlmIHlvdSB1cGRhdGUgdGhlIG1vZGVsIHlvdVxuICogc2hvdWxkIGFsc28gaW52b2tlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRyb2xsYmFja1ZpZXdWYWx1ZX0gb24gdGhlIHJlbGV2YW50IGlucHV0IGZpZWxkIGluXG4gKiBvcmRlciB0byBtYWtlIHN1cmUgaXQgaXMgc3luY2hyb25pemVkIHdpdGggdGhlIG1vZGVsIGFuZCB0aGF0IGFueSBkZWJvdW5jZWQgYWN0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIFRoZSBlYXNpZXN0IHdheSB0byByZWZlcmVuY2UgdGhlIGNvbnRyb2wncyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkcm9sbGJhY2tWaWV3VmFsdWV9XG4gKiBtZXRob2QgaXMgYnkgbWFraW5nIHN1cmUgdGhlIGlucHV0IGlzIHBsYWNlZCBpbnNpZGUgYSBmb3JtIHRoYXQgaGFzIGEgYG5hbWVgIGF0dHJpYnV0ZS4gVGhpcyBpc1xuICogaW1wb3J0YW50IGJlY2F1c2UgYGZvcm1gIGNvbnRyb2xsZXJzIGFyZSBwdWJsaXNoZWQgdG8gdGhlIHJlbGF0ZWQgc2NvcGUgdW5kZXIgdGhlIG5hbWUgaW4gdGhlaXJcbiAqIGBuYW1lYCBhdHRyaWJ1dGUuXG4gKlxuICogQW55IHBlbmRpbmcgY2hhbmdlcyB3aWxsIHRha2UgcGxhY2UgaW1tZWRpYXRlbHkgd2hlbiBhbiBlbmNsb3NpbmcgZm9ybSBpcyBzdWJtaXR0ZWQgdmlhIHRoZVxuICogYHN1Ym1pdGAgZXZlbnQuIE5vdGUgdGhhdCBgbmdDbGlja2AgZXZlbnRzIHdpbGwgb2NjdXIgYmVmb3JlIHRoZSBtb2RlbCBpcyB1cGRhdGVkLiBVc2UgYG5nU3VibWl0YFxuICogdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHVwZGF0ZWQgbW9kZWwuXG4gKlxuICogIyMjIE92ZXJyaWRpbmcgaW1tZWRpYXRlIHVwZGF0ZXNcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIG92ZXJyaWRlIGltbWVkaWF0ZSB1cGRhdGVzLiBDaGFuZ2VzIG9uIHRoZSBpbnB1dHMgd2l0aGluIHRoZVxuICogZm9ybSB3aWxsIHVwZGF0ZSB0aGUgbW9kZWwgb25seSB3aGVuIHRoZSBjb250cm9sIGxvc2VzIGZvY3VzIChibHVyIGV2ZW50KS4gSWYgYGVzY2FwZWAga2V5IGlzXG4gKiBwcmVzc2VkIHdoaWxlIHRoZSBpbnB1dCBmaWVsZCBpcyBmb2N1c2VkLCB0aGUgdmFsdWUgaXMgcmVzZXQgdG8gdGhlIHZhbHVlIGluIHRoZSBjdXJyZW50IG1vZGVsLlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtYmx1clwiIG1vZHVsZT1cIm9wdGlvbnNFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJ1c2VyRm9ybVwiPlxuICogICAgICAgICA8bGFiZWw+XG4gKiAgICAgICAgICAgTmFtZTpcbiAqICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwidXNlck5hbWVcIlxuICogICAgICAgICAgICAgICAgICBuZy1tb2RlbD1cInVzZXIubmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IHVwZGF0ZU9uOiAnYmx1cicgfVwiXG4gKiAgICAgICAgICAgICAgICAgIG5nLWtleXVwPVwiY2FuY2VsKCRldmVudClcIiAvPlxuICogICAgICAgICA8L2xhYmVsPjxiciAvPlxuICogICAgICAgICA8bGFiZWw+XG4gKiAgICAgICAgICAgT3RoZXIgZGF0YTpcbiAqICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInVzZXIuZGF0YVwiIC8+XG4gKiAgICAgICAgIDwvbGFiZWw+PGJyIC8+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWVcIj48L3NwYW4+PC9wcmU+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdvcHRpb25zRXhhbXBsZScsIFtdKVxuICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgJHNjb3BlLnVzZXIgPSB7IG5hbWU6ICdzYXknLCBkYXRhOiAnJyB9O1xuICpcbiAqICAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKGUpIHtcbiAqICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykge1xuICogICAgICAgICAgICAgJHNjb3BlLnVzZXJGb3JtLnVzZXJOYW1lLiRyb2xsYmFja1ZpZXdWYWx1ZSgpO1xuICogICAgICAgICAgIH1cbiAqICAgICAgICAgfTtcbiAqICAgICAgIH1dKTtcbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgdmFyIG1vZGVsID0gZWxlbWVudChieS5iaW5kaW5nKCd1c2VyLm5hbWUnKSk7XG4gKiAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5tb2RlbCgndXNlci5uYW1lJykpO1xuICogICAgIHZhciBvdGhlciA9IGVsZW1lbnQoYnkubW9kZWwoJ3VzZXIuZGF0YScpKTtcbiAqXG4gKiAgICAgaXQoJ3Nob3VsZCBhbGxvdyBjdXN0b20gZXZlbnRzJywgZnVuY3Rpb24oKSB7XG4gKiAgICAgICBpbnB1dC5zZW5kS2V5cygnIGhlbGxvJyk7XG4gKiAgICAgICBpbnB1dC5jbGljaygpO1xuICogICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5Jyk7XG4gKiAgICAgICBvdGhlci5jbGljaygpO1xuICogICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5IGhlbGxvJyk7XG4gKiAgICAgfSk7XG4gKlxuICogICAgIGl0KCdzaG91bGQgJHJvbGxiYWNrVmlld1ZhbHVlIHdoZW4gbW9kZWwgY2hhbmdlcycsIGZ1bmN0aW9uKCkge1xuICogICAgICAgaW5wdXQuc2VuZEtleXMoJyBoZWxsbycpO1xuICogICAgICAgZXhwZWN0KGlucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnc2F5IGhlbGxvJyk7XG4gKiAgICAgICBpbnB1dC5zZW5kS2V5cyhwcm90cmFjdG9yLktleS5FU0NBUEUpO1xuICogICAgICAgZXhwZWN0KGlucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKSkudG9FcXVhbCgnc2F5Jyk7XG4gKiAgICAgICBvdGhlci5jbGljaygpO1xuICogICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9FcXVhbCgnc2F5Jyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiAjIyMgRGVib3VuY2luZyB1cGRhdGVzXG4gKlxuICogVGhlIG5leHQgZXhhbXBsZSBzaG93cyBob3cgdG8gZGVib3VuY2UgbW9kZWwgY2hhbmdlcy4gTW9kZWwgd2lsbCBiZSB1cGRhdGVkIG9ubHkgMSBzZWMgYWZ0ZXIgbGFzdCBjaGFuZ2UuXG4gKiBJZiB0aGUgYENsZWFyYCBidXR0b24gaXMgcHJlc3NlZCwgYW55IGRlYm91bmNlZCBhY3Rpb24gaXMgY2FuY2VsZWQgYW5kIHRoZSB2YWx1ZSBiZWNvbWVzIGVtcHR5LlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ01vZGVsT3B0aW9ucy1kaXJlY3RpdmUtZGVib3VuY2VcIiBtb2R1bGU9XCJvcHRpb25zRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAqICAgICAgICAgTmFtZTpcbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCJcbiAqICAgICAgICAgICAgICAgIG5nLW1vZGVsPVwidXNlci5uYW1lXCJcbiAqICAgICAgICAgICAgICAgIG5nLW1vZGVsLW9wdGlvbnM9XCJ7IGRlYm91bmNlOiAxMDAwIH1cIiAvPlxuICogICAgICAgICA8YnV0dG9uIG5nLWNsaWNrPVwidXNlckZvcm0udXNlck5hbWUuJHJvbGxiYWNrVmlld1ZhbHVlKCk7IHVzZXIubmFtZT0nJ1wiPkNsZWFyPC9idXR0b24+PGJyIC8+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWVcIj48L3NwYW4+PC9wcmU+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdvcHRpb25zRXhhbXBsZScsIFtdKVxuICogICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgJHNjb3BlLnVzZXIgPSB7IG5hbWU6ICdzYXknIH07XG4gKiAgICAgICB9XSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKlxuICogIyMgTW9kZWwgdXBkYXRlcyBhbmQgdmFsaWRhdGlvblxuICpcbiAqIFRoZSBkZWZhdWx0IGJlaGF2aW91ciBpbiBgbmdNb2RlbGAgaXMgdGhhdCB0aGUgbW9kZWwgdmFsdWUgaXMgc2V0IHRvIGB1bmRlZmluZWRgIHdoZW4gdGhlXG4gKiB2YWxpZGF0aW9uIGRldGVybWluZXMgdGhhdCB0aGUgdmFsdWUgaXMgaW52YWxpZC4gQnkgc2V0dGluZyB0aGUgYGFsbG93SW52YWxpZGAgcHJvcGVydHkgdG8gdHJ1ZSxcbiAqIHRoZSBtb2RlbCB3aWxsIHN0aWxsIGJlIHVwZGF0ZWQgZXZlbiBpZiB0aGUgdmFsdWUgaXMgaW52YWxpZC5cbiAqXG4gKlxuICogIyMgQ29ubmVjdGluZyB0byB0aGUgc2NvcGVcbiAqXG4gKiBCeSBzZXR0aW5nIHRoZSBgZ2V0dGVyU2V0dGVyYCBwcm9wZXJ0eSB0byB0cnVlIHlvdSBhcmUgdGVsbGluZyBuZ01vZGVsIHRoYXQgdGhlIGBuZ01vZGVsYCBleHByZXNzaW9uXG4gKiBvbiB0aGUgc2NvcGUgcmVmZXJzIHRvIGEgXCJnZXR0ZXIvc2V0dGVyXCIgZnVuY3Rpb24gcmF0aGVyIHRoYW4gdGhlIHZhbHVlIGl0c2VsZi5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIGJpbmQgdG8gZ2V0dGVyL3NldHRlcnM6XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cIm5nTW9kZWxPcHRpb25zLWRpcmVjdGl2ZS1nZXR0ZXItc2V0dGVyXCIgbW9kdWxlPVwiZ2V0dGVyU2V0dGVyRXhhbXBsZVwiPlxuICogICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwidXNlckZvcm1cIj5cbiAqICAgICAgICAgPGxhYmVsPlxuICogICAgICAgICAgIE5hbWU6XG4gKiAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInVzZXJOYW1lXCJcbiAqICAgICAgICAgICAgICAgICAgbmctbW9kZWw9XCJ1c2VyLm5hbWVcIlxuICogICAgICAgICAgICAgICAgICBuZy1tb2RlbC1vcHRpb25zPVwieyBnZXR0ZXJTZXR0ZXI6IHRydWUgfVwiIC8+XG4gKiAgICAgICAgIDwvbGFiZWw+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgICA8cHJlPnVzZXIubmFtZSA9IDxzcGFuIG5nLWJpbmQ9XCJ1c2VyLm5hbWUoKVwiPjwvc3Bhbj48L3ByZT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgICAgYW5ndWxhci5tb2R1bGUoJ2dldHRlclNldHRlckV4YW1wbGUnLCBbXSlcbiAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgIHZhciBfbmFtZSA9ICdCcmlhbic7XG4gKiAgICAgICAgICRzY29wZS51c2VyID0ge1xuICogICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uKG5ld05hbWUpIHtcbiAqICAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmlzRGVmaW5lZChuZXdOYW1lKSA/IChfbmFtZSA9IG5ld05hbWUpIDogX25hbWU7XG4gKiAgICAgICAgICAgfVxuICogICAgICAgICB9O1xuICogICAgICAgfV0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICpcbiAqICMjIFNwZWNpZnlpbmcgdGltZXpvbmVzXG4gKlxuICogWW91IGNhbiBzcGVjaWZ5IHRoZSB0aW1lem9uZSB0aGF0IGRhdGUvdGltZSBpbnB1dCBkaXJlY3RpdmVzIGV4cGVjdCBieSBwcm92aWRpbmcgaXRzIG5hbWUgaW4gdGhlXG4gKiBgdGltZXpvbmVgIHByb3BlcnR5LlxuICpcbiAqXG4gKiAjIyBQcm9ncmFtbWF0aWNhbGx5IGNoYW5naW5nIG9wdGlvbnNcbiAqXG4gKiBUaGUgYG5nTW9kZWxPcHRpb25zYCBleHByZXNzaW9uIGlzIG9ubHkgZXZhbHVhdGVkIG9uY2Ugd2hlbiB0aGUgZGlyZWN0aXZlIGlzIGxpbmtlZDsgaXQgaXMgbm90XG4gKiB3YXRjaGVkIGZvciBjaGFuZ2VzLiBIb3dldmVyLCBpdCBpcyBwb3NzaWJsZSB0byBvdmVycmlkZSB0aGUgb3B0aW9ucyBvbiBhIHNpbmdsZVxuICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXJ9IGluc3RhbmNlIHdpdGhcbiAqIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyRvdmVycmlkZU1vZGVsT3B0aW9ucyBgTmdNb2RlbENvbnRyb2xsZXIjJG92ZXJyaWRlTW9kZWxPcHRpb25zKClgfS5cbiAqXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5nTW9kZWxPcHRpb25zIG9wdGlvbnMgdG8gYXBwbHkgdG8ge0BsaW5rIG5nTW9kZWx9IGRpcmVjdGl2ZXMgb24gdGhpcyBlbGVtZW50IGFuZFxuICogICBhbmQgaXRzIGRlc2NlbmRlbnRzLiBWYWxpZCBrZXlzIGFyZTpcbiAqICAgLSBgdXBkYXRlT25gOiBzdHJpbmcgc3BlY2lmeWluZyB3aGljaCBldmVudCBzaG91bGQgdGhlIGlucHV0IGJlIGJvdW5kIHRvLiBZb3UgY2FuIHNldCBzZXZlcmFsXG4gKiAgICAgZXZlbnRzIHVzaW5nIGFuIHNwYWNlIGRlbGltaXRlZCBsaXN0LiBUaGVyZSBpcyBhIHNwZWNpYWwgZXZlbnQgY2FsbGVkIGBkZWZhdWx0YCB0aGF0XG4gKiAgICAgbWF0Y2hlcyB0aGUgZGVmYXVsdCBldmVudHMgYmVsb25naW5nIHRvIHRoZSBjb250cm9sLiBUaGVzZSBhcmUgdGhlIGV2ZW50cyB0aGF0IGFyZSBib3VuZCB0b1xuICogICAgIHRoZSBjb250cm9sLCBhbmQgd2hlbiBmaXJlZCwgdXBkYXRlIHRoZSBgJHZpZXdWYWx1ZWAgdmlhIGAkc2V0Vmlld1ZhbHVlYC5cbiAqXG4gKiAgICAgYG5nTW9kZWxPcHRpb25zYCBjb25zaWRlcnMgZXZlcnkgZXZlbnQgdGhhdCBpcyBub3QgbGlzdGVkIGluIGB1cGRhdGVPbmAgYSBcImRlZmF1bHRcIiBldmVudCxcbiAqICAgICBzaW5jZSBkaWZmZXJlbnQgY29udHJvbCB0eXBlcyB1c2UgZGlmZmVyZW50IGRlZmF1bHQgZXZlbnRzLlxuICpcbiAqICAgICBTZWUgYWxzbyB0aGUgc2VjdGlvbiB7QGxpbmsgbmdNb2RlbE9wdGlvbnMjdHJpZ2dlcmluZy1hbmQtZGVib3VuY2luZy1tb2RlbC11cGRhdGVzXG4gKiAgICAgVHJpZ2dlcmluZyBhbmQgZGVib3VuY2luZyBtb2RlbCB1cGRhdGVzfS5cbiAqXG4gKiAgIC0gYGRlYm91bmNlYDogaW50ZWdlciB2YWx1ZSB3aGljaCBjb250YWlucyB0aGUgZGVib3VuY2UgbW9kZWwgdXBkYXRlIHZhbHVlIGluIG1pbGxpc2Vjb25kcy4gQVxuICogICAgIHZhbHVlIG9mIDAgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHVwZGF0ZS4gSWYgYW4gb2JqZWN0IGlzIHN1cHBsaWVkIGluc3RlYWQsIHlvdSBjYW4gc3BlY2lmeSBhXG4gKiAgICAgY3VzdG9tIHZhbHVlIGZvciBlYWNoIGV2ZW50LiBGb3IgZXhhbXBsZTpcbiAqICAgICBgYGBcbiAqICAgICBuZy1tb2RlbC1vcHRpb25zPVwie1xuICogICAgICAgdXBkYXRlT246ICdkZWZhdWx0IGJsdXIgY2xpY2snLFxuICogICAgICAgZGVib3VuY2U6IHsgJ2RlZmF1bHQnOiA1MDAsICdibHVyJzogMCB9XG4gKiAgICAgfVwiXG4gKiAgICAgYGBgXG4gKlxuICogICAgIFwiZGVmYXVsdFwiIGFsc28gYXBwbGllcyB0byBhbGwgZXZlbnRzIHRoYXQgYXJlIGxpc3RlZCBpbiBgdXBkYXRlT25gIGJ1dCBhcmUgbm90XG4gKiAgICAgbGlzdGVkIGluIGBkZWJvdW5jZWAsIGkuZS4gXCJjbGlja1wiIHdvdWxkIGFsc28gYmUgZGVib3VuY2VkIGJ5IDUwMCBtaWxsaXNlY29uZHMuXG4gKlxuICogICAtIGBhbGxvd0ludmFsaWRgOiBib29sZWFuIHZhbHVlIHdoaWNoIGluZGljYXRlcyB0aGF0IHRoZSBtb2RlbCBjYW4gYmUgc2V0IHdpdGggdmFsdWVzIHRoYXQgZGlkXG4gKiAgICAgbm90IHZhbGlkYXRlIGNvcnJlY3RseSBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHNldHRpbmcgdGhlIG1vZGVsIHRvIHVuZGVmaW5lZC5cbiAqICAgLSBgZ2V0dGVyU2V0dGVyYDogYm9vbGVhbiB2YWx1ZSB3aGljaCBkZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRvIHRyZWF0IGZ1bmN0aW9ucyBib3VuZCB0b1xuICogICAgIGBuZ01vZGVsYCBhcyBnZXR0ZXJzL3NldHRlcnMuXG4gKiAgIC0gYHRpbWV6b25lYDogRGVmaW5lcyB0aGUgdGltZXpvbmUgdG8gYmUgdXNlZCB0byByZWFkL3dyaXRlIHRoZSBgRGF0ZWAgaW5zdGFuY2UgaW4gdGhlIG1vZGVsIGZvclxuICogICAgIGA8aW5wdXQgdHlwZT1cImRhdGVcIiAvPmAsIGA8aW5wdXQgdHlwZT1cInRpbWVcIiAvPmAsIC4uLiAuIEl0IHVuZGVyc3RhbmRzIFVUQy9HTVQgYW5kIHRoZVxuICogICAgIGNvbnRpbmVudGFsIFVTIHRpbWUgem9uZSBhYmJyZXZpYXRpb25zLCBidXQgZm9yIGdlbmVyYWwgdXNlLCB1c2UgYSB0aW1lIHpvbmUgb2Zmc2V0LCBmb3JcbiAqICAgICBleGFtcGxlLCBgJyswNDMwJ2AgKDQgaG91cnMsIDMwIG1pbnV0ZXMgZWFzdCBvZiB0aGUgR3JlZW53aWNoIG1lcmlkaWFuKVxuICogICAgIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lem9uZSBvZiB0aGUgYnJvd3NlciB3aWxsIGJlIHVzZWQuXG4gKlxuICovXG52YXIgbmdNb2RlbE9wdGlvbnNEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgTmdNb2RlbE9wdGlvbnNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRhdHRycycsICckc2NvcGUnXTtcbiAgZnVuY3Rpb24gTmdNb2RlbE9wdGlvbnNDb250cm9sbGVyKCRhdHRycywgJHNjb3BlKSB7XG4gICAgdGhpcy4kJGF0dHJzID0gJGF0dHJzO1xuICAgIHRoaXMuJCRzY29wZSA9ICRzY29wZTtcbiAgfVxuICBOZ01vZGVsT3B0aW9uc0NvbnRyb2xsZXIucHJvdG90eXBlID0ge1xuICAgICRvbkluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmVudE9wdGlvbnMgPSB0aGlzLnBhcmVudEN0cmwgPyB0aGlzLnBhcmVudEN0cmwuJG9wdGlvbnMgOiBkZWZhdWx0TW9kZWxPcHRpb25zO1xuICAgICAgdmFyIG1vZGVsT3B0aW9uc0RlZmluaXRpb24gPSB0aGlzLiQkc2NvcGUuJGV2YWwodGhpcy4kJGF0dHJzLm5nTW9kZWxPcHRpb25zKTtcblxuICAgICAgdGhpcy4kb3B0aW9ucyA9IHBhcmVudE9wdGlvbnMuY3JlYXRlQ2hpbGQobW9kZWxPcHRpb25zRGVmaW5pdGlvbik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAvLyBuZ01vZGVsT3B0aW9ucyBuZWVkcyB0byBydW4gYmVmb3JlIG5nTW9kZWwgYW5kIGlucHV0IGRpcmVjdGl2ZXNcbiAgICBwcmlvcml0eTogMTAsXG4gICAgcmVxdWlyZToge3BhcmVudEN0cmw6ICc/Xl5uZ01vZGVsT3B0aW9ucyd9LFxuICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgY29udHJvbGxlcjogTmdNb2RlbE9wdGlvbnNDb250cm9sbGVyXG4gIH07XG59O1xuXG5cbi8vIHNoYWxsb3cgY29weSBvdmVyIHZhbHVlcyBmcm9tIGBzcmNgIHRoYXQgYXJlIG5vdCBhbHJlYWR5IHNwZWNpZmllZCBvbiBgZHN0YFxuZnVuY3Rpb24gZGVmYXVsdHMoZHN0LCBzcmMpIHtcbiAgZm9yRWFjaChzcmMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoIWlzRGVmaW5lZChkc3Rba2V5XSkpIHtcbiAgICAgIGRzdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ05vbkJpbmRhYmxlXG4gKiBAcmVzdHJpY3QgQUNcbiAqIEBwcmlvcml0eSAxMDAwXG4gKiBAZWxlbWVudCBBTllcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdOb25CaW5kYWJsZWAgZGlyZWN0aXZlIHRlbGxzIEFuZ3VsYXJKUyBub3QgdG8gY29tcGlsZSBvciBiaW5kIHRoZSBjb250ZW50cyBvZiB0aGUgY3VycmVudFxuICogRE9NIGVsZW1lbnQsIGluY2x1ZGluZyBkaXJlY3RpdmVzIG9uIHRoZSBlbGVtZW50IGl0c2VsZiB0aGF0IGhhdmUgYSBsb3dlciBwcmlvcml0eSB0aGFuXG4gKiBgbmdOb25CaW5kYWJsZWAuIFRoaXMgaXMgdXNlZnVsIGlmIHRoZSBlbGVtZW50IGNvbnRhaW5zIHdoYXQgYXBwZWFycyB0byBiZSBBbmd1bGFySlMgZGlyZWN0aXZlc1xuICogYW5kIGJpbmRpbmdzIGJ1dCB3aGljaCBzaG91bGQgYmUgaWdub3JlZCBieSBBbmd1bGFySlMuIFRoaXMgY291bGQgYmUgdGhlIGNhc2UgaWYgeW91IGhhdmUgYSBzaXRlXG4gKiB0aGF0IGRpc3BsYXlzIHNuaXBwZXRzIG9mIGNvZGUsIGZvciBpbnN0YW5jZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogSW4gdGhpcyBleGFtcGxlIHRoZXJlIGFyZSB0d28gbG9jYXRpb25zIHdoZXJlIGEgc2ltcGxlIGludGVycG9sYXRpb24gYmluZGluZyAoYHt7fX1gKSBpcyBwcmVzZW50LFxuICogYnV0IHRoZSBvbmUgd3JhcHBlZCBpbiBgbmdOb25CaW5kYWJsZWAgaXMgbGVmdCBhbG9uZS5cbiAqXG4gIDxleGFtcGxlIG5hbWU9XCJuZy1ub24tYmluZGFibGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdj5Ob3JtYWw6IHt7MSArIDJ9fTwvZGl2PlxuICAgICAgPGRpdiBuZy1ub24tYmluZGFibGU+SWdub3JlZDoge3sxICsgMn19PC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1ub24tYmluZGFibGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCcxICsgMicpKS5nZXRUZXh0KCkpLnRvQ29udGFpbignMycpO1xuICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJ2RpdicpKS5sYXN0KCkuZ2V0VGV4dCgpKS50b01hdGNoKC8xIFxcKyAyLyk7XG4gICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG52YXIgbmdOb25CaW5kYWJsZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKHsgdGVybWluYWw6IHRydWUsIHByaW9yaXR5OiAxMDAwIH0pO1xuXG4vKiBleHBvcnRlZCBuZ09wdGlvbnNEaXJlY3RpdmUgKi9cblxuLyogZ2xvYmFsIGpxTGl0ZVJlbW92ZSAqL1xuXG52YXIgbmdPcHRpb25zTWluRXJyID0gbWluRXJyKCduZ09wdGlvbnMnKTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ09wdGlvbnNcbiAqIEByZXN0cmljdCBBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogVGhlIGBuZ09wdGlvbnNgIGF0dHJpYnV0ZSBjYW4gYmUgdXNlZCB0byBkeW5hbWljYWxseSBnZW5lcmF0ZSBhIGxpc3Qgb2YgYDxvcHRpb24+YFxuICogZWxlbWVudHMgZm9yIHRoZSBgPHNlbGVjdD5gIGVsZW1lbnQgdXNpbmcgdGhlIGFycmF5IG9yIG9iamVjdCBvYnRhaW5lZCBieSBldmFsdWF0aW5nIHRoZVxuICogYG5nT3B0aW9uc2AgY29tcHJlaGVuc2lvbiBleHByZXNzaW9uLlxuICpcbiAqIEluIG1hbnkgY2FzZXMsIHtAbGluayBuZy5kaXJlY3RpdmU6bmdSZXBlYXQgbmdSZXBlYXR9IGNhbiBiZSB1c2VkIG9uIGA8b3B0aW9uPmAgZWxlbWVudHMgaW5zdGVhZCBvZlxuICogYG5nT3B0aW9uc2AgdG8gYWNoaWV2ZSBhIHNpbWlsYXIgcmVzdWx0LiBIb3dldmVyLCBgbmdPcHRpb25zYCBwcm92aWRlcyBzb21lIGJlbmVmaXRzOlxuICogLSBtb3JlIGZsZXhpYmlsaXR5IGluIGhvdyB0aGUgYDxzZWxlY3Q+YCdzIG1vZGVsIGlzIGFzc2lnbmVkIHZpYSB0aGUgYHNlbGVjdGAgKipgYXNgKiogcGFydCBvZiB0aGVcbiAqIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvblxuICogLSByZWR1Y2VkIG1lbW9yeSBjb25zdW1wdGlvbiBieSBub3QgY3JlYXRpbmcgYSBuZXcgc2NvcGUgZm9yIGVhY2ggcmVwZWF0ZWQgaW5zdGFuY2VcbiAqIC0gaW5jcmVhc2VkIHJlbmRlciBzcGVlZCBieSBjcmVhdGluZyB0aGUgb3B0aW9ucyBpbiBhIGRvY3VtZW50RnJhZ21lbnQgaW5zdGVhZCBvZiBpbmRpdmlkdWFsbHlcbiAqXG4gKiBXaGVuIGFuIGl0ZW0gaW4gdGhlIGA8c2VsZWN0PmAgbWVudSBpcyBzZWxlY3RlZCwgdGhlIGFycmF5IGVsZW1lbnQgb3Igb2JqZWN0IHByb3BlcnR5XG4gKiByZXByZXNlbnRlZCBieSB0aGUgc2VsZWN0ZWQgb3B0aW9uIHdpbGwgYmUgYm91bmQgdG8gdGhlIG1vZGVsIGlkZW50aWZpZWQgYnkgdGhlIGBuZ01vZGVsYFxuICogZGlyZWN0aXZlLlxuICpcbiAqIE9wdGlvbmFsbHksIGEgc2luZ2xlIGhhcmQtY29kZWQgYDxvcHRpb24+YCBlbGVtZW50LCB3aXRoIHRoZSB2YWx1ZSBzZXQgdG8gYW4gZW1wdHkgc3RyaW5nLCBjYW5cbiAqIGJlIG5lc3RlZCBpbnRvIHRoZSBgPHNlbGVjdD5gIGVsZW1lbnQuIFRoaXMgZWxlbWVudCB3aWxsIHRoZW4gcmVwcmVzZW50IHRoZSBgbnVsbGAgb3IgXCJub3Qgc2VsZWN0ZWRcIlxuICogb3B0aW9uLiBTZWUgZXhhbXBsZSBiZWxvdyBmb3IgZGVtb25zdHJhdGlvbi5cbiAqXG4gKiAjIyBDb21wbGV4IE1vZGVscyAob2JqZWN0cyBvciBjb2xsZWN0aW9ucylcbiAqXG4gKiBCeSBkZWZhdWx0LCBgbmdNb2RlbGAgd2F0Y2hlcyB0aGUgbW9kZWwgYnkgcmVmZXJlbmNlLCBub3QgdmFsdWUuIFRoaXMgaXMgaW1wb3J0YW50IHRvIGtub3cgd2hlblxuICogYmluZGluZyB0aGUgc2VsZWN0IHRvIGEgbW9kZWwgdGhhdCBpcyBhbiBvYmplY3Qgb3IgYSBjb2xsZWN0aW9uLlxuICpcbiAqIE9uZSBpc3N1ZSBvY2N1cnMgaWYgeW91IHdhbnQgdG8gcHJlc2VsZWN0IGFuIG9wdGlvbi4gRm9yIGV4YW1wbGUsIGlmIHlvdSBzZXRcbiAqIHRoZSBtb2RlbCB0byBhbiBvYmplY3QgdGhhdCBpcyBlcXVhbCB0byBhbiBvYmplY3QgaW4geW91ciBjb2xsZWN0aW9uLCBgbmdPcHRpb25zYCB3b24ndCBiZSBhYmxlIHRvIHNldCB0aGUgc2VsZWN0aW9uLFxuICogYmVjYXVzZSB0aGUgb2JqZWN0cyBhcmUgbm90IGlkZW50aWNhbC4gU28gYnkgZGVmYXVsdCwgeW91IHNob3VsZCBhbHdheXMgcmVmZXJlbmNlIHRoZSBpdGVtIGluIHlvdXIgY29sbGVjdGlvblxuICogZm9yIHByZXNlbGVjdGlvbnMsIGUuZy46IGAkc2NvcGUuc2VsZWN0ZWQgPSAkc2NvcGUuY29sbGVjdGlvblszXWAuXG4gKlxuICogQW5vdGhlciBzb2x1dGlvbiBpcyB0byB1c2UgYSBgdHJhY2sgYnlgIGNsYXVzZSwgYmVjYXVzZSB0aGVuIGBuZ09wdGlvbnNgIHdpbGwgdHJhY2sgdGhlIGlkZW50aXR5XG4gKiBvZiB0aGUgaXRlbSBub3QgYnkgcmVmZXJlbmNlLCBidXQgYnkgdGhlIHJlc3VsdCBvZiB0aGUgYHRyYWNrIGJ5YCBleHByZXNzaW9uLiBGb3IgZXhhbXBsZSwgaWYgeW91clxuICogY29sbGVjdGlvbiBpdGVtcyBoYXZlIGFuIGlkIHByb3BlcnR5LCB5b3Ugd291bGQgYHRyYWNrIGJ5IGl0ZW0uaWRgLlxuICpcbiAqIEEgZGlmZmVyZW50IGlzc3VlIHdpdGggb2JqZWN0cyBvciBjb2xsZWN0aW9ucyBpcyB0aGF0IG5nTW9kZWwgd29uJ3QgZGV0ZWN0IGlmIGFuIG9iamVjdCBwcm9wZXJ0eSBvclxuICogYSBjb2xsZWN0aW9uIGl0ZW0gY2hhbmdlcy4gRm9yIHRoYXQgcmVhc29uLCBgbmdPcHRpb25zYCBhZGRpdGlvbmFsbHkgd2F0Y2hlcyB0aGUgbW9kZWwgdXNpbmdcbiAqIGAkd2F0Y2hDb2xsZWN0aW9uYCwgd2hlbiB0aGUgZXhwcmVzc2lvbiBjb250YWlucyBhIGB0cmFjayBieWAgY2xhdXNlIG9yIHRoZSB0aGUgc2VsZWN0IGhhcyB0aGUgYG11bHRpcGxlYCBhdHRyaWJ1dGUuXG4gKiBUaGlzIGFsbG93cyBuZ09wdGlvbnMgdG8gdHJpZ2dlciBhIHJlLXJlbmRlcmluZyBvZiB0aGUgb3B0aW9ucyBldmVuIGlmIHRoZSBhY3R1YWwgb2JqZWN0L2NvbGxlY3Rpb25cbiAqIGhhcyBub3QgY2hhbmdlZCBpZGVudGl0eSwgYnV0IG9ubHkgYSBwcm9wZXJ0eSBvbiB0aGUgb2JqZWN0IG9yIGFuIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24gY2hhbmdlcy5cbiAqXG4gKiBOb3RlIHRoYXQgYCR3YXRjaENvbGxlY3Rpb25gIGRvZXMgYSBzaGFsbG93IGNvbXBhcmlzb24gb2YgdGhlIHByb3BlcnRpZXMgb2YgdGhlIG9iamVjdCAob3IgdGhlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uXG4gKiBpZiB0aGUgbW9kZWwgaXMgYW4gYXJyYXkpLiBUaGlzIG1lYW5zIHRoYXQgY2hhbmdpbmcgYSBwcm9wZXJ0eSBkZWVwZXIgdGhhbiB0aGUgZmlyc3QgbGV2ZWwgaW5zaWRlIHRoZVxuICogb2JqZWN0L2NvbGxlY3Rpb24gd2lsbCBub3QgdHJpZ2dlciBhIHJlLXJlbmRlcmluZy5cbiAqXG4gKiAjIyBgc2VsZWN0YCAqKmBhc2AqKlxuICpcbiAqIFVzaW5nIGBzZWxlY3RgICoqYGFzYCoqIHdpbGwgYmluZCB0aGUgcmVzdWx0IG9mIHRoZSBgc2VsZWN0YCBleHByZXNzaW9uIHRvIHRoZSBtb2RlbCwgYnV0XG4gKiB0aGUgdmFsdWUgb2YgdGhlIGA8c2VsZWN0PmAgYW5kIGA8b3B0aW9uPmAgaHRtbCBlbGVtZW50cyB3aWxsIGJlIGVpdGhlciB0aGUgaW5kZXggKGZvciBhcnJheSBkYXRhIHNvdXJjZXMpXG4gKiBvciBwcm9wZXJ0eSBuYW1lIChmb3Igb2JqZWN0IGRhdGEgc291cmNlcykgb2YgdGhlIHZhbHVlIHdpdGhpbiB0aGUgY29sbGVjdGlvbi4gSWYgYSAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uXG4gKiBpcyB1c2VkLCB0aGUgcmVzdWx0IG9mIHRoYXQgZXhwcmVzc2lvbiB3aWxsIGJlIHNldCBhcyB0aGUgdmFsdWUgb2YgdGhlIGBvcHRpb25gIGFuZCBgc2VsZWN0YCBlbGVtZW50cy5cbiAqXG4gKlxuICogIyMjIGBzZWxlY3RgICoqYGFzYCoqIGFuZCAqKmB0cmFjayBieWAqKlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC13YXJuaW5nXCI+XG4gKiBCZSBjYXJlZnVsIHdoZW4gdXNpbmcgYHNlbGVjdGAgKipgYXNgKiogYW5kICoqYHRyYWNrIGJ5YCoqIGluIHRoZSBzYW1lIGV4cHJlc3Npb24uXG4gKiA8L2Rpdj5cbiAqXG4gKiBHaXZlbiB0aGlzIGFycmF5IG9mIGl0ZW1zIG9uIHRoZSAkc2NvcGU6XG4gKlxuICogYGBganNcbiAqICRzY29wZS5pdGVtcyA9IFt7XG4gKiAgIGlkOiAxLFxuICogICBsYWJlbDogJ2FMYWJlbCcsXG4gKiAgIHN1Ykl0ZW06IHsgbmFtZTogJ2FTdWJJdGVtJyB9XG4gKiB9LCB7XG4gKiAgIGlkOiAyLFxuICogICBsYWJlbDogJ2JMYWJlbCcsXG4gKiAgIHN1Ykl0ZW06IHsgbmFtZTogJ2JTdWJJdGVtJyB9XG4gKiB9XTtcbiAqIGBgYFxuICpcbiAqIFRoaXMgd2lsbCB3b3JrOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxzZWxlY3Qgbmctb3B0aW9ucz1cIml0ZW0gYXMgaXRlbS5sYWJlbCBmb3IgaXRlbSBpbiBpdGVtcyB0cmFjayBieSBpdGVtLmlkXCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiPjwvc2VsZWN0PlxuICogYGBgXG4gKiBgYGBqc1xuICogJHNjb3BlLnNlbGVjdGVkID0gJHNjb3BlLml0ZW1zWzBdO1xuICogYGBgXG4gKlxuICogYnV0IHRoaXMgd2lsbCBub3Qgd29yazpcbiAqXG4gKiBgYGBodG1sXG4gKiA8c2VsZWN0IG5nLW9wdGlvbnM9XCJpdGVtLnN1Ykl0ZW0gYXMgaXRlbS5sYWJlbCBmb3IgaXRlbSBpbiBpdGVtcyB0cmFjayBieSBpdGVtLmlkXCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiPjwvc2VsZWN0PlxuICogYGBgXG4gKiBgYGBqc1xuICogJHNjb3BlLnNlbGVjdGVkID0gJHNjb3BlLml0ZW1zWzBdLnN1Ykl0ZW07XG4gKiBgYGBcbiAqXG4gKiBJbiBib3RoIGV4YW1wbGVzLCB0aGUgKipgdHJhY2sgYnlgKiogZXhwcmVzc2lvbiBpcyBhcHBsaWVkIHN1Y2Nlc3NmdWxseSB0byBlYWNoIGBpdGVtYCBpbiB0aGVcbiAqIGBpdGVtc2AgYXJyYXkuIEJlY2F1c2UgdGhlIHNlbGVjdGVkIG9wdGlvbiBoYXMgYmVlbiBzZXQgcHJvZ3JhbW1hdGljYWxseSBpbiB0aGUgY29udHJvbGxlciwgdGhlXG4gKiAqKmB0cmFjayBieWAqKiBleHByZXNzaW9uIGlzIGFsc28gYXBwbGllZCB0byB0aGUgYG5nTW9kZWxgIHZhbHVlLiBJbiB0aGUgZmlyc3QgZXhhbXBsZSwgdGhlXG4gKiBgbmdNb2RlbGAgdmFsdWUgaXMgYGl0ZW1zWzBdYCBhbmQgdGhlICoqYHRyYWNrIGJ5YCoqIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGBpdGVtc1swXS5pZGAgd2l0aFxuICogbm8gaXNzdWUuIEluIHRoZSBzZWNvbmQgZXhhbXBsZSwgdGhlIGBuZ01vZGVsYCB2YWx1ZSBpcyBgaXRlbXNbMF0uc3ViSXRlbWAgYW5kIHRoZSAqKmB0cmFjayBieWAqKlxuICogZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYGl0ZW1zWzBdLnN1Ykl0ZW0uaWRgICh3aGljaCBpcyB1bmRlZmluZWQpLiBBcyBhIHJlc3VsdCwgdGhlIG1vZGVsIHZhbHVlXG4gKiBpcyBub3QgbWF0Y2hlZCBhZ2FpbnN0IGFueSBgPG9wdGlvbj5gIGFuZCB0aGUgYDxzZWxlY3Q+YCBhcHBlYXJzIGFzIGhhdmluZyBubyBzZWxlY3RlZCB2YWx1ZS5cbiAqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nTW9kZWwgQXNzaWduYWJsZSBBbmd1bGFySlMgZXhwcmVzc2lvbiB0byBkYXRhLWJpbmQgdG8uXG4gKiBAcGFyYW0ge2NvbXByZWhlbnNpb25fZXhwcmVzc2lvbn0gbmdPcHRpb25zIGluIG9uZSBvZiB0aGUgZm9sbG93aW5nIGZvcm1zOlxuICpcbiAqICAgKiBmb3IgYXJyYXkgZGF0YSBzb3VyY2VzOlxuICogICAgICogYGxhYmVsYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXG4gKiAgICAgKiBgc2VsZWN0YCAqKmBhc2AqKiBgbGFiZWxgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWBcbiAqICAgICAqIGBsYWJlbGAgKipgZ3JvdXAgYnlgKiogYGdyb3VwYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgXG4gKiAgICAgKiBgbGFiZWxgICoqYGRpc2FibGUgd2hlbmAqKiBgZGlzYWJsZWAgKipgZm9yYCoqIGB2YWx1ZWAgKipgaW5gKiogYGFycmF5YFxuICogICAgICogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWAgKipgdHJhY2sgYnlgKiogYHRyYWNrZXhwcmBcbiAqICAgICAqIGBsYWJlbGAgKipgZGlzYWJsZSB3aGVuYCoqIGBkaXNhYmxlYCAqKmBmb3JgKiogYHZhbHVlYCAqKmBpbmAqKiBgYXJyYXlgICoqYHRyYWNrIGJ5YCoqIGB0cmFja2V4cHJgXG4gKiAgICAgKiBgbGFiZWxgICoqYGZvcmAqKiBgdmFsdWVgICoqYGluYCoqIGBhcnJheWAgfCBvcmRlckJ5OmBvcmRlcmV4cHJgICoqYHRyYWNrIGJ5YCoqIGB0cmFja2V4cHJgXG4gKiAgICAgICAgKGZvciBpbmNsdWRpbmcgYSBmaWx0ZXIgd2l0aCBgdHJhY2sgYnlgKVxuICogICAqIGZvciBvYmplY3QgZGF0YSBzb3VyY2VzOlxuICogICAgICogYGxhYmVsYCAqKmBmb3IgKGAqKmBrZXlgICoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZm9yIChgKipga2V5YCAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXG4gKiAgICAgKiBgbGFiZWxgICoqYGdyb3VwIGJ5YCoqIGBncm91cGAgKipgZm9yIChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBsYWJlbGAgKipgZGlzYWJsZSB3aGVuYCoqIGBkaXNhYmxlYCAqKmBmb3IgKGAqKmBrZXlgKipgLGAqKiBgdmFsdWVgKipgKSBpbmAqKiBgb2JqZWN0YFxuICogICAgICogYHNlbGVjdGAgKipgYXNgKiogYGxhYmVsYCAqKmBncm91cCBieWAqKiBgZ3JvdXBgXG4gKiAgICAgICAgICoqYGZvcmAgYChgKipga2V5YCoqYCxgKiogYHZhbHVlYCoqYCkgaW5gKiogYG9iamVjdGBcbiAqICAgICAqIGBzZWxlY3RgICoqYGFzYCoqIGBsYWJlbGAgKipgZGlzYWJsZSB3aGVuYCoqIGBkaXNhYmxlYFxuICogICAgICAgICAqKmBmb3JgIGAoYCoqYGtleWAqKmAsYCoqIGB2YWx1ZWAqKmApIGluYCoqIGBvYmplY3RgXG4gKlxuICogV2hlcmU6XG4gKlxuICogICAqIGBhcnJheWAgLyBgb2JqZWN0YDogYW4gZXhwcmVzc2lvbiB3aGljaCBldmFsdWF0ZXMgdG8gYW4gYXJyYXkgLyBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogICAqIGB2YWx1ZWA6IGxvY2FsIHZhcmlhYmxlIHdoaWNoIHdpbGwgcmVmZXIgdG8gZWFjaCBpdGVtIGluIHRoZSBgYXJyYXlgIG9yIGVhY2ggcHJvcGVydHkgdmFsdWVcbiAqICAgICAgb2YgYG9iamVjdGAgZHVyaW5nIGl0ZXJhdGlvbi5cbiAqICAgKiBga2V5YDogbG9jYWwgdmFyaWFibGUgd2hpY2ggd2lsbCByZWZlciB0byBhIHByb3BlcnR5IG5hbWUgaW4gYG9iamVjdGAgZHVyaW5nIGl0ZXJhdGlvbi5cbiAqICAgKiBgbGFiZWxgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIHRoZSBsYWJlbCBmb3IgYDxvcHRpb24+YCBlbGVtZW50LiBUaGVcbiAqICAgICBgZXhwcmVzc2lvbmAgd2lsbCBtb3N0IGxpa2VseSByZWZlciB0byB0aGUgYHZhbHVlYCB2YXJpYWJsZSAoZS5nLiBgdmFsdWUucHJvcGVydHlOYW1lYCkuXG4gKiAgICogYHNlbGVjdGA6IFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmUgYm91bmQgdG8gdGhlIG1vZGVsIG9mIHRoZSBwYXJlbnQgYDxzZWxlY3Q+YFxuICogICAgICBlbGVtZW50LiBJZiBub3Qgc3BlY2lmaWVkLCBgc2VsZWN0YCBleHByZXNzaW9uIHdpbGwgZGVmYXVsdCB0byBgdmFsdWVgLlxuICogICAqIGBncm91cGA6IFRoZSByZXN1bHQgb2YgdGhpcyBleHByZXNzaW9uIHdpbGwgYmUgdXNlZCB0byBncm91cCBvcHRpb25zIHVzaW5nIHRoZSBgPG9wdGdyb3VwPmBcbiAqICAgICAgRE9NIGVsZW1lbnQuXG4gKiAgICogYGRpc2FibGVgOiBUaGUgcmVzdWx0IG9mIHRoaXMgZXhwcmVzc2lvbiB3aWxsIGJlIHVzZWQgdG8gZGlzYWJsZSB0aGUgcmVuZGVyZWQgYDxvcHRpb24+YFxuICogICAgICBlbGVtZW50LiBSZXR1cm4gYHRydWVgIHRvIGRpc2FibGUuXG4gKiAgICogYHRyYWNrZXhwcmA6IFVzZWQgd2hlbiB3b3JraW5nIHdpdGggYW4gYXJyYXkgb2Ygb2JqZWN0cy4gVGhlIHJlc3VsdCBvZiB0aGlzIGV4cHJlc3Npb24gd2lsbCBiZVxuICogICAgICB1c2VkIHRvIGlkZW50aWZ5IHRoZSBvYmplY3RzIGluIHRoZSBhcnJheS4gVGhlIGB0cmFja2V4cHJgIHdpbGwgbW9zdCBsaWtlbHkgcmVmZXIgdG8gdGhlXG4gKiAgICAgYHZhbHVlYCB2YXJpYWJsZSAoZS5nLiBgdmFsdWUucHJvcGVydHlOYW1lYCkuIFdpdGggdGhpcyB0aGUgc2VsZWN0aW9uIGlzIHByZXNlcnZlZFxuICogICAgICBldmVuIHdoZW4gdGhlIG9wdGlvbnMgYXJlIHJlY3JlYXRlZCAoZS5nLiByZWxvYWRlZCBmcm9tIHRoZSBzZXJ2ZXIpLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuYW1lIFByb3BlcnR5IG5hbWUgb2YgdGhlIGZvcm0gdW5kZXIgd2hpY2ggdGhlIGNvbnRyb2wgaXMgcHVibGlzaGVkLlxuICogQHBhcmFtIHtzdHJpbmc9fSByZXF1aXJlZCBUaGUgY29udHJvbCBpcyBjb25zaWRlcmVkIHZhbGlkIG9ubHkgaWYgdmFsdWUgaXMgZW50ZXJlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIGByZXF1aXJlZGAgYXR0cmlidXRlIGFuZCBgcmVxdWlyZWRgIHZhbGlkYXRpb24gY29uc3RyYWludCB0b1xuICogICAgdGhlIGVsZW1lbnQgd2hlbiB0aGUgbmdSZXF1aXJlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byB0cnVlLiBVc2UgYG5nUmVxdWlyZWRgIGluc3RlYWQgb2ZcbiAqICAgIGByZXF1aXJlZGAgd2hlbiB5b3Ugd2FudCB0byBkYXRhLWJpbmQgdG8gdGhlIGByZXF1aXJlZGAgYXR0cmlidXRlLlxuICogQHBhcmFtIHtzdHJpbmc9fSBuZ0F0dHJTaXplIHNldHMgdGhlIHNpemUgb2YgdGhlIHNlbGVjdCBlbGVtZW50IGR5bmFtaWNhbGx5LiBVc2VzIHRoZVxuICoge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24jLW5nYXR0ci1mb3ItYmluZGluZy10by1hcmJpdHJhcnktYXR0cmlidXRlcyBuZ0F0dHJ9IGRpcmVjdGl2ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICAgIDxleGFtcGxlIG1vZHVsZT1cInNlbGVjdEV4YW1wbGVcIiBuYW1lPVwic2VsZWN0XCI+XG4gICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8c2NyaXB0PlxuICAgICAgICBhbmd1bGFyLm1vZHVsZSgnc2VsZWN0RXhhbXBsZScsIFtdKVxuICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAkc2NvcGUuY29sb3JzID0gW1xuICAgICAgICAgICAgICB7bmFtZTonYmxhY2snLCBzaGFkZTonZGFyayd9LFxuICAgICAgICAgICAgICB7bmFtZTond2hpdGUnLCBzaGFkZTonbGlnaHQnLCBub3RBbk9wdGlvbjogdHJ1ZX0sXG4gICAgICAgICAgICAgIHtuYW1lOidyZWQnLCBzaGFkZTonZGFyayd9LFxuICAgICAgICAgICAgICB7bmFtZTonYmx1ZScsIHNoYWRlOidkYXJrJywgbm90QW5PcHRpb246IHRydWV9LFxuICAgICAgICAgICAgICB7bmFtZToneWVsbG93Jywgc2hhZGU6J2xpZ2h0Jywgbm90QW5PcHRpb246IGZhbHNlfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICRzY29wZS5teUNvbG9yID0gJHNjb3BlLmNvbG9yc1syXTsgLy8gcmVkXG4gICAgICAgICAgfV0pO1xuICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgICA8dWw+XG4gICAgICAgICAgICA8bGkgbmctcmVwZWF0PVwiY29sb3IgaW4gY29sb3JzXCI+XG4gICAgICAgICAgICAgIDxsYWJlbD5OYW1lOiA8aW5wdXQgbmctbW9kZWw9XCJjb2xvci5uYW1lXCI+PC9sYWJlbD5cbiAgICAgICAgICAgICAgPGxhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNvbG9yLm5vdEFuT3B0aW9uXCI+IERpc2FibGVkPzwvbGFiZWw+XG4gICAgICAgICAgICAgIDxidXR0b24gbmctY2xpY2s9XCJjb2xvcnMuc3BsaWNlKCRpbmRleCwgMSlcIiBhcmlhLWxhYmVsPVwiUmVtb3ZlXCI+WDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBuZy1jbGljaz1cImNvbG9ycy5wdXNoKHt9KVwiPmFkZDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICA8L3VsPlxuICAgICAgICAgIDxoci8+XG4gICAgICAgICAgPGxhYmVsPkNvbG9yIChudWxsIG5vdCBhbGxvd2VkKTpcbiAgICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPjwvc2VsZWN0PlxuICAgICAgICAgIDwvbGFiZWw+PGJyLz5cbiAgICAgICAgICA8bGFiZWw+Q29sb3IgKG51bGwgYWxsb3dlZCk6XG4gICAgICAgICAgPHNwYW4gIGNsYXNzPVwibnVsbGFibGVcIj5cbiAgICAgICAgICAgIDxzZWxlY3QgbmctbW9kZWw9XCJteUNvbG9yXCIgbmctb3B0aW9ucz1cImNvbG9yLm5hbWUgZm9yIGNvbG9yIGluIGNvbG9yc1wiPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+LS0gY2hvb3NlIGNvbG9yIC0tPC9vcHRpb24+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA8L3NwYW4+PC9sYWJlbD48YnIvPlxuXG4gICAgICAgICAgPGxhYmVsPkNvbG9yIGdyb3VwZWQgYnkgc2hhZGU6XG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiIG5nLW9wdGlvbnM9XCJjb2xvci5uYW1lIGdyb3VwIGJ5IGNvbG9yLnNoYWRlIGZvciBjb2xvciBpbiBjb2xvcnNcIj5cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgIDwvbGFiZWw+PGJyLz5cblxuICAgICAgICAgIDxsYWJlbD5Db2xvciBncm91cGVkIGJ5IHNoYWRlLCB3aXRoIHNvbWUgZGlzYWJsZWQ6XG4gICAgICAgICAgICA8c2VsZWN0IG5nLW1vZGVsPVwibXlDb2xvclwiXG4gICAgICAgICAgICAgICAgICBuZy1vcHRpb25zPVwiY29sb3IubmFtZSBncm91cCBieSBjb2xvci5zaGFkZSBkaXNhYmxlIHdoZW4gY29sb3Iubm90QW5PcHRpb24gZm9yIGNvbG9yIGluIGNvbG9yc1wiPlxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPC9sYWJlbD48YnIvPlxuXG5cblxuICAgICAgICAgIFNlbGVjdCA8YnV0dG9uIG5nLWNsaWNrPVwibXlDb2xvciA9IHsgbmFtZTonbm90IGluIGxpc3QnLCBzaGFkZTogJ290aGVyJyB9XCI+Ym9ndXM8L2J1dHRvbj4uXG4gICAgICAgICAgPGJyLz5cbiAgICAgICAgICA8aHIvPlxuICAgICAgICAgIEN1cnJlbnRseSBzZWxlY3RlZDoge3sge3NlbGVjdGVkX2NvbG9yOm15Q29sb3J9IH19XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJvcmRlcjpzb2xpZCAxcHggYmxhY2s7IGhlaWdodDoyMHB4XCJcbiAgICAgICAgICAgICAgIG5nLXN0eWxlPVwieydiYWNrZ3JvdW5kLWNvbG9yJzpteUNvbG9yLm5hbWV9XCI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9maWxlPlxuICAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZy1vcHRpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3tzZWxlY3RlZF9jb2xvcjpteUNvbG9yfScpKS5nZXRUZXh0KCkpLnRvTWF0Y2goJ3JlZCcpO1xuICAgICAgICAgICBlbGVtZW50LmFsbChieS5tb2RlbCgnbXlDb2xvcicpKS5maXJzdCgpLmNsaWNrKCk7XG4gICAgICAgICAgIGVsZW1lbnQuYWxsKGJ5LmNzcygnc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXSBvcHRpb24nKSkuZmlyc3QoKS5jbGljaygpO1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdibGFjaycpO1xuICAgICAgICAgICBlbGVtZW50KGJ5LmNzcygnLm51bGxhYmxlIHNlbGVjdFtuZy1tb2RlbD1cIm15Q29sb3JcIl0nKSkuY2xpY2soKTtcbiAgICAgICAgICAgZWxlbWVudC5hbGwoYnkuY3NzKCcubnVsbGFibGUgc2VsZWN0W25nLW1vZGVsPVwibXlDb2xvclwiXSBvcHRpb24nKSkuZmlyc3QoKS5jbGljaygpO1xuICAgICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd7c2VsZWN0ZWRfY29sb3I6bXlDb2xvcn0nKSkuZ2V0VGV4dCgpKS50b01hdGNoKCdudWxsJyk7XG4gICAgICAgICB9KTtcbiAgICAgIDwvZmlsZT5cbiAgICA8L2V4YW1wbGU+XG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuLy8gICAgICAgICAgICAgICAgICAgICAvLzAwMDAxMTExMTExMTExMDAwMDAwMDAwMDAyMjIyMjIyMjIyMDAwMDAwMDAwMDAwMDAwMDAwMDAwMzMzMzMzMzMzMzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA0NDQ0NDQ0NDQ0NDAwMDAwMDAwMDAwMDA1NTU1NTU1NTU1NTU1MDAwMDAwMDAwNjY2NjY2NjY2NjY2NjAwMDAwMDA3Nzc3Nzc3Nzc3Nzc3MDAwMDAwMDAwMDAwMDAwODg4ODg4ODg4ODAwMDAwMDAwMDAwMDAwMDAwMDA5OTk5OTk5OTk5XG52YXIgTkdfT1BUSU9OU19SRUdFWFAgPSAvXlxccyooW1xcc1xcU10rPykoPzpcXHMrYXNcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZ3JvdXBcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8oPzpcXHMrZGlzYWJsZVxccyt3aGVuXFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooWyRcXHddWyRcXHddKil8KD86XFwoXFxzKihbJFxcd11bJFxcd10qKVxccyosXFxzKihbJFxcd11bJFxcd10qKVxccypcXCkpKVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8kLztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDE6IHZhbHVlIGV4cHJlc3Npb24gKHZhbHVlRm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAyOiBsYWJlbCBleHByZXNzaW9uIChkaXNwbGF5Rm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAzOiBncm91cCBieSBleHByZXNzaW9uIChncm91cEJ5Rm4pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyA0OiBkaXNhYmxlIHdoZW4gZXhwcmVzc2lvbiAoZGlzYWJsZVdoZW5GbilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDU6IGFycmF5IGl0ZW0gdmFyaWFibGUgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gNjogb2JqZWN0IGl0ZW0ga2V5IHZhcmlhYmxlIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDc6IG9iamVjdCBpdGVtIHZhbHVlIHZhcmlhYmxlIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDg6IGNvbGxlY3Rpb24gZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gOTogdHJhY2sgYnkgZXhwcmVzc2lvblxuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5cbnZhciBuZ09wdGlvbnNEaXJlY3RpdmUgPSBbJyRjb21waWxlJywgJyRkb2N1bWVudCcsICckcGFyc2UnLCBmdW5jdGlvbigkY29tcGlsZSwgJGRvY3VtZW50LCAkcGFyc2UpIHtcblxuICBmdW5jdGlvbiBwYXJzZU9wdGlvbnNFeHByZXNzaW9uKG9wdGlvbnNFeHAsIHNlbGVjdEVsZW1lbnQsIHNjb3BlKSB7XG5cbiAgICB2YXIgbWF0Y2ggPSBvcHRpb25zRXhwLm1hdGNoKE5HX09QVElPTlNfUkVHRVhQKTtcbiAgICBpZiAoIShtYXRjaCkpIHtcbiAgICAgIHRocm93IG5nT3B0aW9uc01pbkVycignaWV4cCcsXG4gICAgICAgICdFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgJyArXG4gICAgICAgICdcXCdfc2VsZWN0XyAoYXMgX2xhYmVsXyk/IGZvciAoX2tleV8sKT9fdmFsdWVfIGluIF9jb2xsZWN0aW9uX1xcJycgK1xuICAgICAgICAnIGJ1dCBnb3QgXFwnezB9XFwnLiBFbGVtZW50OiB7MX0nLFxuICAgICAgICBvcHRpb25zRXhwLCBzdGFydGluZ1RhZyhzZWxlY3RFbGVtZW50KSk7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCB0aGUgcGFydHMgZnJvbSB0aGUgbmdPcHRpb25zIGV4cHJlc3Npb25cblxuICAgIC8vIFRoZSB2YXJpYWJsZSBuYW1lIGZvciB0aGUgdmFsdWUgb2YgdGhlIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb25cbiAgICB2YXIgdmFsdWVOYW1lID0gbWF0Y2hbNV0gfHwgbWF0Y2hbN107XG4gICAgLy8gVGhlIHZhcmlhYmxlIG5hbWUgZm9yIHRoZSBrZXkgb2YgdGhlIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb25cbiAgICB2YXIga2V5TmFtZSA9IG1hdGNoWzZdO1xuXG4gICAgLy8gQW4gZXhwcmVzc2lvbiB0aGF0IGdlbmVyYXRlcyB0aGUgdmlld1ZhbHVlIGZvciBhbiBvcHRpb24gaWYgdGhlcmUgaXMgYSBsYWJlbCBleHByZXNzaW9uXG4gICAgdmFyIHNlbGVjdEFzID0gLyBhcyAvLnRlc3QobWF0Y2hbMF0pICYmIG1hdGNoWzFdO1xuICAgIC8vIEFuIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIHRvIHRyYWNrIHRoZSBpZCBvZiBlYWNoIG9iamVjdCBpbiB0aGUgb3B0aW9ucyBjb2xsZWN0aW9uXG4gICAgdmFyIHRyYWNrQnkgPSBtYXRjaFs5XTtcbiAgICAvLyBBbiBleHByZXNzaW9uIHRoYXQgZ2VuZXJhdGVzIHRoZSB2aWV3VmFsdWUgZm9yIGFuIG9wdGlvbiBpZiB0aGVyZSBpcyBubyBsYWJlbCBleHByZXNzaW9uXG4gICAgdmFyIHZhbHVlRm4gPSAkcGFyc2UobWF0Y2hbMl0gPyBtYXRjaFsxXSA6IHZhbHVlTmFtZSk7XG4gICAgdmFyIHNlbGVjdEFzRm4gPSBzZWxlY3RBcyAmJiAkcGFyc2Uoc2VsZWN0QXMpO1xuICAgIHZhciB2aWV3VmFsdWVGbiA9IHNlbGVjdEFzRm4gfHwgdmFsdWVGbjtcbiAgICB2YXIgdHJhY2tCeUZuID0gdHJhY2tCeSAmJiAkcGFyc2UodHJhY2tCeSk7XG5cbiAgICAvLyBHZXQgdGhlIHZhbHVlIGJ5IHdoaWNoIHdlIGFyZSBnb2luZyB0byB0cmFjayB0aGUgb3B0aW9uXG4gICAgLy8gaWYgd2UgaGF2ZSBhIHRyYWNrRm4gdGhlbiB1c2UgdGhhdCAocGFzc2luZyBzY29wZSBhbmQgbG9jYWxzKVxuICAgIC8vIG90aGVyd2lzZSBqdXN0IGhhc2ggdGhlIGdpdmVuIHZpZXdWYWx1ZVxuICAgIHZhciBnZXRUcmFja0J5VmFsdWVGbiA9IHRyYWNrQnkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odmFsdWUsIGxvY2FscykgeyByZXR1cm4gdHJhY2tCeUZuKHNjb3BlLCBsb2NhbHMpOyB9IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEhhc2hPZlZhbHVlKHZhbHVlKSB7IHJldHVybiBoYXNoS2V5KHZhbHVlKTsgfTtcbiAgICB2YXIgZ2V0VHJhY2tCeVZhbHVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgcmV0dXJuIGdldFRyYWNrQnlWYWx1ZUZuKHZhbHVlLCBnZXRMb2NhbHModmFsdWUsIGtleSkpO1xuICAgIH07XG5cbiAgICB2YXIgZGlzcGxheUZuID0gJHBhcnNlKG1hdGNoWzJdIHx8IG1hdGNoWzFdKTtcbiAgICB2YXIgZ3JvdXBCeUZuID0gJHBhcnNlKG1hdGNoWzNdIHx8ICcnKTtcbiAgICB2YXIgZGlzYWJsZVdoZW5GbiA9ICRwYXJzZShtYXRjaFs0XSB8fCAnJyk7XG4gICAgdmFyIHZhbHVlc0ZuID0gJHBhcnNlKG1hdGNoWzhdKTtcblxuICAgIHZhciBsb2NhbHMgPSB7fTtcbiAgICB2YXIgZ2V0TG9jYWxzID0ga2V5TmFtZSA/IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgIGxvY2Fsc1trZXlOYW1lXSA9IGtleTtcbiAgICAgIGxvY2Fsc1t2YWx1ZU5hbWVdID0gdmFsdWU7XG4gICAgICByZXR1cm4gbG9jYWxzO1xuICAgIH0gOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgbG9jYWxzW3ZhbHVlTmFtZV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBsb2NhbHM7XG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gT3B0aW9uKHNlbGVjdFZhbHVlLCB2aWV3VmFsdWUsIGxhYmVsLCBncm91cCwgZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuc2VsZWN0VmFsdWUgPSBzZWxlY3RWYWx1ZTtcbiAgICAgIHRoaXMudmlld1ZhbHVlID0gdmlld1ZhbHVlO1xuICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgICAgdGhpcy5ncm91cCA9IGdyb3VwO1xuICAgICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE9wdGlvblZhbHVlc0tleXMob3B0aW9uVmFsdWVzKSB7XG4gICAgICB2YXIgb3B0aW9uVmFsdWVzS2V5cztcblxuICAgICAgaWYgKCFrZXlOYW1lICYmIGlzQXJyYXlMaWtlKG9wdGlvblZhbHVlcykpIHtcbiAgICAgICAgb3B0aW9uVmFsdWVzS2V5cyA9IG9wdGlvblZhbHVlcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIG9iamVjdCwgZXh0cmFjdCBrZXlzLCBpbiBlbnVtZXJhdGlvbiBvcmRlciwgdW5zb3J0ZWRcbiAgICAgICAgb3B0aW9uVmFsdWVzS2V5cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpdGVtS2V5IGluIG9wdGlvblZhbHVlcykge1xuICAgICAgICAgIGlmIChvcHRpb25WYWx1ZXMuaGFzT3duUHJvcGVydHkoaXRlbUtleSkgJiYgaXRlbUtleS5jaGFyQXQoMCkgIT09ICckJykge1xuICAgICAgICAgICAgb3B0aW9uVmFsdWVzS2V5cy5wdXNoKGl0ZW1LZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9wdGlvblZhbHVlc0tleXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRyYWNrQnk6IHRyYWNrQnksXG4gICAgICBnZXRUcmFja0J5VmFsdWU6IGdldFRyYWNrQnlWYWx1ZSxcbiAgICAgIGdldFdhdGNoYWJsZXM6ICRwYXJzZSh2YWx1ZXNGbiwgZnVuY3Rpb24ob3B0aW9uVmFsdWVzKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIGNvbGxlY3Rpb24gb2YgdGhpbmdzIHRoYXQgd2Ugd291bGQgbGlrZSB0byB3YXRjaCAod2F0Y2hlZEFycmF5KVxuICAgICAgICAvLyBzbyB0aGF0IHRoZXkgY2FuIGFsbCBiZSB3YXRjaGVkIHVzaW5nIGEgc2luZ2xlICR3YXRjaENvbGxlY3Rpb25cbiAgICAgICAgLy8gdGhhdCBvbmx5IHJ1bnMgdGhlIGhhbmRsZXIgb25jZSBpZiBhbnl0aGluZyBjaGFuZ2VzXG4gICAgICAgIHZhciB3YXRjaGVkQXJyYXkgPSBbXTtcbiAgICAgICAgb3B0aW9uVmFsdWVzID0gb3B0aW9uVmFsdWVzIHx8IFtdO1xuXG4gICAgICAgIHZhciBvcHRpb25WYWx1ZXNLZXlzID0gZ2V0T3B0aW9uVmFsdWVzS2V5cyhvcHRpb25WYWx1ZXMpO1xuICAgICAgICB2YXIgb3B0aW9uVmFsdWVzTGVuZ3RoID0gb3B0aW9uVmFsdWVzS2V5cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25WYWx1ZXNMZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICB2YXIga2V5ID0gKG9wdGlvblZhbHVlcyA9PT0gb3B0aW9uVmFsdWVzS2V5cykgPyBpbmRleCA6IG9wdGlvblZhbHVlc0tleXNbaW5kZXhdO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IG9wdGlvblZhbHVlc1trZXldO1xuXG4gICAgICAgICAgdmFyIGxvY2FscyA9IGdldExvY2Fscyh2YWx1ZSwga2V5KTtcbiAgICAgICAgICB2YXIgc2VsZWN0VmFsdWUgPSBnZXRUcmFja0J5VmFsdWVGbih2YWx1ZSwgbG9jYWxzKTtcbiAgICAgICAgICB3YXRjaGVkQXJyYXkucHVzaChzZWxlY3RWYWx1ZSk7XG5cbiAgICAgICAgICAvLyBPbmx5IG5lZWQgdG8gd2F0Y2ggdGhlIGRpc3BsYXlGbiBpZiB0aGVyZSBpcyBhIHNwZWNpZmljIGxhYmVsIGV4cHJlc3Npb25cbiAgICAgICAgICBpZiAobWF0Y2hbMl0gfHwgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGRpc3BsYXlGbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICAgIHdhdGNoZWRBcnJheS5wdXNoKGxhYmVsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBPbmx5IG5lZWQgdG8gd2F0Y2ggdGhlIGRpc2FibGVXaGVuRm4gaWYgdGhlcmUgaXMgYSBzcGVjaWZpYyBkaXNhYmxlIGV4cHJlc3Npb25cbiAgICAgICAgICBpZiAobWF0Y2hbNF0pIHtcbiAgICAgICAgICAgIHZhciBkaXNhYmxlV2hlbiA9IGRpc2FibGVXaGVuRm4oc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICB3YXRjaGVkQXJyYXkucHVzaChkaXNhYmxlV2hlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3YXRjaGVkQXJyYXk7XG4gICAgICB9KSxcblxuICAgICAgZ2V0T3B0aW9uczogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIG9wdGlvbkl0ZW1zID0gW107XG4gICAgICAgIHZhciBzZWxlY3RWYWx1ZU1hcCA9IHt9O1xuXG4gICAgICAgIC8vIFRoZSBvcHRpb24gdmFsdWVzIHdlcmUgYWxyZWFkeSBjb21wdXRlZCBpbiB0aGUgYGdldFdhdGNoYWJsZXNgIGZuLFxuICAgICAgICAvLyB3aGljaCBtdXN0IGhhdmUgYmVlbiBjYWxsZWQgdG8gdHJpZ2dlciBgZ2V0T3B0aW9uc2BcbiAgICAgICAgdmFyIG9wdGlvblZhbHVlcyA9IHZhbHVlc0ZuKHNjb3BlKSB8fCBbXTtcbiAgICAgICAgdmFyIG9wdGlvblZhbHVlc0tleXMgPSBnZXRPcHRpb25WYWx1ZXNLZXlzKG9wdGlvblZhbHVlcyk7XG4gICAgICAgIHZhciBvcHRpb25WYWx1ZXNMZW5ndGggPSBvcHRpb25WYWx1ZXNLZXlzLmxlbmd0aDtcblxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uVmFsdWVzTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgdmFyIGtleSA9IChvcHRpb25WYWx1ZXMgPT09IG9wdGlvblZhbHVlc0tleXMpID8gaW5kZXggOiBvcHRpb25WYWx1ZXNLZXlzW2luZGV4XTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBvcHRpb25WYWx1ZXNba2V5XTtcbiAgICAgICAgICB2YXIgbG9jYWxzID0gZ2V0TG9jYWxzKHZhbHVlLCBrZXkpO1xuICAgICAgICAgIHZhciB2aWV3VmFsdWUgPSB2aWV3VmFsdWVGbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICB2YXIgc2VsZWN0VmFsdWUgPSBnZXRUcmFja0J5VmFsdWVGbih2aWV3VmFsdWUsIGxvY2Fscyk7XG4gICAgICAgICAgdmFyIGxhYmVsID0gZGlzcGxheUZuKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgIHZhciBncm91cCA9IGdyb3VwQnlGbihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICB2YXIgZGlzYWJsZWQgPSBkaXNhYmxlV2hlbkZuKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICAgIHZhciBvcHRpb25JdGVtID0gbmV3IE9wdGlvbihzZWxlY3RWYWx1ZSwgdmlld1ZhbHVlLCBsYWJlbCwgZ3JvdXAsIGRpc2FibGVkKTtcblxuICAgICAgICAgIG9wdGlvbkl0ZW1zLnB1c2gob3B0aW9uSXRlbSk7XG4gICAgICAgICAgc2VsZWN0VmFsdWVNYXBbc2VsZWN0VmFsdWVdID0gb3B0aW9uSXRlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXRlbXM6IG9wdGlvbkl0ZW1zLFxuICAgICAgICAgIHNlbGVjdFZhbHVlTWFwOiBzZWxlY3RWYWx1ZU1hcCxcbiAgICAgICAgICBnZXRPcHRpb25Gcm9tVmlld1ZhbHVlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdFZhbHVlTWFwW2dldFRyYWNrQnlWYWx1ZSh2YWx1ZSldO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbjogZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdmlld1ZhbHVlIGNvdWxkIGJlIGFuIG9iamVjdCB0aGF0IG1heSBiZSBtdXRhdGVkIGJ5IHRoZSBhcHBsaWNhdGlvbixcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gbWFrZSBhIGNvcHkgYW5kIG5vdCByZXR1cm4gdGhlIHJlZmVyZW5jZSB0byB0aGUgdmFsdWUgb24gdGhlIG9wdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0cmFja0J5ID8gY29weShvcHRpb24udmlld1ZhbHVlKSA6IG9wdGlvbi52aWV3VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuXG4gIC8vIFN1cHBvcnQ6IElFIDkgb25seVxuICAvLyBXZSBjYW4ndCBqdXN0IGpxTGl0ZSgnPG9wdGlvbj4nKSBzaW5jZSBqcUxpdGUgaXMgbm90IHNtYXJ0IGVub3VnaFxuICAvLyB0byBjcmVhdGUgaXQgaW4gPHNlbGVjdD4gYW5kIElFIGJhcmZzIG90aGVyd2lzZS5cbiAgdmFyIG9wdGlvblRlbXBsYXRlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpLFxuICAgICAgb3B0R3JvdXBUZW1wbGF0ZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRncm91cCcpO1xuXG4gICAgZnVuY3Rpb24gbmdPcHRpb25zUG9zdExpbmsoc2NvcGUsIHNlbGVjdEVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG5cbiAgICAgIHZhciBzZWxlY3RDdHJsID0gY3RybHNbMF07XG4gICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcbiAgICAgIHZhciBtdWx0aXBsZSA9IGF0dHIubXVsdGlwbGU7XG5cbiAgICAgIC8vIFRoZSBlbXB0eU9wdGlvbiBhbGxvd3MgdGhlIGFwcGxpY2F0aW9uIGRldmVsb3BlciB0byBwcm92aWRlIHRoZWlyIG93biBjdXN0b20gXCJlbXB0eVwiXG4gICAgICAvLyBvcHRpb24gd2hlbiB0aGUgdmlld1ZhbHVlIGRvZXMgbm90IG1hdGNoIGFueSBvZiB0aGUgb3B0aW9uIHZhbHVlcy5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjaGlsZHJlbiA9IHNlbGVjdEVsZW1lbnQuY2hpbGRyZW4oKSwgaWkgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZHJlbltpXS52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICBzZWxlY3RDdHJsLmhhc0VtcHR5T3B0aW9uID0gdHJ1ZTtcbiAgICAgICAgICBzZWxlY3RDdHJsLmVtcHR5T3B0aW9uID0gY2hpbGRyZW4uZXEoaSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGVtcHR5IG9wdGlvbiB3aWxsIGJlIGNvbXBpbGVkIGFuZCByZW5kZXJlZCBiZWZvcmUgd2UgZmlyc3QgZ2VuZXJhdGUgdGhlIG9wdGlvbnNcbiAgICAgIHNlbGVjdEVsZW1lbnQuZW1wdHkoKTtcblxuICAgICAgdmFyIHByb3ZpZGVkRW1wdHlPcHRpb24gPSAhIXNlbGVjdEN0cmwuZW1wdHlPcHRpb247XG5cbiAgICAgIHZhciB1bmtub3duT3B0aW9uID0ganFMaXRlKG9wdGlvblRlbXBsYXRlLmNsb25lTm9kZShmYWxzZSkpO1xuICAgICAgdW5rbm93bk9wdGlvbi52YWwoJz8nKTtcblxuICAgICAgdmFyIG9wdGlvbnM7XG4gICAgICB2YXIgbmdPcHRpb25zID0gcGFyc2VPcHRpb25zRXhwcmVzc2lvbihhdHRyLm5nT3B0aW9ucywgc2VsZWN0RWxlbWVudCwgc2NvcGUpO1xuICAgICAgLy8gVGhpcyBzdG9yZXMgdGhlIG5ld2x5IGNyZWF0ZWQgb3B0aW9ucyBiZWZvcmUgdGhleSBhcmUgYXBwZW5kZWQgdG8gdGhlIHNlbGVjdC5cbiAgICAgIC8vIFNpbmNlIHRoZSBjb250ZW50cyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBmcmFnbWVudCB3aGVuIGl0IGlzIGFwcGVuZGVkLFxuICAgICAgLy8gd2Ugb25seSBuZWVkIHRvIGNyZWF0ZSBpdCBvbmNlLlxuICAgICAgdmFyIGxpc3RGcmFnbWVudCA9ICRkb2N1bWVudFswXS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgIC8vIE92ZXJ3cml0ZSB0aGUgaW1wbGVtZW50YXRpb24uIG5nT3B0aW9ucyBkb2Vzbid0IHVzZSBoYXNoZXNcbiAgICAgIHNlbGVjdEN0cmwuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgcmV0dXJuICc/JztcbiAgICAgIH07XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgY29udHJvbGxlciBtZXRob2RzIGZvciBtdWx0aXBsZSBzZWxlY3RhYmxlIG9wdGlvbnNcbiAgICAgIGlmICghbXVsdGlwbGUpIHtcblxuICAgICAgICBzZWxlY3RDdHJsLndyaXRlVmFsdWUgPSBmdW5jdGlvbiB3cml0ZU5nT3B0aW9uc1ZhbHVlKHZhbHVlKSB7XG4gICAgICAgICAgLy8gVGhlIG9wdGlvbnMgbWlnaHQgbm90IGJlIGRlZmluZWQgeWV0IHdoZW4gbmdNb2RlbCB0cmllcyB0byByZW5kZXJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMpIHJldHVybjtcblxuICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9IHNlbGVjdEVsZW1lbnRbMF0ub3B0aW9uc1tzZWxlY3RFbGVtZW50WzBdLnNlbGVjdGVkSW5kZXhdO1xuICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zLmdldE9wdGlvbkZyb21WaWV3VmFsdWUodmFsdWUpO1xuXG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgc2VsZWN0ZWQgYXR0cmlidXRlIGZyb20gdGhlIHByZXZpb3VzbHkgc2VsZWN0ZWQgb3B0aW9uXG4gICAgICAgICAgLy8gT3RoZXJ3aXNlLCBzY3JlZW4gcmVhZGVycyBtaWdodCBnZXQgY29uZnVzZWRcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRPcHRpb24pIHNlbGVjdGVkT3B0aW9uLnJlbW92ZUF0dHJpYnV0ZSgnc2VsZWN0ZWQnKTtcblxuICAgICAgICAgIGlmIChvcHRpb24pIHtcbiAgICAgICAgICAgIC8vIERvbid0IHVwZGF0ZSB0aGUgb3B0aW9uIHdoZW4gaXQgaXMgYWxyZWFkeSBzZWxlY3RlZC5cbiAgICAgICAgICAgIC8vIEZvciBleGFtcGxlLCB0aGUgYnJvd3NlciB3aWxsIHNlbGVjdCB0aGUgZmlyc3Qgb3B0aW9uIGJ5IGRlZmF1bHQuIEluIHRoYXQgY2FzZSxcbiAgICAgICAgICAgIC8vIG1vc3QgcHJvcGVydGllcyBhcmUgc2V0IGF1dG9tYXRpY2FsbHkgLSBleGNlcHQgdGhlIGBzZWxlY3RlZGAgYXR0cmlidXRlLCB3aGljaCB3ZVxuICAgICAgICAgICAgLy8gc2V0IGFsd2F5c1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0RWxlbWVudFswXS52YWx1ZSAhPT0gb3B0aW9uLnNlbGVjdFZhbHVlKSB7XG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwucmVtb3ZlVW5rbm93bk9wdGlvbigpO1xuXG4gICAgICAgICAgICAgIHNlbGVjdEVsZW1lbnRbMF0udmFsdWUgPSBvcHRpb24uc2VsZWN0VmFsdWU7XG4gICAgICAgICAgICAgIG9wdGlvbi5lbGVtZW50LnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3B0aW9uLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3RDdHJsLnNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZWN0Q3RybC5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkTmdPcHRpb25zVmFsdWUoKSB7XG5cbiAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zLnNlbGVjdFZhbHVlTWFwW3NlbGVjdEVsZW1lbnQudmFsKCldO1xuXG4gICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uICYmICFzZWxlY3RlZE9wdGlvbi5kaXNhYmxlZCkge1xuICAgICAgICAgICAgc2VsZWN0Q3RybC51bnNlbGVjdEVtcHR5T3B0aW9uKCk7XG4gICAgICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZVVua25vd25PcHRpb24oKTtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmdldFZpZXdWYWx1ZUZyb21PcHRpb24oc2VsZWN0ZWRPcHRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJZiB3ZSBhcmUgdXNpbmcgYHRyYWNrIGJ5YCB0aGVuIHdlIG11c3Qgd2F0Y2ggdGhlIHRyYWNrZWQgdmFsdWUgb24gdGhlIG1vZGVsXG4gICAgICAgIC8vIHNpbmNlIG5nTW9kZWwgb25seSB3YXRjaGVzIGZvciBvYmplY3QgaWRlbnRpdHkgY2hhbmdlXG4gICAgICAgIC8vIEZJWE1FOiBXaGVuIGEgdXNlciBzZWxlY3RzIGFuIG9wdGlvbiwgdGhpcyB3YXRjaCB3aWxsIGZpcmUgbmVlZGxlc3NseVxuICAgICAgICBpZiAobmdPcHRpb25zLnRyYWNrQnkpIHtcbiAgICAgICAgICBzY29wZS4kd2F0Y2goXG4gICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIG5nT3B0aW9ucy5nZXRUcmFja0J5VmFsdWUobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSk7IH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHsgbmdNb2RlbEN0cmwuJHJlbmRlcigpOyB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIHNlbGVjdEN0cmwud3JpdGVWYWx1ZSA9IGZ1bmN0aW9uIHdyaXRlTmdPcHRpb25zTXVsdGlwbGUodmFsdWVzKSB7XG4gICAgICAgICAgLy8gVGhlIG9wdGlvbnMgbWlnaHQgbm90IGJlIGRlZmluZWQgeWV0IHdoZW4gbmdNb2RlbCB0cmllcyB0byByZW5kZXJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMpIHJldHVybjtcblxuICAgICAgICAgIC8vIE9ubHkgc2V0IGA8b3B0aW9uPi5zZWxlY3RlZGAgaWYgbmVjZXNzYXJ5LCBpbiBvcmRlciB0byBwcmV2ZW50IHNvbWUgYnJvd3NlcnMgZnJvbVxuICAgICAgICAgIC8vIHNjcm9sbGluZyB0byBgPG9wdGlvbj5gIGVsZW1lbnRzIHRoYXQgYXJlIG91dHNpZGUgdGhlIGA8c2VsZWN0PmAgZWxlbWVudCdzIHZpZXdwb3J0LlxuICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbnMgPSB2YWx1ZXMgJiYgdmFsdWVzLm1hcChnZXRBbmRVcGRhdGVTZWxlY3RlZE9wdGlvbikgfHwgW107XG5cbiAgICAgICAgICBvcHRpb25zLml0ZW1zLmZvckVhY2goZnVuY3Rpb24ob3B0aW9uKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uLmVsZW1lbnQuc2VsZWN0ZWQgJiYgIWluY2x1ZGVzKHNlbGVjdGVkT3B0aW9ucywgb3B0aW9uKSkge1xuICAgICAgICAgICAgICBvcHRpb24uZWxlbWVudC5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgc2VsZWN0Q3RybC5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkTmdPcHRpb25zTXVsdGlwbGUoKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkVmFsdWVzID0gc2VsZWN0RWxlbWVudC52YWwoKSB8fCBbXSxcbiAgICAgICAgICAgICAgc2VsZWN0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgZm9yRWFjaChzZWxlY3RlZFZhbHVlcywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zLnNlbGVjdFZhbHVlTWFwW3ZhbHVlXTtcbiAgICAgICAgICAgIGlmIChvcHRpb24gJiYgIW9wdGlvbi5kaXNhYmxlZCkgc2VsZWN0aW9ucy5wdXNoKG9wdGlvbnMuZ2V0Vmlld1ZhbHVlRnJvbU9wdGlvbihvcHRpb24pKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxlY3Rpb25zO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIElmIHdlIGFyZSB1c2luZyBgdHJhY2sgYnlgIHRoZW4gd2UgbXVzdCB3YXRjaCB0aGVzZSB0cmFja2VkIHZhbHVlcyBvbiB0aGUgbW9kZWxcbiAgICAgICAgLy8gc2luY2UgbmdNb2RlbCBvbmx5IHdhdGNoZXMgZm9yIG9iamVjdCBpZGVudGl0eSBjaGFuZ2VcbiAgICAgICAgaWYgKG5nT3B0aW9ucy50cmFja0J5KSB7XG5cbiAgICAgICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkobmdNb2RlbEN0cmwuJHZpZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUubWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5nT3B0aW9ucy5nZXRUcmFja0J5VmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm92aWRlZEVtcHR5T3B0aW9uKSB7XG5cbiAgICAgICAgLy8gY29tcGlsZSB0aGUgZWxlbWVudCBzaW5jZSB0aGVyZSBtaWdodCBiZSBiaW5kaW5ncyBpbiBpdFxuICAgICAgICAkY29tcGlsZShzZWxlY3RDdHJsLmVtcHR5T3B0aW9uKShzY29wZSk7XG5cbiAgICAgICAgc2VsZWN0RWxlbWVudC5wcmVwZW5kKHNlbGVjdEN0cmwuZW1wdHlPcHRpb24pO1xuXG4gICAgICAgIGlmIChzZWxlY3RDdHJsLmVtcHR5T3B0aW9uWzBdLm5vZGVUeXBlID09PSBOT0RFX1RZUEVfQ09NTUVOVCkge1xuICAgICAgICAgIC8vIFRoaXMgbWVhbnMgdGhlIGVtcHR5IG9wdGlvbiBoYXMgY3VycmVudGx5IG5vIGFjdHVhbCBET00gbm9kZSwgcHJvYmFibHkgYmVjYXVzZVxuICAgICAgICAgIC8vIGl0IGhhcyBiZWVuIG1vZGlmaWVkIGJ5IGEgdHJhbnNjbHVzaW9uIGRpcmVjdGl2ZS5cbiAgICAgICAgICBzZWxlY3RDdHJsLmhhc0VtcHR5T3B0aW9uID0gZmFsc2U7XG5cbiAgICAgICAgICAvLyBSZWRlZmluZSB0aGUgcmVnaXN0ZXJPcHRpb24gZnVuY3Rpb24sIHdoaWNoIHdpbGwgY2F0Y2hcbiAgICAgICAgICAvLyBvcHRpb25zIHRoYXQgYXJlIGFkZGVkIGJ5IG5nSWYgZXRjLiAocmVuZGVyaW5nIG9mIHRoZSBub2RlIGlzIGFzeW5jIGJlY2F1c2Ugb2ZcbiAgICAgICAgICAvLyBsYXp5IHRyYW5zY2x1c2lvbilcbiAgICAgICAgICBzZWxlY3RDdHJsLnJlZ2lzdGVyT3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uU2NvcGUsIG9wdGlvbkVsKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uRWwudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwuaGFzRW1wdHlPcHRpb24gPSB0cnVlO1xuICAgICAgICAgICAgICBzZWxlY3RDdHJsLmVtcHR5T3B0aW9uID0gb3B0aW9uRWw7XG4gICAgICAgICAgICAgIHNlbGVjdEN0cmwuZW1wdHlPcHRpb24ucmVtb3ZlQ2xhc3MoJ25nLXNjb3BlJyk7XG4gICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgbmV3IGVtcHR5IG9wdGlvbiBpcyBzZWxlY3RlZCBpZiBwcmV2aW91c2x5IG5vIG9wdGlvbiB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuXG4gICAgICAgICAgICAgIG9wdGlvbkVsLm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBuZWVkc1JlcmVuZGVyID0gc2VsZWN0Q3RybC4kaXNFbXB0eU9wdGlvblNlbGVjdGVkKCk7XG5cbiAgICAgICAgICAgICAgICBzZWxlY3RDdHJsLmhhc0VtcHR5T3B0aW9uID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2VsZWN0Q3RybC5lbXB0eU9wdGlvbiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgIGlmIChuZWVkc1JlcmVuZGVyKSBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByZW1vdmUgdGhlIGNsYXNzLCB3aGljaCBpcyBhZGRlZCBhdXRvbWF0aWNhbGx5IGJlY2F1c2Ugd2UgcmVjb21waWxlIHRoZSBlbGVtZW50IGFuZCBpdFxuICAgICAgICAgIC8vIGJlY29tZXMgdGhlIGNvbXBpbGF0aW9uIHJvb3RcbiAgICAgICAgICBzZWxlY3RDdHJsLmVtcHR5T3B0aW9uLnJlbW92ZUNsYXNzKCduZy1zY29wZScpO1xuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgLy8gV2Ugd2lsbCByZS1yZW5kZXIgdGhlIG9wdGlvbiBlbGVtZW50cyBpZiB0aGUgb3B0aW9uIHZhbHVlcyBvciBsYWJlbHMgY2hhbmdlXG4gICAgICBzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKG5nT3B0aW9ucy5nZXRXYXRjaGFibGVzLCB1cGRhdGVPcHRpb25zKTtcblxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICAgIGZ1bmN0aW9uIGFkZE9wdGlvbkVsZW1lbnQob3B0aW9uLCBwYXJlbnQpIHtcbiAgICAgICAgdmFyIG9wdGlvbkVsZW1lbnQgPSBvcHRpb25UZW1wbGF0ZS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQob3B0aW9uRWxlbWVudCk7XG4gICAgICAgIHVwZGF0ZU9wdGlvbkVsZW1lbnQob3B0aW9uLCBvcHRpb25FbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZ2V0QW5kVXBkYXRlU2VsZWN0ZWRPcHRpb24odmlld1ZhbHVlKSB7XG4gICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zLmdldE9wdGlvbkZyb21WaWV3VmFsdWUodmlld1ZhbHVlKTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBvcHRpb24gJiYgb3B0aW9uLmVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQuc2VsZWN0ZWQpIGVsZW1lbnQuc2VsZWN0ZWQgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiBvcHRpb247XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbkVsZW1lbnQob3B0aW9uLCBlbGVtZW50KSB7XG4gICAgICAgIG9wdGlvbi5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5kaXNhYmxlZCA9IG9wdGlvbi5kaXNhYmxlZDtcbiAgICAgICAgLy8gU3VwcG9ydDogSUUgMTEgb25seSwgRWRnZSAxMi0xMyBvbmx5XG4gICAgICAgIC8vIE5PVEU6IFRoZSBsYWJlbCBtdXN0IGJlIHNldCBiZWZvcmUgdGhlIHZhbHVlLCBvdGhlcndpc2UgSUUgMTEgJiBFZGdlIGNyZWF0ZSB1bnJlc3BvbnNpdmVcbiAgICAgICAgLy8gc2VsZWN0cyBpbiBjZXJ0YWluIGNpcmN1bXN0YW5jZXMgd2hlbiBtdWx0aXBsZSBzZWxlY3RzIGFyZSBuZXh0IHRvIGVhY2ggb3RoZXIgYW5kIGRpc3BsYXlcbiAgICAgICAgLy8gdGhlIG9wdGlvbiBsaXN0IGluIGxpc3Rib3ggc3R5bGUsIGkuZS4gdGhlIHNlbGVjdCBpcyBbbXVsdGlwbGVdLCBvciBzcGVjaWZpZXMgYSBbc2l6ZV0uXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xMTMxNCBmb3IgbW9yZSBpbmZvLlxuICAgICAgICAvLyBUaGlzIGlzIHVuZm9ydHVuYXRlbHkgdW50ZXN0YWJsZSB3aXRoIHVuaXQgLyBlMmUgdGVzdHNcbiAgICAgICAgaWYgKG9wdGlvbi5sYWJlbCAhPT0gZWxlbWVudC5sYWJlbCkge1xuICAgICAgICAgIGVsZW1lbnQubGFiZWwgPSBvcHRpb24ubGFiZWw7XG4gICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbi5sYWJlbDtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LnZhbHVlID0gb3B0aW9uLnNlbGVjdFZhbHVlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKCkge1xuICAgICAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IG9wdGlvbnMgJiYgc2VsZWN0Q3RybC5yZWFkVmFsdWUoKTtcblxuICAgICAgICAvLyBXZSBtdXN0IHJlbW92ZSBhbGwgY3VycmVudCBvcHRpb25zLCBidXQgY2Fubm90IHNpbXBseSBzZXQgaW5uZXJIVE1MID0gbnVsbFxuICAgICAgICAvLyBzaW5jZSB0aGUgcHJvdmlkZWRFbXB0eU9wdGlvbiBtaWdodCBoYXZlIGFuIG5nSWYgb24gaXQgdGhhdCBpbnNlcnRzIGNvbW1lbnRzIHdoaWNoIHdlXG4gICAgICAgIC8vIG11c3QgcHJlc2VydmUuXG4gICAgICAgIC8vIEluc3RlYWQsIGl0ZXJhdGUgb3ZlciB0aGUgY3VycmVudCBvcHRpb24gZWxlbWVudHMgYW5kIHJlbW92ZSB0aGVtIG9yIHRoZWlyIG9wdGdyb3VwXG4gICAgICAgIC8vIHBhcmVudHNcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSBvcHRpb25zLml0ZW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9ucy5pdGVtc1tpXTtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQob3B0aW9uLmdyb3VwKSkge1xuICAgICAgICAgICAgICBqcUxpdGVSZW1vdmUob3B0aW9uLmVsZW1lbnQucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBqcUxpdGVSZW1vdmUob3B0aW9uLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMgPSBuZ09wdGlvbnMuZ2V0T3B0aW9ucygpO1xuXG4gICAgICAgIHZhciBncm91cEVsZW1lbnRNYXAgPSB7fTtcblxuICAgICAgICBvcHRpb25zLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gYWRkT3B0aW9uKG9wdGlvbikge1xuICAgICAgICAgIHZhciBncm91cEVsZW1lbnQ7XG5cbiAgICAgICAgICBpZiAoaXNEZWZpbmVkKG9wdGlvbi5ncm91cCkpIHtcblxuICAgICAgICAgICAgLy8gVGhpcyBvcHRpb24gaXMgdG8gbGl2ZSBpbiBhIGdyb3VwXG4gICAgICAgICAgICAvLyBTZWUgaWYgd2UgaGF2ZSBhbHJlYWR5IGNyZWF0ZWQgdGhpcyBncm91cFxuICAgICAgICAgICAgZ3JvdXBFbGVtZW50ID0gZ3JvdXBFbGVtZW50TWFwW29wdGlvbi5ncm91cF07XG5cbiAgICAgICAgICAgIGlmICghZ3JvdXBFbGVtZW50KSB7XG5cbiAgICAgICAgICAgICAgZ3JvdXBFbGVtZW50ID0gb3B0R3JvdXBUZW1wbGF0ZS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgICAgICAgICBsaXN0RnJhZ21lbnQuYXBwZW5kQ2hpbGQoZ3JvdXBFbGVtZW50KTtcblxuICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGxhYmVsIG9uIHRoZSBncm91cCBlbGVtZW50XG4gICAgICAgICAgICAgIC8vIFwibnVsbFwiIGlzIHNwZWNpYWwgY2FzZWQgYmVjYXVzZSBvZiBTYWZhcmlcbiAgICAgICAgICAgICAgZ3JvdXBFbGVtZW50LmxhYmVsID0gb3B0aW9uLmdyb3VwID09PSBudWxsID8gJ251bGwnIDogb3B0aW9uLmdyb3VwO1xuXG4gICAgICAgICAgICAgIC8vIFN0b3JlIGl0IGZvciB1c2UgbGF0ZXJcbiAgICAgICAgICAgICAgZ3JvdXBFbGVtZW50TWFwW29wdGlvbi5ncm91cF0gPSBncm91cEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFkZE9wdGlvbkVsZW1lbnQob3B0aW9uLCBncm91cEVsZW1lbnQpO1xuXG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgLy8gVGhpcyBvcHRpb24gaXMgbm90IGluIGEgZ3JvdXBcbiAgICAgICAgICAgIGFkZE9wdGlvbkVsZW1lbnQob3B0aW9uLCBsaXN0RnJhZ21lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2VsZWN0RWxlbWVudFswXS5hcHBlbmRDaGlsZChsaXN0RnJhZ21lbnQpO1xuXG4gICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcblxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGR1ZSB0byB0aGUgdXBkYXRlIHRvIHRoZSBvcHRpb25zXG4gICAgICAgIGlmICghbmdNb2RlbEN0cmwuJGlzRW1wdHkocHJldmlvdXNWYWx1ZSkpIHtcbiAgICAgICAgICB2YXIgbmV4dFZhbHVlID0gc2VsZWN0Q3RybC5yZWFkVmFsdWUoKTtcbiAgICAgICAgICB2YXIgaXNOb3RQcmltaXRpdmUgPSBuZ09wdGlvbnMudHJhY2tCeSB8fCBtdWx0aXBsZTtcbiAgICAgICAgICBpZiAoaXNOb3RQcmltaXRpdmUgPyAhZXF1YWxzKHByZXZpb3VzVmFsdWUsIG5leHRWYWx1ZSkgOiBwcmV2aW91c1ZhbHVlICE9PSBuZXh0VmFsdWUpIHtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUobmV4dFZhbHVlKTtcbiAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICByZXF1aXJlOiBbJ3NlbGVjdCcsICduZ01vZGVsJ10sXG4gICAgbGluazoge1xuICAgICAgcHJlOiBmdW5jdGlvbiBuZ09wdGlvbnNQcmVMaW5rKHNjb3BlLCBzZWxlY3RFbGVtZW50LCBhdHRyLCBjdHJscykge1xuICAgICAgICAvLyBEZWFjdGl2YXRlIHRoZSBTZWxlY3RDb250cm9sbGVyLnJlZ2lzdGVyIG1ldGhvZCB0byBwcmV2ZW50XG4gICAgICAgIC8vIG9wdGlvbiBkaXJlY3RpdmVzIGZyb20gYWNjaWRlbnRhbGx5IHJlZ2lzdGVyaW5nIHRoZW1zZWx2ZXNcbiAgICAgICAgLy8gKGFuZCB1bndhbnRlZCAkZGVzdHJveSBoYW5kbGVycyBldGMuKVxuICAgICAgICBjdHJsc1swXS5yZWdpc3Rlck9wdGlvbiA9IG5vb3A7XG4gICAgICB9LFxuICAgICAgcG9zdDogbmdPcHRpb25zUG9zdExpbmtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1BsdXJhbGl6ZVxuICogQHJlc3RyaWN0IEVBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBgbmdQbHVyYWxpemVgIGlzIGEgZGlyZWN0aXZlIHRoYXQgZGlzcGxheXMgbWVzc2FnZXMgYWNjb3JkaW5nIHRvIGVuLVVTIGxvY2FsaXphdGlvbiBydWxlcy5cbiAqIFRoZXNlIHJ1bGVzIGFyZSBidW5kbGVkIHdpdGggYW5ndWxhci5qcywgYnV0IGNhbiBiZSBvdmVycmlkZGVuXG4gKiAoc2VlIHtAbGluayBndWlkZS9pMThuIEFuZ3VsYXIgaTE4bn0gZGV2IGd1aWRlKS4gWW91IGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZSBkaXJlY3RpdmVcbiAqIGJ5IHNwZWNpZnlpbmcgdGhlIG1hcHBpbmdzIGJldHdlZW5cbiAqIFtwbHVyYWwgY2F0ZWdvcmllc10oaHR0cDovL3VuaWNvZGUub3JnL3JlcG9zL2NsZHItdG1wL3RydW5rL2RpZmYvc3VwcGxlbWVudGFsL2xhbmd1YWdlX3BsdXJhbF9ydWxlcy5odG1sKVxuICogYW5kIHRoZSBzdHJpbmdzIHRvIGJlIGRpc3BsYXllZC5cbiAqXG4gKiAjIyBQbHVyYWwgY2F0ZWdvcmllcyBhbmQgZXhwbGljaXQgbnVtYmVyIHJ1bGVzXG4gKiBUaGVyZSBhcmUgdHdvXG4gKiBbcGx1cmFsIGNhdGVnb3JpZXNdKGh0dHA6Ly91bmljb2RlLm9yZy9yZXBvcy9jbGRyLXRtcC90cnVuay9kaWZmL3N1cHBsZW1lbnRhbC9sYW5ndWFnZV9wbHVyYWxfcnVsZXMuaHRtbClcbiAqIGluIEFuZ3VsYXIncyBkZWZhdWx0IGVuLVVTIGxvY2FsZTogXCJvbmVcIiBhbmQgXCJvdGhlclwiLlxuICpcbiAqIFdoaWxlIGEgcGx1cmFsIGNhdGVnb3J5IG1heSBtYXRjaCBtYW55IG51bWJlcnMgKGZvciBleGFtcGxlLCBpbiBlbi1VUyBsb2NhbGUsIFwib3RoZXJcIiBjYW4gbWF0Y2hcbiAqIGFueSBudW1iZXIgdGhhdCBpcyBub3QgMSksIGFuIGV4cGxpY2l0IG51bWJlciBydWxlIGNhbiBvbmx5IG1hdGNoIG9uZSBudW1iZXIuIEZvciBleGFtcGxlLCB0aGVcbiAqIGV4cGxpY2l0IG51bWJlciBydWxlIGZvciBcIjNcIiBtYXRjaGVzIHRoZSBudW1iZXIgMy4gVGhlcmUgYXJlIGV4YW1wbGVzIG9mIHBsdXJhbCBjYXRlZ29yaWVzXG4gKiBhbmQgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIHRocm91Z2hvdXQgdGhlIHJlc3Qgb2YgdGhpcyBkb2N1bWVudGF0aW9uLlxuICpcbiAqICMjIENvbmZpZ3VyaW5nIG5nUGx1cmFsaXplXG4gKiBZb3UgY29uZmlndXJlIG5nUGx1cmFsaXplIGJ5IHByb3ZpZGluZyAyIGF0dHJpYnV0ZXM6IGBjb3VudGAgYW5kIGB3aGVuYC5cbiAqIFlvdSBjYW4gYWxzbyBwcm92aWRlIGFuIG9wdGlvbmFsIGF0dHJpYnV0ZSwgYG9mZnNldGAuXG4gKlxuICogVGhlIHZhbHVlIG9mIHRoZSBgY291bnRgIGF0dHJpYnV0ZSBjYW4gYmUgZWl0aGVyIGEgc3RyaW5nIG9yIGFuIHtAbGluayBndWlkZS9leHByZXNzaW9uXG4gKiBBbmd1bGFyIGV4cHJlc3Npb259OyB0aGVzZSBhcmUgZXZhbHVhdGVkIG9uIHRoZSBjdXJyZW50IHNjb3BlIGZvciBpdHMgYm91bmQgdmFsdWUuXG4gKlxuICogVGhlIGB3aGVuYCBhdHRyaWJ1dGUgc3BlY2lmaWVzIHRoZSBtYXBwaW5ncyBiZXR3ZWVuIHBsdXJhbCBjYXRlZ29yaWVzIGFuZCB0aGUgYWN0dWFsXG4gKiBzdHJpbmcgdG8gYmUgZGlzcGxheWVkLiBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZSBzaG91bGQgYmUgYSBKU09OIG9iamVjdC5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgc2hvd3MgaG93IHRvIGNvbmZpZ3VyZSBuZ1BsdXJhbGl6ZTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIlxuICAgICAgICAgICAgICAgICB3aGVuPVwieycwJzogJ05vYm9keSBpcyB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJzEgcGVyc29uIGlzIHZpZXdpbmcuJyxcbiAqICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7fSBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cbiAqIDwvbmctcGx1cmFsaXplPlxuICpgYGBcbiAqXG4gKiBJbiB0aGUgZXhhbXBsZSwgYFwiMDogTm9ib2R5IGlzIHZpZXdpbmcuXCJgIGlzIGFuIGV4cGxpY2l0IG51bWJlciBydWxlLiBJZiB5b3UgZGlkIG5vdFxuICogc3BlY2lmeSB0aGlzIHJ1bGUsIDAgd291bGQgYmUgbWF0Y2hlZCB0byB0aGUgXCJvdGhlclwiIGNhdGVnb3J5IGFuZCBcIjAgcGVvcGxlIGFyZSB2aWV3aW5nXCJcbiAqIHdvdWxkIGJlIHNob3duIGluc3RlYWQgb2YgXCJOb2JvZHkgaXMgdmlld2luZ1wiLiBZb3UgY2FuIHNwZWNpZnkgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUgZm9yXG4gKiBvdGhlciBudW1iZXJzLCBmb3IgZXhhbXBsZSAxMiwgc28gdGhhdCBpbnN0ZWFkIG9mIHNob3dpbmcgXCIxMiBwZW9wbGUgYXJlIHZpZXdpbmdcIiwgeW91IGNhblxuICogc2hvdyBcImEgZG96ZW4gcGVvcGxlIGFyZSB2aWV3aW5nXCIuXG4gKlxuICogWW91IGNhbiB1c2UgYSBzZXQgb2YgY2xvc2VkIGJyYWNlcyAoYHt9YCkgYXMgYSBwbGFjZWhvbGRlciBmb3IgdGhlIG51bWJlciB0aGF0IHlvdSB3YW50IHN1YnN0aXR1dGVkXG4gKiBpbnRvIHBsdXJhbGl6ZWQgc3RyaW5ncy4gSW4gdGhlIHByZXZpb3VzIGV4YW1wbGUsIEFuZ3VsYXIgd2lsbCByZXBsYWNlIGB7fWAgd2l0aFxuICogPHNwYW4gbmctbm9uLWJpbmRhYmxlPmB7e3BlcnNvbkNvdW50fX1gPC9zcGFuPi4gVGhlIGNsb3NlZCBicmFjZXMgYHt9YCBpcyBhIHBsYWNlaG9sZGVyXG4gKiBmb3IgPHNwYW4gbmctbm9uLWJpbmRhYmxlPnt7bnVtYmVyRXhwcmVzc2lvbn19PC9zcGFuPi5cbiAqXG4gKiBJZiBubyBydWxlIGlzIGRlZmluZWQgZm9yIGEgY2F0ZWdvcnksIHRoZW4gYW4gZW1wdHkgc3RyaW5nIGlzIGRpc3BsYXllZCBhbmQgYSB3YXJuaW5nIGlzIGdlbmVyYXRlZC5cbiAqIE5vdGUgdGhhdCBzb21lIGxvY2FsZXMgZGVmaW5lIG1vcmUgY2F0ZWdvcmllcyB0aGFuIGBvbmVgIGFuZCBgb3RoZXJgLiBGb3IgZXhhbXBsZSwgZnItZnIgZGVmaW5lcyBgZmV3YCBhbmQgYG1hbnlgLlxuICpcbiAqICMjIENvbmZpZ3VyaW5nIG5nUGx1cmFsaXplIHdpdGggb2Zmc2V0XG4gKiBUaGUgYG9mZnNldGAgYXR0cmlidXRlIGFsbG93cyBmdXJ0aGVyIGN1c3RvbWl6YXRpb24gb2YgcGx1cmFsaXplZCB0ZXh0LCB3aGljaCBjYW4gcmVzdWx0IGluXG4gKiBhIGJldHRlciB1c2VyIGV4cGVyaWVuY2UuIEZvciBleGFtcGxlLCBpbnN0ZWFkIG9mIHRoZSBtZXNzYWdlIFwiNCBwZW9wbGUgYXJlIHZpZXdpbmcgdGhpcyBkb2N1bWVudFwiLFxuICogeW91IG1pZ2h0IGRpc3BsYXkgXCJKb2huLCBLYXRlIGFuZCAyIG90aGVycyBhcmUgdmlld2luZyB0aGlzIGRvY3VtZW50XCIuXG4gKiBUaGUgb2Zmc2V0IGF0dHJpYnV0ZSBhbGxvd3MgeW91IHRvIG9mZnNldCBhIG51bWJlciBieSBhbnkgZGVzaXJlZCB2YWx1ZS5cbiAqIExldCdzIHRha2UgYSBsb29rIGF0IGFuIGV4YW1wbGU6XG4gKlxuICogYGBgaHRtbFxuICogPG5nLXBsdXJhbGl6ZSBjb3VudD1cInBlcnNvbkNvdW50XCIgb2Zmc2V0PTJcbiAqICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJzEnOiAne3twZXJzb24xfX0gaXMgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJzInOiAne3twZXJzb24xfX0gYW5kIHt7cGVyc29uMn19IGFyZSB2aWV3aW5nLicsXG4gKiAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZy4nLFxuICogICAgICAgICAgICAgICAgICAgICAgJ290aGVyJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQge30gb3RoZXIgcGVvcGxlIGFyZSB2aWV3aW5nLid9XCI+XG4gKiA8L25nLXBsdXJhbGl6ZT5cbiAqIGBgYFxuICpcbiAqIE5vdGljZSB0aGF0IHdlIGFyZSBzdGlsbCB1c2luZyB0d28gcGx1cmFsIGNhdGVnb3JpZXMob25lLCBvdGhlciksIGJ1dCB3ZSBhZGRlZFxuICogdGhyZWUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIDAsIDEgYW5kIDIuXG4gKiBXaGVuIG9uZSBwZXJzb24sIHBlcmhhcHMgSm9obiwgdmlld3MgdGhlIGRvY3VtZW50LCBcIkpvaG4gaXMgdmlld2luZ1wiIHdpbGwgYmUgc2hvd24uXG4gKiBXaGVuIHRocmVlIHBlb3BsZSB2aWV3IHRoZSBkb2N1bWVudCwgbm8gZXhwbGljaXQgbnVtYmVyIHJ1bGUgaXMgZm91bmQsIHNvXG4gKiBhbiBvZmZzZXQgb2YgMiBpcyB0YWtlbiBvZmYgMywgYW5kIEFuZ3VsYXIgdXNlcyAxIHRvIGRlY2lkZSB0aGUgcGx1cmFsIGNhdGVnb3J5LlxuICogSW4gdGhpcyBjYXNlLCBwbHVyYWwgY2F0ZWdvcnkgJ29uZScgaXMgbWF0Y2hlZCBhbmQgXCJKb2huLCBNYXJ5IGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nXCJcbiAqIGlzIHNob3duLlxuICpcbiAqIE5vdGUgdGhhdCB3aGVuIHlvdSBzcGVjaWZ5IG9mZnNldHMsIHlvdSBtdXN0IHByb3ZpZGUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIGZvclxuICogbnVtYmVycyBmcm9tIDAgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgb2Zmc2V0LiBJZiB5b3UgdXNlIGFuIG9mZnNldCBvZiAzLCBmb3IgZXhhbXBsZSxcbiAqIHlvdSBtdXN0IHByb3ZpZGUgZXhwbGljaXQgbnVtYmVyIHJ1bGVzIGZvciAwLCAxLCAyIGFuZCAzLiBZb3UgbXVzdCBhbHNvIHByb3ZpZGUgcGx1cmFsIHN0cmluZ3MgZm9yXG4gKiBwbHVyYWwgY2F0ZWdvcmllcyBcIm9uZVwiIGFuZCBcIm90aGVyXCIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8ZXhwcmVzc2lvbn0gY291bnQgVGhlIHZhcmlhYmxlIHRvIGJlIGJvdW5kIHRvLlxuICogQHBhcmFtIHtzdHJpbmd9IHdoZW4gVGhlIG1hcHBpbmcgYmV0d2VlbiBwbHVyYWwgY2F0ZWdvcnkgdG8gaXRzIGNvcnJlc3BvbmRpbmcgc3RyaW5ncy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb2Zmc2V0IE9mZnNldCB0byBkZWR1Y3QgZnJvbSB0aGUgdG90YWwgbnVtYmVyLlxuICpcbiAqIEBleGFtcGxlXG4gICAgPGV4YW1wbGUgbW9kdWxlPVwicGx1cmFsaXplRXhhbXBsZVwiIG5hbWU9XCJuZy1wbHVyYWxpemVcIj5cbiAgICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3BsdXJhbGl6ZUV4YW1wbGUnLCBbXSlcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb24xID0gJ0lnb3InO1xuICAgICAgICAgICAgICAkc2NvcGUucGVyc29uMiA9ICdNaXNrbyc7XG4gICAgICAgICAgICAgICRzY29wZS5wZXJzb25Db3VudCA9IDE7XG4gICAgICAgICAgICB9XSk7XG4gICAgICAgIDwvc2NyaXB0PlxuICAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICAgICAgICAgIDxsYWJlbD5QZXJzb24gMTo8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cInBlcnNvbjFcIiB2YWx1ZT1cIklnb3JcIiAvPjwvbGFiZWw+PGJyLz5cbiAgICAgICAgICA8bGFiZWw+UGVyc29uIDI6PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJwZXJzb24yXCIgdmFsdWU9XCJNaXNrb1wiIC8+PC9sYWJlbD48YnIvPlxuICAgICAgICAgIDxsYWJlbD5OdW1iZXIgb2YgUGVvcGxlOjxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwicGVyc29uQ291bnRcIiB2YWx1ZT1cIjFcIiAvPjwvbGFiZWw+PGJyLz5cblxuICAgICAgICAgIDwhLS0tIEV4YW1wbGUgd2l0aCBzaW1wbGUgcGx1cmFsaXphdGlvbiBydWxlcyBmb3IgZW4gbG9jYWxlIC0tLT5cbiAgICAgICAgICBXaXRob3V0IE9mZnNldDpcbiAgICAgICAgICA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvbmUnOiAnMSBwZXJzb24gaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7fSBwZW9wbGUgYXJlIHZpZXdpbmcuJ31cIj5cbiAgICAgICAgICA8L25nLXBsdXJhbGl6ZT48YnI+XG5cbiAgICAgICAgICA8IS0tLSBFeGFtcGxlIHdpdGggb2Zmc2V0IC0tLT5cbiAgICAgICAgICBXaXRoIE9mZnNldCgyKTpcbiAgICAgICAgICA8bmctcGx1cmFsaXplIGNvdW50PVwicGVyc29uQ291bnRcIiBvZmZzZXQ9MlxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlbj1cInsnMCc6ICdOb2JvZHkgaXMgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxJzogJ3t7cGVyc29uMX19IGlzIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMic6ICd7e3BlcnNvbjF9fSBhbmQge3twZXJzb24yfX0gYXJlIHZpZXdpbmcuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb25lJzogJ3t7cGVyc29uMX19LCB7e3BlcnNvbjJ9fSBhbmQgb25lIG90aGVyIHBlcnNvbiBhcmUgdmlld2luZy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvdGhlcic6ICd7e3BlcnNvbjF9fSwge3twZXJzb24yfX0gYW5kIHt9IG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nfVwiPlxuICAgICAgICAgIDwvbmctcGx1cmFsaXplPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZmlsZT5cbiAgICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICAgaXQoJ3Nob3VsZCBzaG93IGNvcnJlY3QgcGx1cmFsaXplZCBzdHJpbmcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgd2l0aG91dE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgwKTtcbiAgICAgICAgICB2YXIgd2l0aE9mZnNldCA9IGVsZW1lbnQuYWxsKGJ5LmNzcygnbmctcGx1cmFsaXplJykpLmdldCgxKTtcbiAgICAgICAgICB2YXIgY291bnRJbnB1dCA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbkNvdW50JykpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCcxIHBlcnNvbiBpcyB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciBpcyB2aWV3aW5nLicpO1xuXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzAnKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnTm9ib2R5IGlzIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdOb2JvZHkgaXMgdmlld2luZy4nKTtcblxuICAgICAgICAgIGNvdW50SW5wdXQuY2xlYXIoKTtcbiAgICAgICAgICBjb3VudElucHV0LnNlbmRLZXlzKCcyJyk7XG5cbiAgICAgICAgICBleHBlY3Qod2l0aG91dE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJzIgcGVvcGxlIGFyZSB2aWV3aW5nLicpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnSWdvciBhbmQgTWlza28gYXJlIHZpZXdpbmcuJyk7XG5cbiAgICAgICAgICBjb3VudElucHV0LmNsZWFyKCk7XG4gICAgICAgICAgY291bnRJbnB1dC5zZW5kS2V5cygnMycpO1xuXG4gICAgICAgICAgZXhwZWN0KHdpdGhvdXRPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCczIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgICBleHBlY3Qod2l0aE9mZnNldC5nZXRUZXh0KCkpLnRvRXF1YWwoJ0lnb3IsIE1pc2tvIGFuZCBvbmUgb3RoZXIgcGVyc29uIGFyZSB2aWV3aW5nLicpO1xuXG4gICAgICAgICAgY291bnRJbnB1dC5jbGVhcigpO1xuICAgICAgICAgIGNvdW50SW5wdXQuc2VuZEtleXMoJzQnKTtcblxuICAgICAgICAgIGV4cGVjdCh3aXRob3V0T2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnNCBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgICAgZXhwZWN0KHdpdGhPZmZzZXQuZ2V0VGV4dCgpKS50b0VxdWFsKCdJZ29yLCBNaXNrbyBhbmQgMiBvdGhlciBwZW9wbGUgYXJlIHZpZXdpbmcuJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnc2hvdWxkIHNob3cgZGF0YS1ib3VuZCBuYW1lcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciB3aXRoT2Zmc2V0ID0gZWxlbWVudC5hbGwoYnkuY3NzKCduZy1wbHVyYWxpemUnKSkuZ2V0KDEpO1xuICAgICAgICAgIHZhciBwZXJzb25Db3VudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbkNvdW50JykpO1xuICAgICAgICAgIHZhciBwZXJzb24xID0gZWxlbWVudChieS5tb2RlbCgncGVyc29uMScpKTtcbiAgICAgICAgICB2YXIgcGVyc29uMiA9IGVsZW1lbnQoYnkubW9kZWwoJ3BlcnNvbjInKSk7XG4gICAgICAgICAgcGVyc29uQ291bnQuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb25Db3VudC5zZW5kS2V5cygnNCcpO1xuICAgICAgICAgIHBlcnNvbjEuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb24xLnNlbmRLZXlzKCdEaScpO1xuICAgICAgICAgIHBlcnNvbjIuY2xlYXIoKTtcbiAgICAgICAgICBwZXJzb24yLnNlbmRLZXlzKCdWb2p0YScpO1xuICAgICAgICAgIGV4cGVjdCh3aXRoT2Zmc2V0LmdldFRleHQoKSkudG9FcXVhbCgnRGksIFZvanRhIGFuZCAyIG90aGVyIHBlb3BsZSBhcmUgdmlld2luZy4nKTtcbiAgICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdQbHVyYWxpemVEaXJlY3RpdmUgPSBbJyRsb2NhbGUnLCAnJGludGVycG9sYXRlJywgJyRsb2cnLCBmdW5jdGlvbigkbG9jYWxlLCAkaW50ZXJwb2xhdGUsICRsb2cpIHtcbiAgdmFyIEJSQUNFID0gL3t9L2csXG4gICAgICBJU19XSEVOID0gL153aGVuKE1pbnVzKT8oLispJC87XG5cbiAgcmV0dXJuIHtcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgdmFyIG51bWJlckV4cCA9IGF0dHIuY291bnQsXG4gICAgICAgICAgd2hlbkV4cCA9IGF0dHIuJGF0dHIud2hlbiAmJiBlbGVtZW50LmF0dHIoYXR0ci4kYXR0ci53aGVuKSwgLy8gd2UgaGF2ZSB7e319IGluIGF0dHJzXG4gICAgICAgICAgb2Zmc2V0ID0gYXR0ci5vZmZzZXQgfHwgMCxcbiAgICAgICAgICB3aGVucyA9IHNjb3BlLiRldmFsKHdoZW5FeHApIHx8IHt9LFxuICAgICAgICAgIHdoZW5zRXhwRm5zID0ge30sXG4gICAgICAgICAgc3RhcnRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuc3RhcnRTeW1ib2woKSxcbiAgICAgICAgICBlbmRTeW1ib2wgPSAkaW50ZXJwb2xhdGUuZW5kU3ltYm9sKCksXG4gICAgICAgICAgYnJhY2VSZXBsYWNlbWVudCA9IHN0YXJ0U3ltYm9sICsgbnVtYmVyRXhwICsgJy0nICsgb2Zmc2V0ICsgZW5kU3ltYm9sLFxuICAgICAgICAgIHdhdGNoUmVtb3ZlciA9IGFuZ3VsYXIubm9vcCxcbiAgICAgICAgICBsYXN0Q291bnQ7XG5cbiAgICAgIGZvckVhY2goYXR0ciwgZnVuY3Rpb24oZXhwcmVzc2lvbiwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICB2YXIgdG1wTWF0Y2ggPSBJU19XSEVOLmV4ZWMoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgIGlmICh0bXBNYXRjaCkge1xuICAgICAgICAgIHZhciB3aGVuS2V5ID0gKHRtcE1hdGNoWzFdID8gJy0nIDogJycpICsgbG93ZXJjYXNlKHRtcE1hdGNoWzJdKTtcbiAgICAgICAgICB3aGVuc1t3aGVuS2V5XSA9IGVsZW1lbnQuYXR0cihhdHRyLiRhdHRyW2F0dHJpYnV0ZU5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBmb3JFYWNoKHdoZW5zLCBmdW5jdGlvbihleHByZXNzaW9uLCBrZXkpIHtcbiAgICAgICAgd2hlbnNFeHBGbnNba2V5XSA9ICRpbnRlcnBvbGF0ZShleHByZXNzaW9uLnJlcGxhY2UoQlJBQ0UsIGJyYWNlUmVwbGFjZW1lbnQpKTtcblxuICAgICAgfSk7XG5cbiAgICAgIHNjb3BlLiR3YXRjaChudW1iZXJFeHAsIGZ1bmN0aW9uIG5nUGx1cmFsaXplV2F0Y2hBY3Rpb24obmV3VmFsKSB7XG4gICAgICAgIHZhciBjb3VudCA9IHBhcnNlRmxvYXQobmV3VmFsKTtcbiAgICAgICAgdmFyIGNvdW50SXNOYU4gPSBpc051bWJlck5hTihjb3VudCk7XG5cbiAgICAgICAgaWYgKCFjb3VudElzTmFOICYmICEoY291bnQgaW4gd2hlbnMpKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhwbGljaXQgbnVtYmVyIHJ1bGUgc3VjaCBhcyAxLCAyLCAzLi4uIGlzIGRlZmluZWQsIGp1c3QgdXNlIGl0LlxuICAgICAgICAgIC8vIE90aGVyd2lzZSwgY2hlY2sgaXQgYWdhaW5zdCBwbHVyYWxpemF0aW9uIHJ1bGVzIGluICRsb2NhbGUgc2VydmljZS5cbiAgICAgICAgICBjb3VudCA9ICRsb2NhbGUucGx1cmFsQ2F0KGNvdW50IC0gb2Zmc2V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGJvdGggYGNvdW50YCBhbmQgYGxhc3RDb3VudGAgYXJlIE5hTiwgd2UgZG9uJ3QgbmVlZCB0byByZS1yZWdpc3RlciBhIHdhdGNoLlxuICAgICAgICAvLyBJbiBKUyBgTmFOICE9PSBOYU5gLCBzbyB3ZSBoYXZlIHRvIGV4cGxpY2l0bHkgY2hlY2suXG4gICAgICAgIGlmICgoY291bnQgIT09IGxhc3RDb3VudCkgJiYgIShjb3VudElzTmFOICYmIGlzTnVtYmVyTmFOKGxhc3RDb3VudCkpKSB7XG4gICAgICAgICAgd2F0Y2hSZW1vdmVyKCk7XG4gICAgICAgICAgdmFyIHdoZW5FeHBGbiA9IHdoZW5zRXhwRm5zW2NvdW50XTtcbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQod2hlbkV4cEZuKSkge1xuICAgICAgICAgICAgaWYgKG5ld1ZhbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICRsb2cuZGVidWcoJ25nUGx1cmFsaXplOiBubyBydWxlIGRlZmluZWQgZm9yIFxcJycgKyBjb3VudCArICdcXCcgaW4gJyArIHdoZW5FeHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2F0Y2hSZW1vdmVyID0gbm9vcDtcbiAgICAgICAgICAgIHVwZGF0ZUVsZW1lbnRUZXh0KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdhdGNoUmVtb3ZlciA9IHNjb3BlLiR3YXRjaCh3aGVuRXhwRm4sIHVwZGF0ZUVsZW1lbnRUZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGFzdENvdW50ID0gY291bnQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVFbGVtZW50VGV4dChuZXdUZXh0KSB7XG4gICAgICAgIGVsZW1lbnQudGV4dChuZXdUZXh0IHx8ICcnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxuLyogZXhwb3J0ZWQgbmdSZXBlYXREaXJlY3RpdmUgKi9cblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1JlcGVhdFxuICogQG11bHRpRWxlbWVudFxuICogQHJlc3RyaWN0IEFcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdSZXBlYXRgIGRpcmVjdGl2ZSBpbnN0YW50aWF0ZXMgYSB0ZW1wbGF0ZSBvbmNlIHBlciBpdGVtIGZyb20gYSBjb2xsZWN0aW9uLiBFYWNoIHRlbXBsYXRlXG4gKiBpbnN0YW5jZSBnZXRzIGl0cyBvd24gc2NvcGUsIHdoZXJlIHRoZSBnaXZlbiBsb29wIHZhcmlhYmxlIGlzIHNldCB0byB0aGUgY3VycmVudCBjb2xsZWN0aW9uIGl0ZW0sXG4gKiBhbmQgYCRpbmRleGAgaXMgc2V0IHRvIHRoZSBpdGVtIGluZGV4IG9yIGtleS5cbiAqXG4gKiBTcGVjaWFsIHByb3BlcnRpZXMgYXJlIGV4cG9zZWQgb24gdGhlIGxvY2FsIHNjb3BlIG9mIGVhY2ggdGVtcGxhdGUgaW5zdGFuY2UsIGluY2x1ZGluZzpcbiAqXG4gKiB8IFZhcmlhYmxlICB8IFR5cGUgICAgICAgICAgICB8IERldGFpbHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IGAkaW5kZXhgICB8IHtAdHlwZSBudW1iZXJ9ICB8IGl0ZXJhdG9yIG9mZnNldCBvZiB0aGUgcmVwZWF0ZWQgZWxlbWVudCAoMC4ubGVuZ3RoLTEpICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkZmlyc3RgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgZmlyc3QgaW4gdGhlIGl0ZXJhdG9yLiAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkbWlkZGxlYCB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgYmV0d2VlbiB0aGUgZmlyc3QgYW5kIGxhc3QgaW4gdGhlIGl0ZXJhdG9yLiB8XG4gKiB8IGAkbGFzdGAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIHJlcGVhdGVkIGVsZW1lbnQgaXMgbGFzdCBpbiB0aGUgaXRlcmF0b3IuICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAkZXZlbmAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIGl0ZXJhdG9yIHBvc2l0aW9uIGAkaW5kZXhgIGlzIGV2ZW4gKG90aGVyd2lzZSBmYWxzZSkuICAgICAgICAgICB8XG4gKiB8IGAkb2RkYCAgICB8IHtAdHlwZSBib29sZWFufSB8IHRydWUgaWYgdGhlIGl0ZXJhdG9yIHBvc2l0aW9uIGAkaW5kZXhgIGlzIG9kZCAob3RoZXJ3aXNlIGZhbHNlKS4gICAgICAgICAgICB8XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICAgQ3JlYXRpbmcgYWxpYXNlcyBmb3IgdGhlc2UgcHJvcGVydGllcyBpcyBwb3NzaWJsZSB3aXRoIHtAbGluayBuZy5kaXJlY3RpdmU6bmdJbml0IGBuZ0luaXRgfS5cbiAqICAgVGhpcyBtYXkgYmUgdXNlZnVsIHdoZW4sIGZvciBpbnN0YW5jZSwgbmVzdGluZyBuZ1JlcGVhdHMuXG4gKiA8L2Rpdj5cbiAqXG4gKlxuICogIyMgSXRlcmF0aW5nIG92ZXIgb2JqZWN0IHByb3BlcnRpZXNcbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSB0byBnZXQgYG5nUmVwZWF0YCB0byBpdGVyYXRlIG92ZXIgdGhlIHByb3BlcnRpZXMgb2YgYW4gb2JqZWN0IHVzaW5nIHRoZSBmb2xsb3dpbmdcbiAqIHN5bnRheDpcbiAqXG4gKiBgYGBqc1xuICogPGRpdiBuZy1yZXBlYXQ9XCIoa2V5LCB2YWx1ZSkgaW4gbXlPYmpcIj4gLi4uIDwvZGl2PlxuICogYGBgXG4gKlxuICogSG93ZXZlciwgdGhlcmUgYXJlIGEgZmV3IGxpbWl0YXRpb25zIGNvbXBhcmVkIHRvIGFycmF5IGl0ZXJhdGlvbjpcbiAqXG4gKiAtIFRoZSBKYXZhU2NyaXB0IHNwZWNpZmljYXRpb24gZG9lcyBub3QgZGVmaW5lIHRoZSBvcmRlciBvZiBrZXlzXG4gKiAgIHJldHVybmVkIGZvciBhbiBvYmplY3QsIHNvIEFuZ3VsYXIgcmVsaWVzIG9uIHRoZSBvcmRlciByZXR1cm5lZCBieSB0aGUgYnJvd3NlclxuICogICB3aGVuIHJ1bm5pbmcgYGZvciBrZXkgaW4gbXlPYmpgLiBCcm93c2VycyBnZW5lcmFsbHkgZm9sbG93IHRoZSBzdHJhdGVneSBvZiBwcm92aWRpbmdcbiAqICAga2V5cyBpbiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIGRlZmluZWQsIGFsdGhvdWdoIHRoZXJlIGFyZSBleGNlcHRpb25zIHdoZW4ga2V5cyBhcmUgZGVsZXRlZFxuICogICBhbmQgcmVpbnN0YXRlZC4gU2VlIHRoZVxuICogICBbTUROIHBhZ2Ugb24gYGRlbGV0ZWAgZm9yIG1vcmUgaW5mb10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL2RlbGV0ZSNDcm9zcy1icm93c2VyX25vdGVzKS5cbiAqXG4gKiAtIGBuZ1JlcGVhdGAgd2lsbCBzaWxlbnRseSAqaWdub3JlKiBvYmplY3Qga2V5cyBzdGFydGluZyB3aXRoIGAkYCwgYmVjYXVzZVxuICogICBpdCdzIGEgcHJlZml4IHVzZWQgYnkgQW5ndWxhciBmb3IgcHVibGljIChgJGApIGFuZCBwcml2YXRlIChgJCRgKSBwcm9wZXJ0aWVzLlxuICpcbiAqIC0gVGhlIGJ1aWx0LWluIGZpbHRlcnMge0BsaW5rIG5nLm9yZGVyQnkgb3JkZXJCeX0gYW5kIHtAbGluayBuZy5maWx0ZXIgZmlsdGVyfSBkbyBub3Qgd29yayB3aXRoXG4gKiAgIG9iamVjdHMsIGFuZCB3aWxsIHRocm93IGFuIGVycm9yIGlmIHVzZWQgd2l0aCBvbmUuXG4gKlxuICogSWYgeW91IGFyZSBoaXR0aW5nIGFueSBvZiB0aGVzZSBsaW1pdGF0aW9ucywgdGhlIHJlY29tbWVuZGVkIHdvcmthcm91bmQgaXMgdG8gY29udmVydCB5b3VyIG9iamVjdCBpbnRvIGFuIGFycmF5XG4gKiB0aGF0IGlzIHNvcnRlZCBpbnRvIHRoZSBvcmRlciB0aGF0IHlvdSBwcmVmZXIgYmVmb3JlIHByb3ZpZGluZyBpdCB0byBgbmdSZXBlYXRgLiBZb3UgY291bGRcbiAqIGRvIHRoaXMgd2l0aCBhIGZpbHRlciBzdWNoIGFzIFt0b0FycmF5RmlsdGVyXShodHRwOi8vbmdtb2R1bGVzLm9yZy9tb2R1bGVzL2FuZ3VsYXItdG9BcnJheUZpbHRlcilcbiAqIG9yIGltcGxlbWVudCBhIGAkd2F0Y2hgIG9uIHRoZSBvYmplY3QgeW91cnNlbGYuXG4gKlxuICpcbiAqICMjIFRyYWNraW5nIGFuZCBEdXBsaWNhdGVzXG4gKlxuICogYG5nUmVwZWF0YCB1c2VzIHtAbGluayAkcm9vdFNjb3BlLlNjb3BlIyR3YXRjaENvbGxlY3Rpb24gJHdhdGNoQ29sbGVjdGlvbn0gdG8gZGV0ZWN0IGNoYW5nZXMgaW5cbiAqIHRoZSBjb2xsZWN0aW9uLiBXaGVuIGEgY2hhbmdlIGhhcHBlbnMsIGBuZ1JlcGVhdGAgdGhlbiBtYWtlcyB0aGUgY29ycmVzcG9uZGluZyBjaGFuZ2VzIHRvIHRoZSBET006XG4gKlxuICogKiBXaGVuIGFuIGl0ZW0gaXMgYWRkZWQsIGEgbmV3IGluc3RhbmNlIG9mIHRoZSB0ZW1wbGF0ZSBpcyBhZGRlZCB0byB0aGUgRE9NLlxuICogKiBXaGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCwgaXRzIHRlbXBsYXRlIGluc3RhbmNlIGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NLlxuICogKiBXaGVuIGl0ZW1zIGFyZSByZW9yZGVyZWQsIHRoZWlyIHJlc3BlY3RpdmUgdGVtcGxhdGVzIGFyZSByZW9yZGVyZWQgaW4gdGhlIERPTS5cbiAqXG4gKiBUbyBtaW5pbWl6ZSBjcmVhdGlvbiBvZiBET00gZWxlbWVudHMsIGBuZ1JlcGVhdGAgdXNlcyBhIGZ1bmN0aW9uXG4gKiB0byBcImtlZXAgdHJhY2tcIiBvZiBhbGwgaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb24gYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgRE9NIGVsZW1lbnRzLlxuICogRm9yIGV4YW1wbGUsIGlmIGFuIGl0ZW0gaXMgYWRkZWQgdG8gdGhlIGNvbGxlY3Rpb24sIGBuZ1JlcGVhdGAgd2lsbCBrbm93IHRoYXQgYWxsIG90aGVyIGl0ZW1zXG4gKiBhbHJlYWR5IGhhdmUgRE9NIGVsZW1lbnRzLCBhbmQgd2lsbCBub3QgcmUtcmVuZGVyIHRoZW0uXG4gKlxuICogVGhlIGRlZmF1bHQgdHJhY2tpbmcgZnVuY3Rpb24gKHdoaWNoIHRyYWNrcyBpdGVtcyBieSB0aGVpciBpZGVudGl0eSkgZG9lcyBub3QgYWxsb3dcbiAqIGR1cGxpY2F0ZSBpdGVtcyBpbiBhcnJheXMuIFRoaXMgaXMgYmVjYXVzZSB3aGVuIHRoZXJlIGFyZSBkdXBsaWNhdGVzLCBpdCBpcyBub3QgcG9zc2libGVcbiAqIHRvIG1haW50YWluIGEgb25lLXRvLW9uZSBtYXBwaW5nIGJldHdlZW4gY29sbGVjdGlvbiBpdGVtcyBhbmQgRE9NIGVsZW1lbnRzLlxuICpcbiAqIElmIHlvdSBkbyBuZWVkIHRvIHJlcGVhdCBkdXBsaWNhdGUgaXRlbXMsIHlvdSBjYW4gc3Vic3RpdHV0ZSB0aGUgZGVmYXVsdCB0cmFja2luZyBiZWhhdmlvclxuICogd2l0aCB5b3VyIG93biB1c2luZyB0aGUgYHRyYWNrIGJ5YCBleHByZXNzaW9uLlxuICpcbiAqIEZvciBleGFtcGxlLCB5b3UgbWF5IHRyYWNrIGl0ZW1zIGJ5IHRoZSBpbmRleCBvZiBlYWNoIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24sIHVzaW5nIHRoZVxuICogc3BlY2lhbCBzY29wZSBwcm9wZXJ0eSBgJGluZGV4YDpcbiAqIGBgYGh0bWxcbiAqICAgIDxkaXYgbmctcmVwZWF0PVwibiBpbiBbNDIsIDQyLCA0MywgNDNdIHRyYWNrIGJ5ICRpbmRleFwiPlxuICogICAgICB7e259fVxuICogICAgPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBZb3UgbWF5IGFsc28gdXNlIGFyYml0cmFyeSBleHByZXNzaW9ucyBpbiBgdHJhY2sgYnlgLCBpbmNsdWRpbmcgcmVmZXJlbmNlcyB0byBjdXN0b20gZnVuY3Rpb25zXG4gKiBvbiB0aGUgc2NvcGU6XG4gKiBgYGBodG1sXG4gKiAgICA8ZGl2IG5nLXJlcGVhdD1cIm4gaW4gWzQyLCA0MiwgNDMsIDQzXSB0cmFjayBieSBteVRyYWNraW5nRnVuY3Rpb24obilcIj5cbiAqICAgICAge3tufX1cbiAqICAgIDwvZGl2PlxuICogYGBgXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAqIElmIHlvdSBhcmUgd29ya2luZyB3aXRoIG9iamVjdHMgdGhhdCBoYXZlIGEgdW5pcXVlIGlkZW50aWZpZXIgcHJvcGVydHksIHlvdSBzaG91bGQgdHJhY2tcbiAqIGJ5IHRoaXMgaWRlbnRpZmllciBpbnN0ZWFkIG9mIHRoZSBvYmplY3QgaW5zdGFuY2UuIFNob3VsZCB5b3UgcmVsb2FkIHlvdXIgZGF0YSBsYXRlciwgYG5nUmVwZWF0YFxuICogd2lsbCBub3QgaGF2ZSB0byByZWJ1aWxkIHRoZSBET00gZWxlbWVudHMgZm9yIGl0ZW1zIGl0IGhhcyBhbHJlYWR5IHJlbmRlcmVkLCBldmVuIGlmIHRoZVxuICogSmF2YVNjcmlwdCBvYmplY3RzIGluIHRoZSBjb2xsZWN0aW9uIGhhdmUgYmVlbiBzdWJzdGl0dXRlZCBmb3IgbmV3IG9uZXMuIEZvciBsYXJnZSBjb2xsZWN0aW9ucyxcbiAqIHRoaXMgc2lnbmlmaWNhbnRseSBpbXByb3ZlcyByZW5kZXJpbmcgcGVyZm9ybWFuY2UuIElmIHlvdSBkb24ndCBoYXZlIGEgdW5pcXVlIGlkZW50aWZpZXIsXG4gKiBgdHJhY2sgYnkgJGluZGV4YCBjYW4gYWxzbyBwcm92aWRlIGEgcGVyZm9ybWFuY2UgYm9vc3QuXG4gKiA8L2Rpdj5cbiAqXG4gKiBgYGBodG1sXG4gKiAgICA8ZGl2IG5nLXJlcGVhdD1cIm1vZGVsIGluIGNvbGxlY3Rpb24gdHJhY2sgYnkgbW9kZWwuaWRcIj5cbiAqICAgICAge3ttb2RlbC5uYW1lfX1cbiAqICAgIDwvZGl2PlxuICogYGBgXG4gKlxuICogPGJyIC8+XG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiPlxuICogQXZvaWQgdXNpbmcgYHRyYWNrIGJ5ICRpbmRleGAgd2hlbiB0aGUgcmVwZWF0ZWQgdGVtcGxhdGUgY29udGFpbnNcbiAqIHtAbGluayBndWlkZS9leHByZXNzaW9uI29uZS10aW1lLWJpbmRpbmcgb25lLXRpbWUgYmluZGluZ3N9LiBJbiBzdWNoIGNhc2VzLCB0aGUgYG50aGAgRE9NXG4gKiBlbGVtZW50IHdpbGwgYWx3YXlzIGJlIG1hdGNoZWQgd2l0aCB0aGUgYG50aGAgaXRlbSBvZiB0aGUgYXJyYXksIHNvIHRoZSBiaW5kaW5ncyBvbiB0aGF0IGVsZW1lbnRcbiAqIHdpbGwgbm90IGJlIHVwZGF0ZWQgZXZlbiB3aGVuIHRoZSBjb3JyZXNwb25kaW5nIGl0ZW0gY2hhbmdlcywgZXNzZW50aWFsbHkgY2F1c2luZyB0aGUgdmlldyB0byBnZXRcbiAqIG91dC1vZi1zeW5jIHdpdGggdGhlIHVuZGVybHlpbmcgZGF0YS5cbiAqIDwvZGl2PlxuICpcbiAqIFdoZW4gbm8gYHRyYWNrIGJ5YCBleHByZXNzaW9uIGlzIHByb3ZpZGVkLCBpdCBpcyBlcXVpdmFsZW50IHRvIHRyYWNraW5nIGJ5IHRoZSBidWlsdC1pblxuICogYCRpZGAgZnVuY3Rpb24sIHdoaWNoIHRyYWNrcyBpdGVtcyBieSB0aGVpciBpZGVudGl0eTpcbiAqIGBgYGh0bWxcbiAqICAgIDxkaXYgbmctcmVwZWF0PVwib2JqIGluIGNvbGxlY3Rpb24gdHJhY2sgYnkgJGlkKG9iailcIj5cbiAqICAgICAge3tvYmoucHJvcH19XG4gKiAgICA8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIDxiciAvPlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICoqTm90ZToqKiBgdHJhY2sgYnlgIG11c3QgYWx3YXlzIGJlIHRoZSBsYXN0IGV4cHJlc3Npb246XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICogICAgPGRpdiBuZy1yZXBlYXQ9XCJtb2RlbCBpbiBjb2xsZWN0aW9uIHwgb3JkZXJCeTogJ2lkJyBhcyBmaWx0ZXJlZF9yZXN1bHQgdHJhY2sgYnkgbW9kZWwuaWRcIj5cbiAqICAgICAge3ttb2RlbC5uYW1lfX1cbiAqICAgIDwvZGl2PlxuICogYGBgXG4gKlxuICpcbiAqICMjIFNwZWNpYWwgcmVwZWF0IHN0YXJ0IGFuZCBlbmQgcG9pbnRzXG4gKiBUbyByZXBlYXQgYSBzZXJpZXMgb2YgZWxlbWVudHMgaW5zdGVhZCBvZiBqdXN0IG9uZSBwYXJlbnQgZWxlbWVudCwgbmdSZXBlYXQgKGFzIHdlbGwgYXMgb3RoZXIgbmcgZGlyZWN0aXZlcykgc3VwcG9ydHMgZXh0ZW5kaW5nXG4gKiB0aGUgcmFuZ2Ugb2YgdGhlIHJlcGVhdGVyIGJ5IGRlZmluaW5nIGV4cGxpY2l0IHN0YXJ0IGFuZCBlbmQgcG9pbnRzIGJ5IHVzaW5nICoqbmctcmVwZWF0LXN0YXJ0KiogYW5kICoqbmctcmVwZWF0LWVuZCoqIHJlc3BlY3RpdmVseS5cbiAqIFRoZSAqKm5nLXJlcGVhdC1zdGFydCoqIGRpcmVjdGl2ZSB3b3JrcyB0aGUgc2FtZSBhcyAqKm5nLXJlcGVhdCoqLCBidXQgd2lsbCByZXBlYXQgYWxsIHRoZSBIVE1MIGNvZGUgKGluY2x1ZGluZyB0aGUgdGFnIGl0J3MgZGVmaW5lZCBvbilcbiAqIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIGVuZGluZyBIVE1MIHRhZyB3aGVyZSAqKm5nLXJlcGVhdC1lbmQqKiBpcyBwbGFjZWQuXG4gKlxuICogVGhlIGV4YW1wbGUgYmVsb3cgbWFrZXMgdXNlIG9mIHRoaXMgZmVhdHVyZTpcbiAqIGBgYGh0bWxcbiAqICAgPGhlYWRlciBuZy1yZXBlYXQtc3RhcnQ9XCJpdGVtIGluIGl0ZW1zXCI+XG4gKiAgICAgSGVhZGVyIHt7IGl0ZW0gfX1cbiAqICAgPC9oZWFkZXI+XG4gKiAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XG4gKiAgICAgQm9keSB7eyBpdGVtIH19XG4gKiAgIDwvZGl2PlxuICogICA8Zm9vdGVyIG5nLXJlcGVhdC1lbmQ+XG4gKiAgICAgRm9vdGVyIHt7IGl0ZW0gfX1cbiAqICAgPC9mb290ZXI+XG4gKiBgYGBcbiAqXG4gKiBBbmQgd2l0aCBhbiBpbnB1dCBvZiB7QHR5cGUgWydBJywnQiddfSBmb3IgdGhlIGl0ZW1zIHZhcmlhYmxlIGluIHRoZSBleGFtcGxlIGFib3ZlLCB0aGUgb3V0cHV0IHdpbGwgZXZhbHVhdGUgdG86XG4gKiBgYGBodG1sXG4gKiAgIDxoZWFkZXI+XG4gKiAgICAgSGVhZGVyIEFcbiAqICAgPC9oZWFkZXI+XG4gKiAgIDxkaXYgY2xhc3M9XCJib2R5XCI+XG4gKiAgICAgQm9keSBBXG4gKiAgIDwvZGl2PlxuICogICA8Zm9vdGVyPlxuICogICAgIEZvb3RlciBBXG4gKiAgIDwvZm9vdGVyPlxuICogICA8aGVhZGVyPlxuICogICAgIEhlYWRlciBCXG4gKiAgIDwvaGVhZGVyPlxuICogICA8ZGl2IGNsYXNzPVwiYm9keVwiPlxuICogICAgIEJvZHkgQlxuICogICA8L2Rpdj5cbiAqICAgPGZvb3Rlcj5cbiAqICAgICBGb290ZXIgQlxuICogICA8L2Zvb3Rlcj5cbiAqIGBgYFxuICpcbiAqIFRoZSBjdXN0b20gc3RhcnQgYW5kIGVuZCBwb2ludHMgZm9yIG5nUmVwZWF0IGFsc28gc3VwcG9ydCBhbGwgb3RoZXIgSFRNTCBkaXJlY3RpdmUgc3ludGF4IGZsYXZvcnMgcHJvdmlkZWQgaW4gQW5ndWxhckpTIChzdWNoXG4gKiBhcyAqKmRhdGEtbmctcmVwZWF0LXN0YXJ0KiosICoqeC1uZy1yZXBlYXQtc3RhcnQqKiBhbmQgKipuZzpyZXBlYXQtc3RhcnQqKikuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjZW50ZXIgZW50ZXJ9IHwgd2hlbiBhIG5ldyBpdGVtIGlzIGFkZGVkIHRvIHRoZSBsaXN0IG9yIHdoZW4gYW4gaXRlbSBpcyByZXZlYWxlZCBhZnRlciBhIGZpbHRlciB8XG4gKiB8IHtAbGluayBuZy4kYW5pbWF0ZSNsZWF2ZSBsZWF2ZX0gfCB3aGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIHRoZSBsaXN0IG9yIHdoZW4gYW4gaXRlbSBpcyBmaWx0ZXJlZCBvdXQgfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjbW92ZSBtb3ZlIH0gfCB3aGVuIGFuIGFkamFjZW50IGl0ZW0gaXMgZmlsdGVyZWQgb3V0IGNhdXNpbmcgYSByZW9yZGVyIG9yIHdoZW4gdGhlIGl0ZW0gY29udGVudHMgYXJlIHJlb3JkZXJlZCB8XG4gKlxuICogU2VlIHRoZSBleGFtcGxlIGJlbG93IGZvciBkZWZpbmluZyBDU1MgYW5pbWF0aW9ucyB3aXRoIG5nUmVwZWF0LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgMTAwMFxuICogQHBhcmFtIHtyZXBlYXRfZXhwcmVzc2lvbn0gbmdSZXBlYXQgVGhlIGV4cHJlc3Npb24gaW5kaWNhdGluZyBob3cgdG8gZW51bWVyYXRlIGEgY29sbGVjdGlvbi4gVGhlc2VcbiAqICAgZm9ybWF0cyBhcmUgY3VycmVudGx5IHN1cHBvcnRlZDpcbiAqXG4gKiAgICogYHZhcmlhYmxlIGluIGV4cHJlc3Npb25gIOKAkyB3aGVyZSB2YXJpYWJsZSBpcyB0aGUgdXNlciBkZWZpbmVkIGxvb3AgdmFyaWFibGUgYW5kIGBleHByZXNzaW9uYFxuICogICAgIGlzIGEgc2NvcGUgZXhwcmVzc2lvbiBnaXZpbmcgdGhlIGNvbGxlY3Rpb24gdG8gZW51bWVyYXRlLlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYGFsYnVtIGluIGFydGlzdC5hbGJ1bXNgLlxuICpcbiAqICAgKiBgKGtleSwgdmFsdWUpIGluIGV4cHJlc3Npb25gIOKAkyB3aGVyZSBga2V5YCBhbmQgYHZhbHVlYCBjYW4gYmUgYW55IHVzZXIgZGVmaW5lZCBpZGVudGlmaWVycyxcbiAqICAgICBhbmQgYGV4cHJlc3Npb25gIGlzIHRoZSBzY29wZSBleHByZXNzaW9uIGdpdmluZyB0aGUgY29sbGVjdGlvbiB0byBlbnVtZXJhdGUuXG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgKG5hbWUsIGFnZSkgaW4geydhZGFtJzoxMCwgJ2FtYWxpZSc6MTJ9YC5cbiAqXG4gKiAgICogYHZhcmlhYmxlIGluIGV4cHJlc3Npb24gdHJhY2sgYnkgdHJhY2tpbmdfZXhwcmVzc2lvbmAg4oCTIFlvdSBjYW4gYWxzbyBwcm92aWRlIGFuIG9wdGlvbmFsIHRyYWNraW5nIGV4cHJlc3Npb25cbiAqICAgICB3aGljaCBjYW4gYmUgdXNlZCB0byBhc3NvY2lhdGUgdGhlIG9iamVjdHMgaW4gdGhlIGNvbGxlY3Rpb24gd2l0aCB0aGUgRE9NIGVsZW1lbnRzLiBJZiBubyB0cmFja2luZyBleHByZXNzaW9uXG4gKiAgICAgaXMgc3BlY2lmaWVkLCBuZy1yZXBlYXQgYXNzb2NpYXRlcyBlbGVtZW50cyBieSBpZGVudGl0eS4gSXQgaXMgYW4gZXJyb3IgdG8gaGF2ZVxuICogICAgIG1vcmUgdGhhbiBvbmUgdHJhY2tpbmcgZXhwcmVzc2lvbiB2YWx1ZSByZXNvbHZlIHRvIHRoZSBzYW1lIGtleS4gKFRoaXMgd291bGQgbWVhbiB0aGF0IHR3byBkaXN0aW5jdCBvYmplY3RzIGFyZVxuICogICAgIG1hcHBlZCB0byB0aGUgc2FtZSBET00gZWxlbWVudCwgd2hpY2ggaXMgbm90IHBvc3NpYmxlLilcbiAqXG4gKiAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAqICAgICAgIDxzdHJvbmc+Tm90ZTo8L3N0cm9uZz4gdGhlIGB0cmFjayBieWAgZXhwcmVzc2lvbiBtdXN0IGNvbWUgbGFzdCAtIGFmdGVyIGFueSBmaWx0ZXJzLCBhbmQgdGhlIGFsaWFzIGV4cHJlc3Npb24uXG4gKiAgICAgPC9kaXY+XG4gKlxuICogICAgIEZvciBleGFtcGxlOiBgaXRlbSBpbiBpdGVtc2AgaXMgZXF1aXZhbGVudCB0byBgaXRlbSBpbiBpdGVtcyB0cmFjayBieSAkaWQoaXRlbSlgLiBUaGlzIGltcGxpZXMgdGhhdCB0aGUgRE9NIGVsZW1lbnRzXG4gKiAgICAgd2lsbCBiZSBhc3NvY2lhdGVkIGJ5IGl0ZW0gaWRlbnRpdHkgaW4gdGhlIGFycmF5LlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgJGlkKGl0ZW0pYC4gQSBidWlsdCBpbiBgJGlkKClgIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGFzc2lnbiBhIHVuaXF1ZVxuICogICAgIGAkJGhhc2hLZXlgIHByb3BlcnR5IHRvIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkuIFRoaXMgcHJvcGVydHkgaXMgdGhlbiB1c2VkIGFzIGEga2V5IHRvIGFzc29jaWF0ZWQgRE9NIGVsZW1lbnRzXG4gKiAgICAgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBpdGVtIGluIHRoZSBhcnJheSBieSBpZGVudGl0eS4gTW92aW5nIHRoZSBzYW1lIG9iamVjdCBpbiBhcnJheSB3b3VsZCBtb3ZlIHRoZSBET01cbiAqICAgICBlbGVtZW50IGluIHRoZSBzYW1lIHdheSBpbiB0aGUgRE9NLlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgdHJhY2sgYnkgaXRlbS5pZGAgaXMgYSB0eXBpY2FsIHBhdHRlcm4gd2hlbiB0aGUgaXRlbXMgY29tZSBmcm9tIHRoZSBkYXRhYmFzZS4gSW4gdGhpc1xuICogICAgIGNhc2UgdGhlIG9iamVjdCBpZGVudGl0eSBkb2VzIG5vdCBtYXR0ZXIuIFR3byBvYmplY3RzIGFyZSBjb25zaWRlcmVkIGVxdWl2YWxlbnQgYXMgbG9uZyBhcyB0aGVpciBgaWRgXG4gKiAgICAgcHJvcGVydHkgaXMgc2FtZS5cbiAqXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zIHwgZmlsdGVyOnNlYXJjaFRleHQgdHJhY2sgYnkgaXRlbS5pZGAgaXMgYSBwYXR0ZXJuIHRoYXQgbWlnaHQgYmUgdXNlZCB0byBhcHBseSBhIGZpbHRlclxuICogICAgIHRvIGl0ZW1zIGluIGNvbmp1bmN0aW9uIHdpdGggYSB0cmFja2luZyBleHByZXNzaW9uLlxuICpcbiAqICAgKiBgdmFyaWFibGUgaW4gZXhwcmVzc2lvbiBhcyBhbGlhc19leHByZXNzaW9uYCDigJMgWW91IGNhbiBhbHNvIHByb3ZpZGUgYW4gb3B0aW9uYWwgYWxpYXMgZXhwcmVzc2lvbiB3aGljaCB3aWxsIHRoZW4gc3RvcmUgdGhlXG4gKiAgICAgaW50ZXJtZWRpYXRlIHJlc3VsdHMgb2YgdGhlIHJlcGVhdGVyIGFmdGVyIHRoZSBmaWx0ZXJzIGhhdmUgYmVlbiBhcHBsaWVkLiBUeXBpY2FsbHkgdGhpcyBpcyB1c2VkIHRvIHJlbmRlciBhIHNwZWNpYWwgbWVzc2FnZVxuICogICAgIHdoZW4gYSBmaWx0ZXIgaXMgYWN0aXZlIG9uIHRoZSByZXBlYXRlciwgYnV0IHRoZSBmaWx0ZXJlZCByZXN1bHQgc2V0IGlzIGVtcHR5LlxuICpcbiAqICAgICBGb3IgZXhhbXBsZTogYGl0ZW0gaW4gaXRlbXMgfCBmaWx0ZXI6eCBhcyByZXN1bHRzYCB3aWxsIHN0b3JlIHRoZSBmcmFnbWVudCBvZiB0aGUgcmVwZWF0ZWQgaXRlbXMgYXMgYHJlc3VsdHNgLCBidXQgb25seSBhZnRlclxuICogICAgIHRoZSBpdGVtcyBoYXZlIGJlZW4gcHJvY2Vzc2VkIHRocm91Z2ggdGhlIGZpbHRlci5cbiAqXG4gKiAgICAgUGxlYXNlIG5vdGUgdGhhdCBgYXMgW3ZhcmlhYmxlIG5hbWVdIGlzIG5vdCBhbiBvcGVyYXRvciBidXQgcmF0aGVyIGEgcGFydCBvZiBuZ1JlcGVhdCBtaWNyby1zeW50YXggc28gaXQgY2FuIGJlIHVzZWQgb25seSBhdCB0aGUgZW5kXG4gKiAgICAgKGFuZCBub3QgYXMgb3BlcmF0b3IsIGluc2lkZSBhbiBleHByZXNzaW9uKS5cbiAqXG4gKiAgICAgRm9yIGV4YW1wbGU6IGBpdGVtIGluIGl0ZW1zIHwgZmlsdGVyIDogeCB8IG9yZGVyQnkgOiBvcmRlciB8IGxpbWl0VG8gOiBsaW1pdCBhcyByZXN1bHRzYCAuXG4gKlxuICogQGV4YW1wbGVcbiAqIFRoaXMgZXhhbXBsZSB1c2VzIGBuZ1JlcGVhdGAgdG8gZGlzcGxheSBhIGxpc3Qgb2YgcGVvcGxlLiBBIGZpbHRlciBpcyB1c2VkIHRvIHJlc3RyaWN0IHRoZSBkaXNwbGF5ZWRcbiAqIHJlc3VsdHMgYnkgbmFtZSBvciBieSBhZ2UuIE5ldyAoZW50ZXJpbmcpIGFuZCByZW1vdmVkIChsZWF2aW5nKSBpdGVtcyBhcmUgYW5pbWF0ZWQuXG4gIDxleGFtcGxlIG1vZHVsZT1cIm5nUmVwZWF0XCIgbmFtZT1cIm5nUmVwZWF0XCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cInJlcGVhdENvbnRyb2xsZXJcIj5cbiAgICAgICAgSSBoYXZlIHt7ZnJpZW5kcy5sZW5ndGh9fSBmcmllbmRzLiBUaGV5IGFyZTpcbiAgICAgICAgPGlucHV0IHR5cGU9XCJzZWFyY2hcIiBuZy1tb2RlbD1cInFcIiBwbGFjZWhvbGRlcj1cImZpbHRlciBmcmllbmRzLi4uXCIgYXJpYS1sYWJlbD1cImZpbHRlciBmcmllbmRzXCIgLz5cbiAgICAgICAgPHVsIGNsYXNzPVwiZXhhbXBsZS1hbmltYXRlLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxsaSBjbGFzcz1cImFuaW1hdGUtcmVwZWF0XCIgbmctcmVwZWF0PVwiZnJpZW5kIGluIGZyaWVuZHMgfCBmaWx0ZXI6cSBhcyByZXN1bHRzXCI+XG4gICAgICAgICAgICBbe3skaW5kZXggKyAxfX1dIHt7ZnJpZW5kLm5hbWV9fSB3aG8gaXMge3tmcmllbmQuYWdlfX0geWVhcnMgb2xkLlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzPVwiYW5pbWF0ZS1yZXBlYXRcIiBuZy1pZj1cInJlc3VsdHMubGVuZ3RoID09PSAwXCI+XG4gICAgICAgICAgICA8c3Ryb25nPk5vIHJlc3VsdHMgZm91bmQuLi48L3N0cm9uZz5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJzY3JpcHQuanNcIj5cbiAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ1JlcGVhdCcsIFsnbmdBbmltYXRlJ10pLmNvbnRyb2xsZXIoJ3JlcGVhdENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBbXG4gICAgICAgICAge25hbWU6J0pvaG4nLCBhZ2U6MjUsIGdlbmRlcjonYm95J30sXG4gICAgICAgICAge25hbWU6J0plc3NpZScsIGFnZTozMCwgZ2VuZGVyOidnaXJsJ30sXG4gICAgICAgICAge25hbWU6J0pvaGFubmEnLCBhZ2U6MjgsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICAgIHtuYW1lOidKb3knLCBhZ2U6MTUsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICAgIHtuYW1lOidNYXJ5JywgYWdlOjI4LCBnZW5kZXI6J2dpcmwnfSxcbiAgICAgICAgICB7bmFtZTonUGV0ZXInLCBhZ2U6OTUsIGdlbmRlcjonYm95J30sXG4gICAgICAgICAge25hbWU6J1NlYmFzdGlhbicsIGFnZTo1MCwgZ2VuZGVyOidib3knfSxcbiAgICAgICAgICB7bmFtZTonRXJpa2EnLCBhZ2U6MjcsIGdlbmRlcjonZ2lybCd9LFxuICAgICAgICAgIHtuYW1lOidQYXRyaWNrJywgYWdlOjQwLCBnZW5kZXI6J2JveSd9LFxuICAgICAgICAgIHtuYW1lOidTYW1hbnRoYScsIGFnZTo2MCwgZ2VuZGVyOidnaXJsJ31cbiAgICAgICAgXTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5leGFtcGxlLWFuaW1hdGUtY29udGFpbmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgbGlzdC1zdHlsZTpub25lO1xuICAgICAgICBtYXJnaW46MDtcbiAgICAgICAgcGFkZGluZzowIDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXJlcGVhdCB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OjMwcHg7XG4gICAgICAgIGxpc3Qtc3R5bGU6bm9uZTtcbiAgICAgICAgYm94LXNpemluZzpib3JkZXItYm94O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbW92ZSxcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1lbnRlcixcbiAgICAgIC5hbmltYXRlLXJlcGVhdC5uZy1sZWF2ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGxpbmVhciAwLjVzO1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctbGVhdmUubmctbGVhdmUtYWN0aXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIge1xuICAgICAgICBvcGFjaXR5OjA7XG4gICAgICAgIG1heC1oZWlnaHQ6MDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLWxlYXZlLFxuICAgICAgLmFuaW1hdGUtcmVwZWF0Lm5nLW1vdmUubmctbW92ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1yZXBlYXQubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgb3BhY2l0eToxO1xuICAgICAgICBtYXgtaGVpZ2h0OjMwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciBmcmllbmRzID0gZWxlbWVudC5hbGwoYnkucmVwZWF0ZXIoJ2ZyaWVuZCBpbiBmcmllbmRzJykpO1xuXG4gICAgICBpdCgnc2hvdWxkIHJlbmRlciBpbml0aWFsIGRhdGEgc2V0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMTApO1xuICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMV0gSm9obiB3aG8gaXMgMjUgeWVhcnMgb2xkLicpO1xuICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMl0gSmVzc2llIHdobyBpcyAzMCB5ZWFycyBvbGQuJyk7XG4gICAgICAgIGV4cGVjdChmcmllbmRzLmxhc3QoKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ1sxMF0gU2FtYW50aGEgd2hvIGlzIDYwIHllYXJzIG9sZC4nKTtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygnZnJpZW5kcy5sZW5ndGgnKSkuZ2V0VGV4dCgpKVxuICAgICAgICAgICAgLnRvTWF0Y2goXCJJIGhhdmUgMTAgZnJpZW5kcy4gVGhleSBhcmU6XCIpO1xuICAgICAgfSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSByZXBlYXRlciB3aGVuIGZpbHRlciBwcmVkaWNhdGUgY2hhbmdlcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KGZyaWVuZHMuY291bnQoKSkudG9CZSgxMCk7XG5cbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3EnKSkuc2VuZEtleXMoJ21hJyk7XG5cbiAgICAgICAgIGV4cGVjdChmcmllbmRzLmNvdW50KCkpLnRvQmUoMik7XG4gICAgICAgICBleHBlY3QoZnJpZW5kcy5nZXQoMCkuZ2V0VGV4dCgpKS50b0VxdWFsKCdbMV0gTWFyeSB3aG8gaXMgMjggeWVhcnMgb2xkLicpO1xuICAgICAgICAgZXhwZWN0KGZyaWVuZHMubGFzdCgpLmdldFRleHQoKSkudG9FcXVhbCgnWzJdIFNhbWFudGhhIHdobyBpcyA2MCB5ZWFycyBvbGQuJyk7XG4gICAgICAgfSk7XG4gICAgICA8L2ZpbGU+XG4gICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdSZXBlYXREaXJlY3RpdmUgPSBbJyRwYXJzZScsICckYW5pbWF0ZScsICckY29tcGlsZScsIGZ1bmN0aW9uKCRwYXJzZSwgJGFuaW1hdGUsICRjb21waWxlKSB7XG4gIHZhciBOR19SRU1PVkVEID0gJyQkTkdfUkVNT1ZFRCc7XG4gIHZhciBuZ1JlcGVhdE1pbkVyciA9IG1pbkVycignbmdSZXBlYXQnKTtcblxuICB2YXIgdXBkYXRlU2NvcGUgPSBmdW5jdGlvbihzY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgYXJyYXlMZW5ndGgpIHtcbiAgICAvLyBUT0RPKHBlcmYpOiBnZW5lcmF0ZSBzZXR0ZXJzIHRvIHNoYXZlIG9mZiB+NDBtcyBvciAxLTEuNSVcbiAgICBzY29wZVt2YWx1ZUlkZW50aWZpZXJdID0gdmFsdWU7XG4gICAgaWYgKGtleUlkZW50aWZpZXIpIHNjb3BlW2tleUlkZW50aWZpZXJdID0ga2V5O1xuICAgIHNjb3BlLiRpbmRleCA9IGluZGV4O1xuICAgIHNjb3BlLiRmaXJzdCA9IChpbmRleCA9PT0gMCk7XG4gICAgc2NvcGUuJGxhc3QgPSAoaW5kZXggPT09IChhcnJheUxlbmd0aCAtIDEpKTtcbiAgICBzY29wZS4kbWlkZGxlID0gIShzY29wZS4kZmlyc3QgfHwgc2NvcGUuJGxhc3QpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgc2NvcGUuJG9kZCA9ICEoc2NvcGUuJGV2ZW4gPSAoaW5kZXggJiAxKSA9PT0gMCk7XG4gIH07XG5cbiAgdmFyIGdldEJsb2NrU3RhcnQgPSBmdW5jdGlvbihibG9jaykge1xuICAgIHJldHVybiBibG9jay5jbG9uZVswXTtcbiAgfTtcblxuICB2YXIgZ2V0QmxvY2tFbmQgPSBmdW5jdGlvbihibG9jaykge1xuICAgIHJldHVybiBibG9jay5jbG9uZVtibG9jay5jbG9uZS5sZW5ndGggLSAxXTtcbiAgfTtcblxuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICBtdWx0aUVsZW1lbnQ6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogJ2VsZW1lbnQnLFxuICAgIHByaW9yaXR5OiAxMDAwLFxuICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICQkdGxiOiB0cnVlLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uIG5nUmVwZWF0Q29tcGlsZSgkZWxlbWVudCwgJGF0dHIpIHtcbiAgICAgIHZhciBleHByZXNzaW9uID0gJGF0dHIubmdSZXBlYXQ7XG4gICAgICB2YXIgbmdSZXBlYXRFbmRDb21tZW50ID0gJGNvbXBpbGUuJCRjcmVhdGVDb21tZW50KCdlbmQgbmdSZXBlYXQnLCBleHByZXNzaW9uKTtcblxuICAgICAgdmFyIG1hdGNoID0gZXhwcmVzc2lvbi5tYXRjaCgvXlxccyooW1xcc1xcU10rPylcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzKiQvKTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignaWV4cCcsICdFeHBlY3RlZCBleHByZXNzaW9uIGluIGZvcm0gb2YgXFwnX2l0ZW1fIGluIF9jb2xsZWN0aW9uX1sgdHJhY2sgYnkgX2lkX11cXCcgYnV0IGdvdCBcXCd7MH1cXCcuJyxcbiAgICAgICAgICAgIGV4cHJlc3Npb24pO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGhzID0gbWF0Y2hbMV07XG4gICAgICB2YXIgcmhzID0gbWF0Y2hbMl07XG4gICAgICB2YXIgYWxpYXNBcyA9IG1hdGNoWzNdO1xuICAgICAgdmFyIHRyYWNrQnlFeHAgPSBtYXRjaFs0XTtcblxuICAgICAgbWF0Y2ggPSBsaHMubWF0Y2goL14oPzooXFxzKlskXFx3XSspfFxcKFxccyooWyRcXHddKylcXHMqLFxccyooWyRcXHddKylcXHMqXFwpKSQvKTtcblxuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignaWlkZXhwJywgJ1xcJ19pdGVtX1xcJyBpbiBcXCdfaXRlbV8gaW4gX2NvbGxlY3Rpb25fXFwnIHNob3VsZCBiZSBhbiBpZGVudGlmaWVyIG9yIFxcJyhfa2V5XywgX3ZhbHVlXylcXCcgZXhwcmVzc2lvbiwgYnV0IGdvdCBcXCd7MH1cXCcuJyxcbiAgICAgICAgICAgIGxocyk7XG4gICAgICB9XG4gICAgICB2YXIgdmFsdWVJZGVudGlmaWVyID0gbWF0Y2hbM10gfHwgbWF0Y2hbMV07XG4gICAgICB2YXIga2V5SWRlbnRpZmllciA9IG1hdGNoWzJdO1xuXG4gICAgICBpZiAoYWxpYXNBcyAmJiAoIS9eWyRhLXpBLVpfXVskYS16QS1aMC05X10qJC8udGVzdChhbGlhc0FzKSB8fFxuICAgICAgICAgIC9eKG51bGx8dW5kZWZpbmVkfHRoaXN8XFwkaW5kZXh8XFwkZmlyc3R8XFwkbWlkZGxlfFxcJGxhc3R8XFwkZXZlbnxcXCRvZGR8XFwkcGFyZW50fFxcJHJvb3R8XFwkaWQpJC8udGVzdChhbGlhc0FzKSkpIHtcbiAgICAgICAgdGhyb3cgbmdSZXBlYXRNaW5FcnIoJ2JhZGlkZW50JywgJ2FsaWFzIFxcJ3swfVxcJyBpcyBpbnZhbGlkIC0tLSBtdXN0IGJlIGEgdmFsaWQgSlMgaWRlbnRpZmllciB3aGljaCBpcyBub3QgYSByZXNlcnZlZCBuYW1lLicsXG4gICAgICAgICAgYWxpYXNBcyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0cmFja0J5RXhwR2V0dGVyLCB0cmFja0J5SWRFeHBGbiwgdHJhY2tCeUlkQXJyYXlGbiwgdHJhY2tCeUlkT2JqRm47XG4gICAgICB2YXIgaGFzaEZuTG9jYWxzID0geyRpZDogaGFzaEtleX07XG5cbiAgICAgIGlmICh0cmFja0J5RXhwKSB7XG4gICAgICAgIHRyYWNrQnlFeHBHZXR0ZXIgPSAkcGFyc2UodHJhY2tCeUV4cCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFja0J5SWRBcnJheUZuID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBoYXNoS2V5KHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHJhY2tCeUlkT2JqRm4gPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gbmdSZXBlYXRMaW5rKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyLCBjdHJsLCAkdHJhbnNjbHVkZSkge1xuXG4gICAgICAgIGlmICh0cmFja0J5RXhwR2V0dGVyKSB7XG4gICAgICAgICAgdHJhY2tCeUlkRXhwRm4gPSBmdW5jdGlvbihrZXksIHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgLy8gYXNzaWduIGtleSwgdmFsdWUsIGFuZCAkaW5kZXggdG8gdGhlIGxvY2FscyBzbyB0aGF0IHRoZXkgY2FuIGJlIHVzZWQgaW4gaGFzaCBmdW5jdGlvbnNcbiAgICAgICAgICAgIGlmIChrZXlJZGVudGlmaWVyKSBoYXNoRm5Mb2NhbHNba2V5SWRlbnRpZmllcl0gPSBrZXk7XG4gICAgICAgICAgICBoYXNoRm5Mb2NhbHNbdmFsdWVJZGVudGlmaWVyXSA9IHZhbHVlO1xuICAgICAgICAgICAgaGFzaEZuTG9jYWxzLiRpbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgcmV0dXJuIHRyYWNrQnlFeHBHZXR0ZXIoJHNjb3BlLCBoYXNoRm5Mb2NhbHMpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdG9yZSBhIGxpc3Qgb2YgZWxlbWVudHMgZnJvbSBwcmV2aW91cyBydW4uIFRoaXMgaXMgYSBoYXNoIHdoZXJlIGtleSBpcyB0aGUgaXRlbSBmcm9tIHRoZVxuICAgICAgICAvLyBpdGVyYXRvciwgYW5kIHRoZSB2YWx1ZSBpcyBvYmplY3RzIHdpdGggZm9sbG93aW5nIHByb3BlcnRpZXMuXG4gICAgICAgIC8vICAgLSBzY29wZTogYm91bmQgc2NvcGVcbiAgICAgICAgLy8gICAtIGNsb25lOiBwcmV2aW91cyBlbGVtZW50LlxuICAgICAgICAvLyAgIC0gaW5kZXg6IHBvc2l0aW9uXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFdlIGFyZSB1c2luZyBuby1wcm90byBvYmplY3Qgc28gdGhhdCB3ZSBkb24ndCBuZWVkIHRvIGd1YXJkIGFnYWluc3QgaW5oZXJpdGVkIHByb3BzIHZpYVxuICAgICAgICAvLyBoYXNPd25Qcm9wZXJ0eS5cbiAgICAgICAgdmFyIGxhc3RCbG9ja01hcCA9IGNyZWF0ZU1hcCgpO1xuXG4gICAgICAgIC8vd2F0Y2ggcHJvcHNcbiAgICAgICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24ocmhzLCBmdW5jdGlvbiBuZ1JlcGVhdEFjdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgdmFyIGluZGV4LCBsZW5ndGgsXG4gICAgICAgICAgICAgIHByZXZpb3VzTm9kZSA9ICRlbGVtZW50WzBdLCAgICAgLy8gbm9kZSB0aGF0IGNsb25lZCBub2RlcyBzaG91bGQgYmUgaW5zZXJ0ZWQgYWZ0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplZCB0byB0aGUgY29tbWVudCBub2RlIGFuY2hvclxuICAgICAgICAgICAgICBuZXh0Tm9kZSxcbiAgICAgICAgICAgICAgLy8gU2FtZSBhcyBsYXN0QmxvY2tNYXAgYnV0IGl0IGhhcyB0aGUgY3VycmVudCBzdGF0ZS4gSXQgd2lsbCBiZWNvbWUgdGhlXG4gICAgICAgICAgICAgIC8vIGxhc3RCbG9ja01hcCBvbiB0aGUgbmV4dCBpdGVyYXRpb24uXG4gICAgICAgICAgICAgIG5leHRCbG9ja01hcCA9IGNyZWF0ZU1hcCgpLFxuICAgICAgICAgICAgICBjb2xsZWN0aW9uTGVuZ3RoLFxuICAgICAgICAgICAgICBrZXksIHZhbHVlLCAvLyBrZXkvdmFsdWUgb2YgaXRlcmF0aW9uXG4gICAgICAgICAgICAgIHRyYWNrQnlJZCxcbiAgICAgICAgICAgICAgdHJhY2tCeUlkRm4sXG4gICAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzLFxuICAgICAgICAgICAgICBibG9jaywgICAgICAgLy8gbGFzdCBvYmplY3QgaW5mb3JtYXRpb24ge3Njb3BlLCBlbGVtZW50LCBpZH1cbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXIsXG4gICAgICAgICAgICAgIGVsZW1lbnRzVG9SZW1vdmU7XG5cbiAgICAgICAgICBpZiAoYWxpYXNBcykge1xuICAgICAgICAgICAgJHNjb3BlW2FsaWFzQXNdID0gY29sbGVjdGlvbjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNBcnJheUxpa2UoY29sbGVjdGlvbikpIHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzID0gY29sbGVjdGlvbjtcbiAgICAgICAgICAgIHRyYWNrQnlJZEZuID0gdHJhY2tCeUlkRXhwRm4gfHwgdHJhY2tCeUlkQXJyYXlGbjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdHJhY2tCeUlkRm4gPSB0cmFja0J5SWRFeHBGbiB8fCB0cmFja0J5SWRPYmpGbjtcbiAgICAgICAgICAgIC8vIGlmIG9iamVjdCwgZXh0cmFjdCBrZXlzLCBpbiBlbnVtZXJhdGlvbiBvcmRlciwgdW5zb3J0ZWRcbiAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtS2V5IGluIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29sbGVjdGlvbiwgaXRlbUtleSkgJiYgaXRlbUtleS5jaGFyQXQoMCkgIT09ICckJykge1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25LZXlzLnB1c2goaXRlbUtleSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb2xsZWN0aW9uTGVuZ3RoID0gY29sbGVjdGlvbktleXMubGVuZ3RoO1xuICAgICAgICAgIG5leHRCbG9ja09yZGVyID0gbmV3IEFycmF5KGNvbGxlY3Rpb25MZW5ndGgpO1xuXG4gICAgICAgICAgLy8gbG9jYXRlIGV4aXN0aW5nIGl0ZW1zXG4gICAgICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgY29sbGVjdGlvbkxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAga2V5ID0gKGNvbGxlY3Rpb24gPT09IGNvbGxlY3Rpb25LZXlzKSA/IGluZGV4IDogY29sbGVjdGlvbktleXNbaW5kZXhdO1xuICAgICAgICAgICAgdmFsdWUgPSBjb2xsZWN0aW9uW2tleV07XG4gICAgICAgICAgICB0cmFja0J5SWQgPSB0cmFja0J5SWRGbihrZXksIHZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICBpZiAobGFzdEJsb2NrTWFwW3RyYWNrQnlJZF0pIHtcbiAgICAgICAgICAgICAgLy8gZm91bmQgcHJldmlvdXNseSBzZWVuIGJsb2NrXG4gICAgICAgICAgICAgIGJsb2NrID0gbGFzdEJsb2NrTWFwW3RyYWNrQnlJZF07XG4gICAgICAgICAgICAgIGRlbGV0ZSBsYXN0QmxvY2tNYXBbdHJhY2tCeUlkXTtcbiAgICAgICAgICAgICAgbmV4dEJsb2NrTWFwW3RyYWNrQnlJZF0gPSBibG9jaztcbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXJbaW5kZXhdID0gYmxvY2s7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5leHRCbG9ja01hcFt0cmFja0J5SWRdKSB7XG4gICAgICAgICAgICAgIC8vIGlmIGNvbGxpc2lvbiBkZXRlY3RlZC4gcmVzdG9yZSBsYXN0QmxvY2tNYXAgYW5kIHRocm93IGFuIGVycm9yXG4gICAgICAgICAgICAgIGZvckVhY2gobmV4dEJsb2NrT3JkZXIsIGZ1bmN0aW9uKGJsb2NrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrICYmIGJsb2NrLnNjb3BlKSBsYXN0QmxvY2tNYXBbYmxvY2suaWRdID0gYmxvY2s7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB0aHJvdyBuZ1JlcGVhdE1pbkVycignZHVwZXMnLFxuICAgICAgICAgICAgICAgICAgJ0R1cGxpY2F0ZXMgaW4gYSByZXBlYXRlciBhcmUgbm90IGFsbG93ZWQuIFVzZSBcXCd0cmFjayBieVxcJyBleHByZXNzaW9uIHRvIHNwZWNpZnkgdW5pcXVlIGtleXMuIFJlcGVhdGVyOiB7MH0sIER1cGxpY2F0ZSBrZXk6IHsxfSwgRHVwbGljYXRlIHZhbHVlOiB7Mn0nLFxuICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbiwgdHJhY2tCeUlkLCB2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBuZXcgbmV2ZXIgYmVmb3JlIHNlZW4gYmxvY2tcbiAgICAgICAgICAgICAgbmV4dEJsb2NrT3JkZXJbaW5kZXhdID0ge2lkOiB0cmFja0J5SWQsIHNjb3BlOiB1bmRlZmluZWQsIGNsb25lOiB1bmRlZmluZWR9O1xuICAgICAgICAgICAgICBuZXh0QmxvY2tNYXBbdHJhY2tCeUlkXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmVtb3ZlIGxlZnRvdmVyIGl0ZW1zXG4gICAgICAgICAgZm9yICh2YXIgYmxvY2tLZXkgaW4gbGFzdEJsb2NrTWFwKSB7XG4gICAgICAgICAgICBibG9jayA9IGxhc3RCbG9ja01hcFtibG9ja0tleV07XG4gICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlID0gZ2V0QmxvY2tOb2RlcyhibG9jay5jbG9uZSk7XG4gICAgICAgICAgICAkYW5pbWF0ZS5sZWF2ZShlbGVtZW50c1RvUmVtb3ZlKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50c1RvUmVtb3ZlWzBdLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIGVsZW1lbnQgd2FzIG5vdCByZW1vdmVkIHlldCBiZWNhdXNlIG9mIHBlbmRpbmcgYW5pbWF0aW9uLCBtYXJrIGl0IGFzIGRlbGV0ZWRcbiAgICAgICAgICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gaWdub3JlIGl0IGxhdGVyXG4gICAgICAgICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBlbGVtZW50c1RvUmVtb3ZlLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1RvUmVtb3ZlW2luZGV4XVtOR19SRU1PVkVEXSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJsb2NrLnNjb3BlLiRkZXN0cm95KCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gd2UgYXJlIG5vdCB1c2luZyBmb3JFYWNoIGZvciBwZXJmIHJlYXNvbnMgKHRyeWluZyB0byBhdm9pZCAjY2FsbClcbiAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBjb2xsZWN0aW9uTGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBrZXkgPSAoY29sbGVjdGlvbiA9PT0gY29sbGVjdGlvbktleXMpID8gaW5kZXggOiBjb2xsZWN0aW9uS2V5c1tpbmRleF07XG4gICAgICAgICAgICB2YWx1ZSA9IGNvbGxlY3Rpb25ba2V5XTtcbiAgICAgICAgICAgIGJsb2NrID0gbmV4dEJsb2NrT3JkZXJbaW5kZXhdO1xuXG4gICAgICAgICAgICBpZiAoYmxvY2suc2NvcGUpIHtcbiAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhbHJlYWR5IHNlZW4gdGhpcyBvYmplY3QsIHRoZW4gd2UgbmVlZCB0byByZXVzZSB0aGVcbiAgICAgICAgICAgICAgLy8gYXNzb2NpYXRlZCBzY29wZS9lbGVtZW50XG5cbiAgICAgICAgICAgICAgbmV4dE5vZGUgPSBwcmV2aW91c05vZGU7XG5cbiAgICAgICAgICAgICAgLy8gc2tpcCBub2RlcyB0aGF0IGFyZSBhbHJlYWR5IHBlbmRpbmcgcmVtb3ZhbCB2aWEgbGVhdmUgYW5pbWF0aW9uXG4gICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5leHROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICB9IHdoaWxlIChuZXh0Tm9kZSAmJiBuZXh0Tm9kZVtOR19SRU1PVkVEXSk7XG5cbiAgICAgICAgICAgICAgaWYgKGdldEJsb2NrU3RhcnQoYmxvY2spICE9PSBuZXh0Tm9kZSkge1xuICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGl0ZW0gd2hpY2ggZ290IG1vdmVkXG4gICAgICAgICAgICAgICAgJGFuaW1hdGUubW92ZShnZXRCbG9ja05vZGVzKGJsb2NrLmNsb25lKSwgbnVsbCwgcHJldmlvdXNOb2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwcmV2aW91c05vZGUgPSBnZXRCbG9ja0VuZChibG9jayk7XG4gICAgICAgICAgICAgIHVwZGF0ZVNjb3BlKGJsb2NrLnNjb3BlLCBpbmRleCwgdmFsdWVJZGVudGlmaWVyLCB2YWx1ZSwga2V5SWRlbnRpZmllciwga2V5LCBjb2xsZWN0aW9uTGVuZ3RoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIG5ldyBpdGVtIHdoaWNoIHdlIGRvbid0IGtub3cgYWJvdXRcbiAgICAgICAgICAgICAgJHRyYW5zY2x1ZGUoZnVuY3Rpb24gbmdSZXBlYXRUcmFuc2NsdWRlKGNsb25lLCBzY29wZSkge1xuICAgICAgICAgICAgICAgIGJsb2NrLnNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgICAgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvbmUtdnMtY3JlYXRlY29tbWVudFxuICAgICAgICAgICAgICAgIHZhciBlbmROb2RlID0gbmdSZXBlYXRFbmRDb21tZW50LmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgY2xvbmVbY2xvbmUubGVuZ3RoKytdID0gZW5kTm9kZTtcblxuICAgICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGNsb25lLCBudWxsLCBwcmV2aW91c05vZGUpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzTm9kZSA9IGVuZE5vZGU7XG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2Ugb25seSBuZWVkIHRoZSBmaXJzdC9sYXN0IG5vZGUgb2YgdGhlIGNsb25lZCBub2Rlcy5cbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB3ZSBuZWVkIHRvIGtlZXAgdGhlIHJlZmVyZW5jZSB0byB0aGUganFsaXRlIHdyYXBwZXIgYXMgaXQgbWlnaHQgYmUgY2hhbmdlZCBsYXRlclxuICAgICAgICAgICAgICAgIC8vIGJ5IGEgZGlyZWN0aXZlIHdpdGggdGVtcGxhdGVVcmwgd2hlbiBpdHMgdGVtcGxhdGUgYXJyaXZlcy5cbiAgICAgICAgICAgICAgICBibG9jay5jbG9uZSA9IGNsb25lO1xuICAgICAgICAgICAgICAgIG5leHRCbG9ja01hcFtibG9jay5pZF0gPSBibG9jaztcbiAgICAgICAgICAgICAgICB1cGRhdGVTY29wZShibG9jay5zY29wZSwgaW5kZXgsIHZhbHVlSWRlbnRpZmllciwgdmFsdWUsIGtleUlkZW50aWZpZXIsIGtleSwgY29sbGVjdGlvbkxlbmd0aCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBsYXN0QmxvY2tNYXAgPSBuZXh0QmxvY2tNYXA7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxudmFyIE5HX0hJREVfQ0xBU1MgPSAnbmctaGlkZSc7XG52YXIgTkdfSElERV9JTl9QUk9HUkVTU19DTEFTUyA9ICduZy1oaWRlLWFuaW1hdGUnO1xuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1Nob3dcbiAqIEBtdWx0aUVsZW1lbnRcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdTaG93YCBkaXJlY3RpdmUgc2hvd3Mgb3IgaGlkZXMgdGhlIGdpdmVuIEhUTUwgZWxlbWVudCBiYXNlZCBvbiB0aGUgZXhwcmVzc2lvbiBwcm92aWRlZCB0b1xuICogdGhlIGBuZ1Nob3dgIGF0dHJpYnV0ZS5cbiAqXG4gKiBUaGUgZWxlbWVudCBpcyBzaG93biBvciBoaWRkZW4gYnkgcmVtb3Zpbmcgb3IgYWRkaW5nIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBvbnRvIHRoZSBlbGVtZW50LlxuICogVGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIGlzIHByZWRlZmluZWQgaW4gQW5ndWxhckpTIGFuZCBzZXRzIHRoZSBkaXNwbGF5IHN0eWxlIHRvIG5vbmUgKHVzaW5nIGFuXG4gKiBgIWltcG9ydGFudGAgZmxhZykuIEZvciBDU1AgbW9kZSBwbGVhc2UgYWRkIGBhbmd1bGFyLWNzcC5jc3NgIHRvIHlvdXIgSFRNTCBmaWxlIChzZWVcbiAqIHtAbGluayBuZy5kaXJlY3RpdmU6bmdDc3AgbmdDc3B9KS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgdHJ1dGh5IChlbGVtZW50IGlzIHZpc2libGUpIC0tPlxuICogPGRpdiBuZy1zaG93PVwibXlWYWx1ZVwiPjwvZGl2PlxuICpcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyBmYWxzeSAoZWxlbWVudCBpcyBoaWRkZW4pIC0tPlxuICogPGRpdiBuZy1zaG93PVwibXlWYWx1ZVwiIGNsYXNzPVwibmctaGlkZVwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogV2hlbiB0aGUgYG5nU2hvd2AgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBmYWxzeSB2YWx1ZSB0aGVuIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyBhZGRlZFxuICogdG8gdGhlIGNsYXNzIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gdHJ1dGh5LCB0aGUgYC5uZy1oaWRlYFxuICogQ1NTIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSB0aGUgZWxlbWVudCBjYXVzaW5nIHRoZSBlbGVtZW50IG5vdCB0byBhcHBlYXIgaGlkZGVuLlxuICpcbiAqICMjIFdoeSBpcyBgIWltcG9ydGFudGAgdXNlZD9cbiAqXG4gKiBZb3UgbWF5IGJlIHdvbmRlcmluZyB3aHkgYCFpbXBvcnRhbnRgIGlzIHVzZWQgZm9yIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcy4gVGhpcyBpcyBiZWNhdXNlIHRoZVxuICogYC5uZy1oaWRlYCBzZWxlY3RvciBjYW4gYmUgZWFzaWx5IG92ZXJyaWRkZW4gYnkgaGVhdmllciBzZWxlY3RvcnMuIEZvciBleGFtcGxlLCBzb21ldGhpbmcgYXNcbiAqIHNpbXBsZSBhcyBjaGFuZ2luZyB0aGUgZGlzcGxheSBzdHlsZSBvbiBhIEhUTUwgbGlzdCBpdGVtIHdvdWxkIG1ha2UgaGlkZGVuIGVsZW1lbnRzIGFwcGVhclxuICogdmlzaWJsZS4gVGhpcyBhbHNvIGJlY29tZXMgYSBiaWdnZXIgaXNzdWUgd2hlbiBkZWFsaW5nIHdpdGggQ1NTIGZyYW1ld29ya3MuXG4gKlxuICogQnkgdXNpbmcgYCFpbXBvcnRhbnRgLCB0aGUgc2hvdyBhbmQgaGlkZSBiZWhhdmlvciB3aWxsIHdvcmsgYXMgZXhwZWN0ZWQgZGVzcGl0ZSBhbnkgY2xhc2ggYmV0d2VlblxuICogQ1NTIHNlbGVjdG9yIHNwZWNpZmljaXR5ICh3aGVuIGAhaW1wb3J0YW50YCBpc24ndCB1c2VkIHdpdGggYW55IGNvbmZsaWN0aW5nIHN0eWxlcykuIElmIGFcbiAqIGRldmVsb3BlciBjaG9vc2VzIHRvIG92ZXJyaWRlIHRoZSBzdHlsaW5nIHRvIGNoYW5nZSBob3cgdG8gaGlkZSBhbiBlbGVtZW50IHRoZW4gaXQgaXMganVzdCBhXG4gKiBtYXR0ZXIgb2YgdXNpbmcgYCFpbXBvcnRhbnRgIGluIHRoZWlyIG93biBDU1MgY29kZS5cbiAqXG4gKiAjIyMgT3ZlcnJpZGluZyBgLm5nLWhpZGVgXG4gKlxuICogQnkgZGVmYXVsdCwgdGhlIGAubmctaGlkZWAgY2xhc3Mgd2lsbCBzdHlsZSB0aGUgZWxlbWVudCB3aXRoIGBkaXNwbGF5OiBub25lICFpbXBvcnRhbnRgLiBJZiB5b3VcbiAqIHdpc2ggdG8gY2hhbmdlIHRoZSBoaWRlIGJlaGF2aW9yIHdpdGggYG5nU2hvd2AvYG5nSGlkZWAsIHlvdSBjYW4gc2ltcGx5IG92ZXJ3cml0ZSB0aGUgc3R5bGVzIGZvclxuICogdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBOb3RlIHRoYXQgdGhlIHNlbGVjdG9yIHRoYXQgbmVlZHMgdG8gYmUgdXNlZCBpcyBhY3R1YWxseVxuICogYC5uZy1oaWRlOm5vdCgubmctaGlkZS1hbmltYXRlKWAgdG8gY29wZSB3aXRoIGV4dHJhIGFuaW1hdGlvbiBjbGFzc2VzIHRoYXQgY2FuIGJlIGFkZGVkLlxuICpcbiAqIGBgYGNzc1xuICogLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpIHtcbiAqICAgLyYjNDI7IFRoZXNlIGFyZSBqdXN0IGFsdGVybmF0aXZlIHdheXMgb2YgaGlkaW5nIGFuIGVsZW1lbnQgJiM0MjsvXG4gKiAgIGRpc3BsYXk6IGJsb2NrIWltcG9ydGFudDtcbiAqICAgcG9zaXRpb246IGFic29sdXRlO1xuICogICB0b3A6IC05OTk5cHg7XG4gKiAgIGxlZnQ6IC05OTk5cHg7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBCeSBkZWZhdWx0IHlvdSBkb24ndCBuZWVkIHRvIG92ZXJyaWRlIGFueXRoaW5nIGluIENTUyBhbmQgdGhlIGFuaW1hdGlvbnMgd2lsbCB3b3JrIGFyb3VuZCB0aGVcbiAqIGRpc3BsYXkgc3R5bGUuXG4gKlxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgT2NjdXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgJGFuaW1hdGUjYWRkQ2xhc3MgYWRkQ2xhc3N9IGAubmctaGlkZWAgICAgICAgfCBBZnRlciB0aGUgYG5nU2hvd2AgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBub24gdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSB0aGUgY29udGVudHMgYXJlIHNldCB0byBoaWRkZW4uIHxcbiAqIHwge0BsaW5rICRhbmltYXRlI3JlbW92ZUNsYXNzIHJlbW92ZUNsYXNzfSBgLm5nLWhpZGVgIHwgQWZ0ZXIgdGhlIGBuZ1Nob3dgIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSBjb250ZW50cyBhcmUgc2V0IHRvIHZpc2libGUuICAgICAgICB8XG4gKlxuICogQW5pbWF0aW9ucyBpbiBgbmdTaG93YC9gbmdIaWRlYCB3b3JrIHdpdGggdGhlIHNob3cgYW5kIGhpZGUgZXZlbnRzIHRoYXQgYXJlIHRyaWdnZXJlZCB3aGVuIHRoZVxuICogZGlyZWN0aXZlIGV4cHJlc3Npb24gaXMgdHJ1ZSBhbmQgZmFsc2UuIFRoaXMgc3lzdGVtIHdvcmtzIGxpa2UgdGhlIGFuaW1hdGlvbiBzeXN0ZW0gcHJlc2VudCB3aXRoXG4gKiBgbmdDbGFzc2AgZXhjZXB0IHRoYXQgeW91IG11c3QgYWxzbyBpbmNsdWRlIHRoZSBgIWltcG9ydGFudGAgZmxhZyB0byBvdmVycmlkZSB0aGUgZGlzcGxheVxuICogcHJvcGVydHkgc28gdGhhdCB0aGUgZWxlbWVudHMgYXJlIG5vdCBhY3R1YWxseSBoaWRkZW4gZHVyaW5nIHRoZSBhbmltYXRpb24uXG4gKlxuICogYGBgY3NzXG4gKiAvJiM0MjsgQSB3b3JraW5nIGV4YW1wbGUgY2FuIGJlIGZvdW5kIGF0IHRoZSBib3R0b20gb2YgdGhpcyBwYWdlLiAmIzQyOy9cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLCAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7XG4gKiAgIHRyYW5zaXRpb246IGFsbCAwLjVzIGxpbmVhcjtcbiAqIH1cbiAqXG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZCB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUgeyAuLi4gfVxuICogLm15LWVsZW1lbnQubmctaGlkZS1yZW1vdmUubmctaGlkZS1yZW1vdmUtYWN0aXZlIHsgLi4uIH1cbiAqIGBgYFxuICpcbiAqIEtlZXAgaW4gbWluZCB0aGF0LCBhcyBvZiBBbmd1bGFySlMgdmVyc2lvbiAxLjMsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2hhbmdlIHRoZSBkaXNwbGF5IHByb3BlcnR5XG4gKiB0byBibG9jayBkdXJpbmcgYW5pbWF0aW9uIHN0YXRlcyAtIG5nQW5pbWF0ZSB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBzdHlsZSB0b2dnbGluZyBmb3IgeW91LlxuICpcbiAqIEBlbGVtZW50IEFOWVxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ1Nob3cgSWYgdGhlIHtAbGluayBndWlkZS9leHByZXNzaW9uIGV4cHJlc3Npb259IGlzIHRydXRoeS9mYWxzeSB0aGVuIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCBpcyBzaG93bi9oaWRkZW4gcmVzcGVjdGl2ZWx5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBBIHNpbXBsZSBleGFtcGxlLCBhbmltYXRpbmcgdGhlIGVsZW1lbnQncyBvcGFjaXR5OlxuICpcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLXNob3ctc2ltcGxlXCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIFNob3c6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIG5nU2hvd1wiPjxiciAvPlxuICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgYW5pbWF0ZS1zaG93LWhpZGVcIiBuZy1zaG93PVwiY2hlY2tlZFwiPlxuICAgICAgICBJIHNob3cgdXAgd2hlbiB5b3VyIGNoZWNrYm94IGlzIGNoZWNrZWQuXG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cImFuaW1hdGlvbnMuY3NzXCI+XG4gICAgICAuYW5pbWF0ZS1zaG93LWhpZGUubmctaGlkZSB7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlLWFkZCxcbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlLXJlbW92ZSB7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCBsaW5lYXIgMC41cztcbiAgICAgIH1cblxuICAgICAgLmNoZWNrLWVsZW1lbnQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZ1Nob3cnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoZWNrYm94ID0gZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKTtcbiAgICAgICAgdmFyIGNoZWNrRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCcuY2hlY2stZWxlbWVudCcpKTtcblxuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICBjaGVja2JveC5jbGljaygpO1xuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqXG4gKiA8aHIgLz5cbiAqIEBleGFtcGxlXG4gKiBBIG1vcmUgY29tcGxleCBleGFtcGxlLCBmZWF0dXJpbmcgZGlmZmVyZW50IHNob3cvaGlkZSBhbmltYXRpb25zOlxuICpcbiAgPGV4YW1wbGUgbW9kdWxlPVwibmdBbmltYXRlXCIgZGVwcz1cImFuZ3VsYXItYW5pbWF0ZS5qc1wiIGFuaW1hdGlvbnM9XCJ0cnVlXCIgbmFtZT1cIm5nLXNob3ctY29tcGxleFwiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICBTaG93OiA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJjaGVja2VkXCIgYXJpYS1sYWJlbD1cIlRvZ2dsZSBuZ1Nob3dcIj48YnIgLz5cbiAgICAgIDxkaXYgY2xhc3M9XCJjaGVjay1lbGVtZW50IGZ1bmt5LXNob3ctaGlkZVwiIG5nLXNob3c9XCJjaGVja2VkXCI+XG4gICAgICAgIEkgc2hvdyB1cCB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIGJvZHkge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBwZXJzcGVjdGl2ZTogMTAwMHB4O1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtYWRkIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVaKDApO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZS1pbi1vdXQ7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1hZGQubmctaGlkZS1hZGQtYWN0aXZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVaKC0xMzVkZWcpO1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGVZKDkwZGVnKTtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVkoMCk7XG4gICAgICB9XG5cbiAgICAgIC5jaGVjay1lbGVtZW50IHtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmdTaG93JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGVja2JveCA9IGVsZW1lbnQoYnkubW9kZWwoJ2NoZWNrZWQnKSk7XG4gICAgICAgIHZhciBjaGVja0VsZW0gPSBlbGVtZW50KGJ5LmNzcygnLmNoZWNrLWVsZW1lbnQnKSk7XG5cbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgICAgY2hlY2tib3guY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1Nob3dEaXJlY3RpdmUgPSBbJyRhbmltYXRlJywgZnVuY3Rpb24oJGFuaW1hdGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIG11bHRpRWxlbWVudDogdHJ1ZSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgc2NvcGUuJHdhdGNoKGF0dHIubmdTaG93LCBmdW5jdGlvbiBuZ1Nob3dXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICAvLyB3ZSdyZSBhZGRpbmcgYSB0ZW1wb3JhcnksIGFuaW1hdGlvbi1zcGVjaWZpYyBjbGFzcyBmb3IgbmctaGlkZSBzaW5jZSB0aGlzIHdheVxuICAgICAgICAvLyB3ZSBjYW4gY29udHJvbCB3aGVuIHRoZSBlbGVtZW50IGlzIGFjdHVhbGx5IGRpc3BsYXllZCBvbiBzY3JlZW4gd2l0aG91dCBoYXZpbmdcbiAgICAgICAgLy8gdG8gaGF2ZSBhIGdsb2JhbC9ncmVlZHkgQ1NTIHNlbGVjdG9yIHRoYXQgYnJlYWtzIHdoZW4gb3RoZXIgYW5pbWF0aW9ucyBhcmUgcnVuLlxuICAgICAgICAvLyBSZWFkOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy85MTAzI2lzc3VlY29tbWVudC01ODMzNTg0NVxuICAgICAgICAkYW5pbWF0ZVt2YWx1ZSA/ICdyZW1vdmVDbGFzcycgOiAnYWRkQ2xhc3MnXShlbGVtZW50LCBOR19ISURFX0NMQVNTLCB7XG4gICAgICAgICAgdGVtcENsYXNzZXM6IE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1NcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nSGlkZVxuICogQG11bHRpRWxlbWVudFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhlIGBuZ0hpZGVgIGRpcmVjdGl2ZSBzaG93cyBvciBoaWRlcyB0aGUgZ2l2ZW4gSFRNTCBlbGVtZW50IGJhc2VkIG9uIHRoZSBleHByZXNzaW9uIHByb3ZpZGVkIHRvXG4gKiB0aGUgYG5nSGlkZWAgYXR0cmlidXRlLlxuICpcbiAqIFRoZSBlbGVtZW50IGlzIHNob3duIG9yIGhpZGRlbiBieSByZW1vdmluZyBvciBhZGRpbmcgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzIG9udG8gdGhlIGVsZW1lbnQuXG4gKiBUaGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MgaXMgcHJlZGVmaW5lZCBpbiBBbmd1bGFySlMgYW5kIHNldHMgdGhlIGRpc3BsYXkgc3R5bGUgdG8gbm9uZSAodXNpbmcgYW5cbiAqIGAhaW1wb3J0YW50YCBmbGFnKS4gRm9yIENTUCBtb2RlIHBsZWFzZSBhZGQgYGFuZ3VsYXItY3NwLmNzc2AgdG8geW91ciBIVE1MIGZpbGUgKHNlZVxuICoge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ0NzcCBuZ0NzcH0pLlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhLS0gd2hlbiAkc2NvcGUubXlWYWx1ZSBpcyB0cnV0aHkgKGVsZW1lbnQgaXMgaGlkZGVuKSAtLT5cbiAqIDxkaXYgbmctaGlkZT1cIm15VmFsdWVcIiBjbGFzcz1cIm5nLWhpZGVcIj48L2Rpdj5cbiAqXG4gKiA8IS0tIHdoZW4gJHNjb3BlLm15VmFsdWUgaXMgZmFsc3kgKGVsZW1lbnQgaXMgdmlzaWJsZSkgLS0+XG4gKiA8ZGl2IG5nLWhpZGU9XCJteVZhbHVlXCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoZSBgbmdIaWRlYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSB0aGVuIHRoZSBgLm5nLWhpZGVgIENTUyBjbGFzcyBpcyBhZGRlZFxuICogdG8gdGhlIGNsYXNzIGF0dHJpYnV0ZSBvbiB0aGUgZWxlbWVudCBjYXVzaW5nIGl0IHRvIGJlY29tZSBoaWRkZW4uIFdoZW4gZmFsc3ksIHRoZSBgLm5nLWhpZGVgXG4gKiBDU1MgY2xhc3MgaXMgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50IGNhdXNpbmcgdGhlIGVsZW1lbnQgbm90IHRvIGFwcGVhciBoaWRkZW4uXG4gKlxuICogIyMgV2h5IGlzIGAhaW1wb3J0YW50YCB1c2VkP1xuICpcbiAqIFlvdSBtYXkgYmUgd29uZGVyaW5nIHdoeSBgIWltcG9ydGFudGAgaXMgdXNlZCBmb3IgdGhlIGAubmctaGlkZWAgQ1NTIGNsYXNzLiBUaGlzIGlzIGJlY2F1c2UgdGhlXG4gKiBgLm5nLWhpZGVgIHNlbGVjdG9yIGNhbiBiZSBlYXNpbHkgb3ZlcnJpZGRlbiBieSBoZWF2aWVyIHNlbGVjdG9ycy4gRm9yIGV4YW1wbGUsIHNvbWV0aGluZyBhc1xuICogc2ltcGxlIGFzIGNoYW5naW5nIHRoZSBkaXNwbGF5IHN0eWxlIG9uIGEgSFRNTCBsaXN0IGl0ZW0gd291bGQgbWFrZSBoaWRkZW4gZWxlbWVudHMgYXBwZWFyXG4gKiB2aXNpYmxlLiBUaGlzIGFsc28gYmVjb21lcyBhIGJpZ2dlciBpc3N1ZSB3aGVuIGRlYWxpbmcgd2l0aCBDU1MgZnJhbWV3b3Jrcy5cbiAqXG4gKiBCeSB1c2luZyBgIWltcG9ydGFudGAsIHRoZSBzaG93IGFuZCBoaWRlIGJlaGF2aW9yIHdpbGwgd29yayBhcyBleHBlY3RlZCBkZXNwaXRlIGFueSBjbGFzaCBiZXR3ZWVuXG4gKiBDU1Mgc2VsZWN0b3Igc3BlY2lmaWNpdHkgKHdoZW4gYCFpbXBvcnRhbnRgIGlzbid0IHVzZWQgd2l0aCBhbnkgY29uZmxpY3Rpbmcgc3R5bGVzKS4gSWYgYVxuICogZGV2ZWxvcGVyIGNob29zZXMgdG8gb3ZlcnJpZGUgdGhlIHN0eWxpbmcgdG8gY2hhbmdlIGhvdyB0byBoaWRlIGFuIGVsZW1lbnQgdGhlbiBpdCBpcyBqdXN0IGFcbiAqIG1hdHRlciBvZiB1c2luZyBgIWltcG9ydGFudGAgaW4gdGhlaXIgb3duIENTUyBjb2RlLlxuICpcbiAqICMjIyBPdmVycmlkaW5nIGAubmctaGlkZWBcbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGUgYC5uZy1oaWRlYCBjbGFzcyB3aWxsIHN0eWxlIHRoZSBlbGVtZW50IHdpdGggYGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudGAuIElmIHlvdVxuICogd2lzaCB0byBjaGFuZ2UgdGhlIGhpZGUgYmVoYXZpb3Igd2l0aCBgbmdTaG93YC9gbmdIaWRlYCwgeW91IGNhbiBzaW1wbHkgb3ZlcndyaXRlIHRoZSBzdHlsZXMgZm9yXG4gKiB0aGUgYC5uZy1oaWRlYCBDU1MgY2xhc3MuIE5vdGUgdGhhdCB0aGUgc2VsZWN0b3IgdGhhdCBuZWVkcyB0byBiZSB1c2VkIGlzIGFjdHVhbGx5XG4gKiBgLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpYCB0byBjb3BlIHdpdGggZXh0cmEgYW5pbWF0aW9uIGNsYXNzZXMgdGhhdCBjYW4gYmUgYWRkZWQuXG4gKlxuICogYGBgY3NzXG4gKiAubmctaGlkZTpub3QoLm5nLWhpZGUtYW5pbWF0ZSkge1xuICogICAvJiM0MjsgVGhlc2UgYXJlIGp1c3QgYWx0ZXJuYXRpdmUgd2F5cyBvZiBoaWRpbmcgYW4gZWxlbWVudCAmIzQyOy9cbiAqICAgZGlzcGxheTogYmxvY2shaW1wb3J0YW50O1xuICogICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gKiAgIHRvcDogLTk5OTlweDtcbiAqICAgbGVmdDogLTk5OTlweDtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEJ5IGRlZmF1bHQgeW91IGRvbid0IG5lZWQgdG8gb3ZlcnJpZGUgaW4gQ1NTIGFueXRoaW5nIGFuZCB0aGUgYW5pbWF0aW9ucyB3aWxsIHdvcmsgYXJvdW5kIHRoZVxuICogZGlzcGxheSBzdHlsZS5cbiAqXG4gKiBAYW5pbWF0aW9uc1xuICogfCBBbmltYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8IHtAbGluayAkYW5pbWF0ZSNhZGRDbGFzcyBhZGRDbGFzc30gYC5uZy1oaWRlYCAgICAgICB8IEFmdGVyIHRoZSBgbmdIaWRlYCBleHByZXNzaW9uIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZSBhbmQganVzdCBiZWZvcmUgdGhlIGNvbnRlbnRzIGFyZSBzZXQgdG8gaGlkZGVuLiAgfFxuICogfCB7QGxpbmsgJGFuaW1hdGUjcmVtb3ZlQ2xhc3MgcmVtb3ZlQ2xhc3N9IGAubmctaGlkZWAgfCBBZnRlciB0aGUgYG5nSGlkZWAgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBub24gdHJ1dGh5IHZhbHVlIGFuZCBqdXN0IGJlZm9yZSBjb250ZW50cyBhcmUgc2V0IHRvIHZpc2libGUuIHxcbiAqXG4gKiBBbmltYXRpb25zIGluIGBuZ1Nob3dgL2BuZ0hpZGVgIHdvcmsgd2l0aCB0aGUgc2hvdyBhbmQgaGlkZSBldmVudHMgdGhhdCBhcmUgdHJpZ2dlcmVkIHdoZW4gdGhlXG4gKiBkaXJlY3RpdmUgZXhwcmVzc2lvbiBpcyB0cnVlIGFuZCBmYWxzZS4gVGhpcyBzeXN0ZW0gd29ya3MgbGlrZSB0aGUgYW5pbWF0aW9uIHN5c3RlbSBwcmVzZW50IHdpdGhcbiAqIGBuZ0NsYXNzYCBleGNlcHQgdGhhdCB5b3UgbXVzdCBhbHNvIGluY2x1ZGUgdGhlIGAhaW1wb3J0YW50YCBmbGFnIHRvIG92ZXJyaWRlIHRoZSBkaXNwbGF5XG4gKiBwcm9wZXJ0eSBzbyB0aGF0IHRoZSBlbGVtZW50cyBhcmUgbm90IGFjdHVhbGx5IGhpZGRlbiBkdXJpbmcgdGhlIGFuaW1hdGlvbi5cbiAqXG4gKiBgYGBjc3NcbiAqIC8mIzQyOyBBIHdvcmtpbmcgZXhhbXBsZSBjYW4gYmUgZm91bmQgYXQgdGhlIGJvdHRvbSBvZiB0aGlzIHBhZ2UuICYjNDI7L1xuICogLm15LWVsZW1lbnQubmctaGlkZS1hZGQsIC5teS1lbGVtZW50Lm5nLWhpZGUtcmVtb3ZlIHtcbiAqICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgbGluZWFyO1xuICogfVxuICpcbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkIHsgLi4uIH1cbiAqIC5teS1lbGVtZW50Lm5nLWhpZGUtYWRkLm5nLWhpZGUtYWRkLWFjdGl2ZSB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZSB7IC4uLiB9XG4gKiAubXktZWxlbWVudC5uZy1oaWRlLXJlbW92ZS5uZy1oaWRlLXJlbW92ZS1hY3RpdmUgeyAuLi4gfVxuICogYGBgXG4gKlxuICogS2VlcCBpbiBtaW5kIHRoYXQsIGFzIG9mIEFuZ3VsYXJKUyB2ZXJzaW9uIDEuMywgdGhlcmUgaXMgbm8gbmVlZCB0byBjaGFuZ2UgdGhlIGRpc3BsYXkgcHJvcGVydHlcbiAqIHRvIGJsb2NrIGR1cmluZyBhbmltYXRpb24gc3RhdGVzIC0gbmdBbmltYXRlIHdpbGwgYXV0b21hdGljYWxseSBoYW5kbGUgdGhlIHN0eWxlIHRvZ2dsaW5nIGZvciB5b3UuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nSGlkZSBJZiB0aGUge0BsaW5rIGd1aWRlL2V4cHJlc3Npb24gZXhwcmVzc2lvbn0gaXMgdHJ1dGh5L2ZhbHN5IHRoZW4gdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50IGlzIGhpZGRlbi9zaG93biByZXNwZWN0aXZlbHkuXG4gKlxuICogQGV4YW1wbGVcbiAqIEEgc2ltcGxlIGV4YW1wbGUsIGFuaW1hdGluZyB0aGUgZWxlbWVudCdzIG9wYWNpdHk6XG4gKlxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctaGlkZS1zaW1wbGVcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgSGlkZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5nLW1vZGVsPVwiY2hlY2tlZFwiIGFyaWEtbGFiZWw9XCJUb2dnbGUgbmdIaWRlXCI+PGJyIC8+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2hlY2stZWxlbWVudCBhbmltYXRlLXNob3ctaGlkZVwiIG5nLWhpZGU9XCJjaGVja2VkXCI+XG4gICAgICAgIEkgaGlkZSB3aGVuIHlvdXIgY2hlY2tib3ggaXMgY2hlY2tlZC5cbiAgICAgIDwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLXNob3ctaGlkZS5uZy1oaWRlIHtcbiAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtc2hvdy1oaWRlLm5nLWhpZGUtYWRkLFxuICAgICAgLmFuaW1hdGUtc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlIHtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIGxpbmVhciAwLjVzO1xuICAgICAgfVxuXG4gICAgICAuY2hlY2stZWxlbWVudCB7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgfVxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGNoZWNrIG5nSGlkZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2tib3ggPSBlbGVtZW50KGJ5Lm1vZGVsKCdjaGVja2VkJykpO1xuICAgICAgICB2YXIgY2hlY2tFbGVtID0gZWxlbWVudChieS5jc3MoJy5jaGVjay1lbGVtZW50JykpO1xuXG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgY2hlY2tib3guY2xpY2soKTtcbiAgICAgICAgZXhwZWN0KGNoZWNrRWxlbS5pc0Rpc3BsYXllZCgpKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICpcbiAqIDxociAvPlxuICogQGV4YW1wbGVcbiAqIEEgbW9yZSBjb21wbGV4IGV4YW1wbGUsIGZlYXR1cmluZyBkaWZmZXJlbnQgc2hvdy9oaWRlIGFuaW1hdGlvbnM6XG4gKlxuICA8ZXhhbXBsZSBtb2R1bGU9XCJuZ0FuaW1hdGVcIiBkZXBzPVwiYW5ndWxhci1hbmltYXRlLmpzXCIgYW5pbWF0aW9ucz1cInRydWVcIiBuYW1lPVwibmctaGlkZS1jb21wbGV4XCI+XG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAgICAgIEhpZGU6IDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuZy1tb2RlbD1cImNoZWNrZWRcIiBhcmlhLWxhYmVsPVwiVG9nZ2xlIG5nSGlkZVwiPjxiciAvPlxuICAgICAgPGRpdiBjbGFzcz1cImNoZWNrLWVsZW1lbnQgZnVua3ktc2hvdy1oaWRlXCIgbmctaGlkZT1cImNoZWNrZWRcIj5cbiAgICAgICAgSSBoaWRlIHdoZW4geW91ciBjaGVja2JveCBpcyBjaGVja2VkLlxuICAgICAgPC9kaXY+XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJhbmltYXRpb25zLmNzc1wiPlxuICAgICAgYm9keSB7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHBlcnNwZWN0aXZlOiAxMDAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1hZGQge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVooMCk7XG4gICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlLWluLW91dDtcbiAgICAgIH1cblxuICAgICAgLmZ1bmt5LXNob3ctaGlkZS5uZy1oaWRlLWFkZC5uZy1oaWRlLWFkZC1hY3RpdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVooLTEzNWRlZyk7XG4gICAgICB9XG5cbiAgICAgIC5mdW5reS1zaG93LWhpZGUubmctaGlkZS1yZW1vdmUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZVkoOTBkZWcpO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlO1xuICAgICAgfVxuXG4gICAgICAuZnVua3ktc2hvdy1oaWRlLm5nLWhpZGUtcmVtb3ZlLm5nLWhpZGUtcmVtb3ZlLWFjdGl2ZSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlWSgwKTtcbiAgICAgIH1cblxuICAgICAgLmNoZWNrLWVsZW1lbnQge1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIH1cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgaXQoJ3Nob3VsZCBjaGVjayBuZ0hpZGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNoZWNrYm94ID0gZWxlbWVudChieS5tb2RlbCgnY2hlY2tlZCcpKTtcbiAgICAgICAgdmFyIGNoZWNrRWxlbSA9IGVsZW1lbnQoYnkuY3NzKCcuY2hlY2stZWxlbWVudCcpKTtcblxuICAgICAgICBleHBlY3QoY2hlY2tFbGVtLmlzRGlzcGxheWVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGNoZWNrYm94LmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChjaGVja0VsZW0uaXNEaXNwbGF5ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICA8L2ZpbGU+XG4gIDwvZXhhbXBsZT5cbiAqL1xudmFyIG5nSGlkZURpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCBmdW5jdGlvbigkYW5pbWF0ZSkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICBzY29wZS4kd2F0Y2goYXR0ci5uZ0hpZGUsIGZ1bmN0aW9uIG5nSGlkZVdhdGNoQWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIFRoZSBjb21tZW50IGluc2lkZSBvZiB0aGUgbmdTaG93RGlyZWN0aXZlIGV4cGxhaW5zIHdoeSB3ZSBhZGQgYW5kXG4gICAgICAgIC8vIHJlbW92ZSBhIHRlbXBvcmFyeSBjbGFzcyBmb3IgdGhlIHNob3cvaGlkZSBhbmltYXRpb25cbiAgICAgICAgJGFuaW1hdGVbdmFsdWUgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oZWxlbWVudCxOR19ISURFX0NMQVNTLCB7XG4gICAgICAgICAgdGVtcENsYXNzZXM6IE5HX0hJREVfSU5fUFJPR1JFU1NfQ0xBU1NcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N0eWxlXG4gKiBAcmVzdHJpY3QgQUNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFRoZSBgbmdTdHlsZWAgZGlyZWN0aXZlIGFsbG93cyB5b3UgdG8gc2V0IENTUyBzdHlsZSBvbiBhbiBIVE1MIGVsZW1lbnQgY29uZGl0aW9uYWxseS5cbiAqXG4gKiBAa25vd25Jc3N1ZVxuICogWW91IHNob3VsZCBub3QgdXNlIHtAbGluayBndWlkZS9pbnRlcnBvbGF0aW9uIGludGVycG9sYXRpb259IGluIHRoZSB2YWx1ZSBvZiB0aGUgYHN0eWxlYFxuICogYXR0cmlidXRlLCB3aGVuIHVzaW5nIHRoZSBgbmdTdHlsZWAgZGlyZWN0aXZlIG9uIHRoZSBzYW1lIGVsZW1lbnQuXG4gKiBTZWUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24ja25vd24taXNzdWVzIGhlcmV9IGZvciBtb3JlIGluZm8uXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKiBAcGFyYW0ge2V4cHJlc3Npb259IG5nU3R5bGVcbiAqXG4gKiB7QGxpbmsgZ3VpZGUvZXhwcmVzc2lvbiBFeHByZXNzaW9ufSB3aGljaCBldmFscyB0byBhblxuICogb2JqZWN0IHdob3NlIGtleXMgYXJlIENTUyBzdHlsZSBuYW1lcyBhbmQgdmFsdWVzIGFyZSBjb3JyZXNwb25kaW5nIHZhbHVlcyBmb3IgdGhvc2UgQ1NTXG4gKiBrZXlzLlxuICpcbiAqIFNpbmNlIHNvbWUgQ1NTIHN0eWxlIG5hbWVzIGFyZSBub3QgdmFsaWQga2V5cyBmb3IgYW4gb2JqZWN0LCB0aGV5IG11c3QgYmUgcXVvdGVkLlxuICogU2VlIHRoZSAnYmFja2dyb3VuZC1jb2xvcicgc3R5bGUgaW4gdGhlIGV4YW1wbGUgYmVsb3cuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG5hbWU9XCJuZy1zdHlsZVwiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwic2V0IGNvbG9yXCIgbmctY2xpY2s9XCJteVN0eWxlPXtjb2xvcjoncmVkJ31cIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInNldCBiYWNrZ3JvdW5kXCIgbmctY2xpY2s9XCJteVN0eWxlPXsnYmFja2dyb3VuZC1jb2xvcic6J2JsdWUnfVwiPlxuICAgICAgICA8aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiY2xlYXJcIiBuZy1jbGljaz1cIm15U3R5bGU9e31cIj5cbiAgICAgICAgPGJyLz5cbiAgICAgICAgPHNwYW4gbmctc3R5bGU9XCJteVN0eWxlXCI+U2FtcGxlIFRleHQ8L3NwYW4+XG4gICAgICAgIDxwcmU+bXlTdHlsZT17e215U3R5bGV9fTwvcHJlPlxuICAgICA8L2ZpbGU+XG4gICAgIDxmaWxlIG5hbWU9XCJzdHlsZS5jc3NcIj5cbiAgICAgICBzcGFuIHtcbiAgICAgICAgIGNvbG9yOiBibGFjaztcbiAgICAgICB9XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBjb2xvclNwYW4gPSBlbGVtZW50KGJ5LmNzcygnc3BhbicpKTtcblxuICAgICAgIGl0KCdzaG91bGQgY2hlY2sgbmctc3R5bGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMCwgMCwgMCwgMSknKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCdpbnB1dFt2YWx1ZT1cXCdzZXQgY29sb3JcXCddJykpLmNsaWNrKCk7XG4gICAgICAgICBleHBlY3QoY29sb3JTcGFuLmdldENzc1ZhbHVlKCdjb2xvcicpKS50b0JlKCdyZ2JhKDI1NSwgMCwgMCwgMSknKTtcbiAgICAgICAgIGVsZW1lbnQoYnkuY3NzKCdpbnB1dFt2YWx1ZT1jbGVhcl0nKSkuY2xpY2soKTtcbiAgICAgICAgIGV4cGVjdChjb2xvclNwYW4uZ2V0Q3NzVmFsdWUoJ2NvbG9yJykpLnRvQmUoJ3JnYmEoMCwgMCwgMCwgMSknKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG52YXIgbmdTdHlsZURpcmVjdGl2ZSA9IG5nRGlyZWN0aXZlKGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gIHNjb3BlLiR3YXRjaChhdHRyLm5nU3R5bGUsIGZ1bmN0aW9uIG5nU3R5bGVXYXRjaEFjdGlvbihuZXdTdHlsZXMsIG9sZFN0eWxlcykge1xuICAgIGlmIChvbGRTdHlsZXMgJiYgKG5ld1N0eWxlcyAhPT0gb2xkU3R5bGVzKSkge1xuICAgICAgZm9yRWFjaChvbGRTdHlsZXMsIGZ1bmN0aW9uKHZhbCwgc3R5bGUpIHsgZWxlbWVudC5jc3Moc3R5bGUsICcnKTt9KTtcbiAgICB9XG4gICAgaWYgKG5ld1N0eWxlcykgZWxlbWVudC5jc3MobmV3U3R5bGVzKTtcbiAgfSwgdHJ1ZSk7XG59KTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1N3aXRjaFxuICogQHJlc3RyaWN0IEVBXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgYG5nU3dpdGNoYCBkaXJlY3RpdmUgaXMgdXNlZCB0byBjb25kaXRpb25hbGx5IHN3YXAgRE9NIHN0cnVjdHVyZSBvbiB5b3VyIHRlbXBsYXRlIGJhc2VkIG9uIGEgc2NvcGUgZXhwcmVzc2lvbi5cbiAqIEVsZW1lbnRzIHdpdGhpbiBgbmdTd2l0Y2hgIGJ1dCB3aXRob3V0IGBuZ1N3aXRjaFdoZW5gIG9yIGBuZ1N3aXRjaERlZmF1bHRgIGRpcmVjdGl2ZXMgd2lsbCBiZSBwcmVzZXJ2ZWQgYXQgdGhlIGxvY2F0aW9uXG4gKiBhcyBzcGVjaWZpZWQgaW4gdGhlIHRlbXBsYXRlLlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgaXRzZWxmIHdvcmtzIHNpbWlsYXIgdG8gbmdJbmNsdWRlLCBob3dldmVyLCBpbnN0ZWFkIG9mIGRvd25sb2FkaW5nIHRlbXBsYXRlIGNvZGUgKG9yIGxvYWRpbmcgaXRcbiAqIGZyb20gdGhlIHRlbXBsYXRlIGNhY2hlKSwgYG5nU3dpdGNoYCBzaW1wbHkgY2hvb3NlcyBvbmUgb2YgdGhlIG5lc3RlZCBlbGVtZW50cyBhbmQgbWFrZXMgaXQgdmlzaWJsZSBiYXNlZCBvbiB3aGljaCBlbGVtZW50XG4gKiBtYXRjaGVzIHRoZSB2YWx1ZSBvYnRhaW5lZCBmcm9tIHRoZSBldmFsdWF0ZWQgZXhwcmVzc2lvbi4gSW4gb3RoZXIgd29yZHMsIHlvdSBkZWZpbmUgYSBjb250YWluZXIgZWxlbWVudFxuICogKHdoZXJlIHlvdSBwbGFjZSB0aGUgZGlyZWN0aXZlKSwgcGxhY2UgYW4gZXhwcmVzc2lvbiBvbiB0aGUgKipgb249XCIuLi5cImAgYXR0cmlidXRlKipcbiAqIChvciB0aGUgKipgbmctc3dpdGNoPVwiLi4uXCJgIGF0dHJpYnV0ZSoqKSwgZGVmaW5lIGFueSBpbm5lciBlbGVtZW50cyBpbnNpZGUgb2YgdGhlIGRpcmVjdGl2ZSBhbmQgcGxhY2VcbiAqIGEgd2hlbiBhdHRyaWJ1dGUgcGVyIGVsZW1lbnQuIFRoZSB3aGVuIGF0dHJpYnV0ZSBpcyB1c2VkIHRvIGluZm9ybSBuZ1N3aXRjaCB3aGljaCBlbGVtZW50IHRvIGRpc3BsYXkgd2hlbiB0aGUgb25cbiAqIGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkLiBJZiBhIG1hdGNoaW5nIGV4cHJlc3Npb24gaXMgbm90IGZvdW5kIHZpYSBhIHdoZW4gYXR0cmlidXRlIHRoZW4gYW4gZWxlbWVudCB3aXRoIHRoZSBkZWZhdWx0XG4gKiBhdHRyaWJ1dGUgaXMgZGlzcGxheWVkLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gKiBCZSBhd2FyZSB0aGF0IHRoZSBhdHRyaWJ1dGUgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QgY2Fubm90IGJlIGV4cHJlc3Npb25zLiBUaGV5IGFyZSBpbnRlcnByZXRlZFxuICogYXMgbGl0ZXJhbCBzdHJpbmcgdmFsdWVzIHRvIG1hdGNoIGFnYWluc3QuXG4gKiBGb3IgZXhhbXBsZSwgKipgbmctc3dpdGNoLXdoZW49XCJzb21lVmFsXCJgKiogd2lsbCBtYXRjaCBhZ2FpbnN0IHRoZSBzdHJpbmcgYFwic29tZVZhbFwiYCBub3QgYWdhaW5zdCB0aGVcbiAqIHZhbHVlIG9mIHRoZSBleHByZXNzaW9uIGAkc2NvcGUuc29tZVZhbGAuXG4gKiA8L2Rpdj5cblxuICogQGFuaW1hdGlvbnNcbiAqIHwgQW5pbWF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgfCBPY2N1cnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCB7QGxpbmsgbmcuJGFuaW1hdGUjZW50ZXIgZW50ZXJ9ICB8IGFmdGVyIHRoZSBuZ1N3aXRjaCBjb250ZW50cyBjaGFuZ2UgYW5kIHRoZSBtYXRjaGVkIGNoaWxkIGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSB0aGUgY29udGFpbmVyIHxcbiAqIHwge0BsaW5rIG5nLiRhbmltYXRlI2xlYXZlIGxlYXZlfSAgfCBhZnRlciB0aGUgbmdTd2l0Y2ggY29udGVudHMgY2hhbmdlIGFuZCBqdXN0IGJlZm9yZSB0aGUgZm9ybWVyIGNvbnRlbnRzIGFyZSByZW1vdmVkIGZyb20gdGhlIERPTSB8XG4gKlxuICogQHVzYWdlXG4gKlxuICogYGBgXG4gKiA8QU5ZIG5nLXN3aXRjaD1cImV4cHJlc3Npb25cIj5cbiAqICAgPEFOWSBuZy1zd2l0Y2gtd2hlbj1cIm1hdGNoVmFsdWUxXCI+Li4uPC9BTlk+XG4gKiAgIDxBTlkgbmctc3dpdGNoLXdoZW49XCJtYXRjaFZhbHVlMlwiPi4uLjwvQU5ZPlxuICogICA8QU5ZIG5nLXN3aXRjaC1kZWZhdWx0Pi4uLjwvQU5ZPlxuICogPC9BTlk+XG4gKiBgYGBcbiAqXG4gKlxuICogQHNjb3BlXG4gKiBAcHJpb3JpdHkgMTIwMFxuICogQHBhcmFtIHsqfSBuZ1N3aXRjaHxvbiBleHByZXNzaW9uIHRvIG1hdGNoIGFnYWluc3QgPGNvZGU+bmctc3dpdGNoLXdoZW48L2NvZGU+LlxuICogT24gY2hpbGQgZWxlbWVudHMgYWRkOlxuICpcbiAqICogYG5nU3dpdGNoV2hlbmA6IHRoZSBjYXNlIHN0YXRlbWVudCB0byBtYXRjaCBhZ2FpbnN0LiBJZiBtYXRjaCB0aGVuIHRoaXNcbiAqICAgY2FzZSB3aWxsIGJlIGRpc3BsYXllZC4gSWYgdGhlIHNhbWUgbWF0Y2ggYXBwZWFycyBtdWx0aXBsZSB0aW1lcywgYWxsIHRoZVxuICogICBlbGVtZW50cyB3aWxsIGJlIGRpc3BsYXllZC4gSXQgaXMgcG9zc2libGUgdG8gYXNzb2NpYXRlIG11bHRpcGxlIHZhbHVlcyB0b1xuICogICB0aGUgc2FtZSBgbmdTd2l0Y2hXaGVuYCBieSBkZWZpbmluZyB0aGUgb3B0aW9uYWwgYXR0cmlidXRlXG4gKiAgIGBuZ1N3aXRjaFdoZW5TZXBhcmF0b3JgLiBUaGUgc2VwYXJhdG9yIHdpbGwgYmUgdXNlZCB0byBzcGxpdCB0aGUgdmFsdWUgb2ZcbiAqICAgdGhlIGBuZ1N3aXRjaFdoZW5gIGF0dHJpYnV0ZSBpbnRvIG11bHRpcGxlIHRva2VucywgYW5kIHRoZSBlbGVtZW50IHdpbGwgc2hvd1xuICogICBpZiBhbnkgb2YgdGhlIGBuZ1N3aXRjaGAgZXZhbHVhdGVzIHRvIGFueSBvZiB0aGVzZSB0b2tlbnMuXG4gKiAqIGBuZ1N3aXRjaERlZmF1bHRgOiB0aGUgZGVmYXVsdCBjYXNlIHdoZW4gbm8gb3RoZXIgY2FzZSBtYXRjaC4gSWYgdGhlcmVcbiAqICAgYXJlIG11bHRpcGxlIGRlZmF1bHQgY2FzZXMsIGFsbCBvZiB0aGVtIHdpbGwgYmUgZGlzcGxheWVkIHdoZW4gbm8gb3RoZXJcbiAqICAgY2FzZSBtYXRjaC5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAgPGV4YW1wbGUgbW9kdWxlPVwic3dpdGNoRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLWFuaW1hdGUuanNcIiBhbmltYXRpb25zPVwidHJ1ZVwiIG5hbWU9XCJuZy1zd2l0Y2hcIj5cbiAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgPHNlbGVjdCBuZy1tb2RlbD1cInNlbGVjdGlvblwiIG5nLW9wdGlvbnM9XCJpdGVtIGZvciBpdGVtIGluIGl0ZW1zXCI+XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgICA8Y29kZT5zZWxlY3Rpb249e3tzZWxlY3Rpb259fTwvY29kZT5cbiAgICAgICAgPGhyLz5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtc3dpdGNoLWNvbnRhaW5lclwiXG4gICAgICAgICAgbmctc3dpdGNoIG9uPVwic2VsZWN0aW9uXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtd2hlbj1cInNldHRpbmdzfG9wdGlvbnNcIiBuZy1zd2l0Y2gtd2hlbi1zZXBhcmF0b3I9XCJ8XCI+U2V0dGluZ3MgRGl2PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYW5pbWF0ZS1zd2l0Y2hcIiBuZy1zd2l0Y2gtd2hlbj1cImhvbWVcIj5Ib21lIFNwYW48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhbmltYXRlLXN3aXRjaFwiIG5nLXN3aXRjaC1kZWZhdWx0PmRlZmF1bHQ8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2ZpbGU+XG4gICAgPGZpbGUgbmFtZT1cInNjcmlwdC5qc1wiPlxuICAgICAgYW5ndWxhci5tb2R1bGUoJ3N3aXRjaEV4YW1wbGUnLCBbJ25nQW5pbWF0ZSddKVxuICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICAgICAgICAgICRzY29wZS5pdGVtcyA9IFsnc2V0dGluZ3MnLCAnaG9tZScsICdvcHRpb25zJywgJ290aGVyJ107XG4gICAgICAgICAgJHNjb3BlLnNlbGVjdGlvbiA9ICRzY29wZS5pdGVtc1swXTtcbiAgICAgICAgfV0pO1xuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwiYW5pbWF0aW9ucy5jc3NcIj5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC1jb250YWluZXIge1xuICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcbiAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTtcbiAgICAgICAgYm9yZGVyOjFweCBzb2xpZCBibGFjaztcbiAgICAgICAgaGVpZ2h0OjQwcHg7XG4gICAgICAgIG92ZXJmbG93OmhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLmFuaW1hdGUtc3dpdGNoIHtcbiAgICAgICAgcGFkZGluZzoxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctYW5pbWF0ZSB7XG4gICAgICAgIHRyYW5zaXRpb246YWxsIGN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCkgMC41cztcblxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcbiAgICAgICAgdG9wOjA7XG4gICAgICAgIGxlZnQ6MDtcbiAgICAgICAgcmlnaHQ6MDtcbiAgICAgICAgYm90dG9tOjA7XG4gICAgICB9XG5cbiAgICAgIC5hbmltYXRlLXN3aXRjaC5uZy1sZWF2ZS5uZy1sZWF2ZS1hY3RpdmUsXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIge1xuICAgICAgICB0b3A6LTUwcHg7XG4gICAgICB9XG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctbGVhdmUsXG4gICAgICAuYW5pbWF0ZS1zd2l0Y2gubmctZW50ZXIubmctZW50ZXItYWN0aXZlIHtcbiAgICAgICAgdG9wOjA7XG4gICAgICB9XG4gICAgPC9maWxlPlxuICAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgIHZhciBzd2l0Y2hFbGVtID0gZWxlbWVudChieS5jc3MoJ1tuZy1zd2l0Y2hdJykpO1xuICAgICAgdmFyIHNlbGVjdCA9IGVsZW1lbnQoYnkubW9kZWwoJ3NlbGVjdGlvbicpKTtcblxuICAgICAgaXQoJ3Nob3VsZCBzdGFydCBpbiBzZXR0aW5ncycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIGNoYW5nZSB0byBob21lJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDEpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvSG9tZSBTcGFuLyk7XG4gICAgICB9KTtcbiAgICAgIGl0KCdzaG91bGQgY2hhbmdlIHRvIHNldHRpbmdzIHZpYSBcIm9wdGlvbnNcIicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxlY3QuYWxsKGJ5LmNzcygnb3B0aW9uJykpLmdldCgyKS5jbGljaygpO1xuICAgICAgICBleHBlY3Qoc3dpdGNoRWxlbS5nZXRUZXh0KCkpLnRvTWF0Y2goL1NldHRpbmdzIERpdi8pO1xuICAgICAgfSk7XG4gICAgICBpdCgnc2hvdWxkIHNlbGVjdCBkZWZhdWx0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGVjdC5hbGwoYnkuY3NzKCdvcHRpb24nKSkuZ2V0KDMpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChzd2l0Y2hFbGVtLmdldFRleHQoKSkudG9NYXRjaCgvZGVmYXVsdC8pO1xuICAgICAgfSk7XG4gICAgPC9maWxlPlxuICA8L2V4YW1wbGU+XG4gKi9cbnZhciBuZ1N3aXRjaERpcmVjdGl2ZSA9IFsnJGFuaW1hdGUnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbigkYW5pbWF0ZSwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiAnbmdTd2l0Y2gnLFxuXG4gICAgLy8gYXNrcyBmb3IgJHNjb3BlIHRvIGZvb2wgdGhlIEJDIGNvbnRyb2xsZXIgbW9kdWxlXG4gICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbiBOZ1N3aXRjaENvbnRyb2xsZXIoKSB7XG4gICAgIHRoaXMuY2FzZXMgPSB7fTtcbiAgICB9XSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgbmdTd2l0Y2hDb250cm9sbGVyKSB7XG4gICAgICB2YXIgd2F0Y2hFeHByID0gYXR0ci5uZ1N3aXRjaCB8fCBhdHRyLm9uLFxuICAgICAgICAgIHNlbGVjdGVkVHJhbnNjbHVkZXMgPSBbXSxcbiAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzID0gW10sXG4gICAgICAgICAgcHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMgPSBbXSxcbiAgICAgICAgICBzZWxlY3RlZFNjb3BlcyA9IFtdO1xuXG4gICAgICB2YXIgc3BsaWNlRmFjdG9yeSA9IGZ1bmN0aW9uKGFycmF5LCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICE9PSBmYWxzZSkgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgc2NvcGUuJHdhdGNoKHdhdGNoRXhwciwgZnVuY3Rpb24gbmdTd2l0Y2hXYXRjaEFjdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgaSwgaWk7XG5cbiAgICAgICAgLy8gU3RhcnQgd2l0aCB0aGUgbGFzdCwgaW4gY2FzZSB0aGUgYXJyYXkgaXMgbW9kaWZpZWQgZHVyaW5nIHRoZSBsb29wXG4gICAgICAgIHdoaWxlIChwcmV2aW91c0xlYXZlQW5pbWF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAkYW5pbWF0ZS5jYW5jZWwocHJldmlvdXNMZWF2ZUFuaW1hdGlvbnMucG9wKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMCwgaWkgPSBzZWxlY3RlZFNjb3Blcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkID0gZ2V0QmxvY2tOb2RlcyhzZWxlY3RlZEVsZW1lbnRzW2ldLmNsb25lKTtcbiAgICAgICAgICBzZWxlY3RlZFNjb3Blc1tpXS4kZGVzdHJveSgpO1xuICAgICAgICAgIHZhciBydW5uZXIgPSBwcmV2aW91c0xlYXZlQW5pbWF0aW9uc1tpXSA9ICRhbmltYXRlLmxlYXZlKHNlbGVjdGVkKTtcbiAgICAgICAgICBydW5uZXIuZG9uZShzcGxpY2VGYWN0b3J5KHByZXZpb3VzTGVhdmVBbmltYXRpb25zLCBpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIHNlbGVjdGVkU2NvcGVzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgaWYgKChzZWxlY3RlZFRyYW5zY2x1ZGVzID0gbmdTd2l0Y2hDb250cm9sbGVyLmNhc2VzWychJyArIHZhbHVlXSB8fCBuZ1N3aXRjaENvbnRyb2xsZXIuY2FzZXNbJz8nXSkpIHtcbiAgICAgICAgICBmb3JFYWNoKHNlbGVjdGVkVHJhbnNjbHVkZXMsIGZ1bmN0aW9uKHNlbGVjdGVkVHJhbnNjbHVkZSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRUcmFuc2NsdWRlLnRyYW5zY2x1ZGUoZnVuY3Rpb24oY2FzZUVsZW1lbnQsIHNlbGVjdGVkU2NvcGUpIHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTY29wZXMucHVzaChzZWxlY3RlZFNjb3BlKTtcbiAgICAgICAgICAgICAgdmFyIGFuY2hvciA9IHNlbGVjdGVkVHJhbnNjbHVkZS5lbGVtZW50O1xuICAgICAgICAgICAgICBjYXNlRWxlbWVudFtjYXNlRWxlbWVudC5sZW5ndGgrK10gPSAkY29tcGlsZS4kJGNyZWF0ZUNvbW1lbnQoJ2VuZCBuZ1N3aXRjaFdoZW4nKTtcbiAgICAgICAgICAgICAgdmFyIGJsb2NrID0geyBjbG9uZTogY2FzZUVsZW1lbnQgfTtcblxuICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRzLnB1c2goYmxvY2spO1xuICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihjYXNlRWxlbWVudCwgYW5jaG9yLnBhcmVudCgpLCBhbmNob3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dO1xuXG52YXIgbmdTd2l0Y2hXaGVuRGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xuICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gIHByaW9yaXR5OiAxMjAwLFxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcbiAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwsICR0cmFuc2NsdWRlKSB7XG5cbiAgICB2YXIgY2FzZXMgPSBhdHRycy5uZ1N3aXRjaFdoZW4uc3BsaXQoYXR0cnMubmdTd2l0Y2hXaGVuU2VwYXJhdG9yKS5zb3J0KCkuZmlsdGVyKFxuICAgICAgLy8gRmlsdGVyIGR1cGxpY2F0ZSBjYXNlc1xuICAgICAgZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7IHJldHVybiBhcnJheVtpbmRleCAtIDFdICE9PSBlbGVtZW50OyB9XG4gICAgKTtcblxuICAgIGZvckVhY2goY2FzZXMsIGZ1bmN0aW9uKHdoZW5DYXNlKSB7XG4gICAgICBjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXSA9IChjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXSB8fCBbXSk7XG4gICAgICBjdHJsLmNhc2VzWychJyArIHdoZW5DYXNlXS5wdXNoKHsgdHJhbnNjbHVkZTogJHRyYW5zY2x1ZGUsIGVsZW1lbnQ6IGVsZW1lbnQgfSk7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG52YXIgbmdTd2l0Y2hEZWZhdWx0RGlyZWN0aXZlID0gbmdEaXJlY3RpdmUoe1xuICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gIHByaW9yaXR5OiAxMjAwLFxuICByZXF1aXJlOiAnXm5nU3dpdGNoJyxcbiAgbXVsdGlFbGVtZW50OiB0cnVlLFxuICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCwgJHRyYW5zY2x1ZGUpIHtcbiAgICBjdHJsLmNhc2VzWyc/J10gPSAoY3RybC5jYXNlc1snPyddIHx8IFtdKTtcbiAgICBjdHJsLmNhc2VzWyc/J10ucHVzaCh7IHRyYW5zY2x1ZGU6ICR0cmFuc2NsdWRlLCBlbGVtZW50OiBlbGVtZW50IH0pO1xuICAgfVxufSk7XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdUcmFuc2NsdWRlXG4gKiBAcmVzdHJpY3QgRUFDXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXJlY3RpdmUgdGhhdCBtYXJrcyB0aGUgaW5zZXJ0aW9uIHBvaW50IGZvciB0aGUgdHJhbnNjbHVkZWQgRE9NIG9mIHRoZSBuZWFyZXN0IHBhcmVudCBkaXJlY3RpdmUgdGhhdCB1c2VzIHRyYW5zY2x1c2lvbi5cbiAqXG4gKiBZb3UgY2FuIHNwZWNpZnkgdGhhdCB5b3Ugd2FudCB0byBpbnNlcnQgYSBuYW1lZCB0cmFuc2NsdXNpb24gc2xvdCwgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBzbG90LCBieSBwcm92aWRpbmcgdGhlIHNsb3QgbmFtZVxuICogYXMgdGhlIHZhbHVlIG9mIHRoZSBgbmctdHJhbnNjbHVkZWAgb3IgYG5nLXRyYW5zY2x1ZGUtc2xvdGAgYXR0cmlidXRlLlxuICpcbiAqIElmIHRoZSB0cmFuc2NsdWRlZCBjb250ZW50IGlzIG5vdCBlbXB0eSAoaS5lLiBjb250YWlucyBvbmUgb3IgbW9yZSBET00gbm9kZXMsIGluY2x1ZGluZyB3aGl0ZXNwYWNlIHRleHQgbm9kZXMpLCBhbnkgZXhpc3RpbmdcbiAqIGNvbnRlbnQgb2YgdGhpcyBlbGVtZW50IHdpbGwgYmUgcmVtb3ZlZCBiZWZvcmUgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgaW5zZXJ0ZWQuXG4gKiBJZiB0aGUgdHJhbnNjbHVkZWQgY29udGVudCBpcyBlbXB0eSAob3Igb25seSB3aGl0ZXNwYWNlKSwgdGhlIGV4aXN0aW5nIGNvbnRlbnQgaXMgbGVmdCBpbnRhY3QuIFRoaXMgbGV0cyB5b3UgcHJvdmlkZSBmYWxsYmFja1xuICogY29udGVudCBpbiB0aGUgY2FzZSB0aGF0IG5vIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgcHJvdmlkZWQuXG4gKlxuICogQGVsZW1lbnQgQU5ZXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5nVHJhbnNjbHVkZXxuZ1RyYW5zY2x1ZGVTbG90IHRoZSBuYW1lIG9mIHRoZSBzbG90IHRvIGluc2VydCBhdCB0aGlzIHBvaW50LiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCwgaXMgZW1wdHlcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvciBpdHMgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0aGVuIHRoZSBkZWZhdWx0IHNsb3QgaXMgdXNlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJhc2ljIHRyYW5zY2x1c2lvblxuICogVGhpcyBleGFtcGxlIGRlbW9uc3RyYXRlcyBiYXNpYyB0cmFuc2NsdXNpb24gb2YgY29udGVudCBpbnRvIGEgY29tcG9uZW50IGRpcmVjdGl2ZS5cbiAqIDxleGFtcGxlIG5hbWU9XCJzaW1wbGVUcmFuc2NsdWRlRXhhbXBsZVwiIG1vZHVsZT1cInRyYW5zY2x1ZGVFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCd0cmFuc2NsdWRlRXhhbXBsZScsIFtdKVxuICogICAgICAgIC5kaXJlY3RpdmUoJ3BhbmUnLCBmdW5jdGlvbigpe1xuICogICAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICogICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAqICAgICAgICAgICAgIHNjb3BlOiB7IHRpdGxlOidAJyB9LFxuICogICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6IGdyYXlcIj57e3RpdGxlfX08L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICc8bmctdHJhbnNjbHVkZT48L25nLXRyYW5zY2x1ZGU+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcbiAqICAgICAgICAgICB9O1xuICogICAgICAgfSlcbiAqICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICRzY29wZS50aXRsZSA9ICdMb3JlbSBJcHN1bSc7XG4gKiAgICAgICAgICRzY29wZS50ZXh0ID0gJ05lcXVlIHBvcnJvIHF1aXNxdWFtIGVzdCBxdWkgZG9sb3JlbSBpcHN1bSBxdWlhIGRvbG9yLi4uJztcbiAqICAgICAgIH1dKTtcbiAqICAgICA8L3NjcmlwdD5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGlucHV0IG5nLW1vZGVsPVwidGl0bGVcIiBhcmlhLWxhYmVsPVwidGl0bGVcIj4gPGJyLz5cbiAqICAgICAgIDx0ZXh0YXJlYSBuZy1tb2RlbD1cInRleHRcIiBhcmlhLWxhYmVsPVwidGV4dFwiPjwvdGV4dGFyZWE+IDxici8+XG4gKiAgICAgICA8cGFuZSB0aXRsZT1cInt7dGl0bGV9fVwiPjxzcGFuPnt7dGV4dH19PC9zcGFuPjwvcGFuZT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gKiAgICAgIGl0KCdzaG91bGQgaGF2ZSB0cmFuc2NsdWRlZCcsIGZ1bmN0aW9uKCkge1xuICogICAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSBlbGVtZW50KGJ5Lm1vZGVsKCd0aXRsZScpKTtcbiAqICAgICAgICB0aXRsZUVsZW1lbnQuY2xlYXIoKTtcbiAqICAgICAgICB0aXRsZUVsZW1lbnQuc2VuZEtleXMoJ1RJVExFJyk7XG4gKiAgICAgICAgdmFyIHRleHRFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGV4dCcpKTtcbiAqICAgICAgICB0ZXh0RWxlbWVudC5jbGVhcigpO1xuICogICAgICAgIHRleHRFbGVtZW50LnNlbmRLZXlzKCdURVhUJyk7XG4gKiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuYmluZGluZygndGl0bGUnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdUSVRMRScpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmJpbmRpbmcoJ3RleHQnKSkuZ2V0VGV4dCgpKS50b0VxdWFsKCdURVhUJyk7XG4gKiAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBUcmFuc2NsdWRlIGZhbGxiYWNrIGNvbnRlbnRcbiAqIFRoaXMgZXhhbXBsZSBzaG93cyBob3cgdG8gdXNlIGBOZ1RyYW5zY2x1ZGVgIHdpdGggZmFsbGJhY2sgY29udGVudCwgdGhhdFxuICogaXMgZGlzcGxheWVkIGlmIG5vIHRyYW5zY2x1ZGVkIGNvbnRlbnQgaXMgcHJvdmlkZWQuXG4gKlxuICogPGV4YW1wbGUgbW9kdWxlPVwidHJhbnNjbHVkZUZhbGxiYWNrQ29udGVudEV4YW1wbGVcIiBuYW1lPVwibmctdHJhbnNjbHVkZVwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxzY3JpcHQ+XG4gKiBhbmd1bGFyLm1vZHVsZSgndHJhbnNjbHVkZUZhbGxiYWNrQ29udGVudEV4YW1wbGUnLCBbXSlcbiAqIC5kaXJlY3RpdmUoJ215QnV0dG9uJywgZnVuY3Rpb24oKXtcbiAqICAgICAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gKiAgICAgICAgICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gKiAgICAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICogICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxidXR0b24gc3R5bGU9XCJjdXJzb3I6IHBvaW50ZXI7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8bmctdHJhbnNjbHVkZT4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGIgc3R5bGU9XCJjb2xvcjogcmVkO1wiPkJ1dHRvbjE8L2I+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L25nLXRyYW5zY2x1ZGU+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAnPC9idXR0b24+J1xuICogICAgICAgICAgICAgfTtcbiAqICAgICAgICAgfSk7XG4gKiA8L3NjcmlwdD5cbiAqIDwhLS0gZmFsbGJhY2sgYnV0dG9uIGNvbnRlbnQgLS0+XG4gKiA8bXktYnV0dG9uIGlkPVwiZmFsbGJhY2tcIj48L215LWJ1dHRvbj5cbiAqIDwhLS0gbW9kaWZpZWQgYnV0dG9uIGNvbnRlbnQgLS0+XG4gKiA8bXktYnV0dG9uIGlkPVwibW9kaWZpZWRcIj5cbiAqICAgPGkgc3R5bGU9XCJjb2xvcjogZ3JlZW47XCI+QnV0dG9uMjwvaT5cbiAqIDwvbXktYnV0dG9uPlxuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogaXQoJ3Nob3VsZCBoYXZlIGRpZmZlcmVudCB0cmFuc2NsdWRlIGVsZW1lbnQgY29udGVudCcsIGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2ZhbGxiYWNrJykpLmdldFRleHQoKSkudG9CZSgnQnV0dG9uMScpO1xuICogICAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ21vZGlmaWVkJykpLmdldFRleHQoKSkudG9CZSgnQnV0dG9uMicpO1xuICogICAgICAgIH0pO1xuICogPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgTXVsdGktc2xvdCB0cmFuc2NsdXNpb25cbiAqIFRoaXMgZXhhbXBsZSBkZW1vbnN0cmF0ZXMgdXNpbmcgbXVsdGktc2xvdCB0cmFuc2NsdXNpb24gaW4gYSBjb21wb25lbnQgZGlyZWN0aXZlLlxuICogPGV4YW1wbGUgbmFtZT1cIm11bHRpU2xvdFRyYW5zY2x1ZGVFeGFtcGxlXCIgbW9kdWxlPVwibXVsdGlTbG90VHJhbnNjbHVkZUV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgIDxzdHlsZT5cbiAqICAgICAgLnRpdGxlLCAuZm9vdGVyIHtcbiAqICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBncmF5XG4gKiAgICAgIH1cbiAqICAgIDwvc3R5bGU+XG4gKiAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICA8aW5wdXQgbmctbW9kZWw9XCJ0aXRsZVwiIGFyaWEtbGFiZWw9XCJ0aXRsZVwiPiA8YnIvPlxuICogICAgICA8dGV4dGFyZWEgbmctbW9kZWw9XCJ0ZXh0XCIgYXJpYS1sYWJlbD1cInRleHRcIj48L3RleHRhcmVhPiA8YnIvPlxuICogICAgICA8cGFuZT5cbiAqICAgICAgICA8cGFuZS10aXRsZT48YSBuZy1ocmVmPVwie3tsaW5rfX1cIj57e3RpdGxlfX08L2E+PC9wYW5lLXRpdGxlPlxuICogICAgICAgIDxwYW5lLWJvZHk+PHA+e3t0ZXh0fX08L3A+PC9wYW5lLWJvZHk+XG4gKiAgICAgIDwvcGFuZT5cbiAqICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICAgIGFuZ3VsYXIubW9kdWxlKCdtdWx0aVNsb3RUcmFuc2NsdWRlRXhhbXBsZScsIFtdKVxuICogICAgIC5kaXJlY3RpdmUoJ3BhbmUnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAqICAgICAgICAgIHRyYW5zY2x1ZGU6IHtcbiAqICAgICAgICAgICAgJ3RpdGxlJzogJz9wYW5lVGl0bGUnLFxuICogICAgICAgICAgICAnYm9keSc6ICdwYW5lQm9keScsXG4gKiAgICAgICAgICAgICdmb290ZXInOiAnP3BhbmVGb290ZXInXG4gKiAgICAgICAgICB9LFxuICogICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IHN0eWxlPVwiYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XCI+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRpdGxlXCIgbmctdHJhbnNjbHVkZT1cInRpdGxlXCI+RmFsbGJhY2sgVGl0bGU8L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IG5nLXRyYW5zY2x1ZGU9XCJib2R5XCI+PC9kaXY+JyArXG4gKiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvb3RlclwiIG5nLXRyYW5zY2x1ZGU9XCJmb290ZXJcIj5GYWxsYmFjayBGb290ZXI8L2Rpdj4nICtcbiAqICAgICAgICAgICAgICAgICAgICAnPC9kaXY+J1xuICogICAgICAgIH07XG4gKiAgICB9KVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLnRpdGxlID0gJ0xvcmVtIElwc3VtJztcbiAqICAgICAgJHNjb3BlLmxpbmsgPSAnaHR0cHM6Ly9nb29nbGUuY29tJztcbiAqICAgICAgJHNjb3BlLnRleHQgPSAnTmVxdWUgcG9ycm8gcXVpc3F1YW0gZXN0IHF1aSBkb2xvcmVtIGlwc3VtIHF1aWEgZG9sb3IuLi4nO1xuICogICAgfV0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICAgaXQoJ3Nob3VsZCBoYXZlIHRyYW5zY2x1ZGVkIHRoZSB0aXRsZSBhbmQgdGhlIGJvZHknLCBmdW5jdGlvbigpIHtcbiAqICAgICAgICB2YXIgdGl0bGVFbGVtZW50ID0gZWxlbWVudChieS5tb2RlbCgndGl0bGUnKSk7XG4gKiAgICAgICAgdGl0bGVFbGVtZW50LmNsZWFyKCk7XG4gKiAgICAgICAgdGl0bGVFbGVtZW50LnNlbmRLZXlzKCdUSVRMRScpO1xuICogICAgICAgIHZhciB0ZXh0RWxlbWVudCA9IGVsZW1lbnQoYnkubW9kZWwoJ3RleHQnKSk7XG4gKiAgICAgICAgdGV4dEVsZW1lbnQuY2xlYXIoKTtcbiAqICAgICAgICB0ZXh0RWxlbWVudC5zZW5kS2V5cygnVEVYVCcpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLnRpdGxlJykpLmdldFRleHQoKSkudG9FcXVhbCgnVElUTEUnKTtcbiAqICAgICAgICBleHBlY3QoZWxlbWVudChieS5iaW5kaW5nKCd0ZXh0JykpLmdldFRleHQoKSkudG9FcXVhbCgnVEVYVCcpO1xuICogICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnLmZvb3RlcicpKS5nZXRUZXh0KCkpLnRvRXF1YWwoJ0ZhbGxiYWNrIEZvb3RlcicpO1xuICogICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgbmdUcmFuc2NsdWRlTWluRXJyID0gbWluRXJyKCduZ1RyYW5zY2x1ZGUnKTtcbnZhciBuZ1RyYW5zY2x1ZGVEaXJlY3RpdmUgPSBbJyRjb21waWxlJywgZnVuY3Rpb24oJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBQycsXG4gICAgdGVybWluYWw6IHRydWUsXG4gICAgY29tcGlsZTogZnVuY3Rpb24gbmdUcmFuc2NsdWRlQ29tcGlsZSh0RWxlbWVudCkge1xuXG4gICAgICAvLyBSZW1vdmUgYW5kIGNhY2hlIGFueSBvcmlnaW5hbCBjb250ZW50IHRvIGFjdCBhcyBhIGZhbGxiYWNrXG4gICAgICB2YXIgZmFsbGJhY2tMaW5rRm4gPSAkY29tcGlsZSh0RWxlbWVudC5jb250ZW50cygpKTtcbiAgICAgIHRFbGVtZW50LmVtcHR5KCk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiBuZ1RyYW5zY2x1ZGVQb3N0TGluaygkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIGNvbnRyb2xsZXIsICR0cmFuc2NsdWRlKSB7XG5cbiAgICAgICAgaWYgKCEkdHJhbnNjbHVkZSkge1xuICAgICAgICAgIHRocm93IG5nVHJhbnNjbHVkZU1pbkVycignb3JwaGFuJyxcbiAgICAgICAgICAnSWxsZWdhbCB1c2Ugb2YgbmdUcmFuc2NsdWRlIGRpcmVjdGl2ZSBpbiB0aGUgdGVtcGxhdGUhICcgK1xuICAgICAgICAgICdObyBwYXJlbnQgZGlyZWN0aXZlIHRoYXQgcmVxdWlyZXMgYSB0cmFuc2NsdXNpb24gZm91bmQuICcgK1xuICAgICAgICAgICdFbGVtZW50OiB7MH0nLFxuICAgICAgICAgIHN0YXJ0aW5nVGFnKCRlbGVtZW50KSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIElmIHRoZSBhdHRyaWJ1dGUgaXMgb2YgdGhlIGZvcm06IGBuZy10cmFuc2NsdWRlPVwibmctdHJhbnNjbHVkZVwiYCB0aGVuIHRyZWF0IGl0IGxpa2UgdGhlIGRlZmF1bHRcbiAgICAgICAgaWYgKCRhdHRycy5uZ1RyYW5zY2x1ZGUgPT09ICRhdHRycy4kYXR0ci5uZ1RyYW5zY2x1ZGUpIHtcbiAgICAgICAgICAkYXR0cnMubmdUcmFuc2NsdWRlID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNsb3ROYW1lID0gJGF0dHJzLm5nVHJhbnNjbHVkZSB8fCAkYXR0cnMubmdUcmFuc2NsdWRlU2xvdDtcblxuICAgICAgICAvLyBJZiB0aGUgc2xvdCBpcyByZXF1aXJlZCBhbmQgbm8gdHJhbnNjbHVzaW9uIGNvbnRlbnQgaXMgcHJvdmlkZWQgdGhlbiB0aGlzIGNhbGwgd2lsbCB0aHJvdyBhbiBlcnJvclxuICAgICAgICAkdHJhbnNjbHVkZShuZ1RyYW5zY2x1ZGVDbG9uZUF0dGFjaEZuLCBudWxsLCBzbG90TmFtZSk7XG5cbiAgICAgICAgLy8gSWYgdGhlIHNsb3QgaXMgb3B0aW9uYWwgYW5kIG5vIHRyYW5zY2x1c2lvbiBjb250ZW50IGlzIHByb3ZpZGVkIHRoZW4gdXNlIHRoZSBmYWxsYmFjayBjb250ZW50XG4gICAgICAgIGlmIChzbG90TmFtZSAmJiAhJHRyYW5zY2x1ZGUuaXNTbG90RmlsbGVkKHNsb3ROYW1lKSkge1xuICAgICAgICAgIHVzZUZhbGxiYWNrQ29udGVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbmdUcmFuc2NsdWRlQ2xvbmVBdHRhY2hGbihjbG9uZSwgdHJhbnNjbHVkZWRTY29wZSkge1xuICAgICAgICAgIGlmIChjbG9uZS5sZW5ndGggJiYgbm90V2hpdGVzcGFjZShjbG9uZSkpIHtcbiAgICAgICAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVzZUZhbGxiYWNrQ29udGVudCgpO1xuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm90aGluZyBsaW5rZWQgYWdhaW5zdCB0aGUgdHJhbnNjbHVkZWQgc2NvcGUgc2luY2Ugbm8gY29udGVudCB3YXMgYXZhaWxhYmxlLFxuICAgICAgICAgICAgLy8gc28gaXQgc2hvdWxkIGJlIHNhZmUgdG8gY2xlYW4gdXAgdGhlIGdlbmVyYXRlZCBzY29wZS5cbiAgICAgICAgICAgIHRyYW5zY2x1ZGVkU2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB1c2VGYWxsYmFja0NvbnRlbnQoKSB7XG4gICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyB0aGUgZmFsbGJhY2sgY29udGVudCByYXRoZXIgdGhhbiB0aGUgdHJhbnNjbHVkZWQgY29udGVudCxcbiAgICAgICAgICAvLyB3ZSBsaW5rIGFnYWluc3QgdGhlIHNjb3BlIG9mIHRoaXMgZGlyZWN0aXZlIHJhdGhlciB0aGFuIHRoZSB0cmFuc2NsdWRlZCBzY29wZVxuICAgICAgICAgIGZhbGxiYWNrTGlua0ZuKCRzY29wZSwgZnVuY3Rpb24oY2xvbmUpIHtcbiAgICAgICAgICAgICRlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBub3RXaGl0ZXNwYWNlKG5vZGVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbm9kZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSBOT0RFX1RZUEVfVEVYVCB8fCBub2RlLm5vZGVWYWx1ZS50cmltKCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1dO1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIHNjcmlwdFxuICogQHJlc3RyaWN0IEVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIExvYWQgdGhlIGNvbnRlbnQgb2YgYSBgPHNjcmlwdD5gIGVsZW1lbnQgaW50byB7QGxpbmsgbmcuJHRlbXBsYXRlQ2FjaGUgYCR0ZW1wbGF0ZUNhY2hlYH0sIHNvIHRoYXQgdGhlXG4gKiB0ZW1wbGF0ZSBjYW4gYmUgdXNlZCBieSB7QGxpbmsgbmcuZGlyZWN0aXZlOm5nSW5jbHVkZSBgbmdJbmNsdWRlYH0sXG4gKiB7QGxpbmsgbmdSb3V0ZS5kaXJlY3RpdmU6bmdWaWV3IGBuZ1ZpZXdgfSwgb3Ige0BsaW5rIGd1aWRlL2RpcmVjdGl2ZSBkaXJlY3RpdmVzfS4gVGhlIHR5cGUgb2YgdGhlXG4gKiBgPHNjcmlwdD5gIGVsZW1lbnQgbXVzdCBiZSBzcGVjaWZpZWQgYXMgYHRleHQvbmctdGVtcGxhdGVgLCBhbmQgYSBjYWNoZSBuYW1lIGZvciB0aGUgdGVtcGxhdGUgbXVzdCBiZVxuICogYXNzaWduZWQgdGhyb3VnaCB0aGUgZWxlbWVudCdzIGBpZGAsIHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgYXMgYSBkaXJlY3RpdmUncyBgdGVtcGxhdGVVcmxgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIE11c3QgYmUgc2V0IHRvIGAndGV4dC9uZy10ZW1wbGF0ZSdgLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENhY2hlIG5hbWUgb2YgdGhlIHRlbXBsYXRlLlxuICpcbiAqIEBleGFtcGxlXG4gIDxleGFtcGxlICBuYW1lPVwic2NyaXB0LXRhZ1wiPlxuICAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L25nLXRlbXBsYXRlXCIgaWQ9XCIvdHBsLmh0bWxcIj5cbiAgICAgICAgQ29udGVudCBvZiB0aGUgdGVtcGxhdGUuXG4gICAgICA8L3NjcmlwdD5cblxuICAgICAgPGEgbmctY2xpY2s9XCJjdXJyZW50VHBsPScvdHBsLmh0bWwnXCIgaWQ9XCJ0cGwtbGlua1wiPkxvYWQgaW5saW5lZCB0ZW1wbGF0ZTwvYT5cbiAgICAgIDxkaXYgaWQ9XCJ0cGwtY29udGVudFwiIG5nLWluY2x1ZGUgc3JjPVwiY3VycmVudFRwbFwiPjwvZGl2PlxuICAgIDwvZmlsZT5cbiAgICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICBpdCgnc2hvdWxkIGxvYWQgdGVtcGxhdGUgZGVmaW5lZCBpbnNpZGUgc2NyaXB0IHRhZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtZW50KGJ5LmNzcygnI3RwbC1saW5rJykpLmNsaWNrKCk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI3RwbC1jb250ZW50JykpLmdldFRleHQoKSkudG9NYXRjaCgvQ29udGVudCBvZiB0aGUgdGVtcGxhdGUvKTtcbiAgICAgIH0pO1xuICAgIDwvZmlsZT5cbiAgPC9leGFtcGxlPlxuICovXG52YXIgc2NyaXB0RGlyZWN0aXZlID0gWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICBjb21waWxlOiBmdW5jdGlvbihlbGVtZW50LCBhdHRyKSB7XG4gICAgICBpZiAoYXR0ci50eXBlID09PSAndGV4dC9uZy10ZW1wbGF0ZScpIHtcbiAgICAgICAgdmFyIHRlbXBsYXRlVXJsID0gYXR0ci5pZCxcbiAgICAgICAgICAgIHRleHQgPSBlbGVtZW50WzBdLnRleHQ7XG5cbiAgICAgICAgJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlVXJsLCB0ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XTtcblxuLyogZXhwb3J0ZWQgc2VsZWN0RGlyZWN0aXZlLCBvcHRpb25EaXJlY3RpdmUgKi9cblxudmFyIG5vb3BOZ01vZGVsQ29udHJvbGxlciA9IHsgJHNldFZpZXdWYWx1ZTogbm9vcCwgJHJlbmRlcjogbm9vcCB9O1xuXG5mdW5jdGlvbiBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhvcHRpb25FbCwgdmFsdWUpIHtcbiAgb3B0aW9uRWwucHJvcCgnc2VsZWN0ZWQnLCB2YWx1ZSk7XG4gIC8qKlxuICAgKiBXaGVuIHVuc2VsZWN0aW5nIGFuIG9wdGlvbiwgc2V0dGluZyB0aGUgcHJvcGVydHkgdG8gbnVsbCAvIGZhbHNlIHNob3VsZCBiZSBlbm91Z2hcbiAgICogSG93ZXZlciwgc2NyZWVucmVhZGVycyBtaWdodCByZWFjdCB0byB0aGUgc2VsZWN0ZWQgYXR0cmlidXRlIGluc3RlYWQsIHNlZVxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy8xNDQxOVxuICAgKiBOb3RlOiBcInNlbGVjdGVkXCIgaXMgYSBib29sZWFuIGF0dHIgYW5kIHdpbGwgYmUgcmVtb3ZlZCB3aGVuIHRoZSBcInZhbHVlXCIgYXJnIGluIGF0dHIoKSBpcyBmYWxzZVxuICAgKiBvciBudWxsXG4gICAqL1xuICBvcHRpb25FbC5hdHRyKCdzZWxlY3RlZCcsIHZhbHVlKTtcbn1cblxuLyoqXG4gKiBAbmdkb2MgdHlwZVxuICogQG5hbWUgIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGUgY29udHJvbGxlciBmb3IgdGhlIHtAbGluayBuZy5zZWxlY3Qgc2VsZWN0fSBkaXJlY3RpdmUuIFRoZSBjb250cm9sbGVyIGV4cG9zZXNcbiAqIGEgZmV3IHV0aWxpdHkgbWV0aG9kcyB0aGF0IGNhbiBiZSB1c2VkIHRvIGF1Z21lbnQgdGhlIGJlaGF2aW9yIG9mIGEgcmVndWxhciBvciBhblxuICoge0BsaW5rIG5nLm5nT3B0aW9ucyBuZ09wdGlvbnN9IHNlbGVjdCBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiAjIyMgU2V0IGEgY3VzdG9tIGVycm9yIHdoZW4gdGhlIHVua25vd24gb3B0aW9uIGlzIHNlbGVjdGVkXG4gKlxuICogVGhpcyBleGFtcGxlIHNldHMgYSBjdXN0b20gZXJyb3IgXCJ1bmtub3duVmFsdWVcIiBvbiB0aGUgbmdNb2RlbENvbnRyb2xsZXJcbiAqIHdoZW4gdGhlIHNlbGVjdCBlbGVtZW50J3MgdW5rbm93biBvcHRpb24gaXMgc2VsZWN0ZWQsIGkuZS4gd2hlbiB0aGUgbW9kZWwgaXMgc2V0IHRvIGEgdmFsdWVcbiAqIHRoYXQgaXMgbm90IG1hdGNoZWQgYnkgYW55IG9wdGlvbi5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXVua25vd24tdmFsdWUtZXJyb3JcIiBtb2R1bGU9XCJzdGF0aWNTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cInRlc3RTZWxlY3RcIj4gU2luZ2xlIHNlbGVjdDogPC9sYWJlbD48YnI+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwidGVzdFNlbGVjdFwiIG5nLW1vZGVsPVwic2VsZWN0ZWRcIiB1bmtub3duLXZhbHVlLWVycm9yPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+PGJyPlxuICogICAgIDxzcGFuIGNsYXNzPVwiZXJyb3JcIiBuZy1pZj1cIm15Rm9ybS50ZXN0U2VsZWN0LiRlcnJvci51bmtub3duVmFsdWVcIj5cbiAqICAgICAgIEVycm9yOiBUaGUgY3VycmVudCBtb2RlbCBkb2Vzbid0IG1hdGNoIGFueSBvcHRpb248L3NwYW4+PGJyPlxuICpcbiAqICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZm9yY2VVbmtub3duT3B0aW9uKClcIj5Gb3JjZSB1bmtub3duIG9wdGlvbjwvYnV0dG9uPjxicj5cbiAqICAgPC9mb3JtPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ3N0YXRpY1NlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLnNlbGVjdGVkID0gbnVsbDtcbiAqXG4gKiAgICAgICRzY29wZS5mb3JjZVVua25vd25PcHRpb24gPSBmdW5jdGlvbigpIHtcbiAqICAgICAgICAkc2NvcGUuc2VsZWN0ZWQgPSAnbm9uc2Vuc2UnO1xuICogICAgICB9O1xuICogICB9XSlcbiAqICAgLmRpcmVjdGl2ZSgndW5rbm93blZhbHVlRXJyb3InLCBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ3NlbGVjdCddLFxuICogICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICogICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAqICAgICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1sxXTtcbiAqXG4gKiAgICAgICAgIG5nTW9kZWxDdHJsLiR2YWxpZGF0b3JzLnVua25vd25WYWx1ZSA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICogICAgICAgICAgIGlmIChzZWxlY3RDdHJsLiRpc1Vua25vd25PcHRpb25TZWxlY3RlZCgpKSB7XG4gKiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gKiAgICAgICAgICAgfVxuICpcbiAqICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAqICAgICAgICAgfTtcbiAqICAgICAgIH1cbiAqXG4gKiAgICAgfTtcbiAqICAgfSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTZXQgdGhlIFwicmVxdWlyZWRcIiBlcnJvciB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGUgXCJyZXF1aXJlZFwiIGVycm9yIG9uIHRoZSBuZ01vZGVsQ29udHJvbGxlciBpcyBvbmx5IHNldCBvbiBhIHJlcXVpcmVkIHNlbGVjdFxuICogd2hlbiB0aGUgZW1wdHkgb3B0aW9uIGlzIHNlbGVjdGVkLiBUaGlzIGV4YW1wbGUgYWRkcyBhIGN1c3RvbSBkaXJlY3RpdmUgdGhhdCBhbHNvIHNldHMgdGhlXG4gKiBlcnJvciB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXVua25vd24tdmFsdWUtcmVxdWlyZWRcIiBtb2R1bGU9XCJzdGF0aWNTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cInRlc3RTZWxlY3RcIj4gU2VsZWN0OiA8L2xhYmVsPjxicj5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJ0ZXN0U2VsZWN0XCIgbmctbW9kZWw9XCJzZWxlY3RlZFwiIHJlcXVpcmVkIHVua25vd24tdmFsdWUtcmVxdWlyZWQ+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTFcIj5PcHRpb24gMTwvb3B0aW9uPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0yXCI+T3B0aW9uIDI8L29wdGlvbj5cbiAqICAgICA8L3NlbGVjdD48YnI+XG4gKiAgICAgPHNwYW4gY2xhc3M9XCJlcnJvclwiIG5nLWlmPVwibXlGb3JtLnRlc3RTZWxlY3QuJGVycm9yLnJlcXVpcmVkXCI+RXJyb3I6IFBsZWFzZSBzZWxlY3QgYSB2YWx1ZTwvc3Bhbj48YnI+XG4gKlxuICogICAgIDxidXR0b24gbmctY2xpY2s9XCJmb3JjZVVua25vd25PcHRpb24oKVwiPkZvcmNlIHVua25vd24gb3B0aW9uPC9idXR0b24+PGJyPlxuICogICA8L2Zvcm0+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnc3RhdGljU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuc2VsZWN0ZWQgPSBudWxsO1xuICpcbiAqICAgICAgJHNjb3BlLmZvcmNlVW5rbm93bk9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICRzY29wZS5zZWxlY3RlZCA9ICdub25zZW5zZSc7XG4gKiAgICAgIH07XG4gKiAgIH1dKVxuICogICAuZGlyZWN0aXZlKCd1bmtub3duVmFsdWVSZXF1aXJlZCcsIGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiB7XG4gKiAgICAgICBwcmlvcml0eTogMSwgLy8gVGhpcyBkaXJlY3RpdmUgbXVzdCBydW4gYWZ0ZXIgdGhlIHJlcXVpcmVkIGRpcmVjdGl2ZSBoYXMgYWRkZWQgaXRzIHZhbGlkYXRvclxuICogICAgICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ3NlbGVjdCddLFxuICogICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xuICogICAgICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1swXTtcbiAqICAgICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1sxXTtcbiAqXG4gKiAgICAgICAgIHZhciBvcmlnaW5hbFJlcXVpcmVkVmFsaWRhdG9yID0gbmdNb2RlbEN0cmwuJHZhbGlkYXRvcnMucmVxdWlyZWQ7XG4gKlxuICogICAgICAgICBuZ01vZGVsQ3RybC4kdmFsaWRhdG9ycy5yZXF1aXJlZCA9IGZ1bmN0aW9uKCkge1xuICogICAgICAgICAgIGlmIChhdHRycy5yZXF1aXJlZCAmJiBzZWxlY3RDdHJsLiRpc1Vua25vd25PcHRpb25TZWxlY3RlZCgpKSB7XG4gKiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gKiAgICAgICAgICAgfVxuICpcbiAqICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxSZXF1aXJlZFZhbGlkYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICogICAgICAgICB9O1xuICogICAgICAgfVxuICogICAgIH07XG4gKiAgIH0pO1xuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICogIGl0KCdzaG91bGQgc2hvdyB0aGUgZXJyb3IgbWVzc2FnZSB3aGVuIHRoZSB1bmtub3duIG9wdGlvbiBpcyBzZWxlY3RlZCcsIGZ1bmN0aW9uKCkge1xuXG4gICAgICB2YXIgZXJyb3IgPSBlbGVtZW50KGJ5LmNsYXNzTmFtZSgnZXJyb3InKSk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5nZXRUZXh0KCkpLnRvQmUoJ0Vycm9yOiBQbGVhc2Ugc2VsZWN0IGEgdmFsdWUnKTtcblxuICAgICAgZWxlbWVudChieS5jc3NDb250YWluaW5nVGV4dCgnb3B0aW9uJywgJ09wdGlvbiAxJykpLmNsaWNrKCk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5pc1ByZXNlbnQoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIGVsZW1lbnQoYnkudGFnTmFtZSgnYnV0dG9uJykpLmNsaWNrKCk7XG5cbiAgICAgIGV4cGVjdChlcnJvci5nZXRUZXh0KCkpLnRvQmUoJ0Vycm9yOiBQbGVhc2Ugc2VsZWN0IGEgdmFsdWUnKTtcbiAgICB9KTtcbiAqIDwvZmlsZT5cbiAqPC9leGFtcGxlPlxuICpcbiAqXG4gKi9cbnZhciBTZWxlY3RDb250cm9sbGVyID1cbiAgICAgICAgWyckZWxlbWVudCcsICckc2NvcGUnLCAvKiogQHRoaXMgKi8gZnVuY3Rpb24oJGVsZW1lbnQsICRzY29wZSkge1xuXG4gIHZhciBzZWxmID0gdGhpcyxcbiAgICAgIG9wdGlvbnNNYXAgPSBuZXcgTmdNYXAoKTtcblxuICBzZWxmLnNlbGVjdFZhbHVlTWFwID0ge307IC8vIEtleXMgYXJlIHRoZSBoYXNoZWQgdmFsdWVzLCB2YWx1ZXMgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXG4gIC8vIElmIHRoZSBuZ01vZGVsIGRvZXNuJ3QgZ2V0IHByb3ZpZGVkIHRoZW4gcHJvdmlkZSBhIGR1bW15IG5vb3AgdmVyc2lvbiB0byBwcmV2ZW50IGVycm9yc1xuICBzZWxmLm5nTW9kZWxDdHJsID0gbm9vcE5nTW9kZWxDb250cm9sbGVyO1xuICBzZWxmLm11bHRpcGxlID0gZmFsc2U7XG5cbiAgLy8gVGhlIFwidW5rbm93blwiIG9wdGlvbiBpcyBvbmUgdGhhdCBpcyBwcmVwZW5kZWQgdG8gdGhlIGxpc3QgaWYgdGhlIHZpZXdWYWx1ZVxuICAvLyBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgdGhlIG9wdGlvbnMuIFdoZW4gaXQgaXMgcmVuZGVyZWQgdGhlIHZhbHVlIG9mIHRoZSB1bmtub3duXG4gIC8vIG9wdGlvbiBpcyAnPyBYWFggPycgd2hlcmUgWFhYIGlzIHRoZSBoYXNoS2V5IG9mIHRoZSB2YWx1ZSB0aGF0IGlzIG5vdCBrbm93bi5cbiAgLy9cbiAgLy8gU3VwcG9ydDogSUUgOSBvbmx5XG4gIC8vIFdlIGNhbid0IGp1c3QganFMaXRlKCc8b3B0aW9uPicpIHNpbmNlIGpxTGl0ZSBpcyBub3Qgc21hcnQgZW5vdWdoXG4gIC8vIHRvIGNyZWF0ZSBpdCBpbiA8c2VsZWN0PiBhbmQgSUUgYmFyZnMgb3RoZXJ3aXNlLlxuICBzZWxmLnVua25vd25PcHRpb24gPSBqcUxpdGUod2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpKTtcblxuICAvLyBUaGUgZW1wdHkgb3B0aW9uIGlzIGFuIG9wdGlvbiB3aXRoIHRoZSB2YWx1ZSAnJyB0aGF0IHRoZSBhcHBsaWNhdGlvbiBkZXZlbG9wZXIgY2FuXG4gIC8vIHByb3ZpZGUgaW5zaWRlIHRoZSBzZWxlY3QuIEl0IGlzIGFsd2F5cyBzZWxlY3RhYmxlIGFuZCBpbmRpY2F0ZXMgdGhhdCBhIFwibnVsbFwiIHNlbGVjdGlvbiBoYXNcbiAgLy8gYmVlbiBtYWRlIGJ5IHRoZSB1c2VyLlxuICAvLyBJZiB0aGUgc2VsZWN0IGhhcyBhbiBlbXB0eSBvcHRpb24sIGFuZCB0aGUgbW9kZWwgb2YgdGhlIHNlbGVjdCBpcyBzZXQgdG8gXCJ1bmRlZmluZWRcIiBvciBcIm51bGxcIixcbiAgLy8gdGhlIGVtcHR5IG9wdGlvbiBpcyBzZWxlY3RlZC5cbiAgLy8gSWYgdGhlIG1vZGVsIGlzIHNldCB0byBhIGRpZmZlcmVudCB1bm1hdGNoZWQgdmFsdWUsIHRoZSB1bmtub3duIG9wdGlvbiBpcyByZW5kZXJlZCBhbmRcbiAgLy8gc2VsZWN0ZWQsIGkuZSBib3RoIGFyZSBwcmVzZW50LCBiZWNhdXNlIGEgXCJudWxsXCIgc2VsZWN0aW9uIGFuZCBhbiB1bmtub3duIHZhbHVlIGFyZSBkaWZmZXJlbnQuXG4gIHNlbGYuaGFzRW1wdHlPcHRpb24gPSBmYWxzZTtcbiAgc2VsZi5lbXB0eU9wdGlvbiA9IHVuZGVmaW5lZDtcblxuICBzZWxmLnJlbmRlclVua25vd25PcHRpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgdW5rbm93blZhbCA9IHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUodmFsKTtcbiAgICBzZWxmLnVua25vd25PcHRpb24udmFsKHVua25vd25WYWwpO1xuICAgICRlbGVtZW50LnByZXBlbmQoc2VsZi51bmtub3duT3B0aW9uKTtcbiAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhzZWxmLnVua25vd25PcHRpb24sIHRydWUpO1xuICAgICRlbGVtZW50LnZhbCh1bmtub3duVmFsKTtcbiAgfTtcblxuICBzZWxmLnVwZGF0ZVVua25vd25PcHRpb24gPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgdW5rbm93blZhbCA9IHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUodmFsKTtcbiAgICBzZWxmLnVua25vd25PcHRpb24udmFsKHVua25vd25WYWwpO1xuICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKHNlbGYudW5rbm93bk9wdGlvbiwgdHJ1ZSk7XG4gICAgJGVsZW1lbnQudmFsKHVua25vd25WYWwpO1xuICB9O1xuXG4gIHNlbGYuZ2VuZXJhdGVVbmtub3duT3B0aW9uVmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICByZXR1cm4gJz8gJyArIGhhc2hLZXkodmFsKSArICcgPyc7XG4gIH07XG5cbiAgc2VsZi5yZW1vdmVVbmtub3duT3B0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHNlbGYudW5rbm93bk9wdGlvbi5wYXJlbnQoKSkgc2VsZi51bmtub3duT3B0aW9uLnJlbW92ZSgpO1xuICB9O1xuXG4gIHNlbGYuc2VsZWN0RW1wdHlPcHRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2VsZi5lbXB0eU9wdGlvbikge1xuICAgICAgJGVsZW1lbnQudmFsKCcnKTtcbiAgICAgIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKHNlbGYuZW1wdHlPcHRpb24sIHRydWUpO1xuICAgIH1cbiAgfTtcblxuICBzZWxmLnVuc2VsZWN0RW1wdHlPcHRpb24gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoc2VsZi5oYXNFbXB0eU9wdGlvbikge1xuICAgICAgc2V0T3B0aW9uU2VsZWN0ZWRTdGF0dXMoc2VsZi5lbXB0eU9wdGlvbiwgZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgIC8vIGRpc2FibGUgdW5rbm93biBvcHRpb24gc28gdGhhdCB3ZSBkb24ndCBkbyB3b3JrIHdoZW4gdGhlIHdob2xlIHNlbGVjdCBpcyBiZWluZyBkZXN0cm95ZWRcbiAgICBzZWxmLnJlbmRlclVua25vd25PcHRpb24gPSBub29wO1xuICB9KTtcblxuICAvLyBSZWFkIHRoZSB2YWx1ZSBvZiB0aGUgc2VsZWN0IGNvbnRyb2wsIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGNoYW5nZXMgZGVwZW5kaW5nXG4gIC8vIHVwb24gd2hldGhlciB0aGUgc2VsZWN0IGNhbiBoYXZlIG11bHRpcGxlIHZhbHVlcyBhbmQgd2hldGhlciBuZ09wdGlvbnMgaXMgYXQgd29yay5cbiAgc2VsZi5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkU2luZ2xlVmFsdWUoKSB7XG4gICAgdmFyIHZhbCA9ICRlbGVtZW50LnZhbCgpO1xuICAgIC8vIG5nVmFsdWUgYWRkZWQgb3B0aW9uIHZhbHVlcyBhcmUgc3RvcmVkIGluIHRoZSBzZWxlY3RWYWx1ZU1hcCwgbm9ybWFsIGludGVycG9sYXRpb25zIGFyZSBub3RcbiAgICB2YXIgcmVhbFZhbCA9IHZhbCBpbiBzZWxmLnNlbGVjdFZhbHVlTWFwID8gc2VsZi5zZWxlY3RWYWx1ZU1hcFt2YWxdIDogdmFsO1xuXG4gICAgaWYgKHNlbGYuaGFzT3B0aW9uKHJlYWxWYWwpKSB7XG4gICAgICByZXR1cm4gcmVhbFZhbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuXG4gIC8vIFdyaXRlIHRoZSB2YWx1ZSB0byB0aGUgc2VsZWN0IGNvbnRyb2wsIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGNoYW5nZXMgZGVwZW5kaW5nXG4gIC8vIHVwb24gd2hldGhlciB0aGUgc2VsZWN0IGNhbiBoYXZlIG11bHRpcGxlIHZhbHVlcyBhbmQgd2hldGhlciBuZ09wdGlvbnMgaXMgYXQgd29yay5cbiAgc2VsZi53cml0ZVZhbHVlID0gZnVuY3Rpb24gd3JpdGVTaW5nbGVWYWx1ZSh2YWx1ZSkge1xuICAgIC8vIE1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIHNlbGVjdGVkIGF0dHJpYnV0ZSBmcm9tIHRoZSBwcmV2aW91c2x5IHNlbGVjdGVkIG9wdGlvblxuICAgIC8vIE90aGVyd2lzZSwgc2NyZWVuIHJlYWRlcnMgbWlnaHQgZ2V0IGNvbmZ1c2VkXG4gICAgdmFyIGN1cnJlbnRseVNlbGVjdGVkT3B0aW9uID0gJGVsZW1lbnRbMF0ub3B0aW9uc1skZWxlbWVudFswXS5zZWxlY3RlZEluZGV4XTtcbiAgICBpZiAoY3VycmVudGx5U2VsZWN0ZWRPcHRpb24pIHNldE9wdGlvblNlbGVjdGVkU3RhdHVzKGpxTGl0ZShjdXJyZW50bHlTZWxlY3RlZE9wdGlvbiksIGZhbHNlKTtcblxuICAgIGlmIChzZWxmLmhhc09wdGlvbih2YWx1ZSkpIHtcbiAgICAgIHNlbGYucmVtb3ZlVW5rbm93bk9wdGlvbigpO1xuXG4gICAgICB2YXIgaGFzaGVkVmFsID0gaGFzaEtleSh2YWx1ZSk7XG4gICAgICAkZWxlbWVudC52YWwoaGFzaGVkVmFsIGluIHNlbGYuc2VsZWN0VmFsdWVNYXAgPyBoYXNoZWRWYWwgOiB2YWx1ZSk7XG5cbiAgICAgIC8vIFNldCBzZWxlY3RlZCBhdHRyaWJ1dGUgYW5kIHByb3BlcnR5IG9uIHNlbGVjdGVkIG9wdGlvbiBmb3Igc2NyZWVuIHJlYWRlcnNcbiAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9ICRlbGVtZW50WzBdLm9wdGlvbnNbJGVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleF07XG4gICAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhqcUxpdGUoc2VsZWN0ZWRPcHRpb24pLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5zZWxlY3RVbmtub3duT3JFbXB0eU9wdGlvbih2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG5cbiAgLy8gVGVsbCB0aGUgc2VsZWN0IGNvbnRyb2wgdGhhdCBhbiBvcHRpb24sIHdpdGggdGhlIGdpdmVuIHZhbHVlLCBoYXMgYmVlbiBhZGRlZFxuICBzZWxmLmFkZE9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgLy8gU2tpcCBjb21tZW50IG5vZGVzLCBhcyB0aGV5IG9ubHkgcG9sbHV0ZSB0aGUgYG9wdGlvbnNNYXBgXG4gICAgaWYgKGVsZW1lbnRbMF0ubm9kZVR5cGUgPT09IE5PREVfVFlQRV9DT01NRU5UKSByZXR1cm47XG5cbiAgICBhc3NlcnROb3RIYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgJ1wib3B0aW9uIHZhbHVlXCInKTtcbiAgICBpZiAodmFsdWUgPT09ICcnKSB7XG4gICAgICBzZWxmLmhhc0VtcHR5T3B0aW9uID0gdHJ1ZTtcbiAgICAgIHNlbGYuZW1wdHlPcHRpb24gPSBlbGVtZW50O1xuICAgIH1cbiAgICB2YXIgY291bnQgPSBvcHRpb25zTWFwLmdldCh2YWx1ZSkgfHwgMDtcbiAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgY291bnQgKyAxKTtcbiAgICAvLyBPbmx5IHJlbmRlciBhdCB0aGUgZW5kIG9mIGEgZGlnZXN0LiBUaGlzIGltcHJvdmVzIHJlbmRlciBwZXJmb3JtYW5jZSB3aGVuIG1hbnkgb3B0aW9uc1xuICAgIC8vIGFyZSBhZGRlZCBkdXJpbmcgYSBkaWdlc3QgYW5kIGVuc3VyZXMgYWxsIHJlbGV2YW50IG9wdGlvbnMgYXJlIGNvcnJlY3RseSBtYXJrZWQgYXMgc2VsZWN0ZWRcbiAgICBzY2hlZHVsZVJlbmRlcigpO1xuICB9O1xuXG4gIC8vIFRlbGwgdGhlIHNlbGVjdCBjb250cm9sIHRoYXQgYW4gb3B0aW9uLCB3aXRoIHRoZSBnaXZlbiB2YWx1ZSwgaGFzIGJlZW4gcmVtb3ZlZFxuICBzZWxmLnJlbW92ZU9wdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGNvdW50ID0gb3B0aW9uc01hcC5nZXQodmFsdWUpO1xuICAgIGlmIChjb3VudCkge1xuICAgICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICAgIG9wdGlvbnNNYXAuZGVsZXRlKHZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICAgIHNlbGYuaGFzRW1wdHlPcHRpb24gPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLmVtcHR5T3B0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgY291bnQgLSAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQ2hlY2sgd2hldGhlciB0aGUgc2VsZWN0IGNvbnRyb2wgaGFzIGFuIG9wdGlvbiBtYXRjaGluZyB0aGUgZ2l2ZW4gdmFsdWVcbiAgc2VsZi5oYXNPcHRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiAhIW9wdGlvbnNNYXAuZ2V0KHZhbHVlKTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBzZWxlY3QuU2VsZWN0Q29udHJvbGxlciMkaGFzRW1wdHlPcHRpb25cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzZWxlY3QgZWxlbWVudCBjdXJyZW50bHkgaGFzIGFuIGVtcHR5IG9wdGlvblxuICAgKiBlbGVtZW50LCBpLmUuIGFuIG9wdGlvbiB0aGF0IHNpZ25pZmllcyB0aGF0IHRoZSBzZWxlY3QgaXMgZW1wdHkgLyB0aGUgc2VsZWN0aW9uIGlzIG51bGwuXG4gICAqXG4gICAqL1xuICBzZWxmLiRoYXNFbXB0eU9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBzZWxmLmhhc0VtcHR5T3B0aW9uO1xuICB9O1xuXG4gIC8qKlxuICAgKiBAbmdkb2MgbWV0aG9kXG4gICAqIEBuYW1lIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyIyRpc1Vua25vd25PcHRpb25TZWxlY3RlZFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNlbGVjdCBlbGVtZW50J3MgdW5rbm93biBvcHRpb24gaXMgc2VsZWN0ZWQuIFRoZSB1bmtub3duIG9wdGlvbiBpcyBhZGRlZFxuICAgKiBhbmQgYXV0b21hdGljYWxseSBzZWxlY3RlZCB3aGVuZXZlciB0aGUgc2VsZWN0IG1vZGVsIGRvZXNuJ3QgbWF0Y2ggYW55IG9wdGlvbi5cbiAgICpcbiAgICovXG4gIHNlbGYuJGlzVW5rbm93bk9wdGlvblNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gUHJlc2VuY2Ugb2YgdGhlIHVua25vd24gb3B0aW9uIG1lYW5zIGl0IGlzIHNlbGVjdGVkXG4gICAgcmV0dXJuICRlbGVtZW50WzBdLm9wdGlvbnNbMF0gPT09IHNlbGYudW5rbm93bk9wdGlvblswXTtcbiAgfTtcblxuICAvKipcbiAgICogQG5nZG9jIG1ldGhvZFxuICAgKiBAbmFtZSBzZWxlY3QuU2VsZWN0Q29udHJvbGxlciMkaXNFbXB0eU9wdGlvblNlbGVjdGVkXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc2VsZWN0IGVsZW1lbnQgaGFzIGFuIGVtcHR5IG9wdGlvbiBhbmQgdGhpcyBlbXB0eSBvcHRpb24gaXMgY3VycmVudGx5XG4gICAqIHNlbGVjdGVkLiBSZXR1cm5zIGBmYWxzZWAgaWYgdGhlIHNlbGVjdCBlbGVtZW50IGhhcyBubyBlbXB0eSBvcHRpb24gb3IgaXQgaXMgbm90IHNlbGVjdGVkLlxuICAgKlxuICAgKi9cbiAgc2VsZi4kaXNFbXB0eU9wdGlvblNlbGVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHNlbGYuaGFzRW1wdHlPcHRpb24gJiYgJGVsZW1lbnRbMF0ub3B0aW9uc1skZWxlbWVudFswXS5zZWxlY3RlZEluZGV4XSA9PT0gc2VsZi5lbXB0eU9wdGlvblswXTtcbiAgfTtcblxuICBzZWxmLnNlbGVjdFVua25vd25PckVtcHR5T3B0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiBzZWxmLmVtcHR5T3B0aW9uKSB7XG4gICAgICBzZWxmLnJlbW92ZVVua25vd25PcHRpb24oKTtcbiAgICAgIHNlbGYuc2VsZWN0RW1wdHlPcHRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHNlbGYudW5rbm93bk9wdGlvbi5wYXJlbnQoKS5sZW5ndGgpIHtcbiAgICAgIHNlbGYudXBkYXRlVW5rbm93bk9wdGlvbih2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYucmVuZGVyVW5rbm93bk9wdGlvbih2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciByZW5kZXJTY2hlZHVsZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gc2NoZWR1bGVSZW5kZXIoKSB7XG4gICAgaWYgKHJlbmRlclNjaGVkdWxlZCkgcmV0dXJuO1xuICAgIHJlbmRlclNjaGVkdWxlZCA9IHRydWU7XG4gICAgJHNjb3BlLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpIHtcbiAgICAgIHJlbmRlclNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgdXBkYXRlU2NoZWR1bGVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIHNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlKHJlbmRlckFmdGVyKSB7XG4gICAgaWYgKHVwZGF0ZVNjaGVkdWxlZCkgcmV0dXJuO1xuXG4gICAgdXBkYXRlU2NoZWR1bGVkID0gdHJ1ZTtcblxuICAgICRzY29wZS4kJHBvc3REaWdlc3QoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoJHNjb3BlLiQkZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICAgIHVwZGF0ZVNjaGVkdWxlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKHNlbGYucmVhZFZhbHVlKCkpO1xuICAgICAgaWYgKHJlbmRlckFmdGVyKSBzZWxmLm5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgc2VsZi5yZWdpc3Rlck9wdGlvbiA9IGZ1bmN0aW9uKG9wdGlvblNjb3BlLCBvcHRpb25FbGVtZW50LCBvcHRpb25BdHRycywgaW50ZXJwb2xhdGVWYWx1ZUZuLCBpbnRlcnBvbGF0ZVRleHRGbikge1xuXG4gICAgaWYgKG9wdGlvbkF0dHJzLiRhdHRyLm5nVmFsdWUpIHtcbiAgICAgIC8vIFRoZSB2YWx1ZSBhdHRyaWJ1dGUgaXMgc2V0IGJ5IG5nVmFsdWVcbiAgICAgIHZhciBvbGRWYWwsIGhhc2hlZFZhbCA9IE5hTjtcbiAgICAgIG9wdGlvbkF0dHJzLiRvYnNlcnZlKCd2YWx1ZScsIGZ1bmN0aW9uIHZhbHVlQXR0cmlidXRlT2JzZXJ2ZUFjdGlvbihuZXdWYWwpIHtcblxuICAgICAgICB2YXIgcmVtb3ZhbDtcbiAgICAgICAgdmFyIHByZXZpb3VzbHlTZWxlY3RlZCA9IG9wdGlvbkVsZW1lbnQucHJvcCgnc2VsZWN0ZWQnKTtcblxuICAgICAgICBpZiAoaXNEZWZpbmVkKGhhc2hlZFZhbCkpIHtcbiAgICAgICAgICBzZWxmLnJlbW92ZU9wdGlvbihvbGRWYWwpO1xuICAgICAgICAgIGRlbGV0ZSBzZWxmLnNlbGVjdFZhbHVlTWFwW2hhc2hlZFZhbF07XG4gICAgICAgICAgcmVtb3ZhbCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBoYXNoZWRWYWwgPSBoYXNoS2V5KG5ld1ZhbCk7XG4gICAgICAgIG9sZFZhbCA9IG5ld1ZhbDtcbiAgICAgICAgc2VsZi5zZWxlY3RWYWx1ZU1hcFtoYXNoZWRWYWxdID0gbmV3VmFsO1xuICAgICAgICBzZWxmLmFkZE9wdGlvbihuZXdWYWwsIG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAvLyBTZXQgdGhlIGF0dHJpYnV0ZSBkaXJlY3RseSBpbnN0ZWFkIG9mIHVzaW5nIG9wdGlvbkF0dHJzLiRzZXQgLSB0aGlzIHN0b3BzIHRoZSBvYnNlcnZlclxuICAgICAgICAvLyBmcm9tIGZpcmluZyBhIHNlY29uZCB0aW1lLiBPdGhlciAkb2JzZXJ2ZXJzIG9uIHZhbHVlIHdpbGwgYWxzbyBnZXQgdGhlIHJlc3VsdCBvZiB0aGVcbiAgICAgICAgLy8gbmdWYWx1ZSBleHByZXNzaW9uLCBub3QgdGhlIGhhc2hlZCB2YWx1ZVxuICAgICAgICBvcHRpb25FbGVtZW50LmF0dHIoJ3ZhbHVlJywgaGFzaGVkVmFsKTtcblxuICAgICAgICBpZiAocmVtb3ZhbCAmJiBwcmV2aW91c2x5U2VsZWN0ZWQpIHtcbiAgICAgICAgICBzY2hlZHVsZVZpZXdWYWx1ZVVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGVWYWx1ZUZuKSB7XG4gICAgICAvLyBUaGUgdmFsdWUgYXR0cmlidXRlIGlzIGludGVycG9sYXRlZFxuICAgICAgb3B0aW9uQXR0cnMuJG9ic2VydmUoJ3ZhbHVlJywgZnVuY3Rpb24gdmFsdWVBdHRyaWJ1dGVPYnNlcnZlQWN0aW9uKG5ld1ZhbCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBpcyBvdmVyd3JpdHRlbiBpbiBuZ09wdGlvbnMgYW5kIGhhcyBzaWRlLWVmZmVjdHMhXG4gICAgICAgIHNlbGYucmVhZFZhbHVlKCk7XG5cbiAgICAgICAgdmFyIHJlbW92YWw7XG4gICAgICAgIHZhciBwcmV2aW91c2x5U2VsZWN0ZWQgPSBvcHRpb25FbGVtZW50LnByb3AoJ3NlbGVjdGVkJyk7XG5cbiAgICAgICAgaWYgKGlzRGVmaW5lZChvbGRWYWwpKSB7XG4gICAgICAgICAgc2VsZi5yZW1vdmVPcHRpb24ob2xkVmFsKTtcbiAgICAgICAgICByZW1vdmFsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvbGRWYWwgPSBuZXdWYWw7XG4gICAgICAgIHNlbGYuYWRkT3B0aW9uKG5ld1ZhbCwgb3B0aW9uRWxlbWVudCk7XG5cbiAgICAgICAgaWYgKHJlbW92YWwgJiYgcHJldmlvdXNseVNlbGVjdGVkKSB7XG4gICAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZVRleHRGbikge1xuICAgICAgLy8gVGhlIHRleHQgY29udGVudCBpcyBpbnRlcnBvbGF0ZWRcbiAgICAgIG9wdGlvblNjb3BlLiR3YXRjaChpbnRlcnBvbGF0ZVRleHRGbiwgZnVuY3Rpb24gaW50ZXJwb2xhdGVXYXRjaEFjdGlvbihuZXdWYWwsIG9sZFZhbCkge1xuICAgICAgICBvcHRpb25BdHRycy4kc2V0KCd2YWx1ZScsIG5ld1ZhbCk7XG4gICAgICAgIHZhciBwcmV2aW91c2x5U2VsZWN0ZWQgPSBvcHRpb25FbGVtZW50LnByb3AoJ3NlbGVjdGVkJyk7XG4gICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlT3B0aW9uKG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5hZGRPcHRpb24obmV3VmFsLCBvcHRpb25FbGVtZW50KTtcblxuICAgICAgICBpZiAob2xkVmFsICYmIHByZXZpb3VzbHlTZWxlY3RlZCkge1xuICAgICAgICAgIHNjaGVkdWxlVmlld1ZhbHVlVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgdmFsdWUgYXR0cmlidXRlIGlzIHN0YXRpY1xuICAgICAgc2VsZi5hZGRPcHRpb24ob3B0aW9uQXR0cnMudmFsdWUsIG9wdGlvbkVsZW1lbnQpO1xuICAgIH1cblxuXG4gICAgb3B0aW9uQXR0cnMuJG9ic2VydmUoJ2Rpc2FibGVkJywgZnVuY3Rpb24obmV3VmFsKSB7XG5cbiAgICAgIC8vIFNpbmNlIG1vZGVsIHVwZGF0ZXMgd2lsbCBhbHNvIHNlbGVjdCBkaXNhYmxlZCBvcHRpb25zIChsaWtlIG5nT3B0aW9ucyksXG4gICAgICAvLyB3ZSBvbmx5IGhhdmUgdG8gaGFuZGxlIG9wdGlvbnMgYmVjb21pbmcgZGlzYWJsZWQsIG5vdCBlbmFibGVkXG5cbiAgICAgIGlmIChuZXdWYWwgPT09ICd0cnVlJyB8fCBuZXdWYWwgJiYgb3B0aW9uRWxlbWVudC5wcm9wKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgIGlmIChzZWxmLm11bHRpcGxlKSB7XG4gICAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUodHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5uZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xuICAgICAgICAgIHNlbGYubmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBvcHRpb25FbGVtZW50Lm9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IHNlbGYucmVhZFZhbHVlKCk7XG4gICAgICB2YXIgcmVtb3ZlVmFsdWUgPSBvcHRpb25BdHRycy52YWx1ZTtcblxuICAgICAgc2VsZi5yZW1vdmVPcHRpb24ocmVtb3ZlVmFsdWUpO1xuICAgICAgc2NoZWR1bGVSZW5kZXIoKTtcblxuICAgICAgaWYgKHNlbGYubXVsdGlwbGUgJiYgY3VycmVudFZhbHVlICYmIGN1cnJlbnRWYWx1ZS5pbmRleE9mKHJlbW92ZVZhbHVlKSAhPT0gLTEgfHxcbiAgICAgICAgICBjdXJyZW50VmFsdWUgPT09IHJlbW92ZVZhbHVlXG4gICAgICApIHtcbiAgICAgICAgLy8gV2hlbiBtdWx0aXBsZSAoc2VsZWN0ZWQpIG9wdGlvbnMgYXJlIGRlc3Ryb3llZCBhdCB0aGUgc2FtZSB0aW1lLCB3ZSBkb24ndCB3YW50XG4gICAgICAgIC8vIHRvIHJ1biBhIG1vZGVsIHVwZGF0ZSBmb3IgZWFjaCBvZiB0aGVtLiBJbnN0ZWFkLCBydW4gYSBzaW5nbGUgdXBkYXRlIGluIHRoZSAkJHBvc3REaWdlc3RcbiAgICAgICAgc2NoZWR1bGVWaWV3VmFsdWVVcGRhdGUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBzZWxlY3RcbiAqIEByZXN0cmljdCBFXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBIVE1MIGBzZWxlY3RgIGVsZW1lbnQgd2l0aCBhbmd1bGFyIGRhdGEtYmluZGluZy5cbiAqXG4gKiBUaGUgYHNlbGVjdGAgZGlyZWN0aXZlIGlzIHVzZWQgdG9nZXRoZXIgd2l0aCB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9IHRvIHByb3ZpZGUgZGF0YS1iaW5kaW5nXG4gKiBiZXR3ZWVuIHRoZSBzY29wZSBhbmQgdGhlIGA8c2VsZWN0PmAgY29udHJvbCAoaW5jbHVkaW5nIHNldHRpbmcgZGVmYXVsdCB2YWx1ZXMpLlxuICogSXQgYWxzbyBoYW5kbGVzIGR5bmFtaWMgYDxvcHRpb24+YCBlbGVtZW50cywgd2hpY2ggY2FuIGJlIGFkZGVkIHVzaW5nIHRoZSB7QGxpbmsgbmdSZXBlYXQgYG5nUmVwZWF0fWAgb3JcbiAqIHtAbGluayBuZ09wdGlvbnMgYG5nT3B0aW9uc2B9IGRpcmVjdGl2ZXMuXG4gKlxuICogV2hlbiBhbiBpdGVtIGluIHRoZSBgPHNlbGVjdD5gIG1lbnUgaXMgc2VsZWN0ZWQsIHRoZSB2YWx1ZSBvZiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHdpbGwgYmUgYm91bmRcbiAqIHRvIHRoZSBtb2RlbCBpZGVudGlmaWVkIGJ5IHRoZSBgbmdNb2RlbGAgZGlyZWN0aXZlLiBXaXRoIHN0YXRpYyBvciByZXBlYXRlZCBvcHRpb25zLCB0aGlzIGlzXG4gKiB0aGUgY29udGVudCBvZiB0aGUgYHZhbHVlYCBhdHRyaWJ1dGUgb3IgdGhlIHRleHRDb250ZW50IG9mIHRoZSBgPG9wdGlvbj5gLCBpZiB0aGUgdmFsdWUgYXR0cmlidXRlIGlzIG1pc3NpbmcuXG4gKiBWYWx1ZSBhbmQgdGV4dENvbnRlbnQgY2FuIGJlIGludGVycG9sYXRlZC5cbiAqXG4gKiBUaGUge0BsaW5rIHNlbGVjdC5TZWxlY3RDb250cm9sbGVyIHNlbGVjdCBjb250cm9sbGVyfSBleHBvc2VzIHV0aWxpdHkgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWRcbiAqIHRvIG1hbmlwdWxhdGUgdGhlIHNlbGVjdCdzIGJlaGF2aW9yLlxuICpcbiAqICMjIE1hdGNoaW5nIG1vZGVsIGFuZCBvcHRpb24gdmFsdWVzXG4gKlxuICogSW4gZ2VuZXJhbCwgdGhlIG1hdGNoIGJldHdlZW4gdGhlIG1vZGVsIGFuZCBhbiBvcHRpb24gaXMgZXZhbHVhdGVkIGJ5IHN0cmljdGx5IGNvbXBhcmluZyB0aGUgbW9kZWxcbiAqIHZhbHVlIGFnYWluc3QgdGhlIHZhbHVlIG9mIHRoZSBhdmFpbGFibGUgb3B0aW9ucy5cbiAqXG4gKiBJZiB5b3UgYXJlIHNldHRpbmcgdGhlIG9wdGlvbiB2YWx1ZSB3aXRoIHRoZSBvcHRpb24ncyBgdmFsdWVgIGF0dHJpYnV0ZSwgb3IgdGV4dENvbnRlbnQsIHRoZVxuICogdmFsdWUgd2lsbCBhbHdheXMgYmUgYSBgc3RyaW5nYCB3aGljaCBtZWFucyB0aGF0IHRoZSBtb2RlbCB2YWx1ZSBtdXN0IGFsc28gYmUgYSBzdHJpbmcuXG4gKiBPdGhlcndpc2UgdGhlIGBzZWxlY3RgIGRpcmVjdGl2ZSBjYW5ub3QgbWF0Y2ggdGhlbSBjb3JyZWN0bHkuXG4gKlxuICogVG8gYmluZCB0aGUgbW9kZWwgdG8gYSBub24tc3RyaW5nIHZhbHVlLCB5b3UgY2FuIHVzZSBvbmUgb2YgdGhlIGZvbGxvd2luZyBzdHJhdGVnaWVzOlxuICogLSB0aGUge0BsaW5rIG5nLm5nT3B0aW9ucyBgbmdPcHRpb25zYH0gZGlyZWN0aXZlXG4gKiAgICh7QGxpbmsgbmcuc2VsZWN0I3VzaW5nLXNlbGVjdC13aXRoLW5nb3B0aW9ucy1hbmQtc2V0dGluZy1hLWRlZmF1bHQtdmFsdWV9KVxuICogLSB0aGUge0BsaW5rIG5nLm5nVmFsdWUgYG5nVmFsdWVgfSBkaXJlY3RpdmUsIHdoaWNoIGFsbG93cyBhcmJpdHJhcnkgZXhwcmVzc2lvbnMgdG8gYmVcbiAqICAgb3B0aW9uIHZhbHVlcyAoe0BsaW5rIG5nLnNlbGVjdCN1c2luZy1uZ3ZhbHVlLXRvLWJpbmQtdGhlLW1vZGVsLXRvLWFuLWFycmF5LW9mLW9iamVjdHMgRXhhbXBsZX0pXG4gKiAtIG1vZGVsICRwYXJzZXJzIC8gJGZvcm1hdHRlcnMgdG8gY29udmVydCB0aGUgc3RyaW5nIHZhbHVlXG4gKiAgICh7QGxpbmsgbmcuc2VsZWN0I2JpbmRpbmctc2VsZWN0LXRvLWEtbm9uLXN0cmluZy12YWx1ZS12aWEtbmdtb2RlbC1wYXJzaW5nLWZvcm1hdHRpbmcgRXhhbXBsZX0pXG4gKlxuICogSWYgdGhlIHZpZXdWYWx1ZSBvZiBgbmdNb2RlbGAgZG9lcyBub3QgbWF0Y2ggYW55IG9mIHRoZSBvcHRpb25zLCB0aGVuIHRoZSBjb250cm9sXG4gKiB3aWxsIGF1dG9tYXRpY2FsbHkgYWRkIGFuIFwidW5rbm93blwiIG9wdGlvbiwgd2hpY2ggaXQgdGhlbiByZW1vdmVzIHdoZW4gdGhlIG1pc21hdGNoIGlzIHJlc29sdmVkLlxuICpcbiAqIE9wdGlvbmFsbHksIGEgc2luZ2xlIGhhcmQtY29kZWQgYDxvcHRpb24+YCBlbGVtZW50LCB3aXRoIHRoZSB2YWx1ZSBzZXQgdG8gYW4gZW1wdHkgc3RyaW5nLCBjYW5cbiAqIGJlIG5lc3RlZCBpbnRvIHRoZSBgPHNlbGVjdD5gIGVsZW1lbnQuIFRoaXMgZWxlbWVudCB3aWxsIHRoZW4gcmVwcmVzZW50IHRoZSBgbnVsbGAgb3IgXCJub3Qgc2VsZWN0ZWRcIlxuICogb3B0aW9uLiBTZWUgZXhhbXBsZSBiZWxvdyBmb3IgZGVtb25zdHJhdGlvbi5cbiAqXG4gKiAjIyBDaG9vc2luZyBiZXR3ZWVuIGBuZ1JlcGVhdGAgYW5kIGBuZ09wdGlvbnNgXG4gKlxuICogSW4gbWFueSBjYXNlcywgYG5nUmVwZWF0YCBjYW4gYmUgdXNlZCBvbiBgPG9wdGlvbj5gIGVsZW1lbnRzIGluc3RlYWQgb2Yge0BsaW5rIG5nLmRpcmVjdGl2ZTpuZ09wdGlvbnNcbiAqIG5nT3B0aW9uc30gdG8gYWNoaWV2ZSBhIHNpbWlsYXIgcmVzdWx0LiBIb3dldmVyLCBgbmdPcHRpb25zYCBwcm92aWRlcyBzb21lIGJlbmVmaXRzOlxuICogLSBtb3JlIGZsZXhpYmlsaXR5IGluIGhvdyB0aGUgYDxzZWxlY3Q+YCdzIG1vZGVsIGlzIGFzc2lnbmVkIHZpYSB0aGUgYHNlbGVjdGAgKipgYXNgKiogcGFydCBvZiB0aGVcbiAqIGNvbXByZWhlbnNpb24gZXhwcmVzc2lvblxuICogLSByZWR1Y2VkIG1lbW9yeSBjb25zdW1wdGlvbiBieSBub3QgY3JlYXRpbmcgYSBuZXcgc2NvcGUgZm9yIGVhY2ggcmVwZWF0ZWQgaW5zdGFuY2VcbiAqIC0gaW5jcmVhc2VkIHJlbmRlciBzcGVlZCBieSBjcmVhdGluZyB0aGUgb3B0aW9ucyBpbiBhIGRvY3VtZW50RnJhZ21lbnQgaW5zdGVhZCBvZiBpbmRpdmlkdWFsbHlcbiAqXG4gKiBTcGVjaWZpY2FsbHksIHNlbGVjdCB3aXRoIHJlcGVhdGVkIG9wdGlvbnMgc2xvd3MgZG93biBzaWduaWZpY2FudGx5IHN0YXJ0aW5nIGF0IDIwMDAgb3B0aW9ucyBpblxuICogQ2hyb21lIGFuZCBJbnRlcm5ldCBFeHBsb3JlciAvIEVkZ2UuXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuZ01vZGVsIEFzc2lnbmFibGUgYW5ndWxhciBleHByZXNzaW9uIHRvIGRhdGEtYmluZCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSBQcm9wZXJ0eSBuYW1lIG9mIHRoZSBmb3JtIHVuZGVyIHdoaWNoIHRoZSBjb250cm9sIGlzIHB1Ymxpc2hlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbXVsdGlwbGUgQWxsb3dzIG11bHRpcGxlIG9wdGlvbnMgdG8gYmUgc2VsZWN0ZWQuIFRoZSBzZWxlY3RlZCB2YWx1ZXMgd2lsbCBiZVxuICogICAgIGJvdW5kIHRvIHRoZSBtb2RlbCBhcyBhbiBhcnJheS5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gcmVxdWlyZWQgU2V0cyBgcmVxdWlyZWRgIHZhbGlkYXRpb24gZXJyb3Iga2V5IGlmIHRoZSB2YWx1ZSBpcyBub3QgZW50ZXJlZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdSZXF1aXJlZCBBZGRzIHJlcXVpcmVkIGF0dHJpYnV0ZSBhbmQgcmVxdWlyZWQgdmFsaWRhdGlvbiBjb25zdHJhaW50IHRvXG4gKiB0aGUgZWxlbWVudCB3aGVuIHRoZSBuZ1JlcXVpcmVkIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIHRydWUuIFVzZSBuZ1JlcXVpcmVkIGluc3RlYWQgb2YgcmVxdWlyZWRcbiAqIHdoZW4geW91IHdhbnQgdG8gZGF0YS1iaW5kIHRvIHRoZSByZXF1aXJlZCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQ2hhbmdlIEFuZ3VsYXIgZXhwcmVzc2lvbiB0byBiZSBleGVjdXRlZCB3aGVuIHNlbGVjdGVkIG9wdGlvbihzKSBjaGFuZ2VzIGR1ZSB0byB1c2VyXG4gKiAgICBpbnRlcmFjdGlvbiB3aXRoIHRoZSBzZWxlY3QgZWxlbWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmdPcHRpb25zIHNldHMgdGhlIG9wdGlvbnMgdGhhdCB0aGUgc2VsZWN0IGlzIHBvcHVsYXRlZCB3aXRoIGFuZCBkZWZpbmVzIHdoYXQgaXNcbiAqIHNldCBvbiB0aGUgbW9kZWwgb24gc2VsZWN0aW9uLiBTZWUge0BsaW5rIG5nT3B0aW9ucyBgbmdPcHRpb25zYH0uXG4gKiBAcGFyYW0ge3N0cmluZz19IG5nQXR0clNpemUgc2V0cyB0aGUgc2l6ZSBvZiB0aGUgc2VsZWN0IGVsZW1lbnQgZHluYW1pY2FsbHkuIFVzZXMgdGhlXG4gKiB7QGxpbmsgZ3VpZGUvaW50ZXJwb2xhdGlvbiMtbmdhdHRyLWZvci1iaW5kaW5nLXRvLWFyYml0cmFyeS1hdHRyaWJ1dGVzIG5nQXR0cn0gZGlyZWN0aXZlLlxuICpcbiAqXG4gKiBAa25vd25Jc3N1ZVxuICpcbiAqIEluIEZpcmVmb3gsIHRoZSBzZWxlY3QgbW9kZWwgaXMgb25seSB1cGRhdGVkIHdoZW4gdGhlIHNlbGVjdCBlbGVtZW50IGlzIGJsdXJyZWQuIEZvciBleGFtcGxlLFxuICogd2hlbiBzd2l0Y2hpbmcgYmV0d2VlbiBvcHRpb25zIHdpdGggdGhlIGtleWJvYXJkLCB0aGUgc2VsZWN0IG1vZGVsIGlzIG9ubHkgc2V0IHRvIHRoZVxuICogY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbiB3aGVuIHRoZSBzZWxlY3QgaXMgYmx1cnJlZCwgZS5nIHZpYSB0YWIga2V5IG9yIGNsaWNraW5nIHRoZSBtb3VzZVxuICogb3V0c2lkZSB0aGUgc2VsZWN0LlxuICpcbiAqIFRoaXMgaXMgZHVlIHRvIGFuIGFtYmlndWl0eSBpbiB0aGUgc2VsZWN0IGVsZW1lbnQgc3BlY2lmaWNhdGlvbi4gU2VlIHRoZVxuICogW2lzc3VlIG9uIHRoZSBGaXJlZm94IGJ1ZyB0cmFja2VyXShodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMjYzNzkpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiwgYW5kIHRoaXNcbiAqIFtHaXRodWIgY29tbWVudCBmb3IgYSB3b3JrYXJvdW5kXShodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2lzc3Vlcy85MTM0I2lzc3VlY29tbWVudC0xMzA4MDA0ODgpXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBTaW1wbGUgYHNlbGVjdGAgZWxlbWVudHMgd2l0aCBzdGF0aWMgb3B0aW9uc1xuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJzdGF0aWMtc2VsZWN0XCIgbW9kdWxlPVwic3RhdGljU2VsZWN0XCI+XG4gKiA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICogPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgPGZvcm0gbmFtZT1cIm15Rm9ybVwiPlxuICogICAgIDxsYWJlbCBmb3I9XCJzaW5nbGVTZWxlY3RcIj4gU2luZ2xlIHNlbGVjdDogPC9sYWJlbD48YnI+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwic2luZ2xlU2VsZWN0XCIgbmctbW9kZWw9XCJkYXRhLnNpbmdsZVNlbGVjdFwiPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+PGJyPlxuICpcbiAqICAgICA8bGFiZWwgZm9yPVwic2luZ2xlU2VsZWN0XCI+IFNpbmdsZSBzZWxlY3Qgd2l0aCBcIm5vdCBzZWxlY3RlZFwiIG9wdGlvbiBhbmQgZHluYW1pYyBvcHRpb24gdmFsdWVzOiA8L2xhYmVsPjxicj5cbiAqICAgICA8c2VsZWN0IG5hbWU9XCJzaW5nbGVTZWxlY3RcIiBpZD1cInNpbmdsZVNlbGVjdFwiIG5nLW1vZGVsPVwiZGF0YS5zaW5nbGVTZWxlY3RcIj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJcIj4tLS1QbGVhc2Ugc2VsZWN0LS0tPC9vcHRpb24+IDwhLS0gbm90IHNlbGVjdGVkIC8gYmxhbmsgb3B0aW9uIC0tPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cInt7ZGF0YS5vcHRpb24xfX1cIj5PcHRpb24gMTwvb3B0aW9uPiA8IS0tIGludGVycG9sYXRpb24gLS0+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTJcIj5PcHRpb24gMjwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0Pjxicj5cbiAqICAgICA8YnV0dG9uIG5nLWNsaWNrPVwiZm9yY2VVbmtub3duT3B0aW9uKClcIj5Gb3JjZSB1bmtub3duIG9wdGlvbjwvYnV0dG9uPjxicj5cbiAqICAgICA8dHQ+c2luZ2xlU2VsZWN0ID0ge3tkYXRhLnNpbmdsZVNlbGVjdH19PC90dD5cbiAqXG4gKiAgICAgPGhyPlxuICogICAgIDxsYWJlbCBmb3I9XCJtdWx0aXBsZVNlbGVjdFwiPiBNdWx0aXBsZSBzZWxlY3Q6IDwvbGFiZWw+PGJyPlxuICogICAgIDxzZWxlY3QgbmFtZT1cIm11bHRpcGxlU2VsZWN0XCIgaWQ9XCJtdWx0aXBsZVNlbGVjdFwiIG5nLW1vZGVsPVwiZGF0YS5tdWx0aXBsZVNlbGVjdFwiIG11bHRpcGxlPlxuICogICAgICAgPG9wdGlvbiB2YWx1ZT1cIm9wdGlvbi0xXCI+T3B0aW9uIDE8L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCJvcHRpb24tMlwiPk9wdGlvbiAyPC9vcHRpb24+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwib3B0aW9uLTNcIj5PcHRpb24gMzwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0Pjxicj5cbiAqICAgICA8dHQ+bXVsdGlwbGVTZWxlY3QgPSB7e2RhdGEubXVsdGlwbGVTZWxlY3R9fTwvdHQ+PGJyLz5cbiAqICAgPC9mb3JtPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ3N0YXRpY1NlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLmRhdGEgPSB7XG4gKiAgICAgICBzaW5nbGVTZWxlY3Q6IG51bGwsXG4gKiAgICAgICBtdWx0aXBsZVNlbGVjdDogW10sXG4gKiAgICAgICBvcHRpb24xOiAnb3B0aW9uLTEnXG4gKiAgICAgIH07XG4gKlxuICogICAgICAkc2NvcGUuZm9yY2VVbmtub3duT3B0aW9uID0gZnVuY3Rpb24oKSB7XG4gKiAgICAgICAgJHNjb3BlLmRhdGEuc2luZ2xlU2VsZWN0ID0gJ25vbnNlbnNlJztcbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgbmdSZXBlYXRgIHRvIGdlbmVyYXRlIGBzZWxlY3RgIG9wdGlvbnNcbiAqIDxleGFtcGxlIG5hbWU9XCJzZWxlY3QtbmdyZXBlYXRcIiBtb2R1bGU9XCJuZ3JlcGVhdFNlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwicmVwZWF0U2VsZWN0XCI+IFJlcGVhdCBzZWxlY3Q6IDwvbGFiZWw+XG4gKiAgICAgPHNlbGVjdCBuYW1lPVwicmVwZWF0U2VsZWN0XCIgaWQ9XCJyZXBlYXRTZWxlY3RcIiBuZy1tb2RlbD1cImRhdGEubW9kZWxcIj5cbiAqICAgICAgIDxvcHRpb24gbmctcmVwZWF0PVwib3B0aW9uIGluIGRhdGEuYXZhaWxhYmxlT3B0aW9uc1wiIHZhbHVlPVwie3tvcHRpb24uaWR9fVwiPnt7b3B0aW9uLm5hbWV9fTwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0PlxuICogICA8L2Zvcm0+XG4gKiAgIDxocj5cbiAqICAgPHR0Pm1vZGVsID0ge3tkYXRhLm1vZGVsfX08L3R0Pjxici8+XG4gKiA8L2Rpdj5cbiAqIDwvZmlsZT5cbiAqIDxmaWxlIG5hbWU9XCJhcHAuanNcIj5cbiAqICBhbmd1bGFyLm1vZHVsZSgnbmdyZXBlYXRTZWxlY3QnLCBbXSlcbiAqICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICRzY29wZS5kYXRhID0ge1xuICogICAgICAgbW9kZWw6IG51bGwsXG4gKiAgICAgICBhdmFpbGFibGVPcHRpb25zOiBbXG4gKiAgICAgICAgIHtpZDogJzEnLCBuYW1lOiAnT3B0aW9uIEEnfSxcbiAqICAgICAgICAge2lkOiAnMicsIG5hbWU6ICdPcHRpb24gQid9LFxuICogICAgICAgICB7aWQ6ICczJywgbmFtZTogJ09wdGlvbiBDJ31cbiAqICAgICAgIF1cbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgbmdWYWx1ZWAgdG8gYmluZCB0aGUgbW9kZWwgdG8gYW4gYXJyYXkgb2Ygb2JqZWN0c1xuICogPGV4YW1wbGUgbmFtZT1cInNlbGVjdC1uZ3ZhbHVlXCIgbW9kdWxlPVwibmd2YWx1ZVNlbGVjdFwiPlxuICogPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgIDxmb3JtIG5hbWU9XCJteUZvcm1cIj5cbiAqICAgICA8bGFiZWwgZm9yPVwibmd2YWx1ZXNlbGVjdFwiPiBuZ3ZhbHVlIHNlbGVjdDogPC9sYWJlbD5cbiAqICAgICA8c2VsZWN0IHNpemU9XCI2XCIgbmFtZT1cIm5ndmFsdWVzZWxlY3RcIiBuZy1tb2RlbD1cImRhdGEubW9kZWxcIiBtdWx0aXBsZT5cbiAqICAgICAgIDxvcHRpb24gbmctcmVwZWF0PVwib3B0aW9uIGluIGRhdGEuYXZhaWxhYmxlT3B0aW9uc1wiIG5nLXZhbHVlPVwib3B0aW9uLnZhbHVlXCI+e3tvcHRpb24ubmFtZX19PC9vcHRpb24+XG4gKiAgICAgPC9zZWxlY3Q+XG4gKiAgIDwvZm9ybT5cbiAqICAgPGhyPlxuICogICA8cHJlPm1vZGVsID0ge3tkYXRhLm1vZGVsIHwganNvbn19PC9wcmU+PGJyLz5cbiAqIDwvZGl2PlxuICogPC9maWxlPlxuICogPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogIGFuZ3VsYXIubW9kdWxlKCduZ3ZhbHVlU2VsZWN0JywgW10pXG4gKiAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAkc2NvcGUuZGF0YSA9IHtcbiAqICAgICAgIG1vZGVsOiBudWxsLFxuICogICAgICAgYXZhaWxhYmxlT3B0aW9uczogW1xuICAgICAgICAgICB7dmFsdWU6ICdteVN0cmluZycsIG5hbWU6ICdzdHJpbmcnfSxcbiAgICAgICAgICAge3ZhbHVlOiAxLCBuYW1lOiAnaW50ZWdlcid9LFxuICAgICAgICAgICB7dmFsdWU6IHRydWUsIG5hbWU6ICdib29sZWFuJ30sXG4gICAgICAgICAgIHt2YWx1ZTogbnVsbCwgbmFtZTogJ251bGwnfSxcbiAgICAgICAgICAge3ZhbHVlOiB7cHJvcDogJ3ZhbHVlJ30sIG5hbWU6ICdvYmplY3QnfSxcbiAgICAgICAgICAge3ZhbHVlOiBbJ2EnXSwgbmFtZTogJ2FycmF5J31cbiAqICAgICAgIF1cbiAqICAgICAgfTtcbiAqICAgfV0pO1xuICogPC9maWxlPlxuICo8L2V4YW1wbGU+XG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyBVc2luZyBgc2VsZWN0YCB3aXRoIGBuZ09wdGlvbnNgIGFuZCBzZXR0aW5nIGEgZGVmYXVsdCB2YWx1ZVxuICogU2VlIHRoZSB7QGxpbmsgbmdPcHRpb25zIG5nT3B0aW9ucyBkb2N1bWVudGF0aW9ufSBmb3IgbW9yZSBgbmdPcHRpb25zYCB1c2FnZSBleGFtcGxlcy5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXdpdGgtZGVmYXVsdC12YWx1ZXNcIiBtb2R1bGU9XCJkZWZhdWx0VmFsdWVTZWxlY3RcIj5cbiAqIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICA8Zm9ybSBuYW1lPVwibXlGb3JtXCI+XG4gKiAgICAgPGxhYmVsIGZvcj1cIm15U2VsZWN0XCI+TWFrZSBhIGNob2ljZTo8L2xhYmVsPlxuICogICAgIDxzZWxlY3QgbmFtZT1cIm15U2VsZWN0XCIgaWQ9XCJteVNlbGVjdFwiXG4gKiAgICAgICBuZy1vcHRpb25zPVwib3B0aW9uLm5hbWUgZm9yIG9wdGlvbiBpbiBkYXRhLmF2YWlsYWJsZU9wdGlvbnMgdHJhY2sgYnkgb3B0aW9uLmlkXCJcbiAqICAgICAgIG5nLW1vZGVsPVwiZGF0YS5zZWxlY3RlZE9wdGlvblwiPjwvc2VsZWN0PlxuICogICA8L2Zvcm0+XG4gKiAgIDxocj5cbiAqICAgPHR0Pm9wdGlvbiA9IHt7ZGF0YS5zZWxlY3RlZE9wdGlvbn19PC90dD48YnIvPlxuICogPC9kaXY+XG4gKiA8L2ZpbGU+XG4gKiA8ZmlsZSBuYW1lPVwiYXBwLmpzXCI+XG4gKiAgYW5ndWxhci5tb2R1bGUoJ2RlZmF1bHRWYWx1ZVNlbGVjdCcsIFtdKVxuICogICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgJHNjb3BlLmRhdGEgPSB7XG4gKiAgICAgICBhdmFpbGFibGVPcHRpb25zOiBbXG4gKiAgICAgICAgIHtpZDogJzEnLCBuYW1lOiAnT3B0aW9uIEEnfSxcbiAqICAgICAgICAge2lkOiAnMicsIG5hbWU6ICdPcHRpb24gQid9LFxuICogICAgICAgICB7aWQ6ICczJywgbmFtZTogJ09wdGlvbiBDJ31cbiAqICAgICAgIF0sXG4gKiAgICAgICBzZWxlY3RlZE9wdGlvbjoge2lkOiAnMycsIG5hbWU6ICdPcHRpb24gQyd9IC8vVGhpcyBzZXRzIHRoZSBkZWZhdWx0IHZhbHVlIG9mIHRoZSBzZWxlY3QgaW4gdGhlIHVpXG4gKiAgICAgICB9O1xuICogICB9XSk7XG4gKiA8L2ZpbGU+XG4gKjwvZXhhbXBsZT5cbiAqXG4gKiBAZXhhbXBsZVxuICogIyMjIEJpbmRpbmcgYHNlbGVjdGAgdG8gYSBub24tc3RyaW5nIHZhbHVlIHZpYSBgbmdNb2RlbGAgcGFyc2luZyAvIGZvcm1hdHRpbmdcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwic2VsZWN0LXdpdGgtbm9uLXN0cmluZy1vcHRpb25zXCIgbW9kdWxlPVwibm9uU3RyaW5nU2VsZWN0XCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNlbGVjdCBuZy1tb2RlbD1cIm1vZGVsLmlkXCIgY29udmVydC10by1udW1iZXI+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwiMFwiPlplcm88L29wdGlvbj5cbiAqICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+T25lPC9vcHRpb24+XG4gKiAgICAgICA8b3B0aW9uIHZhbHVlPVwiMlwiPlR3bzwvb3B0aW9uPlxuICogICAgIDwvc2VsZWN0PlxuICogICAgIHt7IG1vZGVsIH19XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cImFwcC5qc1wiPlxuICogICAgIGFuZ3VsYXIubW9kdWxlKCdub25TdHJpbmdTZWxlY3QnLCBbXSlcbiAqICAgICAgIC5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuICogICAgICAgICAkcm9vdFNjb3BlLm1vZGVsID0geyBpZDogMiB9O1xuICogICAgICAgfSlcbiAqICAgICAgIC5kaXJlY3RpdmUoJ2NvbnZlcnRUb051bWJlcicsIGZ1bmN0aW9uKCkge1xuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAqICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAqICAgICAgICAgICAgIG5nTW9kZWwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWwpIHtcbiAqICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApO1xuICogICAgICAgICAgICAgfSk7XG4gKiAgICAgICAgICAgICBuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24odmFsKSB7XG4gKiAgICAgICAgICAgICAgIHJldHVybiAnJyArIHZhbDtcbiAqICAgICAgICAgICAgIH0pO1xuICogICAgICAgICAgIH1cbiAqICAgICAgICAgfTtcbiAqICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAqICAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgdG8gbW9kZWwnLCBmdW5jdGlvbigpIHtcbiAqICAgICAgIGV4cGVjdChlbGVtZW50KGJ5Lm1vZGVsKCdtb2RlbC5pZCcpKS4kKCdvcHRpb246Y2hlY2tlZCcpLmdldFRleHQoKSkudG9FcXVhbCgnVHdvJyk7XG4gKiAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKi9cbnZhciBzZWxlY3REaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcblxuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRScsXG4gICAgcmVxdWlyZTogWydzZWxlY3QnLCAnP25nTW9kZWwnXSxcbiAgICBjb250cm9sbGVyOiBTZWxlY3RDb250cm9sbGVyLFxuICAgIHByaW9yaXR5OiAxLFxuICAgIGxpbms6IHtcbiAgICAgIHByZTogc2VsZWN0UHJlTGluayxcbiAgICAgIHBvc3Q6IHNlbGVjdFBvc3RMaW5rXG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIHNlbGVjdFByZUxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmxzKSB7XG5cbiAgICAgIHZhciBzZWxlY3RDdHJsID0gY3RybHNbMF07XG4gICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcblxuICAgICAgLy8gaWYgbmdNb2RlbCBpcyBub3QgZGVmaW5lZCwgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBidXQgc2V0IHRoZSByZWdpc3Rlck9wdGlvblxuICAgICAgLy8gZnVuY3Rpb24gdG8gbm9vcCwgc28gb3B0aW9ucyBkb24ndCBnZXQgYWRkZWQgaW50ZXJuYWxseVxuICAgICAgaWYgKCFuZ01vZGVsQ3RybCkge1xuICAgICAgICBzZWxlY3RDdHJsLnJlZ2lzdGVyT3B0aW9uID0gbm9vcDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG5cbiAgICAgIHNlbGVjdEN0cmwubmdNb2RlbEN0cmwgPSBuZ01vZGVsQ3RybDtcblxuICAgICAgLy8gV2hlbiB0aGUgc2VsZWN0ZWQgaXRlbShzKSBjaGFuZ2VzIHdlIGRlbGVnYXRlIGdldHRpbmcgdGhlIHZhbHVlIG9mIHRoZSBzZWxlY3QgY29udHJvbFxuICAgICAgLy8gdG8gdGhlIGByZWFkVmFsdWVgIG1ldGhvZCwgd2hpY2ggY2FuIGJlIGNoYW5nZWQgaWYgdGhlIHNlbGVjdCBjYW4gaGF2ZSBtdWx0aXBsZVxuICAgICAgLy8gc2VsZWN0ZWQgdmFsdWVzIG9yIGlmIHRoZSBvcHRpb25zIGFyZSBiZWluZyBnZW5lcmF0ZWQgYnkgYG5nT3B0aW9uc2BcbiAgICAgIGVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxlY3RDdHJsLnJlbW92ZVVua25vd25PcHRpb24oKTtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoc2VsZWN0Q3RybC5yZWFkVmFsdWUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIElmIHRoZSBzZWxlY3QgYWxsb3dzIG11bHRpcGxlIHZhbHVlcyB0aGVuIHdlIG5lZWQgdG8gbW9kaWZ5IGhvdyB3ZSByZWFkIGFuZCB3cml0ZVxuICAgICAgLy8gdmFsdWVzIGZyb20gYW5kIHRvIHRoZSBjb250cm9sOyBhbHNvIHdoYXQgaXQgbWVhbnMgZm9yIHRoZSB2YWx1ZSB0byBiZSBlbXB0eSBhbmRcbiAgICAgIC8vIHdlIGhhdmUgdG8gYWRkIGFuIGV4dHJhIHdhdGNoIHNpbmNlIG5nTW9kZWwgZG9lc24ndCB3b3JrIHdlbGwgd2l0aCBhcnJheXMgLSBpdFxuICAgICAgLy8gZG9lc24ndCB0cmlnZ2VyIHJlbmRlcmluZyBpZiBvbmx5IGFuIGl0ZW0gaW4gdGhlIGFycmF5IGNoYW5nZXMuXG4gICAgICBpZiAoYXR0ci5tdWx0aXBsZSkge1xuICAgICAgICBzZWxlY3RDdHJsLm11bHRpcGxlID0gdHJ1ZTtcblxuICAgICAgICAvLyBSZWFkIHZhbHVlIG5vdyBuZWVkcyB0byBjaGVjayBlYWNoIG9wdGlvbiB0byBzZWUgaWYgaXQgaXMgc2VsZWN0ZWRcbiAgICAgICAgc2VsZWN0Q3RybC5yZWFkVmFsdWUgPSBmdW5jdGlvbiByZWFkTXVsdGlwbGVWYWx1ZSgpIHtcbiAgICAgICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQuZmluZCgnb3B0aW9uJyksIGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCAmJiAhb3B0aW9uLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgIHZhciB2YWwgPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICAgIGFycmF5LnB1c2godmFsIGluIHNlbGVjdEN0cmwuc2VsZWN0VmFsdWVNYXAgPyBzZWxlY3RDdHJsLnNlbGVjdFZhbHVlTWFwW3ZhbF0gOiB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBhcnJheTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBXcml0ZSB2YWx1ZSBub3cgbmVlZHMgdG8gc2V0IHRoZSBzZWxlY3RlZCBwcm9wZXJ0eSBvZiBlYWNoIG1hdGNoaW5nIG9wdGlvblxuICAgICAgICBzZWxlY3RDdHJsLndyaXRlVmFsdWUgPSBmdW5jdGlvbiB3cml0ZU11bHRpcGxlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgICBmb3JFYWNoKGVsZW1lbnQuZmluZCgnb3B0aW9uJyksIGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICAgICAgdmFyIHNob3VsZEJlU2VsZWN0ZWQgPSAhIXZhbHVlICYmIChpbmNsdWRlcyh2YWx1ZSwgb3B0aW9uLnZhbHVlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlcyh2YWx1ZSwgc2VsZWN0Q3RybC5zZWxlY3RWYWx1ZU1hcFtvcHRpb24udmFsdWVdKSk7XG4gICAgICAgICAgICB2YXIgY3VycmVudGx5U2VsZWN0ZWQgPSBvcHRpb24uc2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFIDktMTEgb25seSwgRWRnZSAxMi0xNStcbiAgICAgICAgICAgIC8vIEluIElFIGFuZCBFZGdlIGFkZGluZyBvcHRpb25zIHRvIHRoZSBzZWxlY3Rpb24gdmlhIHNoaWZ0K2NsaWNrL1VQL0RPV05cbiAgICAgICAgICAgIC8vIHdpbGwgZGUtc2VsZWN0IGFscmVhZHkgc2VsZWN0ZWQgb3B0aW9ucyBpZiBcInNlbGVjdGVkXCIgb24gdGhvc2Ugb3B0aW9ucyB3YXMgc2V0XG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25jZSAoaS5lLiB3aGVuIHRoZSBvcHRpb25zIHdlcmUgYWxyZWFkeSBzZWxlY3RlZClcbiAgICAgICAgICAgIC8vIFNvIHdlIG9ubHkgbW9kaWZ5IHRoZSBzZWxlY3RlZCBwcm9wZXJ0eSBpZiBuZWNlc3NhcnkuXG4gICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGJlaGF2aW9yIGNhbm5vdCBiZSByZXBsaWNhdGVkIHZpYSB1bml0IHRlc3RzIGJlY2F1c2UgaXQgb25seSBzaG93cyBpbiB0aGVcbiAgICAgICAgICAgIC8vIGFjdHVhbCB1c2VyIGludGVyZmFjZS5cbiAgICAgICAgICAgIGlmIChzaG91bGRCZVNlbGVjdGVkICE9PSBjdXJyZW50bHlTZWxlY3RlZCkge1xuICAgICAgICAgICAgICBzZXRPcHRpb25TZWxlY3RlZFN0YXR1cyhqcUxpdGUob3B0aW9uKSwgc2hvdWxkQmVTZWxlY3RlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyB3ZSBoYXZlIHRvIGRvIGl0IG9uIGVhY2ggd2F0Y2ggc2luY2UgbmdNb2RlbCB3YXRjaGVzIHJlZmVyZW5jZSwgYnV0XG4gICAgICAgIC8vIHdlIG5lZWQgdG8gd29yayBvZiBhbiBhcnJheSwgc28gd2UgbmVlZCB0byBzZWUgaWYgYW55dGhpbmcgd2FzIGluc2VydGVkL3JlbW92ZWRcbiAgICAgICAgdmFyIGxhc3RWaWV3LCBsYXN0Vmlld1JlZiA9IE5hTjtcbiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uIHNlbGVjdE11bHRpcGxlV2F0Y2goKSB7XG4gICAgICAgICAgaWYgKGxhc3RWaWV3UmVmID09PSBuZ01vZGVsQ3RybC4kdmlld1ZhbHVlICYmICFlcXVhbHMobGFzdFZpZXcsIG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpKSB7XG4gICAgICAgICAgICBsYXN0VmlldyA9IHNoYWxsb3dDb3B5KG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgICAgbmdNb2RlbEN0cmwuJHJlbmRlcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsYXN0Vmlld1JlZiA9IG5nTW9kZWxDdHJsLiR2aWV3VmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIElmIHdlIGFyZSBhIG11bHRpcGxlIHNlbGVjdCB0aGVuIHZhbHVlIGlzIG5vdyBhIGNvbGxlY3Rpb25cbiAgICAgICAgLy8gc28gdGhlIG1lYW5pbmcgb2YgJGlzRW1wdHkgY2hhbmdlc1xuICAgICAgICBuZ01vZGVsQ3RybC4kaXNFbXB0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuICF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPT09IDA7XG4gICAgICAgIH07XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RQb3N0TGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XG4gICAgICAvLyBpZiBuZ01vZGVsIGlzIG5vdCBkZWZpbmVkLCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nXG4gICAgICB2YXIgbmdNb2RlbEN0cmwgPSBjdHJsc1sxXTtcbiAgICAgIGlmICghbmdNb2RlbEN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIHNlbGVjdEN0cmwgPSBjdHJsc1swXTtcblxuICAgICAgLy8gV2UgZGVsZWdhdGUgcmVuZGVyaW5nIHRvIHRoZSBgd3JpdGVWYWx1ZWAgbWV0aG9kLCB3aGljaCBjYW4gYmUgY2hhbmdlZFxuICAgICAgLy8gaWYgdGhlIHNlbGVjdCBjYW4gaGF2ZSBtdWx0aXBsZSBzZWxlY3RlZCB2YWx1ZXMgb3IgaWYgdGhlIG9wdGlvbnMgYXJlIGJlaW5nXG4gICAgICAvLyBnZW5lcmF0ZWQgYnkgYG5nT3B0aW9uc2AuXG4gICAgICAvLyBUaGlzIG11c3QgYmUgZG9uZSBpbiB0aGUgcG9zdExpbmsgZm4gdG8gcHJldmVudCAkcmVuZGVyIHRvIGJlIGNhbGxlZCBiZWZvcmVcbiAgICAgIC8vIGFsbCBub2RlcyBoYXZlIGJlZW4gbGlua2VkIGNvcnJlY3RseS5cbiAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZWN0Q3RybC53cml0ZVZhbHVlKG5nTW9kZWxDdHJsLiR2aWV3VmFsdWUpO1xuICAgICAgfTtcbiAgICB9XG59O1xuXG5cbi8vIFRoZSBvcHRpb24gZGlyZWN0aXZlIGlzIHB1cmVseSBkZXNpZ25lZCB0byBjb21tdW5pY2F0ZSB0aGUgZXhpc3RlbmNlIChvciBsYWNrIG9mKVxuLy8gb2YgZHluYW1pY2FsbHkgY3JlYXRlZCAoYW5kIGRlc3Ryb3llZCkgb3B0aW9uIGVsZW1lbnRzIHRvIHRoZWlyIGNvbnRhaW5pbmcgc2VsZWN0XG4vLyBkaXJlY3RpdmUgdmlhIGl0cyBjb250cm9sbGVyLlxudmFyIG9wdGlvbkRpcmVjdGl2ZSA9IFsnJGludGVycG9sYXRlJywgZnVuY3Rpb24oJGludGVycG9sYXRlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICBwcmlvcml0eTogMTAwLFxuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgIHZhciBpbnRlcnBvbGF0ZVZhbHVlRm4sIGludGVycG9sYXRlVGV4dEZuO1xuXG4gICAgICBpZiAoaXNEZWZpbmVkKGF0dHIubmdWYWx1ZSkpIHtcbiAgICAgICAgLy8gV2lsbCBiZSBoYW5kbGVkIGJ5IHJlZ2lzdGVyT3B0aW9uXG4gICAgICB9IGVsc2UgaWYgKGlzRGVmaW5lZChhdHRyLnZhbHVlKSkge1xuICAgICAgICAvLyBJZiB0aGUgdmFsdWUgYXR0cmlidXRlIGlzIGRlZmluZWQsIGNoZWNrIGlmIGl0IGNvbnRhaW5zIGFuIGludGVycG9sYXRpb25cbiAgICAgICAgaW50ZXJwb2xhdGVWYWx1ZUZuID0gJGludGVycG9sYXRlKGF0dHIudmFsdWUsIHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGF0dHJpYnV0ZSBpcyBub3QgZGVmaW5lZCB0aGVuIHdlIGZhbGwgYmFjayB0byB0aGVcbiAgICAgICAgLy8gdGV4dCBjb250ZW50IG9mIHRoZSBvcHRpb24gZWxlbWVudCwgd2hpY2ggbWF5IGJlIGludGVycG9sYXRlZFxuICAgICAgICBpbnRlcnBvbGF0ZVRleHRGbiA9ICRpbnRlcnBvbGF0ZShlbGVtZW50LnRleHQoKSwgdHJ1ZSk7XG4gICAgICAgIGlmICghaW50ZXJwb2xhdGVUZXh0Rm4pIHtcbiAgICAgICAgICBhdHRyLiRzZXQoJ3ZhbHVlJywgZWxlbWVudC50ZXh0KCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cikge1xuICAgICAgICAvLyBUaGlzIGlzIGFuIG9wdGltaXphdGlvbiBvdmVyIHVzaW5nIF5eIHNpbmNlIHdlIGRvbid0IHdhbnQgdG8gaGF2ZSB0byBzZWFyY2hcbiAgICAgICAgLy8gYWxsIHRoZSB3YXkgdG8gdGhlIHJvb3Qgb2YgdGhlIERPTSBmb3IgZXZlcnkgc2luZ2xlIG9wdGlvbiBlbGVtZW50XG4gICAgICAgIHZhciBzZWxlY3RDdHJsTmFtZSA9ICckc2VsZWN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICBwYXJlbnQgPSBlbGVtZW50LnBhcmVudCgpLFxuICAgICAgICAgICAgc2VsZWN0Q3RybCA9IHBhcmVudC5kYXRhKHNlbGVjdEN0cmxOYW1lKSB8fFxuICAgICAgICAgICAgICBwYXJlbnQucGFyZW50KCkuZGF0YShzZWxlY3RDdHJsTmFtZSk7IC8vIGluIGNhc2Ugd2UgYXJlIGluIG9wdGdyb3VwXG5cbiAgICAgICAgaWYgKHNlbGVjdEN0cmwpIHtcbiAgICAgICAgICBzZWxlY3RDdHJsLnJlZ2lzdGVyT3B0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBpbnRlcnBvbGF0ZVZhbHVlRm4sIGludGVycG9sYXRlVGV4dEZuKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XTtcblxuLyoqXG4gKiBAbmdkb2MgZGlyZWN0aXZlXG4gKiBAbmFtZSBuZ1JlcXVpcmVkXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdSZXF1aXJlZCBBbmd1bGFySlMgZXhwcmVzc2lvbi4gSWYgaXQgZXZhbHVhdGVzIHRvIGB0cnVlYCwgaXQgc2V0cyB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgcmVxdWlyZWRgIGF0dHJpYnV0ZSB0byB0aGUgZWxlbWVudCBhbmQgYWRkcyB0aGUgYHJlcXVpcmVkYFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBuZ1JlcXVpcmVkIGFkZHMgdGhlIHJlcXVpcmVkIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2YWxpZGF0b3JzIGB2YWxpZGF0b3JgfSB0byB7QGxpbmsgbmdNb2RlbCBgbmdNb2RlbGB9LlxuICogSXQgaXMgbW9zdCBvZnRlbiB1c2VkIGZvciB7QGxpbmsgaW5wdXQgYGlucHV0YH0gYW5kIHtAbGluayBzZWxlY3QgYHNlbGVjdGB9IGNvbnRyb2xzLCBidXQgY2FuIGFsc28gYmVcbiAqIGFwcGxpZWQgdG8gY3VzdG9tIGNvbnRyb2xzLlxuICpcbiAqIFRoZSBkaXJlY3RpdmUgc2V0cyB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgb24gdGhlIGVsZW1lbnQgaWYgdGhlIEFuZ3VsYXIgZXhwcmVzc2lvbiBpbnNpZGVcbiAqIGBuZ1JlcXVpcmVkYCBldmFsdWF0ZXMgdG8gdHJ1ZS4gQSBzcGVjaWFsIGRpcmVjdGl2ZSBmb3Igc2V0dGluZyBgcmVxdWlyZWRgIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlXG4gKiBjYW5ub3QgdXNlIGludGVycG9sYXRpb24gaW5zaWRlIGByZXF1aXJlZGAuIFNlZSB0aGUge0BsaW5rIGd1aWRlL2ludGVycG9sYXRpb24gaW50ZXJwb2xhdGlvbiBndWlkZX1cbiAqIGZvciBtb3JlIGluZm8uXG4gKlxuICogVGhlIHZhbGlkYXRvciB3aWxsIHNldCB0aGUgYHJlcXVpcmVkYCBlcnJvciBrZXkgdG8gdHJ1ZSBpZiB0aGUgYHJlcXVpcmVkYCBhdHRyaWJ1dGUgaXMgc2V0IGFuZFxuICogY2FsbGluZyB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkaXNFbXB0eSBgTmdNb2RlbENvbnRyb2xsZXIuJGlzRW1wdHlgfSB3aXRoIHRoZVxuICoge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSBgbmdNb2RlbC4kdmlld1ZhbHVlYH0gcmV0dXJucyBgdHJ1ZWAuIEZvciBleGFtcGxlLCB0aGVcbiAqIGAkaXNFbXB0eSgpYCBpbXBsZW1lbnRhdGlvbiBmb3IgYGlucHV0W3RleHRdYCBjaGVja3MgdGhlIGxlbmd0aCBvZiB0aGUgYCR2aWV3VmFsdWVgLiBXaGVuIGRldmVsb3BpbmdcbiAqIGN1c3RvbSBjb250cm9scywgYCRpc0VtcHR5KClgIGNhbiBiZSBvdmVyd3JpdHRlbiB0byBhY2NvdW50IGZvciBhICR2aWV3VmFsdWUgdGhhdCBpcyBub3Qgc3RyaW5nLWJhc2VkLlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdSZXF1aXJlZERpcmVjdGl2ZVwiIG1vZHVsZT1cIm5nUmVxdWlyZWRFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ1JlcXVpcmVkRXhhbXBsZScsIFtdKVxuICogICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgICRzY29wZS5yZXF1aXJlZCA9IHRydWU7XG4gKiAgICAgICAgIH1dKTtcbiAqICAgICA8L3NjcmlwdD5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGZvcm0gbmFtZT1cImZvcm1cIj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cInJlcXVpcmVkXCI+VG9nZ2xlIHJlcXVpcmVkOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmctbW9kZWw9XCJyZXF1aXJlZFwiIGlkPVwicmVxdWlyZWRcIiAvPlxuICogICAgICAgICA8YnI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJpbnB1dFwiPlRoaXMgaW5wdXQgbXVzdCBiZSBmaWxsZWQgaWYgYHJlcXVpcmVkYCBpcyB0cnVlOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm1vZGVsXCIgaWQ9XCJpbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLXJlcXVpcmVkPVwicmVxdWlyZWRcIiAvPjxicj5cbiAqICAgICAgICAgPGhyPlxuICogICAgICAgICByZXF1aXJlZCBlcnJvciBzZXQ/ID0gPGNvZGU+e3tmb3JtLmlucHV0LiRlcnJvci5yZXF1aXJlZH19PC9jb2RlPjxicj5cbiAqICAgICAgICAgbW9kZWwgPSA8Y29kZT57e21vZGVsfX08L2NvZGU+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciByZXF1aXJlZCA9IGVsZW1lbnQoYnkuYmluZGluZygnZm9ybS5pbnB1dC4kZXJyb3IucmVxdWlyZWQnKSk7XG4gICAgICAgdmFyIG1vZGVsID0gZWxlbWVudChieS5iaW5kaW5nKCdtb2RlbCcpKTtcbiAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5LmlkKCdpbnB1dCcpKTtcblxuICAgICAgIGl0KCdzaG91bGQgc2V0IHRoZSByZXF1aXJlZCBlcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgZXhwZWN0KHJlcXVpcmVkLmdldFRleHQoKSkudG9Db250YWluKCd0cnVlJyk7XG5cbiAgICAgICAgIGlucHV0LnNlbmRLZXlzKCcxMjMnKTtcbiAgICAgICAgIGV4cGVjdChyZXF1aXJlZC5nZXRUZXh0KCkpLm5vdC50b0NvbnRhaW4oJ3RydWUnKTtcbiAgICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvQ29udGFpbignMTIzJyk7XG4gICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIHJlcXVpcmVkRGlyZWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBJyxcbiAgICByZXF1aXJlOiAnP25nTW9kZWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHIsIGN0cmwpIHtcbiAgICAgIGlmICghY3RybCkgcmV0dXJuO1xuICAgICAgYXR0ci5yZXF1aXJlZCA9IHRydWU7IC8vIGZvcmNlIHRydXRoeSBpbiBjYXNlIHdlIGFyZSBvbiBub24gaW5wdXQgZWxlbWVudFxuXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLnJlcXVpcmVkID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiAhYXR0ci5yZXF1aXJlZCB8fCAhY3RybC4kaXNFbXB0eSh2aWV3VmFsdWUpO1xuICAgICAgfTtcblxuICAgICAgYXR0ci4kb2JzZXJ2ZSgncmVxdWlyZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdQYXR0ZXJuXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbnxSZWdFeHB9IG5nUGF0dGVybiBBbmd1bGFySlMgZXhwcmVzc2lvbiB0aGF0IG11c3QgZXZhbHVhdGUgdG8gYSBgUmVnRXhwYCBvciBhIGBTdHJpbmdgXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2FibGUgaW50byBhIGBSZWdFeHBgLCBvciBhIGBSZWdFeHBgIGxpdGVyYWwuIFNlZSBhYm92ZSBmb3JcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3JlIGRldGFpbHMuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogbmdQYXR0ZXJuIGFkZHMgdGhlIHBhdHRlcm4ge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYHZhbGlkYXRvcmB9IHRvIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0uXG4gKiBJdCBpcyBtb3N0IG9mdGVuIHVzZWQgZm9yIHRleHQtYmFzZWQge0BsaW5rIGlucHV0IGBpbnB1dGB9IGNvbnRyb2xzLCBidXQgY2FuIGFsc28gYmUgYXBwbGllZCB0byBjdXN0b20gdGV4dC1iYXNlZCBjb250cm9scy5cbiAqXG4gKiBUaGUgdmFsaWRhdG9yIHNldHMgdGhlIGBwYXR0ZXJuYCBlcnJvciBrZXkgaWYgdGhlIHtAbGluayBuZ01vZGVsLk5nTW9kZWxDb250cm9sbGVyIyR2aWV3VmFsdWUgYG5nTW9kZWwuJHZpZXdWYWx1ZWB9XG4gKiBkb2VzIG5vdCBtYXRjaCBhIFJlZ0V4cCB3aGljaCBpcyBvYnRhaW5lZCBmcm9tIHRoZSBgbmdQYXR0ZXJuYCBhdHRyaWJ1dGUgdmFsdWU6XG4gKiAtIHRoZSB2YWx1ZSBpcyBhbiBBbmd1bGFySlMgZXhwcmVzc2lvbjpcbiAqICAgLSBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBSZWdFeHAgb2JqZWN0LCB0aGVuIHRoaXMgaXMgdXNlZCBkaXJlY3RseS5cbiAqICAgLSBJZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYSBzdHJpbmcsIHRoZW4gaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gYSBSZWdFeHAgYWZ0ZXIgd3JhcHBpbmcgaXRcbiAqICAgICBpbiBgXmAgYW5kIGAkYCBjaGFyYWN0ZXJzLiBGb3IgaW5zdGFuY2UsIGBcImFiY1wiYCB3aWxsIGJlIGNvbnZlcnRlZCB0byBgbmV3IFJlZ0V4cCgnXmFiYyQnKWAuXG4gKiAtIElmIHRoZSB2YWx1ZSBpcyBhIFJlZ0V4cCBsaXRlcmFsLCBlLmcuIGBuZ1BhdHRlcm49XCIvXlxcZCskL1wiYCwgaXQgaXMgdXNlZCBkaXJlY3RseS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipOb3RlOioqIEF2b2lkIHVzaW5nIHRoZSBgZ2AgZmxhZyBvbiB0aGUgUmVnRXhwLCBhcyBpdCB3aWxsIGNhdXNlIGVhY2ggc3VjY2Vzc2l2ZSBzZWFyY2ggdG9cbiAqIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBzZWFyY2gncyBtYXRjaCwgdGh1cyBub3QgdGFraW5nIHRoZSB3aG9sZSBpbnB1dCB2YWx1ZSBpbnRvXG4gKiBhY2NvdW50LlxuICogPC9kaXY+XG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICoqTm90ZToqKiBUaGlzIGRpcmVjdGl2ZSBpcyBhbHNvIGFkZGVkIHdoZW4gdGhlIHBsYWluIGBwYXR0ZXJuYCBhdHRyaWJ1dGUgaXMgdXNlZCwgd2l0aCB0d29cbiAqIGRpZmZlcmVuY2VzOlxuICogPG9sPlxuICogICA8bGk+XG4gKiAgICAgYG5nUGF0dGVybmAgZG9lcyBub3Qgc2V0IHRoZSBgcGF0dGVybmAgYXR0cmlidXRlIGFuZCB0aGVyZWZvcmUgSFRNTDUgY29uc3RyYWludCB2YWxpZGF0aW9uIGlzXG4gKiAgICAgbm90IGF2YWlsYWJsZS5cbiAqICAgPC9saT5cbiAqICAgPGxpPlxuICogICAgIFRoZSBgbmdQYXR0ZXJuYCBhdHRyaWJ1dGUgbXVzdCBiZSBhbiBleHByZXNzaW9uLCB3aGlsZSB0aGUgYHBhdHRlcm5gIHZhbHVlIG11c3QgYmVcbiAqICAgICBpbnRlcnBvbGF0ZWQuXG4gKiAgIDwvbGk+XG4gKiA8L29sPlxuICogPC9kaXY+XG4gKlxuICogQGV4YW1wbGVcbiAqIDxleGFtcGxlIG5hbWU9XCJuZ1BhdHRlcm5EaXJlY3RpdmVcIiBtb2R1bGU9XCJuZ1BhdHRlcm5FeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ1BhdHRlcm5FeGFtcGxlJywgW10pXG4gKiAgICAgICAgIC5jb250cm9sbGVyKCdFeGFtcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gKiAgICAgICAgICAgJHNjb3BlLnJlZ2V4ID0gJ1xcXFxkKyc7XG4gKiAgICAgICAgIH1dKTtcbiAqICAgICA8L3NjcmlwdD5cbiAqICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJFeGFtcGxlQ29udHJvbGxlclwiPlxuICogICAgICAgPGZvcm0gbmFtZT1cImZvcm1cIj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cInJlZ2V4XCI+U2V0IGEgcGF0dGVybiAocmVnZXggc3RyaW5nKTogPC9sYWJlbD5cbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJyZWdleFwiIGlkPVwicmVnZXhcIiAvPlxuICogICAgICAgICA8YnI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJpbnB1dFwiPlRoaXMgaW5wdXQgaXMgcmVzdHJpY3RlZCBieSB0aGUgY3VycmVudCBwYXR0ZXJuOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm1vZGVsXCIgaWQ9XCJpbnB1dFwiIG5hbWU9XCJpbnB1dFwiIG5nLXBhdHRlcm49XCJyZWdleFwiIC8+PGJyPlxuICogICAgICAgICA8aHI+XG4gKiAgICAgICAgIGlucHV0IHZhbGlkPyA9IDxjb2RlPnt7Zm9ybS5pbnB1dC4kdmFsaWR9fTwvY29kZT48YnI+XG4gKiAgICAgICAgIG1vZGVsID0gPGNvZGU+e3ttb2RlbH19PC9jb2RlPlxuICogICAgICAgPC9mb3JtPlxuICogICAgIDwvZGl2PlxuICogICA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgICB2YXIgbW9kZWwgPSBlbGVtZW50KGJ5LmJpbmRpbmcoJ21vZGVsJykpO1xuICAgICAgIHZhciBpbnB1dCA9IGVsZW1lbnQoYnkuaWQoJ2lucHV0JykpO1xuXG4gICAgICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSB0aGUgaW5wdXQgd2l0aCB0aGUgZGVmYXVsdCBwYXR0ZXJuJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWFhJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS5ub3QudG9Db250YWluKCdhYWEnKTtcblxuICAgICAgICAgaW5wdXQuY2xlYXIoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnMTIzJyk7XG4gICAgICAgICAgIGV4cGVjdChtb2RlbC5nZXRUZXh0KCkpLnRvQ29udGFpbignMTIzJyk7XG4gICAgICAgICB9KTtcbiAgICAgICB9KTtcbiAqICAgPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG52YXIgcGF0dGVybkRpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIHJlZ2V4cCwgcGF0dGVybkV4cCA9IGF0dHIubmdQYXR0ZXJuIHx8IGF0dHIucGF0dGVybjtcbiAgICAgIGF0dHIuJG9ic2VydmUoJ3BhdHRlcm4nLCBmdW5jdGlvbihyZWdleCkge1xuICAgICAgICBpZiAoaXNTdHJpbmcocmVnZXgpICYmIHJlZ2V4Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZWdleCA9IG5ldyBSZWdFeHAoJ14nICsgcmVnZXggKyAnJCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlZ2V4ICYmICFyZWdleC50ZXN0KSB7XG4gICAgICAgICAgdGhyb3cgbWluRXJyKCduZ1BhdHRlcm4nKSgnbm9yZWdleHAnLFxuICAgICAgICAgICAgJ0V4cGVjdGVkIHswfSB0byBiZSBhIFJlZ0V4cCBidXQgd2FzIHsxfS4gRWxlbWVudDogezJ9JywgcGF0dGVybkV4cCxcbiAgICAgICAgICAgIHJlZ2V4LCBzdGFydGluZ1RhZyhlbG0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2V4cCA9IHJlZ2V4IHx8IHVuZGVmaW5lZDtcbiAgICAgICAgY3RybC4kdmFsaWRhdGUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLnBhdHRlcm4gPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgLy8gSFRNTDUgcGF0dGVybiBjb25zdHJhaW50IHZhbGlkYXRlcyB0aGUgaW5wdXQgdmFsdWUsIHNvIHdlIHZhbGlkYXRlIHRoZSB2aWV3VmFsdWVcbiAgICAgICAgcmV0dXJuIGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCBpc1VuZGVmaW5lZChyZWdleHApIHx8IHJlZ2V4cC50ZXN0KHZpZXdWYWx1ZSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKlxuICogQG5nZG9jIGRpcmVjdGl2ZVxuICogQG5hbWUgbmdNYXhsZW5ndGhcbiAqIEByZXN0cmljdCBBXG4gKlxuICogQHBhcmFtIHtleHByZXNzaW9ufSBuZ01heGxlbmd0aCBBbmd1bGFySlMgZXhwcmVzc2lvbiB0aGF0IG11c3QgZXZhbHVhdGUgdG8gYSBgTnVtYmVyYCBvciBgU3RyaW5nYFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzYWJsZSBpbnRvIGEgYE51bWJlcmAuIFVzZWQgYXMgdmFsdWUgZm9yIHRoZSBgbWF4bGVuZ3RoYFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyB2YWxpZGF0b3J9LlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIG5nTWF4bGVuZ3RoIGFkZHMgdGhlIG1heGxlbmd0aCB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmFsaWRhdG9ycyBgdmFsaWRhdG9yYH0gdG8ge0BsaW5rIG5nTW9kZWwgYG5nTW9kZWxgfS5cbiAqIEl0IGlzIG1vc3Qgb2Z0ZW4gdXNlZCBmb3IgdGV4dC1iYXNlZCB7QGxpbmsgaW5wdXQgYGlucHV0YH0gY29udHJvbHMsIGJ1dCBjYW4gYWxzbyBiZSBhcHBsaWVkIHRvIGN1c3RvbSB0ZXh0LWJhc2VkIGNvbnRyb2xzLlxuICpcbiAqIFRoZSB2YWxpZGF0b3Igc2V0cyB0aGUgYG1heGxlbmd0aGAgZXJyb3Iga2V5IGlmIHRoZSB7QGxpbmsgbmdNb2RlbC5OZ01vZGVsQ29udHJvbGxlciMkdmlld1ZhbHVlIGBuZ01vZGVsLiR2aWV3VmFsdWVgfVxuICogaXMgbG9uZ2VyIHRoYW4gdGhlIGludGVnZXIgb2J0YWluZWQgYnkgZXZhbHVhdGluZyB0aGUgQW5ndWxhciBleHByZXNzaW9uIGdpdmVuIGluIHRoZVxuICogYG5nTWF4bGVuZ3RoYCBhdHRyaWJ1dGUgdmFsdWUuXG4gKlxuICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWluZm9cIj5cbiAqICoqTm90ZToqKiBUaGlzIGRpcmVjdGl2ZSBpcyBhbHNvIGFkZGVkIHdoZW4gdGhlIHBsYWluIGBtYXhsZW5ndGhgIGF0dHJpYnV0ZSBpcyB1c2VkLCB3aXRoIHR3b1xuICogZGlmZmVyZW5jZXM6XG4gKiA8b2w+XG4gKiAgIDxsaT5cbiAqICAgICBgbmdNYXhsZW5ndGhgIGRvZXMgbm90IHNldCB0aGUgYG1heGxlbmd0aGAgYXR0cmlidXRlIGFuZCB0aGVyZWZvcmUgSFRNTDUgY29uc3RyYWludFxuICogICAgIHZhbGlkYXRpb24gaXMgbm90IGF2YWlsYWJsZS5cbiAqICAgPC9saT5cbiAqICAgPGxpPlxuICogICAgIFRoZSBgbmdNYXhsZW5ndGhgIGF0dHJpYnV0ZSBtdXN0IGJlIGFuIGV4cHJlc3Npb24sIHdoaWxlIHRoZSBgbWF4bGVuZ3RoYCB2YWx1ZSBtdXN0IGJlXG4gKiAgICAgaW50ZXJwb2xhdGVkLlxuICogICA8L2xpPlxuICogPC9vbD5cbiAqIDwvZGl2PlxuICpcbiAqIEBleGFtcGxlXG4gKiA8ZXhhbXBsZSBuYW1lPVwibmdNYXhsZW5ndGhEaXJlY3RpdmVcIiBtb2R1bGU9XCJuZ01heGxlbmd0aEV4YW1wbGVcIj5cbiAqICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cbiAqICAgICA8c2NyaXB0PlxuICogICAgICAgYW5ndWxhci5tb2R1bGUoJ25nTWF4bGVuZ3RoRXhhbXBsZScsIFtdKVxuICogICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xuICogICAgICAgICAgICRzY29wZS5tYXhsZW5ndGggPSA1O1xuICogICAgICAgICB9XSk7XG4gKiAgICAgPC9zY3JpcHQ+XG4gKiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAqICAgICAgIDxmb3JtIG5hbWU9XCJmb3JtXCI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJtYXhsZW5ndGhcIj5TZXQgYSBtYXhsZW5ndGg6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgbmctbW9kZWw9XCJtYXhsZW5ndGhcIiBpZD1cIm1heGxlbmd0aFwiIC8+XG4gKiAgICAgICAgIDxicj5cbiAqICAgICAgICAgPGxhYmVsIGZvcj1cImlucHV0XCI+VGhpcyBpbnB1dCBpcyByZXN0cmljdGVkIGJ5IHRoZSBjdXJyZW50IG1heGxlbmd0aDogPC9sYWJlbD5cbiAqICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJtb2RlbFwiIGlkPVwiaW5wdXRcIiBuYW1lPVwiaW5wdXRcIiBuZy1tYXhsZW5ndGg9XCJtYXhsZW5ndGhcIiAvPjxicj5cbiAqICAgICAgICAgPGhyPlxuICogICAgICAgICBpbnB1dCB2YWxpZD8gPSA8Y29kZT57e2Zvcm0uaW5wdXQuJHZhbGlkfX08L2NvZGU+PGJyPlxuICogICAgICAgICBtb2RlbCA9IDxjb2RlPnt7bW9kZWx9fTwvY29kZT5cbiAqICAgICAgIDwvZm9ybT5cbiAqICAgICA8L2Rpdj5cbiAqICAgPC9maWxlPlxuICogICA8ZmlsZSBuYW1lPVwicHJvdHJhY3Rvci5qc1wiIHR5cGU9XCJwcm90cmFjdG9yXCI+XG4gICAgICAgdmFyIG1vZGVsID0gZWxlbWVudChieS5iaW5kaW5nKCdtb2RlbCcpKTtcbiAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50KGJ5LmlkKCdpbnB1dCcpKTtcblxuICAgICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgdGhlIGlucHV0IHdpdGggdGhlIGRlZmF1bHQgbWF4bGVuZ3RoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWJjZGVmJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS5ub3QudG9Db250YWluKCdhYmNkZWYnKTtcblxuICAgICAgICAgaW5wdXQuY2xlYXIoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWJjZGUnKTtcbiAgICAgICAgICAgZXhwZWN0KG1vZGVsLmdldFRleHQoKSkudG9Db250YWluKCdhYmNkZScpO1xuICAgICAgICAgfSk7XG4gICAgICAgfSk7XG4gKiAgIDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xudmFyIG1heGxlbmd0aERpcmVjdGl2ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQScsXG4gICAgcmVxdWlyZTogJz9uZ01vZGVsJyxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxtLCBhdHRyLCBjdHJsKSB7XG4gICAgICBpZiAoIWN0cmwpIHJldHVybjtcblxuICAgICAgdmFyIG1heGxlbmd0aCA9IC0xO1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWF4bGVuZ3RoJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFyIGludFZhbCA9IHRvSW50KHZhbHVlKTtcbiAgICAgICAgbWF4bGVuZ3RoID0gaXNOdW1iZXJOYU4oaW50VmFsKSA/IC0xIDogaW50VmFsO1xuICAgICAgICBjdHJsLiR2YWxpZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgICBjdHJsLiR2YWxpZGF0b3JzLm1heGxlbmd0aCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICByZXR1cm4gKG1heGxlbmd0aCA8IDApIHx8IGN0cmwuJGlzRW1wdHkodmlld1ZhbHVlKSB8fCAodmlld1ZhbHVlLmxlbmd0aCA8PSBtYXhsZW5ndGgpO1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcbiAqIEBuYW1lIG5nTWlubGVuZ3RoXG4gKiBAcmVzdHJpY3QgQVxuICpcbiAqIEBwYXJhbSB7ZXhwcmVzc2lvbn0gbmdNaW5sZW5ndGggQW5ndWxhckpTIGV4cHJlc3Npb24gdGhhdCBtdXN0IGV2YWx1YXRlIHRvIGEgYE51bWJlcmAgb3IgYFN0cmluZ2BcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2FibGUgaW50byBhIGBOdW1iZXJgLiBVc2VkIGFzIHZhbHVlIGZvciB0aGUgYG1pbmxlbmd0aGBcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgdmFsaWRhdG9yfS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBuZ01pbmxlbmd0aCBhZGRzIHRoZSBtaW5sZW5ndGgge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZhbGlkYXRvcnMgYHZhbGlkYXRvcmB9IHRvIHtAbGluayBuZ01vZGVsIGBuZ01vZGVsYH0uXG4gKiBJdCBpcyBtb3N0IG9mdGVuIHVzZWQgZm9yIHRleHQtYmFzZWQge0BsaW5rIGlucHV0IGBpbnB1dGB9IGNvbnRyb2xzLCBidXQgY2FuIGFsc28gYmUgYXBwbGllZCB0byBjdXN0b20gdGV4dC1iYXNlZCBjb250cm9scy5cbiAqXG4gKiBUaGUgdmFsaWRhdG9yIHNldHMgdGhlIGBtaW5sZW5ndGhgIGVycm9yIGtleSBpZiB0aGUge0BsaW5rIG5nTW9kZWwuTmdNb2RlbENvbnRyb2xsZXIjJHZpZXdWYWx1ZSBgbmdNb2RlbC4kdmlld1ZhbHVlYH1cbiAqIGlzIHNob3J0ZXIgdGhhbiB0aGUgaW50ZWdlciBvYnRhaW5lZCBieSBldmFsdWF0aW5nIHRoZSBBbmd1bGFyIGV4cHJlc3Npb24gZ2l2ZW4gaW4gdGhlXG4gKiBgbmdNaW5sZW5ndGhgIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtaW5mb1wiPlxuICogKipOb3RlOioqIFRoaXMgZGlyZWN0aXZlIGlzIGFsc28gYWRkZWQgd2hlbiB0aGUgcGxhaW4gYG1pbmxlbmd0aGAgYXR0cmlidXRlIGlzIHVzZWQsIHdpdGggdHdvXG4gKiBkaWZmZXJlbmNlczpcbiAqIDxvbD5cbiAqICAgPGxpPlxuICogICAgIGBuZ01pbmxlbmd0aGAgZG9lcyBub3Qgc2V0IHRoZSBgbWlubGVuZ3RoYCBhdHRyaWJ1dGUgYW5kIHRoZXJlZm9yZSBIVE1MNSBjb25zdHJhaW50XG4gKiAgICAgdmFsaWRhdGlvbiBpcyBub3QgYXZhaWxhYmxlLlxuICogICA8L2xpPlxuICogICA8bGk+XG4gKiAgICAgVGhlIGBuZ01pbmxlbmd0aGAgdmFsdWUgbXVzdCBiZSBhbiBleHByZXNzaW9uLCB3aGlsZSB0aGUgYG1pbmxlbmd0aGAgdmFsdWUgbXVzdCBiZVxuICogICAgIGludGVycG9sYXRlZC5cbiAqICAgPC9saT5cbiAqIDwvb2w+XG4gKiA8L2Rpdj5cbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cIm5nTWlubGVuZ3RoRGlyZWN0aXZlXCIgbW9kdWxlPVwibmdNaW5sZW5ndGhFeGFtcGxlXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJpbmRleC5odG1sXCI+XG4gKiAgICAgPHNjcmlwdD5cbiAqICAgICAgIGFuZ3VsYXIubW9kdWxlKCduZ01pbmxlbmd0aEV4YW1wbGUnLCBbXSlcbiAqICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAqICAgICAgICAgICAkc2NvcGUubWlubGVuZ3RoID0gMztcbiAqICAgICAgICAgfV0pO1xuICogICAgIDwvc2NyaXB0PlxuICogICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gKiAgICAgICA8Zm9ybSBuYW1lPVwiZm9ybVwiPlxuICogICAgICAgICA8bGFiZWwgZm9yPVwibWlubGVuZ3RoXCI+U2V0IGEgbWlubGVuZ3RoOiA8L2xhYmVsPlxuICogICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIG5nLW1vZGVsPVwibWlubGVuZ3RoXCIgaWQ9XCJtaW5sZW5ndGhcIiAvPlxuICogICAgICAgICA8YnI+XG4gKiAgICAgICAgIDxsYWJlbCBmb3I9XCJpbnB1dFwiPlRoaXMgaW5wdXQgaXMgcmVzdHJpY3RlZCBieSB0aGUgY3VycmVudCBtaW5sZW5ndGg6IDwvbGFiZWw+XG4gKiAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWxcIiBpZD1cImlucHV0XCIgbmFtZT1cImlucHV0XCIgbmctbWlubGVuZ3RoPVwibWlubGVuZ3RoXCIgLz48YnI+XG4gKiAgICAgICAgIDxocj5cbiAqICAgICAgICAgaW5wdXQgdmFsaWQ/ID0gPGNvZGU+e3tmb3JtLmlucHV0LiR2YWxpZH19PC9jb2RlPjxicj5cbiAqICAgICAgICAgbW9kZWwgPSA8Y29kZT57e21vZGVsfX08L2NvZGU+XG4gKiAgICAgICA8L2Zvcm0+XG4gKiAgICAgPC9kaXY+XG4gKiAgIDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIHZhciBtb2RlbCA9IGVsZW1lbnQoYnkuYmluZGluZygnbW9kZWwnKSk7XG4gICAgICAgdmFyIGlucHV0ID0gZWxlbWVudChieS5pZCgnaW5wdXQnKSk7XG5cbiAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRoZSBpbnB1dCB3aXRoIHRoZSBkZWZhdWx0IG1pbmxlbmd0aCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgaW5wdXQuc2VuZEtleXMoJ2FiJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS5ub3QudG9Db250YWluKCdhYicpO1xuXG4gICAgICAgICBpbnB1dC5zZW5kS2V5cygnYWJjJyk7XG4gICAgICAgICBleHBlY3QobW9kZWwuZ2V0VGV4dCgpKS50b0NvbnRhaW4oJ2FiYycpO1xuICAgICAgIH0pO1xuICogICA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbnZhciBtaW5sZW5ndGhEaXJlY3RpdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0EnLFxuICAgIHJlcXVpcmU6ICc/bmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsbSwgYXR0ciwgY3RybCkge1xuICAgICAgaWYgKCFjdHJsKSByZXR1cm47XG5cbiAgICAgIHZhciBtaW5sZW5ndGggPSAwO1xuICAgICAgYXR0ci4kb2JzZXJ2ZSgnbWlubGVuZ3RoJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgbWlubGVuZ3RoID0gdG9JbnQodmFsdWUpIHx8IDA7XG4gICAgICAgIGN0cmwuJHZhbGlkYXRlKCk7XG4gICAgICB9KTtcbiAgICAgIGN0cmwuJHZhbGlkYXRvcnMubWlubGVuZ3RoID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjdHJsLiRpc0VtcHR5KHZpZXdWYWx1ZSkgfHwgdmlld1ZhbHVlLmxlbmd0aCA+PSBtaW5sZW5ndGg7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn07XG5cbmlmICh3aW5kb3cuYW5ndWxhci5ib290c3RyYXApIHtcbiAgLy8gQW5ndWxhckpTIGlzIGFscmVhZHkgbG9hZGVkLCBzbyB3ZSBjYW4gcmV0dXJuIGhlcmUuLi5cbiAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XG4gICAgY29uc29sZS5sb2coJ1dBUk5JTkc6IFRyaWVkIHRvIGxvYWQgYW5ndWxhciBtb3JlIHRoYW4gb25jZS4nKTtcbiAgfVxuICByZXR1cm47XG59XG5cbi8vIHRyeSB0byBiaW5kIHRvIGpxdWVyeSBub3cgc28gdGhhdCBvbmUgY2FuIHdyaXRlIGpxTGl0ZShmbilcbi8vIGJ1dCB3ZSB3aWxsIHJlYmluZCBvbiBib290c3RyYXAgYWdhaW4uXG5iaW5kSlF1ZXJ5KCk7XG5cbnB1Ymxpc2hFeHRlcm5hbEFQSShhbmd1bGFyKTtcblxuYW5ndWxhci5tb2R1bGUoXCJuZ0xvY2FsZVwiLCBbXSwgW1wiJHByb3ZpZGVcIiwgZnVuY3Rpb24oJHByb3ZpZGUpIHtcbnZhciBQTFVSQUxfQ0FURUdPUlkgPSB7WkVSTzogXCJ6ZXJvXCIsIE9ORTogXCJvbmVcIiwgVFdPOiBcInR3b1wiLCBGRVc6IFwiZmV3XCIsIE1BTlk6IFwibWFueVwiLCBPVEhFUjogXCJvdGhlclwifTtcbmZ1bmN0aW9uIGdldERlY2ltYWxzKG4pIHtcbiAgbiA9IG4gKyAnJztcbiAgdmFyIGkgPSBuLmluZGV4T2YoJy4nKTtcbiAgcmV0dXJuIChpID09IC0xKSA/IDAgOiBuLmxlbmd0aCAtIGkgLSAxO1xufVxuXG5mdW5jdGlvbiBnZXRWRihuLCBvcHRfcHJlY2lzaW9uKSB7XG4gIHZhciB2ID0gb3B0X3ByZWNpc2lvbjtcblxuICBpZiAodW5kZWZpbmVkID09PSB2KSB7XG4gICAgdiA9IE1hdGgubWluKGdldERlY2ltYWxzKG4pLCAzKTtcbiAgfVxuXG4gIHZhciBiYXNlID0gTWF0aC5wb3coMTAsIHYpO1xuICB2YXIgZiA9ICgobiAqIGJhc2UpIHwgMCkgJSBiYXNlO1xuICByZXR1cm4ge3Y6IHYsIGY6IGZ9O1xufVxuXG4kcHJvdmlkZS52YWx1ZShcIiRsb2NhbGVcIiwge1xuICBcIkRBVEVUSU1FX0ZPUk1BVFNcIjoge1xuICAgIFwiQU1QTVNcIjogW1xuICAgICAgXCJBTVwiLFxuICAgICAgXCJQTVwiXG4gICAgXSxcbiAgICBcIkRBWVwiOiBbXG4gICAgICBcIlN1bmRheVwiLFxuICAgICAgXCJNb25kYXlcIixcbiAgICAgIFwiVHVlc2RheVwiLFxuICAgICAgXCJXZWRuZXNkYXlcIixcbiAgICAgIFwiVGh1cnNkYXlcIixcbiAgICAgIFwiRnJpZGF5XCIsXG4gICAgICBcIlNhdHVyZGF5XCJcbiAgICBdLFxuICAgIFwiRVJBTkFNRVNcIjogW1xuICAgICAgXCJCZWZvcmUgQ2hyaXN0XCIsXG4gICAgICBcIkFubm8gRG9taW5pXCJcbiAgICBdLFxuICAgIFwiRVJBU1wiOiBbXG4gICAgICBcIkJDXCIsXG4gICAgICBcIkFEXCJcbiAgICBdLFxuICAgIFwiRklSU1REQVlPRldFRUtcIjogNixcbiAgICBcIk1PTlRIXCI6IFtcbiAgICAgIFwiSmFudWFyeVwiLFxuICAgICAgXCJGZWJydWFyeVwiLFxuICAgICAgXCJNYXJjaFwiLFxuICAgICAgXCJBcHJpbFwiLFxuICAgICAgXCJNYXlcIixcbiAgICAgIFwiSnVuZVwiLFxuICAgICAgXCJKdWx5XCIsXG4gICAgICBcIkF1Z3VzdFwiLFxuICAgICAgXCJTZXB0ZW1iZXJcIixcbiAgICAgIFwiT2N0b2JlclwiLFxuICAgICAgXCJOb3ZlbWJlclwiLFxuICAgICAgXCJEZWNlbWJlclwiXG4gICAgXSxcbiAgICBcIlNIT1JUREFZXCI6IFtcbiAgICAgIFwiU3VuXCIsXG4gICAgICBcIk1vblwiLFxuICAgICAgXCJUdWVcIixcbiAgICAgIFwiV2VkXCIsXG4gICAgICBcIlRodVwiLFxuICAgICAgXCJGcmlcIixcbiAgICAgIFwiU2F0XCJcbiAgICBdLFxuICAgIFwiU0hPUlRNT05USFwiOiBbXG4gICAgICBcIkphblwiLFxuICAgICAgXCJGZWJcIixcbiAgICAgIFwiTWFyXCIsXG4gICAgICBcIkFwclwiLFxuICAgICAgXCJNYXlcIixcbiAgICAgIFwiSnVuXCIsXG4gICAgICBcIkp1bFwiLFxuICAgICAgXCJBdWdcIixcbiAgICAgIFwiU2VwXCIsXG4gICAgICBcIk9jdFwiLFxuICAgICAgXCJOb3ZcIixcbiAgICAgIFwiRGVjXCJcbiAgICBdLFxuICAgIFwiU1RBTkRBTE9ORU1PTlRIXCI6IFtcbiAgICAgIFwiSmFudWFyeVwiLFxuICAgICAgXCJGZWJydWFyeVwiLFxuICAgICAgXCJNYXJjaFwiLFxuICAgICAgXCJBcHJpbFwiLFxuICAgICAgXCJNYXlcIixcbiAgICAgIFwiSnVuZVwiLFxuICAgICAgXCJKdWx5XCIsXG4gICAgICBcIkF1Z3VzdFwiLFxuICAgICAgXCJTZXB0ZW1iZXJcIixcbiAgICAgIFwiT2N0b2JlclwiLFxuICAgICAgXCJOb3ZlbWJlclwiLFxuICAgICAgXCJEZWNlbWJlclwiXG4gICAgXSxcbiAgICBcIldFRUtFTkRSQU5HRVwiOiBbXG4gICAgICA1LFxuICAgICAgNlxuICAgIF0sXG4gICAgXCJmdWxsRGF0ZVwiOiBcIkVFRUUsIE1NTU0gZCwgeVwiLFxuICAgIFwibG9uZ0RhdGVcIjogXCJNTU1NIGQsIHlcIixcbiAgICBcIm1lZGl1bVwiOiBcIk1NTSBkLCB5IGg6bW06c3MgYVwiLFxuICAgIFwibWVkaXVtRGF0ZVwiOiBcIk1NTSBkLCB5XCIsXG4gICAgXCJtZWRpdW1UaW1lXCI6IFwiaDptbTpzcyBhXCIsXG4gICAgXCJzaG9ydFwiOiBcIk0vZC95eSBoOm1tIGFcIixcbiAgICBcInNob3J0RGF0ZVwiOiBcIk0vZC95eVwiLFxuICAgIFwic2hvcnRUaW1lXCI6IFwiaDptbSBhXCJcbiAgfSxcbiAgXCJOVU1CRVJfRk9STUFUU1wiOiB7XG4gICAgXCJDVVJSRU5DWV9TWU1cIjogXCIkXCIsXG4gICAgXCJERUNJTUFMX1NFUFwiOiBcIi5cIixcbiAgICBcIkdST1VQX1NFUFwiOiBcIixcIixcbiAgICBcIlBBVFRFUk5TXCI6IFtcbiAgICAgIHtcbiAgICAgICAgXCJnU2l6ZVwiOiAzLFxuICAgICAgICBcImxnU2l6ZVwiOiAzLFxuICAgICAgICBcIm1heEZyYWNcIjogMyxcbiAgICAgICAgXCJtaW5GcmFjXCI6IDAsXG4gICAgICAgIFwibWluSW50XCI6IDEsXG4gICAgICAgIFwibmVnUHJlXCI6IFwiLVwiLFxuICAgICAgICBcIm5lZ1N1ZlwiOiBcIlwiLFxuICAgICAgICBcInBvc1ByZVwiOiBcIlwiLFxuICAgICAgICBcInBvc1N1ZlwiOiBcIlwiXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcImdTaXplXCI6IDMsXG4gICAgICAgIFwibGdTaXplXCI6IDMsXG4gICAgICAgIFwibWF4RnJhY1wiOiAyLFxuICAgICAgICBcIm1pbkZyYWNcIjogMixcbiAgICAgICAgXCJtaW5JbnRcIjogMSxcbiAgICAgICAgXCJuZWdQcmVcIjogXCItXFx1MDBhNFwiLFxuICAgICAgICBcIm5lZ1N1ZlwiOiBcIlwiLFxuICAgICAgICBcInBvc1ByZVwiOiBcIlxcdTAwYTRcIixcbiAgICAgICAgXCJwb3NTdWZcIjogXCJcIlxuICAgICAgfVxuICAgIF1cbiAgfSxcbiAgXCJpZFwiOiBcImVuLXVzXCIsXG4gIFwibG9jYWxlSURcIjogXCJlbl9VU1wiLFxuICBcInBsdXJhbENhdFwiOiBmdW5jdGlvbihuLCBvcHRfcHJlY2lzaW9uKSB7ICB2YXIgaSA9IG4gfCAwOyAgdmFyIHZmID0gZ2V0VkYobiwgb3B0X3ByZWNpc2lvbik7ICBpZiAoaSA9PSAxICYmIHZmLnYgPT0gMCkgeyAgICByZXR1cm4gUExVUkFMX0NBVEVHT1JZLk9ORTsgIH0gIHJldHVybiBQTFVSQUxfQ0FURUdPUlkuT1RIRVI7fVxufSk7XG59XSk7XG5cbiAganFMaXRlKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXJJbml0KHdpbmRvdy5kb2N1bWVudCwgYm9vdHN0cmFwKTtcbiAgfSk7XG5cbn0pKHdpbmRvdyk7XG5cbiF3aW5kb3cuYW5ndWxhci4kJGNzcCgpLm5vSW5saW5lU3R5bGUgJiYgd2luZG93LmFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5oZWFkKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+QGNoYXJzZXQgXCJVVEYtOFwiO1tuZ1xcXFw6Y2xvYWtdLFtuZy1jbG9ha10sW2RhdGEtbmctY2xvYWtdLFt4LW5nLWNsb2FrXSwubmctY2xvYWssLngtbmctY2xvYWssLm5nLWhpZGU6bm90KC5uZy1oaWRlLWFuaW1hdGUpe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcXFw6Zm9ybXtkaXNwbGF5OmJsb2NrO30ubmctYW5pbWF0ZS1zaGlte3Zpc2liaWxpdHk6aGlkZGVuO30ubmctYW5jaG9ye3Bvc2l0aW9uOmFic29sdXRlO308L3N0eWxlPicpOyIsIi8qKlxuICogU3RhdGUtYmFzZWQgcm91dGluZyBmb3IgQW5ndWxhckpTIDEueFxuICogTk9USUNFOiBUaGlzIG1vbm9saXRoaWMgYnVuZGxlIGFsc28gYnVuZGxlcyB0aGUgQHVpcm91dGVyL2NvcmUgY29kZS5cbiAqICAgICAgICAgVGhpcyBjYXVzZXMgaXQgdG8gYmUgaW5jb21wYXRpYmxlIHdpdGggcGx1Z2lucyB0aGF0IGRlcGVuZCBvbiBAdWlyb3V0ZXIvY29yZS5cbiAqICAgICAgICAgV2UgcmVjb21tZW5kIHN3aXRjaGluZyB0byB0aGUgdWktcm91dGVyLWNvcmUuanMgYW5kIHVpLXJvdXRlci1hbmd1bGFyanMuanMgYnVuZGxlcyBpbnN0ZWFkLlxuICogICAgICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIGh0dHBzOi8vdWktcm91dGVyLmdpdGh1Yi5pby9ibG9nL3Vpcm91dGVyLWZvci1hbmd1bGFyanMtdW1kLWJ1bmRsZXNcbiAqIEB2ZXJzaW9uIHYxLjAuMTRcbiAqIEBsaW5rIGh0dHBzOi8vdWktcm91dGVyLmdpdGh1Yi5pb1xuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cywgcmVxdWlyZSgnYW5ndWxhcicpKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnLCAnYW5ndWxhciddLCBmYWN0b3J5KSA6XG5cdChmYWN0b3J5KChnbG9iYWxbJ0B1aXJvdXRlci9hbmd1bGFyanMnXSA9IHt9KSxnbG9iYWwuYW5ndWxhcikpO1xufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMsbmdfZnJvbV9pbXBvcnQpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmdfZnJvbV9nbG9iYWwgPSBhbmd1bGFyO1xudmFyIG5nID0gKG5nX2Zyb21faW1wb3J0ICYmIG5nX2Zyb21faW1wb3J0Lm1vZHVsZSkgPyBuZ19mcm9tX2ltcG9ydCA6IG5nX2Zyb21fZ2xvYmFsO1xuXG4vKipcbiAqIEhpZ2hlciBvcmRlciBmdW5jdGlvbnNcbiAqXG4gKiBUaGVzZSB1dGlsaXR5IGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIGJ1dCBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQG1vZHVsZSBjb21tb25faG9mXG4gKi8gLyoqICovXG4vKipcbiAqIFJldHVybnMgYSBuZXcgZnVuY3Rpb24gZm9yIFtQYXJ0aWFsIEFwcGxpY2F0aW9uXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXJ0aWFsX2FwcGxpY2F0aW9uKSBvZiB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gKlxuICogR2l2ZW4gYSBmdW5jdGlvbiB3aXRoIE4gcGFyYW1ldGVycywgcmV0dXJucyBhIG5ldyBmdW5jdGlvbiB0aGF0IHN1cHBvcnRzIHBhcnRpYWwgYXBwbGljYXRpb24uXG4gKiBUaGUgbmV3IGZ1bmN0aW9uIGFjY2VwdHMgYW55d2hlcmUgZnJvbSAxIHRvIE4gcGFyYW1ldGVycy4gIFdoZW4gdGhhdCBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBNIHBhcmFtZXRlcnMsXG4gKiB3aGVyZSBNIGlzIGxlc3MgdGhhbiBOLCBpdCByZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyB0aGUgcmVtYWluaW5nIHBhcmFtZXRlcnMuICBJdCBjb250aW51ZXMgdG9cbiAqIGFjY2VwdCBtb3JlIHBhcmFtZXRlcnMgdW50aWwgYWxsIE4gcGFyYW1ldGVycyBoYXZlIGJlZW4gc3VwcGxpZWQuXG4gKlxuICpcbiAqIFRoaXMgY29udHJpdmVkIGV4YW1wbGUgdXNlcyBhIHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uIGFzIGFuIHByZWRpY2F0ZSwgd2hpY2ggcmV0dXJucyB0cnVlXG4gKiBpZiBhbiBvYmplY3QgaXMgZm91bmQgaW4gYm90aCBhcnJheXMuXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKiAvLyByZXR1cm5zIHRydWUgaWYgYW4gb2JqZWN0IGlzIGluIGJvdGggb2YgdGhlIHR3byBhcnJheXNcbiAqIGZ1bmN0aW9uIGluQm90aChhcnJheTEsIGFycmF5Miwgb2JqZWN0KSB7XG4gKiAgIHJldHVybiBhcnJheTEuaW5kZXhPZihvYmplY3QpICE9PSAtMSAmJlxuICogICAgICAgICAgYXJyYXkyLmluZGV4T2Yob2JqZWN0KSAhPT0gMTtcbiAqIH1cbiAqIGxldCBvYmoxLCBvYmoyLCBvYmozLCBvYmo0LCBvYmo1LCBvYmo2LCBvYmo3XG4gKiBsZXQgZm9vcyA9IFtvYmoxLCBvYmozXVxuICogbGV0IGJhcnMgPSBbb2JqMywgb2JqNCwgb2JqNV1cbiAqXG4gKiAvLyBBIGN1cnJpZWQgXCJjb3B5XCIgb2YgaW5Cb3RoXG4gKiBsZXQgY3VycmllZEluQm90aCA9IGN1cnJ5KGluQm90aCk7XG4gKiAvLyBQYXJ0aWFsbHkgYXBwbHkgYm90aCB0aGUgYXJyYXkxIGFuZCBhcnJheTJcbiAqIGxldCBpbkZvb3NBbmRCYXJzID0gY3VycmllZEluQm90aChmb29zLCBiYXJzKTtcbiAqXG4gKiAvLyBTdXBwbHkgdGhlIGZpbmFsIGFyZ3VtZW50OyBzaW5jZSBhbGwgYXJndW1lbnRzIGFyZVxuICogLy8gc3VwcGxpZWQsIHRoZSBvcmlnaW5hbCBpbkJvdGggZnVuY3Rpb24gaXMgdGhlbiBjYWxsZWQuXG4gKiBsZXQgb2JqMUluQm90aCA9IGluRm9vc0FuZEJhcnMob2JqMSk7IC8vIGZhbHNlXG4gKlxuICogLy8gVXNlIHRoZSBpbkZvb3NBbmRCYXJzIGFzIGEgcHJlZGljYXRlLlxuICogLy8gRmlsdGVyLCBvbiBlYWNoIGl0ZXJhdGlvbiwgc3VwcGxpZXMgdGhlIGZpbmFsIGFyZ3VtZW50XG4gKiBsZXQgYWxsT2JqcyA9IFsgb2JqMSwgb2JqMiwgb2JqMywgb2JqNCwgb2JqNSwgb2JqNiwgb2JqNyBdO1xuICogbGV0IGZvdW5kSW5Cb3RoID0gYWxsT2Jqcy5maWx0ZXIoaW5Gb29zQW5kQmFycyk7IC8vIFsgb2JqMyBdXG4gKlxuICogYGBgXG4gKlxuICogU3RvbGVuIGZyb206IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDM5NDc0Ny9qYXZhc2NyaXB0LWN1cnJ5LWZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIGZuXG4gKiBAcmV0dXJucyB7KnxmdW5jdGlvbigpOiAoKnxhbnkpfVxuICovXG5mdW5jdGlvbiBjdXJyeShmbikge1xuICAgIHZhciBpbml0aWFsX2FyZ3MgPSBbXS5zbGljZS5hcHBseShhcmd1bWVudHMsIFsxXSk7XG4gICAgdmFyIGZ1bmNfYXJnc19sZW5ndGggPSBmbi5sZW5ndGg7XG4gICAgZnVuY3Rpb24gY3VycmllZChhcmdzKSB7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSBmdW5jX2FyZ3NfbGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJpZWQoYXJncy5jb25jYXQoW10uc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gY3VycmllZChpbml0aWFsX2FyZ3MpO1xufVxuLyoqXG4gKiBHaXZlbiBhIHZhcmFyZ3MgbGlzdCBvZiBmdW5jdGlvbnMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGNvbXBvc2VzIHRoZSBhcmd1bWVudCBmdW5jdGlvbnMsIHJpZ2h0LXRvLWxlZnRcbiAqIGdpdmVuOiBmKHgpLCBnKHgpLCBoKHgpXG4gKiBsZXQgY29tcG9zZWQgPSBjb21wb3NlKGYsZyxoKVxuICogdGhlbiwgY29tcG9zZWQgaXM6IGYoZyhoKHgpKSlcbiAqL1xuZnVuY3Rpb24gY29tcG9zZSgpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgc3RhcnQgPSBhcmdzLmxlbmd0aCAtIDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGkgPSBzdGFydCwgcmVzdWx0ID0gYXJnc1tzdGFydF0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgd2hpbGUgKGktLSlcbiAgICAgICAgICAgIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIEdpdmVuIGEgdmFyYXJncyBsaXN0IG9mIGZ1bmN0aW9ucywgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaXMgY29tcG9zZXMgdGhlIGFyZ3VtZW50IGZ1bmN0aW9ucywgbGVmdC10by1yaWdodFxuICogZ2l2ZW46IGYoeCksIGcoeCksIGgoeClcbiAqIGxldCBwaXBlZCA9IHBpcGUoZixnLGgpO1xuICogdGhlbiwgcGlwZWQgaXM6IGgoZyhmKHgpKSlcbiAqL1xuZnVuY3Rpb24gcGlwZSgpIHtcbiAgICB2YXIgZnVuY3MgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBmdW5jc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gY29tcG9zZS5hcHBseShudWxsLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykucmV2ZXJzZSgpKTtcbn1cbi8qKlxuICogR2l2ZW4gYSBwcm9wZXJ0eSBuYW1lLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoYXQgcHJvcGVydHkgZnJvbSBhbiBvYmplY3RcbiAqIGxldCBvYmogPSB7IGZvbzogMSwgbmFtZTogXCJibGFyZ1wiIH07XG4gKiBsZXQgZ2V0TmFtZSA9IHByb3AoXCJuYW1lXCIpO1xuICogZ2V0TmFtZShvYmopID09PSBcImJsYXJnXCJcbiAqL1xudmFyIHByb3AgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqW25hbWVdOyB9O1xufTtcbi8qKlxuICogR2l2ZW4gYSBwcm9wZXJ0eSBuYW1lIGFuZCBhIHZhbHVlLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYm9vbGVhbiBiYXNlZCBvbiB3aGV0aGVyXG4gKiB0aGUgcGFzc2VkIG9iamVjdCBoYXMgYSBwcm9wZXJ0eSB0aGF0IG1hdGNoZXMgdGhlIHZhbHVlXG4gKiBsZXQgb2JqID0geyBmb286IDEsIG5hbWU6IFwiYmxhcmdcIiB9O1xuICogbGV0IGdldE5hbWUgPSBwcm9wRXEoXCJuYW1lXCIsIFwiYmxhcmdcIik7XG4gKiBnZXROYW1lKG9iaikgPT09IHRydWVcbiAqL1xudmFyIHByb3BFcSA9IGN1cnJ5KGZ1bmN0aW9uIChuYW1lLCBfdmFsLCBvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmpbbmFtZV0gPT09IF92YWw7IH0pO1xuLyoqXG4gKiBHaXZlbiBhIGRvdHRlZCBwcm9wZXJ0eSBuYW1lLCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbmVzdGVkIHByb3BlcnR5IGZyb20gYW4gb2JqZWN0LCBvciB1bmRlZmluZWRcbiAqIGxldCBvYmogPSB7IGlkOiAxLCBuZXN0ZWRPYmo6IHsgZm9vOiAxLCBuYW1lOiBcImJsYXJnXCIgfSwgfTtcbiAqIGxldCBnZXROYW1lID0gcHJvcChcIm5lc3RlZE9iai5uYW1lXCIpO1xuICogZ2V0TmFtZShvYmopID09PSBcImJsYXJnXCJcbiAqIGxldCBwcm9wTm90Rm91bmQgPSBwcm9wKFwidGhpcy5wcm9wZXJ0eS5kb2VzbnQuZXhpc3RcIik7XG4gKiBwcm9wTm90Rm91bmQob2JqKSA9PT0gdW5kZWZpbmVkXG4gKi9cbnZhciBwYXJzZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuIHBpcGUuYXBwbHkobnVsbCwgbmFtZS5zcGxpdCgnLicpLm1hcChwcm9wKSk7XG59O1xuLyoqXG4gKiBHaXZlbiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHRydXRoeSBvciBmYWxzZXkgdmFsdWUsIHJldHVybnMgYVxuICogZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBvcHBvc2l0ZSAoZmFsc2V5IG9yIHRydXRoeSkgdmFsdWUgZ2l2ZW4gdGhlIHNhbWUgaW5wdXRzXG4gKi9cbnZhciBub3QgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfTtcbn07XG4vKipcbiAqIEdpdmVuIHR3byBmdW5jdGlvbnMgdGhhdCByZXR1cm4gdHJ1dGh5IG9yIGZhbHNleSB2YWx1ZXMsIHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1dGh5XG4gKiBpZiBib3RoIGZ1bmN0aW9ucyByZXR1cm4gdHJ1dGh5IGZvciB0aGUgZ2l2ZW4gYXJndW1lbnRzXG4gKi9cbmZ1bmN0aW9uIGFuZChmbjEsIGZuMikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZuMS5hcHBseShudWxsLCBhcmdzKSAmJiBmbjIuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfTtcbn1cbi8qKlxuICogR2l2ZW4gdHdvIGZ1bmN0aW9ucyB0aGF0IHJldHVybiB0cnV0aHkgb3IgZmFsc2V5IHZhbHVlcywgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnV0aHlcbiAqIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgZnVuY3Rpb25zIHJldHVybnMgdHJ1dGh5IGZvciB0aGUgZ2l2ZW4gYXJndW1lbnRzXG4gKi9cbmZ1bmN0aW9uIG9yKGZuMSwgZm4yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm4xLmFwcGx5KG51bGwsIGFyZ3MpIHx8IGZuMi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiBhbGwgdGhlIGVsZW1lbnRzIG9mIGFuIGFycmF5IG1hdGNoIGEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIGZuMSBhIHByZWRpY2F0ZSBmdW5jdGlvbiBgZm4xYFxuICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCB0YWtlcyBhbiBhcnJheSBhbmQgcmV0dXJucyB0cnVlIGlmIGBmbjFgIGlzIHRydWUgZm9yIGFsbCBlbGVtZW50cyBvZiB0aGUgYXJyYXlcbiAqL1xudmFyIGFsbCA9IGZ1bmN0aW9uIChmbjEpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFycikgeyByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoYiwgeCkgeyByZXR1cm4gYiAmJiAhIWZuMSh4KTsgfSwgdHJ1ZSk7IH07XG59O1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnZhcmlhYmxlLW5hbWVcbnZhciBhbnkgPSBmdW5jdGlvbiAoZm4xKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcnIpIHsgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24gKGIsIHgpIHsgcmV0dXJuIGIgfHwgISFmbjEoeCk7IH0sIGZhbHNlKTsgfTtcbn07XG4vKiogR2l2ZW4gYSBjbGFzcywgcmV0dXJucyBhIFByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIG9mIHRoYXQgY2xhc3MgKi9cbnZhciBpcyA9IGZ1bmN0aW9uIChjdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIChvYmogIT0gbnVsbCAmJiBvYmouY29uc3RydWN0b3IgPT09IGN0b3IgfHwgb2JqIGluc3RhbmNlb2YgY3Rvcik7XG4gICAgfTtcbn07XG4vKiogR2l2ZW4gYSB2YWx1ZSwgcmV0dXJucyBhIFByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbm90aGVyIHZhbHVlIGlzID09PSBlcXVhbCB0byB0aGUgb3JpZ2luYWwgdmFsdWUgKi9cbnZhciBlcSA9IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBvdGhlcjtcbn07IH07XG4vKiogR2l2ZW4gYSB2YWx1ZSwgcmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdGhlIHZhbHVlICovXG52YXIgdmFsID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHY7IH07IH07XG5mdW5jdGlvbiBpbnZva2UoZm5OYW1lLCBhcmdzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9ialtmbk5hbWVdLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgfTtcbn1cbi8qKlxuICogU29ydGEgbGlrZSBQYXR0ZXJuIE1hdGNoaW5nIChhIGZ1bmN0aW9uYWwgcHJvZ3JhbW1pbmcgY29uZGl0aW9uYWwgY29uc3RydWN0KVxuICpcbiAqIFNlZSBodHRwOi8vYzIuY29tL2NnaS93aWtpP1BhdHRlcm5NYXRjaGluZ1xuICpcbiAqIFRoaXMgaXMgYSBjb25kaXRpb25hbCBjb25zdHJ1Y3Qgd2hpY2ggYWxsb3dzIGEgc2VyaWVzIG9mIHByZWRpY2F0ZXMgYW5kIG91dHB1dCBmdW5jdGlvbnNcbiAqIHRvIGJlIGNoZWNrZWQgYW5kIHRoZW4gYXBwbGllZC4gIEVhY2ggcHJlZGljYXRlIHJlY2VpdmVzIHRoZSBpbnB1dC4gIElmIHRoZSBwcmVkaWNhdGVcbiAqIHJldHVybnMgdHJ1dGh5LCB0aGVuIGl0cyBtYXRjaGluZyBvdXRwdXQgZnVuY3Rpb24gKG1hcHBpbmcgZnVuY3Rpb24pIGlzIHByb3ZpZGVkIHdpdGhcbiAqIHRoZSBpbnB1dCBhbmQsIHRoZW4gdGhlIHJlc3VsdCBpcyByZXR1cm5lZC5cbiAqXG4gKiBFYWNoIGNvbWJpbmF0aW9uICgyLXR1cGxlKSBvZiBwcmVkaWNhdGUgKyBvdXRwdXQgZnVuY3Rpb24gc2hvdWxkIGJlIHBsYWNlZCBpbiBhbiBhcnJheVxuICogb2Ygc2l6ZSAyOiBbIHByZWRpY2F0ZSwgbWFwRm4gXVxuICpcbiAqIFRoZXNlIDItdHVwbGVzIHNob3VsZCBiZSBwdXQgaW4gYW4gb3V0ZXIgYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIC8vIEhlcmUncyBhIDItdHVwbGUgd2hlcmUgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGlzU3RyaW5nIHByZWRpY2F0ZVxuICogLy8gYW5kIHRoZSBzZWNvbmQgZWxlbWVudCBpcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGRlc2NyaXB0aW9uIG9mIHRoZSBpbnB1dFxuICogbGV0IGZpcnN0VHVwbGUgPSBbIGFuZ3VsYXIuaXNTdHJpbmcsIChpbnB1dCkgPT4gYEhlcmVzIHlvdXIgc3RyaW5nICR7aW5wdXR9YCBdO1xuICpcbiAqIC8vIFNlY29uZCB0dXBsZTogcHJlZGljYXRlIFwiaXNOdW1iZXJcIiwgbWFwZm4gcmV0dXJucyBhIGRlc2NyaXB0aW9uXG4gKiBsZXQgc2Vjb25kVHVwbGUgPSBbIGFuZ3VsYXIuaXNOdW1iZXIsIChpbnB1dCkgPT4gYCgke2lucHV0fSkgVGhhdCdzIGEgbnVtYmVyIWAgXTtcbiAqXG4gKiBsZXQgdGhpcmQgPSBbIChpbnB1dCkgPT4gaW5wdXQgPT09IG51bGwsICAoaW5wdXQpID0+IGBPaCwgbnVsbC4uLmAgXTtcbiAqXG4gKiBsZXQgZm91cnRoID0gWyAoaW5wdXQpID0+IGlucHV0ID09PSB1bmRlZmluZWQsICAoaW5wdXQpID0+IGBub3RkZWZpbmVkYCBdO1xuICpcbiAqIGxldCBkZXNjcmlwdGlvbk9mID0gcGF0dGVybihbIGZpcnN0VHVwbGUsIHNlY29uZFR1cGxlLCB0aGlyZCwgZm91cnRoIF0pO1xuICpcbiAqIGNvbnNvbGUubG9nKGRlc2NyaXB0aW9uT2YodW5kZWZpbmVkKSk7IC8vICdub3RkZWZpbmVkJ1xuICogY29uc29sZS5sb2coZGVzY3JpcHRpb25PZig1NSkpOyAvLyAnKDU1KSBUaGF0J3MgYSBudW1iZXIhJ1xuICogY29uc29sZS5sb2coZGVzY3JpcHRpb25PZihcImZvb1wiKSk7IC8vICdIZXJlJ3MgeW91ciBzdHJpbmcgZm9vJ1xuICogYGBgXG4gKlxuICogQHBhcmFtIHN0cnVjdCBBIDJEIGFycmF5LiAgRWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSBzaG91bGQgYmUgYW4gYXJyYXksIGEgMi10dXBsZSxcbiAqIHdpdGggYSBQcmVkaWNhdGUgYW5kIGEgbWFwcGluZy9vdXRwdXQgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtmdW5jdGlvbihhbnkpOiAqfVxuICovXG5mdW5jdGlvbiBwYXR0ZXJuKHN0cnVjdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoeCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cnVjdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHN0cnVjdFtpXVswXSh4KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RydWN0W2ldWzFdKHgpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBjb3JlXG4gKi9cbi8qKlxuICogTWF0Y2hlcyBzdGF0ZSBuYW1lcyB1c2luZyBnbG9iLWxpa2UgcGF0dGVybiBzdHJpbmdzLlxuICpcbiAqIEdsb2JzIGNhbiBiZSB1c2VkIGluIHNwZWNpZmljIEFQSXMgaW5jbHVkaW5nOlxuICpcbiAqIC0gW1tTdGF0ZVNlcnZpY2UuaXNdXVxuICogLSBbW1N0YXRlU2VydmljZS5pbmNsdWRlc11dXG4gKiAtIFRoZSBmaXJzdCBhcmd1bWVudCB0byBIb29rIFJlZ2lzdHJhdGlvbiBmdW5jdGlvbnMgbGlrZSBbW1RyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnRdXVxuICogICAgLSBbW0hvb2tNYXRjaENyaXRlcmlhXV0gYW5kIFtbSG9va01hdGNoQ3JpdGVyaW9uXV1cbiAqXG4gKiBBIGBHbG9iYCBzdHJpbmcgaXMgYSBwYXR0ZXJuIHdoaWNoIG1hdGNoZXMgc3RhdGUgbmFtZXMuXG4gKiBOZXN0ZWQgc3RhdGUgbmFtZXMgYXJlIHNwbGl0IGludG8gc2VnbWVudHMgKHNlcGFyYXRlZCBieSBhIGRvdCkgd2hlbiBwcm9jZXNzaW5nLlxuICogVGhlIHN0YXRlIG5hbWVkIGBmb28uYmFyLmJhemAgaXMgc3BsaXQgaW50byB0aHJlZSBzZWdtZW50cyBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAqXG4gKiBHbG9icyB3b3JrIGFjY29yZGluZyB0byB0aGUgZm9sbG93aW5nIHJ1bGVzOlxuICpcbiAqICMjIyBFeGFjdCBtYXRjaDpcbiAqXG4gKiBUaGUgZ2xvYiBgJ0EuQidgIG1hdGNoZXMgdGhlIHN0YXRlIG5hbWVkIGV4YWN0bHkgYCdBLkInYC5cbiAqXG4gKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZHxEb2VzIG5vdCBtYXRjaCBzdGF0ZSBuYW1lZHxcbiAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJ0EnYCAgICAgICB8IGAnQSdgICAgICAgICAgICAgICAgfCBgJ0InYCAsIGAnQS5DJ2AgICAgICB8XG4gKiB8IGAnQS5CJ2AgICAgIHwgYCdBLkInYCAgICAgICAgICAgICB8IGAnQSdgICwgYCdBLkIuQydgICAgIHxcbiAqIHwgYCdmb28nYCAgICAgfCBgJ2ZvbydgICAgICAgICAgICAgIHwgYCdGT08nYCAsIGAnZm9vLmJhcidgfFxuICpcbiAqICMjIyBTaW5nbGUgc3RhciAoYCpgKVxuICpcbiAqIEEgc2luZ2xlIHN0YXIgKGAqYCkgaXMgYSB3aWxkY2FyZCB0aGF0IG1hdGNoZXMgZXhhY3RseSBvbmUgc2VnbWVudC5cbiAqXG4gKiB8IEdsb2IgICAgICAgIHxNYXRjaGVzIHN0YXRlcyBuYW1lZCAgfERvZXMgbm90IG1hdGNoIHN0YXRlIG5hbWVkIHxcbiAqIHw6LS0tLS0tLS0tLS0tfDotLS0tLS0tLS0tLS0tLS0tLS0tLS18Oi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfFxuICogfCBgJyonYCAgICAgICB8IGAnQSdgICwgYCdaJ2AgICAgICAgIHwgYCdBLkInYCAsIGAnWi5ZLlgnYCAgICAgICB8XG4gKiB8IGAnQS4qJ2AgICAgIHwgYCdBLkInYCAsIGAnQS5DJ2AgICAgfCBgJ0EnYCAsIGAnQS5CLkMnYCAgICAgICAgIHxcbiAqIHwgYCdBLiouKidgICAgfCBgJ0EuQi5DJ2AgLCBgJ0EuWC5ZJ2B8IGAnQSdgLCBgJ0EuQidgICwgYCdaLlkuWCdgfFxuICpcbiAqICMjIyBEb3VibGUgc3RhciAoYCoqYClcbiAqXG4gKiBBIGRvdWJsZSBzdGFyIChgJyoqJ2ApIGlzIGEgd2lsZGNhcmQgdGhhdCBtYXRjaGVzICp6ZXJvIG9yIG1vcmUgc2VnbWVudHMqXG4gKlxuICogfCBHbG9iICAgICAgICB8TWF0Y2hlcyBzdGF0ZXMgbmFtZWQgICAgICAgICAgICAgICAgICAgICAgICAgICB8RG9lcyBub3QgbWF0Y2ggc3RhdGUgbmFtZWQgICAgICAgICB8XG4gKiB8Oi0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXw6LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgYCcqKidgICAgICAgfCBgJ0EnYCAsIGAnQS5CJ2AsIGAnWi5ZLlgnYCAgICAgICAgICAgICAgICAgICAgfCAobWF0Y2hlcyBhbGwgc3RhdGVzKSAgICAgICAgICAgICAgfFxuICogfCBgJ0EuKionYCAgICB8IGAnQSdgICwgYCdBLkInYCAsIGAnQS5DLlgnYCAgICAgICAgICAgICAgICAgICB8IGAnWi5ZLlgnYCAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAnKiouWCdgICAgIHwgYCdYJ2AgLCBgJ0EuWCdgICwgYCdaLlkuWCdgICAgICAgICAgICAgICAgICAgIHwgYCdBJ2AgLCBgJ0EubG9naW4uWidgICAgICAgICAgICAgIHxcbiAqIHwgYCdBLioqLlgnYCAgfCBgJ0EuWCdgICwgYCdBLkIuWCdgICwgYCdBLkIuQy5YJ2AgICAgICAgICAgICAgfCBgJ0EnYCAsIGAnQS5CLkMnYCAgICAgICAgICAgICAgICAgfFxuICpcbiAqL1xudmFyIEdsb2IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR2xvYih0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMuZ2xvYiA9IHRleHQuc3BsaXQoJy4nKTtcbiAgICAgICAgdmFyIHJlZ2V4cFN0cmluZyA9IHRoaXMudGV4dC5zcGxpdCgnLicpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChzZWcpIHtcbiAgICAgICAgICAgIGlmIChzZWcgPT09ICcqKicpXG4gICAgICAgICAgICAgICAgcmV0dXJuICcoPzp8KD86XFxcXC5bXi5dKikqKSc7XG4gICAgICAgICAgICBpZiAoc2VnID09PSAnKicpXG4gICAgICAgICAgICAgICAgcmV0dXJuICdcXFxcLlteLl0qJztcbiAgICAgICAgICAgIHJldHVybiAnXFxcXC4nICsgc2VnO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICAgICAgdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKCdeJyArIHJlZ2V4cFN0cmluZyArICckJyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBoYXMgZ2xvYi1saWtlIGNoYXJhY3RlcnMgaW4gaXQgKi9cbiAgICBHbG9iLmlzID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgcmV0dXJuICEhL1shLCpdKy8uZXhlYyh0ZXh0KTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgZ2xvYiBmcm9tIHRoZSBzdHJpbmcsIG9yIG51bGwgaWYgdGhlIHN0cmluZyBpc24ndCBHbG9iLWxpa2UgKi9cbiAgICBHbG9iLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICByZXR1cm4gR2xvYi5pcyh0ZXh0KSA/IG5ldyBHbG9iKHRleHQpIDogbnVsbDtcbiAgICB9O1xuICAgIEdsb2IucHJvdG90eXBlLm1hdGNoZXMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdleHAudGVzdCgnLicgKyBuYW1lKTtcbiAgICB9O1xuICAgIHJldHVybiBHbG9iO1xufSgpKTtcblxuLyoqXG4gKiBJbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBhIFVJLVJvdXRlciBzdGF0ZS5cbiAqXG4gKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgY3JlYXRlZCB3aGVuIGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1N0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiBBIHJlZ2lzdGVyZWQgW1tTdGF0ZURlY2xhcmF0aW9uXV0gaXMgYXVnbWVudGVkIHdpdGggYSBnZXR0ZXIgKFtbU3RhdGVEZWNsYXJhdGlvbi4kJHN0YXRlXV0pIHdoaWNoIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAqXG4gKiBUaGlzIGNsYXNzIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIFtbU3RhdGVEZWNsYXJhdGlvbl1dLlxuICogRWFjaCBvZiBpdHMgb3duIHByb3BlcnRpZXMgKGkuZS4sIGBoYXNPd25Qcm9wZXJ0eWApIGFyZSBidWlsdCB1c2luZyBidWlsZGVycyBmcm9tIHRoZSBbW1N0YXRlQnVpbGRlcl1dLlxuICovXG52YXIgU3RhdGVPYmplY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBkZXByZWNhdGVkIHVzZSBTdGF0ZS5jcmVhdGUoKSAqL1xuICAgIGZ1bmN0aW9uIFN0YXRlT2JqZWN0KGNvbmZpZykge1xuICAgICAgICByZXR1cm4gU3RhdGVPYmplY3QuY3JlYXRlKGNvbmZpZyB8fCB7fSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHN0YXRlIG9iamVjdCB0byBwdXQgdGhlIHByaXZhdGUvaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbnRvLlxuICAgICAqIFRoZSBvYmplY3QncyBwcm90b3R5cGUgY2hhaW4gbG9va3MgbGlrZTpcbiAgICAgKiAoSW50ZXJuYWwgU3RhdGUgT2JqZWN0KSAtPiAoQ29weSBvZiBTdGF0ZS5wcm90b3R5cGUpIC0+IChTdGF0ZSBEZWNsYXJhdGlvbiBvYmplY3QpIC0+IChTdGF0ZSBEZWNsYXJhdGlvbidzIHByb3RvdHlwZS4uLilcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZURlY2wgdGhlIHVzZXItc3VwcGxpZWQgU3RhdGUgRGVjbGFyYXRpb25cbiAgICAgKiBAcmV0dXJucyB7U3RhdGVPYmplY3R9IGFuIGludGVybmFsIFN0YXRlIG9iamVjdFxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChzdGF0ZURlY2wpIHtcbiAgICAgICAgc3RhdGVEZWNsID0gU3RhdGVPYmplY3QuaXNTdGF0ZUNsYXNzKHN0YXRlRGVjbCkgPyBuZXcgc3RhdGVEZWNsKCkgOiBzdGF0ZURlY2w7XG4gICAgICAgIHZhciBzdGF0ZSA9IGluaGVyaXQoaW5oZXJpdChzdGF0ZURlY2wsIFN0YXRlT2JqZWN0LnByb3RvdHlwZSkpO1xuICAgICAgICBzdGF0ZURlY2wuJCRzdGF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0YXRlOyB9O1xuICAgICAgICBzdGF0ZS5zZWxmID0gc3RhdGVEZWNsO1xuICAgICAgICBzdGF0ZS5fX3N0YXRlT2JqZWN0Q2FjaGUgPSB7XG4gICAgICAgICAgICBuYW1lR2xvYjogR2xvYi5mcm9tU3RyaW5nKHN0YXRlLm5hbWUpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHBhcmFtZXRlciBpcyB0aGUgc2FtZSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIENvbXBhcmVzIHRoZSBpZGVudGl0eSBvZiB0aGUgc3RhdGUgYWdhaW5zdCB0aGUgcGFzc2VkIHZhbHVlLCB3aGljaCBpcyBlaXRoZXIgYW4gb2JqZWN0XG4gICAgICogcmVmZXJlbmNlIHRvIHRoZSBhY3R1YWwgYFN0YXRlYCBpbnN0YW5jZSwgdGhlIG9yaWdpbmFsIGRlZmluaXRpb24gb2JqZWN0IHBhc3NlZCB0b1xuICAgICAqIGAkc3RhdGVQcm92aWRlci5zdGF0ZSgpYCwgb3IgdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlZiBDYW4gYmUgb25lIG9mIChhKSBhIGBTdGF0ZWAgaW5zdGFuY2UsIChiKSBhbiBvYmplY3QgdGhhdCB3YXMgcGFzc2VkXG4gICAgICogICAgICAgIGludG8gYCRzdGF0ZVByb3ZpZGVyLnN0YXRlKClgLCAoYykgdGhlIGZ1bGx5LXF1YWxpZmllZCBuYW1lIG9mIGEgc3RhdGUgYXMgYSBzdHJpbmcuXG4gICAgICogQHJldHVybnMgUmV0dXJucyBgdHJ1ZWAgaWYgYHJlZmAgbWF0Y2hlcyB0aGUgY3VycmVudCBgU3RhdGVgIGluc3RhbmNlLlxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHJlZiB8fCB0aGlzLnNlbGYgPT09IHJlZiB8fCB0aGlzLmZxbigpID09PSByZWY7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCB0aGlzIGRvZXMgbm90IHByb3Blcmx5IGhhbmRsZSBkb3Qgbm90YXRpb25cbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgZG90LXNlcGFyYXRlZCBuYW1lIG9mIHRoZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBTdGF0ZU9iamVjdC5wcm90b3R5cGUuZnFuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyZW50IHx8ICEodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICAgIHZhciBuYW1lID0gdGhpcy5wYXJlbnQuZnFuKCk7XG4gICAgICAgIHJldHVybiBuYW1lID8gbmFtZSArICcuJyArIHRoaXMubmFtZSA6IHRoaXMubmFtZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJvb3Qgbm9kZSBvZiB0aGlzIHN0YXRlJ3MgdHJlZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByb290IG9mIHRoaXMgc3RhdGUncyB0cmVlLlxuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5yb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQucm9vdCgpIHx8IHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGF0ZSdzIGBQYXJhbWAgb2JqZWN0c1xuICAgICAqXG4gICAgICogR2V0cyB0aGUgbGlzdCBvZiBbW1BhcmFtXV0gb2JqZWN0cyBvd25lZCBieSB0aGUgc3RhdGUuXG4gICAgICogSWYgYG9wdHMuaW5oZXJpdGAgaXMgdHJ1ZSwgaXQgYWxzbyBpbmNsdWRlcyB0aGUgYW5jZXN0b3Igc3RhdGVzJyBbW1BhcmFtXV0gb2JqZWN0cy5cbiAgICAgKiBJZiBgb3B0cy5tYXRjaGluZ0tleXNgIGV4aXN0cywgcmV0dXJucyBvbmx5IGBQYXJhbWBzIHdob3NlIGBpZGAgaXMgYSBrZXkgb24gdGhlIGBtYXRjaGluZ0tleXNgIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdHMgb3B0aW9uc1xuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5wYXJhbWV0ZXJzID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgb3B0cyA9IGRlZmF1bHRzKG9wdHMsIHsgaW5oZXJpdDogdHJ1ZSwgbWF0Y2hpbmdLZXlzOiBudWxsIH0pO1xuICAgICAgICB2YXIgaW5oZXJpdGVkID0gb3B0cy5pbmhlcml0ICYmIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LnBhcmFtZXRlcnMoKSB8fCBbXTtcbiAgICAgICAgcmV0dXJuIGluaGVyaXRlZC5jb25jYXQodmFsdWVzKHRoaXMucGFyYW1zKSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhb3B0cy5tYXRjaGluZ0tleXMgfHwgb3B0cy5tYXRjaGluZ0tleXMuaGFzT3duUHJvcGVydHkocGFyYW0uaWQpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzaW5nbGUgW1tQYXJhbV1dIHRoYXQgaXMgb3duZWQgYnkgdGhlIHN0YXRlXG4gICAgICpcbiAgICAgKiBJZiBgb3B0cy5pbmhlcml0YCBpcyB0cnVlLCBpdCBhbHNvIHNlYXJjaGVzIHRoZSBhbmNlc3RvciBzdGF0ZXNgIFtbUGFyYW1dXXMuXG4gICAgICogQHBhcmFtIGlkIHRoZSBuYW1lIG9mIHRoZSBbW1BhcmFtXV0gdG8gcmV0dXJuXG4gICAgICogQHBhcmFtIG9wdHMgb3B0aW9uc1xuICAgICAqL1xuICAgIFN0YXRlT2JqZWN0LnByb3RvdHlwZS5wYXJhbWV0ZXIgPSBmdW5jdGlvbiAoaWQsIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09IHZvaWQgMCkgeyBvcHRzID0ge307IH1cbiAgICAgICAgcmV0dXJuICh0aGlzLnVybCAmJiB0aGlzLnVybC5wYXJhbWV0ZXIoaWQsIG9wdHMpIHx8XG4gICAgICAgICAgICBmaW5kKHZhbHVlcyh0aGlzLnBhcmFtcyksIHByb3BFcSgnaWQnLCBpZCkpIHx8XG4gICAgICAgICAgICBvcHRzLmluaGVyaXQgJiYgdGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQucGFyYW1ldGVyKGlkKSk7XG4gICAgfTtcbiAgICBTdGF0ZU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZxbigpO1xuICAgIH07XG4gICAgLyoqIFByZWRpY2F0ZSB3aGljaCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhbiBjbGFzcyB3aXRoIEBTdGF0ZSgpIGRlY29yYXRvciAqL1xuICAgIFN0YXRlT2JqZWN0LmlzU3RhdGVDbGFzcyA9IGZ1bmN0aW9uIChzdGF0ZURlY2wpIHtcbiAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24oc3RhdGVEZWNsKSAmJiBzdGF0ZURlY2xbJ19fdWlSb3V0ZXJTdGF0ZSddID09PSB0cnVlO1xuICAgIH07XG4gICAgLyoqIFByZWRpY2F0ZSB3aGljaCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBhbiBpbnRlcm5hbCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0ICovXG4gICAgU3RhdGVPYmplY3QuaXNTdGF0ZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzT2JqZWN0KG9ialsnX19zdGF0ZU9iamVjdENhY2hlJ10pO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRlT2JqZWN0O1xufSgpKTtcblxuLyoqIFByZWRpY2F0ZXNcbiAqXG4gKiBUaGVzZSBwcmVkaWNhdGVzIHJldHVybiB0cnVlL2ZhbHNlIGJhc2VkIG9uIHRoZSBpbnB1dC5cbiAqIEFsdGhvdWdoIHRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIHRoZXkgYXJlIHN1YmplY3QgdG8gY2hhbmdlIHdpdGhvdXQgbm90aWNlLlxuICpcbiAqIEBtb2R1bGUgY29tbW9uX3ByZWRpY2F0ZXNcbiAqL1xuLyoqICovXG52YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIHRpcyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gdHlwZW9mICh4KSA9PT0gdDsgfTsgfTtcbnZhciBpc1VuZGVmaW5lZCA9IHRpcygndW5kZWZpbmVkJyk7XG52YXIgaXNEZWZpbmVkID0gbm90KGlzVW5kZWZpbmVkKTtcbnZhciBpc051bGwgPSBmdW5jdGlvbiAobykgeyByZXR1cm4gbyA9PT0gbnVsbDsgfTtcbnZhciBpc051bGxPclVuZGVmaW5lZCA9IG9yKGlzTnVsbCwgaXNVbmRlZmluZWQpO1xudmFyIGlzRnVuY3Rpb24gPSB0aXMoJ2Z1bmN0aW9uJyk7XG52YXIgaXNOdW1iZXIgPSB0aXMoJ251bWJlcicpO1xudmFyIGlzU3RyaW5nID0gdGlzKCdzdHJpbmcnKTtcbnZhciBpc09iamVjdCA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICE9PSBudWxsICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0JzsgfTtcbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbnZhciBpc0RhdGUgPSAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHRvU3RyLmNhbGwoeCkgPT09ICdbb2JqZWN0IERhdGVdJzsgfSk7XG52YXIgaXNSZWdFeHAgPSAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHRvU3RyLmNhbGwoeCkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nOyB9KTtcbnZhciBpc1N0YXRlID0gU3RhdGVPYmplY3QuaXNTdGF0ZTtcbi8qKlxuICogUHJlZGljYXRlIHdoaWNoIGNoZWNrcyBpZiBhIHZhbHVlIGlzIGluamVjdGFibGVcbiAqXG4gKiBBIHZhbHVlIGlzIFwiaW5qZWN0YWJsZVwiIGlmIGl0IGlzIGEgZnVuY3Rpb24sIG9yIGlmIGl0IGlzIGFuIG5nMSBhcnJheS1ub3RhdGlvbi1zdHlsZSBhcnJheVxuICogd2hlcmUgYWxsIHRoZSBlbGVtZW50cyBpbiB0aGUgYXJyYXkgYXJlIFN0cmluZ3MsIGV4Y2VwdCB0aGUgbGFzdCBvbmUsIHdoaWNoIGlzIGEgRnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gaXNJbmplY3RhYmxlKHZhbCQkMSkge1xuICAgIGlmIChpc0FycmF5KHZhbCQkMSkgJiYgdmFsJCQxLmxlbmd0aCkge1xuICAgICAgICB2YXIgaGVhZCA9IHZhbCQkMS5zbGljZSgwLCAtMSksIHRhaWwgPSB2YWwkJDEuc2xpY2UoLTEpO1xuICAgICAgICByZXR1cm4gIShoZWFkLmZpbHRlcihub3QoaXNTdHJpbmcpKS5sZW5ndGggfHwgdGFpbC5maWx0ZXIobm90KGlzRnVuY3Rpb24pKS5sZW5ndGgpO1xuICAgIH1cbiAgICByZXR1cm4gaXNGdW5jdGlvbih2YWwkJDEpO1xufVxuLyoqXG4gKiBQcmVkaWNhdGUgd2hpY2ggY2hlY2tzIGlmIGEgdmFsdWUgbG9va3MgbGlrZSBhIFByb21pc2VcbiAqXG4gKiBJdCBpcyBwcm9iYWJseSBhIFByb21pc2UgaWYgaXQncyBhbiBvYmplY3QsIGFuZCBpdCBoYXMgYSBgdGhlbmAgcHJvcGVydHkgd2hpY2ggaXMgYSBGdW5jdGlvblxuICovXG52YXIgaXNQcm9taXNlID0gYW5kKGlzT2JqZWN0LCBwaXBlKHByb3AoJ3RoZW4nKSwgaXNGdW5jdGlvbikpO1xuXG52YXIgbm90SW1wbGVtZW50ZWQgPSBmdW5jdGlvbiAoZm5uYW1lKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGZubmFtZSArIFwiKCk6IE5vIGNvcmVzZXJ2aWNlcyBpbXBsZW1lbnRhdGlvbiBmb3IgVUktUm91dGVyIGlzIGxvYWRlZC5cIik7XG59OyB9O1xudmFyIHNlcnZpY2VzID0ge1xuICAgICRxOiB1bmRlZmluZWQsXG4gICAgJGluamVjdG9yOiB1bmRlZmluZWQsXG59O1xuXG4vKipcbiAqIFJhbmRvbSB1dGlsaXR5IGZ1bmN0aW9ucyB1c2VkIGluIHRoZSBVSS1Sb3V0ZXIgY29kZVxuICpcbiAqIFRoZXNlIGZ1bmN0aW9ucyBhcmUgZXhwb3J0ZWQsIGJ1dCBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQHByZWZlcnJlZFxuICogQG1vZHVsZSBjb21tb25cbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG52YXIgcm9vdCA9ICh0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmICYmIHNlbGYpIHx8XG4gICAgKHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnICYmIGdsb2JhbC5nbG9iYWwgPT09IGdsb2JhbCAmJiBnbG9iYWwpIHx8IHVuZGVmaW5lZDtcbnZhciBhbmd1bGFyJDEgPSByb290LmFuZ3VsYXIgfHwge307XG52YXIgZnJvbUpzb24gPSBhbmd1bGFyJDEuZnJvbUpzb24gfHwgSlNPTi5wYXJzZS5iaW5kKEpTT04pO1xudmFyIHRvSnNvbiA9IGFuZ3VsYXIkMS50b0pzb24gfHwgSlNPTi5zdHJpbmdpZnkuYmluZChKU09OKTtcbnZhciBmb3JFYWNoID0gYW5ndWxhciQxLmZvckVhY2ggfHwgX2ZvckVhY2g7XG52YXIgZXh0ZW5kID0gT2JqZWN0LmFzc2lnbiB8fCBfZXh0ZW5kO1xudmFyIGVxdWFscyA9IGFuZ3VsYXIkMS5lcXVhbHMgfHwgX2VxdWFscztcbmZ1bmN0aW9uIGlkZW50aXR5KHgpIHsgcmV0dXJuIHg7IH1cbmZ1bmN0aW9uIG5vb3AoKSB7IH1cbi8qKlxuICogQnVpbGRzIHByb3h5IGZ1bmN0aW9ucyBvbiB0aGUgYHRvYCBvYmplY3Qgd2hpY2ggcGFzcyB0aHJvdWdoIHRvIHRoZSBgZnJvbWAgb2JqZWN0LlxuICpcbiAqIEZvciBlYWNoIGtleSBpbiBgZm5OYW1lc2AsIGNyZWF0ZXMgYSBwcm94eSBmdW5jdGlvbiBvbiB0aGUgYHRvYCBvYmplY3QuXG4gKiBUaGUgcHJveHkgZnVuY3Rpb24gY2FsbHMgdGhlIHJlYWwgZnVuY3Rpb24gb24gdGhlIGBmcm9tYCBvYmplY3QuXG4gKlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIFRoaXMgZXhhbXBsZSBjcmVhdGVzIGFuIG5ldyBjbGFzcyBpbnN0YW5jZSB3aG9zZSBmdW5jdGlvbnMgYXJlIHByZWJvdW5kIHRvIHRoZSBuZXcnZCBvYmplY3QuXG4gKiBgYGBqc1xuICogY2xhc3MgRm9vIHtcbiAqICAgY29uc3RydWN0b3IoZGF0YSkge1xuICogICAgIC8vIEJpbmRzIGFsbCBmdW5jdGlvbnMgZnJvbSBGb28ucHJvdG90eXBlIHRvICd0aGlzJyxcbiAqICAgICAvLyB0aGVuIGNvcGllcyB0aGVtIHRvICd0aGlzJ1xuICogICAgIGJpbmRGdW5jdGlvbnMoRm9vLnByb3RvdHlwZSwgdGhpcywgdGhpcyk7XG4gKiAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAqICAgfVxuICpcbiAqICAgbG9nKCkge1xuICogICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YSk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBsZXQgbXlGb28gPSBuZXcgRm9vKFsxLDIsM10pO1xuICogdmFyIGxvZ2l0ID0gbXlGb28ubG9nO1xuICogbG9naXQoKTsgLy8gbG9ncyBbMSwgMiwgM10gZnJvbSB0aGUgbXlGb28gJ3RoaXMnIGluc3RhbmNlXG4gKiBgYGBcbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBUaGlzIGV4YW1wbGUgY3JlYXRlcyBhIGJvdW5kIHZlcnNpb24gb2YgYSBzZXJ2aWNlIGZ1bmN0aW9uLCBhbmQgY29waWVzIGl0IHRvIGFub3RoZXIgb2JqZWN0XG4gKiBgYGBcbiAqXG4gKiB2YXIgU29tZVNlcnZpY2UgPSB7XG4gKiAgIHRoaXMuZGF0YSA9IFszLCA0LCA1XTtcbiAqICAgdGhpcy5sb2cgPSBmdW5jdGlvbigpIHtcbiAqICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xuICogICB9XG4gKiB9XG4gKlxuICogLy8gQ29uc3RydWN0b3IgZm5cbiAqIGZ1bmN0aW9uIE90aGVyVGhpbmcoKSB7XG4gKiAgIC8vIEJpbmRzIGFsbCBmdW5jdGlvbnMgZnJvbSBTb21lU2VydmljZSB0byBTb21lU2VydmljZSxcbiAqICAgLy8gdGhlbiBjb3BpZXMgdGhlbSB0byAndGhpcydcbiAqICAgYmluZEZ1bmN0aW9ucyhTb21lU2VydmljZSwgdGhpcywgU29tZVNlcnZpY2UpO1xuICogfVxuICpcbiAqIGxldCBteU90aGVyVGhpbmcgPSBuZXcgT3RoZXJUaGluZygpO1xuICogbXlPdGhlclRoaW5nLmxvZygpOyAvLyBsb2dzIFszLCA0LCA1XSBmcm9tIFNvbWVTZXJ2aWNlJ3MgJ3RoaXMnXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc291cmNlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBzb3VyY2Ugb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBvcmlnaW5hbCBmdW5jdGlvbnMgdG8gYmUgYm91bmRcbiAqIEBwYXJhbSB0YXJnZXQgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHRhcmdldCBvYmplY3Qgd2hpY2ggd2lsbCByZWNlaXZlIHRoZSBib3VuZCBmdW5jdGlvbnNcbiAqIEBwYXJhbSBiaW5kIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBvYmplY3Qgd2hpY2ggdGhlIGZ1bmN0aW9ucyB3aWxsIGJlIGJvdW5kIHRvXG4gKiBAcGFyYW0gZm5OYW1lcyBUaGUgZnVuY3Rpb24gbmFtZXMgd2hpY2ggd2lsbCBiZSBib3VuZCAoRGVmYXVsdHMgdG8gYWxsIHRoZSBmdW5jdGlvbnMgZm91bmQgb24gdGhlICdmcm9tJyBvYmplY3QpXG4gKiBAcGFyYW0gbGF0ZWJpbmQgSWYgdHJ1ZSwgdGhlIGJpbmRpbmcgb2YgdGhlIGZ1bmN0aW9uIGlzIGRlbGF5ZWQgdW50aWwgdGhlIGZpcnN0IHRpbWUgaXQncyBpbnZva2VkXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVByb3h5RnVuY3Rpb25zKHNvdXJjZSwgdGFyZ2V0LCBiaW5kLCBmbk5hbWVzLCBsYXRlYmluZCkge1xuICAgIGlmIChsYXRlYmluZCA9PT0gdm9pZCAwKSB7IGxhdGViaW5kID0gZmFsc2U7IH1cbiAgICB2YXIgYmluZEZ1bmN0aW9uID0gZnVuY3Rpb24gKGZuTmFtZSkge1xuICAgICAgICByZXR1cm4gc291cmNlKClbZm5OYW1lXS5iaW5kKGJpbmQoKSk7XG4gICAgfTtcbiAgICB2YXIgbWFrZUxhdGVSZWJpbmRGbiA9IGZ1bmN0aW9uIChmbk5hbWUpIHsgcmV0dXJuIGZ1bmN0aW9uIGxhdGVSZWJpbmRGdW5jdGlvbigpIHtcbiAgICAgICAgdGFyZ2V0W2ZuTmFtZV0gPSBiaW5kRnVuY3Rpb24oZm5OYW1lKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldFtmbk5hbWVdLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfTsgfTtcbiAgICBmbk5hbWVzID0gZm5OYW1lcyB8fCBPYmplY3Qua2V5cyhzb3VyY2UoKSk7XG4gICAgcmV0dXJuIGZuTmFtZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5hbWUpIHtcbiAgICAgICAgYWNjW25hbWVdID0gbGF0ZWJpbmQgPyBtYWtlTGF0ZVJlYmluZEZuKG5hbWUpIDogYmluZEZ1bmN0aW9uKG5hbWUpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHRhcmdldCk7XG59XG4vKipcbiAqIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgaGVscGVyLlxuICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2hpY2ggaGFzIGBwYXJlbnRgIG9iamVjdCBhcyBpdHMgcHJvdG90eXBlLCBhbmQgdGhlbiBjb3BpZXMgdGhlIHByb3BlcnRpZXMgZnJvbSBgZXh0cmFgIG9udG8gaXRcbiAqL1xudmFyIGluaGVyaXQgPSBmdW5jdGlvbiAocGFyZW50LCBleHRyYSkge1xuICAgIHJldHVybiBleHRlbmQoT2JqZWN0LmNyZWF0ZShwYXJlbnQpLCBleHRyYSk7XG59O1xuLyoqIEdpdmVuIGFuIGFycmF5LCByZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBpcyBmb3VuZCBpbiB0aGUgYXJyYXksICh1c2luZyBpbmRleE9mKSAqL1xudmFyIGluQXJyYXkgPSBjdXJyeShfaW5BcnJheSk7XG5mdW5jdGlvbiBfaW5BcnJheShhcnJheSwgb2JqKSB7XG4gICAgcmV0dXJuIGFycmF5LmluZGV4T2Yob2JqKSAhPT0gLTE7XG59XG4vKipcbiAqIEdpdmVuIGFuIGFycmF5LCBhbmQgYW4gaXRlbSwgaWYgdGhlIGl0ZW0gaXMgZm91bmQgaW4gdGhlIGFycmF5LCBpdCByZW1vdmVzIGl0IChpbi1wbGFjZSkuXG4gKiBUaGUgc2FtZSBhcnJheSBpcyByZXR1cm5lZFxuICovXG52YXIgcmVtb3ZlRnJvbSA9IGN1cnJ5KF9yZW1vdmVGcm9tKTtcbmZ1bmN0aW9uIF9yZW1vdmVGcm9tKGFycmF5LCBvYmopIHtcbiAgICB2YXIgaWR4ID0gYXJyYXkuaW5kZXhPZihvYmopO1xuICAgIGlmIChpZHggPj0gMClcbiAgICAgICAgYXJyYXkuc3BsaWNlKGlkeCwgMSk7XG4gICAgcmV0dXJuIGFycmF5O1xufVxuLyoqIHB1c2hlcyBhIHZhbHVlcyB0byBhbiBhcnJheSBhbmQgcmV0dXJucyB0aGUgdmFsdWUgKi9cbnZhciBwdXNoVG8gPSBjdXJyeShfcHVzaFRvKTtcbmZ1bmN0aW9uIF9wdXNoVG8oYXJyLCB2YWwkJDEpIHtcbiAgICByZXR1cm4gKGFyci5wdXNoKHZhbCQkMSksIHZhbCQkMSk7XG59XG4vKiogR2l2ZW4gYW4gYXJyYXkgb2YgKGRlcmVnaXN0cmF0aW9uKSBmdW5jdGlvbnMsIGNhbGxzIGFsbCBmdW5jdGlvbnMgYW5kIHJlbW92ZXMgZWFjaCBvbmUgZnJvbSB0aGUgc291cmNlIGFycmF5ICovXG52YXIgZGVyZWdBbGwgPSBmdW5jdGlvbiAoZnVuY3Rpb25zKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9ucy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBmbigpO1xuICAgICAgICByZW1vdmVGcm9tKGZ1bmN0aW9ucywgZm4pO1xuICAgIH0pO1xufTtcbi8qKlxuICogQXBwbGllcyBhIHNldCBvZiBkZWZhdWx0cyB0byBhbiBvcHRpb25zIG9iamVjdC4gIFRoZSBvcHRpb25zIG9iamVjdCBpcyBmaWx0ZXJlZFxuICogdG8gb25seSB0aG9zZSBwcm9wZXJ0aWVzIG9mIHRoZSBvYmplY3RzIGluIHRoZSBkZWZhdWx0c0xpc3QuXG4gKiBFYXJsaWVyIG9iamVjdHMgaW4gdGhlIGRlZmF1bHRzTGlzdCB0YWtlIHByZWNlZGVuY2Ugd2hlbiBhcHBseWluZyBkZWZhdWx0cy5cbiAqL1xuZnVuY3Rpb24gZGVmYXVsdHMob3B0cykge1xuICAgIHZhciBkZWZhdWx0c0xpc3QgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBkZWZhdWx0c0xpc3RbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHZhciBfZGVmYXVsdHNMaXN0ID0gZGVmYXVsdHNMaXN0LmNvbmNhdCh7fSkucmV2ZXJzZSgpO1xuICAgIHZhciBkZWZhdWx0VmFscyA9IGV4dGVuZC5hcHBseShudWxsLCBfZGVmYXVsdHNMaXN0KTtcbiAgICByZXR1cm4gZXh0ZW5kKHt9LCBkZWZhdWx0VmFscywgcGljayhvcHRzIHx8IHt9LCBPYmplY3Qua2V5cyhkZWZhdWx0VmFscykpKTtcbn1cbi8qKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCBtZXJnZXMgZWFjaCBlbGVtZW50IG9mIHRoZSBsaXN0IGludG8gYSBzaW5nbGUgb2JqZWN0LCB1c2luZyBleHRlbmQgKi9cbnZhciBtZXJnZVIgPSBmdW5jdGlvbiAobWVtbywgaXRlbSkgeyByZXR1cm4gZXh0ZW5kKG1lbW8sIGl0ZW0pOyB9O1xuLyoqXG4gKiBGaW5kcyB0aGUgY29tbW9uIGFuY2VzdG9yIHBhdGggYmV0d2VlbiB0d28gc3RhdGVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaXJzdCBUaGUgZmlyc3Qgc3RhdGUuXG4gKiBAcGFyYW0ge09iamVjdH0gc2Vjb25kIFRoZSBzZWNvbmQgc3RhdGUuXG4gKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZSBuYW1lcyBpbiBkZXNjZW5kaW5nIG9yZGVyLCBub3QgaW5jbHVkaW5nIHRoZSByb290LlxuICovXG5mdW5jdGlvbiBhbmNlc3RvcnMoZmlyc3QsIHNlY29uZCkge1xuICAgIHZhciBwYXRoID0gW107XG4gICAgZm9yICh2YXIgbiBpbiBmaXJzdC5wYXRoKSB7XG4gICAgICAgIGlmIChmaXJzdC5wYXRoW25dICE9PSBzZWNvbmQucGF0aFtuXSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBwYXRoLnB1c2goZmlyc3QucGF0aFtuXSk7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xufVxuLyoqXG4gKiBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYFxuICogdmFyIGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xuICogdmFyIGFiID0gcGljayhmb28sIFsnYScsICdiJ10pOyAvLyB7IGE6IDEsIGI6IDIgfVxuICogYGBgXG4gKiBAcGFyYW0gb2JqIHRoZSBzb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0gcHJvcE5hbWVzIGFuIEFycmF5IG9mIHN0cmluZ3MsIHdoaWNoIGFyZSB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydHkgbmFtZXNcbiAqL1xuZnVuY3Rpb24gcGljayhvYmosIHByb3BOYW1lcykge1xuICAgIHZhciBvYmpDb3B5ID0ge307XG4gICAgZm9yICh2YXIgX3Byb3AgaW4gb2JqKSB7XG4gICAgICAgIGlmIChwcm9wTmFtZXMuaW5kZXhPZihfcHJvcCkgIT09IC0xKSB7XG4gICAgICAgICAgICBvYmpDb3B5W19wcm9wXSA9IG9ialtfcHJvcF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iakNvcHk7XG59XG4vKipcbiAqIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbWl0dGluZyB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogdmFyIGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xuICogdmFyIGFiID0gb21pdChmb28sIFsnYScsICdiJ10pOyAvLyB7IGM6IDMgfVxuICogYGBgXG4gKiBAcGFyYW0gb2JqIHRoZSBzb3VyY2Ugb2JqZWN0XG4gKiBAcGFyYW0gcHJvcE5hbWVzIGFuIEFycmF5IG9mIHN0cmluZ3MsIHdoaWNoIGFyZSB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydHkgbmFtZXNcbiAqL1xuZnVuY3Rpb24gb21pdChvYmosIHByb3BOYW1lcykge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopXG4gICAgICAgIC5maWx0ZXIobm90KGluQXJyYXkocHJvcE5hbWVzKSkpXG4gICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiAoYWNjW2tleV0gPSBvYmpba2V5XSwgYWNjKTsgfSwge30pO1xufVxuLyoqXG4gKiBNYXBzIGFuIGFycmF5LCBvciBvYmplY3QgdG8gYSBwcm9wZXJ0eSAoYnkgbmFtZSlcbiAqL1xuZnVuY3Rpb24gcGx1Y2soY29sbGVjdGlvbiwgcHJvcE5hbWUpIHtcbiAgICByZXR1cm4gbWFwKGNvbGxlY3Rpb24sIHByb3AocHJvcE5hbWUpKTtcbn1cbi8qKiBGaWx0ZXJzIGFuIEFycmF5IG9yIGFuIE9iamVjdCdzIHByb3BlcnRpZXMgYmFzZWQgb24gYSBwcmVkaWNhdGUgKi9cbmZ1bmN0aW9uIGZpbHRlcihjb2xsZWN0aW9uLCBjYWxsYmFjaykge1xuICAgIHZhciBhcnIgPSBpc0FycmF5KGNvbGxlY3Rpb24pLCByZXN1bHQgPSBhcnIgPyBbXSA6IHt9O1xuICAgIHZhciBhY2NlcHQgPSBhcnIgPyBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcmVzdWx0LnB1c2goeCk7IH0gOiBmdW5jdGlvbiAoeCwga2V5KSB7IHJldHVybiByZXN1bHRba2V5XSA9IHg7IH07XG4gICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAoaXRlbSwgaSkge1xuICAgICAgICBpZiAoY2FsbGJhY2soaXRlbSwgaSkpXG4gICAgICAgICAgICBhY2NlcHQoaXRlbSwgaSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKiBGaW5kcyBhbiBvYmplY3QgZnJvbSBhbiBhcnJheSwgb3IgYSBwcm9wZXJ0eSBvZiBhbiBvYmplY3QsIHRoYXQgbWF0Y2hlcyBhIHByZWRpY2F0ZSAqL1xuZnVuY3Rpb24gZmluZChjb2xsZWN0aW9uLCBjYWxsYmFjaykge1xuICAgIHZhciByZXN1bHQ7XG4gICAgZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAoaXRlbSwgaSkge1xuICAgICAgICBpZiAocmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoY2FsbGJhY2soaXRlbSwgaSkpXG4gICAgICAgICAgICByZXN1bHQgPSBpdGVtO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKiogR2l2ZW4gYW4gb2JqZWN0LCByZXR1cm5zIGEgbmV3IG9iamVjdCwgd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyB0cmFuc2Zvcm1lZCBieSB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gKi9cbnZhciBtYXBPYmogPSBtYXA7XG4vKiogTWFwcyBhbiBhcnJheSBvciBvYmplY3QgcHJvcGVydGllcyB1c2luZyBhIGNhbGxiYWNrIGZ1bmN0aW9uICovXG5mdW5jdGlvbiBtYXAoY29sbGVjdGlvbiwgY2FsbGJhY2ssIHRhcmdldCkge1xuICAgIHRhcmdldCA9IHRhcmdldCB8fCAoaXNBcnJheShjb2xsZWN0aW9uKSA/IFtdIDoge30pO1xuICAgIGZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKGl0ZW0sIGkpIHsgcmV0dXJuIHRhcmdldFtpXSA9IGNhbGxiYWNrKGl0ZW0sIGkpOyB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLyoqXG4gKiBHaXZlbiBhbiBvYmplY3QsIHJldHVybiBpdHMgZW51bWVyYWJsZSBwcm9wZXJ0eSB2YWx1ZXNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGZvbyA9IHsgYTogMSwgYjogMiwgYzogMyB9XG4gKiBsZXQgdmFscyA9IHZhbHVlcyhmb28pOyAvLyBbIDEsIDIsIDMgXVxuICogYGBgXG4gKi9cbnZhciB2YWx1ZXMgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIG9ialtrZXldOyB9KTtcbn07XG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdHJ1ZSBpZiBhbGwgb2YgdGhlIHZhbHVlcyBhcmUgdHJ1dGh5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgdmFscyA9IFsgMSwgdHJ1ZSwge30sIFwiaGVsbG8gd29ybGRcIl07XG4gKiB2YWxzLnJlZHVjZShhbGxUcnVlUiwgdHJ1ZSk7IC8vIHRydWVcbiAqXG4gKiB2YWxzLnB1c2goMCk7XG4gKiB2YWxzLnJlZHVjZShhbGxUcnVlUiwgdHJ1ZSk7IC8vIGZhbHNlXG4gKiBgYGBcbiAqL1xudmFyIGFsbFRydWVSID0gZnVuY3Rpb24gKG1lbW8sIGVsZW0pIHsgcmV0dXJuIG1lbW8gJiYgZWxlbTsgfTtcbi8qKlxuICogUmVkdWNlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIGFueSBvZiB0aGUgdmFsdWVzIGFyZSB0cnV0aHkuXG4gKlxuICogICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCB2YWxzID0gWyAwLCBudWxsLCB1bmRlZmluZWQgXTtcbiAqIHZhbHMucmVkdWNlKGFueVRydWVSLCB0cnVlKTsgLy8gZmFsc2VcbiAqXG4gKiB2YWxzLnB1c2goXCJoZWxsbyB3b3JsZFwiKTtcbiAqIHZhbHMucmVkdWNlKGFueVRydWVSLCB0cnVlKTsgLy8gdHJ1ZVxuICogYGBgXG4gKi9cbnZhciBhbnlUcnVlUiA9IGZ1bmN0aW9uIChtZW1vLCBlbGVtKSB7IHJldHVybiBtZW1vIHx8IGVsZW07IH07XG4vKipcbiAqIFJlZHVjZSBmdW5jdGlvbiB3aGljaCB1bi1uZXN0cyBhIHNpbmdsZSBsZXZlbCBvZiBhcnJheXNcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogaW5wdXQucmVkdWNlKHVubmVzdFIsIFtdKSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBbIFwiZG91YmxlLCBcIm5lc3RlZFwiIF0gXVxuICogYGBgXG4gKi9cbnZhciB1bm5lc3RSID0gZnVuY3Rpb24gKG1lbW8sIGVsZW0pIHsgcmV0dXJuIG1lbW8uY29uY2F0KGVsZW0pOyB9O1xuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gd2hpY2ggcmVjdXJzaXZlbHkgdW4tbmVzdHMgYWxsIGFycmF5c1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBsZXQgaW5wdXQgPSBbIFsgXCJhXCIsIFwiYlwiIF0sIFsgXCJjXCIsIFwiZFwiIF0sIFsgWyBcImRvdWJsZVwiLCBcIm5lc3RlZFwiIF0gXSBdO1xuICogaW5wdXQucmVkdWNlKHVubmVzdFIsIFtdKSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBcImRvdWJsZSwgXCJuZXN0ZWRcIiBdXG4gKiBgYGBcbiAqL1xudmFyIGZsYXR0ZW5SID0gZnVuY3Rpb24gKG1lbW8sIGVsZW0pIHtcbiAgICByZXR1cm4gaXNBcnJheShlbGVtKSA/IG1lbW8uY29uY2F0KGVsZW0ucmVkdWNlKGZsYXR0ZW5SLCBbXSkpIDogcHVzaFIobWVtbywgZWxlbSk7XG59O1xuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gdGhhdCBwdXNoZXMgYW4gb2JqZWN0IHRvIGFuIGFycmF5LCB0aGVuIHJldHVybnMgdGhlIGFycmF5LlxuICogTW9zdGx5IGp1c3QgZm9yIFtbZmxhdHRlblJdXSBhbmQgW1t1bmlxUl1dXG4gKi9cbmZ1bmN0aW9uIHB1c2hSKGFyciwgb2JqKSB7XG4gICAgYXJyLnB1c2gob2JqKTtcbiAgICByZXR1cm4gYXJyO1xufVxuLyoqIFJlZHVjZSBmdW5jdGlvbiB0aGF0IGZpbHRlcnMgb3V0IGR1cGxpY2F0ZXMgKi9cbnZhciB1bmlxUiA9IGZ1bmN0aW9uIChhY2MsIHRva2VuKSB7XG4gICAgcmV0dXJuIGluQXJyYXkoYWNjLCB0b2tlbikgPyBhY2MgOiBwdXNoUihhY2MsIHRva2VuKTtcbn07XG4vKipcbiAqIFJldHVybiBhIG5ldyBhcnJheSB3aXRoIGEgc2luZ2xlIGxldmVsIG9mIGFycmF5cyB1bm5lc3RlZC5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGlucHV0ID0gWyBbIFwiYVwiLCBcImJcIiBdLCBbIFwiY1wiLCBcImRcIiBdLCBbIFsgXCJkb3VibGVcIiwgXCJuZXN0ZWRcIiBdIF0gXTtcbiAqIHVubmVzdChpbnB1dCkgLy8gWyBcImFcIiwgXCJiXCIsIFwiY1wiLCBcImRcIiwgWyBcImRvdWJsZSwgXCJuZXN0ZWRcIiBdIF1cbiAqIGBgYFxuICovXG52YXIgdW5uZXN0ID0gZnVuY3Rpb24gKGFycikgeyByZXR1cm4gYXJyLnJlZHVjZSh1bm5lc3RSLCBbXSk7IH07XG4vKipcbiAqIFJldHVybiBhIGNvbXBsZXRlbHkgZmxhdHRlbmVkIHZlcnNpb24gb2YgYW4gYXJyYXkuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYFxuICpcbiAqIGxldCBpbnB1dCA9IFsgWyBcImFcIiwgXCJiXCIgXSwgWyBcImNcIiwgXCJkXCIgXSwgWyBbIFwiZG91YmxlXCIsIFwibmVzdGVkXCIgXSBdIF07XG4gKiBmbGF0dGVuKGlucHV0KSAvLyBbIFwiYVwiLCBcImJcIiwgXCJjXCIsIFwiZFwiLCBcImRvdWJsZSwgXCJuZXN0ZWRcIiBdXG4gKiBgYGBcbiAqL1xudmFyIGZsYXR0ZW4gPSBmdW5jdGlvbiAoYXJyKSB7IHJldHVybiBhcnIucmVkdWNlKGZsYXR0ZW5SLCBbXSk7IH07XG4vKipcbiAqIEdpdmVuIGEgLmZpbHRlciBQcmVkaWNhdGUsIGJ1aWxkcyBhIC5maWx0ZXIgUHJlZGljYXRlIHdoaWNoIHRocm93cyBhbiBlcnJvciBpZiBhbnkgZWxlbWVudHMgZG8gbm90IHBhc3MuXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGlzTnVtYmVyID0gKG9iaikgPT4gdHlwZW9mKG9iaikgPT09ICdudW1iZXInO1xuICogbGV0IGFsbE51bWJlcnMgPSBbIDEsIDIsIDMsIDQsIDUgXTtcbiAqIGFsbE51bWJlcnMuZmlsdGVyKGFzc2VydFByZWRpY2F0ZShpc051bWJlcikpOyAvL09LXG4gKlxuICogbGV0IG9uZVN0cmluZyA9IFsgMSwgMiwgMywgNCwgXCI1XCIgXTtcbiAqIG9uZVN0cmluZy5maWx0ZXIoYXNzZXJ0UHJlZGljYXRlKGlzTnVtYmVyLCBcIk5vdCBhbGwgbnVtYmVyc1wiKSk7IC8vIHRocm93cyBFcnJvcihcIlwiTm90IGFsbCBudW1iZXJzXCJcIik7XG4gKiBgYGBcbiAqL1xudmFyIGFzc2VydFByZWRpY2F0ZSA9IGFzc2VydEZuO1xuLyoqXG4gKiBHaXZlbiBhIC5tYXAgZnVuY3Rpb24sIGJ1aWxkcyBhIC5tYXAgZnVuY3Rpb24gd2hpY2ggdGhyb3dzIGFuIGVycm9yIGlmIGFueSBtYXBwZWQgZWxlbWVudHMgZG8gbm90IHBhc3MgYSB0cnV0aHluZXNzIHRlc3QuXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogdmFyIGRhdGEgPSB7IGZvbzogMSwgYmFyOiAyIH07XG4gKlxuICogbGV0IGtleXMgPSBbICdmb28nLCAnYmFyJyBdXG4gKiBsZXQgdmFsdWVzID0ga2V5cy5tYXAoYXNzZXJ0TWFwKGtleSA9PiBkYXRhW2tleV0sIFwiS2V5IG5vdCBmb3VuZFwiKSk7XG4gKiAvLyB2YWx1ZXMgaXMgWzEsIDJdXG4gKlxuICogbGV0IGtleXMgPSBbICdmb28nLCAnYmFyJywgJ2JheicgXVxuICogbGV0IHZhbHVlcyA9IGtleXMubWFwKGFzc2VydE1hcChrZXkgPT4gZGF0YVtrZXldLCBcIktleSBub3QgZm91bmRcIikpO1xuICogLy8gdGhyb3dzIEVycm9yKFwiS2V5IG5vdCBmb3VuZFwiKVxuICogYGBgXG4gKi9cbnZhciBhc3NlcnRNYXAgPSBhc3NlcnRGbjtcbmZ1bmN0aW9uIGFzc2VydEZuKHByZWRpY2F0ZU9yTWFwLCBlcnJNc2cpIHtcbiAgICBpZiAoZXJyTXNnID09PSB2b2lkIDApIHsgZXJyTXNnID0gJ2Fzc2VydCBmYWlsdXJlJzsgfVxuICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBwcmVkaWNhdGVPck1hcChvYmopO1xuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGlzRnVuY3Rpb24oZXJyTXNnKSA/IGVyck1zZyhvYmopIDogZXJyTXNnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIExpa2UgXy5wYWlyczogR2l2ZW4gYW4gb2JqZWN0LCByZXR1cm5zIGFuIGFycmF5IG9mIGtleS92YWx1ZSBwYWlyc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiBwYWlycyh7IGZvbzogXCJGT09cIiwgYmFyOiBcIkJBUiB9KSAvLyBbIFsgXCJmb29cIiwgXCJGT09cIiBdLCBbIFwiYmFyXCI6IFwiQkFSXCIgXSBdXG4gKiBgYGBcbiAqL1xudmFyIHBhaXJzID0gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBba2V5LCBvYmpba2V5XV07IH0pO1xufTtcbi8qKlxuICogR2l2ZW4gdHdvIG9yIG1vcmUgcGFyYWxsZWwgYXJyYXlzLCByZXR1cm5zIGFuIGFycmF5IG9mIHR1cGxlcyB3aGVyZVxuICogZWFjaCB0dXBsZSBpcyBjb21wb3NlZCBvZiBbIGFbaV0sIGJbaV0sIC4uLiB6W2ldIF1cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgXG4gKlxuICogbGV0IGZvbyA9IFsgMCwgMiwgNCwgNiBdO1xuICogbGV0IGJhciA9IFsgMSwgMywgNSwgNyBdO1xuICogbGV0IGJheiA9IFsgMTAsIDMwLCA1MCwgNzAgXTtcbiAqIGFycmF5VHVwbGVzKGZvbywgYmFyKTsgICAgICAgLy8gWyBbMCwgMV0sIFsyLCAzXSwgWzQsIDVdLCBbNiwgN10gXVxuICogYXJyYXlUdXBsZXMoZm9vLCBiYXIsIGJheik7ICAvLyBbIFswLCAxLCAxMF0sIFsyLCAzLCAzMF0sIFs0LCA1LCA1MF0sIFs2LCA3LCA3MF0gXVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIGFycmF5VHVwbGVzKCkge1xuICAgIHZhciBhcmdzID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB2YXIgbWF4QXJyYXlMZW4gPSBhcmdzLnJlZHVjZShmdW5jdGlvbiAobWluLCBhcnIpIHsgcmV0dXJuIE1hdGgubWluKGFyci5sZW5ndGgsIG1pbik7IH0sIDkwMDcxOTkyNTQ3NDA5OTEpOyAvLyBha2EgMl41MyDiiJIgMSBha2EgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xuICAgICAgICAvLyBUaGlzIGlzIGEgaG90IGZ1bmN0aW9uXG4gICAgICAgIC8vIFVucm9sbCB3aGVuIHRoZXJlIGFyZSAxLTQgYXJndW1lbnRzXG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbYXJnc1swXVtpXV0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFthcmdzWzBdW2ldLCBhcmdzWzFdW2ldXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goW2FyZ3NbMF1baV0sIGFyZ3NbMV1baV0sIGFyZ3NbMl1baV1dKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbYXJnc1swXVtpXSwgYXJnc1sxXVtpXSwgYXJnc1syXVtpXSwgYXJnc1szXVtpXV0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChhcmdzLm1hcChmdW5jdGlvbiAoYXJyYXkpIHsgcmV0dXJuIGFycmF5W2ldOyB9KSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4QXJyYXlMZW47IGkrKykge1xuICAgICAgICBfbG9vcF8xKGkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBSZWR1Y2UgZnVuY3Rpb24gd2hpY2ggYnVpbGRzIGFuIG9iamVjdCBmcm9tIGFuIGFycmF5IG9mIFtrZXksIHZhbHVlXSBwYWlycy5cbiAqXG4gKiBFYWNoIGl0ZXJhdGlvbiBzZXRzIHRoZSBrZXkvdmFsIHBhaXIgb24gdGhlIG1lbW8gb2JqZWN0LCB0aGVuIHJldHVybnMgdGhlIG1lbW8gZm9yIHRoZSBuZXh0IGl0ZXJhdGlvbi5cbiAqXG4gKiBFYWNoIGtleVZhbHVlVHVwbGUgc2hvdWxkIGJlIGFuIGFycmF5IHdpdGggdmFsdWVzIFsga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkgXVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBcbiAqXG4gKiB2YXIgcGFpcnMgPSBbIFtcImZvb2tleVwiLCBcImZvb3ZhbFwiXSwgW1wiYmFya2V5XCIsIFwiYmFydmFsXCJdIF1cbiAqXG4gKiB2YXIgcGFpcnNUb09iaiA9IHBhaXJzLnJlZHVjZSgobWVtbywgcGFpcikgPT4gYXBwbHlQYWlycyhtZW1vLCBwYWlyKSwge30pXG4gKiAvLyBwYWlyc1RvT2JqID09IHsgZm9va2V5OiBcImZvb3ZhbFwiLCBiYXJrZXk6IFwiYmFydmFsXCIgfVxuICpcbiAqIC8vIE9yLCBtb3JlIHNpbXBseTpcbiAqIHZhciBwYWlyc1RvT2JqID0gcGFpcnMucmVkdWNlKGFwcGx5UGFpcnMsIHt9KVxuICogLy8gcGFpcnNUb09iaiA9PSB7IGZvb2tleTogXCJmb292YWxcIiwgYmFya2V5OiBcImJhcnZhbFwiIH1cbiAqIGBgYFxuICovXG5mdW5jdGlvbiBhcHBseVBhaXJzKG1lbW8sIGtleVZhbFR1cGxlKSB7XG4gICAgdmFyIGtleSwgdmFsdWU7XG4gICAgaWYgKGlzQXJyYXkoa2V5VmFsVHVwbGUpKVxuICAgICAgICBrZXkgPSBrZXlWYWxUdXBsZVswXSwgdmFsdWUgPSBrZXlWYWxUdXBsZVsxXTtcbiAgICBpZiAoIWlzU3RyaW5nKGtleSkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBwYXJhbWV0ZXJzIHRvIGFwcGx5UGFpcnMnKTtcbiAgICBtZW1vW2tleV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gbWVtbztcbn1cbi8qKiBHZXQgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnJheSAqL1xuZnVuY3Rpb24gdGFpbChhcnIpIHtcbiAgICByZXR1cm4gYXJyLmxlbmd0aCAmJiBhcnJbYXJyLmxlbmd0aCAtIDFdIHx8IHVuZGVmaW5lZDtcbn1cbi8qKlxuICogc2hhbGxvdyBjb3B5IGZyb20gc3JjIHRvIGRlc3RcbiAqL1xuZnVuY3Rpb24gY29weShzcmMsIGRlc3QpIHtcbiAgICBpZiAoZGVzdClcbiAgICAgICAgT2JqZWN0LmtleXMoZGVzdCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBkZWxldGUgZGVzdFtrZXldOyB9KTtcbiAgICBpZiAoIWRlc3QpXG4gICAgICAgIGRlc3QgPSB7fTtcbiAgICByZXR1cm4gZXh0ZW5kKGRlc3QsIHNyYyk7XG59XG4vKiogTmFpdmUgZm9yRWFjaCBpbXBsZW1lbnRhdGlvbiB3b3JrcyB3aXRoIE9iamVjdHMgb3IgQXJyYXlzICovXG5mdW5jdGlvbiBfZm9yRWFjaChvYmosIGNiLCBfdGhpcykge1xuICAgIGlmIChpc0FycmF5KG9iaikpXG4gICAgICAgIHJldHVybiBvYmouZm9yRWFjaChjYiwgX3RoaXMpO1xuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBjYihvYmpba2V5XSwga2V5KTsgfSk7XG59XG5mdW5jdGlvbiBfZXh0ZW5kKHRvT2JqKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaWYgKCFvYmopXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHRvT2JqW2tleXNbal1dID0gb2JqW2tleXNbal1dO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0b09iajtcbn1cbmZ1bmN0aW9uIF9lcXVhbHMobzEsIG8yKSB7XG4gICAgaWYgKG8xID09PSBvMilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKG8xID09PSBudWxsIHx8IG8yID09PSBudWxsKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKG8xICE9PSBvMSAmJiBvMiAhPT0gbzIpXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBOYU4gPT09IE5hTlxuICAgIHZhciB0MSA9IHR5cGVvZiBvMSwgdDIgPSB0eXBlb2YgbzI7XG4gICAgaWYgKHQxICE9PSB0MiB8fCB0MSAhPT0gJ29iamVjdCcpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2YXIgdHVwID0gW28xLCBvMl07XG4gICAgaWYgKGFsbChpc0FycmF5KSh0dXApKVxuICAgICAgICByZXR1cm4gX2FycmF5c0VxKG8xLCBvMik7XG4gICAgaWYgKGFsbChpc0RhdGUpKHR1cCkpXG4gICAgICAgIHJldHVybiBvMS5nZXRUaW1lKCkgPT09IG8yLmdldFRpbWUoKTtcbiAgICBpZiAoYWxsKGlzUmVnRXhwKSh0dXApKVxuICAgICAgICByZXR1cm4gbzEudG9TdHJpbmcoKSA9PT0gbzIudG9TdHJpbmcoKTtcbiAgICBpZiAoYWxsKGlzRnVuY3Rpb24pKHR1cCkpXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBtZWhcbiAgICB2YXIgcHJlZGljYXRlcyA9IFtpc0Z1bmN0aW9uLCBpc0FycmF5LCBpc0RhdGUsIGlzUmVnRXhwXTtcbiAgICBpZiAocHJlZGljYXRlcy5tYXAoYW55KS5yZWR1Y2UoZnVuY3Rpb24gKGIsIGZuKSB7IHJldHVybiBiIHx8ICEhZm4odHVwKTsgfSwgZmFsc2UpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmFyIGtleXMgPSB7fTtcbiAgICBmb3IgKHZhciBrZXkgaW4gbzEpIHtcbiAgICAgICAgaWYgKCFfZXF1YWxzKG8xW2tleV0sIG8yW2tleV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBrZXlzW2tleV0gPSB0cnVlO1xuICAgIH1cbiAgICBmb3IgKHZhciBrZXkgaW4gbzIpIHtcbiAgICAgICAgaWYgKCFrZXlzW2tleV0pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gX2FycmF5c0VxKGExLCBhMikge1xuICAgIGlmIChhMS5sZW5ndGggIT09IGEyLmxlbmd0aClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBhcnJheVR1cGxlcyhhMSwgYTIpLnJlZHVjZShmdW5jdGlvbiAoYiwgdCkgeyByZXR1cm4gYiAmJiBfZXF1YWxzKHRbMF0sIHRbMV0pOyB9LCB0cnVlKTtcbn1cbi8vIGlzc3VlICMyNjc2XG52YXIgc2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlID0gZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICByZXR1cm4gcHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoZSkgeyByZXR1cm4gMDsgfSkgJiYgcHJvbWlzZTtcbn07XG52YXIgc2lsZW50UmVqZWN0aW9uID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgcmV0dXJuIHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZShzZXJ2aWNlcy4kcS5yZWplY3QoZXJyb3IpKTtcbn07XG5cbi8qKlxuICogQG1vZHVsZSBjb21tb25cbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG52YXIgUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVldWUoX2l0ZW1zLCBfbGltaXQpIHtcbiAgICAgICAgaWYgKF9pdGVtcyA9PT0gdm9pZCAwKSB7IF9pdGVtcyA9IFtdOyB9XG4gICAgICAgIGlmIChfbGltaXQgPT09IHZvaWQgMCkgeyBfbGltaXQgPSBudWxsOyB9XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gX2l0ZW1zO1xuICAgICAgICB0aGlzLl9saW1pdCA9IF9saW1pdDtcbiAgICAgICAgdGhpcy5fZXZpY3RMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5vbkV2aWN0ID0gcHVzaFRvKHRoaXMuX2V2aWN0TGlzdGVuZXJzKTtcbiAgICB9XG4gICAgUXVldWUucHJvdG90eXBlLmVucXVldWUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLl9pdGVtcztcbiAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgaWYgKHRoaXMuX2xpbWl0ICYmIGl0ZW1zLmxlbmd0aCA+IHRoaXMuX2xpbWl0KVxuICAgICAgICAgICAgdGhpcy5ldmljdCgpO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5ldmljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9pdGVtcy5zaGlmdCgpO1xuICAgICAgICB0aGlzLl9ldmljdExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChmbikgeyByZXR1cm4gZm4oaXRlbSk7IH0pO1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zaXplKCkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMuc3BsaWNlKDAsIDEpWzBdO1xuICAgIH07XG4gICAgUXVldWUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXMuX2l0ZW1zO1xuICAgICAgICB0aGlzLl9pdGVtcyA9IFtdO1xuICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RoO1xuICAgIH07XG4gICAgUXVldWUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBpZHggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGl0ZW0pO1xuICAgICAgICByZXR1cm4gaWR4ID4gLTEgJiYgdGhpcy5faXRlbXMuc3BsaWNlKGlkeCwgMSlbMF07XG4gICAgfTtcbiAgICBRdWV1ZS5wcm90b3R5cGUucGVla1RhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGggLSAxXTtcbiAgICB9O1xuICAgIFF1ZXVlLnByb3RvdHlwZS5wZWVrSGVhZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSgpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zWzBdO1xuICAgIH07XG4gICAgcmV0dXJuIFF1ZXVlO1xufSgpKTtcblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG5cbihmdW5jdGlvbiAoUmVqZWN0VHlwZSkge1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIlNVUEVSU0VERURcIl0gPSAyXSA9IFwiU1VQRVJTRURFRFwiO1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIkFCT1JURURcIl0gPSAzXSA9IFwiQUJPUlRFRFwiO1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIklOVkFMSURcIl0gPSA0XSA9IFwiSU5WQUxJRFwiO1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIklHTk9SRURcIl0gPSA1XSA9IFwiSUdOT1JFRFwiO1xuICAgIFJlamVjdFR5cGVbUmVqZWN0VHlwZVtcIkVSUk9SXCJdID0gNl0gPSBcIkVSUk9SXCI7XG59KShleHBvcnRzLlJlamVjdFR5cGUgfHwgKGV4cG9ydHMuUmVqZWN0VHlwZSA9IHt9KSk7XG4vKiogQGhpZGRlbiAqL1xudmFyIGlkID0gMDtcbnZhciBSZWplY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVqZWN0aW9uKHR5cGUsIG1lc3NhZ2UsIGRldGFpbCkge1xuICAgICAgICB0aGlzLiRpZCA9IGlkKys7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMuZGV0YWlsID0gZGV0YWlsO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBvYmogaXMgYSByZWplY3RlZCBwcm9taXNlIGNyZWF0ZWQgZnJvbSB0aGUgYGFzUHJvbWlzZWAgZmFjdG9yeSAqL1xuICAgIFJlamVjdGlvbi5pc1JlamVjdGlvblByb21pc2UgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgKHR5cGVvZiBvYmoudGhlbiA9PT0gJ2Z1bmN0aW9uJykgJiYgaXMoUmVqZWN0aW9uKShvYmouX3RyYW5zaXRpb25SZWplY3Rpb24pO1xuICAgIH07XG4gICAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIHRyYW5zaXRpb24gc3VwZXJzZWRlZCAqL1xuICAgIFJlamVjdGlvbi5zdXBlcnNlZGVkID0gZnVuY3Rpb24gKGRldGFpbCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgbWVzc2FnZSA9ICdUaGUgdHJhbnNpdGlvbiBoYXMgYmVlbiBzdXBlcnNlZGVkIGJ5IGEgZGlmZmVyZW50IHRyYW5zaXRpb24nO1xuICAgICAgICB2YXIgcmVqZWN0aW9uID0gbmV3IFJlamVjdGlvbihleHBvcnRzLlJlamVjdFR5cGUuU1VQRVJTRURFRCwgbWVzc2FnZSwgZGV0YWlsKTtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWRpcmVjdGVkKSB7XG4gICAgICAgICAgICByZWplY3Rpb24ucmVkaXJlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlamVjdGlvbjtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIGEgUmVqZWN0aW9uIGR1ZSB0byByZWRpcmVjdGVkIHRyYW5zaXRpb24gKi9cbiAgICBSZWplY3Rpb24ucmVkaXJlY3RlZCA9IGZ1bmN0aW9uIChkZXRhaWwpIHtcbiAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5zdXBlcnNlZGVkKGRldGFpbCwgeyByZWRpcmVjdGVkOiB0cnVlIH0pO1xuICAgIH07XG4gICAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGludmFsaWQgdHJhbnNpdGlvbiAqL1xuICAgIFJlamVjdGlvbi5pbnZhbGlkID0gZnVuY3Rpb24gKGRldGFpbCkge1xuICAgICAgICB2YXIgbWVzc2FnZSA9ICdUaGlzIHRyYW5zaXRpb24gaXMgaW52YWxpZCc7XG4gICAgICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKGV4cG9ydHMuUmVqZWN0VHlwZS5JTlZBTElELCBtZXNzYWdlLCBkZXRhaWwpO1xuICAgIH07XG4gICAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGlnbm9yZWQgdHJhbnNpdGlvbiAqL1xuICAgIFJlamVjdGlvbi5pZ25vcmVkID0gZnVuY3Rpb24gKGRldGFpbCkge1xuICAgICAgICB2YXIgbWVzc2FnZSA9ICdUaGUgdHJhbnNpdGlvbiB3YXMgaWdub3JlZCc7XG4gICAgICAgIHJldHVybiBuZXcgUmVqZWN0aW9uKGV4cG9ydHMuUmVqZWN0VHlwZS5JR05PUkVELCBtZXNzYWdlLCBkZXRhaWwpO1xuICAgIH07XG4gICAgLyoqIFJldHVybnMgYSBSZWplY3Rpb24gZHVlIHRvIGFib3J0ZWQgdHJhbnNpdGlvbiAqL1xuICAgIFJlamVjdGlvbi5hYm9ydGVkID0gZnVuY3Rpb24gKGRldGFpbCkge1xuICAgICAgICB2YXIgbWVzc2FnZSA9ICdUaGUgdHJhbnNpdGlvbiBoYXMgYmVlbiBhYm9ydGVkJztcbiAgICAgICAgcmV0dXJuIG5ldyBSZWplY3Rpb24oZXhwb3J0cy5SZWplY3RUeXBlLkFCT1JURUQsIG1lc3NhZ2UsIGRldGFpbCk7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyBhIFJlamVjdGlvbiBkdWUgdG8gYWJvcnRlZCB0cmFuc2l0aW9uICovXG4gICAgUmVqZWN0aW9uLmVycm9yZWQgPSBmdW5jdGlvbiAoZGV0YWlsKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ1RoZSB0cmFuc2l0aW9uIGVycm9yZWQnO1xuICAgICAgICByZXR1cm4gbmV3IFJlamVjdGlvbihleHBvcnRzLlJlamVjdFR5cGUuRVJST1IsIG1lc3NhZ2UsIGRldGFpbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgUmVqZWN0aW9uXG4gICAgICpcbiAgICAgKiBOb3JtYWxpemVzIGEgdmFsdWUgYXMgYSBSZWplY3Rpb24uXG4gICAgICogSWYgdGhlIHZhbHVlIGlzIGFscmVhZHkgYSBSZWplY3Rpb24sIHJldHVybnMgaXQuXG4gICAgICogT3RoZXJ3aXNlLCB3cmFwcyBhbmQgcmV0dXJucyB0aGUgdmFsdWUgYXMgYSBSZWplY3Rpb24gKFJlamVjdGlvbiB0eXBlOiBFUlJPUikuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBgZGV0YWlsYCBpZiBpdCBpcyBhbHJlYWR5IGEgYFJlamVjdGlvbmAsIGVsc2UgcmV0dXJucyBhbiBFUlJPUiBSZWplY3Rpb24uXG4gICAgICovXG4gICAgUmVqZWN0aW9uLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChkZXRhaWwpIHtcbiAgICAgICAgcmV0dXJuIGlzKFJlamVjdGlvbikoZGV0YWlsKSA/IGRldGFpbCA6IFJlamVjdGlvbi5lcnJvcmVkKGRldGFpbCk7XG4gICAgfTtcbiAgICBSZWplY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGV0YWlsU3RyaW5nID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkICYmIGQudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcgPyBkLnRvU3RyaW5nKCkgOiBzdHJpbmdpZnkoZCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBkZXRhaWwgPSBkZXRhaWxTdHJpbmcodGhpcy5kZXRhaWwpO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCAkaWQgPSBfYS4kaWQsIHR5cGUgPSBfYS50eXBlLCBtZXNzYWdlID0gX2EubWVzc2FnZTtcbiAgICAgICAgcmV0dXJuIFwiVHJhbnNpdGlvbiBSZWplY3Rpb24oJGlkOiBcIiArICRpZCArIFwiIHR5cGU6IFwiICsgdHlwZSArIFwiLCBtZXNzYWdlOiBcIiArIG1lc3NhZ2UgKyBcIiwgZGV0YWlsOiBcIiArIGRldGFpbCArIFwiKVwiO1xuICAgIH07XG4gICAgUmVqZWN0aW9uLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBleHRlbmQoc2lsZW50UmVqZWN0aW9uKHRoaXMpLCB7IF90cmFuc2l0aW9uUmVqZWN0aW9uOiB0aGlzIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFJlamVjdGlvbjtcbn0oKSk7XG5cbi8qKlxuICogIyBUcmFuc2l0aW9uIHRyYWNpbmcgKGRlYnVnKVxuICpcbiAqIEVuYWJsZSB0cmFuc2l0aW9uIHRyYWNpbmcgdG8gcHJpbnQgdHJhbnNpdGlvbiBpbmZvcm1hdGlvbiB0byB0aGUgY29uc29sZSxcbiAqIGluIG9yZGVyIHRvIGhlbHAgZGVidWcgeW91ciBhcHBsaWNhdGlvbi5cbiAqIFRyYWNpbmcgbG9ncyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBlYWNoIFRyYW5zaXRpb24gdG8geW91ciBjb25zb2xlLlxuICpcbiAqIFRvIGVuYWJsZSB0cmFjaW5nLCBpbXBvcnQgdGhlIFtbVHJhY2VdXSBzaW5nbGV0b24gYW5kIGVuYWJsZSBvbmUgb3IgbW9yZSBjYXRlZ29yaWVzLlxuICpcbiAqICMjIyBFUzZcbiAqIGBgYGpzXG4gKiBpbXBvcnQge3RyYWNlfSBmcm9tIFwidWktcm91dGVyLW5nMlwiOyAvLyBvciBcImFuZ3VsYXItdWktcm91dGVyXCJcbiAqIHRyYWNlLmVuYWJsZSgxLCA1KTsgLy8gVFJBTlNJVElPTiBhbmQgVklFV0NPTkZJR1xuICogYGBgXG4gKlxuICogIyMjIENKU1xuICogYGBganNcbiAqIGxldCB0cmFjZSA9IHJlcXVpcmUoXCJhbmd1bGFyLXVpLXJvdXRlclwiKS50cmFjZTsgLy8gb3IgXCJ1aS1yb3V0ZXItbmcyXCJcbiAqIHRyYWNlLmVuYWJsZShcIlRSQU5TSVRJT05cIiwgXCJWSUVXQ09ORklHXCIpO1xuICogYGBgXG4gKlxuICogIyMjIEdsb2JhbHNcbiAqIGBgYGpzXG4gKiBsZXQgdHJhY2UgPSB3aW5kb3dbXCJhbmd1bGFyLXVpLXJvdXRlclwiXS50cmFjZTsgLy8gb3IgXCJ1aS1yb3V0ZXItbmcyXCJcbiAqIHRyYWNlLmVuYWJsZSgpOyAvLyBUcmFjZSBldmVyeXRoaW5nICh2ZXJ5IHZlcmJvc2UpXG4gKiBgYGBcbiAqXG4gKiAjIyMgQW5ndWxhciAxOlxuICogYGBganNcbiAqIGFwcC5ydW4oJHRyYWNlID0+ICR0cmFjZS5lbmFibGUoKSk7XG4gKiBgYGBcbiAqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFjZVxuICovXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1jb25zb2xlICovXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gdWlWaWV3U3RyaW5nKHVpdmlldykge1xuICAgIGlmICghdWl2aWV3KVxuICAgICAgICByZXR1cm4gJ3VpLXZpZXcgKGRlZnVuY3QpJztcbiAgICB2YXIgc3RhdGUgPSB1aXZpZXcuY3JlYXRpb25Db250ZXh0ID8gdWl2aWV3LmNyZWF0aW9uQ29udGV4dC5uYW1lIHx8ICcocm9vdCknIDogJyhub25lKSc7XG4gICAgcmV0dXJuIFwiW3VpLXZpZXcjXCIgKyB1aXZpZXcuaWQgKyBcIiBcIiArIHVpdmlldy4kdHlwZSArIFwiOlwiICsgdWl2aWV3LmZxbiArIFwiIChcIiArIHVpdmlldy5uYW1lICsgXCJAXCIgKyBzdGF0ZSArIFwiKV1cIjtcbn1cbi8qKiBAaGlkZGVuICovXG52YXIgdmlld0NvbmZpZ1N0cmluZyA9IGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7XG4gICAgdmFyIHZpZXcgPSB2aWV3Q29uZmlnLnZpZXdEZWNsO1xuICAgIHZhciBzdGF0ZSA9IHZpZXcuJGNvbnRleHQubmFtZSB8fCAnKHJvb3QpJztcbiAgICByZXR1cm4gXCJbVmlldyNcIiArIHZpZXdDb25maWcuJGlkICsgXCIgZnJvbSAnXCIgKyBzdGF0ZSArIFwiJyBzdGF0ZV06IHRhcmdldCB1aS12aWV3OiAnXCIgKyB2aWV3LiR1aVZpZXdOYW1lICsgXCJAXCIgKyB2aWV3LiR1aVZpZXdDb250ZXh0QW5jaG9yICsgXCInXCI7XG59O1xuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZWRDYXQoaW5wdXQpIHtcbiAgICByZXR1cm4gaXNOdW1iZXIoaW5wdXQpID8gZXhwb3J0cy5DYXRlZ29yeVtpbnB1dF0gOiBleHBvcnRzLkNhdGVnb3J5W2V4cG9ydHMuQ2F0ZWdvcnlbaW5wdXRdXTtcbn1cbi8qKiBAaGlkZGVuICovXG52YXIgY29uc29sZUxvZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5sb2csIGNvbnNvbGUpO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBjb25zb2xldGFibGUgPSBpc0Z1bmN0aW9uKGNvbnNvbGUudGFibGUpID8gY29uc29sZS50YWJsZS5iaW5kKGNvbnNvbGUpIDogY29uc29sZUxvZy5iaW5kKGNvbnNvbGUpO1xuLyoqXG4gKiBUcmFjZSBjYXRlZ29yaWVzIEVudW1cbiAqXG4gKiBFbmFibGUgb3IgZGlzYWJsZSBhIGNhdGVnb3J5IHVzaW5nIFtbVHJhY2UuZW5hYmxlXV0gb3IgW1tUcmFjZS5kaXNhYmxlXV1cbiAqXG4gKiBgdHJhY2UuZW5hYmxlKENhdGVnb3J5LlRSQU5TSVRJT04pYFxuICpcbiAqIFRoZXNlIGNhbiBhbHNvIGJlIHByb3ZpZGVkIHVzaW5nIGEgbWF0Y2hpbmcgc3RyaW5nLCBvciBwb3NpdGlvbiBvcmRpbmFsXG4gKlxuICogYHRyYWNlLmVuYWJsZShcIlRSQU5TSVRJT05cIilgXG4gKlxuICogYHRyYWNlLmVuYWJsZSgxKWBcbiAqL1xuXG4oZnVuY3Rpb24gKENhdGVnb3J5KSB7XG4gICAgQ2F0ZWdvcnlbQ2F0ZWdvcnlbXCJSRVNPTFZFXCJdID0gMF0gPSBcIlJFU09MVkVcIjtcbiAgICBDYXRlZ29yeVtDYXRlZ29yeVtcIlRSQU5TSVRJT05cIl0gPSAxXSA9IFwiVFJBTlNJVElPTlwiO1xuICAgIENhdGVnb3J5W0NhdGVnb3J5W1wiSE9PS1wiXSA9IDJdID0gXCJIT09LXCI7XG4gICAgQ2F0ZWdvcnlbQ2F0ZWdvcnlbXCJVSVZJRVdcIl0gPSAzXSA9IFwiVUlWSUVXXCI7XG4gICAgQ2F0ZWdvcnlbQ2F0ZWdvcnlbXCJWSUVXQ09ORklHXCJdID0gNF0gPSBcIlZJRVdDT05GSUdcIjtcbn0pKGV4cG9ydHMuQ2F0ZWdvcnkgfHwgKGV4cG9ydHMuQ2F0ZWdvcnkgPSB7fSkpO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBfdGlkID0gcGFyc2UoJyRpZCcpO1xuLyoqIEBoaWRkZW4gKi9cbnZhciBfcmlkID0gcGFyc2UoJ3JvdXRlci4kaWQnKTtcbi8qKiBAaGlkZGVuICovXG52YXIgdHJhbnNMYmwgPSBmdW5jdGlvbiAodHJhbnMpIHsgcmV0dXJuIFwiVHJhbnNpdGlvbiAjXCIgKyBfdGlkKHRyYW5zKSArIFwiLVwiICsgX3JpZCh0cmFucyk7IH07XG4vKipcbiAqIFByaW50cyBVSS1Sb3V0ZXIgVHJhbnNpdGlvbiB0cmFjZSBpbmZvcm1hdGlvbiB0byB0aGUgY29uc29sZS5cbiAqL1xudmFyIFRyYWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gVHJhY2UoKSB7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSB7fTtcbiAgICAgICAgdGhpcy5hcHByb3hpbWF0ZURpZ2VzdHMgPSAwO1xuICAgIH1cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5fc2V0ID0gZnVuY3Rpb24gKGVuYWJsZWQsIGNhdGVnb3JpZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCFjYXRlZ29yaWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2F0ZWdvcmllcyA9IE9iamVjdC5rZXlzKGV4cG9ydHMuQ2F0ZWdvcnkpXG4gICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoaykgeyByZXR1cm4gcGFyc2VJbnQoaywgMTApOyB9KVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGspIHsgcmV0dXJuICFpc05hTihrKTsgfSlcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGV4cG9ydHMuQ2F0ZWdvcnlba2V5XTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0ZWdvcmllcy5tYXAobm9ybWFsaXplZENhdCkuZm9yRWFjaChmdW5jdGlvbiAoY2F0ZWdvcnkpIHsgcmV0dXJuIF90aGlzLl9lbmFibGVkW2NhdGVnb3J5XSA9IGVuYWJsZWQ7IH0pO1xuICAgIH07XG4gICAgVHJhY2UucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNhdGVnb3JpZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGNhdGVnb3JpZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXQodHJ1ZSwgY2F0ZWdvcmllcyk7XG4gICAgfTtcbiAgICBUcmFjZS5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNhdGVnb3JpZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGNhdGVnb3JpZXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXQoZmFsc2UsIGNhdGVnb3JpZXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBlbmFibGVkIHN0YXRldXMgb2YgYSBbW0NhdGVnb3J5XV1cbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogdHJhY2UuZW5hYmxlZChcIlZJRVdDT05GSUdcIik7IC8vIHRydWUgb3IgZmFsc2VcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgY2F0ZWdvcnkgaXMgZW5hYmxlZFxuICAgICAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS5lbmFibGVkID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2VuYWJsZWRbbm9ybWFsaXplZENhdChjYXRlZ29yeSldO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VUcmFuc2l0aW9uU3RhcnQgPSBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5UUkFOU0lUSU9OKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6IFN0YXJ0ZWQgIC0+IFwiICsgc3RyaW5naWZ5KHRyYW5zKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVRyYW5zaXRpb25JZ25vcmVkID0gZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuVFJBTlNJVElPTikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiBJZ25vcmVkICA8PiBcIiArIHN0cmluZ2lmeSh0cmFucykpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VIb29rSW52b2NhdGlvbiA9IGZ1bmN0aW9uIChzdGVwLCB0cmFucywgb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChleHBvcnRzLkNhdGVnb3J5LkhPT0spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgZXZlbnQgPSBwYXJzZSgndHJhY2VEYXRhLmhvb2tUeXBlJykob3B0aW9ucykgfHwgJ2ludGVybmFsJywgY29udGV4dCA9IHBhcnNlKCd0cmFjZURhdGEuY29udGV4dC5zdGF0ZS5uYW1lJykob3B0aW9ucykgfHwgcGFyc2UoJ3RyYWNlRGF0YS5jb250ZXh0Jykob3B0aW9ucykgfHwgJ3Vua25vd24nLCBuYW1lID0gZnVuY3Rpb25Ub1N0cmluZyhzdGVwLnJlZ2lzdGVyZWRIb29rLmNhbGxiYWNrKTtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6ICAgSG9vayAtPiBcIiArIGV2ZW50ICsgXCIgY29udGV4dDogXCIgKyBjb250ZXh0ICsgXCIsIFwiICsgbWF4TGVuZ3RoKDIwMCwgbmFtZSkpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VIb29rUmVzdWx0ID0gZnVuY3Rpb24gKGhvb2tSZXN1bHQsIHRyYW5zLCB0cmFuc2l0aW9uT3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChleHBvcnRzLkNhdGVnb3J5LkhPT0spKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogICA8LSBIb29rIHJldHVybmVkOiBcIiArIG1heExlbmd0aCgyMDAsIHN0cmluZ2lmeShob29rUmVzdWx0KSkpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VSZXNvbHZlUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCB3aGVuLCB0cmFucykge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChleHBvcnRzLkNhdGVnb3J5LlJFU09MVkUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyh0cmFuc0xibCh0cmFucykgKyBcIjogICAgICAgICBSZXNvbHZpbmcgXCIgKyBwYXRoICsgXCIgKFwiICsgd2hlbiArIFwiKVwiKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlUmVzb2x2YWJsZVJlc29sdmVkID0gZnVuY3Rpb24gKHJlc29sdmFibGUsIHRyYW5zKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuUkVTT0xWRSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiAgICAgICAgICAgICAgIDwtIFJlc29sdmVkICBcIiArIHJlc29sdmFibGUgKyBcIiB0bzogXCIgKyBtYXhMZW5ndGgoMjAwLCBzdHJpbmdpZnkocmVzb2x2YWJsZS5kYXRhKSkpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VFcnJvciA9IGZ1bmN0aW9uIChyZWFzb24sIHRyYW5zKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuVFJBTlNJVElPTikpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKHRyYW5zTGJsKHRyYW5zKSArIFwiOiA8LSBSZWplY3RlZCBcIiArIHN0cmluZ2lmeSh0cmFucykgKyBcIiwgcmVhc29uOiBcIiArIHJlYXNvbik7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVN1Y2Nlc3MgPSBmdW5jdGlvbiAoZmluYWxTdGF0ZSwgdHJhbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5UUkFOU0lUSU9OKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2codHJhbnNMYmwodHJhbnMpICsgXCI6IDwtIFN1Y2Nlc3MgIFwiICsgc3RyaW5naWZ5KHRyYW5zKSArIFwiLCBmaW5hbCBzdGF0ZTogXCIgKyBmaW5hbFN0YXRlLm5hbWUpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VVSVZpZXdFdmVudCA9IGZ1bmN0aW9uIChldmVudCwgdmlld0RhdGEsIGV4dHJhKSB7XG4gICAgICAgIGlmIChleHRyYSA9PT0gdm9pZCAwKSB7IGV4dHJhID0gJyc7IH1cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5VSVZJRVcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zb2xlLmxvZyhcInVpLXZpZXc6IFwiICsgcGFkU3RyaW5nKDMwLCBldmVudCkgKyBcIiBcIiArIHVpVmlld1N0cmluZyh2aWV3RGF0YSkgKyBleHRyYSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVVJVmlld0NvbmZpZ1VwZGF0ZWQgPSBmdW5jdGlvbiAodmlld0RhdGEsIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5VSVZJRVcpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLnRyYWNlVUlWaWV3RXZlbnQoJ1VwZGF0aW5nJywgdmlld0RhdGEsIFwiIHdpdGggVmlld0NvbmZpZyBmcm9tIGNvbnRleHQ9J1wiICsgY29udGV4dCArIFwiJ1wiKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVUlWaWV3RmlsbCA9IGZ1bmN0aW9uICh2aWV3RGF0YSwgaHRtbCkge1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZChleHBvcnRzLkNhdGVnb3J5LlVJVklFVykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudHJhY2VVSVZpZXdFdmVudCgnRmlsbCcsIHZpZXdEYXRhLCBcIiB3aXRoOiBcIiArIG1heExlbmd0aCgyMDAsIGh0bWwpKTtcbiAgICB9O1xuICAgIC8qKiBAaW50ZXJuYWxhcGkgY2FsbGVkIGJ5IHVpLXJvdXRlciBjb2RlICovXG4gICAgVHJhY2UucHJvdG90eXBlLnRyYWNlVmlld1N5bmMgPSBmdW5jdGlvbiAocGFpcnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQoZXhwb3J0cy5DYXRlZ29yeS5WSUVXQ09ORklHKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHVpdmhlYWRlciA9ICd1aXZpZXcgY29tcG9uZW50IGZxbic7XG4gICAgICAgIHZhciBjZmdoZWFkZXIgPSAndmlldyBjb25maWcgc3RhdGUgKHZpZXcgbmFtZSknO1xuICAgICAgICB2YXIgbWFwcGluZyA9IHBhaXJzLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciB1aVZpZXcgPSBfYS51aVZpZXcsIHZpZXdDb25maWcgPSBfYS52aWV3Q29uZmlnO1xuICAgICAgICAgICAgdmFyIHVpdiA9IHVpVmlldyAmJiB1aVZpZXcuZnFuO1xuICAgICAgICAgICAgdmFyIGNmZyA9IHZpZXdDb25maWcgJiYgdmlld0NvbmZpZy52aWV3RGVjbC4kY29udGV4dC5uYW1lICsgXCI6IChcIiArIHZpZXdDb25maWcudmlld0RlY2wuJG5hbWUgKyBcIilcIjtcbiAgICAgICAgICAgIHJldHVybiBfYiA9IHt9LCBfYlt1aXZoZWFkZXJdID0gdWl2LCBfYltjZmdoZWFkZXJdID0gY2ZnLCBfYjtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gKGFbdWl2aGVhZGVyXSB8fCAnJykubG9jYWxlQ29tcGFyZShiW3VpdmhlYWRlcl0gfHwgJycpOyB9KTtcbiAgICAgICAgY29uc29sZXRhYmxlKG1hcHBpbmcpO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSBjYWxsZWQgYnkgdWktcm91dGVyIGNvZGUgKi9cbiAgICBUcmFjZS5wcm90b3R5cGUudHJhY2VWaWV3U2VydmljZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50LCB2aWV3Q29uZmlnKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuVklFV0NPTkZJRykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVklFV0NPTkZJRzogXCIgKyBldmVudCArIFwiIFwiICsgdmlld0NvbmZpZ1N0cmluZyh2aWV3Q29uZmlnKSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpIGNhbGxlZCBieSB1aS1yb3V0ZXIgY29kZSAqL1xuICAgIFRyYWNlLnByb3RvdHlwZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQsIHZpZXdEYXRhKSB7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVkKGV4cG9ydHMuQ2F0ZWdvcnkuVklFV0NPTkZJRykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVklFV0NPTkZJRzogXCIgKyBldmVudCArIFwiIFwiICsgdWlWaWV3U3RyaW5nKHZpZXdEYXRhKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVHJhY2U7XG59KCkpO1xuLyoqXG4gKiBUaGUgW1tUcmFjZV1dIHNpbmdsZXRvblxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge3RyYWNlfSBmcm9tIFwiYW5ndWxhci11aS1yb3V0ZXJcIjtcbiAqIHRyYWNlLmVuYWJsZSgxLCA1KTtcbiAqIGBgYFxuICovXG52YXIgdHJhY2UgPSBuZXcgVHJhY2UoKTtcblxuKGZ1bmN0aW9uIChUcmFuc2l0aW9uSG9va1BoYXNlKSB7XG4gICAgVHJhbnNpdGlvbkhvb2tQaGFzZVtUcmFuc2l0aW9uSG9va1BoYXNlW1wiQ1JFQVRFXCJdID0gMF0gPSBcIkNSRUFURVwiO1xuICAgIFRyYW5zaXRpb25Ib29rUGhhc2VbVHJhbnNpdGlvbkhvb2tQaGFzZVtcIkJFRk9SRVwiXSA9IDFdID0gXCJCRUZPUkVcIjtcbiAgICBUcmFuc2l0aW9uSG9va1BoYXNlW1RyYW5zaXRpb25Ib29rUGhhc2VbXCJSVU5cIl0gPSAyXSA9IFwiUlVOXCI7XG4gICAgVHJhbnNpdGlvbkhvb2tQaGFzZVtUcmFuc2l0aW9uSG9va1BoYXNlW1wiU1VDQ0VTU1wiXSA9IDNdID0gXCJTVUNDRVNTXCI7XG4gICAgVHJhbnNpdGlvbkhvb2tQaGFzZVtUcmFuc2l0aW9uSG9va1BoYXNlW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcbn0pKGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tQaGFzZSB8fCAoZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlID0ge30pKTtcblxuKGZ1bmN0aW9uIChUcmFuc2l0aW9uSG9va1Njb3BlKSB7XG4gICAgVHJhbnNpdGlvbkhvb2tTY29wZVtUcmFuc2l0aW9uSG9va1Njb3BlW1wiVFJBTlNJVElPTlwiXSA9IDBdID0gXCJUUkFOU0lUSU9OXCI7XG4gICAgVHJhbnNpdGlvbkhvb2tTY29wZVtUcmFuc2l0aW9uSG9va1Njb3BlW1wiU1RBVEVcIl0gPSAxXSA9IFwiU1RBVEVcIjtcbn0pKGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tTY29wZSB8fCAoZXhwb3J0cy5UcmFuc2l0aW9uSG9va1Njb3BlID0ge30pKTtcblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBzdGF0ZVxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqXG4gKiBFbmNhcHN1bGF0ZSB0aGUgdGFyZ2V0IChkZXN0aW5hdGlvbikgc3RhdGUvcGFyYW1zL29wdGlvbnMgb2YgYSBbW1RyYW5zaXRpb25dXS5cbiAqXG4gKiBUaGlzIGNsYXNzIGlzIGZyZXF1ZW50bHkgdXNlZCB0byByZWRpcmVjdCBhIHRyYW5zaXRpb24gdG8gYSBuZXcgZGVzdGluYXRpb24uXG4gKlxuICogU2VlOlxuICpcbiAqIC0gW1tIb29rUmVzdWx0XV1cbiAqIC0gW1tUcmFuc2l0aW9uSG9va0ZuXV1cbiAqIC0gW1tUcmFuc2l0aW9uU2VydmljZS5vblN0YXJ0XV1cbiAqXG4gKiBUbyBjcmVhdGUgYSBgVGFyZ2V0U3RhdGVgLCB1c2UgW1tTdGF0ZVNlcnZpY2UudGFyZ2V0XV0uXG4gKlxuICogLS0tXG4gKlxuICogVGhpcyBjbGFzcyB3cmFwczpcbiAqXG4gKiAxKSBhbiBpZGVudGlmaWVyIGZvciBhIHN0YXRlXG4gKiAyKSBhIHNldCBvZiBwYXJhbWV0ZXJzXG4gKiAzKSBhbmQgdHJhbnNpdGlvbiBvcHRpb25zXG4gKiA0KSB0aGUgcmVnaXN0ZXJlZCBzdGF0ZSBvYmplY3QgKHRoZSBbW1N0YXRlRGVjbGFyYXRpb25dXSlcbiAqXG4gKiBNYW55IFVJLVJvdXRlciBBUElzIHN1Y2ggYXMgW1tTdGF0ZVNlcnZpY2UuZ29dXSB0YWtlIGEgW1tTdGF0ZU9yTmFtZV1dIGFyZ3VtZW50IHdoaWNoIGNhblxuICogZWl0aGVyIGJlIGEgKnN0YXRlIG9iamVjdCogKGEgW1tTdGF0ZURlY2xhcmF0aW9uXV0gb3IgW1tTdGF0ZU9iamVjdF1dKSBvciBhICpzdGF0ZSBuYW1lKiAoYSBzdHJpbmcpLlxuICogVGhlIGBUYXJnZXRTdGF0ZWAgY2xhc3Mgbm9ybWFsaXplcyB0aG9zZSBvcHRpb25zLlxuICpcbiAqIEEgYFRhcmdldFN0YXRlYCBtYXkgYmUgdmFsaWQgKHRoZSBzdGF0ZSBiZWluZyB0YXJnZXRlZCBleGlzdHMgaW4gdGhlIHJlZ2lzdHJ5KVxuICogb3IgaW52YWxpZCAodGhlIHN0YXRlIGJlaW5nIHRhcmdldGVkIGlzIG5vdCByZWdpc3RlcmVkKS5cbiAqL1xudmFyIFRhcmdldFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIFRoZSBUYXJnZXRTdGF0ZSBjb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogTm90ZTogRG8gbm90IGNvbnN0cnVjdCBhIGBUYXJnZXRTdGF0ZWAgbWFudWFsbHkuXG4gICAgICogVG8gY3JlYXRlIGEgYFRhcmdldFN0YXRlYCwgdXNlIHRoZSBbW1N0YXRlU2VydmljZS50YXJnZXRdXSBmYWN0b3J5IG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBfc3RhdGVSZWdpc3RyeSBUaGUgU3RhdGVSZWdpc3RyeSB0byB1c2UgdG8gbG9vayB1cCB0aGUgX2RlZmluaXRpb25cbiAgICAgKiBAcGFyYW0gX2lkZW50aWZpZXIgQW4gaWRlbnRpZmllciBmb3IgYSBzdGF0ZS5cbiAgICAgKiAgICBFaXRoZXIgYSBmdWxseS1xdWFsaWZpZWQgc3RhdGUgbmFtZSwgb3IgdGhlIG9iamVjdCB1c2VkIHRvIGRlZmluZSB0aGUgc3RhdGUuXG4gICAgICogQHBhcmFtIF9wYXJhbXMgUGFyYW1ldGVycyBmb3IgdGhlIHRhcmdldCBzdGF0ZVxuICAgICAqIEBwYXJhbSBfb3B0aW9ucyBUcmFuc2l0aW9uIG9wdGlvbnMuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUYXJnZXRTdGF0ZShfc3RhdGVSZWdpc3RyeSwgX2lkZW50aWZpZXIsIF9wYXJhbXMsIF9vcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX3N0YXRlUmVnaXN0cnkgPSBfc3RhdGVSZWdpc3RyeTtcbiAgICAgICAgdGhpcy5faWRlbnRpZmllciA9IF9pZGVudGlmaWVyO1xuICAgICAgICB0aGlzLl9pZGVudGlmaWVyID0gX2lkZW50aWZpZXI7XG4gICAgICAgIHRoaXMuX3BhcmFtcyA9IGV4dGVuZCh7fSwgX3BhcmFtcyB8fCB7fSk7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBleHRlbmQoe30sIF9vcHRpb25zIHx8IHt9KTtcbiAgICAgICAgdGhpcy5fZGVmaW5pdGlvbiA9IF9zdGF0ZVJlZ2lzdHJ5Lm1hdGNoZXIuZmluZChfaWRlbnRpZmllciwgdGhpcy5fb3B0aW9ucy5yZWxhdGl2ZSk7XG4gICAgfVxuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgc3RhdGUgdGhpcyBvYmplY3QgdGFyZ2V0cyAqL1xuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5uYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmaW5pdGlvbiAmJiB0aGlzLl9kZWZpbml0aW9uLm5hbWUgfHwgdGhpcy5faWRlbnRpZmllcjtcbiAgICB9O1xuICAgIC8qKiBUaGUgaWRlbnRpZmllciB1c2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBUYXJnZXRTdGF0ZSAqL1xuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5pZGVudGlmaWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWRlbnRpZmllcjtcbiAgICB9O1xuICAgIC8qKiBUaGUgdGFyZ2V0IHBhcmFtZXRlciB2YWx1ZXMgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUucGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyYW1zO1xuICAgIH07XG4gICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvYmplY3QgKGlmIGl0IHdhcyBmb3VuZCkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuJHN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmaW5pdGlvbjtcbiAgICB9O1xuICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgZGVjbGFyYXRpb24gKGlmIGl0IHdhcyBmb3VuZCkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24uc2VsZjtcbiAgICB9O1xuICAgIC8qKiBUaGUgdGFyZ2V0IG9wdGlvbnMgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfTtcbiAgICAvKiogVHJ1ZSBpZiB0aGUgdGFyZ2V0IHN0YXRlIHdhcyBmb3VuZCAqL1xuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5leGlzdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLl9kZWZpbml0aW9uICYmIHRoaXMuX2RlZmluaXRpb24uc2VsZik7XG4gICAgfTtcbiAgICAvKiogVHJ1ZSBpZiB0aGUgb2JqZWN0IGlzIHZhbGlkICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnZhbGlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZXJyb3IoKTtcbiAgICB9O1xuICAgIC8qKiBJZiB0aGUgb2JqZWN0IGlzIGludmFsaWQsIHJldHVybnMgdGhlIHJlYXNvbiB3aHkgKi9cbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBiYXNlID0gdGhpcy5vcHRpb25zKCkucmVsYXRpdmU7XG4gICAgICAgIGlmICghdGhpcy5fZGVmaW5pdGlvbiAmJiAhIWJhc2UpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZU5hbWUgPSBiYXNlLm5hbWUgPyBiYXNlLm5hbWUgOiBiYXNlO1xuICAgICAgICAgICAgcmV0dXJuIFwiQ291bGQgbm90IHJlc29sdmUgJ1wiICsgdGhpcy5uYW1lKCkgKyBcIicgZnJvbSBzdGF0ZSAnXCIgKyBzdGF0ZU5hbWUgKyBcIidcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2RlZmluaXRpb24pXG4gICAgICAgICAgICByZXR1cm4gXCJObyBzdWNoIHN0YXRlICdcIiArIHRoaXMubmFtZSgpICsgXCInXCI7XG4gICAgICAgIGlmICghdGhpcy5fZGVmaW5pdGlvbi5zZWxmKVxuICAgICAgICAgICAgcmV0dXJuIFwiU3RhdGUgJ1wiICsgdGhpcy5uYW1lKCkgKyBcIicgaGFzIGFuIGludmFsaWQgZGVmaW5pdGlvblwiO1xuICAgIH07XG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCInXCIgKyB0aGlzLm5hbWUoKSArIFwiJ1wiICsgc3RyaW5naWZ5KHRoaXMucGFyYW1zKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyBUYXJnZXRTdGF0ZSB3aGljaCB0YXJnZXRzIGEgZGlmZmVyZW50IHN0YXRlLlxuICAgICAqIFRoZSBuZXcgVGFyZ2V0U3RhdGUgaGFzIHRoZSBzYW1lIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHRyYW5zaXRpb24gb3B0aW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZSBUaGUgbmV3IHN0YXRlIHRoYXQgc2hvdWxkIGJlIHRhcmdldGVkXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldFN0YXRlKHRoaXMuX3N0YXRlUmVnaXN0cnksIHN0YXRlLCB0aGlzLl9wYXJhbXMsIHRoaXMuX29wdGlvbnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyBUYXJnZXRTdGF0ZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyB0aGUgbmV3IHBhcmFtZXRlciB2YWx1ZXMgdG8gdXNlXG4gICAgICogQHBhcmFtIHJlcGxhY2UgV2hlbiBmYWxzZSAoZGVmYXVsdCkgdGhlIG5ldyBwYXJhbWV0ZXIgdmFsdWVzIHdpbGwgYmUgbWVyZ2VkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWVzLlxuICAgICAqICAgICAgICAgICAgICAgIFdoZW4gdHJ1ZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2YWx1ZXMuXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhQYXJhbXMgPSBmdW5jdGlvbiAocGFyYW1zLCByZXBsYWNlKSB7XG4gICAgICAgIGlmIChyZXBsYWNlID09PSB2b2lkIDApIHsgcmVwbGFjZSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBuZXdQYXJhbXMgPSByZXBsYWNlID8gcGFyYW1zIDogZXh0ZW5kKHt9LCB0aGlzLl9wYXJhbXMsIHBhcmFtcyk7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgbmV3UGFyYW1zLCB0aGlzLl9vcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoaXMgVGFyZ2V0U3RhdGUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgVHJhbnNpdGlvbiBPcHRpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG5ldyBvcHRpb25zIHRvIHVzZVxuICAgICAqIEBwYXJhbSByZXBsYWNlIFdoZW4gZmFsc2UgKGRlZmF1bHQpIHRoZSBuZXcgb3B0aW9ucyB3aWxsIGJlIG1lcmdlZCB3aXRoIHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAgICogICAgICAgICAgICAgICAgV2hlbiB0cnVlIHRoZSBvcHRpb25zIHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IG9wdGlvbnMuXG4gICAgICovXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLndpdGhPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMsIHJlcGxhY2UpIHtcbiAgICAgICAgaWYgKHJlcGxhY2UgPT09IHZvaWQgMCkgeyByZXBsYWNlID0gZmFsc2U7IH1cbiAgICAgICAgdmFyIG5ld09wdHMgPSByZXBsYWNlID8gb3B0aW9ucyA6IGV4dGVuZCh7fSwgdGhpcy5fb3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0U3RhdGUodGhpcy5fc3RhdGVSZWdpc3RyeSwgdGhpcy5faWRlbnRpZmllciwgdGhpcy5fcGFyYW1zLCBuZXdPcHRzKTtcbiAgICB9O1xuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIG9iamVjdCBoYXMgYSBzdGF0ZSBwcm9wZXJ0eSB0aGF0IG1pZ2h0IGJlIGEgc3RhdGUgb3Igc3RhdGUgbmFtZSAqL1xuICAgIFRhcmdldFN0YXRlLmlzRGVmID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIG9iai5zdGF0ZSAmJiAoaXNTdHJpbmcob2JqLnN0YXRlKSB8fCBpc1N0cmluZyhvYmouc3RhdGUubmFtZSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFRhcmdldFN0YXRlO1xufSgpKTtcblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xudmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgIGN1cnJlbnQ6IG5vb3AsXG4gICAgdHJhbnNpdGlvbjogbnVsbCxcbiAgICB0cmFjZURhdGE6IHt9LFxuICAgIGJpbmQ6IG51bGwsXG59O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBUcmFuc2l0aW9uSG9vayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUcmFuc2l0aW9uSG9vayh0cmFuc2l0aW9uLCBzdGF0ZUNvbnRleHQsIHJlZ2lzdGVyZWRIb29rLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IHRyYW5zaXRpb247XG4gICAgICAgIHRoaXMuc3RhdGVDb250ZXh0ID0gc3RhdGVDb250ZXh0O1xuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRIb29rID0gcmVnaXN0ZXJlZEhvb2s7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuaXNTdXBlcnNlZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnR5cGUuaG9va1BoYXNlID09PSBleHBvcnRzLlRyYW5zaXRpb25Ib29rUGhhc2UuUlVOICYmICFfdGhpcy5vcHRpb25zLnRyYW5zaXRpb24uaXNBY3RpdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpO1xuICAgICAgICB0aGlzLnR5cGUgPSByZWdpc3RlcmVkSG9vay5ldmVudFR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYWlucyB0b2dldGhlciBhbiBhcnJheSBvZiBUcmFuc2l0aW9uSG9va3MuXG4gICAgICpcbiAgICAgKiBHaXZlbiBhIGxpc3Qgb2YgW1tUcmFuc2l0aW9uSG9va11dIG9iamVjdHMsIGNoYWlucyB0aGVtIHRvZ2V0aGVyLlxuICAgICAqIEVhY2ggaG9vayBpcyBpbnZva2VkIGFmdGVyIHRoZSBwcmV2aW91cyBvbmUgY29tcGxldGVzLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIGhvb2tzOiBUcmFuc2l0aW9uSG9va1tdID0gZ2V0SG9va3MoKTtcbiAgICAgKiBsZXQgcHJvbWlzZTogUHJvbWlzZTxhbnk+ID0gVHJhbnNpdGlvbkhvb2suY2hhaW4oaG9va3MpO1xuICAgICAqXG4gICAgICogcHJvbWlzZS50aGVuKGhhbmRsZVN1Y2Nlc3MsIGhhbmRsZUVycm9yKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBob29rcyB0aGUgbGlzdCBvZiBob29rcyB0byBjaGFpbiB0b2dldGhlclxuICAgICAqIEBwYXJhbSB3YWl0Rm9yIGlmIHByb3ZpZGVkLCB0aGUgY2hhaW4gaXMgYC50aGVuKClgJ2VkIG9mZiB0aGlzIHByb21pc2VcbiAgICAgKiBAcmV0dXJucyBhIGBQcm9taXNlYCBmb3Igc2VxdWVudGlhbGx5IGludm9raW5nIHRoZSBob29rcyAoaW4gb3JkZXIpXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2suY2hhaW4gPSBmdW5jdGlvbiAoaG9va3MsIHdhaXRGb3IpIHtcbiAgICAgICAgLy8gQ2hhaW4gdGhlIG5leHQgaG9vayBvZmYgdGhlIHByZXZpb3VzXG4gICAgICAgIHZhciBjcmVhdGVIb29rQ2hhaW5SID0gZnVuY3Rpb24gKHByZXYsIG5leHRIb29rKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJldi50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5leHRIb29rLmludm9rZUhvb2soKTsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBob29rcy5yZWR1Y2UoY3JlYXRlSG9va0NoYWluUiwgd2FpdEZvciB8fCBzZXJ2aWNlcy4kcS53aGVuKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW52b2tlcyBhbGwgdGhlIHByb3ZpZGVkIFRyYW5zaXRpb25Ib29rcywgaW4gb3JkZXIuXG4gICAgICogRWFjaCBob29rJ3MgcmV0dXJuIHZhbHVlIGlzIGNoZWNrZWQuXG4gICAgICogSWYgYW55IGhvb2sgcmV0dXJucyBhIHByb21pc2UsIHRoZW4gdGhlIHJlc3Qgb2YgdGhlIGhvb2tzIGFyZSBjaGFpbmVkIG9mZiB0aGF0IHByb21pc2UsIGFuZCB0aGUgcHJvbWlzZSBpcyByZXR1cm5lZC5cbiAgICAgKiBJZiBubyBob29rIHJldHVybnMgYSBwcm9taXNlLCB0aGVuIGFsbCBob29rcyBhcmUgcHJvY2Vzc2VkIHN5bmNocm9ub3VzbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaG9va3MgdGhlIGxpc3Qgb2YgVHJhbnNpdGlvbkhvb2tzIHRvIGludm9rZVxuICAgICAqIEBwYXJhbSBkb25lQ2FsbGJhY2sgYSBjYWxsYmFjayB0aGF0IGlzIGludm9rZWQgYWZ0ZXIgYWxsIHRoZSBob29rcyBoYXZlIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGFzeW5jIHJlc3VsdCwgb3IgdGhlIHJlc3VsdCBvZiB0aGUgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyA9IGZ1bmN0aW9uIChob29rcywgZG9uZUNhbGxiYWNrKSB7XG4gICAgICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGhvb2tzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgIHZhciBob29rUmVzdWx0ID0gaG9va3NbaWR4XS5pbnZva2VIb29rKCk7XG4gICAgICAgICAgICBpZiAoaXNQcm9taXNlKGhvb2tSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbWFpbmluZ0hvb2tzID0gaG9va3Muc2xpY2UoaWR4ICsgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRyYW5zaXRpb25Ib29rLmNoYWluKHJlbWFpbmluZ0hvb2tzLCBob29rUmVzdWx0KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihkb25lQ2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb25lQ2FsbGJhY2soKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJ1biBhbGwgVHJhbnNpdGlvbkhvb2tzLCBpZ25vcmluZyB0aGVpciByZXR1cm4gdmFsdWUuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2sucnVuQWxsSG9va3MgPSBmdW5jdGlvbiAoaG9va3MpIHtcbiAgICAgICAgaG9va3MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykgeyByZXR1cm4gaG9vay5pbnZva2VIb29rKCk7IH0pO1xuICAgIH07XG4gICAgVHJhbnNpdGlvbkhvb2sucHJvdG90eXBlLmxvZ0Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLnRyYW5zaXRpb24ucm91dGVyLnN0YXRlU2VydmljZS5kZWZhdWx0RXJyb3JIYW5kbGVyKCkoZXJyKTtcbiAgICB9O1xuICAgIFRyYW5zaXRpb25Ib29rLnByb3RvdHlwZS5pbnZva2VIb29rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgaG9vayA9IHRoaXMucmVnaXN0ZXJlZEhvb2s7XG4gICAgICAgIGlmIChob29rLl9kZXJlZ2lzdGVyZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBub3RDdXJyZW50ID0gdGhpcy5nZXROb3RDdXJyZW50UmVqZWN0aW9uKCk7XG4gICAgICAgIGlmIChub3RDdXJyZW50KVxuICAgICAgICAgICAgcmV0dXJuIG5vdEN1cnJlbnQ7XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICB0cmFjZS50cmFjZUhvb2tJbnZvY2F0aW9uKHRoaXMsIHRoaXMudHJhbnNpdGlvbiwgb3B0aW9ucyk7XG4gICAgICAgIHZhciBpbnZva2VDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBob29rLmNhbGxiYWNrLmNhbGwob3B0aW9ucy5iaW5kLCBfdGhpcy50cmFuc2l0aW9uLCBfdGhpcy5zdGF0ZUNvbnRleHQpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgbm9ybWFsaXplRXJyID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5ub3JtYWxpemUoZXJyKS50b1Byb21pc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGhhbmRsZUVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIGhvb2suZXZlbnRUeXBlLmdldEVycm9ySGFuZGxlcihfdGhpcykoZXJyKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGhhbmRsZVJlc3VsdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiBob29rLmV2ZW50VHlwZS5nZXRSZXN1bHRIYW5kbGVyKF90aGlzKShyZXN1bHQpO1xuICAgICAgICB9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGludm9rZUNhbGxiYWNrKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMudHlwZS5zeW5jaHJvbm91cyAmJiBpc1Byb21pc2UocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQuY2F0Y2gobm9ybWFsaXplRXJyKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihoYW5kbGVSZXN1bHQsIGhhbmRsZUVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyBJZiBjYWxsYmFjayB0aHJvd3MgKHN5bmNocm9ub3VzbHkpXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlRXJyb3IoUmVqZWN0aW9uLm5vcm1hbGl6ZShlcnIpKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChob29rLmludm9rZUxpbWl0ICYmICsraG9vay5pbnZva2VDb3VudCA+PSBob29rLmludm9rZUxpbWl0KSB7XG4gICAgICAgICAgICAgICAgaG9vay5kZXJlZ2lzdGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGhhbmRsZXMgdGhlIHJldHVybiB2YWx1ZSBvZiBhIFRyYW5zaXRpb24gSG9vay5cbiAgICAgKlxuICAgICAqIEEgaG9vayBjYW4gcmV0dXJuIGZhbHNlIChjYW5jZWwpLCBhIFRhcmdldFN0YXRlIChyZWRpcmVjdCksXG4gICAgICogb3IgYSBwcm9taXNlICh3aGljaCBtYXkgbGF0ZXIgcmVzb2x2ZSB0byBmYWxzZSBvciBhIHJlZGlyZWN0KVxuICAgICAqXG4gICAgICogVGhpcyBhbHNvIGhhbmRsZXMgXCJ0cmFuc2l0aW9uIHN1cGVyc2VkZWRcIiAtLSB3aGVuIGEgbmV3IHRyYW5zaXRpb25cbiAgICAgKiB3YXMgc3RhcnRlZCB3aGlsZSB0aGUgaG9vayB3YXMgc3RpbGwgcnVubmluZ1xuICAgICAqL1xuICAgIFRyYW5zaXRpb25Ib29rLnByb3RvdHlwZS5oYW5kbGVIb29rUmVzdWx0ID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgbm90Q3VycmVudCA9IHRoaXMuZ2V0Tm90Q3VycmVudFJlamVjdGlvbigpO1xuICAgICAgICBpZiAobm90Q3VycmVudClcbiAgICAgICAgICAgIHJldHVybiBub3RDdXJyZW50O1xuICAgICAgICAvLyBIb29rIHJldHVybmVkIGEgcHJvbWlzZVxuICAgICAgICBpZiAoaXNQcm9taXNlKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBwcm9taXNlLCB0aGVuIHJlcHJvY2VzcyB3aXRoIHRoZSByZXN1bHRpbmcgdmFsdWVcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbihmdW5jdGlvbiAodmFsJCQxKSB7IHJldHVybiBfdGhpcy5oYW5kbGVIb29rUmVzdWx0KHZhbCQkMSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNlLnRyYWNlSG9va1Jlc3VsdChyZXN1bHQsIHRoaXMudHJhbnNpdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgLy8gSG9vayByZXR1cm5lZCBmYWxzZVxuICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgLy8gQWJvcnQgdGhpcyBUcmFuc2l0aW9uXG4gICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLmFib3J0ZWQoJ0hvb2sgYWJvcnRlZCB0cmFuc2l0aW9uJykudG9Qcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzVGFyZ2V0U3RhdGUgPSBpcyhUYXJnZXRTdGF0ZSk7XG4gICAgICAgIC8vIGhvb2sgcmV0dXJuZWQgYSBUYXJnZXRTdGF0ZVxuICAgICAgICBpZiAoaXNUYXJnZXRTdGF0ZShyZXN1bHQpKSB7XG4gICAgICAgICAgICAvLyBIYWx0IHRoZSBjdXJyZW50IFRyYW5zaXRpb24gYW5kIHJlZGlyZWN0IChhIG5ldyBUcmFuc2l0aW9uKSB0byB0aGUgVGFyZ2V0U3RhdGUuXG4gICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLnJlZGlyZWN0ZWQocmVzdWx0KS50b1Byb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgUmVqZWN0aW9uIHByb21pc2UgaWYgdGhlIHRyYW5zaXRpb24gaXMgbm8gbG9uZ2VyIGN1cnJlbnQgZHVlXG4gICAgICogdG8gYSBzdG9wcGVkIHJvdXRlciAoZGlzcG9zZWQpLCBvciBhIG5ldyB0cmFuc2l0aW9uIGhhcyBzdGFydGVkIGFuZCBzdXBlcnNlZGVkIHRoaXMgb25lLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb25Ib29rLnByb3RvdHlwZS5nZXROb3RDdXJyZW50UmVqZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcm91dGVyID0gdGhpcy50cmFuc2l0aW9uLnJvdXRlcjtcbiAgICAgICAgLy8gVGhlIHJvdXRlciBpcyBzdG9wcGVkXG4gICAgICAgIGlmIChyb3V0ZXIuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLmFib3J0ZWQoXCJVSVJvdXRlciBpbnN0YW5jZSAjXCIgKyByb3V0ZXIuJGlkICsgXCIgaGFzIGJlZW4gc3RvcHBlZCAoZGlzcG9zZWQpXCIpLnRvUHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb24uX2Fib3J0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uYWJvcnRlZCgpLnRvUHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoaXMgdHJhbnNpdGlvbiBpcyBubyBsb25nZXIgY3VycmVudC5cbiAgICAgICAgLy8gQW5vdGhlciB0cmFuc2l0aW9uIHN0YXJ0ZWQgd2hpbGUgdGhpcyBob29rIHdhcyBzdGlsbCBydW5uaW5nLlxuICAgICAgICBpZiAodGhpcy5pc1N1cGVyc2VkZWQoKSkge1xuICAgICAgICAgICAgLy8gQWJvcnQgdGhpcyB0cmFuc2l0aW9uXG4gICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLnN1cGVyc2VkZWQodGhpcy5vcHRpb25zLmN1cnJlbnQoKSkudG9Qcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFRyYW5zaXRpb25Ib29rLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgb3B0aW9ucyA9IF9hLm9wdGlvbnMsIHJlZ2lzdGVyZWRIb29rID0gX2EucmVnaXN0ZXJlZEhvb2s7XG4gICAgICAgIHZhciBldmVudCA9IHBhcnNlKCd0cmFjZURhdGEuaG9va1R5cGUnKShvcHRpb25zKSB8fCAnaW50ZXJuYWwnLCBjb250ZXh0ID0gcGFyc2UoJ3RyYWNlRGF0YS5jb250ZXh0LnN0YXRlLm5hbWUnKShvcHRpb25zKSB8fCBwYXJzZSgndHJhY2VEYXRhLmNvbnRleHQnKShvcHRpb25zKSB8fCAndW5rbm93bicsIG5hbWUgPSBmblRvU3RyaW5nKHJlZ2lzdGVyZWRIb29rLmNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIGV2ZW50ICsgXCIgY29udGV4dDogXCIgKyBjb250ZXh0ICsgXCIsIFwiICsgbWF4TGVuZ3RoKDIwMCwgbmFtZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGVzZSBHZXRSZXN1bHRIYW5kbGVyKHMpIGFyZSB1c2VkIGJ5IFtbaW52b2tlSG9va11dIGJlbG93XG4gICAgICogRWFjaCBIb29rVHlwZSBjaG9vc2VzIGEgR2V0UmVzdWx0SGFuZGxlciAoU2VlOiBbW1RyYW5zaXRpb25TZXJ2aWNlLl9kZWZpbmVDb3JlRXZlbnRzXV0pXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2suSEFORExFX1JFU1VMVCA9IGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBob29rLmhhbmRsZUhvb2tSZXN1bHQocmVzdWx0KTtcbiAgICB9OyB9O1xuICAgIC8qKlxuICAgICAqIElmIHRoZSByZXN1bHQgaXMgYSBwcm9taXNlIHJlamVjdGlvbiwgbG9nIGl0LlxuICAgICAqIE90aGVyd2lzZSwgaWdub3JlIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2suTE9HX1JFSkVDVEVEX1JFU1VMVCA9IGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIHJlc3VsdC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gaG9vay5sb2dFcnJvcihSZWplY3Rpb24ubm9ybWFsaXplKGVycikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9OyB9O1xuICAgIC8qKlxuICAgICAqIFRoZXNlIEdldEVycm9ySGFuZGxlcihzKSBhcmUgdXNlZCBieSBbW2ludm9rZUhvb2tdXSBiZWxvd1xuICAgICAqIEVhY2ggSG9va1R5cGUgY2hvb3NlcyBhIEdldEVycm9ySGFuZGxlciAoU2VlOiBbW1RyYW5zaXRpb25TZXJ2aWNlLl9kZWZpbmVDb3JlRXZlbnRzXV0pXG4gICAgICovXG4gICAgVHJhbnNpdGlvbkhvb2suTE9HX0VSUk9SID0gZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICByZXR1cm4gaG9vay5sb2dFcnJvcihlcnJvcik7XG4gICAgfTsgfTtcbiAgICBUcmFuc2l0aW9uSG9vay5SRUpFQ1RfRVJST1IgPSBmdW5jdGlvbiAoaG9vaykgeyByZXR1cm4gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBzaWxlbnRSZWplY3Rpb24oZXJyb3IpO1xuICAgIH07IH07XG4gICAgVHJhbnNpdGlvbkhvb2suVEhST1dfRVJST1IgPSBmdW5jdGlvbiAoaG9vaykgeyByZXR1cm4gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH07IH07XG4gICAgcmV0dXJuIFRyYW5zaXRpb25Ib29rO1xufSgpKTtcblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB0cmFuc2l0aW9uXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGdpdmVuIHN0YXRlIG1hdGNoZXMgdGhlIG1hdGNoQ3JpdGVyaWFcbiAqXG4gKiBAaGlkZGVuXG4gKlxuICogQHBhcmFtIHN0YXRlIGEgU3RhdGUgT2JqZWN0IHRvIHRlc3QgYWdhaW5zdFxuICogQHBhcmFtIGNyaXRlcmlvblxuICogLSBJZiBhIHN0cmluZywgbWF0Y2hTdGF0ZSB1c2VzIHRoZSBzdHJpbmcgYXMgYSBnbG9iLW1hdGNoZXIgYWdhaW5zdCB0aGUgc3RhdGUgbmFtZVxuICogLSBJZiBhbiBhcnJheSAob2Ygc3RyaW5ncyksIG1hdGNoU3RhdGUgdXNlcyBlYWNoIHN0cmluZyBpbiB0aGUgYXJyYXkgYXMgYSBnbG9iLW1hdGNoZXJzIGFnYWluc3QgdGhlIHN0YXRlIG5hbWVcbiAqICAgYW5kIHJldHVybnMgYSBwb3NpdGl2ZSBtYXRjaCBpZiBhbnkgb2YgdGhlIGdsb2JzIG1hdGNoLlxuICogLSBJZiBhIGZ1bmN0aW9uLCBtYXRjaFN0YXRlIGNhbGxzIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSBzdGF0ZSBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBmdW5jdGlvbidzIHJlc3VsdCBpcyB0cnV0aHkuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gbWF0Y2hTdGF0ZShzdGF0ZSwgY3JpdGVyaW9uKSB7XG4gICAgdmFyIHRvTWF0Y2ggPSBpc1N0cmluZyhjcml0ZXJpb24pID8gW2NyaXRlcmlvbl0gOiBjcml0ZXJpb247XG4gICAgZnVuY3Rpb24gbWF0Y2hHbG9icyhfc3RhdGUpIHtcbiAgICAgICAgdmFyIGdsb2JTdHJpbmdzID0gdG9NYXRjaDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnbG9iU3RyaW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGdsb2IgPSBuZXcgR2xvYihnbG9iU3RyaW5nc1tpXSk7XG4gICAgICAgICAgICBpZiAoKGdsb2IgJiYgZ2xvYi5tYXRjaGVzKF9zdGF0ZS5uYW1lKSkgfHwgKCFnbG9iICYmIGdsb2JTdHJpbmdzW2ldID09PSBfc3RhdGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBtYXRjaEZuID0gKGlzRnVuY3Rpb24odG9NYXRjaCkgPyB0b01hdGNoIDogbWF0Y2hHbG9icyk7XG4gICAgcmV0dXJuICEhbWF0Y2hGbihzdGF0ZSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICogVGhlIHJlZ2lzdHJhdGlvbiBkYXRhIGZvciBhIHJlZ2lzdGVyZWQgdHJhbnNpdGlvbiBob29rXG4gKi9cbnZhciBSZWdpc3RlcmVkSG9vayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZWdpc3RlcmVkSG9vayh0cmFuU3ZjLCBldmVudFR5cGUsIGNhbGxiYWNrLCBtYXRjaENyaXRlcmlhLCByZW1vdmVIb29rRnJvbVJlZ2lzdHJ5LCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHRoaXMudHJhblN2YyA9IHRyYW5TdmM7XG4gICAgICAgIHRoaXMuZXZlbnRUeXBlID0gZXZlbnRUeXBlO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMubWF0Y2hDcml0ZXJpYSA9IG1hdGNoQ3JpdGVyaWE7XG4gICAgICAgIHRoaXMucmVtb3ZlSG9va0Zyb21SZWdpc3RyeSA9IHJlbW92ZUhvb2tGcm9tUmVnaXN0cnk7XG4gICAgICAgIHRoaXMuaW52b2tlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLl9kZXJlZ2lzdGVyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IG9wdGlvbnMucHJpb3JpdHkgfHwgMDtcbiAgICAgICAgdGhpcy5iaW5kID0gb3B0aW9ucy5iaW5kIHx8IG51bGw7XG4gICAgICAgIHRoaXMuaW52b2tlTGltaXQgPSBvcHRpb25zLmludm9rZUxpbWl0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBtYXRjaGluZyBbW1BhdGhOb2RlXV1zXG4gICAgICpcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBbW1BhdGhOb2RlXV1zLCBhbmQgYSBbW0hvb2tNYXRjaENyaXRlcmlvbl1dLCByZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmdcbiAgICAgKiB0aGUgW1tQYXRoTm9kZV1dcyB0aGF0IHRoZSBjcml0ZXJpYSBtYXRjaGVzLCBvciBgbnVsbGAgaWYgdGhlcmUgd2VyZSBubyBtYXRjaGluZyBub2Rlcy5cbiAgICAgKlxuICAgICAqIFJldHVybmluZyBgbnVsbGAgaXMgc2lnbmlmaWNhbnQgdG8gZGlzdGluZ3Vpc2ggYmV0d2VlbiB0aGUgZGVmYXVsdFxuICAgICAqIFwibWF0Y2gtYWxsIGNyaXRlcmlvbiB2YWx1ZVwiIG9mIGB0cnVlYCBjb21wYXJlZCB0byBhIGAoKSA9PiB0cnVlYCBmdW5jdGlvbixcbiAgICAgKiB3aGVuIHRoZSBub2RlcyBpcyBhbiBlbXB0eSBhcnJheS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXNlZnVsIHRvIGFsbG93IGEgdHJhbnNpdGlvbiBtYXRjaCBjcml0ZXJpYSBvZiBgZW50ZXJpbmc6IHRydWVgXG4gICAgICogdG8gc3RpbGwgbWF0Y2ggYSB0cmFuc2l0aW9uLCBldmVuIHdoZW4gYGVudGVyaW5nID09PSBbXWAuICBDb250cmFzdCB0aGF0XG4gICAgICogd2l0aCBgZW50ZXJpbmc6IChzdGF0ZSkgPT4gdHJ1ZWAgd2hpY2ggb25seSBtYXRjaGVzIHdoZW4gYSBzdGF0ZSBpcyBhY3R1YWxseVxuICAgICAqIGJlaW5nIGVudGVyZWQuXG4gICAgICovXG4gICAgUmVnaXN0ZXJlZEhvb2sucHJvdG90eXBlLl9tYXRjaGluZ05vZGVzID0gZnVuY3Rpb24gKG5vZGVzLCBjcml0ZXJpb24pIHtcbiAgICAgICAgaWYgKGNyaXRlcmlvbiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHJldHVybiBub2RlcztcbiAgICAgICAgdmFyIG1hdGNoaW5nID0gbm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBtYXRjaFN0YXRlKG5vZGUuc3RhdGUsIGNyaXRlcmlvbik7IH0pO1xuICAgICAgICByZXR1cm4gbWF0Y2hpbmcubGVuZ3RoID8gbWF0Y2hpbmcgOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgZGVmYXVsdCBtYXRjaCBjcml0ZXJpYSAoYWxsIGB0cnVlYClcbiAgICAgKlxuICAgICAqIFJldHVybnMgYW4gb2JqZWN0IHdoaWNoIGhhcyBhbGwgdGhlIGNyaXRlcmlhIG1hdGNoIHBhdGhzIGFzIGtleXMgYW5kIGB0cnVlYCBhcyB2YWx1ZXMsIGkuZS46XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIHRvOiB0cnVlLFxuICAgICAqICAgZnJvbTogdHJ1ZSxcbiAgICAgKiAgIGVudGVyaW5nOiB0cnVlLFxuICAgICAqICAgZXhpdGluZzogdHJ1ZSxcbiAgICAgKiAgIHJldGFpbmVkOiB0cnVlLFxuICAgICAqIH1cbiAgICAgKi9cbiAgICBSZWdpc3RlcmVkSG9vay5wcm90b3R5cGUuX2dldERlZmF1bHRNYXRjaENyaXRlcmlhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbWFwT2JqKHRoaXMudHJhblN2Yy5fcGx1Z2luYXBpLl9nZXRQYXRoVHlwZXMoKSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIG1hdGNoaW5nIG5vZGVzIGFzIFtbSU1hdGNoaW5nTm9kZXNdXVxuICAgICAqXG4gICAgICogQ3JlYXRlIGEgSU1hdGNoaW5nTm9kZXMgb2JqZWN0IGZyb20gdGhlIFRyYW5zaXRpb25Ib29rVHlwZXMgdGhhdCBpcyByb3VnaGx5IGVxdWl2YWxlbnQgdG86XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGxldCBtYXRjaGVzOiBJTWF0Y2hpbmdOb2RlcyA9IHtcbiAgICAgKiAgIHRvOiAgICAgICBfbWF0Y2hpbmdOb2RlcyhbdGFpbCh0cmVlQ2hhbmdlcy50byldLCAgIG1jLnRvKSxcbiAgICAgKiAgIGZyb206ICAgICBfbWF0Y2hpbmdOb2RlcyhbdGFpbCh0cmVlQ2hhbmdlcy5mcm9tKV0sIG1jLmZyb20pLFxuICAgICAqICAgZXhpdGluZzogIF9tYXRjaGluZ05vZGVzKHRyZWVDaGFuZ2VzLmV4aXRpbmcsICAgICAgbWMuZXhpdGluZyksXG4gICAgICogICByZXRhaW5lZDogX21hdGNoaW5nTm9kZXModHJlZUNoYW5nZXMucmV0YWluZWQsICAgICBtYy5yZXRhaW5lZCksXG4gICAgICogICBlbnRlcmluZzogX21hdGNoaW5nTm9kZXModHJlZUNoYW5nZXMuZW50ZXJpbmcsICAgICBtYy5lbnRlcmluZyksXG4gICAgICogfTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBSZWdpc3RlcmVkSG9vay5wcm90b3R5cGUuX2dldE1hdGNoaW5nTm9kZXMgPSBmdW5jdGlvbiAodHJlZUNoYW5nZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNyaXRlcmlhID0gZXh0ZW5kKHRoaXMuX2dldERlZmF1bHRNYXRjaENyaXRlcmlhKCksIHRoaXMubWF0Y2hDcml0ZXJpYSk7XG4gICAgICAgIHZhciBwYXRocyA9IHZhbHVlcyh0aGlzLnRyYW5TdmMuX3BsdWdpbmFwaS5fZ2V0UGF0aFR5cGVzKCkpO1xuICAgICAgICByZXR1cm4gcGF0aHMucmVkdWNlKGZ1bmN0aW9uIChtbiwgcGF0aHR5cGUpIHtcbiAgICAgICAgICAgIC8vIFNUQVRFIHNjb3BlIGNyaXRlcmlhIG1hdGNoZXMgYWdhaW5zdCBldmVyeSBub2RlIGluIHRoZSBwYXRoLlxuICAgICAgICAgICAgLy8gVFJBTlNJVElPTiBzY29wZSBjcml0ZXJpYSBtYXRjaGVzIGFnYWluc3Qgb25seSB0aGUgbGFzdCBub2RlIGluIHRoZSBwYXRoXG4gICAgICAgICAgICB2YXIgaXNTdGF0ZUhvb2sgPSBwYXRodHlwZS5zY29wZSA9PT0gZXhwb3J0cy5UcmFuc2l0aW9uSG9va1Njb3BlLlNUQVRFO1xuICAgICAgICAgICAgdmFyIHBhdGggPSB0cmVlQ2hhbmdlc1twYXRodHlwZS5uYW1lXSB8fCBbXTtcbiAgICAgICAgICAgIHZhciBub2RlcyA9IGlzU3RhdGVIb29rID8gcGF0aCA6IFt0YWlsKHBhdGgpXTtcbiAgICAgICAgICAgIG1uW3BhdGh0eXBlLm5hbWVdID0gX3RoaXMuX21hdGNoaW5nTm9kZXMobm9kZXMsIGNyaXRlcmlhW3BhdGh0eXBlLm5hbWVdKTtcbiAgICAgICAgICAgIHJldHVybiBtbjtcbiAgICAgICAgfSwge30pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIGhvb2sncyBbW21hdGNoQ3JpdGVyaWFdXSBtYXRjaCB0aGUgZ2l2ZW4gW1tUcmVlQ2hhbmdlc11dXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbiBJTWF0Y2hpbmdOb2RlcyBvYmplY3QsIG9yIG51bGwuIElmIGFuIElNYXRjaGluZ05vZGVzIG9iamVjdCBpcyByZXR1cm5lZCwgaXRzIHZhbHVlc1xuICAgICAqIGFyZSB0aGUgbWF0Y2hpbmcgW1tQYXRoTm9kZV1dcyBmb3IgZWFjaCBbW0hvb2tNYXRjaENyaXRlcmlvbl1dICh0bywgZnJvbSwgZXhpdGluZywgcmV0YWluZWQsIGVudGVyaW5nKVxuICAgICAqL1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKHRyZWVDaGFuZ2VzKSB7XG4gICAgICAgIHZhciBtYXRjaGVzID0gdGhpcy5fZ2V0TWF0Y2hpbmdOb2Rlcyh0cmVlQ2hhbmdlcyk7XG4gICAgICAgIC8vIENoZWNrIGlmIGFsbCB0aGUgY3JpdGVyaWEgbWF0Y2hlZCB0aGUgVHJlZUNoYW5nZXMgb2JqZWN0XG4gICAgICAgIHZhciBhbGxNYXRjaGVkID0gdmFsdWVzKG1hdGNoZXMpLmV2ZXJ5KGlkZW50aXR5KTtcbiAgICAgICAgcmV0dXJuIGFsbE1hdGNoZWQgPyBtYXRjaGVzIDogbnVsbDtcbiAgICB9O1xuICAgIFJlZ2lzdGVyZWRIb29rLnByb3RvdHlwZS5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbW92ZUhvb2tGcm9tUmVnaXN0cnkodGhpcyk7XG4gICAgICAgIHRoaXMuX2RlcmVnaXN0ZXJlZCA9IHRydWU7XG4gICAgfTtcbiAgICByZXR1cm4gUmVnaXN0ZXJlZEhvb2s7XG59KCkpO1xuLyoqIEBoaWRkZW4gUmV0dXJuIGEgcmVnaXN0cmF0aW9uIGZ1bmN0aW9uIG9mIHRoZSByZXF1ZXN0ZWQgdHlwZS4gKi9cbmZ1bmN0aW9uIG1ha2VFdmVudChyZWdpc3RyeSwgdHJhbnNpdGlvblNlcnZpY2UsIGV2ZW50VHlwZSkge1xuICAgIC8vIENyZWF0ZSB0aGUgb2JqZWN0IHdoaWNoIGhvbGRzIHRoZSByZWdpc3RlcmVkIHRyYW5zaXRpb24gaG9va3MuXG4gICAgdmFyIF9yZWdpc3RlcmVkSG9va3MgPSByZWdpc3RyeS5fcmVnaXN0ZXJlZEhvb2tzID0gKHJlZ2lzdHJ5Ll9yZWdpc3RlcmVkSG9va3MgfHwge30pO1xuICAgIHZhciBob29rcyA9IF9yZWdpc3RlcmVkSG9va3NbZXZlbnRUeXBlLm5hbWVdID0gW107XG4gICAgdmFyIHJlbW92ZUhvb2tGbiA9IHJlbW92ZUZyb20oaG9va3MpO1xuICAgIC8vIENyZWF0ZSBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbiBvbiB0aGUgSUhvb2tSZWdpc3RyeSBmb3IgdGhlIGV2ZW50XG4gICAgcmVnaXN0cnlbZXZlbnRUeXBlLm5hbWVdID0gaG9va1JlZ2lzdHJhdGlvbkZuO1xuICAgIGZ1bmN0aW9uIGhvb2tSZWdpc3RyYXRpb25GbihtYXRjaE9iamVjdCwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdmFyIHJlZ2lzdGVyZWRIb29rID0gbmV3IFJlZ2lzdGVyZWRIb29rKHRyYW5zaXRpb25TZXJ2aWNlLCBldmVudFR5cGUsIGNhbGxiYWNrLCBtYXRjaE9iamVjdCwgcmVtb3ZlSG9va0ZuLCBvcHRpb25zKTtcbiAgICAgICAgaG9va3MucHVzaChyZWdpc3RlcmVkSG9vayk7XG4gICAgICAgIHJldHVybiByZWdpc3RlcmVkSG9vay5kZXJlZ2lzdGVyLmJpbmQocmVnaXN0ZXJlZEhvb2spO1xuICAgIH1cbiAgICByZXR1cm4gaG9va1JlZ2lzdHJhdGlvbkZuO1xufVxuXG4vKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbi8qKlxuICogVGhpcyBjbGFzcyByZXR1cm5zIGFwcGxpY2FibGUgVHJhbnNpdGlvbkhvb2tzIGZvciBhIHNwZWNpZmljIFRyYW5zaXRpb24gaW5zdGFuY2UuXG4gKlxuICogSG9va3MgKFtbUmVnaXN0ZXJlZEhvb2tdXSkgbWF5IGJlIHJlZ2lzdGVyZWQgZ2xvYmFsbHksIGUuZy4sICR0cmFuc2l0aW9ucy5vbkVudGVyKC4uLiksIG9yIGxvY2FsbHksIGUuZy5cbiAqIG15VHJhbnNpdGlvbi5vbkVudGVyKC4uLikuICBUaGUgSG9va0J1aWxkZXIgZmluZHMgbWF0Y2hpbmcgUmVnaXN0ZXJlZEhvb2tzICh3aGVyZSB0aGUgbWF0Y2ggY3JpdGVyaWEgaXNcbiAqIGRldGVybWluZWQgYnkgdGhlIHR5cGUgb2YgaG9vaylcbiAqXG4gKiBUaGUgSG9va0J1aWxkZXIgYWxzbyBjb252ZXJ0cyBSZWdpc3RlcmVkSG9va3Mgb2JqZWN0cyB0byBUcmFuc2l0aW9uSG9vayBvYmplY3RzLCB3aGljaCBhcmUgdXNlZCB0byBydW4gYSBUcmFuc2l0aW9uLlxuICpcbiAqIFRoZSBIb29rQnVpbGRlciBjb25zdHJ1Y3RvciBpcyBnaXZlbiB0aGUgJHRyYW5zaXRpb25zIHNlcnZpY2UgYW5kIGEgVHJhbnNpdGlvbiBpbnN0YW5jZS4gIFRodXMsIGEgSG9va0J1aWxkZXJcbiAqIGluc3RhbmNlIG1heSBvbmx5IGJlIHVzZWQgZm9yIG9uZSBzcGVjaWZpYyBUcmFuc2l0aW9uIG9iamVjdC4gKHNpZGUgbm90ZTogdGhlIF90cmVlQ2hhbmdlcyBhY2Nlc3NvciBpcyBwcml2YXRlXG4gKiBpbiB0aGUgVHJhbnNpdGlvbiBjbGFzcywgc28gd2UgbXVzdCBhbHNvIHByb3ZpZGUgdGhlIFRyYW5zaXRpb24ncyBfdHJlZUNoYW5nZXMpXG4gKlxuICovXG52YXIgSG9va0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSG9va0J1aWxkZXIodHJhbnNpdGlvbikge1xuICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuICAgIH1cbiAgICBIb29rQnVpbGRlci5wcm90b3R5cGUuYnVpbGRIb29rc0ZvclBoYXNlID0gZnVuY3Rpb24gKHBoYXNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciAkdHJhbnNpdGlvbnMgPSB0aGlzLnRyYW5zaXRpb24ucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlO1xuICAgICAgICByZXR1cm4gJHRyYW5zaXRpb25zLl9wbHVnaW5hcGkuX2dldEV2ZW50cyhwaGFzZSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIF90aGlzLmJ1aWxkSG9va3ModHlwZSk7IH0pXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLmZpbHRlcihpZGVudGl0eSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIG5ld2x5IGJ1aWx0IFRyYW5zaXRpb25Ib29rIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiAtIEZpbmRzIGFsbCBSZWdpc3RlcmVkSG9va3MgcmVnaXN0ZXJlZCBmb3IgdGhlIGdpdmVuIGBob29rVHlwZWAgd2hpY2ggbWF0Y2hlZCB0aGUgdHJhbnNpdGlvbidzIFtbVHJlZUNoYW5nZXNdXS5cbiAgICAgKiAtIEZpbmRzIFtbUGF0aE5vZGVdXSAob3IgYFBhdGhOb2RlW11gKSB0byB1c2UgYXMgdGhlIFRyYW5zaXRpb25Ib29rIGNvbnRleHQocylcbiAgICAgKiAtIEZvciBlYWNoIG9mIHRoZSBbW1BhdGhOb2RlXV1zLCBjcmVhdGVzIGEgVHJhbnNpdGlvbkhvb2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSBob29rVHlwZSB0aGUgdHlwZSBvZiB0aGUgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb24sIGUuZy4sICdvbkVudGVyJywgJ29uRmluaXNoJy5cbiAgICAgKi9cbiAgICBIb29rQnVpbGRlci5wcm90b3R5cGUuYnVpbGRIb29rcyA9IGZ1bmN0aW9uIChob29rVHlwZSkge1xuICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXMudHJhbnNpdGlvbjtcbiAgICAgICAgdmFyIHRyZWVDaGFuZ2VzID0gdHJhbnNpdGlvbi50cmVlQ2hhbmdlcygpO1xuICAgICAgICAvLyBGaW5kIGFsbCB0aGUgbWF0Y2hpbmcgcmVnaXN0ZXJlZCBob29rcyBmb3IgYSBnaXZlbiBob29rIHR5cGVcbiAgICAgICAgdmFyIG1hdGNoaW5nSG9va3MgPSB0aGlzLmdldE1hdGNoaW5nSG9va3MoaG9va1R5cGUsIHRyZWVDaGFuZ2VzKTtcbiAgICAgICAgaWYgKCFtYXRjaGluZ0hvb2tzKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB2YXIgYmFzZUhvb2tPcHRpb25zID0ge1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbixcbiAgICAgICAgICAgIGN1cnJlbnQ6IHRyYW5zaXRpb24ub3B0aW9ucygpLmN1cnJlbnQsXG4gICAgICAgIH07XG4gICAgICAgIHZhciBtYWtlVHJhbnNpdGlvbkhvb2tzID0gZnVuY3Rpb24gKGhvb2spIHtcbiAgICAgICAgICAgIC8vIEZldGNoIHRoZSBOb2RlcyB0aGF0IGNhdXNlZCB0aGlzIGhvb2sgdG8gbWF0Y2guXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IGhvb2subWF0Y2hlcyh0cmVlQ2hhbmdlcyk7XG4gICAgICAgICAgICAvLyBTZWxlY3QgdGhlIFBhdGhOb2RlW10gdGhhdCB3aWxsIGJlIHVzZWQgYXMgVHJhbnNpdGlvbkhvb2sgY29udGV4dCBvYmplY3RzXG4gICAgICAgICAgICB2YXIgbWF0Y2hpbmdOb2RlcyA9IG1hdGNoZXNbaG9va1R5cGUuY3JpdGVyaWFNYXRjaFBhdGgubmFtZV07XG4gICAgICAgICAgICAvLyBSZXR1cm4gYW4gYXJyYXkgb2YgSG9va1R1cGxlc1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nTm9kZXMubWFwKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9vcHRpb25zID0gZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgYmluZDogaG9vay5iaW5kLFxuICAgICAgICAgICAgICAgICAgICB0cmFjZURhdGE6IHsgaG9va1R5cGU6IGhvb2tUeXBlLm5hbWUsIGNvbnRleHQ6IG5vZGUgfSxcbiAgICAgICAgICAgICAgICB9LCBiYXNlSG9va09wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IGhvb2tUeXBlLmNyaXRlcmlhTWF0Y2hQYXRoLnNjb3BlID09PSBleHBvcnRzLlRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUgPyBub2RlLnN0YXRlLnNlbGYgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uSG9vayA9IG5ldyBUcmFuc2l0aW9uSG9vayh0cmFuc2l0aW9uLCBzdGF0ZSwgaG9vaywgX29wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGhvb2s6IGhvb2ssIG5vZGU6IG5vZGUsIHRyYW5zaXRpb25Ib29rOiB0cmFuc2l0aW9uSG9vayB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBtYXRjaGluZ0hvb2tzLm1hcChtYWtlVHJhbnNpdGlvbkhvb2tzKVxuICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgICAgIC5zb3J0KHR1cGxlU29ydChob29rVHlwZS5yZXZlcnNlU29ydCkpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gdHVwbGUudHJhbnNpdGlvbkhvb2s7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRmluZHMgYWxsIFJlZ2lzdGVyZWRIb29rcyBmcm9tOlxuICAgICAqIC0gVGhlIFRyYW5zaXRpb24gb2JqZWN0IGluc3RhbmNlIGhvb2sgcmVnaXN0cnlcbiAgICAgKiAtIFRoZSBUcmFuc2l0aW9uU2VydmljZSAoJHRyYW5zaXRpb25zKSBnbG9iYWwgaG9vayByZWdpc3RyeVxuICAgICAqXG4gICAgICogd2hpY2ggbWF0Y2hlZDpcbiAgICAgKiAtIHRoZSBldmVudFR5cGVcbiAgICAgKiAtIHRoZSBtYXRjaENyaXRlcmlhICh0bywgZnJvbSwgZXhpdGluZywgcmV0YWluZWQsIGVudGVyaW5nKVxuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgbWF0Y2hlZCBbW1JlZ2lzdGVyZWRIb29rXV1zXG4gICAgICovXG4gICAgSG9va0J1aWxkZXIucHJvdG90eXBlLmdldE1hdGNoaW5nSG9va3MgPSBmdW5jdGlvbiAoaG9va1R5cGUsIHRyZWVDaGFuZ2VzKSB7XG4gICAgICAgIHZhciBpc0NyZWF0ZSA9IGhvb2tUeXBlLmhvb2tQaGFzZSA9PT0gZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlLkNSRUFURTtcbiAgICAgICAgLy8gSW5zdGFuY2UgYW5kIEdsb2JhbCBob29rIHJlZ2lzdHJpZXNcbiAgICAgICAgdmFyICR0cmFuc2l0aW9ucyA9IHRoaXMudHJhbnNpdGlvbi5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2U7XG4gICAgICAgIHZhciByZWdpc3RyaWVzID0gaXNDcmVhdGUgPyBbJHRyYW5zaXRpb25zXSA6IFt0aGlzLnRyYW5zaXRpb24sICR0cmFuc2l0aW9uc107XG4gICAgICAgIHJldHVybiByZWdpc3RyaWVzLm1hcChmdW5jdGlvbiAocmVnKSB7IHJldHVybiByZWcuZ2V0SG9va3MoaG9va1R5cGUubmFtZSk7IH0pIC8vIEdldCBuYW1lZCBob29rcyBmcm9tIHJlZ2lzdHJpZXNcbiAgICAgICAgICAgIC5maWx0ZXIoYXNzZXJ0UHJlZGljYXRlKGlzQXJyYXksIFwiYnJva2VuIGV2ZW50IG5hbWVkOiBcIiArIGhvb2tUeXBlLm5hbWUpKSAvLyBTYW5pdHkgY2hlY2tcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pIC8vIFVuLW5lc3QgUmVnaXN0ZXJlZEhvb2tbXVtdIHRvIFJlZ2lzdGVyZWRIb29rW10gYXJyYXlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIGhvb2subWF0Y2hlcyh0cmVlQ2hhbmdlcyk7IH0pOyAvLyBPbmx5IHRob3NlIHNhdGlzZnlpbmcgbWF0Y2hDcml0ZXJpYVxuICAgIH07XG4gICAgcmV0dXJuIEhvb2tCdWlsZGVyO1xufSgpKTtcbi8qKlxuICogQSBmYWN0b3J5IGZvciBhIHNvcnQgZnVuY3Rpb24gZm9yIEhvb2tUdXBsZXMuXG4gKlxuICogVGhlIHNvcnQgZnVuY3Rpb24gZmlyc3QgY29tcGFyZXMgdGhlIFBhdGhOb2RlIGRlcHRoIChob3cgZGVlcCBpbiB0aGUgc3RhdGUgdHJlZSBhIG5vZGUgaXMpLCB0aGVuIGNvbXBhcmVzXG4gKiB0aGUgRXZlbnRIb29rIHByaW9yaXR5LlxuICpcbiAqIEBwYXJhbSByZXZlcnNlRGVwdGhTb3J0IGEgYm9vbGVhbiwgd2hlbiB0cnVlLCByZXZlcnNlcyB0aGUgc29ydCBvcmRlciBmb3IgdGhlIG5vZGUgZGVwdGhcbiAqIEByZXR1cm5zIGEgdHVwbGUgc29ydCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiB0dXBsZVNvcnQocmV2ZXJzZURlcHRoU29ydCkge1xuICAgIGlmIChyZXZlcnNlRGVwdGhTb3J0ID09PSB2b2lkIDApIHsgcmV2ZXJzZURlcHRoU29ydCA9IGZhbHNlOyB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVEZXB0aFRoZW5Qcmlvcml0eShsLCByKSB7XG4gICAgICAgIHZhciBmYWN0b3IgPSByZXZlcnNlRGVwdGhTb3J0ID8gLTEgOiAxO1xuICAgICAgICB2YXIgZGVwdGhEZWx0YSA9IChsLm5vZGUuc3RhdGUucGF0aC5sZW5ndGggLSByLm5vZGUuc3RhdGUucGF0aC5sZW5ndGgpICogZmFjdG9yO1xuICAgICAgICByZXR1cm4gZGVwdGhEZWx0YSAhPT0gMCA/IGRlcHRoRGVsdGEgOiByLmhvb2sucHJpb3JpdHkgLSBsLmhvb2sucHJpb3JpdHk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqL1xuLyoqICovXG4vKipcbiAqIEFuIGludGVybmFsIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0uXG4gKlxuICogQSBbW1BhcmFtVHlwZURlZmluaXRpb25dXSBpcyBhIHBsYWluIGphdmFzY3JpcHQgb2JqZWN0IHVzZWQgdG8gcmVnaXN0ZXIgY3VzdG9tIHBhcmFtZXRlciB0eXBlcy5cbiAqIFdoZW4gYSBwYXJhbSB0eXBlIGRlZmluaXRpb24gaXMgcmVnaXN0ZXJlZCwgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBjcmVhdGVkIGludGVybmFsbHkuXG4gKlxuICogVGhpcyBjbGFzcyBoYXMgbmFpdmUgaW1wbGVtZW50YXRpb25zIGZvciBhbGwgdGhlIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIG1ldGhvZHMuXG4gKlxuICogVXNlZCBieSBbW1VybE1hdGNoZXJdXSB3aGVuIG1hdGNoaW5nIG9yIGZvcm1hdHRpbmcgVVJMcywgb3IgY29tcGFyaW5nIGFuZCB2YWxpZGF0aW5nIHBhcmFtZXRlciB2YWx1ZXMuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIHZhciBwYXJhbVR5cGVEZWYgPSB7XG4gKiAgIGRlY29kZTogZnVuY3Rpb24odmFsKSB7IHJldHVybiBwYXJzZUludCh2YWwsIDEwKTsgfSxcbiAqICAgZW5jb2RlOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbCAmJiB2YWwudG9TdHJpbmcoKTsgfSxcbiAqICAgZXF1YWxzOiBmdW5jdGlvbihhLCBiKSB7IHJldHVybiB0aGlzLmlzKGEpICYmIGEgPT09IGI7IH0sXG4gKiAgIGlzOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIGFuZ3VsYXIuaXNOdW1iZXIodmFsKSAmJiBpc0Zpbml0ZSh2YWwpICYmIHZhbCAlIDEgPT09IDA7IH0sXG4gKiAgIHBhdHRlcm46IC9cXGQrL1xuICogfVxuICpcbiAqIHZhciBwYXJhbVR5cGUgPSBuZXcgUGFyYW1UeXBlKHBhcmFtVHlwZURlZik7XG4gKiBgYGBcbiAqIEBpbnRlcm5hbGFwaVxuICovXG52YXIgUGFyYW1UeXBlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkZWYgIEEgY29uZmlndXJhdGlvbiBvYmplY3Qgd2hpY2ggY29udGFpbnMgdGhlIGN1c3RvbSB0eXBlIGRlZmluaXRpb24uICBUaGUgb2JqZWN0J3NcbiAgICAgKiAgICAgICAgcHJvcGVydGllcyB3aWxsIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG1ldGhvZHMgYW5kL29yIHBhdHRlcm4gaW4gYFBhcmFtVHlwZWAncyBwdWJsaWMgaW50ZXJmYWNlLlxuICAgICAqIEByZXR1cm5zIGEgbmV3IFBhcmFtVHlwZSBvYmplY3RcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQYXJhbVR5cGUoZGVmKSB7XG4gICAgICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSAvLiovO1xuICAgICAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICAgICAgdGhpcy5pbmhlcml0ID0gdHJ1ZTtcbiAgICAgICAgZXh0ZW5kKHRoaXMsIGRlZik7XG4gICAgfVxuICAgIC8vIGNvbnNpZGVyIHRoZXNlIGZvdXIgbWV0aG9kcyB0byBiZSBcImFic3RyYWN0IG1ldGhvZHNcIiB0aGF0IHNob3VsZCBiZSBvdmVycmlkZGVuXG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uICh2YWwsIGtleSkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBQYXJhbVR5cGUucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uICh2YWwsIGtleSkgeyByZXR1cm4gdmFsOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFBhcmFtVHlwZS5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKHZhbCwga2V5KSB7IHJldHVybiB2YWw7IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYSA9PSBiOyB9OyAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lOnRyaXBsZS1lcXVhbHNcbiAgICBQYXJhbVR5cGUucHJvdG90eXBlLiRzdWJQYXR0ZXJuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3ViID0gdGhpcy5wYXR0ZXJuLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBzdWIuc3Vic3RyKDEsIHN1Yi5sZW5ndGggLSAyKTtcbiAgICB9O1xuICAgIFBhcmFtVHlwZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIntQYXJhbVR5cGU6XCIgKyB0aGlzLm5hbWUgKyBcIn1cIjtcbiAgICB9O1xuICAgIC8qKiBHaXZlbiBhbiBlbmNvZGVkIHN0cmluZywgb3IgYSBkZWNvZGVkIG9iamVjdCwgcmV0dXJucyBhIGRlY29kZWQgb2JqZWN0ICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS4kbm9ybWFsaXplID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pcyh2YWwpID8gdmFsIDogdGhpcy5kZWNvZGUodmFsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdyYXBzIGFuIGV4aXN0aW5nIGN1c3RvbSBQYXJhbVR5cGUgYXMgYW4gYXJyYXkgb2YgUGFyYW1UeXBlLCBkZXBlbmRpbmcgb24gJ21vZGUnLlxuICAgICAqIGUuZy46XG4gICAgICogLSB1cmxtYXRjaGVyIHBhdHRlcm4gXCIvcGF0aD97cXVlcnlQYXJhbVtdOmludH1cIlxuICAgICAqIC0gdXJsOiBcIi9wYXRoP3F1ZXJ5UGFyYW09MSZxdWVyeVBhcmFtPTJcbiAgICAgKiAtICRzdGF0ZVBhcmFtcy5xdWVyeVBhcmFtIHdpbGwgYmUgWzEsIDJdXG4gICAgICogaWYgYG1vZGVgIGlzIFwiYXV0b1wiLCB0aGVuXG4gICAgICogLSB1cmw6IFwiL3BhdGg/cXVlcnlQYXJhbT0xIHdpbGwgY3JlYXRlICRzdGF0ZVBhcmFtcy5xdWVyeVBhcmFtOiAxXG4gICAgICogLSB1cmw6IFwiL3BhdGg/cXVlcnlQYXJhbT0xJnF1ZXJ5UGFyYW09MiB3aWxsIGNyZWF0ZSAkc3RhdGVQYXJhbXMucXVlcnlQYXJhbTogWzEsIDJdXG4gICAgICovXG4gICAgUGFyYW1UeXBlLnByb3RvdHlwZS4kYXNBcnJheSA9IGZ1bmN0aW9uIChtb2RlLCBpc1NlYXJjaCkge1xuICAgICAgICBpZiAoIW1vZGUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgaWYgKG1vZGUgPT09ICdhdXRvJyAmJiAhaXNTZWFyY2gpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInYXV0bycgYXJyYXkgbW9kZSBpcyBmb3IgcXVlcnkgcGFyYW1ldGVycyBvbmx5XCIpO1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5VHlwZSh0aGlzLCBtb2RlKTtcbiAgICB9O1xuICAgIHJldHVybiBQYXJhbVR5cGU7XG59KCkpO1xuLyoqXG4gKiBXcmFwcyB1cCBhIGBQYXJhbVR5cGVgIG9iamVjdCB0byBoYW5kbGUgYXJyYXkgdmFsdWVzLlxuICogQGludGVybmFsYXBpXG4gKi9cbmZ1bmN0aW9uIEFycmF5VHlwZSh0eXBlLCBtb2RlKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAvLyBXcmFwIG5vbi1hcnJheSB2YWx1ZSBhcyBhcnJheVxuICAgIGZ1bmN0aW9uIGFycmF5V3JhcCh2YWwpIHtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkodmFsKSA/IHZhbCA6IChpc0RlZmluZWQodmFsKSA/IFt2YWxdIDogW10pO1xuICAgIH1cbiAgICAvLyBVbndyYXAgYXJyYXkgdmFsdWUgZm9yIFwiYXV0b1wiIG1vZGUuIFJldHVybiB1bmRlZmluZWQgZm9yIGVtcHR5IGFycmF5LlxuICAgIGZ1bmN0aW9uIGFycmF5VW53cmFwKHZhbCkge1xuICAgICAgICBzd2l0Y2ggKHZhbC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIG1vZGUgPT09ICdhdXRvJyA/IHZhbFswXSA6IHZhbDtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiB2YWw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gV3JhcHMgdHlwZSAoLmlzLy5lbmNvZGUvLmRlY29kZSkgZnVuY3Rpb25zIHRvIG9wZXJhdGUgb24gZWFjaCB2YWx1ZSBvZiBhbiBhcnJheVxuICAgIGZ1bmN0aW9uIGFycmF5SGFuZGxlcihjYWxsYmFjaywgYWxsVHJ1dGh5TW9kZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQXJyYXkodmFsKSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheSh2YWwpICYmIHZhbC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgIHZhciBhcnIgPSBhcnJheVdyYXAodmFsKTtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBtYXAoYXJyLCBjYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm4gKGFsbFRydXRoeU1vZGUgPT09IHRydWUpID8gZmlsdGVyKHJlc3VsdCwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuICF4OyB9KS5sZW5ndGggPT09IDAgOiBhcnJheVVud3JhcChyZXN1bHQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBXcmFwcyB0eXBlICguZXF1YWxzKSBmdW5jdGlvbnMgdG8gb3BlcmF0ZSBvbiBlYWNoIHZhbHVlIG9mIGFuIGFycmF5XG4gICAgZnVuY3Rpb24gYXJyYXlFcXVhbHNIYW5kbGVyKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVBcnJheSh2YWwxLCB2YWwyKSB7XG4gICAgICAgICAgICB2YXIgbGVmdCA9IGFycmF5V3JhcCh2YWwxKSwgcmlnaHQgPSBhcnJheVdyYXAodmFsMik7XG4gICAgICAgICAgICBpZiAobGVmdC5sZW5ndGggIT09IHJpZ2h0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlZnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKGxlZnRbaV0sIHJpZ2h0W2ldKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFsnZW5jb2RlJywgJ2RlY29kZScsICdlcXVhbHMnLCAnJG5vcm1hbGl6ZSddLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIHBhcmFtVHlwZUZuID0gdHlwZVtuYW1lXS5iaW5kKHR5cGUpO1xuICAgICAgICB2YXIgd3JhcHBlckZuID0gbmFtZSA9PT0gJ2VxdWFscycgPyBhcnJheUVxdWFsc0hhbmRsZXIgOiBhcnJheUhhbmRsZXI7XG4gICAgICAgIF90aGlzW25hbWVdID0gd3JhcHBlckZuKHBhcmFtVHlwZUZuKTtcbiAgICB9KTtcbiAgICBleHRlbmQodGhpcywge1xuICAgICAgICBkeW5hbWljOiB0eXBlLmR5bmFtaWMsXG4gICAgICAgIG5hbWU6IHR5cGUubmFtZSxcbiAgICAgICAgcGF0dGVybjogdHlwZS5wYXR0ZXJuLFxuICAgICAgICBpbmhlcml0OiB0eXBlLmluaGVyaXQsXG4gICAgICAgIGlzOiBhcnJheUhhbmRsZXIodHlwZS5pcy5iaW5kKHR5cGUpLCB0cnVlKSxcbiAgICAgICAgJGFycmF5TW9kZTogbW9kZSxcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbi8qKiBAaGlkZGVuICovXG52YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8qKiBAaGlkZGVuICovXG52YXIgaXNTaG9ydGhhbmQgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgcmV0dXJuIFsndmFsdWUnLCAndHlwZScsICdzcXVhc2gnLCAnYXJyYXknLCAnZHluYW1pYyddLmZpbHRlcihoYXNPd24uYmluZChjZmcgfHwge30pKS5sZW5ndGggPT09IDA7XG59O1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xuXG4oZnVuY3Rpb24gKERlZlR5cGUpIHtcbiAgICBEZWZUeXBlW0RlZlR5cGVbXCJQQVRIXCJdID0gMF0gPSBcIlBBVEhcIjtcbiAgICBEZWZUeXBlW0RlZlR5cGVbXCJTRUFSQ0hcIl0gPSAxXSA9IFwiU0VBUkNIXCI7XG4gICAgRGVmVHlwZVtEZWZUeXBlW1wiQ09ORklHXCJdID0gMl0gPSBcIkNPTkZJR1wiO1xufSkoZXhwb3J0cy5EZWZUeXBlIHx8IChleHBvcnRzLkRlZlR5cGUgPSB7fSkpO1xuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIHVud3JhcFNob3J0aGFuZChjZmcpIHtcbiAgICBjZmcgPSBpc1Nob3J0aGFuZChjZmcpICYmIHsgdmFsdWU6IGNmZyB9IHx8IGNmZztcbiAgICBnZXRTdGF0aWNEZWZhdWx0VmFsdWVbJ19fY2FjaGVhYmxlJ10gPSB0cnVlO1xuICAgIGZ1bmN0aW9uIGdldFN0YXRpY0RlZmF1bHRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIGNmZy52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVuZChjZmcsIHtcbiAgICAgICAgJCRmbjogaXNJbmplY3RhYmxlKGNmZy52YWx1ZSkgPyBjZmcudmFsdWUgOiBnZXRTdGF0aWNEZWZhdWx0VmFsdWUsXG4gICAgfSk7XG59XG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gZ2V0VHlwZShjZmcsIHVybFR5cGUsIGxvY2F0aW9uLCBpZCwgcGFyYW1UeXBlcykge1xuICAgIGlmIChjZmcudHlwZSAmJiB1cmxUeXBlICYmIHVybFR5cGUubmFtZSAhPT0gJ3N0cmluZycpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcmFtICdcIiArIGlkICsgXCInIGhhcyB0d28gdHlwZSBjb25maWd1cmF0aW9ucy5cIik7XG4gICAgaWYgKGNmZy50eXBlICYmIHVybFR5cGUgJiYgdXJsVHlwZS5uYW1lID09PSAnc3RyaW5nJyAmJiBwYXJhbVR5cGVzLnR5cGUoY2ZnLnR5cGUpKVxuICAgICAgICByZXR1cm4gcGFyYW1UeXBlcy50eXBlKGNmZy50eXBlKTtcbiAgICBpZiAodXJsVHlwZSlcbiAgICAgICAgcmV0dXJuIHVybFR5cGU7XG4gICAgaWYgKCFjZmcudHlwZSkge1xuICAgICAgICB2YXIgdHlwZSA9IGxvY2F0aW9uID09PSBleHBvcnRzLkRlZlR5cGUuQ09ORklHID8gJ2FueScgOlxuICAgICAgICAgICAgbG9jYXRpb24gPT09IGV4cG9ydHMuRGVmVHlwZS5QQVRIID8gJ3BhdGgnIDpcbiAgICAgICAgICAgICAgICBsb2NhdGlvbiA9PT0gZXhwb3J0cy5EZWZUeXBlLlNFQVJDSCA/ICdxdWVyeScgOiAnc3RyaW5nJztcbiAgICAgICAgcmV0dXJuIHBhcmFtVHlwZXMudHlwZSh0eXBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNmZy50eXBlIGluc3RhbmNlb2YgUGFyYW1UeXBlID8gY2ZnLnR5cGUgOiBwYXJhbVR5cGVzLnR5cGUoY2ZnLnR5cGUpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIHJldHVybnMgZmFsc2UsIHRydWUsIG9yIHRoZSBzcXVhc2ggdmFsdWUgdG8gaW5kaWNhdGUgdGhlIFwiZGVmYXVsdCBwYXJhbWV0ZXIgdXJsIHNxdWFzaCBwb2xpY3lcIi5cbiAqL1xuZnVuY3Rpb24gZ2V0U3F1YXNoUG9saWN5KGNvbmZpZywgaXNPcHRpb25hbCwgZGVmYXVsdFBvbGljeSkge1xuICAgIHZhciBzcXVhc2ggPSBjb25maWcuc3F1YXNoO1xuICAgIGlmICghaXNPcHRpb25hbCB8fCBzcXVhc2ggPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCFpc0RlZmluZWQoc3F1YXNoKSB8fCBzcXVhc2ggPT0gbnVsbClcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRQb2xpY3k7XG4gICAgaWYgKHNxdWFzaCA9PT0gdHJ1ZSB8fCBpc1N0cmluZyhzcXVhc2gpKVxuICAgICAgICByZXR1cm4gc3F1YXNoO1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3F1YXNoIHBvbGljeTogJ1wiICsgc3F1YXNoICsgXCInLiBWYWxpZCBwb2xpY2llczogZmFsc2UsIHRydWUsIG9yIGFyYml0cmFyeSBzdHJpbmdcIik7XG59XG4vKiogQGludGVybmFsYXBpICovXG5mdW5jdGlvbiBnZXRSZXBsYWNlKGNvbmZpZywgYXJyYXlNb2RlLCBpc09wdGlvbmFsLCBzcXVhc2gpIHtcbiAgICB2YXIgZGVmYXVsdFBvbGljeSA9IFtcbiAgICAgICAgeyBmcm9tOiAnJywgdG86IChpc09wdGlvbmFsIHx8IGFycmF5TW9kZSA/IHVuZGVmaW5lZCA6ICcnKSB9LFxuICAgICAgICB7IGZyb206IG51bGwsIHRvOiAoaXNPcHRpb25hbCB8fCBhcnJheU1vZGUgPyB1bmRlZmluZWQgOiAnJykgfSxcbiAgICBdO1xuICAgIHZhciByZXBsYWNlID0gaXNBcnJheShjb25maWcucmVwbGFjZSkgPyBjb25maWcucmVwbGFjZSA6IFtdO1xuICAgIGlmIChpc1N0cmluZyhzcXVhc2gpKVxuICAgICAgICByZXBsYWNlLnB1c2goeyBmcm9tOiBzcXVhc2gsIHRvOiB1bmRlZmluZWQgfSk7XG4gICAgdmFyIGNvbmZpZ3VyZWRLZXlzID0gbWFwKHJlcGxhY2UsIHByb3AoJ2Zyb20nKSk7XG4gICAgcmV0dXJuIGZpbHRlcihkZWZhdWx0UG9saWN5LCBmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gY29uZmlndXJlZEtleXMuaW5kZXhPZihpdGVtLmZyb20pID09PSAtMTsgfSkuY29uY2F0KHJlcGxhY2UpO1xufVxuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFBhcmFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhcmFtKGlkLCB0eXBlLCBjb25maWcsIGxvY2F0aW9uLCB1cmxNYXRjaGVyRmFjdG9yeSkge1xuICAgICAgICBjb25maWcgPSB1bndyYXBTaG9ydGhhbmQoY29uZmlnKTtcbiAgICAgICAgdHlwZSA9IGdldFR5cGUoY29uZmlnLCB0eXBlLCBsb2NhdGlvbiwgaWQsIHVybE1hdGNoZXJGYWN0b3J5LnBhcmFtVHlwZXMpO1xuICAgICAgICB2YXIgYXJyYXlNb2RlID0gZ2V0QXJyYXlNb2RlKCk7XG4gICAgICAgIHR5cGUgPSBhcnJheU1vZGUgPyB0eXBlLiRhc0FycmF5KGFycmF5TW9kZSwgbG9jYXRpb24gPT09IGV4cG9ydHMuRGVmVHlwZS5TRUFSQ0gpIDogdHlwZTtcbiAgICAgICAgdmFyIGlzT3B0aW9uYWwgPSBjb25maWcudmFsdWUgIT09IHVuZGVmaW5lZCB8fCBsb2NhdGlvbiA9PT0gZXhwb3J0cy5EZWZUeXBlLlNFQVJDSDtcbiAgICAgICAgdmFyIGR5bmFtaWMgPSBpc0RlZmluZWQoY29uZmlnLmR5bmFtaWMpID8gISFjb25maWcuZHluYW1pYyA6ICEhdHlwZS5keW5hbWljO1xuICAgICAgICB2YXIgcmF3ID0gaXNEZWZpbmVkKGNvbmZpZy5yYXcpID8gISFjb25maWcucmF3IDogISF0eXBlLnJhdztcbiAgICAgICAgdmFyIHNxdWFzaCA9IGdldFNxdWFzaFBvbGljeShjb25maWcsIGlzT3B0aW9uYWwsIHVybE1hdGNoZXJGYWN0b3J5LmRlZmF1bHRTcXVhc2hQb2xpY3koKSk7XG4gICAgICAgIHZhciByZXBsYWNlID0gZ2V0UmVwbGFjZShjb25maWcsIGFycmF5TW9kZSwgaXNPcHRpb25hbCwgc3F1YXNoKTtcbiAgICAgICAgdmFyIGluaGVyaXQkJDEgPSBpc0RlZmluZWQoY29uZmlnLmluaGVyaXQpID8gISFjb25maWcuaW5oZXJpdCA6ICEhdHlwZS5pbmhlcml0O1xuICAgICAgICAvLyBhcnJheSBjb25maWc6IHBhcmFtIG5hbWUgKHBhcmFtW10pIG92ZXJyaWRlcyBkZWZhdWx0IHNldHRpbmdzLiAgZXhwbGljaXQgY29uZmlnIG92ZXJyaWRlcyBwYXJhbSBuYW1lLlxuICAgICAgICBmdW5jdGlvbiBnZXRBcnJheU1vZGUoKSB7XG4gICAgICAgICAgICB2YXIgYXJyYXlEZWZhdWx0cyA9IHsgYXJyYXk6IChsb2NhdGlvbiA9PT0gZXhwb3J0cy5EZWZUeXBlLlNFQVJDSCA/ICdhdXRvJyA6IGZhbHNlKSB9O1xuICAgICAgICAgICAgdmFyIGFycmF5UGFyYW1Ob21lbmNsYXR1cmUgPSBpZC5tYXRjaCgvXFxbXFxdJC8pID8geyBhcnJheTogdHJ1ZSB9IDoge307XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKGFycmF5RGVmYXVsdHMsIGFycmF5UGFyYW1Ob21lbmNsYXR1cmUsIGNvbmZpZykuYXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgZXh0ZW5kKHRoaXMsIHsgaWQ6IGlkLCB0eXBlOiB0eXBlLCBsb2NhdGlvbjogbG9jYXRpb24sIGlzT3B0aW9uYWw6IGlzT3B0aW9uYWwsIGR5bmFtaWM6IGR5bmFtaWMsIHJhdzogcmF3LCBzcXVhc2g6IHNxdWFzaCwgcmVwbGFjZTogcmVwbGFjZSwgaW5oZXJpdDogaW5oZXJpdCQkMSwgYXJyYXk6IGFycmF5TW9kZSwgY29uZmlnOiBjb25maWcgfSk7XG4gICAgfVxuICAgIFBhcmFtLnZhbHVlcyA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlcyQkMSkge1xuICAgICAgICBpZiAodmFsdWVzJCQxID09PSB2b2lkIDApIHsgdmFsdWVzJCQxID0ge307IH1cbiAgICAgICAgdmFyIHBhcmFtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgcGFyYW1zXzEgPSBwYXJhbXM7IF9pIDwgcGFyYW1zXzEubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbXNfMVtfaV07XG4gICAgICAgICAgICBwYXJhbVZhbHVlc1twYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZXMkJDFbcGFyYW0uaWRdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1WYWx1ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaW5kcyBbW1BhcmFtXV0gb2JqZWN0cyB3aGljaCBoYXZlIGRpZmZlcmVudCBwYXJhbSB2YWx1ZXNcbiAgICAgKlxuICAgICAqIEZpbHRlcnMgYSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIHRvIG9ubHkgdGhvc2Ugd2hvc2UgcGFyYW1ldGVyIHZhbHVlcyBkaWZmZXIgaW4gdHdvIHBhcmFtIHZhbHVlIG9iamVjdHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJhbXM6IFRoZSBsaXN0IG9mIFBhcmFtIG9iamVjdHMgdG8gZmlsdGVyXG4gICAgICogQHBhcmFtIHZhbHVlczE6IFRoZSBmaXJzdCBzZXQgb2YgcGFyYW1ldGVyIHZhbHVlc1xuICAgICAqIEBwYXJhbSB2YWx1ZXMyOiB0aGUgc2Vjb25kIHNldCBvZiBwYXJhbWV0ZXIgdmFsdWVzXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbnkgUGFyYW0gb2JqZWN0cyB3aG9zZSB2YWx1ZXMgd2VyZSBkaWZmZXJlbnQgYmV0d2VlbiB2YWx1ZXMxIGFuZCB2YWx1ZXMyXG4gICAgICovXG4gICAgUGFyYW0uY2hhbmdlZCA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlczEsIHZhbHVlczIpIHtcbiAgICAgICAgaWYgKHZhbHVlczEgPT09IHZvaWQgMCkgeyB2YWx1ZXMxID0ge307IH1cbiAgICAgICAgaWYgKHZhbHVlczIgPT09IHZvaWQgMCkgeyB2YWx1ZXMyID0ge307IH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhcGFyYW0udHlwZS5lcXVhbHModmFsdWVzMVtwYXJhbS5pZF0sIHZhbHVlczJbcGFyYW0uaWRdKTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdHdvIHBhcmFtIHZhbHVlIG9iamVjdHMgYXJlIGVxdWFsIChmb3IgYSBzZXQgb2YgW1tQYXJhbV1dIG9iamVjdHMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyYW1zIFRoZSBsaXN0IG9mIFtbUGFyYW1dXSBvYmplY3RzIHRvIGNoZWNrXG4gICAgICogQHBhcmFtIHZhbHVlczEgVGhlIGZpcnN0IHNldCBvZiBwYXJhbSB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gdmFsdWVzMiBUaGUgc2Vjb25kIHNldCBvZiBwYXJhbSB2YWx1ZXNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHBhcmFtIHZhbHVlcyBpbiB2YWx1ZXMxIGFuZCB2YWx1ZXMyIGFyZSBlcXVhbFxuICAgICAqL1xuICAgIFBhcmFtLmVxdWFscyA9IGZ1bmN0aW9uIChwYXJhbXMsIHZhbHVlczEsIHZhbHVlczIpIHtcbiAgICAgICAgaWYgKHZhbHVlczEgPT09IHZvaWQgMCkgeyB2YWx1ZXMxID0ge307IH1cbiAgICAgICAgaWYgKHZhbHVlczIgPT09IHZvaWQgMCkgeyB2YWx1ZXMyID0ge307IH1cbiAgICAgICAgcmV0dXJuIFBhcmFtLmNoYW5nZWQocGFyYW1zLCB2YWx1ZXMxLCB2YWx1ZXMyKS5sZW5ndGggPT09IDA7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGEgdGhlIHBhcmFtZXRlciB2YWx1ZXMgYXJlIHZhbGlkLCBhY2NvcmRpbmcgdG8gdGhlIFBhcmFtIGRlZmluaXRpb25zICovXG4gICAgUGFyYW0udmFsaWRhdGVzID0gZnVuY3Rpb24gKHBhcmFtcywgdmFsdWVzJCQxKSB7XG4gICAgICAgIGlmICh2YWx1ZXMkJDEgPT09IHZvaWQgMCkgeyB2YWx1ZXMkJDEgPSB7fTsgfVxuICAgICAgICByZXR1cm4gcGFyYW1zLm1hcChmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtLnZhbGlkYXRlcyh2YWx1ZXMkJDFbcGFyYW0uaWRdKTsgfSkucmVkdWNlKGFsbFRydWVSLCB0cnVlKTtcbiAgICB9O1xuICAgIFBhcmFtLnByb3RvdHlwZS5pc0RlZmF1bHRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09wdGlvbmFsICYmIHRoaXMudHlwZS5lcXVhbHModGhpcy52YWx1ZSgpLCB2YWx1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBbSW50ZXJuYWxdIEdldHMgdGhlIGRlY29kZWQgcmVwcmVzZW50YXRpb24gb2YgYSB2YWx1ZSBpZiB0aGUgdmFsdWUgaXMgZGVmaW5lZCwgb3RoZXJ3aXNlLCByZXR1cm5zIHRoZVxuICAgICAqIGRlZmF1bHQgdmFsdWUsIHdoaWNoIG1heSBiZSB0aGUgcmVzdWx0IG9mIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgUGFyYW0ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBbSW50ZXJuYWxdIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHBhcmFtZXRlciwgd2hpY2ggbWF5IGJlIGFuIGluamVjdGFibGUgZnVuY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZ2V0RGVmYXVsdFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLl9kZWZhdWx0VmFsdWVDYWNoZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2RlZmF1bHRWYWx1ZUNhY2hlLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIGlmICghc2VydmljZXMuJGluamVjdG9yKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5qZWN0YWJsZSBmdW5jdGlvbnMgY2Fubm90IGJlIGNhbGxlZCBhdCBjb25maWd1cmF0aW9uIHRpbWUnKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKF90aGlzLmNvbmZpZy4kJGZuKTtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IG51bGwgJiYgZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQgJiYgIV90aGlzLnR5cGUuaXMoZGVmYXVsdFZhbHVlKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZWZhdWx0IHZhbHVlIChcIiArIGRlZmF1bHRWYWx1ZSArIFwiKSBmb3IgcGFyYW1ldGVyICdcIiArIF90aGlzLmlkICsgXCInIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBQYXJhbVR5cGUgKFwiICsgX3RoaXMudHlwZS5uYW1lICsgXCIpXCIpO1xuICAgICAgICAgICAgaWYgKF90aGlzLmNvbmZpZy4kJGZuWydfX2NhY2hlYWJsZSddKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2RlZmF1bHRWYWx1ZUNhY2hlID0geyBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlcGxhY2VTcGVjaWFsVmFsdWVzID0gZnVuY3Rpb24gKHZhbCQkMSkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnJlcGxhY2U7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR1cGxlID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICh0dXBsZS5mcm9tID09PSB2YWwkJDEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0dXBsZS50bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWwkJDE7XG4gICAgICAgIH07XG4gICAgICAgIHZhbHVlID0gcmVwbGFjZVNwZWNpYWxWYWx1ZXModmFsdWUpO1xuICAgICAgICByZXR1cm4gaXNVbmRlZmluZWQodmFsdWUpID8gZ2V0RGVmYXVsdFZhbHVlKCkgOiB0aGlzLnR5cGUuJG5vcm1hbGl6ZSh2YWx1ZSk7XG4gICAgfTtcbiAgICBQYXJhbS5wcm90b3R5cGUuaXNTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uID09PSBleHBvcnRzLkRlZlR5cGUuU0VBUkNIO1xuICAgIH07XG4gICAgUGFyYW0ucHJvdG90eXBlLnZhbGlkYXRlcyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBUaGVyZSB3YXMgbm8gcGFyYW1ldGVyIHZhbHVlLCBidXQgdGhlIHBhcmFtIGlzIG9wdGlvbmFsXG4gICAgICAgIGlmICgoaXNVbmRlZmluZWQodmFsdWUpIHx8IHZhbHVlID09PSBudWxsKSAmJiB0aGlzLmlzT3B0aW9uYWwpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgLy8gVGhlIHZhbHVlIHdhcyBub3Qgb2YgdGhlIGNvcnJlY3QgUGFyYW1UeXBlLCBhbmQgY291bGQgbm90IGJlIGRlY29kZWQgdG8gdGhlIGNvcnJlY3QgUGFyYW1UeXBlXG4gICAgICAgIHZhciBub3JtYWxpemVkID0gdGhpcy50eXBlLiRub3JtYWxpemUodmFsdWUpO1xuICAgICAgICBpZiAoIXRoaXMudHlwZS5pcyhub3JtYWxpemVkKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gVGhlIHZhbHVlIHdhcyBvZiB0aGUgY29ycmVjdCB0eXBlLCBidXQgd2hlbiBlbmNvZGVkLCBkaWQgbm90IG1hdGNoIHRoZSBQYXJhbVR5cGUncyByZWdleHBcbiAgICAgICAgdmFyIGVuY29kZWQgPSB0aGlzLnR5cGUuZW5jb2RlKG5vcm1hbGl6ZWQpO1xuICAgICAgICByZXR1cm4gIShpc1N0cmluZyhlbmNvZGVkKSAmJiAhdGhpcy50eXBlLnBhdHRlcm4uZXhlYyhlbmNvZGVkKSk7XG4gICAgfTtcbiAgICBQYXJhbS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIntQYXJhbTpcIiArIHRoaXMuaWQgKyBcIiBcIiArIHRoaXMudHlwZSArIFwiIHNxdWFzaDogJ1wiICsgdGhpcy5zcXVhc2ggKyBcIicgb3B0aW9uYWw6IFwiICsgdGhpcy5pc09wdGlvbmFsICsgXCJ9XCI7XG4gICAgfTtcbiAgICByZXR1cm4gUGFyYW07XG59KCkpO1xuXG4vKiogQG1vZHVsZSBwYXRoICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqXG4gKiBBIG5vZGUgaW4gYSBbW1RyZWVDaGFuZ2VzXV0gcGF0aFxuICpcbiAqIEZvciBhIFtbVHJlZUNoYW5nZXNdXSBwYXRoLCB0aGlzIGNsYXNzIGhvbGRzIHRoZSBzdGF0ZWZ1bCBpbmZvcm1hdGlvbiBmb3IgYSBzaW5nbGUgbm9kZSBpbiB0aGUgcGF0aC5cbiAqIEVhY2ggUGF0aE5vZGUgY29ycmVzcG9uZHMgdG8gYSBzdGF0ZSBiZWluZyBlbnRlcmVkLCBleGl0ZWQsIG9yIHJldGFpbmVkLlxuICogVGhlIHN0YXRlZnVsIGluZm9ybWF0aW9uIGluY2x1ZGVzIHBhcmFtZXRlciB2YWx1ZXMgYW5kIHJlc29sdmUgZGF0YS5cbiAqL1xudmFyIFBhdGhOb2RlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFBhdGhOb2RlKHN0YXRlT3JOb2RlKSB7XG4gICAgICAgIGlmIChzdGF0ZU9yTm9kZSBpbnN0YW5jZW9mIFBhdGhOb2RlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHN0YXRlT3JOb2RlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IG5vZGUuc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnBhcmFtU2NoZW1hID0gbm9kZS5wYXJhbVNjaGVtYS5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IGV4dGVuZCh7fSwgbm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy52aWV3cyA9IG5vZGUudmlld3MgJiYgbm9kZS52aWV3cy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RhdGVPck5vZGU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnBhcmFtU2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJhbVZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZhYmxlcyA9IHN0YXRlLnJlc29sdmFibGVzLm1hcChmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMuY2xvbmUoKTsgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUGF0aE5vZGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFBhdGhOb2RlKHRoaXMpO1xuICAgIH07XG4gICAgLyoqIFNldHMgW1twYXJhbVZhbHVlc11dIGZvciB0aGUgbm9kZSwgZnJvbSB0aGUgdmFsdWVzIG9mIGFuIG9iamVjdCBoYXNoICovXG4gICAgUGF0aE5vZGUucHJvdG90eXBlLmFwcGx5UmF3UGFyYW1zID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICB2YXIgZ2V0UGFyYW1WYWwgPSBmdW5jdGlvbiAocGFyYW1EZWYpIHsgcmV0dXJuIFtwYXJhbURlZi5pZCwgcGFyYW1EZWYudmFsdWUocGFyYW1zW3BhcmFtRGVmLmlkXSldOyB9O1xuICAgICAgICB0aGlzLnBhcmFtVmFsdWVzID0gdGhpcy5wYXJhbVNjaGVtYS5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHBEZWYpIHsgcmV0dXJuIGFwcGx5UGFpcnMobWVtbywgZ2V0UGFyYW1WYWwocERlZikpOyB9LCB7fSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqIEdldHMgYSBzcGVjaWZpYyBbW1BhcmFtXV0gbWV0YWRhdGEgdGhhdCBiZWxvbmdzIHRvIHRoZSBub2RlICovXG4gICAgUGF0aE5vZGUucHJvdG90eXBlLnBhcmFtZXRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBmaW5kKHRoaXMucGFyYW1TY2hlbWEsIHByb3BFcSgnaWQnLCBuYW1lKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBzdGF0ZSBhbmQgcGFyYW1ldGVyIHZhbHVlcyBmb3IgYW5vdGhlciBQYXRoTm9kZSBhcmVcbiAgICAgKiBlcXVhbCB0byB0aGUgc3RhdGUgYW5kIHBhcmFtIHZhbHVlcyBmb3IgdGhpcyBQYXRoTm9kZVxuICAgICAqL1xuICAgIFBhdGhOb2RlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobm9kZSwgcGFyYW1zRm4pIHtcbiAgICAgICAgdmFyIGRpZmYgPSB0aGlzLmRpZmYobm9kZSwgcGFyYW1zRm4pO1xuICAgICAgICByZXR1cm4gZGlmZiAmJiBkaWZmLmxlbmd0aCA9PT0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZpbmRzIFBhcmFtcyB3aXRoIGRpZmZlcmVudCBwYXJhbWV0ZXIgdmFsdWVzIG9uIGFub3RoZXIgUGF0aE5vZGUuXG4gICAgICpcbiAgICAgKiBHaXZlbiBhbm90aGVyIG5vZGUgKG9mIHRoZSBzYW1lIHN0YXRlKSwgZmluZHMgdGhlIHBhcmFtZXRlciB2YWx1ZXMgd2hpY2ggZGlmZmVyLlxuICAgICAqIFJldHVybnMgdGhlIFtbUGFyYW1dXSAoc2NoZW1hIG9iamVjdHMpIHdob3NlIHBhcmFtZXRlciB2YWx1ZXMgZGlmZmVyLlxuICAgICAqXG4gICAgICogR2l2ZW4gYW5vdGhlciBub2RlIGZvciBhIGRpZmZlcmVudCBzdGF0ZSwgcmV0dXJucyBgZmFsc2VgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbm9kZSBUaGUgbm9kZSB0byBjb21wYXJlIHRvXG4gICAgICogQHBhcmFtIHBhcmFtc0ZuIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHdoaWNoIHBhcmFtZXRlcnMgc2hvdWxkIGJlIGNvbXBhcmVkLlxuICAgICAqIEByZXR1cm5zIFRoZSBbW1BhcmFtXV1zIHdoaWNoIGRpZmZlciwgb3IgbnVsbCBpZiB0aGUgdHdvIG5vZGVzIGFyZSBmb3IgZGlmZmVyZW50IHN0YXRlc1xuICAgICAqL1xuICAgIFBhdGhOb2RlLnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24gKG5vZGUsIHBhcmFtc0ZuKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBub2RlLnN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgcGFyYW1zID0gcGFyYW1zRm4gPyBwYXJhbXNGbih0aGlzKSA6IHRoaXMucGFyYW1TY2hlbWE7XG4gICAgICAgIHJldHVybiBQYXJhbS5jaGFuZ2VkKHBhcmFtcywgdGhpcy5wYXJhbVZhbHVlcywgbm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIFBhdGhOb2RlXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIGluc3RhbmNlIG1ldGhvZCBgbm9kZS5jbG9uZSgpYFxuICAgICAqL1xuICAgIFBhdGhOb2RlLmNsb25lID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuY2xvbmUoKTsgfTtcbiAgICByZXR1cm4gUGF0aE5vZGU7XG59KCkpO1xuXG4vKiogQG1vZHVsZSBwYXRoICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqXG4gKiBUaGlzIGNsYXNzIGNvbnRhaW5zIGZ1bmN0aW9ucyB3aGljaCBjb252ZXJ0IFRhcmdldFN0YXRlcywgTm9kZXMgYW5kIHBhdGhzIGZyb20gb25lIHR5cGUgdG8gYW5vdGhlci5cbiAqL1xudmFyIFBhdGhVdGlscyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQYXRoVXRpbHMoKSB7XG4gICAgfVxuICAgIC8qKiBHaXZlbiBhIFBhdGhOb2RlW10sIGNyZWF0ZSBhbiBUYXJnZXRTdGF0ZSAqL1xuICAgIFBhdGhVdGlscy5tYWtlVGFyZ2V0U3RhdGUgPSBmdW5jdGlvbiAocmVnaXN0cnksIHBhdGgpIHtcbiAgICAgICAgdmFyIHN0YXRlID0gdGFpbChwYXRoKS5zdGF0ZTtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXRTdGF0ZShyZWdpc3RyeSwgc3RhdGUsIHBhdGgubWFwKHByb3AoJ3BhcmFtVmFsdWVzJykpLnJlZHVjZShtZXJnZVIsIHt9KSwge30pO1xuICAgIH07XG4gICAgUGF0aFV0aWxzLmJ1aWxkUGF0aCA9IGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkge1xuICAgICAgICB2YXIgdG9QYXJhbXMgPSB0YXJnZXRTdGF0ZS5wYXJhbXMoKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldFN0YXRlLiRzdGF0ZSgpLnBhdGgubWFwKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gbmV3IFBhdGhOb2RlKHN0YXRlKS5hcHBseVJhd1BhcmFtcyh0b1BhcmFtcyk7IH0pO1xuICAgIH07XG4gICAgLyoqIEdpdmVuIGEgZnJvbVBhdGg6IFBhdGhOb2RlW10gYW5kIGEgVGFyZ2V0U3RhdGUsIGJ1aWxkcyBhIHRvUGF0aDogUGF0aE5vZGVbXSAqL1xuICAgIFBhdGhVdGlscy5idWlsZFRvUGF0aCA9IGZ1bmN0aW9uIChmcm9tUGF0aCwgdGFyZ2V0U3RhdGUpIHtcbiAgICAgICAgdmFyIHRvUGF0aCA9IFBhdGhVdGlscy5idWlsZFBhdGgodGFyZ2V0U3RhdGUpO1xuICAgICAgICBpZiAodGFyZ2V0U3RhdGUub3B0aW9ucygpLmluaGVyaXQpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXRoVXRpbHMuaW5oZXJpdFBhcmFtcyhmcm9tUGF0aCwgdG9QYXRoLCBPYmplY3Qua2V5cyh0YXJnZXRTdGF0ZS5wYXJhbXMoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b1BhdGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIFZpZXdDb25maWcgb2JqZWN0cyBhbmQgYWRkcyB0byBub2Rlcy5cbiAgICAgKlxuICAgICAqIE9uIGVhY2ggW1tQYXRoTm9kZV1dLCBjcmVhdGVzIFZpZXdDb25maWcgb2JqZWN0cyBmcm9tIHRoZSB2aWV3czogcHJvcGVydHkgb2YgdGhlIG5vZGUncyBzdGF0ZVxuICAgICAqL1xuICAgIFBhdGhVdGlscy5hcHBseVZpZXdDb25maWdzID0gZnVuY3Rpb24gKCR2aWV3LCBwYXRoLCBzdGF0ZXMpIHtcbiAgICAgICAgLy8gT25seSBhcHBseSB0aGUgdmlld0NvbmZpZ3MgdG8gdGhlIG5vZGVzIGZvciB0aGUgZ2l2ZW4gc3RhdGVzXG4gICAgICAgIHBhdGguZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBpbkFycmF5KHN0YXRlcywgbm9kZS5zdGF0ZSk7IH0pLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciB2aWV3RGVjbHMgPSB2YWx1ZXMobm9kZS5zdGF0ZS52aWV3cyB8fCB7fSk7XG4gICAgICAgICAgICB2YXIgc3ViUGF0aCA9IFBhdGhVdGlscy5zdWJQYXRoKHBhdGgsIGZ1bmN0aW9uIChuKSB7IHJldHVybiBuID09PSBub2RlOyB9KTtcbiAgICAgICAgICAgIHZhciB2aWV3Q29uZmlncyA9IHZpZXdEZWNscy5tYXAoZnVuY3Rpb24gKHZpZXcpIHsgcmV0dXJuICR2aWV3LmNyZWF0ZVZpZXdDb25maWcoc3ViUGF0aCwgdmlldyk7IH0pO1xuICAgICAgICAgICAgbm9kZS52aWV3cyA9IHZpZXdDb25maWdzLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBmcm9tUGF0aCBhbmQgYSB0b1BhdGgsIHJldHVybnMgYSBuZXcgdG8gcGF0aCB3aGljaCBpbmhlcml0cyBwYXJhbWV0ZXJzIGZyb20gdGhlIGZyb21QYXRoXG4gICAgICpcbiAgICAgKiBGb3IgYSBwYXJhbWV0ZXIgaW4gYSBub2RlIHRvIGJlIGluaGVyaXRlZCBmcm9tIHRoZSBmcm9tIHBhdGg6XG4gICAgICogLSBUaGUgdG9QYXRoJ3Mgbm9kZSBtdXN0IGhhdmUgYSBtYXRjaGluZyBub2RlIGluIHRoZSBmcm9tUGF0aCAoYnkgc3RhdGUpLlxuICAgICAqIC0gVGhlIHBhcmFtZXRlciBuYW1lIG11c3Qgbm90IGJlIGZvdW5kIGluIHRoZSB0b0tleXMgcGFyYW1ldGVyIGFycmF5LlxuICAgICAqXG4gICAgICogTm90ZTogdGhlIGtleXMgcHJvdmlkZWQgaW4gdG9LZXlzIGFyZSBpbnRlbmRlZCB0byBiZSB0aG9zZSBwYXJhbSBrZXlzIGV4cGxpY2l0bHkgc3BlY2lmaWVkIGJ5IHNvbWVcbiAgICAgKiBjYWxsZXIsIGZvciBpbnN0YW5jZSwgJHN0YXRlLnRyYW5zaXRpb25UbyguLi4sIHRvUGFyYW1zKS4gIElmIGEga2V5IHdhcyBmb3VuZCBpbiB0b1BhcmFtcyxcbiAgICAgKiBpdCBpcyBub3QgaW5oZXJpdGVkIGZyb20gdGhlIGZyb21QYXRoLlxuICAgICAqL1xuICAgIFBhdGhVdGlscy5pbmhlcml0UGFyYW1zID0gZnVuY3Rpb24gKGZyb21QYXRoLCB0b1BhdGgsIHRvS2V5cykge1xuICAgICAgICBpZiAodG9LZXlzID09PSB2b2lkIDApIHsgdG9LZXlzID0gW107IH1cbiAgICAgICAgZnVuY3Rpb24gbm9kZVBhcmFtVmFscyhwYXRoLCBzdGF0ZSkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBmaW5kKHBhdGgsIHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgbm9kZSAmJiBub2RlLnBhcmFtVmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm9Jbmhlcml0ID0gZnJvbVBhdGgubWFwKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnBhcmFtU2NoZW1hOyB9KVxuICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhcGFyYW0uaW5oZXJpdDsgfSlcbiAgICAgICAgICAgIC5tYXAocHJvcCgnaWQnKSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHaXZlbiBhbiBbW1BhdGhOb2RlXV0gXCJ0b05vZGVcIiwgcmV0dXJuIGEgbmV3IFtbUGF0aE5vZGVdXSB3aXRoIHBhcmFtIHZhbHVlcyBpbmhlcml0ZWQgZnJvbSB0aGVcbiAgICAgICAgICogbWF0Y2hpbmcgbm9kZSBpbiBmcm9tUGF0aC4gIE9ubHkgaW5oZXJpdCBrZXlzIHRoYXQgYXJlbid0IGZvdW5kIGluIFwidG9LZXlzXCIgZnJvbSB0aGUgbm9kZSBpbiBcImZyb21QYXRoXCJcIlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gbWFrZUluaGVyaXRlZFBhcmFtc05vZGUodG9Ob2RlKSB7XG4gICAgICAgICAgICAvLyBBbGwgcGFyYW0gdmFsdWVzIGZvciB0aGUgbm9kZSAobWF5IGluY2x1ZGUgZGVmYXVsdCBrZXkvdmFscywgd2hlbiBrZXkgd2FzIG5vdCBmb3VuZCBpbiB0b1BhcmFtcylcbiAgICAgICAgICAgIHZhciB0b1BhcmFtVmFscyA9IGV4dGVuZCh7fSwgdG9Ob2RlICYmIHRvTm9kZS5wYXJhbVZhbHVlcyk7XG4gICAgICAgICAgICAvLyBsaW1pdGVkIHRvIG9ubHkgdGhvc2Uga2V5cyBmb3VuZCBpbiB0b1BhcmFtc1xuICAgICAgICAgICAgdmFyIGluY29taW5nUGFyYW1WYWxzID0gcGljayh0b1BhcmFtVmFscywgdG9LZXlzKTtcbiAgICAgICAgICAgIHRvUGFyYW1WYWxzID0gb21pdCh0b1BhcmFtVmFscywgdG9LZXlzKTtcbiAgICAgICAgICAgIHZhciBmcm9tUGFyYW1WYWxzID0gb21pdChub2RlUGFyYW1WYWxzKGZyb21QYXRoLCB0b05vZGUuc3RhdGUpIHx8IHt9LCBub0luaGVyaXQpO1xuICAgICAgICAgICAgLy8gZXh0ZW5kIHRvUGFyYW1WYWxzIHdpdGggYW55IGZyb21QYXJhbVZhbHMsIHRoZW4gb3ZlcnJpZGUgYW55IG9mIHRob3NlIHRob3NlIHdpdGggaW5jb21pbmdQYXJhbVZhbHNcbiAgICAgICAgICAgIHZhciBvd25QYXJhbVZhbHMgPSBleHRlbmQodG9QYXJhbVZhbHMsIGZyb21QYXJhbVZhbHMsIGluY29taW5nUGFyYW1WYWxzKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGF0aE5vZGUodG9Ob2RlLnN0YXRlKS5hcHBseVJhd1BhcmFtcyhvd25QYXJhbVZhbHMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBwYXJhbSBrZXlzIHNwZWNpZmllZCBieSB0aGUgaW5jb21pbmcgdG9QYXJhbXNcbiAgICAgICAgcmV0dXJuIHRvUGF0aC5tYXAobWFrZUluaGVyaXRlZFBhcmFtc05vZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIHRyZWUgY2hhbmdlcyAoZW50ZXJpbmcsIGV4aXRpbmcpIGJldHdlZW4gYSBmcm9tUGF0aCBhbmQgdG9QYXRoLlxuICAgICAqL1xuICAgIFBhdGhVdGlscy50cmVlQ2hhbmdlcyA9IGZ1bmN0aW9uIChmcm9tUGF0aCwgdG9QYXRoLCByZWxvYWRTdGF0ZSkge1xuICAgICAgICB2YXIgbWF4ID0gTWF0aC5taW4oZnJvbVBhdGgubGVuZ3RoLCB0b1BhdGgubGVuZ3RoKTtcbiAgICAgICAgdmFyIGtlZXAgPSAwO1xuICAgICAgICB2YXIgbm9kZXNNYXRjaCA9IGZ1bmN0aW9uIChub2RlMSwgbm9kZTIpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlMS5lcXVhbHMobm9kZTIsIFBhdGhVdGlscy5ub25EeW5hbWljUGFyYW1zKTtcbiAgICAgICAgfTtcbiAgICAgICAgd2hpbGUgKGtlZXAgPCBtYXggJiYgZnJvbVBhdGhba2VlcF0uc3RhdGUgIT09IHJlbG9hZFN0YXRlICYmIG5vZGVzTWF0Y2goZnJvbVBhdGhba2VlcF0sIHRvUGF0aFtrZWVwXSkpIHtcbiAgICAgICAgICAgIGtlZXArKztcbiAgICAgICAgfVxuICAgICAgICAvKiogR2l2ZW4gYSByZXRhaW5lZCBub2RlLCByZXR1cm4gYSBuZXcgbm9kZSB3aGljaCB1c2VzIHRoZSB0byBub2RlJ3MgcGFyYW0gdmFsdWVzICovXG4gICAgICAgIGZ1bmN0aW9uIGFwcGx5VG9QYXJhbXMocmV0YWluZWROb2RlLCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBjbG9uZWQgPSByZXRhaW5lZE5vZGUuY2xvbmUoKTtcbiAgICAgICAgICAgIGNsb25lZC5wYXJhbVZhbHVlcyA9IHRvUGF0aFtpZHhdLnBhcmFtVmFsdWVzO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZnJvbSwgcmV0YWluZWQsIGV4aXRpbmcsIGVudGVyaW5nLCB0bztcbiAgICAgICAgZnJvbSA9IGZyb21QYXRoO1xuICAgICAgICByZXRhaW5lZCA9IGZyb20uc2xpY2UoMCwga2VlcCk7XG4gICAgICAgIGV4aXRpbmcgPSBmcm9tLnNsaWNlKGtlZXApO1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcmV0YWluZWQgcGF0aCAod2l0aCBzaGFsbG93IGNvcGllcyBvZiBub2Rlcykgd2hpY2ggaGF2ZSB0aGUgcGFyYW1zIG9mIHRoZSB0b1BhdGggbWFwcGVkXG4gICAgICAgIHZhciByZXRhaW5lZFdpdGhUb1BhcmFtcyA9IHJldGFpbmVkLm1hcChhcHBseVRvUGFyYW1zKTtcbiAgICAgICAgZW50ZXJpbmcgPSB0b1BhdGguc2xpY2Uoa2VlcCk7XG4gICAgICAgIHRvID0gKHJldGFpbmVkV2l0aFRvUGFyYW1zKS5jb25jYXQoZW50ZXJpbmcpO1xuICAgICAgICByZXR1cm4geyBmcm9tOiBmcm9tLCB0bzogdG8sIHJldGFpbmVkOiByZXRhaW5lZCwgcmV0YWluZWRXaXRoVG9QYXJhbXM6IHJldGFpbmVkV2l0aFRvUGFyYW1zLCBleGl0aW5nOiBleGl0aW5nLCBlbnRlcmluZzogZW50ZXJpbmcgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgcGF0aCB3aGljaCBpczogdGhlIHN1YnBhdGggb2YgdGhlIGZpcnN0IHBhdGggd2hpY2ggbWF0Y2hlcyB0aGUgc2Vjb25kIHBhdGguXG4gICAgICpcbiAgICAgKiBUaGUgbmV3IHBhdGggc3RhcnRzIGZyb20gcm9vdCBhbmQgY29udGFpbnMgYW55IG5vZGVzIHRoYXQgbWF0Y2ggdGhlIG5vZGVzIGluIHRoZSBzZWNvbmQgcGF0aC5cbiAgICAgKiBJdCBzdG9wcyBiZWZvcmUgdGhlIGZpcnN0IG5vbi1tYXRjaGluZyBub2RlLlxuICAgICAqXG4gICAgICogTm9kZXMgYXJlIGNvbXBhcmVkIHVzaW5nIHRoZWlyIHN0YXRlIHByb3BlcnR5IGFuZCB0aGVpciBwYXJhbWV0ZXIgdmFsdWVzLlxuICAgICAqIElmIGEgYHBhcmFtc0ZuYCBpcyBwcm92aWRlZCwgb25seSB0aGUgW1tQYXJhbV1dIHJldHVybmVkIGJ5IHRoZSBmdW5jdGlvbiB3aWxsIGJlIGNvbnNpZGVyZWQgd2hlbiBjb21wYXJpbmcgbm9kZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aEEgdGhlIGZpcnN0IHBhdGhcbiAgICAgKiBAcGFyYW0gcGF0aEIgdGhlIHNlY29uZCBwYXRoXG4gICAgICogQHBhcmFtIHBhcmFtc0ZuIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgcGFyYW1ldGVycyB0byBjb25zaWRlciB3aGVuIGNvbXBhcmluZ1xuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgUGF0aE5vZGVzIGZyb20gdGhlIGZpcnN0IHBhdGggd2hpY2ggbWF0Y2ggdGhlIG5vZGVzIGluIHRoZSBzZWNvbmQgcGF0aFxuICAgICAqL1xuICAgIFBhdGhVdGlscy5tYXRjaGluZyA9IGZ1bmN0aW9uIChwYXRoQSwgcGF0aEIsIHBhcmFtc0ZuKSB7XG4gICAgICAgIHZhciBkb25lID0gZmFsc2U7XG4gICAgICAgIHZhciB0dXBsZXMgPSBhcnJheVR1cGxlcyhwYXRoQSwgcGF0aEIpO1xuICAgICAgICByZXR1cm4gdHVwbGVzLnJlZHVjZShmdW5jdGlvbiAobWF0Y2hpbmcsIF9hKSB7XG4gICAgICAgICAgICB2YXIgbm9kZUEgPSBfYVswXSwgbm9kZUIgPSBfYVsxXTtcbiAgICAgICAgICAgIGRvbmUgPSBkb25lIHx8ICFub2RlQS5lcXVhbHMobm9kZUIsIHBhcmFtc0ZuKTtcbiAgICAgICAgICAgIHJldHVybiBkb25lID8gbWF0Y2hpbmcgOiBtYXRjaGluZy5jb25jYXQobm9kZUEpO1xuICAgICAgICB9LCBbXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdHdvIHBhdGhzIGFyZSBpZGVudGljYWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aEFcbiAgICAgKiBAcGFyYW0gcGF0aEJcbiAgICAgKiBAcGFyYW0gcGFyYW1zRm4gYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZSBwYXJhbWV0ZXJzIHRvIGNvbnNpZGVyIHdoZW4gY29tcGFyaW5nXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgdGhlIHN0YXRlcyBhbmQgcGFyYW1ldGVyIHZhbHVlcyBmb3IgYm90aCBwYXRocyBhcmUgaWRlbnRpY2FsXG4gICAgICovXG4gICAgUGF0aFV0aWxzLmVxdWFscyA9IGZ1bmN0aW9uIChwYXRoQSwgcGF0aEIsIHBhcmFtc0ZuKSB7XG4gICAgICAgIHJldHVybiBwYXRoQS5sZW5ndGggPT09IHBhdGhCLmxlbmd0aCAmJlxuICAgICAgICAgICAgUGF0aFV0aWxzLm1hdGNoaW5nKHBhdGhBLCBwYXRoQiwgcGFyYW1zRm4pLmxlbmd0aCA9PT0gcGF0aEEubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgc3VicGF0aCBvZiBhIHBhdGgsIHdoaWNoIHN0b3BzIGF0IHRoZSBmaXJzdCBtYXRjaGluZyBub2RlXG4gICAgICpcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBub2RlcywgcmV0dXJucyBhIHN1YnNldCBvZiB0aGUgYXJyYXkgc3RhcnRpbmcgZnJvbSB0aGUgZmlyc3Qgbm9kZSxcbiAgICAgKiBzdG9wcGluZyB3aGVuIHRoZSBmaXJzdCBub2RlIG1hdGNoZXMgdGhlIHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIGEgcGF0aCBvZiBbW1BhdGhOb2RlXV1zXG4gICAgICogQHBhcmFtIHByZWRpY2F0ZSBhIFtbUHJlZGljYXRlXV0gZm4gdGhhdCBtYXRjaGVzIFtbUGF0aE5vZGVdXXNcbiAgICAgKiBAcmV0dXJucyBhIHN1YnBhdGggdXAgdG8gdGhlIG1hdGNoaW5nIG5vZGUsIG9yIHVuZGVmaW5lZCBpZiBubyBtYXRjaCBpcyBmb3VuZFxuICAgICAqL1xuICAgIFBhdGhVdGlscy5zdWJQYXRoID0gZnVuY3Rpb24gKHBhdGgsIHByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgbm9kZSA9IGZpbmQocGF0aCwgcHJlZGljYXRlKTtcbiAgICAgICAgdmFyIGVsZW1lbnRJZHggPSBwYXRoLmluZGV4T2Yobm9kZSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50SWR4ID09PSAtMSA/IHVuZGVmaW5lZCA6IHBhdGguc2xpY2UoMCwgZWxlbWVudElkeCArIDEpO1xuICAgIH07XG4gICAgUGF0aFV0aWxzLm5vbkR5bmFtaWNQYXJhbXMgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5zdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogZmFsc2UgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhcGFyYW0uZHluYW1pYzsgfSk7XG4gICAgfTtcbiAgICAvKiogR2V0cyB0aGUgcmF3IHBhcmFtZXRlciB2YWx1ZXMgZnJvbSBhIHBhdGggKi9cbiAgICBQYXRoVXRpbHMucGFyYW1WYWx1ZXMgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICByZXR1cm4gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbm9kZSkgeyByZXR1cm4gZXh0ZW5kKGFjYywgbm9kZS5wYXJhbVZhbHVlcyk7IH0sIHt9KTtcbiAgICB9O1xuICAgIHJldHVybiBQYXRoVXRpbHM7XG59KCkpO1xuXG4vKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHJlc29sdmVcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbi8vIFRPRE86IGV4cGxpY2l0bHkgbWFrZSB0aGlzIHVzZXIgY29uZmlndXJhYmxlXG52YXIgZGVmYXVsdFJlc29sdmVQb2xpY3kgPSB7XG4gICAgd2hlbjogJ0xBWlknLFxuICAgIGFzeW5jOiAnV0FJVCcsXG59O1xuLyoqXG4gKiBUaGUgYmFzaWMgYnVpbGRpbmcgYmxvY2sgZm9yIHRoZSByZXNvbHZlIHN5c3RlbS5cbiAqXG4gKiBSZXNvbHZhYmxlcyBlbmNhcHN1bGF0ZSBhIHN0YXRlJ3MgcmVzb2x2ZSdzIHJlc29sdmVGbiwgdGhlIHJlc29sdmVGbidzIGRlY2xhcmVkIGRlcGVuZGVuY2llcywgdGhlIHdyYXBwZWQgKC5wcm9taXNlKSxcbiAqIGFuZCB0aGUgdW53cmFwcGVkLXdoZW4tY29tcGxldGUgKC5kYXRhKSByZXN1bHQgb2YgdGhlIHJlc29sdmVGbi5cbiAqXG4gKiBSZXNvbHZhYmxlLmdldCgpIGVpdGhlciByZXRyaWV2ZXMgdGhlIFJlc29sdmFibGUncyBleGlzdGluZyBwcm9taXNlLCBvciBlbHNlIGludm9rZXMgcmVzb2x2ZSgpICh3aGljaCBpbnZva2VzIHRoZVxuICogcmVzb2x2ZUZuKSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIHByb21pc2UuXG4gKlxuICogUmVzb2x2YWJsZS5nZXQoKSBhbmQgUmVzb2x2YWJsZS5yZXNvbHZlKCkgYm90aCBleGVjdXRlIHdpdGhpbiBhIGNvbnRleHQgcGF0aCwgd2hpY2ggaXMgcGFzc2VkIGFzIHRoZSBmaXJzdFxuICogcGFyYW1ldGVyIHRvIHRob3NlIGZucy5cbiAqL1xudmFyIFJlc29sdmFibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmVzb2x2YWJsZShhcmcxLCByZXNvbHZlRm4sIGRlcHMsIHBvbGljeSwgZGF0YSkge1xuICAgICAgICB0aGlzLnJlc29sdmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGFyZzEgaW5zdGFuY2VvZiBSZXNvbHZhYmxlKSB7XG4gICAgICAgICAgICBleHRlbmQodGhpcywgYXJnMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbihyZXNvbHZlRm4pKSB7XG4gICAgICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoYXJnMSkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXcgUmVzb2x2YWJsZSgpOiB0b2tlbiBhcmd1bWVudCBpcyByZXF1aXJlZCcpO1xuICAgICAgICAgICAgaWYgKCFpc0Z1bmN0aW9uKHJlc29sdmVGbikpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCduZXcgUmVzb2x2YWJsZSgpOiByZXNvbHZlRm4gYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgICAgICB0aGlzLnRva2VuID0gYXJnMTtcbiAgICAgICAgICAgIHRoaXMucG9saWN5ID0gcG9saWN5O1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlRm4gPSByZXNvbHZlRm47XG4gICAgICAgICAgICB0aGlzLmRlcHMgPSBkZXBzIHx8IFtdO1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSBkYXRhICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLnJlc29sdmVkID8gc2VydmljZXMuJHEud2hlbih0aGlzLmRhdGEpIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzT2JqZWN0KGFyZzEpICYmIGFyZzEudG9rZW4gJiYgKGFyZzEuaGFzT3duUHJvcGVydHkoJ3Jlc29sdmVGbicpIHx8IGFyZzEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkpIHtcbiAgICAgICAgICAgIHZhciBsaXRlcmFsID0gYXJnMTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2YWJsZShsaXRlcmFsLnRva2VuLCBsaXRlcmFsLnJlc29sdmVGbiwgbGl0ZXJhbC5kZXBzLCBsaXRlcmFsLnBvbGljeSwgbGl0ZXJhbC5kYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBSZXNvbHZhYmxlLnByb3RvdHlwZS5nZXRQb2xpY3kgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIHRoaXNQb2xpY3kgPSB0aGlzLnBvbGljeSB8fCB7fTtcbiAgICAgICAgdmFyIHN0YXRlUG9saWN5ID0gc3RhdGUgJiYgc3RhdGUucmVzb2x2ZVBvbGljeSB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdoZW46IHRoaXNQb2xpY3kud2hlbiB8fCBzdGF0ZVBvbGljeS53aGVuIHx8IGRlZmF1bHRSZXNvbHZlUG9saWN5LndoZW4sXG4gICAgICAgICAgICBhc3luYzogdGhpc1BvbGljeS5hc3luYyB8fCBzdGF0ZVBvbGljeS5hc3luYyB8fCBkZWZhdWx0UmVzb2x2ZVBvbGljeS5hc3luYyxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91c2x5IHJlc29sdmUgdGhpcyBSZXNvbHZhYmxlJ3MgZGF0YVxuICAgICAqXG4gICAgICogR2l2ZW4gYSBSZXNvbHZlQ29udGV4dCB0aGF0IHRoaXMgUmVzb2x2YWJsZSBpcyBmb3VuZCBpbjpcbiAgICAgKiBXYWl0IGZvciB0aGlzIFJlc29sdmFibGUncyBkZXBlbmRlbmNpZXMsIHRoZW4gaW52b2tlIHRoaXMgUmVzb2x2YWJsZSdzIGZ1bmN0aW9uXG4gICAgICogYW5kIHVwZGF0ZSB0aGUgUmVzb2x2YWJsZSdzIHN0YXRlXG4gICAgICovXG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uIChyZXNvbHZlQ29udGV4dCwgdHJhbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyICRxID0gc2VydmljZXMuJHE7XG4gICAgICAgIC8vIEdldHMgYWxsIGRlcGVuZGVuY2llcyBmcm9tIFJlc29sdmVDb250ZXh0IGFuZCB3YWl0IGZvciB0aGVtIHRvIGJlIHJlc29sdmVkXG4gICAgICAgIHZhciBnZXRSZXNvbHZhYmxlRGVwZW5kZW5jaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRxLmFsbChyZXNvbHZlQ29udGV4dC5nZXREZXBlbmRlbmNpZXMoX3RoaXMpLm1hcChmdW5jdGlvbiAocmVzb2x2YWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldChyZXNvbHZlQ29udGV4dCwgdHJhbnMpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBJbnZva2VzIHRoZSByZXNvbHZlIGZ1bmN0aW9uIHBhc3NpbmcgdGhlIHJlc29sdmVkIGRlcGVuZGVuY2llcyBhcyBhcmd1bWVudHNcbiAgICAgICAgdmFyIGludm9rZVJlc29sdmVGbiA9IGZ1bmN0aW9uIChyZXNvbHZlZERlcHMpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZXNvbHZlRm4uYXBwbHkobnVsbCwgcmVzb2x2ZWREZXBzKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZvciBSWFdBSVQgcG9saWN5OlxuICAgICAgICAgKlxuICAgICAgICAgKiBHaXZlbiBhbiBvYnNlcnZhYmxlIHJldHVybmVkIGZyb20gYSByZXNvbHZlIGZ1bmN0aW9uOlxuICAgICAgICAgKiAtIGVuYWJsZXMgLmNhY2hlKCkgbW9kZSAodGhpcyBhbGxvd3MgbXVsdGljYXN0IHN1YnNjcmliZXJzKVxuICAgICAgICAgKiAtIHRoZW4gY2FsbHMgdG9Qcm9taXNlKCkgKHRoaXMgdHJpZ2dlcnMgc3Vic2NyaWJlKCkgYW5kIHRodXMgZmV0Y2hlcylcbiAgICAgICAgICogLSBXYWl0cyBmb3IgdGhlIHByb21pc2UsIHRoZW4gcmV0dXJuIHRoZSBjYWNoZWQgb2JzZXJ2YWJsZSAobm90IHRoZSBmaXJzdCBlbWl0dGVkIHZhbHVlKS5cbiAgICAgICAgICovXG4gICAgICAgIHZhciB3YWl0Rm9yUnggPSBmdW5jdGlvbiAob2JzZXJ2YWJsZSQpIHtcbiAgICAgICAgICAgIHZhciBjYWNoZWQgPSBvYnNlcnZhYmxlJC5jYWNoZSgxKTtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQudGFrZSgxKS50b1Byb21pc2UoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNhY2hlZDsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIElmIHRoZSByZXNvbHZlIHBvbGljeSBpcyBSWFdBSVQsIHdhaXQgZm9yIHRoZSBvYnNlcnZhYmxlIHRvIGVtaXQgc29tZXRoaW5nLiBvdGhlcndpc2UgcGFzcyB0aHJvdWdoLlxuICAgICAgICB2YXIgbm9kZSA9IHJlc29sdmVDb250ZXh0LmZpbmROb2RlKHRoaXMpO1xuICAgICAgICB2YXIgc3RhdGUgPSBub2RlICYmIG5vZGUuc3RhdGU7XG4gICAgICAgIHZhciBtYXliZVdhaXRGb3JSeCA9IHRoaXMuZ2V0UG9saWN5KHN0YXRlKS5hc3luYyA9PT0gJ1JYV0FJVCcgPyB3YWl0Rm9yUnggOiBpZGVudGl0eTtcbiAgICAgICAgLy8gQWZ0ZXIgdGhlIGZpbmFsIHZhbHVlIGhhcyBiZWVuIHJlc29sdmVkLCB1cGRhdGUgdGhlIHN0YXRlIG9mIHRoZSBSZXNvbHZhYmxlXG4gICAgICAgIHZhciBhcHBseVJlc29sdmVkVmFsdWUgPSBmdW5jdGlvbiAocmVzb2x2ZWRWYWx1ZSkge1xuICAgICAgICAgICAgX3RoaXMuZGF0YSA9IHJlc29sdmVkVmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5yZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICBfdGhpcy5yZXNvbHZlRm4gPSBudWxsO1xuICAgICAgICAgICAgdHJhY2UudHJhY2VSZXNvbHZhYmxlUmVzb2x2ZWQoX3RoaXMsIHRyYW5zKTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5kYXRhO1xuICAgICAgICB9O1xuICAgICAgICAvLyBTZXRzIHRoZSBwcm9taXNlIHByb3BlcnR5IGZpcnN0LCB0aGVuIGdldHNSZXNvbHZhYmxlRGVwZW5kZW5jaWVzIGluIHRoZSBjb250ZXh0IG9mIHRoZSBwcm9taXNlIGNoYWluLiBBbHdheXMgd2FpdHMgb25lIHRpY2suXG4gICAgICAgIHJldHVybiB0aGlzLnByb21pc2UgPSAkcS53aGVuKClcbiAgICAgICAgICAgIC50aGVuKGdldFJlc29sdmFibGVEZXBlbmRlbmNpZXMpXG4gICAgICAgICAgICAudGhlbihpbnZva2VSZXNvbHZlRm4pXG4gICAgICAgICAgICAudGhlbihtYXliZVdhaXRGb3JSeClcbiAgICAgICAgICAgIC50aGVuKGFwcGx5UmVzb2x2ZWRWYWx1ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIGEgcHJvbWlzZSBmb3IgdGhpcyBSZXNvbHZhYmxlJ3MgZGF0YS5cbiAgICAgKlxuICAgICAqIEZldGNoZXMgdGhlIGRhdGEgYW5kIHJldHVybnMgYSBwcm9taXNlLlxuICAgICAqIFJldHVybnMgdGhlIGV4aXN0aW5nIHByb21pc2UgaWYgaXQgaGFzIGFscmVhZHkgYmVlbiBmZXRjaGVkIG9uY2UuXG4gICAgICovXG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHJlc29sdmVDb250ZXh0LCB0cmFucykge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlIHx8IHRoaXMucmVzb2x2ZShyZXNvbHZlQ29udGV4dCwgdHJhbnMpO1xuICAgIH07XG4gICAgUmVzb2x2YWJsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIlJlc29sdmFibGUodG9rZW46IFwiICsgc3RyaW5naWZ5KHRoaXMudG9rZW4pICsgXCIsIHJlcXVpcmVzOiBbXCIgKyB0aGlzLmRlcHMubWFwKHN0cmluZ2lmeSkgKyBcIl0pXCI7XG4gICAgfTtcbiAgICBSZXNvbHZhYmxlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHRoaXMpO1xuICAgIH07XG4gICAgUmVzb2x2YWJsZS5mcm9tRGF0YSA9IGZ1bmN0aW9uICh0b2tlbiwgZGF0YSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRhdGE7IH0sIG51bGwsIG51bGwsIGRhdGEpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlc29sdmFibGU7XG59KCkpO1xuXG4vKiogQGludGVybmFsYXBpICovXG52YXIgcmVzb2x2ZVBvbGljaWVzID0ge1xuICAgIHdoZW46IHtcbiAgICAgICAgTEFaWTogJ0xBWlknLFxuICAgICAgICBFQUdFUjogJ0VBR0VSJyxcbiAgICB9LFxuICAgIGFzeW5jOiB7XG4gICAgICAgIFdBSVQ6ICdXQUlUJyxcbiAgICAgICAgTk9XQUlUOiAnTk9XQUlUJyxcbiAgICAgICAgUlhXQUlUOiAnUlhXQUlUJyxcbiAgICB9LFxufTtcblxuLyoqIEBtb2R1bGUgcmVzb2x2ZSAqL1xuLyoqIGZvciB0eXBlZG9jICovXG52YXIgd2hlbnMgPSByZXNvbHZlUG9saWNpZXMud2hlbjtcbnZhciBBTExfV0hFTlMgPSBbd2hlbnMuRUFHRVIsIHdoZW5zLkxBWlldO1xudmFyIEVBR0VSX1dIRU5TID0gW3doZW5zLkVBR0VSXTtcbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1pbmZlcnJhYmxlLXR5cGVzXG52YXIgTkFUSVZFX0lOSkVDVE9SX1RPS0VOID0gJ05hdGl2ZSBJbmplY3Rvcic7XG4vKipcbiAqIEVuY2Fwc3VsYXRlcyBEZXBlbmRlbmN5IEluamVjdGlvbiBmb3IgYSBwYXRoIG9mIG5vZGVzXG4gKlxuICogVUktUm91dGVyIHN0YXRlcyBhcmUgb3JnYW5pemVkIGFzIGEgdHJlZS5cbiAqIEEgbmVzdGVkIHN0YXRlIGhhcyBhIHBhdGggb2YgYW5jZXN0b3JzIHRvIHRoZSByb290IG9mIHRoZSB0cmVlLlxuICogV2hlbiBhIHN0YXRlIGlzIGJlaW5nIGFjdGl2YXRlZCwgZWFjaCBlbGVtZW50IGluIHRoZSBwYXRoIGlzIHdyYXBwZWQgYXMgYSBbW1BhdGhOb2RlXV0uXG4gKiBBIGBQYXRoTm9kZWAgaXMgYSBzdGF0ZWZ1bCBvYmplY3QgdGhhdCBob2xkcyB0aGluZ3MgbGlrZSBwYXJhbWV0ZXJzIGFuZCByZXNvbHZhYmxlcyBmb3IgdGhlIHN0YXRlIGJlaW5nIGFjdGl2YXRlZC5cbiAqXG4gKiBUaGUgUmVzb2x2ZUNvbnRleHQgY2xvc2VzIG92ZXIgdGhlIFtbUGF0aE5vZGVdXXMsIGFuZCBwcm92aWRlcyBESSBmb3IgdGhlIGxhc3Qgbm9kZSBpbiB0aGUgcGF0aC5cbiAqL1xudmFyIFJlc29sdmVDb250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc29sdmVDb250ZXh0KF9wYXRoKSB7XG4gICAgICAgIHRoaXMuX3BhdGggPSBfcGF0aDtcbiAgICB9XG4gICAgLyoqIEdldHMgYWxsIHRoZSB0b2tlbnMgZm91bmQgaW4gdGhlIHJlc29sdmUgY29udGV4dCwgZGUtZHVwbGljYXRlZCAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5nZXRUb2tlbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXRoLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBub2RlKSB7IHJldHVybiBhY2MuY29uY2F0KG5vZGUucmVzb2x2YWJsZXMubWFwKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnRva2VuOyB9KSk7IH0sIFtdKS5yZWR1Y2UodW5pcVIsIFtdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFJlc29sdmFibGUgdGhhdCBtYXRjaGVzIHRoZSB0b2tlblxuICAgICAqXG4gICAgICogR2V0cyB0aGUgbGFzdCBSZXNvbHZhYmxlIHRoYXQgbWF0Y2hlcyB0aGUgdG9rZW4gaW4gdGhpcyBjb250ZXh0LCBvciB1bmRlZmluZWQuXG4gICAgICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIFJlc29sdmVDb250ZXh0XG4gICAgICovXG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmdldFJlc29sdmFibGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIG1hdGNoaW5nID0gdGhpcy5fcGF0aC5tYXAoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUucmVzb2x2YWJsZXM7IH0pXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gci50b2tlbiA9PT0gdG9rZW47IH0pO1xuICAgICAgICByZXR1cm4gdGFpbChtYXRjaGluZyk7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyB0aGUgW1tSZXNvbHZlUG9saWN5XV0gZm9yIHRoZSBnaXZlbiBbW1Jlc29sdmFibGVdXSAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5nZXRQb2xpY3kgPSBmdW5jdGlvbiAocmVzb2x2YWJsZSkge1xuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuZmluZE5vZGUocmVzb2x2YWJsZSk7XG4gICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldFBvbGljeShub2RlLnN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBSZXNvbHZlQ29udGV4dCB0aGF0IGluY2x1ZGVzIGEgcG9ydGlvbiBvZiB0aGlzIG9uZVxuICAgICAqXG4gICAgICogR2l2ZW4gYSBzdGF0ZSwgdGhpcyBtZXRob2QgY3JlYXRlcyBhIG5ldyBSZXNvbHZlQ29udGV4dCBmcm9tIHRoaXMgb25lLlxuICAgICAqIFRoZSBuZXcgY29udGV4dCBzdGFydHMgYXQgdGhlIGZpcnN0IG5vZGUgKHJvb3QpIGFuZCBzdG9wcyBhdCB0aGUgbm9kZSBmb3IgdGhlIGBzdGF0ZWAgcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogIyMjIyBXaHlcbiAgICAgKlxuICAgICAqIFdoZW4gYSB0cmFuc2l0aW9uIGlzIGNyZWF0ZWQsIHRoZSBub2RlcyBpbiB0aGUgXCJUbyBQYXRoXCIgYXJlIGluamVjdGVkIGZyb20gYSBSZXNvbHZlQ29udGV4dC5cbiAgICAgKiBBIFJlc29sdmVDb250ZXh0IGNsb3NlcyBvdmVyIGEgcGF0aCBvZiBbW1BhdGhOb2RlXV1zIGFuZCBwcm9jZXNzZXMgdGhlIHJlc29sdmFibGVzLlxuICAgICAqIFRoZSBcIlRvIFN0YXRlXCIgY2FuIGluamVjdCB2YWx1ZXMgZnJvbSBpdHMgb3duIHJlc29sdmFibGVzLCBhcyB3ZWxsIGFzIHRob3NlIGZyb20gYWxsIGl0cyBhbmNlc3RvciBzdGF0ZSdzIChub2RlJ3MpLlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgbmFycm93ZXIgY29udGV4dCB3aGVuIGluamVjdGluZyBhbmNlc3RvciBub2Rlcy5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGxldCBBQkNEID0gbmV3IFJlc29sdmVDb250ZXh0KFtBLCBCLCBDLCBEXSk7YFxuICAgICAqXG4gICAgICogR2l2ZW4gYSBwYXRoIGBbQSwgQiwgQywgRF1gLCB3aGVyZSBgQWAsIGBCYCwgYENgIGFuZCBgRGAgYXJlIG5vZGVzIGZvciBzdGF0ZXMgYGFgLCBgYmAsIGBjYCwgYGRgOlxuICAgICAqIFdoZW4gaW5qZWN0aW5nIGBEYCwgYERgIHNob3VsZCBoYXZlIGFjY2VzcyB0byBhbGwgcmVzb2x2YWJsZXMgZnJvbSBgQWAsIGBCYCwgYENgLCBgRGAuXG4gICAgICogSG93ZXZlciwgYEJgIHNob3VsZCBvbmx5IGJlIGFibGUgdG8gYWNjZXNzIHJlc29sdmFibGVzIGZyb20gYEFgLCBgQmAuXG4gICAgICpcbiAgICAgKiBXaGVuIHJlc29sdmluZyBmb3IgdGhlIGBCYCBub2RlLCBmaXJzdCB0YWtlIHRoZSBmdWxsIFwiVG8gUGF0aFwiIENvbnRleHQgYFtBLEIsQyxEXWAgYW5kIGxpbWl0IHRvIHRoZSBzdWJwYXRoIGBbQSxCXWAuXG4gICAgICogYGxldCBBQiA9IEFCQ0Quc3ViY29udGV4dChhKWBcbiAgICAgKi9cbiAgICBSZXNvbHZlQ29udGV4dC5wcm90b3R5cGUuc3ViQ29udGV4dCA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVDb250ZXh0KFBhdGhVdGlscy5zdWJQYXRoKHRoaXMuX3BhdGgsIGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnN0YXRlID09PSBzdGF0ZTsgfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBSZXNvbHZhYmxlcyB0byB0aGUgbm9kZSB0aGF0IG1hdGNoZXMgdGhlIHN0YXRlXG4gICAgICpcbiAgICAgKiBUaGlzIGFkZHMgYSBbW1Jlc29sdmFibGVdXSAoZ2VuZXJhbGx5IG9uZSBjcmVhdGVkIG9uIHRoZSBmbHk7IG5vdCBkZWNsYXJlZCBvbiBhIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0gYmxvY2spLlxuICAgICAqIFRoZSByZXNvbHZhYmxlIGlzIGFkZGVkIHRvIHRoZSBub2RlIG1hdGNoaW5nIHRoZSBgc3RhdGVgIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIFRoZXNlIG5ldyByZXNvbHZhYmxlcyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgZmV0Y2hlZC5cbiAgICAgKiBUaGUgY2FsbGluZyBjb2RlIHNob3VsZCBlaXRoZXIgZmV0Y2ggdGhlbSwgZmV0Y2ggc29tZXRoaW5nIHRoYXQgZGVwZW5kcyBvbiB0aGVtLFxuICAgICAqIG9yIHJlbHkgb24gW1tyZXNvbHZlUGF0aF1dIGJlaW5nIGNhbGxlZCB3aGVuIHNvbWUgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZC5cbiAgICAgKlxuICAgICAqIE5vdGU6IGVhY2ggcmVzb2x2YWJsZSdzIFtbUmVzb2x2ZVBvbGljeV1dIGlzIG1lcmdlZCB3aXRoIHRoZSBzdGF0ZSdzIHBvbGljeSwgYW5kIHRoZSBnbG9iYWwgZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuZXdSZXNvbHZhYmxlcyB0aGUgbmV3IFJlc29sdmFibGVzXG4gICAgICogQHBhcmFtIHN0YXRlIFVzZWQgdG8gZmluZCB0aGUgbm9kZSB0byBwdXQgdGhlIHJlc29sdmFibGUgb25cbiAgICAgKi9cbiAgICBSZXNvbHZlQ29udGV4dC5wcm90b3R5cGUuYWRkUmVzb2x2YWJsZXMgPSBmdW5jdGlvbiAobmV3UmVzb2x2YWJsZXMsIHN0YXRlKSB7XG4gICAgICAgIHZhciBub2RlID0gZmluZCh0aGlzLl9wYXRoLCBwcm9wRXEoJ3N0YXRlJywgc3RhdGUpKTtcbiAgICAgICAgdmFyIGtleXMgPSBuZXdSZXNvbHZhYmxlcy5tYXAoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudG9rZW47IH0pO1xuICAgICAgICBub2RlLnJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIGtleXMuaW5kZXhPZihyLnRva2VuKSA9PT0gLTE7IH0pLmNvbmNhdChuZXdSZXNvbHZhYmxlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkgb2YgcmVzb2x2ZWQgcGF0aCBFbGVtZW50IHByb21pc2VzXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd2hlblxuICAgICAqIEBwYXJhbSB0cmFuc1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT58YW55fVxuICAgICAqL1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5yZXNvbHZlUGF0aCA9IGZ1bmN0aW9uICh3aGVuLCB0cmFucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAod2hlbiA9PT0gdm9pZCAwKSB7IHdoZW4gPSAnTEFaWSc7IH1cbiAgICAgICAgLy8gVGhpcyBvcHRpb24gZGV0ZXJtaW5lcyB3aGljaCAnd2hlbicgcG9saWN5IFJlc29sdmFibGVzIHdlIGFyZSBhYm91dCB0byBmZXRjaC5cbiAgICAgICAgdmFyIHdoZW5PcHRpb24gPSBpbkFycmF5KEFMTF9XSEVOUywgd2hlbikgPyB3aGVuIDogJ0xBWlknO1xuICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIHNwZWNpZmllZCBFQUdFUiwgb25seSB0aGUgRUFHRVIgUmVzb2x2YWJsZXMgYXJlIGZldGNoZWQuXG4gICAgICAgIC8vIGlmIHRoZSBjYWxsZXIgc3BlY2lmaWVkIExBWlksIGJvdGggRUFHRVIgYW5kIExBWlkgUmVzb2x2YWJsZXMgYXJlIGZldGNoZWQuYFxuICAgICAgICB2YXIgbWF0Y2hlZFdoZW5zID0gd2hlbk9wdGlvbiA9PT0gcmVzb2x2ZVBvbGljaWVzLndoZW4uRUFHRVIgPyBFQUdFUl9XSEVOUyA6IEFMTF9XSEVOUztcbiAgICAgICAgLy8gZ2V0IHRoZSBzdWJwYXRoIHRvIHRoZSBzdGF0ZSBhcmd1bWVudCwgaWYgcHJvdmlkZWRcbiAgICAgICAgdHJhY2UudHJhY2VSZXNvbHZlUGF0aCh0aGlzLl9wYXRoLCB3aGVuLCB0cmFucyk7XG4gICAgICAgIHZhciBtYXRjaGVzUG9saWN5ID0gZnVuY3Rpb24gKGFjY2VwdGVkVmFscywgd2hlbk9yQXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocmVzb2x2YWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbkFycmF5KGFjY2VwdGVkVmFscywgX3RoaXMuZ2V0UG9saWN5KHJlc29sdmFibGUpW3doZW5PckFzeW5jXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICAvLyBUcmlnZ2VyIGFsbCB0aGUgKG1hdGNoaW5nKSBSZXNvbHZhYmxlcyBpbiB0aGUgcGF0aFxuICAgICAgICAvLyBSZWR1Y2UgYWxsIHRoZSBcIldBSVRcIiBSZXNvbHZhYmxlcyBpbnRvIGFuIGFycmF5XG4gICAgICAgIHZhciBwcm9taXNlcyA9IHRoaXMuX3BhdGgucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBub2RlUmVzb2x2YWJsZXMgPSBub2RlLnJlc29sdmFibGVzLmZpbHRlcihtYXRjaGVzUG9saWN5KG1hdGNoZWRXaGVucywgJ3doZW4nKSk7XG4gICAgICAgICAgICB2YXIgbm93YWl0ID0gbm9kZVJlc29sdmFibGVzLmZpbHRlcihtYXRjaGVzUG9saWN5KFsnTk9XQUlUJ10sICdhc3luYycpKTtcbiAgICAgICAgICAgIHZhciB3YWl0ID0gbm9kZVJlc29sdmFibGVzLmZpbHRlcihub3QobWF0Y2hlc1BvbGljeShbJ05PV0FJVCddLCAnYXN5bmMnKSkpO1xuICAgICAgICAgICAgLy8gRm9yIHRoZSBtYXRjaGluZyBSZXNvbHZhYmxlcywgc3RhcnQgdGhlaXIgYXN5bmMgZmV0Y2ggcHJvY2Vzcy5cbiAgICAgICAgICAgIHZhciBzdWJDb250ZXh0ID0gX3RoaXMuc3ViQ29udGV4dChub2RlLnN0YXRlKTtcbiAgICAgICAgICAgIHZhciBnZXRSZXN1bHQgPSBmdW5jdGlvbiAocikgeyByZXR1cm4gci5nZXQoc3ViQ29udGV4dCwgdHJhbnMpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiAoeyB0b2tlbjogci50b2tlbiwgdmFsdWU6IHZhbHVlIH0pOyB9KTsgfTtcbiAgICAgICAgICAgIG5vd2FpdC5mb3JFYWNoKGdldFJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm4gYWNjLmNvbmNhdCh3YWl0Lm1hcChnZXRSZXN1bHQpKTtcbiAgICAgICAgfSwgW10pO1xuICAgICAgICAvLyBXYWl0IGZvciBhbGwgdGhlIFwiV0FJVFwiIHJlc29sdmFibGVzXG4gICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS5hbGwocHJvbWlzZXMpO1xuICAgIH07XG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmluamVjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5qZWN0b3IgfHwgKHRoaXMuX2luamVjdG9yID0gbmV3IFVJSW5qZWN0b3JJbXBsKHRoaXMpKTtcbiAgICB9O1xuICAgIFJlc29sdmVDb250ZXh0LnByb3RvdHlwZS5maW5kTm9kZSA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7XG4gICAgICAgIHJldHVybiBmaW5kKHRoaXMuX3BhdGgsIGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBpbkFycmF5KG5vZGUucmVzb2x2YWJsZXMsIHJlc29sdmFibGUpOyB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGFzeW5jIGRlcGVuZGVuY2llcyBvZiBhIFJlc29sdmFibGVcbiAgICAgKlxuICAgICAqIEdpdmVuIGEgUmVzb2x2YWJsZSwgcmV0dXJucyBpdHMgZGVwZW5kZW5jaWVzIGFzIGEgUmVzb2x2YWJsZVtdXG4gICAgICovXG4gICAgUmVzb2x2ZUNvbnRleHQucHJvdG90eXBlLmdldERlcGVuZGVuY2llcyA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5maW5kTm9kZShyZXNvbHZhYmxlKTtcbiAgICAgICAgLy8gRmluZCB3aGljaCBvdGhlciByZXNvbHZhYmxlcyBhcmUgXCJ2aXNpYmxlXCIgdG8gdGhlIGByZXNvbHZhYmxlYCBhcmd1bWVudFxuICAgICAgICAvLyBzdWJwYXRoIHN0b3BwaW5nIGF0IHJlc29sdmFibGUncyBub2RlLCBvciB0aGUgd2hvbGUgcGF0aCAoaWYgdGhlIHJlc29sdmFibGUgaXNuJ3QgaW4gdGhlIHBhdGgpXG4gICAgICAgIHZhciBzdWJQYXRoID0gUGF0aFV0aWxzLnN1YlBhdGgodGhpcy5fcGF0aCwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggPT09IG5vZGU7IH0pIHx8IHRoaXMuX3BhdGg7XG4gICAgICAgIHZhciBhdmFpbGFibGVSZXNvbHZhYmxlcyA9IHN1YlBhdGhcbiAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgX25vZGUpIHsgcmV0dXJuIGFjYy5jb25jYXQoX25vZGUucmVzb2x2YWJsZXMpOyB9LCBbXSkgLy8gYWxsIG9mIHN1YnBhdGgncyByZXNvbHZhYmxlc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAocmVzKSB7IHJldHVybiByZXMgIT09IHJlc29sdmFibGU7IH0pOyAvLyBmaWx0ZXIgb3V0IHRoZSBgcmVzb2x2YWJsZWAgYXJndW1lbnRcbiAgICAgICAgdmFyIGdldERlcGVuZGVuY3kgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGluZyA9IGF2YWlsYWJsZVJlc29sdmFibGVzLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gci50b2tlbiA9PT0gdG9rZW47IH0pO1xuICAgICAgICAgICAgaWYgKG1hdGNoaW5nLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFpbChtYXRjaGluZyk7XG4gICAgICAgICAgICB2YXIgZnJvbUluamVjdG9yID0gX3RoaXMuaW5qZWN0b3IoKS5nZXROYXRpdmUodG9rZW4pO1xuICAgICAgICAgICAgaWYgKGlzVW5kZWZpbmVkKGZyb21JbmplY3RvcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIERlcGVuZGVuY3kgSW5qZWN0aW9uIHRva2VuOiAnICsgc3RyaW5naWZ5KHRva2VuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmFibGUodG9rZW4sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZyb21JbmplY3RvcjsgfSwgW10sIGZyb21JbmplY3Rvcik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXNvbHZhYmxlLmRlcHMubWFwKGdldERlcGVuZGVuY3kpO1xuICAgIH07XG4gICAgcmV0dXJuIFJlc29sdmVDb250ZXh0O1xufSgpKTtcbnZhciBVSUluamVjdG9ySW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVSUluamVjdG9ySW1wbChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMubmF0aXZlID0gdGhpcy5nZXQoTkFUSVZFX0lOSkVDVE9SX1RPS0VOKSB8fCBzZXJ2aWNlcy4kaW5qZWN0b3I7XG4gICAgfVxuICAgIFVJSW5qZWN0b3JJbXBsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIHJlc29sdmFibGUgPSB0aGlzLmNvbnRleHQuZ2V0UmVzb2x2YWJsZSh0b2tlbik7XG4gICAgICAgIGlmIChyZXNvbHZhYmxlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb250ZXh0LmdldFBvbGljeShyZXNvbHZhYmxlKS5hc3luYyA9PT0gJ05PV0FJVCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQodGhpcy5jb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcmVzb2x2YWJsZS5yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzb2x2YWJsZSBhc3luYyAuZ2V0KCkgbm90IGNvbXBsZXRlOicgKyBzdHJpbmdpZnkocmVzb2x2YWJsZS50b2tlbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXROYXRpdmUodG9rZW4pO1xuICAgIH07XG4gICAgVUlJbmplY3RvckltcGwucHJvdG90eXBlLmdldEFzeW5jID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHZhciByZXNvbHZhYmxlID0gdGhpcy5jb250ZXh0LmdldFJlc29sdmFibGUodG9rZW4pO1xuICAgICAgICBpZiAocmVzb2x2YWJsZSlcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZhYmxlLmdldCh0aGlzLmNvbnRleHQpO1xuICAgICAgICByZXR1cm4gc2VydmljZXMuJHEud2hlbih0aGlzLm5hdGl2ZS5nZXQodG9rZW4pKTtcbiAgICB9O1xuICAgIFVJSW5qZWN0b3JJbXBsLnByb3RvdHlwZS5nZXROYXRpdmUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF0aXZlICYmIHRoaXMubmF0aXZlLmdldCh0b2tlbik7XG4gICAgfTtcbiAgICByZXR1cm4gVUlJbmplY3RvckltcGw7XG59KCkpO1xuXG4vKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG4vKiogQGhpZGRlbiAqL1xudmFyIHN0YXRlU2VsZiA9IHByb3AoJ3NlbGYnKTtcbi8qKlxuICogUmVwcmVzZW50cyBhIHRyYW5zaXRpb24gYmV0d2VlbiB0d28gc3RhdGVzLlxuICpcbiAqIFdoZW4gbmF2aWdhdGluZyB0byBhIHN0YXRlLCB3ZSBhcmUgdHJhbnNpdGlvbmluZyAqKmZyb20qKiB0aGUgY3VycmVudCBzdGF0ZSAqKnRvKiogdGhlIG5ldyBzdGF0ZS5cbiAqXG4gKiBUaGlzIG9iamVjdCBjb250YWlucyBhbGwgY29udGV4dHVhbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdG8vZnJvbSBzdGF0ZXMsIHBhcmFtZXRlcnMsIHJlc29sdmVzLlxuICogSXQgaGFzIGluZm9ybWF0aW9uIGFib3V0IGFsbCBzdGF0ZXMgYmVpbmcgZW50ZXJlZCBhbmQgZXhpdGVkIGFzIGEgcmVzdWx0IG9mIHRoZSB0cmFuc2l0aW9uLlxuICovXG52YXIgVHJhbnNpdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFRyYW5zaXRpb24gb2JqZWN0LlxuICAgICAqXG4gICAgICogSWYgdGhlIHRhcmdldCBzdGF0ZSBpcyBub3QgdmFsaWQsIGFuIGVycm9yIGlzIHRocm93bi5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqXG4gICAgICogQHBhcmFtIGZyb21QYXRoIFRoZSBwYXRoIG9mIFtbUGF0aE5vZGVdXXMgZnJvbSB3aGljaCB0aGUgdHJhbnNpdGlvbiBpcyBsZWF2aW5nLiAgVGhlIGxhc3Qgbm9kZSBpbiB0aGUgYGZyb21QYXRoYFxuICAgICAqICAgICAgICBlbmNhcHN1bGF0ZXMgdGhlIFwiZnJvbSBzdGF0ZVwiLlxuICAgICAqIEBwYXJhbSB0YXJnZXRTdGF0ZSBUaGUgdGFyZ2V0IHN0YXRlIGFuZCBwYXJhbWV0ZXJzIGJlaW5nIHRyYW5zaXRpb25lZCB0byAoYWxzbywgdGhlIHRyYW5zaXRpb24gb3B0aW9ucylcbiAgICAgKiBAcGFyYW0gcm91dGVyIFRoZSBbW1VJUm91dGVyXV0gaW5zdGFuY2VcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmFuc2l0aW9uKGZyb21QYXRoLCB0YXJnZXRTdGF0ZSwgcm91dGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuX2RlZmVycmVkID0gc2VydmljZXMuJHEuZGVmZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgcHJvbWlzZSBpcyByZXNvbHZlZCBvciByZWplY3RlZCBiYXNlZCBvbiB0aGUgb3V0Y29tZSBvZiB0aGUgVHJhbnNpdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGUgdHJhbnNpdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGUgcHJvbWlzZSBpcyByZXNvbHZlZFxuICAgICAgICAgKiBXaGVuIHRoZSB0cmFuc2l0aW9uIGlzIHVuc3VjY2Vzc2Z1bCwgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCB0aGUgW1tSZWplY3Rpb25dXSBvciBqYXZhc2NyaXB0IGVycm9yXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb21pc2UgPSB0aGlzLl9kZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICAvKiogQGhpZGRlbiBIb2xkcyB0aGUgaG9vayByZWdpc3RyYXRpb24gZnVuY3Rpb25zIHN1Y2ggYXMgdGhvc2UgcGFzc2VkIHRvIFRyYW5zaXRpb24ub25TdGFydCgpICovXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyZWRIb29rcyA9IHt9O1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9ob29rQnVpbGRlciA9IG5ldyBIb29rQnVpbGRlcih0aGlzKTtcbiAgICAgICAgLyoqIENoZWNrcyBpZiB0aGlzIHRyYW5zaXRpb24gaXMgY3VycmVudGx5IGFjdGl2ZS9ydW5uaW5nLiAqL1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb24gPT09IF90aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy5fdGFyZ2V0U3RhdGUgPSB0YXJnZXRTdGF0ZTtcbiAgICAgICAgaWYgKCF0YXJnZXRTdGF0ZS52YWxpZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGFyZ2V0U3RhdGUuZXJyb3IoKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY3VycmVudCgpIGlzIGFzc3VtZWQgdG8gY29tZSBmcm9tIHRhcmdldFN0YXRlLm9wdGlvbnMsIGJ1dCBwcm92aWRlIGEgbmFpdmUgaW1wbGVtZW50YXRpb24gb3RoZXJ3aXNlLlxuICAgICAgICB0aGlzLl9vcHRpb25zID0gZXh0ZW5kKHsgY3VycmVudDogdmFsKHRoaXMpIH0sIHRhcmdldFN0YXRlLm9wdGlvbnMoKSk7XG4gICAgICAgIHRoaXMuJGlkID0gcm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLl90cmFuc2l0aW9uQ291bnQrKztcbiAgICAgICAgdmFyIHRvUGF0aCA9IFBhdGhVdGlscy5idWlsZFRvUGF0aChmcm9tUGF0aCwgdGFyZ2V0U3RhdGUpO1xuICAgICAgICB0aGlzLl90cmVlQ2hhbmdlcyA9IFBhdGhVdGlscy50cmVlQ2hhbmdlcyhmcm9tUGF0aCwgdG9QYXRoLCB0aGlzLl9vcHRpb25zLnJlbG9hZFN0YXRlKTtcbiAgICAgICAgdGhpcy5jcmVhdGVUcmFuc2l0aW9uSG9va1JlZ0ZucygpO1xuICAgICAgICB2YXIgb25DcmVhdGVIb29rcyA9IHRoaXMuX2hvb2tCdWlsZGVyLmJ1aWxkSG9va3NGb3JQaGFzZShleHBvcnRzLlRyYW5zaXRpb25Ib29rUGhhc2UuQ1JFQVRFKTtcbiAgICAgICAgVHJhbnNpdGlvbkhvb2suaW52b2tlSG9va3Mob25DcmVhdGVIb29rcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gbnVsbDsgfSk7XG4gICAgICAgIHRoaXMuYXBwbHlWaWV3Q29uZmlncyhyb3V0ZXIpO1xuICAgIH1cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uQmVmb3JlID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykgeyByZXR1cm47IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25TdGFydCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRXhpdCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uUmV0YWluID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykgeyByZXR1cm47IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25FbnRlciA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9uRmluaXNoID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykgeyByZXR1cm47IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25TdWNjZXNzID0gZnVuY3Rpb24gKGNyaXRlcmlhLCBjYWxsYmFjaywgb3B0aW9ucykgeyByZXR1cm47IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaGlkZGVuXG4gICAgICogQ3JlYXRlcyB0aGUgdHJhbnNpdGlvbi1sZXZlbCBob29rIHJlZ2lzdHJhdGlvbiBmdW5jdGlvbnNcbiAgICAgKiAod2hpY2ggY2FuIHRoZW4gYmUgdXNlZCB0byByZWdpc3RlciBob29rcylcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5jcmVhdGVUcmFuc2l0aW9uSG9va1JlZ0ZucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuX3BsdWdpbmFwaS5fZ2V0RXZlbnRzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIHR5cGUuaG9va1BoYXNlICE9PSBleHBvcnRzLlRyYW5zaXRpb25Ib29rUGhhc2UuQ1JFQVRFOyB9KVxuICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIG1ha2VFdmVudChfdGhpcywgX3RoaXMucm91dGVyLnRyYW5zaXRpb25TZXJ2aWNlLCB0eXBlKTsgfSk7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZ2V0SG9va3MgPSBmdW5jdGlvbiAoaG9va05hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lzdGVyZWRIb29rc1tob29rTmFtZV07XG4gICAgfTtcbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5hcHBseVZpZXdDb25maWdzID0gZnVuY3Rpb24gKHJvdXRlcikge1xuICAgICAgICB2YXIgZW50ZXJpbmdTdGF0ZXMgPSB0aGlzLl90cmVlQ2hhbmdlcy5lbnRlcmluZy5tYXAoZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUuc3RhdGU7IH0pO1xuICAgICAgICBQYXRoVXRpbHMuYXBwbHlWaWV3Q29uZmlncyhyb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuJHZpZXcsIHRoaXMuX3RyZWVDaGFuZ2VzLnRvLCBlbnRlcmluZ1N0YXRlcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRoZSBpbnRlcm5hbCBmcm9tIFtTdGF0ZV0gb2JqZWN0XG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuJGZyb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLmZyb20pLnN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgdG8gW1N0YXRlXSBvYmplY3RcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS4kdG8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0YWlsKHRoaXMuX3RyZWVDaGFuZ2VzLnRvKS5zdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFwiZnJvbSBzdGF0ZVwiXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbWluZyAqZnJvbSouXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIChcImZyb20gc3RhdGVcIikuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZnJvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZyb20oKS5zZWxmO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgXCJ0byBzdGF0ZVwiXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGdvaW5nICp0byouXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0IGZvciB0aGUgVHJhbnNpdGlvbidzIHRhcmdldCBzdGF0ZSAoXCJ0byBzdGF0ZVwiKS5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHRvKCkuc2VsZjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIFRhcmdldCBTdGF0ZVxuICAgICAqXG4gICAgICogQSB0cmFuc2l0aW9uJ3MgW1tUYXJnZXRTdGF0ZV1dIGVuY2Fwc3VsYXRlcyB0aGUgW1t0b11dIHN0YXRlLCB0aGUgW1twYXJhbXNdXSwgYW5kIHRoZSBbW29wdGlvbnNdXSBhcyBhIHNpbmdsZSBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0aGUgW1tUYXJnZXRTdGF0ZV1dIG9mIHRoaXMgVHJhbnNpdGlvblxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnRhcmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFyZ2V0U3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdHdvIHRyYW5zaXRpb25zIGFyZSBlcXVpdmFsZW50LlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbiAoY29tcGFyZSkge1xuICAgICAgICBpZiAoY29tcGFyZSBpbnN0YW5jZW9mIFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IEFsc28gY29tcGFyZSBwYXJhbWV0ZXJzXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pcyh7IHRvOiBjb21wYXJlLiR0bygpLm5hbWUsIGZyb206IGNvbXBhcmUuJGZyb20oKS5uYW1lIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhKChjb21wYXJlLnRvICYmICFtYXRjaFN0YXRlKHRoaXMuJHRvKCksIGNvbXBhcmUudG8pKSB8fFxuICAgICAgICAgICAgKGNvbXBhcmUuZnJvbSAmJiAhbWF0Y2hTdGF0ZSh0aGlzLiRmcm9tKCksIGNvbXBhcmUuZnJvbSkpKTtcbiAgICB9O1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnBhcmFtcyA9IGZ1bmN0aW9uIChwYXRobmFtZSkge1xuICAgICAgICBpZiAocGF0aG5hbWUgPT09IHZvaWQgMCkgeyBwYXRobmFtZSA9ICd0byc7IH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUodGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdLm1hcChwcm9wKCdwYXJhbVZhbHVlcycpKS5yZWR1Y2UobWVyZ2VSLCB7fSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFtbVUlJbmplY3Rvcl1dIERlcGVuZGVuY3kgSW5qZWN0b3JcbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBEZXBlbmRlbmN5IEluamVjdG9yIGZvciB0aGUgVHJhbnNpdGlvbidzIHRhcmdldCBzdGF0ZSAodG8gc3RhdGUpLlxuICAgICAqIFRoZSBpbmplY3RvciBwcm92aWRlcyByZXNvbHZlIHZhbHVlcyB3aGljaCB0aGUgdGFyZ2V0IHN0YXRlIGhhcyBhY2Nlc3MgdG8uXG4gICAgICpcbiAgICAgKiBUaGUgYFVJSW5qZWN0b3JgIGNhbiBhbHNvIHByb3ZpZGUgdmFsdWVzIGZyb20gdGhlIG5hdGl2ZSByb290L2dsb2JhbCBpbmplY3RvciAobmcxL25nMikuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiAub25FbnRlcih7IGVudGVyaW5nOiAnbXlTdGF0ZScgfSwgdHJhbnMgPT4ge1xuICAgICAqICAgdmFyIG15UmVzb2x2ZVZhbHVlID0gdHJhbnMuaW5qZWN0b3IoKS5nZXQoJ215UmVzb2x2ZScpO1xuICAgICAqICAgLy8gSW5qZWN0IGEgZ2xvYmFsIHNlcnZpY2UgZnJvbSB0aGUgZ2xvYmFsL25hdGl2ZSBpbmplY3RvciAoaWYgaXQgZXhpc3RzKVxuICAgICAqICAgdmFyIE15U2VydmljZSA9IHRyYW5zLmluamVjdG9yKCkuZ2V0KCdNeVNlcnZpY2UnKTtcbiAgICAgKiB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogSW4gc29tZSBjYXNlcyAoc3VjaCBhcyBgb25CZWZvcmVgKSwgeW91IG1heSBuZWVkIGFjY2VzcyB0byBzb21lIHJlc29sdmUgZGF0YSBidXQgaXQgaGFzIG5vdCB5ZXQgYmVlbiBmZXRjaGVkLlxuICAgICAqIFlvdSBjYW4gdXNlIFtbVUlJbmplY3Rvci5nZXRBc3luY11dIHRvIGdldCBhIHByb21pc2UgZm9yIHRoZSBkYXRhLlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIC5vbkJlZm9yZSh7fSwgdHJhbnMgPT4ge1xuICAgICAqICAgcmV0dXJuIHRyYW5zLmluamVjdG9yKCkuZ2V0QXN5bmMoJ215UmVzb2x2ZScpLnRoZW4obXlSZXNvbHZlVmFsdWUgPT5cbiAgICAgKiAgICAgcmV0dXJuIG15UmVzb2x2ZVZhbHVlICE9PSAnQUJPUlQnO1xuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBJZiBhIGBzdGF0ZWAgaXMgcHJvdmlkZWQsIHRoZSBpbmplY3RvciB0aGF0IGlzIHJldHVybmVkIHdpbGwgYmUgbGltaXRlZCB0byByZXNvbHZlIHZhbHVlcyB0aGF0IHRoZSBwcm92aWRlZCBzdGF0ZSBoYXMgYWNjZXNzIHRvLlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWZ1bCBpZiBib3RoIGEgcGFyZW50IHN0YXRlIGBmb29gIGFuZCBhIGNoaWxkIHN0YXRlIGBmb28uYmFyYCBoYXZlIGJvdGggZGVmaW5lZCBhIHJlc29sdmUgc3VjaCBhcyBgZGF0YWAuXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLm9uRW50ZXIoeyB0bzogJ2Zvby5iYXInIH0sIHRyYW5zID0+IHtcbiAgICAgKiAgIC8vIHJldHVybnMgcmVzdWx0IG9mIGBmb29gIHN0YXRlJ3MgYG15UmVzb2x2ZWAgcmVzb2x2ZVxuICAgICAqICAgLy8gZXZlbiB0aG91Z2ggYGZvby5iYXJgIGFsc28gaGFzIGEgYG15UmVzb2x2ZWAgcmVzb2x2ZVxuICAgICAqICAgdmFyIGZvb0RhdGEgPSB0cmFucy5pbmplY3RvcignZm9vJykuZ2V0KCdteVJlc29sdmUnKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIElmIHlvdSBuZWVkIHJlc29sdmUgZGF0YSBmcm9tIHRoZSBleGl0aW5nIHN0YXRlcywgcGFzcyBgJ2Zyb20nYCBhcyBgcGF0aE5hbWVgLlxuICAgICAqIFRoZSByZXNvbHZlIGRhdGEgZnJvbSB0aGUgYGZyb21gIHBhdGggd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiAub25FeGl0KHsgZXhpdGluZzogJ2Zvby5iYXInIH0sIHRyYW5zID0+IHtcbiAgICAgKiAgIC8vIEdldHMgdGhlIHJlc29sdmUgdmFsdWUgb2YgYG15UmVzb2x2ZWAgZnJvbSB0aGUgc3RhdGUgYmVpbmcgZXhpdGVkXG4gICAgICogICB2YXIgZm9vRGF0YSA9IHRyYW5zLmluamVjdG9yKG51bGwsICdmcm9tJykuZ2V0KCdteVJlc29sdmUnKTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlIExpbWl0cyB0aGUgcmVzb2x2ZXMgcHJvdmlkZWQgdG8gb25seSB0aGUgcmVzb2x2ZXMgdGhlIHByb3ZpZGVkIHN0YXRlIGhhcyBhY2Nlc3MgdG8uXG4gICAgICogQHBhcmFtIHBhdGhOYW1lIERlZmF1bHQ6IGAndG8nYDogQ2hvb3NlcyB0aGUgcGF0aCBmb3Igd2hpY2ggdG8gY3JlYXRlIHRoZSBpbmplY3Rvci4gVXNlIHRoaXMgdG8gYWNjZXNzIHJlc29sdmVzIGZvciBgZXhpdGluZ2Agc3RhdGVzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBbW1VJSW5qZWN0b3JdXVxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmluamVjdG9yID0gZnVuY3Rpb24gKHN0YXRlLCBwYXRoTmFtZSkge1xuICAgICAgICBpZiAocGF0aE5hbWUgPT09IHZvaWQgMCkgeyBwYXRoTmFtZSA9ICd0byc7IH1cbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLl90cmVlQ2hhbmdlc1twYXRoTmFtZV07XG4gICAgICAgIGlmIChzdGF0ZSlcbiAgICAgICAgICAgIHBhdGggPSBQYXRoVXRpbHMuc3ViUGF0aChwYXRoLCBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5zdGF0ZSA9PT0gc3RhdGUgfHwgbm9kZS5zdGF0ZS5uYW1lID09PSBzdGF0ZTsgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQocGF0aCkuaW5qZWN0b3IoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgYWxsIGF2YWlsYWJsZSByZXNvbHZlIHRva2VucyAoa2V5cylcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggW1tpbmplY3Rvcl1dIHRvIGluc3BlY3QgdGhlIHJlc29sdmUgdmFsdWVzXG4gICAgICogYXZhaWxhYmxlIHRvIHRoZSBUcmFuc2l0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyByZXR1cm5zIGFsbCB0aGUgdG9rZW5zIGRlZmluZWQgb24gW1tTdGF0ZURlY2xhcmF0aW9uLnJlc29sdmVdXSBibG9ja3MsIGZvciB0aGUgc3RhdGVzXG4gICAgICogaW4gdGhlIFRyYW5zaXRpb24ncyBbW1RyZWVDaGFuZ2VzLnRvXV0gcGF0aC5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBUaGlzIGV4YW1wbGUgbG9ncyBhbGwgcmVzb2x2ZSB2YWx1ZXNcbiAgICAgKiBgYGBqc1xuICAgICAqIGxldCB0b2tlbnMgPSB0cmFucy5nZXRSZXNvbHZlVG9rZW5zKCk7XG4gICAgICogdG9rZW5zLmZvckVhY2godG9rZW4gPT4gY29uc29sZS5sb2codG9rZW4gKyBcIiA9IFwiICsgdHJhbnMuaW5qZWN0b3IoKS5nZXQodG9rZW4pKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogVGhpcyBleGFtcGxlIGNyZWF0ZXMgcHJvbWlzZXMgZm9yIGVhY2ggcmVzb2x2ZSB2YWx1ZS5cbiAgICAgKiBUaGlzIHRyaWdnZXJzIGZldGNoZXMgb2YgcmVzb2x2ZXMgKGlmIGFueSBoYXZlIG5vdCB5ZXQgYmVlbiBmZXRjaGVkKS5cbiAgICAgKiBXaGVuIGFsbCBwcm9taXNlcyBoYXZlIGFsbCBzZXR0bGVkLCBpdCBsb2dzIHRoZSByZXNvbHZlIHZhbHVlcy5cbiAgICAgKiBgYGBqc1xuICAgICAqIGxldCB0b2tlbnMgPSB0cmFucy5nZXRSZXNvbHZlVG9rZW5zKCk7XG4gICAgICogbGV0IHByb21pc2UgPSB0b2tlbnMubWFwKHRva2VuID0+IHRyYW5zLmluamVjdG9yKCkuZ2V0QXN5bmModG9rZW4pKTtcbiAgICAgKiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbih2YWx1ZXMgPT4gY29uc29sZS5sb2coXCJSZXNvbHZlZCB2YWx1ZXM6IFwiICsgdmFsdWVzKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBOb3RlOiBBbmd1bGFyIDEgdXNlcnMgd2hvdWxkIHVzZSBgJHEuYWxsKClgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aG5hbWUgcmVzb2x2ZSBjb250ZXh0J3MgcGF0aCBuYW1lIChlLmcuLCBgdG9gIG9yIGBmcm9tYClcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIHJlc29sdmUgdG9rZW5zIChrZXlzKVxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmdldFJlc29sdmVUb2tlbnMgPSBmdW5jdGlvbiAocGF0aG5hbWUpIHtcbiAgICAgICAgaWYgKHBhdGhuYW1lID09PSB2b2lkIDApIHsgcGF0aG5hbWUgPSAndG8nOyB9XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZUNvbnRleHQodGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdKS5nZXRUb2tlbnMoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIER5bmFtaWNhbGx5IGFkZHMgYSBuZXcgW1tSZXNvbHZhYmxlXV0gKGkuZS4sIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV0pIHRvIHRoaXMgdHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIEFsbG93cyBhIHRyYW5zaXRpb24gaG9vayB0byBkeW5hbWljYWxseSBhZGQgYSBSZXNvbHZhYmxlIHRvIHRoaXMgVHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIFVzZSB0aGUgW1tUcmFuc2l0aW9uLmluamVjdG9yXV0gdG8gcmV0cmlldmUgdGhlIHJlc29sdmVkIGRhdGEgaW4gc3Vic2VxdWVudCBob29rcyAoW1tVSUluamVjdG9yLmdldF1dKS5cbiAgICAgKlxuICAgICAqIElmIGEgYHN0YXRlYCBhcmd1bWVudCBpcyBwcm92aWRlZCwgdGhlIFJlc29sdmFibGUgaXMgcHJvY2Vzc2VkIHdoZW4gdGhhdCBzdGF0ZSBpcyBiZWluZyBlbnRlcmVkLlxuICAgICAqIElmIG5vIGBzdGF0ZWAgaXMgcHJvdmlkZWQgdGhlbiB0aGUgcm9vdCBzdGF0ZSBpcyB1c2VkLlxuICAgICAqIElmIHRoZSBnaXZlbiBgc3RhdGVgIGhhcyBhbHJlYWR5IGJlZW4gZW50ZXJlZCwgdGhlIFJlc29sdmFibGUgaXMgcHJvY2Vzc2VkIHdoZW4gYW55IGNoaWxkIHN0YXRlIGlzIGVudGVyZWQuXG4gICAgICogSWYgbm8gY2hpbGQgc3RhdGVzIHdpbGwgYmUgZW50ZXJlZCwgdGhlIFJlc29sdmFibGUgaXMgcHJvY2Vzc2VkIGR1cmluZyB0aGUgYG9uRmluaXNoYCBwaGFzZSBvZiB0aGUgVHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIFRoZSBgc3RhdGVgIGFyZ3VtZW50IGFsc28gc2NvcGVzIHRoZSByZXNvbHZlZCBkYXRhLlxuICAgICAqIFRoZSByZXNvbHZlZCBkYXRhIGlzIGF2YWlsYWJsZSBmcm9tIHRoZSBpbmplY3RvciBmb3IgdGhhdCBgc3RhdGVgIGFuZCBhbnkgY2hpbGRyZW4gc3RhdGVzLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sIHRyYW5zaXRpb24gPT4ge1xuICAgICAqICAgdHJhbnNpdGlvbi5hZGRSZXNvbHZhYmxlKHtcbiAgICAgKiAgICAgdG9rZW46ICdteVJlc29sdmUnLFxuICAgICAqICAgICBkZXBzOiBbJ015U2VydmljZSddLFxuICAgICAqICAgICByZXNvbHZlRm46IG15U2VydmljZSA9PiBteVNlcnZpY2UuZ2V0RGF0YSgpXG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSByZXNvbHZhYmxlIGEgW1tSZXNvbHZhYmxlTGl0ZXJhbF1dIG9iamVjdCAob3IgYSBbW1Jlc29sdmFibGVdXSlcbiAgICAgKiBAcGFyYW0gc3RhdGUgdGhlIHN0YXRlIGluIHRoZSBcInRvIHBhdGhcIiB3aGljaCBzaG91bGQgcmVjZWl2ZSB0aGUgbmV3IHJlc29sdmUgKG90aGVyd2lzZSwgdGhlIHJvb3Qgc3RhdGUpXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuYWRkUmVzb2x2YWJsZSA9IGZ1bmN0aW9uIChyZXNvbHZhYmxlLCBzdGF0ZSkge1xuICAgICAgICBpZiAoc3RhdGUgPT09IHZvaWQgMCkgeyBzdGF0ZSA9ICcnOyB9XG4gICAgICAgIHJlc29sdmFibGUgPSBpcyhSZXNvbHZhYmxlKShyZXNvbHZhYmxlKSA/IHJlc29sdmFibGUgOiBuZXcgUmVzb2x2YWJsZShyZXNvbHZhYmxlKTtcbiAgICAgICAgdmFyIHN0YXRlTmFtZSA9ICh0eXBlb2Ygc3RhdGUgPT09ICdzdHJpbmcnKSA/IHN0YXRlIDogc3RhdGUubmFtZTtcbiAgICAgICAgdmFyIHRvcGF0aCA9IHRoaXMuX3RyZWVDaGFuZ2VzLnRvO1xuICAgICAgICB2YXIgdGFyZ2V0Tm9kZSA9IGZpbmQodG9wYXRoLCBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5zdGF0ZS5uYW1lID09PSBzdGF0ZU5hbWU7IH0pO1xuICAgICAgICB2YXIgcmVzb2x2ZUNvbnRleHQgPSBuZXcgUmVzb2x2ZUNvbnRleHQodG9wYXRoKTtcbiAgICAgICAgcmVzb2x2ZUNvbnRleHQuYWRkUmVzb2x2YWJsZXMoW3Jlc29sdmFibGVdLCB0YXJnZXROb2RlLnN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHRyYW5zaXRpb24gZnJvbSB3aGljaCB0aGlzIHRyYW5zaXRpb24gd2FzIHJlZGlyZWN0ZWQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgY3VycmVudCB0cmFuc2l0aW9uIGlzIGEgcmVkaXJlY3QsIHRoaXMgbWV0aG9kIHJldHVybnMgdGhlIHRyYW5zaXRpb24gdGhhdCB3YXMgcmVkaXJlY3RlZC5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIGxldCB0cmFuc2l0aW9uQSA9ICRzdGF0ZS5nbygnQScpLnRyYW5zaXRpb25cbiAgICAgKiB0cmFuc2l0aW9uQS5vblN0YXJ0KHt9LCAoKSA9PiAkc3RhdGUudGFyZ2V0KCdCJykpO1xuICAgICAqICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3MoeyB0bzogJ0InIH0sICh0cmFucykgPT4ge1xuICAgICAqICAgdHJhbnMudG8oKS5uYW1lID09PSAnQic7IC8vIHRydWVcbiAgICAgKiAgIHRyYW5zLnJlZGlyZWN0ZWRGcm9tKCkgPT09IHRyYW5zaXRpb25BOyAvLyB0cnVlXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcHJldmlvdXMgVHJhbnNpdGlvbiwgb3IgbnVsbCBpZiB0aGlzIFRyYW5zaXRpb24gaXMgbm90IHRoZSByZXN1bHQgb2YgYSByZWRpcmVjdGlvblxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnJlZGlyZWN0ZWRGcm9tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5yZWRpcmVjdGVkRnJvbSB8fCBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb3JpZ2luYWwgdHJhbnNpdGlvbiBpbiBhIHJlZGlyZWN0IGNoYWluXG4gICAgICpcbiAgICAgKiBBIHRyYW5zaXRpb24gbWlnaHQgYmVsb25nIHRvIGEgbG9uZyBjaGFpbiBvZiBtdWx0aXBsZSByZWRpcmVjdHMuXG4gICAgICogVGhpcyBtZXRob2Qgd2Fsa3MgdGhlIFtbcmVkaXJlY3RlZEZyb21dXSBjaGFpbiBiYWNrIHRvIHRoZSBvcmlnaW5hbCAoZmlyc3QpIHRyYW5zaXRpb24gaW4gdGhlIGNoYWluLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gc3RhdGVzXG4gICAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnQScsIHJlZGlyZWN0VG86ICdCJyB9KTtcbiAgICAgKiByZWdpc3RyeS5yZWdpc3Rlcih7IG5hbWU6ICdCJywgcmVkaXJlY3RUbzogJ0MnIH0pO1xuICAgICAqIHJlZ2lzdHJ5LnJlZ2lzdGVyKHsgbmFtZTogJ0MnLCByZWRpcmVjdFRvOiAnRCcgfSk7XG4gICAgICogcmVnaXN0cnkucmVnaXN0ZXIoeyBuYW1lOiAnRCcgfSk7XG4gICAgICpcbiAgICAgKiBsZXQgdHJhbnNpdGlvbkEgPSAkc3RhdGUuZ28oJ0EnKS50cmFuc2l0aW9uXG4gICAgICpcbiAgICAgKiAkdHJhbnNpdGlvbnMub25TdWNjZXNzKHsgdG86ICdEJyB9LCAodHJhbnMpID0+IHtcbiAgICAgKiAgIHRyYW5zLnRvKCkubmFtZSA9PT0gJ0QnOyAvLyB0cnVlXG4gICAgICogICB0cmFucy5yZWRpcmVjdGVkRnJvbSgpLnRvKCkubmFtZSA9PT0gJ0MnOyAvLyB0cnVlXG4gICAgICogICB0cmFucy5vcmlnaW5hbFRyYW5zaXRpb24oKSA9PT0gdHJhbnNpdGlvbkE7IC8vIHRydWVcbiAgICAgKiAgIHRyYW5zLm9yaWdpbmFsVHJhbnNpdGlvbigpLnRvKCkubmFtZSA9PT0gJ0EnOyAvLyB0cnVlXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgb3JpZ2luYWwgVHJhbnNpdGlvbiB0aGF0IHN0YXJ0ZWQgYSByZWRpcmVjdCBjaGFpblxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLm9yaWdpbmFsVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJmID0gdGhpcy5yZWRpcmVjdGVkRnJvbSgpO1xuICAgICAgICByZXR1cm4gKHJmICYmIHJmLm9yaWdpbmFsVHJhbnNpdGlvbigpKSB8fCB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0cmFuc2l0aW9uIG9wdGlvbnNcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRoZSBvcHRpb25zIGZvciB0aGlzIFRyYW5zaXRpb24uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzdGF0ZXMgYmVpbmcgZW50ZXJlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFuIGFycmF5IG9mIHN0YXRlcyB0aGF0IHdpbGwgYmUgZW50ZXJlZCBkdXJpbmcgdGhpcyB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmVudGVyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbWFwKHRoaXMuX3RyZWVDaGFuZ2VzLmVudGVyaW5nLCBwcm9wKCdzdGF0ZScpKS5tYXAoc3RhdGVTZWxmKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHN0YXRlcyBiZWluZyBleGl0ZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbiBhcnJheSBvZiBzdGF0ZXMgdGhhdCB3aWxsIGJlIGV4aXRlZCBkdXJpbmcgdGhpcyB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLmV4aXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXAodGhpcy5fdHJlZUNoYW5nZXMuZXhpdGluZywgcHJvcCgnc3RhdGUnKSkubWFwKHN0YXRlU2VsZikucmV2ZXJzZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgc3RhdGVzIGJlaW5nIHJldGFpbmVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzIHRoYXQgYXJlIGFscmVhZHkgZW50ZXJlZCBmcm9tIGEgcHJldmlvdXMgVHJhbnNpdGlvbiwgdGhhdCB3aWxsIG5vdCBiZVxuICAgICAqICAgIGV4aXRlZCBkdXJpbmcgdGhpcyBUcmFuc2l0aW9uXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUucmV0YWluZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtYXAodGhpcy5fdHJlZUNoYW5nZXMucmV0YWluZWQsIHByb3AoJ3N0YXRlJykpLm1hcChzdGF0ZVNlbGYpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBbW1ZpZXdDb25maWddXXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgVHJhbnNpdGlvblxuICAgICAqXG4gICAgICogRWFjaCBzdGF0ZSBjYW4gZGVmaW5lIG9uZSBvciBtb3JlIHZpZXdzICh0ZW1wbGF0ZS9jb250cm9sbGVyKSwgd2hpY2ggYXJlIGVuY2Fwc3VsYXRlZCBhcyBgVmlld0NvbmZpZ2Agb2JqZWN0cy5cbiAgICAgKiBUaGlzIG1ldGhvZCBmZXRjaGVzIHRoZSBgVmlld0NvbmZpZ3NgIGZvciBhIGdpdmVuIHBhdGggaW4gdGhlIFRyYW5zaXRpb24gKGUuZy4sIFwidG9cIiBvciBcImVudGVyaW5nXCIpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGhuYW1lIHRoZSBuYW1lIG9mIHRoZSBwYXRoIHRvIGZldGNoIHZpZXdzIGZvcjpcbiAgICAgKiAgIChgJ3RvJ2AsIGAnZnJvbSdgLCBgJ2VudGVyaW5nJ2AsIGAnZXhpdGluZydgLCBgJ3JldGFpbmVkJ2ApXG4gICAgICogQHBhcmFtIHN0YXRlIElmIHByb3ZpZGVkLCBvbmx5IHJldHVybnMgdGhlIGBWaWV3Q29uZmlnYHMgZm9yIGEgc2luZ2xlIHN0YXRlIGluIHRoZSBwYXRoXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIGxpc3Qgb2YgVmlld0NvbmZpZyBvYmplY3RzIGZvciB0aGUgZ2l2ZW4gcGF0aC5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS52aWV3cyA9IGZ1bmN0aW9uIChwYXRobmFtZSwgc3RhdGUpIHtcbiAgICAgICAgaWYgKHBhdGhuYW1lID09PSB2b2lkIDApIHsgcGF0aG5hbWUgPSAnZW50ZXJpbmcnOyB9XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdO1xuICAgICAgICBwYXRoID0gIXN0YXRlID8gcGF0aCA6IHBhdGguZmlsdGVyKHByb3BFcSgnc3RhdGUnLCBzdGF0ZSkpO1xuICAgICAgICByZXR1cm4gcGF0aC5tYXAocHJvcCgndmlld3MnKSkuZmlsdGVyKGlkZW50aXR5KS5yZWR1Y2UodW5uZXN0UiwgW10pO1xuICAgIH07XG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudHJlZUNoYW5nZXMgPSBmdW5jdGlvbiAocGF0aG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhdGhuYW1lID8gdGhpcy5fdHJlZUNoYW5nZXNbcGF0aG5hbWVdIDogdGhpcy5fdHJlZUNoYW5nZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRyYW5zaXRpb24gdGhhdCBpcyBhIHJlZGlyZWN0aW9uIG9mIHRoZSBjdXJyZW50IG9uZS5cbiAgICAgKlxuICAgICAqIFRoaXMgdHJhbnNpdGlvbiBjYW4gYmUgcmV0dXJuZWQgZnJvbSBhIFtbVHJhbnNpdGlvblNlcnZpY2VdXSBob29rIHRvXG4gICAgICogcmVkaXJlY3QgYSB0cmFuc2l0aW9uIHRvIGEgbmV3IHN0YXRlIGFuZC9vciBzZXQgb2YgcGFyYW1ldGVycy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIG5ldyBbW1RyYW5zaXRpb25dXSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkge1xuICAgICAgICB2YXIgcmVkaXJlY3RzID0gMSwgdHJhbnMgPSB0aGlzO1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uZGl0aW9uYWwtYXNzaWdubWVudFxuICAgICAgICB3aGlsZSAoKHRyYW5zID0gdHJhbnMucmVkaXJlY3RlZEZyb20oKSkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCsrcmVkaXJlY3RzID4gMjApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIG1hbnkgY29uc2VjdXRpdmUgVHJhbnNpdGlvbiByZWRpcmVjdHMgKDIwKylcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlZGlyZWN0T3B0cyA9IHsgcmVkaXJlY3RlZEZyb206IHRoaXMsIHNvdXJjZTogJ3JlZGlyZWN0JyB9O1xuICAgICAgICAvLyBJZiB0aGUgb3JpZ2luYWwgdHJhbnNpdGlvbiB3YXMgY2F1c2VkIGJ5IFVSTCBzeW5jLCB0aGVuIHVzZSB7IGxvY2F0aW9uOiAncmVwbGFjZScgfVxuICAgICAgICAvLyBvbiB0aGUgbmV3IHRyYW5zaXRpb24gKHVubGVzcyB0aGUgdGFyZ2V0IHN0YXRlIGV4cGxpY2l0bHkgc3BlY2lmaWVzIGxvY2F0aW9uOiBmYWxzZSkuXG4gICAgICAgIC8vIFRoaXMgY2F1c2VzIHRoZSBvcmlnaW5hbCB1cmwgdG8gYmUgcmVwbGFjZWQgd2l0aCB0aGUgdXJsIGZvciB0aGUgcmVkaXJlY3QgdGFyZ2V0XG4gICAgICAgIC8vIHNvIHRoZSBvcmlnaW5hbCB1cmwgZGlzYXBwZWFycyBmcm9tIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMoKS5zb3VyY2UgPT09ICd1cmwnICYmIHRhcmdldFN0YXRlLm9wdGlvbnMoKS5sb2NhdGlvbiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJlZGlyZWN0T3B0cy5sb2NhdGlvbiA9ICdyZXBsYWNlJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3T3B0aW9ucyA9IGV4dGVuZCh7fSwgdGhpcy5vcHRpb25zKCksIHRhcmdldFN0YXRlLm9wdGlvbnMoKSwgcmVkaXJlY3RPcHRzKTtcbiAgICAgICAgdGFyZ2V0U3RhdGUgPSB0YXJnZXRTdGF0ZS53aXRoT3B0aW9ucyhuZXdPcHRpb25zLCB0cnVlKTtcbiAgICAgICAgdmFyIG5ld1RyYW5zaXRpb24gPSB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUodGhpcy5fdHJlZUNoYW5nZXMuZnJvbSwgdGFyZ2V0U3RhdGUpO1xuICAgICAgICB2YXIgb3JpZ2luYWxFbnRlcmluZ05vZGVzID0gdGhpcy5fdHJlZUNoYW5nZXMuZW50ZXJpbmc7XG4gICAgICAgIHZhciByZWRpcmVjdEVudGVyaW5nTm9kZXMgPSBuZXdUcmFuc2l0aW9uLl90cmVlQ2hhbmdlcy5lbnRlcmluZztcbiAgICAgICAgLy8gLS0tIFJlLXVzZSByZXNvbHZlIGRhdGEgZnJvbSBvcmlnaW5hbCB0cmFuc2l0aW9uIC0tLVxuICAgICAgICAvLyBXaGVuIHJlZGlyZWN0aW5nIGZyb20gYSBwYXJlbnQgc3RhdGUgdG8gYSBjaGlsZCBzdGF0ZSB3aGVyZSB0aGUgcGFyZW50IHBhcmFtZXRlciB2YWx1ZXMgaGF2ZW4ndCBjaGFuZ2VkXG4gICAgICAgIC8vIChiZWNhdXNlIG9mIHRoZSByZWRpcmVjdCksIHRoZSByZXNvbHZlcyBmZXRjaGVkIGJ5IHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIGFyZSBzdGlsbCB2YWxpZCBpbiB0aGVcbiAgICAgICAgLy8gcmVkaXJlY3RlZCB0cmFuc2l0aW9uLlxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGlzIGFsbG93cyB5b3UgdG8gZGVmaW5lIGEgcmVkaXJlY3Qgb24gYSBwYXJlbnQgc3RhdGUgd2hpY2ggZGVwZW5kcyBvbiBhbiBhc3luYyByZXNvbHZlIHZhbHVlLlxuICAgICAgICAvLyBZb3UgY2FuIHdhaXQgZm9yIHRoZSByZXNvbHZlLCB0aGVuIHJlZGlyZWN0IHRvIGEgY2hpbGQgc3RhdGUgYmFzZWQgb24gdGhlIHJlc3VsdC5cbiAgICAgICAgLy8gVGhlIHJlZGlyZWN0ZWQgdHJhbnNpdGlvbiBkb2VzIG5vdCBoYXZlIHRvIHJlLWZldGNoIHRoZSByZXNvbHZlLlxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgdmFyIG5vZGVJc1JlbG9hZGluZyA9IGZ1bmN0aW9uIChyZWxvYWRTdGF0ZSkgeyByZXR1cm4gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiByZWxvYWRTdGF0ZSAmJiBub2RlLnN0YXRlLmluY2x1ZGVzW3JlbG9hZFN0YXRlLm5hbWVdO1xuICAgICAgICB9OyB9O1xuICAgICAgICAvLyBGaW5kIGFueSBcImVudGVyaW5nXCIgbm9kZXMgaW4gdGhlIHJlZGlyZWN0IHBhdGggdGhhdCBtYXRjaCB0aGUgb3JpZ2luYWwgcGF0aCBhbmQgYXJlbid0IGJlaW5nIHJlbG9hZGVkXG4gICAgICAgIHZhciBtYXRjaGluZ0VudGVyaW5nTm9kZXMgPSBQYXRoVXRpbHMubWF0Y2hpbmcocmVkaXJlY3RFbnRlcmluZ05vZGVzLCBvcmlnaW5hbEVudGVyaW5nTm9kZXMsIFBhdGhVdGlscy5ub25EeW5hbWljUGFyYW1zKVxuICAgICAgICAgICAgLmZpbHRlcihub3Qobm9kZUlzUmVsb2FkaW5nKHRhcmdldFN0YXRlLm9wdGlvbnMoKS5yZWxvYWRTdGF0ZSkpKTtcbiAgICAgICAgLy8gVXNlIHRoZSBleGlzdGluZyAocG9zc2libHkgcHJlLXJlc29sdmVkKSByZXNvbHZhYmxlcyBmb3IgdGhlIG1hdGNoaW5nIGVudGVyaW5nIG5vZGVzLlxuICAgICAgICBtYXRjaGluZ0VudGVyaW5nTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSwgaWR4KSB7XG4gICAgICAgICAgICBub2RlLnJlc29sdmFibGVzID0gb3JpZ2luYWxFbnRlcmluZ05vZGVzW2lkeF0ucmVzb2x2YWJsZXM7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3VHJhbnNpdGlvbjtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuIElmIGEgdHJhbnNpdGlvbiBkb2Vzbid0IGV4aXQvZW50ZXIgYW55IHN0YXRlcywgcmV0dXJucyBhbnkgW1tQYXJhbV1dIHdob3NlIHZhbHVlIGNoYW5nZWQgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5fY2hhbmdlZFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRjID0gdGhpcy5fdHJlZUNoYW5nZXM7XG4gICAgICAgIC8qKiBSZXR1cm4gdW5kZWZpbmVkIGlmIGl0J3Mgbm90IGEgXCJkeW5hbWljXCIgdHJhbnNpdGlvbiwgZm9yIHRoZSBmb2xsb3dpbmcgcmVhc29ucyAqL1xuICAgICAgICAvLyBJZiB1c2VyIGV4cGxpY2l0bHkgd2FudHMgYSByZWxvYWRcbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMucmVsb2FkKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgLy8gSWYgYW55IHN0YXRlcyBhcmUgZXhpdGluZyBvciBlbnRlcmluZ1xuICAgICAgICBpZiAodGMuZXhpdGluZy5sZW5ndGggfHwgdGMuZW50ZXJpbmcubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgLy8gSWYgdG8vZnJvbSBwYXRoIGxlbmd0aHMgZGlmZmVyXG4gICAgICAgIGlmICh0Yy50by5sZW5ndGggIT09IHRjLmZyb20ubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgLy8gSWYgdGhlIHRvL2Zyb20gcGF0aHMgYXJlIGRpZmZlcmVudFxuICAgICAgICB2YXIgcGF0aHNEaWZmZXIgPSBhcnJheVR1cGxlcyh0Yy50bywgdGMuZnJvbSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHR1cGxlKSB7IHJldHVybiB0dXBsZVswXS5zdGF0ZSAhPT0gdHVwbGVbMV0uc3RhdGU7IH0pXG4gICAgICAgICAgICAucmVkdWNlKGFueVRydWVSLCBmYWxzZSk7XG4gICAgICAgIGlmIChwYXRoc0RpZmZlcilcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIEZpbmQgYW55IHBhcmFtZXRlciB2YWx1ZXMgdGhhdCBkaWZmZXJcbiAgICAgICAgdmFyIG5vZGVTY2hlbWFzID0gdGMudG8ubWFwKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnBhcmFtU2NoZW1hOyB9KTtcbiAgICAgICAgdmFyIF9hID0gW3RjLnRvLCB0Yy5mcm9tXS5tYXAoZnVuY3Rpb24gKHBhdGgpIHsgcmV0dXJuIHBhdGgubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnBhcmFtVmFsdWVzOyB9KTsgfSksIHRvVmFsdWVzID0gX2FbMF0sIGZyb21WYWx1ZXMgPSBfYVsxXTtcbiAgICAgICAgdmFyIHR1cGxlcyA9IGFycmF5VHVwbGVzKG5vZGVTY2hlbWFzLCB0b1ZhbHVlcywgZnJvbVZhbHVlcyk7XG4gICAgICAgIHJldHVybiB0dXBsZXMubWFwKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgdmFyIHNjaGVtYSA9IF9hWzBdLCB0b1ZhbHMgPSBfYVsxXSwgZnJvbVZhbHMgPSBfYVsyXTtcbiAgICAgICAgICAgIHJldHVybiBQYXJhbS5jaGFuZ2VkKHNjaGVtYSwgdG9WYWxzLCBmcm9tVmFscyk7XG4gICAgICAgIH0pLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zaXRpb24gaXMgZHluYW1pYy5cbiAgICAgKlxuICAgICAqIEEgdHJhbnNpdGlvbiBpcyBkeW5hbWljIGlmIG5vIHN0YXRlcyBhcmUgZW50ZXJlZCBub3IgZXhpdGVkLCBidXQgYXQgbGVhc3Qgb25lIGR5bmFtaWMgcGFyYW1ldGVyIGhhcyBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgVHJhbnNpdGlvbiBpcyBkeW5hbWljXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZHluYW1pYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNoYW5nZXMgPSB0aGlzLl9jaGFuZ2VkUGFyYW1zKCk7XG4gICAgICAgIHJldHVybiAhY2hhbmdlcyA/IGZhbHNlIDogY2hhbmdlcy5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZHluYW1pYzsgfSkucmVkdWNlKGFueVRydWVSLCBmYWxzZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHRyYW5zaXRpb24gaXMgaWdub3JlZC5cbiAgICAgKlxuICAgICAqIEEgdHJhbnNpdGlvbiBpcyBpZ25vcmVkIGlmIG5vIHN0YXRlcyBhcmUgZW50ZXJlZCBub3IgZXhpdGVkLCBhbmQgbm8gcGFyYW1ldGVyIHZhbHVlcyBoYXZlIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBUcmFuc2l0aW9uIGlzIGlnbm9yZWQuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuaWdub3JlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5faWdub3JlZFJlYXNvbigpO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5faWdub3JlZFJlYXNvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBlbmRpbmcgPSB0aGlzLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XG4gICAgICAgIHZhciByZWxvYWRTdGF0ZSA9IHRoaXMuX29wdGlvbnMucmVsb2FkU3RhdGU7XG4gICAgICAgIHZhciBzYW1lID0gZnVuY3Rpb24gKHBhdGhBLCBwYXRoQikge1xuICAgICAgICAgICAgaWYgKHBhdGhBLmxlbmd0aCAhPT0gcGF0aEIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHZhciBtYXRjaGluZyA9IFBhdGhVdGlscy5tYXRjaGluZyhwYXRoQSwgcGF0aEIpO1xuICAgICAgICAgICAgcmV0dXJuIHBhdGhBLmxlbmd0aCA9PT0gbWF0Y2hpbmcuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiAhcmVsb2FkU3RhdGUgfHwgIW5vZGUuc3RhdGUuaW5jbHVkZXNbcmVsb2FkU3RhdGUubmFtZV07IH0pLmxlbmd0aDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG5ld1RDID0gdGhpcy50cmVlQ2hhbmdlcygpO1xuICAgICAgICB2YXIgcGVuZFRDID0gcGVuZGluZyAmJiBwZW5kaW5nLnRyZWVDaGFuZ2VzKCk7XG4gICAgICAgIGlmIChwZW5kVEMgJiYgc2FtZShwZW5kVEMudG8sIG5ld1RDLnRvKSAmJiBzYW1lKHBlbmRUQy5leGl0aW5nLCBuZXdUQy5leGl0aW5nKSlcbiAgICAgICAgICAgIHJldHVybiAnU2FtZUFzUGVuZGluZyc7XG4gICAgICAgIGlmIChuZXdUQy5leGl0aW5nLmxlbmd0aCA9PT0gMCAmJiBuZXdUQy5lbnRlcmluZy5sZW5ndGggPT09IDAgJiYgc2FtZShuZXdUQy5mcm9tLCBuZXdUQy50bykpXG4gICAgICAgICAgICByZXR1cm4gJ1NhbWVBc0N1cnJlbnQnO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgdHJhbnNpdGlvblxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgZ2VuZXJhbGx5IGNhbGxlZCBmcm9tIHRoZSBbW1N0YXRlU2VydmljZS50cmFuc2l0aW9uVG9dXVxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIGEgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFRyYW5zaXRpb24ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHJ1bkFsbEhvb2tzID0gVHJhbnNpdGlvbkhvb2sucnVuQWxsSG9va3M7XG4gICAgICAgIC8vIEdldHMgdHJhbnNpdGlvbiBob29rcyBhcnJheSBmb3IgdGhlIGdpdmVuIHBoYXNlXG4gICAgICAgIHZhciBnZXRIb29rc0ZvciA9IGZ1bmN0aW9uIChwaGFzZSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9ob29rQnVpbGRlci5idWlsZEhvb2tzRm9yUGhhc2UocGhhc2UpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBXaGVuIHRoZSBjaGFpbiBpcyBjb21wbGV0ZSwgdGhlbiByZXNvbHZlIG9yIHJlamVjdCB0aGUgZGVmZXJyZWRcbiAgICAgICAgdmFyIHRyYW5zaXRpb25TdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJhY2UudHJhY2VTdWNjZXNzKF90aGlzLiR0bygpLCBfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5zdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIF90aGlzLl9kZWZlcnJlZC5yZXNvbHZlKF90aGlzLnRvKCkpO1xuICAgICAgICAgICAgcnVuQWxsSG9va3MoZ2V0SG9va3NGb3IoZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlLlNVQ0NFU1MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHRyYW5zaXRpb25FcnJvciA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIHRyYWNlLnRyYWNlRXJyb3IocmVhc29uLCBfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5zdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpcy5fZGVmZXJyZWQucmVqZWN0KHJlYXNvbik7XG4gICAgICAgICAgICBfdGhpcy5fZXJyb3IgPSByZWFzb247XG4gICAgICAgICAgICBydW5BbGxIb29rcyhnZXRIb29rc0ZvcihleHBvcnRzLlRyYW5zaXRpb25Ib29rUGhhc2UuRVJST1IpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJ1blRyYW5zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBXYWl0IHRvIGJ1aWxkIHRoZSBSVU4gaG9vayBjaGFpbiB1bnRpbCB0aGUgQkVGT1JFIGhvb2tzIGFyZSBkb25lXG4gICAgICAgICAgICAvLyBUaGlzIGFsbG93cyBhIEJFRk9SRSBob29rIHRvIGR5bmFtaWNhbGx5IGFkZCBhZGRpdGlvbmFsIFJVTiBob29rcyB2aWEgdGhlIFRyYW5zaXRpb24gb2JqZWN0LlxuICAgICAgICAgICAgdmFyIGFsbFJ1bkhvb2tzID0gZ2V0SG9va3NGb3IoZXhwb3J0cy5UcmFuc2l0aW9uSG9va1BoYXNlLlJVTik7XG4gICAgICAgICAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4odW5kZWZpbmVkKTsgfTtcbiAgICAgICAgICAgIHJldHVybiBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhhbGxSdW5Ib29rcywgZG9uZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBzdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ2xvYmFscyA9IF90aGlzLnJvdXRlci5nbG9iYWxzO1xuICAgICAgICAgICAgZ2xvYmFscy5sYXN0U3RhcnRlZFRyYW5zaXRpb25JZCA9IF90aGlzLiRpZDtcbiAgICAgICAgICAgIGdsb2JhbHMudHJhbnNpdGlvbiA9IF90aGlzO1xuICAgICAgICAgICAgZ2xvYmFscy50cmFuc2l0aW9uSGlzdG9yeS5lbnF1ZXVlKF90aGlzKTtcbiAgICAgICAgICAgIHRyYWNlLnRyYWNlVHJhbnNpdGlvblN0YXJ0KF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKHVuZGVmaW5lZCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhbGxCZWZvcmVIb29rcyA9IGdldEhvb2tzRm9yKGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tQaGFzZS5CRUZPUkUpO1xuICAgICAgICBUcmFuc2l0aW9uSG9vay5pbnZva2VIb29rcyhhbGxCZWZvcmVIb29rcywgc3RhcnRUcmFuc2l0aW9uKVxuICAgICAgICAgICAgLnRoZW4ocnVuVHJhbnNpdGlvbilcbiAgICAgICAgICAgIC50aGVuKHRyYW5zaXRpb25TdWNjZXNzLCB0cmFuc2l0aW9uRXJyb3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBUcmFuc2l0aW9uIGlzIHZhbGlkXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBUcmFuc2l0aW9uIGlzIHZhbGlkXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUudmFsaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5lcnJvcigpIHx8IHRoaXMuc3VjY2VzcyAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWJvcnRzIHRoaXMgdHJhbnNpdGlvblxuICAgICAqXG4gICAgICogSW1wZXJhdGl2ZSBBUEkgdG8gYWJvcnQgYSBUcmFuc2l0aW9uLlxuICAgICAqIFRoaXMgb25seSBhcHBsaWVzIHRvIFRyYW5zaXRpb25zIHRoYXQgYXJlIG5vdCB5ZXQgY29tcGxldGUuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIERvIG5vdCBzZXQgZmxhZyBpZiB0aGUgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IGNvbXBsZXRlXG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh0aGlzLnN1Y2Nlc3MpKSB7XG4gICAgICAgICAgICB0aGlzLl9hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIFRyYW5zaXRpb24gZXJyb3IgcmVhc29uLlxuICAgICAqXG4gICAgICogSWYgdGhlIHRyYW5zaXRpb24gaXMgaW52YWxpZCAoYW5kIGNvdWxkIG5vdCBiZSBydW4pLCByZXR1cm5zIHRoZSByZWFzb24gdGhlIHRyYW5zaXRpb24gaXMgaW52YWxpZC5cbiAgICAgKiBJZiB0aGUgdHJhbnNpdGlvbiB3YXMgdmFsaWQgYW5kIHJhbiwgYnV0IHdhcyBub3Qgc3VjY2Vzc2Z1bCwgcmV0dXJucyB0aGUgcmVhc29uIHRoZSB0cmFuc2l0aW9uIGZhaWxlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFuIGVycm9yIG1lc3NhZ2UgZXhwbGFpbmluZyB3aHkgdGhlIHRyYW5zaXRpb24gaXMgaW52YWxpZCwgb3IgdGhlIHJlYXNvbiB0aGUgdHJhbnNpdGlvbiBmYWlsZWQuXG4gICAgICovXG4gICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuJHRvKCk7XG4gICAgICAgIGlmIChzdGF0ZS5zZWxmLmFic3RyYWN0KVxuICAgICAgICAgICAgcmV0dXJuIFwiQ2Fubm90IHRyYW5zaXRpb24gdG8gYWJzdHJhY3Qgc3RhdGUgJ1wiICsgc3RhdGUubmFtZSArIFwiJ1wiO1xuICAgICAgICB2YXIgcGFyYW1EZWZzID0gc3RhdGUucGFyYW1ldGVycygpLCB2YWx1ZXMkJDEgPSB0aGlzLnBhcmFtcygpO1xuICAgICAgICB2YXIgaW52YWxpZFBhcmFtcyA9IHBhcmFtRGVmcy5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhcGFyYW0udmFsaWRhdGVzKHZhbHVlcyQkMVtwYXJhbS5pZF0pOyB9KTtcbiAgICAgICAgaWYgKGludmFsaWRQYXJhbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJQYXJhbSB2YWx1ZXMgbm90IHZhbGlkIGZvciBzdGF0ZSAnXCIgKyBzdGF0ZS5uYW1lICsgXCInLiBJbnZhbGlkIHBhcmFtczogWyBcIiArIGludmFsaWRQYXJhbXMubWFwKGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gcGFyYW0uaWQ7IH0pLmpvaW4oJywgJykgKyBcIiBdXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3VjY2VzcyA9PT0gZmFsc2UpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgVHJhbnNpdGlvblxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIFRyYW5zaXRpb25cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyb21TdGF0ZU9yTmFtZSA9IHRoaXMuZnJvbSgpO1xuICAgICAgICB2YXIgdG9TdGF0ZU9yTmFtZSA9IHRoaXMudG8oKTtcbiAgICAgICAgdmFyIGF2b2lkRW1wdHlIYXNoID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuIChwYXJhbXNbJyMnXSAhPT0gbnVsbCAmJiBwYXJhbXNbJyMnXSAhPT0gdW5kZWZpbmVkKSA/IHBhcmFtcyA6IG9taXQocGFyYW1zLCBbJyMnXSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIChYKSBtZWFucyB0aGUgdG8gc3RhdGUgaXMgaW52YWxpZC5cbiAgICAgICAgdmFyIGlkID0gdGhpcy4kaWQsIGZyb20gPSBpc09iamVjdChmcm9tU3RhdGVPck5hbWUpID8gZnJvbVN0YXRlT3JOYW1lLm5hbWUgOiBmcm9tU3RhdGVPck5hbWUsIGZyb21QYXJhbXMgPSBzdHJpbmdpZnkoYXZvaWRFbXB0eUhhc2godGhpcy5fdHJlZUNoYW5nZXMuZnJvbS5tYXAocHJvcCgncGFyYW1WYWx1ZXMnKSkucmVkdWNlKG1lcmdlUiwge30pKSksIHRvVmFsaWQgPSB0aGlzLnZhbGlkKCkgPyAnJyA6ICcoWCkgJywgdG8gPSBpc09iamVjdCh0b1N0YXRlT3JOYW1lKSA/IHRvU3RhdGVPck5hbWUubmFtZSA6IHRvU3RhdGVPck5hbWUsIHRvUGFyYW1zID0gc3RyaW5naWZ5KGF2b2lkRW1wdHlIYXNoKHRoaXMucGFyYW1zKCkpKTtcbiAgICAgICAgcmV0dXJuIFwiVHJhbnNpdGlvbiNcIiArIGlkICsgXCIoICdcIiArIGZyb20gKyBcIidcIiArIGZyb21QYXJhbXMgKyBcIiAtPiBcIiArIHRvVmFsaWQgKyBcIidcIiArIHRvICsgXCInXCIgKyB0b1BhcmFtcyArIFwiIClcIjtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvbi5kaVRva2VuID0gVHJhbnNpdGlvbjtcbiAgICByZXR1cm4gVHJhbnNpdGlvbjtcbn0oKSk7XG5cbi8qKlxuICogRnVuY3Rpb25zIHRoYXQgbWFuaXB1bGF0ZSBzdHJpbmdzXG4gKlxuICogQWx0aG91Z2ggdGhlc2UgZnVuY3Rpb25zIGFyZSBleHBvcnRlZCwgdGhleSBhcmUgc3ViamVjdCB0byBjaGFuZ2Ugd2l0aG91dCBub3RpY2UuXG4gKlxuICogQG1vZHVsZSBjb21tb25fc3RyaW5nc1xuICovIC8qKiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHNob3J0ZW5lZCB0byBhIG1heGltdW0gbGVuZ3RoXG4gKlxuICogSWYgdGhlIHN0cmluZyBpcyBhbHJlYWR5IGxlc3MgdGhhbiB0aGUgYG1heGAgbGVuZ3RoLCByZXR1cm4gdGhlIHN0cmluZy5cbiAqIEVsc2UgcmV0dXJuIHRoZSBzdHJpbmcsIHNob3J0ZW5lZCB0byBgbWF4IC0gM2AgYW5kIGFwcGVuZCB0aHJlZSBkb3RzIChcIi4uLlwiKS5cbiAqXG4gKiBAcGFyYW0gbWF4IHRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgc3RyaW5nIHRvIHJldHVyblxuICogQHBhcmFtIHN0ciB0aGUgaW5wdXQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIG1heExlbmd0aChtYXgsIHN0cikge1xuICAgIGlmIChzdHIubGVuZ3RoIDw9IG1heClcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICByZXR1cm4gc3RyLnN1YnN0cigwLCBtYXggLSAzKSArICcuLi4nO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgc3RyaW5nLCB3aXRoIHNwYWNlcyBhZGRlZCB0byB0aGUgZW5kLCB1cCB0byBhIGRlc2lyZWQgc3RyIGxlbmd0aFxuICpcbiAqIElmIHRoZSBzdHJpbmcgaXMgYWxyZWFkeSBsb25nZXIgdGhhbiB0aGUgZGVzaXJlZCBsZW5ndGgsIHJldHVybiB0aGUgc3RyaW5nLlxuICogRWxzZSByZXR1cm5zIHRoZSBzdHJpbmcsIHdpdGggZXh0cmEgc3BhY2VzIG9uIHRoZSBlbmQsIHN1Y2ggdGhhdCBpdCByZWFjaGVzIGBsZW5ndGhgIGNoYXJhY3RlcnMuXG4gKlxuICogQHBhcmFtIGxlbmd0aCB0aGUgZGVzaXJlZCBsZW5ndGggb2YgdGhlIHN0cmluZyB0byByZXR1cm5cbiAqIEBwYXJhbSBzdHIgdGhlIGlucHV0IHN0cmluZ1xuICovXG5mdW5jdGlvbiBwYWRTdHJpbmcobGVuZ3RoLCBzdHIpIHtcbiAgICB3aGlsZSAoc3RyLmxlbmd0aCA8IGxlbmd0aClcbiAgICAgICAgc3RyICs9ICcgJztcbiAgICByZXR1cm4gc3RyO1xufVxuZnVuY3Rpb24ga2Vib2JTdHJpbmcoY2FtZWxDYXNlKSB7XG4gICAgcmV0dXJuIGNhbWVsQ2FzZVxuICAgICAgICAucmVwbGFjZSgvXihbQS1aXSkvLCBmdW5jdGlvbiAoJDEpIHsgcmV0dXJuICQxLnRvTG93ZXJDYXNlKCk7IH0pIC8vIHJlcGxhY2UgZmlyc3QgY2hhclxuICAgICAgICAucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoJDEpIHsgcmV0dXJuICctJyArICQxLnRvTG93ZXJDYXNlKCk7IH0pOyAvLyByZXBsYWNlIHJlc3Rcbn1cbmZ1bmN0aW9uIGZ1bmN0aW9uVG9TdHJpbmcoZm4pIHtcbiAgICB2YXIgZm5TdHIgPSBmblRvU3RyaW5nKGZuKTtcbiAgICB2YXIgbmFtZWRGdW5jdGlvbk1hdGNoID0gZm5TdHIubWF0Y2goL14oZnVuY3Rpb24gW14gXStcXChbXildKlxcKSkvKTtcbiAgICB2YXIgdG9TdHIgPSBuYW1lZEZ1bmN0aW9uTWF0Y2ggPyBuYW1lZEZ1bmN0aW9uTWF0Y2hbMV0gOiBmblN0cjtcbiAgICB2YXIgZm5OYW1lID0gZm5bJ25hbWUnXSB8fCAnJztcbiAgICBpZiAoZm5OYW1lICYmIHRvU3RyLm1hdGNoKC9mdW5jdGlvbiBcXCgvKSkge1xuICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uICcgKyBmbk5hbWUgKyB0b1N0ci5zdWJzdHIoOSk7XG4gICAgfVxuICAgIHJldHVybiB0b1N0cjtcbn1cbmZ1bmN0aW9uIGZuVG9TdHJpbmcoZm4pIHtcbiAgICB2YXIgX2ZuID0gaXNBcnJheShmbikgPyBmbi5zbGljZSgtMSlbMF0gOiBmbjtcbiAgICByZXR1cm4gX2ZuICYmIF9mbi50b1N0cmluZygpIHx8ICd1bmRlZmluZWQnO1xufVxudmFyIHN0cmluZ2lmeVBhdHRlcm5GbiA9IG51bGw7XG52YXIgc3RyaW5naWZ5UGF0dGVybiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBpc1JlamVjdGlvbiA9IFJlamVjdGlvbi5pc1JlamVjdGlvblByb21pc2U7XG4gICAgc3RyaW5naWZ5UGF0dGVybkZuID0gc3RyaW5naWZ5UGF0dGVybkZuIHx8IHBhdHRlcm4oW1xuICAgICAgICBbbm90KGlzRGVmaW5lZCksIHZhbCgndW5kZWZpbmVkJyldLFxuICAgICAgICBbaXNOdWxsLCB2YWwoJ251bGwnKV0sXG4gICAgICAgIFtpc1Byb21pc2UsIHZhbCgnW1Byb21pc2VdJyldLFxuICAgICAgICBbaXNSZWplY3Rpb24sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Ll90cmFuc2l0aW9uUmVqZWN0aW9uLnRvU3RyaW5nKCk7IH1dLFxuICAgICAgICBbaXMoUmVqZWN0aW9uKSwgaW52b2tlKCd0b1N0cmluZycpXSxcbiAgICAgICAgW2lzKFRyYW5zaXRpb24pLCBpbnZva2UoJ3RvU3RyaW5nJyldLFxuICAgICAgICBbaXMoUmVzb2x2YWJsZSksIGludm9rZSgndG9TdHJpbmcnKV0sXG4gICAgICAgIFtpc0luamVjdGFibGUsIGZ1bmN0aW9uVG9TdHJpbmddLFxuICAgICAgICBbdmFsKHRydWUpLCBpZGVudGl0eV0sXG4gICAgXSk7XG4gICAgcmV0dXJuIHN0cmluZ2lmeVBhdHRlcm5Gbih2YWx1ZSk7XG59O1xuZnVuY3Rpb24gc3RyaW5naWZ5KG8pIHtcbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSkge1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgICBpZiAoc2Vlbi5pbmRleE9mKHZhbHVlKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuICdbY2lyY3VsYXIgcmVmXSc7XG4gICAgICAgICAgICBzZWVuLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmdpZnlQYXR0ZXJuKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG8sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7IHJldHVybiBmb3JtYXQodmFsdWUpOyB9KS5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJyk7XG59XG4vKiogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgc3BsaXRzIGEgc3RyaW5nIG9uIGEgY2hhcmFjdGVyIG9yIHN1YnN0cmluZyAqL1xudmFyIGJlZm9yZUFmdGVyU3Vic3RyID0gZnVuY3Rpb24gKGNoYXIpIHsgcmV0dXJuIGZ1bmN0aW9uIChzdHIpIHtcbiAgICBpZiAoIXN0cilcbiAgICAgICAgcmV0dXJuIFsnJywgJyddO1xuICAgIHZhciBpZHggPSBzdHIuaW5kZXhPZihjaGFyKTtcbiAgICBpZiAoaWR4ID09PSAtMSlcbiAgICAgICAgcmV0dXJuIFtzdHIsICcnXTtcbiAgICByZXR1cm4gW3N0ci5zdWJzdHIoMCwgaWR4KSwgc3RyLnN1YnN0cihpZHggKyAxKV07XG59OyB9O1xudmFyIGhvc3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oPzpbYS16XSs6KT8vL1teL10rLycpO1xudmFyIHN0cmlwTGFzdFBhdGhFbGVtZW50ID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyLnJlcGxhY2UoL1xcL1teL10qJC8sICcnKTsgfTtcbnZhciBzcGxpdEhhc2ggPSBiZWZvcmVBZnRlclN1YnN0cignIycpO1xudmFyIHNwbGl0UXVlcnkgPSBiZWZvcmVBZnRlclN1YnN0cignPycpO1xudmFyIHNwbGl0RXF1YWwgPSBiZWZvcmVBZnRlclN1YnN0cignPScpO1xudmFyIHRyaW1IYXNoVmFsID0gZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gc3RyID8gc3RyLnJlcGxhY2UoL14jLywgJycpIDogJyc7IH07XG4vKipcbiAqIFNwbGl0cyBvbiBhIGRlbGltaXRlciwgYnV0IHJldHVybnMgdGhlIGRlbGltaXRlcnMgaW4gdGhlIGFycmF5XG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqIHZhciBzcGxpdE9uU2xhc2hlcyA9IHNwbGl0T25EZWxpbSgnLycpO1xuICogc3BsaXRPblNsYXNoZXMoXCIvZm9vXCIpOyAvLyBbXCIvXCIsIFwiZm9vXCJdXG4gKiBzcGxpdE9uU2xhc2hlcyhcIi9mb28vXCIpOyAvLyBbXCIvXCIsIFwiZm9vXCIsIFwiL1wiXVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIHNwbGl0T25EZWxpbShkZWxpbSkge1xuICAgIHZhciByZSA9IG5ldyBSZWdFeHAoJygnICsgZGVsaW0gKyAnKScsICdnJyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5zcGxpdChyZSkuZmlsdGVyKGlkZW50aXR5KTtcbiAgICB9O1xufVxuLyoqXG4gKiBSZWR1Y2UgZm4gdGhhdCBqb2lucyBuZWlnaGJvcmluZyBzdHJpbmdzXG4gKlxuICogR2l2ZW4gYW4gYXJyYXkgb2Ygc3RyaW5ncywgcmV0dXJucyBhIG5ldyBhcnJheVxuICogd2hlcmUgYWxsIG5laWdoYm9yaW5nIHN0cmluZ3MgaGF2ZSBiZWVuIGpvaW5lZC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogbGV0IGFyciA9IFtcImZvb1wiLCBcImJhclwiLCAxLCBcImJhelwiLCBcIlwiLCBcInF1eFwiIF07XG4gKiBhcnIucmVkdWNlKGpvaW5OZWlnaGJvcnNSLCBbXSkgLy8gW1wiZm9vYmFyXCIsIDEsIFwiYmF6cXV4XCIgXVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIGpvaW5OZWlnaGJvcnNSKGFjYywgeCkge1xuICAgIGlmIChpc1N0cmluZyh0YWlsKGFjYykpICYmIGlzU3RyaW5nKHgpKVxuICAgICAgICByZXR1cm4gYWNjLnNsaWNlKDAsIC0xKS5jb25jYXQodGFpbChhY2MpICsgeCk7XG4gICAgcmV0dXJuIHB1c2hSKGFjYywgeCk7XG59XG5cbi8qKiBAbW9kdWxlIGNvbW1vbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBwYXJhbXNcbiAqL1xuLyoqICovXG4vKipcbiAqIEEgcmVnaXN0cnkgZm9yIHBhcmFtZXRlciB0eXBlcy5cbiAqXG4gKiBUaGlzIHJlZ2lzdHJ5IG1hbmFnZXMgdGhlIGJ1aWx0LWluIChhbmQgY3VzdG9tKSBwYXJhbWV0ZXIgdHlwZXMuXG4gKlxuICogVGhlIGJ1aWx0LWluIHBhcmFtZXRlciB0eXBlcyBhcmU6XG4gKlxuICogLSBbW3N0cmluZ11dXG4gKiAtIFtbcGF0aF1dXG4gKiAtIFtbcXVlcnldXVxuICogLSBbW2hhc2hdXVxuICogLSBbW2ludF1dXG4gKiAtIFtbYm9vbF1dXG4gKiAtIFtbZGF0ZV1dXG4gKiAtIFtbanNvbl1dXG4gKiAtIFtbYW55XV1cbiAqL1xudmFyIFBhcmFtVHlwZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIGZ1bmN0aW9uIFBhcmFtVHlwZXMoKSB7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuZW5xdWV1ZSA9IHRydWU7XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMudHlwZVF1ZXVlID0gW107XG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0VHlwZXMgPSBwaWNrKFBhcmFtVHlwZXMucHJvdG90eXBlLCBbJ2hhc2gnLCAnc3RyaW5nJywgJ3F1ZXJ5JywgJ3BhdGgnLCAnaW50JywgJ2Jvb2wnLCAnZGF0ZScsICdqc29uJywgJ2FueSddKTtcbiAgICAgICAgLy8gUmVnaXN0ZXIgZGVmYXVsdCB0eXBlcy4gU3RvcmUgdGhlbSBpbiB0aGUgcHJvdG90eXBlIG9mIHRoaXMudHlwZXMuXG4gICAgICAgIHZhciBtYWtlVHlwZSA9IGZ1bmN0aW9uIChkZWZpbml0aW9uLCBuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBhcmFtVHlwZShleHRlbmQoeyBuYW1lOiBuYW1lIH0sIGRlZmluaXRpb24pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50eXBlcyA9IGluaGVyaXQobWFwKHRoaXMuZGVmYXVsdFR5cGVzLCBtYWtlVHlwZSksIHt9KTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIFBhcmFtVHlwZXMucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHlwZXMgPSB7fTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIHBhcmFtZXRlciB0eXBlXG4gICAgICpcbiAgICAgKiBFbmQgdXNlcnMgc2hvdWxkIGNhbGwgW1tVcmxNYXRjaGVyRmFjdG9yeS50eXBlXV0sIHdoaWNoIGRlbGVnYXRlcyB0byB0aGlzIG1ldGhvZC5cbiAgICAgKi9cbiAgICBQYXJhbVR5cGVzLnByb3RvdHlwZS50eXBlID0gZnVuY3Rpb24gKG5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb25Gbikge1xuICAgICAgICBpZiAoIWlzRGVmaW5lZChkZWZpbml0aW9uKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR5cGVzW25hbWVdO1xuICAgICAgICBpZiAodGhpcy50eXBlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkEgdHlwZSBuYW1lZCAnXCIgKyBuYW1lICsgXCInIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC5cIik7XG4gICAgICAgIHRoaXMudHlwZXNbbmFtZV0gPSBuZXcgUGFyYW1UeXBlKGV4dGVuZCh7IG5hbWU6IG5hbWUgfSwgZGVmaW5pdGlvbikpO1xuICAgICAgICBpZiAoZGVmaW5pdGlvbkZuKSB7XG4gICAgICAgICAgICB0aGlzLnR5cGVRdWV1ZS5wdXNoKHsgbmFtZTogbmFtZSwgZGVmOiBkZWZpbml0aW9uRm4gfSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5xdWV1ZSlcbiAgICAgICAgICAgICAgICB0aGlzLl9mbHVzaFR5cGVRdWV1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIFBhcmFtVHlwZXMucHJvdG90eXBlLl9mbHVzaFR5cGVRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMudHlwZVF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGVRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKHR5cGUucGF0dGVybilcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgY2Fubm90IG92ZXJyaWRlIGEgdHlwZSdzIC5wYXR0ZXJuIGF0IHJ1bnRpbWUuXCIpO1xuICAgICAgICAgICAgZXh0ZW5kKHRoaXMudHlwZXNbdHlwZS5uYW1lXSwgc2VydmljZXMuJGluamVjdG9yLmludm9rZSh0eXBlLmRlZikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGFyYW1UeXBlcztcbn0oKSk7XG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gaW5pdERlZmF1bHRUeXBlcygpIHtcbiAgICB2YXIgbWFrZURlZmF1bHRUeXBlID0gZnVuY3Rpb24gKGRlZikge1xuICAgICAgICB2YXIgdmFsVG9TdHJpbmcgPSBmdW5jdGlvbiAodmFsJCQxKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsJCQxICE9IG51bGwgPyB2YWwkJDEudG9TdHJpbmcoKSA6IHZhbCQkMTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGRlZmF1bHRUeXBlQmFzZSA9IHtcbiAgICAgICAgICAgIGVuY29kZTogdmFsVG9TdHJpbmcsXG4gICAgICAgICAgICBkZWNvZGU6IHZhbFRvU3RyaW5nLFxuICAgICAgICAgICAgaXM6IGlzKFN0cmluZyksXG4gICAgICAgICAgICBwYXR0ZXJuOiAvLiovLFxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnRyaXBsZS1lcXVhbHNcbiAgICAgICAgICAgIGVxdWFsczogZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgPT0gYjsgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgZGVmYXVsdFR5cGVCYXNlLCBkZWYpO1xuICAgIH07XG4gICAgLy8gRGVmYXVsdCBQYXJhbWV0ZXIgVHlwZSBEZWZpbml0aW9uc1xuICAgIGV4dGVuZChQYXJhbVR5cGVzLnByb3RvdHlwZSwge1xuICAgICAgICBzdHJpbmc6IG1ha2VEZWZhdWx0VHlwZSh7fSksXG4gICAgICAgIHBhdGg6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBwYXR0ZXJuOiAvW14vXSovLFxuICAgICAgICB9KSxcbiAgICAgICAgcXVlcnk6IG1ha2VEZWZhdWx0VHlwZSh7fSksXG4gICAgICAgIGhhc2g6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBpbmhlcml0OiBmYWxzZSxcbiAgICAgICAgfSksXG4gICAgICAgIGludDogbWFrZURlZmF1bHRUeXBlKHtcbiAgICAgICAgICAgIGRlY29kZTogZnVuY3Rpb24gKHZhbCQkMSkgeyByZXR1cm4gcGFyc2VJbnQodmFsJCQxLCAxMCk7IH0sXG4gICAgICAgICAgICBpczogZnVuY3Rpb24gKHZhbCQkMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQodmFsJCQxKSAmJiB0aGlzLmRlY29kZSh2YWwkJDEudG9TdHJpbmcoKSkgPT09IHZhbCQkMTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXR0ZXJuOiAvLT9cXGQrLyxcbiAgICAgICAgfSksXG4gICAgICAgIGJvb2w6IG1ha2VEZWZhdWx0VHlwZSh7XG4gICAgICAgICAgICBlbmNvZGU6IGZ1bmN0aW9uICh2YWwkJDEpIHsgcmV0dXJuIHZhbCQkMSAmJiAxIHx8IDA7IH0sXG4gICAgICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uICh2YWwkJDEpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCQkMSwgMTApICE9PSAwOyB9LFxuICAgICAgICAgICAgaXM6IGlzKEJvb2xlYW4pLFxuICAgICAgICAgICAgcGF0dGVybjogLzB8MS8sXG4gICAgICAgIH0pLFxuICAgICAgICBkYXRlOiBtYWtlRGVmYXVsdFR5cGUoe1xuICAgICAgICAgICAgZW5jb2RlOiBmdW5jdGlvbiAodmFsJCQxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmlzKHZhbCQkMSkgPyB1bmRlZmluZWQgOiBbXG4gICAgICAgICAgICAgICAgICAgIHZhbCQkMS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgICAgICAgICAgICAoJzAnICsgKHZhbCQkMS5nZXRNb250aCgpICsgMSkpLnNsaWNlKC0yKSxcbiAgICAgICAgICAgICAgICAgICAgKCcwJyArIHZhbCQkMS5nZXREYXRlKCkpLnNsaWNlKC0yKSxcbiAgICAgICAgICAgICAgICBdLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWNvZGU6IGZ1bmN0aW9uICh2YWwkJDEpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pcyh2YWwkJDEpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsJCQxO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IHRoaXMuY2FwdHVyZS5leGVjKHZhbCQkMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoID8gbmV3IERhdGUobWF0Y2hbMV0sIG1hdGNoWzJdIC0gMSwgbWF0Y2hbM10pIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzOiBmdW5jdGlvbiAodmFsJCQxKSB7IHJldHVybiB2YWwkJDEgaW5zdGFuY2VvZiBEYXRlICYmICFpc05hTih2YWwkJDEudmFsdWVPZigpKTsgfSxcbiAgICAgICAgICAgIGVxdWFsczogZnVuY3Rpb24gKGwsIHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWydnZXRGdWxsWWVhcicsICdnZXRNb250aCcsICdnZXREYXRlJ11cbiAgICAgICAgICAgICAgICAgICAgLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBmbikgeyByZXR1cm4gYWNjICYmIGxbZm5dKCkgPT09IHJbZm5dKCk7IH0sIHRydWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdHRlcm46IC9bMC05XXs0fS0oPzowWzEtOV18MVswLTJdKS0oPzowWzEtOV18WzEtMl1bMC05XXwzWzAtMV0pLyxcbiAgICAgICAgICAgIGNhcHR1cmU6IC8oWzAtOV17NH0pLSgwWzEtOV18MVswLTJdKS0oMFsxLTldfFsxLTJdWzAtOV18M1swLTFdKS8sXG4gICAgICAgIH0pLFxuICAgICAgICBqc29uOiBtYWtlRGVmYXVsdFR5cGUoe1xuICAgICAgICAgICAgZW5jb2RlOiB0b0pzb24sXG4gICAgICAgICAgICBkZWNvZGU6IGZyb21Kc29uLFxuICAgICAgICAgICAgaXM6IGlzKE9iamVjdCksXG4gICAgICAgICAgICBlcXVhbHM6IGVxdWFscyxcbiAgICAgICAgICAgIHBhdHRlcm46IC9bXi9dKi8sXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBkb2VzIG5vdCBlbmNvZGUvZGVjb2RlXG4gICAgICAgIGFueTogbWFrZURlZmF1bHRUeXBlKHtcbiAgICAgICAgICAgIGVuY29kZTogaWRlbnRpdHksXG4gICAgICAgICAgICBkZWNvZGU6IGlkZW50aXR5LFxuICAgICAgICAgICAgaXM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgICAgICAgICBlcXVhbHM6IGVxdWFscyxcbiAgICAgICAgfSksXG4gICAgfSk7XG59XG5pbml0RGVmYXVsdFR5cGVzKCk7XG5cbi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgcGFyYW1zXG4gKi9cbi8qKiAqL1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFN0YXRlUGFyYW1zID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRlUGFyYW1zKHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHsgcGFyYW1zID0ge307IH1cbiAgICAgICAgZXh0ZW5kKHRoaXMsIHBhcmFtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1lcmdlcyBhIHNldCBvZiBwYXJhbWV0ZXJzIHdpdGggYWxsIHBhcmFtZXRlcnMgaW5oZXJpdGVkIGJldHdlZW4gdGhlIGNvbW1vbiBwYXJlbnRzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgc3RhdGUgYW5kIGEgZ2l2ZW4gZGVzdGluYXRpb24gc3RhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbmV3UGFyYW1zIFRoZSBzZXQgb2YgcGFyYW1ldGVycyB3aGljaCB3aWxsIGJlIGNvbXBvc2l0ZWQgd2l0aCBpbmhlcml0ZWQgcGFyYW1zLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkY3VycmVudCBJbnRlcm5hbCBkZWZpbml0aW9uIG9mIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9ICR0byBJbnRlcm5hbCBkZWZpbml0aW9uIG9mIG9iamVjdCByZXByZXNlbnRpbmcgc3RhdGUgdG8gdHJhbnNpdGlvbiB0by5cbiAgICAgKi9cbiAgICBTdGF0ZVBhcmFtcy5wcm90b3R5cGUuJGluaGVyaXQgPSBmdW5jdGlvbiAobmV3UGFyYW1zLCAkY3VycmVudCwgJHRvKSB7XG4gICAgICAgIHZhciBwYXJlbnRQYXJhbXM7XG4gICAgICAgIHZhciBwYXJlbnRzID0gYW5jZXN0b3JzKCRjdXJyZW50LCAkdG8pLCBpbmhlcml0ZWQgPSB7fSwgaW5oZXJpdExpc3QgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBwYXJlbnRzKSB7XG4gICAgICAgICAgICBpZiAoIXBhcmVudHNbaV0gfHwgIXBhcmVudHNbaV0ucGFyYW1zKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgcGFyZW50UGFyYW1zID0gT2JqZWN0LmtleXMocGFyZW50c1tpXS5wYXJhbXMpO1xuICAgICAgICAgICAgaWYgKCFwYXJlbnRQYXJhbXMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBwYXJlbnRQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5oZXJpdExpc3QuaW5kZXhPZihwYXJlbnRQYXJhbXNbal0pID49IDApXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGluaGVyaXRMaXN0LnB1c2gocGFyZW50UGFyYW1zW2pdKTtcbiAgICAgICAgICAgICAgICBpbmhlcml0ZWRbcGFyZW50UGFyYW1zW2pdXSA9IHRoaXNbcGFyZW50UGFyYW1zW2pdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCBpbmhlcml0ZWQsIG5ld1BhcmFtcyk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGVQYXJhbXM7XG59KCkpO1xuXG4vKiogQG1vZHVsZSBwYXRoICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuXG4vKiogQG1vZHVsZSByZXNvbHZlICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuXG4vKiogQG1vZHVsZSBzdGF0ZSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbnZhciBwYXJzZVVybCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICBpZiAoIWlzU3RyaW5nKHVybCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB2YXIgcm9vdCQkMSA9IHVybC5jaGFyQXQoMCkgPT09ICdeJztcbiAgICByZXR1cm4geyB2YWw6IHJvb3QkJDEgPyB1cmwuc3Vic3RyaW5nKDEpIDogdXJsLCByb290OiByb290JCQxIH07XG59O1xuZnVuY3Rpb24gbmFtZUJ1aWxkZXIoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUubmFtZTtcbn1cbmZ1bmN0aW9uIHNlbGZCdWlsZGVyKHN0YXRlKSB7XG4gICAgc3RhdGUuc2VsZi4kJHN0YXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc3RhdGU7IH07XG4gICAgcmV0dXJuIHN0YXRlLnNlbGY7XG59XG5mdW5jdGlvbiBkYXRhQnVpbGRlcihzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5wYXJlbnQgJiYgc3RhdGUucGFyZW50LmRhdGEpIHtcbiAgICAgICAgc3RhdGUuZGF0YSA9IHN0YXRlLnNlbGYuZGF0YSA9IGluaGVyaXQoc3RhdGUucGFyZW50LmRhdGEsIHN0YXRlLmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGUuZGF0YTtcbn1cbnZhciBnZXRVcmxCdWlsZGVyID0gZnVuY3Rpb24gKCR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyLCByb290JCQxKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVybEJ1aWxkZXIoc3RhdGUpIHtcbiAgICAgICAgdmFyIHN0YXRlRGVjID0gc3RhdGU7XG4gICAgICAgIC8vIEZvciBmdXR1cmUgc3RhdGVzLCBpLmUuLCBzdGF0ZXMgd2hvc2UgbmFtZSBlbmRzIHdpdGggYC4qKmAsXG4gICAgICAgIC8vIG1hdGNoIGFueXRoaW5nIHRoYXQgc3RhcnRzIHdpdGggdGhlIHVybCBwcmVmaXhcbiAgICAgICAgaWYgKHN0YXRlRGVjICYmIHN0YXRlRGVjLnVybCAmJiBzdGF0ZURlYy5uYW1lICYmIHN0YXRlRGVjLm5hbWUubWF0Y2goL1xcLlxcKlxcKiQvKSkge1xuICAgICAgICAgICAgc3RhdGVEZWMudXJsICs9ICd7cmVtYWluZGVyOmFueX0nOyAvLyBtYXRjaCBhbnkgcGF0aCAoLiopXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlVXJsKHN0YXRlRGVjLnVybCksIHBhcmVudCA9IHN0YXRlLnBhcmVudDtcbiAgICAgICAgdmFyIHVybCA9ICFwYXJzZWQgPyBzdGF0ZURlYy51cmwgOiAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5jb21waWxlKHBhcnNlZC52YWwsIHtcbiAgICAgICAgICAgIHBhcmFtczogc3RhdGUucGFyYW1zIHx8IHt9LFxuICAgICAgICAgICAgcGFyYW1NYXA6IGZ1bmN0aW9uIChwYXJhbUNvbmZpZywgaXNTZWFyY2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGVEZWMucmVsb2FkT25TZWFyY2ggPT09IGZhbHNlICYmIGlzU2VhcmNoKVxuICAgICAgICAgICAgICAgICAgICBwYXJhbUNvbmZpZyA9IGV4dGVuZChwYXJhbUNvbmZpZyB8fCB7fSwgeyBkeW5hbWljOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbUNvbmZpZztcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXVybClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoISR1cmxNYXRjaGVyRmFjdG9yeVByb3ZpZGVyLmlzTWF0Y2hlcih1cmwpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB1cmwgJ1wiICsgdXJsICsgXCInIGluIHN0YXRlICdcIiArIHN0YXRlICsgXCInXCIpO1xuICAgICAgICByZXR1cm4gKHBhcnNlZCAmJiBwYXJzZWQucm9vdCkgPyB1cmwgOiAoKHBhcmVudCAmJiBwYXJlbnQubmF2aWdhYmxlKSB8fCByb290JCQxKCkpLnVybC5hcHBlbmQodXJsKTtcbiAgICB9O1xufTtcbnZhciBnZXROYXZpZ2FibGVCdWlsZGVyID0gZnVuY3Rpb24gKGlzUm9vdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBuYXZpZ2FibGVCdWlsZGVyKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiAhaXNSb290KHN0YXRlKSAmJiBzdGF0ZS51cmwgPyBzdGF0ZSA6IChzdGF0ZS5wYXJlbnQgPyBzdGF0ZS5wYXJlbnQubmF2aWdhYmxlIDogbnVsbCk7XG4gICAgfTtcbn07XG52YXIgZ2V0UGFyYW1zQnVpbGRlciA9IGZ1bmN0aW9uIChwYXJhbUZhY3RvcnkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcGFyYW1zQnVpbGRlcihzdGF0ZSkge1xuICAgICAgICB2YXIgbWFrZUNvbmZpZ1BhcmFtID0gZnVuY3Rpb24gKGNvbmZpZywgaWQpIHsgcmV0dXJuIHBhcmFtRmFjdG9yeS5mcm9tQ29uZmlnKGlkLCBudWxsLCBjb25maWcpOyB9O1xuICAgICAgICB2YXIgdXJsUGFyYW1zID0gKHN0YXRlLnVybCAmJiBzdGF0ZS51cmwucGFyYW1ldGVycyh7IGluaGVyaXQ6IGZhbHNlIH0pKSB8fCBbXTtcbiAgICAgICAgdmFyIG5vblVybFBhcmFtcyA9IHZhbHVlcyhtYXBPYmoob21pdChzdGF0ZS5wYXJhbXMgfHwge30sIHVybFBhcmFtcy5tYXAocHJvcCgnaWQnKSkpLCBtYWtlQ29uZmlnUGFyYW0pKTtcbiAgICAgICAgcmV0dXJuIHVybFBhcmFtcy5jb25jYXQobm9uVXJsUGFyYW1zKS5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIFtwLmlkLCBwXTsgfSkucmVkdWNlKGFwcGx5UGFpcnMsIHt9KTtcbiAgICB9O1xufTtcbmZ1bmN0aW9uIHBhdGhCdWlsZGVyKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLnBhcmVudCA/IHN0YXRlLnBhcmVudC5wYXRoLmNvbmNhdChzdGF0ZSkgOiAvKnJvb3QqLyBbc3RhdGVdO1xufVxuZnVuY3Rpb24gaW5jbHVkZXNCdWlsZGVyKHN0YXRlKSB7XG4gICAgdmFyIGluY2x1ZGVzID0gc3RhdGUucGFyZW50ID8gZXh0ZW5kKHt9LCBzdGF0ZS5wYXJlbnQuaW5jbHVkZXMpIDoge307XG4gICAgaW5jbHVkZXNbc3RhdGUubmFtZV0gPSB0cnVlO1xuICAgIHJldHVybiBpbmNsdWRlcztcbn1cbi8qKlxuICogVGhpcyBpcyBhIFtbU3RhdGVCdWlsZGVyLmJ1aWxkZXJdXSBmdW5jdGlvbiBmb3IgdGhlIGByZXNvbHZlOmAgYmxvY2sgb24gYSBbW1N0YXRlRGVjbGFyYXRpb25dXS5cbiAqXG4gKiBXaGVuIHRoZSBbW1N0YXRlQnVpbGRlcl1dIGJ1aWxkcyBhIFtbU3RhdGVPYmplY3RdXSBvYmplY3QgZnJvbSBhIHJhdyBbW1N0YXRlRGVjbGFyYXRpb25dXSwgdGhpcyBidWlsZGVyXG4gKiB2YWxpZGF0ZXMgdGhlIGByZXNvbHZlYCBwcm9wZXJ0eSBhbmQgY29udmVydHMgaXQgdG8gYSBbW1Jlc29sdmFibGVdXSBhcnJheS5cbiAqXG4gKiByZXNvbHZlOiBpbnB1dCB2YWx1ZSBjYW4gYmU6XG4gKlxuICoge1xuICogICAvLyBhbmFseXplZCBidXQgbm90IGluamVjdGVkXG4gKiAgIG15Rm9vUmVzb2x2ZTogZnVuY3Rpb24oKSB7IHJldHVybiBcIm15Rm9vRGF0YVwiOyB9LFxuICpcbiAqICAgLy8gZnVuY3Rpb24udG9TdHJpbmcoKSBwYXJzZWQsIFwiRGVwZW5kZW5jeU5hbWVcIiBkZXAgYXMgc3RyaW5nIChub3QgbWluLXNhZmUpXG4gKiAgIG15QmFyUmVzb2x2ZTogZnVuY3Rpb24oRGVwZW5kZW5jeU5hbWUpIHsgcmV0dXJuIERlcGVuZGVuY3lOYW1lLmZldGNoU29tZXRoaW5nQXNQcm9taXNlKCkgfSxcbiAqXG4gKiAgIC8vIEFycmF5IHNwbGl0OyBcIkRlcGVuZGVuY3lOYW1lXCIgZGVwIGFzIHN0cmluZ1xuICogICBteUJhelJlc29sdmU6IFsgXCJEZXBlbmRlbmN5TmFtZVwiLCBmdW5jdGlvbihkZXApIHsgcmV0dXJuIGRlcC5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sXG4gKlxuICogICAvLyBBcnJheSBzcGxpdDsgRGVwZW5kZW5jeVR5cGUgZGVwIGFzIHRva2VuIChjb21wYXJlZCB1c2luZyA9PT0pXG4gKiAgIG15UXV4UmVzb2x2ZTogWyBEZXBlbmRlbmN5VHlwZSwgZnVuY3Rpb24oZGVwKSB7IHJldHVybiBkZXAuZmV0Y2hTb21ldGluZ0FzUHJvbWlzZSgpIH0sXG4gKlxuICogICAvLyB2YWwuJGluamVjdCB1c2VkIGFzIGRlcHNcbiAqICAgLy8gd2hlcmU6XG4gKiAgIC8vICAgICBjb3JnZVJlc29sdmUuJGluamVjdCA9IFtcIkRlcGVuZGVuY3lOYW1lXCJdO1xuICogICAvLyAgICAgZnVuY3Rpb24gY29yZ2VSZXNvbHZlKGRlcCkgeyBkZXAuZmV0Y2hTb21ldGluZ0FzUHJvbWlzZSgpIH1cbiAqICAgLy8gdGhlbiBcIkRlcGVuZGVuY3lOYW1lXCIgZGVwIGFzIHN0cmluZ1xuICogICBteUNvcmdlUmVzb2x2ZTogY29yZ2VSZXNvbHZlLFxuICpcbiAqICAvLyBpbmplY3Qgc2VydmljZSBieSBuYW1lXG4gKiAgLy8gV2hlbiBhIHN0cmluZyBpcyBmb3VuZCwgZGVzdWdhciBjcmVhdGluZyBhIHJlc29sdmUgdGhhdCBpbmplY3RzIHRoZSBuYW1lZCBzZXJ2aWNlXG4gKiAgIG15R3JhdWx0UmVzb2x2ZTogXCJTb21lU2VydmljZVwiXG4gKiB9XG4gKlxuICogb3I6XG4gKlxuICogW1xuICogICBuZXcgUmVzb2x2YWJsZShcIm15Rm9vUmVzb2x2ZVwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFwibXlGb29EYXRhXCIgfSksXG4gKiAgIG5ldyBSZXNvbHZhYmxlKFwibXlCYXJSZXNvbHZlXCIsIGZ1bmN0aW9uKGRlcCkgeyByZXR1cm4gZGVwLmZldGNoU29tZXRoaW5nQXNQcm9taXNlKCkgfSwgWyBcIkRlcGVuZGVuY3lOYW1lXCIgXSksXG4gKiAgIHsgcHJvdmlkZTogXCJteUJhelJlc29sdmVcIiwgdXNlRmFjdG9yeTogZnVuY3Rpb24oZGVwKSB7IGRlcC5mZXRjaFNvbWV0aGluZ0FzUHJvbWlzZSgpIH0sIGRlcHM6IFsgXCJEZXBlbmRlbmN5TmFtZVwiIF0gfVxuICogXVxuICovXG5mdW5jdGlvbiByZXNvbHZhYmxlc0J1aWxkZXIoc3RhdGUpIHtcbiAgICAvKiogY29udmVydCByZXNvbHZlOiB7fSBhbmQgcmVzb2x2ZVBvbGljeToge30gb2JqZWN0cyB0byBhbiBhcnJheSBvZiB0dXBsZXMgKi9cbiAgICB2YXIgb2JqZWN0czJUdXBsZXMgPSBmdW5jdGlvbiAocmVzb2x2ZU9iaiwgcmVzb2x2ZVBvbGljaWVzKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyZXNvbHZlT2JqIHx8IHt9KS5tYXAoZnVuY3Rpb24gKHRva2VuKSB7IHJldHVybiAoeyB0b2tlbjogdG9rZW4sIHZhbDogcmVzb2x2ZU9ialt0b2tlbl0sIGRlcHM6IHVuZGVmaW5lZCwgcG9saWN5OiByZXNvbHZlUG9saWNpZXNbdG9rZW5dIH0pOyB9KTtcbiAgICB9O1xuICAgIC8qKiBmZXRjaCBESSBhbm5vdGF0aW9ucyBmcm9tIGEgZnVuY3Rpb24gb3IgbmcxLXN0eWxlIGFycmF5ICovXG4gICAgdmFyIGFubm90YXRlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHZhciAkaW5qZWN0b3IgPSBzZXJ2aWNlcy4kaW5qZWN0b3I7XG4gICAgICAgIC8vIG5nMSBkb2Vzbid0IGhhdmUgYW4gJGluamVjdG9yIHVudGlsIHJ1bnRpbWUuXG4gICAgICAgIC8vIElmIHRoZSAkaW5qZWN0b3IgZG9lc24ndCBleGlzdCwgdXNlIFwiZGVmZXJyZWRcIiBsaXRlcmFsIGFzIGFcbiAgICAgICAgLy8gbWFya2VyIGluZGljYXRpbmcgdGhleSBzaG91bGQgYmUgYW5ub3RhdGVkIHdoZW4gcnVudGltZSBzdGFydHNcbiAgICAgICAgcmV0dXJuIGZuWyckaW5qZWN0J10gfHwgKCRpbmplY3RvciAmJiAkaW5qZWN0b3IuYW5ub3RhdGUoZm4sICRpbmplY3Rvci5zdHJpY3REaSkpIHx8ICdkZWZlcnJlZCc7XG4gICAgfTtcbiAgICAvKiogdHJ1ZSBpZiB0aGUgb2JqZWN0IGhhcyBib3RoIGB0b2tlbmAgYW5kIGByZXNvbHZlRm5gLCBhbmQgaXMgcHJvYmFibHkgYSBbW1Jlc29sdmVMaXRlcmFsXV0gKi9cbiAgICB2YXIgaXNSZXNvbHZlTGl0ZXJhbCA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuICEhKG9iai50b2tlbiAmJiBvYmoucmVzb2x2ZUZuKTsgfTtcbiAgICAvKiogdHJ1ZSBpZiB0aGUgb2JqZWN0IGxvb2tzIGxpa2UgYSBwcm92aWRlIGxpdGVyYWwsIG9yIGEgbmcyIFByb3ZpZGVyICovXG4gICAgdmFyIGlzTGlrZU5nMlByb3ZpZGVyID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gISEoKG9iai5wcm92aWRlIHx8IG9iai50b2tlbikgJiYgKG9iai51c2VWYWx1ZSB8fCBvYmoudXNlRmFjdG9yeSB8fCBvYmoudXNlRXhpc3RpbmcgfHwgb2JqLnVzZUNsYXNzKSk7IH07XG4gICAgLyoqIHRydWUgaWYgdGhlIG9iamVjdCBsb29rcyBsaWtlIGEgdHVwbGUgZnJvbSBvYmoyVHVwbGVzICovXG4gICAgdmFyIGlzVHVwbGVGcm9tT2JqID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gISEob2JqICYmIG9iai52YWwgJiYgKGlzU3RyaW5nKG9iai52YWwpIHx8IGlzQXJyYXkob2JqLnZhbCkgfHwgaXNGdW5jdGlvbihvYmoudmFsKSkpOyB9O1xuICAgIC8qKiBleHRyYWN0cyB0aGUgdG9rZW4gZnJvbSBhIFByb3ZpZGVyIG9yIHByb3ZpZGUgbGl0ZXJhbCAqL1xuICAgIHZhciBnZXRUb2tlbiA9IGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLnByb3ZpZGUgfHwgcC50b2tlbjsgfTtcbiAgICAvKiogR2l2ZW4gYSBsaXRlcmFsIHJlc29sdmUgb3IgcHJvdmlkZXIgb2JqZWN0LCByZXR1cm5zIGEgUmVzb2x2YWJsZSAqL1xuICAgIHZhciBsaXRlcmFsMlJlc29sdmFibGUgPSBwYXR0ZXJuKFtcbiAgICAgICAgW3Byb3AoJ3Jlc29sdmVGbicpLCBmdW5jdGlvbiAocCkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIHAucmVzb2x2ZUZuLCBwLmRlcHMsIHAucG9saWN5KTsgfV0sXG4gICAgICAgIFtwcm9wKCd1c2VGYWN0b3J5JyksIGZ1bmN0aW9uIChwKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgcC51c2VGYWN0b3J5LCAocC5kZXBzIHx8IHAuZGVwZW5kZW5jaWVzKSwgcC5wb2xpY3kpOyB9XSxcbiAgICAgICAgW3Byb3AoJ3VzZUNsYXNzJyksIGZ1bmN0aW9uIChwKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZShnZXRUb2tlbihwKSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IHAudXNlQ2xhc3MoKTsgfSwgW10sIHAucG9saWN5KTsgfV0sXG4gICAgICAgIFtwcm9wKCd1c2VWYWx1ZScpLCBmdW5jdGlvbiAocCkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUoZ2V0VG9rZW4ocCksIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHAudXNlVmFsdWU7IH0sIFtdLCBwLnBvbGljeSwgcC51c2VWYWx1ZSk7IH1dLFxuICAgICAgICBbcHJvcCgndXNlRXhpc3RpbmcnKSwgZnVuY3Rpb24gKHApIHsgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKGdldFRva2VuKHApLCBpZGVudGl0eSwgW3AudXNlRXhpc3RpbmddLCBwLnBvbGljeSk7IH1dLFxuICAgIF0pO1xuICAgIHZhciB0dXBsZTJSZXNvbHZhYmxlID0gcGF0dGVybihbXG4gICAgICAgIFtwaXBlKHByb3AoJ3ZhbCcpLCBpc1N0cmluZyksIGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gbmV3IFJlc29sdmFibGUodHVwbGUudG9rZW4sIGlkZW50aXR5LCBbdHVwbGUudmFsXSwgdHVwbGUucG9saWN5KTsgfV0sXG4gICAgICAgIFtwaXBlKHByb3AoJ3ZhbCcpLCBpc0FycmF5KSwgZnVuY3Rpb24gKHR1cGxlKSB7IHJldHVybiBuZXcgUmVzb2x2YWJsZSh0dXBsZS50b2tlbiwgdGFpbCh0dXBsZS52YWwpLCB0dXBsZS52YWwuc2xpY2UoMCwgLTEpLCB0dXBsZS5wb2xpY3kpOyB9XSxcbiAgICAgICAgW3BpcGUocHJvcCgndmFsJyksIGlzRnVuY3Rpb24pLCBmdW5jdGlvbiAodHVwbGUpIHsgcmV0dXJuIG5ldyBSZXNvbHZhYmxlKHR1cGxlLnRva2VuLCB0dXBsZS52YWwsIGFubm90YXRlKHR1cGxlLnZhbCksIHR1cGxlLnBvbGljeSk7IH1dLFxuICAgIF0pO1xuICAgIHZhciBpdGVtMlJlc29sdmFibGUgPSBwYXR0ZXJuKFtcbiAgICAgICAgW2lzKFJlc29sdmFibGUpLCBmdW5jdGlvbiAocikgeyByZXR1cm4gcjsgfV0sXG4gICAgICAgIFtpc1Jlc29sdmVMaXRlcmFsLCBsaXRlcmFsMlJlc29sdmFibGVdLFxuICAgICAgICBbaXNMaWtlTmcyUHJvdmlkZXIsIGxpdGVyYWwyUmVzb2x2YWJsZV0sXG4gICAgICAgIFtpc1R1cGxlRnJvbU9iaiwgdHVwbGUyUmVzb2x2YWJsZV0sXG4gICAgICAgIFt2YWwodHJ1ZSksIGZ1bmN0aW9uIChvYmopIHsgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc29sdmUgdmFsdWU6ICcgKyBzdHJpbmdpZnkob2JqKSk7IH1dLFxuICAgIF0pO1xuICAgIC8vIElmIHJlc29sdmVCbG9jayBpcyBhbHJlYWR5IGFuIGFycmF5LCB1c2UgaXQgYXMtaXMuXG4gICAgLy8gT3RoZXJ3aXNlLCBhc3N1bWUgaXQncyBhbiBvYmplY3QgYW5kIGNvbnZlcnQgdG8gYW4gQXJyYXkgb2YgdHVwbGVzXG4gICAgdmFyIGRlY2wgPSBzdGF0ZS5yZXNvbHZlO1xuICAgIHZhciBpdGVtcyA9IGlzQXJyYXkoZGVjbCkgPyBkZWNsIDogb2JqZWN0czJUdXBsZXMoZGVjbCwgc3RhdGUucmVzb2x2ZVBvbGljeSB8fCB7fSk7XG4gICAgcmV0dXJuIGl0ZW1zLm1hcChpdGVtMlJlc29sdmFibGUpO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxhcGkgQSBpbnRlcm5hbCBnbG9iYWwgc2VydmljZVxuICpcbiAqIFN0YXRlQnVpbGRlciBpcyBhIGZhY3RvcnkgZm9yIHRoZSBpbnRlcm5hbCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0cy5cbiAqXG4gKiBXaGVuIHlvdSByZWdpc3RlciBhIHN0YXRlIHdpdGggdGhlIFtbU3RhdGVSZWdpc3RyeV1dLCB5b3UgcmVnaXN0ZXIgYSBwbGFpbiBvbGQgamF2YXNjcmlwdCBvYmplY3Qgd2hpY2hcbiAqIGNvbmZvcm1zIHRvIHRoZSBbW1N0YXRlRGVjbGFyYXRpb25dXSBpbnRlcmZhY2UuICBUaGlzIGZhY3RvcnkgdGFrZXMgdGhhdCBvYmplY3QgYW5kIGJ1aWxkcyB0aGUgY29ycmVzcG9uZGluZ1xuICogW1tTdGF0ZU9iamVjdF1dIG9iamVjdCwgd2hpY2ggaGFzIGFuIEFQSSBhbmQgaXMgdXNlZCBpbnRlcm5hbGx5LlxuICpcbiAqIEN1c3RvbSBwcm9wZXJ0aWVzIG9yIEFQSSBtYXkgYmUgYWRkZWQgdG8gdGhlIGludGVybmFsIFtbU3RhdGVPYmplY3RdXSBvYmplY3QgYnkgcmVnaXN0ZXJpbmcgYSBkZWNvcmF0b3IgZnVuY3Rpb25cbiAqIHVzaW5nIHRoZSBbW2J1aWxkZXJdXSBtZXRob2QuXG4gKi9cbnZhciBTdGF0ZUJ1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGVCdWlsZGVyKG1hdGNoZXIsIHVybE1hdGNoZXJGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMubWF0Y2hlciA9IG1hdGNoZXI7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHJvb3QkJDEgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBtYXRjaGVyLmZpbmQoJycpOyB9O1xuICAgICAgICB2YXIgaXNSb290ID0gZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5uYW1lID09PSAnJzsgfTtcbiAgICAgICAgZnVuY3Rpb24gcGFyZW50QnVpbGRlcihzdGF0ZSkge1xuICAgICAgICAgICAgaWYgKGlzUm9vdChzdGF0ZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlci5maW5kKHNlbGYucGFyZW50TmFtZShzdGF0ZSkpIHx8IHJvb3QkJDEoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1aWxkZXJzID0ge1xuICAgICAgICAgICAgbmFtZTogW25hbWVCdWlsZGVyXSxcbiAgICAgICAgICAgIHNlbGY6IFtzZWxmQnVpbGRlcl0sXG4gICAgICAgICAgICBwYXJlbnQ6IFtwYXJlbnRCdWlsZGVyXSxcbiAgICAgICAgICAgIGRhdGE6IFtkYXRhQnVpbGRlcl0sXG4gICAgICAgICAgICAvLyBCdWlsZCBhIFVSTE1hdGNoZXIgaWYgbmVjZXNzYXJ5LCBlaXRoZXIgdmlhIGEgcmVsYXRpdmUgb3IgYWJzb2x1dGUgVVJMXG4gICAgICAgICAgICB1cmw6IFtnZXRVcmxCdWlsZGVyKHVybE1hdGNoZXJGYWN0b3J5LCByb290JCQxKV0sXG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBjbG9zZXN0IGFuY2VzdG9yIHN0YXRlIHRoYXQgaGFzIGEgVVJMIChpLmUuIGlzIG5hdmlnYWJsZSlcbiAgICAgICAgICAgIG5hdmlnYWJsZTogW2dldE5hdmlnYWJsZUJ1aWxkZXIoaXNSb290KV0sXG4gICAgICAgICAgICBwYXJhbXM6IFtnZXRQYXJhbXNCdWlsZGVyKHVybE1hdGNoZXJGYWN0b3J5LnBhcmFtRmFjdG9yeSldLFxuICAgICAgICAgICAgLy8gRWFjaCBmcmFtZXdvcmstc3BlY2lmaWMgdWktcm91dGVyIGltcGxlbWVudGF0aW9uIHNob3VsZCBkZWZpbmUgaXRzIG93biBgdmlld3NgIGJ1aWxkZXJcbiAgICAgICAgICAgIC8vIGUuZy4sIHNyYy9uZzEvc3RhdGVidWlsZGVycy92aWV3cy50c1xuICAgICAgICAgICAgdmlld3M6IFtdLFxuICAgICAgICAgICAgLy8gS2VlcCBhIGZ1bGwgcGF0aCBmcm9tIHRoZSByb290IGRvd24gdG8gdGhpcyBzdGF0ZSBhcyB0aGlzIGlzIG5lZWRlZCBmb3Igc3RhdGUgYWN0aXZhdGlvbi5cbiAgICAgICAgICAgIHBhdGg6IFtwYXRoQnVpbGRlcl0sXG4gICAgICAgICAgICAvLyBTcGVlZCB1cCAkc3RhdGUuaW5jbHVkZXMoKSBhcyBpdCdzIHVzZWQgYSBsb3RcbiAgICAgICAgICAgIGluY2x1ZGVzOiBbaW5jbHVkZXNCdWlsZGVyXSxcbiAgICAgICAgICAgIHJlc29sdmFibGVzOiBbcmVzb2x2YWJsZXNCdWlsZGVyXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgW1tCdWlsZGVyRnVuY3Rpb25dXSBmb3IgYSBzcGVjaWZpYyBbW1N0YXRlT2JqZWN0XV0gcHJvcGVydHkgKGUuZy4sIGBwYXJlbnRgLCBgdXJsYCwgb3IgYHBhdGhgKS5cbiAgICAgKiBNb3JlIHRoYW4gb25lIEJ1aWxkZXJGdW5jdGlvbiBjYW4gYmUgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIFRoZSBCdWlsZGVyRnVuY3Rpb24ocykgd2lsbCBiZSB1c2VkIHRvIGRlZmluZSB0aGUgcHJvcGVydHkgb24gYW55IHN1YnNlcXVlbnRseSBidWlsdCBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBTdGF0ZSBwcm9wZXJ0eSBiZWluZyByZWdpc3RlcmVkIGZvci5cbiAgICAgKiBAcGFyYW0gZm4gVGhlIEJ1aWxkZXJGdW5jdGlvbiB3aGljaCB3aWxsIGJlIHVzZWQgdG8gYnVpbGQgdGhlIFN0YXRlIHByb3BlcnR5XG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgQnVpbGRlckZ1bmN0aW9uXG4gICAgICovXG4gICAgU3RhdGVCdWlsZGVyLnByb3RvdHlwZS5idWlsZGVyID0gZnVuY3Rpb24gKG5hbWUsIGZuKSB7XG4gICAgICAgIHZhciBidWlsZGVycyA9IHRoaXMuYnVpbGRlcnM7XG4gICAgICAgIHZhciBhcnJheSA9IGJ1aWxkZXJzW25hbWVdIHx8IFtdO1xuICAgICAgICAvLyBCYWNrd2FyZHMgY29tcGF0OiBpZiBvbmx5IG9uZSBidWlsZGVyIGV4aXN0cywgcmV0dXJuIGl0LCBlbHNlIHJldHVybiB3aG9sZSBhcmFyeS5cbiAgICAgICAgaWYgKGlzU3RyaW5nKG5hbWUpICYmICFpc0RlZmluZWQoZm4pKVxuICAgICAgICAgICAgcmV0dXJuIGFycmF5Lmxlbmd0aCA+IDEgPyBhcnJheSA6IGFycmF5WzBdO1xuICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpIHx8ICFpc0Z1bmN0aW9uKGZuKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgYnVpbGRlcnNbbmFtZV0gPSBhcnJheTtcbiAgICAgICAgYnVpbGRlcnNbbmFtZV0ucHVzaChmbik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBidWlsZGVyc1tuYW1lXS5zcGxpY2UoYnVpbGRlcnNbbmFtZV0uaW5kZXhPZihmbiwgMSkpICYmIG51bGw7IH07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYWxsIG9mIHRoZSBwcm9wZXJ0aWVzIG9uIGFuIGVzc2VudGlhbGx5IGJsYW5rIFN0YXRlIG9iamVjdCwgcmV0dXJuaW5nIGEgU3RhdGUgb2JqZWN0IHdoaWNoIGhhcyBhbGwgaXRzXG4gICAgICogcHJvcGVydGllcyBhbmQgQVBJIGJ1aWx0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlIGFuIHVuaW5pdGlhbGl6ZWQgU3RhdGUgb2JqZWN0XG4gICAgICogQHJldHVybnMgdGhlIGJ1aWx0IFN0YXRlIG9iamVjdFxuICAgICAqL1xuICAgIFN0YXRlQnVpbGRlci5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgbWF0Y2hlciA9IF9hLm1hdGNoZXIsIGJ1aWxkZXJzID0gX2EuYnVpbGRlcnM7XG4gICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnBhcmVudE5hbWUoc3RhdGUpO1xuICAgICAgICBpZiAocGFyZW50ICYmICFtYXRjaGVyLmZpbmQocGFyZW50LCB1bmRlZmluZWQsIGZhbHNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIga2V5IGluIGJ1aWxkZXJzKSB7XG4gICAgICAgICAgICBpZiAoIWJ1aWxkZXJzLmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB2YXIgY2hhaW4gPSBidWlsZGVyc1trZXldLnJlZHVjZShmdW5jdGlvbiAocGFyZW50Rm4sIHN0ZXApIHsgcmV0dXJuIGZ1bmN0aW9uIChfc3RhdGUpIHsgcmV0dXJuIHN0ZXAoX3N0YXRlLCBwYXJlbnRGbik7IH07IH0sIG5vb3ApO1xuICAgICAgICAgICAgc3RhdGVba2V5XSA9IGNoYWluKHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICBTdGF0ZUJ1aWxkZXIucHJvdG90eXBlLnBhcmVudE5hbWUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgLy8gbmFtZSA9ICdmb28uYmFyLmJhei4qKidcbiAgICAgICAgdmFyIG5hbWUgPSBzdGF0ZS5uYW1lIHx8ICcnO1xuICAgICAgICAvLyBzZWdtZW50cyA9IFsnZm9vJywgJ2JhcicsICdiYXonLCAnLioqJ11cbiAgICAgICAgdmFyIHNlZ21lbnRzID0gbmFtZS5zcGxpdCgnLicpO1xuICAgICAgICAvLyBzZWdtZW50cyA9IFsnZm9vJywgJ2JhcicsICdiYXonXVxuICAgICAgICB2YXIgbGFzdFNlZ21lbnQgPSBzZWdtZW50cy5wb3AoKTtcbiAgICAgICAgLy8gc2VnbWVudHMgPSBbJ2ZvbycsICdiYXInXSAoaWdub3JlIC4qKiBzZWdtZW50IGZvciBmdXR1cmUgc3RhdGVzKVxuICAgICAgICBpZiAobGFzdFNlZ21lbnQgPT09ICcqKicpXG4gICAgICAgICAgICBzZWdtZW50cy5wb3AoKTtcbiAgICAgICAgaWYgKHNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0YXRlcyB0aGF0IHNwZWNpZnkgdGhlICdwYXJlbnQ6JyBwcm9wZXJ0eSBzaG91bGQgbm90IGhhdmUgYSAnLicgaW4gdGhlaXIgbmFtZSAoXCIgKyBuYW1lICsgXCIpXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gJ2Zvby5iYXInXG4gICAgICAgICAgICByZXR1cm4gc2VnbWVudHMuam9pbignLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc3RhdGUucGFyZW50KVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICByZXR1cm4gaXNTdHJpbmcoc3RhdGUucGFyZW50KSA/IHN0YXRlLnBhcmVudCA6IHN0YXRlLnBhcmVudC5uYW1lO1xuICAgIH07XG4gICAgU3RhdGVCdWlsZGVyLnByb3RvdHlwZS5uYW1lID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHZhciBuYW1lID0gc3RhdGUubmFtZTtcbiAgICAgICAgaWYgKG5hbWUuaW5kZXhPZignLicpICE9PSAtMSB8fCAhc3RhdGUucGFyZW50KVxuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgIHZhciBwYXJlbnROYW1lID0gaXNTdHJpbmcoc3RhdGUucGFyZW50KSA/IHN0YXRlLnBhcmVudCA6IHN0YXRlLnBhcmVudC5uYW1lO1xuICAgICAgICByZXR1cm4gcGFyZW50TmFtZSA/IHBhcmVudE5hbWUgKyAnLicgKyBuYW1lIDogbmFtZTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZUJ1aWxkZXI7XG59KCkpO1xuXG4vKiogQG1vZHVsZSBzdGF0ZSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbnZhciBTdGF0ZU1hdGNoZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3RhdGVNYXRjaGVyKF9zdGF0ZXMpIHtcbiAgICAgICAgdGhpcy5fc3RhdGVzID0gX3N0YXRlcztcbiAgICB9XG4gICAgU3RhdGVNYXRjaGVyLnByb3RvdHlwZS5pc1JlbGF0aXZlID0gZnVuY3Rpb24gKHN0YXRlTmFtZSkge1xuICAgICAgICBzdGF0ZU5hbWUgPSBzdGF0ZU5hbWUgfHwgJyc7XG4gICAgICAgIHJldHVybiBzdGF0ZU5hbWUuaW5kZXhPZignLicpID09PSAwIHx8IHN0YXRlTmFtZS5pbmRleE9mKCdeJykgPT09IDA7XG4gICAgfTtcbiAgICBTdGF0ZU1hdGNoZXIucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIGJhc2UsIG1hdGNoR2xvYikge1xuICAgICAgICBpZiAobWF0Y2hHbG9iID09PSB2b2lkIDApIHsgbWF0Y2hHbG9iID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoIXN0YXRlT3JOYW1lICYmIHN0YXRlT3JOYW1lICE9PSAnJylcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBpc1N0ciA9IGlzU3RyaW5nKHN0YXRlT3JOYW1lKTtcbiAgICAgICAgdmFyIG5hbWUgPSBpc1N0ciA/IHN0YXRlT3JOYW1lIDogc3RhdGVPck5hbWUubmFtZTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWxhdGl2ZShuYW1lKSlcbiAgICAgICAgICAgIG5hbWUgPSB0aGlzLnJlc29sdmVQYXRoKG5hbWUsIGJhc2UpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLl9zdGF0ZXNbbmFtZV07XG4gICAgICAgIGlmIChzdGF0ZSAmJiAoaXNTdHIgfHwgKCFpc1N0ciAmJiAoc3RhdGUgPT09IHN0YXRlT3JOYW1lIHx8IHN0YXRlLnNlbGYgPT09IHN0YXRlT3JOYW1lKSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNTdHIgJiYgbWF0Y2hHbG9iKSB7XG4gICAgICAgICAgICB2YXIgX3N0YXRlcyA9IHZhbHVlcyh0aGlzLl9zdGF0ZXMpO1xuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBfc3RhdGVzLmZpbHRlcihmdW5jdGlvbiAoX3N0YXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zdGF0ZS5fX3N0YXRlT2JqZWN0Q2FjaGUubmFtZUdsb2IgJiZcbiAgICAgICAgICAgICAgICAgICAgX3N0YXRlLl9fc3RhdGVPYmplY3RDYWNoZS5uYW1lR2xvYi5tYXRjaGVzKG5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN0YXRlTWF0Y2hlci5maW5kOiBGb3VuZCBtdWx0aXBsZSBtYXRjaGVzIGZvciBcIiArIG5hbWUgKyBcIiB1c2luZyBnbG9iOiBcIiwgbWF0Y2hlcy5tYXAoZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC5uYW1lOyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlc1swXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgU3RhdGVNYXRjaGVyLnByb3RvdHlwZS5yZXNvbHZlUGF0aCA9IGZ1bmN0aW9uIChuYW1lLCBiYXNlKSB7XG4gICAgICAgIGlmICghYmFzZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHJlZmVyZW5jZSBwb2ludCBnaXZlbiBmb3IgcGF0aCAnXCIgKyBuYW1lICsgXCInXCIpO1xuICAgICAgICB2YXIgYmFzZVN0YXRlID0gdGhpcy5maW5kKGJhc2UpO1xuICAgICAgICB2YXIgc3BsaXROYW1lID0gbmFtZS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgcGF0aExlbmd0aCA9IHNwbGl0TmFtZS5sZW5ndGg7XG4gICAgICAgIHZhciBpID0gMCwgY3VycmVudCA9IGJhc2VTdGF0ZTtcbiAgICAgICAgZm9yICg7IGkgPCBwYXRoTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzcGxpdE5hbWVbaV0gPT09ICcnICYmIGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gYmFzZVN0YXRlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwbGl0TmFtZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50LnBhcmVudClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGF0aCAnXCIgKyBuYW1lICsgXCInIG5vdCB2YWxpZCBmb3Igc3RhdGUgJ1wiICsgYmFzZVN0YXRlLm5hbWUgKyBcIidcIik7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50O1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbE5hbWUgPSBzcGxpdE5hbWUuc2xpY2UoaSkuam9pbignLicpO1xuICAgICAgICByZXR1cm4gY3VycmVudC5uYW1lICsgKGN1cnJlbnQubmFtZSAmJiByZWxOYW1lID8gJy4nIDogJycpICsgcmVsTmFtZTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZU1hdGNoZXI7XG59KCkpO1xuXG4vKiogQG1vZHVsZSBzdGF0ZSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbi8qKiBAaW50ZXJuYWxhcGkgKi9cbnZhciBTdGF0ZVF1ZXVlTWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0ZVF1ZXVlTWFuYWdlcigkcmVnaXN0cnksICR1cmxSb3V0ZXIsIHN0YXRlcywgYnVpbGRlciwgbGlzdGVuZXJzKSB7XG4gICAgICAgIHRoaXMuJHJlZ2lzdHJ5ID0gJHJlZ2lzdHJ5O1xuICAgICAgICB0aGlzLiR1cmxSb3V0ZXIgPSAkdXJsUm91dGVyO1xuICAgICAgICB0aGlzLnN0YXRlcyA9IHN0YXRlcztcbiAgICAgICAgdGhpcy5idWlsZGVyID0gYnVpbGRlcjtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBsaXN0ZW5lcnM7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaGVyID0gJHJlZ2lzdHJ5Lm1hdGNoZXI7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgICBTdGF0ZVF1ZXVlTWFuYWdlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgIH07XG4gICAgU3RhdGVRdWV1ZU1hbmFnZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHN0YXRlRGVjbCkge1xuICAgICAgICB2YXIgcXVldWUgPSB0aGlzLnF1ZXVlO1xuICAgICAgICB2YXIgc3RhdGUgPSBTdGF0ZU9iamVjdC5jcmVhdGUoc3RhdGVEZWNsKTtcbiAgICAgICAgdmFyIG5hbWUgPSBzdGF0ZS5uYW1lO1xuICAgICAgICBpZiAoIWlzU3RyaW5nKG5hbWUpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdGF0ZSBtdXN0IGhhdmUgYSB2YWxpZCBuYW1lJyk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSB8fCBpbkFycmF5KHF1ZXVlLm1hcChwcm9wKCduYW1lJykpLCBuYW1lKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN0YXRlICdcIiArIG5hbWUgKyBcIicgaXMgYWxyZWFkeSBkZWZpbmVkXCIpO1xuICAgICAgICBxdWV1ZS5wdXNoKHN0YXRlKTtcbiAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICBTdGF0ZVF1ZXVlTWFuYWdlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHF1ZXVlID0gX2EucXVldWUsIHN0YXRlcyA9IF9hLnN0YXRlcywgYnVpbGRlciA9IF9hLmJ1aWxkZXI7XG4gICAgICAgIHZhciByZWdpc3RlcmVkID0gW10sIC8vIHN0YXRlcyB0aGF0IGdvdCByZWdpc3RlcmVkXG4gICAgICAgIG9ycGhhbnMgPSBbXSwgLy8gc3RhdGVzIHRoYXQgZG9uJ3QgeWV0IGhhdmUgYSBwYXJlbnQgcmVnaXN0ZXJlZFxuICAgICAgICBwcmV2aW91c1F1ZXVlTGVuZ3RoID0ge307IC8vIGtlZXAgdHJhY2sgb2YgaG93IGxvbmcgdGhlIHF1ZXVlIHdoZW4gYW4gb3JwaGFuIHdhcyBmaXJzdCBlbmNvdW50ZXJlZFxuICAgICAgICB2YXIgZ2V0U3RhdGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN0YXRlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBfdGhpcy5zdGF0ZXNbbmFtZV07XG4gICAgICAgIH07XG4gICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgdmFyIG5hbWVfMSA9IHN0YXRlLm5hbWU7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gYnVpbGRlci5idWlsZChzdGF0ZSk7XG4gICAgICAgICAgICB2YXIgb3JwaGFuSWR4ID0gb3JwaGFucy5pbmRleE9mKHN0YXRlKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdTdGF0ZSA9IGdldFN0YXRlKG5hbWVfMSk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nU3RhdGUgJiYgZXhpc3RpbmdTdGF0ZS5uYW1lID09PSBuYW1lXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3RhdGUgJ1wiICsgbmFtZV8xICsgXCInIGlzIGFscmVhZHkgZGVmaW5lZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nRnV0dXJlU3RhdGUgPSBnZXRTdGF0ZShuYW1lXzEgKyAnLioqJyk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nRnV0dXJlU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZ1dHVyZSBzdGF0ZSBvZiB0aGUgc2FtZSBuYW1lXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZ2lzdHJ5LmRlcmVnaXN0ZXIoZXhpc3RpbmdGdXR1cmVTdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0YXRlc1tuYW1lXzFdID0gc3RhdGU7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hSb3V0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9ycGhhbklkeCA+PSAwKVxuICAgICAgICAgICAgICAgICAgICBvcnBoYW5zLnNwbGljZShvcnBoYW5JZHgsIDEpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdGVyZWQucHVzaChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldiA9IHByZXZpb3VzUXVldWVMZW5ndGhbbmFtZV8xXTtcbiAgICAgICAgICAgIHByZXZpb3VzUXVldWVMZW5ndGhbbmFtZV8xXSA9IHF1ZXVlLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChvcnBoYW5JZHggPj0gMCAmJiBwcmV2ID09PSBxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBXYWl0IHVudGlsIHR3byBjb25zZWN1dGl2ZSBpdGVyYXRpb25zIHdoZXJlIG5vIGFkZGl0aW9uYWwgc3RhdGVzIHdlcmUgZGVxdWV1ZWQgc3VjY2Vzc2Z1bGx5LlxuICAgICAgICAgICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlZ2lzdGVyIG9ycGhhbmVkIHN0YXRlICcke25hbWV9J2ApO1xuICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goc3RhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvcnBoYW5JZHggPCAwKSB7XG4gICAgICAgICAgICAgICAgb3JwaGFucy5wdXNoKHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHF1ZXVlLnB1c2goc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWdpc3RlcmVkLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIGxpc3RlbmVyKCdyZWdpc3RlcmVkJywgcmVnaXN0ZXJlZC5tYXAoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuc2VsZjsgfSkpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGVzO1xuICAgIH07XG4gICAgU3RhdGVRdWV1ZU1hbmFnZXIucHJvdG90eXBlLmF0dGFjaFJvdXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5hYnN0cmFjdCB8fCAhc3RhdGUudXJsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLiR1cmxSb3V0ZXIucnVsZSh0aGlzLiR1cmxSb3V0ZXIudXJsUnVsZUZhY3RvcnkuY3JlYXRlKHN0YXRlKSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGVRdWV1ZU1hbmFnZXI7XG59KCkpO1xuXG4vKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHN0YXRlXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG52YXIgU3RhdGVSZWdpc3RyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgZnVuY3Rpb24gU3RhdGVSZWdpc3RyeShfcm91dGVyKSB7XG4gICAgICAgIHRoaXMuX3JvdXRlciA9IF9yb3V0ZXI7XG4gICAgICAgIHRoaXMuc3RhdGVzID0ge307XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgICAgIHRoaXMubWF0Y2hlciA9IG5ldyBTdGF0ZU1hdGNoZXIodGhpcy5zdGF0ZXMpO1xuICAgICAgICB0aGlzLmJ1aWxkZXIgPSBuZXcgU3RhdGVCdWlsZGVyKHRoaXMubWF0Y2hlciwgX3JvdXRlci51cmxNYXRjaGVyRmFjdG9yeSk7XG4gICAgICAgIHRoaXMuc3RhdGVRdWV1ZSA9IG5ldyBTdGF0ZVF1ZXVlTWFuYWdlcih0aGlzLCBfcm91dGVyLnVybFJvdXRlciwgdGhpcy5zdGF0ZXMsIHRoaXMuYnVpbGRlciwgdGhpcy5saXN0ZW5lcnMpO1xuICAgICAgICB0aGlzLl9yZWdpc3RlclJvb3QoKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLl9yZWdpc3RlclJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByb290U3RhdGVEZWYgPSB7XG4gICAgICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgICAgIHVybDogJ14nLFxuICAgICAgICAgICAgdmlld3M6IG51bGwsXG4gICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAnIyc6IHsgdmFsdWU6IG51bGwsIHR5cGU6ICdoYXNoJywgZHluYW1pYzogdHJ1ZSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICB2YXIgX3Jvb3QgPSB0aGlzLl9yb290ID0gdGhpcy5zdGF0ZVF1ZXVlLnJlZ2lzdGVyKHJvb3RTdGF0ZURlZik7XG4gICAgICAgIF9yb290Lm5hdmlnYWJsZSA9IG51bGw7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgU3RhdGVSZWdpc3RyeS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zdGF0ZVF1ZXVlLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5nZXQoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gX3RoaXMuZ2V0KHN0YXRlKSAmJiBfdGhpcy5kZXJlZ2lzdGVyKHN0YXRlKTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMaXN0ZW4gZm9yIGEgU3RhdGUgUmVnaXN0cnkgZXZlbnRzXG4gICAgICpcbiAgICAgKiBBZGRzIGEgY2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIHdoZW4gc3RhdGVzIGFyZSByZWdpc3RlcmVkIG9yIGRlcmVnaXN0ZXJlZCB3aXRoIHRoZSBTdGF0ZVJlZ2lzdHJ5LlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbGV0IGFsbFN0YXRlcyA9IHJlZ2lzdHJ5LmdldCgpO1xuICAgICAqXG4gICAgICogLy8gTGF0ZXIsIGludm9rZSBkZXJlZ2lzdGVyRm4oKSB0byByZW1vdmUgdGhlIGxpc3RlbmVyXG4gICAgICogbGV0IGRlcmVnaXN0ZXJGbiA9IHJlZ2lzdHJ5Lm9uU3RhdGVzQ2hhbmdlZCgoZXZlbnQsIHN0YXRlcykgPT4ge1xuICAgICAqICAgc3dpdGNoKGV2ZW50KSB7XG4gICAgICogICAgIGNhc2U6ICdyZWdpc3RlcmVkJzpcbiAgICAgKiAgICAgICBzdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiBhbGxTdGF0ZXMucHVzaChzdGF0ZSkpO1xuICAgICAqICAgICAgIGJyZWFrO1xuICAgICAqICAgICBjYXNlOiAnZGVyZWdpc3RlcmVkJzpcbiAgICAgKiAgICAgICBzdGF0ZXMuZm9yRWFjaChzdGF0ZSA9PiB7XG4gICAgICogICAgICAgICBsZXQgaWR4ID0gYWxsU3RhdGVzLmluZGV4T2Yoc3RhdGUpO1xuICAgICAqICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIGFsbFN0YXRlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgKiAgICAgICB9KTtcbiAgICAgKiAgICAgICBicmVhaztcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBsaXN0ZW5lciBhIGNhbGxiYWNrIGZ1bmN0aW9uIGludm9rZWQgd2hlbiB0aGUgcmVnaXN0ZXJlZCBzdGF0ZXMgY2hhbmdlcy5cbiAgICAgKiAgICAgICAgVGhlIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBwYXJhbWV0ZXJzLCBgZXZlbnRgIGFuZCBgc3RhdGVgLlxuICAgICAqICAgICAgICBTZWUgW1tTdGF0ZVJlZ2lzdHJ5TGlzdGVuZXJdXVxuICAgICAqIEByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IGRlcmVnaXN0ZXJzIHRoZSBsaXN0ZW5lclxuICAgICAqL1xuICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLm9uU3RhdGVzQ2hhbmdlZCA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlcmVnaXN0ZXJMaXN0ZW5lcigpIHtcbiAgICAgICAgICAgIHJlbW92ZUZyb20odGhpcy5saXN0ZW5lcnMpKGxpc3RlbmVyKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW1wbGljaXQgcm9vdCBzdGF0ZVxuICAgICAqXG4gICAgICogR2V0cyB0aGUgcm9vdCBvZiB0aGUgc3RhdGUgdHJlZS5cbiAgICAgKiBUaGUgcm9vdCBzdGF0ZSBpcyBpbXBsaWNpdGx5IGNyZWF0ZWQgYnkgVUktUm91dGVyLlxuICAgICAqIE5vdGU6IHRoaXMgcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIHJlcHJlc2VudGF0aW9uLCBub3QgYSBbW1N0YXRlRGVjbGFyYXRpb25dXVxuICAgICAqXG4gICAgICogQHJldHVybiB0aGUgcm9vdCBbW1N0YXRlT2JqZWN0XV1cbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5yb290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcm9vdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSBzdGF0ZSB0byB0aGUgcmVnaXN0cnlcbiAgICAgKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbU3RhdGVEZWNsYXJhdGlvbl1dIG9yIHF1ZXVlcyBpdCBmb3IgcmVnaXN0cmF0aW9uLlxuICAgICAqXG4gICAgICogTm90ZTogYSBzdGF0ZSB3aWxsIGJlIHF1ZXVlZCBpZiB0aGUgc3RhdGUncyBwYXJlbnQgaXNuJ3QgeWV0IHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGVEZWZpbml0aW9uIHRoZSBkZWZpbml0aW9uIG9mIHRoZSBzdGF0ZSB0byByZWdpc3Rlci5cbiAgICAgKiBAcmV0dXJucyB0aGUgaW50ZXJuYWwgW1tTdGF0ZU9iamVjdF1dIG9iamVjdC5cbiAgICAgKiAgICAgICAgICBJZiB0aGUgc3RhdGUgd2FzIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkLCB0aGVuIHRoZSBvYmplY3QgaXMgZnVsbHkgYnVpbHQgKFNlZTogW1tTdGF0ZUJ1aWxkZXJdXSkuXG4gICAgICogICAgICAgICAgSWYgdGhlIHN0YXRlIHdhcyBvbmx5IHF1ZXVlZCwgdGhlbiB0aGUgb2JqZWN0IGlzIG5vdCBmdWxseSBidWlsdC5cbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChzdGF0ZURlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVRdWV1ZS5yZWdpc3RlcihzdGF0ZURlZmluaXRpb24pO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5fZGVyZWdpc3RlclRyZWUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFsbCQkMSA9IHRoaXMuZ2V0KCkubWFwKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLiQkc3RhdGUoKTsgfSk7XG4gICAgICAgIHZhciBnZXRDaGlsZHJlbiA9IGZ1bmN0aW9uIChzdGF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBfY2hpbGRyZW4gPSBhbGwkJDEuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzdGF0ZXMuaW5kZXhPZihzLnBhcmVudCkgIT09IC0xOyB9KTtcbiAgICAgICAgICAgIHJldHVybiBfY2hpbGRyZW4ubGVuZ3RoID09PSAwID8gX2NoaWxkcmVuIDogX2NoaWxkcmVuLmNvbmNhdChnZXRDaGlsZHJlbihfY2hpbGRyZW4pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gZ2V0Q2hpbGRyZW4oW3N0YXRlXSk7XG4gICAgICAgIHZhciBkZXJlZ2lzdGVyZWQgPSBbc3RhdGVdLmNvbmNhdChjaGlsZHJlbikucmV2ZXJzZSgpO1xuICAgICAgICBkZXJlZ2lzdGVyZWQuZm9yRWFjaChmdW5jdGlvbiAoX3N0YXRlKSB7XG4gICAgICAgICAgICB2YXIgJHVyID0gX3RoaXMuX3JvdXRlci51cmxSb3V0ZXI7XG4gICAgICAgICAgICAvLyBSZW1vdmUgVVJMIHJ1bGVcbiAgICAgICAgICAgICR1ci5ydWxlcygpLmZpbHRlcihwcm9wRXEoJ3N0YXRlJywgX3N0YXRlKSkuZm9yRWFjaCgkdXIucmVtb3ZlUnVsZS5iaW5kKCR1cikpO1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHN0YXRlIGZyb20gcmVnaXN0cnlcbiAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5zdGF0ZXNbX3N0YXRlLm5hbWVdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlcmVnaXN0ZXJlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBzdGF0ZSBmcm9tIHRoZSByZWdpc3RyeVxuICAgICAqXG4gICAgICogVGhpcyByZW1vdmVzIGEgc3RhdGUgZnJvbSB0aGUgcmVnaXN0cnkuXG4gICAgICogSWYgdGhlIHN0YXRlIGhhcyBjaGlsZHJlbiwgdGhleSBhcmUgYXJlIGFsc28gcmVtb3ZlZCBmcm9tIHRoZSByZWdpc3RyeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSB0aGUgc3RhdGUncyBuYW1lIG9yIG9iamVjdCByZXByZXNlbnRhdGlvblxuICAgICAqIEByZXR1cm5zIHtTdGF0ZU9iamVjdFtdfSBhIGxpc3Qgb2YgcmVtb3ZlZCBzdGF0ZXNcbiAgICAgKi9cbiAgICBTdGF0ZVJlZ2lzdHJ5LnByb3RvdHlwZS5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lKSB7XG4gICAgICAgIHZhciBfc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmICghX3N0YXRlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgZGVyZWdpc3RlciBzdGF0ZTsgbm90IGZvdW5kOiBcIiArIHN0YXRlT3JOYW1lKTtcbiAgICAgICAgdmFyIGRlcmVnaXN0ZXJlZFN0YXRlcyA9IHRoaXMuX2RlcmVnaXN0ZXJUcmVlKF9zdGF0ZS4kJHN0YXRlKCkpO1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gbGlzdGVuZXIoJ2RlcmVnaXN0ZXJlZCcsIGRlcmVnaXN0ZXJlZFN0YXRlcy5tYXAoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuc2VsZjsgfSkpOyB9KTtcbiAgICAgICAgcmV0dXJuIGRlcmVnaXN0ZXJlZFN0YXRlcztcbiAgICB9O1xuICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgYmFzZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0YXRlcykubWFwKGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBfdGhpcy5zdGF0ZXNbbmFtZV0uc2VsZjsgfSk7XG4gICAgICAgIHZhciBmb3VuZCA9IHRoaXMubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBiYXNlKTtcbiAgICAgICAgcmV0dXJuIGZvdW5kICYmIGZvdW5kLnNlbGYgfHwgbnVsbDtcbiAgICB9O1xuICAgIFN0YXRlUmVnaXN0cnkucHJvdG90eXBlLmRlY29yYXRvciA9IGZ1bmN0aW9uIChuYW1lLCBmdW5jKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkZXIuYnVpbGRlcihuYW1lLCBmdW5jKTtcbiAgICB9O1xuICAgIHJldHVybiBTdGF0ZVJlZ2lzdHJ5O1xufSgpKTtcblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSB1cmxcbiAqL1xuLyoqIGZvciB0eXBlZG9jICovXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gcXVvdGVSZWdFeHAoc3RyLCBwYXJhbSkge1xuICAgIHZhciBzdXJyb3VuZFBhdHRlcm4gPSBbJycsICcnXSwgcmVzdWx0ID0gc3RyLnJlcGxhY2UoL1tcXFxcXFxbXFxdXFxeJCorPy4oKXx7fV0vZywgJ1xcXFwkJicpO1xuICAgIGlmICghcGFyYW0pXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgc3dpdGNoIChwYXJhbS5zcXVhc2gpIHtcbiAgICAgICAgY2FzZSBmYWxzZTpcbiAgICAgICAgICAgIHN1cnJvdW5kUGF0dGVybiA9IFsnKCcsICcpJyArIChwYXJhbS5pc09wdGlvbmFsID8gJz8nIDogJycpXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIHRydWU6XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFwvJC8sICcnKTtcbiAgICAgICAgICAgIHN1cnJvdW5kUGF0dGVybiA9IFsnKD86XFwvKCcsICcpfFxcLyk/J107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHN1cnJvdW5kUGF0dGVybiA9IFtcIihcIiArIHBhcmFtLnNxdWFzaCArIFwifFwiLCAnKT8nXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0ICsgc3Vycm91bmRQYXR0ZXJuWzBdICsgcGFyYW0udHlwZS5wYXR0ZXJuLnNvdXJjZSArIHN1cnJvdW5kUGF0dGVyblsxXTtcbn1cbi8qKiBAaGlkZGVuICovXG52YXIgbWVtb2l6ZVRvID0gZnVuY3Rpb24gKG9iaiwgX3Byb3AsIGZuKSB7XG4gICAgcmV0dXJuIG9ialtfcHJvcF0gPSBvYmpbX3Byb3BdIHx8IGZuKCk7XG59O1xuLyoqIEBoaWRkZW4gKi9cbnZhciBzcGxpdE9uU2xhc2ggPSBzcGxpdE9uRGVsaW0oJy8nKTtcbi8qKlxuICogTWF0Y2hlcyBVUkxzIGFnYWluc3QgcGF0dGVybnMuXG4gKlxuICogTWF0Y2hlcyBVUkxzIGFnYWluc3QgcGF0dGVybnMgYW5kIGV4dHJhY3RzIG5hbWVkIHBhcmFtZXRlcnMgZnJvbSB0aGUgcGF0aCBvciB0aGUgc2VhcmNoXG4gKiBwYXJ0IG9mIHRoZSBVUkwuXG4gKlxuICogQSBVUkwgcGF0dGVybiBjb25zaXN0cyBvZiBhIHBhdGggcGF0dGVybiwgb3B0aW9uYWxseSBmb2xsb3dlZCBieSAnPycgYW5kIGEgbGlzdCBvZiBzZWFyY2ggKHF1ZXJ5KVxuICogcGFyYW1ldGVycy4gTXVsdGlwbGUgc2VhcmNoIHBhcmFtZXRlciBuYW1lcyBhcmUgc2VwYXJhdGVkIGJ5ICcmJy4gU2VhcmNoIHBhcmFtZXRlcnNcbiAqIGRvIG5vdCBpbmZsdWVuY2Ugd2hldGhlciBvciBub3QgYSBVUkwgaXMgbWF0Y2hlZCwgYnV0IHRoZWlyIHZhbHVlcyBhcmUgcGFzc2VkIHRocm91Z2ggaW50b1xuICogdGhlIG1hdGNoZWQgcGFyYW1ldGVycyByZXR1cm5lZCBieSBbW1VybE1hdGNoZXIuZXhlY11dLlxuICpcbiAqIC0gKlBhdGggcGFyYW1ldGVycyogYXJlIGRlZmluZWQgdXNpbmcgY3VybHkgYnJhY2UgcGxhY2Vob2xkZXJzIChgL3NvbWVwYXRoL3twYXJhbX1gKVxuICogb3IgY29sb24gcGxhY2Vob2xkZXJzIChgL3NvbWVQYXRoLzpwYXJhbWApLlxuICpcbiAqIC0gKkEgcGFyYW1ldGVyIFJlZ0V4cCogbWF5IGJlIGRlZmluZWQgZm9yIGEgcGFyYW0gYWZ0ZXIgYSBjb2xvblxuICogKGAvc29tZVBhdGgve3BhcmFtOlthLXpBLVowLTldK31gKSBpbiBhIGN1cmx5IGJyYWNlIHBsYWNlaG9sZGVyLlxuICogVGhlIHJlZ2V4cCBtdXN0IG1hdGNoIGZvciB0aGUgdXJsIHRvIGJlIG1hdGNoZWQuXG4gKiBTaG91bGQgdGhlIHJlZ2V4cCBpdHNlbGYgY29udGFpbiBjdXJseSBicmFjZXMsIHRoZXkgbXVzdCBiZSBpbiBtYXRjaGVkIHBhaXJzIG9yIGVzY2FwZWQgd2l0aCBhIGJhY2tzbGFzaC5cbiAqXG4gKiBOb3RlOiBhIFJlZ0V4cCBwYXJhbWV0ZXIgd2lsbCBlbmNvZGUgaXRzIHZhbHVlIHVzaW5nIGVpdGhlciBbW1BhcmFtVHlwZXMucGF0aF1dIG9yIFtbUGFyYW1UeXBlcy5xdWVyeV1dLlxuICpcbiAqIC0gKkN1c3RvbSBwYXJhbWV0ZXIgdHlwZXMqIG1heSBhbHNvIGJlIHNwZWNpZmllZCBhZnRlciBhIGNvbG9uIChgL3NvbWVQYXRoL3twYXJhbTppbnR9YCkgaW4gY3VybHkgYnJhY2UgcGFyYW1ldGVycy5cbiAqICAgU2VlIFtbVXJsTWF0Y2hlckZhY3RvcnkudHlwZV1dIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIC0gKkNhdGNoLWFsbCBwYXJhbWV0ZXJzKiBhcmUgZGVmaW5lZCB1c2luZyBhbiBhc3RlcmlzayBwbGFjZWhvbGRlciAoYC9zb21lcGF0aC8qY2F0Y2hhbGxwYXJhbWApLlxuICogICBBIGNhdGNoLWFsbCAqIHBhcmFtZXRlciB2YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIHJlbWFpbmRlciBvZiB0aGUgVVJMLlxuICpcbiAqIC0tLVxuICpcbiAqIFBhcmFtZXRlciBuYW1lcyBtYXkgY29udGFpbiBvbmx5IHdvcmQgY2hhcmFjdGVycyAobGF0aW4gbGV0dGVycywgZGlnaXRzLCBhbmQgdW5kZXJzY29yZSkgYW5kXG4gKiBtdXN0IGJlIHVuaXF1ZSB3aXRoaW4gdGhlIHBhdHRlcm4gKGFjcm9zcyBib3RoIHBhdGggYW5kIHNlYXJjaCBwYXJhbWV0ZXJzKS5cbiAqIEEgcGF0aCBwYXJhbWV0ZXIgbWF0Y2hlcyBhbnkgbnVtYmVyIG9mIGNoYXJhY3RlcnMgb3RoZXIgdGhhbiAnLycuIEZvciBjYXRjaC1hbGxcbiAqIHBsYWNlaG9sZGVycyB0aGUgcGF0aCBwYXJhbWV0ZXIgbWF0Y2hlcyBhbnkgbnVtYmVyIG9mIGNoYXJhY3RlcnMuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogKiBgJy9oZWxsby8nYCAtIE1hdGNoZXMgb25seSBpZiB0aGUgcGF0aCBpcyBleGFjdGx5ICcvaGVsbG8vJy4gVGhlcmUgaXMgbm8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yXG4gKiAgIHRyYWlsaW5nIHNsYXNoZXMsIGFuZCBwYXR0ZXJucyBoYXZlIHRvIG1hdGNoIHRoZSBlbnRpcmUgcGF0aCwgbm90IGp1c3QgYSBwcmVmaXguXG4gKiAqIGAnL3VzZXIvOmlkJ2AgLSBNYXRjaGVzICcvdXNlci9ib2InIG9yICcvdXNlci8xMjM0ISEhJyBvciBldmVuICcvdXNlci8nIGJ1dCBub3QgJy91c2VyJyBvclxuICogICAnL3VzZXIvYm9iL2RldGFpbHMnLiBUaGUgc2Vjb25kIHBhdGggc2VnbWVudCB3aWxsIGJlIGNhcHR1cmVkIGFzIHRoZSBwYXJhbWV0ZXIgJ2lkJy5cbiAqICogYCcvdXNlci97aWR9J2AgLSBTYW1lIGFzIHRoZSBwcmV2aW91cyBleGFtcGxlLCBidXQgdXNpbmcgY3VybHkgYnJhY2Ugc3ludGF4LlxuICogKiBgJy91c2VyL3tpZDpbXi9dKn0nYCAtIFNhbWUgYXMgdGhlIHByZXZpb3VzIGV4YW1wbGUuXG4gKiAqIGAnL3VzZXIve2lkOlswLTlhLWZBLUZdezEsOH19J2AgLSBTaW1pbGFyIHRvIHRoZSBwcmV2aW91cyBleGFtcGxlLCBidXQgb25seSBtYXRjaGVzIGlmIHRoZSBpZFxuICogICBwYXJhbWV0ZXIgY29uc2lzdHMgb2YgMSB0byA4IGhleCBkaWdpdHMuXG4gKiAqIGAnL2ZpbGVzL3twYXRoOi4qfSdgIC0gTWF0Y2hlcyBhbnkgVVJMIHN0YXJ0aW5nIHdpdGggJy9maWxlcy8nIGFuZCBjYXB0dXJlcyB0aGUgcmVzdCBvZiB0aGVcbiAqICAgcGF0aCBpbnRvIHRoZSBwYXJhbWV0ZXIgJ3BhdGgnLlxuICogKiBgJy9maWxlcy8qcGF0aCdgIC0gZGl0dG8uXG4gKiAqIGAnL2NhbGVuZGFyL3tzdGFydDpkYXRlfSdgIC0gTWF0Y2hlcyBcIi9jYWxlbmRhci8yMDE0LTExLTEyXCIgKGJlY2F1c2UgdGhlIHBhdHRlcm4gZGVmaW5lZFxuICogICBpbiB0aGUgYnVpbHQtaW4gIGBkYXRlYCBQYXJhbVR5cGUgbWF0Y2hlcyBgMjAxNC0xMS0xMmApIGFuZCBwcm92aWRlcyBhIERhdGUgb2JqZWN0IGluICRzdGF0ZVBhcmFtcy5zdGFydFxuICpcbiAqL1xudmFyIFVybE1hdGNoZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHBhdHRlcm4gVGhlIHBhdHRlcm4gdG8gY29tcGlsZSBpbnRvIGEgbWF0Y2hlci5cbiAgICAgKiBAcGFyYW0gcGFyYW1UeXBlcyBUaGUgW1tQYXJhbVR5cGVzXV0gcmVnaXN0cnlcbiAgICAgKiBAcGFyYW0gY29uZmlnICBBIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAgICogLSBgY2FzZUluc2Vuc2l0aXZlYCAtIGB0cnVlYCBpZiBVUkwgbWF0Y2hpbmcgc2hvdWxkIGJlIGNhc2UgaW5zZW5zaXRpdmUsIG90aGVyd2lzZSBgZmFsc2VgLCB0aGUgZGVmYXVsdCB2YWx1ZSAoZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpIGlzIGBmYWxzZWAuXG4gICAgICogLSBgc3RyaWN0YCAtIGBmYWxzZWAgaWYgbWF0Y2hpbmcgYWdhaW5zdCBhIFVSTCB3aXRoIGEgdHJhaWxpbmcgc2xhc2ggc2hvdWxkIGJlIHRyZWF0ZWQgYXMgZXF1aXZhbGVudCB0byBhIFVSTCB3aXRob3V0IGEgdHJhaWxpbmcgc2xhc2gsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBVcmxNYXRjaGVyKHBhdHRlcm4kJDEsIHBhcmFtVHlwZXMsIHBhcmFtRmFjdG9yeSwgY29uZmlnKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9jYWNoZSA9IHsgcGF0aDogW3RoaXNdIH07XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuX3BhcmFtcyA9IFtdO1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9zZWdtZW50cyA9IFtdO1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9jb21waWxlZCA9IFtdO1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuJCQxO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGRlZmF1bHRzKHRoaXMuY29uZmlnLCB7XG4gICAgICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgY2FzZUluc2Vuc2l0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgIHBhcmFtTWFwOiBpZGVudGl0eSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEZpbmQgYWxsIHBsYWNlaG9sZGVycyBhbmQgY3JlYXRlIGEgY29tcGlsZWQgcGF0dGVybiwgdXNpbmcgZWl0aGVyIGNsYXNzaWMgb3IgY3VybHkgc3ludGF4OlxuICAgICAgICAvLyAgICcqJyBuYW1lXG4gICAgICAgIC8vICAgJzonIG5hbWVcbiAgICAgICAgLy8gICAneycgbmFtZSAnfSdcbiAgICAgICAgLy8gICAneycgbmFtZSAnOicgcmVnZXhwICd9J1xuICAgICAgICAvLyBUaGUgcmVndWxhciBleHByZXNzaW9uIGlzIHNvbWV3aGF0IGNvbXBsaWNhdGVkIGR1ZSB0byB0aGUgbmVlZCB0byBhbGxvdyBjdXJseSBicmFjZXNcbiAgICAgICAgLy8gaW5zaWRlIHRoZSByZWd1bGFyIGV4cHJlc3Npb24uIFRoZSBwbGFjZWhvbGRlciByZWdleHAgYnJlYWtzIGRvd24gYXMgZm9sbG93czpcbiAgICAgICAgLy8gICAgKFs6Kl0pKFtcXHdcXFtcXF1dKykgICAgICAgICAgICAgIC0gY2xhc3NpYyBwbGFjZWhvbGRlciAoJDEgLyAkMikgKHNlYXJjaCB2ZXJzaW9uIGhhcyAtIGZvciBzbmFrZS1jYXNlKVxuICAgICAgICAvLyAgICBcXHsoW1xcd1xcW1xcXV0rKSg/OlxcOlxccyooIC4uLiApKT9cXH0gIC0gY3VybHkgYnJhY2UgcGxhY2Vob2xkZXIgKCQzKSB3aXRoIG9wdGlvbmFsIHJlZ2V4cC90eXBlIC4uLiAoJDQpIChzZWFyY2ggdmVyc2lvbiBoYXMgLSBmb3Igc25ha2UtY2FzZVxuICAgICAgICAvLyAgICAoPzogLi4uIHwgLi4uIHwgLi4uICkrICAgICAgICAgLSB0aGUgcmVnZXhwIGNvbnNpc3RzIG9mIGFueSBudW1iZXIgb2YgYXRvbXMsIGFuIGF0b20gYmVpbmcgZWl0aGVyXG4gICAgICAgIC8vICAgIFtee31cXFxcXSsgICAgICAgICAgICAgICAgICAgICAgIC0gYW55dGhpbmcgb3RoZXIgdGhhbiBjdXJseSBicmFjZXMgb3IgYmFja3NsYXNoXG4gICAgICAgIC8vICAgIFxcXFwuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gYSBiYWNrc2xhc2ggZXNjYXBlXG4gICAgICAgIC8vICAgIFxceyg/Oltee31cXFxcXSt8XFxcXC4pKlxcfSAgICAgICAgICAtIGEgbWF0Y2hlZCBzZXQgb2YgY3VybHkgYnJhY2VzIGNvbnRhaW5pbmcgb3RoZXIgYXRvbXNcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gLyhbOipdKShbXFx3XFxbXFxdXSspfFxceyhbXFx3XFxbXFxdXSspKD86XFw6XFxzKigoPzpbXnt9XFxcXF0rfFxcXFwufFxceyg/Oltee31cXFxcXSt8XFxcXC4pKlxcfSkrKSk/XFx9L2c7XG4gICAgICAgIHZhciBzZWFyY2hQbGFjZWhvbGRlciA9IC8oWzpdPykoW1xcd1xcW1xcXS4tXSspfFxceyhbXFx3XFxbXFxdLi1dKykoPzpcXDpcXHMqKCg/Oltee31cXFxcXSt8XFxcXC58XFx7KD86W157fVxcXFxdK3xcXFxcLikqXFx9KSspKT9cXH0vZztcbiAgICAgICAgdmFyIHBhdHRlcm5zID0gW107XG4gICAgICAgIHZhciBsYXN0ID0gMCwgbWF0Y2hBcnJheTtcbiAgICAgICAgdmFyIGNoZWNrUGFyYW1FcnJvcnMgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIGlmICghVXJsTWF0Y2hlci5uYW1lVmFsaWRhdG9yLnRlc3QoaWQpKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW1ldGVyIG5hbWUgJ1wiICsgaWQgKyBcIicgaW4gcGF0dGVybiAnXCIgKyBwYXR0ZXJuJCQxICsgXCInXCIpO1xuICAgICAgICAgICAgaWYgKGZpbmQoX3RoaXMuX3BhcmFtcywgcHJvcEVxKCdpZCcsIGlkKSkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIHBhcmFtZXRlciBuYW1lICdcIiArIGlkICsgXCInIGluIHBhdHRlcm4gJ1wiICsgcGF0dGVybiQkMSArIFwiJ1wiKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gU3BsaXQgaW50byBzdGF0aWMgc2VnbWVudHMgc2VwYXJhdGVkIGJ5IHBhdGggcGFyYW1ldGVyIHBsYWNlaG9sZGVycy5cbiAgICAgICAgLy8gVGhlIG51bWJlciBvZiBzZWdtZW50cyBpcyBhbHdheXMgMSBtb3JlIHRoYW4gdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzLlxuICAgICAgICB2YXIgbWF0Y2hEZXRhaWxzID0gZnVuY3Rpb24gKG0sIGlzU2VhcmNoKSB7XG4gICAgICAgICAgICAvLyBJRVs3OF0gcmV0dXJucyAnJyBmb3IgdW5tYXRjaGVkIGdyb3VwcyBpbnN0ZWFkIG9mIG51bGxcbiAgICAgICAgICAgIHZhciBpZCA9IG1bMl0gfHwgbVszXTtcbiAgICAgICAgICAgIHZhciByZWdleHAgPSBpc1NlYXJjaCA/IG1bNF0gOiBtWzRdIHx8IChtWzFdID09PSAnKicgPyAnW1xcXFxzXFxcXFNdKicgOiBudWxsKTtcbiAgICAgICAgICAgIHZhciBtYWtlUmVnZXhwVHlwZSA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIGluaGVyaXQocGFyYW1UeXBlcy50eXBlKGlzU2VhcmNoID8gJ3F1ZXJ5JyA6ICdwYXRoJyksIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiBuZXcgUmVnRXhwKHN0ciwgX3RoaXMuY29uZmlnLmNhc2VJbnNlbnNpdGl2ZSA/ICdpJyA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICB9KTsgfTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgIHJlZ2V4cDogcmVnZXhwLFxuICAgICAgICAgICAgICAgIGNmZzogX3RoaXMuY29uZmlnLnBhcmFtc1tpZF0sXG4gICAgICAgICAgICAgICAgc2VnbWVudDogcGF0dGVybiQkMS5zdWJzdHJpbmcobGFzdCwgbS5pbmRleCksXG4gICAgICAgICAgICAgICAgdHlwZTogIXJlZ2V4cCA/IG51bGwgOiBwYXJhbVR5cGVzLnR5cGUocmVnZXhwKSB8fCBtYWtlUmVnZXhwVHlwZShyZWdleHApLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHAsIHNlZ21lbnQ7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25kaXRpb25hbC1hc3NpZ25tZW50XG4gICAgICAgIHdoaWxlICgobWF0Y2hBcnJheSA9IHBsYWNlaG9sZGVyLmV4ZWMocGF0dGVybiQkMSkpKSB7XG4gICAgICAgICAgICBwID0gbWF0Y2hEZXRhaWxzKG1hdGNoQXJyYXksIGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChwLnNlZ21lbnQuaW5kZXhPZignPycpID49IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIHdlJ3JlIGludG8gdGhlIHNlYXJjaCBwYXJ0XG4gICAgICAgICAgICBjaGVja1BhcmFtRXJyb3JzKHAuaWQpO1xuICAgICAgICAgICAgdGhpcy5fcGFyYW1zLnB1c2gocGFyYW1GYWN0b3J5LmZyb21QYXRoKHAuaWQsIHAudHlwZSwgdGhpcy5jb25maWcucGFyYW1NYXAocC5jZmcsIGZhbHNlKSkpO1xuICAgICAgICAgICAgdGhpcy5fc2VnbWVudHMucHVzaChwLnNlZ21lbnQpO1xuICAgICAgICAgICAgcGF0dGVybnMucHVzaChbcC5zZWdtZW50LCB0YWlsKHRoaXMuX3BhcmFtcyldKTtcbiAgICAgICAgICAgIGxhc3QgPSBwbGFjZWhvbGRlci5sYXN0SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgc2VnbWVudCA9IHBhdHRlcm4kJDEuc3Vic3RyaW5nKGxhc3QpO1xuICAgICAgICAvLyBGaW5kIGFueSBzZWFyY2ggcGFyYW1ldGVyIG5hbWVzIGFuZCByZW1vdmUgdGhlbSBmcm9tIHRoZSBsYXN0IHNlZ21lbnRcbiAgICAgICAgdmFyIGkgPSBzZWdtZW50LmluZGV4T2YoJz8nKTtcbiAgICAgICAgaWYgKGkgPj0gMCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaCA9IHNlZ21lbnQuc3Vic3RyaW5nKGkpO1xuICAgICAgICAgICAgc2VnbWVudCA9IHNlZ21lbnQuc3Vic3RyaW5nKDAsIGkpO1xuICAgICAgICAgICAgaWYgKHNlYXJjaC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbGFzdCA9IDA7XG4gICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbmRpdGlvbmFsLWFzc2lnbm1lbnRcbiAgICAgICAgICAgICAgICB3aGlsZSAoKG1hdGNoQXJyYXkgPSBzZWFyY2hQbGFjZWhvbGRlci5leGVjKHNlYXJjaCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHAgPSBtYXRjaERldGFpbHMobWF0Y2hBcnJheSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrUGFyYW1FcnJvcnMocC5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5wdXNoKHBhcmFtRmFjdG9yeS5mcm9tU2VhcmNoKHAuaWQsIHAudHlwZSwgdGhpcy5jb25maWcucGFyYW1NYXAocC5jZmcsIHRydWUpKSk7XG4gICAgICAgICAgICAgICAgICAgIGxhc3QgPSBwbGFjZWhvbGRlci5sYXN0SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmID8mXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NlZ21lbnRzLnB1c2goc2VnbWVudCk7XG4gICAgICAgIHRoaXMuX2NvbXBpbGVkID0gcGF0dGVybnMubWFwKGZ1bmN0aW9uIChfcGF0dGVybikgeyByZXR1cm4gcXVvdGVSZWdFeHAuYXBwbHkobnVsbCwgX3BhdHRlcm4pOyB9KS5jb25jYXQocXVvdGVSZWdFeHAoc2VnbWVudCkpO1xuICAgIH1cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFVybE1hdGNoZXIuZW5jb2RlRGFzaGVzID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cikucmVwbGFjZSgvLS9nLCBmdW5jdGlvbiAoYykgeyByZXR1cm4gXCIlNUMlXCIgKyBjLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7IH0pO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gR2l2ZW4gYSBtYXRjaGVyLCByZXR1cm4gYW4gYXJyYXkgd2l0aCB0aGUgbWF0Y2hlcidzIHBhdGggc2VnbWVudHMgYW5kIHBhdGggcGFyYW1zLCBpbiBvcmRlciAqL1xuICAgIFVybE1hdGNoZXIucGF0aFNlZ21lbnRzQW5kUGFyYW1zID0gZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgICAgdmFyIHN0YXRpY1NlZ21lbnRzID0gbWF0Y2hlci5fc2VnbWVudHM7XG4gICAgICAgIHZhciBwYXRoUGFyYW1zID0gbWF0Y2hlci5fcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcC5sb2NhdGlvbiA9PT0gZXhwb3J0cy5EZWZUeXBlLlBBVEg7IH0pO1xuICAgICAgICByZXR1cm4gYXJyYXlUdXBsZXMoc3RhdGljU2VnbWVudHMsIHBhdGhQYXJhbXMuY29uY2F0KHVuZGVmaW5lZCkpXG4gICAgICAgICAgICAucmVkdWNlKHVubmVzdFIsIFtdKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAhPT0gJycgJiYgaXNEZWZpbmVkKHgpOyB9KTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuIEdpdmVuIGEgbWF0Y2hlciwgcmV0dXJuIGFuIGFycmF5IHdpdGggdGhlIG1hdGNoZXIncyBxdWVyeSBwYXJhbXMgKi9cbiAgICBVcmxNYXRjaGVyLnF1ZXJ5UGFyYW1zID0gZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoZXIuX3BhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAubG9jYXRpb24gPT09IGV4cG9ydHMuRGVmVHlwZS5TRUFSQ0g7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29tcGFyZSB0d28gVXJsTWF0Y2hlcnNcbiAgICAgKlxuICAgICAqIFRoaXMgY29tcGFyaXNvbiBmdW5jdGlvbiBjb252ZXJ0cyBhIFVybE1hdGNoZXIgaW50byBzdGF0aWMgYW5kIGR5bmFtaWMgcGF0aCBzZWdtZW50cy5cbiAgICAgKiBFYWNoIHN0YXRpYyBwYXRoIHNlZ21lbnQgaXMgYSBzdGF0aWMgc3RyaW5nIGJldHdlZW4gYSBwYXRoIHNlcGFyYXRvciAoc2xhc2ggY2hhcmFjdGVyKS5cbiAgICAgKiBFYWNoIGR5bmFtaWMgc2VnbWVudCBpcyBhIHBhdGggcGFyYW1ldGVyLlxuICAgICAqXG4gICAgICogVGhlIGNvbXBhcmlzb24gZnVuY3Rpb24gc29ydHMgc3RhdGljIHNlZ21lbnRzIGJlZm9yZSBkeW5hbWljIG9uZXMuXG4gICAgICovXG4gICAgVXJsTWF0Y2hlci5jb21wYXJlID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFR1cm4gYSBVcmxNYXRjaGVyIGFuZCBhbGwgaXRzIHBhcmVudCBtYXRjaGVycyBpbnRvIGFuIGFycmF5XG4gICAgICAgICAqIG9mIHNsYXNoIGxpdGVyYWxzICcvJywgc3RyaW5nIGxpdGVyYWxzLCBhbmQgUGFyYW0gb2JqZWN0c1xuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGV4YW1wbGUgbWF0Y2hlciBtYXRjaGVzIHN0cmluZ3MgbGlrZSBcIi9mb28vOnBhcmFtL3RhaWxcIjpcbiAgICAgICAgICogdmFyIG1hdGNoZXIgPSAkdW1mLmNvbXBpbGUoXCIvZm9vXCIpLmFwcGVuZCgkdW1mLmNvbXBpbGUoXCIvOnBhcmFtXCIpKS5hcHBlbmQoJHVtZi5jb21waWxlKFwiL1wiKSkuYXBwZW5kKCR1bWYuY29tcGlsZShcInRhaWxcIikpO1xuICAgICAgICAgKiB2YXIgcmVzdWx0ID0gc2VnbWVudHMobWF0Y2hlcik7IC8vIFsgJy8nLCAnZm9vJywgJy8nLCBQYXJhbSwgJy8nLCAndGFpbCcgXVxuICAgICAgICAgKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIHJlc3VsdCBhcyBgbWF0Y2hlci5fY2FjaGUuc2VnbWVudHNgXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgc2VnbWVudHMgPSBmdW5jdGlvbiAobWF0Y2hlcikge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXIuX2NhY2hlLnNlZ21lbnRzID0gbWF0Y2hlci5fY2FjaGUuc2VnbWVudHMgfHxcbiAgICAgICAgICAgICAgICBtYXRjaGVyLl9jYWNoZS5wYXRoLm1hcChVcmxNYXRjaGVyLnBhdGhTZWdtZW50c0FuZFBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgICAgICAgICAgICAgLnJlZHVjZShqb2luTmVpZ2hib3JzUiwgW10pXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGlzU3RyaW5nKHgpID8gc3BsaXRPblNsYXNoKHgpIDogeDsgfSlcbiAgICAgICAgICAgICAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIHRoZSBzb3J0IHdlaWdodCBmb3IgZWFjaCBzZWdtZW50IG9mIGEgVXJsTWF0Y2hlclxuICAgICAgICAgKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIHJlc3VsdCBhcyBgbWF0Y2hlci5fY2FjaGUud2VpZ2h0c2BcbiAgICAgICAgICovXG4gICAgICAgIHZhciB3ZWlnaHRzID0gZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVyLl9jYWNoZS53ZWlnaHRzID0gbWF0Y2hlci5fY2FjaGUud2VpZ2h0cyB8fFxuICAgICAgICAgICAgICAgIHNlZ21lbnRzKG1hdGNoZXIpLm1hcChmdW5jdGlvbiAoc2VnbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTb3J0IHNsYXNoZXMgZmlyc3QsIHRoZW4gc3RhdGljIHN0cmluZ3MsIHRoZSBQYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ21lbnQgPT09ICcvJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdHJpbmcoc2VnbWVudCkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBQYXJhbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUGFkcyBzaG9ydGVyIGFycmF5IGluLXBsYWNlIChtdXRhdGVzKVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHBhZEFycmF5cyA9IGZ1bmN0aW9uIChsLCByLCBwYWRWYWwpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSBNYXRoLm1heChsLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgICAgICAgd2hpbGUgKGwubGVuZ3RoIDwgbGVuKVxuICAgICAgICAgICAgICAgIGwucHVzaChwYWRWYWwpO1xuICAgICAgICAgICAgd2hpbGUgKHIubGVuZ3RoIDwgbGVuKVxuICAgICAgICAgICAgICAgIHIucHVzaChwYWRWYWwpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgd2VpZ2h0c0EgPSB3ZWlnaHRzKGEpLCB3ZWlnaHRzQiA9IHdlaWdodHMoYik7XG4gICAgICAgIHBhZEFycmF5cyh3ZWlnaHRzQSwgd2VpZ2h0c0IsIDApO1xuICAgICAgICB2YXIgX3BhaXJzID0gYXJyYXlUdXBsZXMod2VpZ2h0c0EsIHdlaWdodHNCKTtcbiAgICAgICAgdmFyIGNtcCwgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IF9wYWlycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY21wID0gX3BhaXJzW2ldWzBdIC0gX3BhaXJzW2ldWzFdO1xuICAgICAgICAgICAgaWYgKGNtcCAhPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gY21wO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb25jYXRlbmF0ZWQgVXJsTWF0Y2hlclxuICAgICAqXG4gICAgICogQnVpbGRzIGEgbmV3IFVybE1hdGNoZXIgYnkgYXBwZW5kaW5nIGFub3RoZXIgVXJsTWF0Y2hlciB0byB0aGlzIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1cmwgQSBgVXJsTWF0Y2hlcmAgaW5zdGFuY2UgdG8gYXBwZW5kIGFzIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQgYFVybE1hdGNoZXJgLlxuICAgICAqL1xuICAgIFVybE1hdGNoZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4ucHVzaCh1cmwpO1xuICAgICAgICB1cmwuX2NhY2hlID0ge1xuICAgICAgICAgICAgcGF0aDogdGhpcy5fY2FjaGUucGF0aC5jb25jYXQodXJsKSxcbiAgICAgICAgICAgIHBhcmVudDogdGhpcyxcbiAgICAgICAgICAgIHBhdHRlcm46IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFVybE1hdGNoZXIucHJvdG90eXBlLmlzUm9vdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlLnBhdGhbMF0gPT09IHRoaXM7XG4gICAgfTtcbiAgICAvKiogUmV0dXJucyB0aGUgaW5wdXQgcGF0dGVybiBzdHJpbmcgKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0dGVybjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3RzIHRoZSBzcGVjaWZpZWQgdXJsL3BhdGggYWdhaW5zdCB0aGlzIG1hdGNoZXIuXG4gICAgICpcbiAgICAgKiBUZXN0cyBpZiB0aGUgZ2l2ZW4gdXJsIG1hdGNoZXMgdGhpcyBtYXRjaGVyJ3MgcGF0dGVybiwgYW5kIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhcHR1cmVkXG4gICAgICogcGFyYW1ldGVyIHZhbHVlcy4gIFJldHVybnMgbnVsbCBpZiB0aGUgcGF0aCBkb2VzIG5vdCBtYXRjaC5cbiAgICAgKlxuICAgICAqIFRoZSByZXR1cm5lZCBvYmplY3QgY29udGFpbnMgdGhlIHZhbHVlc1xuICAgICAqIG9mIGFueSBzZWFyY2ggcGFyYW1ldGVycyB0aGF0IGFyZSBtZW50aW9uZWQgaW4gdGhlIHBhdHRlcm4sIGJ1dCB0aGVpciB2YWx1ZSBtYXkgYmUgbnVsbCBpZlxuICAgICAqIHRoZXkgYXJlIG5vdCBwcmVzZW50IGluIGBzZWFyY2hgLiBUaGlzIG1lYW5zIHRoYXQgc2VhcmNoIHBhcmFtZXRlcnMgYXJlIGFsd2F5cyB0cmVhdGVkXG4gICAgICogYXMgb3B0aW9uYWwuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBuZXcgVXJsTWF0Y2hlcignL3VzZXIve2lkfT9xJnInKS5leGVjKCcvdXNlci9ib2InLCB7XG4gICAgICogICB4OiAnMScsIHE6ICdoZWxsbydcbiAgICAgKiB9KTtcbiAgICAgKiAvLyByZXR1cm5zIHsgaWQ6ICdib2InLCBxOiAnaGVsbG8nLCByOiBudWxsIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoICAgIFRoZSBVUkwgcGF0aCB0byBtYXRjaCwgZS5nLiBgJGxvY2F0aW9uLnBhdGgoKWAuXG4gICAgICogQHBhcmFtIHNlYXJjaCAgVVJMIHNlYXJjaCBwYXJhbWV0ZXJzLCBlLmcuIGAkbG9jYXRpb24uc2VhcmNoKClgLlxuICAgICAqIEBwYXJhbSBoYXNoICAgIFVSTCBoYXNoIGUuZy4gYCRsb2NhdGlvbi5oYXNoKClgLlxuICAgICAqIEBwYXJhbSBvcHRpb25zXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY2FwdHVyZWQgcGFyYW1ldGVyIHZhbHVlcy5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5leGVjID0gZnVuY3Rpb24gKHBhdGgsIHNlYXJjaCwgaGFzaCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoc2VhcmNoID09PSB2b2lkIDApIHsgc2VhcmNoID0ge307IH1cbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdmFyIG1hdGNoID0gbWVtb2l6ZVRvKHRoaXMuX2NhY2hlLCAncGF0dGVybicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKFtcbiAgICAgICAgICAgICAgICAnXicsXG4gICAgICAgICAgICAgICAgdW5uZXN0KF90aGlzLl9jYWNoZS5wYXRoLm1hcChwcm9wKCdfY29tcGlsZWQnKSkpLmpvaW4oJycpLFxuICAgICAgICAgICAgICAgIF90aGlzLmNvbmZpZy5zdHJpY3QgPT09IGZhbHNlID8gJ1xcLz8nIDogJycsXG4gICAgICAgICAgICAgICAgJyQnLFxuICAgICAgICAgICAgXS5qb2luKCcnKSwgX3RoaXMuY29uZmlnLmNhc2VJbnNlbnNpdGl2ZSA/ICdpJyA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH0pLmV4ZWMocGF0aCk7XG4gICAgICAgIGlmICghbWF0Y2gpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgLy8gb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHsgaXNvbGF0ZTogZmFsc2UgfSk7XG4gICAgICAgIHZhciBhbGxQYXJhbXMgPSB0aGlzLnBhcmFtZXRlcnMoKSwgcGF0aFBhcmFtcyA9IGFsbFBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiAhcGFyYW0uaXNTZWFyY2goKTsgfSksIHNlYXJjaFBhcmFtcyA9IGFsbFBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiBwYXJhbS5pc1NlYXJjaCgpOyB9KSwgblBhdGhTZWdtZW50cyA9IHRoaXMuX2NhY2hlLnBhdGgubWFwKGZ1bmN0aW9uICh1cmxtKSB7IHJldHVybiB1cmxtLl9zZWdtZW50cy5sZW5ndGggLSAxOyB9KS5yZWR1Y2UoZnVuY3Rpb24gKGEsIHgpIHsgcmV0dXJuIGEgKyB4OyB9KSwgdmFsdWVzJCQxID0ge307XG4gICAgICAgIGlmIChuUGF0aFNlZ21lbnRzICE9PSBtYXRjaC5sZW5ndGggLSAxKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5iYWxhbmNlZCBjYXB0dXJlIGdyb3VwIGluIHJvdXRlICdcIiArIHRoaXMucGF0dGVybiArIFwiJ1wiKTtcbiAgICAgICAgZnVuY3Rpb24gZGVjb2RlUGF0aEFycmF5KHBhcmFtVmFsKSB7XG4gICAgICAgICAgICB2YXIgcmV2ZXJzZVN0cmluZyA9IGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIHN0ci5zcGxpdCgnJykucmV2ZXJzZSgpLmpvaW4oJycpOyB9O1xuICAgICAgICAgICAgdmFyIHVucXVvdGVEYXNoZXMgPSBmdW5jdGlvbiAoc3RyKSB7IHJldHVybiBzdHIucmVwbGFjZSgvXFxcXC0vZywgJy0nKTsgfTtcbiAgICAgICAgICAgIHZhciBzcGxpdCA9IHJldmVyc2VTdHJpbmcocGFyYW1WYWwpLnNwbGl0KC8tKD8hXFxcXCkvKTtcbiAgICAgICAgICAgIHZhciBhbGxSZXZlcnNlZCA9IG1hcChzcGxpdCwgcmV2ZXJzZVN0cmluZyk7XG4gICAgICAgICAgICByZXR1cm4gbWFwKGFsbFJldmVyc2VkLCB1bnF1b3RlRGFzaGVzKS5yZXZlcnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuUGF0aFNlZ21lbnRzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IHBhdGhQYXJhbXNbaV07XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBtYXRjaFtpICsgMV07XG4gICAgICAgICAgICAvLyBpZiB0aGUgcGFyYW0gdmFsdWUgbWF0Y2hlcyBhIHByZS1yZXBsYWNlIHBhaXIsIHJlcGxhY2UgdGhlIHZhbHVlIGJlZm9yZSBkZWNvZGluZy5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFyYW0ucmVwbGFjZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbS5yZXBsYWNlW2pdLmZyb20gPT09IHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmFtLnJlcGxhY2Vbal0udG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgcGFyYW0uYXJyYXkgPT09IHRydWUpXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBkZWNvZGVQYXRoQXJyYXkodmFsdWUpO1xuICAgICAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkpXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJhbS50eXBlLmRlY29kZSh2YWx1ZSk7XG4gICAgICAgICAgICB2YWx1ZXMkJDFbcGFyYW0uaWRdID0gcGFyYW0udmFsdWUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHNlYXJjaFBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gc2VhcmNoW3BhcmFtLmlkXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGFyYW0ucmVwbGFjZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbS5yZXBsYWNlW2pdLmZyb20gPT09IHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmFtLnJlcGxhY2Vbal0udG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNEZWZpbmVkKHZhbHVlKSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcmFtLnR5cGUuZGVjb2RlKHZhbHVlKTtcbiAgICAgICAgICAgIHZhbHVlcyQkMVtwYXJhbS5pZF0gPSBwYXJhbS52YWx1ZSh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaGFzaClcbiAgICAgICAgICAgIHZhbHVlcyQkMVsnIyddID0gaGFzaDtcbiAgICAgICAgcmV0dXJuIHZhbHVlcyQkMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBoaWRkZW5cbiAgICAgKiBSZXR1cm5zIGFsbCB0aGUgW1tQYXJhbV1dIG9iamVjdHMgb2YgYWxsIHBhdGggYW5kIHNlYXJjaCBwYXJhbWV0ZXJzIG9mIHRoaXMgcGF0dGVybiBpbiBvcmRlciBvZiBhcHBlYXJhbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge0FycmF5LjxQYXJhbT59ICBBbiBhcnJheSBvZiBbW1BhcmFtXV0gb2JqZWN0cy4gTXVzdCBiZSB0cmVhdGVkIGFzIHJlYWQtb25seS4gSWYgdGhlXG4gICAgICogICAgcGF0dGVybiBoYXMgbm8gcGFyYW1ldGVycywgYW4gZW1wdHkgYXJyYXkgaXMgcmV0dXJuZWQuXG4gICAgICovXG4gICAgVXJsTWF0Y2hlci5wcm90b3R5cGUucGFyYW1ldGVycyA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzID09PSB2b2lkIDApIHsgb3B0cyA9IHt9OyB9XG4gICAgICAgIGlmIChvcHRzLmluaGVyaXQgPT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmFtcztcbiAgICAgICAgcmV0dXJuIHVubmVzdCh0aGlzLl9jYWNoZS5wYXRoLm1hcChmdW5jdGlvbiAobWF0Y2hlcikgeyByZXR1cm4gbWF0Y2hlci5fcGFyYW1zOyB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAaGlkZGVuXG4gICAgICogUmV0dXJucyBhIHNpbmdsZSBwYXJhbWV0ZXIgZnJvbSB0aGlzIFVybE1hdGNoZXIgYnkgaWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpZFxuICAgICAqIEBwYXJhbSBvcHRzXG4gICAgICogQHJldHVybnMge1R8UGFyYW18YW55fGJvb2xlYW58VXJsTWF0Y2hlcnxudWxsfVxuICAgICAqL1xuICAgIFVybE1hdGNoZXIucHJvdG90eXBlLnBhcmFtZXRlciA9IGZ1bmN0aW9uIChpZCwgb3B0cykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAob3B0cyA9PT0gdm9pZCAwKSB7IG9wdHMgPSB7fTsgfVxuICAgICAgICB2YXIgZmluZFBhcmFtID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLl9wYXJhbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbS5pZCA9PT0gaWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuX2NhY2hlLnBhcmVudDtcbiAgICAgICAgcmV0dXJuIGZpbmRQYXJhbSgpIHx8IChvcHRzLmluaGVyaXQgIT09IGZhbHNlICYmIHBhcmVudCAmJiBwYXJlbnQucGFyYW1ldGVyKGlkLCBvcHRzKSkgfHwgbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyB0aGUgaW5wdXQgcGFyYW1ldGVyIHZhbHVlcyBhZ2FpbnN0IHRoaXMgVXJsTWF0Y2hlclxuICAgICAqXG4gICAgICogQ2hlY2tzIGFuIG9iamVjdCBoYXNoIG9mIHBhcmFtZXRlcnMgdG8gdmFsaWRhdGUgdGhlaXIgY29ycmVjdG5lc3MgYWNjb3JkaW5nIHRvIHRoZSBwYXJhbWV0ZXJcbiAgICAgKiB0eXBlcyBvZiB0aGlzIGBVcmxNYXRjaGVyYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJhbXMgVGhlIG9iamVjdCBoYXNoIG9mIHBhcmFtZXRlcnMgdG8gdmFsaWRhdGUuXG4gICAgICogQHJldHVybnMgUmV0dXJucyBgdHJ1ZWAgaWYgYHBhcmFtc2AgdmFsaWRhdGVzLCBvdGhlcndpc2UgYGZhbHNlYC5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS52YWxpZGF0ZXMgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgIHZhciB2YWxpZFBhcmFtVmFsID0gZnVuY3Rpb24gKHBhcmFtLCB2YWwkJDEpIHtcbiAgICAgICAgICAgIHJldHVybiAhcGFyYW0gfHwgcGFyYW0udmFsaWRhdGVzKHZhbCQkMSk7XG4gICAgICAgIH07XG4gICAgICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcbiAgICAgICAgLy8gSSdtIG5vdCBzdXJlIHdoeSB0aGlzIGNoZWNrcyBvbmx5IHRoZSBwYXJhbSBrZXlzIHBhc3NlZCBpbiwgYW5kIG5vdCBhbGwgdGhlIHBhcmFtcyBrbm93biB0byB0aGUgbWF0Y2hlclxuICAgICAgICB2YXIgcGFyYW1TY2hlbWEgPSB0aGlzLnBhcmFtZXRlcnMoKS5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtRGVmKSB7IHJldHVybiBwYXJhbXMuaGFzT3duUHJvcGVydHkocGFyYW1EZWYuaWQpOyB9KTtcbiAgICAgICAgcmV0dXJuIHBhcmFtU2NoZW1hLm1hcChmdW5jdGlvbiAocGFyYW1EZWYpIHsgcmV0dXJuIHZhbGlkUGFyYW1WYWwocGFyYW1EZWYsIHBhcmFtc1twYXJhbURlZi5pZF0pOyB9KS5yZWR1Y2UoYWxsVHJ1ZVIsIHRydWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBzZXQgb2YgcGFyYW1ldGVyIHZhbHVlcywgY3JlYXRlcyBhIFVSTCBmcm9tIHRoaXMgVXJsTWF0Y2hlci5cbiAgICAgKlxuICAgICAqIENyZWF0ZXMgYSBVUkwgdGhhdCBtYXRjaGVzIHRoaXMgcGF0dGVybiBieSBzdWJzdGl0dXRpbmcgdGhlIHNwZWNpZmllZCB2YWx1ZXNcbiAgICAgKiBmb3IgdGhlIHBhdGggYW5kIHNlYXJjaCBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbmV3IFVybE1hdGNoZXIoJy91c2VyL3tpZH0/cScpLmZvcm1hdCh7IGlkOidib2InLCBxOid5ZXMnIH0pO1xuICAgICAqIC8vIHJldHVybnMgJy91c2VyL2JvYj9xPXllcydcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgIHRoZSB2YWx1ZXMgdG8gc3Vic3RpdHV0ZSBmb3IgdGhlIHBhcmFtZXRlcnMgaW4gdGhpcyBwYXR0ZXJuLlxuICAgICAqIEByZXR1cm5zIHRoZSBmb3JtYXR0ZWQgVVJMIChwYXRoIGFuZCBvcHRpb25hbGx5IHNlYXJjaCBwYXJ0KS5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAodmFsdWVzJCQxKSB7XG4gICAgICAgIGlmICh2YWx1ZXMkJDEgPT09IHZvaWQgMCkgeyB2YWx1ZXMkJDEgPSB7fTsgfVxuICAgICAgICAvLyBCdWlsZCB0aGUgZnVsbCBwYXRoIG9mIFVybE1hdGNoZXJzIChpbmNsdWRpbmcgYWxsIHBhcmVudCBVcmxNYXRjaGVycylcbiAgICAgICAgdmFyIHVybE1hdGNoZXJzID0gdGhpcy5fY2FjaGUucGF0aDtcbiAgICAgICAgLy8gRXh0cmFjdCBhbGwgdGhlIHN0YXRpYyBzZWdtZW50cyBhbmQgUGFyYW1zIChwcm9jZXNzZWQgYXMgUGFyYW1EZXRhaWxzKVxuICAgICAgICAvLyBpbnRvIGFuIG9yZGVyZWQgYXJyYXlcbiAgICAgICAgdmFyIHBhdGhTZWdtZW50c0FuZFBhcmFtcyA9IHVybE1hdGNoZXJzLm1hcChVcmxNYXRjaGVyLnBhdGhTZWdtZW50c0FuZFBhcmFtcylcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiBpc1N0cmluZyh4KSA/IHggOiBnZXREZXRhaWxzKHgpOyB9KTtcbiAgICAgICAgLy8gRXh0cmFjdCB0aGUgcXVlcnkgcGFyYW1zIGludG8gYSBzZXBhcmF0ZSBhcnJheVxuICAgICAgICB2YXIgcXVlcnlQYXJhbXMgPSB1cmxNYXRjaGVycy5tYXAoVXJsTWF0Y2hlci5xdWVyeVBhcmFtcylcbiAgICAgICAgICAgIC5yZWR1Y2UodW5uZXN0UiwgW10pXG4gICAgICAgICAgICAubWFwKGdldERldGFpbHMpO1xuICAgICAgICB2YXIgaXNJbnZhbGlkID0gZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiBwYXJhbS5pc1ZhbGlkID09PSBmYWxzZTsgfTtcbiAgICAgICAgaWYgKHBhdGhTZWdtZW50c0FuZFBhcmFtcy5jb25jYXQocXVlcnlQYXJhbXMpLmZpbHRlcihpc0ludmFsaWQpLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdpdmVuIGEgUGFyYW0sIGFwcGxpZXMgdGhlIHBhcmFtZXRlciB2YWx1ZSwgdGhlbiByZXR1cm5zIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGl0XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXREZXRhaWxzKHBhcmFtKSB7XG4gICAgICAgICAgICAvLyBOb3JtYWxpemUgdG8gdHlwZWQgdmFsdWVcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHBhcmFtLnZhbHVlKHZhbHVlcyQkMVtwYXJhbS5pZF0pO1xuICAgICAgICAgICAgdmFyIGlzVmFsaWQgPSBwYXJhbS52YWxpZGF0ZXModmFsdWUpO1xuICAgICAgICAgICAgdmFyIGlzRGVmYXVsdFZhbHVlID0gcGFyYW0uaXNEZWZhdWx0VmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gc3F1YXNoIG1vZGUgZm9yIHRoZSBwYXJhbWV0ZXJcbiAgICAgICAgICAgIHZhciBzcXVhc2ggPSBpc0RlZmF1bHRWYWx1ZSA/IHBhcmFtLnNxdWFzaCA6IGZhbHNlO1xuICAgICAgICAgICAgLy8gQWxsb3cgdGhlIFBhcmFtZXRlcidzIFR5cGUgdG8gZW5jb2RlIHRoZSB2YWx1ZVxuICAgICAgICAgICAgdmFyIGVuY29kZWQgPSBwYXJhbS50eXBlLmVuY29kZSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4geyBwYXJhbTogcGFyYW0sIHZhbHVlOiB2YWx1ZSwgaXNWYWxpZDogaXNWYWxpZCwgaXNEZWZhdWx0VmFsdWU6IGlzRGVmYXVsdFZhbHVlLCBzcXVhc2g6IHNxdWFzaCwgZW5jb2RlZDogZW5jb2RlZCB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIEJ1aWxkIHVwIHRoZSBwYXRoLXBvcnRpb24gZnJvbSB0aGUgbGlzdCBvZiBzdGF0aWMgc2VnbWVudHMgYW5kIHBhcmFtZXRlcnNcbiAgICAgICAgdmFyIHBhdGhTdHJpbmcgPSBwYXRoU2VnbWVudHNBbmRQYXJhbXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHgpIHtcbiAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IGlzIGEgc3RhdGljIHNlZ21lbnQgKGEgcmF3IHN0cmluZyk7IGp1c3QgYXBwZW5kIGl0XG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcoeCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYyArIHg7XG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIGl0J3MgYSBQYXJhbURldGFpbHMuXG4gICAgICAgICAgICB2YXIgc3F1YXNoID0geC5zcXVhc2gsIGVuY29kZWQgPSB4LmVuY29kZWQsIHBhcmFtID0geC5wYXJhbTtcbiAgICAgICAgICAgIC8vIElmIHNxdWFzaCBpcyA9PT0gdHJ1ZSwgdHJ5IHRvIHJlbW92ZSBhIHNsYXNoIGZyb20gdGhlIHBhdGhcbiAgICAgICAgICAgIGlmIChzcXVhc2ggPT09IHRydWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIChhY2MubWF0Y2goL1xcLyQvKSkgPyBhY2Muc2xpY2UoMCwgLTEpIDogYWNjO1xuICAgICAgICAgICAgLy8gSWYgc3F1YXNoIGlzIGEgc3RyaW5nLCB1c2UgdGhlIHN0cmluZyBmb3IgdGhlIHBhcmFtIHZhbHVlXG4gICAgICAgICAgICBpZiAoaXNTdHJpbmcoc3F1YXNoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjICsgc3F1YXNoO1xuICAgICAgICAgICAgaWYgKHNxdWFzaCAhPT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYzsgLy8gP1xuICAgICAgICAgICAgaWYgKGVuY29kZWQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBwYXJhbWV0ZXIgdmFsdWUgaXMgYW4gYXJyYXksIGVuY29kZSB0aGUgdmFsdWUgdXNpbmcgZW5jb2RlRGFzaGVzXG4gICAgICAgICAgICBpZiAoaXNBcnJheShlbmNvZGVkKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjICsgbWFwKGVuY29kZWQsIFVybE1hdGNoZXIuZW5jb2RlRGFzaGVzKS5qb2luKCctJyk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgcGFyYW1ldGVyIHR5cGUgaXMgXCJyYXdcIiwgdGhlbiBkbyBub3QgZW5jb2RlVVJJQ29tcG9uZW50XG4gICAgICAgICAgICBpZiAocGFyYW0ucmF3KVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2MgKyBlbmNvZGVkO1xuICAgICAgICAgICAgLy8gRW5jb2RlIHRoZSB2YWx1ZVxuICAgICAgICAgICAgcmV0dXJuIGFjYyArIGVuY29kZVVSSUNvbXBvbmVudChlbmNvZGVkKTtcbiAgICAgICAgfSwgJycpO1xuICAgICAgICAvLyBCdWlsZCB0aGUgcXVlcnkgc3RyaW5nIGJ5IGFwcGx5aW5nIHBhcmFtZXRlciB2YWx1ZXMgKGFycmF5IG9yIHJlZ3VsYXIpXG4gICAgICAgIC8vIHRoZW4gbWFwcGluZyB0byBrZXk9dmFsdWUsIHRoZW4gZmxhdHRlbmluZyBhbmQgam9pbmluZyB1c2luZyBcIiZcIlxuICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBxdWVyeVBhcmFtcy5tYXAoZnVuY3Rpb24gKHBhcmFtRGV0YWlscykge1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1EZXRhaWxzLnBhcmFtLCBzcXVhc2ggPSBwYXJhbURldGFpbHMuc3F1YXNoLCBlbmNvZGVkID0gcGFyYW1EZXRhaWxzLmVuY29kZWQsIGlzRGVmYXVsdFZhbHVlID0gcGFyYW1EZXRhaWxzLmlzRGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgaWYgKGVuY29kZWQgPT0gbnVsbCB8fCAoaXNEZWZhdWx0VmFsdWUgJiYgc3F1YXNoICE9PSBmYWxzZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCFpc0FycmF5KGVuY29kZWQpKVxuICAgICAgICAgICAgICAgIGVuY29kZWQgPSBbZW5jb2RlZF07XG4gICAgICAgICAgICBpZiAoZW5jb2RlZC5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCFwYXJhbS5yYXcpXG4gICAgICAgICAgICAgICAgZW5jb2RlZCA9IG1hcChlbmNvZGVkLCBlbmNvZGVVUklDb21wb25lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIGVuY29kZWQubWFwKGZ1bmN0aW9uICh2YWwkJDEpIHsgcmV0dXJuIHBhcmFtLmlkICsgXCI9XCIgKyB2YWwkJDE7IH0pO1xuICAgICAgICB9KS5maWx0ZXIoaWRlbnRpdHkpLnJlZHVjZSh1bm5lc3RSLCBbXSkuam9pbignJicpO1xuICAgICAgICAvLyBDb25jYXQgdGhlIHBhdGhzdHJpbmcgd2l0aCB0aGUgcXVlcnlTdHJpbmcgKGlmIGV4aXN0cykgYW5kIHRoZSBoYXNoU3RyaW5nIChpZiBleGlzdHMpXG4gICAgICAgIHJldHVybiBwYXRoU3RyaW5nICsgKHF1ZXJ5U3RyaW5nID8gXCI/XCIgKyBxdWVyeVN0cmluZyA6ICcnKSArICh2YWx1ZXMkJDFbJyMnXSA/ICcjJyArIHZhbHVlcyQkMVsnIyddIDogJycpO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBVcmxNYXRjaGVyLm5hbWVWYWxpZGF0b3IgPSAvXlxcdysoWy0uXStcXHcrKSooPzpcXFtcXF0pPyQvO1xuICAgIHJldHVybiBVcmxNYXRjaGVyO1xufSgpKTtcblxuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG4vKipcbiAqIEZhY3RvcnkgZm9yIFtbVXJsTWF0Y2hlcl1dIGluc3RhbmNlcy5cbiAqXG4gKiBUaGUgZmFjdG9yeSBpcyBhdmFpbGFibGUgdG8gbmcxIHNlcnZpY2VzIGFzXG4gKiBgJHVybE1hdGNoZXJGYWN0b3J5YCBvciBuZzEgcHJvdmlkZXJzIGFzIGAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlcmAuXG4gKi9cbnZhciBVcmxNYXRjaGVyRmFjdG9yeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVcmxNYXRjaGVyRmFjdG9yeSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5wYXJhbVR5cGVzID0gbmV3IFBhcmFtVHlwZXMoKTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5faXNDYXNlSW5zZW5zaXRpdmUgPSBmYWxzZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5faXNTdHJpY3RNb2RlID0gdHJ1ZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGVmYXVsdFNxdWFzaFBvbGljeSA9IGZhbHNlO1xuICAgICAgICAvKiogQGludGVybmFsYXBpIENyZWF0ZXMgYSBuZXcgW1tQYXJhbV1dIGZvciBhIGdpdmVuIGxvY2F0aW9uIChEZWZUeXBlKSAqL1xuICAgICAgICB0aGlzLnBhcmFtRmFjdG9yeSA9IHtcbiAgICAgICAgICAgIC8qKiBDcmVhdGVzIGEgbmV3IFtbUGFyYW1dXSBmcm9tIGEgQ09ORklHIGJsb2NrICovXG4gICAgICAgICAgICBmcm9tQ29uZmlnOiBmdW5jdGlvbiAoaWQsIHR5cGUsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYW0oaWQsIHR5cGUsIGNvbmZpZywgZXhwb3J0cy5EZWZUeXBlLkNPTkZJRywgX3RoaXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKiBDcmVhdGVzIGEgbmV3IFtbUGFyYW1dXSBmcm9tIGEgdXJsIFBBVEggKi9cbiAgICAgICAgICAgIGZyb21QYXRoOiBmdW5jdGlvbiAoaWQsIHR5cGUsIGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYW0oaWQsIHR5cGUsIGNvbmZpZywgZXhwb3J0cy5EZWZUeXBlLlBBVEgsIF90aGlzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKiogQ3JlYXRlcyBhIG5ldyBbW1BhcmFtXV0gZnJvbSBhIHVybCBTRUFSQ0ggKi9cbiAgICAgICAgICAgIGZyb21TZWFyY2g6IGZ1bmN0aW9uIChpZCwgdHlwZSwgY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJhbShpZCwgdHlwZSwgY29uZmlnLCBleHBvcnRzLkRlZlR5cGUuU0VBUkNILCBfdGhpcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl9nZXRDb25maWcgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHsgc3RyaWN0OiBfdGhpcy5faXNTdHJpY3RNb2RlLCBjYXNlSW5zZW5zaXRpdmU6IF90aGlzLl9pc0Nhc2VJbnNlbnNpdGl2ZSB9LCBjb25maWcpO1xuICAgICAgICB9O1xuICAgICAgICBleHRlbmQodGhpcywgeyBVcmxNYXRjaGVyOiBVcmxNYXRjaGVyLCBQYXJhbTogUGFyYW0gfSk7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybE1hdGNoZXJGYWN0b3J5LnByb3RvdHlwZS5jYXNlSW5zZW5zaXRpdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ2FzZUluc2Vuc2l0aXZlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5faXNDYXNlSW5zZW5zaXRpdmU7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxNYXRjaGVyRmFjdG9yeS5wcm90b3R5cGUuc3RyaWN0TW9kZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNTdHJpY3RNb2RlID0gaXNEZWZpbmVkKHZhbHVlKSA/IHZhbHVlIDogdGhpcy5faXNTdHJpY3RNb2RlO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmRlZmF1bHRTcXVhc2hQb2xpY3kgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKGlzRGVmaW5lZCh2YWx1ZSkgJiYgdmFsdWUgIT09IHRydWUgJiYgdmFsdWUgIT09IGZhbHNlICYmICFpc1N0cmluZyh2YWx1ZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNxdWFzaCBwb2xpY3k6IFwiICsgdmFsdWUgKyBcIi4gVmFsaWQgcG9saWNpZXM6IGZhbHNlLCB0cnVlLCBhcmJpdHJhcnktc3RyaW5nXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdFNxdWFzaFBvbGljeSA9IGlzRGVmaW5lZCh2YWx1ZSkgPyB2YWx1ZSA6IHRoaXMuX2RlZmF1bHRTcXVhc2hQb2xpY3k7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgW1tVcmxNYXRjaGVyXV0gZm9yIHRoZSBzcGVjaWZpZWQgcGF0dGVybi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXR0ZXJuICBUaGUgVVJMIHBhdHRlcm4uXG4gICAgICogQHBhcmFtIGNvbmZpZyAgVGhlIGNvbmZpZyBvYmplY3QgaGFzaC5cbiAgICAgKiBAcmV0dXJucyBUaGUgVXJsTWF0Y2hlci5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyRmFjdG9yeS5wcm90b3R5cGUuY29tcGlsZSA9IGZ1bmN0aW9uIChwYXR0ZXJuLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcmxNYXRjaGVyKHBhdHRlcm4sIHRoaXMucGFyYW1UeXBlcywgdGhpcy5wYXJhbUZhY3RvcnksIHRoaXMuX2dldENvbmZpZyhjb25maWcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIG9iamVjdCBpcyBhIFtbVXJsTWF0Y2hlcl1dLCBvciBmYWxzZSBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb2JqZWN0ICBUaGUgb2JqZWN0IHRvIHBlcmZvcm0gdGhlIHR5cGUgY2hlY2sgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdCBtYXRjaGVzIHRoZSBgVXJsTWF0Y2hlcmAgaW50ZXJmYWNlLCBieVxuICAgICAqICAgICAgICAgIGltcGxlbWVudGluZyBhbGwgdGhlIHNhbWUgbWV0aG9kcy5cbiAgICAgKi9cbiAgICBVcmxNYXRjaGVyRmFjdG9yeS5wcm90b3R5cGUuaXNNYXRjaGVyID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAvLyBUT0RPOiB0eXBlb2Y/XG4gICAgICAgIGlmICghaXNPYmplY3Qob2JqZWN0KSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICAgIGZvckVhY2goVXJsTWF0Y2hlci5wcm90b3R5cGUsIGZ1bmN0aW9uICh2YWwsIG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbCkpXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICYmIChpc0RlZmluZWQob2JqZWN0W25hbWVdKSAmJiBpc0Z1bmN0aW9uKG9iamVjdFtuYW1lXSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJlZ2lzdGVycyBhIGN1c3RvbSBbW1BhcmFtVHlwZV1dIG9iamVjdFxuICAgICAqXG4gICAgICogQSBbW1BhcmFtVHlwZV1dIGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIFVSTHMgd2l0aCB0eXBlZCBwYXJhbWV0ZXJzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWUgIFRoZSB0eXBlIG5hbWUuXG4gICAgICogQHBhcmFtIGRlZmluaXRpb24gVGhlIHR5cGUgZGVmaW5pdGlvbi4gU2VlIFtbUGFyYW1UeXBlRGVmaW5pdGlvbl1dIGZvciBpbmZvcm1hdGlvbiBvbiB0aGUgdmFsdWVzIGFjY2VwdGVkLlxuICAgICAqIEBwYXJhbSBkZWZpbml0aW9uRm4gQSBmdW5jdGlvbiB0aGF0IGlzIGluamVjdGVkIGJlZm9yZSB0aGUgYXBwIHJ1bnRpbWUgc3RhcnRzLlxuICAgICAqICAgICAgICBUaGUgcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIGEgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0uXG4gICAgICogICAgICAgIFRoZSByZXN1bHQgaXMgbWVyZ2VkIGludG8gdGhlIGV4aXN0aW5nIGBkZWZpbml0aW9uYC5cbiAgICAgKiAgICAgICAgU2VlIFtbUGFyYW1UeXBlXV0gZm9yIGluZm9ybWF0aW9uIG9uIHRoZSB2YWx1ZXMgYWNjZXB0ZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyAtIGlmIGEgdHlwZSB3YXMgcmVnaXN0ZXJlZDogdGhlIFtbVXJsTWF0Y2hlckZhY3RvcnldXVxuICAgICAqICAgLSBpZiBvbmx5IHRoZSBgbmFtZWAgcGFyYW1ldGVyIHdhcyBzcGVjaWZpZWQ6IHRoZSBjdXJyZW50bHkgcmVnaXN0ZXJlZCBbW1BhcmFtVHlwZV1dIG9iamVjdCwgb3IgdW5kZWZpbmVkXG4gICAgICpcbiAgICAgKiBOb3RlOiBSZWdpc3RlciBjdXN0b20gdHlwZXMgKmJlZm9yZSB1c2luZyB0aGVtKiBpbiBhIHN0YXRlIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBTZWUgW1tQYXJhbVR5cGVEZWZpbml0aW9uXV0gZm9yIGV4YW1wbGVzXG4gICAgICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLnR5cGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKSB7XG4gICAgICAgIHZhciB0eXBlID0gdGhpcy5wYXJhbVR5cGVzLnR5cGUobmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbkZuKTtcbiAgICAgICAgcmV0dXJuICFpc0RlZmluZWQoZGVmaW5pdGlvbikgPyB0eXBlIDogdGhpcztcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5lbnF1ZXVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5fZmx1c2hUeXBlUXVldWUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgVXJsTWF0Y2hlckZhY3RvcnkucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucGFyYW1UeXBlcy5kaXNwb3NlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gVXJsTWF0Y2hlckZhY3Rvcnk7XG59KCkpO1xuXG4vKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIHVybFxuICovIC8qKiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgW1tVcmxSdWxlXV1cbiAqXG4gKiBDcmVhdGVzIGEgW1tVcmxSdWxlXV0gZnJvbSBhOlxuICpcbiAqIC0gYHN0cmluZ2BcbiAqIC0gW1tVcmxNYXRjaGVyXV1cbiAqIC0gYFJlZ0V4cGBcbiAqIC0gW1tTdGF0ZU9iamVjdF1dXG4gKiBAaW50ZXJuYWxhcGlcbiAqL1xudmFyIFVybFJ1bGVGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFVybFJ1bGVGYWN0b3J5KHJvdXRlcikge1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICB9XG4gICAgVXJsUnVsZUZhY3RvcnkucHJvdG90eXBlLmNvbXBpbGUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlci51cmxNYXRjaGVyRmFjdG9yeS5jb21waWxlKHN0cik7XG4gICAgfTtcbiAgICBVcmxSdWxlRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKHdoYXQsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG1ha2VSdWxlID0gcGF0dGVybihbXG4gICAgICAgICAgICBbaXNTdHJpbmcsIGZ1bmN0aW9uIChfd2hhdCkgeyByZXR1cm4gbWFrZVJ1bGUoX3RoaXMuY29tcGlsZShfd2hhdCkpOyB9XSxcbiAgICAgICAgICAgIFtpcyhVcmxNYXRjaGVyKSwgZnVuY3Rpb24gKF93aGF0KSB7IHJldHVybiBfdGhpcy5mcm9tVXJsTWF0Y2hlcihfd2hhdCwgaGFuZGxlcik7IH1dLFxuICAgICAgICAgICAgW2lzU3RhdGUsIGZ1bmN0aW9uIChfd2hhdCkgeyByZXR1cm4gX3RoaXMuZnJvbVN0YXRlKF93aGF0LCBfdGhpcy5yb3V0ZXIpOyB9XSxcbiAgICAgICAgICAgIFtpcyhSZWdFeHApLCBmdW5jdGlvbiAoX3doYXQpIHsgcmV0dXJuIF90aGlzLmZyb21SZWdFeHAoX3doYXQsIGhhbmRsZXIpOyB9XSxcbiAgICAgICAgICAgIFtpc0Z1bmN0aW9uLCBmdW5jdGlvbiAoX3doYXQpIHsgcmV0dXJuIG5ldyBCYXNlVXJsUnVsZShfd2hhdCwgaGFuZGxlcik7IH1dLFxuICAgICAgICBdKTtcbiAgICAgICAgdmFyIHJ1bGUgPSBtYWtlUnVsZSh3aGF0KTtcbiAgICAgICAgaWYgKCFydWxlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCAnd2hhdCcgaW4gd2hlbigpXCIpO1xuICAgICAgICByZXR1cm4gcnVsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEEgVXJsUnVsZSB3aGljaCBtYXRjaGVzIGJhc2VkIG9uIGEgVXJsTWF0Y2hlclxuICAgICAqXG4gICAgICogVGhlIGBoYW5kbGVyYCBtYXkgYmUgZWl0aGVyIGEgYHN0cmluZ2AsIGEgW1tVcmxSdWxlSGFuZGxlckZuXV0gb3IgYW5vdGhlciBbW1VybE1hdGNoZXJdXVxuICAgICAqXG4gICAgICogIyMgSGFuZGxlciBhcyBhIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBmdW5jdGlvbiwgdGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aDpcbiAgICAgKlxuICAgICAqIC0gbWF0Y2hlZCBwYXJhbWV0ZXIgdmFsdWVzIChbW1Jhd1BhcmFtc11dIGZyb20gW1tVcmxNYXRjaGVyLmV4ZWNdXSlcbiAgICAgKiAtIHVybDogdGhlIGN1cnJlbnQgVXJsIChbW1VybFBhcnRzXV0pXG4gICAgICogLSByb3V0ZXI6IHRoZSByb3V0ZXIgb2JqZWN0IChbW1VJUm91dGVyXV0pXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiB2YXIgdXJsTWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9mb28vOmZvb0lkLzpiYXJJZFwiKTtcbiAgICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVVybE1hdGNoZXIodXJsTWF0Y2hlciwgbWF0Y2ggPT4gXCIvaG9tZS9cIiArIG1hdGNoLmZvb0lkICsgXCIvXCIgKyBtYXRjaC5iYXJJZCk7XG4gICAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby8xMjMvNDU2Jyk7IC8vIHJlc3VsdHMgaW4geyBmb29JZDogJzEyMycsIGJhcklkOiAnNDU2JyB9XG4gICAgICogdmFyIHJlc3VsdCA9IHJ1bGUuaGFuZGxlcihtYXRjaCk7IC8vICcvaG9tZS8xMjMvNDU2J1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMgSGFuZGxlciBhcyBVcmxNYXRjaGVyXG4gICAgICpcbiAgICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBVcmxNYXRjaGVyLCB0aGUgaGFuZGxlciBtYXRjaGVyIGlzIHVzZWQgdG8gY3JlYXRlIHRoZSBuZXcgdXJsLlxuICAgICAqIFRoZSBgaGFuZGxlcmAgVXJsTWF0Y2hlciBpcyBmb3JtYXR0ZWQgdXNpbmcgdGhlIG1hdGNoZWQgcGFyYW0gZnJvbSB0aGUgZmlyc3QgbWF0Y2hlci5cbiAgICAgKiBUaGUgdXJsIGlzIHJlcGxhY2VkIHdpdGggdGhlIHJlc3VsdC5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciB1cmxNYXRjaGVyID0gJHVtZi5jb21waWxlKFwiL2Zvby86Zm9vSWQvOmJhcklkXCIpO1xuICAgICAqIHZhciBoYW5kbGVyID0gJHVtZi5jb21waWxlKFwiL2hvbWUvOmZvb0lkLzpiYXJJZFwiKTtcbiAgICAgKiB2YXIgcnVsZSA9IGZhY3RvcnkuZnJvbVVybE1hdGNoZXIodXJsTWF0Y2hlciwgaGFuZGxlcik7XG4gICAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby8xMjMvNDU2Jyk7IC8vIHJlc3VsdHMgaW4geyBmb29JZDogJzEyMycsIGJhcklkOiAnNDU2JyB9XG4gICAgICogdmFyIHJlc3VsdCA9IHJ1bGUuaGFuZGxlcihtYXRjaCk7IC8vICcvaG9tZS8xMjMvNDU2J1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIFVybFJ1bGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tVXJsTWF0Y2hlciA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBoYW5kbGVyKSB7XG4gICAgICAgIHZhciBfaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgIGlmIChpc1N0cmluZyhoYW5kbGVyKSlcbiAgICAgICAgICAgIGhhbmRsZXIgPSB0aGlzLnJvdXRlci51cmxNYXRjaGVyRmFjdG9yeS5jb21waWxlKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaXMoVXJsTWF0Y2hlcikoaGFuZGxlcikpXG4gICAgICAgICAgICBfaGFuZGxlciA9IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gaGFuZGxlci5mb3JtYXQobWF0Y2gpOyB9O1xuICAgICAgICBmdW5jdGlvbiBtYXRjaFVybFBhcmFtdGVycyh1cmwpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB1cmxNYXRjaGVyLmV4ZWModXJsLnBhdGgsIHVybC5zZWFyY2gsIHVybC5oYXNoKTtcbiAgICAgICAgICAgIHJldHVybiB1cmxNYXRjaGVyLnZhbGlkYXRlcyhwYXJhbXMpICYmIHBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmlvcml0aXplIFVSTHMsIGxvd2VzdCB0byBoaWdoZXN0OlxuICAgICAgICAvLyAtIFNvbWUgb3B0aW9uYWwgVVJMIHBhcmFtZXRlcnMsIGJ1dCBub25lIG1hdGNoZWRcbiAgICAgICAgLy8gLSBObyBvcHRpb25hbCBwYXJhbWV0ZXJzIGluIFVSTFxuICAgICAgICAvLyAtIFNvbWUgb3B0aW9uYWwgcGFyYW1ldGVycywgc29tZSBtYXRjaGVkXG4gICAgICAgIC8vIC0gU29tZSBvcHRpb25hbCBwYXJhbWV0ZXJzLCBhbGwgbWF0Y2hlZFxuICAgICAgICBmdW5jdGlvbiBtYXRjaFByaW9yaXR5KHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIG9wdGlvbmFsID0gdXJsTWF0Y2hlci5wYXJhbWV0ZXJzKCkuZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkgeyByZXR1cm4gcGFyYW0uaXNPcHRpb25hbDsgfSk7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbmFsLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gMC4wMDAwMDE7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlZCA9IG9wdGlvbmFsLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsgcmV0dXJuIHBhcmFtc1twYXJhbS5pZF07IH0pO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWQubGVuZ3RoIC8gb3B0aW9uYWwubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZXRhaWxzID0geyB1cmxNYXRjaGVyOiB1cmxNYXRjaGVyLCBtYXRjaFByaW9yaXR5OiBtYXRjaFByaW9yaXR5LCB0eXBlOiAnVVJMTUFUQ0hFUicgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZChuZXcgQmFzZVVybFJ1bGUobWF0Y2hVcmxQYXJhbXRlcnMsIF9oYW5kbGVyKSwgZGV0YWlscyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBIFVybFJ1bGUgd2hpY2ggbWF0Y2hlcyBhIHN0YXRlIGJ5IGl0cyB1cmxcbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tU3RhdGUoJHN0YXRlLmdldCgnZm9vJyksIHJvdXRlcik7XG4gICAgICogdmFyIG1hdGNoID0gcnVsZS5tYXRjaCgnL2Zvby8xMjMvNDU2Jyk7IC8vIHJlc3VsdHMgaW4geyBmb29JZDogJzEyMycsIGJhcklkOiAnNDU2JyB9XG4gICAgICogdmFyIHJlc3VsdCA9IHJ1bGUuaGFuZGxlcihtYXRjaCk7XG4gICAgICogLy8gU3RhcnRzIGEgdHJhbnNpdGlvbiB0byAnZm9vJyB3aXRoIHBhcmFtczogeyBmb29JZDogJzEyMycsIGJhcklkOiAnNDU2JyB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgVXJsUnVsZUZhY3RvcnkucHJvdG90eXBlLmZyb21TdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgcm91dGVyKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYW5kbGVzIG1hdGNoIGJ5IHRyYW5zaXRpb25pbmcgdG8gbWF0Y2hlZCBzdGF0ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBGaXJzdCBjaGVja3MgaWYgdGhlIHJvdXRlciBzaG91bGQgc3RhcnQgYSBuZXcgdHJhbnNpdGlvbi5cbiAgICAgICAgICogQSBuZXcgdHJhbnNpdGlvbiBpcyBub3QgcmVxdWlyZWQgaWYgdGhlIGN1cnJlbnQgc3RhdGUncyBVUkxcbiAgICAgICAgICogYW5kIHRoZSBuZXcgVVJMIGFyZSBhbHJlYWR5IGlkZW50aWNhbFxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgIHZhciAkc3RhdGUgPSByb3V0ZXIuc3RhdGVTZXJ2aWNlO1xuICAgICAgICAgICAgdmFyIGdsb2JhbHMgPSByb3V0ZXIuZ2xvYmFscztcbiAgICAgICAgICAgIGlmICgkc3RhdGUuaHJlZihzdGF0ZSwgbWF0Y2gpICE9PSAkc3RhdGUuaHJlZihnbG9iYWxzLmN1cnJlbnQsIGdsb2JhbHMucGFyYW1zKSkge1xuICAgICAgICAgICAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oc3RhdGUsIG1hdGNoLCB7IGluaGVyaXQ6IHRydWUsIHNvdXJjZTogJ3VybCcgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciBkZXRhaWxzID0geyBzdGF0ZTogc3RhdGUsIHR5cGU6ICdTVEFURScgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZCh0aGlzLmZyb21VcmxNYXRjaGVyKHN0YXRlLnVybCwgaGFuZGxlciksIGRldGFpbHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQSBVcmxSdWxlIHdoaWNoIG1hdGNoZXMgYmFzZWQgb24gYSByZWd1bGFyIGV4cHJlc3Npb25cbiAgICAgKlxuICAgICAqIFRoZSBgaGFuZGxlcmAgbWF5IGJlIGVpdGhlciBhIFtbVXJsUnVsZUhhbmRsZXJGbl1dIG9yIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogIyMgSGFuZGxlciBhcyBhIGZ1bmN0aW9uXG4gICAgICpcbiAgICAgKiBJZiBgaGFuZGxlcmAgaXMgYSBmdW5jdGlvbiwgdGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgd2l0aDpcbiAgICAgKlxuICAgICAqIC0gcmVnZXhwIG1hdGNoIGFycmF5IChmcm9tIGByZWdleHBgKVxuICAgICAqIC0gdXJsOiB0aGUgY3VycmVudCBVcmwgKFtbVXJsUGFydHNdXSlcbiAgICAgKiAtIHJvdXRlcjogdGhlIHJvdXRlciBvYmplY3QgKFtbVUlSb3V0ZXJdXSlcbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciBydWxlID0gZmFjdG9yeS5mcm9tUmVnRXhwKC9eXFwvZm9vXFwvKGJhcnxiYXopJC8sIG1hdGNoID0+IFwiL2hvbWUvXCIgKyBtYXRjaFsxXSlcbiAgICAgKiB2YXIgbWF0Y2ggPSBydWxlLm1hdGNoKCcvZm9vL2JhcicpOyAvLyByZXN1bHRzIGluIFsgJy9mb28vYmFyJywgJ2JhcicgXVxuICAgICAqIHZhciByZXN1bHQgPSBydWxlLmhhbmRsZXIobWF0Y2gpOyAvLyAnL2hvbWUvYmFyJ1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogIyMgSGFuZGxlciBhcyBzdHJpbmdcbiAgICAgKlxuICAgICAqIElmIGBoYW5kbGVyYCBpcyBhIHN0cmluZywgdGhlIHVybCBpcyAqcmVwbGFjZWQgYnkgdGhlIHN0cmluZyogd2hlbiB0aGUgUnVsZSBpcyBpbnZva2VkLlxuICAgICAqIFRoZSBzdHJpbmcgaXMgZmlyc3QgaW50ZXJwb2xhdGVkIHVzaW5nIGBzdHJpbmcucmVwbGFjZSgpYCBzdHlsZSBwYXR0ZXJuLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIHJ1bGUgPSBmYWN0b3J5LmZyb21SZWdFeHAoL15cXC9mb29cXC8oYmFyfGJheikkLywgXCIvaG9tZS8kMVwiKVxuICAgICAqIHZhciBtYXRjaCA9IHJ1bGUubWF0Y2goJy9mb28vYmFyJyk7IC8vIHJlc3VsdHMgaW4gWyAnL2Zvby9iYXInLCAnYmFyJyBdXG4gICAgICogdmFyIHJlc3VsdCA9IHJ1bGUuaGFuZGxlcihtYXRjaCk7IC8vICcvaG9tZS9iYXInXG4gICAgICogYGBgXG4gICAgICovXG4gICAgVXJsUnVsZUZhY3RvcnkucHJvdG90eXBlLmZyb21SZWdFeHAgPSBmdW5jdGlvbiAocmVnZXhwLCBoYW5kbGVyKSB7XG4gICAgICAgIGlmIChyZWdleHAuZ2xvYmFsIHx8IHJlZ2V4cC5zdGlja3kpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1J1bGUgUmVnRXhwIG11c3Qgbm90IGJlIGdsb2JhbCBvciBzdGlja3knKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGhhbmRsZXIgaXMgYSBzdHJpbmcsIHRoZSB1cmwgd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgc3RyaW5nLlxuICAgICAgICAgKiBJZiB0aGUgc3RyaW5nIGhhcyBhbnkgU3RyaW5nLnJlcGxhY2UoKSBzdHlsZSB2YXJpYWJsZXMgaW4gaXQgKGxpa2UgYCQyYCksXG4gICAgICAgICAqIHRoZXkgd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgY2FwdHVyZXMgZnJvbSBbW21hdGNoXV1cbiAgICAgICAgICovXG4gICAgICAgIHZhciByZWRpcmVjdFVybFRvID0gZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgICAgICAvLyBJbnRlcnBvbGF0ZXMgbWF0Y2hlZCB2YWx1ZXMgaW50byAkMSAkMiwgZXRjIHVzaW5nIGEgU3RyaW5nLnJlcGxhY2UoKS1zdHlsZSBwYXR0ZXJuXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlci5yZXBsYWNlKC9cXCQoXFwkfFxcZHsxLDJ9KS8sIGZ1bmN0aW9uIChtLCB3aGF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoW3doYXQgPT09ICckJyA/IDAgOiBOdW1iZXIod2hhdCldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBfaGFuZGxlciA9IGlzU3RyaW5nKGhhbmRsZXIpID8gcmVkaXJlY3RVcmxUbyA6IGhhbmRsZXI7XG4gICAgICAgIHZhciBtYXRjaFBhcmFtc0Zyb21SZWdleHAgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVnZXhwLmV4ZWModXJsLnBhdGgpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZGV0YWlscyA9IHsgcmVnZXhwOiByZWdleHAsIHR5cGU6ICdSRUdFWFAnIH07XG4gICAgICAgIHJldHVybiBleHRlbmQobmV3IEJhc2VVcmxSdWxlKG1hdGNoUGFyYW1zRnJvbVJlZ2V4cCwgX2hhbmRsZXIpLCBkZXRhaWxzKTtcbiAgICB9O1xuICAgIFVybFJ1bGVGYWN0b3J5LmlzVXJsUnVsZSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiBbJ3R5cGUnLCAnbWF0Y2gnLCAnaGFuZGxlciddLmV2ZXJ5KGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGlzRGVmaW5lZChvYmpba2V5XSk7IH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFVybFJ1bGVGYWN0b3J5O1xufSgpKTtcbi8qKlxuICogQSBiYXNlIHJ1bGUgd2hpY2ggY2FsbHMgYG1hdGNoYFxuICpcbiAqIFRoZSB2YWx1ZSBmcm9tIHRoZSBgbWF0Y2hgIGZ1bmN0aW9uIGlzIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBgaGFuZGxlcmAuXG4gKiBAaW50ZXJuYWxhcGlcbiAqL1xudmFyIEJhc2VVcmxSdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhc2VVcmxSdWxlKG1hdGNoLCBoYW5kbGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubWF0Y2ggPSBtYXRjaDtcbiAgICAgICAgdGhpcy50eXBlID0gJ1JBVyc7XG4gICAgICAgIHRoaXMubWF0Y2hQcmlvcml0eSA9IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gMCAtIF90aGlzLiRpZDsgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlciB8fCBpZGVudGl0eTtcbiAgICB9XG4gICAgcmV0dXJuIEJhc2VVcmxSdWxlO1xufSgpKTtcblxuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGFwcGVuZEJhc2VQYXRoKHVybCwgaXNIdG1sNSwgYWJzb2x1dGUsIGJhc2VIcmVmKSB7XG4gICAgaWYgKGJhc2VIcmVmID09PSAnLycpXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgaWYgKGlzSHRtbDUpXG4gICAgICAgIHJldHVybiBzdHJpcExhc3RQYXRoRWxlbWVudChiYXNlSHJlZikgKyB1cmw7XG4gICAgaWYgKGFic29sdXRlKVxuICAgICAgICByZXR1cm4gYmFzZUhyZWYuc2xpY2UoMSkgKyB1cmw7XG4gICAgcmV0dXJuIHVybDtcbn1cbi8qKiBAaGlkZGVuICovXG52YXIgcHJpb3JpdHlTb3J0ID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gKGIucHJpb3JpdHkgfHwgMCkgLSAoYS5wcmlvcml0eSB8fCAwKTtcbn07XG4vKiogQGhpZGRlbiAqL1xudmFyIHR5cGVTb3J0ID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICB2YXIgd2VpZ2h0cyA9IHsgJ1NUQVRFJzogNCwgJ1VSTE1BVENIRVInOiA0LCAnUkVHRVhQJzogMywgJ1JBVyc6IDIsICdPVEhFUic6IDEgfTtcbiAgICByZXR1cm4gKHdlaWdodHNbYS50eXBlXSB8fCAwKSAtICh3ZWlnaHRzW2IudHlwZV0gfHwgMCk7XG59O1xuLyoqIEBoaWRkZW4gKi9cbnZhciB1cmxNYXRjaGVyU29ydCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuICFhLnVybE1hdGNoZXIgfHwgIWIudXJsTWF0Y2hlciA/IDAgOiBVcmxNYXRjaGVyLmNvbXBhcmUoYS51cmxNYXRjaGVyLCBiLnVybE1hdGNoZXIpO1xufTtcbi8qKiBAaGlkZGVuICovXG52YXIgaWRTb3J0ID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAvLyBJZGVudGljYWxseSBzb3J0ZWQgU1RBVEUgYW5kIFVSTE1BVENIRVIgYmVzdCBydWxlIHdpbGwgYmUgY2hvc2VuIGJ5IGBtYXRjaFByaW9yaXR5YCBhZnRlciBlYWNoIHJ1bGUgbWF0Y2hlcyB0aGUgVVJMXG4gICAgdmFyIHVzZU1hdGNoUHJpb3JpdHkgPSB7IFNUQVRFOiB0cnVlLCBVUkxNQVRDSEVSOiB0cnVlIH07XG4gICAgdmFyIGVxdWFsID0gdXNlTWF0Y2hQcmlvcml0eVthLnR5cGVdICYmIHVzZU1hdGNoUHJpb3JpdHlbYi50eXBlXTtcbiAgICByZXR1cm4gZXF1YWwgPyAwIDogKGEuJGlkIHx8IDApIC0gKGIuJGlkIHx8IDApO1xufTtcbi8qKlxuICogRGVmYXVsdCBydWxlIHByaW9yaXR5IHNvcnRpbmcgZnVuY3Rpb24uXG4gKlxuICogU29ydHMgcnVsZXMgYnk6XG4gKlxuICogLSBFeHBsaWNpdCBwcmlvcml0eSAoc2V0IHJ1bGUgcHJpb3JpdHkgdXNpbmcgW1tVcmxSdWxlc0FwaS53aGVuXV0pXG4gKiAtIFJ1bGUgdHlwZSAoU1RBVEU6IDQsIFVSTE1BVENIRVI6IDQsIFJFR0VYUDogMywgUkFXOiAyLCBPVEhFUjogMSlcbiAqIC0gYFVybE1hdGNoZXJgIHNwZWNpZmljaXR5IChbW1VybE1hdGNoZXIuY29tcGFyZV1dKTogd29ya3MgZm9yIFNUQVRFIGFuZCBVUkxNQVRDSEVSIHR5cGVzIHRvIHBpY2sgdGhlIG1vc3Qgc3BlY2lmaWMgcnVsZS5cbiAqIC0gUnVsZSByZWdpc3RyYXRpb24gb3JkZXIgKGZvciBydWxlIHR5cGVzIG90aGVyIHRoYW4gU1RBVEUgYW5kIFVSTE1BVENIRVIpXG4gKiAgIC0gRXF1YWxseSBzb3J0ZWQgU3RhdGUgYW5kIFVybE1hdGNoZXIgcnVsZXMgd2lsbCBlYWNoIG1hdGNoIHRoZSBVUkwuXG4gKiAgICAgVGhlbiwgdGhlICpiZXN0KiBtYXRjaCBpcyBjaG9zZW4gYmFzZWQgb24gaG93IG1hbnkgcGFyYW1ldGVyIHZhbHVlcyB3ZXJlIG1hdGNoZWQuXG4gKlxuICogQGNvcmVhcGlcbiAqL1xudmFyIGRlZmF1bHRSdWxlU29ydEZuO1xuZGVmYXVsdFJ1bGVTb3J0Rm4gPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHZhciBjbXAgPSBwcmlvcml0eVNvcnQoYSwgYik7XG4gICAgaWYgKGNtcCAhPT0gMClcbiAgICAgICAgcmV0dXJuIGNtcDtcbiAgICBjbXAgPSB0eXBlU29ydChhLCBiKTtcbiAgICBpZiAoY21wICE9PSAwKVxuICAgICAgICByZXR1cm4gY21wO1xuICAgIGNtcCA9IHVybE1hdGNoZXJTb3J0KGEsIGIpO1xuICAgIGlmIChjbXAgIT09IDApXG4gICAgICAgIHJldHVybiBjbXA7XG4gICAgcmV0dXJuIGlkU29ydChhLCBiKTtcbn07XG4vKipcbiAqIFVwZGF0ZXMgVVJMIGFuZCByZXNwb25kcyB0byBVUkwgY2hhbmdlc1xuICpcbiAqICMjIyBEZXByZWNhdGlvbiB3YXJuaW5nOlxuICogVGhpcyBjbGFzcyBpcyBub3cgY29uc2lkZXJlZCB0byBiZSBhbiBpbnRlcm5hbCBBUElcbiAqIFVzZSB0aGUgW1tVcmxTZXJ2aWNlXV0gaW5zdGVhZC5cbiAqIEZvciBjb25maWd1cmluZyBVUkwgcnVsZXMsIHVzZSB0aGUgW1tVcmxSdWxlc0FwaV1dIHdoaWNoIGNhbiBiZSBmb3VuZCBhcyBbW1VybFNlcnZpY2UucnVsZXNdXS5cbiAqXG4gKiBUaGlzIGNsYXNzIHVwZGF0ZXMgdGhlIFVSTCB3aGVuIHRoZSBzdGF0ZSBjaGFuZ2VzLlxuICogSXQgYWxzbyByZXNwb25kcyB0byBjaGFuZ2VzIGluIHRoZSBVUkwuXG4gKi9cbnZhciBVcmxSb3V0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBmdW5jdGlvbiBVcmxSb3V0ZXIocm91dGVyKSB7XG4gICAgICAgIC8qKiBAaGlkZGVuICovIHRoaXMuX3NvcnRGbiA9IGRlZmF1bHRSdWxlU29ydEZuO1xuICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLl9ydWxlcyA9IFtdO1xuICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLmludGVyY2VwdERlZmVycmVkID0gZmFsc2U7XG4gICAgICAgIC8qKiBAaGlkZGVuICovIHRoaXMuX2lkID0gMDtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fc29ydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3JvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy51cmxSdWxlRmFjdG9yeSA9IG5ldyBVcmxSdWxlRmFjdG9yeShyb3V0ZXIpO1xuICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh2YWwoVXJsUm91dGVyLnByb3RvdHlwZSksIHRoaXMsIHZhbCh0aGlzKSk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuKGZhbHNlKTtcbiAgICAgICAgdGhpcy5fcnVsZXMgPSBbXTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX290aGVyd2lzZUZuO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gKGNvbXBhcmVGbikge1xuICAgICAgICB0aGlzLl9ydWxlcyA9IHRoaXMuc3RhYmxlU29ydCh0aGlzLl9ydWxlcywgdGhpcy5fc29ydEZuID0gY29tcGFyZUZuIHx8IHRoaXMuX3NvcnRGbik7XG4gICAgICAgIHRoaXMuX3NvcnRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLmVuc3VyZVNvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fc29ydGVkIHx8IHRoaXMuc29ydCgpO1xuICAgIH07XG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5zdGFibGVTb3J0ID0gZnVuY3Rpb24gKGFyciwgY29tcGFyZUZuKSB7XG4gICAgICAgIHZhciBhcnJPZldyYXBwZXIgPSBhcnIubWFwKGZ1bmN0aW9uIChlbGVtLCBpZHgpIHsgcmV0dXJuICh7IGVsZW06IGVsZW0sIGlkeDogaWR4IH0pOyB9KTtcbiAgICAgICAgYXJyT2ZXcmFwcGVyLnNvcnQoZnVuY3Rpb24gKHdyYXBwZXJBLCB3cmFwcGVyQikge1xuICAgICAgICAgICAgdmFyIGNtcERpZmYgPSBjb21wYXJlRm4od3JhcHBlckEuZWxlbSwgd3JhcHBlckIuZWxlbSk7XG4gICAgICAgICAgICByZXR1cm4gY21wRGlmZiA9PT0gMFxuICAgICAgICAgICAgICAgID8gd3JhcHBlckEuaWR4IC0gd3JhcHBlckIuaWR4XG4gICAgICAgICAgICAgICAgOiBjbXBEaWZmO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFyck9mV3JhcHBlci5tYXAoZnVuY3Rpb24gKHdyYXBwZXIpIHsgcmV0dXJuIHdyYXBwZXIuZWxlbTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIFVSTCwgY2hlY2sgYWxsIHJ1bGVzIGFuZCByZXR1cm4gdGhlIGJlc3QgW1tNYXRjaFJlc3VsdF1dXG4gICAgICogQHBhcmFtIHVybFxuICAgICAqIEByZXR1cm5zIHtNYXRjaFJlc3VsdH1cbiAgICAgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmVuc3VyZVNvcnRlZCgpO1xuICAgICAgICB1cmwgPSBleHRlbmQoeyBwYXRoOiAnJywgc2VhcmNoOiB7fSwgaGFzaDogJycgfSwgdXJsKTtcbiAgICAgICAgdmFyIHJ1bGVzID0gdGhpcy5ydWxlcygpO1xuICAgICAgICBpZiAodGhpcy5fb3RoZXJ3aXNlRm4pXG4gICAgICAgICAgICBydWxlcy5wdXNoKHRoaXMuX290aGVyd2lzZUZuKTtcbiAgICAgICAgLy8gQ2hlY2tzIGEgc2luZ2xlIHJ1bGUuIFJldHVybnMgeyBydWxlOiBydWxlLCBtYXRjaDogbWF0Y2gsIHdlaWdodDogd2VpZ2h0IH0gaWYgaXQgbWF0Y2hlZCwgb3IgdW5kZWZpbmVkXG4gICAgICAgIHZhciBjaGVja1J1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgICAgdmFyIG1hdGNoID0gcnVsZS5tYXRjaCh1cmwsIF90aGlzLl9yb3V0ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoICYmIHsgbWF0Y2g6IG1hdGNoLCBydWxlOiBydWxlLCB3ZWlnaHQ6IHJ1bGUubWF0Y2hQcmlvcml0eShtYXRjaCkgfTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVGhlIHJ1bGVzIGFyZSBwcmUtc29ydGVkLlxuICAgICAgICAvLyAtIEZpbmQgdGhlIGZpcnN0IG1hdGNoaW5nIHJ1bGUuXG4gICAgICAgIC8vIC0gRmluZCBhbnkgb3RoZXIgbWF0Y2hpbmcgcnVsZSB0aGF0IHNvcnRlZCAqZXhhY3RseSB0aGUgc2FtZSosIGFjY29yZGluZyB0byBgLnNvcnQoKWAuXG4gICAgICAgIC8vIC0gQ2hvb3NlIHRoZSBydWxlIHdpdGggdGhlIGhpZ2hlc3QgbWF0Y2ggd2VpZ2h0LlxuICAgICAgICB2YXIgYmVzdDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gU3RvcCB3aGVuIHRoZXJlIGlzIGEgJ2Jlc3QnIHJ1bGUgYW5kIHRoZSBuZXh0IHJ1bGUgc29ydHMgZGlmZmVyZW50bHkgdGhhbiBpdC5cbiAgICAgICAgICAgIGlmIChiZXN0ICYmIHRoaXMuX3NvcnRGbihydWxlc1tpXSwgYmVzdC5ydWxlKSAhPT0gMClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHZhciBjdXJyZW50ID0gY2hlY2tSdWxlKHJ1bGVzW2ldKTtcbiAgICAgICAgICAgIC8vIFBpY2sgdGhlIGJlc3QgTWF0Y2hSZXN1bHRcbiAgICAgICAgICAgIGJlc3QgPSAoIWJlc3QgfHwgY3VycmVudCAmJiBjdXJyZW50LndlaWdodCA+IGJlc3Qud2VpZ2h0KSA/IGN1cnJlbnQgOiBiZXN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiZXN0O1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5zeW5jID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBpZiAoZXZ0ICYmIGV2dC5kZWZhdWx0UHJldmVudGVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgcm91dGVyID0gdGhpcy5fcm91dGVyLCAkdXJsID0gcm91dGVyLnVybFNlcnZpY2UsICRzdGF0ZSA9IHJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gICAgICAgIHZhciB1cmwgPSB7XG4gICAgICAgICAgICBwYXRoOiAkdXJsLnBhdGgoKSwgc2VhcmNoOiAkdXJsLnNlYXJjaCgpLCBoYXNoOiAkdXJsLmhhc2goKSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGJlc3QgPSB0aGlzLm1hdGNoKHVybCk7XG4gICAgICAgIHZhciBhcHBseVJlc3VsdCA9IHBhdHRlcm4oW1xuICAgICAgICAgICAgW2lzU3RyaW5nLCBmdW5jdGlvbiAobmV3dXJsKSB7IHJldHVybiAkdXJsLnVybChuZXd1cmwsIHRydWUpOyB9XSxcbiAgICAgICAgICAgIFtUYXJnZXRTdGF0ZS5pc0RlZiwgZnVuY3Rpb24gKGRlZikgeyByZXR1cm4gJHN0YXRlLmdvKGRlZi5zdGF0ZSwgZGVmLnBhcmFtcywgZGVmLm9wdGlvbnMpOyB9XSxcbiAgICAgICAgICAgIFtpcyhUYXJnZXRTdGF0ZSksIGZ1bmN0aW9uICh0YXJnZXQpIHsgcmV0dXJuICRzdGF0ZS5nbyh0YXJnZXQuc3RhdGUoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTsgfV0sXG4gICAgICAgIF0pO1xuICAgICAgICBhcHBseVJlc3VsdChiZXN0ICYmIGJlc3QucnVsZS5oYW5kbGVyKGJlc3QubWF0Y2gsIHVybCwgcm91dGVyKSk7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLmxpc3RlbiA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChlbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5fc3RvcEZuICYmIHRoaXMuX3N0b3BGbigpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3N0b3BGbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdG9wRm4gPSB0aGlzLl9zdG9wRm4gfHwgdGhpcy5fcm91dGVyLnVybFNlcnZpY2Uub25DaGFuZ2UoZnVuY3Rpb24gKGV2dCkgeyByZXR1cm4gX3RoaXMuc3luYyhldnQpOyB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJLlxuICAgICAqIEBpbnRlcm5hbGFwaVxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJlYWQpIHtcbiAgICAgICAgdmFyICR1cmwgPSB0aGlzLl9yb3V0ZXIubG9jYXRpb25TZXJ2aWNlO1xuICAgICAgICBpZiAocmVhZCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9ICR1cmwudXJsKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCR1cmwudXJsKCkgPT09IHRoaXMubG9jYXRpb24pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICR1cmwudXJsKHRoaXMubG9jYXRpb24sIHRydWUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgQVBJLlxuICAgICAqXG4gICAgICogUHVzaGVzIGEgbmV3IGxvY2F0aW9uIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKiBAcGFyYW0gdXJsTWF0Y2hlclxuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlcGxhY2UgPSBvcHRpb25zICYmICEhb3B0aW9ucy5yZXBsYWNlO1xuICAgICAgICB0aGlzLl9yb3V0ZXIudXJsU2VydmljZS51cmwodXJsTWF0Y2hlci5mb3JtYXQocGFyYW1zIHx8IHt9KSwgcmVwbGFjZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYW5kIHJldHVybnMgYSBVUkwgd2l0aCBpbnRlcnBvbGF0ZWQgcGFyYW1ldGVyc1xuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogbWF0Y2hlciA9ICR1bWYuY29tcGlsZShcIi9hYm91dC86cGVyc29uXCIpO1xuICAgICAqIHBhcmFtcyA9IHsgcGVyc29uOiBcImJvYlwiIH07XG4gICAgICogJGJvYiA9ICR1cmxSb3V0ZXIuaHJlZihtYXRjaGVyLCBwYXJhbXMpO1xuICAgICAqIC8vICRib2IgPT0gXCIvYWJvdXQvYm9iXCI7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXJsTWF0Y2hlciBUaGUgW1tVcmxNYXRjaGVyXV0gb2JqZWN0IHdoaWNoIGlzIHVzZWQgYXMgdGhlIHRlbXBsYXRlIG9mIHRoZSBVUkwgdG8gZ2VuZXJhdGUuXG4gICAgICogQHBhcmFtIHBhcmFtcyBBbiBvYmplY3Qgb2YgcGFyYW1ldGVyIHZhbHVlcyB0byBmaWxsIHRoZSBtYXRjaGVyJ3MgcmVxdWlyZWQgcGFyYW1ldGVycy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIG9iamVjdC4gVGhlIG9wdGlvbnMgYXJlOlxuICAgICAqXG4gICAgICogLSAqKmBhYnNvbHV0ZWAqKiAtIHtib29sZWFuPWZhbHNlfSwgIElmIHRydWUgd2lsbCBnZW5lcmF0ZSBhbiBhYnNvbHV0ZSB1cmwsIGUuZy4gXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL2Z1bGx1cmxcIi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFJldHVybnMgdGhlIGZ1bGx5IGNvbXBpbGVkIFVSTCwgb3IgYG51bGxgIGlmIGBwYXJhbXNgIGZhaWwgdmFsaWRhdGlvbiBhZ2FpbnN0IGB1cmxNYXRjaGVyYFxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUuaHJlZiA9IGZ1bmN0aW9uICh1cmxNYXRjaGVyLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHVybCA9IHVybE1hdGNoZXIuZm9ybWF0KHBhcmFtcyk7XG4gICAgICAgIGlmICh1cmwgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGFic29sdXRlOiBmYWxzZSB9O1xuICAgICAgICB2YXIgY2ZnID0gdGhpcy5fcm91dGVyLnVybFNlcnZpY2UuY29uZmlnO1xuICAgICAgICB2YXIgaXNIdG1sNSA9IGNmZy5odG1sNU1vZGUoKTtcbiAgICAgICAgaWYgKCFpc0h0bWw1ICYmIHVybCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdXJsID0gJyMnICsgY2ZnLmhhc2hQcmVmaXgoKSArIHVybDtcbiAgICAgICAgfVxuICAgICAgICB1cmwgPSBhcHBlbmRCYXNlUGF0aCh1cmwsIGlzSHRtbDUsIG9wdGlvbnMuYWJzb2x1dGUsIGNmZy5iYXNlSHJlZigpKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLmFic29sdXRlIHx8ICF1cmwpIHtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNsYXNoID0gKCFpc0h0bWw1ICYmIHVybCA/ICcvJyA6ICcnKTtcbiAgICAgICAgdmFyIGNmZ1BvcnQgPSBjZmcucG9ydCgpO1xuICAgICAgICB2YXIgcG9ydCA9IChjZmdQb3J0ID09PSA4MCB8fCBjZmdQb3J0ID09PSA0NDMgPyAnJyA6ICc6JyArIGNmZ1BvcnQpO1xuICAgICAgICByZXR1cm4gW2NmZy5wcm90b2NvbCgpLCAnOi8vJywgY2ZnLmhvc3QoKSwgcG9ydCwgc2xhc2gsIHVybF0uam9pbignJyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYW51YWxseSBhZGRzIGEgVVJMIFJ1bGUuXG4gICAgICpcbiAgICAgKiBVc3VhbGx5LCBhIHVybCBydWxlIGlzIGFkZGVkIHVzaW5nIFtbU3RhdGVEZWNsYXJhdGlvbi51cmxdXSBvciBbW3doZW5dXS5cbiAgICAgKiBUaGlzIGFwaSBjYW4gYmUgdXNlZCBkaXJlY3RseSBmb3IgbW9yZSBjb250cm9sICh0byByZWdpc3RlciBhIFtbQmFzZVVybFJ1bGVdXSwgZm9yIGV4YW1wbGUpLlxuICAgICAqIFJ1bGVzIGNhbiBiZSBjcmVhdGVkIHVzaW5nIFtbVXJsUm91dGVyLnVybFJ1bGVGYWN0b3J5XV0sIG9yIGNyZWF0ZSBtYW51YWxseSBhcyBzaW1wbGUgb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIEEgcnVsZSBzaG91bGQgaGF2ZSBhIGBtYXRjaGAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0cnV0aHkgaWYgdGhlIHJ1bGUgbWF0Y2hlZC5cbiAgICAgKiBJdCBzaG91bGQgYWxzbyBoYXZlIGEgYGhhbmRsZXJgIGZ1bmN0aW9uIHdoaWNoIGlzIGludm9rZWQgaWYgdGhlIHJ1bGUgaXMgdGhlIGJlc3QgbWF0Y2guXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBkZXJlZ2lzdGVycyB0aGUgcnVsZVxuICAgICAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUucnVsZSA9IGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghVXJsUnVsZUZhY3RvcnkuaXNVcmxSdWxlKHJ1bGUpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHJ1bGUnKTtcbiAgICAgICAgcnVsZS4kaWQgPSB0aGlzLl9pZCsrO1xuICAgICAgICBydWxlLnByaW9yaXR5ID0gcnVsZS5wcmlvcml0eSB8fCAwO1xuICAgICAgICB0aGlzLl9ydWxlcy5wdXNoKHJ1bGUpO1xuICAgICAgICB0aGlzLl9zb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJlbW92ZVJ1bGUocnVsZSk7IH07XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLnJlbW92ZVJ1bGUgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICByZW1vdmVGcm9tKHRoaXMuX3J1bGVzLCBydWxlKTtcbiAgICB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFJvdXRlci5wcm90b3R5cGUucnVsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZW5zdXJlU29ydGVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9ydWxlcy5zbGljZSgpO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS5vdGhlcndpc2UgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICB2YXIgaGFuZGxlckZuID0gZ2V0SGFuZGxlckZuKGhhbmRsZXIpO1xuICAgICAgICB0aGlzLl9vdGhlcndpc2VGbiA9IHRoaXMudXJsUnVsZUZhY3RvcnkuY3JlYXRlKHZhbCh0cnVlKSwgaGFuZGxlckZuKTtcbiAgICAgICAgdGhpcy5fc29ydGVkID0gZmFsc2U7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLmluaXRpYWwgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICB2YXIgaGFuZGxlckZuID0gZ2V0SGFuZGxlckZuKGhhbmRsZXIpO1xuICAgICAgICB2YXIgbWF0Y2hGbiA9IGZ1bmN0aW9uICh1cmxQYXJ0cywgcm91dGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcm91dGVyLmdsb2JhbHMudHJhbnNpdGlvbkhpc3Rvcnkuc2l6ZSgpID09PSAwICYmICEhL15cXC8/JC8uZXhlYyh1cmxQYXJ0cy5wYXRoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ydWxlKHRoaXMudXJsUnVsZUZhY3RvcnkuY3JlYXRlKG1hdGNoRm4sIGhhbmRsZXJGbikpO1xuICAgIH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsUm91dGVyLnByb3RvdHlwZS53aGVuID0gZnVuY3Rpb24gKG1hdGNoZXIsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJ1bGUgPSB0aGlzLnVybFJ1bGVGYWN0b3J5LmNyZWF0ZShtYXRjaGVyLCBoYW5kbGVyKTtcbiAgICAgICAgaWYgKGlzRGVmaW5lZChvcHRpb25zICYmIG9wdGlvbnMucHJpb3JpdHkpKVxuICAgICAgICAgICAgcnVsZS5wcmlvcml0eSA9IG9wdGlvbnMucHJpb3JpdHk7XG4gICAgICAgIHRoaXMucnVsZShydWxlKTtcbiAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxSb3V0ZXIucHJvdG90eXBlLmRlZmVySW50ZXJjZXB0ID0gZnVuY3Rpb24gKGRlZmVyKSB7XG4gICAgICAgIGlmIChkZWZlciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgZGVmZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLmludGVyY2VwdERlZmVycmVkID0gZGVmZXI7XG4gICAgfTtcbiAgICByZXR1cm4gVXJsUm91dGVyO1xufSgpKTtcbmZ1bmN0aW9uIGdldEhhbmRsZXJGbihoYW5kbGVyKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGhhbmRsZXIpICYmICFpc1N0cmluZyhoYW5kbGVyKSAmJiAhaXMoVGFyZ2V0U3RhdGUpKGhhbmRsZXIpICYmICFUYXJnZXRTdGF0ZS5pc0RlZihoYW5kbGVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInaGFuZGxlcicgbXVzdCBiZSBhIHN0cmluZywgZnVuY3Rpb24sIFRhcmdldFN0YXRlLCBvciBoYXZlIGEgc3RhdGU6ICduZXd0YXJnZXQnIHByb3BlcnR5XCIpO1xuICAgIH1cbiAgICByZXR1cm4gaXNGdW5jdGlvbihoYW5kbGVyKSA/IGhhbmRsZXIgOiB2YWwoaGFuZGxlcik7XG59XG5cbi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdmlld1xuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqXG4gKiBUaGUgVmlldyBzZXJ2aWNlXG4gKlxuICogVGhpcyBzZXJ2aWNlIHBhaXJzIGV4aXN0aW5nIGB1aS12aWV3YCBjb21wb25lbnRzICh3aGljaCBsaXZlIGluIHRoZSBET00pXG4gKiB3aXRoIHZpZXcgY29uZmlncyAoZnJvbSB0aGUgc3RhdGUgZGVjbGFyYXRpb24gb2JqZWN0czogW1tTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0pLlxuICpcbiAqIC0gQWZ0ZXIgYSBzdWNjZXNzZnVsIFRyYW5zaXRpb24sIHRoZSB2aWV3cyBmcm9tIHRoZSBuZXdseSBlbnRlcmVkIHN0YXRlcyBhcmUgYWN0aXZhdGVkIHZpYSBbW2FjdGl2YXRlVmlld0NvbmZpZ11dLlxuICogICBUaGUgdmlld3MgZnJvbSBleGl0ZWQgc3RhdGVzIGFyZSBkZWFjdGl2YXRlZCB2aWEgW1tkZWFjdGl2YXRlVmlld0NvbmZpZ11dLlxuICogICAoU2VlOiB0aGUgW1tyZWdpc3RlckFjdGl2YXRlVmlld3NdXSBUcmFuc2l0aW9uIEhvb2spXG4gKlxuICogLSBBcyBgdWktdmlld2AgY29tcG9uZW50cyBwb3AgaW4gYW5kIG91dCBvZiBleGlzdGVuY2UsIHRoZXkgcmVnaXN0ZXIgdGhlbXNlbHZlcyB1c2luZyBbW3JlZ2lzdGVyVUlWaWV3XV0uXG4gKlxuICogLSBXaGVuIHRoZSBbW3N5bmNdXSBmdW5jdGlvbiBpcyBjYWxsZWQsIHRoZSByZWdpc3RlcmVkIGB1aS12aWV3YChzKSAoW1tBY3RpdmVVSVZpZXddXSlcbiAqIGFyZSBjb25maWd1cmVkIHdpdGggdGhlIG1hdGNoaW5nIFtbVmlld0NvbmZpZ11dKHMpXG4gKlxuICovXG52YXIgVmlld1NlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmlld1NlcnZpY2UoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX3VpVmlld3MgPSBbXTtcbiAgICAgICAgdGhpcy5fdmlld0NvbmZpZ3MgPSBbXTtcbiAgICAgICAgdGhpcy5fdmlld0NvbmZpZ0ZhY3RvcmllcyA9IHt9O1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fcGx1Z2luYXBpID0ge1xuICAgICAgICAgICAgX3Jvb3RWaWV3Q29udGV4dDogdGhpcy5fcm9vdFZpZXdDb250ZXh0LmJpbmQodGhpcyksXG4gICAgICAgICAgICBfdmlld0NvbmZpZ0ZhY3Rvcnk6IHRoaXMuX3ZpZXdDb25maWdGYWN0b3J5LmJpbmQodGhpcyksXG4gICAgICAgICAgICBfcmVnaXN0ZXJlZFVJVmlld3M6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl91aVZpZXdzOyB9LFxuICAgICAgICAgICAgX2FjdGl2ZVZpZXdDb25maWdzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fdmlld0NvbmZpZ3M7IH0sXG4gICAgICAgICAgICBfb25TeW5jOiBmdW5jdGlvbiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiByZW1vdmVGcm9tKF90aGlzLl9saXN0ZW5lcnMsIGxpc3RlbmVyKTsgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZXMgYSB2aWV3J3MgbmFtZSBmcm9tIGEgc3RhdGUudmlld3MgY29uZmlndXJhdGlvbiBibG9jay5cbiAgICAgKlxuICAgICAqIFRoaXMgc2hvdWxkIGJlIHVzZWQgYnkgYSBmcmFtZXdvcmsgaW1wbGVtZW50YXRpb24gdG8gY2FsY3VsYXRlIHRoZSB2YWx1ZXMgZm9yXG4gICAgICogW1tfVmlld0RlY2xhcmF0aW9uLiR1aVZpZXdOYW1lXV0gYW5kIFtbX1ZpZXdEZWNsYXJhdGlvbi4kdWlWaWV3Q29udGV4dEFuY2hvcl1dLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbnRleHQgdGhlIGNvbnRleHQgb2JqZWN0IChzdGF0ZSBkZWNsYXJhdGlvbikgdGhhdCB0aGUgdmlldyBiZWxvbmdzIHRvXG4gICAgICogQHBhcmFtIHJhd1ZpZXdOYW1lIHRoZSBuYW1lIG9mIHRoZSB2aWV3LCBhcyBkZWNsYXJlZCBpbiB0aGUgW1tTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRoZSBub3JtYWxpemVkIHVpVmlld05hbWUgYW5kIHVpVmlld0NvbnRleHRBbmNob3IgdGhhdCB0aGUgdmlldyB0YXJnZXRzXG4gICAgICovXG4gICAgVmlld1NlcnZpY2Uubm9ybWFsaXplVUlWaWV3VGFyZ2V0ID0gZnVuY3Rpb24gKGNvbnRleHQsIHJhd1ZpZXdOYW1lKSB7XG4gICAgICAgIGlmIChyYXdWaWV3TmFtZSA9PT0gdm9pZCAwKSB7IHJhd1ZpZXdOYW1lID0gJyc7IH1cbiAgICAgICAgLy8gVE9ETzogVmFsaWRhdGUgaW5jb21pbmcgdmlldyBuYW1lIHdpdGggYSByZWdleHAgdG8gYWxsb3c6XG4gICAgICAgIC8vIGV4OiBcInZpZXcubmFtZUBmb28uYmFyXCIgLCBcIl4uXi52aWV3Lm5hbWVcIiAsIFwidmlldy5uYW1lQF4uXlwiICwgXCJcIiAsXG4gICAgICAgIC8vIFwiQFwiICwgXCIkZGVmYXVsdEBeXCIgLCBcIiEkZGVmYXVsdC4kZGVmYXVsdFwiICwgXCIhZm9vLmJhclwiXG4gICAgICAgIHZhciB2aWV3QXRDb250ZXh0ID0gcmF3Vmlld05hbWUuc3BsaXQoJ0AnKTtcbiAgICAgICAgdmFyIHVpVmlld05hbWUgPSB2aWV3QXRDb250ZXh0WzBdIHx8ICckZGVmYXVsdCc7IC8vIGRlZmF1bHQgdG8gdW5uYW1lZCB2aWV3XG4gICAgICAgIHZhciB1aVZpZXdDb250ZXh0QW5jaG9yID0gaXNTdHJpbmcodmlld0F0Q29udGV4dFsxXSkgPyB2aWV3QXRDb250ZXh0WzFdIDogJ14nOyAvLyBkZWZhdWx0IHRvIHBhcmVudCBjb250ZXh0XG4gICAgICAgIC8vIEhhbmRsZSByZWxhdGl2ZSB2aWV3LW5hbWUgc3VnYXIgc3ludGF4LlxuICAgICAgICAvLyBNYXRjaGVzIHJhd1ZpZXdOYW1lIFwiXi5eLl4uZm9vLmJhclwiIGludG8gYXJyYXk6IFtcIl4uXi5eLmZvby5iYXJcIiwgXCJeLl4uXlwiLCBcImZvby5iYXJcIl0sXG4gICAgICAgIHZhciByZWxhdGl2ZVZpZXdOYW1lU3VnYXIgPSAvXihcXF4oPzpcXC5cXF4pKilcXC4oLiokKS8uZXhlYyh1aVZpZXdOYW1lKTtcbiAgICAgICAgaWYgKHJlbGF0aXZlVmlld05hbWVTdWdhcikge1xuICAgICAgICAgICAgLy8gQ2xvYmJlcnMgZXhpc3RpbmcgY29udGV4dEFuY2hvciAocmF3Vmlld05hbWUgdmFsaWRhdGlvbiB3aWxsIGZpeCB0aGlzKVxuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IHJlbGF0aXZlVmlld05hbWVTdWdhclsxXTsgLy8gc2V0IGFuY2hvciB0byBcIl4uXi5eXCJcbiAgICAgICAgICAgIHVpVmlld05hbWUgPSByZWxhdGl2ZVZpZXdOYW1lU3VnYXJbMl07IC8vIHNldCB2aWV3LW5hbWUgdG8gXCJmb28uYmFyXCJcbiAgICAgICAgfVxuICAgICAgICBpZiAodWlWaWV3TmFtZS5jaGFyQXQoMCkgPT09ICchJykge1xuICAgICAgICAgICAgdWlWaWV3TmFtZSA9IHVpVmlld05hbWUuc3Vic3RyKDEpO1xuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9ICcnOyAvLyB0YXJnZXQgYWJzb2x1dGVseSBmcm9tIHJvb3RcbiAgICAgICAgfVxuICAgICAgICAvLyBoYW5kbGUgcGFyZW50IHJlbGF0aXZlIHRhcmdldGluZyBcIl4uXi5eXCJcbiAgICAgICAgdmFyIHJlbGF0aXZlTWF0Y2ggPSAvXihcXF4oPzpcXC5cXF4pKikkLztcbiAgICAgICAgaWYgKHJlbGF0aXZlTWF0Y2guZXhlYyh1aVZpZXdDb250ZXh0QW5jaG9yKSkge1xuICAgICAgICAgICAgdmFyIGFuY2hvclN0YXRlID0gdWlWaWV3Q29udGV4dEFuY2hvci5zcGxpdCgnLicpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoZnVuY3Rpb24gKGFuY2hvciwgeCkgeyByZXR1cm4gYW5jaG9yLnBhcmVudDsgfSksIGNvbnRleHQpO1xuICAgICAgICAgICAgdWlWaWV3Q29udGV4dEFuY2hvciA9IGFuY2hvclN0YXRlLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodWlWaWV3Q29udGV4dEFuY2hvciA9PT0gJy4nKSB7XG4gICAgICAgICAgICB1aVZpZXdDb250ZXh0QW5jaG9yID0gY29udGV4dC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHVpVmlld05hbWU6IHVpVmlld05hbWUsIHVpVmlld0NvbnRleHRBbmNob3I6IHVpVmlld0NvbnRleHRBbmNob3IgfTtcbiAgICB9O1xuICAgIFZpZXdTZXJ2aWNlLnByb3RvdHlwZS5fcm9vdFZpZXdDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jvb3RDb250ZXh0ID0gY29udGV4dCB8fCB0aGlzLl9yb290Q29udGV4dDtcbiAgICB9O1xuICAgIFZpZXdTZXJ2aWNlLnByb3RvdHlwZS5fdmlld0NvbmZpZ0ZhY3RvcnkgPSBmdW5jdGlvbiAodmlld1R5cGUsIGZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5fdmlld0NvbmZpZ0ZhY3Rvcmllc1t2aWV3VHlwZV0gPSBmYWN0b3J5O1xuICAgIH07XG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmNyZWF0ZVZpZXdDb25maWcgPSBmdW5jdGlvbiAocGF0aCwgZGVjbCkge1xuICAgICAgICB2YXIgY2ZnRmFjdG9yeSA9IHRoaXMuX3ZpZXdDb25maWdGYWN0b3JpZXNbZGVjbC4kdHlwZV07XG4gICAgICAgIGlmICghY2ZnRmFjdG9yeSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmlld1NlcnZpY2U6IE5vIHZpZXcgY29uZmlnIGZhY3RvcnkgcmVnaXN0ZXJlZCBmb3IgdHlwZSAnICsgZGVjbC4kdHlwZSk7XG4gICAgICAgIHZhciBjZmdzID0gY2ZnRmFjdG9yeShwYXRoLCBkZWNsKTtcbiAgICAgICAgcmV0dXJuIGlzQXJyYXkoY2ZncykgPyBjZmdzIDogW2NmZ3NdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGVhY3RpdmF0ZXMgYSBWaWV3Q29uZmlnLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBkZWFjdGl2YXRlcyBhIGBWaWV3Q29uZmlnYC5cbiAgICAgKiBBZnRlciBjYWxsaW5nIFtbc3luY11dLCBpdCB3aWxsIHVuLXBhaXIgZnJvbSBhbnkgYHVpLXZpZXdgIHdpdGggd2hpY2ggaXQgaXMgY3VycmVudGx5IHBhaXJlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2aWV3Q29uZmlnIFRoZSBWaWV3Q29uZmlnIHZpZXcgdG8gZGVyZWdpc3Rlci5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuZGVhY3RpdmF0ZVZpZXdDb25maWcgPSBmdW5jdGlvbiAodmlld0NvbmZpZykge1xuICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlRXZlbnQoJzwtIFJlbW92aW5nJywgdmlld0NvbmZpZyk7XG4gICAgICAgIHJlbW92ZUZyb20odGhpcy5fdmlld0NvbmZpZ3MsIHZpZXdDb25maWcpO1xuICAgIH07XG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmFjdGl2YXRlVmlld0NvbmZpZyA9IGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VFdmVudCgnLT4gUmVnaXN0ZXJpbmcnLCB2aWV3Q29uZmlnKTtcbiAgICAgICAgdGhpcy5fdmlld0NvbmZpZ3MucHVzaCh2aWV3Q29uZmlnKTtcbiAgICB9O1xuICAgIFZpZXdTZXJ2aWNlLnByb3RvdHlwZS5zeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdWlWaWV3c0J5RnFuID0gdGhpcy5fdWlWaWV3cy5tYXAoZnVuY3Rpb24gKHVpdikgeyByZXR1cm4gW3Vpdi5mcW4sIHVpdl07IH0pLnJlZHVjZShhcHBseVBhaXJzLCB7fSk7XG4gICAgICAgIC8vIFJldHVybiBhIHdlaWdodGVkIGRlcHRoIHZhbHVlIGZvciBhIHVpVmlldy5cbiAgICAgICAgLy8gVGhlIGRlcHRoIGlzIHRoZSBuZXN0aW5nIGRlcHRoIG9mIHVpLXZpZXdzIChiYXNlZCBvbiBGUU47IHRpbWVzIDEwLDAwMClcbiAgICAgICAgLy8gcGx1cyB0aGUgZGVwdGggb2YgdGhlIHN0YXRlIHRoYXQgaXMgcG9wdWxhdGluZyB0aGUgdWlWaWV3XG4gICAgICAgIGZ1bmN0aW9uIHVpVmlld0RlcHRoKHVpVmlldykge1xuICAgICAgICAgICAgdmFyIHN0YXRlRGVwdGggPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0ICYmIGNvbnRleHQucGFyZW50ID8gc3RhdGVEZXB0aChjb250ZXh0LnBhcmVudCkgKyAxIDogMTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gKHVpVmlldy5mcW4uc3BsaXQoJy4nKS5sZW5ndGggKiAxMDAwMCkgKyBzdGF0ZURlcHRoKHVpVmlldy5jcmVhdGlvbkNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldHVybiB0aGUgVmlld0NvbmZpZydzIGNvbnRleHQncyBkZXB0aCBpbiB0aGUgY29udGV4dCB0cmVlLlxuICAgICAgICBmdW5jdGlvbiB2aWV3Q29uZmlnRGVwdGgoY29uZmlnKSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IGNvbmZpZy52aWV3RGVjbC4kY29udGV4dCwgY291bnQgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKCsrY291bnQgJiYgY29udGV4dC5wYXJlbnQpXG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQucGFyZW50O1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIEdpdmVuIGEgZGVwdGggZnVuY3Rpb24sIHJldHVybnMgYSBjb21wYXJlIGZ1bmN0aW9uIHdoaWNoIGNhbiByZXR1cm4gZWl0aGVyIGFzY2VuZGluZyBvciBkZXNjZW5kaW5nIG9yZGVyXG4gICAgICAgIHZhciBkZXB0aENvbXBhcmUgPSBjdXJyeShmdW5jdGlvbiAoZGVwdGhGbiwgcG9zTmVnLCBsZWZ0LCByaWdodCkgeyByZXR1cm4gcG9zTmVnICogKGRlcHRoRm4obGVmdCkgLSBkZXB0aEZuKHJpZ2h0KSk7IH0pO1xuICAgICAgICB2YXIgbWF0Y2hpbmdDb25maWdQYWlyID0gZnVuY3Rpb24gKHVpVmlldykge1xuICAgICAgICAgICAgdmFyIG1hdGNoaW5nQ29uZmlncyA9IF90aGlzLl92aWV3Q29uZmlncy5maWx0ZXIoVmlld1NlcnZpY2UubWF0Y2hlcyh1aVZpZXdzQnlGcW4sIHVpVmlldykpO1xuICAgICAgICAgICAgaWYgKG1hdGNoaW5nQ29uZmlncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBPSy4gIENoaWxkIHN0YXRlcyBjYW4gdGFyZ2V0IGEgdWktdmlldyB0aGF0IHRoZSBwYXJlbnQgc3RhdGUgYWxzbyB0YXJnZXRzICh0aGUgY2hpbGQgd2lucylcbiAgICAgICAgICAgICAgICAvLyBTb3J0IGJ5IGRlcHRoIGFuZCByZXR1cm4gdGhlIG1hdGNoIGZyb20gdGhlIGRlZXBlc3QgY2hpbGRcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgTXVsdGlwbGUgbWF0Y2hpbmcgdmlldyBjb25maWdzIGZvciAke3VpVmlldy5mcW59YCwgbWF0Y2hpbmdDb25maWdzKTtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0NvbmZpZ3Muc29ydChkZXB0aENvbXBhcmUodmlld0NvbmZpZ0RlcHRoLCAtMSkpOyAvLyBkZXNjZW5kaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyB1aVZpZXc6IHVpVmlldywgdmlld0NvbmZpZzogbWF0Y2hpbmdDb25maWdzWzBdIH07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBjb25maWd1cmVVSVZpZXcgPSBmdW5jdGlvbiAodHVwbGUpIHtcbiAgICAgICAgICAgIC8vIElmIGEgcGFyZW50IHVpLXZpZXcgaXMgcmVjb25maWd1cmVkLCBpdCBjb3VsZCBkZXN0cm95IGNoaWxkIHVpLXZpZXdzLlxuICAgICAgICAgICAgLy8gQmVmb3JlIGNvbmZpZ3VyaW5nIGEgY2hpbGQgdWktdmlldywgbWFrZSBzdXJlIGl0J3Mgc3RpbGwgaW4gdGhlIGFjdGl2ZSB1aVZpZXdzIGFycmF5LlxuICAgICAgICAgICAgaWYgKF90aGlzLl91aVZpZXdzLmluZGV4T2YodHVwbGUudWlWaWV3KSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgdHVwbGUudWlWaWV3LmNvbmZpZ1VwZGF0ZWQodHVwbGUudmlld0NvbmZpZyk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFNvcnQgdmlld3MgYnkgRlFOIGFuZCBzdGF0ZSBkZXB0aC4gUHJvY2VzcyB1aXZpZXdzIG5lYXJlc3QgdGhlIHJvb3QgZmlyc3QuXG4gICAgICAgIHZhciB1aVZpZXdUdXBsZXMgPSB0aGlzLl91aVZpZXdzLnNvcnQoZGVwdGhDb21wYXJlKHVpVmlld0RlcHRoLCAxKSkubWFwKG1hdGNoaW5nQ29uZmlnUGFpcik7XG4gICAgICAgIHZhciBtYXRjaGVkVmlld0NvbmZpZ3MgPSB1aVZpZXdUdXBsZXMubWFwKGZ1bmN0aW9uICh0dXBsZSkgeyByZXR1cm4gdHVwbGUudmlld0NvbmZpZzsgfSk7XG4gICAgICAgIHZhciB1bm1hdGNoZWRDb25maWdUdXBsZXMgPSB0aGlzLl92aWV3Q29uZmlnc1xuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoY29uZmlnKSB7IHJldHVybiAhaW5BcnJheShtYXRjaGVkVmlld0NvbmZpZ3MsIGNvbmZpZyk7IH0pXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh2aWV3Q29uZmlnKSB7IHJldHVybiAoeyB1aVZpZXc6IHVuZGVmaW5lZCwgdmlld0NvbmZpZzogdmlld0NvbmZpZyB9KTsgfSk7XG4gICAgICAgIHVpVmlld1R1cGxlcy5mb3JFYWNoKGNvbmZpZ3VyZVVJVmlldyk7XG4gICAgICAgIHZhciBhbGxUdXBsZXMgPSB1aVZpZXdUdXBsZXMuY29uY2F0KHVubWF0Y2hlZENvbmZpZ1R1cGxlcyk7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyByZXR1cm4gY2IoYWxsVHVwbGVzKTsgfSk7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1N5bmMoYWxsVHVwbGVzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGB1aS12aWV3YCBjb21wb25lbnRcbiAgICAgKlxuICAgICAqIFdoZW4gYSBgdWktdmlld2AgY29tcG9uZW50IGlzIGNyZWF0ZWQsIGl0IHVzZXMgdGhpcyBtZXRob2QgdG8gcmVnaXN0ZXIgaXRzZWxmLlxuICAgICAqIEFmdGVyIHJlZ2lzdHJhdGlvbiB0aGUgW1tzeW5jXV0gbWV0aG9kIGlzIHVzZWQgdG8gZW5zdXJlIGFsbCBgdWktdmlld2AgYXJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgcHJvcGVyIFtbVmlld0NvbmZpZ11dLlxuICAgICAqXG4gICAgICogTm90ZTogdGhlIGB1aS12aWV3YCBjb21wb25lbnQgdXNlcyB0aGUgYFZpZXdDb25maWdgIHRvIGRldGVybWluZSB3aGF0IHZpZXcgc2hvdWxkIGJlIGxvYWRlZCBpbnNpZGUgdGhlIGB1aS12aWV3YCxcbiAgICAgKiBhbmQgd2hhdCB0aGUgdmlldydzIHN0YXRlIGNvbnRleHQgaXMuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGVyZSBpcyBubyBjb3JyZXNwb25kaW5nIGBkZXJlZ2lzdGVyVUlWaWV3YC5cbiAgICAgKiAgICAgICBBIGB1aS12aWV3YCBzaG91bGQgaGFuZyBvbiB0byB0aGUgcmV0dXJuIHZhbHVlIG9mIGByZWdpc3RlclVJVmlld2AgYW5kIGludm9rZSBpdCB0byBkZXJlZ2lzdGVyIGl0c2VsZi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1aVZpZXcgVGhlIG1ldGFkYXRhIGZvciBhIFVJVmlld1xuICAgICAqIEByZXR1cm4gYSBkZS1yZWdpc3RyYXRpb24gZnVuY3Rpb24gdXNlZCB3aGVuIHRoZSB2aWV3IGlzIGRlc3Ryb3llZC5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXJVSVZpZXcgPSBmdW5jdGlvbiAodWlWaWV3KSB7XG4gICAgICAgIHRyYWNlLnRyYWNlVmlld1NlcnZpY2VVSVZpZXdFdmVudCgnLT4gUmVnaXN0ZXJpbmcnLCB1aVZpZXcpO1xuICAgICAgICB2YXIgdWlWaWV3cyA9IHRoaXMuX3VpVmlld3M7XG4gICAgICAgIHZhciBmcW5BbmRUeXBlTWF0Y2hlcyA9IGZ1bmN0aW9uICh1aXYpIHsgcmV0dXJuIHVpdi5mcW4gPT09IHVpVmlldy5mcW4gJiYgdWl2LiR0eXBlID09PSB1aVZpZXcuJHR5cGU7IH07XG4gICAgICAgIGlmICh1aVZpZXdzLmZpbHRlcihmcW5BbmRUeXBlTWF0Y2hlcykubGVuZ3RoKVxuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCchISEhIGR1cGxpY2F0ZSB1aVZpZXcgbmFtZWQ6JywgdWlWaWV3KTtcbiAgICAgICAgdWlWaWV3cy5wdXNoKHVpVmlldyk7XG4gICAgICAgIHRoaXMuc3luYygpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IHVpVmlld3MuaW5kZXhPZih1aVZpZXcpO1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0cmFjZS50cmFjZVZpZXdTZXJ2aWNlVUlWaWV3RXZlbnQoJ1RyaWVkIHJlbW92aW5nIG5vbi1yZWdpc3RlcmVkIHVpVmlldycsIHVpVmlldyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZVVJVmlld0V2ZW50KCc8LSBEZXJlZ2lzdGVyaW5nJywgdWlWaWV3KTtcbiAgICAgICAgICAgIHJlbW92ZUZyb20odWlWaWV3cykodWlWaWV3KTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygdmlld3MgY3VycmVudGx5IGF2YWlsYWJsZSBvbiB0aGUgcGFnZSwgYnkgZnVsbHktcXVhbGlmaWVkIG5hbWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gUmV0dXJucyBhbiBhcnJheSBvZiBmdWxseS1xdWFsaWZpZWQgdmlldyBuYW1lcy5cbiAgICAgKi9cbiAgICBWaWV3U2VydmljZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdWlWaWV3cy5tYXAocHJvcCgnZnFuJykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiB2aWV3cyBvbiB0aGUgcGFnZSBjb250YWluaW5nIGxvYWRlZCBjb250ZW50LlxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgZnVsbHktcXVhbGlmaWVkIHZpZXcgbmFtZXMuXG4gICAgICovXG4gICAgVmlld1NlcnZpY2UucHJvdG90eXBlLmFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VpVmlld3MuZmlsdGVyKHByb3AoJyRjb25maWcnKSkubWFwKHByb3AoJ25hbWUnKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIHVpLXZpZXcgYW5kIGEgVmlld0NvbmZpZywgZGV0ZXJtaW5lcyBpZiB0aGV5IFwibWF0Y2hcIi5cbiAgICAgKlxuICAgICAqIEEgdWktdmlldyBoYXMgYSBmdWxseSBxdWFsaWZpZWQgbmFtZSAoZnFuKSBhbmQgYSBjb250ZXh0IG9iamVjdC4gIFRoZSBmcW4gaXMgYnVpbHQgZnJvbSBpdHMgb3ZlcmFsbCBsb2NhdGlvbiBpblxuICAgICAqIHRoZSBET00sIGRlc2NyaWJpbmcgaXRzIG5lc3RpbmcgcmVsYXRpb25zaGlwIHRvIGFueSBwYXJlbnQgdWktdmlldyB0YWdzIGl0IGlzIG5lc3RlZCBpbnNpZGUgb2YuXG4gICAgICpcbiAgICAgKiBBIFZpZXdDb25maWcgaGFzIGEgdGFyZ2V0IHVpLXZpZXcgbmFtZSBhbmQgYSBjb250ZXh0IGFuY2hvci4gIFRoZSB1aS12aWV3IG5hbWUgY2FuIGJlIGEgc2ltcGxlIG5hbWUsIG9yXG4gICAgICogY2FuIGJlIGEgc2VnbWVudGVkIHVpLXZpZXcgcGF0aCwgZGVzY3JpYmluZyBhIHBvcnRpb24gb2YgYSB1aS12aWV3IGZxbi5cbiAgICAgKlxuICAgICAqIEluIG9yZGVyIGZvciBhIHVpLXZpZXcgdG8gbWF0Y2ggVmlld0NvbmZpZywgdWktdmlldydzICR0eXBlIG11c3QgbWF0Y2ggdGhlIFZpZXdDb25maWcncyAkdHlwZVxuICAgICAqXG4gICAgICogSWYgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgdWktdmlldyBuYW1lIGlzIGEgc2ltcGxlIG5hbWUgKG5vIGRvdHMpLCB0aGVuIGEgdWktdmlldyBtYXRjaGVzIGlmOlxuICAgICAqIC0gdGhlIHVpLXZpZXcncyBuYW1lIG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyB0YXJnZXQgbmFtZVxuICAgICAqIC0gdGhlIHVpLXZpZXcncyBjb250ZXh0IG1hdGNoZXMgdGhlIFZpZXdDb25maWcncyBhbmNob3JcbiAgICAgKlxuICAgICAqIElmIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IHVpLXZpZXcgbmFtZSBpcyBhIHNlZ21lbnRlZCBuYW1lICh3aXRoIGRvdHMpLCB0aGVuIGEgdWktdmlldyBtYXRjaGVzIGlmOlxuICAgICAqIC0gVGhlcmUgZXhpc3RzIGEgcGFyZW50IHVpLXZpZXcgd2hlcmU6XG4gICAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIG1hdGNoZXMgdGhlIGZpcnN0IHNlZ21lbnQgKGluZGV4IDApIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICAgKiAgICAtIHRoZSBwYXJlbnQgdWktdmlldydzIGNvbnRleHQgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvclxuICAgICAqIC0gQW5kIHRoZSByZW1haW5pbmcgc2VnbWVudHMgKGluZGV4IDEuLm4pIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWUgbWF0Y2ggdGhlIHRhaWwgb2YgdGhlIHVpLXZpZXcncyBmcW5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiBET006XG4gICAgICogPHVpLXZpZXc+ICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSByb290IGNvbnRleHQgKG5hbWU6IFwiXCIpIC0tPlxuICAgICAqICAgPHVpLXZpZXcgbmFtZT1cImZvb1wiPiAgICAgICAgICAgICAgICA8IS0tIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQgbmFtZWQ6IFwiQVwiICAgICAgLS0+XG4gICAgICogICAgIDx1aS12aWV3PiAgICAgICAgICAgICAgICAgICAgPCEtLSBjcmVhdGVkIGluIHRoZSBjb250ZXh0IG5hbWVkOiBcIkEuQlwiICAgIC0tPlxuICAgICAqICAgICAgIDx1aS12aWV3IG5hbWU9XCJiYXJcIj4gICAgICAgICAgICA8IS0tIGNyZWF0ZWQgaW4gdGhlIGNvbnRleHQgbmFtZWQ6IFwiQS5CLkNcIiAgLS0+XG4gICAgICogICAgICAgPC91aS12aWV3PlxuICAgICAqICAgICA8L3VpLXZpZXc+XG4gICAgICogICA8L3VpLXZpZXc+XG4gICAgICogPC91aS12aWV3PlxuICAgICAqXG4gICAgICogdWlWaWV3czogW1xuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdFwiLCAgICAgICAgICAgICAgICAgIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIlwiIH0gfSxcbiAgICAgKiAgeyBmcW46IFwiJGRlZmF1bHQuZm9vXCIsICAgICAgICAgICAgICBjcmVhdGlvbkNvbnRleHQ6IHsgbmFtZTogXCJBXCIgfSB9LFxuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHRcIiwgICAgIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIkEuQlwiIH0gfVxuICAgICAqICB7IGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIsIGNyZWF0aW9uQ29udGV4dDogeyBuYW1lOiBcIkEuQi5DXCIgfSB9XG4gICAgICogXVxuICAgICAqXG4gICAgICogVGhlc2UgZm91ciB2aWV3IGNvbmZpZ3MgYWxsIG1hdGNoIHRoZSB1aS12aWV3IHdpdGggdGhlIGZxbjogXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCI6XG4gICAgICpcbiAgICAgKiAtIFZpZXdDb25maWcxOiB7IHVpVmlld05hbWU6IFwiYmFyXCIsICAgICAgICAgICAgICAgICAgICAgICB1aVZpZXdDb250ZXh0QW5jaG9yOiBcIkEuQi5DXCIgfVxuICAgICAqIC0gVmlld0NvbmZpZzI6IHsgdWlWaWV3TmFtZTogXCIkZGVmYXVsdC5iYXJcIiwgICAgICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQS5CXCIgfVxuICAgICAqIC0gVmlld0NvbmZpZzM6IHsgdWlWaWV3TmFtZTogXCJmb28uJGRlZmF1bHQuYmFyXCIsICAgICAgICAgIHVpVmlld0NvbnRleHRBbmNob3I6IFwiQVwiIH1cbiAgICAgKiAtIFZpZXdDb25maWc0OiB7IHVpVmlld05hbWU6IFwiJGRlZmF1bHQuZm9vLiRkZWZhdWx0LmJhclwiLCB1aVZpZXdDb250ZXh0QW5jaG9yOiBcIlwiIH1cbiAgICAgKlxuICAgICAqIFVzaW5nIFZpZXdDb25maWczIGFzIGFuIGV4YW1wbGUsIGl0IG1hdGNoZXMgdGhlIHVpLXZpZXcgd2l0aCBmcW4gXCIkZGVmYXVsdC5mb28uJGRlZmF1bHQuYmFyXCIgYmVjYXVzZTpcbiAgICAgKiAtIFRoZSBWaWV3Q29uZmlnJ3Mgc2VnbWVudGVkIHRhcmdldCBuYW1lIGlzOiBbIFwiZm9vXCIsIFwiJGRlZmF1bHRcIiwgXCJiYXJcIiBdXG4gICAgICogLSBUaGVyZSBleGlzdHMgYSBwYXJlbnQgdWktdmlldyAod2hpY2ggaGFzIGZxbjogXCIkZGVmYXVsdC5mb29cIikgd2hlcmU6XG4gICAgICogICAgLSB0aGUgcGFyZW50IHVpLXZpZXcncyBuYW1lIFwiZm9vXCIgbWF0Y2hlcyB0aGUgZmlyc3Qgc2VnbWVudCBcImZvb1wiIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWVcbiAgICAgKiAgICAtIHRoZSBwYXJlbnQgdWktdmlldydzIGNvbnRleHQgXCJBXCIgbWF0Y2hlcyB0aGUgVmlld0NvbmZpZydzIGFuY2hvciBjb250ZXh0IFwiQVwiXG4gICAgICogLSBBbmQgdGhlIHJlbWFpbmluZyBzZWdtZW50cyBbIFwiJGRlZmF1bHRcIiwgXCJiYXJcIiBdLmpvaW4oXCIuXCJfIG9mIHRoZSBWaWV3Q29uZmlnJ3MgdGFyZ2V0IG5hbWUgbWF0Y2hcbiAgICAgKiAgIHRoZSB0YWlsIG9mIHRoZSB1aS12aWV3J3MgZnFuIFwiZGVmYXVsdC5iYXJcIlxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICovXG4gICAgVmlld1NlcnZpY2UubWF0Y2hlcyA9IGZ1bmN0aW9uICh1aVZpZXdzQnlGcW4sIHVpVmlldykgeyByZXR1cm4gZnVuY3Rpb24gKHZpZXdDb25maWcpIHtcbiAgICAgICAgLy8gRG9uJ3Qgc3VwcGx5IGFuIG5nMSB1aS12aWV3IHdpdGggYW4gbmcyIFZpZXdDb25maWcsIGV0Y1xuICAgICAgICBpZiAodWlWaWV3LiR0eXBlICE9PSB2aWV3Q29uZmlnLnZpZXdEZWNsLiR0eXBlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyBTcGxpdCBuYW1lcyBhcGFydCBmcm9tIGJvdGggdmlld0NvbmZpZyBhbmQgdWlWaWV3IGludG8gc2VnbWVudHNcbiAgICAgICAgdmFyIHZjID0gdmlld0NvbmZpZy52aWV3RGVjbDtcbiAgICAgICAgdmFyIHZjU2VnbWVudHMgPSB2Yy4kdWlWaWV3TmFtZS5zcGxpdCgnLicpO1xuICAgICAgICB2YXIgdWl2U2VnbWVudHMgPSB1aVZpZXcuZnFuLnNwbGl0KCcuJyk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YWlscyBvZiB0aGUgc2VnbWVudCBhcnJheXMgbWF0Y2guIGV4LCB0aGVzZSBhcnJheXMnIHRhaWxzIG1hdGNoOlxuICAgICAgICAvLyB2YzogW1wiZm9vXCIsIFwiYmFyXCJdLCB1aXYgZnFuOiBbXCIkZGVmYXVsdFwiLCBcImZvb1wiLCBcImJhclwiXVxuICAgICAgICBpZiAoIWVxdWFscyh2Y1NlZ21lbnRzLCB1aXZTZWdtZW50cy5zbGljZSgwIC0gdmNTZWdtZW50cy5sZW5ndGgpKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gTm93IGNoZWNrIGlmIHRoZSBmcW4gZW5kaW5nIGF0IHRoZSBmaXJzdCBzZWdtZW50IG9mIHRoZSB2aWV3Q29uZmlnIG1hdGNoZXMgdGhlIGNvbnRleHQ6XG4gICAgICAgIC8vIFtcIiRkZWZhdWx0XCIsIFwiZm9vXCJdLmpvaW4oXCIuXCIpID09IFwiJGRlZmF1bHQuZm9vXCIsIGRvZXMgdGhlIHVpLXZpZXcgJGRlZmF1bHQuZm9vIGNvbnRleHQgbWF0Y2g/XG4gICAgICAgIHZhciBuZWdPZmZzZXQgPSAoMSAtIHZjU2VnbWVudHMubGVuZ3RoKSB8fCB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBmcW5Ub0ZpcnN0U2VnbWVudCA9IHVpdlNlZ21lbnRzLnNsaWNlKDAsIG5lZ09mZnNldCkuam9pbignLicpO1xuICAgICAgICB2YXIgdWlWaWV3Q29udGV4dCA9IHVpVmlld3NCeUZxbltmcW5Ub0ZpcnN0U2VnbWVudF0uY3JlYXRpb25Db250ZXh0O1xuICAgICAgICByZXR1cm4gdmMuJHVpVmlld0NvbnRleHRBbmNob3IgPT09ICh1aVZpZXdDb250ZXh0ICYmIHVpVmlld0NvbnRleHQubmFtZSk7XG4gICAgfTsgfTtcbiAgICByZXR1cm4gVmlld1NlcnZpY2U7XG59KCkpO1xuXG4vKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIGNvcmVcbiAqLyAvKiogKi9cbi8qKlxuICogR2xvYmFsIHJvdXRlciBzdGF0ZVxuICpcbiAqIFRoaXMgaXMgd2hlcmUgd2UgaG9sZCB0aGUgZ2xvYmFsIG11dGFibGUgc3RhdGUgc3VjaCBhcyBjdXJyZW50IHN0YXRlLCBjdXJyZW50XG4gKiBwYXJhbXMsIGN1cnJlbnQgdHJhbnNpdGlvbiwgZXRjLlxuICovXG52YXIgVUlSb3V0ZXJHbG9iYWxzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFVJUm91dGVyR2xvYmFscygpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlc1xuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgcGFyYW1ldGVyIHZhbHVlcyBmcm9tIHRoZSBsYXRlc3Qgc3VjY2Vzc2Z1bCB0cmFuc2l0aW9uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhcmFtcyA9IG5ldyBTdGF0ZVBhcmFtcygpO1xuICAgICAgICAvKiogQGludGVybmFsYXBpICovXG4gICAgICAgIHRoaXMubGFzdFN0YXJ0ZWRUcmFuc2l0aW9uSWQgPSAtMTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25IaXN0b3J5ID0gbmV3IFF1ZXVlKFtdLCAxKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucyA9IG5ldyBRdWV1ZShbXSwgMSk7XG4gICAgfVxuICAgIFVJUm91dGVyR2xvYmFscy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uSGlzdG9yeS5jbGVhcigpO1xuICAgICAgICB0aGlzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5jbGVhcigpO1xuICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFVJUm91dGVyR2xvYmFscztcbn0oKSk7XG5cbi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdXJsXG4gKi8gLyoqICovXG4vKiogQGhpZGRlbiAqL1xudmFyIG1ha2VTdHViID0gZnVuY3Rpb24gKGtleXMpIHtcbiAgICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiAoYWNjW2tleV0gPSBub3RJbXBsZW1lbnRlZChrZXkpLCBhY2MpOyB9LCB7IGRpc3Bvc2U6IG5vb3AgfSk7XG59O1xuLyogdHNsaW50OmRpc2FibGU6YWxpZ24gKi9cbi8qKiBAaGlkZGVuICovIHZhciBsb2NhdGlvblNlcnZpY2VzRm5zID0gWyd1cmwnLCAncGF0aCcsICdzZWFyY2gnLCAnaGFzaCcsICdvbkNoYW5nZSddO1xuLyoqIEBoaWRkZW4gKi8gdmFyIGxvY2F0aW9uQ29uZmlnRm5zID0gWydwb3J0JywgJ3Byb3RvY29sJywgJ2hvc3QnLCAnYmFzZUhyZWYnLCAnaHRtbDVNb2RlJywgJ2hhc2hQcmVmaXgnXTtcbi8qKiBAaGlkZGVuICovIHZhciB1bWZGbnMgPSBbJ3R5cGUnLCAnY2FzZUluc2Vuc2l0aXZlJywgJ3N0cmljdE1vZGUnLCAnZGVmYXVsdFNxdWFzaFBvbGljeSddO1xuLyoqIEBoaWRkZW4gKi8gdmFyIHJ1bGVzRm5zID0gWydzb3J0JywgJ3doZW4nLCAnaW5pdGlhbCcsICdvdGhlcndpc2UnLCAncnVsZXMnLCAncnVsZScsICdyZW1vdmVSdWxlJ107XG4vKiogQGhpZGRlbiAqLyB2YXIgc3luY0ZucyA9IFsnZGVmZXJJbnRlcmNlcHQnLCAnbGlzdGVuJywgJ3N5bmMnLCAnbWF0Y2gnXTtcbi8qIHRzbGludDplbmFibGU6YWxpZ24gKi9cbi8qKlxuICogQVBJIGZvciBVUkwgbWFuYWdlbWVudFxuICovXG52YXIgVXJsU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIGZ1bmN0aW9uIFVybFNlcnZpY2Uocm91dGVyLCBsYXRlQmluZCkge1xuICAgICAgICBpZiAobGF0ZUJpbmQgPT09IHZvaWQgMCkgeyBsYXRlQmluZCA9IHRydWU7IH1cbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMucnVsZXMgPSB7fTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB7fTtcbiAgICAgICAgLy8gcHJveHkgZnVuY3Rpb24gY2FsbHMgZnJvbSBVcmxTZXJ2aWNlIHRvIHRoZSBMb2NhdGlvblNlcnZpY2UvTG9jYXRpb25Db25maWdcbiAgICAgICAgdmFyIGxvY2F0aW9uU2VydmljZXMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByb3V0ZXIubG9jYXRpb25TZXJ2aWNlOyB9O1xuICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhsb2NhdGlvblNlcnZpY2VzLCB0aGlzLCBsb2NhdGlvblNlcnZpY2VzLCBsb2NhdGlvblNlcnZpY2VzRm5zLCBsYXRlQmluZCk7XG4gICAgICAgIHZhciBsb2NhdGlvbkNvbmZpZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci5sb2NhdGlvbkNvbmZpZzsgfTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnMobG9jYXRpb25Db25maWcsIHRoaXMuY29uZmlnLCBsb2NhdGlvbkNvbmZpZywgbG9jYXRpb25Db25maWdGbnMsIGxhdGVCaW5kKTtcbiAgICAgICAgdmFyIHVtZiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci51cmxNYXRjaGVyRmFjdG9yeTsgfTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModW1mLCB0aGlzLmNvbmZpZywgdW1mLCB1bWZGbnMpO1xuICAgICAgICB2YXIgdXJsUm91dGVyID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLnVybFJvdXRlcjsgfTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModXJsUm91dGVyLCB0aGlzLnJ1bGVzLCB1cmxSb3V0ZXIsIHJ1bGVzRm5zKTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModXJsUm91dGVyLCB0aGlzLCB1cmxSb3V0ZXIsIHN5bmNGbnMpO1xuICAgIH1cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS51cmwgPSBmdW5jdGlvbiAobmV3dXJsLCByZXBsYWNlLCBzdGF0ZSkgeyByZXR1cm47IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUucGF0aCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFNlcnZpY2UucHJvdG90eXBlLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFNlcnZpY2UucHJvdG90eXBlLmhhc2ggPSBmdW5jdGlvbiAoKSB7IHJldHVybjsgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm47IH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBVUkwgcGFydHNcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGN1cnJlbnQgVVJMIGNvbXBvbmVudHMgYXMgYSBbW1VybFBhcnRzXV0gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgdXJsIHBhcnRzXG4gICAgICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUucGFydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7IHBhdGg6IHRoaXMucGF0aCgpLCBzZWFyY2g6IHRoaXMuc2VhcmNoKCksIGhhc2g6IHRoaXMuaGFzaCgpIH07XG4gICAgfTtcbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFNlcnZpY2UucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbiAoZXZ0KSB7IHJldHVybjsgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBVcmxTZXJ2aWNlLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAoZW5hYmxlZCkgeyByZXR1cm47IH07XG4gICAgLyoqIEBpbmhlcml0ZG9jICovXG4gICAgVXJsU2VydmljZS5wcm90b3R5cGUuZGVmZXJJbnRlcmNlcHQgPSBmdW5jdGlvbiAoZGVmZXIpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFVybFNlcnZpY2UucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gKHVybFBhcnRzKSB7IHJldHVybjsgfTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFVybFNlcnZpY2UubG9jYXRpb25TZXJ2aWNlU3R1YiA9IG1ha2VTdHViKGxvY2F0aW9uU2VydmljZXNGbnMpO1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVXJsU2VydmljZS5sb2NhdGlvbkNvbmZpZ1N0dWIgPSBtYWtlU3R1Yihsb2NhdGlvbkNvbmZpZ0Zucyk7XG4gICAgcmV0dXJuIFVybFNlcnZpY2U7XG59KCkpO1xuXG4vKipcbiAqIEBjb3JlYXBpXG4gKiBAbW9kdWxlIGNvcmVcbiAqLyAvKiogKi9cbi8qKiBAaGlkZGVuICovXG52YXIgX3JvdXRlckluc3RhbmNlID0gMDtcbi8qKlxuICogVGhlIG1hc3RlciBjbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGFuIGluc3RhbmNlIG9mIFVJLVJvdXRlci5cbiAqXG4gKiBVSS1Sb3V0ZXIgKGZvciBlYWNoIHNwZWNpZmljIGZyYW1ld29yaykgd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBkdXJpbmcgYm9vdHN0cmFwLlxuICogVGhpcyBjbGFzcyBpbnN0YW50aWF0ZXMgYW5kIHdpcmVzIHRoZSBVSS1Sb3V0ZXIgc2VydmljZXMgdG9nZXRoZXIuXG4gKlxuICogQWZ0ZXIgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFVJUm91dGVyIGNsYXNzIGlzIGNyZWF0ZWQsIGl0IHNob3VsZCBiZSBjb25maWd1cmVkIGZvciB5b3VyIGFwcC5cbiAqIEZvciBpbnN0YW5jZSwgYXBwIHN0YXRlcyBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBbW1VJUm91dGVyLnN0YXRlUmVnaXN0cnldXS5cbiAqXG4gKiAtLS1cbiAqXG4gKiBOb3JtYWxseSB0aGUgZnJhbWV3b3JrIGNvZGUgd2lsbCBib290c3RyYXAgVUktUm91dGVyLlxuICogSWYgeW91IGFyZSBib290c3RyYXBwaW5nIFVJUm91dGVyIG1hbnVhbGx5LCB0ZWxsIGl0IHRvIG1vbml0b3IgdGhlIFVSTCBieSBjYWxsaW5nXG4gKiBbW1VybFNlcnZpY2UubGlzdGVuXV0gdGhlbiBbW1VybFNlcnZpY2Uuc3luY11dLlxuICovXG52YXIgVUlSb3V0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgVUlSb3V0ZXJgIG9iamVjdFxuICAgICAqXG4gICAgICogQHBhcmFtIGxvY2F0aW9uU2VydmljZSBhIFtbTG9jYXRpb25TZXJ2aWNlc11dIGltcGxlbWVudGF0aW9uXG4gICAgICogQHBhcmFtIGxvY2F0aW9uQ29uZmlnIGEgW1tMb2NhdGlvbkNvbmZpZ11dIGltcGxlbWVudGF0aW9uXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICovXG4gICAgZnVuY3Rpb24gVUlSb3V0ZXIobG9jYXRpb25TZXJ2aWNlLCBsb2NhdGlvbkNvbmZpZykge1xuICAgICAgICBpZiAobG9jYXRpb25TZXJ2aWNlID09PSB2b2lkIDApIHsgbG9jYXRpb25TZXJ2aWNlID0gVXJsU2VydmljZS5sb2NhdGlvblNlcnZpY2VTdHViOyB9XG4gICAgICAgIGlmIChsb2NhdGlvbkNvbmZpZyA9PT0gdm9pZCAwKSB7IGxvY2F0aW9uQ29uZmlnID0gVXJsU2VydmljZS5sb2NhdGlvbkNvbmZpZ1N0dWI7IH1cbiAgICAgICAgdGhpcy5sb2NhdGlvblNlcnZpY2UgPSBsb2NhdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubG9jYXRpb25Db25maWcgPSBsb2NhdGlvbkNvbmZpZztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy4kaWQgPSBfcm91dGVySW5zdGFuY2UrKztcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqIEBoaWRkZW4gKi8gdGhpcy5fZGlzcG9zYWJsZXMgPSBbXTtcbiAgICAgICAgLyoqIFByb3ZpZGVzIHRyYWNlIGluZm9ybWF0aW9uIHRvIHRoZSBjb25zb2xlICovXG4gICAgICAgIHRoaXMudHJhY2UgPSB0cmFjZTtcbiAgICAgICAgLyoqIFByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gdWktdmlldyBzeW5jaHJvbml6YXRpb24gKi9cbiAgICAgICAgdGhpcy52aWV3U2VydmljZSA9IG5ldyBWaWV3U2VydmljZSgpO1xuICAgICAgICAvKiogR2xvYmFsIHJvdXRlciBzdGF0ZSAqL1xuICAgICAgICB0aGlzLmdsb2JhbHMgPSBuZXcgVUlSb3V0ZXJHbG9iYWxzKCk7XG4gICAgICAgIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIFRyYW5zaXRpb25zICovXG4gICAgICAgIHRoaXMudHJhbnNpdGlvblNlcnZpY2UgPSBuZXcgVHJhbnNpdGlvblNlcnZpY2UodGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXByZWNhdGVkIGZvciBwdWJsaWMgdXNlLiBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZC5cbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIFtbdXJsU2VydmljZV1dIGluc3RlYWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudXJsTWF0Y2hlckZhY3RvcnkgPSBuZXcgVXJsTWF0Y2hlckZhY3RvcnkoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlcHJlY2F0ZWQgZm9yIHB1YmxpYyB1c2UuIFVzZSBbW3VybFNlcnZpY2VdXSBpbnN0ZWFkLlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgW1t1cmxTZXJ2aWNlXV0gaW5zdGVhZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51cmxSb3V0ZXIgPSBuZXcgVXJsUm91dGVyKHRoaXMpO1xuICAgICAgICAvKiogUHJvdmlkZXMgYSByZWdpc3RyeSBmb3Igc3RhdGVzLCBhbmQgcmVsYXRlZCByZWdpc3RyYXRpb24gc2VydmljZXMgKi9cbiAgICAgICAgdGhpcy5zdGF0ZVJlZ2lzdHJ5ID0gbmV3IFN0YXRlUmVnaXN0cnkodGhpcyk7XG4gICAgICAgIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIHN0YXRlcyAqL1xuICAgICAgICB0aGlzLnN0YXRlU2VydmljZSA9IG5ldyBTdGF0ZVNlcnZpY2UodGhpcyk7XG4gICAgICAgIC8qKiBQcm92aWRlcyBzZXJ2aWNlcyByZWxhdGVkIHRvIHRoZSBVUkwgKi9cbiAgICAgICAgdGhpcy51cmxTZXJ2aWNlID0gbmV3IFVybFNlcnZpY2UodGhpcyk7XG4gICAgICAgIC8qKiBAaGlkZGVuIHBsdWdpbiBpbnN0YW5jZXMgYXJlIHJlZ2lzdGVyZWQgaGVyZSAqL1xuICAgICAgICB0aGlzLl9wbHVnaW5zID0ge307XG4gICAgICAgIHRoaXMudmlld1NlcnZpY2UuX3BsdWdpbmFwaS5fcm9vdFZpZXdDb250ZXh0KHRoaXMuc3RhdGVSZWdpc3RyeS5yb290KCkpO1xuICAgICAgICB0aGlzLmdsb2JhbHMuJGN1cnJlbnQgPSB0aGlzLnN0YXRlUmVnaXN0cnkucm9vdCgpO1xuICAgICAgICB0aGlzLmdsb2JhbHMuY3VycmVudCA9IHRoaXMuZ2xvYmFscy4kY3VycmVudC5zZWxmO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGUodGhpcy5nbG9iYWxzKTtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMuc3RhdGVTZXJ2aWNlKTtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMuc3RhdGVSZWdpc3RyeSk7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZSh0aGlzLnRyYW5zaXRpb25TZXJ2aWNlKTtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlKHRoaXMudXJsUm91dGVyKTtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlKGxvY2F0aW9uU2VydmljZSk7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZShsb2NhdGlvbkNvbmZpZyk7XG4gICAgfVxuICAgIC8qKiBSZWdpc3RlcnMgYW4gb2JqZWN0IHRvIGJlIG5vdGlmaWVkIHdoZW4gdGhlIHJvdXRlciBpcyBkaXNwb3NlZCAqL1xuICAgIFVJUm91dGVyLnByb3RvdHlwZS5kaXNwb3NhYmxlID0gZnVuY3Rpb24gKGRpc3Bvc2FibGUpIHtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChkaXNwb3NhYmxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIHRoaXMgcm91dGVyIGluc3RhbmNlXG4gICAgICpcbiAgICAgKiBXaGVuIGNhbGxlZCwgY2xlYXJzIHJlc291cmNlcyByZXRhaW5lZCBieSB0aGUgcm91dGVyIGJ5IGNhbGxpbmcgYGRpc3Bvc2UodGhpcylgIG9uIGFsbFxuICAgICAqIHJlZ2lzdGVyZWQgW1tkaXNwb3NhYmxlXV0gb2JqZWN0cy5cbiAgICAgKlxuICAgICAqIE9yLCBpZiBhIGBkaXNwb3NhYmxlYCBvYmplY3QgaXMgcHJvdmlkZWQsIGNhbGxzIGBkaXNwb3NlKHRoaXMpYCBvbiB0aGF0IG9iamVjdCBvbmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRpc3Bvc2FibGUgKG9wdGlvbmFsKSB0aGUgZGlzcG9zYWJsZSB0byBkaXNwb3NlXG4gICAgICovXG4gICAgVUlSb3V0ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoZGlzcG9zYWJsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoZGlzcG9zYWJsZSAmJiBpc0Z1bmN0aW9uKGRpc3Bvc2FibGUuZGlzcG9zZSkpIHtcbiAgICAgICAgICAgIGRpc3Bvc2FibGUuZGlzcG9zZSh0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9kaXNwb3NhYmxlcy5zbGljZSgpLmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdHlwZW9mIGQuZGlzcG9zZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkLmRpc3Bvc2UoX3RoaXMpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUZyb20oX3RoaXMuX2Rpc3Bvc2FibGVzLCBkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7IH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcGx1Z2luIHRvIFVJLVJvdXRlclxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgYWRkcyBhIFVJLVJvdXRlciBQbHVnaW4uXG4gICAgICogQSBwbHVnaW4gY2FuIGVuaGFuY2Ugb3IgY2hhbmdlIFVJLVJvdXRlciBiZWhhdmlvciB1c2luZyBhbnkgcHVibGljIEFQSS5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIGltcG9ydCB7IE15Q29vbFBsdWdpbiB9IGZyb20gXCJ1aS1yb3V0ZXItY29vbC1wbHVnaW5cIjtcbiAgICAgKlxuICAgICAqIHZhciBwbHVnaW4gPSByb3V0ZXIuYWRkUGx1Z2luKE15Q29vbFBsdWdpbik7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMgUGx1Z2luIGF1dGhvcmluZ1xuICAgICAqXG4gICAgICogQSBwbHVnaW4gaXMgc2ltcGx5IGEgY2xhc3MgKG9yIGNvbnN0cnVjdG9yIGZ1bmN0aW9uKSB3aGljaCBhY2NlcHRzIGEgW1tVSVJvdXRlcl1dIGluc3RhbmNlIGFuZCAob3B0aW9uYWxseSkgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBUaGUgcGx1Z2luIGNhbiBpbXBsZW1lbnQgaXRzIGZ1bmN0aW9uYWxpdHkgdXNpbmcgYW55IG9mIHRoZSBwdWJsaWMgQVBJcyBvZiBbW1VJUm91dGVyXV0uXG4gICAgICogRm9yIGV4YW1wbGUsIGl0IG1heSBjb25maWd1cmUgcm91dGVyIG9wdGlvbnMgb3IgYWRkIGEgVHJhbnNpdGlvbiBIb29rLlxuICAgICAqXG4gICAgICogVGhlIHBsdWdpbiBjYW4gdGhlbiBiZSBwdWJsaXNoZWQgYXMgYSBzZXBhcmF0ZSBtb2R1bGUuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBleHBvcnQgY2xhc3MgTXlBdXRoUGx1Z2luIGltcGxlbWVudHMgVUlSb3V0ZXJQbHVnaW4ge1xuICAgICAqICAgY29uc3RydWN0b3Iocm91dGVyOiBVSVJvdXRlciwgb3B0aW9uczogYW55KSB7XG4gICAgICogICAgIHRoaXMubmFtZSA9IFwiTXlBdXRoUGx1Z2luXCI7XG4gICAgICogICAgIGxldCAkdHJhbnNpdGlvbnMgPSByb3V0ZXIudHJhbnNpdGlvblNlcnZpY2U7XG4gICAgICogICAgIGxldCAkc3RhdGUgPSByb3V0ZXIuc3RhdGVTZXJ2aWNlO1xuICAgICAqXG4gICAgICogICAgIGxldCBhdXRoQ3JpdGVyaWEgPSB7XG4gICAgICogICAgICAgdG86IChzdGF0ZSkgPT4gc3RhdGUuZGF0YSAmJiBzdGF0ZS5kYXRhLnJlcXVpcmVzQXV0aFxuICAgICAqICAgICB9O1xuICAgICAqXG4gICAgICogICAgIGZ1bmN0aW9uIGF1dGhIb29rKHRyYW5zaXRpb246IFRyYW5zaXRpb24pIHtcbiAgICAgKiAgICAgICBsZXQgYXV0aFNlcnZpY2UgPSB0cmFuc2l0aW9uLmluamVjdG9yKCkuZ2V0KCdBdXRoU2VydmljZScpO1xuICAgICAqICAgICAgIGlmICghYXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgKiAgICAgICAgIHJldHVybiAkc3RhdGUudGFyZ2V0KCdsb2dpbicpO1xuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogICAgICR0cmFuc2l0aW9ucy5vblN0YXJ0KGF1dGhDcml0ZXJpYSwgYXV0aEhvb2spO1xuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwbHVnaW4gb25lIG9mOlxuICAgICAqICAgICAgICAtIGEgcGx1Z2luIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgW1tVSVJvdXRlclBsdWdpbl1dXG4gICAgICogICAgICAgIC0gYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgYSBbW1VJUm91dGVyUGx1Z2luXV0gd2hpY2ggYWNjZXB0cyBhIFtbVUlSb3V0ZXJdXSBpbnN0YW5jZVxuICAgICAqICAgICAgICAtIGEgZmFjdG9yeSBmdW5jdGlvbiB3aGljaCBhY2NlcHRzIGEgW1tVSVJvdXRlcl1dIGluc3RhbmNlIGFuZCByZXR1cm5zIGEgW1tVSVJvdXRlclBsdWdpbl1dIGluc3RhbmNlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyB0byBwYXNzIHRvIHRoZSBwbHVnaW4gY2xhc3MvZmFjdG9yeVxuICAgICAqIEByZXR1cm5zIHRoZSByZWdpc3RlcmVkIHBsdWdpbiBpbnN0YW5jZVxuICAgICAqL1xuICAgIFVJUm91dGVyLnByb3RvdHlwZS5wbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIHZhciBwbHVnaW5JbnN0YW5jZSA9IG5ldyBwbHVnaW4odGhpcywgb3B0aW9ucyk7XG4gICAgICAgIGlmICghcGx1Z2luSW5zdGFuY2UubmFtZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVxdWlyZWQgcHJvcGVydHkgYG5hbWVgIG1pc3Npbmcgb24gcGx1Z2luOiAnICsgcGx1Z2luSW5zdGFuY2UpO1xuICAgICAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKHBsdWdpbkluc3RhbmNlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsdWdpbnNbcGx1Z2luSW5zdGFuY2UubmFtZV0gPSBwbHVnaW5JbnN0YW5jZTtcbiAgICB9O1xuICAgIFVJUm91dGVyLnByb3RvdHlwZS5nZXRQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luTmFtZSkge1xuICAgICAgICByZXR1cm4gcGx1Z2luTmFtZSA/IHRoaXMuX3BsdWdpbnNbcGx1Z2luTmFtZV0gOiB2YWx1ZXModGhpcy5fcGx1Z2lucyk7XG4gICAgfTtcbiAgICByZXR1cm4gVUlSb3V0ZXI7XG59KCkpO1xuXG4vKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbmZ1bmN0aW9uIGFkZENvcmVSZXNvbHZhYmxlcyh0cmFucykge1xuICAgIHRyYW5zLmFkZFJlc29sdmFibGUoUmVzb2x2YWJsZS5mcm9tRGF0YShVSVJvdXRlciwgdHJhbnMucm91dGVyKSwgJycpO1xuICAgIHRyYW5zLmFkZFJlc29sdmFibGUoUmVzb2x2YWJsZS5mcm9tRGF0YShUcmFuc2l0aW9uLCB0cmFucyksICcnKTtcbiAgICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoJyR0cmFuc2l0aW9uJCcsIHRyYW5zKSwgJycpO1xuICAgIHRyYW5zLmFkZFJlc29sdmFibGUoUmVzb2x2YWJsZS5mcm9tRGF0YSgnJHN0YXRlUGFyYW1zJywgdHJhbnMucGFyYW1zKCkpLCAnJyk7XG4gICAgdHJhbnMuZW50ZXJpbmcoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB0cmFucy5hZGRSZXNvbHZhYmxlKFJlc29sdmFibGUuZnJvbURhdGEoJyRzdGF0ZSQnLCBzdGF0ZSksIHN0YXRlKTtcbiAgICB9KTtcbn1cbnZhciByZWdpc3RlckFkZENvcmVSZXNvbHZhYmxlcyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkNyZWF0ZSh7fSwgYWRkQ29yZVJlc29sdmFibGVzKTtcbn07XG52YXIgVFJBTlNJVElPTl9UT0tFTlMgPSBbJyR0cmFuc2l0aW9uJCcsIFRyYW5zaXRpb25dO1xudmFyIGlzVHJhbnNpdGlvbiA9IGluQXJyYXkoVFJBTlNJVElPTl9UT0tFTlMpO1xuLy8gUmVmZXJlbmNlcyB0byBUcmFuc2l0aW9uIGluIHRoZSB0cmVlQ2hhbmdlcyBwYXRobm9kZXMgbWFrZXMgYWxsXG4vLyBwcmV2aW91cyBUcmFuc2l0aW9ucyByZWFjaGFibGUgaW4gbWVtb3J5LCBjYXVzaW5nIGEgbWVtb3J5IGxlYWtcbi8vIFRoaXMgZnVuY3Rpb24gcmVtb3ZlcyByZXNvbHZlcyBmb3IgJyR0cmFuc2l0aW9uJCcgYW5kIGBUcmFuc2l0aW9uYCBmcm9tIHRoZSB0cmVlQ2hhbmdlcy5cbi8vIERvIG5vdCB1c2UgdGhpcyBvbiBjdXJyZW50IHRyYW5zaXRpb25zLCBvbmx5IG9uIG9sZCBvbmVzLlxudmFyIHRyZWVDaGFuZ2VzQ2xlYW51cCA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgIC8vIElmIHRoZSByZXNvbHZhYmxlIGlzIGEgVHJhbnNpdGlvbiwgcmV0dXJuIGEgbmV3IHJlc29sdmFibGUgd2l0aCBudWxsIGRhdGFcbiAgICB2YXIgcmVwbGFjZVRyYW5zaXRpb25XaXRoTnVsbCA9IGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiBpc1RyYW5zaXRpb24oci50b2tlbikgPyBSZXNvbHZhYmxlLmZyb21EYXRhKHIudG9rZW4sIG51bGwpIDogcjtcbiAgICB9O1xuICAgIHZhciBjbGVhblBhdGggPSBmdW5jdGlvbiAocGF0aCkgeyByZXR1cm4gcGF0aC5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIHJlc29sdmFibGVzID0gbm9kZS5yZXNvbHZhYmxlcy5tYXAocmVwbGFjZVRyYW5zaXRpb25XaXRoTnVsbCk7XG4gICAgICAgIHJldHVybiBleHRlbmQobm9kZS5jbG9uZSgpLCB7IHJlc29sdmFibGVzOiByZXNvbHZhYmxlcyB9KTtcbiAgICB9KTsgfTtcbiAgICB2YXIgdHJlZUNoYW5nZXMgPSB0cmFucy50cmVlQ2hhbmdlcygpO1xuICAgIG1hcE9iaih0cmVlQ2hhbmdlcywgY2xlYW5QYXRoLCB0cmVlQ2hhbmdlcyk7XG59O1xuXG4vKiogQG1vZHVsZSBob29rcyAqLyAvKiogKi9cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB0aGF0IHJlZGlyZWN0cyB0byBhIGRpZmZlcmVudCBzdGF0ZSBvciBwYXJhbXNcbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHsgdG86IChzdGF0ZSkgPT4gISFzdGF0ZS5yZWRpcmVjdFRvIH0sIHJlZGlyZWN0SG9vayk7YFxuICpcbiAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ucmVkaXJlY3RUb11dXG4gKi9cbnZhciByZWRpcmVjdFRvSG9vayA9IGZ1bmN0aW9uICh0cmFucykge1xuICAgIHZhciByZWRpcmVjdCA9IHRyYW5zLnRvKCkucmVkaXJlY3RUbztcbiAgICBpZiAoIXJlZGlyZWN0KVxuICAgICAgICByZXR1cm47XG4gICAgdmFyICRzdGF0ZSA9IHRyYW5zLnJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0KHJlc3VsdCkge1xuICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFRhcmdldFN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgaWYgKGlzU3RyaW5nKHJlc3VsdCkpXG4gICAgICAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldChyZXN1bHQsIHRyYW5zLnBhcmFtcygpLCB0cmFucy5vcHRpb25zKCkpO1xuICAgICAgICBpZiAocmVzdWx0WydzdGF0ZSddIHx8IHJlc3VsdFsncGFyYW1zJ10pXG4gICAgICAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldChyZXN1bHRbJ3N0YXRlJ10gfHwgdHJhbnMudG8oKSwgcmVzdWx0WydwYXJhbXMnXSB8fCB0cmFucy5wYXJhbXMoKSwgdHJhbnMub3B0aW9ucygpKTtcbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24ocmVkaXJlY3QpKSB7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS53aGVuKHJlZGlyZWN0KHRyYW5zKSkudGhlbihoYW5kbGVSZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gaGFuZGxlUmVzdWx0KHJlZGlyZWN0KTtcbn07XG52YXIgcmVnaXN0ZXJSZWRpcmVjdFRvSG9vayA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHsgdG86IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gISFzdGF0ZS5yZWRpcmVjdFRvOyB9IH0sIHJlZGlyZWN0VG9Ib29rKTtcbn07XG5cbi8qKlxuICogQSBmYWN0b3J5IHdoaWNoIGNyZWF0ZXMgYW4gb25FbnRlciwgb25FeGl0IG9yIG9uUmV0YWluIHRyYW5zaXRpb24gaG9vayBmdW5jdGlvblxuICpcbiAqIFRoZSByZXR1cm5lZCBmdW5jdGlvbiBpbnZva2VzIHRoZSAoZm9yIGluc3RhbmNlKSBzdGF0ZS5vbkVudGVyIGhvb2sgd2hlbiB0aGVcbiAqIHN0YXRlIGlzIGJlaW5nIGVudGVyZWQuXG4gKlxuICogQGhpZGRlblxuICovXG5mdW5jdGlvbiBtYWtlRW50ZXJFeGl0UmV0YWluSG9vayhob29rTmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodHJhbnNpdGlvbiwgc3RhdGUpIHtcbiAgICAgICAgdmFyIF9zdGF0ZSA9IHN0YXRlLiQkc3RhdGUoKTtcbiAgICAgICAgdmFyIGhvb2tGbiA9IF9zdGF0ZVtob29rTmFtZV07XG4gICAgICAgIHJldHVybiBob29rRm4odHJhbnNpdGlvbiwgc3RhdGUpO1xuICAgIH07XG59XG4vKipcbiAqIFRoZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciBvbkV4aXRcbiAqXG4gKiBXaGVuIHRoZSBzdGF0ZSBpcyBiZWluZyBleGl0ZWQsIHRoZSBzdGF0ZSdzIC5vbkV4aXQgZnVuY3Rpb24gaXMgaW52b2tlZC5cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkV4aXQoeyBleGl0aW5nOiAoc3RhdGUpID0+ICEhc3RhdGUub25FeGl0IH0sIG9uRXhpdEhvb2spO2BcbiAqXG4gKiBTZWU6IFtbSUhvb2tSZWdpc3RyeS5vbkV4aXRdXVxuICovXG52YXIgb25FeGl0SG9vayA9IG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKCdvbkV4aXQnKTtcbnZhciByZWdpc3Rlck9uRXhpdEhvb2sgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25FeGl0KHsgZXhpdGluZzogZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiAhIXN0YXRlLm9uRXhpdDsgfSB9LCBvbkV4aXRIb29rKTtcbn07XG4vKipcbiAqIFRoZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciBvblJldGFpblxuICpcbiAqIFdoZW4gdGhlIHN0YXRlIHdhcyBhbHJlYWR5IGVudGVyZWQsIGFuZCBpcyBub3QgYmVpbmcgZXhpdGVkIG9yIHJlLWVudGVyZWQsIHRoZSBzdGF0ZSdzIC5vblJldGFpbiBmdW5jdGlvbiBpcyBpbnZva2VkLlxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uUmV0YWluKHsgcmV0YWluZWQ6IChzdGF0ZSkgPT4gISFzdGF0ZS5vblJldGFpbiB9LCBvblJldGFpbkhvb2spO2BcbiAqXG4gKiBTZWU6IFtbSUhvb2tSZWdpc3RyeS5vblJldGFpbl1dXG4gKi9cbnZhciBvblJldGFpbkhvb2sgPSBtYWtlRW50ZXJFeGl0UmV0YWluSG9vaygnb25SZXRhaW4nKTtcbnZhciByZWdpc3Rlck9uUmV0YWluSG9vayA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vblJldGFpbih7IHJldGFpbmVkOiBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuICEhc3RhdGUub25SZXRhaW47IH0gfSwgb25SZXRhaW5Ib29rKTtcbn07XG4vKipcbiAqIFRoZSBbW1RyYW5zaXRpb25TdGF0ZUhvb2tGbl1dIGZvciBvbkVudGVyXG4gKlxuICogV2hlbiB0aGUgc3RhdGUgaXMgYmVpbmcgZW50ZXJlZCwgdGhlIHN0YXRlJ3MgLm9uRW50ZXIgZnVuY3Rpb24gaXMgaW52b2tlZC5cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkVudGVyKHsgZW50ZXJpbmc6IChzdGF0ZSkgPT4gISFzdGF0ZS5vbkVudGVyIH0sIG9uRW50ZXJIb29rKTtgXG4gKlxuICogU2VlOiBbW0lIb29rUmVnaXN0cnkub25FbnRlcl1dXG4gKi9cbnZhciBvbkVudGVySG9vayA9IG1ha2VFbnRlckV4aXRSZXRhaW5Ib29rKCdvbkVudGVyJyk7XG52YXIgcmVnaXN0ZXJPbkVudGVySG9vayA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkVudGVyKHsgZW50ZXJpbmc6IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gISFzdGF0ZS5vbkVudGVyOyB9IH0sIG9uRW50ZXJIb29rKTtcbn07XG5cbi8qKiBAbW9kdWxlIGhvb2tzICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbnZhciBSRVNPTFZFX0hPT0tfUFJJT1JJVFkgPSAxMDAwO1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHJlc29sdmVzIGFsbCBFQUdFUiBSZXNvbHZhYmxlcyBpbiB0aGUgVG8gUGF0aFxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3RhcnQoe30sIGVhZ2VyUmVzb2x2ZVBhdGgsIHsgcHJpb3JpdHk6IDEwMDAgfSk7YFxuICpcbiAqIFdoZW4gYSBUcmFuc2l0aW9uIHN0YXJ0cywgdGhpcyBob29rIHJlc29sdmVzIGFsbCB0aGUgRUFHRVIgUmVzb2x2YWJsZXMsIHdoaWNoIHRoZSB0cmFuc2l0aW9uIHRoZW4gd2FpdHMgZm9yLlxuICpcbiAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dXG4gKi9cbnZhciBlYWdlclJlc29sdmVQYXRoID0gZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcygpLnRvKVxuICAgICAgICAucmVzb2x2ZVBhdGgoJ0VBR0VSJywgdHJhbnMpXG4gICAgICAgIC50aGVuKG5vb3ApO1xufTtcbnZhciByZWdpc3RlckVhZ2VyUmVzb2x2ZVBhdGggPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7fSwgZWFnZXJSZXNvbHZlUGF0aCwgeyBwcmlvcml0eTogUkVTT0xWRV9IT09LX1BSSU9SSVRZIH0pO1xufTtcbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCByZXNvbHZlcyBhbGwgTEFaWSBSZXNvbHZhYmxlcyBmb3IgdGhlIHN0YXRlIChhbmQgYWxsIGl0cyBhbmNlc3RvcnMpIGluIHRoZSBUbyBQYXRoXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25FbnRlcih7IGVudGVyaW5nOiAoKSA9PiB0cnVlIH0sIGxhenlSZXNvbHZlU3RhdGUsIHsgcHJpb3JpdHk6IDEwMDAgfSk7YFxuICpcbiAqIFdoZW4gYSBTdGF0ZSBpcyBiZWluZyBlbnRlcmVkLCB0aGlzIGhvb2sgcmVzb2x2ZXMgYWxsIHRoZSBSZXNvbHZhYmxlcyBmb3IgdGhpcyBzdGF0ZSwgd2hpY2ggdGhlIHRyYW5zaXRpb24gdGhlbiB3YWl0cyBmb3IuXG4gKlxuICogU2VlIFtbU3RhdGVEZWNsYXJhdGlvbi5yZXNvbHZlXV1cbiAqL1xudmFyIGxhenlSZXNvbHZlU3RhdGUgPSBmdW5jdGlvbiAodHJhbnMsIHN0YXRlKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcygpLnRvKVxuICAgICAgICAuc3ViQ29udGV4dChzdGF0ZS4kJHN0YXRlKCkpXG4gICAgICAgIC5yZXNvbHZlUGF0aCgnTEFaWScsIHRyYW5zKVxuICAgICAgICAudGhlbihub29wKTtcbn07XG52YXIgcmVnaXN0ZXJMYXp5UmVzb2x2ZVN0YXRlID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uRW50ZXIoeyBlbnRlcmluZzogdmFsKHRydWUpIH0sIGxhenlSZXNvbHZlU3RhdGUsIHsgcHJpb3JpdHk6IFJFU09MVkVfSE9PS19QUklPUklUWSB9KTtcbn07XG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggcmVzb2x2ZXMgYW55IGR5bmFtaWNhbGx5IGFkZGVkIChMQVpZIG9yIEVBR0VSKSBSZXNvbHZhYmxlcy5cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vbkZpbmlzaCh7fSwgZWFnZXJSZXNvbHZlUGF0aCwgeyBwcmlvcml0eTogMTAwMCB9KTtgXG4gKlxuICogQWZ0ZXIgYWxsIGVudGVyaW5nIHN0YXRlcyBoYXZlIGJlZW4gZW50ZXJlZCwgdGhpcyBob29rIHJlc29sdmVzIGFueSByZW1haW5pbmcgUmVzb2x2YWJsZXMuXG4gKiBUaGVzZSBhcmUgdHlwaWNhbGx5IGR5bmFtaWMgcmVzb2x2ZXMgd2hpY2ggd2VyZSBhZGRlZCBieSBzb21lIFRyYW5zaXRpb24gSG9vayB1c2luZyBbW1RyYW5zaXRpb24uYWRkUmVzb2x2YWJsZV1dLlxuICpcbiAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ucmVzb2x2ZV1dXG4gKi9cbnZhciByZXNvbHZlUmVtYWluaW5nID0gZnVuY3Rpb24gKHRyYW5zKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcygpLnRvKVxuICAgICAgICAucmVzb2x2ZVBhdGgoJ0xBWlknLCB0cmFucylcbiAgICAgICAgLnRoZW4obm9vcCk7XG59O1xudmFyIHJlZ2lzdGVyUmVzb2x2ZVJlbWFpbmluZyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkZpbmlzaCh7fSwgcmVzb2x2ZVJlbWFpbmluZywgeyBwcmlvcml0eTogUkVTT0xWRV9IT09LX1BSSU9SSVRZIH0pO1xufTtcblxuLyoqIEBtb2R1bGUgaG9va3MgKi8gLyoqIGZvciB0eXBlZG9jICovXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gd2hpY2ggd2FpdHMgZm9yIHRoZSB2aWV3cyB0byBsb2FkXG4gKlxuICogUmVnaXN0ZXJlZCB1c2luZyBgdHJhbnNpdGlvblNlcnZpY2Uub25TdGFydCh7fSwgbG9hZEVudGVyaW5nVmlld3MpO2BcbiAqXG4gKiBBbGxvd3MgdGhlIHZpZXdzIHRvIGRvIGFzeW5jIHdvcmsgaW4gW1tWaWV3Q29uZmlnLmxvYWRdXSBiZWZvcmUgdGhlIHRyYW5zaXRpb24gY29udGludWVzLlxuICogSW4gYW5ndWxhciAxLCB0aGlzIGluY2x1ZGVzIGxvYWRpbmcgdGhlIHRlbXBsYXRlcy5cbiAqL1xudmFyIGxvYWRFbnRlcmluZ1ZpZXdzID0gZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcbiAgICB2YXIgJHEgPSBzZXJ2aWNlcy4kcTtcbiAgICB2YXIgZW50ZXJpbmdWaWV3cyA9IHRyYW5zaXRpb24udmlld3MoJ2VudGVyaW5nJyk7XG4gICAgaWYgKCFlbnRlcmluZ1ZpZXdzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuO1xuICAgIHJldHVybiAkcS5hbGwoZW50ZXJpbmdWaWV3cy5tYXAoZnVuY3Rpb24gKHZpZXcpIHsgcmV0dXJuICRxLndoZW4odmlldy5sb2FkKCkpOyB9KSkudGhlbihub29wKTtcbn07XG52YXIgcmVnaXN0ZXJMb2FkRW50ZXJpbmdWaWV3cyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkZpbmlzaCh7fSwgbG9hZEVudGVyaW5nVmlld3MpO1xufTtcbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCBhY3RpdmF0ZXMgdGhlIG5ldyB2aWV3cyB3aGVuIGEgdHJhbnNpdGlvbiBpcyBzdWNjZXNzZnVsLlxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uU3VjY2Vzcyh7fSwgYWN0aXZhdGVWaWV3cyk7YFxuICpcbiAqIEFmdGVyIGEgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZSwgdGhpcyBob29rIGRlYWN0aXZhdGVzIHRoZSBvbGQgdmlld3MgZnJvbSB0aGUgcHJldmlvdXMgc3RhdGUsXG4gKiBhbmQgYWN0aXZhdGVzIHRoZSBuZXcgdmlld3MgZnJvbSB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKlxuICogU2VlIFtbVmlld1NlcnZpY2VdXVxuICovXG52YXIgYWN0aXZhdGVWaWV3cyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uKSB7XG4gICAgdmFyIGVudGVyaW5nVmlld3MgPSB0cmFuc2l0aW9uLnZpZXdzKCdlbnRlcmluZycpO1xuICAgIHZhciBleGl0aW5nVmlld3MgPSB0cmFuc2l0aW9uLnZpZXdzKCdleGl0aW5nJyk7XG4gICAgaWYgKCFlbnRlcmluZ1ZpZXdzLmxlbmd0aCAmJiAhZXhpdGluZ1ZpZXdzLmxlbmd0aClcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciAkdmlldyA9IHRyYW5zaXRpb24ucm91dGVyLnZpZXdTZXJ2aWNlO1xuICAgIGV4aXRpbmdWaWV3cy5mb3JFYWNoKGZ1bmN0aW9uICh2YykgeyByZXR1cm4gJHZpZXcuZGVhY3RpdmF0ZVZpZXdDb25maWcodmMpOyB9KTtcbiAgICBlbnRlcmluZ1ZpZXdzLmZvckVhY2goZnVuY3Rpb24gKHZjKSB7IHJldHVybiAkdmlldy5hY3RpdmF0ZVZpZXdDb25maWcodmMpOyB9KTtcbiAgICAkdmlldy5zeW5jKCk7XG59O1xudmFyIHJlZ2lzdGVyQWN0aXZhdGVWaWV3cyA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIGFjdGl2YXRlVmlld3MpO1xufTtcblxuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHdoaWNoIHVwZGF0ZXMgZ2xvYmFsIFVJLVJvdXRlciBzdGF0ZVxuICpcbiAqIFJlZ2lzdGVyZWQgdXNpbmcgYHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCB1cGRhdGVHbG9iYWxTdGF0ZSk7YFxuICpcbiAqIEJlZm9yZSBhIFtbVHJhbnNpdGlvbl1dIHN0YXJ0cywgdXBkYXRlcyB0aGUgZ2xvYmFsIHZhbHVlIG9mIFwidGhlIGN1cnJlbnQgdHJhbnNpdGlvblwiIChbW0dsb2JhbHMudHJhbnNpdGlvbl1dKS5cbiAqIEFmdGVyIGEgc3VjY2Vzc2Z1bCBbW1RyYW5zaXRpb25dXSwgdXBkYXRlcyB0aGUgZ2xvYmFsIHZhbHVlcyBvZiBcInRoZSBjdXJyZW50IHN0YXRlXCJcbiAqIChbW0dsb2JhbHMuY3VycmVudF1dIGFuZCBbW0dsb2JhbHMuJGN1cnJlbnRdXSkgYW5kIFwidGhlIGN1cnJlbnQgcGFyYW0gdmFsdWVzXCIgKFtbR2xvYmFscy5wYXJhbXNdXSkuXG4gKlxuICogU2VlIGFsc28gdGhlIGRlcHJlY2F0ZWQgcHJvcGVydGllczpcbiAqIFtbU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25dXSwgW1tTdGF0ZVNlcnZpY2UuY3VycmVudF1dLCBbW1N0YXRlU2VydmljZS5wYXJhbXNdXVxuICovXG52YXIgdXBkYXRlR2xvYmFsU3RhdGUgPSBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICB2YXIgZ2xvYmFscyA9IHRyYW5zLnJvdXRlci5nbG9iYWxzO1xuICAgIHZhciB0cmFuc2l0aW9uU3VjY2Vzc2Z1bCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZ2xvYmFscy5zdWNjZXNzZnVsVHJhbnNpdGlvbnMuZW5xdWV1ZSh0cmFucyk7XG4gICAgICAgIGdsb2JhbHMuJGN1cnJlbnQgPSB0cmFucy4kdG8oKTtcbiAgICAgICAgZ2xvYmFscy5jdXJyZW50ID0gZ2xvYmFscy4kY3VycmVudC5zZWxmO1xuICAgICAgICBjb3B5KHRyYW5zLnBhcmFtcygpLCBnbG9iYWxzLnBhcmFtcyk7XG4gICAgfTtcbiAgICB2YXIgY2xlYXJDdXJyZW50VHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gRG8gbm90IGNsZWFyIGdsb2JhbHMudHJhbnNpdGlvbiBpZiBhIGRpZmZlcmVudCB0cmFuc2l0aW9uIGhhcyBzdGFydGVkIGluIHRoZSBtZWFudGltZVxuICAgICAgICBpZiAoZ2xvYmFscy50cmFuc2l0aW9uID09PSB0cmFucylcbiAgICAgICAgICAgIGdsb2JhbHMudHJhbnNpdGlvbiA9IG51bGw7XG4gICAgfTtcbiAgICB0cmFucy5vblN1Y2Nlc3Moe30sIHRyYW5zaXRpb25TdWNjZXNzZnVsLCB7IHByaW9yaXR5OiAxMDAwMCB9KTtcbiAgICB0cmFucy5wcm9taXNlLnRoZW4oY2xlYXJDdXJyZW50VHJhbnNpdGlvbiwgY2xlYXJDdXJyZW50VHJhbnNpdGlvbik7XG59O1xudmFyIHJlZ2lzdGVyVXBkYXRlR2xvYmFsU3RhdGUgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25DcmVhdGUoe30sIHVwZGF0ZUdsb2JhbFN0YXRlKTtcbn07XG5cbi8qKlxuICogQSBbW1RyYW5zaXRpb25Ib29rRm5dXSB3aGljaCB1cGRhdGVzIHRoZSBVUkwgYWZ0ZXIgYSBzdWNjZXNzZnVsIHRyYW5zaXRpb25cbiAqXG4gKiBSZWdpc3RlcmVkIHVzaW5nIGB0cmFuc2l0aW9uU2VydmljZS5vblN1Y2Nlc3Moe30sIHVwZGF0ZVVybCk7YFxuICovXG52YXIgdXBkYXRlVXJsID0gZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRyYW5zaXRpb24ub3B0aW9ucygpO1xuICAgIHZhciAkc3RhdGUgPSB0cmFuc2l0aW9uLnJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gICAgdmFyICR1cmxSb3V0ZXIgPSB0cmFuc2l0aW9uLnJvdXRlci51cmxSb3V0ZXI7XG4gICAgLy8gRG9udCB1cGRhdGUgdGhlIHVybCBpbiB0aGVzZSBzaXR1YXRpb25zOlxuICAgIC8vIFRoZSB0cmFuc2l0aW9uIHdhcyB0cmlnZ2VyZWQgYnkgYSBVUkwgc3luYyAob3B0aW9ucy5zb3VyY2UgPT09ICd1cmwnKVxuICAgIC8vIFRoZSB1c2VyIGRvZXNuJ3Qgd2FudCB0aGUgdXJsIHRvIHVwZGF0ZSAob3B0aW9ucy5sb2NhdGlvbiA9PT0gZmFsc2UpXG4gICAgLy8gVGhlIGRlc3RpbmF0aW9uIHN0YXRlLCBhbmQgYWxsIHBhcmVudHMgaGF2ZSBubyBuYXZpZ2FibGUgdXJsXG4gICAgaWYgKG9wdGlvbnMuc291cmNlICE9PSAndXJsJyAmJiBvcHRpb25zLmxvY2F0aW9uICYmICRzdGF0ZS4kY3VycmVudC5uYXZpZ2FibGUpIHtcbiAgICAgICAgdmFyIHVybE9wdGlvbnMgPSB7IHJlcGxhY2U6IG9wdGlvbnMubG9jYXRpb24gPT09ICdyZXBsYWNlJyB9O1xuICAgICAgICAkdXJsUm91dGVyLnB1c2goJHN0YXRlLiRjdXJyZW50Lm5hdmlnYWJsZS51cmwsICRzdGF0ZS5wYXJhbXMsIHVybE9wdGlvbnMpO1xuICAgIH1cbiAgICAkdXJsUm91dGVyLnVwZGF0ZSh0cnVlKTtcbn07XG52YXIgcmVnaXN0ZXJVcGRhdGVVcmwgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGVVcmwsIHsgcHJpb3JpdHk6IDk5OTkgfSk7XG59O1xuXG4vKipcbiAqIEEgW1tUcmFuc2l0aW9uSG9va0ZuXV0gdGhhdCBwZXJmb3JtcyBsYXp5IGxvYWRpbmdcbiAqXG4gKiBXaGVuIGVudGVyaW5nIGEgc3RhdGUgXCJhYmNcIiB3aGljaCBoYXMgYSBgbGF6eUxvYWRgIGZ1bmN0aW9uIGRlZmluZWQ6XG4gKiAtIEludm9rZSB0aGUgYGxhenlMb2FkYCBmdW5jdGlvbiAodW5sZXNzIGl0IGlzIGFscmVhZHkgaW4gcHJvY2VzcylcbiAqICAgLSBGbGFnIHRoZSBob29rIGZ1bmN0aW9uIGFzIFwiaW4gcHJvY2Vzc1wiXG4gKiAgIC0gVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBwcm9taXNlICh0aGF0IHJlc29sdmVzIHdoZW4gbGF6eSBsb2FkaW5nIGlzIGNvbXBsZXRlKVxuICogLSBXYWl0IGZvciB0aGUgcHJvbWlzZSB0byBzZXR0bGVcbiAqICAgLSBJZiB0aGUgcHJvbWlzZSByZXNvbHZlcyB0byBhIFtbTGF6eUxvYWRSZXN1bHRdXSwgdGhlbiByZWdpc3RlciB0aG9zZSBzdGF0ZXNcbiAqICAgLSBGbGFnIHRoZSBob29rIGZ1bmN0aW9uIGFzIFwibm90IGluIHByb2Nlc3NcIlxuICogLSBJZiB0aGUgaG9vayB3YXMgc3VjY2Vzc2Z1bFxuICogICAtIFJlbW92ZSB0aGUgYGxhenlMb2FkYCBmdW5jdGlvbiBmcm9tIHRoZSBzdGF0ZSBkZWNsYXJhdGlvblxuICogLSBJZiBhbGwgdGhlIGhvb2tzIHdlcmUgc3VjY2Vzc2Z1bFxuICogICAtIFJldHJ5IHRoZSB0cmFuc2l0aW9uIChieSByZXR1cm5pbmcgYSBUYXJnZXRTdGF0ZSlcbiAqXG4gKiBgYGBcbiAqIC5zdGF0ZSgnYWJjJywge1xuICogICBjb21wb25lbnQ6ICdmb29Db21wb25lbnQnLFxuICogICBsYXp5TG9hZDogKCkgPT4gU3lzdGVtLmltcG9ydCgnLi9mb29Db21wb25lbnQnKVxuICogICB9KTtcbiAqIGBgYFxuICpcbiAqIFNlZSBbW1N0YXRlRGVjbGFyYXRpb24ubGF6eUxvYWRdXVxuICovXG52YXIgbGF6eUxvYWRIb29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcbiAgICB2YXIgcm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXI7XG4gICAgZnVuY3Rpb24gcmV0cnlUcmFuc2l0aW9uKCkge1xuICAgICAgICBpZiAodHJhbnNpdGlvbi5vcmlnaW5hbFRyYW5zaXRpb24oKS5vcHRpb25zKCkuc291cmNlICE9PSAndXJsJykge1xuICAgICAgICAgICAgLy8gVGhlIG9yaWdpbmFsIHRyYW5zaXRpb24gd2FzIG5vdCB0cmlnZ2VyZWQgdmlhIHVybCBzeW5jXG4gICAgICAgICAgICAvLyBUaGUgbGF6eSBzdGF0ZSBzaG91bGQgYmUgbG9hZGVkIG5vdywgc28gcmUtdHJ5IHRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uXG4gICAgICAgICAgICB2YXIgb3JpZyA9IHRyYW5zaXRpb24udGFyZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXIuc3RhdGVTZXJ2aWNlLnRhcmdldChvcmlnLmlkZW50aWZpZXIoKSwgb3JpZy5wYXJhbXMoKSwgb3JpZy5vcHRpb25zKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBvcmlnaW5hbCB0cmFuc2l0aW9uIHdhcyB0cmlnZ2VyZWQgdmlhIHVybCBzeW5jXG4gICAgICAgIC8vIFJ1biB0aGUgVVJMIHJ1bGVzIGFuZCBmaW5kIHRoZSBiZXN0IG1hdGNoXG4gICAgICAgIHZhciAkdXJsID0gcm91dGVyLnVybFNlcnZpY2U7XG4gICAgICAgIHZhciByZXN1bHQgPSAkdXJsLm1hdGNoKCR1cmwucGFydHMoKSk7XG4gICAgICAgIHZhciBydWxlID0gcmVzdWx0ICYmIHJlc3VsdC5ydWxlO1xuICAgICAgICAvLyBJZiB0aGUgYmVzdCBtYXRjaCBpcyBhIHN0YXRlLCByZWRpcmVjdCB0aGUgdHJhbnNpdGlvbiAoaW5zdGVhZFxuICAgICAgICAvLyBvZiBjYWxsaW5nIHN5bmMoKSB3aGljaCBzdXBlcnNlZGVzIHRoZSBjdXJyZW50IHRyYW5zaXRpb24pXG4gICAgICAgIGlmIChydWxlICYmIHJ1bGUudHlwZSA9PT0gJ1NUQVRFJykge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gcnVsZS5zdGF0ZTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSByZXN1bHQubWF0Y2g7XG4gICAgICAgICAgICByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZS50YXJnZXQoc3RhdGUsIHBhcmFtcywgdHJhbnNpdGlvbi5vcHRpb25zKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vIG1hdGNoaW5nIHN0YXRlIGZvdW5kLCBzbyBsZXQgLnN5bmMoKSBjaG9vc2UgdGhlIGJlc3Qgbm9uLXN0YXRlIG1hdGNoL290aGVyd2lzZVxuICAgICAgICByb3V0ZXIudXJsU2VydmljZS5zeW5jKCk7XG4gICAgfVxuICAgIHZhciBwcm9taXNlcyA9IHRyYW5zaXRpb24uZW50ZXJpbmcoKVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gISFzdGF0ZS4kJHN0YXRlKCkubGF6eUxvYWQ7IH0pXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBsYXp5TG9hZFN0YXRlKHRyYW5zaXRpb24sIHN0YXRlKTsgfSk7XG4gICAgcmV0dXJuIHNlcnZpY2VzLiRxLmFsbChwcm9taXNlcykudGhlbihyZXRyeVRyYW5zaXRpb24pO1xufTtcbnZhciByZWdpc3RlckxhenlMb2FkSG9vayA9IGZ1bmN0aW9uICh0cmFuc2l0aW9uU2VydmljZSkge1xuICAgIHJldHVybiB0cmFuc2l0aW9uU2VydmljZS5vbkJlZm9yZSh7IGVudGVyaW5nOiBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuICEhc3RhdGUubGF6eUxvYWQ7IH0gfSwgbGF6eUxvYWRIb29rKTtcbn07XG4vKipcbiAqIEludm9rZXMgYSBzdGF0ZSdzIGxhenkgbG9hZCBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB0cmFuc2l0aW9uIGEgVHJhbnNpdGlvbiBjb250ZXh0XG4gKiBAcGFyYW0gc3RhdGUgdGhlIHN0YXRlIHRvIGxhenkgbG9hZFxuICogQHJldHVybnMgQSBwcm9taXNlIGZvciB0aGUgbGF6eSBsb2FkIHJlc3VsdFxuICovXG5mdW5jdGlvbiBsYXp5TG9hZFN0YXRlKHRyYW5zaXRpb24sIHN0YXRlKSB7XG4gICAgdmFyIGxhenlMb2FkRm4gPSBzdGF0ZS4kJHN0YXRlKCkubGF6eUxvYWQ7XG4gICAgLy8gU3RvcmUvZ2V0IHRoZSBsYXp5IGxvYWQgcHJvbWlzZSBvbi9mcm9tIHRoZSBob29rZm4gc28gaXQgZG9lc24ndCBnZXQgcmUtaW52b2tlZFxuICAgIHZhciBwcm9taXNlID0gbGF6eUxvYWRGblsnX3Byb21pc2UnXTtcbiAgICBpZiAoIXByb21pc2UpIHtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBkZWxldGUgc3RhdGUubGF6eUxvYWQ7XG4gICAgICAgICAgICBkZWxldGUgc3RhdGUuJCRzdGF0ZSgpLmxhenlMb2FkO1xuICAgICAgICAgICAgZGVsZXRlIGxhenlMb2FkRm5bJ19wcm9taXNlJ107XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBkZWxldGUgbGF6eUxvYWRGblsnX3Byb21pc2UnXTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kcS5yZWplY3QoZXJyKTtcbiAgICAgICAgfTtcbiAgICAgICAgcHJvbWlzZSA9IGxhenlMb2FkRm5bJ19wcm9taXNlJ10gPVxuICAgICAgICAgICAgc2VydmljZXMuJHEud2hlbihsYXp5TG9hZEZuKHRyYW5zaXRpb24sIHN0YXRlKSlcbiAgICAgICAgICAgICAgICAudGhlbih1cGRhdGVTdGF0ZVJlZ2lzdHJ5KVxuICAgICAgICAgICAgICAgIC50aGVuKHN1Y2Nlc3MsIGVycm9yKTtcbiAgICB9XG4gICAgLyoqIFJlZ2lzdGVyIGFueSBsYXp5IGxvYWRlZCBzdGF0ZSBkZWZpbml0aW9ucyAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXRlUmVnaXN0cnkocmVzdWx0KSB7XG4gICAgICAgIGlmIChyZXN1bHQgJiYgQXJyYXkuaXNBcnJheShyZXN1bHQuc3RhdGVzKSkge1xuICAgICAgICAgICAgcmVzdWx0LnN0YXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChfc3RhdGUpIHsgcmV0dXJuIHRyYW5zaXRpb24ucm91dGVyLnN0YXRlUmVnaXN0cnkucmVnaXN0ZXIoX3N0YXRlKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBkZWZpbmVzIGEgdHlwZSBvZiBob29rLCBzdWNoIGFzIGBvbkJlZm9yZWAgb3IgYG9uRW50ZXJgLlxuICogUGx1Z2lucyBjYW4gZGVmaW5lIGN1c3RvbSBob29rIHR5cGVzLCBzdWNoIGFzIHN0aWNreSBzdGF0ZXMgZG9lcyBmb3IgYG9uSW5hY3RpdmVgLlxuICpcbiAqIEBpbnRlcmFsYXBpXG4gKi9cbnZhciBUcmFuc2l0aW9uRXZlbnRUeXBlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLWluZmVycmFibGUtdHlwZXMgKi9cbiAgICBmdW5jdGlvbiBUcmFuc2l0aW9uRXZlbnRUeXBlKG5hbWUsIGhvb2tQaGFzZSwgaG9va09yZGVyLCBjcml0ZXJpYU1hdGNoUGF0aCwgcmV2ZXJzZVNvcnQsIGdldFJlc3VsdEhhbmRsZXIsIGdldEVycm9ySGFuZGxlciwgc3luY2hyb25vdXMpIHtcbiAgICAgICAgaWYgKHJldmVyc2VTb3J0ID09PSB2b2lkIDApIHsgcmV2ZXJzZVNvcnQgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoZ2V0UmVzdWx0SGFuZGxlciA9PT0gdm9pZCAwKSB7IGdldFJlc3VsdEhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxUOyB9XG4gICAgICAgIGlmIChnZXRFcnJvckhhbmRsZXIgPT09IHZvaWQgMCkgeyBnZXRFcnJvckhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5SRUpFQ1RfRVJST1I7IH1cbiAgICAgICAgaWYgKHN5bmNocm9ub3VzID09PSB2b2lkIDApIHsgc3luY2hyb25vdXMgPSBmYWxzZTsgfVxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmhvb2tQaGFzZSA9IGhvb2tQaGFzZTtcbiAgICAgICAgdGhpcy5ob29rT3JkZXIgPSBob29rT3JkZXI7XG4gICAgICAgIHRoaXMuY3JpdGVyaWFNYXRjaFBhdGggPSBjcml0ZXJpYU1hdGNoUGF0aDtcbiAgICAgICAgdGhpcy5yZXZlcnNlU29ydCA9IHJldmVyc2VTb3J0O1xuICAgICAgICB0aGlzLmdldFJlc3VsdEhhbmRsZXIgPSBnZXRSZXN1bHRIYW5kbGVyO1xuICAgICAgICB0aGlzLmdldEVycm9ySGFuZGxlciA9IGdldEVycm9ySGFuZGxlcjtcbiAgICAgICAgdGhpcy5zeW5jaHJvbm91cyA9IHN5bmNocm9ub3VzO1xuICAgIH1cbiAgICByZXR1cm4gVHJhbnNpdGlvbkV2ZW50VHlwZTtcbn0oKSk7XG5cbi8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHRoYXQgc2tpcHMgYSB0cmFuc2l0aW9uIGlmIGl0IHNob3VsZCBiZSBpZ25vcmVkXG4gKlxuICogVGhpcyBob29rIGlzIGludm9rZWQgYXQgdGhlIGVuZCBvZiB0aGUgb25CZWZvcmUgcGhhc2UuXG4gKlxuICogSWYgdGhlIHRyYW5zaXRpb24gc2hvdWxkIGJlIGlnbm9yZWQgKGJlY2F1c2Ugbm8gcGFyYW1ldGVyIG9yIHN0YXRlcyBjaGFuZ2VkKVxuICogdGhlbiB0aGUgdHJhbnNpdGlvbiBpcyBpZ25vcmVkIGFuZCBub3QgcHJvY2Vzc2VkLlxuICovXG5mdW5jdGlvbiBpZ25vcmVkSG9vayh0cmFucykge1xuICAgIHZhciBpZ25vcmVkUmVhc29uID0gdHJhbnMuX2lnbm9yZWRSZWFzb24oKTtcbiAgICBpZiAoIWlnbm9yZWRSZWFzb24pXG4gICAgICAgIHJldHVybjtcbiAgICB0cmFjZS50cmFjZVRyYW5zaXRpb25JZ25vcmVkKHRyYW5zKTtcbiAgICB2YXIgcGVuZGluZyA9IHRyYW5zLnJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb247XG4gICAgLy8gVGhlIHVzZXIgY2xpY2tlZCBhIGxpbmsgZ29pbmcgYmFjayB0byB0aGUgKmN1cnJlbnQgc3RhdGUqICgnQScpXG4gICAgLy8gSG93ZXZlciwgdGhlcmUgaXMgYWxzbyBhIHBlbmRpbmcgdHJhbnNpdGlvbiBpbiBmbGlnaHQgKHRvICdCJylcbiAgICAvLyBBYm9ydCB0aGUgdHJhbnNpdGlvbiB0byAnQicgYmVjYXVzZSB0aGUgdXNlciBub3cgd2FudHMgdG8gYmUgYmFjayBhdCAnQScuXG4gICAgaWYgKGlnbm9yZWRSZWFzb24gPT09ICdTYW1lQXNDdXJyZW50JyAmJiBwZW5kaW5nKSB7XG4gICAgICAgIHBlbmRpbmcuYWJvcnQoKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlamVjdGlvbi5pZ25vcmVkKCkudG9Qcm9taXNlKCk7XG59XG52YXIgcmVnaXN0ZXJJZ25vcmVkVHJhbnNpdGlvbkhvb2sgPSBmdW5jdGlvbiAodHJhbnNpdGlvblNlcnZpY2UpIHtcbiAgICByZXR1cm4gdHJhbnNpdGlvblNlcnZpY2Uub25CZWZvcmUoe30sIGlnbm9yZWRIb29rLCB7IHByaW9yaXR5OiAtOTk5OSB9KTtcbn07XG5cbi8qKiBAbW9kdWxlIGhvb2tzICovIC8qKiAqL1xuLyoqXG4gKiBBIFtbVHJhbnNpdGlvbkhvb2tGbl1dIHRoYXQgcmVqZWN0cyB0aGUgVHJhbnNpdGlvbiBpZiBpdCBpcyBpbnZhbGlkXG4gKlxuICogVGhpcyBob29rIGlzIGludm9rZWQgYXQgdGhlIGVuZCBvZiB0aGUgb25CZWZvcmUgcGhhc2UuXG4gKiBJZiB0aGUgdHJhbnNpdGlvbiBpcyBpbnZhbGlkIChmb3IgZXhhbXBsZSwgcGFyYW0gdmFsdWVzIGRvIG5vdCB2YWxpZGF0ZSlcbiAqIHRoZW4gdGhlIHRyYW5zaXRpb24gaXMgcmVqZWN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGludmFsaWRUcmFuc2l0aW9uSG9vayh0cmFucykge1xuICAgIGlmICghdHJhbnMudmFsaWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IodHJhbnMuZXJyb3IoKSk7XG4gICAgfVxufVxudmFyIHJlZ2lzdGVySW52YWxpZFRyYW5zaXRpb25Ib29rID0gZnVuY3Rpb24gKHRyYW5zaXRpb25TZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25TZXJ2aWNlLm9uQmVmb3JlKHt9LCBpbnZhbGlkVHJhbnNpdGlvbkhvb2ssIHsgcHJpb3JpdHk6IC0xMDAwMCB9KTtcbn07XG5cbi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgdHJhbnNpdGlvblxuICovXG4vKiogZm9yIHR5cGVkb2MgKi9cbi8qKlxuICogVGhlIGRlZmF1bHQgW1tUcmFuc2l0aW9uXV0gb3B0aW9ucy5cbiAqXG4gKiBJbmNsdWRlIHRoaXMgb2JqZWN0IHdoZW4gYXBwbHlpbmcgY3VzdG9tIGRlZmF1bHRzOlxuICogbGV0IHJlbG9hZE9wdHMgPSB7IHJlbG9hZDogdHJ1ZSwgbm90aWZ5OiB0cnVlIH1cbiAqIGxldCBvcHRpb25zID0gZGVmYXVsdHModGhlaXJPcHRzLCBjdXN0b21EZWZhdWx0cywgZGVmYXVsdE9wdGlvbnMpO1xuICovXG52YXIgZGVmYXVsdFRyYW5zT3B0cyA9IHtcbiAgICBsb2NhdGlvbjogdHJ1ZSxcbiAgICByZWxhdGl2ZTogbnVsbCxcbiAgICBpbmhlcml0OiBmYWxzZSxcbiAgICBub3RpZnk6IHRydWUsXG4gICAgcmVsb2FkOiBmYWxzZSxcbiAgICBjdXN0b206IHt9LFxuICAgIGN1cnJlbnQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgc291cmNlOiAndW5rbm93bicsXG59O1xuLyoqXG4gKiBUaGlzIGNsYXNzIHByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gVHJhbnNpdGlvbnMuXG4gKlxuICogLSBNb3N0IGltcG9ydGFudGx5LCBpdCBhbGxvd3MgZ2xvYmFsIFRyYW5zaXRpb24gSG9va3MgdG8gYmUgcmVnaXN0ZXJlZC5cbiAqIC0gSXQgYWxsb3dzIHRoZSBkZWZhdWx0IHRyYW5zaXRpb24gZXJyb3IgaGFuZGxlciB0byBiZSBzZXQuXG4gKiAtIEl0IGFsc28gaGFzIGEgZmFjdG9yeSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgbmV3IFtbVHJhbnNpdGlvbl1dIG9iamVjdHMsICh1c2VkIGludGVybmFsbHkgYnkgdGhlIFtbU3RhdGVTZXJ2aWNlXV0pLlxuICpcbiAqIEF0IGJvb3RzdHJhcCwgW1tVSVJvdXRlcl1dIGNyZWF0ZXMgYSBzaW5nbGUgaW5zdGFuY2UgKHNpbmdsZXRvbikgb2YgdGhpcyBjbGFzcy5cbiAqL1xudmFyIFRyYW5zaXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gVHJhbnNpdGlvblNlcnZpY2UoX3JvdXRlcikge1xuICAgICAgICAvKiogQGhpZGRlbiAqL1xuICAgICAgICB0aGlzLl90cmFuc2l0aW9uQ291bnQgPSAwO1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgdHJhbnNpdGlvbiBob29rIHR5cGVzLCBzdWNoIGFzIGBvbkVudGVyYCwgYG9uU3RhcnRgLCBldGMgKi9cbiAgICAgICAgdGhpcy5fZXZlbnRUeXBlcyA9IFtdO1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgcmVnaXN0ZXJlZCB0cmFuc2l0aW9uIGhvb2tzICovXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyZWRIb29rcyA9IHt9O1xuICAgICAgICAvKiogQGhpZGRlbiBUaGUgIHBhdGhzIG9uIGEgY3JpdGVyaWEgb2JqZWN0ICovXG4gICAgICAgIHRoaXMuX2NyaXRlcmlhUGF0aHMgPSB7fTtcbiAgICAgICAgdGhpcy5fcm91dGVyID0gX3JvdXRlcjtcbiAgICAgICAgdGhpcy4kdmlldyA9IF9yb3V0ZXIudmlld1NlcnZpY2U7XG4gICAgICAgIHRoaXMuX2RlcmVnaXN0ZXJIb29rRm5zID0ge307XG4gICAgICAgIHRoaXMuX3BsdWdpbmFwaSA9IGNyZWF0ZVByb3h5RnVuY3Rpb25zKHZhbCh0aGlzKSwge30sIHZhbCh0aGlzKSwgW1xuICAgICAgICAgICAgJ19kZWZpbmVQYXRoVHlwZScsXG4gICAgICAgICAgICAnX2RlZmluZUV2ZW50JyxcbiAgICAgICAgICAgICdfZ2V0UGF0aFR5cGVzJyxcbiAgICAgICAgICAgICdfZ2V0RXZlbnRzJyxcbiAgICAgICAgICAgICdnZXRIb29rcycsXG4gICAgICAgIF0pO1xuICAgICAgICB0aGlzLl9kZWZpbmVDb3JlUGF0aHMoKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lQ29yZUV2ZW50cygpO1xuICAgICAgICB0aGlzLl9yZWdpc3RlckNvcmVUcmFuc2l0aW9uSG9va3MoKTtcbiAgICAgICAgX3JvdXRlci5nbG9iYWxzLnN1Y2Nlc3NmdWxUcmFuc2l0aW9ucy5vbkV2aWN0KHRyZWVDaGFuZ2VzQ2xlYW51cCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbVHJhbnNpdGlvbkhvb2tGbl1dLCBjYWxsZWQgKndoaWxlIGEgdHJhbnNpdGlvbiBpcyBiZWluZyBjb25zdHJ1Y3RlZCouXG4gICAgICpcbiAgICAgKiBSZWdpc3RlcnMgYSB0cmFuc2l0aW9uIGxpZmVjeWNsZSBob29rLCB3aGljaCBpcyBpbnZva2VkIGR1cmluZyB0cmFuc2l0aW9uIGNvbnN0cnVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgbG93IGxldmVsIGhvb2sgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBwbHVnaW5zLlxuICAgICAqIFRoaXMgY2FuIGJlIGEgdXNlZnVsIHRpbWUgZm9yIHBsdWdpbnMgdG8gYWRkIHJlc29sdmVzIG9yIG11dGF0ZSB0aGUgdHJhbnNpdGlvbiBhcyBuZWVkZWQuXG4gICAgICogVGhlIFN0aWNreSBTdGF0ZXMgcGx1Z2luIHVzZXMgdGhpcyBob29rIHRvIG1vZGlmeSB0aGUgdHJlZWNoYW5nZXMuXG4gICAgICpcbiAgICAgKiAjIyMgTGlmZWN5Y2xlXG4gICAgICpcbiAgICAgKiBgb25DcmVhdGVgIGhvb2tzIGFyZSBpbnZva2VkICp3aGlsZSBhIHRyYW5zaXRpb24gaXMgYmVpbmcgY29uc3RydWN0ZWQqLlxuICAgICAqXG4gICAgICogIyMjIFJldHVybiB2YWx1ZVxuICAgICAqXG4gICAgICogVGhlIGhvb2sncyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgICAqXG4gICAgICogQGludGVybmFsYXBpXG4gICAgICogQHBhcmFtIGNyaXRlcmlhIGRlZmluZXMgd2hpY2ggVHJhbnNpdGlvbnMgdGhlIEhvb2sgc2hvdWxkIGJlIGludm9rZWQgZm9yLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB0aGUgaG9vayBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIGludm9rZWQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIHJlZ2lzdHJhdGlvbiBvcHRpb25zXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgaG9vay5cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25DcmVhdGUgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7IHJldHVybjsgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25CZWZvcmUgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7IHJldHVybjsgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25TdGFydCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkV4aXQgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7IHJldHVybjsgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25SZXRhaW4gPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7IHJldHVybjsgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25FbnRlciA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vbkZpbmlzaCA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsgcmV0dXJuOyB9O1xuICAgIC8qKiBAaW5oZXJpdGRvYyAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5vblN1Y2Nlc3MgPSBmdW5jdGlvbiAoY3JpdGVyaWEsIGNhbGxiYWNrLCBvcHRpb25zKSB7IHJldHVybjsgfTtcbiAgICAvKiogQGluaGVyaXRkb2MgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChjcml0ZXJpYSwgY2FsbGJhY2ssIG9wdGlvbnMpIHsgcmV0dXJuOyB9O1xuICAgIC8qKlxuICAgICAqIGRpc3Bvc2VcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyb3V0ZXIpIHtcbiAgICAgICAgdmFsdWVzKHRoaXMuX3JlZ2lzdGVyZWRIb29rcykuZm9yRWFjaChmdW5jdGlvbiAoaG9va3NBcnJheSkgeyByZXR1cm4gaG9va3NBcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7XG4gICAgICAgICAgICBob29rLl9kZXJlZ2lzdGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmVtb3ZlRnJvbShob29rc0FycmF5LCBob29rKTtcbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBbW1RyYW5zaXRpb25dXSBvYmplY3RcbiAgICAgKlxuICAgICAqIFRoaXMgaXMgYSBmYWN0b3J5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBuZXcgVHJhbnNpdGlvbiBvYmplY3RzLlxuICAgICAqIEl0IGlzIHVzZWQgaW50ZXJuYWxseSBieSB0aGUgW1tTdGF0ZVNlcnZpY2VdXSBhbmQgc2hvdWxkIGdlbmVyYWxseSBub3QgYmUgY2FsbGVkIGJ5IGFwcGxpY2F0aW9uIGNvZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZnJvbVBhdGggdGhlIHBhdGggdG8gdGhlIGN1cnJlbnQgc3RhdGUgKHRoZSBmcm9tIHN0YXRlKVxuICAgICAqIEBwYXJhbSB0YXJnZXRTdGF0ZSB0aGUgdGFyZ2V0IHN0YXRlIChkZXN0aW5hdGlvbilcbiAgICAgKiBAcmV0dXJucyBhIFRyYW5zaXRpb25cbiAgICAgKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGZyb21QYXRoLCB0YXJnZXRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYW5zaXRpb24oZnJvbVBhdGgsIHRhcmdldFN0YXRlLCB0aGlzLl9yb3V0ZXIpO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuX2RlZmluZUNvcmVFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBQaGFzZSA9IGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tQaGFzZTtcbiAgICAgICAgdmFyIFRIID0gVHJhbnNpdGlvbkhvb2s7XG4gICAgICAgIHZhciBwYXRocyA9IHRoaXMuX2NyaXRlcmlhUGF0aHM7XG4gICAgICAgIHZhciBOT1JNQUxfU09SVCA9IGZhbHNlLCBSRVZFUlNFX1NPUlQgPSB0cnVlO1xuICAgICAgICB2YXIgU1lOQ0hST05PVVMgPSB0cnVlO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25DcmVhdGUnLCBQaGFzZS5DUkVBVEUsIDAsIHBhdGhzLnRvLCBOT1JNQUxfU09SVCwgVEguTE9HX1JFSkVDVEVEX1JFU1VMVCwgVEguVEhST1dfRVJST1IsIFNZTkNIUk9OT1VTKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uQmVmb3JlJywgUGhhc2UuQkVGT1JFLCAwLCBwYXRocy50byk7XG4gICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvblN0YXJ0JywgUGhhc2UuUlVOLCAwLCBwYXRocy50byk7XG4gICAgICAgIHRoaXMuX2RlZmluZUV2ZW50KCdvbkV4aXQnLCBQaGFzZS5SVU4sIDEwMCwgcGF0aHMuZXhpdGluZywgUkVWRVJTRV9TT1JUKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uUmV0YWluJywgUGhhc2UuUlVOLCAyMDAsIHBhdGhzLnJldGFpbmVkKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uRW50ZXInLCBQaGFzZS5SVU4sIDMwMCwgcGF0aHMuZW50ZXJpbmcpO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25GaW5pc2gnLCBQaGFzZS5SVU4sIDQwMCwgcGF0aHMudG8pO1xuICAgICAgICB0aGlzLl9kZWZpbmVFdmVudCgnb25TdWNjZXNzJywgUGhhc2UuU1VDQ0VTUywgMCwgcGF0aHMudG8sIE5PUk1BTF9TT1JULCBUSC5MT0dfUkVKRUNURURfUkVTVUxULCBUSC5MT0dfRVJST1IsIFNZTkNIUk9OT1VTKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lRXZlbnQoJ29uRXJyb3InLCBQaGFzZS5FUlJPUiwgMCwgcGF0aHMudG8sIE5PUk1BTF9TT1JULCBUSC5MT0dfUkVKRUNURURfUkVTVUxULCBUSC5MT0dfRVJST1IsIFNZTkNIUk9OT1VTKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9kZWZpbmVDb3JlUGF0aHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBTVEFURSA9IGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tTY29wZS5TVEFURSwgVFJBTlNJVElPTiA9IGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tTY29wZS5UUkFOU0lUSU9OO1xuICAgICAgICB0aGlzLl9kZWZpbmVQYXRoVHlwZSgndG8nLCBUUkFOU0lUSU9OKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ2Zyb20nLCBUUkFOU0lUSU9OKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ2V4aXRpbmcnLCBTVEFURSk7XG4gICAgICAgIHRoaXMuX2RlZmluZVBhdGhUeXBlKCdyZXRhaW5lZCcsIFNUQVRFKTtcbiAgICAgICAgdGhpcy5fZGVmaW5lUGF0aFR5cGUoJ2VudGVyaW5nJywgU1RBVEUpO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuX2RlZmluZUV2ZW50ID0gZnVuY3Rpb24gKG5hbWUsIGhvb2tQaGFzZSwgaG9va09yZGVyLCBjcml0ZXJpYU1hdGNoUGF0aCwgcmV2ZXJzZVNvcnQsIGdldFJlc3VsdEhhbmRsZXIsIGdldEVycm9ySGFuZGxlciwgc3luY2hyb25vdXMpIHtcbiAgICAgICAgaWYgKHJldmVyc2VTb3J0ID09PSB2b2lkIDApIHsgcmV2ZXJzZVNvcnQgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoZ2V0UmVzdWx0SGFuZGxlciA9PT0gdm9pZCAwKSB7IGdldFJlc3VsdEhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5IQU5ETEVfUkVTVUxUOyB9XG4gICAgICAgIGlmIChnZXRFcnJvckhhbmRsZXIgPT09IHZvaWQgMCkgeyBnZXRFcnJvckhhbmRsZXIgPSBUcmFuc2l0aW9uSG9vay5SRUpFQ1RfRVJST1I7IH1cbiAgICAgICAgaWYgKHN5bmNocm9ub3VzID09PSB2b2lkIDApIHsgc3luY2hyb25vdXMgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgZXZlbnRUeXBlID0gbmV3IFRyYW5zaXRpb25FdmVudFR5cGUobmFtZSwgaG9va1BoYXNlLCBob29rT3JkZXIsIGNyaXRlcmlhTWF0Y2hQYXRoLCByZXZlcnNlU29ydCwgZ2V0UmVzdWx0SGFuZGxlciwgZ2V0RXJyb3JIYW5kbGVyLCBzeW5jaHJvbm91cyk7XG4gICAgICAgIHRoaXMuX2V2ZW50VHlwZXMucHVzaChldmVudFR5cGUpO1xuICAgICAgICBtYWtlRXZlbnQodGhpcywgdGhpcywgZXZlbnRUeXBlKTtcbiAgICB9O1xuICAgIC8qKiBAaGlkZGVuICovIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZ2V0RXZlbnRzID0gZnVuY3Rpb24gKHBoYXNlKSB7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uSG9va1R5cGVzID0gaXNEZWZpbmVkKHBoYXNlKSA/XG4gICAgICAgICAgICB0aGlzLl9ldmVudFR5cGVzLmZpbHRlcihmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gdHlwZS5ob29rUGhhc2UgPT09IHBoYXNlOyB9KSA6XG4gICAgICAgICAgICB0aGlzLl9ldmVudFR5cGVzLnNsaWNlKCk7XG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uSG9va1R5cGVzLnNvcnQoZnVuY3Rpb24gKGwsIHIpIHtcbiAgICAgICAgICAgIHZhciBjbXBCeVBoYXNlID0gbC5ob29rUGhhc2UgLSByLmhvb2tQaGFzZTtcbiAgICAgICAgICAgIHJldHVybiBjbXBCeVBoYXNlID09PSAwID8gbC5ob29rT3JkZXIgLSByLmhvb2tPcmRlciA6IGNtcEJ5UGhhc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIFBhdGggdG8gYmUgdXNlZCBhcyBhIGNyaXRlcmlvbiBhZ2FpbnN0IGEgVHJlZUNoYW5nZXMgcGF0aFxuICAgICAqXG4gICAgICogRm9yIGV4YW1wbGU6IHRoZSBgZXhpdGluZ2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBTVEFURSBzY29wZWQgcGF0aC5cbiAgICAgKiBJdCB3YXMgZGVmaW5lZCBieSBjYWxsaW5nIGBkZWZpbmVUcmVlQ2hhbmdlc0NyaXRlcmlvbignZXhpdGluZycsIFRyYW5zaXRpb25Ib29rU2NvcGUuU1RBVEUpYFxuICAgICAqIEVhY2ggc3RhdGUgaW4gdGhlIGV4aXRpbmcgcGF0aCBpcyBjaGVja2VkIGFnYWluc3QgdGhlIGNyaXRlcmlhIGFuZCByZXR1cm5lZCBhcyBwYXJ0IG9mIHRoZSBtYXRjaC5cbiAgICAgKlxuICAgICAqIEFub3RoZXIgZXhhbXBsZTogdGhlIGB0b2AgcGF0aCBpbiBbW0hvb2tNYXRjaENyaXRlcmlhXV0gaXMgYSBUUkFOU0lUSU9OIHNjb3BlZCBwYXRoLlxuICAgICAqIEl0IHdhcyBkZWZpbmVkIGJ5IGNhbGxpbmcgYGRlZmluZVRyZWVDaGFuZ2VzQ3JpdGVyaW9uKCd0bycsIFRyYW5zaXRpb25Ib29rU2NvcGUuVFJBTlNJVElPTilgXG4gICAgICogT25seSB0aGUgdGFpbCBvZiB0aGUgYHRvYCBwYXRoIGlzIGNoZWNrZWQgYWdhaW5zdCB0aGUgY3JpdGVyaWEgYW5kIHJldHVybmVkIGFzIHBhcnQgb2YgdGhlIG1hdGNoLlxuICAgICAqXG4gICAgICogQGhpZGRlblxuICAgICAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fZGVmaW5lUGF0aFR5cGUgPSBmdW5jdGlvbiAobmFtZSwgaG9va1Njb3BlKSB7XG4gICAgICAgIHRoaXMuX2NyaXRlcmlhUGF0aHNbbmFtZV0gPSB7IG5hbWU6IG5hbWUsIHNjb3BlOiBob29rU2NvcGUgfTtcbiAgICB9O1xuICAgIC8qKiAqIEBoaWRkZW4gKi8gLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgVHJhbnNpdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXRQYXRoVHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jcml0ZXJpYVBhdGhzO1xuICAgIH07XG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBUcmFuc2l0aW9uU2VydmljZS5wcm90b3R5cGUuZ2V0SG9va3MgPSBmdW5jdGlvbiAoaG9va05hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZ2lzdGVyZWRIb29rc1tob29rTmFtZV07XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFRyYW5zaXRpb25TZXJ2aWNlLnByb3RvdHlwZS5fcmVnaXN0ZXJDb3JlVHJhbnNpdGlvbkhvb2tzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZm5zID0gdGhpcy5fZGVyZWdpc3Rlckhvb2tGbnM7XG4gICAgICAgIGZucy5hZGRDb3JlUmVzb2x2ZXMgPSByZWdpc3RlckFkZENvcmVSZXNvbHZhYmxlcyh0aGlzKTtcbiAgICAgICAgZm5zLmlnbm9yZWQgPSByZWdpc3Rlcklnbm9yZWRUcmFuc2l0aW9uSG9vayh0aGlzKTtcbiAgICAgICAgZm5zLmludmFsaWQgPSByZWdpc3RlckludmFsaWRUcmFuc2l0aW9uSG9vayh0aGlzKTtcbiAgICAgICAgLy8gV2lyZSB1cCByZWRpcmVjdFRvIGhvb2tcbiAgICAgICAgZm5zLnJlZGlyZWN0VG8gPSByZWdpc3RlclJlZGlyZWN0VG9Ib29rKHRoaXMpO1xuICAgICAgICAvLyBXaXJlIHVwIG9uRXhpdC9SZXRhaW4vRW50ZXIgc3RhdGUgaG9va3NcbiAgICAgICAgZm5zLm9uRXhpdCA9IHJlZ2lzdGVyT25FeGl0SG9vayh0aGlzKTtcbiAgICAgICAgZm5zLm9uUmV0YWluID0gcmVnaXN0ZXJPblJldGFpbkhvb2sodGhpcyk7XG4gICAgICAgIGZucy5vbkVudGVyID0gcmVnaXN0ZXJPbkVudGVySG9vayh0aGlzKTtcbiAgICAgICAgLy8gV2lyZSB1cCBSZXNvbHZlIGhvb2tzXG4gICAgICAgIGZucy5lYWdlclJlc29sdmUgPSByZWdpc3RlckVhZ2VyUmVzb2x2ZVBhdGgodGhpcyk7XG4gICAgICAgIGZucy5sYXp5UmVzb2x2ZSA9IHJlZ2lzdGVyTGF6eVJlc29sdmVTdGF0ZSh0aGlzKTtcbiAgICAgICAgZm5zLnJlc29sdmVBbGwgPSByZWdpc3RlclJlc29sdmVSZW1haW5pbmcodGhpcyk7XG4gICAgICAgIC8vIFdpcmUgdXAgdGhlIFZpZXcgbWFuYWdlbWVudCBob29rc1xuICAgICAgICBmbnMubG9hZFZpZXdzID0gcmVnaXN0ZXJMb2FkRW50ZXJpbmdWaWV3cyh0aGlzKTtcbiAgICAgICAgZm5zLmFjdGl2YXRlVmlld3MgPSByZWdpc3RlckFjdGl2YXRlVmlld3ModGhpcyk7XG4gICAgICAgIC8vIFVwZGF0ZXMgZ2xvYmFsIHN0YXRlIGFmdGVyIGEgdHJhbnNpdGlvblxuICAgICAgICBmbnMudXBkYXRlR2xvYmFscyA9IHJlZ2lzdGVyVXBkYXRlR2xvYmFsU3RhdGUodGhpcyk7XG4gICAgICAgIC8vIEFmdGVyIGdsb2JhbHMuY3VycmVudCBpcyB1cGRhdGVkIGF0IHByaW9yaXR5OiAxMDAwMFxuICAgICAgICBmbnMudXBkYXRlVXJsID0gcmVnaXN0ZXJVcGRhdGVVcmwodGhpcyk7XG4gICAgICAgIC8vIExhenkgbG9hZCBzdGF0ZSB0cmVlc1xuICAgICAgICBmbnMubGF6eUxvYWQgPSByZWdpc3RlckxhenlMb2FkSG9vayh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBUcmFuc2l0aW9uU2VydmljZTtcbn0oKSk7XG5cbi8qKlxuICogQGNvcmVhcGlcbiAqIEBtb2R1bGUgc3RhdGVcbiAqL1xuLyoqICovXG4vKipcbiAqIFByb3ZpZGVzIHN0YXRlIHJlbGF0ZWQgc2VydmljZSBmdW5jdGlvbnNcbiAqXG4gKiBUaGlzIGNsYXNzIHByb3ZpZGVzIHNlcnZpY2VzIHJlbGF0ZWQgdG8gdWktcm91dGVyIHN0YXRlcy5cbiAqIEFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgaXMgbG9jYXRlZCBvbiB0aGUgZ2xvYmFsIFtbVUlSb3V0ZXJdXSBvYmplY3QuXG4gKi9cbnZhciBTdGF0ZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIGZ1bmN0aW9uIFN0YXRlU2VydmljZShyb3V0ZXIpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIC8qKiBAaW50ZXJuYWxhcGkgKi9cbiAgICAgICAgdGhpcy5pbnZhbGlkQ2FsbGJhY2tzID0gW107XG4gICAgICAgIC8qKiBAaGlkZGVuICovXG4gICAgICAgIHRoaXMuX2RlZmF1bHRFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAkZGVmYXVsdEVycm9ySGFuZGxlcigkZXJyb3IkKSB7XG4gICAgICAgICAgICBpZiAoJGVycm9yJCBpbnN0YW5jZW9mIEVycm9yICYmICRlcnJvciQuc3RhY2spIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJGVycm9yJC5zdGFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgkZXJyb3IkIGluc3RhbmNlb2YgUmVqZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGlmICgkZXJyb3IkLmRldGFpbCAmJiAkZXJyb3IkLmRldGFpbC5zdGFjaylcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigkZXJyb3IkLmRldGFpbC5zdGFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCRlcnJvciQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgZ2V0dGVycyA9IFsnY3VycmVudCcsICckY3VycmVudCcsICdwYXJhbXMnLCAndHJhbnNpdGlvbiddO1xuICAgICAgICB2YXIgYm91bmRGbnMgPSBPYmplY3Qua2V5cyhTdGF0ZVNlcnZpY2UucHJvdG90eXBlKS5maWx0ZXIobm90KGluQXJyYXkoZ2V0dGVycykpKTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnModmFsKFN0YXRlU2VydmljZS5wcm90b3R5cGUpLCB0aGlzLCB2YWwodGhpcyksIGJvdW5kRm5zKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0YXRlU2VydmljZS5wcm90b3R5cGUsIFwidHJhbnNpdGlvblwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgW1tUcmFuc2l0aW9uXV0gY3VycmVudGx5IGluIHByb2dyZXNzIChvciBudWxsKVxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzIGEgcGFzc3Rocm91Z2ggdGhyb3VnaCB0byBbW1VJUm91dGVyR2xvYmFscy50cmFuc2l0aW9uXV1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uOyB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhdGVTZXJ2aWNlLnByb3RvdHlwZSwgXCJwYXJhbXNcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGxhdGVzdCBzdWNjZXNzZnVsIHN0YXRlIHBhcmFtZXRlcnNcbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRocm91Z2ggdG8gW1tVSVJvdXRlckdsb2JhbHMucGFyYW1zXV1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy5wYXJhbXM7IH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdGF0ZVNlcnZpY2UucHJvdG90eXBlLCBcImN1cnJlbnRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgW1tTdGF0ZURlY2xhcmF0aW9uXV1cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRocm91Z2ggdG8gW1tVSVJvdXRlckdsb2JhbHMuY3VycmVudF1dXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMucm91dGVyLmdsb2JhbHMuY3VycmVudDsgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0YXRlU2VydmljZS5wcm90b3R5cGUsIFwiJGN1cnJlbnRcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgW1tTdGF0ZU9iamVjdF1dXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgYSBwYXNzdGhyb3VnaCB0aHJvdWdoIHRvIFtbVUlSb3V0ZXJHbG9iYWxzLiRjdXJyZW50XV1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5yb3V0ZXIuZ2xvYmFscy4kY3VycmVudDsgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqIEBpbnRlcm5hbGFwaSAqL1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0RXJyb3JIYW5kbGVyKG5vb3ApO1xuICAgICAgICB0aGlzLmludmFsaWRDYWxsYmFja3MgPSBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXIgZm9yIHdoZW4gW1t0cmFuc2l0aW9uVG9dXSBpcyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHN0YXRlLlxuICAgICAqXG4gICAgICogSW52b2tlcyB0aGUgW1tvbkludmFsaWRdXSBjYWxsYmFja3MsIGluIG5hdHVyYWwgb3JkZXIuXG4gICAgICogRWFjaCBjYWxsYmFjaydzIHJldHVybiB2YWx1ZSBpcyBjaGVja2VkIGluIHNlcXVlbmNlIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgVGFyZ2V0U3RhdGUuXG4gICAgICogVGhlIHJlc3VsdHMgb2YgdGhlIGNhbGxiYWNrcyBhcmUgd3JhcHBlZCBpbiAkcS53aGVuKCksIHNvIHRoZSBjYWxsYmFja3MgbWF5IHJldHVybiBwcm9taXNlcy5cbiAgICAgKlxuICAgICAqIElmIGEgY2FsbGJhY2sgcmV0dXJucyBhbiBUYXJnZXRTdGF0ZSwgdGhlbiBpdCBpcyB1c2VkIGFzIGFyZ3VtZW50cyB0byAkc3RhdGUudHJhbnNpdGlvblRvKCkgYW5kIHRoZSByZXN1bHQgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxhcGlcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLl9oYW5kbGVJbnZhbGlkVGFyZ2V0U3RhdGUgPSBmdW5jdGlvbiAoZnJvbVBhdGgsIHRvU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGZyb21TdGF0ZSA9IFBhdGhVdGlscy5tYWtlVGFyZ2V0U3RhdGUodGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeSwgZnJvbVBhdGgpO1xuICAgICAgICB2YXIgZ2xvYmFscyA9IHRoaXMucm91dGVyLmdsb2JhbHM7XG4gICAgICAgIHZhciBsYXRlc3RUaGluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdsb2JhbHMudHJhbnNpdGlvbkhpc3RvcnkucGVla1RhaWwoKTsgfTtcbiAgICAgICAgdmFyIGxhdGVzdCA9IGxhdGVzdFRoaW5nKCk7XG4gICAgICAgIHZhciBjYWxsYmFja1F1ZXVlID0gbmV3IFF1ZXVlKHRoaXMuaW52YWxpZENhbGxiYWNrcy5zbGljZSgpKTtcbiAgICAgICAgdmFyIGluamVjdG9yID0gbmV3IFJlc29sdmVDb250ZXh0KGZyb21QYXRoKS5pbmplY3RvcigpO1xuICAgICAgICB2YXIgY2hlY2tGb3JSZWRpcmVjdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICghKHJlc3VsdCBpbnN0YW5jZW9mIFRhcmdldFN0YXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSByZXN1bHQ7XG4gICAgICAgICAgICAvLyBSZWNyZWF0ZSB0aGUgVGFyZ2V0U3RhdGUsIGluIGNhc2UgdGhlIHN0YXRlIGlzIG5vdyBkZWZpbmVkLlxuICAgICAgICAgICAgdGFyZ2V0ID0gX3RoaXMudGFyZ2V0KHRhcmdldC5pZGVudGlmaWVyKCksIHRhcmdldC5wYXJhbXMoKSwgdGFyZ2V0Lm9wdGlvbnMoKSk7XG4gICAgICAgICAgICBpZiAoIXRhcmdldC52YWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlamVjdGlvbi5pbnZhbGlkKHRhcmdldC5lcnJvcigpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXRlc3RUaGluZygpICE9PSBsYXRlc3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVqZWN0aW9uLnN1cGVyc2VkZWQoKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfdGhpcy50cmFuc2l0aW9uVG8odGFyZ2V0LmlkZW50aWZpZXIoKSwgdGFyZ2V0LnBhcmFtcygpLCB0YXJnZXQub3B0aW9ucygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gaW52b2tlTmV4dENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdmFyIG5leHRDYWxsYmFjayA9IGNhbGxiYWNrUXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICAgICAgaWYgKG5leHRDYWxsYmFjayA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBSZWplY3Rpb24uaW52YWxpZCh0b1N0YXRlLmVycm9yKCkpLnRvUHJvbWlzZSgpO1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrUmVzdWx0ID0gc2VydmljZXMuJHEud2hlbihuZXh0Q2FsbGJhY2sodG9TdGF0ZSwgZnJvbVN0YXRlLCBpbmplY3RvcikpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrUmVzdWx0LnRoZW4oY2hlY2tGb3JSZWRpcmVjdCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7IHJldHVybiByZXN1bHQgfHwgaW52b2tlTmV4dENhbGxiYWNrKCk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnZva2VOZXh0Q2FsbGJhY2soKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhbiBJbnZhbGlkIFN0YXRlIGhhbmRsZXJcbiAgICAgKlxuICAgICAqIFJlZ2lzdGVycyBhIFtbT25JbnZhbGlkQ2FsbGJhY2tdXSBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gW1tTdGF0ZVNlcnZpY2UudHJhbnNpdGlvblRvXV1cbiAgICAgKiBoYXMgYmVlbiBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIHN0YXRlIHJlZmVyZW5jZSBwYXJhbWV0ZXJcbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBzdGF0ZVNlcnZpY2Uub25JbnZhbGlkKGZ1bmN0aW9uKHRvLCBmcm9tLCBpbmplY3Rvcikge1xuICAgICAqICAgaWYgKHRvLm5hbWUoKSA9PT0gJ2ZvbycpIHtcbiAgICAgKiAgICAgbGV0IGxhenlMb2FkZXIgPSBpbmplY3Rvci5nZXQoJ0xhenlMb2FkU2VydmljZScpO1xuICAgICAqICAgICByZXR1cm4gbGF6eUxvYWRlci5sb2FkKCdmb28nKVxuICAgICAqICAgICAgICAgLnRoZW4oKCkgPT4gc3RhdGVTZXJ2aWNlLnRhcmdldCgnZm9vJykpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgaW52b2tlZCB3aGVuIHRoZSB0b1N0YXRlIGlzIGludmFsaWRcbiAgICAgKiAgIFRoaXMgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlIChpbnZhbGlkKSB0b1N0YXRlLCB0aGUgZnJvbVN0YXRlLCBhbmQgYW4gaW5qZWN0b3IuXG4gICAgICogICBUaGUgZnVuY3Rpb24gbWF5IG9wdGlvbmFsbHkgcmV0dXJuIGEgW1tUYXJnZXRTdGF0ZV1dIG9yIGEgUHJvbWlzZSBmb3IgYSBUYXJnZXRTdGF0ZS5cbiAgICAgKiAgIElmIG9uZSBpcyByZXR1cm5lZCwgaXQgaXMgdHJlYXRlZCBhcyBhIHJlZGlyZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB3aGljaCBkZXJlZ2lzdGVycyB0aGUgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLm9uSW52YWxpZCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmludmFsaWRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBkZXJlZ2lzdGVyTGlzdGVuZXIoKSB7XG4gICAgICAgICAgICByZW1vdmVGcm9tKHRoaXMuaW52YWxpZENhbGxiYWNrcykoY2FsbGJhY2spO1xuICAgICAgICB9LmJpbmQodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWxvYWRzIHRoZSBjdXJyZW50IHN0YXRlXG4gICAgICpcbiAgICAgKiBBIG1ldGhvZCB0aGF0IGZvcmNlIHJlbG9hZHMgdGhlIGN1cnJlbnQgc3RhdGUsIG9yIGEgcGFydGlhbCBzdGF0ZSBoaWVyYXJjaHkuXG4gICAgICogQWxsIHJlc29sdmVzIGFyZSByZS1yZXNvbHZlZCwgYW5kIGNvbXBvbmVudHMgcmVpbnN0YW50aWF0ZWQuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBsZXQgYXBwIGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlciddKTtcbiAgICAgKlxuICAgICAqIGFwcC5jb250cm9sbGVyKCdjdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlKSB7XG4gICAgICogICAkc2NvcGUucmVsb2FkID0gZnVuY3Rpb24oKXtcbiAgICAgKiAgICAgJHN0YXRlLnJlbG9hZCgpO1xuICAgICAqICAgfVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogTm90ZTogYHJlbG9hZCgpYCBpcyBqdXN0IGFuIGFsaWFzIGZvcjpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogJHN0YXRlLnRyYW5zaXRpb25Ubygkc3RhdGUuY3VycmVudCwgJHN0YXRlLnBhcmFtcywge1xuICAgICAqICAgcmVsb2FkOiB0cnVlLCBpbmhlcml0OiBmYWxzZVxuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHJlbG9hZFN0YXRlIEEgc3RhdGUgbmFtZSBvciBhIHN0YXRlIG9iamVjdC5cbiAgICAgKiAgICBJZiBwcmVzZW50LCB0aGlzIHN0YXRlIGFuZCBhbGwgaXRzIGNoaWxkcmVuIHdpbGwgYmUgcmVsb2FkZWQsIGJ1dCBhbmNlc3RvcnMgd2lsbCBub3QgcmVsb2FkLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogLy9hc3N1bWluZyBhcHAgYXBwbGljYXRpb24gY29uc2lzdHMgb2YgMyBzdGF0ZXM6ICdjb250YWN0cycsICdjb250YWN0cy5kZXRhaWwnLCAnY29udGFjdHMuZGV0YWlsLml0ZW0nXG4gICAgICogLy9hbmQgY3VycmVudCBzdGF0ZSBpcyAnY29udGFjdHMuZGV0YWlsLml0ZW0nXG4gICAgICogbGV0IGFwcCBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XG4gICAgICpcbiAgICAgKiBhcHAuY29udHJvbGxlcignY3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSkge1xuICAgICAqICAgJHNjb3BlLnJlbG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAgICogICAgIC8vd2lsbCByZWxvYWQgJ2NvbnRhY3QuZGV0YWlsJyBhbmQgbmVzdGVkICdjb250YWN0LmRldGFpbC5pdGVtJyBzdGF0ZXNcbiAgICAgKiAgICAgJHN0YXRlLnJlbG9hZCgnY29udGFjdC5kZXRhaWwnKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBuZXcgdHJhbnNpdGlvbi4gU2VlIFtbU3RhdGVTZXJ2aWNlLmdvXV1cbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uIChyZWxvYWRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uVG8odGhpcy5jdXJyZW50LCB0aGlzLnBhcmFtcywge1xuICAgICAgICAgICAgcmVsb2FkOiBpc0RlZmluZWQocmVsb2FkU3RhdGUpID8gcmVsb2FkU3RhdGUgOiB0cnVlLFxuICAgICAgICAgICAgaW5oZXJpdDogZmFsc2UsXG4gICAgICAgICAgICBub3RpZnk6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zaXRpb24gdG8gYSBkaWZmZXJlbnQgc3RhdGUgYW5kL29yIHBhcmFtZXRlcnNcbiAgICAgKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgdHJhbnNpdGlvbmluZyB0byBhIG5ldyBzdGF0ZS5cbiAgICAgKlxuICAgICAqIGAkc3RhdGUuZ29gIGNhbGxzIGAkc3RhdGUudHJhbnNpdGlvblRvYCBpbnRlcm5hbGx5IGJ1dCBhdXRvbWF0aWNhbGx5IHNldHMgb3B0aW9ucyB0b1xuICAgICAqIGB7IGxvY2F0aW9uOiB0cnVlLCBpbmhlcml0OiB0cnVlLCByZWxhdGl2ZTogcm91dGVyLmdsb2JhbHMuJGN1cnJlbnQsIG5vdGlmeTogdHJ1ZSB9YC5cbiAgICAgKiBUaGlzIGFsbG93cyB5b3UgdG8gdXNlIGVpdGhlciBhbiBhYnNvbHV0ZSBvciByZWxhdGl2ZSBgdG9gIGFyZ3VtZW50IChiZWNhdXNlIG9mIGByZWxhdGl2ZTogcm91dGVyLmdsb2JhbHMuJGN1cnJlbnRgKS5cbiAgICAgKiBJdCBhbHNvIGFsbG93cyB5b3UgdG8gc3BlY2lmeSAqIG9ubHkgdGhlIHBhcmFtZXRlcnMgeW91J2QgbGlrZSB0byB1cGRhdGUsIHdoaWxlIGxldHRpbmcgdW5zcGVjaWZpZWQgcGFyYW1ldGVyc1xuICAgICAqIGluaGVyaXQgZnJvbSB0aGUgY3VycmVudCBwYXJhbWV0ZXIgdmFsdWVzIChiZWNhdXNlIG9mIGBpbmhlcml0OiB0cnVlYCkuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBsZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xuICAgICAqXG4gICAgICogYXBwLmNvbnRyb2xsZXIoJ2N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUpIHtcbiAgICAgKiAgICRzY29wZS5jaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgICAgJHN0YXRlLmdvKCdjb250YWN0LmRldGFpbCcpO1xuICAgICAqICAgfTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0byBBYnNvbHV0ZSBzdGF0ZSBuYW1lLCBzdGF0ZSBvYmplY3QsIG9yIHJlbGF0aXZlIHN0YXRlIHBhdGggKHJlbGF0aXZlIHRvIGN1cnJlbnQgc3RhdGUpLlxuICAgICAqXG4gICAgICogU29tZSBleGFtcGxlczpcbiAgICAgKlxuICAgICAqIC0gYCRzdGF0ZS5nbygnY29udGFjdC5kZXRhaWwnKWAgLSB3aWxsIGdvIHRvIHRoZSBgY29udGFjdC5kZXRhaWxgIHN0YXRlXG4gICAgICogLSBgJHN0YXRlLmdvKCdeJylgIC0gd2lsbCBnbyB0byB0aGUgcGFyZW50IHN0YXRlXG4gICAgICogLSBgJHN0YXRlLmdvKCdeLnNpYmxpbmcnKWAgLSBpZiBjdXJyZW50IHN0YXRlIGlzIGBob21lLmNoaWxkYCwgd2lsbCBnbyB0byB0aGUgYGhvbWUuc2libGluZ2Agc3RhdGVcbiAgICAgKiAtIGAkc3RhdGUuZ28oJy5jaGlsZC5ncmFuZGNoaWxkJylgIC0gaWYgY3VycmVudCBzdGF0ZSBpcyBob21lLCB3aWxsIGdvIHRvIHRoZSBgaG9tZS5jaGlsZC5ncmFuZGNoaWxkYCBzdGF0ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtcyBBIG1hcCBvZiB0aGUgcGFyYW1ldGVycyB0aGF0IHdpbGwgYmUgc2VudCB0byB0aGUgc3RhdGUsIHdpbGwgcG9wdWxhdGUgJHN0YXRlUGFyYW1zLlxuICAgICAqXG4gICAgICogICAgQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgbm90IHNwZWNpZmllZCB3aWxsIGJlIGluaGVyaXRlZCBmcm9tIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlcyAoYmVjYXVzZSBvZiBgaW5oZXJpdDogdHJ1ZWApLlxuICAgICAqICAgIFRoaXMgYWxsb3dzLCBmb3IgZXhhbXBsZSwgZ29pbmcgdG8gYSBzaWJsaW5nIHN0YXRlIHRoYXQgc2hhcmVzIHBhcmFtZXRlcnMgZGVmaW5lZCBieSBhIHBhcmVudCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRyYW5zaXRpb24gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybnMge3Byb21pc2V9IEEgcHJvbWlzZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIHRoZSBuZXcgdHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gKHRvLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGRlZmF1dEdvT3B0cyA9IHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQsIGluaGVyaXQ6IHRydWUgfTtcbiAgICAgICAgdmFyIHRyYW5zT3B0cyA9IGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1dEdvT3B0cywgZGVmYXVsdFRyYW5zT3B0cyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb25Ubyh0bywgcGFyYW1zLCB0cmFuc09wdHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFtbVGFyZ2V0U3RhdGVdXVxuICAgICAqXG4gICAgICogVGhpcyBpcyBhIGZhY3RvcnkgbWV0aG9kIGZvciBjcmVhdGluZyBhIFRhcmdldFN0YXRlXG4gICAgICpcbiAgICAgKiBUaGlzIG1heSBiZSByZXR1cm5lZCBmcm9tIGEgVHJhbnNpdGlvbiBIb29rIHRvIHJlZGlyZWN0IGEgdHJhbnNpdGlvbiwgZm9yIGV4YW1wbGUuXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS50YXJnZXQgPSBmdW5jdGlvbiAoaWRlbnRpZmllciwgcGFyYW1zLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgICAgIC8vIElmIHdlJ3JlIHJlbG9hZGluZywgZmluZCB0aGUgc3RhdGUgb2JqZWN0IHRvIHJlbG9hZCBmcm9tXG4gICAgICAgIGlmIChpc09iamVjdChvcHRpb25zLnJlbG9hZCkgJiYgIW9wdGlvbnMucmVsb2FkLm5hbWUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVsb2FkIHN0YXRlIG9iamVjdCcpO1xuICAgICAgICB2YXIgcmVnID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeTtcbiAgICAgICAgb3B0aW9ucy5yZWxvYWRTdGF0ZSA9IG9wdGlvbnMucmVsb2FkID09PSB0cnVlID8gcmVnLnJvb3QoKSA6IHJlZy5tYXRjaGVyLmZpbmQob3B0aW9ucy5yZWxvYWQsIG9wdGlvbnMucmVsYXRpdmUpO1xuICAgICAgICBpZiAob3B0aW9ucy5yZWxvYWQgJiYgIW9wdGlvbnMucmVsb2FkU3RhdGUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBzdWNoIHJlbG9hZCBzdGF0ZSAnXCIgKyAoaXNTdHJpbmcob3B0aW9ucy5yZWxvYWQpID8gb3B0aW9ucy5yZWxvYWQgOiBvcHRpb25zLnJlbG9hZC5uYW1lKSArIFwiJ1wiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXRTdGF0ZSh0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCBpZGVudGlmaWVyLCBwYXJhbXMsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5nZXRDdXJyZW50UGF0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGdsb2JhbHMgPSB0aGlzLnJvdXRlci5nbG9iYWxzO1xuICAgICAgICB2YXIgbGF0ZXN0U3VjY2VzcyA9IGdsb2JhbHMuc3VjY2Vzc2Z1bFRyYW5zaXRpb25zLnBlZWtUYWlsKCk7XG4gICAgICAgIHZhciByb290UGF0aCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtuZXcgUGF0aE5vZGUoX3RoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkucm9vdCgpKV07IH07XG4gICAgICAgIHJldHVybiBsYXRlc3RTdWNjZXNzID8gbGF0ZXN0U3VjY2Vzcy50cmVlQ2hhbmdlcygpLnRvIDogcm9vdFBhdGgoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvdy1sZXZlbCBtZXRob2QgZm9yIHRyYW5zaXRpb25pbmcgdG8gYSBuZXcgc3RhdGUuXG4gICAgICpcbiAgICAgKiBUaGUgW1tnb11dIG1ldGhvZCAod2hpY2ggdXNlcyBgdHJhbnNpdGlvblRvYCBpbnRlcm5hbGx5KSBpcyByZWNvbW1lbmRlZCBpbiBtb3N0IHNpdHVhdGlvbnMuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogYGBganNcbiAgICAgKiBsZXQgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJ10pO1xuICAgICAqXG4gICAgICogYXBwLmNvbnRyb2xsZXIoJ2N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUpIHtcbiAgICAgKiAgICRzY29wZS5jaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgKiAgICAgJHN0YXRlLnRyYW5zaXRpb25UbygnY29udGFjdC5kZXRhaWwnKTtcbiAgICAgKiAgIH07XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG8gU3RhdGUgbmFtZSBvciBzdGF0ZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHRvUGFyYW1zIEEgbWFwIG9mIHRoZSBwYXJhbWV0ZXJzIHRoYXQgd2lsbCBiZSBzZW50IHRvIHRoZSBzdGF0ZSxcbiAgICAgKiAgICAgIHdpbGwgcG9wdWxhdGUgJHN0YXRlUGFyYW1zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRyYW5zaXRpb24gb3B0aW9uc1xuICAgICAqXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHJlcHJlc2VudGluZyB0aGUgc3RhdGUgb2YgdGhlIG5ldyB0cmFuc2l0aW9uLiBTZWUgW1tnb11dXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS50cmFuc2l0aW9uVG8gPSBmdW5jdGlvbiAodG8sIHRvUGFyYW1zLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0b1BhcmFtcyA9PT0gdm9pZCAwKSB7IHRvUGFyYW1zID0ge307IH1cbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICAgICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyO1xuICAgICAgICB2YXIgZ2xvYmFscyA9IHJvdXRlci5nbG9iYWxzO1xuICAgICAgICBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgZGVmYXVsdFRyYW5zT3B0cyk7XG4gICAgICAgIHZhciBnZXRDdXJyZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGdsb2JhbHMudHJhbnNpdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgb3B0aW9ucyA9IGV4dGVuZChvcHRpb25zLCB7IGN1cnJlbnQ6IGdldEN1cnJlbnQgfSk7XG4gICAgICAgIHZhciByZWYgPSB0aGlzLnRhcmdldCh0bywgdG9QYXJhbXMsIG9wdGlvbnMpO1xuICAgICAgICB2YXIgY3VycmVudFBhdGggPSB0aGlzLmdldEN1cnJlbnRQYXRoKCk7XG4gICAgICAgIGlmICghcmVmLmV4aXN0cygpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZUludmFsaWRUYXJnZXRTdGF0ZShjdXJyZW50UGF0aCwgcmVmKTtcbiAgICAgICAgaWYgKCFyZWYudmFsaWQoKSlcbiAgICAgICAgICAgIHJldHVybiBzaWxlbnRSZWplY3Rpb24ocmVmLmVycm9yKCkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lhbCBoYW5kbGluZyBmb3IgSWdub3JlZCwgQWJvcnRlZCwgYW5kIFJlZGlyZWN0ZWQgdHJhbnNpdGlvbnNcbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIHNlbWFudGljcyBmb3IgdGhlIHRyYW5zaXRpb24ucnVuKCkgcHJvbWlzZSBhbmQgdGhlIFN0YXRlU2VydmljZS50cmFuc2l0aW9uVG8oKVxuICAgICAgICAgKiBwcm9taXNlIGRpZmZlci4gRm9yIGluc3RhbmNlLCB0aGUgcnVuKCkgcHJvbWlzZSBtYXkgYmUgcmVqZWN0ZWQgYmVjYXVzZSBpdCB3YXNcbiAgICAgICAgICogSUdOT1JFRCwgYnV0IHRoZSB0cmFuc2l0aW9uVG8oKSBwcm9taXNlIGlzIHJlc29sdmVkIGJlY2F1c2UgZnJvbSB0aGUgdXNlciBwZXJzcGVjdGl2ZVxuICAgICAgICAgKiBubyBlcnJvciBvY2N1cnJlZC4gIExpa2V3aXNlLCB0aGUgdHJhbnNpdGlvbi5ydW4oKSBwcm9taXNlIG1heSBiZSByZWplY3RlZCBiZWNhdXNlIG9mXG4gICAgICAgICAqIGEgUmVkaXJlY3QsIGJ1dCB0aGUgdHJhbnNpdGlvblRvKCkgcHJvbWlzZSBpcyBjaGFpbmVkIHRvIHRoZSBuZXcgVHJhbnNpdGlvbidzIHByb21pc2UuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlciA9IGZ1bmN0aW9uICh0cmFucykgeyByZXR1cm4gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZWplY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNMYXRlc3QgPSByb3V0ZXIuZ2xvYmFscy5sYXN0U3RhcnRlZFRyYW5zaXRpb25JZCA9PT0gdHJhbnMuJGlkO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci50eXBlID09PSBleHBvcnRzLlJlamVjdFR5cGUuSUdOT1JFRCkge1xuICAgICAgICAgICAgICAgICAgICBpc0xhdGVzdCAmJiByb3V0ZXIudXJsUm91dGVyLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBDb25zaWRlciBpZ25vcmVkIGBUcmFuc2l0aW9uLnJ1bigpYCBhcyBhIHN1Y2Nlc3NmdWwgYHRyYW5zaXRpb25Ub2BcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4oZ2xvYmFscy5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGRldGFpbCA9IGVycm9yLmRldGFpbDtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IudHlwZSA9PT0gZXhwb3J0cy5SZWplY3RUeXBlLlNVUEVSU0VERUQgJiYgZXJyb3IucmVkaXJlY3RlZCAmJiBkZXRhaWwgaW5zdGFuY2VvZiBUYXJnZXRTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBgVHJhbnNpdGlvbi5ydW4oKWAgd2FzIHJlZGlyZWN0ZWQsIGFsbG93IHRoZSBgdHJhbnNpdGlvblRvKClgIHByb21pc2UgdG8gcmVzb2x2ZSBzdWNjZXNzZnVsbHlcbiAgICAgICAgICAgICAgICAgICAgLy8gYnkgcmV0dXJuaW5nIHRoZSBwcm9taXNlIGZvciB0aGUgbmV3IChyZWRpcmVjdCkgYFRyYW5zaXRpb24ucnVuKClgLlxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVkaXJlY3QgPSB0cmFucy5yZWRpcmVjdChkZXRhaWwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QucnVuKCkuY2F0Y2gocmVqZWN0ZWRUcmFuc2l0aW9uSGFuZGxlcihyZWRpcmVjdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IudHlwZSA9PT0gZXhwb3J0cy5SZWplY3RUeXBlLkFCT1JURUQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNMYXRlc3QgJiYgcm91dGVyLnVybFJvdXRlci51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VzLiRxLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVycm9ySGFuZGxlciA9IF90aGlzLmRlZmF1bHRFcnJvckhhbmRsZXIoKTtcbiAgICAgICAgICAgIGVycm9ySGFuZGxlcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gc2VydmljZXMuJHEucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfTsgfTtcbiAgICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzLnJvdXRlci50cmFuc2l0aW9uU2VydmljZS5jcmVhdGUoY3VycmVudFBhdGgsIHJlZik7XG4gICAgICAgIHZhciB0cmFuc2l0aW9uVG9Qcm9taXNlID0gdHJhbnNpdGlvbi5ydW4oKS5jYXRjaChyZWplY3RlZFRyYW5zaXRpb25IYW5kbGVyKHRyYW5zaXRpb24pKTtcbiAgICAgICAgc2lsZW5jZVVuY2F1Z2h0SW5Qcm9taXNlKHRyYW5zaXRpb25Ub1Byb21pc2UpOyAvLyBpc3N1ZSAjMjY3NlxuICAgICAgICAvLyBSZXR1cm4gYSBwcm9taXNlIGZvciB0aGUgdHJhbnNpdGlvbiwgd2hpY2ggYWxzbyBoYXMgdGhlIHRyYW5zaXRpb24gb2JqZWN0IG9uIGl0LlxuICAgICAgICByZXR1cm4gZXh0ZW5kKHRyYW5zaXRpb25Ub1Byb21pc2UsIHsgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCBzdGF0ZSAqaXMqIHRoZSBwcm92aWRlZCBzdGF0ZVxuICAgICAqXG4gICAgICogU2ltaWxhciB0byBbW2luY2x1ZGVzXV0gYnV0IG9ubHkgY2hlY2tzIGZvciB0aGUgZnVsbCBzdGF0ZSBuYW1lLlxuICAgICAqIElmIHBhcmFtcyBpcyBzdXBwbGllZCB0aGVuIGl0IHdpbGwgYmUgdGVzdGVkIGZvciBzdHJpY3QgZXF1YWxpdHkgYWdhaW5zdCB0aGUgY3VycmVudFxuICAgICAqIGFjdGl2ZSBwYXJhbXMgb2JqZWN0LCBzbyBhbGwgcGFyYW1zIG11c3QgbWF0Y2ggd2l0aCBub25lIG1pc3NpbmcgYW5kIG5vIGV4dHJhcy5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZS4kY3VycmVudC5uYW1lID0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSc7XG4gICAgICpcbiAgICAgKiAvLyBhYnNvbHV0ZSBuYW1lXG4gICAgICogJHN0YXRlLmlzKCdjb250YWN0LmRldGFpbHMuaXRlbScpOyAvLyByZXR1cm5zIHRydWVcbiAgICAgKiAkc3RhdGUuaXMoY29udGFjdERldGFpbEl0ZW1TdGF0ZU9iamVjdCk7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogLy8gcmVsYXRpdmUgbmFtZSAoLiBhbmQgXiksIHR5cGljYWxseSBmcm9tIGEgdGVtcGxhdGVcbiAgICAgKiAvLyBFLmcuIGZyb20gdGhlICdjb250YWN0cy5kZXRhaWxzJyB0ZW1wbGF0ZVxuICAgICAqIGBgYGh0bWxcbiAgICAgKiA8ZGl2IG5nLWNsYXNzPVwie2hpZ2hsaWdodGVkOiAkc3RhdGUuaXMoJy5pdGVtJyl9XCI+SXRlbTwvZGl2PlxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIFRoZSBzdGF0ZSBuYW1lIChhYnNvbHV0ZSBvciByZWxhdGl2ZSkgb3Igc3RhdGUgb2JqZWN0IHlvdSdkIGxpa2UgdG8gY2hlY2suXG4gICAgICogQHBhcmFtIHBhcmFtcyBBIHBhcmFtIG9iamVjdCwgZS5nLiBge3NlY3Rpb25JZDogc2VjdGlvbi5pZH1gLCB0aGF0IHlvdSdkIGxpa2VcbiAgICAgKiB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICogICAtIGByZWxhdGl2ZWA6IElmIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSBuYW1lIGFuZCBgb3B0aW9ucy5yZWxhdGl2ZWAgaXMgc2V0LCAuaXMgd2lsbFxuICAgICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIHRydWUgaWYgaXQgaXMgdGhlIHN0YXRlLlxuICAgICAqL1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIHBhcmFtcywgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgeyByZWxhdGl2ZTogdGhpcy4kY3VycmVudCB9KTtcbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5yb3V0ZXIuc3RhdGVSZWdpc3RyeS5tYXRjaGVyLmZpbmQoc3RhdGVPck5hbWUsIG9wdGlvbnMucmVsYXRpdmUpO1xuICAgICAgICBpZiAoIWlzRGVmaW5lZChzdGF0ZSkpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy4kY3VycmVudCAhPT0gc3RhdGUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghcGFyYW1zKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHZhciBzY2hlbWEgPSBzdGF0ZS5wYXJhbWV0ZXJzKHsgaW5oZXJpdDogdHJ1ZSwgbWF0Y2hpbmdLZXlzOiBwYXJhbXMgfSk7XG4gICAgICAgIHJldHVybiBQYXJhbS5lcXVhbHMoc2NoZW1hLCBQYXJhbS52YWx1ZXMoc2NoZW1hLCBwYXJhbXMpLCB0aGlzLnBhcmFtcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgc3RhdGUgKmluY2x1ZGVzKiB0aGUgcHJvdmlkZWQgc3RhdGVcbiAgICAgKlxuICAgICAqIEEgbWV0aG9kIHRvIGRldGVybWluZSBpZiB0aGUgY3VycmVudCBhY3RpdmUgc3RhdGUgaXMgZXF1YWwgdG8gb3IgaXMgdGhlIGNoaWxkIG9mIHRoZVxuICAgICAqIHN0YXRlIHN0YXRlTmFtZS4gSWYgYW55IHBhcmFtcyBhcmUgcGFzc2VkIHRoZW4gdGhleSB3aWxsIGJlIHRlc3RlZCBmb3IgYSBtYXRjaCBhcyB3ZWxsLlxuICAgICAqIE5vdCBhbGwgdGhlIHBhcmFtZXRlcnMgbmVlZCB0byBiZSBwYXNzZWQsIGp1c3QgdGhlIG9uZXMgeW91J2QgbGlrZSB0byB0ZXN0IGZvciBlcXVhbGl0eS5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZSB3aGVuIGAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbSdgXG4gICAgICogYGBganNcbiAgICAgKiAvLyBVc2luZyBwYXJ0aWFsIG5hbWVzXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHNcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHNcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImNvbnRhY3RzLmRldGFpbHMuaXRlbVwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiY29udGFjdHMubGlzdFwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcImFib3V0XCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAjIyMjIEdsb2IgRXhhbXBsZXMgd2hlbiBgKiAkc3RhdGUuJGN1cnJlbnQubmFtZSA9PT0gJ2NvbnRhY3RzLmRldGFpbHMuaXRlbS51cmwnYDpcbiAgICAgKiBgYGBqc1xuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qLipcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiKiouaXRlbS4qKlwiKTsgLy8gcmV0dXJucyB0cnVlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiKi5kZXRhaWxzLml0ZW0udXJsXCIpOyAvLyByZXR1cm5zIHRydWVcbiAgICAgKiAkc3RhdGUuaW5jbHVkZXMoXCIqLmRldGFpbHMuKi51cmxcIik7IC8vIHJldHVybnMgdHJ1ZVxuICAgICAqICRzdGF0ZS5pbmNsdWRlcyhcIiouZGV0YWlscy4qXCIpOyAvLyByZXR1cm5zIGZhbHNlXG4gICAgICogJHN0YXRlLmluY2x1ZGVzKFwiaXRlbS4qKlwiKTsgLy8gcmV0dXJucyBmYWxzZVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIEEgcGFydGlhbCBuYW1lLCByZWxhdGl2ZSBuYW1lLCBnbG9iIHBhdHRlcm4sXG4gICAgICogICBvciBzdGF0ZSBvYmplY3QgdG8gYmUgc2VhcmNoZWQgZm9yIHdpdGhpbiB0aGUgY3VycmVudCBzdGF0ZSBuYW1lLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQSBwYXJhbSBvYmplY3QsIGUuZy4gYHtzZWN0aW9uSWQ6IHNlY3Rpb24uaWR9YCxcbiAgICAgKiAgIHRoYXQgeW91J2QgbGlrZSB0byB0ZXN0IGFnYWluc3QgdGhlIGN1cnJlbnQgYWN0aXZlIHN0YXRlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFuIG9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICogICAtIGByZWxhdGl2ZWA6IElmIGBzdGF0ZU9yTmFtZWAgaXMgYSByZWxhdGl2ZSBzdGF0ZSBuYW1lIGFuZCBgb3B0aW9ucy5yZWxhdGl2ZWAgaXMgc2V0LCAuaXMgd2lsbFxuICAgICAqICAgICB0ZXN0IHJlbGF0aXZlIHRvIGBvcHRpb25zLnJlbGF0aXZlYCBzdGF0ZSAob3IgbmFtZSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGl0IGRvZXMgaW5jbHVkZSB0aGUgc3RhdGVcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHsgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQgfSk7XG4gICAgICAgIHZhciBnbG9iID0gaXNTdHJpbmcoc3RhdGVPck5hbWUpICYmIEdsb2IuZnJvbVN0cmluZyhzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmIChnbG9iKSB7XG4gICAgICAgICAgICBpZiAoIWdsb2IubWF0Y2hlcyh0aGlzLiRjdXJyZW50Lm5hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHN0YXRlT3JOYW1lID0gdGhpcy4kY3VycmVudC5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKSwgaW5jbHVkZSA9IHRoaXMuJGN1cnJlbnQuaW5jbHVkZXM7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKHN0YXRlKSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghaXNEZWZpbmVkKGluY2x1ZGVbc3RhdGUubmFtZV0pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB2YXIgc2NoZW1hID0gc3RhdGUucGFyYW1ldGVycyh7IGluaGVyaXQ6IHRydWUsIG1hdGNoaW5nS2V5czogcGFyYW1zIH0pO1xuICAgICAgICByZXR1cm4gUGFyYW0uZXF1YWxzKHNjaGVtYSwgUGFyYW0udmFsdWVzKHNjaGVtYSwgcGFyYW1zKSwgdGhpcy5wYXJhbXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgVVJMIGZvciBhIHN0YXRlIGFuZCBwYXJhbWV0ZXJzXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSB1cmwgZm9yIHRoZSBnaXZlbiBzdGF0ZSBwb3B1bGF0ZWQgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1zLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogZXhwZWN0KCRzdGF0ZS5ocmVmKFwiYWJvdXQucGVyc29uXCIsIHsgcGVyc29uOiBcImJvYlwiIH0pKS50b0VxdWFsKFwiL2Fib3V0L2JvYlwiKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZU9yTmFtZSBUaGUgc3RhdGUgbmFtZSBvciBzdGF0ZSBvYmplY3QgeW91J2QgbGlrZSB0byBnZW5lcmF0ZSBhIHVybCBmcm9tLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgQW4gb2JqZWN0IG9mIHBhcmFtZXRlciB2YWx1ZXMgdG8gZmlsbCB0aGUgc3RhdGUncyByZXF1aXJlZCBwYXJhbWV0ZXJzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0LiBUaGUgb3B0aW9ucyBhcmU6XG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBjb21waWxlZCBzdGF0ZSB1cmxcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmhyZWYgPSBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIHBhcmFtcywgb3B0aW9ucykge1xuICAgICAgICB2YXIgZGVmYXVsdEhyZWZPcHRzID0ge1xuICAgICAgICAgICAgbG9zc3k6IHRydWUsXG4gICAgICAgICAgICBpbmhlcml0OiB0cnVlLFxuICAgICAgICAgICAgYWJzb2x1dGU6IGZhbHNlLFxuICAgICAgICAgICAgcmVsYXRpdmU6IHRoaXMuJGN1cnJlbnQsXG4gICAgICAgIH07XG4gICAgICAgIG9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0SHJlZk9wdHMpO1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnkubWF0Y2hlci5maW5kKHN0YXRlT3JOYW1lLCBvcHRpb25zLnJlbGF0aXZlKTtcbiAgICAgICAgaWYgKCFpc0RlZmluZWQoc3RhdGUpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLmluaGVyaXQpXG4gICAgICAgICAgICBwYXJhbXMgPSB0aGlzLnBhcmFtcy4kaW5oZXJpdChwYXJhbXMsIHRoaXMuJGN1cnJlbnQsIHN0YXRlKTtcbiAgICAgICAgdmFyIG5hdiA9IChzdGF0ZSAmJiBvcHRpb25zLmxvc3N5KSA/IHN0YXRlLm5hdmlnYWJsZSA6IHN0YXRlO1xuICAgICAgICBpZiAoIW5hdiB8fCBuYXYudXJsID09PSB1bmRlZmluZWQgfHwgbmF2LnVybCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucm91dGVyLnVybFJvdXRlci5ocmVmKG5hdi51cmwsIHBhcmFtcywge1xuICAgICAgICAgICAgYWJzb2x1dGU6IG9wdGlvbnMuYWJzb2x1dGUsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBvciBnZXRzIHRoZSBkZWZhdWx0IFtbdHJhbnNpdGlvblRvXV0gZXJyb3IgaGFuZGxlci5cbiAgICAgKlxuICAgICAqIFRoZSBlcnJvciBoYW5kbGVyIGlzIGNhbGxlZCB3aGVuIGEgW1tUcmFuc2l0aW9uXV0gaXMgcmVqZWN0ZWQgb3Igd2hlbiBhbnkgZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHRoZSBUcmFuc2l0aW9uLlxuICAgICAqIFRoaXMgaW5jbHVkZXMgZXJyb3JzIGNhdXNlZCBieSByZXNvbHZlcyBhbmQgdHJhbnNpdGlvbiBob29rcy5cbiAgICAgKlxuICAgICAqIE5vdGU6XG4gICAgICogVGhpcyBoYW5kbGVyIGRvZXMgbm90IHJlY2VpdmUgY2VydGFpbiBUcmFuc2l0aW9uIHJlamVjdGlvbnMuXG4gICAgICogUmVkaXJlY3RlZCBhbmQgSWdub3JlZCBUcmFuc2l0aW9ucyBhcmUgbm90IGNvbnNpZGVyZWQgdG8gYmUgZXJyb3JzIGJ5IFtbU3RhdGVTZXJ2aWNlLnRyYW5zaXRpb25Ub11dLlxuICAgICAqXG4gICAgICogVGhlIGJ1aWx0LWluIGRlZmF1bHQgZXJyb3IgaGFuZGxlciBsb2dzIHRoZSBlcnJvciB0byB0aGUgY29uc29sZS5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gcHJvdmlkZSB5b3VyIG93biBjdXN0b20gaGFuZGxlci5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHN0YXRlU2VydmljZS5kZWZhdWx0RXJyb3JIYW5kbGVyKGZ1bmN0aW9uKCkge1xuICAgICAqICAgLy8gRG8gbm90IGxvZyB0cmFuc2l0aW9uVG8gZXJyb3JzXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaGFuZGxlciBhIGdsb2JhbCBlcnJvciBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICogQHJldHVybnMgdGhlIGN1cnJlbnQgZ2xvYmFsIGVycm9yIGhhbmRsZXJcbiAgICAgKi9cbiAgICBTdGF0ZVNlcnZpY2UucHJvdG90eXBlLmRlZmF1bHRFcnJvckhhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmYXVsdEVycm9ySGFuZGxlciA9IGhhbmRsZXIgfHwgdGhpcy5fZGVmYXVsdEVycm9ySGFuZGxlcjtcbiAgICB9O1xuICAgIFN0YXRlU2VydmljZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBiYXNlKSB7XG4gICAgICAgIHZhciByZWcgPSB0aGlzLnJvdXRlci5zdGF0ZVJlZ2lzdHJ5O1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiByZWcuZ2V0KCk7XG4gICAgICAgIHJldHVybiByZWcuZ2V0KHN0YXRlT3JOYW1lLCBiYXNlIHx8IHRoaXMuJGN1cnJlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTGF6eSBsb2FkcyBhIHN0YXRlXG4gICAgICpcbiAgICAgKiBFeHBsaWNpdGx5IHJ1bnMgYSBzdGF0ZSdzIFtbU3RhdGVEZWNsYXJhdGlvbi5sYXp5TG9hZF1dIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXRlT3JOYW1lIHRoZSBzdGF0ZSB0aGF0IHNob3VsZCBiZSBsYXp5IGxvYWRlZFxuICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHRoZSBvcHRpb25hbCBUcmFuc2l0aW9uIGNvbnRleHQgdG8gdXNlIChpZiB0aGUgbGF6eUxvYWQgZnVuY3Rpb24gcmVxdWlyZXMgYW4gaW5qZWN0b3IsIGV0YylcbiAgICAgKiBOb3RlOiBJZiBubyB0cmFuc2l0aW9uIGlzIHByb3ZpZGVkLCBhIG5vb3AgdHJhbnNpdGlvbiBpcyBjcmVhdGVkIHVzaW5nIHRoZSBmcm9tIHRoZSBjdXJyZW50IHN0YXRlIHRvIHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAqIFRoaXMgbm9vcCB0cmFuc2l0aW9uIGlzIG5vdCBhY3R1YWxseSBydW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIHByb21pc2UgdG8gbGF6eSBsb2FkXG4gICAgICovXG4gICAgU3RhdGVTZXJ2aWNlLnByb3RvdHlwZS5sYXp5TG9hZCA9IGZ1bmN0aW9uIChzdGF0ZU9yTmFtZSwgdHJhbnNpdGlvbikge1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLmdldChzdGF0ZU9yTmFtZSk7XG4gICAgICAgIGlmICghc3RhdGUgfHwgIXN0YXRlLmxhenlMb2FkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gbm90IGxhenkgbG9hZCAnICsgc3RhdGVPck5hbWUpO1xuICAgICAgICB2YXIgY3VycmVudFBhdGggPSB0aGlzLmdldEN1cnJlbnRQYXRoKCk7XG4gICAgICAgIHZhciB0YXJnZXQgPSBQYXRoVXRpbHMubWFrZVRhcmdldFN0YXRlKHRoaXMucm91dGVyLnN0YXRlUmVnaXN0cnksIGN1cnJlbnRQYXRoKTtcbiAgICAgICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gfHwgdGhpcy5yb3V0ZXIudHJhbnNpdGlvblNlcnZpY2UuY3JlYXRlKGN1cnJlbnRQYXRoLCB0YXJnZXQpO1xuICAgICAgICByZXR1cm4gbGF6eUxvYWRTdGF0ZSh0cmFuc2l0aW9uLCBzdGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3RhdGVTZXJ2aWNlO1xufSgpKTtcblxuLyoqXG4gKiAjIFRyYW5zaXRpb24gc3Vic3lzdGVtXG4gKlxuICogVGhpcyBtb2R1bGUgY29udGFpbnMgQVBJcyByZWxhdGVkIHRvIGEgVHJhbnNpdGlvbi5cbiAqXG4gKiBTZWU6XG4gKiAtIFtbVHJhbnNpdGlvblNlcnZpY2VdXVxuICogLSBbW1RyYW5zaXRpb25dXVxuICogLSBbW0hvb2tGbl1dLCBbW1RyYW5zaXRpb25Ib29rRm5dXSwgW1tUcmFuc2l0aW9uU3RhdGVIb29rRm5dXSwgW1tIb29rTWF0Y2hDcml0ZXJpYV1dLCBbW0hvb2tSZXN1bHRdXVxuICpcbiAqIEBjb3JlYXBpXG4gKiBAcHJlZmVycmVkXG4gKiBAbW9kdWxlIHRyYW5zaXRpb25cbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cblxuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdmFuaWxsYVxuICovXG4vKiogKi9cbi8qKlxuICogQW4gYW5ndWxhcjEtbGlrZSBwcm9taXNlIGFwaVxuICpcbiAqIFRoaXMgb2JqZWN0IGltcGxlbWVudHMgZm91ciBtZXRob2RzIHNpbWlsYXIgdG8gdGhlXG4gKiBbYW5ndWxhciAxIHByb21pc2UgYXBpXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvbmcvc2VydmljZS8kcSlcbiAqXG4gKiBVSS1Sb3V0ZXIgZXZvbHZlZCBmcm9tIGFuIGFuZ3VsYXIgMSBsaWJyYXJ5IHRvIGEgZnJhbWV3b3JrIGFnbm9zdGljIGxpYnJhcnkuXG4gKiBIb3dldmVyLCBzb21lIG9mIHRoZSBgQHVpcm91dGVyL2NvcmVgIGNvZGUgdXNlcyB0aGVzZSBuZzEgc3R5bGUgQVBJcyB0byBzdXBwb3J0IG5nMSBzdHlsZSBkZXBlbmRlbmN5IGluamVjdGlvbi5cbiAqXG4gKiBUaGlzIEFQSSBwcm92aWRlcyBuYXRpdmUgRVM2IHByb21pc2Ugc3VwcG9ydCB3cmFwcGVkIGFzIGEgJHEtbGlrZSBBUEkuXG4gKiBJbnRlcm5hbGx5LCBVSS1Sb3V0ZXIgdXNlcyB0aGlzICRxIG9iamVjdCB0byBwZXJmb3JtIHByb21pc2Ugb3BlcmF0aW9ucy5cbiAqIFRoZSBgYW5ndWxhci11aS1yb3V0ZXJgICh1aS1yb3V0ZXIgZm9yIGFuZ3VsYXIgMSkgdXNlcyB0aGUgJHEgQVBJIHByb3ZpZGVkIGJ5IGFuZ3VsYXIuXG4gKlxuICogJHEtbGlrZSBwcm9taXNlIGFwaVxuICovXG52YXIgJHEgPSB7XG4gICAgLyoqIE5vcm1hbGl6ZXMgYSB2YWx1ZSBhcyBhIHByb21pc2UgKi9cbiAgICB3aGVuOiBmdW5jdGlvbiAodmFsKSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHJldHVybiByZXNvbHZlKHZhbCk7IH0pOyB9LFxuICAgIC8qKiBOb3JtYWxpemVzIGEgdmFsdWUgYXMgYSBwcm9taXNlIHJlamVjdGlvbiAqL1xuICAgIHJlamVjdDogZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyByZWplY3QodmFsKTsgfSk7IH0sXG4gICAgLyoqIEByZXR1cm5zIGEgZGVmZXJyZWQgb2JqZWN0LCB3aGljaCBoYXMgYHJlc29sdmVgIGFuZCBgcmVqZWN0YCBmdW5jdGlvbnMgKi9cbiAgICBkZWZlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSB7fTtcbiAgICAgICAgZGVmZXJyZWQucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkO1xuICAgIH0sXG4gICAgLyoqIExpa2UgUHJvbWlzZS5hbGwoKSwgYnV0IGFsc28gc3VwcG9ydHMgb2JqZWN0IGtleS9wcm9taXNlIG5vdGF0aW9uIGxpa2UgJHEgKi9cbiAgICBhbGw6IGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgICAgICBpZiAoaXNBcnJheShwcm9taXNlcykpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JqZWN0KHByb21pc2VzKSkge1xuICAgICAgICAgICAgLy8gQ29udmVydCBwcm9taXNlcyBtYXAgdG8gcHJvbWlzZXMgYXJyYXkuXG4gICAgICAgICAgICAvLyBXaGVuIGVhY2ggcHJvbWlzZSByZXNvbHZlcywgbWFwIGl0IHRvIGEgdHVwbGUgeyBrZXk6IGtleSwgdmFsOiB2YWwgfVxuICAgICAgICAgICAgdmFyIGNoYWluID0gT2JqZWN0LmtleXMocHJvbWlzZXMpXG4gICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBwcm9taXNlc1trZXldLnRoZW4oZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gKHsga2V5OiBrZXksIHZhbDogdmFsIH0pOyB9KTsgfSk7XG4gICAgICAgICAgICAvLyBUaGVuIHdhaXQgZm9yIGFsbCBwcm9taXNlcyB0byByZXNvbHZlLCBhbmQgY29udmVydCB0aGVtIGJhY2sgdG8gYW4gb2JqZWN0XG4gICAgICAgICAgICByZXR1cm4gJHEuYWxsKGNoYWluKS50aGVuKGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCB0dXBsZSkgeyBhY2NbdHVwbGUua2V5XSA9IHR1cGxlLnZhbDsgcmV0dXJuIGFjYzsgfSwge30pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxufTtcblxuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdmFuaWxsYVxuICovXG4vKiogKi9cbi8vIGdsb2JhbGx5IGF2YWlsYWJsZSBpbmplY3RhYmxlc1xudmFyIGdsb2JhbHMgPSB7fTtcbnZhciBTVFJJUF9DT01NRU5UUyA9IC8oKFxcL1xcLy4qJCl8KFxcL1xcKltcXHNcXFNdKj9cXCpcXC8pKS9tZztcbnZhciBBUkdVTUVOVF9OQU1FUyA9IC8oW15cXHMsXSspL2c7XG4vKipcbiAqIEEgYmFzaWMgYW5ndWxhcjEtbGlrZSBpbmplY3RvciBhcGlcbiAqXG4gKiBUaGlzIG9iamVjdCBpbXBsZW1lbnRzIGZvdXIgbWV0aG9kcyBzaW1pbGFyIHRvIHRoZVxuICogW2FuZ3VsYXIgMSBkZXBlbmRlbmN5IGluamVjdG9yXShodHRwczovL2RvY3MuYW5ndWxhcmpzLm9yZy9hcGkvYXV0by9zZXJ2aWNlLyRpbmplY3RvcilcbiAqXG4gKiBVSS1Sb3V0ZXIgZXZvbHZlZCBmcm9tIGFuIGFuZ3VsYXIgMSBsaWJyYXJ5IHRvIGEgZnJhbWV3b3JrIGFnbm9zdGljIGxpYnJhcnkuXG4gKiBIb3dldmVyLCBzb21lIG9mIHRoZSBgQHVpcm91dGVyL2NvcmVgIGNvZGUgdXNlcyB0aGVzZSBuZzEgc3R5bGUgQVBJcyB0byBzdXBwb3J0IG5nMSBzdHlsZSBkZXBlbmRlbmN5IGluamVjdGlvbi5cbiAqXG4gKiBUaGlzIG9iamVjdCBwcm92aWRlcyBhIG5haXZlIGltcGxlbWVudGF0aW9uIG9mIGEgZ2xvYmFsbHkgc2NvcGVkIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHN5c3RlbS5cbiAqIEl0IHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgREkgYXBwcm9hY2hlczpcbiAqXG4gKiAjIyMgRnVuY3Rpb24gcGFyYW1ldGVyIG5hbWVzXG4gKlxuICogQSBmdW5jdGlvbidzIGAudG9TdHJpbmcoKWAgaXMgY2FsbGVkLCBhbmQgdGhlIHBhcmFtZXRlciBuYW1lcyBhcmUgcGFyc2VkLlxuICogVGhpcyBvbmx5IHdvcmtzIHdoZW4gdGhlIHBhcmFtZXRlciBuYW1lcyBhcmVuJ3QgXCJtYW5nbGVkXCIgYnkgYSBtaW5pZmllciBzdWNoIGFzIFVnbGlmeUpTLlxuICpcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbiBpbmplY3RlZEZ1bmN0aW9uKEZvb1NlcnZpY2UsIEJhclNlcnZpY2UpIHtcbiAqICAgLy8gRm9vU2VydmljZSBhbmQgQmFyU2VydmljZSBhcmUgaW5qZWN0ZWRcbiAqIH1cbiAqIGBgYFxuICpcbiAqICMjIyBGdW5jdGlvbiBhbm5vdGF0aW9uXG4gKlxuICogQSBmdW5jdGlvbiBtYXkgYmUgYW5ub3RhdGVkIHdpdGggYW4gYXJyYXkgb2YgZGVwZW5kZW5jeSBuYW1lcyBhcyB0aGUgYCRpbmplY3RgIHByb3BlcnR5LlxuICpcbiAqIGBgYGpzXG4gKiBpbmplY3RlZEZ1bmN0aW9uLiRpbmplY3QgPSBbICdGb29TZXJ2aWNlJywgJ0JhclNlcnZpY2UnIF07XG4gKiBmdW5jdGlvbiBpbmplY3RlZEZ1bmN0aW9uKGZzLCBicykge1xuICogICAvLyBGb29TZXJ2aWNlIGFuZCBCYXJTZXJ2aWNlIGFyZSBpbmplY3RlZCBhcyBmcyBhbmQgYnMgcGFyYW1ldGVyc1xuICogfVxuICogYGBgXG4gKlxuICogIyMjIEFycmF5IG5vdGF0aW9uXG4gKlxuICogQW4gYXJyYXkgcHJvdmlkZXMgdGhlIG5hbWVzIG9mIHRoZSBkZXBlbmRlbmNpZXMgdG8gaW5qZWN0IChhcyBzdHJpbmdzKS5cbiAqIFRoZSBmdW5jdGlvbiBpcyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBhcnJheS5cbiAqXG4gKiBgYGBqc1xuICogWyAnRm9vU2VydmljZScsICdCYXJTZXJ2aWNlJywgZnVuY3Rpb24gKGZzLCBicykge1xuICogICAvLyBGb29TZXJ2aWNlIGFuZCBCYXJTZXJ2aWNlIGFyZSBpbmplY3RlZCBhcyBmcyBhbmQgYnMgcGFyYW1ldGVyc1xuICogfV1cbiAqIGBgYFxuICpcbiAqIEB0eXBlIHskSW5qZWN0b3JMaWtlfVxuICovXG52YXIgJGluamVjdG9yID0ge1xuICAgIC8qKiBHZXRzIGFuIG9iamVjdCBmcm9tIERJIGJhc2VkIG9uIGEgc3RyaW5nIHRva2VuICovXG4gICAgZ2V0OiBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gZ2xvYmFsc1tuYW1lXTsgfSxcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGFuIG9iamVjdCBuYW1lZCBgbmFtZWAgZXhpc3RzIGluIGdsb2JhbCBESSAqL1xuICAgIGhhczogZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuICRpbmplY3Rvci5nZXQobmFtZSkgIT0gbnVsbDsgfSxcbiAgICAvKipcbiAgICAgKiBJbmplY3RzIGEgZnVuY3Rpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmbiB0aGUgZnVuY3Rpb24gdG8gaW5qZWN0XG4gICAgICogQHBhcmFtIGNvbnRleHQgdGhlIGZ1bmN0aW9uJ3MgYHRoaXNgIGJpbmRpbmdcbiAgICAgKiBAcGFyYW0gbG9jYWxzIEFuIG9iamVjdCB3aXRoIGFkZGl0aW9uYWwgREkgdG9rZW5zIGFuZCB2YWx1ZXMsIHN1Y2ggYXMgYHsgc29tZVRva2VuOiB7IGZvbzogMSB9IH1gXG4gICAgICovXG4gICAgaW52b2tlOiBmdW5jdGlvbiAoZm4sIGNvbnRleHQsIGxvY2Fscykge1xuICAgICAgICB2YXIgYWxsID0gZXh0ZW5kKHt9LCBnbG9iYWxzLCBsb2NhbHMgfHwge30pO1xuICAgICAgICB2YXIgcGFyYW1zID0gJGluamVjdG9yLmFubm90YXRlKGZuKTtcbiAgICAgICAgdmFyIGVuc3VyZUV4aXN0ID0gYXNzZXJ0UHJlZGljYXRlKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGFsbC5oYXNPd25Qcm9wZXJ0eShrZXkpOyB9LCBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBcIkRJIGNhbid0IGZpbmQgaW5qZWN0YWJsZTogJ1wiICsga2V5ICsgXCInXCI7IH0pO1xuICAgICAgICB2YXIgYXJncyA9IHBhcmFtcy5maWx0ZXIoZW5zdXJlRXhpc3QpLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gYWxsW3hdOyB9KTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKVxuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gZm4uc2xpY2UoLTEpWzBdLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uJ3MgZGVwZW5kZW5jaWVzXG4gICAgICpcbiAgICAgKiBBbmFseXplcyBhIGZ1bmN0aW9uIChvciBhcnJheSkgYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgREkgdG9rZW5zIHRoYXQgdGhlIGZ1bmN0aW9uIHJlcXVpcmVzLlxuICAgICAqIEByZXR1cm4gYW4gYXJyYXkgb2YgYHN0cmluZ2BzXG4gICAgICovXG4gICAgYW5ub3RhdGU6IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBpZiAoIWlzSW5qZWN0YWJsZShmbikpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgYW4gaW5qZWN0YWJsZSBmdW5jdGlvbjogXCIgKyBmbik7XG4gICAgICAgIGlmIChmbiAmJiBmbi4kaW5qZWN0KVxuICAgICAgICAgICAgcmV0dXJuIGZuLiRpbmplY3Q7XG4gICAgICAgIGlmIChpc0FycmF5KGZuKSlcbiAgICAgICAgICAgIHJldHVybiBmbi5zbGljZSgwLCAtMSk7XG4gICAgICAgIHZhciBmblN0ciA9IGZuLnRvU3RyaW5nKCkucmVwbGFjZShTVFJJUF9DT01NRU5UUywgJycpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gZm5TdHIuc2xpY2UoZm5TdHIuaW5kZXhPZignKCcpICsgMSwgZm5TdHIuaW5kZXhPZignKScpKS5tYXRjaChBUkdVTUVOVF9OQU1FUyk7XG4gICAgICAgIHJldHVybiByZXN1bHQgfHwgW107XG4gICAgfSxcbn07XG5cbi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG52YXIga2V5VmFsc1RvT2JqZWN0UiA9IGZ1bmN0aW9uIChhY2N1bSwgX2EpIHtcbiAgICB2YXIga2V5ID0gX2FbMF0sIHZhbCA9IF9hWzFdO1xuICAgIGlmICghYWNjdW0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBhY2N1bVtrZXldID0gdmFsO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0FycmF5KGFjY3VtW2tleV0pKSB7XG4gICAgICAgIGFjY3VtW2tleV0ucHVzaCh2YWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYWNjdW1ba2V5XSA9IFthY2N1bVtrZXldLCB2YWxdO1xuICAgIH1cbiAgICByZXR1cm4gYWNjdW07XG59O1xudmFyIGdldFBhcmFtcyA9IGZ1bmN0aW9uIChxdWVyeVN0cmluZykge1xuICAgIHJldHVybiBxdWVyeVN0cmluZy5zcGxpdCgnJicpLmZpbHRlcihpZGVudGl0eSkubWFwKHNwbGl0RXF1YWwpLnJlZHVjZShrZXlWYWxzVG9PYmplY3RSLCB7fSk7XG59O1xuZnVuY3Rpb24gcGFyc2VVcmwkMSh1cmwpIHtcbiAgICB2YXIgb3JFbXB0eVN0cmluZyA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4IHx8ICcnOyB9O1xuICAgIHZhciBfYSA9IHNwbGl0SGFzaCh1cmwpLm1hcChvckVtcHR5U3RyaW5nKSwgYmVmb3JlaGFzaCA9IF9hWzBdLCBoYXNoID0gX2FbMV07XG4gICAgdmFyIF9iID0gc3BsaXRRdWVyeShiZWZvcmVoYXNoKS5tYXAob3JFbXB0eVN0cmluZyksIHBhdGggPSBfYlswXSwgc2VhcmNoID0gX2JbMV07XG4gICAgcmV0dXJuIHsgcGF0aDogcGF0aCwgc2VhcmNoOiBzZWFyY2gsIGhhc2g6IGhhc2gsIHVybDogdXJsIH07XG59XG52YXIgYnVpbGRVcmwgPSBmdW5jdGlvbiAobG9jKSB7XG4gICAgdmFyIHBhdGggPSBsb2MucGF0aCgpO1xuICAgIHZhciBzZWFyY2hPYmplY3QgPSBsb2Muc2VhcmNoKCk7XG4gICAgdmFyIGhhc2ggPSBsb2MuaGFzaCgpO1xuICAgIHZhciBzZWFyY2ggPSBPYmplY3Qua2V5cyhzZWFyY2hPYmplY3QpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBwYXJhbSA9IHNlYXJjaE9iamVjdFtrZXldO1xuICAgICAgICB2YXIgdmFscyA9IGlzQXJyYXkocGFyYW0pID8gcGFyYW0gOiBbcGFyYW1dO1xuICAgICAgICByZXR1cm4gdmFscy5tYXAoZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4ga2V5ICsgJz0nICsgdmFsOyB9KTtcbiAgICB9KS5yZWR1Y2UodW5uZXN0UiwgW10pLmpvaW4oJyYnKTtcbiAgICByZXR1cm4gcGF0aCArIChzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJykgKyAoaGFzaCA/ICcjJyArIGhhc2ggOiAnJyk7XG59O1xuZnVuY3Rpb24gbG9jYXRpb25QbHVnaW5GYWN0b3J5KG5hbWUsIGlzSHRtbDUsIHNlcnZpY2VDbGFzcywgY29uZmlndXJhdGlvbkNsYXNzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh1aVJvdXRlcikge1xuICAgICAgICB2YXIgc2VydmljZSA9IHVpUm91dGVyLmxvY2F0aW9uU2VydmljZSA9IG5ldyBzZXJ2aWNlQ2xhc3ModWlSb3V0ZXIpO1xuICAgICAgICB2YXIgY29uZmlndXJhdGlvbiA9IHVpUm91dGVyLmxvY2F0aW9uQ29uZmlnID0gbmV3IGNvbmZpZ3VyYXRpb25DbGFzcyh1aVJvdXRlciwgaXNIdG1sNSk7XG4gICAgICAgIGZ1bmN0aW9uIGRpc3Bvc2Uocm91dGVyKSB7XG4gICAgICAgICAgICByb3V0ZXIuZGlzcG9zZShzZXJ2aWNlKTtcbiAgICAgICAgICAgIHJvdXRlci5kaXNwb3NlKGNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IG5hbWU6IG5hbWUsIHNlcnZpY2U6IHNlcnZpY2UsIGNvbmZpZ3VyYXRpb246IGNvbmZpZ3VyYXRpb24sIGRpc3Bvc2U6IGRpc3Bvc2UgfTtcbiAgICB9O1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi8gLyoqICovXG4vKiogQSBiYXNlIGBMb2NhdGlvblNlcnZpY2VzYCAqL1xudmFyIEJhc2VMb2NhdGlvblNlcnZpY2VzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhc2VMb2NhdGlvblNlcnZpY2VzKHJvdXRlciwgZmlyZUFmdGVyVXBkYXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZmlyZUFmdGVyVXBkYXRlID0gZmlyZUFmdGVyVXBkYXRlO1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZ0KSB7IHJldHVybiBfdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7IHJldHVybiBjYihldnQpOyB9KTsgfTtcbiAgICAgICAgdGhpcy5oYXNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcGFyc2VVcmwkMShfdGhpcy5fZ2V0KCkpLmhhc2g7IH07XG4gICAgICAgIHRoaXMucGF0aCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHBhcnNlVXJsJDEoX3RoaXMuX2dldCgpKS5wYXRoOyB9O1xuICAgICAgICB0aGlzLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdldFBhcmFtcyhwYXJzZVVybCQxKF90aGlzLl9nZXQoKSkuc2VhcmNoKTsgfTtcbiAgICAgICAgdGhpcy5fbG9jYXRpb24gPSByb290LmxvY2F0aW9uO1xuICAgICAgICB0aGlzLl9oaXN0b3J5ID0gcm9vdC5oaXN0b3J5O1xuICAgIH1cbiAgICBCYXNlTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUudXJsID0gZnVuY3Rpb24gKHVybCwgcmVwbGFjZSkge1xuICAgICAgICBpZiAocmVwbGFjZSA9PT0gdm9pZCAwKSB7IHJlcGxhY2UgPSB0cnVlOyB9XG4gICAgICAgIGlmIChpc0RlZmluZWQodXJsKSAmJiB1cmwgIT09IHRoaXMuX2dldCgpKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXQobnVsbCwgbnVsbCwgdXJsLCByZXBsYWNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZpcmVBZnRlclVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgeyByZXR1cm4gY2IoeyB1cmw6IHVybCB9KTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1aWxkVXJsKHRoaXMpO1xuICAgIH07XG4gICAgQmFzZUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLm9uQ2hhbmdlID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGNiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlbW92ZUZyb20oX3RoaXMuX2xpc3RlbmVycywgY2IpOyB9O1xuICAgIH07XG4gICAgQmFzZUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XG4gICAgICAgIGRlcmVnQWxsKHRoaXMuX2xpc3RlbmVycyk7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUxvY2F0aW9uU2VydmljZXM7XG59KCkpO1xuXG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuLyoqIEEgYExvY2F0aW9uU2VydmljZXNgIHRoYXQgdXNlcyB0aGUgYnJvd3NlciBoYXNoIFwiI1wiIHRvIGdldC9zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gKi9cbnZhciBIYXNoTG9jYXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhIYXNoTG9jYXRpb25TZXJ2aWNlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEhhc2hMb2NhdGlvblNlcnZpY2Uocm91dGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJvdXRlciwgZmFsc2UpIHx8IHRoaXM7XG4gICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIF90aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cmltSGFzaFZhbCh0aGlzLl9sb2NhdGlvbi5oYXNoKTtcbiAgICB9O1xuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9zZXQgPSBmdW5jdGlvbiAoc3RhdGUsIHRpdGxlLCB1cmwsIHJlcGxhY2UpIHtcbiAgICAgICAgdGhpcy5fbG9jYXRpb24uaGFzaCA9IHVybDtcbiAgICB9O1xuICAgIEhhc2hMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocm91dGVyKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMsIHJvdXRlcik7XG4gICAgICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuX2xpc3RlbmVyKTtcbiAgICB9O1xuICAgIHJldHVybiBIYXNoTG9jYXRpb25TZXJ2aWNlO1xufShCYXNlTG9jYXRpb25TZXJ2aWNlcykpO1xuXG52YXIgX19leHRlbmRzJDEgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG4vKiogQSBgTG9jYXRpb25TZXJ2aWNlc2AgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gZnJvbSBhbiBpbi1tZW1vcnkgb2JqZWN0ICovXG52YXIgTWVtb3J5TG9jYXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyQxKE1lbW9yeUxvY2F0aW9uU2VydmljZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNZW1vcnlMb2NhdGlvblNlcnZpY2Uocm91dGVyKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCByb3V0ZXIsIHRydWUpIHx8IHRoaXM7XG4gICAgfVxuICAgIE1lbW9yeUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX2dldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VybDtcbiAgICB9O1xuICAgIE1lbW9yeUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX3NldCA9IGZ1bmN0aW9uIChzdGF0ZSwgdGl0bGUsIHVybCwgcmVwbGFjZSkge1xuICAgICAgICB0aGlzLl91cmwgPSB1cmw7XG4gICAgfTtcbiAgICByZXR1cm4gTWVtb3J5TG9jYXRpb25TZXJ2aWNlO1xufShCYXNlTG9jYXRpb25TZXJ2aWNlcykpO1xuXG52YXIgX19leHRlbmRzJDIgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQSBgTG9jYXRpb25TZXJ2aWNlc2AgdGhhdCBnZXRzL3NldHMgdGhlIGN1cnJlbnQgbG9jYXRpb24gdXNpbmcgdGhlIGJyb3dzZXIncyBgbG9jYXRpb25gIGFuZCBgaGlzdG9yeWAgYXBpc1xuICpcbiAqIFVzZXMgYGhpc3RvcnkucHVzaFN0YXRlYCBhbmQgYGhpc3RvcnkucmVwbGFjZVN0YXRlYFxuICovXG52YXIgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyQyKFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2Uocm91dGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHJvdXRlciwgdHJ1ZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX2NvbmZpZyA9IHJvdXRlci51cmxTZXJ2aWNlLmNvbmZpZztcbiAgICAgICAgcm9vdC5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIF90aGlzLl9saXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGJhc2UgcHJlZml4IHdpdGhvdXQ6XG4gICAgICogLSB0cmFpbGluZyBzbGFzaFxuICAgICAqIC0gdHJhaWxpbmcgZmlsZW5hbWVcbiAgICAgKiAtIHByb3RvY29sIGFuZCBob3N0bmFtZVxuICAgICAqXG4gICAgICogSWYgPGJhc2UgaHJlZj0nL2Jhc2UvJz4sIHRoaXMgcmV0dXJucyAnL2Jhc2UnLlxuICAgICAqIElmIDxiYXNlIGhyZWY9Jy9mb28vYmFzZS8nPiwgdGhpcyByZXR1cm5zICcvZm9vL2Jhc2UnLlxuICAgICAqIElmIDxiYXNlIGhyZWY9Jy9iYXNlL2luZGV4Lmh0bWwnPiwgdGhpcyByZXR1cm5zICcvYmFzZScuXG4gICAgICogSWYgPGJhc2UgaHJlZj0naHR0cDovL2xvY2FsaG9zdDo4MDgwL2Jhc2UvaW5kZXguaHRtbCc+LCB0aGlzIHJldHVybnMgJy9iYXNlJy5cbiAgICAgKiBJZiA8YmFzZSBocmVmPScvYmFzZSc+LCB0aGlzIHJldHVybnMgJycuXG4gICAgICogSWYgPGJhc2UgaHJlZj0naHR0cDovL2xvY2FsaG9zdDo4MDgwJz4sIHRoaXMgcmV0dXJucyAnJy5cbiAgICAgKiBJZiA8YmFzZSBocmVmPSdodHRwOi8vbG9jYWxob3N0OjgwODAvJz4sIHRoaXMgcmV0dXJucyAnJy5cbiAgICAgKlxuICAgICAqIFNlZTogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9kZXYvc2VtYW50aWNzLmh0bWwjdGhlLWJhc2UtZWxlbWVudFxuICAgICAqL1xuICAgIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX2dldEJhc2VQcmVmaXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzdHJpcExhc3RQYXRoRWxlbWVudCh0aGlzLl9jb25maWcuYmFzZUhyZWYoKSk7XG4gICAgfTtcbiAgICBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UucHJvdG90eXBlLl9nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMuX2xvY2F0aW9uLCBwYXRobmFtZSA9IF9hLnBhdGhuYW1lLCBoYXNoID0gX2EuaGFzaCwgc2VhcmNoID0gX2Euc2VhcmNoO1xuICAgICAgICBzZWFyY2ggPSBzcGxpdFF1ZXJ5KHNlYXJjaClbMV07IC8vIHN0cmlwID8gaWYgZm91bmRcbiAgICAgICAgaGFzaCA9IHNwbGl0SGFzaChoYXNoKVsxXTsgLy8gc3RyaXAgIyBpZiBmb3VuZFxuICAgICAgICB2YXIgYmFzZVByZWZpeCA9IHRoaXMuX2dldEJhc2VQcmVmaXgoKTtcbiAgICAgICAgdmFyIGV4YWN0QmFzZUhyZWZNYXRjaCA9IHBhdGhuYW1lID09PSB0aGlzLl9jb25maWcuYmFzZUhyZWYoKTtcbiAgICAgICAgdmFyIHN0YXJ0c1dpdGhCYXNlID0gcGF0aG5hbWUuc3Vic3RyKDAsIGJhc2VQcmVmaXgubGVuZ3RoKSA9PT0gYmFzZVByZWZpeDtcbiAgICAgICAgcGF0aG5hbWUgPSBleGFjdEJhc2VIcmVmTWF0Y2ggPyAnLycgOiBzdGFydHNXaXRoQmFzZSA/IHBhdGhuYW1lLnN1YnN0cmluZyhiYXNlUHJlZml4Lmxlbmd0aCkgOiBwYXRobmFtZTtcbiAgICAgICAgcmV0dXJuIHBhdGhuYW1lICsgKHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnKSArIChoYXNoID8gJyMnICsgaGFzaCA6ICcnKTtcbiAgICB9O1xuICAgIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZS5wcm90b3R5cGUuX3NldCA9IGZ1bmN0aW9uIChzdGF0ZSwgdGl0bGUsIHVybCwgcmVwbGFjZSkge1xuICAgICAgICB2YXIgYmFzZVByZWZpeCA9IHRoaXMuX2dldEJhc2VQcmVmaXgoKTtcbiAgICAgICAgdmFyIHNsYXNoID0gdXJsICYmIHVybFswXSAhPT0gJy8nID8gJy8nIDogJyc7XG4gICAgICAgIHZhciBmdWxsVXJsID0gKHVybCA9PT0gJycgfHwgdXJsID09PSAnLycpID8gdGhpcy5fY29uZmlnLmJhc2VIcmVmKCkgOiBiYXNlUHJlZml4ICsgc2xhc2ggKyB1cmw7XG4gICAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgICAgICB0aGlzLl9oaXN0b3J5LnJlcGxhY2VTdGF0ZShzdGF0ZSwgdGl0bGUsIGZ1bGxVcmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoU3RhdGUoc3RhdGUsIHRpdGxlLCBmdWxsVXJsKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUHVzaFN0YXRlTG9jYXRpb25TZXJ2aWNlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKHJvdXRlcikge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzLCByb3V0ZXIpO1xuICAgICAgICByb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5fbGlzdGVuZXIpO1xuICAgIH07XG4gICAgcmV0dXJuIFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZTtcbn0oQmFzZUxvY2F0aW9uU2VydmljZXMpKTtcblxuLyoqIEEgYExvY2F0aW9uQ29uZmlnYCBtb2NrIHRoYXQgZ2V0cy9zZXRzIGFsbCBjb25maWcgZnJvbSBhbiBpbi1tZW1vcnkgb2JqZWN0ICovXG52YXIgTWVtb3J5TG9jYXRpb25Db25maWcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWVtb3J5TG9jYXRpb25Db25maWcoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZGlzcG9zZSA9IG5vb3A7XG4gICAgICAgIHRoaXMuX2Jhc2VIcmVmID0gJyc7XG4gICAgICAgIHRoaXMuX3BvcnQgPSA4MDtcbiAgICAgICAgdGhpcy5fcHJvdG9jb2wgPSAnaHR0cCc7XG4gICAgICAgIHRoaXMuX2hvc3QgPSAnbG9jYWxob3N0JztcbiAgICAgICAgdGhpcy5faGFzaFByZWZpeCA9ICcnO1xuICAgICAgICB0aGlzLnBvcnQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fcG9ydDsgfTtcbiAgICAgICAgdGhpcy5wcm90b2NvbCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9wcm90b2NvbDsgfTtcbiAgICAgICAgdGhpcy5ob3N0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2hvc3Q7IH07XG4gICAgICAgIHRoaXMuYmFzZUhyZWYgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fYmFzZUhyZWY7IH07XG4gICAgICAgIHRoaXMuaHRtbDVNb2RlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH07XG4gICAgICAgIHRoaXMuaGFzaFByZWZpeCA9IGZ1bmN0aW9uIChuZXd2YWwpIHsgcmV0dXJuIGlzRGVmaW5lZChuZXd2YWwpID8gX3RoaXMuX2hhc2hQcmVmaXggPSBuZXd2YWwgOiBfdGhpcy5faGFzaFByZWZpeDsgfTtcbiAgICB9XG4gICAgcmV0dXJuIE1lbW9yeUxvY2F0aW9uQ29uZmlnO1xufSgpKTtcblxuLyoqXG4gKiBAaW50ZXJuYWxhcGlcbiAqIEBtb2R1bGUgdmFuaWxsYVxuICovXG4vKiogKi9cbi8qKiBBIGBMb2NhdGlvbkNvbmZpZ2AgdGhhdCBkZWxlZ2F0ZXMgdG8gdGhlIGJyb3dzZXIncyBgbG9jYXRpb25gIG9iamVjdCAqL1xudmFyIEJyb3dzZXJMb2NhdGlvbkNvbmZpZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCcm93c2VyTG9jYXRpb25Db25maWcocm91dGVyLCBfaXNIdG1sNSkge1xuICAgICAgICBpZiAoX2lzSHRtbDUgPT09IHZvaWQgMCkgeyBfaXNIdG1sNSA9IGZhbHNlOyB9XG4gICAgICAgIHRoaXMuX2lzSHRtbDUgPSBfaXNIdG1sNTtcbiAgICAgICAgdGhpcy5fYmFzZUhyZWYgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2hhc2hQcmVmaXggPSAnJztcbiAgICB9XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5wb3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAobG9jYXRpb24ucG9ydCkge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcihsb2NhdGlvbi5wb3J0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm90b2NvbCgpID09PSAnaHR0cHMnID8gNDQzIDogODA7XG4gICAgfTtcbiAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLnByb3RvY29sID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wucmVwbGFjZSgvOi9nLCAnJyk7XG4gICAgfTtcbiAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLmhvc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsb2NhdGlvbi5ob3N0bmFtZTtcbiAgICB9O1xuICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUuaHRtbDVNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNIdG1sNTtcbiAgICB9O1xuICAgIEJyb3dzZXJMb2NhdGlvbkNvbmZpZy5wcm90b3R5cGUuaGFzaFByZWZpeCA9IGZ1bmN0aW9uIChuZXdwcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChuZXdwcmVmaXgpID8gdGhpcy5faGFzaFByZWZpeCA9IG5ld3ByZWZpeCA6IHRoaXMuX2hhc2hQcmVmaXg7XG4gICAgfTtcbiAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLmJhc2VIcmVmID0gZnVuY3Rpb24gKGhyZWYpIHtcbiAgICAgICAgcmV0dXJuIGlzRGVmaW5lZChocmVmKSA/IHRoaXMuX2Jhc2VIcmVmID0gaHJlZiA6XG4gICAgICAgICAgICBpc0RlZmluZWQodGhpcy5fYmFzZUhyZWYpID8gdGhpcy5fYmFzZUhyZWYgOiB0aGlzLmFwcGx5RG9jdW1lbnRCYXNlSHJlZigpO1xuICAgIH07XG4gICAgQnJvd3NlckxvY2F0aW9uQ29uZmlnLnByb3RvdHlwZS5hcHBseURvY3VtZW50QmFzZUhyZWYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBiYXNlVGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Jhc2UnKVswXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VIcmVmID0gYmFzZVRhZyA/IGJhc2VUYWcuaHJlZi5zdWJzdHIobG9jYXRpb24ub3JpZ2luLmxlbmd0aCkgOiBsb2NhdGlvbi5wYXRobmFtZSB8fCAnLyc7XG4gICAgfTtcbiAgICBCcm93c2VyTG9jYXRpb25Db25maWcucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgcmV0dXJuIEJyb3dzZXJMb2NhdGlvbkNvbmZpZztcbn0oKSk7XG5cbi8qKlxuICogQGludGVybmFsYXBpXG4gKiBAbW9kdWxlIHZhbmlsbGFcbiAqL1xuLyoqICovXG5mdW5jdGlvbiBzZXJ2aWNlc1BsdWdpbihyb3V0ZXIpIHtcbiAgICBzZXJ2aWNlcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gICAgc2VydmljZXMuJHEgPSAkcTtcbiAgICByZXR1cm4geyBuYW1lOiAndmFuaWxsYS5zZXJ2aWNlcycsICRxOiAkcSwgJGluamVjdG9yOiAkaW5qZWN0b3IsIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0gfTtcbn1cbi8qKiBBIGBVSVJvdXRlclBsdWdpbmAgdXNlcyB0aGUgYnJvd3NlciBoYXNoIHRvIGdldC9zZXQgdGhlIGN1cnJlbnQgbG9jYXRpb24gKi9cbnZhciBoYXNoTG9jYXRpb25QbHVnaW4gPSBsb2NhdGlvblBsdWdpbkZhY3RvcnkoJ3ZhbmlsbGEuaGFzaEJhbmdMb2NhdGlvbicsIGZhbHNlLCBIYXNoTG9jYXRpb25TZXJ2aWNlLCBCcm93c2VyTG9jYXRpb25Db25maWcpO1xuLyoqIEEgYFVJUm91dGVyUGx1Z2luYCB0aGF0IGdldHMvc2V0cyB0aGUgY3VycmVudCBsb2NhdGlvbiB1c2luZyB0aGUgYnJvd3NlcidzIGBsb2NhdGlvbmAgYW5kIGBoaXN0b3J5YCBhcGlzICovXG52YXIgcHVzaFN0YXRlTG9jYXRpb25QbHVnaW4gPSBsb2NhdGlvblBsdWdpbkZhY3RvcnkoJ3ZhbmlsbGEucHVzaFN0YXRlTG9jYXRpb24nLCB0cnVlLCBQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2UsIEJyb3dzZXJMb2NhdGlvbkNvbmZpZyk7XG4vKiogQSBgVUlSb3V0ZXJQbHVnaW5gIHRoYXQgZ2V0cy9zZXRzIHRoZSBjdXJyZW50IGxvY2F0aW9uIGZyb20gYW4gaW4tbWVtb3J5IG9iamVjdCAqL1xudmFyIG1lbW9yeUxvY2F0aW9uUGx1Z2luID0gbG9jYXRpb25QbHVnaW5GYWN0b3J5KCd2YW5pbGxhLm1lbW9yeUxvY2F0aW9uJywgZmFsc2UsIE1lbW9yeUxvY2F0aW9uU2VydmljZSwgTWVtb3J5TG9jYXRpb25Db25maWcpO1xuXG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSB2YW5pbGxhXG4gKi9cbi8qKiAqL1xuXG4vKipcbiAqICMgQ29yZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzXG4gKlxuICogVGhlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMgdGhhdCBhcmUgY29yZSB0byB1aS1yb3V0ZXIgYW5kIGRvIG5vdCBiZWxvbmdcbiAqIHRvIGEgbW9yZSBzcGVjaWZpYyBzdWJzeXN0ZW0gKHN1Y2ggYXMgcmVzb2x2ZSkuXG4gKlxuICogQGNvcmVhcGlcbiAqIEBwcmVmZXJyZWRcbiAqIEBtb2R1bGUgY29yZVxuICovIC8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqIEBpbnRlcm5hbGFwaSAqL1xudmFyIFVJUm91dGVyUGx1Z2luQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVSVJvdXRlclBsdWdpbkJhc2UoKSB7XG4gICAgfVxuICAgIFVJUm91dGVyUGx1Z2luQmFzZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyb3V0ZXIpIHsgfTtcbiAgICByZXR1cm4gVUlSb3V0ZXJQbHVnaW5CYXNlO1xufSgpKTtcblxuLyoqXG4gKiBAY29yZWFwaVxuICogQG1vZHVsZSBjb21tb25cbiAqLyAvKiogKi9cblxuXG5cbnZhciBpbmRleCA9IE9iamVjdC5mcmVlemUoe1xuXHRyb290OiByb290LFxuXHRmcm9tSnNvbjogZnJvbUpzb24sXG5cdHRvSnNvbjogdG9Kc29uLFxuXHRmb3JFYWNoOiBmb3JFYWNoLFxuXHRleHRlbmQ6IGV4dGVuZCxcblx0ZXF1YWxzOiBlcXVhbHMsXG5cdGlkZW50aXR5OiBpZGVudGl0eSxcblx0bm9vcDogbm9vcCxcblx0Y3JlYXRlUHJveHlGdW5jdGlvbnM6IGNyZWF0ZVByb3h5RnVuY3Rpb25zLFxuXHRpbmhlcml0OiBpbmhlcml0LFxuXHRpbkFycmF5OiBpbkFycmF5LFxuXHRfaW5BcnJheTogX2luQXJyYXksXG5cdHJlbW92ZUZyb206IHJlbW92ZUZyb20sXG5cdF9yZW1vdmVGcm9tOiBfcmVtb3ZlRnJvbSxcblx0cHVzaFRvOiBwdXNoVG8sXG5cdF9wdXNoVG86IF9wdXNoVG8sXG5cdGRlcmVnQWxsOiBkZXJlZ0FsbCxcblx0ZGVmYXVsdHM6IGRlZmF1bHRzLFxuXHRtZXJnZVI6IG1lcmdlUixcblx0YW5jZXN0b3JzOiBhbmNlc3RvcnMsXG5cdHBpY2s6IHBpY2ssXG5cdG9taXQ6IG9taXQsXG5cdHBsdWNrOiBwbHVjayxcblx0ZmlsdGVyOiBmaWx0ZXIsXG5cdGZpbmQ6IGZpbmQsXG5cdG1hcE9iajogbWFwT2JqLFxuXHRtYXA6IG1hcCxcblx0dmFsdWVzOiB2YWx1ZXMsXG5cdGFsbFRydWVSOiBhbGxUcnVlUixcblx0YW55VHJ1ZVI6IGFueVRydWVSLFxuXHR1bm5lc3RSOiB1bm5lc3RSLFxuXHRmbGF0dGVuUjogZmxhdHRlblIsXG5cdHB1c2hSOiBwdXNoUixcblx0dW5pcVI6IHVuaXFSLFxuXHR1bm5lc3Q6IHVubmVzdCxcblx0ZmxhdHRlbjogZmxhdHRlbixcblx0YXNzZXJ0UHJlZGljYXRlOiBhc3NlcnRQcmVkaWNhdGUsXG5cdGFzc2VydE1hcDogYXNzZXJ0TWFwLFxuXHRhc3NlcnRGbjogYXNzZXJ0Rm4sXG5cdHBhaXJzOiBwYWlycyxcblx0YXJyYXlUdXBsZXM6IGFycmF5VHVwbGVzLFxuXHRhcHBseVBhaXJzOiBhcHBseVBhaXJzLFxuXHR0YWlsOiB0YWlsLFxuXHRjb3B5OiBjb3B5LFxuXHRfZXh0ZW5kOiBfZXh0ZW5kLFxuXHRzaWxlbmNlVW5jYXVnaHRJblByb21pc2U6IHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSxcblx0c2lsZW50UmVqZWN0aW9uOiBzaWxlbnRSZWplY3Rpb24sXG5cdG5vdEltcGxlbWVudGVkOiBub3RJbXBsZW1lbnRlZCxcblx0c2VydmljZXM6IHNlcnZpY2VzLFxuXHRHbG9iOiBHbG9iLFxuXHRjdXJyeTogY3VycnksXG5cdGNvbXBvc2U6IGNvbXBvc2UsXG5cdHBpcGU6IHBpcGUsXG5cdHByb3A6IHByb3AsXG5cdHByb3BFcTogcHJvcEVxLFxuXHRwYXJzZTogcGFyc2UsXG5cdG5vdDogbm90LFxuXHRhbmQ6IGFuZCxcblx0b3I6IG9yLFxuXHRhbGw6IGFsbCxcblx0YW55OiBhbnksXG5cdGlzOiBpcyxcblx0ZXE6IGVxLFxuXHR2YWw6IHZhbCxcblx0aW52b2tlOiBpbnZva2UsXG5cdHBhdHRlcm46IHBhdHRlcm4sXG5cdGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcblx0aXNEZWZpbmVkOiBpc0RlZmluZWQsXG5cdGlzTnVsbDogaXNOdWxsLFxuXHRpc051bGxPclVuZGVmaW5lZDogaXNOdWxsT3JVbmRlZmluZWQsXG5cdGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG5cdGlzTnVtYmVyOiBpc051bWJlcixcblx0aXNTdHJpbmc6IGlzU3RyaW5nLFxuXHRpc09iamVjdDogaXNPYmplY3QsXG5cdGlzQXJyYXk6IGlzQXJyYXksXG5cdGlzRGF0ZTogaXNEYXRlLFxuXHRpc1JlZ0V4cDogaXNSZWdFeHAsXG5cdGlzU3RhdGU6IGlzU3RhdGUsXG5cdGlzSW5qZWN0YWJsZTogaXNJbmplY3RhYmxlLFxuXHRpc1Byb21pc2U6IGlzUHJvbWlzZSxcblx0UXVldWU6IFF1ZXVlLFxuXHRtYXhMZW5ndGg6IG1heExlbmd0aCxcblx0cGFkU3RyaW5nOiBwYWRTdHJpbmcsXG5cdGtlYm9iU3RyaW5nOiBrZWJvYlN0cmluZyxcblx0ZnVuY3Rpb25Ub1N0cmluZzogZnVuY3Rpb25Ub1N0cmluZyxcblx0Zm5Ub1N0cmluZzogZm5Ub1N0cmluZyxcblx0c3RyaW5naWZ5OiBzdHJpbmdpZnksXG5cdGJlZm9yZUFmdGVyU3Vic3RyOiBiZWZvcmVBZnRlclN1YnN0cixcblx0aG9zdFJlZ2V4OiBob3N0UmVnZXgsXG5cdHN0cmlwTGFzdFBhdGhFbGVtZW50OiBzdHJpcExhc3RQYXRoRWxlbWVudCxcblx0c3BsaXRIYXNoOiBzcGxpdEhhc2gsXG5cdHNwbGl0UXVlcnk6IHNwbGl0UXVlcnksXG5cdHNwbGl0RXF1YWw6IHNwbGl0RXF1YWwsXG5cdHRyaW1IYXNoVmFsOiB0cmltSGFzaFZhbCxcblx0c3BsaXRPbkRlbGltOiBzcGxpdE9uRGVsaW0sXG5cdGpvaW5OZWlnaGJvcnNSOiBqb2luTmVpZ2hib3JzUixcblx0Z2V0IENhdGVnb3J5ICgpIHsgcmV0dXJuIGV4cG9ydHMuQ2F0ZWdvcnk7IH0sXG5cdFRyYWNlOiBUcmFjZSxcblx0dHJhY2U6IHRyYWNlLFxuXHRnZXQgRGVmVHlwZSAoKSB7IHJldHVybiBleHBvcnRzLkRlZlR5cGU7IH0sXG5cdFBhcmFtOiBQYXJhbSxcblx0UGFyYW1UeXBlczogUGFyYW1UeXBlcyxcblx0U3RhdGVQYXJhbXM6IFN0YXRlUGFyYW1zLFxuXHRQYXJhbVR5cGU6IFBhcmFtVHlwZSxcblx0UGF0aE5vZGU6IFBhdGhOb2RlLFxuXHRQYXRoVXRpbHM6IFBhdGhVdGlscyxcblx0cmVzb2x2ZVBvbGljaWVzOiByZXNvbHZlUG9saWNpZXMsXG5cdGRlZmF1bHRSZXNvbHZlUG9saWN5OiBkZWZhdWx0UmVzb2x2ZVBvbGljeSxcblx0UmVzb2x2YWJsZTogUmVzb2x2YWJsZSxcblx0TkFUSVZFX0lOSkVDVE9SX1RPS0VOOiBOQVRJVkVfSU5KRUNUT1JfVE9LRU4sXG5cdFJlc29sdmVDb250ZXh0OiBSZXNvbHZlQ29udGV4dCxcblx0cmVzb2x2YWJsZXNCdWlsZGVyOiByZXNvbHZhYmxlc0J1aWxkZXIsXG5cdFN0YXRlQnVpbGRlcjogU3RhdGVCdWlsZGVyLFxuXHRTdGF0ZU9iamVjdDogU3RhdGVPYmplY3QsXG5cdFN0YXRlTWF0Y2hlcjogU3RhdGVNYXRjaGVyLFxuXHRTdGF0ZVF1ZXVlTWFuYWdlcjogU3RhdGVRdWV1ZU1hbmFnZXIsXG5cdFN0YXRlUmVnaXN0cnk6IFN0YXRlUmVnaXN0cnksXG5cdFN0YXRlU2VydmljZTogU3RhdGVTZXJ2aWNlLFxuXHRUYXJnZXRTdGF0ZTogVGFyZ2V0U3RhdGUsXG5cdGdldCBUcmFuc2l0aW9uSG9va1BoYXNlICgpIHsgcmV0dXJuIGV4cG9ydHMuVHJhbnNpdGlvbkhvb2tQaGFzZTsgfSxcblx0Z2V0IFRyYW5zaXRpb25Ib29rU2NvcGUgKCkgeyByZXR1cm4gZXhwb3J0cy5UcmFuc2l0aW9uSG9va1Njb3BlOyB9LFxuXHRIb29rQnVpbGRlcjogSG9va0J1aWxkZXIsXG5cdG1hdGNoU3RhdGU6IG1hdGNoU3RhdGUsXG5cdFJlZ2lzdGVyZWRIb29rOiBSZWdpc3RlcmVkSG9vayxcblx0bWFrZUV2ZW50OiBtYWtlRXZlbnQsXG5cdGdldCBSZWplY3RUeXBlICgpIHsgcmV0dXJuIGV4cG9ydHMuUmVqZWN0VHlwZTsgfSxcblx0UmVqZWN0aW9uOiBSZWplY3Rpb24sXG5cdFRyYW5zaXRpb246IFRyYW5zaXRpb24sXG5cdFRyYW5zaXRpb25Ib29rOiBUcmFuc2l0aW9uSG9vayxcblx0VHJhbnNpdGlvbkV2ZW50VHlwZTogVHJhbnNpdGlvbkV2ZW50VHlwZSxcblx0ZGVmYXVsdFRyYW5zT3B0czogZGVmYXVsdFRyYW5zT3B0cyxcblx0VHJhbnNpdGlvblNlcnZpY2U6IFRyYW5zaXRpb25TZXJ2aWNlLFxuXHRVcmxNYXRjaGVyOiBVcmxNYXRjaGVyLFxuXHRVcmxNYXRjaGVyRmFjdG9yeTogVXJsTWF0Y2hlckZhY3RvcnksXG5cdFVybFJvdXRlcjogVXJsUm91dGVyLFxuXHRVcmxSdWxlRmFjdG9yeTogVXJsUnVsZUZhY3RvcnksXG5cdEJhc2VVcmxSdWxlOiBCYXNlVXJsUnVsZSxcblx0VXJsU2VydmljZTogVXJsU2VydmljZSxcblx0Vmlld1NlcnZpY2U6IFZpZXdTZXJ2aWNlLFxuXHRVSVJvdXRlckdsb2JhbHM6IFVJUm91dGVyR2xvYmFscyxcblx0VUlSb3V0ZXI6IFVJUm91dGVyLFxuXHQkcTogJHEsXG5cdCRpbmplY3RvcjogJGluamVjdG9yLFxuXHRCYXNlTG9jYXRpb25TZXJ2aWNlczogQmFzZUxvY2F0aW9uU2VydmljZXMsXG5cdEhhc2hMb2NhdGlvblNlcnZpY2U6IEhhc2hMb2NhdGlvblNlcnZpY2UsXG5cdE1lbW9yeUxvY2F0aW9uU2VydmljZTogTWVtb3J5TG9jYXRpb25TZXJ2aWNlLFxuXHRQdXNoU3RhdGVMb2NhdGlvblNlcnZpY2U6IFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSxcblx0TWVtb3J5TG9jYXRpb25Db25maWc6IE1lbW9yeUxvY2F0aW9uQ29uZmlnLFxuXHRCcm93c2VyTG9jYXRpb25Db25maWc6IEJyb3dzZXJMb2NhdGlvbkNvbmZpZyxcblx0a2V5VmFsc1RvT2JqZWN0Ujoga2V5VmFsc1RvT2JqZWN0Uixcblx0Z2V0UGFyYW1zOiBnZXRQYXJhbXMsXG5cdHBhcnNlVXJsOiBwYXJzZVVybCQxLFxuXHRidWlsZFVybDogYnVpbGRVcmwsXG5cdGxvY2F0aW9uUGx1Z2luRmFjdG9yeTogbG9jYXRpb25QbHVnaW5GYWN0b3J5LFxuXHRzZXJ2aWNlc1BsdWdpbjogc2VydmljZXNQbHVnaW4sXG5cdGhhc2hMb2NhdGlvblBsdWdpbjogaGFzaExvY2F0aW9uUGx1Z2luLFxuXHRwdXNoU3RhdGVMb2NhdGlvblBsdWdpbjogcHVzaFN0YXRlTG9jYXRpb25QbHVnaW4sXG5cdG1lbW9yeUxvY2F0aW9uUGx1Z2luOiBtZW1vcnlMb2NhdGlvblBsdWdpbixcblx0VUlSb3V0ZXJQbHVnaW5CYXNlOiBVSVJvdXRlclBsdWdpbkJhc2Vcbn0pO1xuXG5mdW5jdGlvbiBnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSgpIHtcbiAgICB2YXIgdGVtcGxhdGVGYWN0b3J5ID0gbnVsbDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHBhdGgsIHZpZXcpIHtcbiAgICAgICAgdGVtcGxhdGVGYWN0b3J5ID0gdGVtcGxhdGVGYWN0b3J5IHx8IHNlcnZpY2VzLiRpbmplY3Rvci5nZXQoJyR0ZW1wbGF0ZUZhY3RvcnknKTtcbiAgICAgICAgcmV0dXJuIFtuZXcgTmcxVmlld0NvbmZpZyhwYXRoLCB2aWV3LCB0ZW1wbGF0ZUZhY3RvcnkpXTtcbiAgICB9O1xufVxudmFyIGhhc0FueUtleSA9IGZ1bmN0aW9uIChrZXlzLCBvYmopIHtcbiAgICByZXR1cm4ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7IHJldHVybiBhY2MgfHwgaXNEZWZpbmVkKG9ialtrZXldKTsgfSwgZmFsc2UpO1xufTtcbi8qKlxuICogVGhpcyBpcyBhIFtbU3RhdGVCdWlsZGVyLmJ1aWxkZXJdXSBmdW5jdGlvbiBmb3IgYW5ndWxhcjEgYHZpZXdzYC5cbiAqXG4gKiBXaGVuIHRoZSBbW1N0YXRlQnVpbGRlcl1dIGJ1aWxkcyBhIFtbU3RhdGVPYmplY3RdXSBvYmplY3QgZnJvbSBhIHJhdyBbW1N0YXRlRGVjbGFyYXRpb25dXSwgdGhpcyBidWlsZGVyXG4gKiBoYW5kbGVzIHRoZSBgdmlld3NgIHByb3BlcnR5IHdpdGggbG9naWMgc3BlY2lmaWMgdG8gQHVpcm91dGVyL2FuZ3VsYXJqcyAobmcxKS5cbiAqXG4gKiBJZiBubyBgdmlld3M6IHt9YCBwcm9wZXJ0eSBleGlzdHMgb24gdGhlIFtbU3RhdGVEZWNsYXJhdGlvbl1dLCB0aGVuIGl0IGNyZWF0ZXMgdGhlIGB2aWV3c2Agb2JqZWN0XG4gKiBhbmQgYXBwbGllcyB0aGUgc3RhdGUtbGV2ZWwgY29uZmlndXJhdGlvbiB0byBhIHZpZXcgbmFtZWQgYCRkZWZhdWx0YC5cbiAqL1xuZnVuY3Rpb24gbmcxVmlld3NCdWlsZGVyKHN0YXRlKSB7XG4gICAgLy8gRG8gbm90IHByb2Nlc3Mgcm9vdCBzdGF0ZVxuICAgIGlmICghc3RhdGUucGFyZW50KVxuICAgICAgICByZXR1cm4ge307XG4gICAgdmFyIHRwbEtleXMgPSBbJ3RlbXBsYXRlUHJvdmlkZXInLCAndGVtcGxhdGVVcmwnLCAndGVtcGxhdGUnLCAnbm90aWZ5JywgJ2FzeW5jJ10sIGN0cmxLZXlzID0gWydjb250cm9sbGVyJywgJ2NvbnRyb2xsZXJQcm92aWRlcicsICdjb250cm9sbGVyQXMnLCAncmVzb2x2ZUFzJ10sIGNvbXBLZXlzID0gWydjb21wb25lbnQnLCAnYmluZGluZ3MnLCAnY29tcG9uZW50UHJvdmlkZXInXSwgbm9uQ29tcEtleXMgPSB0cGxLZXlzLmNvbmNhdChjdHJsS2V5cyksIGFsbFZpZXdLZXlzID0gY29tcEtleXMuY29uY2F0KG5vbkNvbXBLZXlzKTtcbiAgICAvLyBEbyBub3QgYWxsb3cgYSBzdGF0ZSB0byBoYXZlIGJvdGggc3RhdGUtbGV2ZWwgcHJvcHMgYW5kIGFsc28gYSBgdmlld3M6IHt9YCBwcm9wZXJ0eS5cbiAgICAvLyBBIHN0YXRlIHdpdGhvdXQgYSBgdmlld3M6IHt9YCBwcm9wZXJ0eSBjYW4gZGVjbGFyZSBwcm9wZXJ0aWVzIGZvciB0aGUgYCRkZWZhdWx0YCB2aWV3IGFzIHByb3BlcnRpZXMgb2YgdGhlIHN0YXRlLlxuICAgIC8vIEhvd2V2ZXIsIHRoZSBgJGRlZmF1bHRgIGFwcHJvYWNoIHNob3VsZCBub3QgYmUgbWl4ZWQgd2l0aCBhIHNlcGFyYXRlIGB2aWV3czogYCBibG9jay5cbiAgICBpZiAoaXNEZWZpbmVkKHN0YXRlLnZpZXdzKSAmJiBoYXNBbnlLZXkoYWxsVmlld0tleXMsIHN0YXRlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGF0ZSAnXCIgKyBzdGF0ZS5uYW1lICsgXCInIGhhcyBhICd2aWV3cycgb2JqZWN0LiBcIiArXG4gICAgICAgICAgICBcIkl0IGNhbm5vdCBhbHNvIGhhdmUgXFxcInZpZXcgcHJvcGVydGllc1xcXCIgYXQgdGhlIHN0YXRlIGxldmVsLiAgXCIgK1xuICAgICAgICAgICAgXCJNb3ZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBpbnRvIGEgdmlldyAoaW4gdGhlICd2aWV3cycgb2JqZWN0KTogXCIgK1xuICAgICAgICAgICAgKFwiIFwiICsgYWxsVmlld0tleXMuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGlzRGVmaW5lZChzdGF0ZVtrZXldKTsgfSkuam9pbignLCAnKSkpO1xuICAgIH1cbiAgICB2YXIgdmlld3MgPSB7fSwgdmlld3NPYmplY3QgPSBzdGF0ZS52aWV3cyB8fCB7ICckZGVmYXVsdCc6IHBpY2soc3RhdGUsIGFsbFZpZXdLZXlzKSB9O1xuICAgIGZvckVhY2godmlld3NPYmplY3QsIGZ1bmN0aW9uIChjb25maWcsIG5hbWUpIHtcbiAgICAgICAgLy8gQWNjb3VudCBmb3Igdmlld3M6IHsgXCJcIjogeyB0ZW1wbGF0ZS4uLiB9IH1cbiAgICAgICAgbmFtZSA9IG5hbWUgfHwgJyRkZWZhdWx0JztcbiAgICAgICAgLy8gQWNjb3VudCBmb3Igdmlld3M6IHsgaGVhZGVyOiBcImhlYWRlckNvbXBvbmVudFwiIH1cbiAgICAgICAgaWYgKGlzU3RyaW5nKGNvbmZpZykpXG4gICAgICAgICAgICBjb25maWcgPSB7IGNvbXBvbmVudDogY29uZmlnIH07XG4gICAgICAgIC8vIE1ha2UgYSBzaGFsbG93IGNvcHkgb2YgdGhlIGNvbmZpZyBvYmplY3RcbiAgICAgICAgY29uZmlnID0gZXh0ZW5kKHt9LCBjb25maWcpO1xuICAgICAgICAvLyBEbyBub3QgYWxsb3cgYSB2aWV3IHRvIG1peCBwcm9wcyBmb3IgY29tcG9uZW50LXN0eWxlIHZpZXcgd2l0aCBwcm9wcyBmb3IgdGVtcGxhdGUvY29udHJvbGxlci1zdHlsZSB2aWV3XG4gICAgICAgIGlmIChoYXNBbnlLZXkoY29tcEtleXMsIGNvbmZpZykgJiYgaGFzQW55S2V5KG5vbkNvbXBLZXlzLCBjb25maWcpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY29tYmluZTogXCIgKyBjb21wS2V5cy5qb2luKCd8JykgKyBcIiB3aXRoOiBcIiArIG5vbkNvbXBLZXlzLmpvaW4oJ3wnKSArIFwiIGluIHN0YXRldmlldzogJ1wiICsgbmFtZSArIFwiQFwiICsgc3RhdGUubmFtZSArIFwiJ1wiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25maWcucmVzb2x2ZUFzID0gY29uZmlnLnJlc29sdmVBcyB8fCAnJHJlc29sdmUnO1xuICAgICAgICBjb25maWcuJHR5cGUgPSAnbmcxJztcbiAgICAgICAgY29uZmlnLiRjb250ZXh0ID0gc3RhdGU7XG4gICAgICAgIGNvbmZpZy4kbmFtZSA9IG5hbWU7XG4gICAgICAgIHZhciBub3JtYWxpemVkID0gVmlld1NlcnZpY2Uubm9ybWFsaXplVUlWaWV3VGFyZ2V0KGNvbmZpZy4kY29udGV4dCwgY29uZmlnLiRuYW1lKTtcbiAgICAgICAgY29uZmlnLiR1aVZpZXdOYW1lID0gbm9ybWFsaXplZC51aVZpZXdOYW1lO1xuICAgICAgICBjb25maWcuJHVpVmlld0NvbnRleHRBbmNob3IgPSBub3JtYWxpemVkLnVpVmlld0NvbnRleHRBbmNob3I7XG4gICAgICAgIHZpZXdzW25hbWVdID0gY29uZmlnO1xuICAgIH0pO1xuICAgIHJldHVybiB2aWV3cztcbn1cbnZhciBpZCQxID0gMDtcbnZhciBOZzFWaWV3Q29uZmlnID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5nMVZpZXdDb25maWcocGF0aCwgdmlld0RlY2wsIGZhY3RvcnkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy52aWV3RGVjbCA9IHZpZXdEZWNsO1xuICAgICAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5O1xuICAgICAgICB0aGlzLiRpZCA9IGlkJDErKztcbiAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nZXRUZW1wbGF0ZSA9IGZ1bmN0aW9uICh1aVZpZXcsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb21wb25lbnQgPyBfdGhpcy5mYWN0b3J5Lm1ha2VDb21wb25lbnRUZW1wbGF0ZSh1aVZpZXcsIGNvbnRleHQsIF90aGlzLmNvbXBvbmVudCwgX3RoaXMudmlld0RlY2wuYmluZGluZ3MpIDogX3RoaXMudGVtcGxhdGU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIE5nMVZpZXdDb25maWcucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciAkcSA9IHNlcnZpY2VzLiRxO1xuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBSZXNvbHZlQ29udGV4dCh0aGlzLnBhdGgpO1xuICAgICAgICB2YXIgcGFyYW1zID0gdGhpcy5wYXRoLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBub2RlKSB7IHJldHVybiBleHRlbmQoYWNjLCBub2RlLnBhcmFtVmFsdWVzKTsgfSwge30pO1xuICAgICAgICB2YXIgcHJvbWlzZXMgPSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZTogJHEud2hlbih0aGlzLmZhY3RvcnkuZnJvbUNvbmZpZyh0aGlzLnZpZXdEZWNsLCBwYXJhbXMsIGNvbnRleHQpKSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICRxLndoZW4odGhpcy5nZXRDb250cm9sbGVyKGNvbnRleHQpKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuICRxLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgdHJhY2UudHJhY2VWaWV3U2VydmljZUV2ZW50KCdMb2FkZWQnLCBfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5jb250cm9sbGVyID0gcmVzdWx0cy5jb250cm9sbGVyO1xuICAgICAgICAgICAgZXh0ZW5kKF90aGlzLCByZXN1bHRzLnRlbXBsYXRlKTsgLy8gRWl0aGVyIHsgdGVtcGxhdGU6IFwidHBsXCIgfSBvciB7IGNvbXBvbmVudDogXCJjbXBOYW1lXCIgfVxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGNvbnRyb2xsZXIgZm9yIGEgdmlldyBjb25maWd1cmF0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufFByb21pc2UuPEZ1bmN0aW9uPn0gUmV0dXJucyBhIGNvbnRyb2xsZXIsIG9yIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgY29udHJvbGxlci5cbiAgICAgKi9cbiAgICBOZzFWaWV3Q29uZmlnLnByb3RvdHlwZS5nZXRDb250cm9sbGVyID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcy52aWV3RGVjbC5jb250cm9sbGVyUHJvdmlkZXI7XG4gICAgICAgIGlmICghaXNJbmplY3RhYmxlKHByb3ZpZGVyKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdEZWNsLmNvbnRyb2xsZXI7XG4gICAgICAgIHZhciBkZXBzID0gc2VydmljZXMuJGluamVjdG9yLmFubm90YXRlKHByb3ZpZGVyKTtcbiAgICAgICAgdmFyIHByb3ZpZGVyRm4gPSBpc0FycmF5KHByb3ZpZGVyKSA/IHRhaWwocHJvdmlkZXIpIDogcHJvdmlkZXI7XG4gICAgICAgIHZhciByZXNvbHZhYmxlID0gbmV3IFJlc29sdmFibGUoJycsIHByb3ZpZGVyRm4sIGRlcHMpO1xuICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQoY29udGV4dCk7XG4gICAgfTtcbiAgICByZXR1cm4gTmcxVmlld0NvbmZpZztcbn0oKSk7XG5cbi8qKiBAbW9kdWxlIHZpZXcgKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xuLyoqXG4gKiBTZXJ2aWNlIHdoaWNoIG1hbmFnZXMgbG9hZGluZyBvZiB0ZW1wbGF0ZXMgZnJvbSBhIFZpZXdDb25maWcuXG4gKi9cbnZhciBUZW1wbGF0ZUZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVGVtcGxhdGVGYWN0b3J5KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvKiogQGhpZGRlbiAqLyB0aGlzLl91c2VIdHRwID0gbmcudmVyc2lvbi5taW5vciA8IDM7XG4gICAgICAgIC8qKiBAaGlkZGVuICovIHRoaXMuJGdldCA9IFsnJGh0dHAnLCAnJHRlbXBsYXRlQ2FjaGUnLCAnJGluamVjdG9yJywgZnVuY3Rpb24gKCRodHRwLCAkdGVtcGxhdGVDYWNoZSwgJGluamVjdG9yKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuJHRlbXBsYXRlUmVxdWVzdCA9ICRpbmplY3Rvci5oYXMgJiYgJGluamVjdG9yLmhhcygnJHRlbXBsYXRlUmVxdWVzdCcpICYmICRpbmplY3Rvci5nZXQoJyR0ZW1wbGF0ZVJlcXVlc3QnKTtcbiAgICAgICAgICAgICAgICBfdGhpcy4kaHR0cCA9ICRodHRwO1xuICAgICAgICAgICAgICAgIF90aGlzLiR0ZW1wbGF0ZUNhY2hlID0gJHRlbXBsYXRlQ2FjaGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgfV07XG4gICAgfVxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS51c2VIdHRwU2VydmljZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLl91c2VIdHRwID0gdmFsdWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZnJvbSBhIGNvbmZpZ3VyYXRpb24gb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyBDb25maWd1cmF0aW9uIG9iamVjdCBmb3Igd2hpY2ggdG8gbG9hZCBhIHRlbXBsYXRlLlxuICAgICAqIFRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBhcmUgc2VhcmNoIGluIHRoZSBzcGVjaWZpZWQgb3JkZXIsIGFuZCB0aGUgZmlyc3Qgb25lXG4gICAgICogdGhhdCBpcyBkZWZpbmVkIGlzIHVzZWQgdG8gY3JlYXRlIHRoZSB0ZW1wbGF0ZTpcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXJhbXMgIFBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgdGVtcGxhdGUgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIGNvbnRleHQgVGhlIHJlc29sdmUgY29udGV4dCBhc3NvY2lhdGVkIHdpdGggdGhlIHRlbXBsYXRlJ3Mgdmlld1xuICAgICAqXG4gICAgICogQHJldHVybiB7c3RyaW5nfG9iamVjdH0gIFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2UgZm9yXG4gICAgICogdGhhdCBzdHJpbmcsb3IgYG51bGxgIGlmIG5vIHRlbXBsYXRlIGlzIGNvbmZpZ3VyZWQuXG4gICAgICovXG4gICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tQ29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZywgcGFyYW1zLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciBkZWZhdWx0VGVtcGxhdGUgPSAnPHVpLXZpZXc+PC91aS12aWV3Pic7XG4gICAgICAgIHZhciBhc1RlbXBsYXRlID0gZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gc2VydmljZXMuJHEud2hlbihyZXN1bHQpLnRoZW4oZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gKHsgdGVtcGxhdGU6IHN0ciB9KTsgfSk7IH07XG4gICAgICAgIHZhciBhc0NvbXBvbmVudCA9IGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIHNlcnZpY2VzLiRxLndoZW4ocmVzdWx0KS50aGVuKGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuICh7IGNvbXBvbmVudDogc3RyIH0pOyB9KTsgfTtcbiAgICAgICAgcmV0dXJuIChpc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlKSA/IGFzVGVtcGxhdGUodGhpcy5mcm9tU3RyaW5nKGNvbmZpZy50ZW1wbGF0ZSwgcGFyYW1zKSkgOlxuICAgICAgICAgICAgaXNEZWZpbmVkKGNvbmZpZy50ZW1wbGF0ZVVybCkgPyBhc1RlbXBsYXRlKHRoaXMuZnJvbVVybChjb25maWcudGVtcGxhdGVVcmwsIHBhcmFtcykpIDpcbiAgICAgICAgICAgICAgICBpc0RlZmluZWQoY29uZmlnLnRlbXBsYXRlUHJvdmlkZXIpID8gYXNUZW1wbGF0ZSh0aGlzLmZyb21Qcm92aWRlcihjb25maWcudGVtcGxhdGVQcm92aWRlciwgcGFyYW1zLCBjb250ZXh0KSkgOlxuICAgICAgICAgICAgICAgICAgICBpc0RlZmluZWQoY29uZmlnLmNvbXBvbmVudCkgPyBhc0NvbXBvbmVudChjb25maWcuY29tcG9uZW50KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RlZmluZWQoY29uZmlnLmNvbXBvbmVudFByb3ZpZGVyKSA/IGFzQ29tcG9uZW50KHRoaXMuZnJvbUNvbXBvbmVudFByb3ZpZGVyKGNvbmZpZy5jb21wb25lbnRQcm92aWRlciwgcGFyYW1zLCBjb250ZXh0KSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzVGVtcGxhdGUoZGVmYXVsdFRlbXBsYXRlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZnJvbSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZSBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nIG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBodG1sIHRlbXBsYXRlIGFzIGEgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBwYXJhbXMgUGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3xvYmplY3R9IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2UgZm9yIHRoYXRcbiAgICAgKiBzdHJpbmcuXG4gICAgICovXG4gICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24odGVtcGxhdGUpID8gdGVtcGxhdGUocGFyYW1zKSA6IHRlbXBsYXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZHMgYSB0ZW1wbGF0ZSBmcm9tIHRoZSBhIFVSTCB2aWEgYCRodHRwYCBhbmQgYCR0ZW1wbGF0ZUNhY2hlYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEZ1bmN0aW9ufSB1cmwgdXJsIG9mIHRoZSB0ZW1wbGF0ZSB0byBsb2FkLCBvciBhIGZ1bmN0aW9uXG4gICAgICogdGhhdCByZXR1cm5zIGEgdXJsLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgUGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSB1cmwgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfFByb21pc2UuPHN0cmluZz59IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2VcbiAgICAgKiBmb3IgdGhhdCBzdHJpbmcuXG4gICAgICovXG4gICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tVXJsID0gZnVuY3Rpb24gKHVybCwgcGFyYW1zKSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHVybCkpXG4gICAgICAgICAgICB1cmwgPSB1cmwocGFyYW1zKTtcbiAgICAgICAgaWYgKHVybCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICh0aGlzLl91c2VIdHRwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kaHR0cC5nZXQodXJsLCB7IGNhY2hlOiB0aGlzLiR0ZW1wbGF0ZUNhY2hlLCBoZWFkZXJzOiB7IEFjY2VwdDogJ3RleHQvaHRtbCcgfSB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuJHRlbXBsYXRlUmVxdWVzdCh1cmwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRlbXBsYXRlIGJ5IGludm9raW5nIGFuIGluamVjdGFibGUgcHJvdmlkZXIgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXIgRnVuY3Rpb24gdG8gaW52b2tlIHZpYSBgbG9jYWxzYFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluamVjdEZuIGEgZnVuY3Rpb24gdXNlZCB0byBpbnZva2UgdGhlIHRlbXBsYXRlIHByb3ZpZGVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfFByb21pc2UuPHN0cmluZz59IFRoZSB0ZW1wbGF0ZSBodG1sIGFzIGEgc3RyaW5nLCBvciBhIHByb21pc2VcbiAgICAgKiBmb3IgdGhhdCBzdHJpbmcuXG4gICAgICovXG4gICAgVGVtcGxhdGVGYWN0b3J5LnByb3RvdHlwZS5mcm9tUHJvdmlkZXIgPSBmdW5jdGlvbiAocHJvdmlkZXIsIHBhcmFtcywgY29udGV4dCkge1xuICAgICAgICB2YXIgZGVwcyA9IHNlcnZpY2VzLiRpbmplY3Rvci5hbm5vdGF0ZShwcm92aWRlcik7XG4gICAgICAgIHZhciBwcm92aWRlckZuID0gaXNBcnJheShwcm92aWRlcikgPyB0YWlsKHByb3ZpZGVyKSA6IHByb3ZpZGVyO1xuICAgICAgICB2YXIgcmVzb2x2YWJsZSA9IG5ldyBSZXNvbHZhYmxlKCcnLCBwcm92aWRlckZuLCBkZXBzKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmFibGUuZ2V0KGNvbnRleHQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNvbXBvbmVudCdzIHRlbXBsYXRlIGJ5IGludm9raW5nIGFuIGluamVjdGFibGUgcHJvdmlkZXIgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXIgRnVuY3Rpb24gdG8gaW52b2tlIHZpYSBgbG9jYWxzYFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGluamVjdEZuIGEgZnVuY3Rpb24gdXNlZCB0byBpbnZva2UgdGhlIHRlbXBsYXRlIHByb3ZpZGVyXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdGVtcGxhdGUgaHRtbCBhcyBhIHN0cmluZzogXCI8Y29tcG9uZW50LW5hbWUgaW5wdXQxPSc6OiRyZXNvbHZlLmZvbyc+PC9jb21wb25lbnQtbmFtZT5cIi5cbiAgICAgKi9cbiAgICBUZW1wbGF0ZUZhY3RvcnkucHJvdG90eXBlLmZyb21Db21wb25lbnRQcm92aWRlciA9IGZ1bmN0aW9uIChwcm92aWRlciwgcGFyYW1zLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciBkZXBzID0gc2VydmljZXMuJGluamVjdG9yLmFubm90YXRlKHByb3ZpZGVyKTtcbiAgICAgICAgdmFyIHByb3ZpZGVyRm4gPSBpc0FycmF5KHByb3ZpZGVyKSA/IHRhaWwocHJvdmlkZXIpIDogcHJvdmlkZXI7XG4gICAgICAgIHZhciByZXNvbHZhYmxlID0gbmV3IFJlc29sdmFibGUoJycsIHByb3ZpZGVyRm4sIGRlcHMpO1xuICAgICAgICByZXR1cm4gcmVzb2x2YWJsZS5nZXQoY29udGV4dCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZnJvbSBhIGNvbXBvbmVudCdzIG5hbWVcbiAgICAgKlxuICAgICAqIFRoaXMgaW1wbGVtZW50cyByb3V0ZS10by1jb21wb25lbnQuXG4gICAgICogSXQgd29ya3MgYnkgcmV0cmlldmluZyB0aGUgY29tcG9uZW50IChkaXJlY3RpdmUpIG1ldGFkYXRhIGZyb20gdGhlIGluamVjdG9yLlxuICAgICAqIEl0IGFuYWx5c2VzIHRoZSBjb21wb25lbnQncyBiaW5kaW5ncywgdGhlbiBjb25zdHJ1Y3RzIGEgdGVtcGxhdGUgdGhhdCBpbnN0YW50aWF0ZXMgdGhlIGNvbXBvbmVudC5cbiAgICAgKiBUaGUgdGVtcGxhdGUgd2lyZXMgaW5wdXQgYW5kIG91dHB1dCBiaW5kaW5ncyB0byByZXNvbHZlcyBvciBmcm9tIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHVpVmlldyB7b2JqZWN0fSBUaGUgcGFyZW50IHVpLXZpZXcgKGZvciBiaW5kaW5nIG91dHB1dHMgdG8gY2FsbGJhY2tzKVxuICAgICAqIEBwYXJhbSBjb250ZXh0IFRoZSBSZXNvbHZlQ29udGV4dCAoZm9yIGJpbmRpbmcgb3V0cHV0cyB0byBjYWxsYmFja3MgcmV0dXJuZWQgZnJvbSByZXNvbHZlcylcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IHtzdHJpbmd9IENvbXBvbmVudCdzIG5hbWUgaW4gY2FtZWwgY2FzZS5cbiAgICAgKiBAcGFyYW0gYmluZGluZ3MgQW4gb2JqZWN0IGRlZmluaW5nIHRoZSBjb21wb25lbnQncyBiaW5kaW5nczoge2ZvbzogJzwnfVxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRlbXBsYXRlIGFzIGEgc3RyaW5nOiBcIjxjb21wb25lbnQtbmFtZSBpbnB1dDE9Jzo6JHJlc29sdmUuZm9vJz48L2NvbXBvbmVudC1uYW1lPlwiLlxuICAgICAqL1xuICAgIFRlbXBsYXRlRmFjdG9yeS5wcm90b3R5cGUubWFrZUNvbXBvbmVudFRlbXBsYXRlID0gZnVuY3Rpb24gKHVpVmlldywgY29udGV4dCwgY29tcG9uZW50LCBiaW5kaW5ncykge1xuICAgICAgICBiaW5kaW5ncyA9IGJpbmRpbmdzIHx8IHt9O1xuICAgICAgICAvLyBCaW5kIG9uY2UgcHJlZml4XG4gICAgICAgIHZhciBwcmVmaXggPSBuZy52ZXJzaW9uLm1pbm9yID49IDMgPyAnOjonIDogJyc7XG4gICAgICAgIC8vIENvbnZlcnQgdG8ga2Vib2IgbmFtZS4gQWRkIHgtIHByZWZpeCBpZiB0aGUgc3RyaW5nIHN0YXJ0cyB3aXRoIGB4LWAgb3IgYGRhdGEtYFxuICAgICAgICB2YXIga2Vib2IgPSBmdW5jdGlvbiAoY2FtZWxDYXNlKSB7XG4gICAgICAgICAgICB2YXIga2Vib2JlZCA9IGtlYm9iU3RyaW5nKGNhbWVsQ2FzZSk7XG4gICAgICAgICAgICByZXR1cm4gL14oeHxkYXRhKS0vLmV4ZWMoa2Vib2JlZCkgPyBcIngtXCIgKyBrZWJvYmVkIDoga2Vib2JlZDtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZVRwbCA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBpbnB1dC5uYW1lLCB0eXBlID0gaW5wdXQudHlwZTtcbiAgICAgICAgICAgIHZhciBhdHRyTmFtZSA9IGtlYm9iKG5hbWUpO1xuICAgICAgICAgICAgLy8gSWYgdGhlIHVpLXZpZXcgaGFzIGFuIGF0dHJpYnV0ZSB3aGljaCBtYXRjaGVzIGEgYmluZGluZyBvbiB0aGUgcm91dGVkIGNvbXBvbmVudFxuICAgICAgICAgICAgLy8gdGhlbiBwYXNzIHRoYXQgYXR0cmlidXRlIHRocm91Z2ggdG8gdGhlIHJvdXRlZCBjb21wb25lbnQgdGVtcGxhdGUuXG4gICAgICAgICAgICAvLyBQcmVmZXIgdWktdmlldyB3aXJlZCBtYXBwaW5ncyB0byByZXNvbHZlIGRhdGEsIHVubGVzcyB0aGUgcmVzb2x2ZSB3YXMgZXhwbGljaXRseSBib3VuZCB1c2luZyBgYmluZGluZ3M6YFxuICAgICAgICAgICAgaWYgKHVpVmlldy5hdHRyKGF0dHJOYW1lKSAmJiAhYmluZGluZ3NbbmFtZV0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJOYW1lICsgXCI9J1wiICsgdWlWaWV3LmF0dHIoYXR0ck5hbWUpICsgXCInXCI7XG4gICAgICAgICAgICB2YXIgcmVzb2x2ZU5hbWUgPSBiaW5kaW5nc1tuYW1lXSB8fCBuYW1lO1xuICAgICAgICAgICAgLy8gUHJlLWV2YWx1YXRlIHRoZSBleHByZXNzaW9uIGZvciBcIkBcIiBiaW5kaW5ncyBieSBlbmNsb3NpbmcgaW4ge3sgfX1cbiAgICAgICAgICAgIC8vIHNvbWUtYXR0cj1cInt7IDo6JHJlc29sdmUuc29tZVJlc29sdmVOYW1lIH19XCJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnQCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJOYW1lICsgXCI9J3t7XCIgKyBwcmVmaXggKyBcIiRyZXNvbHZlLlwiICsgcmVzb2x2ZU5hbWUgKyBcIn19J1wiO1xuICAgICAgICAgICAgLy8gV2lyZSBcIiZcIiBjYWxsYmFja3MgdG8gcmVzb2x2ZXMgdGhhdCByZXR1cm4gYSBjYWxsYmFjayBmdW5jdGlvblxuICAgICAgICAgICAgLy8gR2V0IHRoZSByZXN1bHQgb2YgdGhlIHJlc29sdmUgKHNob3VsZCBiZSBhIGZ1bmN0aW9uKSBhbmQgYW5ub3RhdGUgaXQgdG8gZ2V0IGl0cyBhcmd1bWVudHMuXG4gICAgICAgICAgICAvLyBzb21lLWF0dHI9XCIkcmVzb2x2ZS5zb21lUmVzb2x2ZVJlc3VsdE5hbWUoZm9vLCBiYXIpXCJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnJicpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gY29udGV4dC5nZXRSZXNvbHZhYmxlKHJlc29sdmVOYW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgZm4gPSByZXMgJiYgcmVzLmRhdGE7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBmbiAmJiBzZXJ2aWNlcy4kaW5qZWN0b3IuYW5ub3RhdGUoZm4pIHx8IFtdO1xuICAgICAgICAgICAgICAgIC8vIGFjY291bnQgZm9yIGFycmF5IHN0eWxlIGluamVjdGlvbiwgaS5lLiwgWydmb28nLCBmdW5jdGlvbihmb28pIHt9XVxuICAgICAgICAgICAgICAgIHZhciBhcnJheUlkeFN0ciA9IGlzQXJyYXkoZm4pID8gXCJbXCIgKyAoZm4ubGVuZ3RoIC0gMSkgKyBcIl1cIiA6ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiBhdHRyTmFtZSArIFwiPSckcmVzb2x2ZS5cIiArIHJlc29sdmVOYW1lICsgYXJyYXlJZHhTdHIgKyBcIihcIiArIGFyZ3Muam9pbignLCcpICsgXCIpJ1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc29tZS1hdHRyPVwiOjokcmVzb2x2ZS5zb21lUmVzb2x2ZU5hbWVcIlxuICAgICAgICAgICAgcmV0dXJuIGF0dHJOYW1lICsgXCI9J1wiICsgcHJlZml4ICsgXCIkcmVzb2x2ZS5cIiArIHJlc29sdmVOYW1lICsgXCInXCI7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBhdHRycyA9IGdldENvbXBvbmVudEJpbmRpbmdzKGNvbXBvbmVudCkubWFwKGF0dHJpYnV0ZVRwbCkuam9pbignICcpO1xuICAgICAgICB2YXIga2Vib2JOYW1lID0ga2Vib2IoY29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuIFwiPFwiICsga2Vib2JOYW1lICsgXCIgXCIgKyBhdHRycyArIFwiPjwvXCIgKyBrZWJvYk5hbWUgKyBcIj5cIjtcbiAgICB9O1xuICAgIHJldHVybiBUZW1wbGF0ZUZhY3Rvcnk7XG59KCkpO1xuLy8gR2V0cyBhbGwgdGhlIGRpcmVjdGl2ZShzKScgaW5wdXRzICgnQCcsICc9JywgYW5kICc8JykgYW5kIG91dHB1dHMgKCcmJylcbmZ1bmN0aW9uIGdldENvbXBvbmVudEJpbmRpbmdzKG5hbWUpIHtcbiAgICB2YXIgY21wRGVmcyA9IHNlcnZpY2VzLiRpbmplY3Rvci5nZXQobmFtZSArICdEaXJlY3RpdmUnKTsgLy8gY291bGQgYmUgbXVsdGlwbGVcbiAgICBpZiAoIWNtcERlZnMgfHwgIWNtcERlZnMubGVuZ3RoKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZmluZCBjb21wb25lbnQgbmFtZWQgJ1wiICsgbmFtZSArIFwiJ1wiKTtcbiAgICByZXR1cm4gY21wRGVmcy5tYXAoZ2V0QmluZGluZ3MpLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG59XG4vLyBHaXZlbiBhIGRpcmVjdGl2ZSBkZWZpbml0aW9uLCBmaW5kIGl0cyBvYmplY3QgaW5wdXQgYXR0cmlidXRlc1xuLy8gVXNlIGRpZmZlcmVudCBwcm9wZXJ0aWVzLCBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2YgZGlyZWN0aXZlIChjb21wb25lbnQsIGJpbmRUb0NvbnRyb2xsZXIsIG5vcm1hbClcbnZhciBnZXRCaW5kaW5ncyA9IGZ1bmN0aW9uIChkZWYpIHtcbiAgICBpZiAoaXNPYmplY3QoZGVmLmJpbmRUb0NvbnRyb2xsZXIpKVxuICAgICAgICByZXR1cm4gc2NvcGVCaW5kaW5ncyhkZWYuYmluZFRvQ29udHJvbGxlcik7XG4gICAgcmV0dXJuIHNjb3BlQmluZGluZ3MoZGVmLnNjb3BlKTtcbn07XG4vLyBmb3IgbmcgMS4yIHN0eWxlLCBwcm9jZXNzIHRoZSBzY29wZTogeyBpbnB1dDogXCI9Zm9vXCIgfVxuLy8gZm9yIG5nIDEuMyB0aHJvdWdoIG5nIDEuNSwgcHJvY2VzcyB0aGUgY29tcG9uZW50J3MgYmluZFRvQ29udHJvbGxlcjogeyBpbnB1dDogXCI9Zm9vXCIgfSBvYmplY3RcbnZhciBzY29wZUJpbmRpbmdzID0gZnVuY3Rpb24gKGJpbmRpbmdzT2JqKSB7IHJldHVybiBPYmplY3Qua2V5cyhiaW5kaW5nc09iaiB8fCB7fSlcbiAgICAubWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIFtrZXksIC9eKFs9PEAmXSlbP10/KC4qKS8uZXhlYyhiaW5kaW5nc09ialtrZXldKV07IH0pXG4gICAgLmZpbHRlcihmdW5jdGlvbiAodHVwbGUpIHsgcmV0dXJuIGlzRGVmaW5lZCh0dXBsZSkgJiYgaXNBcnJheSh0dXBsZVsxXSk7IH0pXG4gICAgLm1hcChmdW5jdGlvbiAodHVwbGUpIHsgcmV0dXJuICh7IG5hbWU6IHR1cGxlWzFdWzJdIHx8IHR1cGxlWzBdLCB0eXBlOiB0dXBsZVsxXVsxXSB9KTsgfSk7IH07XG5cbi8qKiBAbW9kdWxlIG5nMSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbi8qKlxuICogVGhlIEFuZ3VsYXIgMSBgU3RhdGVQcm92aWRlcmBcbiAqXG4gKiBUaGUgYCRzdGF0ZVByb3ZpZGVyYCB3b3JrcyBzaW1pbGFyIHRvIEFuZ3VsYXIncyB2MSByb3V0ZXIsIGJ1dCBpdCBmb2N1c2VzIHB1cmVseVxuICogb24gc3RhdGUuXG4gKlxuICogQSBzdGF0ZSBjb3JyZXNwb25kcyB0byBhIFwicGxhY2VcIiBpbiB0aGUgYXBwbGljYXRpb24gaW4gdGVybXMgb2YgdGhlIG92ZXJhbGwgVUkgYW5kXG4gKiBuYXZpZ2F0aW9uLiBBIHN0YXRlIGRlc2NyaWJlcyAodmlhIHRoZSBjb250cm9sbGVyIC8gdGVtcGxhdGUgLyB2aWV3IHByb3BlcnRpZXMpIHdoYXRcbiAqIHRoZSBVSSBsb29rcyBsaWtlIGFuZCBkb2VzIGF0IHRoYXQgcGxhY2UuXG4gKlxuICogU3RhdGVzIG9mdGVuIGhhdmUgdGhpbmdzIGluIGNvbW1vbiwgYW5kIHRoZSBwcmltYXJ5IHdheSBvZiBmYWN0b3Jpbmcgb3V0IHRoZXNlXG4gKiBjb21tb25hbGl0aWVzIGluIHRoaXMgbW9kZWwgaXMgdmlhIHRoZSBzdGF0ZSBoaWVyYXJjaHksIGkuZS4gcGFyZW50L2NoaWxkIHN0YXRlcyBha2FcbiAqIG5lc3RlZCBzdGF0ZXMuXG4gKlxuICogVGhlIGAkc3RhdGVQcm92aWRlcmAgcHJvdmlkZXMgaW50ZXJmYWNlcyB0byBkZWNsYXJlIHRoZXNlIHN0YXRlcyBmb3IgeW91ciBhcHAuXG4gKi9cbnZhciBTdGF0ZVByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN0YXRlUHJvdmlkZXIoc3RhdGVSZWdpc3RyeSwgc3RhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuc3RhdGVSZWdpc3RyeSA9IHN0YXRlUmVnaXN0cnk7XG4gICAgICAgIHRoaXMuc3RhdGVTZXJ2aWNlID0gc3RhdGVTZXJ2aWNlO1xuICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyh2YWwoU3RhdGVQcm92aWRlci5wcm90b3R5cGUpLCB0aGlzLCB2YWwodGhpcykpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvcmF0ZXMgc3RhdGVzIHdoZW4gdGhleSBhcmUgcmVnaXN0ZXJlZFxuICAgICAqXG4gICAgICogQWxsb3dzIHlvdSB0byBleHRlbmQgKGNhcmVmdWxseSkgb3Igb3ZlcnJpZGUgKGF0IHlvdXIgb3duIHBlcmlsKSB0aGVcbiAgICAgKiBgc3RhdGVCdWlsZGVyYCBvYmplY3QgdXNlZCBpbnRlcm5hbGx5IGJ5IFtbU3RhdGVSZWdpc3RyeV1dLlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gYWRkIGN1c3RvbSBmdW5jdGlvbmFsaXR5IHRvIHVpLXJvdXRlcixcbiAgICAgKiBmb3IgZXhhbXBsZSBpbmZlcnJpbmcgdGVtcGxhdGVVcmwgYmFzZWQgb24gdGhlIHN0YXRlIG5hbWUuXG4gICAgICpcbiAgICAgKiBXaGVuIHBhc3Npbmcgb25seSBhIG5hbWUsIGl0IHJldHVybnMgdGhlIGN1cnJlbnQgKG9yaWdpbmFsIG9yIGRlY29yYXRlZCkgYnVpbGRlclxuICAgICAqIGZ1bmN0aW9uIHRoYXQgbWF0Y2hlcyBgbmFtZWAuXG4gICAgICpcbiAgICAgKiBUaGUgYnVpbGRlciBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgZGVjb3JhdGVkIGFyZSBsaXN0ZWQgYmVsb3cuIFRob3VnaCBub3QgYWxsXG4gICAgICogbmVjZXNzYXJpbHkgaGF2ZSBhIGdvb2QgdXNlIGNhc2UgZm9yIGRlY29yYXRpb24sIHRoYXQgaXMgdXAgdG8geW91IHRvIGRlY2lkZS5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uLCB1c2VycyBjYW4gYXR0YWNoIGN1c3RvbSBkZWNvcmF0b3JzLCB3aGljaCB3aWxsIGdlbmVyYXRlIG5ld1xuICAgICAqIHByb3BlcnRpZXMgd2l0aGluIHRoZSBzdGF0ZSdzIGludGVybmFsIGRlZmluaXRpb24uIFRoZXJlIGlzIGN1cnJlbnRseSBubyBjbGVhclxuICAgICAqIHVzZS1jYXNlIGZvciB0aGlzIGJleW9uZCBhY2Nlc3NpbmcgaW50ZXJuYWwgc3RhdGVzIChpLmUuICRzdGF0ZS4kY3VycmVudCksXG4gICAgICogaG93ZXZlciwgZXhwZWN0IHRoaXMgdG8gYmVjb21lIGluY3JlYXNpbmdseSByZWxldmFudCBhcyB3ZSBpbnRyb2R1Y2UgYWRkaXRpb25hbFxuICAgICAqIG1ldGEtcHJvZ3JhbW1pbmcgZmVhdHVyZXMuXG4gICAgICpcbiAgICAgKiAqKldhcm5pbmcqKjogRGVjb3JhdG9ycyBzaG91bGQgbm90IGJlIGludGVyZGVwZW5kZW50IGJlY2F1c2UgdGhlIG9yZGVyIG9mXG4gICAgICogZXhlY3V0aW9uIG9mIHRoZSBidWlsZGVyIGZ1bmN0aW9ucyBpbiBub24tZGV0ZXJtaW5pc3RpYy4gQnVpbGRlciBmdW5jdGlvbnNcbiAgICAgKiBzaG91bGQgb25seSBiZSBkZXBlbmRlbnQgb24gdGhlIHN0YXRlIGRlZmluaXRpb24gb2JqZWN0IGFuZCBzdXBlciBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqXG4gICAgICogRXhpc3RpbmcgYnVpbGRlciBmdW5jdGlvbnMgYW5kIGN1cnJlbnQgcmV0dXJuIHZhbHVlczpcbiAgICAgKlxuICAgICAqIC0gKipwYXJlbnQqKiBge29iamVjdH1gIC0gcmV0dXJucyB0aGUgcGFyZW50IHN0YXRlIG9iamVjdC5cbiAgICAgKiAtICoqZGF0YSoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIHN0YXRlIGRhdGEsIGluY2x1ZGluZyBhbnkgaW5oZXJpdGVkIGRhdGEgdGhhdCBpcyBub3RcbiAgICAgKiAgIG92ZXJyaWRkZW4gYnkgb3duIHZhbHVlcyAoaWYgYW55KS5cbiAgICAgKiAtICoqdXJsKiogYHtvYmplY3R9YCAtIHJldHVybnMgYSB7QGxpbmsgdWkucm91dGVyLnV0aWwudHlwZTpVcmxNYXRjaGVyIFVybE1hdGNoZXJ9XG4gICAgICogICBvciBgbnVsbGAuXG4gICAgICogLSAqKm5hdmlnYWJsZSoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGNsb3Nlc3QgYW5jZXN0b3Igc3RhdGUgdGhhdCBoYXMgYSBVUkwgKGFrYSBpc1xuICAgICAqICAgbmF2aWdhYmxlKS5cbiAgICAgKiAtICoqcGFyYW1zKiogYHtvYmplY3R9YCAtIHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGUgcGFyYW1zIHRoYXQgYXJlIGVuc3VyZWQgdG9cbiAgICAgKiAgIGJlIGEgc3VwZXItc2V0IG9mIHBhcmVudCdzIHBhcmFtcy5cbiAgICAgKiAtICoqdmlld3MqKiBge29iamVjdH1gIC0gcmV0dXJucyBhIHZpZXdzIG9iamVjdCB3aGVyZSBlYWNoIGtleSBpcyBhbiBhYnNvbHV0ZSB2aWV3XG4gICAgICogICBuYW1lIChpLmUuIFwidmlld05hbWVAc3RhdGVOYW1lXCIpIGFuZCBlYWNoIHZhbHVlIGlzIHRoZSBjb25maWcgb2JqZWN0XG4gICAgICogICAodGVtcGxhdGUsIGNvbnRyb2xsZXIpIGZvciB0aGUgdmlldy4gRXZlbiB3aGVuIHlvdSBkb24ndCB1c2UgdGhlIHZpZXdzIG9iamVjdFxuICAgICAqICAgZXhwbGljaXRseSBvbiBhIHN0YXRlIGNvbmZpZywgb25lIGlzIHN0aWxsIGNyZWF0ZWQgZm9yIHlvdSBpbnRlcm5hbGx5LlxuICAgICAqICAgU28gYnkgZGVjb3JhdGluZyB0aGlzIGJ1aWxkZXIgZnVuY3Rpb24geW91IGhhdmUgYWNjZXNzIHRvIGRlY29yYXRpbmcgdGVtcGxhdGVcbiAgICAgKiAgIGFuZCBjb250cm9sbGVyIHByb3BlcnRpZXMuXG4gICAgICogLSAqKm93blBhcmFtcyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGFuIGFycmF5IG9mIHBhcmFtcyB0aGF0IGJlbG9uZyB0byB0aGUgc3RhdGUsXG4gICAgICogICBub3QgaW5jbHVkaW5nIGFueSBwYXJhbXMgZGVmaW5lZCBieSBhbmNlc3RvciBzdGF0ZXMuXG4gICAgICogLSAqKnBhdGgqKiBge3N0cmluZ31gIC0gcmV0dXJucyB0aGUgZnVsbCBwYXRoIGZyb20gdGhlIHJvb3QgZG93biB0byB0aGlzIHN0YXRlLlxuICAgICAqICAgTmVlZGVkIGZvciBzdGF0ZSBhY3RpdmF0aW9uLlxuICAgICAqIC0gKippbmNsdWRlcyoqIGB7b2JqZWN0fWAgLSByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGluY2x1ZGVzIGV2ZXJ5IHN0YXRlIHRoYXRcbiAgICAgKiAgIHdvdWxkIHBhc3MgYSBgJHN0YXRlLmluY2x1ZGVzKClgIHRlc3QuXG4gICAgICpcbiAgICAgKiAjIyMjIEV4YW1wbGU6XG4gICAgICogT3ZlcnJpZGUgdGhlIGludGVybmFsICd2aWV3cycgYnVpbGRlciB3aXRoIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgc3RhdGVcbiAgICAgKiBkZWZpbml0aW9uLCBhbmQgYSByZWZlcmVuY2UgdG8gdGhlIGludGVybmFsIGZ1bmN0aW9uIGJlaW5nIG92ZXJyaWRkZW46XG4gICAgICogYGBganNcbiAgICAgKiAkc3RhdGVQcm92aWRlci5kZWNvcmF0b3IoJ3ZpZXdzJywgZnVuY3Rpb24gKHN0YXRlLCBwYXJlbnQpIHtcbiAgICAgKiAgIGxldCByZXN1bHQgPSB7fSxcbiAgICAgKiAgICAgICB2aWV3cyA9IHBhcmVudChzdGF0ZSk7XG4gICAgICpcbiAgICAgKiAgIGFuZ3VsYXIuZm9yRWFjaCh2aWV3cywgZnVuY3Rpb24gKGNvbmZpZywgbmFtZSkge1xuICAgICAqICAgICBsZXQgYXV0b05hbWUgPSAoc3RhdGUubmFtZSArICcuJyArIG5hbWUpLnJlcGxhY2UoJy4nLCAnLycpO1xuICAgICAqICAgICBjb25maWcudGVtcGxhdGVVcmwgPSBjb25maWcudGVtcGxhdGVVcmwgfHwgJy9wYXJ0aWFscy8nICsgYXV0b05hbWUgKyAnLmh0bWwnO1xuICAgICAqICAgICByZXN1bHRbbmFtZV0gPSBjb25maWc7XG4gICAgICogICB9KTtcbiAgICAgKiAgIHJldHVybiByZXN1bHQ7XG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcbiAgICAgKiAgIHZpZXdzOiB7XG4gICAgICogICAgICdjb250YWN0Lmxpc3QnOiB7IGNvbnRyb2xsZXI6ICdMaXN0Q29udHJvbGxlcicgfSxcbiAgICAgKiAgICAgJ2NvbnRhY3QuaXRlbSc6IHsgY29udHJvbGxlcjogJ0l0ZW1Db250cm9sbGVyJyB9XG4gICAgICogICB9XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogLy8gQXV0by1wb3B1bGF0ZXMgbGlzdCBhbmQgaXRlbSB2aWV3cyB3aXRoIC9wYXJ0aWFscy9ob21lL2NvbnRhY3QvbGlzdC5odG1sLFxuICAgICAqIC8vIGFuZCAvcGFydGlhbHMvaG9tZS9jb250YWN0L2l0ZW0uaHRtbCwgcmVzcGVjdGl2ZWx5LlxuICAgICAqICRzdGF0ZS5nbygnaG9tZScpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGJ1aWxkZXIgZnVuY3Rpb24gdG8gZGVjb3JhdGUuXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGZ1bmMgQSBmdW5jdGlvbiB0aGF0IGlzIHJlc3BvbnNpYmxlIGZvciBkZWNvcmF0aW5nIHRoZSBvcmlnaW5hbFxuICAgICAqIGJ1aWxkZXIgZnVuY3Rpb24uIFRoZSBmdW5jdGlvbiByZWNlaXZlcyB0d28gcGFyYW1ldGVyczpcbiAgICAgKlxuICAgICAqICAgLSBge29iamVjdH1gIC0gc3RhdGUgLSBUaGUgc3RhdGUgY29uZmlnIG9iamVjdC5cbiAgICAgKiAgIC0gYHtvYmplY3R9YCAtIHN1cGVyIC0gVGhlIG9yaWdpbmFsIGJ1aWxkZXIgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICRzdGF0ZVByb3ZpZGVyIC0gJHN0YXRlUHJvdmlkZXIgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBTdGF0ZVByb3ZpZGVyLnByb3RvdHlwZS5kZWNvcmF0b3IgPSBmdW5jdGlvbiAobmFtZSwgZnVuYykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcihuYW1lLCBmdW5jKSB8fCB0aGlzO1xuICAgIH07XG4gICAgU3RhdGVQcm92aWRlci5wcm90b3R5cGUuc3RhdGUgPSBmdW5jdGlvbiAobmFtZSwgZGVmaW5pdGlvbikge1xuICAgICAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24gPSBuYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gbmFtZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlUmVnaXN0cnkucmVnaXN0ZXIoZGVmaW5pdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGFuIGludmFsaWQgc3RhdGUgaGFuZGxlclxuICAgICAqXG4gICAgICogVGhpcyBpcyBhIHBhc3N0aHJvdWdoIHRvIFtbU3RhdGVTZXJ2aWNlLm9uSW52YWxpZF1dIGZvciBuZzEuXG4gICAgICovXG4gICAgU3RhdGVQcm92aWRlci5wcm90b3R5cGUub25JbnZhbGlkID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlU2VydmljZS5vbkludmFsaWQoY2FsbGJhY2spO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRlUHJvdmlkZXI7XG59KCkpO1xuXG4vKiogQG1vZHVsZSBuZzEgKi8gLyoqICovXG4vKipcbiAqIFRoaXMgaXMgYSBbW1N0YXRlQnVpbGRlci5idWlsZGVyXV0gZnVuY3Rpb24gZm9yIGFuZ3VsYXIxIGBvbkVudGVyYCwgYG9uRXhpdGAsXG4gKiBgb25SZXRhaW5gIGNhbGxiYWNrIGhvb2tzIG9uIGEgW1tOZzFTdGF0ZURlY2xhcmF0aW9uXV0uXG4gKlxuICogV2hlbiB0aGUgW1tTdGF0ZUJ1aWxkZXJdXSBidWlsZHMgYSBbW1N0YXRlT2JqZWN0XV0gb2JqZWN0IGZyb20gYSByYXcgW1tTdGF0ZURlY2xhcmF0aW9uXV0sIHRoaXMgYnVpbGRlclxuICogZW5zdXJlcyB0aGF0IHRob3NlIGhvb2tzIGFyZSBpbmplY3RhYmxlIGZvciBAdWlyb3V0ZXIvYW5ndWxhcmpzIChuZzEpLlxuICovXG52YXIgZ2V0U3RhdGVIb29rQnVpbGRlciA9IGZ1bmN0aW9uIChob29rTmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZUhvb2tCdWlsZGVyKHN0YXRlT2JqZWN0LCBwYXJlbnRGbikge1xuICAgICAgICB2YXIgaG9vayA9IHN0YXRlT2JqZWN0W2hvb2tOYW1lXTtcbiAgICAgICAgdmFyIHBhdGhuYW1lID0gaG9va05hbWUgPT09ICdvbkV4aXQnID8gJ2Zyb20nIDogJ3RvJztcbiAgICAgICAgZnVuY3Rpb24gZGVjb3JhdGVkTmcxSG9vayh0cmFucywgc3RhdGUpIHtcbiAgICAgICAgICAgIHZhciByZXNvbHZlQ29udGV4dCA9IG5ldyBSZXNvbHZlQ29udGV4dCh0cmFucy50cmVlQ2hhbmdlcyhwYXRobmFtZSkpO1xuICAgICAgICAgICAgdmFyIHN1YkNvbnRleHQgPSByZXNvbHZlQ29udGV4dC5zdWJDb250ZXh0KHN0YXRlLiQkc3RhdGUoKSk7XG4gICAgICAgICAgICB2YXIgbG9jYWxzID0gZXh0ZW5kKGdldExvY2FscyhzdWJDb250ZXh0KSwgeyAkc3RhdGUkOiBzdGF0ZSwgJHRyYW5zaXRpb24kOiB0cmFucyB9KTtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKGhvb2ssIHRoaXMsIGxvY2Fscyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhvb2sgPyBkZWNvcmF0ZWROZzFIb29rIDogdW5kZWZpbmVkO1xuICAgIH07XG59O1xuXG4vKipcbiAqIEBpbnRlcm5hbGFwaVxuICogQG1vZHVsZSBuZzFcbiAqLyAvKiogKi9cbi8qKlxuICogSW1wbGVtZW50cyBVSS1Sb3V0ZXIgTG9jYXRpb25TZXJ2aWNlcyBhbmQgTG9jYXRpb25Db25maWcgdXNpbmcgQW5ndWxhciAxJ3MgJGxvY2F0aW9uIHNlcnZpY2VcbiAqL1xudmFyIE5nMUxvY2F0aW9uU2VydmljZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTmcxTG9jYXRpb25TZXJ2aWNlcygkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAvLyAub25DaGFuZ2UoKSByZWdpc3RyeVxuICAgICAgICB0aGlzLl91cmxMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy4kbG9jYXRpb25Qcm92aWRlciA9ICRsb2NhdGlvblByb3ZpZGVyO1xuICAgICAgICB2YXIgX2xwID0gdmFsKCRsb2NhdGlvblByb3ZpZGVyKTtcbiAgICAgICAgY3JlYXRlUHJveHlGdW5jdGlvbnMoX2xwLCB0aGlzLCBfbHAsIFsnaGFzaFByZWZpeCddKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbHlzIG5nMS1zcGVjaWZpYyBwYXRoIHBhcmFtZXRlciBlbmNvZGluZ1xuICAgICAqXG4gICAgICogVGhlIEFuZ3VsYXIgMSBgJGxvY2F0aW9uYCBzZXJ2aWNlIGlzIGEgYml0IHdlaXJkLlxuICAgICAqIEl0IGRvZXNuJ3QgYWxsb3cgc2xhc2hlcyB0byBiZSBlbmNvZGVkL2RlY29kZWQgYmktZGlyZWN0aW9uYWxseS5cbiAgICAgKlxuICAgICAqIFNlZSB0aGUgd3JpdGV1cCBhdCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXIvaXNzdWVzLzI1OThcbiAgICAgKlxuICAgICAqIFRoaXMgY29kZSBwYXRjaGVzIHRoZSBgcGF0aGAgcGFyYW1ldGVyIHR5cGUgc28gaXQgZW5jb2RlZC9kZWNvZGVzIHNsYXNoZXMgYXMgfjJGXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcm91dGVyXG4gICAgICovXG4gICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5tb25rZXlQYXRjaFBhdGhQYXJhbWV0ZXJUeXBlID0gZnVuY3Rpb24gKHJvdXRlcikge1xuICAgICAgICB2YXIgcGF0aFR5cGUgPSByb3V0ZXIudXJsTWF0Y2hlckZhY3RvcnkudHlwZSgncGF0aCcpO1xuICAgICAgICBwYXRoVHlwZS5lbmNvZGUgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHggIT0gbnVsbCA/IHgudG9TdHJpbmcoKS5yZXBsYWNlKC8ofnxcXC8pL2csIGZ1bmN0aW9uIChtKSB7IHJldHVybiAoeyAnfic6ICd+ficsICcvJzogJ34yRicgfVttXSk7IH0pIDogeDtcbiAgICAgICAgfTtcbiAgICAgICAgcGF0aFR5cGUuZGVjb2RlID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB4ICE9IG51bGwgPyB4LnRvU3RyaW5nKCkucmVwbGFjZSgvKH5+fH4yRikvZywgZnVuY3Rpb24gKG0pIHsgcmV0dXJuICh7ICd+fic6ICd+JywgJ34yRic6ICcvJyB9W21dKTsgfSkgOiB4O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBOZzFMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS5vbkNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLl91cmxMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiByZW1vdmVGcm9tKF90aGlzLl91cmxMaXN0ZW5lcnMpKGNhbGxiYWNrKTsgfTtcbiAgICB9O1xuICAgIE5nMUxvY2F0aW9uU2VydmljZXMucHJvdG90eXBlLmh0bWw1TW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGh0bWw1TW9kZSA9IHRoaXMuJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKCk7XG4gICAgICAgIGh0bWw1TW9kZSA9IGlzT2JqZWN0KGh0bWw1TW9kZSkgPyBodG1sNU1vZGUuZW5hYmxlZCA6IGh0bWw1TW9kZTtcbiAgICAgICAgcmV0dXJuIGh0bWw1TW9kZSAmJiB0aGlzLiRzbmlmZmVyLmhpc3Rvcnk7XG4gICAgfTtcbiAgICBOZzFMb2NhdGlvblNlcnZpY2VzLnByb3RvdHlwZS51cmwgPSBmdW5jdGlvbiAobmV3VXJsLCByZXBsYWNlLCBzdGF0ZSkge1xuICAgICAgICBpZiAocmVwbGFjZSA9PT0gdm9pZCAwKSB7IHJlcGxhY2UgPSBmYWxzZTsgfVxuICAgICAgICBpZiAoaXNEZWZpbmVkKG5ld1VybCkpXG4gICAgICAgICAgICB0aGlzLiRsb2NhdGlvbi51cmwobmV3VXJsKTtcbiAgICAgICAgaWYgKHJlcGxhY2UpXG4gICAgICAgICAgICB0aGlzLiRsb2NhdGlvbi5yZXBsYWNlKCk7XG4gICAgICAgIGlmIChzdGF0ZSlcbiAgICAgICAgICAgIHRoaXMuJGxvY2F0aW9uLnN0YXRlKHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGxvY2F0aW9uLnVybCgpO1xuICAgIH07XG4gICAgTmcxTG9jYXRpb25TZXJ2aWNlcy5wcm90b3R5cGUuX3J1bnRpbWVTZXJ2aWNlcyA9IGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzbmlmZmVyLCAkYnJvd3Nlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLiRsb2NhdGlvbiA9ICRsb2NhdGlvbjtcbiAgICAgICAgdGhpcy4kc25pZmZlciA9ICRzbmlmZmVyO1xuICAgICAgICAvLyBCaW5kICRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MgdG8gdGhlIGxpc3RlbmVycyByZWdpc3RlcmVkIGluIExvY2F0aW9uU2VydmljZS5vbkNoYW5nZVxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uIChldnQpIHsgcmV0dXJuIF90aGlzLl91cmxMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuKGV2dCk7IH0pOyB9KTtcbiAgICAgICAgdmFyIF9sb2MgPSB2YWwoJGxvY2F0aW9uKTtcbiAgICAgICAgdmFyIF9icm93c2VyID0gdmFsKCRicm93c2VyKTtcbiAgICAgICAgLy8gQmluZCB0aGVzZSBMb2NhdGlvblNlcnZpY2UgZnVuY3Rpb25zIHRvICRsb2NhdGlvblxuICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhfbG9jLCB0aGlzLCBfbG9jLCBbJ3JlcGxhY2UnLCAncGF0aCcsICdzZWFyY2gnLCAnaGFzaCddKTtcbiAgICAgICAgLy8gQmluZCB0aGVzZSBMb2NhdGlvbkNvbmZpZyBmdW5jdGlvbnMgdG8gJGxvY2F0aW9uXG4gICAgICAgIGNyZWF0ZVByb3h5RnVuY3Rpb25zKF9sb2MsIHRoaXMsIF9sb2MsIFsncG9ydCcsICdwcm90b2NvbCcsICdob3N0J10pO1xuICAgICAgICAvLyBCaW5kIHRoZXNlIExvY2F0aW9uQ29uZmlnIGZ1bmN0aW9ucyB0byAkYnJvd3NlclxuICAgICAgICBjcmVhdGVQcm94eUZ1bmN0aW9ucyhfYnJvd3NlciwgdGhpcywgX2Jyb3dzZXIsIFsnYmFzZUhyZWYnXSk7XG4gICAgfTtcbiAgICByZXR1cm4gTmcxTG9jYXRpb25TZXJ2aWNlcztcbn0oKSk7XG5cbi8qKiBAbW9kdWxlIHVybCAqLyAvKiogKi9cbi8qKlxuICogTWFuYWdlcyBydWxlcyBmb3IgY2xpZW50LXNpZGUgVVJMXG4gKlxuICogIyMjIERlcHJlY2F0aW9uIHdhcm5pbmc6XG4gKiBUaGlzIGNsYXNzIGlzIG5vdyBjb25zaWRlcmVkIHRvIGJlIGFuIGludGVybmFsIEFQSVxuICogVXNlIHRoZSBbW1VybFNlcnZpY2VdXSBpbnN0ZWFkLlxuICogRm9yIGNvbmZpZ3VyaW5nIFVSTCBydWxlcywgdXNlIHRoZSBbW1VybFJ1bGVzQXBpXV0gd2hpY2ggY2FuIGJlIGZvdW5kIGFzIFtbVXJsU2VydmljZS5ydWxlc11dLlxuICpcbiAqIFRoaXMgY2xhc3MgbWFuYWdlcyB0aGUgcm91dGVyIHJ1bGVzIGZvciB3aGF0IHRvIGRvIHdoZW4gdGhlIFVSTCBjaGFuZ2VzLlxuICpcbiAqIFRoaXMgcHJvdmlkZXIgcmVtYWlucyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqL1xudmFyIFVybFJvdXRlclByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAaGlkZGVuICovXG4gICAgZnVuY3Rpb24gVXJsUm91dGVyUHJvdmlkZXIocm91dGVyKSB7XG4gICAgICAgIHRoaXMuX3JvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy5fdXJsUm91dGVyID0gcm91dGVyLnVybFJvdXRlcjtcbiAgICB9XG4gICAgVXJsUm91dGVyUHJvdmlkZXIuaW5qZWN0YWJsZUhhbmRsZXIgPSBmdW5jdGlvbiAocm91dGVyLCBoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlcy4kaW5qZWN0b3IuaW52b2tlKGhhbmRsZXIsIG51bGwsIHsgJG1hdGNoOiBtYXRjaCwgJHN0YXRlUGFyYW1zOiByb3V0ZXIuZ2xvYmFscy5wYXJhbXMgfSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdXJsUm91dGVyID0gdGhpcy5fdXJsUm91dGVyO1xuICAgICAgICB1cmxSb3V0ZXIudXBkYXRlKHRydWUpO1xuICAgICAgICBpZiAoIXVybFJvdXRlci5pbnRlcmNlcHREZWZlcnJlZClcbiAgICAgICAgICAgIHVybFJvdXRlci5saXN0ZW4oKTtcbiAgICAgICAgcmV0dXJuIHVybFJvdXRlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIHVybCBoYW5kbGVyIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogUmVnaXN0ZXJzIGEgbG93IGxldmVsIHVybCBoYW5kbGVyIChhIGBydWxlYCkuXG4gICAgICogQSBydWxlIGRldGVjdHMgc3BlY2lmaWMgVVJMIHBhdHRlcm5zIGFuZCByZXR1cm5zIGEgcmVkaXJlY3QsIG9yIHBlcmZvcm1zIHNvbWUgYWN0aW9uLlxuICAgICAqXG4gICAgICogSWYgYSBydWxlIHJldHVybnMgYSBzdHJpbmcsIHRoZSBVUkwgaXMgcmVwbGFjZWQgd2l0aCB0aGUgc3RyaW5nLCBhbmQgYWxsIHJ1bGVzIGFyZSBmaXJlZCBhZ2Fpbi5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXIucm91dGVyJ10pO1xuICAgICAqXG4gICAgICogYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICogICAvLyBIZXJlJ3MgYW4gZXhhbXBsZSBvZiBob3cgeW91IG1pZ2h0IGFsbG93IGNhc2UgaW5zZW5zaXRpdmUgdXJsc1xuICAgICAqICAgJHVybFJvdXRlclByb3ZpZGVyLnJ1bGUoZnVuY3Rpb24gKCRpbmplY3RvciwgJGxvY2F0aW9uKSB7XG4gICAgICogICAgIHZhciBwYXRoID0gJGxvY2F0aW9uLnBhdGgoKSxcbiAgICAgKiAgICAgICAgIG5vcm1hbGl6ZWQgPSBwYXRoLnRvTG93ZXJDYXNlKCk7XG4gICAgICpcbiAgICAgKiAgICAgaWYgKHBhdGggIT09IG5vcm1hbGl6ZWQpIHtcbiAgICAgKiAgICAgICByZXR1cm4gbm9ybWFsaXplZDtcbiAgICAgKiAgICAgfVxuICAgICAqICAgfSk7XG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcnVsZUZuXG4gICAgICogSGFuZGxlciBmdW5jdGlvbiB0aGF0IHRha2VzIGAkaW5qZWN0b3JgIGFuZCBgJGxvY2F0aW9uYCBzZXJ2aWNlcyBhcyBhcmd1bWVudHMuXG4gICAgICogWW91IGNhbiB1c2UgdGhlbSB0byBkZXRlY3QgYSB1cmwgYW5kIHJldHVybiBhIGRpZmZlcmVudCB1cmwgYXMgYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIFtbVXJsUm91dGVyUHJvdmlkZXJdXSAoYHRoaXNgKVxuICAgICAqL1xuICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS5ydWxlID0gZnVuY3Rpb24gKHJ1bGVGbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIWlzRnVuY3Rpb24ocnVsZUZuKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG4gICAgICAgIHZhciBtYXRjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBydWxlRm4oc2VydmljZXMuJGluamVjdG9yLCBfdGhpcy5fcm91dGVyLmxvY2F0aW9uU2VydmljZSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBydWxlID0gbmV3IEJhc2VVcmxSdWxlKG1hdGNoLCBpZGVudGl0eSk7XG4gICAgICAgIHRoaXMuX3VybFJvdXRlci5ydWxlKHJ1bGUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERlZmluZXMgdGhlIHBhdGggb3IgYmVoYXZpb3IgdG8gdXNlIHdoZW4gbm8gdXJsIGNhbiBiZSBtYXRjaGVkLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlci5yb3V0ZXInXSk7XG4gICAgICpcbiAgICAgKiBhcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgKiAgIC8vIGlmIHRoZSBwYXRoIGRvZXNuJ3QgbWF0Y2ggYW55IG9mIHRoZSB1cmxzIHlvdSBjb25maWd1cmVkXG4gICAgICogICAvLyBvdGhlcndpc2Ugd2lsbCB0YWtlIGNhcmUgb2Ygcm91dGluZyB0aGUgdXNlciB0byB0aGVcbiAgICAgKiAgIC8vIHNwZWNpZmllZCB1cmxcbiAgICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9pbmRleCcpO1xuICAgICAqXG4gICAgICogICAvLyBFeGFtcGxlIG9mIHVzaW5nIGZ1bmN0aW9uIHJ1bGUgYXMgcGFyYW1cbiAgICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoZnVuY3Rpb24gKCRpbmplY3RvciwgJGxvY2F0aW9uKSB7XG4gICAgICogICAgIHJldHVybiAnL2EvdmFsaWQvdXJsJztcbiAgICAgKiAgIH0pO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHJ1bGVcbiAgICAgKiBUaGUgdXJsIHBhdGggeW91IHdhbnQgdG8gcmVkaXJlY3QgdG8gb3IgYSBmdW5jdGlvbiBydWxlIHRoYXQgcmV0dXJucyB0aGUgdXJsIHBhdGggb3IgcGVyZm9ybXMgYSBgJHN0YXRlLmdvKClgLlxuICAgICAqIFRoZSBmdW5jdGlvbiB2ZXJzaW9uIGlzIHBhc3NlZCB0d28gcGFyYW1zOiBgJGluamVjdG9yYCBhbmQgYCRsb2NhdGlvbmAgc2VydmljZXMsIGFuZCBzaG91bGQgcmV0dXJuIGEgdXJsIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge29iamVjdH0gYCR1cmxSb3V0ZXJQcm92aWRlcmAgLSBgJHVybFJvdXRlclByb3ZpZGVyYCBpbnN0YW5jZVxuICAgICAqL1xuICAgIFVybFJvdXRlclByb3ZpZGVyLnByb3RvdHlwZS5vdGhlcndpc2UgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgdXJsUm91dGVyID0gdGhpcy5fdXJsUm91dGVyO1xuICAgICAgICBpZiAoaXNTdHJpbmcocnVsZSkpIHtcbiAgICAgICAgICAgIHVybFJvdXRlci5vdGhlcndpc2UocnVsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNGdW5jdGlvbihydWxlKSkge1xuICAgICAgICAgICAgdXJsUm91dGVyLm90aGVyd2lzZShmdW5jdGlvbiAoKSB7IHJldHVybiBydWxlKHNlcnZpY2VzLiRpbmplY3RvciwgX3RoaXMuX3JvdXRlci5sb2NhdGlvblNlcnZpY2UpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIidydWxlJyBtdXN0IGJlIGEgc3RyaW5nIG9yIGZ1bmN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgaGFuZGxlciBmb3IgYSBnaXZlbiB1cmwgbWF0Y2hpbmcuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgaGFuZGxlciBpcyBhIHN0cmluZywgaXQgaXNcbiAgICAgKiB0cmVhdGVkIGFzIGEgcmVkaXJlY3QsIGFuZCBpcyBpbnRlcnBvbGF0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzeW50YXggb2YgbWF0Y2hcbiAgICAgKiAoaS5lLiBsaWtlIGBTdHJpbmcucmVwbGFjZSgpYCBmb3IgYFJlZ0V4cGAsIG9yIGxpa2UgYSBgVXJsTWF0Y2hlcmAgcGF0dGVybiBvdGhlcndpc2UpLlxuICAgICAqXG4gICAgICogSWYgdGhlIGhhbmRsZXIgaXMgYSBmdW5jdGlvbiwgaXQgaXMgaW5qZWN0YWJsZS5cbiAgICAgKiBJdCBnZXRzIGludm9rZWQgaWYgYCRsb2NhdGlvbmAgbWF0Y2hlcy5cbiAgICAgKiBZb3UgaGF2ZSB0aGUgb3B0aW9uIG9mIGluamVjdCB0aGUgbWF0Y2ggb2JqZWN0IGFzIGAkbWF0Y2hgLlxuICAgICAqXG4gICAgICogVGhlIGhhbmRsZXIgY2FuIHJldHVyblxuICAgICAqXG4gICAgICogLSAqKmZhbHN5KiogdG8gaW5kaWNhdGUgdGhhdCB0aGUgcnVsZSBkaWRuJ3QgbWF0Y2ggYWZ0ZXIgYWxsLCB0aGVuIGAkdXJsUm91dGVyYFxuICAgICAqICAgd2lsbCBjb250aW51ZSB0cnlpbmcgdG8gZmluZCBhbm90aGVyIG9uZSB0aGF0IG1hdGNoZXMuXG4gICAgICogLSAqKnN0cmluZyoqIHdoaWNoIGlzIHRyZWF0ZWQgYXMgYSByZWRpcmVjdCBhbmQgcGFzc2VkIHRvIGAkbG9jYXRpb24udXJsKClgXG4gICAgICogLSAqKnZvaWQqKiBvciBhbnkgKip0cnV0aHkqKiB2YWx1ZSB0ZWxscyBgJHVybFJvdXRlcmAgdGhhdCB0aGUgdXJsIHdhcyBoYW5kbGVkLlxuICAgICAqXG4gICAgICogIyMjIyBFeGFtcGxlOlxuICAgICAqIGBgYGpzXG4gICAgICogdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ3VpLnJvdXRlci5yb3V0ZXInXSk7XG4gICAgICpcbiAgICAgKiBhcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgKiAgICR1cmxSb3V0ZXJQcm92aWRlci53aGVuKCRzdGF0ZS51cmwsIGZ1bmN0aW9uICgkbWF0Y2gsICRzdGF0ZVBhcmFtcykge1xuICAgICAqICAgICBpZiAoJHN0YXRlLiRjdXJyZW50Lm5hdmlnYWJsZSAhPT0gc3RhdGUgfHxcbiAgICAgKiAgICAgICAgICFlcXVhbEZvcktleXMoJG1hdGNoLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgKiAgICAgICRzdGF0ZS50cmFuc2l0aW9uVG8oc3RhdGUsICRtYXRjaCwgZmFsc2UpO1xuICAgICAqICAgICB9XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB3aGF0IEEgcGF0dGVybiBzdHJpbmcgdG8gbWF0Y2gsIGNvbXBpbGVkIGFzIGEgW1tVcmxNYXRjaGVyXV0uXG4gICAgICogQHBhcmFtIGhhbmRsZXIgVGhlIHBhdGggKG9yIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHBhdGgpIHRoYXQgeW91IHdhbnQgdG8gcmVkaXJlY3QgeW91ciB1c2VyIHRvLlxuICAgICAqIEBwYXJhbSBydWxlQ2FsbGJhY2sgW29wdGlvbmFsXSBBIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgdGhlIGBydWxlYCByZWdpc3RlcmVkIHdpdGggW1tVcmxNYXRjaGVyLnJ1bGVdXVxuICAgICAqXG4gICAgICogTm90ZTogdGhlIGhhbmRsZXIgbWF5IGFsc28gaW52b2tlIGFyYml0cmFyeSBjb2RlLCBzdWNoIGFzIGAkc3RhdGUuZ28oKWBcbiAgICAgKi9cbiAgICBVcmxSb3V0ZXJQcm92aWRlci5wcm90b3R5cGUud2hlbiA9IGZ1bmN0aW9uICh3aGF0LCBoYW5kbGVyKSB7XG4gICAgICAgIGlmIChpc0FycmF5KGhhbmRsZXIpIHx8IGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBVcmxSb3V0ZXJQcm92aWRlci5pbmplY3RhYmxlSGFuZGxlcih0aGlzLl9yb3V0ZXIsIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VybFJvdXRlci53aGVuKHdoYXQsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc2FibGVzIG1vbml0b3Jpbmcgb2YgdGhlIFVSTC5cbiAgICAgKlxuICAgICAqIENhbGwgdGhpcyBtZXRob2QgYmVmb3JlIFVJLVJvdXRlciBoYXMgYm9vdHN0cmFwcGVkLlxuICAgICAqIEl0IHdpbGwgc3RvcCBVSS1Sb3V0ZXIgZnJvbSBwZXJmb3JtaW5nIHRoZSBpbml0aWFsIHVybCBzeW5jLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHRvIHBlcmZvcm0gc29tZSBhc3luY2hyb25vdXMgaW5pdGlhbGl6YXRpb24gYmVmb3JlIHRoZSByb3V0ZXIgc3RhcnRzLlxuICAgICAqIE9uY2UgdGhlIGluaXRpYWxpemF0aW9uIGlzIGNvbXBsZXRlLCBjYWxsIFtbbGlzdGVuXV0gdG8gdGVsbCBVSS1Sb3V0ZXIgdG8gc3RhcnQgd2F0Y2hpbmcgYW5kIHN5bmNocm9uaXppbmcgdGhlIFVSTC5cbiAgICAgKlxuICAgICAqICMjIyMgRXhhbXBsZTpcbiAgICAgKiBgYGBqc1xuICAgICAqIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInXSk7XG4gICAgICpcbiAgICAgKiBhcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIpIHtcbiAgICAgKiAgIC8vIFByZXZlbnQgJHVybFJvdXRlciBmcm9tIGF1dG9tYXRpY2FsbHkgaW50ZXJjZXB0aW5nIFVSTCBjaGFuZ2VzO1xuICAgICAqICAgJHVybFJvdXRlclByb3ZpZGVyLmRlZmVySW50ZXJjZXB0KCk7XG4gICAgICogfSlcbiAgICAgKlxuICAgICAqIGFwcC5ydW4oZnVuY3Rpb24gKE15U2VydmljZSwgJHVybFJvdXRlciwgJGh0dHApIHtcbiAgICAgKiAgICRodHRwLmdldChcIi9zdHVmZlwiKS50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgKiAgICAgTXlTZXJ2aWNlLmRvU3R1ZmYocmVzcC5kYXRhKTtcbiAgICAgKiAgICAgJHVybFJvdXRlci5saXN0ZW4oKTtcbiAgICAgKiAgICAgJHVybFJvdXRlci5zeW5jKCk7XG4gICAgICogICB9KTtcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkZWZlciBJbmRpY2F0ZXMgd2hldGhlciB0byBkZWZlciBsb2NhdGlvbiBjaGFuZ2UgaW50ZXJjZXB0aW9uLlxuICAgICAqICAgICAgICBQYXNzaW5nIG5vIHBhcmFtZXRlciBpcyBlcXVpdmFsZW50IHRvIGB0cnVlYC5cbiAgICAgKi9cbiAgICBVcmxSb3V0ZXJQcm92aWRlci5wcm90b3R5cGUuZGVmZXJJbnRlcmNlcHQgPSBmdW5jdGlvbiAoZGVmZXIpIHtcbiAgICAgICAgdGhpcy5fdXJsUm91dGVyLmRlZmVySW50ZXJjZXB0KGRlZmVyKTtcbiAgICB9O1xuICAgIHJldHVybiBVcmxSb3V0ZXJQcm92aWRlcjtcbn0oKSk7XG5cbi8qKlxuICogIyBBbmd1bGFyIDEgdHlwZXNcbiAqXG4gKiBVSS1Sb3V0ZXIgY29yZSBwcm92aWRlcyB2YXJpb3VzIFR5cGVzY3JpcHQgdHlwZXMgd2hpY2ggeW91IGNhbiB1c2UgZm9yIGNvZGUgY29tcGxldGlvbiBhbmQgdmFsaWRhdGluZyBwYXJhbWV0ZXIgdmFsdWVzLCBldGMuXG4gKiBUaGUgY3VzdG9taXphdGlvbnMgdG8gdGhlIGNvcmUgdHlwZXMgZm9yIEFuZ3VsYXIgVUktUm91dGVyIGFyZSBkb2N1bWVudGVkIGhlcmUuXG4gKlxuICogVGhlIG9wdGlvbmFsIFtbJHJlc29sdmVdXSBzZXJ2aWNlIGlzIGFsc28gZG9jdW1lbnRlZCBoZXJlLlxuICpcbiAqIEBtb2R1bGUgbmcxXG4gKiBAcHJlZmVycmVkXG4gKi9cbi8qKiBmb3IgdHlwZWRvYyAqL1xubmcubW9kdWxlKCd1aS5yb3V0ZXIuYW5ndWxhcjEnLCBbXSk7XG52YXIgbW9kX2luaXQgPSBuZy5tb2R1bGUoJ3VpLnJvdXRlci5pbml0JywgW10pO1xudmFyIG1vZF91dGlsID0gbmcubW9kdWxlKCd1aS5yb3V0ZXIudXRpbCcsIFsnbmcnLCAndWkucm91dGVyLmluaXQnXSk7XG52YXIgbW9kX3J0ciA9IG5nLm1vZHVsZSgndWkucm91dGVyLnJvdXRlcicsIFsndWkucm91dGVyLnV0aWwnXSk7XG52YXIgbW9kX3N0YXRlID0gbmcubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnLCBbJ3VpLnJvdXRlci5yb3V0ZXInLCAndWkucm91dGVyLnV0aWwnLCAndWkucm91dGVyLmFuZ3VsYXIxJ10pO1xudmFyIG1vZF9tYWluID0gbmcubW9kdWxlKCd1aS5yb3V0ZXInLCBbJ3VpLnJvdXRlci5pbml0JywgJ3VpLnJvdXRlci5zdGF0ZScsICd1aS5yb3V0ZXIuYW5ndWxhcjEnXSk7XG52YXIgbW9kX2NtcHQgPSBuZy5tb2R1bGUoJ3VpLnJvdXRlci5jb21wYXQnLCBbJ3VpLnJvdXRlciddKTsgLy8gdHNsaW50OmRpc2FibGUtbGluZVxudmFyIHJvdXRlciA9IG51bGw7XG4kdWlSb3V0ZXJQcm92aWRlci4kaW5qZWN0ID0gWyckbG9jYXRpb25Qcm92aWRlciddO1xuLyoqIFRoaXMgYW5ndWxhciAxIHByb3ZpZGVyIGluc3RhbnRpYXRlcyBhIFJvdXRlciBhbmQgZXhwb3NlcyBpdHMgc2VydmljZXMgdmlhIHRoZSBhbmd1bGFyIGluamVjdG9yICovXG5mdW5jdGlvbiAkdWlSb3V0ZXJQcm92aWRlcigkbG9jYXRpb25Qcm92aWRlcikge1xuICAgIC8vIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgUm91dGVyIHdoZW4gdGhlICR1aVJvdXRlclByb3ZpZGVyIGlzIGluaXRpYWxpemVkXG4gICAgcm91dGVyID0gdGhpcy5yb3V0ZXIgPSBuZXcgVUlSb3V0ZXIoKTtcbiAgICByb3V0ZXIuc3RhdGVQcm92aWRlciA9IG5ldyBTdGF0ZVByb3ZpZGVyKHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LCByb3V0ZXIuc3RhdGVTZXJ2aWNlKTtcbiAgICAvLyBBcHBseSBuZzEgc3BlY2lmaWMgU3RhdGVCdWlsZGVyIGNvZGUgZm9yIGB2aWV3c2AsIGByZXNvbHZlYCwgYW5kIGBvbkV4aXQvUmV0YWluL0VudGVyYCBwcm9wZXJ0aWVzXG4gICAgcm91dGVyLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKCd2aWV3cycsIG5nMVZpZXdzQnVpbGRlcik7XG4gICAgcm91dGVyLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKCdvbkV4aXQnLCBnZXRTdGF0ZUhvb2tCdWlsZGVyKCdvbkV4aXQnKSk7XG4gICAgcm91dGVyLnN0YXRlUmVnaXN0cnkuZGVjb3JhdG9yKCdvblJldGFpbicsIGdldFN0YXRlSG9va0J1aWxkZXIoJ29uUmV0YWluJykpO1xuICAgIHJvdXRlci5zdGF0ZVJlZ2lzdHJ5LmRlY29yYXRvcignb25FbnRlcicsIGdldFN0YXRlSG9va0J1aWxkZXIoJ29uRW50ZXInKSk7XG4gICAgcm91dGVyLnZpZXdTZXJ2aWNlLl9wbHVnaW5hcGkuX3ZpZXdDb25maWdGYWN0b3J5KCduZzEnLCBnZXROZzFWaWV3Q29uZmlnRmFjdG9yeSgpKTtcbiAgICB2YXIgbmcxTG9jYXRpb25TZXJ2aWNlID0gcm91dGVyLmxvY2F0aW9uU2VydmljZSA9IHJvdXRlci5sb2NhdGlvbkNvbmZpZyA9IG5ldyBOZzFMb2NhdGlvblNlcnZpY2VzKCRsb2NhdGlvblByb3ZpZGVyKTtcbiAgICBOZzFMb2NhdGlvblNlcnZpY2VzLm1vbmtleVBhdGNoUGF0aFBhcmFtZXRlclR5cGUocm91dGVyKTtcbiAgICAvLyBiYWNrd2FyZHMgY29tcGF0OiBhbHNvIGV4cG9zZSByb3V0ZXIgaW5zdGFuY2UgYXMgJHVpUm91dGVyUHJvdmlkZXIucm91dGVyXG4gICAgcm91dGVyWydyb3V0ZXInXSA9IHJvdXRlcjtcbiAgICByb3V0ZXJbJyRnZXQnXSA9ICRnZXQ7XG4gICAgJGdldC4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnJGJyb3dzZXInLCAnJHNuaWZmZXInLCAnJHJvb3RTY29wZScsICckaHR0cCcsICckdGVtcGxhdGVDYWNoZSddO1xuICAgIGZ1bmN0aW9uICRnZXQoJGxvY2F0aW9uLCAkYnJvd3NlciwgJHNuaWZmZXIsICRyb290U2NvcGUsICRodHRwLCAkdGVtcGxhdGVDYWNoZSkge1xuICAgICAgICBuZzFMb2NhdGlvblNlcnZpY2UuX3J1bnRpbWVTZXJ2aWNlcygkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRzbmlmZmVyLCAkYnJvd3Nlcik7XG4gICAgICAgIGRlbGV0ZSByb3V0ZXJbJ3JvdXRlciddO1xuICAgICAgICBkZWxldGUgcm91dGVyWyckZ2V0J107XG4gICAgICAgIHJldHVybiByb3V0ZXI7XG4gICAgfVxuICAgIHJldHVybiByb3V0ZXI7XG59XG52YXIgZ2V0UHJvdmlkZXJGb3IgPSBmdW5jdGlvbiAoc2VydmljZU5hbWUpIHsgcmV0dXJuIFsnJHVpUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbiAoJHVycCkge1xuICAgICAgICB2YXIgc2VydmljZSA9ICR1cnAucm91dGVyW3NlcnZpY2VOYW1lXTtcbiAgICAgICAgc2VydmljZVsnJGdldCddID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VydmljZTsgfTtcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XG4gICAgfV07IH07XG4vLyBUaGlzIGVmZmVjdGl2ZWx5IGNhbGxzICRnZXQoKSBvbiBgJHVpUm91dGVyUHJvdmlkZXJgIHRvIHRyaWdnZXIgaW5pdCAod2hlbiBuZyBlbnRlcnMgcnVudGltZSlcbnJ1bkJsb2NrLiRpbmplY3QgPSBbJyRpbmplY3RvcicsICckcScsICckdWlSb3V0ZXInXTtcbmZ1bmN0aW9uIHJ1bkJsb2NrKCRpbmplY3RvciwgJHEsICR1aVJvdXRlcikge1xuICAgIHNlcnZpY2VzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcbiAgICBzZXJ2aWNlcy4kcSA9ICRxO1xuICAgIC8vIFRoZSAkaW5qZWN0b3IgaXMgbm93IGF2YWlsYWJsZS5cbiAgICAvLyBGaW5kIGFueSByZXNvbHZhYmxlcyB0aGF0IGhhZCBkZXBlbmRlbmN5IGFubm90YXRpb24gZGVmZXJyZWRcbiAgICAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5nZXQoKVxuICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LiQkc3RhdGUoKS5yZXNvbHZhYmxlczsgfSlcbiAgICAgICAgLnJlZHVjZSh1bm5lc3RSLCBbXSlcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5kZXBzID09PSAnZGVmZXJyZWQnOyB9KVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAocmVzb2x2YWJsZSkgeyByZXR1cm4gcmVzb2x2YWJsZS5kZXBzID0gJGluamVjdG9yLmFubm90YXRlKHJlc29sdmFibGUucmVzb2x2ZUZuLCAkaW5qZWN0b3Iuc3RyaWN0RGkpOyB9KTtcbn1cbi8vICR1cmxSb3V0ZXIgc2VydmljZSBhbmQgJHVybFJvdXRlclByb3ZpZGVyXG52YXIgZ2V0VXJsUm91dGVyUHJvdmlkZXIgPSBmdW5jdGlvbiAodWlSb3V0ZXIpIHtcbiAgICByZXR1cm4gdWlSb3V0ZXIudXJsUm91dGVyUHJvdmlkZXIgPSBuZXcgVXJsUm91dGVyUHJvdmlkZXIodWlSb3V0ZXIpO1xufTtcbi8vICRzdGF0ZSBzZXJ2aWNlIGFuZCAkc3RhdGVQcm92aWRlclxuLy8gJHVybFJvdXRlciBzZXJ2aWNlIGFuZCAkdXJsUm91dGVyUHJvdmlkZXJcbnZhciBnZXRTdGF0ZVByb3ZpZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBleHRlbmQocm91dGVyLnN0YXRlUHJvdmlkZXIsIHsgJGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLnN0YXRlU2VydmljZTsgfSB9KTtcbn07XG53YXRjaERpZ2VzdHMuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuZnVuY3Rpb24gd2F0Y2hEaWdlc3RzKCRyb290U2NvcGUpIHtcbiAgICAkcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHRyYWNlLmFwcHJveGltYXRlRGlnZXN0cysrOyB9KTtcbn1cbm1vZF9pbml0LnByb3ZpZGVyKCckdWlSb3V0ZXInLCAkdWlSb3V0ZXJQcm92aWRlcik7XG5tb2RfcnRyLnByb3ZpZGVyKCckdXJsUm91dGVyJywgWyckdWlSb3V0ZXJQcm92aWRlcicsIGdldFVybFJvdXRlclByb3ZpZGVyXSk7XG5tb2RfdXRpbC5wcm92aWRlcignJHVybFNlcnZpY2UnLCBnZXRQcm92aWRlckZvcigndXJsU2VydmljZScpKTtcbm1vZF91dGlsLnByb3ZpZGVyKCckdXJsTWF0Y2hlckZhY3RvcnknLCBbJyR1aVJvdXRlclByb3ZpZGVyJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcm91dGVyLnVybE1hdGNoZXJGYWN0b3J5OyB9XSk7XG5tb2RfdXRpbC5wcm92aWRlcignJHRlbXBsYXRlRmFjdG9yeScsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBUZW1wbGF0ZUZhY3RvcnkoKTsgfSk7XG5tb2Rfc3RhdGUucHJvdmlkZXIoJyRzdGF0ZVJlZ2lzdHJ5JywgZ2V0UHJvdmlkZXJGb3IoJ3N0YXRlUmVnaXN0cnknKSk7XG5tb2Rfc3RhdGUucHJvdmlkZXIoJyR1aVJvdXRlckdsb2JhbHMnLCBnZXRQcm92aWRlckZvcignZ2xvYmFscycpKTtcbm1vZF9zdGF0ZS5wcm92aWRlcignJHRyYW5zaXRpb25zJywgZ2V0UHJvdmlkZXJGb3IoJ3RyYW5zaXRpb25TZXJ2aWNlJykpO1xubW9kX3N0YXRlLnByb3ZpZGVyKCckc3RhdGUnLCBbJyR1aVJvdXRlclByb3ZpZGVyJywgZ2V0U3RhdGVQcm92aWRlcl0pO1xubW9kX3N0YXRlLmZhY3RvcnkoJyRzdGF0ZVBhcmFtcycsIFsnJHVpUm91dGVyJywgZnVuY3Rpb24gKCR1aVJvdXRlcikgeyByZXR1cm4gJHVpUm91dGVyLmdsb2JhbHMucGFyYW1zOyB9XSk7XG5tb2RfbWFpbi5mYWN0b3J5KCckdmlldycsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJvdXRlci52aWV3U2VydmljZTsgfSk7XG5tb2RfbWFpbi5zZXJ2aWNlKCckdHJhY2UnLCBmdW5jdGlvbiAoKSB7IHJldHVybiB0cmFjZTsgfSk7XG5tb2RfbWFpbi5ydW4od2F0Y2hEaWdlc3RzKTtcbm1vZF91dGlsLnJ1bihbJyR1cmxNYXRjaGVyRmFjdG9yeScsIGZ1bmN0aW9uICgkdXJsTWF0Y2hlckZhY3RvcnkpIHsgfV0pO1xubW9kX3N0YXRlLnJ1bihbJyRzdGF0ZScsIGZ1bmN0aW9uICgkc3RhdGUpIHsgfV0pO1xubW9kX3J0ci5ydW4oWyckdXJsUm91dGVyJywgZnVuY3Rpb24gKCR1cmxSb3V0ZXIpIHsgfV0pO1xubW9kX2luaXQucnVuKHJ1bkJsb2NrKTtcbi8qKiBAaGlkZGVuIFRPRE86IGZpbmQgYSBwbGFjZSB0byBtb3ZlIHRoaXMgKi9cbnZhciBnZXRMb2NhbHMgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgdmFyIHRva2VucyA9IGN0eC5nZXRUb2tlbnMoKS5maWx0ZXIoaXNTdHJpbmcpO1xuICAgIHZhciB0dXBsZXMgPSB0b2tlbnMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHJlc29sdmFibGUgPSBjdHguZ2V0UmVzb2x2YWJsZShrZXkpO1xuICAgICAgICB2YXIgd2FpdFBvbGljeSA9IGN0eC5nZXRQb2xpY3kocmVzb2x2YWJsZSkuYXN5bmM7XG4gICAgICAgIHJldHVybiBba2V5LCB3YWl0UG9saWN5ID09PSAnTk9XQUlUJyA/IHJlc29sdmFibGUucHJvbWlzZSA6IHJlc29sdmFibGUuZGF0YV07XG4gICAgfSk7XG4gICAgcmV0dXJuIHR1cGxlcy5yZWR1Y2UoYXBwbHlQYWlycywge30pO1xufTtcblxuLyoqXG4gKiBUaGUgY3VycmVudCAob3IgcGVuZGluZykgU3RhdGUgUGFyYW1ldGVyc1xuICpcbiAqIEFuIGluamVjdGFibGUgZ2xvYmFsICoqU2VydmljZSBPYmplY3QqKiB3aGljaCBob2xkcyB0aGUgc3RhdGUgcGFyYW1ldGVycyBmb3IgdGhlIGxhdGVzdCAqKlNVQ0NFU1NGVUwqKiB0cmFuc2l0aW9uLlxuICpcbiAqIFRoZSB2YWx1ZXMgYXJlIG5vdCB1cGRhdGVkIHVudGlsICphZnRlciogYSBgVHJhbnNpdGlvbmAgc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlcy5cbiAqXG4gKiAqKkFsc286KiogYW4gaW5qZWN0YWJsZSAqKlBlci1UcmFuc2l0aW9uIE9iamVjdCoqIG9iamVjdCB3aGljaCBob2xkcyB0aGUgcGVuZGluZyBzdGF0ZSBwYXJhbWV0ZXJzIGZvciB0aGUgcGVuZGluZyBgVHJhbnNpdGlvbmAgY3VycmVudGx5IHJ1bm5pbmcuXG4gKlxuICogIyMjIERlcHJlY2F0aW9uIHdhcm5pbmc6XG4gKlxuICogVGhlIHZhbHVlIGluamVjdGVkIGZvciBgJHN0YXRlUGFyYW1zYCBpcyBkaWZmZXJlbnQgZGVwZW5kaW5nIG9uIHdoZXJlIGl0IGlzIGluamVjdGVkLlxuICpcbiAqIC0gV2hlbiBpbmplY3RlZCBpbnRvIGFuIGFuZ3VsYXIgc2VydmljZSwgdGhlIG9iamVjdCBpbmplY3RlZCBpcyB0aGUgZ2xvYmFsICoqU2VydmljZSBPYmplY3QqKiB3aXRoIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGZvciB0aGUgbGF0ZXN0IHN1Y2Nlc3NmdWwgYFRyYW5zaXRpb25gLlxuICogLSBXaGVuIGluamVjdGVkIGludG8gdHJhbnNpdGlvbiBob29rcywgcmVzb2x2ZXMsIG9yIHZpZXcgY29udHJvbGxlcnMsIHRoZSBvYmplY3QgaXMgdGhlICoqUGVyLVRyYW5zaXRpb24gT2JqZWN0Kiogd2l0aCB0aGUgcGFyYW1ldGVyIHZhbHVlcyBmb3IgdGhlIHJ1bm5pbmcgYFRyYW5zaXRpb25gLlxuICpcbiAqIEJlY2F1c2Ugb2YgdGhlc2UgY29uZnVzaW5nIGRldGFpbHMsIHRoaXMgc2VydmljZSBpcyBkZXByZWNhdGVkLlxuICpcbiAqICMjIyBJbnN0ZWFkIG9mIHVzaW5nIHRoZSBnbG9iYWwgYCRzdGF0ZVBhcmFtc2Agc2VydmljZSBvYmplY3QsXG4gKiBpbmplY3QgW1skdWlSb3V0ZXJHbG9iYWxzXV0gYW5kIHVzZSBbW1VJUm91dGVyR2xvYmFscy5wYXJhbXNdXVxuICpcbiAqIGBgYGpzXG4gKiBNeVNlcnZpY2UuJGluamVjdCA9IFsnJHVpUm91dGVyR2xvYmFscyddO1xuICogZnVuY3Rpb24gTXlTZXJ2aWNlKCR1aVJvdXRlckdsb2JhbHMpIHtcbiAqICAgcmV0dXJuIHtcbiAqICAgICBwYXJhbVZhbHVlczogZnVuY3Rpb24gKCkge1xuICogICAgICAgcmV0dXJuICR1aVJvdXRlckdsb2JhbHMucGFyYW1zO1xuICogICAgIH1cbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogIyMjIEluc3RlYWQgb2YgdXNpbmcgdGhlIHBlci10cmFuc2l0aW9uIGAkc3RhdGVQYXJhbXNgIG9iamVjdCxcbiAqIGluamVjdCB0aGUgY3VycmVudCBgVHJhbnNpdGlvbmAgKGFzIFtbJHRyYW5zaXRpb24kXV0pIGFuZCB1c2UgW1tUcmFuc2l0aW9uLnBhcmFtc11dXG4gKlxuICogYGBganNcbiAqIE15Q29udHJvbGxlci4kaW5qZWN0ID0gWyckdHJhbnNpdGlvbiQnXTtcbiAqIGZ1bmN0aW9uIE15Q29udHJvbGxlcigkdHJhbnNpdGlvbiQpIHtcbiAqICAgdmFyIHVzZXJuYW1lID0gJHRyYW5zaXRpb24kLnBhcmFtcygpLnVzZXJuYW1lO1xuICogICAvLyAuLiBkbyBzb21ldGhpbmcgd2l0aCB1c2VybmFtZVxuICogfVxuICogYGBgXG4gKlxuICogLS0tXG4gKlxuICogVGhpcyBvYmplY3QgY2FuIGJlIGluamVjdGVkIGludG8gb3RoZXIgc2VydmljZXMuXG4gKlxuICogIyMjIyBEZXByZWNhdGVkIEV4YW1wbGU6XG4gKiBgYGBqc1xuICogU29tZVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCAnJHN0YXRlUGFyYW1zJ107XG4gKiBmdW5jdGlvbiBTb21lU2VydmljZSgkaHR0cCwgJHN0YXRlUGFyYW1zKSB7XG4gKiAgIHJldHVybiB7XG4gKiAgICAgZ2V0VXNlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzLycgKyAkc3RhdGVQYXJhbXMudXNlcm5hbWUpO1xuICogICAgIH1cbiAqICAgfVxuICogfTtcbiAqIGFuZ3VsYXIuc2VydmljZSgnU29tZVNlcnZpY2UnLCBTb21lU2VydmljZSk7XG4gKiBgYGBcbiAqIEBkZXByZWNhdGVkXG4gKi9cblxuLyoqXG4gKiAjIEFuZ3VsYXIgMSBEaXJlY3RpdmVzXG4gKlxuICogVGhlc2UgYXJlIHRoZSBkaXJlY3RpdmVzIGluY2x1ZGVkIGluIFVJLVJvdXRlciBmb3IgQW5ndWxhciAxLlxuICogVGhlc2UgZGlyZWN0aXZlcyBhcmUgdXNlZCBpbiB0ZW1wbGF0ZXMgdG8gY3JlYXRlIHZpZXdwb3J0cyBhbmQgbGluay9uYXZpZ2F0ZSB0byBzdGF0ZXMuXG4gKlxuICogQG5nMWFwaVxuICogQHByZWZlcnJlZFxuICogQG1vZHVsZSBkaXJlY3RpdmVzXG4gKi8gLyoqIGZvciB0eXBlZG9jICovXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gcGFyc2VTdGF0ZVJlZihyZWYpIHtcbiAgICB2YXIgcGFyc2VkO1xuICAgIHZhciBwYXJhbXNPbmx5ID0gcmVmLm1hdGNoKC9eXFxzKih7W159XSp9KVxccyokLyk7XG4gICAgaWYgKHBhcmFtc09ubHkpXG4gICAgICAgIHJlZiA9ICcoJyArIHBhcmFtc09ubHlbMV0gKyAnKSc7XG4gICAgcGFyc2VkID0gcmVmLnJlcGxhY2UoL1xcbi9nLCAnICcpLm1hdGNoKC9eXFxzKihbXihdKj8pXFxzKihcXCgoLiopXFwpKT9cXHMqJC8pO1xuICAgIGlmICghcGFyc2VkIHx8IHBhcnNlZC5sZW5ndGggIT09IDQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGUgcmVmICdcIiArIHJlZiArIFwiJ1wiKTtcbiAgICByZXR1cm4geyBzdGF0ZTogcGFyc2VkWzFdIHx8IG51bGwsIHBhcmFtRXhwcjogcGFyc2VkWzNdIHx8IG51bGwgfTtcbn1cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBzdGF0ZUNvbnRleHQoZWwpIHtcbiAgICB2YXIgJHVpVmlldyA9IGVsLnBhcmVudCgpLmluaGVyaXRlZERhdGEoJyR1aVZpZXcnKTtcbiAgICB2YXIgcGF0aCA9IHBhcnNlKCckY2ZnLnBhdGgnKSgkdWlWaWV3KTtcbiAgICByZXR1cm4gcGF0aCA/IHRhaWwocGF0aCkuc3RhdGUubmFtZSA6IHVuZGVmaW5lZDtcbn1cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBwcm9jZXNzZWREZWYoJHN0YXRlLCAkZWxlbWVudCwgZGVmKSB7XG4gICAgdmFyIHVpU3RhdGUgPSBkZWYudWlTdGF0ZSB8fCAkc3RhdGUuY3VycmVudC5uYW1lO1xuICAgIHZhciB1aVN0YXRlT3B0cyA9IGV4dGVuZChkZWZhdWx0T3B0cygkZWxlbWVudCwgJHN0YXRlKSwgZGVmLnVpU3RhdGVPcHRzIHx8IHt9KTtcbiAgICB2YXIgaHJlZiA9ICRzdGF0ZS5ocmVmKHVpU3RhdGUsIGRlZi51aVN0YXRlUGFyYW1zLCB1aVN0YXRlT3B0cyk7XG4gICAgcmV0dXJuIHsgdWlTdGF0ZTogdWlTdGF0ZSwgdWlTdGF0ZVBhcmFtczogZGVmLnVpU3RhdGVQYXJhbXMsIHVpU3RhdGVPcHRzOiB1aVN0YXRlT3B0cywgaHJlZjogaHJlZiB9O1xufVxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGdldFR5cGVJbmZvKGVsKSB7XG4gICAgLy8gU1ZHQUVsZW1lbnQgZG9lcyBub3QgdXNlIHRoZSBocmVmIGF0dHJpYnV0ZSwgYnV0IHJhdGhlciB0aGUgJ3hsaW5rSHJlZicgYXR0cmlidXRlLlxuICAgIHZhciBpc1N2ZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbC5wcm9wKCdocmVmJykpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nO1xuICAgIHZhciBpc0Zvcm0gPSBlbFswXS5ub2RlTmFtZSA9PT0gJ0ZPUk0nO1xuICAgIHJldHVybiB7XG4gICAgICAgIGF0dHI6IGlzRm9ybSA/ICdhY3Rpb24nIDogKGlzU3ZnID8gJ3hsaW5rOmhyZWYnIDogJ2hyZWYnKSxcbiAgICAgICAgaXNBbmNob3I6IGVsLnByb3AoJ3RhZ05hbWUnKS50b1VwcGVyQ2FzZSgpID09PSAnQScsXG4gICAgICAgIGNsaWNrYWJsZTogIWlzRm9ybSxcbiAgICB9O1xufVxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGNsaWNrSG9vayhlbCwgJHN0YXRlLCAkdGltZW91dCwgdHlwZSwgZ2V0RGVmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBidXR0b24gPSBlLndoaWNoIHx8IGUuYnV0dG9uLCB0YXJnZXQgPSBnZXREZWYoKTtcbiAgICAgICAgaWYgKCEoYnV0dG9uID4gMSB8fCBlLmN0cmxLZXkgfHwgZS5tZXRhS2V5IHx8IGUuc2hpZnRLZXkgfHwgZWwuYXR0cigndGFyZ2V0JykpKSB7XG4gICAgICAgICAgICAvLyBIQUNLOiBUaGlzIGlzIHRvIGFsbG93IG5nLWNsaWNrcyB0byBiZSBwcm9jZXNzZWQgYmVmb3JlIHRoZSB0cmFuc2l0aW9uIGlzIGluaXRpYXRlZDpcbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uXzEgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKHRhcmdldC51aVN0YXRlLCB0YXJnZXQudWlTdGF0ZVBhcmFtcywgdGFyZ2V0LnVpU3RhdGVPcHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgLy8gaWYgdGhlIHN0YXRlIGhhcyBubyBVUkwsIGlnbm9yZSBvbmUgcHJldmVudERlZmF1bHQgZnJvbSB0aGUgPGE+IGRpcmVjdGl2ZS5cbiAgICAgICAgICAgIHZhciBpZ25vcmVQcmV2ZW50RGVmYXVsdENvdW50XzEgPSB0eXBlLmlzQW5jaG9yICYmICF0YXJnZXQuaHJlZiA/IDEgOiAwO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaWdub3JlUHJldmVudERlZmF1bHRDb3VudF8xLS0gPD0gMClcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRyYW5zaXRpb25fMSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiBkZWZhdWx0T3B0cyhlbCwgJHN0YXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVsYXRpdmU6IHN0YXRlQ29udGV4dChlbCkgfHwgJHN0YXRlLiRjdXJyZW50LFxuICAgICAgICBpbmhlcml0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6ICdzcmVmJyxcbiAgICB9O1xufVxuLyoqIEBoaWRkZW4gKi9cbmZ1bmN0aW9uIGJpbmRFdmVudHMoZWxlbWVudCwgc2NvcGUsIGhvb2tGbiwgdWlTdGF0ZU9wdHMpIHtcbiAgICB2YXIgZXZlbnRzO1xuICAgIGlmICh1aVN0YXRlT3B0cykge1xuICAgICAgICBldmVudHMgPSB1aVN0YXRlT3B0cy5ldmVudHM7XG4gICAgfVxuICAgIGlmICghaXNBcnJheShldmVudHMpKSB7XG4gICAgICAgIGV2ZW50cyA9IFsnY2xpY2snXTtcbiAgICB9XG4gICAgdmFyIG9uID0gZWxlbWVudC5vbiA/ICdvbicgOiAnYmluZCc7XG4gICAgZm9yICh2YXIgX2kgPSAwLCBldmVudHNfMSA9IGV2ZW50czsgX2kgPCBldmVudHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgdmFyIGV2ZW50XzEgPSBldmVudHNfMVtfaV07XG4gICAgICAgIGVsZW1lbnRbb25dKGV2ZW50XzEsIGhvb2tGbik7XG4gICAgfVxuICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvZmYgPSBlbGVtZW50Lm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZXZlbnRzXzIgPSBldmVudHM7IF9pIDwgZXZlbnRzXzIubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRfMiA9IGV2ZW50c18yW19pXTtcbiAgICAgICAgICAgIGVsZW1lbnRbb2ZmXShldmVudF8yLCBob29rRm4pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIGB1aS1zcmVmYDogQSBkaXJlY3RpdmUgZm9yIGxpbmtpbmcgdG8gYSBzdGF0ZVxuICpcbiAqIEEgZGlyZWN0aXZlIHdoaWNoIGxpbmtzIHRvIGEgc3RhdGUgKGFuZCBvcHRpb25hbGx5LCBwYXJhbWV0ZXJzKS5cbiAqIFdoZW4gY2xpY2tlZCwgdGhpcyBkaXJlY3RpdmUgYWN0aXZhdGVzIHRoZSBsaW5rZWQgc3RhdGUgd2l0aCB0aGUgc3VwcGxpZWQgcGFyYW1ldGVyIHZhbHVlcy5cbiAqXG4gKiAjIyMgTGlua2VkIFN0YXRlXG4gKiBUaGUgYXR0cmlidXRlIHZhbHVlIG9mIHRoZSBgdWktc3JlZmAgaXMgdGhlIG5hbWUgb2YgdGhlIHN0YXRlIHRvIGxpbmsgdG8uXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogVGhpcyB3aWxsIGFjdGl2YXRlIHRoZSBgaG9tZWAgc3RhdGUgd2hlbiB0aGUgbGluayBpcyBjbGlja2VkLlxuICogYGBgaHRtbFxuICogPGEgdWktc3JlZj1cImhvbWVcIj5Ib21lPC9hPlxuICogYGBgXG4gKlxuICogIyMjIFJlbGF0aXZlIExpbmtzXG4gKiBZb3UgY2FuIGFsc28gdXNlIHJlbGF0aXZlIHN0YXRlIHBhdGhzIHdpdGhpbiBgdWktc3JlZmAsIGp1c3QgbGlrZSBhIHJlbGF0aXZlIHBhdGggcGFzc2VkIHRvIGAkc3RhdGUuZ28oKWAgKFtbU3RhdGVTZXJ2aWNlLmdvXV0pLlxuICogWW91IGp1c3QgbmVlZCB0byBiZSBhd2FyZSB0aGF0IHRoZSBwYXRoIGlzIHJlbGF0aXZlIHRvIHRoZSBzdGF0ZSB0aGF0ICpjcmVhdGVkKiB0aGUgbGluay5cbiAqIFRoaXMgYWxsb3dzIGEgc3RhdGUgdG8gY3JlYXRlIGEgcmVsYXRpdmUgYHVpLXNyZWZgIHdoaWNoIGFsd2F5cyB0YXJnZXRzIHRoZSBzYW1lIGRlc3RpbmF0aW9uLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIEJvdGggdGhlc2UgbGlua3MgYXJlIHJlbGF0aXZlIHRvIHRoZSBwYXJlbnQgc3RhdGUsIGV2ZW4gd2hlbiBhIGNoaWxkIHN0YXRlIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zcmVmPVwiLmNoaWxkMVwiPmNoaWxkIDEgc3RhdGU8L2E+XG4gKiA8YSB1aS1zcmVmPVwiLmNoaWxkMlwiPmNoaWxkIDIgc3RhdGU8L2E+XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGxpbmsgYWN0aXZhdGVzIHRoZSBwYXJlbnQgc3RhdGUuXG4gKiBgYGBodG1sXG4gKiA8YSB1aS1zcmVmPVwiXlwiPlJldHVybjwvYT5cbiAqIGBgYFxuICpcbiAqICMjIyBocmVmc1xuICogSWYgdGhlIGxpbmtlZCBzdGF0ZSBoYXMgYSBVUkwsIHRoZSBkaXJlY3RpdmUgd2lsbCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIGFuZFxuICogdXBkYXRlIHRoZSBgaHJlZmAgYXR0cmlidXRlICh1c2luZyB0aGUgW1tTdGF0ZVNlcnZpY2UuaHJlZl1dICBtZXRob2QpLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIEFzc3VtaW5nIHRoZSBgdXNlcnNgIHN0YXRlIGhhcyBhIHVybCBvZiBgL3VzZXJzL2BcbiAqIGBgYGh0bWxcbiAqIDxhIHVpLXNyZWY9XCJ1c2Vyc1wiIGhyZWY9XCIvdXNlcnMvXCI+VXNlcnM8L2E+XG4gKiBgYGBcbiAqXG4gKiAjIyMgUGFyYW1ldGVyIFZhbHVlc1xuICogSW4gYWRkaXRpb24gdG8gdGhlIHN0YXRlIG5hbWUsIGEgYHVpLXNyZWZgIGNhbiBpbmNsdWRlIHBhcmFtZXRlciB2YWx1ZXMgd2hpY2ggYXJlIGFwcGxpZWQgd2hlbiBhY3RpdmF0aW5nIHRoZSBzdGF0ZS5cbiAqIFBhcmFtIHZhbHVlcyBjYW4gYmUgcHJvdmlkZWQgaW4gdGhlIGB1aS1zcmVmYCB2YWx1ZSBhZnRlciB0aGUgc3RhdGUgbmFtZSwgZW5jbG9zZWQgYnkgcGFyZW50aGVzZXMuXG4gKiBUaGUgY29udGVudCBpbnNpZGUgdGhlIHBhcmVudGhlc2VzIGlzIGFuIGV4cHJlc3Npb24sIGV2YWx1YXRlZCB0byB0aGUgcGFyYW1ldGVyIHZhbHVlcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBUaGlzIGV4YW1wbGUgcmVuZGVycyBhIGxpc3Qgb2YgbGlua3MgdG8gdXNlcnMuXG4gKiBUaGUgc3RhdGUncyBgdXNlcklkYCBwYXJhbWV0ZXIgdmFsdWUgY29tZXMgZnJvbSBlYWNoIHVzZXIncyBgdXNlci5pZGAgcHJvcGVydHkuXG4gKiBgYGBodG1sXG4gKiA8bGkgbmctcmVwZWF0PVwidXNlciBpbiB1c2Vyc1wiPlxuICogICA8YSB1aS1zcmVmPVwidXNlcnMuZGV0YWlsKHsgdXNlcklkOiB1c2VyLmlkIH0pXCI+e3sgdXNlci5kaXNwbGF5TmFtZSB9fTwvYT5cbiAqIDwvbGk+XG4gKiBgYGBcbiAqXG4gKiBOb3RlOlxuICogVGhlIHBhcmFtZXRlciB2YWx1ZXMgZXhwcmVzc2lvbiBpcyBgJHdhdGNoYGVkIGZvciB1cGRhdGVzLlxuICpcbiAqICMjIyBUcmFuc2l0aW9uIE9wdGlvbnNcbiAqIFlvdSBjYW4gc3BlY2lmeSBbW1RyYW5zaXRpb25PcHRpb25zXV0gdG8gcGFzcyB0byBbW1N0YXRlU2VydmljZS5nb11dIGJ5IHVzaW5nIHRoZSBgdWktc3JlZi1vcHRzYCBhdHRyaWJ1dGUuXG4gKiBPcHRpb25zIGFyZSByZXN0cmljdGVkIHRvIGBsb2NhdGlvbmAsIGBpbmhlcml0YCwgYW5kIGByZWxvYWRgLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIGBgYGh0bWxcbiAqIDxhIHVpLXNyZWY9XCJob21lXCIgdWktc3JlZi1vcHRzPVwieyByZWxvYWQ6IHRydWUgfVwiPkhvbWU8L2E+XG4gKiBgYGBcbiAqXG4gKiAjIyMgT3RoZXIgRE9NIEV2ZW50c1xuICpcbiAqIFlvdSBjYW4gYWxzbyBjdXN0b21pemUgd2hpY2ggRE9NIGV2ZW50cyB0byByZXNwb25kIHRvIChpbnN0ZWFkIG9mIGBjbGlja2ApIGJ5XG4gKiBwcm92aWRpbmcgYW4gYGV2ZW50c2AgYXJyYXkgaW4gdGhlIGB1aS1zcmVmLW9wdHNgIGF0dHJpYnV0ZS5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8aW5wdXQgdHlwZT1cInRleHRcIiB1aS1zcmVmPVwiY29udGFjdHNcIiB1aS1zcmVmLW9wdHM9XCJ7IGV2ZW50czogWydjaGFuZ2UnLCAnYmx1ciddIH1cIj5cbiAqIGBgYFxuICpcbiAqICMjIyBIaWdobGlnaHRpbmcgdGhlIGFjdGl2ZSBsaW5rXG4gKiBUaGlzIGRpcmVjdGl2ZSBjYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIFtbdWlTcmVmQWN0aXZlXV0gdG8gaGlnaGxpZ2h0IHRoZSBhY3RpdmUgbGluay5cbiAqXG4gKiAjIyMgRXhhbXBsZXNcbiAqIElmIHlvdSBoYXZlIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGU6XG4gKlxuICogYGBgaHRtbFxuICogPGEgdWktc3JlZj1cImhvbWVcIj5Ib21lPC9hPlxuICogPGEgdWktc3JlZj1cImFib3V0XCI+QWJvdXQ8L2E+XG4gKiA8YSB1aS1zcmVmPVwie3BhZ2U6IDJ9XCI+TmV4dCBwYWdlPC9hPlxuICpcbiAqIDx1bD5cbiAqICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxuICogICAgICAgICA8YSB1aS1zcmVmPVwiY29udGFjdHMuZGV0YWlsKHsgaWQ6IGNvbnRhY3QuaWQgfSlcIj57eyBjb250YWN0Lm5hbWUgfX08L2E+XG4gKiAgICAgPC9saT5cbiAqIDwvdWw+XG4gKiBgYGBcbiAqXG4gKiBUaGVuIChhc3N1bWluZyB0aGUgY3VycmVudCBzdGF0ZSBpcyBgY29udGFjdHNgKSB0aGUgcmVuZGVyZWQgaHRtbCBpbmNsdWRpbmcgaHJlZnMgd291bGQgYmU6XG4gKlxuICogYGBgaHRtbFxuICogPGEgaHJlZj1cIiMvaG9tZVwiIHVpLXNyZWY9XCJob21lXCI+SG9tZTwvYT5cbiAqIDxhIGhyZWY9XCIjL2Fib3V0XCIgdWktc3JlZj1cImFib3V0XCI+QWJvdXQ8L2E+XG4gKiA8YSBocmVmPVwiIy9jb250YWN0cz9wYWdlPTJcIiB1aS1zcmVmPVwie3BhZ2U6IDJ9XCI+TmV4dCBwYWdlPC9hPlxuICpcbiAqIDx1bD5cbiAqICAgICA8bGkgbmctcmVwZWF0PVwiY29udGFjdCBpbiBjb250YWN0c1wiPlxuICogICAgICAgICA8YSBocmVmPVwiIy9jb250YWN0cy8xXCIgdWktc3JlZj1cImNvbnRhY3RzLmRldGFpbCh7IGlkOiBjb250YWN0LmlkIH0pXCI+Sm9lPC9hPlxuICogICAgIDwvbGk+XG4gKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPGEgaHJlZj1cIiMvY29udGFjdHMvMlwiIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPkFsaWNlPC9hPlxuICogICAgIDwvbGk+XG4gKiAgICAgPGxpIG5nLXJlcGVhdD1cImNvbnRhY3QgaW4gY29udGFjdHNcIj5cbiAqICAgICAgICAgPGEgaHJlZj1cIiMvY29udGFjdHMvM1wiIHVpLXNyZWY9XCJjb250YWN0cy5kZXRhaWwoeyBpZDogY29udGFjdC5pZCB9KVwiPkJvYjwvYT5cbiAqICAgICA8L2xpPlxuICogPC91bD5cbiAqXG4gKiA8YSBocmVmPVwiIy9ob21lXCIgdWktc3JlZj1cImhvbWVcIiB1aS1zcmVmLW9wdHM9XCJ7cmVsb2FkOiB0cnVlfVwiPkhvbWU8L2E+XG4gKiBgYGBcbiAqXG4gKiAjIyMgTm90ZXNcbiAqXG4gKiAtIFlvdSBjYW4gdXNlIGB1aS1zcmVmYCB0byBjaGFuZ2UgKipvbmx5IHRoZSBwYXJhbWV0ZXIgdmFsdWVzKiogYnkgb21pdHRpbmcgdGhlIHN0YXRlIG5hbWUgYW5kIHBhcmVudGhlc2VzLlxuICogIyMjIyBFeGFtcGxlOlxuICogU2V0cyB0aGUgYGxhbmdgIHBhcmFtZXRlciB0byBgZW5gIGFuZCByZW1haW5zIG9uIHRoZSBzYW1lIHN0YXRlLlxuICpcbiAqIGBgYGh0bWxcbiAqIDxhIHVpLXNyZWY9XCJ7IGxhbmc6ICdlbicgfVwiPkVuZ2xpc2g8L2E+XG4gKiBgYGBcbiAqXG4gKiAtIEEgbWlkZGxlLWNsaWNrLCByaWdodC1jbGljaywgb3IgY3RybC1jbGljayBpcyBoYW5kbGVkIChuYXRpdmVseSkgYnkgdGhlIGJyb3dzZXIgdG8gb3BlbiB0aGUgaHJlZiBpbiBhIG5ldyB3aW5kb3csIGZvciBleGFtcGxlLlxuICpcbiAqIC0gVW5saWtlIHRoZSBwYXJhbWV0ZXIgdmFsdWVzIGV4cHJlc3Npb24sIHRoZSBzdGF0ZSBuYW1lIGlzIG5vdCBgJHdhdGNoYGVkIChmb3IgcGVyZm9ybWFuY2UgcmVhc29ucykuXG4gKiBJZiB5b3UgbmVlZCB0byBkeW5hbWljYWxseSB1cGRhdGUgdGhlIHN0YXRlIGJlaW5nIGxpbmtlZCB0bywgdXNlIHRoZSBmdWxseSBkeW5hbWljIFtbdWlTdGF0ZV1dIGRpcmVjdGl2ZS5cbiAqL1xudmFyIHVpU3JlZkRpcmVjdGl2ZTtcbnVpU3JlZkRpcmVjdGl2ZSA9IFsnJHVpUm91dGVyJywgJyR0aW1lb3V0JyxcbiAgICBmdW5jdGlvbiAkU3RhdGVSZWZEaXJlY3RpdmUoJHVpUm91dGVyLCAkdGltZW91dCkge1xuICAgICAgICB2YXIgJHN0YXRlID0gJHVpUm91dGVyLnN0YXRlU2VydmljZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICByZXF1aXJlOiBbJz9edWlTcmVmQWN0aXZlJywgJz9edWlTcmVmQWN0aXZlRXEnXSxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIHVpU3JlZkFjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZ2V0VHlwZUluZm8oZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZSA9IHVpU3JlZkFjdGl2ZVsxXSB8fCB1aVNyZWZBY3RpdmVbMF07XG4gICAgICAgICAgICAgICAgdmFyIHVubGlua0luZm9GbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGhvb2tGbjtcbiAgICAgICAgICAgICAgICB2YXIgcmF3RGVmID0ge307XG4gICAgICAgICAgICAgICAgdmFyIGdldERlZiA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb2Nlc3NlZERlZigkc3RhdGUsIGVsZW1lbnQsIHJhd0RlZik7IH07XG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IHBhcnNlU3RhdGVSZWYoYXR0cnMudWlTcmVmKTtcbiAgICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZSA9IHJlZi5zdGF0ZTtcbiAgICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZU9wdHMgPSBhdHRycy51aVNyZWZPcHRzID8gc2NvcGUuJGV2YWwoYXR0cnMudWlTcmVmT3B0cykgOiB7fTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWYgPSBnZXREZWYoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVubGlua0luZm9GbilcbiAgICAgICAgICAgICAgICAgICAgICAgIHVubGlua0luZm9GbigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgdW5saW5rSW5mb0ZuID0gYWN0aXZlLiQkYWRkU3RhdGVJbmZvKGRlZi51aVN0YXRlLCBkZWYudWlTdGF0ZVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWYuaHJlZiAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMuJHNldCh0eXBlLmF0dHIsIGRlZi5ocmVmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlZi5wYXJhbUV4cHIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKHJlZi5wYXJhbUV4cHIsIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhd0RlZi51aVN0YXRlUGFyYW1zID0gZXh0ZW5kKHt9LCB2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByYXdEZWYudWlTdGF0ZVBhcmFtcyA9IGV4dGVuZCh7fSwgc2NvcGUuJGV2YWwocmVmLnBhcmFtRXhwcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgJHVpUm91dGVyLnN0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKHVwZGF0ZSkpO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdWlSb3V0ZXIudHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGUpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2xpY2thYmxlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaG9va0ZuID0gY2xpY2tIb29rKGVsZW1lbnQsICRzdGF0ZSwgJHRpbWVvdXQsIHR5cGUsIGdldERlZik7XG4gICAgICAgICAgICAgICAgYmluZEV2ZW50cyhlbGVtZW50LCBzY29wZSwgaG9va0ZuLCByYXdEZWYudWlTdGF0ZU9wdHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XTtcbi8qKlxuICogYHVpLXN0YXRlYDogQSBmdWxseSBkeW5hbWljIGRpcmVjdGl2ZSBmb3IgbGlua2luZyB0byBhIHN0YXRlXG4gKlxuICogQSBkaXJlY3RpdmUgd2hpY2ggbGlua3MgdG8gYSBzdGF0ZSAoYW5kIG9wdGlvbmFsbHksIHBhcmFtZXRlcnMpLlxuICogV2hlbiBjbGlja2VkLCB0aGlzIGRpcmVjdGl2ZSBhY3RpdmF0ZXMgdGhlIGxpbmtlZCBzdGF0ZSB3aXRoIHRoZSBzdXBwbGllZCBwYXJhbWV0ZXIgdmFsdWVzLlxuICpcbiAqICoqVGhpcyBkaXJlY3RpdmUgaXMgdmVyeSBzaW1pbGFyIHRvIFtbdWlTcmVmXV0sIGJ1dCBpdCBgJG9ic2VydmVgcyBhbmQgYCR3YXRjaGBlcy9ldmFsdWF0ZXMgYWxsIGl0cyBpbnB1dHMuKipcbiAqXG4gKiBBIGRpcmVjdGl2ZSB3aGljaCBsaW5rcyB0byBhIHN0YXRlIChhbmQgb3B0aW9uYWxseSwgcGFyYW1ldGVycykuXG4gKiBXaGVuIGNsaWNrZWQsIHRoaXMgZGlyZWN0aXZlIGFjdGl2YXRlcyB0aGUgbGlua2VkIHN0YXRlIHdpdGggdGhlIHN1cHBsaWVkIHBhcmFtZXRlciB2YWx1ZXMuXG4gKlxuICogIyMjIExpbmtlZCBTdGF0ZVxuICogVGhlIGF0dHJpYnV0ZSB2YWx1ZSBvZiBgdWktc3RhdGVgIGlzIGFuIGV4cHJlc3Npb24gd2hpY2ggaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIHRoZSBzdGF0ZSB0byBsaW5rIHRvLlxuICogKipUaGlzIGlzIGluIGNvbnRyYXN0IHdpdGggYHVpLXNyZWZgLCB3aGljaCB0YWtlcyBhIHN0YXRlIG5hbWUgYXMgYSBzdHJpbmcgbGl0ZXJhbC4qKlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIENyZWF0ZSBhIGxpc3Qgb2YgbGlua3MuXG4gKiBgYGBodG1sXG4gKiA8bGkgbmctcmVwZWF0PVwibGluayBpbiBuYXZsaW5rc1wiPlxuICogICA8YSB1aS1zdGF0ZT1cImxpbmsuc3RhdGVcIj57eyBsaW5rLmRpc3BsYXlOYW1lIH19PC9hPlxuICogPC9saT5cbiAqIGBgYFxuICpcbiAqICMjIyBSZWxhdGl2ZSBMaW5rc1xuICogSWYgdGhlIGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGEgcmVsYXRpdmUgcGF0aCwgaXQgaXMgcHJvY2Vzc2VkIGxpa2UgW1t1aVNyZWZdXS5cbiAqIFlvdSBqdXN0IG5lZWQgdG8gYmUgYXdhcmUgdGhhdCB0aGUgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgc3RhdGUgdGhhdCAqY3JlYXRlZCogdGhlIGxpbmsuXG4gKiBUaGlzIGFsbG93cyBhIHN0YXRlIHRvIGNyZWF0ZSByZWxhdGl2ZSBgdWktc3RhdGVgIHdoaWNoIGFsd2F5cyB0YXJnZXRzIHRoZSBzYW1lIGRlc3RpbmF0aW9uLlxuICpcbiAqICMjIyBocmVmc1xuICogSWYgdGhlIGxpbmtlZCBzdGF0ZSBoYXMgYSBVUkwsIHRoZSBkaXJlY3RpdmUgd2lsbCBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlIGFuZFxuICogdXBkYXRlIHRoZSBgaHJlZmAgYXR0cmlidXRlICh1c2luZyB0aGUgW1tTdGF0ZVNlcnZpY2UuaHJlZl1dICBtZXRob2QpLlxuICpcbiAqICMjIyBQYXJhbWV0ZXIgVmFsdWVzXG4gKiBJbiBhZGRpdGlvbiB0byB0aGUgc3RhdGUgbmFtZSBleHByZXNzaW9uLCBhIGB1aS1zdGF0ZWAgY2FuIGluY2x1ZGUgcGFyYW1ldGVyIHZhbHVlcyB3aGljaCBhcmUgYXBwbGllZCB3aGVuIGFjdGl2YXRpbmcgdGhlIHN0YXRlLlxuICogUGFyYW0gdmFsdWVzIHNob3VsZCBiZSBwcm92aWRlZCB1c2luZyB0aGUgYHVpLXN0YXRlLXBhcmFtc2AgYXR0cmlidXRlLlxuICogVGhlIGB1aS1zdGF0ZS1wYXJhbXNgIGF0dHJpYnV0ZSB2YWx1ZSBpcyBgJHdhdGNoYGVkIGFuZCBldmFsdWF0ZWQgYXMgYW4gZXhwcmVzc2lvbi5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBUaGlzIGV4YW1wbGUgcmVuZGVycyBhIGxpc3Qgb2YgbGlua3Mgd2l0aCBwYXJhbSB2YWx1ZXMuXG4gKiBUaGUgc3RhdGUncyBgdXNlcklkYCBwYXJhbWV0ZXIgdmFsdWUgY29tZXMgZnJvbSBlYWNoIHVzZXIncyBgdXNlci5pZGAgcHJvcGVydHkuXG4gKiBgYGBodG1sXG4gKiA8bGkgbmctcmVwZWF0PVwibGluayBpbiBuYXZsaW5rc1wiPlxuICogICA8YSB1aS1zdGF0ZT1cImxpbmsuc3RhdGVcIiB1aS1zdGF0ZS1wYXJhbXM9XCJsaW5rLnBhcmFtc1wiPnt7IGxpbmsuZGlzcGxheU5hbWUgfX08L2E+XG4gKiA8L2xpPlxuICogYGBgXG4gKlxuICogIyMjIFRyYW5zaXRpb24gT3B0aW9uc1xuICogWW91IGNhbiBzcGVjaWZ5IFtbVHJhbnNpdGlvbk9wdGlvbnNdXSB0byBwYXNzIHRvIFtbU3RhdGVTZXJ2aWNlLmdvXV0gYnkgdXNpbmcgdGhlIGB1aS1zdGF0ZS1vcHRzYCBhdHRyaWJ1dGUuXG4gKiBPcHRpb25zIGFyZSByZXN0cmljdGVkIHRvIGBsb2NhdGlvbmAsIGBpbmhlcml0YCwgYW5kIGByZWxvYWRgLlxuICogVGhlIHZhbHVlIG9mIHRoZSBgdWktc3RhdGUtb3B0c2AgaXMgYCR3YXRjaGBlZCBhbmQgZXZhbHVhdGVkIGFzIGFuIGV4cHJlc3Npb24uXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGEgdWktc3RhdGU9XCJyZXR1cm50by5zdGF0ZVwiIHVpLXN0YXRlLW9wdHM9XCJ7IHJlbG9hZDogdHJ1ZSB9XCI+SG9tZTwvYT5cbiAqIGBgYFxuICpcbiAqICMjIyBPdGhlciBET00gRXZlbnRzXG4gKlxuICogWW91IGNhbiBhbHNvIGN1c3RvbWl6ZSB3aGljaCBET00gZXZlbnRzIHRvIHJlc3BvbmQgdG8gKGluc3RlYWQgb2YgYGNsaWNrYCkgYnlcbiAqIHByb3ZpZGluZyBhbiBgZXZlbnRzYCBhcnJheSBpbiB0aGUgYHVpLXN0YXRlLW9wdHNgIGF0dHJpYnV0ZS5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8aW5wdXQgdHlwZT1cInRleHRcIiB1aS1zdGF0ZT1cImNvbnRhY3RzXCIgdWktc3RhdGUtb3B0cz1cInsgZXZlbnRzOiBbJ2NoYW5nZScsICdibHVyJ10gfVwiPlxuICogYGBgXG4gKlxuICogIyMjIEhpZ2hsaWdodGluZyB0aGUgYWN0aXZlIGxpbmtcbiAqIFRoaXMgZGlyZWN0aXZlIGNhbiBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggW1t1aVNyZWZBY3RpdmVdXSB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rLlxuICpcbiAqICMjIyBOb3Rlc1xuICpcbiAqIC0gWW91IGNhbiB1c2UgYHVpLXBhcmFtc2AgdG8gY2hhbmdlICoqb25seSB0aGUgcGFyYW1ldGVyIHZhbHVlcyoqIGJ5IG9taXR0aW5nIHRoZSBzdGF0ZSBuYW1lIGFuZCBzdXBwbHlpbmcgb25seSBgdWktc3RhdGUtcGFyYW1zYC5cbiAqICAgSG93ZXZlciwgaXQgbWlnaHQgYmUgc2ltcGxlciB0byB1c2UgW1t1aVNyZWZdXSBwYXJhbWV0ZXItb25seSBsaW5rcy5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBTZXRzIHRoZSBgbGFuZ2AgcGFyYW1ldGVyIHRvIGBlbmAgYW5kIHJlbWFpbnMgb24gdGhlIHNhbWUgc3RhdGUuXG4gKlxuICogYGBgaHRtbFxuICogPGEgdWktc3RhdGU9XCJcIiB1aS1zdGF0ZS1wYXJhbXM9XCJ7IGxhbmc6ICdlbicgfVwiPkVuZ2xpc2g8L2E+XG4gKiBgYGBcbiAqXG4gKiAtIEEgbWlkZGxlLWNsaWNrLCByaWdodC1jbGljaywgb3IgY3RybC1jbGljayBpcyBoYW5kbGVkIChuYXRpdmVseSkgYnkgdGhlIGJyb3dzZXIgdG8gb3BlbiB0aGUgaHJlZiBpbiBhIG5ldyB3aW5kb3csIGZvciBleGFtcGxlLlxuICogYGBgXG4gKi9cbnZhciB1aVN0YXRlRGlyZWN0aXZlO1xudWlTdGF0ZURpcmVjdGl2ZSA9IFsnJHVpUm91dGVyJywgJyR0aW1lb3V0JyxcbiAgICBmdW5jdGlvbiAkU3RhdGVSZWZEeW5hbWljRGlyZWN0aXZlKCR1aVJvdXRlciwgJHRpbWVvdXQpIHtcbiAgICAgICAgdmFyICRzdGF0ZSA9ICR1aVJvdXRlci5zdGF0ZVNlcnZpY2U7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgcmVxdWlyZTogWyc/XnVpU3JlZkFjdGl2ZScsICc/XnVpU3JlZkFjdGl2ZUVxJ10sXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCB1aVNyZWZBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGdldFR5cGVJbmZvKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHZhciBhY3RpdmUgPSB1aVNyZWZBY3RpdmVbMV0gfHwgdWlTcmVmQWN0aXZlWzBdO1xuICAgICAgICAgICAgICAgIHZhciB1bmxpbmtJbmZvRm4gPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBob29rRm47XG4gICAgICAgICAgICAgICAgdmFyIHJhd0RlZiA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBnZXREZWYgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBwcm9jZXNzZWREZWYoJHN0YXRlLCBlbGVtZW50LCByYXdEZWYpOyB9O1xuICAgICAgICAgICAgICAgIHZhciBpbnB1dEF0dHJzID0gWyd1aVN0YXRlJywgJ3VpU3RhdGVQYXJhbXMnLCAndWlTdGF0ZU9wdHMnXTtcbiAgICAgICAgICAgICAgICB2YXIgd2F0Y2hEZXJlZ0ZucyA9IGlucHV0QXR0cnMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGF0dHIpIHsgcmV0dXJuIChhY2NbYXR0cl0gPSBub29wLCBhY2MpOyB9LCB7fSk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmID0gZ2V0RGVmKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bmxpbmtJbmZvRm4pXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmxpbmtJbmZvRm4oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHVubGlua0luZm9GbiA9IGFjdGl2ZS4kJGFkZFN0YXRlSW5mbyhkZWYudWlTdGF0ZSwgZGVmLnVpU3RhdGVQYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmLmhyZWYgIT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzLiRzZXQodHlwZS5hdHRyLCBkZWYuaHJlZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlucHV0QXR0cnMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmF3RGVmW2ZpZWxkXSA9IGF0dHJzW2ZpZWxkXSA/IHNjb3BlLiRldmFsKGF0dHJzW2ZpZWxkXSkgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBhdHRycy4kb2JzZXJ2ZShmaWVsZCwgZnVuY3Rpb24gKGV4cHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoRGVyZWdGbnNbZmllbGRdKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3YXRjaERlcmVnRm5zW2ZpZWxkXSA9IHNjb3BlLiR3YXRjaChleHByLCBmdW5jdGlvbiAobmV3dmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3RGVmW2ZpZWxkXSA9IG5ld3ZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgJHVpUm91dGVyLnN0YXRlUmVnaXN0cnkub25TdGF0ZXNDaGFuZ2VkKHVwZGF0ZSkpO1xuICAgICAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCAkdWlSb3V0ZXIudHJhbnNpdGlvblNlcnZpY2Uub25TdWNjZXNzKHt9LCB1cGRhdGUpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXR5cGUuY2xpY2thYmxlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaG9va0ZuID0gY2xpY2tIb29rKGVsZW1lbnQsICRzdGF0ZSwgJHRpbWVvdXQsIHR5cGUsIGdldERlZik7XG4gICAgICAgICAgICAgICAgYmluZEV2ZW50cyhlbGVtZW50LCBzY29wZSwgaG9va0ZuLCByYXdEZWYudWlTdGF0ZU9wdHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XTtcbi8qKlxuICogYHVpLXNyZWYtYWN0aXZlYCBhbmQgYHVpLXNyZWYtYWN0aXZlLWVxYDogQSBkaXJlY3RpdmUgdGhhdCBhZGRzIGEgQ1NTIGNsYXNzIHdoZW4gYSBgdWktc3JlZmAgaXMgYWN0aXZlXG4gKlxuICogQSBkaXJlY3RpdmUgd29ya2luZyBhbG9uZ3NpZGUgW1t1aVNyZWZdXSBhbmQgW1t1aVN0YXRlXV0gdG8gYWRkIGNsYXNzZXMgdG8gYW4gZWxlbWVudCB3aGVuIHRoZVxuICogcmVsYXRlZCBkaXJlY3RpdmUncyBzdGF0ZSBpcyBhY3RpdmUgKGFuZCByZW1vdmUgdGhlbSB3aGVuIGl0IGlzIGluYWN0aXZlKS5cbiAqXG4gKiBUaGUgcHJpbWFyeSB1c2UtY2FzZSBpcyB0byBoaWdobGlnaHQgdGhlIGFjdGl2ZSBsaW5rIGluIG5hdmlnYXRpb24gbWVudXMsXG4gKiBkaXN0aW5ndWlzaGluZyBpdCBmcm9tIHRoZSBpbmFjdGl2ZSBtZW51IGl0ZW1zLlxuICpcbiAqICMjIyBMaW5raW5nIHRvIGEgYHVpLXNyZWZgIG9yIGB1aS1zdGF0ZWBcbiAqIGB1aS1zcmVmLWFjdGl2ZWAgY2FuIGxpdmUgb24gdGhlIHNhbWUgZWxlbWVudCBhcyBgdWktc3JlZmAvYHVpLXN0YXRlYCwgb3IgaXQgY2FuIGJlIG9uIGEgcGFyZW50IGVsZW1lbnQuXG4gKiBJZiBhIGB1aS1zcmVmLWFjdGl2ZWAgaXMgYSBwYXJlbnQgdG8gbW9yZSB0aGFuIG9uZSBgdWktc3JlZmAvYHVpLXN0YXRlYCwgaXQgd2lsbCBhcHBseSB0aGUgQ1NTIGNsYXNzIHdoZW4gKiphbnkgb2YgdGhlIGxpbmtzIGFyZSBhY3RpdmUqKi5cbiAqXG4gKiAjIyMgTWF0Y2hpbmdcbiAqXG4gKiBUaGUgYHVpLXNyZWYtYWN0aXZlYCBkaXJlY3RpdmUgYXBwbGllcyB0aGUgQ1NTIGNsYXNzIHdoZW4gdGhlIGB1aS1zcmVmYC9gdWktc3RhdGVgJ3MgdGFyZ2V0IHN0YXRlICoqb3IgYW55IGNoaWxkIHN0YXRlIGlzIGFjdGl2ZSoqLlxuICogVGhpcyBpcyBhIFwiZnV6enkgbWF0Y2hcIiB3aGljaCB1c2VzIFtbU3RhdGVTZXJ2aWNlLmluY2x1ZGVzXV0uXG4gKlxuICogVGhlIGB1aS1zcmVmLWFjdGl2ZS1lcWAgZGlyZWN0aXZlIGFwcGxpZXMgdGhlIENTUyBjbGFzcyB3aGVuIHRoZSBgdWktc3JlZmAvYHVpLXN0YXRlYCdzIHRhcmdldCBzdGF0ZSBpcyBkaXJlY3RseSBhY3RpdmUgKG5vdCB3aGVuIGNoaWxkIHN0YXRlcyBhcmUgYWN0aXZlKS5cbiAqIFRoaXMgaXMgYW4gXCJleGFjdCBtYXRjaFwiIHdoaWNoIHVzZXMgW1tTdGF0ZVNlcnZpY2UuaXNdXS5cbiAqXG4gKiAjIyMgUGFyYW1ldGVyIHZhbHVlc1xuICogSWYgdGhlIGB1aS1zcmVmYC9gdWktc3RhdGVgIGluY2x1ZGVzIHBhcmFtZXRlciB2YWx1ZXMsIHRoZSBjdXJyZW50IHBhcmFtZXRlciB2YWx1ZXMgbXVzdCBtYXRjaCB0aGUgbGluaydzIHZhbHVlcyBmb3IgdGhlIGxpbmsgdG8gYmUgaGlnaGxpZ2h0ZWQuXG4gKiBUaGlzIGFsbG93cyBhIGxpc3Qgb2YgbGlua3MgdG8gdGhlIHNhbWUgc3RhdGUgd2l0aCBkaWZmZXJlbnQgcGFyYW1ldGVycyB0byBiZSByZW5kZXJlZCwgYW5kIHRoZSBjb3JyZWN0IG9uZSBoaWdobGlnaHRlZC5cbiAqXG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8bGkgbmctcmVwZWF0PVwidXNlciBpbiB1c2Vyc1wiIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCI+XG4gKiAgIDxhIHVpLXNyZWY9XCJ1c2VyLmRldGFpbHMoeyB1c2VySWQ6IHVzZXIuaWQgfSlcIj57eyB1c2VyLmxhc3ROYW1lIH19PC9hPlxuICogPC9saT5cbiAqIGBgYFxuICpcbiAqICMjIyBFeGFtcGxlc1xuICpcbiAqIEdpdmVuIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGU6XG4gKiAjIyMjIEV4YW1wbGU6XG4gKiBgYGBodG1sXG4gKiA8dWw+XG4gKiAgIDxsaSB1aS1zcmVmLWFjdGl2ZT1cImFjdGl2ZVwiIGNsYXNzPVwiaXRlbVwiPlxuICogICAgIDxhIGhyZWYgdWktc3JlZj1cImFwcC51c2VyKHt1c2VyOiAnYmlsYm9iYWdnaW5zJ30pXCI+QGJpbGJvYmFnZ2luczwvYT5cbiAqICAgPC9saT5cbiAqIDwvdWw+XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoZSBhcHAgc3RhdGUgaXMgYGFwcC51c2VyYCAob3IgYW55IGNoaWxkIHN0YXRlKSxcbiAqIGFuZCBjb250YWlucyB0aGUgc3RhdGUgcGFyYW1ldGVyIFwidXNlclwiIHdpdGggdmFsdWUgXCJiaWxib2JhZ2dpbnNcIixcbiAqIHRoZSByZXN1bHRpbmcgSFRNTCB3aWxsIGFwcGVhciBhcyAobm90ZSB0aGUgJ2FjdGl2ZScgY2xhc3MpOlxuICpcbiAqIGBgYGh0bWxcbiAqIDx1bD5cbiAqICAgPGxpIHVpLXNyZWYtYWN0aXZlPVwiYWN0aXZlXCIgY2xhc3M9XCJpdGVtIGFjdGl2ZVwiPlxuICogICAgIDxhIHVpLXNyZWY9XCJhcHAudXNlcih7dXNlcjogJ2JpbGJvYmFnZ2lucyd9KVwiIGhyZWY9XCIvdXNlcnMvYmlsYm9iYWdnaW5zXCI+QGJpbGJvYmFnZ2luczwvYT5cbiAqICAgPC9saT5cbiAqIDwvdWw+XG4gKiBgYGBcbiAqXG4gKiAjIyMgR2xvYiBtb2RlXG4gKlxuICogSXQgaXMgcG9zc2libGUgdG8gcGFzcyBgdWktc3JlZi1hY3RpdmVgIGFuIGV4cHJlc3Npb24gdGhhdCBldmFsdWF0ZXMgdG8gYW4gb2JqZWN0LlxuICogVGhlIG9iamVjdHMga2V5cyByZXByZXNlbnQgYWN0aXZlIGNsYXNzIG5hbWVzIGFuZCB2YWx1ZXMgcmVwcmVzZW50IHRoZSByZXNwZWN0aXZlIHN0YXRlIG5hbWVzL2dsb2JzLlxuICogYHVpLXNyZWYtYWN0aXZlYCB3aWxsIG1hdGNoIGlmIHRoZSBjdXJyZW50IGFjdGl2ZSBzdGF0ZSAqKmluY2x1ZGVzKiogYW55IG9mXG4gKiB0aGUgc3BlY2lmaWVkIHN0YXRlIG5hbWVzL2dsb2JzLCBldmVuIHRoZSBhYnN0cmFjdCBvbmVzLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIEdpdmVuIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGUsIHdpdGggXCJhZG1pblwiIGJlaW5nIGFuIGFic3RyYWN0IHN0YXRlOlxuICogYGBgaHRtbFxuICogPGRpdiB1aS1zcmVmLWFjdGl2ZT1cInsnYWN0aXZlJzogJ2FkbWluLioqJ31cIj5cbiAqICAgPGEgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiB1aS1zcmVmPVwiYWRtaW4ucm9sZXNcIj5Sb2xlczwvYT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogQXJyYXlzIGFyZSBhbHNvIHN1cHBvcnRlZCBhcyB2YWx1ZXMgaW4gdGhlIGBuZ0NsYXNzYC1saWtlIGludGVyZmFjZS5cbiAqIFRoaXMgYWxsb3dzIG11bHRpcGxlIHN0YXRlcyB0byBhZGQgYGFjdGl2ZWAgY2xhc3MuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogR2l2ZW4gdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZSwgd2l0aCBcImFkbWluLnJvbGVzXCIgYmVpbmcgdGhlIGN1cnJlbnQgc3RhdGUsIHRoZSBjbGFzcyB3aWxsIGJlIGFkZGVkIHRvbzpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdWktc3JlZi1hY3RpdmU9XCJ7J2FjdGl2ZSc6IFsnb3duZXIuKionLCAnYWRtaW4uKionXX1cIj5cbiAqICAgPGEgdWktc3JlZi1hY3RpdmU9XCJhY3RpdmVcIiB1aS1zcmVmPVwiYWRtaW4ucm9sZXNcIj5Sb2xlczwvYT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogV2hlbiB0aGUgY3VycmVudCBzdGF0ZSBpcyBcImFkbWluLnJvbGVzXCIgdGhlIFwiYWN0aXZlXCIgY2xhc3Mgd2lsbCBiZSBhcHBsaWVkIHRvIGJvdGggdGhlIGA8ZGl2PmAgYW5kIGA8YT5gIGVsZW1lbnRzLlxuICogSXQgaXMgaW1wb3J0YW50IHRvIG5vdGUgdGhhdCB0aGUgc3RhdGUgbmFtZXMvZ2xvYnMgcGFzc2VkIHRvIGB1aS1zcmVmLWFjdGl2ZWAgb3ZlcnJpZGUgYW55IHN0YXRlIHByb3ZpZGVkIGJ5IGEgbGlua2VkIGB1aS1zcmVmYC5cbiAqXG4gKiAjIyMgTm90ZXM6XG4gKlxuICogLSBUaGUgY2xhc3MgbmFtZSBpcyBpbnRlcnBvbGF0ZWQgKipvbmNlKiogZHVyaW5nIHRoZSBkaXJlY3RpdmVzIGxpbmsgdGltZSAoYW55IGZ1cnRoZXIgY2hhbmdlcyB0byB0aGVcbiAqIGludGVycG9sYXRlZCB2YWx1ZSBhcmUgaWdub3JlZCkuXG4gKlxuICogLSBNdWx0aXBsZSBjbGFzc2VzIG1heSBiZSBzcGVjaWZpZWQgaW4gYSBzcGFjZS1zZXBhcmF0ZWQgZm9ybWF0OiBgdWktc3JlZi1hY3RpdmU9J2NsYXNzMSBjbGFzczIgY2xhc3MzJ2BcbiAqL1xudmFyIHVpU3JlZkFjdGl2ZURpcmVjdGl2ZTtcbnVpU3JlZkFjdGl2ZURpcmVjdGl2ZSA9IFsnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICckaW50ZXJwb2xhdGUnLCAnJHVpUm91dGVyJyxcbiAgICBmdW5jdGlvbiAkU3RhdGVSZWZBY3RpdmVEaXJlY3RpdmUoJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRpbnRlcnBvbGF0ZSwgJHVpUm91dGVyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVxQ2xhc3M7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1aVNyZWZBY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIHByb2JhYmx5IGlzbid0IG11Y2ggcG9pbnQgaW4gJG9ic2VydmluZyB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHVpU3JlZkFjdGl2ZSBhbmQgdWlTcmVmQWN0aXZlRXEgc2hhcmUgdGhlIHNhbWUgZGlyZWN0aXZlIG9iamVjdCB3aXRoIHNvbWVcbiAgICAgICAgICAgICAgICAgICAgLy8gc2xpZ2h0IGRpZmZlcmVuY2UgaW4gbG9naWMgcm91dGluZ1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFcUNsYXNzID0gJGludGVycG9sYXRlKCRhdHRycy51aVNyZWZBY3RpdmVFcSB8fCAnJywgZmFsc2UpKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1aVNyZWZBY3RpdmUgPSAkc2NvcGUuJGV2YWwoJGF0dHJzLnVpU3JlZkFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcuIHVpU3JlZkFjdGl2ZSBpcyBub3QgYSB2YWxpZCBleHByZXNzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbCBiYWNrIHRvIHVzaW5nICRpbnRlcnBvbGF0ZSBiZWxvd1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVpU3JlZkFjdGl2ZSA9IHVpU3JlZkFjdGl2ZSB8fCAkaW50ZXJwb2xhdGUoJGF0dHJzLnVpU3JlZkFjdGl2ZSB8fCAnJywgZmFsc2UpKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFN0YXRlc0Zyb21EZWZpbml0aW9uT2JqZWN0KHVpU3JlZkFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IHVpU3JlZiB0byBjb21tdW5pY2F0ZSB3aXRoIHVpU3JlZkFjdGl2ZVtFcXVhbHNdXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJCRhZGRTdGF0ZUluZm8gPSBmdW5jdGlvbiAobmV3U3RhdGUsIG5ld1BhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYWxyZWFkeSBnb3QgYW4gZXhwbGljaXQgc3RhdGUgcHJvdmlkZWQgYnkgdWktc3JlZi1hY3RpdmUsIHNvIHdlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaGFkb3cgdGhlIG9uZSB0aGF0IGNvbWVzIGZyb20gdWktc3JlZlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHVpU3JlZkFjdGl2ZSkgJiYgc3RhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVyZWdpc3RlciA9IGFkZFN0YXRlKG5ld1N0YXRlLCBuZXdQYXJhbXMsIHVpU3JlZkFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZXJlZ2lzdGVyO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVBZnRlclRyYW5zaXRpb24odHJhbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zLnByb21pc2UudGhlbih1cGRhdGUsIG5vb3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95Jywgc2V0dXBFdmVudExpc3RlbmVycygpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR1aVJvdXRlci5nbG9iYWxzLnRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUFmdGVyVHJhbnNpdGlvbigkdWlSb3V0ZXIuZ2xvYmFscy50cmFuc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlcmVnaXN0ZXJTdGF0ZXNDaGFuZ2VkTGlzdGVuZXIgPSAkdWlSb3V0ZXIuc3RhdGVSZWdpc3RyeS5vblN0YXRlc0NoYW5nZWQoaGFuZGxlU3RhdGVzQ2hhbmdlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVyZWdpc3Rlck9uU3RhcnRMaXN0ZW5lciA9ICR1aVJvdXRlci50cmFuc2l0aW9uU2VydmljZS5vblN0YXJ0KHt9LCB1cGRhdGVBZnRlclRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlcmVnaXN0ZXJTdGF0ZUNoYW5nZVN1Y2Nlc3NMaXN0ZW5lciA9ICRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCB1cGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGNsZWFuVXAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyZWdpc3RlclN0YXRlc0NoYW5nZWRMaXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcmVnaXN0ZXJPblN0YXJ0TGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdGVyU3RhdGVDaGFuZ2VTdWNjZXNzTGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlU3RhdGVzQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0YXRlc0Zyb21EZWZpbml0aW9uT2JqZWN0KHVpU3JlZkFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0U3RhdGVzRnJvbURlZmluaXRpb25PYmplY3Qoc3RhdGVzRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHN0YXRlc0RlZmluaXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChzdGF0ZXNEZWZpbml0aW9uLCBmdW5jdGlvbiAoc3RhdGVPck5hbWUsIGFjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiB0byBhYnN0cmFjdCBhZGRpbmcgc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRTdGF0ZUZvckNsYXNzID0gZnVuY3Rpb24gKHN0YXRlT3JOYW1lLCBhY3RpdmVDbGFzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZiA9IHBhcnNlU3RhdGVSZWYoc3RhdGVPck5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkU3RhdGUocmVmLnN0YXRlLCAkc2NvcGUuJGV2YWwocmVmLnBhcmFtRXhwciksIGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3RyaW5nKHN0YXRlT3JOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhdGUgaXMgc3RyaW5nLCBqdXN0IGFkZCBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFN0YXRlRm9yQ2xhc3Moc3RhdGVPck5hbWUsIGFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FycmF5KHN0YXRlT3JOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3RhdGUgaXMgYW4gYXJyYXksIGl0ZXJhdGUgb3ZlciBpdCBhbmQgYWRkIGVhY2ggYXJyYXkgaXRlbSBpbmRpdmlkdWFsbHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHN0YXRlT3JOYW1lLCBmdW5jdGlvbiAoc3RhdGVPck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTdGF0ZUZvckNsYXNzKHN0YXRlT3JOYW1lLCBhY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFN0YXRlKHN0YXRlTmFtZSwgc3RhdGVQYXJhbXMsIGFjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSAkc3RhdGUuZ2V0KHN0YXRlTmFtZSwgc3RhdGVDb250ZXh0KCRlbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGVJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZSB8fCB7IG5hbWU6IHN0YXRlTmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogc3RhdGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3M6IGFjdGl2ZUNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlcy5wdXNoKHN0YXRlSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlU3RhdGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRnJvbShzdGF0ZXMpKHN0YXRlSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSByb3V0ZSBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BsaXRDbGFzc2VzID0gZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIuc3BsaXQoL1xccy8pLmZpbHRlcihpZGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdldENsYXNzZXMgPSBmdW5jdGlvbiAoc3RhdGVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlTGlzdC5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguYWN0aXZlQ2xhc3M7IH0pLm1hcChzcGxpdENsYXNzZXMpLnJlZHVjZSh1bm5lc3RSLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsbENsYXNzZXMgPSBnZXRDbGFzc2VzKHN0YXRlcykuY29uY2F0KHNwbGl0Q2xhc3NlcyhhY3RpdmVFcUNsYXNzKSkucmVkdWNlKHVuaXFSLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZnV6enlDbGFzc2VzID0gZ2V0Q2xhc3NlcyhzdGF0ZXMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiAkc3RhdGUuaW5jbHVkZXMoeC5zdGF0ZS5uYW1lLCB4LnBhcmFtcyk7IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGFjdGx5TWF0Y2hlc0FueSA9ICEhc3RhdGVzLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4gJHN0YXRlLmlzKHguc3RhdGUubmFtZSwgeC5wYXJhbXMpOyB9KS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhhY3RDbGFzc2VzID0gZXhhY3RseU1hdGNoZXNBbnkgPyBzcGxpdENsYXNzZXMoYWN0aXZlRXFDbGFzcykgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRDbGFzc2VzID0gZnV6enlDbGFzc2VzLmNvbmNhdChleGFjdENsYXNzZXMpLnJlZHVjZSh1bmlxUiwgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZUNsYXNzZXMgPSBhbGxDbGFzc2VzLmZpbHRlcihmdW5jdGlvbiAoY2xzKSB7IHJldHVybiAhaW5BcnJheShhZGRDbGFzc2VzLCBjbHMpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkgeyByZXR1cm4gJGVsZW1lbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbGFzc05hbWUpIHsgcmV0dXJuICRlbGVtZW50LnJlbW92ZUNsYXNzKGNsYXNzTmFtZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgIH07XG4gICAgfV07XG5uZy5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpXG4gICAgLmRpcmVjdGl2ZSgndWlTcmVmJywgdWlTcmVmRGlyZWN0aXZlKVxuICAgIC5kaXJlY3RpdmUoJ3VpU3JlZkFjdGl2ZScsIHVpU3JlZkFjdGl2ZURpcmVjdGl2ZSlcbiAgICAuZGlyZWN0aXZlKCd1aVNyZWZBY3RpdmVFcScsIHVpU3JlZkFjdGl2ZURpcmVjdGl2ZSlcbiAgICAuZGlyZWN0aXZlKCd1aVN0YXRlJywgdWlTdGF0ZURpcmVjdGl2ZSk7XG5cbi8qKiBAbW9kdWxlIG5nMSAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbi8qKlxuICogYGlzU3RhdGVgIEZpbHRlcjogdHJ1dGh5IGlmIHRoZSBjdXJyZW50IHN0YXRlIGlzIHRoZSBwYXJhbWV0ZXJcbiAqXG4gKiBUcmFuc2xhdGVzIHRvIFtbU3RhdGVTZXJ2aWNlLmlzXV0gYCRzdGF0ZS5pcyhcInN0YXRlTmFtZVwiKWAuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1pZj1cIidzdGF0ZU5hbWUnIHwgaXNTdGF0ZVwiPnNob3cgaWYgc3RhdGUgaXMgJ3N0YXRlTmFtZSc8L2Rpdj5cbiAqIGBgYFxuICovXG4kSXNTdGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckc3RhdGUnXTtcbmZ1bmN0aW9uICRJc1N0YXRlRmlsdGVyKCRzdGF0ZSkge1xuICAgIHZhciBpc0ZpbHRlciA9IGZ1bmN0aW9uIChzdGF0ZSwgcGFyYW1zLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiAkc3RhdGUuaXMoc3RhdGUsIHBhcmFtcywgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBpc0ZpbHRlci4kc3RhdGVmdWwgPSB0cnVlO1xuICAgIHJldHVybiBpc0ZpbHRlcjtcbn1cbi8qKlxuICogYGluY2x1ZGVkQnlTdGF0ZWAgRmlsdGVyOiB0cnV0aHkgaWYgdGhlIGN1cnJlbnQgc3RhdGUgaW5jbHVkZXMgdGhlIHBhcmFtZXRlclxuICpcbiAqIFRyYW5zbGF0ZXMgdG8gW1tTdGF0ZVNlcnZpY2UuaW5jbHVkZXNdXWAgJHN0YXRlLmlzKFwiZnVsbE9yUGFydGlhbFN0YXRlTmFtZVwiKWAuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBgaHRtbFxuICogPGRpdiBuZy1pZj1cIidmdWxsT3JQYXJ0aWFsU3RhdGVOYW1lJyB8IGluY2x1ZGVkQnlTdGF0ZVwiPnNob3cgaWYgc3RhdGUgaW5jbHVkZXMgJ2Z1bGxPclBhcnRpYWxTdGF0ZU5hbWUnPC9kaXY+XG4gKiBgYGBcbiAqL1xuJEluY2x1ZGVkQnlTdGF0ZUZpbHRlci4kaW5qZWN0ID0gWyckc3RhdGUnXTtcbmZ1bmN0aW9uICRJbmNsdWRlZEJ5U3RhdGVGaWx0ZXIoJHN0YXRlKSB7XG4gICAgdmFyIGluY2x1ZGVzRmlsdGVyID0gZnVuY3Rpb24gKHN0YXRlLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuICRzdGF0ZS5pbmNsdWRlcyhzdGF0ZSwgcGFyYW1zLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIGluY2x1ZGVzRmlsdGVyLiRzdGF0ZWZ1bCA9IHRydWU7XG4gICAgcmV0dXJuIGluY2x1ZGVzRmlsdGVyO1xufVxubmcubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKVxuICAgIC5maWx0ZXIoJ2lzU3RhdGUnLCAkSXNTdGF0ZUZpbHRlcilcbiAgICAuZmlsdGVyKCdpbmNsdWRlZEJ5U3RhdGUnLCAkSW5jbHVkZWRCeVN0YXRlRmlsdGVyKTtcblxuLyoqXG4gKiBAbmcxYXBpXG4gKiBAbW9kdWxlIGRpcmVjdGl2ZXNcbiAqLyAvKiogZm9yIHR5cGVkb2MgKi9cbi8qKlxuICogYHVpLXZpZXdgOiBBIHZpZXdwb3J0IGRpcmVjdGl2ZSB3aGljaCBpcyBmaWxsZWQgaW4gYnkgYSB2aWV3IGZyb20gdGhlIGFjdGl2ZSBzdGF0ZS5cbiAqXG4gKiAjIyMgQXR0cmlidXRlc1xuICpcbiAqIC0gYG5hbWVgOiAoT3B0aW9uYWwpIEEgdmlldyBuYW1lLlxuICogICBUaGUgbmFtZSBzaG91bGQgYmUgdW5pcXVlIGFtb25nc3QgdGhlIG90aGVyIHZpZXdzIGluIHRoZSBzYW1lIHN0YXRlLlxuICogICBZb3UgY2FuIGhhdmUgdmlld3Mgb2YgdGhlIHNhbWUgbmFtZSB0aGF0IGxpdmUgaW4gZGlmZmVyZW50IHN0YXRlcy5cbiAqICAgVGhlIHVpLXZpZXcgY2FuIGJlIHRhcmdldGVkIGluIGEgVmlldyB1c2luZyB0aGUgbmFtZSAoW1tOZzFTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0pLlxuICpcbiAqIC0gYGF1dG9zY3JvbGxgOiBhbiBleHByZXNzaW9uLiBXaGVuIGl0IGV2YWx1YXRlcyB0byB0cnVlLCB0aGUgYHVpLXZpZXdgIHdpbGwgYmUgc2Nyb2xsZWQgaW50byB2aWV3IHdoZW4gaXQgaXMgYWN0aXZhdGVkLlxuICogICBVc2VzIFtbJHVpVmlld1Njcm9sbF1dIHRvIGRvIHRoZSBzY3JvbGxpbmcuXG4gKlxuICogLSBgb25sb2FkYDogRXhwcmVzc2lvbiB0byBldmFsdWF0ZSB3aGVuZXZlciB0aGUgdmlldyB1cGRhdGVzLlxuICpcbiAqICMjIyMgRXhhbXBsZTpcbiAqIEEgdmlldyBjYW4gYmUgdW5uYW1lZCBvciBuYW1lZC5cbiAqIGBgYGh0bWxcbiAqIDwhLS0gVW5uYW1lZCAtLT5cbiAqIDxkaXYgdWktdmlldz48L2Rpdj5cbiAqXG4gKiA8IS0tIE5hbWVkIC0tPlxuICogPGRpdiB1aS12aWV3PVwidmlld05hbWVcIj48L2Rpdj5cbiAqXG4gKiA8IS0tIE5hbWVkIChkaWZmZXJlbnQgc3R5bGUpIC0tPlxuICogPHVpLXZpZXcgbmFtZT1cInZpZXdOYW1lXCI+PC91aS12aWV3PlxuICogYGBgXG4gKlxuICogWW91IGNhbiBvbmx5IGhhdmUgb25lIHVubmFtZWQgdmlldyB3aXRoaW4gYW55IHRlbXBsYXRlIChvciByb290IGh0bWwpLiBJZiB5b3UgYXJlIG9ubHkgdXNpbmcgYVxuICogc2luZ2xlIHZpZXcgYW5kIGl0IGlzIHVubmFtZWQgdGhlbiB5b3UgY2FuIHBvcHVsYXRlIGl0IGxpa2Ugc286XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiB1aS12aWV3PjwvZGl2PlxuICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAqICAgdGVtcGxhdGU6IFwiPGgxPkhFTExPITwvaDE+XCJcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBUaGUgYWJvdmUgaXMgYSBjb252ZW5pZW50IHNob3J0Y3V0IGVxdWl2YWxlbnQgdG8gc3BlY2lmeWluZyB5b3VyIHZpZXcgZXhwbGljaXRseSB3aXRoIHRoZVxuICogW1tOZzFTdGF0ZURlY2xhcmF0aW9uLnZpZXdzXV0gY29uZmlnIHByb3BlcnR5LCBieSBuYW1lLCBpbiB0aGlzIGNhc2UgYW4gZW1wdHkgbmFtZTpcbiAqXG4gKiBgYGBqc1xuICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAqICAgdmlld3M6IHtcbiAqICAgICBcIlwiOiB7XG4gKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICogICAgIH1cbiAqICAgfVxuICogfSlcbiAqIGBgYFxuICpcbiAqIEJ1dCB0eXBpY2FsbHkgeW91J2xsIG9ubHkgdXNlIHRoZSB2aWV3cyBwcm9wZXJ0eSBpZiB5b3UgbmFtZSB5b3VyIHZpZXcgb3IgaGF2ZSBtb3JlIHRoYW4gb25lIHZpZXdcbiAqIGluIHRoZSBzYW1lIHRlbXBsYXRlLiBUaGVyZSdzIG5vdCByZWFsbHkgYSBjb21wZWxsaW5nIHJlYXNvbiB0byBuYW1lIGEgdmlldyBpZiBpdHMgdGhlIG9ubHkgb25lLFxuICogYnV0IHlvdSBjb3VsZCBpZiB5b3Ugd2FudGVkLCBsaWtlIHNvOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdWktdmlldz1cIm1haW5cIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIGBgYGpzXG4gKiAkc3RhdGVQcm92aWRlci5zdGF0ZShcImhvbWVcIiwge1xuICogICB2aWV3czoge1xuICogICAgIFwibWFpblwiOiB7XG4gKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICogICAgIH1cbiAqICAgfVxuICogfSlcbiAqIGBgYFxuICpcbiAqIFJlYWxseSB0aG91Z2gsIHlvdSdsbCB1c2Ugdmlld3MgdG8gc2V0IHVwIG11bHRpcGxlIHZpZXdzOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdWktdmlldz48L2Rpdj5cbiAqIDxkaXYgdWktdmlldz1cImNoYXJ0XCI+PC9kaXY+XG4gKiA8ZGl2IHVpLXZpZXc9XCJkYXRhXCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBgYGBqc1xuICogJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJob21lXCIsIHtcbiAqICAgdmlld3M6IHtcbiAqICAgICBcIlwiOiB7XG4gKiAgICAgICB0ZW1wbGF0ZTogXCI8aDE+SEVMTE8hPC9oMT5cIlxuICogICAgIH0sXG4gKiAgICAgXCJjaGFydFwiOiB7XG4gKiAgICAgICB0ZW1wbGF0ZTogXCI8Y2hhcnRfdGhpbmcvPlwiXG4gKiAgICAgfSxcbiAqICAgICBcImRhdGFcIjoge1xuICogICAgICAgdGVtcGxhdGU6IFwiPGRhdGFfdGhpbmcvPlwiXG4gKiAgICAgfVxuICogICB9XG4gKiB9KVxuICogYGBgXG4gKlxuICogIyMjIyBFeGFtcGxlcyBmb3IgYGF1dG9zY3JvbGxgOlxuICogYGBgaHRtbFxuICogPCEtLSBJZiBhdXRvc2Nyb2xsIHByZXNlbnQgd2l0aCBubyBleHByZXNzaW9uLFxuICogICAgICB0aGVuIHNjcm9sbCB1aS12aWV3IGludG8gdmlldyAtLT5cbiAqIDx1aS12aWV3IGF1dG9zY3JvbGwvPlxuICpcbiAqIDwhLS0gSWYgYXV0b3Njcm9sbCBwcmVzZW50IHdpdGggdmFsaWQgZXhwcmVzc2lvbixcbiAqICAgICAgdGhlbiBzY3JvbGwgdWktdmlldyBpbnRvIHZpZXcgaWYgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gdHJ1ZSAtLT5cbiAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J3RydWUnLz5cbiAqIDx1aS12aWV3IGF1dG9zY3JvbGw9J2ZhbHNlJy8+XG4gKiA8dWktdmlldyBhdXRvc2Nyb2xsPSdzY29wZVZhcmlhYmxlJy8+XG4gKiBgYGBcbiAqXG4gKiBSZXNvbHZlIGRhdGE6XG4gKlxuICogVGhlIHJlc29sdmVkIGRhdGEgZnJvbSB0aGUgc3RhdGUncyBgcmVzb2x2ZWAgYmxvY2sgaXMgcGxhY2VkIG9uIHRoZSBzY29wZSBhcyBgJHJlc29sdmVgICh0aGlzXG4gKiBjYW4gYmUgY3VzdG9taXplZCB1c2luZyBbW05nMVZpZXdEZWNsYXJhdGlvbi5yZXNvbHZlQXNdXSkuICBUaGlzIGNhbiBiZSB0aGVuIGFjY2Vzc2VkIGZyb20gdGhlIHRlbXBsYXRlLlxuICpcbiAqIE5vdGUgdGhhdCB3aGVuIGBjb250cm9sbGVyQXNgIGlzIGJlaW5nIHVzZWQsIGAkcmVzb2x2ZWAgaXMgc2V0IG9uIHRoZSBjb250cm9sbGVyIGluc3RhbmNlICphZnRlciogdGhlXG4gKiBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZC4gIFRoZSBgJG9uSW5pdCgpYCBob29rIGNhbiBiZSB1c2VkIHRvIHBlcmZvcm0gaW5pdGlhbGl6YXRpb24gY29kZSB3aGljaFxuICogZGVwZW5kcyBvbiBgJHJlc29sdmVgIGRhdGEuXG4gKlxuICogIyMjIyBFeGFtcGxlOlxuICogYGBganNcbiAqICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuICogICB0ZW1wbGF0ZTogJzxteS1jb21wb25lbnQgdXNlcj1cIiRyZXNvbHZlLnVzZXJcIj48L215LWNvbXBvbmVudD4nLFxuICogICByZXNvbHZlOiB7XG4gKiAgICAgdXNlcjogZnVuY3Rpb24oVXNlclNlcnZpY2UpIHsgcmV0dXJuIFVzZXJTZXJ2aWNlLmZldGNoVXNlcigpOyB9XG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKi9cbnZhciB1aVZpZXc7XG51aVZpZXcgPSBbJyR2aWV3JywgJyRhbmltYXRlJywgJyR1aVZpZXdTY3JvbGwnLCAnJGludGVycG9sYXRlJywgJyRxJyxcbiAgICBmdW5jdGlvbiAkVmlld0RpcmVjdGl2ZSgkdmlldywgJGFuaW1hdGUsICR1aVZpZXdTY3JvbGwsICRpbnRlcnBvbGF0ZSwgJHEpIHtcbiAgICAgICAgZnVuY3Rpb24gZ2V0UmVuZGVyZXIoYXR0cnMsIHNjb3BlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAoZWxlbWVudCwgdGFyZ2V0LCBjYikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmcudmVyc2lvbi5taW5vciA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhbmltYXRlLmVudGVyKGVsZW1lbnQsIG51bGwsIHRhcmdldCkudGhlbihjYik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkYW5pbWF0ZS5lbnRlcihlbGVtZW50LCBudWxsLCB0YXJnZXQsIGNiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbGVhdmU6IGZ1bmN0aW9uIChlbGVtZW50LCBjYikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmcudmVyc2lvbi5taW5vciA+IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhbmltYXRlLmxlYXZlKGVsZW1lbnQpLnRoZW4oY2IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1hdGUubGVhdmUoZWxlbWVudCwgY2IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY29uZmlnc0VxdWFsKGNvbmZpZzEsIGNvbmZpZzIpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25maWcxID09PSBjb25maWcyO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb290RGF0YSA9IHtcbiAgICAgICAgICAgICRjZmc6IHsgdmlld0RlY2w6IHsgJGNvbnRleHQ6ICR2aWV3Ll9wbHVnaW5hcGkuX3Jvb3RWaWV3Q29udGV4dCgpIH0gfSxcbiAgICAgICAgICAgICR1aVZpZXc6IHt9LFxuICAgICAgICB9O1xuICAgICAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgICByZXN0cmljdDogJ0VDQScsXG4gICAgICAgICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgICAgICAgIHByaW9yaXR5OiA0MDAsXG4gICAgICAgICAgICB0cmFuc2NsdWRlOiAnZWxlbWVudCcsXG4gICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAodEVsZW1lbnQsIHRBdHRycywgJHRyYW5zY2x1ZGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCAkZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ubG9hZEV4cCA9IGF0dHJzWydvbmxvYWQnXSB8fCAnJywgYXV0b1Njcm9sbEV4cCA9IGF0dHJzWydhdXRvc2Nyb2xsJ10sIHJlbmRlcmVyID0gZ2V0UmVuZGVyZXIoYXR0cnMsIHNjb3BlKSwgaW5oZXJpdGVkID0gJGVsZW1lbnQuaW5oZXJpdGVkRGF0YSgnJHVpVmlldycpIHx8IHJvb3REYXRhLCBuYW1lID0gJGludGVycG9sYXRlKGF0dHJzWyd1aVZpZXcnXSB8fCBhdHRyc1snbmFtZSddIHx8ICcnKShzY29wZSkgfHwgJyRkZWZhdWx0JztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpb3VzRWwsIGN1cnJlbnRFbCwgY3VycmVudFNjb3BlLCB2aWV3Q29uZmlnLCB1bnJlZ2lzdGVyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlVUlWaWV3ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHR5cGU6ICduZzEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRpcmVjdGl2ZS5jb3VudCsrLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZxbjogaW5oZXJpdGVkLiR1aVZpZXcuZnFuID8gaW5oZXJpdGVkLiR1aVZpZXcuZnFuICsgJy4nICsgbmFtZSA6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWdVcGRhdGVkOiBjb25maWdVcGRhdGVkQ2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgY3JlYXRpb25Db250ZXh0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcm9tUGFyZW50VGFnQ29uZmlnID0gcGFyc2UoJyRjZmcudmlld0RlY2wuJGNvbnRleHQnKShpbmhlcml0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbG93IDx1aS12aWV3IG5hbWU9XCJmb29cIj48dWktdmlldyBuYW1lPVwiYmFyXCI+PC91aS12aWV3PjwvdWktdmlldz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvdWktcm91dGVyL2lzc3Vlcy8zMzU1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyb21QYXJlbnRUYWcgPSBwYXJzZSgnJHVpVmlldy5jcmVhdGlvbkNvbnRleHQnKShpbmhlcml0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmcm9tUGFyZW50VGFnQ29uZmlnIHx8IGZyb21QYXJlbnRUYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0cmFjZS50cmFjZVVJVmlld0V2ZW50KCdMaW5raW5nJywgYWN0aXZlVUlWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29uZmlnVXBkYXRlZENhbGxiYWNrKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZyAmJiAhKGNvbmZpZyBpbnN0YW5jZW9mIE5nMVZpZXdDb25maWcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWdzRXF1YWwodmlld0NvbmZpZywgY29uZmlnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjZS50cmFjZVVJVmlld0NvbmZpZ1VwZGF0ZWQoYWN0aXZlVUlWaWV3LCBjb25maWcgJiYgY29uZmlnLnZpZXdEZWNsICYmIGNvbmZpZy52aWV3RGVjbC4kY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3Q29uZmlnID0gY29uZmlnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmlldyhjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJyR1aVZpZXcnLCB7ICR1aVZpZXc6IGFjdGl2ZVVJVmlldyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmlldygpO1xuICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyID0gJHZpZXcucmVnaXN0ZXJVSVZpZXcoYWN0aXZlVUlWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3RXZlbnQoJ0Rlc3Ryb3lpbmcvVW5yZWdpc3RlcmluZycsIGFjdGl2ZVVJVmlldyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbGVhbnVwTGFzdFZpZXcoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3RXZlbnQoJ1JlbW92aW5nIChwcmV2aW91cykgZWwnLCBwcmV2aW91c0VsLmRhdGEoJyR1aVZpZXcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNFbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0VsID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjZS50cmFjZVVJVmlld0V2ZW50KCdEZXN0cm95aW5nIHNjb3BlJywgYWN0aXZlVUlWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NvcGUuJGRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NvcGUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdmlld0RhdGFfMSA9IGN1cnJlbnRFbC5kYXRhKCckdWlWaWV3QW5pbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3RXZlbnQoJ0FuaW1hdGUgb3V0JywgX3ZpZXdEYXRhXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmxlYXZlKGN1cnJlbnRFbCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdmlld0RhdGFfMS4kJGFuaW1MZWF2ZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzRWwgPSBjdXJyZW50RWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVWaWV3KGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1Njb3BlID0gc2NvcGUuJG5ldygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1FbnRlciA9ICRxLmRlZmVyKCksIGFuaW1MZWF2ZSA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHVpVmlld0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNmZzogY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR1aVZpZXc6IGFjdGl2ZVVJVmlldyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHVpVmlld0FuaW0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1FbnRlcjogYW5pbUVudGVyLnByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFuaW1MZWF2ZTogYW5pbUxlYXZlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCRhbmltTGVhdmU6IGFuaW1MZWF2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBuZ2RvYyBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQG5hbWUgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3IyR2aWV3Q29udGVudExvYWRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudE9mIHVpLnJvdXRlci5zdGF0ZS5kaXJlY3RpdmU6dWktdmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50VHlwZSBlbWl0cyBvbiB1aS12aWV3IGRpcmVjdGl2ZSBzY29wZVxuICAgICAgICAgICAgICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogRmlyZWQgb25jZSB0aGUgdmlldyAqKmJlZ2lucyBsb2FkaW5nKiosICpiZWZvcmUqIHRoZSBET00gaXMgcmVuZGVyZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50IEV2ZW50IG9iamVjdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2aWV3TmFtZSBOYW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50TG9hZGluZycsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lZCA9ICR0cmFuc2NsdWRlKG5ld1Njb3BlLCBmdW5jdGlvbiAoY2xvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZS5kYXRhKCckdWlWaWV3QW5pbScsICR1aVZpZXdBbmltKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZS5kYXRhKCckdWlWaWV3JywgJHVpVmlld0RhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmVudGVyKGNsb25lLCAkZWxlbWVudCwgZnVuY3Rpb24gb25VSVZpZXdFbnRlcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbUVudGVyLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTY29wZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50QW5pbWF0aW9uRW5kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChhdXRvU2Nyb2xsRXhwKSAmJiAhYXV0b1Njcm9sbEV4cCB8fCBzY29wZS4kZXZhbChhdXRvU2Nyb2xsRXhwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHVpVmlld1Njcm9sbChjbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwTGFzdFZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEVsID0gY2xvbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjb3BlID0gbmV3U2NvcGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBuZ2RvYyBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQG5hbWUgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3IyR2aWV3Q29udGVudExvYWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50T2YgdWkucm91dGVyLnN0YXRlLmRpcmVjdGl2ZTp1aS12aWV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXZlbnRUeXBlIGVtaXRzIG9uIHVpLXZpZXcgZGlyZWN0aXZlIHNjb3BlXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24gICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEZpcmVkIG9uY2UgdGhlIHZpZXcgaXMgKipsb2FkZWQqKiwgKmFmdGVyKiB0aGUgRE9NIGlzIHJlbmRlcmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCBFdmVudCBvYmplY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY29wZS4kZW1pdCgnJHZpZXdDb250ZW50TG9hZGVkJywgY29uZmlnIHx8IHZpZXdDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjb3BlLiRldmFsKG9ubG9hZEV4cCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZTtcbiAgICB9XTtcbiRWaWV3RGlyZWN0aXZlRmlsbC4kaW5qZWN0ID0gWyckY29tcGlsZScsICckY29udHJvbGxlcicsICckdHJhbnNpdGlvbnMnLCAnJHZpZXcnLCAnJHEnLCAnJHRpbWVvdXQnXTtcbi8qKiBAaGlkZGVuICovXG5mdW5jdGlvbiAkVmlld0RpcmVjdGl2ZUZpbGwoJGNvbXBpbGUsICRjb250cm9sbGVyLCAkdHJhbnNpdGlvbnMsICR2aWV3LCAkcSwgJHRpbWVvdXQpIHtcbiAgICB2YXIgZ2V0Q29udHJvbGxlckFzID0gcGFyc2UoJ3ZpZXdEZWNsLmNvbnRyb2xsZXJBcycpO1xuICAgIHZhciBnZXRSZXNvbHZlQXMgPSBwYXJzZSgndmlld0RlY2wucmVzb2x2ZUFzJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFQ0EnLFxuICAgICAgICBwcmlvcml0eTogLTQwMCxcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRFbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgaW5pdGlhbCA9IHRFbGVtZW50Lmh0bWwoKTtcbiAgICAgICAgICAgIHRFbGVtZW50LmVtcHR5KCk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCAkZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJGVsZW1lbnQuZGF0YSgnJHVpVmlldycpO1xuICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5odG1sKGluaXRpYWwpO1xuICAgICAgICAgICAgICAgICAgICAkY29tcGlsZSgkZWxlbWVudC5jb250ZW50cygpKShzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNmZyA9IGRhdGEuJGNmZyB8fCB7IHZpZXdEZWNsOiB7fSwgZ2V0VGVtcGxhdGU6IG5vb3AgfTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZUN0eCA9IGNmZy5wYXRoICYmIG5ldyBSZXNvbHZlQ29udGV4dChjZmcucGF0aCk7XG4gICAgICAgICAgICAgICAgJGVsZW1lbnQuaHRtbChjZmcuZ2V0VGVtcGxhdGUoJGVsZW1lbnQsIHJlc29sdmVDdHgpIHx8IGluaXRpYWwpO1xuICAgICAgICAgICAgICAgIHRyYWNlLnRyYWNlVUlWaWV3RmlsbChkYXRhLiR1aVZpZXcsICRlbGVtZW50Lmh0bWwoKSk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSAkY29tcGlsZSgkZWxlbWVudC5jb250ZW50cygpKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udHJvbGxlciA9IGNmZy5jb250cm9sbGVyO1xuICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyQXMgPSBnZXRDb250cm9sbGVyQXMoY2ZnKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x2ZUFzID0gZ2V0UmVzb2x2ZUFzKGNmZyk7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2FscyA9IHJlc29sdmVDdHggJiYgZ2V0TG9jYWxzKHJlc29sdmVDdHgpO1xuICAgICAgICAgICAgICAgIHNjb3BlW3Jlc29sdmVBc10gPSBsb2NhbHM7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJJbnN0YW5jZSA9ICRjb250cm9sbGVyKGNvbnRyb2xsZXIsIGV4dGVuZCh7fSwgbG9jYWxzLCB7ICRzY29wZTogc2NvcGUsICRlbGVtZW50OiAkZWxlbWVudCB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyQXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlW2NvbnRyb2xsZXJBc10gPSBjb250cm9sbGVySW5zdGFuY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZVtjb250cm9sbGVyQXNdW3Jlc29sdmVBc10gPSBsb2NhbHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogVXNlICR2aWV3IHNlcnZpY2UgYXMgYSBjZW50cmFsIHBvaW50IGZvciByZWdpc3RlcmluZyBjb21wb25lbnQtbGV2ZWwgaG9va3NcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlbiwgd2hlbiBhIGNvbXBvbmVudCBpcyBjcmVhdGVkLCB0ZWxsIHRoZSAkdmlldyBzZXJ2aWNlLCBzbyBpdCBjYW4gaW52b2tlIGhvb2tzXG4gICAgICAgICAgICAgICAgICAgIC8vICR2aWV3LmNvbXBvbmVudExvYWRlZChjb250cm9sbGVySW5zdGFuY2UsIHsgJHNjb3BlOiBzY29wZSwgJGVsZW1lbnQ6ICRlbGVtZW50IH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBzY29wZS4kb24oJyRkZXN0cm95JywgKCkgPT4gJHZpZXcuY29tcG9uZW50VW5sb2FkZWQoY29udHJvbGxlckluc3RhbmNlLCB7ICRzY29wZTogc2NvcGUsICRlbGVtZW50OiAkZWxlbWVudCB9KSk7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJyRuZ0NvbnRyb2xsZXJDb250cm9sbGVyJywgY29udHJvbGxlckluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuY2hpbGRyZW4oKS5kYXRhKCckbmdDb250cm9sbGVyQ29udHJvbGxlcicsIGNvbnRyb2xsZXJJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQ29udHJvbGxlckNhbGxiYWNrcygkcSwgJHRyYW5zaXRpb25zLCBjb250cm9sbGVySW5zdGFuY2UsIHNjb3BlLCBjZmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgY29tcG9uZW50IHRvIGFwcGVhciBpbiB0aGUgRE9NXG4gICAgICAgICAgICAgICAgaWYgKGlzU3RyaW5nKGNmZy52aWV3RGVjbC5jb21wb25lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjbXBfMSA9IGNmZy52aWV3RGVjbC5jb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZWJvYk5hbWUgPSBrZWJvYlN0cmluZyhjbXBfMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWdSZWdleHBfMSA9IG5ldyBSZWdFeHAoXCJeKHgtfGRhdGEtKT9cIiArIGtlYm9iTmFtZSArIFwiJFwiLCAnaScpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0Q29tcG9uZW50Q29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3RpdmVFbCA9IFtdLnNsaWNlLmNhbGwoJGVsZW1lbnRbMF0uY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGVsICYmIGVsLnRhZ05hbWUgJiYgdGFnUmVnZXhwXzEuZXhlYyhlbC50YWdOYW1lKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlyZWN0aXZlRWwgJiYgbmcuZWxlbWVudChkaXJlY3RpdmVFbCkuZGF0YShcIiRcIiArIGNtcF8xICsgXCJDb250cm9sbGVyXCIpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVyZWdpc3RlcldhdGNoXzEgPSBzY29wZS4kd2F0Y2goZ2V0Q29tcG9uZW50Q29udHJvbGxlciwgZnVuY3Rpb24gKGN0cmxJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHJsSW5zdGFuY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJDb250cm9sbGVyQ2FsbGJhY2tzKCRxLCAkdHJhbnNpdGlvbnMsIGN0cmxJbnN0YW5jZSwgc2NvcGUsIGNmZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXJlZ2lzdGVyV2F0Y2hfMSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGluayhzY29wZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vKiogQGhpZGRlbiAqL1xudmFyIGhhc0NvbXBvbmVudEltcGwgPSB0eXBlb2YgbmcubW9kdWxlKCd1aS5yb3V0ZXInKVsnY29tcG9uZW50J10gPT09ICdmdW5jdGlvbic7XG4vKiogQGhpZGRlbiBpbmNyZW1lbnRpbmcgaWQgKi9cbnZhciBfdWlDYW5FeGl0SWQgPSAwO1xuLyoqIEBoaWRkZW4gVE9ETzogbW92ZSB0aGVzZSBjYWxsYmFja3MgdG8gJHZpZXcgYW5kL29yIGAvaG9va3MvY29tcG9uZW50cy50c2Agb3Igc29tZXRoaW5nICovXG5mdW5jdGlvbiByZWdpc3RlckNvbnRyb2xsZXJDYWxsYmFja3MoJHEsICR0cmFuc2l0aW9ucywgY29udHJvbGxlckluc3RhbmNlLCAkc2NvcGUsIGNmZykge1xuICAgIC8vIENhbGwgJG9uSW5pdCgpIEFTQVBcbiAgICBpZiAoaXNGdW5jdGlvbihjb250cm9sbGVySW5zdGFuY2UuJG9uSW5pdCkgJiYgIShjZmcudmlld0RlY2wuY29tcG9uZW50ICYmIGhhc0NvbXBvbmVudEltcGwpKSB7XG4gICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZS4kb25Jbml0KCk7XG4gICAgfVxuICAgIHZhciB2aWV3U3RhdGUgPSB0YWlsKGNmZy5wYXRoKS5zdGF0ZS5zZWxmO1xuICAgIHZhciBob29rT3B0aW9ucyA9IHsgYmluZDogY29udHJvbGxlckluc3RhbmNlIH07XG4gICAgLy8gQWRkIGNvbXBvbmVudC1sZXZlbCBob29rIGZvciBvblBhcmFtc0NoYW5nZVxuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRyb2xsZXJJbnN0YW5jZS51aU9uUGFyYW1zQ2hhbmdlZCkpIHtcbiAgICAgICAgdmFyIHJlc29sdmVDb250ZXh0ID0gbmV3IFJlc29sdmVDb250ZXh0KGNmZy5wYXRoKTtcbiAgICAgICAgdmFyIHZpZXdDcmVhdGlvblRyYW5zXzEgPSByZXNvbHZlQ29udGV4dC5nZXRSZXNvbHZhYmxlKCckdHJhbnNpdGlvbiQnKS5kYXRhO1xuICAgICAgICAvLyBGaXJlIGNhbGxiYWNrIG9uIGFueSBzdWNjZXNzZnVsIHRyYW5zaXRpb25cbiAgICAgICAgdmFyIHBhcmFtc1VwZGF0ZWQgPSBmdW5jdGlvbiAoJHRyYW5zaXRpb24kKSB7XG4gICAgICAgICAgICAvLyBFeGl0IGVhcmx5IGlmIHRoZSAkdHJhbnNpdGlvbiQgaXMgdGhlIHNhbWUgYXMgdGhlIHZpZXcgd2FzIGNyZWF0ZWQgd2l0aGluLlxuICAgICAgICAgICAgLy8gRXhpdCBlYXJseSBpZiB0aGUgJHRyYW5zaXRpb24kIHdpbGwgZXhpdCB0aGUgc3RhdGUgdGhlIHZpZXcgaXMgZm9yLlxuICAgICAgICAgICAgaWYgKCR0cmFuc2l0aW9uJCA9PT0gdmlld0NyZWF0aW9uVHJhbnNfMSB8fCAkdHJhbnNpdGlvbiQuZXhpdGluZygpLmluZGV4T2Yodmlld1N0YXRlKSAhPT0gLTEpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHRvUGFyYW1zID0gJHRyYW5zaXRpb24kLnBhcmFtcygndG8nKTtcbiAgICAgICAgICAgIHZhciBmcm9tUGFyYW1zID0gJHRyYW5zaXRpb24kLnBhcmFtcygnZnJvbScpO1xuICAgICAgICAgICAgdmFyIHRvU2NoZW1hID0gJHRyYW5zaXRpb24kLnRyZWVDaGFuZ2VzKCkudG8ubWFwKGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnBhcmFtU2NoZW1hOyB9KS5yZWR1Y2UodW5uZXN0UiwgW10pO1xuICAgICAgICAgICAgdmFyIGZyb21TY2hlbWEgPSAkdHJhbnNpdGlvbiQudHJlZUNoYW5nZXMoKS5mcm9tLm1hcChmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5wYXJhbVNjaGVtYTsgfSkucmVkdWNlKHVubmVzdFIsIFtdKTtcbiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRvIHBhcmFtcyB0aGF0IGhhdmUgZGlmZmVyZW50IHZhbHVlcyB0aGFuIHRoZSBmcm9tIHBhcmFtc1xuICAgICAgICAgICAgdmFyIGNoYW5nZWRUb1BhcmFtcyA9IHRvU2NoZW1hLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gZnJvbVNjaGVtYS5pbmRleE9mKHBhcmFtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWR4ID09PSAtMSB8fCAhZnJvbVNjaGVtYVtpZHhdLnR5cGUuZXF1YWxzKHRvUGFyYW1zW3BhcmFtLmlkXSwgZnJvbVBhcmFtc1twYXJhbS5pZF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBPbmx5IHRyaWdnZXIgY2FsbGJhY2sgaWYgYSB0byBwYXJhbSBoYXMgY2hhbmdlZCBvciBpcyBuZXdcbiAgICAgICAgICAgIGlmIChjaGFuZ2VkVG9QYXJhbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZWRLZXlzXzEgPSBjaGFuZ2VkVG9QYXJhbXMubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KTtcbiAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgdGhlIHBhcmFtcyB0byBvbmx5IGNoYW5nZWQvbmV3IHRvIHBhcmFtcy4gIGAkdHJhbnNpdGlvbiQucGFyYW1zKClgIG1heSBiZSB1c2VkIHRvIGdldCBhbGwgcGFyYW1zLlxuICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZXMgPSBmaWx0ZXIodG9QYXJhbXMsIGZ1bmN0aW9uICh2YWwsIGtleSkgeyByZXR1cm4gY2hhbmdlZEtleXNfMS5pbmRleE9mKGtleSkgIT09IC0xOyB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UudWlPblBhcmFtc0NoYW5nZWQobmV3VmFsdWVzLCAkdHJhbnNpdGlvbiQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3Moe30sIHBhcmFtc1VwZGF0ZWQsIGhvb2tPcHRpb25zKSk7XG4gICAgfVxuICAgIC8vIEFkZCBjb21wb25lbnQtbGV2ZWwgaG9vayBmb3IgdWlDYW5FeGl0XG4gICAgaWYgKGlzRnVuY3Rpb24oY29udHJvbGxlckluc3RhbmNlLnVpQ2FuRXhpdCkpIHtcbiAgICAgICAgdmFyIGlkXzEgPSBfdWlDYW5FeGl0SWQrKztcbiAgICAgICAgdmFyIGNhY2hlUHJvcF8xID0gJ191aUNhbkV4aXRJZHMnO1xuICAgICAgICAvLyBSZXR1cm5zIHRydWUgaWYgYSByZWRpcmVjdCB0cmFuc2l0aW9uIGFscmVhZHkgYW5zd2VyZWQgdHJ1dGh5XG4gICAgICAgIHZhciBwcmV2VHJ1dGh5QW5zd2VyXzEgPSBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXRyYW5zICYmICh0cmFuc1tjYWNoZVByb3BfMV0gJiYgdHJhbnNbY2FjaGVQcm9wXzFdW2lkXzFdID09PSB0cnVlIHx8IHByZXZUcnV0aHlBbnN3ZXJfMSh0cmFucy5yZWRpcmVjdGVkRnJvbSgpKSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIElmIGEgdXNlciBhbnN3ZXJlZCB5ZXMsIGJ1dCB0aGUgdHJhbnNpdGlvbiB3YXMgbGF0ZXIgcmVkaXJlY3RlZCwgZG9uJ3QgYWxzbyBhc2sgZm9yIHRoZSBuZXcgcmVkaXJlY3QgdHJhbnNpdGlvblxuICAgICAgICB2YXIgd3JhcHBlZEhvb2sgPSBmdW5jdGlvbiAodHJhbnMpIHtcbiAgICAgICAgICAgIHZhciBwcm9taXNlO1xuICAgICAgICAgICAgdmFyIGlkcyA9IHRyYW5zW2NhY2hlUHJvcF8xXSA9IHRyYW5zW2NhY2hlUHJvcF8xXSB8fCB7fTtcbiAgICAgICAgICAgIGlmICghcHJldlRydXRoeUFuc3dlcl8xKHRyYW5zKSkge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSAkcS53aGVuKGNvbnRyb2xsZXJJbnN0YW5jZS51aUNhbkV4aXQodHJhbnMpKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHZhbCkgeyByZXR1cm4gaWRzW2lkXzFdID0gKHZhbCAhPT0gZmFsc2UpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgY3JpdGVyaWEgPSB7IGV4aXRpbmc6IHZpZXdTdGF0ZS5uYW1lIH07XG4gICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgJHRyYW5zaXRpb25zLm9uQmVmb3JlKGNyaXRlcmlhLCB3cmFwcGVkSG9vaywgaG9va09wdGlvbnMpKTtcbiAgICB9XG59XG5uZy5tb2R1bGUoJ3VpLnJvdXRlci5zdGF0ZScpLmRpcmVjdGl2ZSgndWlWaWV3JywgdWlWaWV3KTtcbm5nLm1vZHVsZSgndWkucm91dGVyLnN0YXRlJykuZGlyZWN0aXZlKCd1aVZpZXcnLCAkVmlld0RpcmVjdGl2ZUZpbGwpO1xuXG4vKiogQG1vZHVsZSBuZzEgKi8gLyoqICovXG4vKiogQGhpZGRlbiAqL1xuZnVuY3Rpb24gJFZpZXdTY3JvbGxQcm92aWRlcigpIHtcbiAgICB2YXIgdXNlQW5jaG9yU2Nyb2xsID0gZmFsc2U7XG4gICAgdGhpcy51c2VBbmNob3JTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVzZUFuY2hvclNjcm9sbCA9IHRydWU7XG4gICAgfTtcbiAgICB0aGlzLiRnZXQgPSBbJyRhbmNob3JTY3JvbGwnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJGFuY2hvclNjcm9sbCwgJHRpbWVvdXQpIHtcbiAgICAgICAgICAgIGlmICh1c2VBbmNob3JTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGFuY2hvclNjcm9sbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudFswXS5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICAgICAgICAgIH0sIDAsIGZhbHNlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1dO1xufVxubmcubW9kdWxlKCd1aS5yb3V0ZXIuc3RhdGUnKS5wcm92aWRlcignJHVpVmlld1Njcm9sbCcsICRWaWV3U2Nyb2xsUHJvdmlkZXIpO1xuXG4vKipcbiAqIE1haW4gZW50cnkgcG9pbnQgZm9yIGFuZ3VsYXIgMS54IGJ1aWxkXG4gKiBAbW9kdWxlIG5nMVxuICovIC8qKiAqL1xudmFyIGluZGV4JDEgPSAndWkucm91dGVyJztcblxuZXhwb3J0cy5kZWZhdWx0ID0gaW5kZXgkMTtcbmV4cG9ydHMuY29yZSA9IGluZGV4O1xuZXhwb3J0cy53YXRjaERpZ2VzdHMgPSB3YXRjaERpZ2VzdHM7XG5leHBvcnRzLmdldExvY2FscyA9IGdldExvY2FscztcbmV4cG9ydHMuZ2V0TmcxVmlld0NvbmZpZ0ZhY3RvcnkgPSBnZXROZzFWaWV3Q29uZmlnRmFjdG9yeTtcbmV4cG9ydHMubmcxVmlld3NCdWlsZGVyID0gbmcxVmlld3NCdWlsZGVyO1xuZXhwb3J0cy5OZzFWaWV3Q29uZmlnID0gTmcxVmlld0NvbmZpZztcbmV4cG9ydHMuU3RhdGVQcm92aWRlciA9IFN0YXRlUHJvdmlkZXI7XG5leHBvcnRzLlVybFJvdXRlclByb3ZpZGVyID0gVXJsUm91dGVyUHJvdmlkZXI7XG5leHBvcnRzLnJvb3QgPSByb290O1xuZXhwb3J0cy5mcm9tSnNvbiA9IGZyb21Kc29uO1xuZXhwb3J0cy50b0pzb24gPSB0b0pzb247XG5leHBvcnRzLmZvckVhY2ggPSBmb3JFYWNoO1xuZXhwb3J0cy5leHRlbmQgPSBleHRlbmQ7XG5leHBvcnRzLmVxdWFscyA9IGVxdWFscztcbmV4cG9ydHMuaWRlbnRpdHkgPSBpZGVudGl0eTtcbmV4cG9ydHMubm9vcCA9IG5vb3A7XG5leHBvcnRzLmNyZWF0ZVByb3h5RnVuY3Rpb25zID0gY3JlYXRlUHJveHlGdW5jdGlvbnM7XG5leHBvcnRzLmluaGVyaXQgPSBpbmhlcml0O1xuZXhwb3J0cy5pbkFycmF5ID0gaW5BcnJheTtcbmV4cG9ydHMuX2luQXJyYXkgPSBfaW5BcnJheTtcbmV4cG9ydHMucmVtb3ZlRnJvbSA9IHJlbW92ZUZyb207XG5leHBvcnRzLl9yZW1vdmVGcm9tID0gX3JlbW92ZUZyb207XG5leHBvcnRzLnB1c2hUbyA9IHB1c2hUbztcbmV4cG9ydHMuX3B1c2hUbyA9IF9wdXNoVG87XG5leHBvcnRzLmRlcmVnQWxsID0gZGVyZWdBbGw7XG5leHBvcnRzLmRlZmF1bHRzID0gZGVmYXVsdHM7XG5leHBvcnRzLm1lcmdlUiA9IG1lcmdlUjtcbmV4cG9ydHMuYW5jZXN0b3JzID0gYW5jZXN0b3JzO1xuZXhwb3J0cy5waWNrID0gcGljaztcbmV4cG9ydHMub21pdCA9IG9taXQ7XG5leHBvcnRzLnBsdWNrID0gcGx1Y2s7XG5leHBvcnRzLmZpbHRlciA9IGZpbHRlcjtcbmV4cG9ydHMuZmluZCA9IGZpbmQ7XG5leHBvcnRzLm1hcE9iaiA9IG1hcE9iajtcbmV4cG9ydHMubWFwID0gbWFwO1xuZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5leHBvcnRzLmFsbFRydWVSID0gYWxsVHJ1ZVI7XG5leHBvcnRzLmFueVRydWVSID0gYW55VHJ1ZVI7XG5leHBvcnRzLnVubmVzdFIgPSB1bm5lc3RSO1xuZXhwb3J0cy5mbGF0dGVuUiA9IGZsYXR0ZW5SO1xuZXhwb3J0cy5wdXNoUiA9IHB1c2hSO1xuZXhwb3J0cy51bmlxUiA9IHVuaXFSO1xuZXhwb3J0cy51bm5lc3QgPSB1bm5lc3Q7XG5leHBvcnRzLmZsYXR0ZW4gPSBmbGF0dGVuO1xuZXhwb3J0cy5hc3NlcnRQcmVkaWNhdGUgPSBhc3NlcnRQcmVkaWNhdGU7XG5leHBvcnRzLmFzc2VydE1hcCA9IGFzc2VydE1hcDtcbmV4cG9ydHMuYXNzZXJ0Rm4gPSBhc3NlcnRGbjtcbmV4cG9ydHMucGFpcnMgPSBwYWlycztcbmV4cG9ydHMuYXJyYXlUdXBsZXMgPSBhcnJheVR1cGxlcztcbmV4cG9ydHMuYXBwbHlQYWlycyA9IGFwcGx5UGFpcnM7XG5leHBvcnRzLnRhaWwgPSB0YWlsO1xuZXhwb3J0cy5jb3B5ID0gY29weTtcbmV4cG9ydHMuX2V4dGVuZCA9IF9leHRlbmQ7XG5leHBvcnRzLnNpbGVuY2VVbmNhdWdodEluUHJvbWlzZSA9IHNpbGVuY2VVbmNhdWdodEluUHJvbWlzZTtcbmV4cG9ydHMuc2lsZW50UmVqZWN0aW9uID0gc2lsZW50UmVqZWN0aW9uO1xuZXhwb3J0cy5ub3RJbXBsZW1lbnRlZCA9IG5vdEltcGxlbWVudGVkO1xuZXhwb3J0cy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xuZXhwb3J0cy5HbG9iID0gR2xvYjtcbmV4cG9ydHMuY3VycnkgPSBjdXJyeTtcbmV4cG9ydHMuY29tcG9zZSA9IGNvbXBvc2U7XG5leHBvcnRzLnBpcGUgPSBwaXBlO1xuZXhwb3J0cy5wcm9wID0gcHJvcDtcbmV4cG9ydHMucHJvcEVxID0gcHJvcEVxO1xuZXhwb3J0cy5wYXJzZSA9IHBhcnNlO1xuZXhwb3J0cy5ub3QgPSBub3Q7XG5leHBvcnRzLmFuZCA9IGFuZDtcbmV4cG9ydHMub3IgPSBvcjtcbmV4cG9ydHMuYWxsID0gYWxsO1xuZXhwb3J0cy5hbnkgPSBhbnk7XG5leHBvcnRzLmlzID0gaXM7XG5leHBvcnRzLmVxID0gZXE7XG5leHBvcnRzLnZhbCA9IHZhbDtcbmV4cG9ydHMuaW52b2tlID0gaW52b2tlO1xuZXhwb3J0cy5wYXR0ZXJuID0gcGF0dGVybjtcbmV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcbmV4cG9ydHMuaXNEZWZpbmVkID0gaXNEZWZpbmVkO1xuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuZXhwb3J0cy5pc1N0YXRlID0gaXNTdGF0ZTtcbmV4cG9ydHMuaXNJbmplY3RhYmxlID0gaXNJbmplY3RhYmxlO1xuZXhwb3J0cy5pc1Byb21pc2UgPSBpc1Byb21pc2U7XG5leHBvcnRzLlF1ZXVlID0gUXVldWU7XG5leHBvcnRzLm1heExlbmd0aCA9IG1heExlbmd0aDtcbmV4cG9ydHMucGFkU3RyaW5nID0gcGFkU3RyaW5nO1xuZXhwb3J0cy5rZWJvYlN0cmluZyA9IGtlYm9iU3RyaW5nO1xuZXhwb3J0cy5mdW5jdGlvblRvU3RyaW5nID0gZnVuY3Rpb25Ub1N0cmluZztcbmV4cG9ydHMuZm5Ub1N0cmluZyA9IGZuVG9TdHJpbmc7XG5leHBvcnRzLnN0cmluZ2lmeSA9IHN0cmluZ2lmeTtcbmV4cG9ydHMuYmVmb3JlQWZ0ZXJTdWJzdHIgPSBiZWZvcmVBZnRlclN1YnN0cjtcbmV4cG9ydHMuaG9zdFJlZ2V4ID0gaG9zdFJlZ2V4O1xuZXhwb3J0cy5zdHJpcExhc3RQYXRoRWxlbWVudCA9IHN0cmlwTGFzdFBhdGhFbGVtZW50O1xuZXhwb3J0cy5zcGxpdEhhc2ggPSBzcGxpdEhhc2g7XG5leHBvcnRzLnNwbGl0UXVlcnkgPSBzcGxpdFF1ZXJ5O1xuZXhwb3J0cy5zcGxpdEVxdWFsID0gc3BsaXRFcXVhbDtcbmV4cG9ydHMudHJpbUhhc2hWYWwgPSB0cmltSGFzaFZhbDtcbmV4cG9ydHMuc3BsaXRPbkRlbGltID0gc3BsaXRPbkRlbGltO1xuZXhwb3J0cy5qb2luTmVpZ2hib3JzUiA9IGpvaW5OZWlnaGJvcnNSO1xuZXhwb3J0cy5UcmFjZSA9IFRyYWNlO1xuZXhwb3J0cy50cmFjZSA9IHRyYWNlO1xuZXhwb3J0cy5QYXJhbSA9IFBhcmFtO1xuZXhwb3J0cy5QYXJhbVR5cGVzID0gUGFyYW1UeXBlcztcbmV4cG9ydHMuU3RhdGVQYXJhbXMgPSBTdGF0ZVBhcmFtcztcbmV4cG9ydHMuUGFyYW1UeXBlID0gUGFyYW1UeXBlO1xuZXhwb3J0cy5QYXRoTm9kZSA9IFBhdGhOb2RlO1xuZXhwb3J0cy5QYXRoVXRpbHMgPSBQYXRoVXRpbHM7XG5leHBvcnRzLnJlc29sdmVQb2xpY2llcyA9IHJlc29sdmVQb2xpY2llcztcbmV4cG9ydHMuZGVmYXVsdFJlc29sdmVQb2xpY3kgPSBkZWZhdWx0UmVzb2x2ZVBvbGljeTtcbmV4cG9ydHMuUmVzb2x2YWJsZSA9IFJlc29sdmFibGU7XG5leHBvcnRzLk5BVElWRV9JTkpFQ1RPUl9UT0tFTiA9IE5BVElWRV9JTkpFQ1RPUl9UT0tFTjtcbmV4cG9ydHMuUmVzb2x2ZUNvbnRleHQgPSBSZXNvbHZlQ29udGV4dDtcbmV4cG9ydHMucmVzb2x2YWJsZXNCdWlsZGVyID0gcmVzb2x2YWJsZXNCdWlsZGVyO1xuZXhwb3J0cy5TdGF0ZUJ1aWxkZXIgPSBTdGF0ZUJ1aWxkZXI7XG5leHBvcnRzLlN0YXRlT2JqZWN0ID0gU3RhdGVPYmplY3Q7XG5leHBvcnRzLlN0YXRlTWF0Y2hlciA9IFN0YXRlTWF0Y2hlcjtcbmV4cG9ydHMuU3RhdGVRdWV1ZU1hbmFnZXIgPSBTdGF0ZVF1ZXVlTWFuYWdlcjtcbmV4cG9ydHMuU3RhdGVSZWdpc3RyeSA9IFN0YXRlUmVnaXN0cnk7XG5leHBvcnRzLlN0YXRlU2VydmljZSA9IFN0YXRlU2VydmljZTtcbmV4cG9ydHMuVGFyZ2V0U3RhdGUgPSBUYXJnZXRTdGF0ZTtcbmV4cG9ydHMuSG9va0J1aWxkZXIgPSBIb29rQnVpbGRlcjtcbmV4cG9ydHMubWF0Y2hTdGF0ZSA9IG1hdGNoU3RhdGU7XG5leHBvcnRzLlJlZ2lzdGVyZWRIb29rID0gUmVnaXN0ZXJlZEhvb2s7XG5leHBvcnRzLm1ha2VFdmVudCA9IG1ha2VFdmVudDtcbmV4cG9ydHMuUmVqZWN0aW9uID0gUmVqZWN0aW9uO1xuZXhwb3J0cy5UcmFuc2l0aW9uID0gVHJhbnNpdGlvbjtcbmV4cG9ydHMuVHJhbnNpdGlvbkhvb2sgPSBUcmFuc2l0aW9uSG9vaztcbmV4cG9ydHMuVHJhbnNpdGlvbkV2ZW50VHlwZSA9IFRyYW5zaXRpb25FdmVudFR5cGU7XG5leHBvcnRzLmRlZmF1bHRUcmFuc09wdHMgPSBkZWZhdWx0VHJhbnNPcHRzO1xuZXhwb3J0cy5UcmFuc2l0aW9uU2VydmljZSA9IFRyYW5zaXRpb25TZXJ2aWNlO1xuZXhwb3J0cy5VcmxNYXRjaGVyID0gVXJsTWF0Y2hlcjtcbmV4cG9ydHMuVXJsTWF0Y2hlckZhY3RvcnkgPSBVcmxNYXRjaGVyRmFjdG9yeTtcbmV4cG9ydHMuVXJsUm91dGVyID0gVXJsUm91dGVyO1xuZXhwb3J0cy5VcmxSdWxlRmFjdG9yeSA9IFVybFJ1bGVGYWN0b3J5O1xuZXhwb3J0cy5CYXNlVXJsUnVsZSA9IEJhc2VVcmxSdWxlO1xuZXhwb3J0cy5VcmxTZXJ2aWNlID0gVXJsU2VydmljZTtcbmV4cG9ydHMuVmlld1NlcnZpY2UgPSBWaWV3U2VydmljZTtcbmV4cG9ydHMuVUlSb3V0ZXJHbG9iYWxzID0gVUlSb3V0ZXJHbG9iYWxzO1xuZXhwb3J0cy5VSVJvdXRlciA9IFVJUm91dGVyO1xuZXhwb3J0cy4kcSA9ICRxO1xuZXhwb3J0cy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG5leHBvcnRzLkJhc2VMb2NhdGlvblNlcnZpY2VzID0gQmFzZUxvY2F0aW9uU2VydmljZXM7XG5leHBvcnRzLkhhc2hMb2NhdGlvblNlcnZpY2UgPSBIYXNoTG9jYXRpb25TZXJ2aWNlO1xuZXhwb3J0cy5NZW1vcnlMb2NhdGlvblNlcnZpY2UgPSBNZW1vcnlMb2NhdGlvblNlcnZpY2U7XG5leHBvcnRzLlB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZSA9IFB1c2hTdGF0ZUxvY2F0aW9uU2VydmljZTtcbmV4cG9ydHMuTWVtb3J5TG9jYXRpb25Db25maWcgPSBNZW1vcnlMb2NhdGlvbkNvbmZpZztcbmV4cG9ydHMuQnJvd3NlckxvY2F0aW9uQ29uZmlnID0gQnJvd3NlckxvY2F0aW9uQ29uZmlnO1xuZXhwb3J0cy5rZXlWYWxzVG9PYmplY3RSID0ga2V5VmFsc1RvT2JqZWN0UjtcbmV4cG9ydHMuZ2V0UGFyYW1zID0gZ2V0UGFyYW1zO1xuZXhwb3J0cy5wYXJzZVVybCA9IHBhcnNlVXJsJDE7XG5leHBvcnRzLmJ1aWxkVXJsID0gYnVpbGRVcmw7XG5leHBvcnRzLmxvY2F0aW9uUGx1Z2luRmFjdG9yeSA9IGxvY2F0aW9uUGx1Z2luRmFjdG9yeTtcbmV4cG9ydHMuc2VydmljZXNQbHVnaW4gPSBzZXJ2aWNlc1BsdWdpbjtcbmV4cG9ydHMuaGFzaExvY2F0aW9uUGx1Z2luID0gaGFzaExvY2F0aW9uUGx1Z2luO1xuZXhwb3J0cy5wdXNoU3RhdGVMb2NhdGlvblBsdWdpbiA9IHB1c2hTdGF0ZUxvY2F0aW9uUGx1Z2luO1xuZXhwb3J0cy5tZW1vcnlMb2NhdGlvblBsdWdpbiA9IG1lbW9yeUxvY2F0aW9uUGx1Z2luO1xuZXhwb3J0cy5VSVJvdXRlclBsdWdpbkJhc2UgPSBVSVJvdXRlclBsdWdpbkJhc2U7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLXVpLXJvdXRlci5qcy5tYXBcbiIsIi8qISBhbmd1bGFyLWJhc2U2NC11cGxvYWQgLSB2MC4xLjIzXG4qIGh0dHBzOi8vZ2l0aHViLmNvbS9hZG9uZXNwaXRvZ28vYW5ndWxhci1iYXNlNjQtdXBsb2FkXG4qIENvcHlyaWdodCAoYykgQWRvbmVzIFBpdG9nbyA8cGl0b2dvLmFkb25lc0BnbWFpbC5jb20+IFtTYXQgQXVnIDA1IDIwMTddXG4qIExpY2Vuc2VkIE1JVCAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgdW5kZWZpbmVkKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIC8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy85MjY3ODk5L2FycmF5YnVmZmVyLXRvLWJhc2U2NC1lbmNvZGVkLXN0cmluZ1xuICB3aW5kb3cuX2FycmF5QnVmZmVyVG9CYXNlNjQgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgICB2YXIgYmluYXJ5ID0gJyc7XG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICB2YXIgbGVuID0gYnl0ZXMuYnl0ZUxlbmd0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIGJpbmFyeSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpbmRvdy5idG9hKGJpbmFyeSk7XG4gIH07XG5cblxuICB2YXIgbW9kID0gd2luZG93LmFuZ3VsYXIubW9kdWxlKCduYWlmLmJhc2U2NCcsIFtdKTtcblxuICBtb2QuZGlyZWN0aXZlKCdiYXNlU2l4dHlGb3VySW5wdXQnLCBbXG4gICAgJyR3aW5kb3cnLFxuICAgICckcScsXG4gICAgZnVuY3Rpb24oJHdpbmRvdywgJHEpIHtcblxuICAgICAgdmFyIGlzb2xhdGVTY29wZSA9IHtcbiAgICAgICAgb25DaGFuZ2U6ICcmJyxcbiAgICAgICAgb25BZnRlclZhbGlkYXRlOiAnJicsXG4gICAgICAgIHBhcnNlcjogJyYnXG4gICAgICB9O1xuXG4gICAgICB2YXIgRklMRV9SRUFERVJfRVZFTlRTID0gWydvbmFib3J0JywgJ29uZXJyb3InLCAnb25sb2Fkc3RhcnQnLCAnb25sb2FkZW5kJywgJ29ucHJvZ3Jlc3MnLCAnb25sb2FkJ107XG5cbiAgICAgIEZJTEVfUkVBREVSX0VWRU5UUy5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaXNvbGF0ZVNjb3BlW2VdID0gJyYnO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgc2NvcGU6IGlzb2xhdGVTY29wZSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzLCBuZ01vZGVsKSB7XG5cbiAgICAgICAgICB2YXIgcmF3RmlsZXMgPSBbXTtcbiAgICAgICAgICB2YXIgZmlsZU9iamVjdHMgPSBbXTtcblxuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgIGlmICghbmdNb2RlbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFZBTElEQVRJT05TID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgICAgZnVuY3Rpb24gX21heG51bSh2YWwpIHtcbiAgICAgICAgICAgIGlmIChhdHRycy5tYXhudW0gJiYgYXR0cnMubXVsdGlwbGUgJiYgdmFsKSB7XG4gICAgICAgICAgICAgIHZhciB2YWxpZCA9IHZhbC5sZW5ndGggPD0gcGFyc2VJbnQoYXR0cnMubWF4bnVtKTtcbiAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ21heG51bScsIHZhbGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gX21pbm51bSh2YWwpIHtcbiAgICAgICAgICAgIGlmIChhdHRycy5taW5udW0gJiYgYXR0cnMubXVsdGlwbGUgJiYgdmFsKSB7XG4gICAgICAgICAgICAgIHZhciB2YWxpZCA9IHZhbC5sZW5ndGggPj0gcGFyc2VJbnQoYXR0cnMubWlubnVtKTtcbiAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ21pbm51bScsIHZhbGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gX21heHNpemUodmFsKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAoYXR0cnMubWF4c2l6ZSAmJiB2YWwpIHtcbiAgICAgICAgICAgICAgdmFyIG1heCA9IHBhcnNlRmxvYXQoYXR0cnMubWF4c2l6ZSkgKiAxMDAwO1xuXG4gICAgICAgICAgICAgIGlmIChhdHRycy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IHZhbFtpXTtcbiAgICAgICAgICAgICAgICAgIGlmIChmaWxlLmZpbGVzaXplID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWxpZCA9IHZhbC5maWxlc2l6ZSA8PSBtYXg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ21heHNpemUnLCB2YWxpZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gX21pbnNpemUodmFsKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG1pbiA9IHBhcnNlRmxvYXQoYXR0cnMubWluc2l6ZSkgKiAxMDAwO1xuXG4gICAgICAgICAgICBpZiAoYXR0cnMubWluc2l6ZSAmJiB2YWwpIHtcbiAgICAgICAgICAgICAgaWYgKGF0dHJzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgIHZhciBmaWxlID0gdmFsW2ldO1xuICAgICAgICAgICAgICAgICAgaWYgKGZpbGUuZmlsZXNpemUgPCBtaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbGlkID0gdmFsLmZpbGVzaXplID49IG1pbjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgnbWluc2l6ZScsIHZhbGlkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiBfYWNjZXB0KHZhbCkge1xuICAgICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciByZWdFeHAsIGV4cCwgZmlsZUV4dDtcbiAgICAgICAgICAgIGlmIChhdHRycy5hY2NlcHQpIHtcbiAgICAgICAgICAgICAgZXhwID0gYXR0cnMuYWNjZXB0LnRyaW0oKS5yZXBsYWNlKC9bLFxcc10rL2dpLCBcInxcIikucmVwbGFjZSgvXFwuL2csIFwiXFxcXC5cIikucmVwbGFjZSgvXFwvXFwqL2csIFwiLy4qXCIpO1xuICAgICAgICAgICAgICByZWdFeHAgPSBuZXcgUmVnRXhwKGV4cCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhdHRycy5hY2NlcHQgJiYgdmFsKSB7XG4gICAgICAgICAgICAgIGlmIChhdHRycy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IHZhbFtpXTtcbiAgICAgICAgICAgICAgICAgIGZpbGVFeHQgPSBcIi5cIiArIGZpbGUuZmlsZW5hbWUuc3BsaXQoJy4nKS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgIHZhbGlkID0gcmVnRXhwLnRlc3QoZmlsZS5maWxldHlwZSkgfHwgcmVnRXhwLnRlc3QoZmlsZUV4dCk7XG5cbiAgICAgICAgICAgICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbGVFeHQgPSBcIi5cIiArIHZhbC5maWxlbmFtZS5zcGxpdCgnLicpLnBvcCgpO1xuICAgICAgICAgICAgICAgIHZhbGlkID0gcmVnRXhwLnRlc3QodmFsLmZpbGV0eXBlKSB8fCByZWdFeHAudGVzdChmaWxlRXh0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgnYWNjZXB0JywgdmFsaWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vZW5kIHZhbGlkYXRpb25zID09PT09PT09PT09PT09PVxuXG4gICAgICAgICAgZnVuY3Rpb24gX3NldFZpZXdWYWx1ZSgpIHtcbiAgICAgICAgICAgIHZhciBuZXdWYWwgPSBhdHRycy5tdWx0aXBsZSA/IGZpbGVPYmplY3RzIDogZmlsZU9iamVjdHNbMF07XG4gICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUobmV3VmFsKTtcbiAgICAgICAgICAgIF9tYXhzaXplKG5ld1ZhbCk7XG4gICAgICAgICAgICBfbWluc2l6ZShuZXdWYWwpO1xuICAgICAgICAgICAgX21heG51bShuZXdWYWwpO1xuICAgICAgICAgICAgX21pbm51bShuZXdWYWwpO1xuICAgICAgICAgICAgX2FjY2VwdChuZXdWYWwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIF9hdHRhY2hIYW5kbGVyRm9yRXZlbnQoZXZlbnROYW1lLCBoYW5kbGVyLCBmUmVhZGVyLCBmaWxlLCBmaWxlT2JqZWN0KSB7XG4gICAgICAgICAgICBmUmVhZGVyW2V2ZW50TmFtZV0gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIGhhbmRsZXIoKShlLCBmUmVhZGVyLCBmaWxlLCByYXdGaWxlcywgZmlsZU9iamVjdHMsIGZpbGVPYmplY3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiBfcmVhZGVyT25Mb2FkKGZSZWFkZXIsIGZpbGUsIGZpbGVPYmplY3QpIHtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICB2YXIgcHJvbWlzZTtcblxuICAgICAgICAgICAgICAvLyBkbyBub3QgY29udmVydCB0aGUgaW1hZ2UgdG8gYmFzZTY0IGlmIGl0IGV4Y2VlZHMgdGhlIG1heGltdW1cbiAgICAgICAgICAgICAgLy8gc2l6ZSB0byBwcmV2ZW50IHRoZSBicm93c2VyIGZyb20gZnJlZXppbmdcbiAgICAgICAgICAgICAgdmFyIGV4Y2VlZHNNYXhTaXplID0gYXR0cnMubWF4c2l6ZSAmJiBmaWxlLnNpemUgPiBhdHRycy5tYXhzaXplICogMTAyNDtcbiAgICAgICAgICAgICAgaWYgKGF0dHJzLmRvTm90UGFyc2VJZk92ZXJzaXplICE9PSB1bmRlZmluZWQgJiYgZXhjZWVkc01heFNpemUpIHtcbiAgICAgICAgICAgICAgICBmaWxlT2JqZWN0LmJhc2U2NCA9IG51bGw7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmlsZU9iamVjdC5iYXNlNjQgPSAkd2luZG93Ll9hcnJheUJ1ZmZlclRvQmFzZTY0KGJ1ZmZlcik7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoYXR0cnMucGFyc2VyKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9ICRxLndoZW4oc2NvcGUucGFyc2VyKCkoZmlsZSwgZmlsZU9iamVjdCkpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSAkcS53aGVuKGZpbGVPYmplY3QpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKGZpbGVPYmopIHtcbiAgICAgICAgICAgICAgICBmaWxlT2JqZWN0cy5wdXNoKGZpbGVPYmopO1xuICAgICAgICAgICAgICAgIC8vIGZ1bGZpbGwgdGhlIHByb21pc2UgaGVyZS5cbiAgICAgICAgICAgICAgICBmaWxlLmRlZmVycmVkT2JqLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKGF0dHJzLm9ubG9hZCkge1xuICAgICAgICAgICAgICAgIGlmIChzY29wZS5vbmxvYWQgJiYgdHlwZW9mIHNjb3BlLm9ubG9hZCgpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgIHNjb3BlLm9ubG9hZCgpKGUsIGZSZWFkZXIsIGZpbGUsIHJhd0ZpbGVzLCBmaWxlT2JqZWN0cywgZmlsZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNjb3BlLm9ubG9hZChlLCByYXdGaWxlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiBfYXR0YWNoRXZlbnRIYW5kbGVycyhmUmVhZGVyLCBmaWxlLCBmaWxlT2JqZWN0KSB7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBGSUxFX1JFQURFUl9FVkVOVFMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgdmFyIGUgPSBGSUxFX1JFQURFUl9FVkVOVFNbaV07XG4gICAgICAgICAgICAgIGlmIChhdHRyc1tlXSAmJiBlICE9PSAnb25sb2FkJykgeyAvLyBkb24ndCBhdHRhY2ggaGFuZGxlciB0byBvbmxvYWQgeWV0XG4gICAgICAgICAgICAgICAgX2F0dGFjaEhhbmRsZXJGb3JFdmVudChlLCBzY29wZVtlXSwgZlJlYWRlciwgZmlsZSwgZmlsZU9iamVjdCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZlJlYWRlci5vbmxvYWQgPSBfcmVhZGVyT25Mb2FkKGZSZWFkZXIsIGZpbGUsIGZpbGVPYmplY3QpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZ1bmN0aW9uIF9yZWFkRmlsZXMoKSB7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgZm9yIChpID0gcmF3RmlsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIGZpbGUgYSBuZXcgcHJvbWlzZSwgdGhhdCB3YWl0cyB1bnRpbCByZXNvbHZlZFxuICAgICAgICAgICAgICByYXdGaWxlc1tpXS5kZWZlcnJlZE9iaiA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocmF3RmlsZXNbaV0uZGVmZXJyZWRPYmoucHJvbWlzZSk7XG4gICAgICAgICAgICAgIC8vIFRPRE86IE1ha2Ugc3VyZSBhbGwgcHJvbWlzZXMgYXJlIHJlc29sdmVkIGV2ZW4gZHVyaW5nIGZpbGUgcmVhZGVyIGVycm9yLCBvdGhlcndpc2UgdmlldyB2YWx1ZSB3b250IGJlIHVwZGF0ZWRcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc2V0IHZpZXcgdmFsdWUgb25jZSBhbGwgZmlsZXMgYXJlIHJlYWRcbiAgICAgICAgICAgICRxLmFsbChwcm9taXNlcykudGhlbihfc2V0Vmlld1ZhbHVlKTtcblxuICAgICAgICAgICAgZm9yIChpID0gcmF3RmlsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyAkd2luZG93LkZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgdmFyIGZpbGUgPSByYXdGaWxlc1tpXTtcbiAgICAgICAgICAgICAgdmFyIGZpbGVPYmplY3QgPSB7fTtcblxuICAgICAgICAgICAgICBmaWxlT2JqZWN0LmZpbGV0eXBlID0gZmlsZS50eXBlO1xuICAgICAgICAgICAgICBmaWxlT2JqZWN0LmZpbGVuYW1lID0gZmlsZS5uYW1lO1xuICAgICAgICAgICAgICBmaWxlT2JqZWN0LmZpbGVzaXplID0gZmlsZS5zaXplO1xuXG4gICAgICAgICAgICAgIF9hdHRhY2hFdmVudEhhbmRsZXJzKHJlYWRlciwgZmlsZSwgZmlsZU9iamVjdCk7XG4gICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmdW5jdGlvbiBfb25DaGFuZ2UoZSkge1xuICAgICAgICAgICAgaWYgKGF0dHJzLm9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgIGlmIChzY29wZS5vbkNoYW5nZSAmJiB0eXBlb2Ygc2NvcGUub25DaGFuZ2UoKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUub25DaGFuZ2UoKShlLCByYXdGaWxlcyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2NvcGUub25DaGFuZ2UoZSwgcmF3RmlsZXMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gX29uQWZ0ZXJWYWxpZGF0ZShlKSB7XG4gICAgICAgICAgICBpZiAoYXR0cnMub25BZnRlclZhbGlkYXRlKSB7XG4gICAgICAgICAgICAgIC8vIHdhaXQgZm9yIGFsbCBwcm9taXNlcywgaW4gcmF3RmlsZXMsXG4gICAgICAgICAgICAgIC8vICAgdGhlbiBjYWxsIG9uQWZ0ZXJWYWxpZGF0ZVxuICAgICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHJhd0ZpbGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChyYXdGaWxlc1tpXS5kZWZlcnJlZE9iai5wcm9taXNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkcS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlLm9uQWZ0ZXJWYWxpZGF0ZSAmJiB0eXBlb2Ygc2NvcGUub25BZnRlclZhbGlkYXRlKCkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgc2NvcGUub25BZnRlclZhbGlkYXRlKCkoZSwgZmlsZU9iamVjdHMsIHJhd0ZpbGVzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2NvcGUub25BZnRlclZhbGlkYXRlKGUsIGZpbGVPYmplY3RzLCByYXdGaWxlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZ01vZGVsLiRpc0VtcHR5ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gIXZhbCB8fCAoYW5ndWxhci5pc0FycmF5KHZhbCkgPyB2YWwubGVuZ3RoID09PSAwIDogIXZhbC5iYXNlNjQpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE3MDMyMjgvaG93LWNhbi1pLWNsZWFyLWFuLWh0bWwtZmlsZS1pbnB1dC13aXRoLWphdmFzY3JpcHRcbiAgICAgICAgICBzY29wZS5fY2xlYXJJbnB1dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWxlbVswXS52YWx1ZSA9ICcnO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gbmdNb2RlbC4kdmlld1ZhbHVlO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgaWYgKG5nTW9kZWwuJGlzRW1wdHkodmFsKSAmJiBuZ01vZGVsLiRkaXJ0eSkge1xuICAgICAgICAgICAgICBzY29wZS5fY2xlYXJJbnB1dCgpO1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ21heG51bScsIHRydWUpO1xuICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgnbWlubnVtJywgdHJ1ZSk7XG4gICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZhbGlkaXR5KCdtYXhzaXplJywgdHJ1ZSk7XG4gICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZhbGlkaXR5KCdtaW5zaXplJywgdHJ1ZSk7XG4gICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZhbGlkaXR5KCdhY2NlcHQnLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGVsZW0ub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgICAgZmlsZU9iamVjdHMgPSBbXTtcbiAgICAgICAgICAgIGZpbGVPYmplY3RzID0gYW5ndWxhci5jb3B5KGZpbGVPYmplY3RzKTtcblxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICByYXdGaWxlcyA9IFtdO1xuICAgICAgICAgICAgICBfc2V0Vmlld1ZhbHVlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByYXdGaWxlcyA9IGUudGFyZ2V0LmZpbGVzOyAvLyB1c2UgZXZlbnQgdGFyZ2V0IHNvIHdlIGNhbiBtb2NrIHRoZSBmaWxlcyBmcm9tIHRlc3RcbiAgICAgICAgICAgICAgX3JlYWRGaWxlcygpO1xuICAgICAgICAgICAgICBfb25DaGFuZ2UoZSk7XG4gICAgICAgICAgICAgIF9vbkFmdGVyVmFsaWRhdGUoZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhdHRycy5hbGxvd1NhbWVGaWxlKSB7XG4gICAgICAgICAgICAgIHNjb3BlLl9jbGVhcklucHV0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfVxuICBdKTtcblxufSkod2luZG93KTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICAgJ3VpLnJvdXRlcicsXG4gICAgICAgICduYWlmLmJhc2U2NCdcbiAgICBdKVxufSkoKVxuIiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgICAgICAuY29uZmlnKHJvdXRlckNvbmZpZylcbiAgICBcbiAgICByb3V0ZXJDb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJ11cblxuICAgIGZ1bmN0aW9uIHJvdXRlckNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnbG9naW4nXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN0YXRlKCdkYXNoYm9hcmQnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2Rhc2hib2FyZCcsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnZGFzaGJvYXJkJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnc2Vla2VyJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9zZWVrZXInLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3NlZWtlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ3NlZWtlckFkZCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2Vla2VyL2FkZCcsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnc2Vla2VyQWRkJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnc2Vla2VyRWRpdCcsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2Vla2VyL2VkaXQvOmlkJyxcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdzZWVrZXJFZGl0J1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VwcGxpZXInLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3N1cHBsaWVyJyxcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdzdXBwbGllcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ3N1cHBsaWVyQWRkJywge1xuICAgICAgICAgICAgICAgIHVybDogJy9zdXBwbGllci9hZGQnLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3N1cHBsaWVyQWRkJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnc3VwcGxpZXJFZGl0Jywge1xuICAgICAgICAgICAgICAgIHVybDogJy9zdXBwbGllci9lZGl0LzppZCcsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnc3VwcGxpZXJFZGl0J1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdGF0ZSgnam9icycsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvam9icycsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnam9icydcbiAgICAgICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXJcbiAgICAgICAgICAgIC53aGVuKCcvJywgJ2Rhc2hib2FyZCcpXG4gICAgICAgICAgICAud2hlbignJywgJ2Rhc2hib2FyZCcpXG4gICAgICAgIFxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpXG5cbiAgZnVuY3Rpb24gYXV0aFNlcnZpY2UoJHdpbmRvdykge1xuICAgIHZhciBhdXRoID0ge31cbiAgICB2YXIgc3RvcmFnZSA9ICR3aW5kb3cubG9jYWxTdG9yYWdlXG4gICAgYXV0aC5sb2dpbiA9IGxvZ2luXG4gICAgYXV0aC5sb2dvdXQgPSBsb2dvdXRcbiAgICBhdXRoLmlzTG9nZ2VkSW4gPSBpc0xvZ2dlZEluXG5cbiAgICByZXR1cm4gYXV0aFxuXG5cbiAgICAvLy8vXG4gICAgZnVuY3Rpb24gbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgIGlmICh1c2VybmFtZSA9PT0gJ2FkbWluJyAmJiBwYXNzd29yZCA9PT0gJ2FkbWluMTIzNCcpIHtcbiAgICAgICAgc3RvcmFnZS5zZXRJdGVtKCdpc0xvZ2dlZEluJywgJ3RydWUnKVxuXG4gICAgICAgIG9uU3VjY2VzcygnT0snKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHVzZXJuYW1lICE9PSAnYWRtaW4nICYmIHBhc3N3b3JkICE9PSAnYWRtaW4xMjM0Jykge1xuICAgICAgICAgIG9uRXJyb3IoJ1VzZXJuYW1lIGFuZCBwYXNzd29yZCBhcmUgaW5jb3JyZWN0JykgXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXJuYW1lICE9PSAnYWRtaW4nKSB7XG4gICAgICAgICAgb25FcnJvcignVXNlcm5hbWUgaXMgaW5jb3JyZWN0JylcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFzc3dvcmQgIT09ICdhZG1pbjEyMzQnKSB7XG4gICAgICAgICAgb25FcnJvcignUGFzc3dvcmQgaXMgaW5jb3JyZWN0JylcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dChvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbSgnaXNMb2dnZWRJbicpXG5cbiAgICAgIG9uU3VjY2VzcygnT0snKVxuXG4gICAgICAvLyBvbkVycm9yKCdMb2dvdXQgRmFpbGVkIGR1ZSB0bycgKyApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNMb2dnZWRJbigpIHtcbiAgICAgIHJldHVybiBzdG9yYWdlLmdldEl0ZW0oJ2lzTG9nZ2VkSW4nKSA/IHRydWUgOiBmYWxzZVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnam9ic1NlcnZpY2UnLCBzZXJ2aWNlKVxuXG4gIGZ1bmN0aW9uIHNlcnZpY2UoJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHt9XG4gICAgdmFyIGJhc2VVcmwgPSAnaHR0cHM6Ly9tYW1hYmlzb24tZGV2Lmhlcm9rdWFwcC5jb20vYXBpL3YxL2pvYnMnXG4gICAgdmFyIGhlYWRlcnMgPSB7XG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJzogJyonXG4gICAgfVxuXG4gICAgc2VydmljZS5nZXRUb3RhbEpvYnMgPSBnZXRUb3RhbEpvYnNcblxuICAgIHJldHVybiBzZXJ2aWNlXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vL1xuICAgIGZ1bmN0aW9uIGdldEpvYnNQZXJQYWdlKHBhZ2UsIGRhdGFQZXJwYWdlLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICRodHRwKHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiBiYXNlVXJsICsgJz9wYWdlPScgKyBwYWdlICsgJyZsaW1pdD0nICsgZGF0YVBlclBhZ2UsXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgIGRhdGE6ICcnXG4gICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvblN1Y2Nlc3MocmVzcG9uc2UuZGF0YSlcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcblxuICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvbkVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpXG5cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRUb3RhbEpvYnMob25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgICAkaHR0cCh7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHVybDogYmFzZVVybCxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgZGF0YTogJydcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxuICAgICAgICAgIG9uU3VjY2VzcyhyZXNwb25zZS5kYXRhLnRvdGFsX2pvYnMpXG5cbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG9uRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dClcblxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEpvYkJ5SWQoaWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB1cmw6IGJhc2VVcmwgKyAnLycgKyBpZCxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgZGF0YTogJydcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIG9uU3VjY2VzcyhyZXNwb25zZS5kYXRhLmRhdGEpXG5cbiAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgb25FcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KVxuXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkSm9iKHBheWxvYWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgdXJsOiBiYXNlVXJsLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICBkYXRhOiB7XG5cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgb25TdWNjZXNzKHJlc3BvbnNlLnN0YXR1c1RleHQpXG4gICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIG9uRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dClcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlZGl0Sm9iKGlkLCBwYXlsb2FkLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcblxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuXHRcdC5mYWN0b3J5KCdzZWVrZXJTZXJ2aWNlJywgc2Vla2VyU2VydmljZSlcblxuXHRzZWVrZXJTZXJ2aWNlLiRpbmplY3QgPSBbJyR3aW5kb3cnLCAnJGh0dHAnXVxuXG5cdGZ1bmN0aW9uIHNlZWtlclNlcnZpY2UoJHdpbmRvdywgJGh0dHApIHtcblx0XHR2YXIgc2VydmljZSA9IHt9XG5cdFx0dmFyIGJhc2VVcmwgPSAnaHR0cHM6Ly9tYW1hYmlzb24tZGV2Lmhlcm9rdWFwcC5jb20vYXBpL3YxL2VtYWtzJ1xuXHRcdHZhciBoZWFkZXJzID0ge1xuXHRcdFx0J0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJ1xuXHRcdH1cblxuXHRcdHNlcnZpY2Uuc2Vla2VyID0gW11cblx0XHRzZXJ2aWNlLmdldFNlZWtlcnNQZXJQYWdlID0gZ2V0U2Vla2Vyc1BlclBhZ2UgICBcblx0XHRzZXJ2aWNlLmFkZFNlZWtlciA9IGFkZFNlZWtlclxuXHRcdHNlcnZpY2UuZGVsZXRlU2Vla2VyID0gZGVsZXRlU2Vla2VyIFxuXHRcdHNlcnZpY2UuZ2V0U2Vla2VyQnlJZCA9IGdldFNlZWtlckJ5SWRcblx0XHRzZXJ2aWNlLmVkaXRTZWVrZXIgPSBlZGl0U2Vla2VyXG5cdFx0c2VydmljZS5nZXRUb3RhbFNlZWtlciA9IGdldFRvdGFsU2Vla2VyXG5cdFx0XG5cdFx0cmV0dXJuIHNlcnZpY2VcblxuXHRcdGZ1bmN0aW9uIGdldFNlZWtlcnNQZXJQYWdlKHBhZ2UsIGxpbWl0RGF0YVBlclBhZ2UsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0XHR1cmw6IGJhc2VVcmwgKyAnP3BhZ2U9JyArIHBhZ2UgKyAnJmxpbWl0PScgKyBsaW1pdERhdGFQZXJQYWdlLFxuXHRcdFx0XHRoZWFkZXJzOiBoZWFkZXJzLFxuXHRcdFx0XHRkYXRhOiAnJ1xuXHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRvblN1Y2Nlc3MocmVzcG9uc2UuZGF0YSlcblx0XHRcdFx0fSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRvbkVycm9yKCdDb3VsZG5cXCd0IEZldGNoIERhdGEnKVxuXHRcdFx0XHR9KVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFRvdGFsU2Vla2VyKG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB1cmw6IGJhc2VVcmwsXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgIGRhdGE6ICcnXG4gICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvblN1Y2Nlc3MocmVzcG9uc2UuZGF0YS50b3RhbF9lbWFrKVxuICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvbkVycm9yKHJlc3BvbnNlLnN0YXR1c1N0ZXh0KVxuXG4gICAgICAgIH0pXG4gICAgfVxuXG5cdFx0ZnVuY3Rpb24gZ2V0U2Vla2VyQnlJZChpZCwgb25TdWNjZXNzLCBvbkVycm9yKSB7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG5cdFx0XHRcdHVybDogYmFzZVVybCArICcvJyArIGlkLFxuXHRcdFx0XHRkYXRhOiAnJ1xuXHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRvblN1Y2Nlc3MocmVzcG9uc2UuZGF0YS5kYXRhKVxuXHRcdFx0XHR9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRvbkVycm9yKHJlc3BvbnNlLnN0YXR1cylcblx0XHRcdFx0fSlcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBhZGRTZWVrZXIocGF5bG9hZCwgb25TdWNjZXNzLCBvbkVycm9yKSB7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6IGJhc2VVcmwsXG5cdFx0XHRcdGhlYWRlcnM6IGhlYWRlcnMsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRuYW1lOiBwYXlsb2FkLm5hbWUsXG5cdFx0XHRcdFx0dXNlcm5hbWU6IHBheWxvYWQudXNlcm5hbWUsXG5cdFx0XHRcdFx0cGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQsXG5cdFx0XHRcdFx0cGhvbmU6IHBheWxvYWQucGhvbmUsXG5cdFx0XHRcdFx0ZW1haWw6IHBheWxvYWQuZW1haWwsXG5cdFx0XHRcdFx0YWRkcmVzczogcGF5bG9hZC5hZGRyZXNzLFxuXHRcdFx0XHRcdHBob3RvOiBwYXlsb2FkLnBob3RvXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0b25TdWNjZXNzKHJlc3BvbnNlLnN0YXR1cylcblx0XHRcdFx0fSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRvbkVycm9yKHJlc3BvbnNlKVxuXHRcdFx0XHR9KVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGVkaXRTZWVrZXIoaWQsIHBheWxvYWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQVVQnLFxuXHRcdFx0XHR1cmw6IGJhc2VVcmwgKyAnLycgKyBpZCxcblx0XHRcdFx0aGVhZGVyczogaGVhZGVycyxcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGlkOiBpZCxcblx0XHRcdFx0XHRuYW1lOiB2bS5uYW1lLFxuXHRcdFx0XHRcdHVzZXJuYW1lOiB2bS51c2VybmFtZSxcblx0XHRcdFx0XHRwYXNzd29yZDogdm0ucGFzc3dvcmQsXG5cdFx0XHRcdFx0cGhvbmU6IHZtLnBob25lLFxuXHRcdFx0XHRcdGVtYWlsOiB2bS5lbWFpbCxcblx0XHRcdFx0XHRhZGRyZXNzOiB2bS5hZGRyZXNzXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0b25TdWNjZXNzKHJlc3BvbnNlLnN0YXR1cylcblx0XHRcdFx0fSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRvbkVycm9yKHJlc3BvbnNlKVxuXHRcdFx0XHR9KVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGRlbGV0ZVNlZWtlcihpZCwgb25TdWNjZXNzLCBvbkVycm9yKSB7XG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ0RFTEVURScsXG5cdFx0XHRcdHVybDogYmFzZVVybCArICcvJyArIGlkLFxuXHRcdFx0XHRoZWFkZXJzOiBoZWFkZXJzXG5cdFx0XHR9KVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRcdG9uU3VjY2VzcyhyZXNwb25zZS5zdGF0dXMpXG5cdFx0XHRcdH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0XHRcdG9uRXJyb3IocmVzcG9uc2UpXG5cdFx0XHRcdH0pXG5cdFx0fVxuXHR9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdzdXBwbGllclNlcnZpY2UnLCBzZXJ2aWNlKVxuXG5cbiAgZnVuY3Rpb24gc2VydmljZSggJGh0dHApIHtcbiAgICB2YXIgc2VydmljZSA9IHt9XG4gICAgdmFyIGJhc2VVcmwgPSAnaHR0cHM6Ly9tYW1hYmlzb24tZGV2Lmhlcm9rdWFwcC5jb20vYXBpL3YxL3N1cHBsaWVycydcbiAgICB2YXIgaGVhZGVycyA9IHtcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKidcbiAgICB9XG5cbiAgICBzZXJ2aWNlLnN1cHBsaWVyID0gW11cbiAgICBzZXJ2aWNlLmdldFN1cHBsaWVyUGVyUGFnZSA9IGdldFN1cHBsaWVyUGVyUGFnZVxuICAgIHNlcnZpY2UuZ2V0VG90YWxTdXBwbGllciA9IGdldFRvdGFsU3VwcGxpZXJcbiAgICBzZXJ2aWNlLmdldFN1cHBsaWVyQnlJZCA9IGdldFN1cHBsaWVyQnlJZFxuICAgIHNlcnZpY2UuYWRkU3VwcGxpZXIgPSBhZGRTdXBwbGllclxuICAgIHNlcnZpY2UuZWRpdFN1cHBsaWVyID0gZWRpdFN1cHBsaWVyXG4gICAgc2VydmljZS5kZWxldGVTdXBwbGllciA9IGRlbGV0ZVN1cHBsaWVyXG5cbiAgICByZXR1cm4gc2VydmljZVxuXG4gICAgZnVuY3Rpb24gZ2V0U3VwcGxpZXJQZXJQYWdlKHBhZ2UsIGRhdGFQZXJQYWdlLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICRodHRwKHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgdXJsOiBiYXNlVXJsICsgJz9wYWdlPScgKyBwYWdlICsgJyZsaW1pdD0nICsgZGF0YVBlclBhZ2UsXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgIGRhdGE6ICcnXG4gICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvblN1Y2Nlc3MocmVzcG9uc2UuZGF0YSlcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcblxuICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvbkVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpXG5cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRUb3RhbFN1cHBsaWVyKG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB1cmw6IGJhc2VVcmwsXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgIGRhdGE6ICcnXG4gICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvblN1Y2Nlc3MocmVzcG9uc2UuZGF0YS50b3RhbF9zdXBwbGllcilcblxuICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvbkVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpXG5cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTdXBwbGllckJ5SWQoaWQsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICB1cmw6IGJhc2VVcmwgKyAnLycgKyBpZCxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgZGF0YTogJydcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIG9uU3VjY2VzcyhyZXNwb25zZS5kYXRhLmRhdGEpXG5cbiAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgb25FcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KVxuXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkU3VwcGxpZXIocGF5bG9hZCwgb25TdWNjZXNzLCBvbkVycm9yKSB7IC8vIHBheWxvYWQgPSBzdXBwbGllciBvYmplY3Qgd2l0aG91dCBJZFxuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgdXJsOiBiYXNlVXJsLFxuICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLFxuICAgICAgICAgIHVzZXJuYW1lOiBwYXlsb2FkLnVzZXJuYW1lLFxuICAgICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkOiBwYXlsb2FkLnBhc3N3b3JkLFxuICAgICAgICAgIHBob25lOiBwYXlsb2FkLnBob25lLFxuICAgICAgICAgIGNvbXBhbnlfYWRkcmVzczogcGF5bG9hZC5jb21wYW55X2FkZHJlc3MsXG4gICAgICAgICAgY29tcGFueV9wcm9maWxlOiBwYXlsb2FkLmNvbXBhbnlfcHJvZmlsZSxcbiAgICAgICAgICBwaG90bzogcGF5bG9hZC5waG90b1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvblN1Y2Nlc3MocmVzcG9uc2Uuc3RhdHVzVGV4dClcbiAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgb25FcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRTdXBwbGllcihpZCwgcGF5bG9hZCwgb25TdWNjZXNzLCBvbkVycm9yKSB7IC8vIHBheWxvYWQgPSBzdXBwbGllciBvYmplY3Qgd2l0aG91dCBJZFxuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICB1cmw6IGJhc2VVcmwsXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAnaWQnOiBpZCxcbiAgICAgICAgICAnbmFtZSc6IHBheWxvYWQubmFtZSxcbiAgICAgICAgICAndXNlcm5hbWUnOiBwYXlsb2FkLnVzZXJuYW1lLFxuICAgICAgICAgICdlbWFpbCc6IHBheWxvYWQuZW1haWwsXG4gICAgICAgICAgJ3Bhc3N3b3JkJzogcGF5bG9hZC5wYXNzd29yZCxcbiAgICAgICAgICAncGhvbmUnOiBwYXlsb2FkLnBob25lLFxuICAgICAgICAgICdjb21wYW55X2FkZHJlc3MnOiBwYXlsb2FkLmNvbXBhbnlfYWRkcmVzcyxcbiAgICAgICAgICAnY29tcGFueV9wcm9maWxlJzogcGF5bG9hZC5jb21wYW55X3Byb2ZpbGUsXG4gICAgICAgICAgJ3Bob3RvJzogcGF5bG9hZC5waG90b1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICBvblN1Y2Nlc3MocmVzcG9uc2Uuc3RhdHVzVGV4dClcbiAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgb25FcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVN1cHBsaWVyKGlkLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAgICRodHRwKHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgICAgdXJsOiBiYXNlVXJsICsgJy8nICsgaWQsXG4gICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcbiAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIG9uU3VjY2VzcyhyZXNwb25zZS5zdGF0dXNUZXh0KVxuXG4gICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIG9uRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dClcblxuICAgICAgICB9KVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgICAgICAuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIEFwcENvbnRyb2xsZXIpXG5cbiAgICBmdW5jdGlvbiBBcHBDb250cm9sbGVyKCR0cmFuc2l0aW9ucywgJHJvb3RTY29wZSwgYXV0aFNlcnZpY2UsICRzdGF0ZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzXG4gICAgICAgIHZtLm9uU3RhcnQgPSBvblN0YXJ0XG5cbiAgICAgICAgb25TdGFydCgpXG5cbiAgICAgICAgZnVuY3Rpb24gb25TdGFydCgpIHtcbiAgICAgICAgICAgIGlmICghYXV0aFNlcnZpY2UuaXNMb2dnZWRJbigpKSAkc3RhdGUuZ28oJ2xvZ2luJylcbiAgICAgICAgfVxuXG4gICAgICAgICR0cmFuc2l0aW9ucy5vbkVudGVyKHt9LCBmdW5jdGlvbiAodHJhbnNpdGlvbikge1xuICAgICAgICAgICAgaWYgKCFhdXRoU2VydmljZS5pc0xvZ2dlZEluKCkpICRzdGF0ZS5nbygnbG9naW4nKVxuICAgICAgICB9KVxuXG4gICAgfVxufSkoKVxuIiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgICAgICAuY29udHJvbGxlcignTmF2YmFyQ29udHJvbGxlcicsIE5hdmJhckNvbnRyb2xsZXIpXG4gICAgICAgIFxuICAgIGZ1bmN0aW9uIE5hdmJhckNvbnRyb2xsZXIoYXV0aFNlcnZpY2UsICR3aW5kb3csICRzdGF0ZSkge1xuICAgICAgICB2YXIgdm0gPSB0aGlzXG5cbiAgICAgICAgdm0ub3BlblNpZGVCYXIgPSBvcGVuU2lkZUJhclxuICAgICAgICB2bS5sb2dvdXQgPSBsb2dvdXRcblxuICAgICAgICBmdW5jdGlvbiBvcGVuU2lkZUJhcigpIHtcbiAgICAgICAgICAgIHZhciBzaWRlQmFyV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlLW5hdl9fd3JhcHBlcicpXG4gICAgICAgICAgICBzaWRlQmFyV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdzaWRlLW5hdl9fd3JhcHBlci0tb3BlbicpXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09PSAnT0snKSB7XG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cuYWxlcnQoJ0xvZ2dpbmcgb3V0JylcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59KSgpXG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgICAgIC5jb250cm9sbGVyKCdTaWRlTmF2Q29udHJvbGxlcicsIFNpZGVOYXZDb250cm9sbGVyKVxuXG4gICAgU2lkZU5hdkNvbnRyb2xsZXIuJGluamVjdCA9IFtdXG5cbiAgICBmdW5jdGlvbiBTaWRlTmF2Q29udHJvbGxlcigpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpc1xuICAgICAgICB2YXIgc2lkZUJhcldyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaWRlLW5hdl9fd3JhcHBlcicpWzBdXG4gICAgICAgIHZtLmNsb3NlU2lkZUJhciA9IGNsb3NlU2lkZUJhclxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gY2xvc2VTaWRlQmFyKCkge1xuICAgICAgICAgICAgc2lkZUJhcldyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2lkZS1uYXZfX3dyYXBwZXItLW9wZW4nKVxuICAgICAgICB9XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgICAgICAuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsIERhc2hib2FyZENvbnRyb2xsZXIpXG4gICAgZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcihqb2JzU2VydmljZSwgc2Vla2VyU2VydmljZSwgc3VwcGxpZXJTZXJ2aWNlKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXNcbiAgICAgICAgdm0udG90YWxKb2JzID0gbnVsbFxuICAgICAgICB2bS50b3RhbFNlZWtlciA9IG51bGxcbiAgICAgICAgdm0udG90YWxTdXBwbGllciA9IG51bGxcblxuICAgICAgICB2bS5nZXRUb3RhbEpvYnMgPSBnZXRUb3RhbEpvYnNcbiAgICAgICAgdm0uZ2V0VG90YWxTZWVrZXIgPSBnZXRUb3RhbFNlZWtlclxuICAgICAgICB2bS5nZXRUb3RhbFN1cHBsaWVyID0gZ2V0VG90YWxTdXBwbGllclxuXG4gICAgICAgIC8vXG4gICAgICAgIGdldFRvdGFsSm9icygpXG4gICAgICAgIGdldFRvdGFsU2Vla2VyKClcbiAgICAgICAgZ2V0VG90YWxTdXBwbGllcigpXG5cbiAgICAgICAgLy8vLy8vLy8vLy8vL1xuICAgICAgICBmdW5jdGlvbiBnZXRUb3RhbEpvYnMoKSB7XG4gICAgICAgICAgICBqb2JzU2VydmljZS5nZXRUb3RhbEpvYnMoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdm0udG90YWxKb2JzID0gcmVzcG9uc2VcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIC8vIGRvIHNvbWV0aGluZyBoZWhlaGVoZWhlaGhoaGhoaGhoaFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdGFsU2Vla2VyKCkge1xuICAgICAgICAgICAgc2Vla2VyU2VydmljZS5nZXRUb3RhbFNlZWtlcihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2bS50b3RhbFNlZWtlciA9IHJlc3BvbnNlXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBzb21ldGhpbmcgdG8gaGFuZGxlIGVycm9yc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdGFsU3VwcGxpZXIoKSB7XG4gICAgICAgICAgICBzdXBwbGllclNlcnZpY2UuZ2V0VG90YWxTdXBwbGllcihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2bS50b3RhbFN1cHBsaWVyID0gcmVzcG9uc2VcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIC8vICAgICAkd2luZG93LmFsZXJ0KHJlc3BvbnNlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn0pKCkiLCIoZnVuY3Rpb24oKSB7XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuXHRcdC5jb250cm9sbGVyKCdTZWVrZXJDb250cm9sbGVyJywgU2Vla2VyQ29udHJvbGxlcilcblx0XG5cdFNlZWtlckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHdpbmRvdycsICdzZWVrZXJTZXJ2aWNlJ11cblxuXHRmdW5jdGlvbiBTZWVrZXJDb250cm9sbGVyKCR3aW5kb3csIHNlZWtlclNlcnZpY2UpIHtcblx0XHR2YXIgdm0gPSB0aGlzXG5cdFx0dm0uc2Vla2VyID0gW11cblx0XHR2bS5kYXRhRmV0Y2hlZCA9IGZhbHNlXG5cdFx0dm0uZGF0YVBlclBhZ2UgPSAxMFxuXHRcdHZtLnRvdGFsUGFnZSA9IC0xXG5cdFx0dm0uY3VycmVudFBhZ2UgPSBudWxsXG5cdFx0dm0uZGF0YVN0YXR1cyA9ICcnXG5cblx0XHR2bS5pbml0ID0gaW5pdFxuXHRcdHZtLmdldFNlZWtlcnNQZXJQYWdlID0gZ2V0U2Vla2Vyc1BlclBhZ2Vcblx0XHR2bS5kZWxldGVTZWVrZXIgPSBkZWxldGVTZWVrZXJcblxuXHRcdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0XHR2bS5nZXRTZWVrZXJzUGVyUGFnZSgxKVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFNlZWtlcnNQZXJQYWdlKHBhZ2UpIHtcblx0XHRcdGlmICh2bS5jdXJyZW50UGFnZSA9PT0gcGFnZSkgcmV0dXJuXG5cdFx0XHRpZiAocGFnZSA9PT0gMCkgcmV0dXJuXG5cdFx0XHRpZiAocGFnZSA9PT0gdm0udG90YWxQYWdlLmxlbmd0aCArIDEpIHJldHVyblxuXG5cdFx0XHR2bS5kYXRhRmV0Y2hlZCA9IGZhbHNlXG5cdFx0XHR2bS5jdXJyZW50UGFnZSA9IHBhZ2Vcblx0XHRcdHZtLmRhdGFTdGF0dXMgPSAnRmV0Y2hpbmcgZGF0YS4uLidcblxuXHRcdFx0c2Vla2VyU2VydmljZS5nZXRTZWVrZXJzUGVyUGFnZShwYWdlLCB2bS5kYXRhUGVyUGFnZSwgZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHR2bS5zZWVrZXIgPSBkYXRhLmRhdGFcblx0XHRcdFx0dm0udG90YWxQYWdlID0gbmV3IEFycmF5KGRhdGEudG90YWxfcGFnZSlcblx0XHRcdFx0dm0uZGF0YUZldGNoZWQgPSB0cnVlXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHR2bS5kYXRhU3RhdHVzID0gJ0NvdWxkblxcJ3QgZmV0Y2ggZGF0YS4gVHJ5IGFnYWluIGxhdGVyJ1xuXHRcdFx0fSlcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBkZWxldGVTZWVrZXIoaWQpIHtcblx0XHRcdHZtLmRhdGFGZXRjaGVkID0gZmFsc2VcblxuXHRcdFx0c2Vla2VyU2VydmljZS5kZWxldGVTZWVrZXIoaWQsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdHZtLmN1cnJlbnRQYWdlID0gbnVsbFxuXHRcdFx0XHR2bS5pbml0KClcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKVxuXHRcdFx0fSlcblx0XHR9XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgICAgICAuY29udHJvbGxlcignSm9ic0NvbnRyb2xsZXInLCBKb2JzQ29udHJvbGxlcilcbiAgICBcbiAgICBmdW5jdGlvbiBKb2JzQ29udHJvbGxlcigpIHsgfVxufSkoKSIsIihmdW5jdGlvbiAoKSB7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLCBsb2dpbkNvbnRyb2xsZXIpXG5cbiAgZnVuY3Rpb24gbG9naW5Db250cm9sbGVyKGF1dGhTZXJ2aWNlLCAkc3RhdGUsICR3aW5kb3cpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG4gICAgdm0udXNlcm5hbWUgPSBudWxsXG4gICAgdm0ucGFzc3dvcmQgPSBudWxsXG5cbiAgICB2bS5sb2dpbiA9IGxvZ2luXG5cbiAgICAvLy8vLy8vLy8vXG5cbiAgICBmdW5jdGlvbiBsb2dpbigpIHtcbiAgICAgIGlmICghdm0udXNlcm5hbWUgfHwgIXZtLnBhc3N3b3JkKSByZXR1cm5cbiAgICAgIFxuICAgICAgYXV0aFNlcnZpY2UubG9naW4odm0udXNlcm5hbWUsIHZtLnBhc3N3b3JkLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlID09PSAnT0snKSAkc3RhdGUuZ28oJ2Rhc2hib2FyZCcpXG5cbiAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAkd2luZG93LmFsZXJ0KHJlc3BvbnNlKVxuXG4gICAgICB9KVxuICAgIH1cblxuICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpXG5cdFx0LmNvbnRyb2xsZXIoJ1NlZWtlckFkZENvbnRyb2xsZXInLCBTZWVrZXJBZGRDb250cm9sbGVyKVxuXHRcdFxuXHRTZWVrZXJBZGRDb250cm9sbGVyLiRpbmplY3QgPSBbJyR3aW5kb3cnLCAnJHN0YXRlJywgJ3NlZWtlclNlcnZpY2UnXVxuXG5cdGZ1bmN0aW9uIFNlZWtlckFkZENvbnRyb2xsZXIoJHdpbmRvdywgJHN0YXRlLCBzZWVrZXJTZXJ2aWNlKSB7XG5cdFx0dmFyIHZtID0gdGhpc1xuXHRcdHZtLm5hbWUgPSBudWxsXG5cdFx0dm0udXNlcm5hbWUgPSBudWxsXG5cdFx0dm0ucGFzc3dvcmQgPSBudWxsXG5cdFx0dm0uZW1haWwgPSBudWxsXG5cdFx0dm0ucGhvbmUgPSBudWxsXG5cdFx0dm0uYWRkcmVzcyA9IG51bGxcblx0XHR2bS5waG90byA9IHtcblx0XHRcdGZpbGVuYW1lOiAnJyxcblx0XHRcdGZpbGV0eXBlOiAnJyxcblx0XHRcdGZpbGVzaXplOiAnJyxcblx0XHRcdGJhc2U2NDogJydcblx0XHR9XG5cblx0XHR2bS5hZGRTZWVrZXIgPSBhZGRTZWVrZXJcblxuXHRcdGZ1bmN0aW9uIGFkZFNlZWtlcigpIHtcblx0XHRcdGlmICghdm0ubmFtZSB8fCAhdm0udXNlcm5hbWUgfHwgIXZtLnBhc3N3b3JkIHx8ICF2bS5lbWFpbCkgcmV0dXJuXG5cblx0XHRcdHZhciBwYXlsb2FkID0ge1xuXHRcdFx0XHRuYW1lOiB2bS5uYW1lLFxuXHRcdFx0XHR1c2VybmFtZTogdm0udXNlcm5hbWUsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5wYXNzd29yZCxcblx0XHRcdFx0ZW1haWw6IHZtLmVtYWlsLFxuXHRcdFx0XHRwaG9uZTogdm0ucGhvbmUsXG5cdFx0XHRcdGFkZHJlc3M6IHZtLmFkZHJlc3MsXG5cdFx0XHRcdHBob3RvOiAnZGF0YTonICsgdm0ucGhvdG8uZmlsZXR5cGUgKyAnO2Jhc2U2NCwnICsgdm0ucGhvdG8uYmFzZTY0XG5cdFx0XHR9XG5cblx0XHRcdGNvbnNvbGUubG9nKHBheWxvYWQpXG5cblx0XHRcdHNlZWtlclNlcnZpY2UuYWRkU2Vla2VyKHBheWxvYWQsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdHZtLm5hbWUgPSBudWxsXG5cdFx0XHRcdHZtLnVzZXJuYW1lID0gbnVsbFxuXHRcdFx0XHR2bS5wYXNzd29yZCA9IG51bGxcblx0XHRcdFx0dm0uZW1haWwgPSBudWxsXG5cdFx0XHRcdHZtLnBob25lID0gbnVsbFxuXHRcdFx0XHR2bS5hZGRyZXNzID0gbnVsbFxuXHRcdFx0XHR2bS5waG90byA9IG51bGxcblxuXHRcdFx0XHQkc3RhdGUuZ28oJ3NlZWtlcicpXG5cblx0XHRcdFx0Y29uc29sZS5sb2cocmVzcG9uc2UpXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcilcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzdXBwbGllckNvbnRyb2xsZXInLCBjb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIGNvbnRyb2xsZXIoc3VwcGxpZXJTZXJ2aWNlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHdpbmRvdykge1xuICAgIHZhciB2bSA9IHRoaXNcbiAgICB2bS5zdXBwbGllciA9IFtdXG4gICAgdm0uZGF0YUZldGNoZWQgPSBmYWxzZVxuICAgIHZtLmRhdGFQZXJQYWdlID0gMTBcbiAgICB2bS50b3RhbFBhZ2UgPSAtMVxuICAgIHZtLmN1cnJlbnRQYWdlID0gbnVsbFxuICAgIC8vXG4gICAgdm0uZ2V0U3VwcGxpZXJQZXJQYWdlID0gZ2V0U3VwcGxpZXJQZXJQYWdlXG4gICAgdm0uZGVsZXRlU3VwcGxpZXIgPSBkZWxldGVTdXBwbGllclxuXG4gICAgZ2V0U3VwcGxpZXJQZXJQYWdlKDEpXG5cbiAgICAvLy8vXG5cbiAgICBmdW5jdGlvbiBnZXRTdXBwbGllclBlclBhZ2UocGFnZSkge1xuICAgICAgaWYgKHZtLmN1cnJlbnRQYWdlID09PSBwYWdlKSByZXR1cm5cbiAgICAgIGlmIChwYWdlID09PSAwKSByZXR1cm5cbiAgICAgIGlmIChwYWdlID09PSB2bS50b3RhbFBhZ2UubGVuZ3RoICsgMSkgcmV0dXJuXG5cbiAgICAgIHZtLmRhdGFGZXRjaGVkID0gZmFsc2VcbiAgICAgIHZtLmN1cnJlbnRQYWdlID0gcGFnZVxuXG4gICAgICBzdXBwbGllclNlcnZpY2UuZ2V0U3VwcGxpZXJQZXJQYWdlKHBhZ2UsIHZtLmRhdGFQZXJQYWdlLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2bS5zdXBwbGllciA9IGRhdGEuZGF0YVxuICAgICAgICB2bS50b3RhbFBhZ2UgPSBuZXcgQXJyYXkoZGF0YS50b3RhbF9wYWdlKVxuICAgICAgICB2bS5kYXRhRmV0Y2hlZCA9IHRydWVcblxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICR3aW5kb3cuYWxlcnQoZXJyb3IpXG5cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlU3VwcGxpZXIoaW5kZXgpIHtcbiAgICAgIHZtLmRhdGFGZXRjaGVkID0gZmFsc2VcbiAgICAgIHN1cHBsaWVyU2VydmljZS5kZWxldGVTdXBwbGllcihpbmRleCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICR3aW5kb3cuYWxlcnQocmVzcG9uc2UpXG5cbiAgICAgICAgdm0uY3VycmVudFBhZ2UgPSBudWxsXG4gICAgICAgIHZtLmdldFN1cHBsaWVyUGVyUGFnZSgxKVxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICR3aW5kb3cuYWxlcnQoZXJyb3IpXG5cbiAgICAgIH0pXG4gICAgfVxuXG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgICAgICAuY29udHJvbGxlcignU2Vla2VyRWRpdENvbnRyb2xsZXInLCBTZWVrZXJFZGl0Q29udHJvbGxlcilcblxuICAgIFNlZWtlckVkaXRDb250cm9sbGVyLiRpbmplY3QgPSBbJ3NlZWtlclNlcnZpY2UnLCAnJHN0YXRlJywgJyRzdGF0ZVBhcmFtcycsICckd2luZG93J11cblxuICAgIGZ1bmN0aW9uIFNlZWtlckVkaXRDb250cm9sbGVyKHNlZWtlclNlcnZpY2UsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkd2luZG93KSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXNcbiAgICAgICAgdm0uaWQgPSAkc3RhdGVQYXJhbXMuaWRcbiAgICAgICAgdm0uZGF0YVNlZWtlciA9IHt9XG4gICAgICAgIHZtLm5hbWUgPSBudWxsXG5cdFx0dm0udXNlcm5hbWUgPSBudWxsXG5cdFx0dm0ucGFzc3dvcmQgPSBudWxsXG5cdFx0dm0uZW1haWwgPSBudWxsXG5cdFx0dm0ucGhvbmUgPSBudWxsXG5cdFx0dm0uYWRkcmVzcyA9IG51bGxcblx0XHR2bS5waG90byA9IHtcblx0XHRcdGZpbGVuYW1lOiAnJyxcblx0XHRcdGZpbGV0eXBlOiAnJyxcblx0XHRcdGZpbGVzaXplOiAnJyxcblx0XHRcdGJhc2U2NDogJydcbiAgICAgICAgfVxuXG4gICAgICAgIHZtLmluaXQgPSBpbml0XG4gICAgICAgIHZtLmdldFNlZWtlckJ5SWQgPSBnZXRTZWVrZXJCeUlkXG4gICAgICAgIHZtLmVkaXRTZWVrZXIgPSBlZGl0U2Vla2VyXG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIHZtLmdldFNlZWtlckJ5SWQoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBnZXRTZWVrZXJCeUlkKCkge1xuICAgICAgICAgICAgc2Vla2VyU2VydmljZS5nZXRTZWVrZXJCeUlkKHZtLmlkLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHZtLm5hbWUgPSByZXNwb25zZS5uYW1lXG4gICAgICAgICAgICAgICAgdm0udXNlcm5hbWUgPSByZXNwb25zZS51c2VybmFtZVxuICAgICAgICAgICAgICAgIHZtLnBhc3N3b3JkID0gcmVzcG9uc2UucGFzc3dvcmRcbiAgICAgICAgICAgICAgICB2bS5waG9uZSA9IHJlc3BvbnNlLnBob25lXG4gICAgICAgICAgICAgICAgdm0uZW1haWwgPSByZXNwb25zZS5lbWFpbFxuICAgICAgICAgICAgICAgIHZtLnBob25lID0gcmVzcG9uc2UucGhvbmVcbiAgICAgICAgICAgICAgICB2bS5hZGRyZXNzID0gcmVzcG9uc2UuYWRkcmVzc1xuICAgICAgICAgICAgICAgIHZtLnBob3RvID0gcmVzcG9uc2UucGhvdG9cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZWRpdFNlZWtlcigpIHtcblx0XHRcdGlmICghdm0ubmFtZSB8fCAhdm0udXNlcm5hbWUgfHwgIXZtLnBhc3N3b3JkIHx8ICF2bS5lbWFpbCkgcmV0dXJuXG5cblx0XHRcdHZhciBwYXlsb2FkID0ge1xuXHRcdFx0XHRuYW1lOiB2bS5uYW1lLFxuXHRcdFx0XHR1c2VybmFtZTogdm0udXNlcm5hbWUsXG5cdFx0XHRcdHBhc3N3b3JkOiB2bS5wYXNzd29yZCxcblx0XHRcdFx0ZW1haWw6IHZtLmVtYWlsLFxuXHRcdFx0XHRwaG9uZTogdm0ucGhvbmUsXG5cdFx0XHRcdGFkZHJlc3M6IHZtLmFkZHJlc3MsXG5cdFx0XHRcdHBob3RvOiAnZGF0YTonICsgdm0ucGhvdG8uZmlsZXR5cGUgKyAnO2Jhc2U2NCwnICsgdm0ucGhvdG8uYmFzZTY0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNlZWtlclNlcnZpY2UuZWRpdFNlZWtlcih2bS5pZCwgcGF5bG9hZCwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2bS5uYW1lID0gbnVsbFxuICAgICAgICAgICAgICAgIHZtLnVzZXJuYW1lID0gbnVsbFxuICAgICAgICAgICAgICAgIHZtLnBhc3N3b3JkID0gbnVsbFxuICAgICAgICAgICAgICAgIHZtLmVtYWlsID0gbnVsbFxuICAgICAgICAgICAgICAgIHZtLnBob25lID0gbnVsbFxuICAgICAgICAgICAgICAgIHZtLmFkZHJlc3MgPSBudWxsXG4gICAgICAgICAgICAgICAgdm0ucGhvdG8gPSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgZmlsZXR5cGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICBmaWxlc2l6ZTogJycsXG4gICAgICAgICAgICAgICAgICAgIGJhc2U2NDogJydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdzZWVrZXInKVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzdXBwbGllckFkZENvbnRyb2xsZXInLCBjb250cm9sbGVyKVxuXG4gIGZ1bmN0aW9uIGNvbnRyb2xsZXIoc3VwcGxpZXJTZXJ2aWNlLCAkd2luZG93KSB7XG4gICAgdmFyIHZtID0gdGhpc1xuICAgIHZtLm5hbWUgPSBudWxsXG4gICAgdm0udXNlcm5hbWUgPSBudWxsXG4gICAgdm0uZW1haWwgPSBudWxsXG4gICAgdm0ucGFzc3dvcmQgPSBudWxsXG4gICAgdm0ucGhvdG8gPSB7XG4gICAgICBmaWxlbmFtZTogJycsXG4gICAgICBmaWxldHlwZTogJycsXG4gICAgICBmaWxlc2l6ZTogJycsXG4gICAgICBiYXNlNjQ6ICcnXG4gICAgfVxuICAgIHZtLmNvbXBhbnlfYWRkcmVzcyA9IG51bGxcbiAgICB2bS5jb21wYW55X3Byb2ZpbGUgPSBudWxsXG4gICAgLy9cbiAgICB2bS5hZGRTdXBwbGllciA9IGFkZFN1cHBsaWVyXG5cbiAgICAvLy8vXG4gICAgZnVuY3Rpb24gYWRkU3VwcGxpZXIoKSB7XG4gICAgICBpZiAoIXZtLm5hbWUgfHwgIXZtLnVzZXJuYW1lIHx8ICF2bS5lbWFpbCB8fCAhdm0ucGFzc3dvcmQgfHxcbiAgICAgICAgIXZtLnBob25lIHx8ICF2bS5jb21wYW55X2FkZHJlc3MgfHwgIXZtLmNvbXBhbnlfcHJvZmlsZSB8fCAhdm0ucGhvdG8uYmFzZTY0KSByZXR1cm5cblxuICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgIG5hbWU6IHZtLm5hbWUsXG4gICAgICAgIHVzZXJuYW1lOiB2bS51c2VybmFtZSxcbiAgICAgICAgZW1haWw6IHZtLmVtYWlsLFxuICAgICAgICBwYXNzd29yZDogdm0ucGFzc3dvcmQsXG4gICAgICAgIHBob25lOiB2bS5waG9uZSxcbiAgICAgICAgY29tcGFueV9hZGRyZXNzOiB2bS5jb21wYW55X2FkZHJlc3MsXG4gICAgICAgIGNvbXBhbnlfcHJvZmlsZTogdm0uY29tcGFueV9wcm9maWxlLFxuICAgICAgICBwaG90bzogJ2RhdGE6JyArIHZtLnBob3RvLmZpbGV0eXBlICsgJztiYXNlNjQsJyArIHZtLnBob3RvLmJhc2U2NFxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKVxuXG4gICAgICBzdXBwbGllclNlcnZpY2UuYWRkU3VwcGxpZXIocGF5bG9hZCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICR3aW5kb3cuYWxlcnQocmVzcG9uc2UpXG4gICAgICAgIHZtLm5hbWUgPSBudWxsXG4gICAgICAgIHZtLnVzZXJuYW1lID0gbnVsbFxuICAgICAgICB2bS5lbWFpbCA9IG51bGxcbiAgICAgICAgdm0ucGFzc3dvcmQgPSBudWxsXG4gICAgICAgIHZtLnBob25lID0gbnVsbFxuICAgICAgICB2bS5jb21wYW55X2FkZHJlc3MgPSBudWxsXG4gICAgICAgIHZtLmNvbXBhbnlfcHJvZmlsZSA9IG51bGxcbiAgICAgICAgdm0ucGhvdG8gPSBudWxsXG5cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAkd2luZG93LmFsZXJ0KGVycm9yKVxuICAgICAgICBcbiAgICAgIH0pXG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb250cm9sbGVyKCdzdXBwbGllckVkaXRDdHJsJywgY29udHJvbGxlcilcblxuICBmdW5jdGlvbiBjb250cm9sbGVyKHN1cHBsaWVyU2VydmljZSwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICR3aW5kb3cpIHtcbiAgICB2YXIgdm0gPSB0aGlzXG4gICAgdm0uY3VycmVudFN1cHBsaWVyID0ge31cbiAgICB2bS5pZCA9ICRzdGF0ZVBhcmFtcy5pZFxuICAgIHZtLm5hbWUgPSBudWxsXG4gICAgdm0udXNlcm5hbWUgPSBudWxsXG4gICAgdm0uZW1haWwgPSBudWxsXG4gICAgdm0ucGFzc3dvcmQgPSBudWxsXG4gICAgdm0ucGhvbmUgPSBudWxsXG4gICAgdm0ucGhvdG8gPSB7XG4gICAgICB1cmw6ICcnLFxuICAgICAgZmlsZW5hbWU6ICcnLFxuICAgICAgZmlsZXR5cGU6ICcnLFxuICAgICAgZmlsZXNpemU6ICcnLFxuICAgICAgYmFzZTY0OiAnJ1xuICAgIH1cbiAgICB2bS5jb21wYW55X2FkZHJlc3MgPSBudWxsXG4gICAgdm0uY29tcGFueV9wcm9maWxlID0gbnVsbFxuICAgIC8vXG4gICAgdm0uZ2V0U3VwcGxpZXJCeUlkID0gZ2V0U3VwcGxpZXJCeUlkXG4gICAgdm0uZWRpdFN1cHBsaWVyID0gZWRpdFN1cHBsaWVyXG5cbiAgICBnZXRTdXBwbGllckJ5SWQoKVxuXG4gICAgLy8vL1xuICAgIGZ1bmN0aW9uIGdldFN1cHBsaWVyQnlJZCgpIHtcbiAgICAgIHN1cHBsaWVyU2VydmljZS5nZXRTdXBwbGllckJ5SWQoJHN0YXRlUGFyYW1zLmlkLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdm0uY3VycmVudFN1cHBsaWVyID0gcmVzcG9uc2VcblxuICAgICAgICB2bS5uYW1lID0gdm0uY3VycmVudFN1cHBsaWVyLm5hbWVcbiAgICAgICAgdm0udXNlcm5hbWUgPSB2bS5jdXJyZW50U3VwcGxpZXIudXNlcm5hbWVcbiAgICAgICAgdm0uZW1haWwgPSB2bS5jdXJyZW50U3VwcGxpZXIuZW1haWxcbiAgICAgICAgLy8gdm0ucGFzc3dvcmQgPSB2bS5jdXJyZW50U3VwcGxpZXIucGFzc3dvcmRcbiAgICAgICAgdm0ucGhvbmUgPSB2bS5jdXJyZW50U3VwcGxpZXIucGhvbmUgKiAxXG4gICAgICAgIHZtLmNvbXBhbnlfYWRkcmVzcyA9IHZtLmN1cnJlbnRTdXBwbGllci5jb21wYW55X2FkZHJlc3NcbiAgICAgICAgdm0uY29tcGFueV9wcm9maWxlID0gdm0uY3VycmVudFN1cHBsaWVyLmNvbXBhbnlfcHJvZmlsZVxuICAgICAgICB2bS5waG90by51cmwgPSB2bS5jdXJyZW50U3VwcGxpZXIucGhvdG8udXJsXG5cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAkd2luZG93LmFsZXJ0KGVycm9yKVxuXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVkaXRTdXBwbGllcigpIHtcbiAgICAgIGlmICghdm0ubmFtZSB8fCAhdm0udXNlcm5hbWUgfHwgIXZtLmVtYWlsIHx8ICF2bS5wYXNzd29yZCB8fCAhdm0ucGhvbmUgfHwgIXZtLmNvbXBhbnlfYWRkcmVzc1xuICAgICAgICB8fCAhdm0uY29tcGFueV9wcm9maWxlIHx8ICF2bS5waG90bykgcmV0dXJuXG5cbiAgICAgIFxuICAgICAgdmFyIHBheWxvYWQgPSB7XG4gICAgICAgIGlkOiB2bS5pZCxcbiAgICAgICAgbmFtZTogdm0ubmFtZSxcbiAgICAgICAgdXNlcm5hbWU6IHZtLnVzZXJuYW1lLFxuICAgICAgICBlbWFpbDogdm0uZW1haWwsXG4gICAgICAgIHBhc3N3b3JkOiB2bS5wYXNzd29yZCxcbiAgICAgICAgcGhvbmU6IHZtLnBob25lLFxuICAgICAgICBjb21wYW55X2FkZHJlc3M6IHZtLmNvbXBhbnlfYWRkcmVzcyxcbiAgICAgICAgY29tcGFueV9wcm9maWxlOiB2bS5jb21wYW55X3Byb2ZpbGUsXG4gICAgICAgIHBob3RvOiAnZGF0YTonICsgdm0ucGhvdG8uZmlsZXR5cGUgKyAnO2Jhc2U2NCwnICsgdm0ucGhvdG8uYmFzZTY0XG4gICAgICB9XG5cbiAgICAgIHN1cHBsaWVyU2VydmljZS5lZGl0U3VwcGxpZXIocGF5bG9hZCwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICR3aW5kb3cuYWxlcnQocmVzcG9uc2UpXG5cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAkd2luZG93LmFsZXJ0KGVycm9yKVxuXG4gICAgICB9KVxuICAgICAgdm0ubmFtZSA9IG51bGxcbiAgICAgIHZtLnVzZXJuYW1lID0gbnVsbFxuICAgICAgdm0uZW1haWwgPSBudWxsXG4gICAgICB2bS5wYXNzd29yZCA9IG51bGxcbiAgICAgIHZtLnBob25lID0gbnVsbFxuICAgICAgdm0ucGhvdG8gPSB7XG4gICAgICAgIGZpbGVuYW1lOiAnJyxcbiAgICAgICAgZmlsZXR5cGU6ICcnLFxuICAgICAgICBmaWxlc2l6ZTogJycsXG4gICAgICAgIGJhc2U2NDogJydcbiAgICAgIH1cbiAgICAgIHZtLmNvbXBhbnlfYWRkcmVzcyA9IG51bGxcbiAgICAgIHZtLmNvbXBhbnlfcHJvZmlsZSA9IG51bGxcbiAgICAgICRzdGF0ZS5nbygnc3VwcGxpZXInKVxuICAgIH1cbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgICAgIC5jb21wb25lbnQoJ2FwcCcsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9zcmMvYXBwL2FwcC50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBcHBDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgICAgICB9KVxufSkoKVxuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLmNvbXBvbmVudCgnbmF2YmFyJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL3NyYy9jb21wb25lbnRzL25hdmJhci9uYXZiYXIudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTmF2YmFyQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgfSlcbn0pKClcbiIsIihmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLmNvbXBvbmVudCgnc2lkZU5hdicsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi9zcmMvY29tcG9uZW50cy9zaWRlTmF2L3NpZGVuYXYudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnU2lkZU5hdkNvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgICAgIH0pXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLmNvbXBvbmVudCgnZGFzaGJvYXJkJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi9zcmMvdmlld3MvZGFzaGJvYXJkL2Rhc2hib2FyZC50ZW1wbGF0ZS5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBcIkRhc2hib2FyZENvbnRyb2xsZXJcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJ2bVwiXG4gICAgICAgIH0pXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLmNvbXBvbmVudCgnc2Vla2VyJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi9zcmMvdmlld3Mvc2Vla2VyL3NlZWtlci50ZW1wbGF0ZS5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBcIlNlZWtlckNvbnRyb2xsZXJcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJ2bVwiXG4gICAgICAgIH0pXG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLmNvbXBvbmVudCgnam9icycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vc3JjL3ZpZXdzL2pvYnMvam9icy50ZW1wbGF0ZS5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBcIkpvYnNDb250cm9sbGVyXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwidm1cIlxuICAgICAgICB9KVxufSkoKSIsIihmdW5jdGlvbiAoKSB7XG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5jb21wb25lbnQoJ2xvZ2luJywge1xuICAgICAgdGVtcGxhdGVVcmw6ICcuL3NyYy92aWV3cy9sb2dpbi9sb2dpbi50ZW1wbGF0ZS5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkNvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgICAgICAuY29tcG9uZW50KCdzZWVrZXJBZGQnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vc3JjL3ZpZXdzL3NlZWtlckFkZC9zZWVrZXJBZGQudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnU2Vla2VyQWRkQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgfSlcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLmNvbXBvbmVudCgnc3VwcGxpZXInLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3NyYy92aWV3cy9zdXBwbGllci9zdXBwbGllci50ZW1wbGF0ZS5odG1sXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBcInN1cHBsaWVyQ29udHJvbGxlclwiLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcInZtXCJcbiAgICAgICAgfSlcbn0pKCkiLCIoZnVuY3Rpb24oKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4gICAgICAgIC5jb21wb25lbnQoJ3NlZWtlckVkaXQnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vc3JjL3ZpZXdzL3NlZWtlckVkaXQvc2Vla2VyRWRpdC50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZWVrZXJFZGl0Q29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICAgICAgfSlcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbXBvbmVudCgnc3VwcGxpZXJBZGQnLCB7XG4gICAgICB0ZW1wbGF0ZVVybDogJ3NyYy92aWV3cy9zdXBwbGllckFkZC9zdXBwbGllckFkZC50ZW1wbGF0ZS5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXI6ICdzdXBwbGllckFkZENvbnRyb2xsZXInLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29tcG9uZW50KCdzdXBwbGllckVkaXQnLCB7XG4gICAgICB0ZW1wbGF0ZVVybDogJ3NyYy92aWV3cy9zdXBwbGllckVkaXQvc3VwcGxpZXJFZGl0LnRlbXBsYXRlLmh0bWwnLFxuICAgICAgY29udHJvbGxlcjogJ3N1cHBsaWVyRWRpdEN0cmwnLFxuICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbn0pKCk7Il19
